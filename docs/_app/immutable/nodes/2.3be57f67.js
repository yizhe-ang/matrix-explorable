import{B as cX,C as J1,D as ny,E as uX,F as tv,s as gn,f as ft,e as ca,G as hX,g as pt,d as ae,j as Je,z as bt,A as pn,H as d1,i as Fe,a as Ct,I as i2,h as zt,c as Et,J as r2,K as aa,o as Fc,l as Un,m as Vn,L as ek,n as BT,M as mu,r as Yi,u as Ki,v as Ji,w as Zi,x as Wt,N as fu,O as Ua,P as Uf,Q as jt,R as Ri,S as ox,t as N3,T as ra,p as Wa,U as lx,V as Z1,k as dl,W as Kl,X as Wi,y as tn,Y as iy,Z as mn,_ as og,$ as ry,a0 as Bp,a1 as dX,a2 as fX,a3 as xm,a4 as tk,a5 as rL,a6 as sL,a7 as cx,a8 as pX,a9 as rr}from"../chunks/scheduler.e7f02e84.js";import{g as Hs,t as Me,c as Gs,a as we,S as Sn,i as Mn,b as ot,d as lt,m as ct,e as ut,f as e_,h as Af,j as tp}from"../chunks/index.733d931a.js";import{w as Ms,d as ou,r as RT}from"../chunks/index.0b278328.js";import{c as dt,g as U0,a as mX,b as gX,h as F3,s as z3,d as gu,e as vu,f as Au,i as f1,j as U3,t as ux,k as DT,p as V3,m as wf,n as H3,o as od,q as Jp,r as mf,u as gf,v as sg,w as VA,x as Uw,y as _f,z as Qu,A as v0,B as Vw,C as p1,D as Hw,E as r0,F as hx,G as nk,H as ik,I as rk,J as Nr,K as Hl,L as uu,M as Tg,N as vX,O as u0,P as sk,Q as s2,R as a2,S as o2,T as l2,U as sy,V as c2,W as u2,X as AX,Y as ak}from"../chunks/index.9c4f5a04.js";function aL(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const s=Object.getOwnPropertyDescriptor(n,r);s&&Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}function oL(i,e){const t=e.token={};function n(r,s,a,o){if(e.token!==t)return;e.resolved=o;let l=e.ctx;a!==void 0&&(l=l.slice(),l[a]=o);const c=r&&(e.current=r)(l);let u=!1;e.block&&(e.blocks?e.blocks.forEach((h,d)=>{d!==s&&h&&(Hs(),Me(h,1,1,()=>{e.blocks[d]===h&&(e.blocks[d]=null)}),Gs())}):e.block.d(1),c.c(),we(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[s]=c),u&&uX()}if(cX(i)){const r=J1();if(i.then(s=>{ny(r),n(e.then,1,e.value,s),ny(null)},s=>{if(ny(r),n(e.catch,2,e.error,s),ny(null),!e.hasCatch)throw s}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,i),!0;e.resolved=i}}function lL(i,e,t){const n=e.slice(),{resolved:r}=i;i.current===i.then&&(n[i.value]=r),i.current===i.catch&&(n[i.error]=r),i.block.p(n,t)}function lo(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function _X(i,e){i.d(1),e.delete(i.key)}function cL(i,e){Me(i,1,1,()=>{e.delete(i.key)})}function LT(i,e,t,n,r,s,a,o,l,c,u,h){let d=i.length,f=s.length,m=d;const A={};for(;m--;)A[i[m].key]=m;const _=[],v=new Map,w=new Map,x=[];for(m=f;m--;){const P=h(r,s,m),k=t(P);let M=a.get(k);M?n&&x.push(()=>M.p(P,e)):(M=c(k,P),M.c()),v.set(k,_[m]=M),k in A&&w.set(k,Math.abs(m-A[k]))}const C=new Set,S=new Set;function I(P){we(P,1),P.m(o,u),a.set(P.key,P),u=P.first,f--}for(;d&&f;){const P=_[f-1],k=i[d-1],M=P.key,R=k.key;P===k?(u=P.first,d--,f--):v.has(R)?!a.has(M)||C.has(M)?I(P):S.has(R)?d--:w.get(M)>w.get(R)?(S.add(M),I(P)):(C.add(R),d--):(l(k,a),d--)}for(;d--;){const P=i[d];v.has(P.key)||l(P,a)}for(;f;)I(_[f-1]);return tv(x),_}function si(i,e){const t={},n={},r={$$scope:1};let s=i.length;for(;s--;){const a=i[s],o=e[s];if(o){for(const l in a)l in o||(n[l]=1);for(const l in o)r[l]||(t[l]=o[l],r[l]=1);i[s]=o}else for(const l in a)r[l]=1}for(const a in n)a in t||(t[a]=void 0);return t}function Bs(i){return typeof i=="object"&&i!==null?i:{}}const bX='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192.6 50"><path class="st0" d="M150.1 9.5c1.5 0 2.8 1.3 2.8 2.8s-1.3 2.8-2.8 2.8-2.8-1.3-2.8-2.8 1.3-2.8 2.8-2.8zM147.2 17.3h5.6v18.2h-5.6V17.3zM77.1 9.5h-8.9v26h5.6v-8.1h3.3c4.9 0 8.9-4 8.9-8.9s-3.9-9-8.9-9zm0 12.3h-3.3v-6.6h3.3c1.8 0 3.3 1.5 3.3 3.3s-1.4 3.3-3.3 3.3zM105.7 17.6h-5.6v8.9c0 1.8-1.5 3.3-3.3 3.3s-3.3-1.5-3.3-3.3v-8.9h-5.6v8.9c0 4.9 4 8.9 8.9 8.9s8.9-4 8.9-8.9v-8.9zM164.1 17.6c-4.9 0-8.9 4-8.9 8.9v8.9h5.6v-8.9c0-1.8 1.5-3.3 3.3-3.3s3.3 1.5 3.3 3.3v8.9h5.6v-8.9c0-4.9-4-8.9-8.9-8.9zM119.7 16.2v1.4h-3.3c-4.9 0-8.9 4-8.9 8.9s4 8.9 8.9 8.9h8.9V9.5l-5.6 3.3v3.4zm.1 8.4V29.8h-3.3c-1.8 0-3.3-1.5-3.3-3.3s1.5-3.3 3.3-3.3h3.3v1.4zM139.3 16.2v1.4H136c-4.9 0-8.9 4-8.9 8.9s4 8.9 8.9 8.9h8.9V9.5l-5.6 3.3v3.4zm.1 8.4V29.8H136c-1.8 0-3.3-1.5-3.3-3.3s1.5-3.3 3.3-3.3h3.3v1.4h.1zM183.7 17.6c-4.9 0-8.9 4-8.9 8.9s4 8.9 8.9 8.9h3.3v5.1c0 1.8-1.5 3.3-3.3 3.3s-3.3-1.5-3.3-3.3V38l-5.6 3.3c.4 4.5 4.2 8.1 8.9 8.1 4.9 0 8.9-4 8.9-8.9V17.6h-8.9zm3.3 5.8V30h-3.3c-1.8 0-3.3-1.5-3.3-3.3s1.5-3.3 3.3-3.3h3.3zM28.6 17.6c-1.2 0-2.3.2-3.3.6V9.5l-5.6 3.3v22.6h5.6v-8.9c0-1.8 1.5-3.3 3.3-3.3s3.3 1.5 3.3 3.3v8.9h5.6v-8.9c0-4.9-4-8.9-8.9-8.9zM17.8 9.5H0v5.6h6.1v20.3h5.6V15.1h6.1V9.5zM48.3 30.2c-.4 0-1.2-.1-1.8-.4l5.2-2.1 5.6-2.3-1-2.3-.1-.2c-.1-.3-.3-.6-.5-1-.1-.1-.1-.2-.2-.3 0 0 0-.1-.1-.1l-.1-.1-.1-.1c-1.6-2.2-4-3.5-6.7-3.7h-.6c-4.9 0-8.9 4-8.9 8.9 0 .4 0 .9.1 1.4V28.2c0 .3.1.5.2.8v.2c.1.3.2.7.4 1v.2c.1.3.3.5.4.8 0 .1.1.1.1.2.1.2.3.4.4.6v.1s0 .1.1.1l.1.1c1.7 2.1 4.4 3.4 7.2 3.4h6.1v-5.2c.4-.3-3.5-.3-5.8-.3zm7.9-7.3zm-11.6 2.8l-.2.1c.2-1.9 1.8-3.5 3.7-3.5.9 0 1.8.4 2.4.9L46.2 25l-1.6.7z"/></svg>';function yX(i){const e=i-1;return e*e*e+1}function ok(i,e,t){const n=i.slice();return n[5]=e[t],n}function lk(i){let e,t;return{c(){e=ft("link"),this.h()},l(n){e=pt(n,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){Je(e,"rel","preload"),Je(e,"href",t=i[5]),Je(e,"as","font"),Je(e,"type","font/woff2"),Je(e,"crossorigin","")},m(n,r){Fe(n,e,r)},p(n,r){r&16&&t!==(t=n[5])&&Je(e,"href",t)},d(n){n&&ae(e)}}}function wX(i){let e,t,n,r,s,a,o,l,c,u,h,d,f,m,A,_,v,w,x,C,S,I,P,k,M,R;document.title=e=i[0];let N=lo(i[4]),U=[];for(let q=0;q<N.length;q+=1)U[q]=lk(ok(i,N,q));return{c(){t=ft("meta"),n=ft("meta"),r=ft("meta"),s=ft("meta"),a=ft("meta"),o=ft("meta"),l=ft("meta"),c=ft("meta"),u=ft("meta"),h=ft("meta"),f=ft("meta"),m=ft("meta"),A=ft("meta"),_=ft("meta"),v=ft("meta"),w=ft("meta"),x=ft("meta"),C=ft("meta"),S=ft("meta"),P=ft("meta"),k=ft("link");for(let q=0;q<U.length;q+=1)U[q].c();R=ca(),this.h()},l(q){const W=hX("svelte-1htu80s",document.head);t=pt(W,"META",{name:!0,content:!0}),n=pt(W,"META",{name:!0,content:!0}),r=pt(W,"META",{name:!0,content:!0}),s=pt(W,"META",{property:!0,content:!0}),a=pt(W,"META",{property:!0,content:!0}),o=pt(W,"META",{property:!0,content:!0}),l=pt(W,"META",{property:!0,content:!0}),c=pt(W,"META",{property:!0,content:!0}),u=pt(W,"META",{property:!0,content:!0}),h=pt(W,"META",{property:!0,content:!0}),f=pt(W,"META",{property:!0,content:!0}),m=pt(W,"META",{property:!0,content:!0}),A=pt(W,"META",{property:!0,content:!0}),_=pt(W,"META",{name:!0,content:!0}),v=pt(W,"META",{name:!0,content:!0}),w=pt(W,"META",{name:!0,content:!0}),x=pt(W,"META",{name:!0,content:!0}),C=pt(W,"META",{name:!0,content:!0}),S=pt(W,"META",{name:!0,content:!0}),P=pt(W,"META",{name:!0,content:!0}),k=pt(W,"LINK",{rel:!0,href:!0});for(let F=0;F<U.length;F+=1)U[F].l(W);R=ca(),W.forEach(ae),this.h()},h(){Je(t,"name","description"),Je(t,"content",i[1]),Je(n,"name","author"),Je(n,"content","The Pudding"),Je(r,"name","news_keywords"),Je(r,"content",i[3]),Je(s,"property","og:title"),Je(s,"content",i[0]),Je(a,"property","og:site_name"),Je(a,"content","The Pudding"),Je(o,"property","og:url"),Je(o,"content",i[2]),Je(l,"property","og:description"),Je(l,"content",i[1]),Je(c,"property","og:type"),Je(c,"content","article"),Je(u,"property","og:locale"),Je(u,"content","en_US"),Je(h,"property","og:image"),Je(h,"content",d=i[2]+"/assets/social-facebook.jpg"),Je(f,"property","og:image:type"),Je(f,"content","image/jpeg"),Je(m,"property","og:image:width"),Je(m,"content","1200"),Je(A,"property","og:image:height"),Je(A,"content","600"),Je(_,"name","twitter:card"),Je(_,"content","summary_large_image"),Je(v,"name","twitter:site"),Je(v,"content","https://pudding.cool"),Je(w,"name","twitter:creator"),Je(w,"content","@puddingviz"),Je(x,"name","twitter:title"),Je(x,"content",i[0]),Je(C,"name","twitter:description"),Je(C,"content",i[1]),Je(S,"name","twitter:image:src"),Je(S,"content",I=i[2]+"/assets/social-twitter.jpg"),Je(P,"name","robots"),Je(P,"content","max-image-preview:large"),Je(k,"rel","canonical"),Je(k,"href",M=i[2]+"/")},m(q,W){bt(document.head,t),bt(document.head,n),bt(document.head,r),bt(document.head,s),bt(document.head,a),bt(document.head,o),bt(document.head,l),bt(document.head,c),bt(document.head,u),bt(document.head,h),bt(document.head,f),bt(document.head,m),bt(document.head,A),bt(document.head,_),bt(document.head,v),bt(document.head,w),bt(document.head,x),bt(document.head,C),bt(document.head,S),bt(document.head,P),bt(document.head,k);for(let F=0;F<U.length;F+=1)U[F]&&U[F].m(document.head,null);bt(document.head,R)},p(q,[W]){if(W&1&&e!==(e=q[0])&&(document.title=e),W&2&&Je(t,"content",q[1]),W&8&&Je(r,"content",q[3]),W&1&&Je(s,"content",q[0]),W&4&&Je(o,"content",q[2]),W&2&&Je(l,"content",q[1]),W&4&&d!==(d=q[2]+"/assets/social-facebook.jpg")&&Je(h,"content",d),W&1&&Je(x,"content",q[0]),W&2&&Je(C,"content",q[1]),W&4&&I!==(I=q[2]+"/assets/social-twitter.jpg")&&Je(S,"content",I),W&4&&M!==(M=q[2]+"/")&&Je(k,"href",M),W&16){N=lo(q[4]);let F;for(F=0;F<N.length;F+=1){const ue=ok(q,N,F);U[F]?U[F].p(ue,W):(U[F]=lk(ue),U[F].c(),U[F].m(R.parentNode,R))}for(;F<U.length;F+=1)U[F].d(1);U.length=N.length}},i:pn,o:pn,d(q){ae(t),ae(n),ae(r),ae(s),ae(a),ae(o),ae(l),ae(c),ae(u),ae(h),ae(f),ae(m),ae(A),ae(_),ae(v),ae(w),ae(x),ae(C),ae(S),ae(P),ae(k),d1(U,q),ae(R)}}}function xX(i,e,t){let{title:n="Title TK"}=e,{description:r="Description TK"}=e,{url:s="https://pudding.cool"}=e,{keywords:a=""}=e,{preloadFont:o=[]}=e;return i.$$set=l=>{"title"in l&&t(0,n=l.title),"description"in l&&t(1,r=l.description),"url"in l&&t(2,s=l.url),"keywords"in l&&t(3,a=l.keywords),"preloadFont"in l&&t(4,o=l.preloadFont)},[n,r,s,a,o]}class CX extends Sn{constructor(e){super(),Mn(this,e,xX,wX,gn,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}function ck(i,e,t){const n=i.slice();return n[5]=e[t],n}function uk(i,e,t){const n=i.slice();n[8]=e[t].hed,n[2]=e[t].url,n[9]=e[t].image;const r=n[2].startsWith("http")?n[2]:`https://pudding.cool/${n[2]}`;return n[10]=r,n}function hk(i){let e,t,n,r,s,a,o=i[8]+"",l,c,u;return{c(){e=ft("div"),t=ft("a"),n=ft("img"),s=Ct(),a=ft("span"),l=Un(o),u=Ct(),this.h()},l(h){e=pt(h,"DIV",{class:!0});var d=zt(e);t=pt(d,"A",{href:!0,class:!0});var f=zt(t);n=pt(f,"IMG",{src:!0,alt:!0}),s=Et(f),a=pt(f,"SPAN",{class:!0});var m=zt(a);l=Vn(m,o),m.forEach(ae),f.forEach(ae),u=Et(d),d.forEach(ae),this.h()},h(){ek(n.src,r="https://pudding.cool/common/assets/thumbnails/640/"+i[9]+".jpg")||Je(n,"src",r),Je(n,"alt","thumbnail"),Je(a,"class","svelte-13ez18p"),Je(t,"href",c=i[10]),Je(t,"class","svelte-13ez18p"),Je(e,"class","story svelte-13ez18p")},m(h,d){Fe(h,e,d),bt(e,t),bt(t,n),bt(t,s),bt(t,a),bt(a,l),bt(e,u)},p(h,d){d&1&&!ek(n.src,r="https://pudding.cool/common/assets/thumbnails/640/"+h[9]+".jpg")&&Je(n,"src",r),d&1&&o!==(o=h[8]+"")&&BT(l,o),d&1&&c!==(c=h[10])&&Je(t,"href",c)},d(h){h&&ae(e)}}}function dk(i){let e,t,n,r=i[5].name.toUpperCase()+"",s,a;return{c(){e=ft("li"),t=ft("a"),n=ft("span"),s=Un(r),a=Ct(),this.h()},l(o){e=pt(o,"LI",{class:!0});var l=zt(e);t=pt(l,"A",{href:!0,target:!0,class:!0});var c=zt(t);n=pt(c,"SPAN",{class:!0});var u=zt(n);s=Vn(u,r),u.forEach(ae),c.forEach(ae),a=Et(l),l.forEach(ae),this.h()},h(){Je(n,"class","svelte-13ez18p"),Je(t,"href",i[5].url),Je(t,"target","_self"),Je(t,"class","svelte-13ez18p"),Je(e,"class","svelte-13ez18p")},m(o,l){Fe(o,e,l),bt(e,t),bt(t,n),bt(n,s),bt(e,a)},p:pn,d(o){o&&ae(e)}}}function EX(i){let e,t,n,r,s,a,o,l,c=`<a href="https://pudding.cool" target="_self" class="svelte-13ez18p">The Pudding</a>
			is a digital publication that explains ideas debated in culture with visual
			essays.`,u,h,d,f=lo(i[0]),m=[];for(let v=0;v<f.length;v+=1)m[v]=hk(uk(i,f,v));let A=lo(i[1]),_=[];for(let v=0;v<A.length;v+=1)_[v]=dk(ck(i,A,v));return{c(){e=ft("footer"),t=ft("section");for(let v=0;v<m.length;v+=1)m[v].c();n=Ct(),r=ft("section"),s=ft("div"),a=new i2(!1),o=Ct(),l=ft("p"),l.innerHTML=c,u=Ct(),h=ft("section"),d=ft("ul");for(let v=0;v<_.length;v+=1)_[v].c();this.h()},l(v){e=pt(v,"FOOTER",{class:!0});var w=zt(e);t=pt(w,"SECTION",{class:!0});var x=zt(t);for(let k=0;k<m.length;k+=1)m[k].l(x);x.forEach(ae),n=Et(w),r=pt(w,"SECTION",{class:!0});var C=zt(r);s=pt(C,"DIV",{class:!0});var S=zt(s);a=r2(S,!1),S.forEach(ae),o=Et(C),l=pt(C,"P",{"data-svelte-h":!0}),aa(l)!=="svelte-qqs5dy"&&(l.innerHTML=c),C.forEach(ae),u=Et(w),h=pt(w,"SECTION",{class:!0});var I=zt(h);d=pt(I,"UL",{class:!0});var P=zt(d);for(let k=0;k<_.length;k+=1)_[k].l(P);P.forEach(ae),I.forEach(ae),w.forEach(ae),this.h()},h(){Je(t,"class","stories svelte-13ez18p"),a.a=null,Je(s,"class","wordmark svelte-13ez18p"),Je(r,"class","about svelte-13ez18p"),Je(d,"class","svelte-13ez18p"),Je(h,"class","links svelte-13ez18p"),Je(e,"class","svelte-13ez18p")},m(v,w){Fe(v,e,w),bt(e,t);for(let x=0;x<m.length;x+=1)m[x]&&m[x].m(t,null);bt(e,n),bt(e,r),bt(r,s),a.m(bX,s),bt(r,o),bt(r,l),bt(e,u),bt(e,h),bt(h,d);for(let x=0;x<_.length;x+=1)_[x]&&_[x].m(d,null)},p(v,[w]){if(w&1){f=lo(v[0]);let x;for(x=0;x<f.length;x+=1){const C=uk(v,f,x);m[x]?m[x].p(C,w):(m[x]=hk(C),m[x].c(),m[x].m(t,null))}for(;x<m.length;x+=1)m[x].d(1);m.length=f.length}if(w&2){A=lo(v[1]);let x;for(x=0;x<A.length;x+=1){const C=ck(v,A,x);_[x]?_[x].p(C,w):(_[x]=dk(C),_[x].c(),_[x].m(d,null))}for(;x<_.length;x+=1)_[x].d(1);_.length=A.length}},i:pn,o:pn,d(v){v&&ae(e),d1(m,v),d1(_,v)}}}function SX(i,e,t){let n,r=[];const a=`https://pudding.cool/assets/data/stories.json?v=${Date.now()}`,o=[{name:"about",url:"https://pudding.cool/about"},{name:"facebook",url:"https://facebook.com/pudding.viz/"},{name:"twitter",url:"https://twitter.com/puddingviz/"},{name:"instagram",url:"https://www.instagram.com/the.pudding"},{name:"patreon",url:"https://patreon.com/thepudding/"},{name:"privacy",url:"https://pudding.cool/privacy/"},{name:"newsletter",url:"https://thepuddingmail.substack.com"},{name:"rss",url:"https://pudding.cool/feed/index.xml"}];return Fc(async()=>{n=window.location.href;const c=await(await fetch(a)).json();t(0,r=c.filter(u=>!n.includes(u.url)).slice(0,4))}),[r,o,a]}class MX extends Sn{constructor(e){super(),Mn(this,e,SX,EX,gn,{})}}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const h2="155dev",TX={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},IX={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},uL=0,G3=1,hL=2,PX=3,kX=0,OT=1,d2=2,qu=3,dh=0,Fo=1,fs=2,BX=2,rh=0,kf=1,Q3=2,q3=3,j3=4,dL=5,xf=100,NT=101,FT=102,W3=103,$3=104,zT=200,UT=201,VT=202,HT=203,f2=204,p2=205,GT=206,QT=207,qT=208,jT=209,WT=210,fL=0,pL=1,mL=2,dx=3,gL=4,vL=5,AL=6,_L=7,t_=0,bL=1,yL=2,md=0,wL=1,xL=2,CL=3,$T=4,EL=5,n_=300,_d=301,Vf=302,m1=303,g1=304,nv=306,bd=1e3,oa=1001,T0=1002,ki=1003,v1=1004,XT=1004,yg=1005,YT=1005,Sr=1006,m2=1007,KT=1007,_u=1008,JT=1008,ts=1009,i_=1010,r_=1011,V0=1012,iv=1013,Sc=1014,ns=1015,zo=1016,g2=1017,v2=1018,Bf=1020,ZT=1021,Ps=1023,A2=1024,_2=1025,Rf=1026,I0=1027,lg=1028,e5=1029,cg=1030,t5=1031,n5=1033,KA=33776,Gw=33777,Qw=33778,JA=33779,fx=35840,X3=35841,px=35842,Y3=35843,i5=36196,mx=37492,gx=37496,vx=37808,K3=37809,J3=37810,Z3=37811,eM=37812,tM=37813,nM=37814,iM=37815,rM=37816,sM=37817,aM=37818,oM=37819,lM=37820,cM=37821,ZA=36492,SL=36283,uM=36284,hM=36285,dM=36286,ML=2200,TL=2201,IL=2202,Ig=2300,P0=2301,qw=2302,h0=2400,d0=2401,A1=2402,b2=2500,r5=2501,PL=0,s5=1,Ax=2,_1=3e3,sh=3001,kL=3200,BL=3201,np=0,RL=1,ah="",En="srgb",Dc="srgb-linear",a5="display-p3",RX=0,jw=7680,DX=7681,LX=7682,OX=7683,NX=34055,FX=34056,zX=5386,UX=512,VX=513,HX=514,GX=515,QX=516,qX=517,jX=518,DL=519,LL=512,OL=513,NL=514,FL=515,zL=516,UL=517,VL=518,HL=519,b1=35044,WX=35048,$X=35040,XX=35045,YX=35049,KX=35041,JX=35046,ZX=35050,eY=35042,tY="100",fM="300 es",_x=1035,Xu=2e3,y1=2001;let Rc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}};const ro=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let fk=1234567;const A0=Math.PI/180,Pg=180/Math.PI;function Jl(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(ro[i&255]+ro[i>>8&255]+ro[i>>16&255]+ro[i>>24&255]+"-"+ro[e&255]+ro[e>>8&255]+"-"+ro[e>>16&15|64]+ro[e>>24&255]+"-"+ro[t&63|128]+ro[t>>8&255]+"-"+ro[t>>16&255]+ro[t>>24&255]+ro[n&255]+ro[n>>8&255]+ro[n>>16&255]+ro[n>>24&255]).toLowerCase()}function Ts(i,e,t){return Math.max(e,Math.min(t,i))}function o5(i,e){return(i%e+e)%e}function nY(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function iY(i,e,t){return i!==e?(t-i)/(e-i):0}function e1(i,e,t){return(1-t)*i+t*e}function rY(i,e,t,n){return e1(i,e,1-Math.exp(-t*n))}function sY(i,e=1){return e-Math.abs(o5(i,e*2)-e)}function aY(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function oY(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function lY(i,e){return i+Math.floor(Math.random()*(e-i+1))}function cY(i,e){return i+Math.random()*(e-i)}function uY(i){return i*(.5-Math.random())}function hY(i){i!==void 0&&(fk=i);let e=fk+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function dY(i){return i*A0}function fY(i){return i*Pg}function pM(i){return(i&i-1)===0&&i!==0}function GL(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function bx(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function pY(i,e,t,n,r){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),c=s((e+n)/2),u=a((e+n)/2),h=s((e-n)/2),d=a((e-n)/2),f=s((n-e)/2),m=a((n-e)/2);switch(r){case"XYX":i.set(o*u,l*h,l*d,o*c);break;case"YZY":i.set(l*d,o*u,l*h,o*c);break;case"ZXZ":i.set(l*h,l*d,o*u,o*c);break;case"XZX":i.set(o*u,l*m,l*f,o*c);break;case"YXY":i.set(l*f,o*u,l*m,o*c);break;case"ZYZ":i.set(l*m,l*f,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Yl(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function mi(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const l5={DEG2RAD:A0,RAD2DEG:Pg,generateUUID:Jl,clamp:Ts,euclideanModulo:o5,mapLinear:nY,inverseLerp:iY,lerp:e1,damp:rY,pingpong:sY,smoothstep:aY,smootherstep:oY,randInt:lY,randFloat:cY,randFloatSpread:uY,seededRandom:hY,degToRad:dY,radToDeg:fY,isPowerOfTwo:pM,ceilPowerOfTwo:GL,floorPowerOfTwo:bx,setQuaternionFromProperEuler:pY,normalize:mi,denormalize:Yl};let _t=class QL{constructor(e=0,t=0){QL.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Ts(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*n-a*r+e.x,this.y=s*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Ai=class qL{constructor(e,t,n,r,s,a,o,l,c){qL.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,a,o,l,c)}set(e,t,n,r,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=s,u[5]=l,u[6]=n,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,a=n[0],o=n[3],l=n[6],c=n[1],u=n[4],h=n[7],d=n[2],f=n[5],m=n[8],A=r[0],_=r[3],v=r[6],w=r[1],x=r[4],C=r[7],S=r[2],I=r[5],P=r[8];return s[0]=a*A+o*w+l*S,s[3]=a*_+o*x+l*I,s[6]=a*v+o*C+l*P,s[1]=c*A+u*w+h*S,s[4]=c*_+u*x+h*I,s[7]=c*v+u*C+h*P,s[2]=d*A+f*w+m*S,s[5]=d*_+f*x+m*I,s[8]=d*v+f*C+m*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*a*u-t*o*c-n*s*u+n*o*l+r*s*c-r*a*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=u*a-o*c,d=o*l-u*s,f=c*s-a*l,m=t*h+n*d+r*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/m;return e[0]=h*A,e[1]=(r*c-u*n)*A,e[2]=(o*n-r*a)*A,e[3]=d*A,e[4]=(u*t-r*l)*A,e[5]=(r*s-o*t)*A,e[6]=f*A,e[7]=(n*l-c*t)*A,e[8]=(a*t-n*s)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*a+c*o)+a+e,-r*c,r*l,-r*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(MS.makeScale(e,t)),this}rotate(e){return this.premultiply(MS.makeRotation(-e)),this}translate(e,t){return this.premultiply(MS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}};const MS=new Ai;function jL(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const mY={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ug(i,e){return new mY[i](e)}function w1(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}const pk={};function t1(i){i in pk||(pk[i]=!0,console.warn(i))}function wg(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function TS(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}const gY=new Ai().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),vY=new Ai().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function AY(i){return i.convertSRGBToLinear().applyMatrix3(vY)}function _Y(i){return i.applyMatrix3(gY).convertLinearToSRGB()}const bY={[Dc]:i=>i,[En]:i=>i.convertSRGBToLinear(),[a5]:AY},yY={[Dc]:i=>i,[En]:i=>i.convertLinearToSRGB(),[a5]:_Y},Vl={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(i){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!i},get workingColorSpace(){return Dc},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,e,t){if(this.enabled===!1||e===t||!e||!t)return i;const n=bY[e],r=yY[t];if(n===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(n(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this.workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this.workingColorSpace)}};let Cm;class c5{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Cm===void 0&&(Cm=w1("canvas")),Cm.width=e.width,Cm.height=e.height;const n=Cm.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Cm}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=w1("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=wg(s[a]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(wg(t[n]/255)*255):t[n]=wg(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let wY=0,f0=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:wY++}),this.uuid=Jl(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(IS(r[a].image)):s.push(IS(r[a]))}else s=IS(r);n.url=s}return t||(e.images[this.uuid]=n),n}};function IS(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?c5.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let xY=0;class zr extends Rc{constructor(e=zr.DEFAULT_IMAGE,t=zr.DEFAULT_MAPPING,n=oa,r=oa,s=Sr,a=_u,o=Ps,l=ts,c=zr.DEFAULT_ANISOTROPY,u=ah){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:xY++}),this.uuid=Jl(),this.name="",this.source=new f0(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new _t(0,0),this.repeat=new _t(1,1),this.center=new _t(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ai,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(t1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===sh?En:ah),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==n_)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case bd:e.x=e.x-Math.floor(e.x);break;case oa:e.x=e.x<0?0:1;break;case T0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case bd:e.y=e.y-Math.floor(e.y);break;case oa:e.y=e.y<0?0:1;break;case T0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return t1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===En?sh:_1}set encoding(e){t1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===sh?En:ah}}zr.DEFAULT_IMAGE=null;zr.DEFAULT_MAPPING=n_;zr.DEFAULT_ANISOTROPY=1;let zi=class WL{constructor(e=0,t=0,n=0,r=1){WL.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,c=l[0],u=l[4],h=l[8],d=l[1],f=l[5],m=l[9],A=l[2],_=l[6],v=l[10];if(Math.abs(u-d)<.01&&Math.abs(h-A)<.01&&Math.abs(m-_)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+A)<.1&&Math.abs(m+_)<.1&&Math.abs(c+f+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const x=(c+1)/2,C=(f+1)/2,S=(v+1)/2,I=(u+d)/4,P=(h+A)/4,k=(m+_)/4;return x>C&&x>S?x<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(x),r=I/n,s=P/n):C>S?C<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(C),n=I/r,s=k/r):S<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(S),n=P/s,r=k/s),this.set(n,r,s,t),this}let w=Math.sqrt((_-m)*(_-m)+(h-A)*(h-A)+(d-u)*(d-u));return Math.abs(w)<.001&&(w=1),this.x=(_-m)/w,this.y=(h-A)/w,this.z=(d-u)/w,this.w=Math.acos((c+f+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}};class Va extends Rc{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new zi(0,0,e,t),this.scissorTest=!1,this.viewport=new zi(0,0,e,t);const r={width:e,height:t,depth:1};n.encoding!==void 0&&(t1("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===sh?En:ah),this.texture=new zr(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Sr,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new f0(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class y2 extends zr{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ki,this.minFilter=ki,this.wrapR=oa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class CY extends Va{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new y2(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class w2 extends zr{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ki,this.minFilter=ki,this.wrapR=oa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class EY extends Va{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new w2(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class SY extends Va{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let a=0;a<n;a++)this.texture[a]=s.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}let la=class{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,a,o){let l=n[r+0],c=n[r+1],u=n[r+2],h=n[r+3];const d=s[a+0],f=s[a+1],m=s[a+2],A=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(o===1){e[t+0]=d,e[t+1]=f,e[t+2]=m,e[t+3]=A;return}if(h!==A||l!==d||c!==f||u!==m){let _=1-o;const v=l*d+c*f+u*m+h*A,w=v>=0?1:-1,x=1-v*v;if(x>Number.EPSILON){const S=Math.sqrt(x),I=Math.atan2(S,v*w);_=Math.sin(_*I)/S,o=Math.sin(o*I)/S}const C=o*w;if(l=l*_+d*C,c=c*_+f*C,u=u*_+m*C,h=h*_+A*C,_===1-o){const S=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=S,c*=S,u*=S,h*=S}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,r,s,a){const o=n[r],l=n[r+1],c=n[r+2],u=n[r+3],h=s[a],d=s[a+1],f=s[a+2],m=s[a+3];return e[t]=o*m+u*h+l*f-c*d,e[t+1]=l*m+u*d+c*h-o*f,e[t+2]=c*m+u*f+o*d-l*h,e[t+3]=u*m-o*h-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(n/2),u=o(r/2),h=o(s/2),d=l(n/2),f=l(r/2),m=l(s/2);switch(a){case"XYZ":this._x=d*u*h+c*f*m,this._y=c*f*h-d*u*m,this._z=c*u*m+d*f*h,this._w=c*u*h-d*f*m;break;case"YXZ":this._x=d*u*h+c*f*m,this._y=c*f*h-d*u*m,this._z=c*u*m-d*f*h,this._w=c*u*h+d*f*m;break;case"ZXY":this._x=d*u*h-c*f*m,this._y=c*f*h+d*u*m,this._z=c*u*m+d*f*h,this._w=c*u*h-d*f*m;break;case"ZYX":this._x=d*u*h-c*f*m,this._y=c*f*h+d*u*m,this._z=c*u*m-d*f*h,this._w=c*u*h+d*f*m;break;case"YZX":this._x=d*u*h+c*f*m,this._y=c*f*h+d*u*m,this._z=c*u*m-d*f*h,this._w=c*u*h-d*f*m;break;case"XZY":this._x=d*u*h-c*f*m,this._y=c*f*h-d*u*m,this._z=c*u*m+d*f*h,this._w=c*u*h+d*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=n+o+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(a-r)*f}else if(n>o&&n>h){const f=2*Math.sqrt(1+n-o-h);this._w=(u-l)/f,this._x=.25*f,this._y=(r+a)/f,this._z=(s+c)/f}else if(o>h){const f=2*Math.sqrt(1+o-n-h);this._w=(s-c)/f,this._x=(r+a)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+h-n-o);this._w=(a-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ts(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=n*u+a*o+r*c-s*l,this._y=r*u+a*l+s*o-n*c,this._z=s*u+a*c+n*l-r*o,this._w=a*u-n*o-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+n*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const f=1-t;return this._w=f*a+t*this._w,this._x=f*n+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=a*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(s),n*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},le=class $L{constructor(e=0,t=0,n=0){$L.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(mk.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(mk.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=l*t+a*r-o*n,u=l*n+o*t-s*r,h=l*r+s*n-a*t,d=-s*t-a*n-o*r;return this.x=c*l+d*-s+u*-o-h*-a,this.y=u*l+d*-a+h*-s-c*-o,this.z=h*l+d*-o+c*-a-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-n*l,this.z=n*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return PS.copy(this).projectOnVector(e),this.sub(PS)}reflect(e){return this.sub(PS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Ts(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const PS=new le,mk=new la;class yu{constructor(e=new le(1/0,1/0,1/0),t=new le(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Wh.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Wh.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Wh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Em.copy(e.boundingBox),Em.applyMatrix4(e.matrixWorld),this.union(Em);else{const r=e.geometry;if(r!==void 0)if(t&&r.attributes!==void 0&&r.attributes.position!==void 0){const s=r.attributes.position;for(let a=0,o=s.count;a<o;a++)Wh.fromBufferAttribute(s,a).applyMatrix4(e.matrixWorld),this.expandByPoint(Wh)}else r.boundingBox===null&&r.computeBoundingBox(),Em.copy(r.boundingBox),Em.applyMatrix4(e.matrixWorld),this.union(Em)}const n=e.children;for(let r=0,s=n.length;r<s;r++)this.expandByObject(n[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Wh),Wh.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(sA),ay.subVectors(this.max,sA),Sm.subVectors(e.a,sA),Mm.subVectors(e.b,sA),Tm.subVectors(e.c,sA),ef.subVectors(Mm,Sm),tf.subVectors(Tm,Mm),Rp.subVectors(Sm,Tm);let t=[0,-ef.z,ef.y,0,-tf.z,tf.y,0,-Rp.z,Rp.y,ef.z,0,-ef.x,tf.z,0,-tf.x,Rp.z,0,-Rp.x,-ef.y,ef.x,0,-tf.y,tf.x,0,-Rp.y,Rp.x,0];return!kS(t,Sm,Mm,Tm,ay)||(t=[1,0,0,0,1,0,0,0,1],!kS(t,Sm,Mm,Tm,ay))?!1:(oy.crossVectors(ef,tf),t=[oy.x,oy.y,oy.z],kS(t,Sm,Mm,Tm,ay))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Wh).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Wh).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(jh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),jh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),jh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),jh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),jh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),jh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),jh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),jh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(jh),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const jh=[new le,new le,new le,new le,new le,new le,new le,new le],Wh=new le,Em=new yu,Sm=new le,Mm=new le,Tm=new le,ef=new le,tf=new le,Rp=new le,sA=new le,ay=new le,oy=new le,Dp=new le;function kS(i,e,t,n,r){for(let s=0,a=i.length-3;s<=a;s+=3){Dp.fromArray(i,s);const o=r.x*Math.abs(Dp.x)+r.y*Math.abs(Dp.y)+r.z*Math.abs(Dp.z),l=e.dot(Dp),c=t.dot(Dp),u=n.dot(Dp);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const MY=new yu,aA=new le,BS=new le;class zc{constructor(e=new le,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):MY.setFromPoints(e).getCenter(n);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;aA.subVectors(e,this.center);const t=aA.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(aA,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(BS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(aA.copy(e.center).add(BS)),this.expandByPoint(aA.copy(e.center).sub(BS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const $h=new le,RS=new le,ly=new le,nf=new le,DS=new le,cy=new le,LS=new le;class rv{constructor(e=new le,t=new le(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$h)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=$h.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($h.copy(this.origin).addScaledVector(this.direction,t),$h.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){RS.copy(e).add(t).multiplyScalar(.5),ly.copy(t).sub(e).normalize(),nf.copy(this.origin).sub(RS);const s=e.distanceTo(t)*.5,a=-this.direction.dot(ly),o=nf.dot(this.direction),l=-nf.dot(ly),c=nf.lengthSq(),u=Math.abs(1-a*a);let h,d,f,m;if(u>0)if(h=a*l-o,d=a*o-l,m=s*u,h>=0)if(d>=-m)if(d<=m){const A=1/u;h*=A,d*=A,f=h*(h+a*d+2*o)+d*(a*h+d+2*l)+c}else d=s,h=Math.max(0,-(a*d+o)),f=-h*h+d*(d+2*l)+c;else d=-s,h=Math.max(0,-(a*d+o)),f=-h*h+d*(d+2*l)+c;else d<=-m?(h=Math.max(0,-(-a*s+o)),d=h>0?-s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c):d<=m?(h=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+c):(h=Math.max(0,-(a*s+o)),d=h>0?s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c);else d=a>0?-s:s,h=Math.max(0,-(a*d+o)),f=-h*h+d*(d+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(RS).addScaledVector(ly,d),f}intersectSphere(e,t){$h.subVectors(e.center,this.origin);const n=$h.dot(this.direction),r=$h.dot($h)-n*n,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=n-a,l=n+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return c>=0?(n=(e.min.x-d.x)*c,r=(e.max.x-d.x)*c):(n=(e.max.x-d.x)*c,r=(e.min.x-d.x)*c),u>=0?(s=(e.min.y-d.y)*u,a=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,a=(e.min.y-d.y)*u),n>a||s>r||((s>n||isNaN(n))&&(n=s),(a<r||isNaN(r))&&(r=a),h>=0?(o=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(o=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),n>l||o>r)||((o>n||n!==n)&&(n=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,$h)!==null}intersectTriangle(e,t,n,r,s){DS.subVectors(t,e),cy.subVectors(n,e),LS.crossVectors(DS,cy);let a=this.direction.dot(LS),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;nf.subVectors(this.origin,e);const l=o*this.direction.dot(cy.crossVectors(nf,cy));if(l<0)return null;const c=o*this.direction.dot(DS.cross(nf));if(c<0||l+c>a)return null;const u=-o*nf.dot(LS);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}let jn=class mM{constructor(e,t,n,r,s,a,o,l,c,u,h,d,f,m,A,_){mM.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,a,o,l,c,u,h,d,f,m,A,_)}set(e,t,n,r,s,a,o,l,c,u,h,d,f,m,A,_){const v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=s,v[5]=a,v[9]=o,v[13]=l,v[2]=c,v[6]=u,v[10]=h,v[14]=d,v[3]=f,v[7]=m,v[11]=A,v[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new mM().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Im.setFromMatrixColumn(e,0).length(),s=1/Im.setFromMatrixColumn(e,1).length(),a=1/Im.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,a=Math.cos(n),o=Math.sin(n),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const d=a*u,f=a*h,m=o*u,A=o*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=f+m*c,t[5]=d-A*c,t[9]=-o*l,t[2]=A-d*c,t[6]=m+f*c,t[10]=a*l}else if(e.order==="YXZ"){const d=l*u,f=l*h,m=c*u,A=c*h;t[0]=d+A*o,t[4]=m*o-f,t[8]=a*c,t[1]=a*h,t[5]=a*u,t[9]=-o,t[2]=f*o-m,t[6]=A+d*o,t[10]=a*l}else if(e.order==="ZXY"){const d=l*u,f=l*h,m=c*u,A=c*h;t[0]=d-A*o,t[4]=-a*h,t[8]=m+f*o,t[1]=f+m*o,t[5]=a*u,t[9]=A-d*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const d=a*u,f=a*h,m=o*u,A=o*h;t[0]=l*u,t[4]=m*c-f,t[8]=d*c+A,t[1]=l*h,t[5]=A*c+d,t[9]=f*c-m,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const d=a*l,f=a*c,m=o*l,A=o*c;t[0]=l*u,t[4]=A-d*h,t[8]=m*h+f,t[1]=h,t[5]=a*u,t[9]=-o*u,t[2]=-c*u,t[6]=f*h+m,t[10]=d-A*h}else if(e.order==="XZY"){const d=a*l,f=a*c,m=o*l,A=o*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+A,t[5]=a*u,t[9]=f*h-m,t[2]=m*h-f,t[6]=o*u,t[10]=A*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(TY,e,IY)}lookAt(e,t,n){const r=this.elements;return Nl.subVectors(e,t),Nl.lengthSq()===0&&(Nl.z=1),Nl.normalize(),rf.crossVectors(n,Nl),rf.lengthSq()===0&&(Math.abs(n.z)===1?Nl.x+=1e-4:Nl.z+=1e-4,Nl.normalize(),rf.crossVectors(n,Nl)),rf.normalize(),uy.crossVectors(Nl,rf),r[0]=rf.x,r[4]=uy.x,r[8]=Nl.x,r[1]=rf.y,r[5]=uy.y,r[9]=Nl.y,r[2]=rf.z,r[6]=uy.z,r[10]=Nl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,a=n[0],o=n[4],l=n[8],c=n[12],u=n[1],h=n[5],d=n[9],f=n[13],m=n[2],A=n[6],_=n[10],v=n[14],w=n[3],x=n[7],C=n[11],S=n[15],I=r[0],P=r[4],k=r[8],M=r[12],R=r[1],N=r[5],U=r[9],q=r[13],W=r[2],F=r[6],ue=r[10],J=r[14],Y=r[3],Pe=r[7],Ie=r[11],pe=r[15];return s[0]=a*I+o*R+l*W+c*Y,s[4]=a*P+o*N+l*F+c*Pe,s[8]=a*k+o*U+l*ue+c*Ie,s[12]=a*M+o*q+l*J+c*pe,s[1]=u*I+h*R+d*W+f*Y,s[5]=u*P+h*N+d*F+f*Pe,s[9]=u*k+h*U+d*ue+f*Ie,s[13]=u*M+h*q+d*J+f*pe,s[2]=m*I+A*R+_*W+v*Y,s[6]=m*P+A*N+_*F+v*Pe,s[10]=m*k+A*U+_*ue+v*Ie,s[14]=m*M+A*q+_*J+v*pe,s[3]=w*I+x*R+C*W+S*Y,s[7]=w*P+x*N+C*F+S*Pe,s[11]=w*k+x*U+C*ue+S*Ie,s[15]=w*M+x*q+C*J+S*pe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],f=e[14],m=e[3],A=e[7],_=e[11],v=e[15];return m*(+s*l*h-r*c*h-s*o*d+n*c*d+r*o*f-n*l*f)+A*(+t*l*f-t*c*d+s*a*d-r*a*f+r*c*u-s*l*u)+_*(+t*c*h-t*o*f-s*a*h+n*a*f+s*o*u-n*c*u)+v*(-r*o*u-t*l*h+t*o*d+r*a*h-n*a*d+n*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],m=e[12],A=e[13],_=e[14],v=e[15],w=h*_*c-A*d*c+A*l*f-o*_*f-h*l*v+o*d*v,x=m*d*c-u*_*c-m*l*f+a*_*f+u*l*v-a*d*v,C=u*A*c-m*h*c+m*o*f-a*A*f-u*o*v+a*h*v,S=m*h*l-u*A*l-m*o*d+a*A*d+u*o*_-a*h*_,I=t*w+n*x+r*C+s*S;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/I;return e[0]=w*P,e[1]=(A*d*s-h*_*s-A*r*f+n*_*f+h*r*v-n*d*v)*P,e[2]=(o*_*s-A*l*s+A*r*c-n*_*c-o*r*v+n*l*v)*P,e[3]=(h*l*s-o*d*s-h*r*c+n*d*c+o*r*f-n*l*f)*P,e[4]=x*P,e[5]=(u*_*s-m*d*s+m*r*f-t*_*f-u*r*v+t*d*v)*P,e[6]=(m*l*s-a*_*s-m*r*c+t*_*c+a*r*v-t*l*v)*P,e[7]=(a*d*s-u*l*s+u*r*c-t*d*c-a*r*f+t*l*f)*P,e[8]=C*P,e[9]=(m*h*s-u*A*s-m*n*f+t*A*f+u*n*v-t*h*v)*P,e[10]=(a*A*s-m*o*s+m*n*c-t*A*c-a*n*v+t*o*v)*P,e[11]=(u*o*s-a*h*s-u*n*c+t*h*c+a*n*f-t*o*f)*P,e[12]=S*P,e[13]=(u*A*r-m*h*r+m*n*d-t*A*d-u*n*_+t*h*_)*P,e[14]=(m*o*r-a*A*r-m*n*l+t*A*l+a*n*_-t*o*_)*P,e[15]=(a*h*r-u*o*r+u*n*l-t*h*l-a*n*d+t*o*d)*P,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+n,c*o-r*l,c*l+r*o,0,c*o+r*l,u*o+n,u*l-r*a,0,c*l-r*o,u*l+r*a,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,a){return this.set(1,n,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,u=a+a,h=o+o,d=s*c,f=s*u,m=s*h,A=a*u,_=a*h,v=o*h,w=l*c,x=l*u,C=l*h,S=n.x,I=n.y,P=n.z;return r[0]=(1-(A+v))*S,r[1]=(f+C)*S,r[2]=(m-x)*S,r[3]=0,r[4]=(f-C)*I,r[5]=(1-(d+v))*I,r[6]=(_+w)*I,r[7]=0,r[8]=(m+x)*P,r[9]=(_-w)*P,r[10]=(1-(d+A))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=Im.set(r[0],r[1],r[2]).length();const a=Im.set(r[4],r[5],r[6]).length(),o=Im.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],eu.copy(this);const c=1/s,u=1/a,h=1/o;return eu.elements[0]*=c,eu.elements[1]*=c,eu.elements[2]*=c,eu.elements[4]*=u,eu.elements[5]*=u,eu.elements[6]*=u,eu.elements[8]*=h,eu.elements[9]*=h,eu.elements[10]*=h,t.setFromRotationMatrix(eu),n.x=s,n.y=a,n.z=o,this}makePerspective(e,t,n,r,s,a,o=Xu){const l=this.elements,c=2*s/(t-e),u=2*s/(n-r),h=(t+e)/(t-e),d=(n+r)/(n-r);let f,m;if(o===Xu)f=-(a+s)/(a-s),m=-2*a*s/(a-s);else if(o===y1)f=-a/(a-s),m=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,s,a,o=Xu){const l=this.elements,c=1/(t-e),u=1/(n-r),h=1/(a-s),d=(t+e)*c,f=(n+r)*u;let m,A;if(o===Xu)m=(a+s)*h,A=-2*h;else if(o===y1)m=s*h,A=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=A,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}};const Im=new le,eu=new jn,TY=new le(0,0,0),IY=new le(1,1,1),rf=new le,uy=new le,Nl=new le,gk=new jn,vk=new la;class H0{constructor(e=0,t=0,n=0,r=H0.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],c=r[5],u=r[9],h=r[2],d=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(Ts(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Ts(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ts(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ts(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Ts(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-Ts(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return gk.makeRotationFromQuaternion(e),this.setFromRotationMatrix(gk,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return vk.setFromEuler(this),this.setFromQuaternion(vk,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}H0.DEFAULT_ORDER="XYZ";let x2=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},PY=0;const Ak=new le,Pm=new la,Xh=new jn,hy=new le,oA=new le,kY=new le,BY=new la,_k=new le(1,0,0),bk=new le(0,1,0),yk=new le(0,0,1),RY={type:"added"},wk={type:"removed"};class Bi extends Rc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:PY++}),this.uuid=Jl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Bi.DEFAULT_UP.clone();const e=new le,t=new H0,n=new la,r=new le(1,1,1);function s(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new jn},normalMatrix:{value:new Ai}}),this.matrix=new jn,this.matrixWorld=new jn,this.matrixAutoUpdate=Bi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Bi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new x2,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Pm.setFromAxisAngle(e,t),this.quaternion.multiply(Pm),this}rotateOnWorldAxis(e,t){return Pm.setFromAxisAngle(e,t),this.quaternion.premultiply(Pm),this}rotateX(e){return this.rotateOnAxis(_k,e)}rotateY(e){return this.rotateOnAxis(bk,e)}rotateZ(e){return this.rotateOnAxis(yk,e)}translateOnAxis(e,t){return Ak.copy(e).applyQuaternion(this.quaternion),this.position.add(Ak.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(_k,e)}translateY(e){return this.translateOnAxis(bk,e)}translateZ(e){return this.translateOnAxis(yk,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Xh.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?hy.copy(e):hy.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),oA.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xh.lookAt(oA,hy,this.up):Xh.lookAt(hy,oA,this.up),this.quaternion.setFromRotationMatrix(Xh),r&&(Xh.extractRotation(r.matrixWorld),Pm.setFromRotationMatrix(Xh),this.quaternion.premultiply(Pm.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(RY)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(wk)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(wk)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Xh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Xh.multiply(e.parent.matrixWorld)),e.applyMatrix4(Xh),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectsByProperty(e,t);a.length>0&&(n=n.concat(a))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(oA,e,kY),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(oA,BY,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const s=t[n];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++){const o=r[s];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),h=a(e.shapes),d=a(e.skeletons),f=a(e.animations),m=a(e.nodes);o.length>0&&(n.geometries=o),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),u.length>0&&(n.images=u),h.length>0&&(n.shapes=h),d.length>0&&(n.skeletons=d),f.length>0&&(n.animations=f),m.length>0&&(n.nodes=m)}return n.object=r,n;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}Bi.DEFAULT_UP=new le(0,1,0);Bi.DEFAULT_MATRIX_AUTO_UPDATE=!0;Bi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const tu=new le,Yh=new le,OS=new le,Kh=new le,km=new le,Bm=new le,xk=new le,NS=new le,FS=new le,zS=new le;let dy=!1;class sl{constructor(e=new le,t=new le,n=new le){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),tu.subVectors(e,t),r.cross(tu);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){tu.subVectors(r,t),Yh.subVectors(n,t),OS.subVectors(e,t);const a=tu.dot(tu),o=tu.dot(Yh),l=tu.dot(OS),c=Yh.dot(Yh),u=Yh.dot(OS),h=a*c-o*o;if(h===0)return s.set(-2,-1,-1);const d=1/h,f=(c*l-o*u)*d,m=(a*u-o*l)*d;return s.set(1-f-m,m,f)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Kh),Kh.x>=0&&Kh.y>=0&&Kh.x+Kh.y<=1}static getUV(e,t,n,r,s,a,o,l){return dy===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),dy=!0),this.getInterpolation(e,t,n,r,s,a,o,l)}static getInterpolation(e,t,n,r,s,a,o,l){return this.getBarycoord(e,t,n,r,Kh),l.setScalar(0),l.addScaledVector(s,Kh.x),l.addScaledVector(a,Kh.y),l.addScaledVector(o,Kh.z),l}static isFrontFacing(e,t,n,r){return tu.subVectors(n,t),Yh.subVectors(e,t),tu.cross(Yh).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return tu.subVectors(this.c,this.b),Yh.subVectors(this.a,this.b),tu.cross(Yh).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return sl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return sl.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,s){return dy===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),dy=!0),sl.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}getInterpolation(e,t,n,r,s){return sl.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return sl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return sl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let a,o;km.subVectors(r,n),Bm.subVectors(s,n),NS.subVectors(e,n);const l=km.dot(NS),c=Bm.dot(NS);if(l<=0&&c<=0)return t.copy(n);FS.subVectors(e,r);const u=km.dot(FS),h=Bm.dot(FS);if(u>=0&&h<=u)return t.copy(r);const d=l*h-u*c;if(d<=0&&l>=0&&u<=0)return a=l/(l-u),t.copy(n).addScaledVector(km,a);zS.subVectors(e,s);const f=km.dot(zS),m=Bm.dot(zS);if(m>=0&&f<=m)return t.copy(s);const A=f*c-l*m;if(A<=0&&c>=0&&m<=0)return o=c/(c-m),t.copy(n).addScaledVector(Bm,o);const _=u*m-f*h;if(_<=0&&h-u>=0&&f-m>=0)return xk.subVectors(s,r),o=(h-u)/(h-u+(f-m)),t.copy(r).addScaledVector(xk,o);const v=1/(_+A+d);return a=A*v,o=d*v,t.copy(n).addScaledVector(km,a).addScaledVector(Bm,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let DY=0,ya=class extends Rc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:DY++}),this.uuid=Jl(),this.name="",this.type="Material",this.blending=kf,this.side=dh,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=f2,this.blendDst=p2,this.blendEquation=xf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=dx,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=DL,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=jw,this.stencilZFail=jw,this.stencilZPass=jw,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==kf&&(n.blending=this.blending),this.side!==dh&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(n.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(n.textures=s),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}};const XL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},nu={h:0,s:0,l:0},fy={h:0,s:0,l:0};function US(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}let Ut=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=En){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Vl.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Vl.workingColorSpace){return this.r=e,this.g=t,this.b=n,Vl.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Vl.workingColorSpace){if(e=o5(e,1),t=Ts(t,0,1),n=Ts(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,a=2*n-s;this.r=US(a,s,e+1/3),this.g=US(a,s,e),this.b=US(a,s,e-1/3)}return Vl.toWorkingColorSpace(this,r),this}setStyle(e,t=En){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=En){const n=XL[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=wg(e.r),this.g=wg(e.g),this.b=wg(e.b),this}copyLinearToSRGB(e){return this.r=TS(e.r),this.g=TS(e.g),this.b=TS(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=En){return Vl.fromWorkingColorSpace(so.copy(this),e),Math.round(Ts(so.r*255,0,255))*65536+Math.round(Ts(so.g*255,0,255))*256+Math.round(Ts(so.b*255,0,255))}getHexString(e=En){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Vl.workingColorSpace){Vl.fromWorkingColorSpace(so.copy(this),t);const n=so.r,r=so.g,s=so.b,a=Math.max(n,r,s),o=Math.min(n,r,s);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const h=a-o;switch(c=u<=.5?h/(a+o):h/(2-a-o),a){case n:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-n)/h+2;break;case s:l=(n-r)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Vl.workingColorSpace){return Vl.fromWorkingColorSpace(so.copy(this),t),e.r=so.r,e.g=so.g,e.b=so.b,e}getStyle(e=En){Vl.fromWorkingColorSpace(so.copy(this),e);const t=so.r,n=so.g,r=so.b;return e!==En?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(nu),nu.h+=e,nu.s+=t,nu.l+=n,this.setHSL(nu.h,nu.s,nu.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(nu),e.getHSL(fy);const n=e1(nu.h,fy.h,t),r=e1(nu.s,fy.s,t),s=e1(nu.l,fy.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const so=new Ut;Ut.NAMES=XL;class Lo extends ya{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=t_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const pd=LY();function LY(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(n[l]=0,n[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(n[l]=1024>>-c-14,n[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(n[l]=c+15<<10,n[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(n[l]=31744,n[l|256]=64512,r[l]=24,r[l|256]=24):(n[l]=31744,n[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function nl(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=Ts(i,-65504,65504),pd.floatView[0]=i;const e=pd.uint32View[0],t=e>>23&511;return pd.baseTable[t]+((e&8388607)>>pd.shiftTable[t])}function HA(i){const e=i>>10;return pd.uint32View[0]=pd.mantissaTable[pd.offsetTable[e]+(i&1023)]+pd.exponentTable[e],pd.floatView[0]}const OY={toHalfFloat:nl,fromHalfFloat:HA},na=new le,py=new _t;class Ln{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=b1,this.updateRange={offset:0,count:-1},this.gpuType=ns,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)py.fromBufferAttribute(this,t),py.applyMatrix3(e),this.setXY(t,py.x,py.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)na.fromBufferAttribute(this,t),na.applyMatrix3(e),this.setXYZ(t,na.x,na.y,na.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)na.fromBufferAttribute(this,t),na.applyMatrix4(e),this.setXYZ(t,na.x,na.y,na.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)na.fromBufferAttribute(this,t),na.applyNormalMatrix(e),this.setXYZ(t,na.x,na.y,na.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)na.fromBufferAttribute(this,t),na.transformDirection(e),this.setXYZ(t,na.x,na.y,na.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Yl(t,this.array)),t}setX(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Yl(t,this.array)),t}setY(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Yl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Yl(t,this.array)),t}setW(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=mi(t,this.array),n=mi(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=mi(t,this.array),n=mi(n,this.array),r=mi(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=mi(t,this.array),n=mi(n,this.array),r=mi(r,this.array),s=mi(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==b1&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class NY extends Ln{constructor(e,t,n){super(new Int8Array(e),t,n)}}class FY extends Ln{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class zY extends Ln{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class UY extends Ln{constructor(e,t,n){super(new Int16Array(e),t,n)}}class u5 extends Ln{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class VY extends Ln{constructor(e,t,n){super(new Int32Array(e),t,n)}}class h5 extends Ln{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class HY extends Ln{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=HA(this.array[e*this.itemSize]);return this.normalized&&(t=Yl(t,this.array)),t}setX(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize]=nl(t),this}getY(e){let t=HA(this.array[e*this.itemSize+1]);return this.normalized&&(t=Yl(t,this.array)),t}setY(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize+1]=nl(t),this}getZ(e){let t=HA(this.array[e*this.itemSize+2]);return this.normalized&&(t=Yl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize+2]=nl(t),this}getW(e){let t=HA(this.array[e*this.itemSize+3]);return this.normalized&&(t=Yl(t,this.array)),t}setW(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize+3]=nl(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=mi(t,this.array),n=mi(n,this.array)),this.array[e+0]=nl(t),this.array[e+1]=nl(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=mi(t,this.array),n=mi(n,this.array),r=mi(r,this.array)),this.array[e+0]=nl(t),this.array[e+1]=nl(n),this.array[e+2]=nl(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=mi(t,this.array),n=mi(n,this.array),r=mi(r,this.array),s=mi(s,this.array)),this.array[e+0]=nl(t),this.array[e+1]=nl(n),this.array[e+2]=nl(r),this.array[e+3]=nl(s),this}}class rn extends Ln{constructor(e,t,n){super(new Float32Array(e),t,n)}}class GY extends Ln{constructor(e,t,n){super(new Float64Array(e),t,n)}}let QY=0;const mc=new jn,VS=new Bi,Rm=new le,Fl=new yu,lA=new yu,Oa=new le;class Zn extends Rc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:QY++}),this.uuid=Jl(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(jL(e)?h5:u5)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Ai().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return mc.makeRotationFromQuaternion(e),this.applyMatrix4(mc),this}rotateX(e){return mc.makeRotationX(e),this.applyMatrix4(mc),this}rotateY(e){return mc.makeRotationY(e),this.applyMatrix4(mc),this}rotateZ(e){return mc.makeRotationZ(e),this.applyMatrix4(mc),this}translate(e,t,n){return mc.makeTranslation(e,t,n),this.applyMatrix4(mc),this}scale(e,t,n){return mc.makeScale(e,t,n),this.applyMatrix4(mc),this}lookAt(e){return VS.lookAt(e),VS.updateMatrix(),this.applyMatrix4(VS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Rm).negate(),this.translate(Rm.x,Rm.y,Rm.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new rn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new yu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new le(-1/0,-1/0,-1/0),new le(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];Fl.setFromBufferAttribute(s),this.morphTargetsRelative?(Oa.addVectors(this.boundingBox.min,Fl.min),this.boundingBox.expandByPoint(Oa),Oa.addVectors(this.boundingBox.max,Fl.max),this.boundingBox.expandByPoint(Oa)):(this.boundingBox.expandByPoint(Fl.min),this.boundingBox.expandByPoint(Fl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new zc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new le,1/0);return}if(e){const n=this.boundingSphere.center;if(Fl.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];lA.setFromBufferAttribute(o),this.morphTargetsRelative?(Oa.addVectors(Fl.min,lA.min),Fl.expandByPoint(Oa),Oa.addVectors(Fl.max,lA.max),Fl.expandByPoint(Oa)):(Fl.expandByPoint(lA.min),Fl.expandByPoint(lA.max))}Fl.getCenter(n);let r=0;for(let s=0,a=e.count;s<a;s++)Oa.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Oa));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)Oa.fromBufferAttribute(o,c),l&&(Rm.fromBufferAttribute(e,c),Oa.add(Rm)),r=Math.max(r,n.distanceToSquared(Oa))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,r=t.position.array,s=t.normal.array,a=t.uv.array,o=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ln(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let R=0;R<o;R++)c[R]=new le,u[R]=new le;const h=new le,d=new le,f=new le,m=new _t,A=new _t,_=new _t,v=new le,w=new le;function x(R,N,U){h.fromArray(r,R*3),d.fromArray(r,N*3),f.fromArray(r,U*3),m.fromArray(a,R*2),A.fromArray(a,N*2),_.fromArray(a,U*2),d.sub(h),f.sub(h),A.sub(m),_.sub(m);const q=1/(A.x*_.y-_.x*A.y);isFinite(q)&&(v.copy(d).multiplyScalar(_.y).addScaledVector(f,-A.y).multiplyScalar(q),w.copy(f).multiplyScalar(A.x).addScaledVector(d,-_.x).multiplyScalar(q),c[R].add(v),c[N].add(v),c[U].add(v),u[R].add(w),u[N].add(w),u[U].add(w))}let C=this.groups;C.length===0&&(C=[{start:0,count:n.length}]);for(let R=0,N=C.length;R<N;++R){const U=C[R],q=U.start,W=U.count;for(let F=q,ue=q+W;F<ue;F+=3)x(n[F+0],n[F+1],n[F+2])}const S=new le,I=new le,P=new le,k=new le;function M(R){P.fromArray(s,R*3),k.copy(P);const N=c[R];S.copy(N),S.sub(P.multiplyScalar(P.dot(N))).normalize(),I.crossVectors(k,N);const q=I.dot(u[R])<0?-1:1;l[R*4]=S.x,l[R*4+1]=S.y,l[R*4+2]=S.z,l[R*4+3]=q}for(let R=0,N=C.length;R<N;++R){const U=C[R],q=U.start,W=U.count;for(let F=q,ue=q+W;F<ue;F+=3)M(n[F+0]),M(n[F+1]),M(n[F+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Ln(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let d=0,f=n.count;d<f;d++)n.setXYZ(d,0,0,0);const r=new le,s=new le,a=new le,o=new le,l=new le,c=new le,u=new le,h=new le;if(e)for(let d=0,f=e.count;d<f;d+=3){const m=e.getX(d+0),A=e.getX(d+1),_=e.getX(d+2);r.fromBufferAttribute(t,m),s.fromBufferAttribute(t,A),a.fromBufferAttribute(t,_),u.subVectors(a,s),h.subVectors(r,s),u.cross(h),o.fromBufferAttribute(n,m),l.fromBufferAttribute(n,A),c.fromBufferAttribute(n,_),o.add(u),l.add(u),c.add(u),n.setXYZ(m,o.x,o.y,o.z),n.setXYZ(A,l.x,l.y,l.z),n.setXYZ(_,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)r.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),a.fromBufferAttribute(t,d+2),u.subVectors(a,s),h.subVectors(r,s),u.cross(h),n.setXYZ(d+0,u.x,u.y,u.z),n.setXYZ(d+1,u.x,u.y,u.z),n.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Oa.fromBufferAttribute(e,t),Oa.normalize(),e.setXYZ(t,Oa.x,Oa.y,Oa.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,h=o.normalized,d=new c.constructor(l.length*u);let f=0,m=0;for(let A=0,_=l.length;A<_;A++){o.isInterleavedBufferAttribute?f=l[A]*o.data.stride+o.offset:f=l[A]*u;for(let v=0;v<u;v++)d[m++]=c[f++]}return new Ln(d,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Zn,n=this.index.array,r=this.attributes;for(const o in r){const l=r[o],c=e(l,n);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,h=c.length;u<h;u++){const d=c[u],f=e(d,n);l.push(f)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const c=n[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,d=c.length;h<d;h++){const f=c[h];u.push(f.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let d=0,f=h.length;d<f;d++)u.push(h[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const h=a[c];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ck=new jn,Lp=new rv,my=new zc,Ek=new le,Dm=new le,Lm=new le,Om=new le,HS=new le,gy=new le,vy=new _t,Ay=new _t,_y=new _t,Sk=new le,Mk=new le,Tk=new le,by=new le,yy=new le;class cr extends Bi{constructor(e=new Zn,t=new Lo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){gy.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=o[l],h=s[l];u!==0&&(HS.fromBufferAttribute(h,e),a?gy.addScaledVector(HS,u):gy.addScaledVector(HS.sub(t),u))}t.add(gy)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),my.copy(n.boundingSphere),my.applyMatrix4(s),Lp.copy(e.ray).recast(e.near),!(my.containsPoint(Lp.origin)===!1&&(Lp.intersectSphere(my,Ek)===null||Lp.origin.distanceToSquared(Ek)>(e.far-e.near)**2))&&(Ck.copy(s).invert(),Lp.copy(e.ray).applyMatrix4(Ck),!(n.boundingBox!==null&&Lp.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Lp)))}_computeIntersections(e,t,n){let r;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,d=s.groups,f=s.drawRange;if(o!==null)if(Array.isArray(a))for(let m=0,A=d.length;m<A;m++){const _=d[m],v=a[_.materialIndex],w=Math.max(_.start,f.start),x=Math.min(o.count,Math.min(_.start+_.count,f.start+f.count));for(let C=w,S=x;C<S;C+=3){const I=o.getX(C),P=o.getX(C+1),k=o.getX(C+2);r=wy(this,v,e,n,c,u,h,I,P,k),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const m=Math.max(0,f.start),A=Math.min(o.count,f.start+f.count);for(let _=m,v=A;_<v;_+=3){const w=o.getX(_),x=o.getX(_+1),C=o.getX(_+2);r=wy(this,a,e,n,c,u,h,w,x,C),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(a))for(let m=0,A=d.length;m<A;m++){const _=d[m],v=a[_.materialIndex],w=Math.max(_.start,f.start),x=Math.min(l.count,Math.min(_.start+_.count,f.start+f.count));for(let C=w,S=x;C<S;C+=3){const I=C,P=C+1,k=C+2;r=wy(this,v,e,n,c,u,h,I,P,k),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const m=Math.max(0,f.start),A=Math.min(l.count,f.start+f.count);for(let _=m,v=A;_<v;_+=3){const w=_,x=_+1,C=_+2;r=wy(this,a,e,n,c,u,h,w,x,C),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}}}function qY(i,e,t,n,r,s,a,o){let l;if(e.side===Fo?l=n.intersectTriangle(a,s,r,!0,o):l=n.intersectTriangle(r,s,a,e.side===dh,o),l===null)return null;yy.copy(o),yy.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(yy);return c<t.near||c>t.far?null:{distance:c,point:yy.clone(),object:i}}function wy(i,e,t,n,r,s,a,o,l,c){i.getVertexPosition(o,Dm),i.getVertexPosition(l,Lm),i.getVertexPosition(c,Om);const u=qY(i,e,t,n,Dm,Lm,Om,by);if(u){r&&(vy.fromBufferAttribute(r,o),Ay.fromBufferAttribute(r,l),_y.fromBufferAttribute(r,c),u.uv=sl.getInterpolation(by,Dm,Lm,Om,vy,Ay,_y,new _t)),s&&(vy.fromBufferAttribute(s,o),Ay.fromBufferAttribute(s,l),_y.fromBufferAttribute(s,c),u.uv1=sl.getInterpolation(by,Dm,Lm,Om,vy,Ay,_y,new _t),u.uv2=u.uv1),a&&(Sk.fromBufferAttribute(a,o),Mk.fromBufferAttribute(a,l),Tk.fromBufferAttribute(a,c),u.normal=sl.getInterpolation(by,Dm,Lm,Om,Sk,Mk,Tk,new le),u.normal.dot(n.direction)>0&&u.normal.multiplyScalar(-1));const h={a:o,b:l,c,normal:new le,materialIndex:0};sl.getNormal(Dm,Lm,Om,h.normal),u.face=h}return u}class G0 extends Zn{constructor(e=1,t=1,n=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],h=[];let d=0,f=0;m("z","y","x",-1,-1,n,t,e,a,s,0),m("z","y","x",1,-1,n,t,-e,a,s,1),m("x","z","y",1,1,e,n,t,r,a,2),m("x","z","y",1,-1,e,n,-t,r,a,3),m("x","y","z",1,-1,e,t,n,r,s,4),m("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new rn(c,3)),this.setAttribute("normal",new rn(u,3)),this.setAttribute("uv",new rn(h,2));function m(A,_,v,w,x,C,S,I,P,k,M){const R=C/P,N=S/k,U=C/2,q=S/2,W=I/2,F=P+1,ue=k+1;let J=0,Y=0;const Pe=new le;for(let Ie=0;Ie<ue;Ie++){const pe=Ie*N-q;for(let Ce=0;Ce<F;Ce++){const G=Ce*R-U;Pe[A]=G*w,Pe[_]=pe*x,Pe[v]=W,c.push(Pe.x,Pe.y,Pe.z),Pe[A]=0,Pe[_]=0,Pe[v]=I>0?1:-1,u.push(Pe.x,Pe.y,Pe.z),h.push(Ce/P),h.push(1-Ie/k),J+=1}}for(let Ie=0;Ie<k;Ie++)for(let pe=0;pe<P;pe++){const Ce=d+pe+F*Ie,G=d+pe+F*(Ie+1),oe=d+(pe+1)+F*(Ie+1),je=d+(pe+1)+F*Ie;l.push(Ce,G,je),l.push(G,oe,je),Y+=6}o.addGroup(f,Y,M),f+=Y,d+=J}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new G0(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function kg(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function Bo(i){const e={};for(let t=0;t<i.length;t++){const n=kg(i[t]);for(const r in n)e[r]=n[r]}return e}function jY(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function YL(i){return i.getRenderTarget()===null?i.outputColorSpace:Dc}const _0={clone:kg,merge:Bo};var WY=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,$Y=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class $a extends ya{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=WY,this.fragmentShader=$Y,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=kg(e.uniforms),this.uniformsGroups=jY(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}let s_=class extends Bi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new jn,this.projectionMatrix=new jn,this.projectionMatrixInverse=new jn,this.coordinateSystem=Xu}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};class _r extends s_{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Pg*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(A0*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Pg*2*Math.atan(Math.tan(A0*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(A0*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*n/c,r*=a.width/l,n*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Nm=-90,Fm=1;class KL extends Bi{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null;const r=new _r(Nm,Fm,e,t);r.layers=this.layers,this.add(r);const s=new _r(Nm,Fm,e,t);s.layers=this.layers,this.add(s);const a=new _r(Nm,Fm,e,t);a.layers=this.layers,this.add(a);const o=new _r(Nm,Fm,e,t);o.layers=this.layers,this.add(o);const l=new _r(Nm,Fm,e,t);l.layers=this.layers,this.add(l);const c=new _r(Nm,Fm,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,a,o,l]=t;for(const c of t)this.remove(c);if(e===Xu)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===y1)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,s,a,o,l,c]=this.children,u=e.getRenderTarget(),h=e.xr.enabled;e.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(u),e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class a_ extends zr{constructor(e,t,n,r,s,a,o,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:_d,super(e,t,n,r,s,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class JL extends Va{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];t.encoding!==void 0&&(t1("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===sh?En:ah),this.texture=new a_(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Sr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new G0(5,5,5),s=new $a({name:"CubemapFromEquirect",uniforms:kg(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Fo,blending:rh});s.uniforms.tEquirect.value=t;const a=new cr(r,s),o=t.minFilter;return t.minFilter===_u&&(t.minFilter=Sr),new KL(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(s)}}const GS=new le,XY=new le,YY=new Ai;let bf=class{constructor(e=new le(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=GS.subVectors(n,t).cross(XY.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(GS),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||YY.getNormalMatrix(e),r=this.coplanarPoint(GS).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Op=new zc,xy=new le;class C2{constructor(e=new bf,t=new bf,n=new bf,r=new bf,s=new bf,a=new bf){this.planes=[e,t,n,r,s,a]}set(e,t,n,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Xu){const n=this.planes,r=e.elements,s=r[0],a=r[1],o=r[2],l=r[3],c=r[4],u=r[5],h=r[6],d=r[7],f=r[8],m=r[9],A=r[10],_=r[11],v=r[12],w=r[13],x=r[14],C=r[15];if(n[0].setComponents(l-s,d-c,_-f,C-v).normalize(),n[1].setComponents(l+s,d+c,_+f,C+v).normalize(),n[2].setComponents(l+a,d+u,_+m,C+w).normalize(),n[3].setComponents(l-a,d-u,_-m,C-w).normalize(),n[4].setComponents(l-o,d-h,_-A,C-x).normalize(),t===Xu)n[5].setComponents(l+o,d+h,_+A,C+x).normalize();else if(t===y1)n[5].setComponents(o,h,A,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Op.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Op.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Op)}intersectsSprite(e){return Op.center.set(0,0,0),Op.radius=.7071067811865476,Op.applyMatrix4(e.matrixWorld),this.intersectsSphere(Op)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(xy.x=r.normal.x>0?e.max.x:e.min.x,xy.y=r.normal.y>0?e.max.y:e.min.y,xy.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(xy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function ZL(){let i=null,e=!1,t=null,n=null;function r(s,a){t(s,a),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function KY(i,e){const t=e.isWebGL2,n=new WeakMap;function r(c,u){const h=c.array,d=c.usage,f=i.createBuffer();i.bindBuffer(u,f),i.bufferData(u,h,d),c.onUploadCallback();let m;if(h instanceof Float32Array)m=i.FLOAT;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)m=i.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else m=i.UNSIGNED_SHORT;else if(h instanceof Int16Array)m=i.SHORT;else if(h instanceof Uint32Array)m=i.UNSIGNED_INT;else if(h instanceof Int32Array)m=i.INT;else if(h instanceof Int8Array)m=i.BYTE;else if(h instanceof Uint8Array)m=i.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)m=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:f,type:m,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,h){const d=u.array,f=u.updateRange;i.bindBuffer(h,c),f.count===-1?i.bufferSubData(h,0,d):(t?i.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):i.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1),u.onUploadCallback()}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),n.get(c)}function o(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=n.get(c);u&&(i.deleteBuffer(u.buffer),n.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const d=n.get(c);(!d||d.version<c.version)&&n.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const h=n.get(c);h===void 0?n.set(c,r(c,u)):h.version<c.version&&(s(h.buffer,c,u),h.version=c.version)}return{get:a,remove:o,update:l}}class sv extends Zn{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(n),l=Math.floor(r),c=o+1,u=l+1,h=e/o,d=t/l,f=[],m=[],A=[],_=[];for(let v=0;v<u;v++){const w=v*d-a;for(let x=0;x<c;x++){const C=x*h-s;m.push(C,-w,0),A.push(0,0,1),_.push(x/o),_.push(1-v/l)}}for(let v=0;v<l;v++)for(let w=0;w<o;w++){const x=w+c*v,C=w+c*(v+1),S=w+1+c*(v+1),I=w+1+c*v;f.push(x,C,I),f.push(C,S,I)}this.setIndex(f),this.setAttribute("position",new rn(m,3)),this.setAttribute("normal",new rn(A,3)),this.setAttribute("uv",new rn(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sv(e.width,e.height,e.widthSegments,e.heightSegments)}}var JY=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,ZY=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,eK=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,tK=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nK=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,iK=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,rK=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,sK=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,aK=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,oK=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,lK=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,cK=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,uK=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,hK=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,dK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,fK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,pK=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,mK=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,gK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,vK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,AK=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,_K=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,bK=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,yK=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,wK=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,xK=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,CK=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,EK=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,SK="gl_FragColor = linearToOutputTexel( gl_FragColor );",MK=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,TK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,IK=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,PK=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,kK=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,BK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,RK=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,DK=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,LK=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,OK=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,NK=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,FK=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,zK=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,UK=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,VK=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,HK=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,GK=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,QK=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,qK=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,jK=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,WK=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,$K=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,XK=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,YK=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,KK=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,JK=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,ZK=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,eJ=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,tJ=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,nJ=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,iJ=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,rJ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,sJ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,aJ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,oJ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,lJ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,cJ=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,uJ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,hJ=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,dJ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,fJ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,pJ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,mJ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,gJ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,vJ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,AJ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,_J=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,bJ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,yJ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,wJ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,xJ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,CJ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,EJ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,SJ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,MJ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,TJ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,IJ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,PJ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,kJ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,BJ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,RJ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,DJ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,LJ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,OJ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,NJ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,FJ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,zJ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,UJ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,VJ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,HJ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,GJ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,QJ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,qJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,jJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,WJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,$J=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const XJ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,YJ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,KJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,JJ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ZJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,eZ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,tZ=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,nZ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,iZ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,rZ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,sZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,aZ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,oZ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,lZ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,cZ=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,uZ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hZ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dZ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fZ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,pZ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mZ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,gZ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vZ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AZ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_Z=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,bZ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yZ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wZ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xZ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,CZ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,EZ=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SZ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,MZ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,TZ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ci={alphahash_fragment:JY,alphahash_pars_fragment:ZY,alphamap_fragment:eK,alphamap_pars_fragment:tK,alphatest_fragment:nK,alphatest_pars_fragment:iK,aomap_fragment:rK,aomap_pars_fragment:sK,begin_vertex:aK,beginnormal_vertex:oK,bsdfs:lK,iridescence_fragment:cK,bumpmap_pars_fragment:uK,clipping_planes_fragment:hK,clipping_planes_pars_fragment:dK,clipping_planes_pars_vertex:fK,clipping_planes_vertex:pK,color_fragment:mK,color_pars_fragment:gK,color_pars_vertex:vK,color_vertex:AK,common:_K,cube_uv_reflection_fragment:bK,defaultnormal_vertex:yK,displacementmap_pars_vertex:wK,displacementmap_vertex:xK,emissivemap_fragment:CK,emissivemap_pars_fragment:EK,colorspace_fragment:SK,colorspace_pars_fragment:MK,envmap_fragment:TK,envmap_common_pars_fragment:IK,envmap_pars_fragment:PK,envmap_pars_vertex:kK,envmap_physical_pars_fragment:GK,envmap_vertex:BK,fog_vertex:RK,fog_pars_vertex:DK,fog_fragment:LK,fog_pars_fragment:OK,gradientmap_pars_fragment:NK,lightmap_fragment:FK,lightmap_pars_fragment:zK,lights_lambert_fragment:UK,lights_lambert_pars_fragment:VK,lights_pars_begin:HK,lights_toon_fragment:QK,lights_toon_pars_fragment:qK,lights_phong_fragment:jK,lights_phong_pars_fragment:WK,lights_physical_fragment:$K,lights_physical_pars_fragment:XK,lights_fragment_begin:YK,lights_fragment_maps:KK,lights_fragment_end:JK,logdepthbuf_fragment:ZK,logdepthbuf_pars_fragment:eJ,logdepthbuf_pars_vertex:tJ,logdepthbuf_vertex:nJ,map_fragment:iJ,map_pars_fragment:rJ,map_particle_fragment:sJ,map_particle_pars_fragment:aJ,metalnessmap_fragment:oJ,metalnessmap_pars_fragment:lJ,morphcolor_vertex:cJ,morphnormal_vertex:uJ,morphtarget_pars_vertex:hJ,morphtarget_vertex:dJ,normal_fragment_begin:fJ,normal_fragment_maps:pJ,normal_pars_fragment:mJ,normal_pars_vertex:gJ,normal_vertex:vJ,normalmap_pars_fragment:AJ,clearcoat_normal_fragment_begin:_J,clearcoat_normal_fragment_maps:bJ,clearcoat_pars_fragment:yJ,iridescence_pars_fragment:wJ,opaque_fragment:xJ,packing:CJ,premultiplied_alpha_fragment:EJ,project_vertex:SJ,dithering_fragment:MJ,dithering_pars_fragment:TJ,roughnessmap_fragment:IJ,roughnessmap_pars_fragment:PJ,shadowmap_pars_fragment:kJ,shadowmap_pars_vertex:BJ,shadowmap_vertex:RJ,shadowmask_pars_fragment:DJ,skinbase_vertex:LJ,skinning_pars_vertex:OJ,skinning_vertex:NJ,skinnormal_vertex:FJ,specularmap_fragment:zJ,specularmap_pars_fragment:UJ,tonemapping_fragment:VJ,tonemapping_pars_fragment:HJ,transmission_fragment:GJ,transmission_pars_fragment:QJ,uv_pars_fragment:qJ,uv_pars_vertex:jJ,uv_vertex:WJ,worldpos_vertex:$J,background_vert:XJ,background_frag:YJ,backgroundCube_vert:KJ,backgroundCube_frag:JJ,cube_vert:ZJ,cube_frag:eZ,depth_vert:tZ,depth_frag:nZ,distanceRGBA_vert:iZ,distanceRGBA_frag:rZ,equirect_vert:sZ,equirect_frag:aZ,linedashed_vert:oZ,linedashed_frag:lZ,meshbasic_vert:cZ,meshbasic_frag:uZ,meshlambert_vert:hZ,meshlambert_frag:dZ,meshmatcap_vert:fZ,meshmatcap_frag:pZ,meshnormal_vert:mZ,meshnormal_frag:gZ,meshphong_vert:vZ,meshphong_frag:AZ,meshphysical_vert:_Z,meshphysical_frag:bZ,meshtoon_vert:yZ,meshtoon_frag:wZ,points_vert:xZ,points_frag:CZ,shadow_vert:EZ,shadow_frag:SZ,sprite_vert:MZ,sprite_frag:TZ},Xt={common:{diffuse:{value:new Ut(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ai},alphaMap:{value:null},alphaMapTransform:{value:new Ai},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ai}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ai}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ai}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ai},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ai},normalScale:{value:new _t(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ai},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ai}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ai}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ai}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ut(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ut(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ai},alphaTest:{value:0},uvTransform:{value:new Ai}},sprite:{diffuse:{value:new Ut(16777215)},opacity:{value:1},center:{value:new _t(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ai},alphaMap:{value:null},alphaMapTransform:{value:new Ai},alphaTest:{value:0}}},cu={basic:{uniforms:Bo([Xt.common,Xt.specularmap,Xt.envmap,Xt.aomap,Xt.lightmap,Xt.fog]),vertexShader:ci.meshbasic_vert,fragmentShader:ci.meshbasic_frag},lambert:{uniforms:Bo([Xt.common,Xt.specularmap,Xt.envmap,Xt.aomap,Xt.lightmap,Xt.emissivemap,Xt.bumpmap,Xt.normalmap,Xt.displacementmap,Xt.fog,Xt.lights,{emissive:{value:new Ut(0)}}]),vertexShader:ci.meshlambert_vert,fragmentShader:ci.meshlambert_frag},phong:{uniforms:Bo([Xt.common,Xt.specularmap,Xt.envmap,Xt.aomap,Xt.lightmap,Xt.emissivemap,Xt.bumpmap,Xt.normalmap,Xt.displacementmap,Xt.fog,Xt.lights,{emissive:{value:new Ut(0)},specular:{value:new Ut(1118481)},shininess:{value:30}}]),vertexShader:ci.meshphong_vert,fragmentShader:ci.meshphong_frag},standard:{uniforms:Bo([Xt.common,Xt.envmap,Xt.aomap,Xt.lightmap,Xt.emissivemap,Xt.bumpmap,Xt.normalmap,Xt.displacementmap,Xt.roughnessmap,Xt.metalnessmap,Xt.fog,Xt.lights,{emissive:{value:new Ut(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ci.meshphysical_vert,fragmentShader:ci.meshphysical_frag},toon:{uniforms:Bo([Xt.common,Xt.aomap,Xt.lightmap,Xt.emissivemap,Xt.bumpmap,Xt.normalmap,Xt.displacementmap,Xt.gradientmap,Xt.fog,Xt.lights,{emissive:{value:new Ut(0)}}]),vertexShader:ci.meshtoon_vert,fragmentShader:ci.meshtoon_frag},matcap:{uniforms:Bo([Xt.common,Xt.bumpmap,Xt.normalmap,Xt.displacementmap,Xt.fog,{matcap:{value:null}}]),vertexShader:ci.meshmatcap_vert,fragmentShader:ci.meshmatcap_frag},points:{uniforms:Bo([Xt.points,Xt.fog]),vertexShader:ci.points_vert,fragmentShader:ci.points_frag},dashed:{uniforms:Bo([Xt.common,Xt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ci.linedashed_vert,fragmentShader:ci.linedashed_frag},depth:{uniforms:Bo([Xt.common,Xt.displacementmap]),vertexShader:ci.depth_vert,fragmentShader:ci.depth_frag},normal:{uniforms:Bo([Xt.common,Xt.bumpmap,Xt.normalmap,Xt.displacementmap,{opacity:{value:1}}]),vertexShader:ci.meshnormal_vert,fragmentShader:ci.meshnormal_frag},sprite:{uniforms:Bo([Xt.sprite,Xt.fog]),vertexShader:ci.sprite_vert,fragmentShader:ci.sprite_frag},background:{uniforms:{uvTransform:{value:new Ai},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ci.background_vert,fragmentShader:ci.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ci.backgroundCube_vert,fragmentShader:ci.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ci.cube_vert,fragmentShader:ci.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ci.equirect_vert,fragmentShader:ci.equirect_frag},distanceRGBA:{uniforms:Bo([Xt.common,Xt.displacementmap,{referencePosition:{value:new le},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ci.distanceRGBA_vert,fragmentShader:ci.distanceRGBA_frag},shadow:{uniforms:Bo([Xt.lights,Xt.fog,{color:{value:new Ut(0)},opacity:{value:1}}]),vertexShader:ci.shadow_vert,fragmentShader:ci.shadow_frag}};cu.physical={uniforms:Bo([cu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ai},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ai},clearcoatNormalScale:{value:new _t(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ai},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ai},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ai},sheen:{value:0},sheenColor:{value:new Ut(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ai},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ai},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ai},transmissionSamplerSize:{value:new _t},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ai},attenuationDistance:{value:0},attenuationColor:{value:new Ut(0)},specularColor:{value:new Ut(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ai},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ai},anisotropyVector:{value:new _t},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ai}}]),vertexShader:ci.meshphysical_vert,fragmentShader:ci.meshphysical_frag};const Cy={r:0,b:0,g:0};function IZ(i,e,t,n,r,s,a){const o=new Ut(0);let l=s===!0?0:1,c,u,h=null,d=0,f=null;function m(_,v){let w=!1,x=v.isScene===!0?v.background:null;switch(x&&x.isTexture&&(x=(v.backgroundBlurriness>0?t:e).get(x)),x===null?A(o,l):x&&x.isColor&&(A(x,1),w=!0),i.xr.getEnvironmentBlendMode()){case"opaque":w=!0;break;case"additive":n.buffers.color.setClear(0,0,0,1,a),w=!0;break;case"alpha-blend":n.buffers.color.setClear(0,0,0,0,a),w=!0;break}(i.autoClear||w)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),x&&(x.isCubeTexture||x.mapping===nv)?(u===void 0&&(u=new cr(new G0(1,1,1),new $a({name:"BackgroundCubeMaterial",uniforms:kg(cu.backgroundCube.uniforms),vertexShader:cu.backgroundCube.vertexShader,fragmentShader:cu.backgroundCube.fragmentShader,side:Fo,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(I,P,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=x,u.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.toneMapped=x.colorSpace!==En,(h!==x||d!==x.version||f!==i.toneMapping)&&(u.material.needsUpdate=!0,h=x,d=x.version,f=i.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):x&&x.isTexture&&(c===void 0&&(c=new cr(new sv(2,2),new $a({name:"BackgroundMaterial",uniforms:kg(cu.background.uniforms),vertexShader:cu.background.vertexShader,fragmentShader:cu.background.fragmentShader,side:dh,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=x.colorSpace!==En,x.matrixAutoUpdate===!0&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(h!==x||d!==x.version||f!==i.toneMapping)&&(c.material.needsUpdate=!0,h=x,d=x.version,f=i.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function A(_,v){_.getRGB(Cy,YL(i)),n.buffers.color.setClear(Cy.r,Cy.g,Cy.b,v,a)}return{getClearColor:function(){return o},setClearColor:function(_,v=1){o.set(_),l=v,A(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,A(o,l)},render:m}}function PZ(i,e,t,n){const r=i.getParameter(i.MAX_VERTEX_ATTRIBS),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),a=n.isWebGL2||s!==null,o={},l=_(null);let c=l,u=!1;function h(W,F,ue,J,Y){let Pe=!1;if(a){const Ie=A(J,ue,F);c!==Ie&&(c=Ie,f(c.object)),Pe=v(W,J,ue,Y),Pe&&w(W,J,ue,Y)}else{const Ie=F.wireframe===!0;(c.geometry!==J.id||c.program!==ue.id||c.wireframe!==Ie)&&(c.geometry=J.id,c.program=ue.id,c.wireframe=Ie,Pe=!0)}Y!==null&&t.update(Y,i.ELEMENT_ARRAY_BUFFER),(Pe||u)&&(u=!1,k(W,F,ue,J),Y!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(Y).buffer))}function d(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}function f(W){return n.isWebGL2?i.bindVertexArray(W):s.bindVertexArrayOES(W)}function m(W){return n.isWebGL2?i.deleteVertexArray(W):s.deleteVertexArrayOES(W)}function A(W,F,ue){const J=ue.wireframe===!0;let Y=o[W.id];Y===void 0&&(Y={},o[W.id]=Y);let Pe=Y[F.id];Pe===void 0&&(Pe={},Y[F.id]=Pe);let Ie=Pe[J];return Ie===void 0&&(Ie=_(d()),Pe[J]=Ie),Ie}function _(W){const F=[],ue=[],J=[];for(let Y=0;Y<r;Y++)F[Y]=0,ue[Y]=0,J[Y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:ue,attributeDivisors:J,object:W,attributes:{},index:null}}function v(W,F,ue,J){const Y=c.attributes,Pe=F.attributes;let Ie=0;const pe=ue.getAttributes();for(const Ce in pe)if(pe[Ce].location>=0){const oe=Y[Ce];let je=Pe[Ce];if(je===void 0&&(Ce==="instanceMatrix"&&W.instanceMatrix&&(je=W.instanceMatrix),Ce==="instanceColor"&&W.instanceColor&&(je=W.instanceColor)),oe===void 0||oe.attribute!==je||je&&oe.data!==je.data)return!0;Ie++}return c.attributesNum!==Ie||c.index!==J}function w(W,F,ue,J){const Y={},Pe=F.attributes;let Ie=0;const pe=ue.getAttributes();for(const Ce in pe)if(pe[Ce].location>=0){let oe=Pe[Ce];oe===void 0&&(Ce==="instanceMatrix"&&W.instanceMatrix&&(oe=W.instanceMatrix),Ce==="instanceColor"&&W.instanceColor&&(oe=W.instanceColor));const je={};je.attribute=oe,oe&&oe.data&&(je.data=oe.data),Y[Ce]=je,Ie++}c.attributes=Y,c.attributesNum=Ie,c.index=J}function x(){const W=c.newAttributes;for(let F=0,ue=W.length;F<ue;F++)W[F]=0}function C(W){S(W,0)}function S(W,F){const ue=c.newAttributes,J=c.enabledAttributes,Y=c.attributeDivisors;ue[W]=1,J[W]===0&&(i.enableVertexAttribArray(W),J[W]=1),Y[W]!==F&&((n.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](W,F),Y[W]=F)}function I(){const W=c.newAttributes,F=c.enabledAttributes;for(let ue=0,J=F.length;ue<J;ue++)F[ue]!==W[ue]&&(i.disableVertexAttribArray(ue),F[ue]=0)}function P(W,F,ue,J,Y,Pe,Ie){Ie===!0?i.vertexAttribIPointer(W,F,ue,Y,Pe):i.vertexAttribPointer(W,F,ue,J,Y,Pe)}function k(W,F,ue,J){if(n.isWebGL2===!1&&(W.isInstancedMesh||J.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;x();const Y=J.attributes,Pe=ue.getAttributes(),Ie=F.defaultAttributeValues;for(const pe in Pe){const Ce=Pe[pe];if(Ce.location>=0){let G=Y[pe];if(G===void 0&&(pe==="instanceMatrix"&&W.instanceMatrix&&(G=W.instanceMatrix),pe==="instanceColor"&&W.instanceColor&&(G=W.instanceColor)),G!==void 0){const oe=G.normalized,je=G.itemSize,Tt=t.get(G);if(Tt===void 0)continue;const rt=Tt.buffer,De=Tt.type,xt=Tt.bytesPerElement,mt=n.isWebGL2===!0&&(De===i.INT||De===i.UNSIGNED_INT||G.gpuType===iv);if(G.isInterleavedBufferAttribute){const et=G.data,st=et.stride,ce=G.offset;if(et.isInstancedInterleavedBuffer){for(let tt=0;tt<Ce.locationSize;tt++)S(Ce.location+tt,et.meshPerAttribute);W.isInstancedMesh!==!0&&J._maxInstanceCount===void 0&&(J._maxInstanceCount=et.meshPerAttribute*et.count)}else for(let tt=0;tt<Ce.locationSize;tt++)C(Ce.location+tt);i.bindBuffer(i.ARRAY_BUFFER,rt);for(let tt=0;tt<Ce.locationSize;tt++)P(Ce.location+tt,je/Ce.locationSize,De,oe,st*xt,(ce+je/Ce.locationSize*tt)*xt,mt)}else{if(G.isInstancedBufferAttribute){for(let et=0;et<Ce.locationSize;et++)S(Ce.location+et,G.meshPerAttribute);W.isInstancedMesh!==!0&&J._maxInstanceCount===void 0&&(J._maxInstanceCount=G.meshPerAttribute*G.count)}else for(let et=0;et<Ce.locationSize;et++)C(Ce.location+et);i.bindBuffer(i.ARRAY_BUFFER,rt);for(let et=0;et<Ce.locationSize;et++)P(Ce.location+et,je/Ce.locationSize,De,oe,je*xt,je/Ce.locationSize*et*xt,mt)}}else if(Ie!==void 0){const oe=Ie[pe];if(oe!==void 0)switch(oe.length){case 2:i.vertexAttrib2fv(Ce.location,oe);break;case 3:i.vertexAttrib3fv(Ce.location,oe);break;case 4:i.vertexAttrib4fv(Ce.location,oe);break;default:i.vertexAttrib1fv(Ce.location,oe)}}}}I()}function M(){U();for(const W in o){const F=o[W];for(const ue in F){const J=F[ue];for(const Y in J)m(J[Y].object),delete J[Y];delete F[ue]}delete o[W]}}function R(W){if(o[W.id]===void 0)return;const F=o[W.id];for(const ue in F){const J=F[ue];for(const Y in J)m(J[Y].object),delete J[Y];delete F[ue]}delete o[W.id]}function N(W){for(const F in o){const ue=o[F];if(ue[W.id]===void 0)continue;const J=ue[W.id];for(const Y in J)m(J[Y].object),delete J[Y];delete ue[W.id]}}function U(){q(),u=!0,c!==l&&(c=l,f(c.object))}function q(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:U,resetDefaultState:q,dispose:M,releaseStatesOfGeometry:R,releaseStatesOfProgram:N,initAttributes:x,enableAttribute:C,disableUnusedAttributes:I}}function kZ(i,e,t,n){const r=n.isWebGL2;let s;function a(c){s=c}function o(c,u){i.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,h){if(h===0)return;let d,f;if(r)d=i,f="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[f](s,c,u,h),t.update(u,s,h)}this.setMode=a,this.render=o,this.renderInstances=l}function BZ(i,e,t){let n;function r(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");n=i.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function s(P){if(P==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&i.constructor.name==="WebGL2RenderingContext";let o=t.precision!==void 0?t.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const c=a||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,h=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),d=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=i.getParameter(i.MAX_TEXTURE_SIZE),m=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),A=i.getParameter(i.MAX_VERTEX_ATTRIBS),_=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),v=i.getParameter(i.MAX_VARYING_VECTORS),w=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),x=d>0,C=a||e.has("OES_texture_float"),S=x&&C,I=a?i.getParameter(i.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:m,maxAttributes:A,maxVertexUniforms:_,maxVaryings:v,maxFragmentUniforms:w,vertexTextures:x,floatFragmentTextures:C,floatVertexTextures:S,maxSamples:I}}function RZ(i){const e=this;let t=null,n=0,r=!1,s=!1;const a=new bf,o=new Ai,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const f=h.length!==0||d||n!==0||r;return r=d,n=h.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,d){t=u(h,d,0)},this.setState=function(h,d,f){const m=h.clippingPlanes,A=h.clipIntersection,_=h.clipShadows,v=i.get(h);if(!r||m===null||m.length===0||s&&!_)s?u(null):c();else{const w=s?0:n,x=w*4;let C=v.clippingState||null;l.value=C,C=u(m,d,x,f);for(let S=0;S!==x;++S)C[S]=t[S];v.clippingState=C,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=w}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(h,d,f,m){const A=h!==null?h.length:0;let _=null;if(A!==0){if(_=l.value,m!==!0||_===null){const v=f+A*4,w=d.matrixWorldInverse;o.getNormalMatrix(w),(_===null||_.length<v)&&(_=new Float32Array(v));for(let x=0,C=f;x!==A;++x,C+=4)a.copy(h[x]).applyMatrix4(w,o),a.normal.toArray(_,C),_[C+3]=a.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,_}}function DZ(i){let e=new WeakMap;function t(a,o){return o===m1?a.mapping=_d:o===g1&&(a.mapping=Vf),a}function n(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const o=a.mapping;if(o===m1||o===g1)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new JL(l.height/2);return c.fromEquirectangularTexture(i,a),e.set(a,c),a.addEventListener("dispose",r),t(c.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}class Ah extends s_{constructor(e=-1,t=1,n=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,a=n+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const hg=4,Ik=[.125,.215,.35,.446,.526,.582],s0=20,QS=new Ah,Pk=new Ut;let qS=null;const Zp=(1+Math.sqrt(5))/2,zm=1/Zp,kk=[new le(1,1,1),new le(-1,1,1),new le(1,1,-1),new le(-1,1,-1),new le(0,Zp,zm),new le(0,Zp,-zm),new le(zm,0,Zp),new le(-zm,0,Zp),new le(Zp,zm,0),new le(-Zp,zm,0)];class gM{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){qS=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Dk(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Rk(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(qS),e.scissorTest=!1,Ey(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===_d||e.mapping===Vf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),qS=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Sr,minFilter:Sr,generateMipmaps:!1,type:zo,format:Ps,colorSpace:Dc,depthBuffer:!1},r=Bk(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Bk(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=LZ(s)),this._blurMaterial=OZ(s,e,t)}return r}_compileMaterial(e){const t=new cr(this._lodPlanes[0],e);this._renderer.compile(t,QS)}_sceneToCubeUV(e,t,n,r){const o=new _r(90,1,t,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,d=u.toneMapping;u.getClearColor(Pk),u.toneMapping=md,u.autoClear=!1;const f=new Lo({name:"PMREM.Background",side:Fo,depthWrite:!1,depthTest:!1}),m=new cr(new G0,f);let A=!1;const _=e.background;_?_.isColor&&(f.color.copy(_),e.background=null,A=!0):(f.color.copy(Pk),A=!0);for(let v=0;v<6;v++){const w=v%3;w===0?(o.up.set(0,l[v],0),o.lookAt(c[v],0,0)):w===1?(o.up.set(0,0,l[v]),o.lookAt(0,c[v],0)):(o.up.set(0,l[v],0),o.lookAt(0,0,c[v]));const x=this._cubeSize;Ey(r,w*x,v>2?x:0,x,x),u.setRenderTarget(r),A&&u.render(m,o),u.render(e,o)}m.geometry.dispose(),m.material.dispose(),u.toneMapping=d,u.autoClear=h,e.background=_}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===_d||e.mapping===Vf;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Dk()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Rk());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new cr(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;Ey(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(a,QS)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=kk[(r-1)%kk.length];this._blur(e,r-1,r,s,a)}t.autoClear=n}_blur(e,t,n,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",s),this._halfBlur(a,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new cr(this._lodPlanes[r],c),d=c.uniforms,f=this._sizeLods[n]-1,m=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*s0-1),A=s/m,_=isFinite(s)?1+Math.floor(u*A):s0;_>s0&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${s0}`);const v=[];let w=0;for(let P=0;P<s0;++P){const k=P/A,M=Math.exp(-k*k/2);v.push(M),P===0?w+=M:P<_&&(w+=2*M)}for(let P=0;P<v.length;P++)v[P]=v[P]/w;d.envMap.value=e.texture,d.samples.value=_,d.weights.value=v,d.latitudinal.value=a==="latitudinal",o&&(d.poleAxis.value=o);const{_lodMax:x}=this;d.dTheta.value=m,d.mipInt.value=x-n;const C=this._sizeLods[r],S=3*C*(r>x-hg?r-x+hg:0),I=4*(this._cubeSize-C);Ey(t,S,I,3*C,2*C),l.setRenderTarget(t),l.render(h,QS)}}function LZ(i){const e=[],t=[],n=[];let r=i;const s=i-hg+1+Ik.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let l=1/o;a>i-hg?l=Ik[a-i+hg-1]:a===0&&(l=0),n.push(l);const c=1/(o-2),u=-c,h=1+c,d=[u,u,h,u,h,h,u,u,h,h,u,h],f=6,m=6,A=3,_=2,v=1,w=new Float32Array(A*m*f),x=new Float32Array(_*m*f),C=new Float32Array(v*m*f);for(let I=0;I<f;I++){const P=I%3*2/3-1,k=I>2?0:-1,M=[P,k,0,P+2/3,k,0,P+2/3,k+1,0,P,k,0,P+2/3,k+1,0,P,k+1,0];w.set(M,A*m*I),x.set(d,_*m*I);const R=[I,I,I,I,I,I];C.set(R,v*m*I)}const S=new Zn;S.setAttribute("position",new Ln(w,A)),S.setAttribute("uv",new Ln(x,_)),S.setAttribute("faceIndex",new Ln(C,v)),e.push(S),r>hg&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Bk(i,e,t){const n=new Va(i,e,t);return n.texture.mapping=nv,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Ey(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function OZ(i,e,t){const n=new Float32Array(s0),r=new le(0,1,0);return new $a({name:"SphericalGaussianBlur",defines:{n:s0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:d5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:rh,depthTest:!1,depthWrite:!1})}function Rk(){return new $a({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:d5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:rh,depthTest:!1,depthWrite:!1})}function Dk(){return new $a({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:d5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:rh,depthTest:!1,depthWrite:!1})}function d5(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function NZ(i){let e=new WeakMap,t=null;function n(o){if(o&&o.isTexture){const l=o.mapping,c=l===m1||l===g1,u=l===_d||l===Vf;if(c||u)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let h=e.get(o);return t===null&&(t=new gM(i)),h=c?t.fromEquirectangular(o,h):t.fromCubemap(o,h),e.set(o,h),h.texture}else{if(e.has(o))return e.get(o).texture;{const h=o.image;if(c&&h&&h.height>0||u&&h&&r(h)){t===null&&(t=new gM(i));const d=c?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,d),o.addEventListener("dispose",s),d.texture}else return null}}}return o}function r(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function FZ(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const r=t(n);return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function zZ(i,e,t,n){const r={},s=new WeakMap;function a(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const m in d.attributes)e.remove(d.attributes[m]);for(const m in d.morphAttributes){const A=d.morphAttributes[m];for(let _=0,v=A.length;_<v;_++)e.remove(A[_])}d.removeEventListener("dispose",a),delete r[d.id];const f=s.get(d);f&&(e.remove(f),s.delete(d)),n.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function o(h,d){return r[d.id]===!0||(d.addEventListener("dispose",a),r[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const m in d)e.update(d[m],i.ARRAY_BUFFER);const f=h.morphAttributes;for(const m in f){const A=f[m];for(let _=0,v=A.length;_<v;_++)e.update(A[_],i.ARRAY_BUFFER)}}function c(h){const d=[],f=h.index,m=h.attributes.position;let A=0;if(f!==null){const w=f.array;A=f.version;for(let x=0,C=w.length;x<C;x+=3){const S=w[x+0],I=w[x+1],P=w[x+2];d.push(S,I,I,P,P,S)}}else{const w=m.array;A=m.version;for(let x=0,C=w.length/3-1;x<C;x+=3){const S=x+0,I=x+1,P=x+2;d.push(S,I,I,P,P,S)}}const _=new(jL(d)?h5:u5)(d,1);_.version=A;const v=s.get(h);v&&e.remove(v),s.set(h,_)}function u(h){const d=s.get(h);if(d){const f=h.index;f!==null&&d.version<f.version&&c(h)}else c(h);return s.get(h)}return{get:o,update:l,getWireframeAttribute:u}}function UZ(i,e,t,n){const r=n.isWebGL2;let s;function a(d){s=d}let o,l;function c(d){o=d.type,l=d.bytesPerElement}function u(d,f){i.drawElements(s,f,o,d*l),t.update(f,s,1)}function h(d,f,m){if(m===0)return;let A,_;if(r)A=i,_="drawElementsInstanced";else if(A=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",A===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}A[_](s,f,o,d*l,m),t.update(f,s,m)}this.setMode=a,this.setIndex=c,this.render=u,this.renderInstances=h}function VZ(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,a,o){switch(t.calls++,a){case i.TRIANGLES:t.triangles+=o*(s/3);break;case i.LINES:t.lines+=o*(s/2);break;case i.LINE_STRIP:t.lines+=o*(s-1);break;case i.LINE_LOOP:t.lines+=o*s;break;case i.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function HZ(i,e){return i[0]-e[0]}function GZ(i,e){return Math.abs(e[1])-Math.abs(i[1])}function QZ(i,e,t){const n={},r=new Float32Array(8),s=new WeakMap,a=new zi,o=[];for(let c=0;c<8;c++)o[c]=[c,0];function l(c,u,h){const d=c.morphTargetInfluences;if(e.isWebGL2===!0){const f=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,m=f!==void 0?f.length:0;let A=s.get(u);if(A===void 0||A.count!==m){let W=function(){U.dispose(),s.delete(u),u.removeEventListener("dispose",W)};A!==void 0&&A.texture.dispose();const w=u.morphAttributes.position!==void 0,x=u.morphAttributes.normal!==void 0,C=u.morphAttributes.color!==void 0,S=u.morphAttributes.position||[],I=u.morphAttributes.normal||[],P=u.morphAttributes.color||[];let k=0;w===!0&&(k=1),x===!0&&(k=2),C===!0&&(k=3);let M=u.attributes.position.count*k,R=1;M>e.maxTextureSize&&(R=Math.ceil(M/e.maxTextureSize),M=e.maxTextureSize);const N=new Float32Array(M*R*4*m),U=new y2(N,M,R,m);U.type=ns,U.needsUpdate=!0;const q=k*4;for(let F=0;F<m;F++){const ue=S[F],J=I[F],Y=P[F],Pe=M*R*4*F;for(let Ie=0;Ie<ue.count;Ie++){const pe=Ie*q;w===!0&&(a.fromBufferAttribute(ue,Ie),N[Pe+pe+0]=a.x,N[Pe+pe+1]=a.y,N[Pe+pe+2]=a.z,N[Pe+pe+3]=0),x===!0&&(a.fromBufferAttribute(J,Ie),N[Pe+pe+4]=a.x,N[Pe+pe+5]=a.y,N[Pe+pe+6]=a.z,N[Pe+pe+7]=0),C===!0&&(a.fromBufferAttribute(Y,Ie),N[Pe+pe+8]=a.x,N[Pe+pe+9]=a.y,N[Pe+pe+10]=a.z,N[Pe+pe+11]=Y.itemSize===4?a.w:1)}}A={count:m,texture:U,size:new _t(M,R)},s.set(u,A),u.addEventListener("dispose",W)}let _=0;for(let w=0;w<d.length;w++)_+=d[w];const v=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(i,"morphTargetBaseInfluence",v),h.getUniforms().setValue(i,"morphTargetInfluences",d),h.getUniforms().setValue(i,"morphTargetsTexture",A.texture,t),h.getUniforms().setValue(i,"morphTargetsTextureSize",A.size)}else{const f=d===void 0?0:d.length;let m=n[u.id];if(m===void 0||m.length!==f){m=[];for(let x=0;x<f;x++)m[x]=[x,0];n[u.id]=m}for(let x=0;x<f;x++){const C=m[x];C[0]=x,C[1]=d[x]}m.sort(GZ);for(let x=0;x<8;x++)x<f&&m[x][1]?(o[x][0]=m[x][0],o[x][1]=m[x][1]):(o[x][0]=Number.MAX_SAFE_INTEGER,o[x][1]=0);o.sort(HZ);const A=u.morphAttributes.position,_=u.morphAttributes.normal;let v=0;for(let x=0;x<8;x++){const C=o[x],S=C[0],I=C[1];S!==Number.MAX_SAFE_INTEGER&&I?(A&&u.getAttribute("morphTarget"+x)!==A[S]&&u.setAttribute("morphTarget"+x,A[S]),_&&u.getAttribute("morphNormal"+x)!==_[S]&&u.setAttribute("morphNormal"+x,_[S]),r[x]=I,v+=I):(A&&u.hasAttribute("morphTarget"+x)===!0&&u.deleteAttribute("morphTarget"+x),_&&u.hasAttribute("morphNormal"+x)===!0&&u.deleteAttribute("morphNormal"+x),r[x]=0)}const w=u.morphTargetsRelative?1:1-v;h.getUniforms().setValue(i,"morphTargetBaseInfluence",w),h.getUniforms().setValue(i,"morphTargetInfluences",r)}}return{update:l}}function qZ(i,e,t,n){let r=new WeakMap;function s(l){const c=n.render.frame,u=l.geometry,h=e.get(l,u);if(r.get(h)!==c&&(e.update(h),r.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==c&&(t.update(l.instanceMatrix,i.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,i.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const d=l.skeleton;r.get(d)!==c&&(d.update(),r.set(d,c))}return h}function a(){r=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}const eO=new zr,tO=new y2,nO=new w2,iO=new a_,Lk=[],Ok=[],Nk=new Float32Array(16),Fk=new Float32Array(9),zk=new Float32Array(4);function av(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=Lk[r];if(s===void 0&&(s=new Float32Array(r),Lk[r]=s),e!==0){n.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,i[a].toArray(s,o)}return s}function wa(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function xa(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function E2(i,e){let t=Ok[e];t===void 0&&(t=new Int32Array(e),Ok[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function jZ(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function WZ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(wa(t,e))return;i.uniform2fv(this.addr,e),xa(t,e)}}function $Z(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(wa(t,e))return;i.uniform3fv(this.addr,e),xa(t,e)}}function XZ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(wa(t,e))return;i.uniform4fv(this.addr,e),xa(t,e)}}function YZ(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(wa(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),xa(t,e)}else{if(wa(t,n))return;zk.set(n),i.uniformMatrix2fv(this.addr,!1,zk),xa(t,n)}}function KZ(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(wa(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),xa(t,e)}else{if(wa(t,n))return;Fk.set(n),i.uniformMatrix3fv(this.addr,!1,Fk),xa(t,n)}}function JZ(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(wa(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),xa(t,e)}else{if(wa(t,n))return;Nk.set(n),i.uniformMatrix4fv(this.addr,!1,Nk),xa(t,n)}}function ZZ(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function eee(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(wa(t,e))return;i.uniform2iv(this.addr,e),xa(t,e)}}function tee(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(wa(t,e))return;i.uniform3iv(this.addr,e),xa(t,e)}}function nee(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(wa(t,e))return;i.uniform4iv(this.addr,e),xa(t,e)}}function iee(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function ree(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(wa(t,e))return;i.uniform2uiv(this.addr,e),xa(t,e)}}function see(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(wa(t,e))return;i.uniform3uiv(this.addr,e),xa(t,e)}}function aee(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(wa(t,e))return;i.uniform4uiv(this.addr,e),xa(t,e)}}function oee(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2D(e||eO,r)}function lee(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||nO,r)}function cee(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||iO,r)}function uee(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||tO,r)}function hee(i){switch(i){case 5126:return jZ;case 35664:return WZ;case 35665:return $Z;case 35666:return XZ;case 35674:return YZ;case 35675:return KZ;case 35676:return JZ;case 5124:case 35670:return ZZ;case 35667:case 35671:return eee;case 35668:case 35672:return tee;case 35669:case 35673:return nee;case 5125:return iee;case 36294:return ree;case 36295:return see;case 36296:return aee;case 35678:case 36198:case 36298:case 36306:case 35682:return oee;case 35679:case 36299:case 36307:return lee;case 35680:case 36300:case 36308:case 36293:return cee;case 36289:case 36303:case 36311:case 36292:return uee}}function dee(i,e){i.uniform1fv(this.addr,e)}function fee(i,e){const t=av(e,this.size,2);i.uniform2fv(this.addr,t)}function pee(i,e){const t=av(e,this.size,3);i.uniform3fv(this.addr,t)}function mee(i,e){const t=av(e,this.size,4);i.uniform4fv(this.addr,t)}function gee(i,e){const t=av(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function vee(i,e){const t=av(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function Aee(i,e){const t=av(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function _ee(i,e){i.uniform1iv(this.addr,e)}function bee(i,e){i.uniform2iv(this.addr,e)}function yee(i,e){i.uniform3iv(this.addr,e)}function wee(i,e){i.uniform4iv(this.addr,e)}function xee(i,e){i.uniform1uiv(this.addr,e)}function Cee(i,e){i.uniform2uiv(this.addr,e)}function Eee(i,e){i.uniform3uiv(this.addr,e)}function See(i,e){i.uniform4uiv(this.addr,e)}function Mee(i,e,t){const n=this.cache,r=e.length,s=E2(t,r);wa(n,s)||(i.uniform1iv(this.addr,s),xa(n,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||eO,s[a])}function Tee(i,e,t){const n=this.cache,r=e.length,s=E2(t,r);wa(n,s)||(i.uniform1iv(this.addr,s),xa(n,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||nO,s[a])}function Iee(i,e,t){const n=this.cache,r=e.length,s=E2(t,r);wa(n,s)||(i.uniform1iv(this.addr,s),xa(n,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||iO,s[a])}function Pee(i,e,t){const n=this.cache,r=e.length,s=E2(t,r);wa(n,s)||(i.uniform1iv(this.addr,s),xa(n,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||tO,s[a])}function kee(i){switch(i){case 5126:return dee;case 35664:return fee;case 35665:return pee;case 35666:return mee;case 35674:return gee;case 35675:return vee;case 35676:return Aee;case 5124:case 35670:return _ee;case 35667:case 35671:return bee;case 35668:case 35672:return yee;case 35669:case 35673:return wee;case 5125:return xee;case 36294:return Cee;case 36295:return Eee;case 36296:return See;case 35678:case 36198:case 36298:case 36306:case 35682:return Mee;case 35679:case 36299:case 36307:return Tee;case 35680:case 36300:case 36308:case 36293:return Iee;case 36289:case 36303:case 36311:case 36292:return Pee}}class Bee{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=hee(t.type)}}class Ree{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=kee(t.type)}}class Dee{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],n)}}}const jS=/(\w+)(\])?(\[|\.)?/g;function Uk(i,e){i.seq.push(e),i.map[e.id]=e}function Lee(i,e,t){const n=i.name,r=n.length;for(jS.lastIndex=0;;){const s=jS.exec(n),a=jS.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===r){Uk(t,c===void 0?new Bee(o,i,e):new Ree(o,i,e));break}else{let h=t.map[o];h===void 0&&(h=new Dee(o),Uk(t,h)),t=h}}}class Ww{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);Lee(s,a,this)}}setValue(e,t,n,r){const s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=n[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&n.push(a)}return n}}function Vk(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}let Oee=0;function Nee(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;n.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return n.join(`
`)}function Fee(i){switch(i){case Dc:return["Linear","( value )"];case En:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),["Linear","( value )"]}}function Hk(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Nee(i.getShaderSource(e),a)}else return r}function zee(i,e){const t=Fee(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Uee(i,e){let t;switch(e){case wL:t="Linear";break;case xL:t="Reinhard";break;case CL:t="OptimizedCineon";break;case $T:t="ACESFilmic";break;case EL:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Vee(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.normalMapTangentSpace||i.clearcoatNormalMap||i.flatShading||i.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(GA).join(`
`)}function Hee(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function Gee(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),a=s.name;let o=1;s.type===i.FLOAT_MAT2&&(o=2),s.type===i.FLOAT_MAT3&&(o=3),s.type===i.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:i.getAttribLocation(e,a),locationSize:o}}return t}function GA(i){return i!==""}function Gk(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Qk(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Qee=/^[ \t]*#include +<([\w\d./]+)>/gm;function vM(i){return i.replace(Qee,jee)}const qee=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function jee(i,e){let t=ci[e];if(t===void 0){const n=qee.get(e);if(n!==void 0)t=ci[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return vM(t)}const Wee=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function qk(i){return i.replace(Wee,$ee)}function $ee(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function jk(i){let e="precision "+i.precision+` float;
precision `+i.precision+" int;";return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Xee(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===OT?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===d2?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===qu&&(e="SHADOWMAP_TYPE_VSM"),e}function Yee(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case _d:case Vf:e="ENVMAP_TYPE_CUBE";break;case nv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Kee(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Vf:e="ENVMAP_MODE_REFRACTION";break}return e}function Jee(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case t_:e="ENVMAP_BLENDING_MULTIPLY";break;case bL:e="ENVMAP_BLENDING_MIX";break;case yL:e="ENVMAP_BLENDING_ADD";break}return e}function Zee(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function ete(i,e,t,n){const r=i.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=Xee(t),c=Yee(t),u=Kee(t),h=Jee(t),d=Zee(t),f=t.isWebGL2?"":Vee(t),m=Hee(s),A=r.createProgram();let _,v,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(GA).join(`
`),_.length>0&&(_+=`
`),v=[f,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(GA).join(`
`),v.length>0&&(v+=`
`)):(_=[jk(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(GA).join(`
`),v=[f,jk(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==md?"#define TONE_MAPPING":"",t.toneMapping!==md?ci.tonemapping_pars_fragment:"",t.toneMapping!==md?Uee("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ci.colorspace_pars_fragment,zee("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(GA).join(`
`)),a=vM(a),a=Gk(a,t),a=Qk(a,t),o=vM(o),o=Gk(o,t),o=Qk(o,t),a=qk(a),o=qk(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,v=["#define varying in",t.glslVersion===fM?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===fM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const x=w+_+a,C=w+v+o,S=Vk(r,r.VERTEX_SHADER,x),I=Vk(r,r.FRAGMENT_SHADER,C);if(r.attachShader(A,S),r.attachShader(A,I),t.index0AttributeName!==void 0?r.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(A,0,"position"),r.linkProgram(A),i.debug.checkShaderErrors){const M=r.getProgramInfoLog(A).trim(),R=r.getShaderInfoLog(S).trim(),N=r.getShaderInfoLog(I).trim();let U=!0,q=!0;if(r.getProgramParameter(A,r.LINK_STATUS)===!1)if(U=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,A,S,I);else{const W=Hk(r,S,"vertex"),F=Hk(r,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(A,r.VALIDATE_STATUS)+`

Program Info Log: `+M+`
`+W+`
`+F)}else M!==""?console.warn("THREE.WebGLProgram: Program Info Log:",M):(R===""||N==="")&&(q=!1);q&&(this.diagnostics={runnable:U,programLog:M,vertexShader:{log:R,prefix:_},fragmentShader:{log:N,prefix:v}})}r.deleteShader(S),r.deleteShader(I);let P;this.getUniforms=function(){return P===void 0&&(P=new Ww(r,A)),P};let k;return this.getAttributes=function(){return k===void 0&&(k=Gee(r,A)),k},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Oee++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=S,this.fragmentShader=I,this}let tte=0;class nte{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new ite(e),t.set(e,n)),n}}class ite{constructor(e){this.id=tte++,this.code=e,this.usedTimes=0}}function rte(i,e,t,n,r,s,a){const o=new x2,l=new nte,c=[],u=r.isWebGL2,h=r.logarithmicDepthBuffer,d=r.vertexTextures;let f=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(M){return M===0?"uv":`uv${M}`}function _(M,R,N,U,q){const W=U.fog,F=q.geometry,ue=M.isMeshStandardMaterial?U.environment:null,J=(M.isMeshStandardMaterial?t:e).get(M.envMap||ue),Y=J&&J.mapping===nv?J.image.height:null,Pe=m[M.type];M.precision!==null&&(f=r.getMaxPrecision(M.precision),f!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",f,"instead."));const Ie=F.morphAttributes.position||F.morphAttributes.normal||F.morphAttributes.color,pe=Ie!==void 0?Ie.length:0;let Ce=0;F.morphAttributes.position!==void 0&&(Ce=1),F.morphAttributes.normal!==void 0&&(Ce=2),F.morphAttributes.color!==void 0&&(Ce=3);let G,oe,je,Tt;if(Pe){const ei=cu[Pe];G=ei.vertexShader,oe=ei.fragmentShader}else G=M.vertexShader,oe=M.fragmentShader,l.update(M),je=l.getVertexShaderID(M),Tt=l.getFragmentShaderID(M);const rt=i.getRenderTarget(),De=q.isInstancedMesh===!0,xt=!!M.map,mt=!!M.matcap,et=!!J,st=!!M.aoMap,ce=!!M.lightMap,tt=!!M.bumpMap,he=!!M.normalMap,be=!!M.displacementMap,Ne=!!M.emissiveMap,nt=!!M.metalnessMap,ze=!!M.roughnessMap,me=M.anisotropy>0,fe=M.clearcoat>0,Be=M.iridescence>0,V=M.sheen>0,$=M.transmission>0,ee=me&&!!M.anisotropyMap,Te=fe&&!!M.clearcoatMap,te=fe&&!!M.clearcoatNormalMap,Qe=fe&&!!M.clearcoatRoughnessMap,Vt=Be&&!!M.iridescenceMap,ye=Be&&!!M.iridescenceThicknessMap,Ee=V&&!!M.sheenColorMap,St=V&&!!M.sheenRoughnessMap,Rt=!!M.specularMap,Bt=!!M.specularColorMap,Qt=!!M.specularIntensityMap,Nt=$&&!!M.transmissionMap,$t=$&&!!M.thicknessMap,Qn=!!M.gradientMap,de=!!M.alphaMap,It=M.alphaTest>0,$e=!!M.alphaHash,Lt=!!M.extensions,Ft=!!F.attributes.uv1,Le=!!F.attributes.uv2,bn=!!F.attributes.uv3;let _i=md;return M.toneMapped&&(rt===null||rt.isXRRenderTarget===!0)&&(_i=i.toneMapping),{isWebGL2:u,shaderID:Pe,shaderType:M.type,shaderName:M.name,vertexShader:G,fragmentShader:oe,defines:M.defines,customVertexShaderID:je,customFragmentShaderID:Tt,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:f,instancing:De,instancingColor:De&&q.instanceColor!==null,supportsVertexTextures:d,outputColorSpace:rt===null?i.outputColorSpace:rt.isXRRenderTarget===!0?rt.texture.colorSpace:Dc,map:xt,matcap:mt,envMap:et,envMapMode:et&&J.mapping,envMapCubeUVHeight:Y,aoMap:st,lightMap:ce,bumpMap:tt,normalMap:he,displacementMap:d&&be,emissiveMap:Ne,normalMapObjectSpace:he&&M.normalMapType===RL,normalMapTangentSpace:he&&M.normalMapType===np,metalnessMap:nt,roughnessMap:ze,anisotropy:me,anisotropyMap:ee,clearcoat:fe,clearcoatMap:Te,clearcoatNormalMap:te,clearcoatRoughnessMap:Qe,iridescence:Be,iridescenceMap:Vt,iridescenceThicknessMap:ye,sheen:V,sheenColorMap:Ee,sheenRoughnessMap:St,specularMap:Rt,specularColorMap:Bt,specularIntensityMap:Qt,transmission:$,transmissionMap:Nt,thicknessMap:$t,gradientMap:Qn,opaque:M.transparent===!1&&M.blending===kf,alphaMap:de,alphaTest:It,alphaHash:$e,combine:M.combine,mapUv:xt&&A(M.map.channel),aoMapUv:st&&A(M.aoMap.channel),lightMapUv:ce&&A(M.lightMap.channel),bumpMapUv:tt&&A(M.bumpMap.channel),normalMapUv:he&&A(M.normalMap.channel),displacementMapUv:be&&A(M.displacementMap.channel),emissiveMapUv:Ne&&A(M.emissiveMap.channel),metalnessMapUv:nt&&A(M.metalnessMap.channel),roughnessMapUv:ze&&A(M.roughnessMap.channel),anisotropyMapUv:ee&&A(M.anisotropyMap.channel),clearcoatMapUv:Te&&A(M.clearcoatMap.channel),clearcoatNormalMapUv:te&&A(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Qe&&A(M.clearcoatRoughnessMap.channel),iridescenceMapUv:Vt&&A(M.iridescenceMap.channel),iridescenceThicknessMapUv:ye&&A(M.iridescenceThicknessMap.channel),sheenColorMapUv:Ee&&A(M.sheenColorMap.channel),sheenRoughnessMapUv:St&&A(M.sheenRoughnessMap.channel),specularMapUv:Rt&&A(M.specularMap.channel),specularColorMapUv:Bt&&A(M.specularColorMap.channel),specularIntensityMapUv:Qt&&A(M.specularIntensityMap.channel),transmissionMapUv:Nt&&A(M.transmissionMap.channel),thicknessMapUv:$t&&A(M.thicknessMap.channel),alphaMapUv:de&&A(M.alphaMap.channel),vertexTangents:!!F.attributes.tangent&&(he||me),vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!F.attributes.color&&F.attributes.color.itemSize===4,vertexUv1s:Ft,vertexUv2s:Le,vertexUv3s:bn,pointsUvs:q.isPoints===!0&&!!F.attributes.uv&&(xt||de),fog:!!W,useFog:M.fog===!0,fogExp2:W&&W.isFogExp2,flatShading:M.flatShading===!0,sizeAttenuation:M.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:q.isSkinnedMesh===!0,morphTargets:F.morphAttributes.position!==void 0,morphNormals:F.morphAttributes.normal!==void 0,morphColors:F.morphAttributes.color!==void 0,morphTargetsCount:pe,morphTextureStride:Ce,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:M.dithering,shadowMapEnabled:i.shadowMap.enabled&&N.length>0,shadowMapType:i.shadowMap.type,toneMapping:_i,useLegacyLights:i._useLegacyLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===fs,flipSided:M.side===Fo,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:Lt&&M.extensions.derivatives===!0,extensionFragDepth:Lt&&M.extensions.fragDepth===!0,extensionDrawBuffers:Lt&&M.extensions.drawBuffers===!0,extensionShaderTextureLOD:Lt&&M.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||n.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}}function v(M){const R=[];if(M.shaderID?R.push(M.shaderID):(R.push(M.customVertexShaderID),R.push(M.customFragmentShaderID)),M.defines!==void 0)for(const N in M.defines)R.push(N),R.push(M.defines[N]);return M.isRawShaderMaterial===!1&&(w(R,M),x(R,M),R.push(i.outputColorSpace)),R.push(M.customProgramCacheKey),R.join()}function w(M,R){M.push(R.precision),M.push(R.outputColorSpace),M.push(R.envMapMode),M.push(R.envMapCubeUVHeight),M.push(R.mapUv),M.push(R.alphaMapUv),M.push(R.lightMapUv),M.push(R.aoMapUv),M.push(R.bumpMapUv),M.push(R.normalMapUv),M.push(R.displacementMapUv),M.push(R.emissiveMapUv),M.push(R.metalnessMapUv),M.push(R.roughnessMapUv),M.push(R.anisotropyMapUv),M.push(R.clearcoatMapUv),M.push(R.clearcoatNormalMapUv),M.push(R.clearcoatRoughnessMapUv),M.push(R.iridescenceMapUv),M.push(R.iridescenceThicknessMapUv),M.push(R.sheenColorMapUv),M.push(R.sheenRoughnessMapUv),M.push(R.specularMapUv),M.push(R.specularColorMapUv),M.push(R.specularIntensityMapUv),M.push(R.transmissionMapUv),M.push(R.thicknessMapUv),M.push(R.combine),M.push(R.fogExp2),M.push(R.sizeAttenuation),M.push(R.morphTargetsCount),M.push(R.morphAttributeCount),M.push(R.numDirLights),M.push(R.numPointLights),M.push(R.numSpotLights),M.push(R.numSpotLightMaps),M.push(R.numHemiLights),M.push(R.numRectAreaLights),M.push(R.numDirLightShadows),M.push(R.numPointLightShadows),M.push(R.numSpotLightShadows),M.push(R.numSpotLightShadowsWithMaps),M.push(R.shadowMapType),M.push(R.toneMapping),M.push(R.numClippingPlanes),M.push(R.numClipIntersection),M.push(R.depthPacking)}function x(M,R){o.disableAll(),R.isWebGL2&&o.enable(0),R.supportsVertexTextures&&o.enable(1),R.instancing&&o.enable(2),R.instancingColor&&o.enable(3),R.matcap&&o.enable(4),R.envMap&&o.enable(5),R.normalMapObjectSpace&&o.enable(6),R.normalMapTangentSpace&&o.enable(7),R.clearcoat&&o.enable(8),R.iridescence&&o.enable(9),R.alphaTest&&o.enable(10),R.vertexColors&&o.enable(11),R.vertexAlphas&&o.enable(12),R.vertexUv1s&&o.enable(13),R.vertexUv2s&&o.enable(14),R.vertexUv3s&&o.enable(15),R.vertexTangents&&o.enable(16),R.anisotropy&&o.enable(17),M.push(o.mask),o.disableAll(),R.fog&&o.enable(0),R.useFog&&o.enable(1),R.flatShading&&o.enable(2),R.logarithmicDepthBuffer&&o.enable(3),R.skinning&&o.enable(4),R.morphTargets&&o.enable(5),R.morphNormals&&o.enable(6),R.morphColors&&o.enable(7),R.premultipliedAlpha&&o.enable(8),R.shadowMapEnabled&&o.enable(9),R.useLegacyLights&&o.enable(10),R.doubleSided&&o.enable(11),R.flipSided&&o.enable(12),R.useDepthPacking&&o.enable(13),R.dithering&&o.enable(14),R.transmission&&o.enable(15),R.sheen&&o.enable(16),R.opaque&&o.enable(17),R.pointsUvs&&o.enable(18),M.push(o.mask)}function C(M){const R=m[M.type];let N;if(R){const U=cu[R];N=_0.clone(U.uniforms)}else N=M.uniforms;return N}function S(M,R){let N;for(let U=0,q=c.length;U<q;U++){const W=c[U];if(W.cacheKey===R){N=W,++N.usedTimes;break}}return N===void 0&&(N=new ete(i,R,M,s),c.push(N)),N}function I(M){if(--M.usedTimes===0){const R=c.indexOf(M);c[R]=c[c.length-1],c.pop(),M.destroy()}}function P(M){l.remove(M)}function k(){l.dispose()}return{getParameters:_,getProgramCacheKey:v,getUniforms:C,acquireProgram:S,releaseProgram:I,releaseShaderCache:P,programs:c,dispose:k}}function ste(){let i=new WeakMap;function e(s){let a=i.get(s);return a===void 0&&(a={},i.set(s,a)),a}function t(s){i.delete(s)}function n(s,a,o){i.get(s)[a]=o}function r(){i=new WeakMap}return{get:e,remove:t,update:n,dispose:r}}function ate(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function Wk(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function $k(){const i=[];let e=0;const t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function a(h,d,f,m,A,_){let v=i[e];return v===void 0?(v={id:h.id,object:h,geometry:d,material:f,groupOrder:m,renderOrder:h.renderOrder,z:A,group:_},i[e]=v):(v.id=h.id,v.object=h,v.geometry=d,v.material=f,v.groupOrder=m,v.renderOrder=h.renderOrder,v.z=A,v.group=_),e++,v}function o(h,d,f,m,A,_){const v=a(h,d,f,m,A,_);f.transmission>0?n.push(v):f.transparent===!0?r.push(v):t.push(v)}function l(h,d,f,m,A,_){const v=a(h,d,f,m,A,_);f.transmission>0?n.unshift(v):f.transparent===!0?r.unshift(v):t.unshift(v)}function c(h,d){t.length>1&&t.sort(h||ate),n.length>1&&n.sort(d||Wk),r.length>1&&r.sort(d||Wk)}function u(){for(let h=e,d=i.length;h<d;h++){const f=i[h];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:o,unshift:l,finish:u,sort:c}}function ote(){let i=new WeakMap;function e(n,r){const s=i.get(n);let a;return s===void 0?(a=new $k,i.set(n,[a])):r>=s.length?(a=new $k,s.push(a)):a=s[r],a}function t(){i=new WeakMap}return{get:e,dispose:t}}function lte(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new le,color:new Ut};break;case"SpotLight":t={position:new le,direction:new le,color:new Ut,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new le,color:new Ut,distance:0,decay:0};break;case"HemisphereLight":t={direction:new le,skyColor:new Ut,groundColor:new Ut};break;case"RectAreaLight":t={color:new Ut,position:new le,halfWidth:new le,halfHeight:new le};break}return i[e.id]=t,t}}}function cte(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _t};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _t};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _t,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let ute=0;function hte(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function dte(i,e){const t=new lte,n=cte(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new le);const s=new le,a=new jn,o=new jn;function l(u,h){let d=0,f=0,m=0;for(let N=0;N<9;N++)r.probe[N].set(0,0,0);let A=0,_=0,v=0,w=0,x=0,C=0,S=0,I=0,P=0,k=0;u.sort(hte);const M=h===!0?Math.PI:1;for(let N=0,U=u.length;N<U;N++){const q=u[N],W=q.color,F=q.intensity,ue=q.distance,J=q.shadow&&q.shadow.map?q.shadow.map.texture:null;if(q.isAmbientLight)d+=W.r*F*M,f+=W.g*F*M,m+=W.b*F*M;else if(q.isLightProbe)for(let Y=0;Y<9;Y++)r.probe[Y].addScaledVector(q.sh.coefficients[Y],F);else if(q.isDirectionalLight){const Y=t.get(q);if(Y.color.copy(q.color).multiplyScalar(q.intensity*M),q.castShadow){const Pe=q.shadow,Ie=n.get(q);Ie.shadowBias=Pe.bias,Ie.shadowNormalBias=Pe.normalBias,Ie.shadowRadius=Pe.radius,Ie.shadowMapSize=Pe.mapSize,r.directionalShadow[A]=Ie,r.directionalShadowMap[A]=J,r.directionalShadowMatrix[A]=q.shadow.matrix,C++}r.directional[A]=Y,A++}else if(q.isSpotLight){const Y=t.get(q);Y.position.setFromMatrixPosition(q.matrixWorld),Y.color.copy(W).multiplyScalar(F*M),Y.distance=ue,Y.coneCos=Math.cos(q.angle),Y.penumbraCos=Math.cos(q.angle*(1-q.penumbra)),Y.decay=q.decay,r.spot[v]=Y;const Pe=q.shadow;if(q.map&&(r.spotLightMap[P]=q.map,P++,Pe.updateMatrices(q),q.castShadow&&k++),r.spotLightMatrix[v]=Pe.matrix,q.castShadow){const Ie=n.get(q);Ie.shadowBias=Pe.bias,Ie.shadowNormalBias=Pe.normalBias,Ie.shadowRadius=Pe.radius,Ie.shadowMapSize=Pe.mapSize,r.spotShadow[v]=Ie,r.spotShadowMap[v]=J,I++}v++}else if(q.isRectAreaLight){const Y=t.get(q);Y.color.copy(W).multiplyScalar(F),Y.halfWidth.set(q.width*.5,0,0),Y.halfHeight.set(0,q.height*.5,0),r.rectArea[w]=Y,w++}else if(q.isPointLight){const Y=t.get(q);if(Y.color.copy(q.color).multiplyScalar(q.intensity*M),Y.distance=q.distance,Y.decay=q.decay,q.castShadow){const Pe=q.shadow,Ie=n.get(q);Ie.shadowBias=Pe.bias,Ie.shadowNormalBias=Pe.normalBias,Ie.shadowRadius=Pe.radius,Ie.shadowMapSize=Pe.mapSize,Ie.shadowCameraNear=Pe.camera.near,Ie.shadowCameraFar=Pe.camera.far,r.pointShadow[_]=Ie,r.pointShadowMap[_]=J,r.pointShadowMatrix[_]=q.shadow.matrix,S++}r.point[_]=Y,_++}else if(q.isHemisphereLight){const Y=t.get(q);Y.skyColor.copy(q.color).multiplyScalar(F*M),Y.groundColor.copy(q.groundColor).multiplyScalar(F*M),r.hemi[x]=Y,x++}}w>0&&(e.isWebGL2||i.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Xt.LTC_FLOAT_1,r.rectAreaLTC2=Xt.LTC_FLOAT_2):i.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Xt.LTC_HALF_1,r.rectAreaLTC2=Xt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=d,r.ambient[1]=f,r.ambient[2]=m;const R=r.hash;(R.directionalLength!==A||R.pointLength!==_||R.spotLength!==v||R.rectAreaLength!==w||R.hemiLength!==x||R.numDirectionalShadows!==C||R.numPointShadows!==S||R.numSpotShadows!==I||R.numSpotMaps!==P)&&(r.directional.length=A,r.spot.length=v,r.rectArea.length=w,r.point.length=_,r.hemi.length=x,r.directionalShadow.length=C,r.directionalShadowMap.length=C,r.pointShadow.length=S,r.pointShadowMap.length=S,r.spotShadow.length=I,r.spotShadowMap.length=I,r.directionalShadowMatrix.length=C,r.pointShadowMatrix.length=S,r.spotLightMatrix.length=I+P-k,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=k,R.directionalLength=A,R.pointLength=_,R.spotLength=v,R.rectAreaLength=w,R.hemiLength=x,R.numDirectionalShadows=C,R.numPointShadows=S,R.numSpotShadows=I,R.numSpotMaps=P,r.version=ute++)}function c(u,h){let d=0,f=0,m=0,A=0,_=0;const v=h.matrixWorldInverse;for(let w=0,x=u.length;w<x;w++){const C=u[w];if(C.isDirectionalLight){const S=r.directional[d];S.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(v),d++}else if(C.isSpotLight){const S=r.spot[m];S.position.setFromMatrixPosition(C.matrixWorld),S.position.applyMatrix4(v),S.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(v),m++}else if(C.isRectAreaLight){const S=r.rectArea[A];S.position.setFromMatrixPosition(C.matrixWorld),S.position.applyMatrix4(v),o.identity(),a.copy(C.matrixWorld),a.premultiply(v),o.extractRotation(a),S.halfWidth.set(C.width*.5,0,0),S.halfHeight.set(0,C.height*.5,0),S.halfWidth.applyMatrix4(o),S.halfHeight.applyMatrix4(o),A++}else if(C.isPointLight){const S=r.point[f];S.position.setFromMatrixPosition(C.matrixWorld),S.position.applyMatrix4(v),f++}else if(C.isHemisphereLight){const S=r.hemi[_];S.direction.setFromMatrixPosition(C.matrixWorld),S.direction.transformDirection(v),_++}}}return{setup:l,setupView:c,state:r}}function Xk(i,e){const t=new dte(i,e),n=[],r=[];function s(){n.length=0,r.length=0}function a(h){n.push(h)}function o(h){r.push(h)}function l(h){t.setup(n,h)}function c(h){t.setupView(n,h)}return{init:s,state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:a,pushShadow:o}}function fte(i,e){let t=new WeakMap;function n(s,a=0){const o=t.get(s);let l;return o===void 0?(l=new Xk(i,e),t.set(s,[l])):a>=o.length?(l=new Xk(i,e),o.push(l)):l=o[a],l}function r(){t=new WeakMap}return{get:n,dispose:r}}class f5 extends ya{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=kL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class p5 extends ya{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const pte=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,mte=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function gte(i,e,t){let n=new C2;const r=new _t,s=new _t,a=new zi,o=new f5({depthPacking:BL}),l=new p5,c={},u=t.maxTextureSize,h={[dh]:Fo,[Fo]:dh,[fs]:fs},d=new $a({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new _t},radius:{value:4}},vertexShader:pte,fragmentShader:mte}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const m=new Zn;m.setAttribute("position",new Ln(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new cr(m,d),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=OT;let v=this.type;this.render=function(S,I,P){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||S.length===0)return;const k=i.getRenderTarget(),M=i.getActiveCubeFace(),R=i.getActiveMipmapLevel(),N=i.state;N.setBlending(rh),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);const U=v!==qu&&this.type===qu,q=v===qu&&this.type!==qu;for(let W=0,F=S.length;W<F;W++){const ue=S[W],J=ue.shadow;if(J===void 0){console.warn("THREE.WebGLShadowMap:",ue,"has no shadow.");continue}if(J.autoUpdate===!1&&J.needsUpdate===!1)continue;r.copy(J.mapSize);const Y=J.getFrameExtents();if(r.multiply(Y),s.copy(J.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/Y.x),r.x=s.x*Y.x,J.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/Y.y),r.y=s.y*Y.y,J.mapSize.y=s.y)),J.map===null||U===!0||q===!0){const Ie=this.type!==qu?{minFilter:ki,magFilter:ki}:{};J.map!==null&&J.map.dispose(),J.map=new Va(r.x,r.y,Ie),J.map.texture.name=ue.name+".shadowMap",J.camera.updateProjectionMatrix()}i.setRenderTarget(J.map),i.clear();const Pe=J.getViewportCount();for(let Ie=0;Ie<Pe;Ie++){const pe=J.getViewport(Ie);a.set(s.x*pe.x,s.y*pe.y,s.x*pe.z,s.y*pe.w),N.viewport(a),J.updateMatrices(ue,Ie),n=J.getFrustum(),C(I,P,J.camera,ue,this.type)}J.isPointLightShadow!==!0&&this.type===qu&&w(J,P),J.needsUpdate=!1}v=this.type,_.needsUpdate=!1,i.setRenderTarget(k,M,R)};function w(S,I){const P=e.update(A);d.defines.VSM_SAMPLES!==S.blurSamples&&(d.defines.VSM_SAMPLES=S.blurSamples,f.defines.VSM_SAMPLES=S.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new Va(r.x,r.y)),d.uniforms.shadow_pass.value=S.map.texture,d.uniforms.resolution.value=S.mapSize,d.uniforms.radius.value=S.radius,i.setRenderTarget(S.mapPass),i.clear(),i.renderBufferDirect(I,null,P,d,A,null),f.uniforms.shadow_pass.value=S.mapPass.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,i.setRenderTarget(S.map),i.clear(),i.renderBufferDirect(I,null,P,f,A,null)}function x(S,I,P,k){let M=null;const R=P.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(R!==void 0)M=R;else if(M=P.isPointLight===!0?l:o,i.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0){const N=M.uuid,U=I.uuid;let q=c[N];q===void 0&&(q={},c[N]=q);let W=q[U];W===void 0&&(W=M.clone(),q[U]=W),M=W}if(M.visible=I.visible,M.wireframe=I.wireframe,k===qu?M.side=I.shadowSide!==null?I.shadowSide:I.side:M.side=I.shadowSide!==null?I.shadowSide:h[I.side],M.alphaMap=I.alphaMap,M.alphaTest=I.alphaTest,M.map=I.map,M.clipShadows=I.clipShadows,M.clippingPlanes=I.clippingPlanes,M.clipIntersection=I.clipIntersection,M.displacementMap=I.displacementMap,M.displacementScale=I.displacementScale,M.displacementBias=I.displacementBias,M.wireframeLinewidth=I.wireframeLinewidth,M.linewidth=I.linewidth,P.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const N=i.properties.get(M);N.light=P}return M}function C(S,I,P,k,M){if(S.visible===!1)return;if(S.layers.test(I.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&M===qu)&&(!S.frustumCulled||n.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,S.matrixWorld);const U=e.update(S),q=S.material;if(Array.isArray(q)){const W=U.groups;for(let F=0,ue=W.length;F<ue;F++){const J=W[F],Y=q[J.materialIndex];if(Y&&Y.visible){const Pe=x(S,Y,k,M);i.renderBufferDirect(P,null,U,Pe,S,J)}}}else if(q.visible){const W=x(S,q,k,M);i.renderBufferDirect(P,null,U,W,S,null)}}const N=S.children;for(let U=0,q=N.length;U<q;U++)C(N[U],I,P,k,M)}}function vte(i,e,t){const n=t.isWebGL2;function r(){let de=!1;const It=new zi;let $e=null;const Lt=new zi(0,0,0,0);return{setMask:function(Ft){$e!==Ft&&!de&&(i.colorMask(Ft,Ft,Ft,Ft),$e=Ft)},setLocked:function(Ft){de=Ft},setClear:function(Ft,Le,bn,_i,gs){gs===!0&&(Ft*=_i,Le*=_i,bn*=_i),It.set(Ft,Le,bn,_i),Lt.equals(It)===!1&&(i.clearColor(Ft,Le,bn,_i),Lt.copy(It))},reset:function(){de=!1,$e=null,Lt.set(-1,0,0,0)}}}function s(){let de=!1,It=null,$e=null,Lt=null;return{setTest:function(Ft){Ft?rt(i.DEPTH_TEST):De(i.DEPTH_TEST)},setMask:function(Ft){It!==Ft&&!de&&(i.depthMask(Ft),It=Ft)},setFunc:function(Ft){if($e!==Ft){switch(Ft){case fL:i.depthFunc(i.NEVER);break;case pL:i.depthFunc(i.ALWAYS);break;case mL:i.depthFunc(i.LESS);break;case dx:i.depthFunc(i.LEQUAL);break;case gL:i.depthFunc(i.EQUAL);break;case vL:i.depthFunc(i.GEQUAL);break;case AL:i.depthFunc(i.GREATER);break;case _L:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}$e=Ft}},setLocked:function(Ft){de=Ft},setClear:function(Ft){Lt!==Ft&&(i.clearDepth(Ft),Lt=Ft)},reset:function(){de=!1,It=null,$e=null,Lt=null}}}function a(){let de=!1,It=null,$e=null,Lt=null,Ft=null,Le=null,bn=null,_i=null,gs=null;return{setTest:function(ei){de||(ei?rt(i.STENCIL_TEST):De(i.STENCIL_TEST))},setMask:function(ei){It!==ei&&!de&&(i.stencilMask(ei),It=ei)},setFunc:function(ei,vs,er){($e!==ei||Lt!==vs||Ft!==er)&&(i.stencilFunc(ei,vs,er),$e=ei,Lt=vs,Ft=er)},setOp:function(ei,vs,er){(Le!==ei||bn!==vs||_i!==er)&&(i.stencilOp(ei,vs,er),Le=ei,bn=vs,_i=er)},setLocked:function(ei){de=ei},setClear:function(ei){gs!==ei&&(i.clearStencil(ei),gs=ei)},reset:function(){de=!1,It=null,$e=null,Lt=null,Ft=null,Le=null,bn=null,_i=null,gs=null}}}const o=new r,l=new s,c=new a,u=new WeakMap,h=new WeakMap;let d={},f={},m=new WeakMap,A=[],_=null,v=!1,w=null,x=null,C=null,S=null,I=null,P=null,k=null,M=!1,R=null,N=null,U=null,q=null,W=null;const F=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ue=!1,J=0;const Y=i.getParameter(i.VERSION);Y.indexOf("WebGL")!==-1?(J=parseFloat(/^WebGL (\d)/.exec(Y)[1]),ue=J>=1):Y.indexOf("OpenGL ES")!==-1&&(J=parseFloat(/^OpenGL ES (\d)/.exec(Y)[1]),ue=J>=2);let Pe=null,Ie={};const pe=i.getParameter(i.SCISSOR_BOX),Ce=i.getParameter(i.VIEWPORT),G=new zi().fromArray(pe),oe=new zi().fromArray(Ce);function je(de,It,$e,Lt){const Ft=new Uint8Array(4),Le=i.createTexture();i.bindTexture(de,Le),i.texParameteri(de,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(de,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let bn=0;bn<$e;bn++)n&&(de===i.TEXTURE_3D||de===i.TEXTURE_2D_ARRAY)?i.texImage3D(It,0,i.RGBA,1,1,Lt,0,i.RGBA,i.UNSIGNED_BYTE,Ft):i.texImage2D(It+bn,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,Ft);return Le}const Tt={};Tt[i.TEXTURE_2D]=je(i.TEXTURE_2D,i.TEXTURE_2D,1),Tt[i.TEXTURE_CUBE_MAP]=je(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(Tt[i.TEXTURE_2D_ARRAY]=je(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Tt[i.TEXTURE_3D]=je(i.TEXTURE_3D,i.TEXTURE_3D,1,1)),o.setClear(0,0,0,1),l.setClear(1),c.setClear(0),rt(i.DEPTH_TEST),l.setFunc(dx),be(!1),Ne(G3),rt(i.CULL_FACE),tt(rh);function rt(de){d[de]!==!0&&(i.enable(de),d[de]=!0)}function De(de){d[de]!==!1&&(i.disable(de),d[de]=!1)}function xt(de,It){return f[de]!==It?(i.bindFramebuffer(de,It),f[de]=It,n&&(de===i.DRAW_FRAMEBUFFER&&(f[i.FRAMEBUFFER]=It),de===i.FRAMEBUFFER&&(f[i.DRAW_FRAMEBUFFER]=It)),!0):!1}function mt(de,It){let $e=A,Lt=!1;if(de)if($e=m.get(It),$e===void 0&&($e=[],m.set(It,$e)),de.isWebGLMultipleRenderTargets){const Ft=de.texture;if($e.length!==Ft.length||$e[0]!==i.COLOR_ATTACHMENT0){for(let Le=0,bn=Ft.length;Le<bn;Le++)$e[Le]=i.COLOR_ATTACHMENT0+Le;$e.length=Ft.length,Lt=!0}}else $e[0]!==i.COLOR_ATTACHMENT0&&($e[0]=i.COLOR_ATTACHMENT0,Lt=!0);else $e[0]!==i.BACK&&($e[0]=i.BACK,Lt=!0);Lt&&(t.isWebGL2?i.drawBuffers($e):e.get("WEBGL_draw_buffers").drawBuffersWEBGL($e))}function et(de){return _!==de?(i.useProgram(de),_=de,!0):!1}const st={[xf]:i.FUNC_ADD,[NT]:i.FUNC_SUBTRACT,[FT]:i.FUNC_REVERSE_SUBTRACT};if(n)st[W3]=i.MIN,st[$3]=i.MAX;else{const de=e.get("EXT_blend_minmax");de!==null&&(st[W3]=de.MIN_EXT,st[$3]=de.MAX_EXT)}const ce={[zT]:i.ZERO,[UT]:i.ONE,[VT]:i.SRC_COLOR,[f2]:i.SRC_ALPHA,[WT]:i.SRC_ALPHA_SATURATE,[qT]:i.DST_COLOR,[GT]:i.DST_ALPHA,[HT]:i.ONE_MINUS_SRC_COLOR,[p2]:i.ONE_MINUS_SRC_ALPHA,[jT]:i.ONE_MINUS_DST_COLOR,[QT]:i.ONE_MINUS_DST_ALPHA};function tt(de,It,$e,Lt,Ft,Le,bn,_i){if(de===rh){v===!0&&(De(i.BLEND),v=!1);return}if(v===!1&&(rt(i.BLEND),v=!0),de!==dL){if(de!==w||_i!==M){if((x!==xf||I!==xf)&&(i.blendEquation(i.FUNC_ADD),x=xf,I=xf),_i)switch(de){case kf:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Q3:i.blendFunc(i.ONE,i.ONE);break;case q3:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case j3:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}else switch(de){case kf:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Q3:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case q3:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case j3:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}C=null,S=null,P=null,k=null,w=de,M=_i}return}Ft=Ft||It,Le=Le||$e,bn=bn||Lt,(It!==x||Ft!==I)&&(i.blendEquationSeparate(st[It],st[Ft]),x=It,I=Ft),($e!==C||Lt!==S||Le!==P||bn!==k)&&(i.blendFuncSeparate(ce[$e],ce[Lt],ce[Le],ce[bn]),C=$e,S=Lt,P=Le,k=bn),w=de,M=!1}function he(de,It){de.side===fs?De(i.CULL_FACE):rt(i.CULL_FACE);let $e=de.side===Fo;It&&($e=!$e),be($e),de.blending===kf&&de.transparent===!1?tt(rh):tt(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.premultipliedAlpha),l.setFunc(de.depthFunc),l.setTest(de.depthTest),l.setMask(de.depthWrite),o.setMask(de.colorWrite);const Lt=de.stencilWrite;c.setTest(Lt),Lt&&(c.setMask(de.stencilWriteMask),c.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),c.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),ze(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?rt(i.SAMPLE_ALPHA_TO_COVERAGE):De(i.SAMPLE_ALPHA_TO_COVERAGE)}function be(de){R!==de&&(de?i.frontFace(i.CW):i.frontFace(i.CCW),R=de)}function Ne(de){de!==uL?(rt(i.CULL_FACE),de!==N&&(de===G3?i.cullFace(i.BACK):de===hL?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):De(i.CULL_FACE),N=de}function nt(de){de!==U&&(ue&&i.lineWidth(de),U=de)}function ze(de,It,$e){de?(rt(i.POLYGON_OFFSET_FILL),(q!==It||W!==$e)&&(i.polygonOffset(It,$e),q=It,W=$e)):De(i.POLYGON_OFFSET_FILL)}function me(de){de?rt(i.SCISSOR_TEST):De(i.SCISSOR_TEST)}function fe(de){de===void 0&&(de=i.TEXTURE0+F-1),Pe!==de&&(i.activeTexture(de),Pe=de)}function Be(de,It,$e){$e===void 0&&(Pe===null?$e=i.TEXTURE0+F-1:$e=Pe);let Lt=Ie[$e];Lt===void 0&&(Lt={type:void 0,texture:void 0},Ie[$e]=Lt),(Lt.type!==de||Lt.texture!==It)&&(Pe!==$e&&(i.activeTexture($e),Pe=$e),i.bindTexture(de,It||Tt[de]),Lt.type=de,Lt.texture=It)}function V(){const de=Ie[Pe];de!==void 0&&de.type!==void 0&&(i.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function $(){try{i.compressedTexImage2D.apply(i,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ee(){try{i.compressedTexImage3D.apply(i,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Te(){try{i.texSubImage2D.apply(i,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function te(){try{i.texSubImage3D.apply(i,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Qe(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Vt(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ye(){try{i.texStorage2D.apply(i,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ee(){try{i.texStorage3D.apply(i,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function St(){try{i.texImage2D.apply(i,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Rt(){try{i.texImage3D.apply(i,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Bt(de){G.equals(de)===!1&&(i.scissor(de.x,de.y,de.z,de.w),G.copy(de))}function Qt(de){oe.equals(de)===!1&&(i.viewport(de.x,de.y,de.z,de.w),oe.copy(de))}function Nt(de,It){let $e=h.get(It);$e===void 0&&($e=new WeakMap,h.set(It,$e));let Lt=$e.get(de);Lt===void 0&&(Lt=i.getUniformBlockIndex(It,de.name),$e.set(de,Lt))}function $t(de,It){const Lt=h.get(It).get(de);u.get(It)!==Lt&&(i.uniformBlockBinding(It,Lt,de.__bindingPointIndex),u.set(It,Lt))}function Qn(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),n===!0&&(i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),d={},Pe=null,Ie={},f={},m=new WeakMap,A=[],_=null,v=!1,w=null,x=null,C=null,S=null,I=null,P=null,k=null,M=!1,R=null,N=null,U=null,q=null,W=null,G.set(0,0,i.canvas.width,i.canvas.height),oe.set(0,0,i.canvas.width,i.canvas.height),o.reset(),l.reset(),c.reset()}return{buffers:{color:o,depth:l,stencil:c},enable:rt,disable:De,bindFramebuffer:xt,drawBuffers:mt,useProgram:et,setBlending:tt,setMaterial:he,setFlipSided:be,setCullFace:Ne,setLineWidth:nt,setPolygonOffset:ze,setScissorTest:me,activeTexture:fe,bindTexture:Be,unbindTexture:V,compressedTexImage2D:$,compressedTexImage3D:ee,texImage2D:St,texImage3D:Rt,updateUBOMapping:Nt,uniformBlockBinding:$t,texStorage2D:ye,texStorage3D:Ee,texSubImage2D:Te,texSubImage3D:te,compressedTexSubImage2D:Qe,compressedTexSubImage3D:Vt,scissor:Bt,viewport:Qt,reset:Qn}}function Ate(i,e,t,n,r,s,a){const o=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap;let A;const _=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function w(V,$){return v?new OffscreenCanvas(V,$):w1("canvas")}function x(V,$,ee,Te){let te=1;if((V.width>Te||V.height>Te)&&(te=Te/Math.max(V.width,V.height)),te<1||$===!0)if(typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&V instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&V instanceof ImageBitmap){const Qe=$?bx:Math.floor,Vt=Qe(te*V.width),ye=Qe(te*V.height);A===void 0&&(A=w(Vt,ye));const Ee=ee?w(Vt,ye):A;return Ee.width=Vt,Ee.height=ye,Ee.getContext("2d").drawImage(V,0,0,Vt,ye),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+V.width+"x"+V.height+") to ("+Vt+"x"+ye+")."),Ee}else return"data"in V&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+V.width+"x"+V.height+")."),V;return V}function C(V){return pM(V.width)&&pM(V.height)}function S(V){return o?!1:V.wrapS!==oa||V.wrapT!==oa||V.minFilter!==ki&&V.minFilter!==Sr}function I(V,$){return V.generateMipmaps&&$&&V.minFilter!==ki&&V.minFilter!==Sr}function P(V){i.generateMipmap(V)}function k(V,$,ee,Te,te=!1){if(o===!1)return $;if(V!==null){if(i[V]!==void 0)return i[V];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+V+"'")}let Qe=$;return $===i.RED&&(ee===i.FLOAT&&(Qe=i.R32F),ee===i.HALF_FLOAT&&(Qe=i.R16F),ee===i.UNSIGNED_BYTE&&(Qe=i.R8)),$===i.RG&&(ee===i.FLOAT&&(Qe=i.RG32F),ee===i.HALF_FLOAT&&(Qe=i.RG16F),ee===i.UNSIGNED_BYTE&&(Qe=i.RG8)),$===i.RGBA&&(ee===i.FLOAT&&(Qe=i.RGBA32F),ee===i.HALF_FLOAT&&(Qe=i.RGBA16F),ee===i.UNSIGNED_BYTE&&(Qe=Te===En&&te===!1?i.SRGB8_ALPHA8:i.RGBA8),ee===i.UNSIGNED_SHORT_4_4_4_4&&(Qe=i.RGBA4),ee===i.UNSIGNED_SHORT_5_5_5_1&&(Qe=i.RGB5_A1)),(Qe===i.R16F||Qe===i.R32F||Qe===i.RG16F||Qe===i.RG32F||Qe===i.RGBA16F||Qe===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Qe}function M(V,$,ee){return I(V,ee)===!0||V.isFramebufferTexture&&V.minFilter!==ki&&V.minFilter!==Sr?Math.log2(Math.max($.width,$.height))+1:V.mipmaps!==void 0&&V.mipmaps.length>0?V.mipmaps.length:V.isCompressedTexture&&Array.isArray(V.image)?$.mipmaps.length:1}function R(V){return V===ki||V===v1||V===yg?i.NEAREST:i.LINEAR}function N(V){const $=V.target;$.removeEventListener("dispose",N),q($),$.isVideoTexture&&m.delete($)}function U(V){const $=V.target;$.removeEventListener("dispose",U),F($)}function q(V){const $=n.get(V);if($.__webglInit===void 0)return;const ee=V.source,Te=_.get(ee);if(Te){const te=Te[$.__cacheKey];te.usedTimes--,te.usedTimes===0&&W(V),Object.keys(Te).length===0&&_.delete(ee)}n.remove(V)}function W(V){const $=n.get(V);i.deleteTexture($.__webglTexture);const ee=V.source,Te=_.get(ee);delete Te[$.__cacheKey],a.memory.textures--}function F(V){const $=V.texture,ee=n.get(V),Te=n.get($);if(Te.__webglTexture!==void 0&&(i.deleteTexture(Te.__webglTexture),a.memory.textures--),V.depthTexture&&V.depthTexture.dispose(),V.isWebGLCubeRenderTarget)for(let te=0;te<6;te++)i.deleteFramebuffer(ee.__webglFramebuffer[te]),ee.__webglDepthbuffer&&i.deleteRenderbuffer(ee.__webglDepthbuffer[te]);else{if(i.deleteFramebuffer(ee.__webglFramebuffer),ee.__webglDepthbuffer&&i.deleteRenderbuffer(ee.__webglDepthbuffer),ee.__webglMultisampledFramebuffer&&i.deleteFramebuffer(ee.__webglMultisampledFramebuffer),ee.__webglColorRenderbuffer)for(let te=0;te<ee.__webglColorRenderbuffer.length;te++)ee.__webglColorRenderbuffer[te]&&i.deleteRenderbuffer(ee.__webglColorRenderbuffer[te]);ee.__webglDepthRenderbuffer&&i.deleteRenderbuffer(ee.__webglDepthRenderbuffer)}if(V.isWebGLMultipleRenderTargets)for(let te=0,Qe=$.length;te<Qe;te++){const Vt=n.get($[te]);Vt.__webglTexture&&(i.deleteTexture(Vt.__webglTexture),a.memory.textures--),n.remove($[te])}n.remove($),n.remove(V)}let ue=0;function J(){ue=0}function Y(){const V=ue;return V>=l&&console.warn("THREE.WebGLTextures: Trying to use "+V+" texture units while this GPU supports only "+l),ue+=1,V}function Pe(V){const $=[];return $.push(V.wrapS),$.push(V.wrapT),$.push(V.wrapR||0),$.push(V.magFilter),$.push(V.minFilter),$.push(V.anisotropy),$.push(V.internalFormat),$.push(V.format),$.push(V.type),$.push(V.generateMipmaps),$.push(V.premultiplyAlpha),$.push(V.flipY),$.push(V.unpackAlignment),$.push(V.colorSpace),$.join()}function Ie(V,$){const ee=n.get(V);if(V.isVideoTexture&&fe(V),V.isRenderTargetTexture===!1&&V.version>0&&ee.__version!==V.version){const Te=V.image;if(Te===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Te.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{xt(ee,V,$);return}}t.bindTexture(i.TEXTURE_2D,ee.__webglTexture,i.TEXTURE0+$)}function pe(V,$){const ee=n.get(V);if(V.version>0&&ee.__version!==V.version){xt(ee,V,$);return}t.bindTexture(i.TEXTURE_2D_ARRAY,ee.__webglTexture,i.TEXTURE0+$)}function Ce(V,$){const ee=n.get(V);if(V.version>0&&ee.__version!==V.version){xt(ee,V,$);return}t.bindTexture(i.TEXTURE_3D,ee.__webglTexture,i.TEXTURE0+$)}function G(V,$){const ee=n.get(V);if(V.version>0&&ee.__version!==V.version){mt(ee,V,$);return}t.bindTexture(i.TEXTURE_CUBE_MAP,ee.__webglTexture,i.TEXTURE0+$)}const oe={[bd]:i.REPEAT,[oa]:i.CLAMP_TO_EDGE,[T0]:i.MIRRORED_REPEAT},je={[ki]:i.NEAREST,[v1]:i.NEAREST_MIPMAP_NEAREST,[yg]:i.NEAREST_MIPMAP_LINEAR,[Sr]:i.LINEAR,[m2]:i.LINEAR_MIPMAP_NEAREST,[_u]:i.LINEAR_MIPMAP_LINEAR},Tt={[LL]:i.NEVER,[HL]:i.ALWAYS,[OL]:i.LESS,[FL]:i.LEQUAL,[NL]:i.EQUAL,[VL]:i.GEQUAL,[zL]:i.GREATER,[UL]:i.NOTEQUAL};function rt(V,$,ee){if(ee?(i.texParameteri(V,i.TEXTURE_WRAP_S,oe[$.wrapS]),i.texParameteri(V,i.TEXTURE_WRAP_T,oe[$.wrapT]),(V===i.TEXTURE_3D||V===i.TEXTURE_2D_ARRAY)&&i.texParameteri(V,i.TEXTURE_WRAP_R,oe[$.wrapR]),i.texParameteri(V,i.TEXTURE_MAG_FILTER,je[$.magFilter]),i.texParameteri(V,i.TEXTURE_MIN_FILTER,je[$.minFilter])):(i.texParameteri(V,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(V,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(V===i.TEXTURE_3D||V===i.TEXTURE_2D_ARRAY)&&i.texParameteri(V,i.TEXTURE_WRAP_R,i.CLAMP_TO_EDGE),($.wrapS!==oa||$.wrapT!==oa)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(V,i.TEXTURE_MAG_FILTER,R($.magFilter)),i.texParameteri(V,i.TEXTURE_MIN_FILTER,R($.minFilter)),$.minFilter!==ki&&$.minFilter!==Sr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),$.compareFunction&&(i.texParameteri(V,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(V,i.TEXTURE_COMPARE_FUNC,Tt[$.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Te=e.get("EXT_texture_filter_anisotropic");if($.magFilter===ki||$.minFilter!==yg&&$.minFilter!==_u||$.type===ns&&e.has("OES_texture_float_linear")===!1||o===!1&&$.type===zo&&e.has("OES_texture_half_float_linear")===!1)return;($.anisotropy>1||n.get($).__currentAnisotropy)&&(i.texParameterf(V,Te.TEXTURE_MAX_ANISOTROPY_EXT,Math.min($.anisotropy,r.getMaxAnisotropy())),n.get($).__currentAnisotropy=$.anisotropy)}}function De(V,$){let ee=!1;V.__webglInit===void 0&&(V.__webglInit=!0,$.addEventListener("dispose",N));const Te=$.source;let te=_.get(Te);te===void 0&&(te={},_.set(Te,te));const Qe=Pe($);if(Qe!==V.__cacheKey){te[Qe]===void 0&&(te[Qe]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,ee=!0),te[Qe].usedTimes++;const Vt=te[V.__cacheKey];Vt!==void 0&&(te[V.__cacheKey].usedTimes--,Vt.usedTimes===0&&W($)),V.__cacheKey=Qe,V.__webglTexture=te[Qe].texture}return ee}function xt(V,$,ee){let Te=i.TEXTURE_2D;($.isDataArrayTexture||$.isCompressedArrayTexture)&&(Te=i.TEXTURE_2D_ARRAY),$.isData3DTexture&&(Te=i.TEXTURE_3D);const te=De(V,$),Qe=$.source;t.bindTexture(Te,V.__webglTexture,i.TEXTURE0+ee);const Vt=n.get(Qe);if(Qe.version!==Vt.__version||te===!0){t.activeTexture(i.TEXTURE0+ee),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,$.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,$.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE);const ye=S($)&&C($.image)===!1;let Ee=x($.image,ye,!1,u);Ee=Be($,Ee);const St=C(Ee)||o,Rt=s.convert($.format,$.colorSpace);let Bt=s.convert($.type),Qt=k($.internalFormat,Rt,Bt,$.colorSpace);rt(Te,$,St);let Nt;const $t=$.mipmaps,Qn=o&&$.isVideoTexture!==!0,de=Vt.__version===void 0||te===!0,It=M($,Ee,St);if($.isDepthTexture)Qt=i.DEPTH_COMPONENT,o?$.type===ns?Qt=i.DEPTH_COMPONENT32F:$.type===Sc?Qt=i.DEPTH_COMPONENT24:$.type===Bf?Qt=i.DEPTH24_STENCIL8:Qt=i.DEPTH_COMPONENT16:$.type===ns&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),$.format===Rf&&Qt===i.DEPTH_COMPONENT&&$.type!==V0&&$.type!==Sc&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),$.type=Sc,Bt=s.convert($.type)),$.format===I0&&Qt===i.DEPTH_COMPONENT&&(Qt=i.DEPTH_STENCIL,$.type!==Bf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),$.type=Bf,Bt=s.convert($.type))),de&&(Qn?t.texStorage2D(i.TEXTURE_2D,1,Qt,Ee.width,Ee.height):t.texImage2D(i.TEXTURE_2D,0,Qt,Ee.width,Ee.height,0,Rt,Bt,null));else if($.isDataTexture)if($t.length>0&&St){Qn&&de&&t.texStorage2D(i.TEXTURE_2D,It,Qt,$t[0].width,$t[0].height);for(let $e=0,Lt=$t.length;$e<Lt;$e++)Nt=$t[$e],Qn?t.texSubImage2D(i.TEXTURE_2D,$e,0,0,Nt.width,Nt.height,Rt,Bt,Nt.data):t.texImage2D(i.TEXTURE_2D,$e,Qt,Nt.width,Nt.height,0,Rt,Bt,Nt.data);$.generateMipmaps=!1}else Qn?(de&&t.texStorage2D(i.TEXTURE_2D,It,Qt,Ee.width,Ee.height),t.texSubImage2D(i.TEXTURE_2D,0,0,0,Ee.width,Ee.height,Rt,Bt,Ee.data)):t.texImage2D(i.TEXTURE_2D,0,Qt,Ee.width,Ee.height,0,Rt,Bt,Ee.data);else if($.isCompressedTexture)if($.isCompressedArrayTexture){Qn&&de&&t.texStorage3D(i.TEXTURE_2D_ARRAY,It,Qt,$t[0].width,$t[0].height,Ee.depth);for(let $e=0,Lt=$t.length;$e<Lt;$e++)Nt=$t[$e],$.format!==Ps?Rt!==null?Qn?t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,$e,0,0,0,Nt.width,Nt.height,Ee.depth,Rt,Nt.data,0,0):t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,$e,Qt,Nt.width,Nt.height,Ee.depth,0,Nt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Qn?t.texSubImage3D(i.TEXTURE_2D_ARRAY,$e,0,0,0,Nt.width,Nt.height,Ee.depth,Rt,Bt,Nt.data):t.texImage3D(i.TEXTURE_2D_ARRAY,$e,Qt,Nt.width,Nt.height,Ee.depth,0,Rt,Bt,Nt.data)}else{Qn&&de&&t.texStorage2D(i.TEXTURE_2D,It,Qt,$t[0].width,$t[0].height);for(let $e=0,Lt=$t.length;$e<Lt;$e++)Nt=$t[$e],$.format!==Ps?Rt!==null?Qn?t.compressedTexSubImage2D(i.TEXTURE_2D,$e,0,0,Nt.width,Nt.height,Rt,Nt.data):t.compressedTexImage2D(i.TEXTURE_2D,$e,Qt,Nt.width,Nt.height,0,Nt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Qn?t.texSubImage2D(i.TEXTURE_2D,$e,0,0,Nt.width,Nt.height,Rt,Bt,Nt.data):t.texImage2D(i.TEXTURE_2D,$e,Qt,Nt.width,Nt.height,0,Rt,Bt,Nt.data)}else if($.isDataArrayTexture)Qn?(de&&t.texStorage3D(i.TEXTURE_2D_ARRAY,It,Qt,Ee.width,Ee.height,Ee.depth),t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Ee.width,Ee.height,Ee.depth,Rt,Bt,Ee.data)):t.texImage3D(i.TEXTURE_2D_ARRAY,0,Qt,Ee.width,Ee.height,Ee.depth,0,Rt,Bt,Ee.data);else if($.isData3DTexture)Qn?(de&&t.texStorage3D(i.TEXTURE_3D,It,Qt,Ee.width,Ee.height,Ee.depth),t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Ee.width,Ee.height,Ee.depth,Rt,Bt,Ee.data)):t.texImage3D(i.TEXTURE_3D,0,Qt,Ee.width,Ee.height,Ee.depth,0,Rt,Bt,Ee.data);else if($.isFramebufferTexture){if(de)if(Qn)t.texStorage2D(i.TEXTURE_2D,It,Qt,Ee.width,Ee.height);else{let $e=Ee.width,Lt=Ee.height;for(let Ft=0;Ft<It;Ft++)t.texImage2D(i.TEXTURE_2D,Ft,Qt,$e,Lt,0,Rt,Bt,null),$e>>=1,Lt>>=1}}else if($t.length>0&&St){Qn&&de&&t.texStorage2D(i.TEXTURE_2D,It,Qt,$t[0].width,$t[0].height);for(let $e=0,Lt=$t.length;$e<Lt;$e++)Nt=$t[$e],Qn?t.texSubImage2D(i.TEXTURE_2D,$e,0,0,Rt,Bt,Nt):t.texImage2D(i.TEXTURE_2D,$e,Qt,Rt,Bt,Nt);$.generateMipmaps=!1}else Qn?(de&&t.texStorage2D(i.TEXTURE_2D,It,Qt,Ee.width,Ee.height),t.texSubImage2D(i.TEXTURE_2D,0,0,0,Rt,Bt,Ee)):t.texImage2D(i.TEXTURE_2D,0,Qt,Rt,Bt,Ee);I($,St)&&P(Te),Vt.__version=Qe.version,$.onUpdate&&$.onUpdate($)}V.__version=$.version}function mt(V,$,ee){if($.image.length!==6)return;const Te=De(V,$),te=$.source;t.bindTexture(i.TEXTURE_CUBE_MAP,V.__webglTexture,i.TEXTURE0+ee);const Qe=n.get(te);if(te.version!==Qe.__version||Te===!0){t.activeTexture(i.TEXTURE0+ee),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,$.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,$.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE);const Vt=$.isCompressedTexture||$.image[0].isCompressedTexture,ye=$.image[0]&&$.image[0].isDataTexture,Ee=[];for(let $e=0;$e<6;$e++)!Vt&&!ye?Ee[$e]=x($.image[$e],!1,!0,c):Ee[$e]=ye?$.image[$e].image:$.image[$e],Ee[$e]=Be($,Ee[$e]);const St=Ee[0],Rt=C(St)||o,Bt=s.convert($.format,$.colorSpace),Qt=s.convert($.type),Nt=k($.internalFormat,Bt,Qt,$.colorSpace),$t=o&&$.isVideoTexture!==!0,Qn=Qe.__version===void 0||Te===!0;let de=M($,St,Rt);rt(i.TEXTURE_CUBE_MAP,$,Rt);let It;if(Vt){$t&&Qn&&t.texStorage2D(i.TEXTURE_CUBE_MAP,de,Nt,St.width,St.height);for(let $e=0;$e<6;$e++){It=Ee[$e].mipmaps;for(let Lt=0;Lt<It.length;Lt++){const Ft=It[Lt];$.format!==Ps?Bt!==null?$t?t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Lt,0,0,Ft.width,Ft.height,Bt,Ft.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Lt,Nt,Ft.width,Ft.height,0,Ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):$t?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Lt,0,0,Ft.width,Ft.height,Bt,Qt,Ft.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Lt,Nt,Ft.width,Ft.height,0,Bt,Qt,Ft.data)}}}else{It=$.mipmaps,$t&&Qn&&(It.length>0&&de++,t.texStorage2D(i.TEXTURE_CUBE_MAP,de,Nt,Ee[0].width,Ee[0].height));for(let $e=0;$e<6;$e++)if(ye){$t?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,0,0,Ee[$e].width,Ee[$e].height,Bt,Qt,Ee[$e].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,Nt,Ee[$e].width,Ee[$e].height,0,Bt,Qt,Ee[$e].data);for(let Lt=0;Lt<It.length;Lt++){const Le=It[Lt].image[$e].image;$t?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Lt+1,0,0,Le.width,Le.height,Bt,Qt,Le.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Lt+1,Nt,Le.width,Le.height,0,Bt,Qt,Le.data)}}else{$t?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,0,0,Bt,Qt,Ee[$e]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,0,Nt,Bt,Qt,Ee[$e]);for(let Lt=0;Lt<It.length;Lt++){const Ft=It[Lt];$t?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Lt+1,0,0,Bt,Qt,Ft.image[$e]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+$e,Lt+1,Nt,Bt,Qt,Ft.image[$e])}}}I($,Rt)&&P(i.TEXTURE_CUBE_MAP),Qe.__version=te.version,$.onUpdate&&$.onUpdate($)}V.__version=$.version}function et(V,$,ee,Te,te){const Qe=s.convert(ee.format,ee.colorSpace),Vt=s.convert(ee.type),ye=k(ee.internalFormat,Qe,Vt,ee.colorSpace);n.get($).__hasExternalTextures||(te===i.TEXTURE_3D||te===i.TEXTURE_2D_ARRAY?t.texImage3D(te,0,ye,$.width,$.height,$.depth,0,Qe,Vt,null):t.texImage2D(te,0,ye,$.width,$.height,0,Qe,Vt,null)),t.bindFramebuffer(i.FRAMEBUFFER,V),me($)?d.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Te,te,n.get(ee).__webglTexture,0,ze($)):(te===i.TEXTURE_2D||te>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&te<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Te,te,n.get(ee).__webglTexture,0),t.bindFramebuffer(i.FRAMEBUFFER,null)}function st(V,$,ee){if(i.bindRenderbuffer(i.RENDERBUFFER,V),$.depthBuffer&&!$.stencilBuffer){let Te=i.DEPTH_COMPONENT16;if(ee||me($)){const te=$.depthTexture;te&&te.isDepthTexture&&(te.type===ns?Te=i.DEPTH_COMPONENT32F:te.type===Sc&&(Te=i.DEPTH_COMPONENT24));const Qe=ze($);me($)?d.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Qe,Te,$.width,$.height):i.renderbufferStorageMultisample(i.RENDERBUFFER,Qe,Te,$.width,$.height)}else i.renderbufferStorage(i.RENDERBUFFER,Te,$.width,$.height);i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,V)}else if($.depthBuffer&&$.stencilBuffer){const Te=ze($);ee&&me($)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Te,i.DEPTH24_STENCIL8,$.width,$.height):me($)?d.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Te,i.DEPTH24_STENCIL8,$.width,$.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,$.width,$.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,V)}else{const Te=$.isWebGLMultipleRenderTargets===!0?$.texture:[$.texture];for(let te=0;te<Te.length;te++){const Qe=Te[te],Vt=s.convert(Qe.format,Qe.colorSpace),ye=s.convert(Qe.type),Ee=k(Qe.internalFormat,Vt,ye,Qe.colorSpace),St=ze($);ee&&me($)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,St,Ee,$.width,$.height):me($)?d.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,St,Ee,$.width,$.height):i.renderbufferStorage(i.RENDERBUFFER,Ee,$.width,$.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function ce(V,$){if($&&$.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,V),!($.depthTexture&&$.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get($.depthTexture).__webglTexture||$.depthTexture.image.width!==$.width||$.depthTexture.image.height!==$.height)&&($.depthTexture.image.width=$.width,$.depthTexture.image.height=$.height,$.depthTexture.needsUpdate=!0),Ie($.depthTexture,0);const Te=n.get($.depthTexture).__webglTexture,te=ze($);if($.depthTexture.format===Rf)me($)?d.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Te,0,te):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Te,0);else if($.depthTexture.format===I0)me($)?d.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Te,0,te):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Te,0);else throw new Error("Unknown depthTexture format")}function tt(V){const $=n.get(V),ee=V.isWebGLCubeRenderTarget===!0;if(V.depthTexture&&!$.__autoAllocateDepthBuffer){if(ee)throw new Error("target.depthTexture not supported in Cube render targets");ce($.__webglFramebuffer,V)}else if(ee){$.__webglDepthbuffer=[];for(let Te=0;Te<6;Te++)t.bindFramebuffer(i.FRAMEBUFFER,$.__webglFramebuffer[Te]),$.__webglDepthbuffer[Te]=i.createRenderbuffer(),st($.__webglDepthbuffer[Te],V,!1)}else t.bindFramebuffer(i.FRAMEBUFFER,$.__webglFramebuffer),$.__webglDepthbuffer=i.createRenderbuffer(),st($.__webglDepthbuffer,V,!1);t.bindFramebuffer(i.FRAMEBUFFER,null)}function he(V,$,ee){const Te=n.get(V);$!==void 0&&et(Te.__webglFramebuffer,V,V.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D),ee!==void 0&&tt(V)}function be(V){const $=V.texture,ee=n.get(V),Te=n.get($);V.addEventListener("dispose",U),V.isWebGLMultipleRenderTargets!==!0&&(Te.__webglTexture===void 0&&(Te.__webglTexture=i.createTexture()),Te.__version=$.version,a.memory.textures++);const te=V.isWebGLCubeRenderTarget===!0,Qe=V.isWebGLMultipleRenderTargets===!0,Vt=C(V)||o;if(te){ee.__webglFramebuffer=[];for(let ye=0;ye<6;ye++)ee.__webglFramebuffer[ye]=i.createFramebuffer()}else{if(ee.__webglFramebuffer=i.createFramebuffer(),Qe)if(r.drawBuffers){const ye=V.texture;for(let Ee=0,St=ye.length;Ee<St;Ee++){const Rt=n.get(ye[Ee]);Rt.__webglTexture===void 0&&(Rt.__webglTexture=i.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&V.samples>0&&me(V)===!1){const ye=Qe?$:[$];ee.__webglMultisampledFramebuffer=i.createFramebuffer(),ee.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,ee.__webglMultisampledFramebuffer);for(let Ee=0;Ee<ye.length;Ee++){const St=ye[Ee];ee.__webglColorRenderbuffer[Ee]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,ee.__webglColorRenderbuffer[Ee]);const Rt=s.convert(St.format,St.colorSpace),Bt=s.convert(St.type),Qt=k(St.internalFormat,Rt,Bt,St.colorSpace,V.isXRRenderTarget===!0),Nt=ze(V);i.renderbufferStorageMultisample(i.RENDERBUFFER,Nt,Qt,V.width,V.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ee,i.RENDERBUFFER,ee.__webglColorRenderbuffer[Ee])}i.bindRenderbuffer(i.RENDERBUFFER,null),V.depthBuffer&&(ee.__webglDepthRenderbuffer=i.createRenderbuffer(),st(ee.__webglDepthRenderbuffer,V,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(te){t.bindTexture(i.TEXTURE_CUBE_MAP,Te.__webglTexture),rt(i.TEXTURE_CUBE_MAP,$,Vt);for(let ye=0;ye<6;ye++)et(ee.__webglFramebuffer[ye],V,$,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ye);I($,Vt)&&P(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Qe){const ye=V.texture;for(let Ee=0,St=ye.length;Ee<St;Ee++){const Rt=ye[Ee],Bt=n.get(Rt);t.bindTexture(i.TEXTURE_2D,Bt.__webglTexture),rt(i.TEXTURE_2D,Rt,Vt),et(ee.__webglFramebuffer,V,Rt,i.COLOR_ATTACHMENT0+Ee,i.TEXTURE_2D),I(Rt,Vt)&&P(i.TEXTURE_2D)}t.unbindTexture()}else{let ye=i.TEXTURE_2D;(V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(o?ye=V.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ye,Te.__webglTexture),rt(ye,$,Vt),et(ee.__webglFramebuffer,V,$,i.COLOR_ATTACHMENT0,ye),I($,Vt)&&P(ye),t.unbindTexture()}V.depthBuffer&&tt(V)}function Ne(V){const $=C(V)||o,ee=V.isWebGLMultipleRenderTargets===!0?V.texture:[V.texture];for(let Te=0,te=ee.length;Te<te;Te++){const Qe=ee[Te];if(I(Qe,$)){const Vt=V.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,ye=n.get(Qe).__webglTexture;t.bindTexture(Vt,ye),P(Vt),t.unbindTexture()}}}function nt(V){if(o&&V.samples>0&&me(V)===!1){const $=V.isWebGLMultipleRenderTargets?V.texture:[V.texture],ee=V.width,Te=V.height;let te=i.COLOR_BUFFER_BIT;const Qe=[],Vt=V.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ye=n.get(V),Ee=V.isWebGLMultipleRenderTargets===!0;if(Ee)for(let St=0;St<$.length;St++)t.bindFramebuffer(i.FRAMEBUFFER,ye.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+St,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,ye.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+St,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,ye.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,ye.__webglFramebuffer);for(let St=0;St<$.length;St++){Qe.push(i.COLOR_ATTACHMENT0+St),V.depthBuffer&&Qe.push(Vt);const Rt=ye.__ignoreDepthValues!==void 0?ye.__ignoreDepthValues:!1;if(Rt===!1&&(V.depthBuffer&&(te|=i.DEPTH_BUFFER_BIT),V.stencilBuffer&&(te|=i.STENCIL_BUFFER_BIT)),Ee&&i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,ye.__webglColorRenderbuffer[St]),Rt===!0&&(i.invalidateFramebuffer(i.READ_FRAMEBUFFER,[Vt]),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[Vt])),Ee){const Bt=n.get($[St]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Bt,0)}i.blitFramebuffer(0,0,ee,Te,0,0,ee,Te,te,i.NEAREST),f&&i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Qe)}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Ee)for(let St=0;St<$.length;St++){t.bindFramebuffer(i.FRAMEBUFFER,ye.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+St,i.RENDERBUFFER,ye.__webglColorRenderbuffer[St]);const Rt=n.get($[St]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,ye.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+St,i.TEXTURE_2D,Rt,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,ye.__webglMultisampledFramebuffer)}}function ze(V){return Math.min(h,V.samples)}function me(V){const $=n.get(V);return o&&V.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&$.__useRenderToTexture!==!1}function fe(V){const $=a.render.frame;m.get(V)!==$&&(m.set(V,$),V.update())}function Be(V,$){const ee=V.colorSpace,Te=V.format,te=V.type;return V.isCompressedTexture===!0||V.format===_x||ee!==Dc&&ee!==ah&&(ee===En?o===!1?e.has("EXT_sRGB")===!0&&Te===Ps?(V.format=_x,V.minFilter=Sr,V.generateMipmaps=!1):$=c5.sRGBToLinear($):(Te!==Ps||te!==ts)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ee)),$}this.allocateTextureUnit=Y,this.resetTextureUnits=J,this.setTexture2D=Ie,this.setTexture2DArray=pe,this.setTexture3D=Ce,this.setTextureCube=G,this.rebindTextures=he,this.setupRenderTarget=be,this.updateRenderTargetMipmap=Ne,this.updateMultisampleRenderTarget=nt,this.setupDepthRenderbuffer=tt,this.setupFrameBufferTexture=et,this.useMultisampledRTT=me}function rO(i,e,t){const n=t.isWebGL2;function r(s,a=ah){let o;if(s===ts)return i.UNSIGNED_BYTE;if(s===g2)return i.UNSIGNED_SHORT_4_4_4_4;if(s===v2)return i.UNSIGNED_SHORT_5_5_5_1;if(s===i_)return i.BYTE;if(s===r_)return i.SHORT;if(s===V0)return i.UNSIGNED_SHORT;if(s===iv)return i.INT;if(s===Sc)return i.UNSIGNED_INT;if(s===ns)return i.FLOAT;if(s===zo)return n?i.HALF_FLOAT:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===ZT)return i.ALPHA;if(s===Ps)return i.RGBA;if(s===A2)return i.LUMINANCE;if(s===_2)return i.LUMINANCE_ALPHA;if(s===Rf)return i.DEPTH_COMPONENT;if(s===I0)return i.DEPTH_STENCIL;if(s===_x)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===lg)return i.RED;if(s===e5)return i.RED_INTEGER;if(s===cg)return i.RG;if(s===t5)return i.RG_INTEGER;if(s===n5)return i.RGBA_INTEGER;if(s===KA||s===Gw||s===Qw||s===JA)if(a===En)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===KA)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Gw)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Qw)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===JA)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===KA)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Gw)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Qw)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===JA)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===fx||s===X3||s===px||s===Y3)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===fx)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===X3)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===px)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Y3)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===i5)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===mx||s===gx)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(s===mx)return a===En?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===gx)return a===En?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===vx||s===K3||s===J3||s===Z3||s===eM||s===tM||s===nM||s===iM||s===rM||s===sM||s===aM||s===oM||s===lM||s===cM)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(s===vx)return a===En?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===K3)return a===En?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===J3)return a===En?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===Z3)return a===En?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===eM)return a===En?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===tM)return a===En?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===nM)return a===En?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===iM)return a===En?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===rM)return a===En?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===sM)return a===En?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===aM)return a===En?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===oM)return a===En?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===lM)return a===En?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===cM)return a===En?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===ZA)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(s===ZA)return a===En?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===SL||s===uM||s===hM||s===dM)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(s===ZA)return o.COMPRESSED_RED_RGTC1_EXT;if(s===uM)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===hM)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===dM)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Bf?n?i.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):i[s]!==void 0?i[s]:null}return{convert:r}}class sO extends _r{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let Yu=class extends Bi{constructor(){super(),this.isGroup=!0,this.type="Group"}};const _te={type:"move"};class WS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Yu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Yu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new le,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new le),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Yu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new le,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new le),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const A of e.hand.values()){const _=t.getJointPose(A,n),v=this._getHandJoint(c,A);_!==null&&(v.matrix.fromArray(_.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=_.radius),v.visible=_!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],d=u.position.distanceTo(h.position),f=.02,m=.005;c.inputState.pinching&&d>f+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=f-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(_te)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Yu;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class aO extends zr{constructor(e,t,n,r,s,a,o,l,c,u){if(u=u!==void 0?u:Rf,u!==Rf&&u!==I0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&u===Rf&&(n=Sc),n===void 0&&u===I0&&(n=Bf),super(null,r,s,a,o,l,u,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:ki,this.minFilter=l!==void 0?l:ki,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class bte extends Rc{constructor(e,t){super();const n=this;let r=null,s=1,a=null,o="local-floor",l=1,c=null,u=null,h=null,d=null,f=null,m=null;const A=t.getContextAttributes();let _=null,v=null;const w=[],x=[],C=new _r;C.layers.enable(1),C.viewport=new zi;const S=new _r;S.layers.enable(2),S.viewport=new zi;const I=[C,S],P=new sO;P.layers.enable(1),P.layers.enable(2);let k=null,M=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(pe){let Ce=w[pe];return Ce===void 0&&(Ce=new WS,w[pe]=Ce),Ce.getTargetRaySpace()},this.getControllerGrip=function(pe){let Ce=w[pe];return Ce===void 0&&(Ce=new WS,w[pe]=Ce),Ce.getGripSpace()},this.getHand=function(pe){let Ce=w[pe];return Ce===void 0&&(Ce=new WS,w[pe]=Ce),Ce.getHandSpace()};function R(pe){const Ce=x.indexOf(pe.inputSource);if(Ce===-1)return;const G=w[Ce];G!==void 0&&(G.update(pe.inputSource,pe.frame,c||a),G.dispatchEvent({type:pe.type,data:pe.inputSource}))}function N(){r.removeEventListener("select",R),r.removeEventListener("selectstart",R),r.removeEventListener("selectend",R),r.removeEventListener("squeeze",R),r.removeEventListener("squeezestart",R),r.removeEventListener("squeezeend",R),r.removeEventListener("end",N),r.removeEventListener("inputsourceschange",U);for(let pe=0;pe<w.length;pe++){const Ce=x[pe];Ce!==null&&(x[pe]=null,w[pe].disconnect(Ce))}k=null,M=null,e.setRenderTarget(_),f=null,d=null,h=null,r=null,v=null,Ie.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(pe){s=pe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(pe){o=pe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(pe){c=pe},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return h},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=async function(pe){if(r=pe,r!==null){if(_=e.getRenderTarget(),r.addEventListener("select",R),r.addEventListener("selectstart",R),r.addEventListener("selectend",R),r.addEventListener("squeeze",R),r.addEventListener("squeezestart",R),r.addEventListener("squeezeend",R),r.addEventListener("end",N),r.addEventListener("inputsourceschange",U),A.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Ce={antialias:r.renderState.layers===void 0?A.antialias:!0,alpha:!0,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(r,t,Ce),r.updateRenderState({baseLayer:f}),v=new Va(f.framebufferWidth,f.framebufferHeight,{format:Ps,type:ts,colorSpace:e.outputColorSpace,stencilBuffer:A.stencil})}else{let Ce=null,G=null,oe=null;A.depth&&(oe=A.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ce=A.stencil?I0:Rf,G=A.stencil?Bf:Sc);const je={colorFormat:t.RGBA8,depthFormat:oe,scaleFactor:s};h=new XRWebGLBinding(r,t),d=h.createProjectionLayer(je),r.updateRenderState({layers:[d]}),v=new Va(d.textureWidth,d.textureHeight,{format:Ps,type:ts,depthTexture:new aO(d.textureWidth,d.textureHeight,G,void 0,void 0,void 0,void 0,void 0,void 0,Ce),stencilBuffer:A.stencil,colorSpace:e.outputColorSpace,samples:A.antialias?4:0});const Tt=e.properties.get(v);Tt.__ignoreDepthValues=d.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await r.requestReferenceSpace(o),Ie.setContext(r),Ie.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function U(pe){for(let Ce=0;Ce<pe.removed.length;Ce++){const G=pe.removed[Ce],oe=x.indexOf(G);oe>=0&&(x[oe]=null,w[oe].disconnect(G))}for(let Ce=0;Ce<pe.added.length;Ce++){const G=pe.added[Ce];let oe=x.indexOf(G);if(oe===-1){for(let Tt=0;Tt<w.length;Tt++)if(Tt>=x.length){x.push(G),oe=Tt;break}else if(x[Tt]===null){x[Tt]=G,oe=Tt;break}if(oe===-1)break}const je=w[oe];je&&je.connect(G)}}const q=new le,W=new le;function F(pe,Ce,G){q.setFromMatrixPosition(Ce.matrixWorld),W.setFromMatrixPosition(G.matrixWorld);const oe=q.distanceTo(W),je=Ce.projectionMatrix.elements,Tt=G.projectionMatrix.elements,rt=je[14]/(je[10]-1),De=je[14]/(je[10]+1),xt=(je[9]+1)/je[5],mt=(je[9]-1)/je[5],et=(je[8]-1)/je[0],st=(Tt[8]+1)/Tt[0],ce=rt*et,tt=rt*st,he=oe/(-et+st),be=he*-et;Ce.matrixWorld.decompose(pe.position,pe.quaternion,pe.scale),pe.translateX(be),pe.translateZ(he),pe.matrixWorld.compose(pe.position,pe.quaternion,pe.scale),pe.matrixWorldInverse.copy(pe.matrixWorld).invert();const Ne=rt+he,nt=De+he,ze=ce-be,me=tt+(oe-be),fe=xt*De/nt*Ne,Be=mt*De/nt*Ne;pe.projectionMatrix.makePerspective(ze,me,fe,Be,Ne,nt),pe.projectionMatrixInverse.copy(pe.projectionMatrix).invert()}function ue(pe,Ce){Ce===null?pe.matrixWorld.copy(pe.matrix):pe.matrixWorld.multiplyMatrices(Ce.matrixWorld,pe.matrix),pe.matrixWorldInverse.copy(pe.matrixWorld).invert()}this.updateCamera=function(pe){if(r===null)return;P.near=S.near=C.near=pe.near,P.far=S.far=C.far=pe.far,(k!==P.near||M!==P.far)&&(r.updateRenderState({depthNear:P.near,depthFar:P.far}),k=P.near,M=P.far);const Ce=pe.parent,G=P.cameras;ue(P,Ce);for(let oe=0;oe<G.length;oe++)ue(G[oe],Ce);G.length===2?F(P,C,S):P.projectionMatrix.copy(C.projectionMatrix),J(pe,P,Ce)};function J(pe,Ce,G){G===null?pe.matrix.copy(Ce.matrixWorld):(pe.matrix.copy(G.matrixWorld),pe.matrix.invert(),pe.matrix.multiply(Ce.matrixWorld)),pe.matrix.decompose(pe.position,pe.quaternion,pe.scale),pe.updateMatrixWorld(!0);const oe=pe.children;for(let je=0,Tt=oe.length;je<Tt;je++)oe[je].updateMatrixWorld(!0);pe.projectionMatrix.copy(Ce.projectionMatrix),pe.projectionMatrixInverse.copy(Ce.projectionMatrixInverse),pe.isPerspectiveCamera&&(pe.fov=Pg*2*Math.atan(1/pe.projectionMatrix.elements[5]),pe.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(pe){l=pe,d!==null&&(d.fixedFoveation=pe),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=pe)};let Y=null;function Pe(pe,Ce){if(u=Ce.getViewerPose(c||a),m=Ce,u!==null){const G=u.views;f!==null&&(e.setRenderTargetFramebuffer(v,f.framebuffer),e.setRenderTarget(v));let oe=!1;G.length!==P.cameras.length&&(P.cameras.length=0,oe=!0);for(let je=0;je<G.length;je++){const Tt=G[je];let rt=null;if(f!==null)rt=f.getViewport(Tt);else{const xt=h.getViewSubImage(d,Tt);rt=xt.viewport,je===0&&(e.setRenderTargetTextures(v,xt.colorTexture,d.ignoreDepthValues?void 0:xt.depthStencilTexture),e.setRenderTarget(v))}let De=I[je];De===void 0&&(De=new _r,De.layers.enable(je),De.viewport=new zi,I[je]=De),De.matrix.fromArray(Tt.transform.matrix),De.matrix.decompose(De.position,De.quaternion,De.scale),De.projectionMatrix.fromArray(Tt.projectionMatrix),De.projectionMatrixInverse.copy(De.projectionMatrix).invert(),De.viewport.set(rt.x,rt.y,rt.width,rt.height),je===0&&(P.matrix.copy(De.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),oe===!0&&P.cameras.push(De)}}for(let G=0;G<w.length;G++){const oe=x[G],je=w[G];oe!==null&&je!==void 0&&je.update(oe,Ce,c||a)}Y&&Y(pe,Ce),Ce.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Ce}),m=null}const Ie=new ZL;Ie.setAnimationLoop(Pe),this.setAnimationLoop=function(pe){Y=pe},this.dispose=function(){}}}function yte(i,e){function t(_,v){_.matrixAutoUpdate===!0&&_.updateMatrix(),v.value.copy(_.matrix)}function n(_,v){v.color.getRGB(_.fogColor.value,YL(i)),v.isFog?(_.fogNear.value=v.near,_.fogFar.value=v.far):v.isFogExp2&&(_.fogDensity.value=v.density)}function r(_,v,w,x,C){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(_,v):v.isMeshToonMaterial?(s(_,v),h(_,v)):v.isMeshPhongMaterial?(s(_,v),u(_,v)):v.isMeshStandardMaterial?(s(_,v),d(_,v),v.isMeshPhysicalMaterial&&f(_,v,C)):v.isMeshMatcapMaterial?(s(_,v),m(_,v)):v.isMeshDepthMaterial?s(_,v):v.isMeshDistanceMaterial?(s(_,v),A(_,v)):v.isMeshNormalMaterial?s(_,v):v.isLineBasicMaterial?(a(_,v),v.isLineDashedMaterial&&o(_,v)):v.isPointsMaterial?l(_,v,w,x):v.isSpriteMaterial?c(_,v):v.isShadowMaterial?(_.color.value.copy(v.color),_.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(_,v){_.opacity.value=v.opacity,v.color&&_.diffuse.value.copy(v.color),v.emissive&&_.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(_.map.value=v.map,t(v.map,_.mapTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,t(v.alphaMap,_.alphaMapTransform)),v.bumpMap&&(_.bumpMap.value=v.bumpMap,t(v.bumpMap,_.bumpMapTransform),_.bumpScale.value=v.bumpScale,v.side===Fo&&(_.bumpScale.value*=-1)),v.normalMap&&(_.normalMap.value=v.normalMap,t(v.normalMap,_.normalMapTransform),_.normalScale.value.copy(v.normalScale),v.side===Fo&&_.normalScale.value.negate()),v.displacementMap&&(_.displacementMap.value=v.displacementMap,t(v.displacementMap,_.displacementMapTransform),_.displacementScale.value=v.displacementScale,_.displacementBias.value=v.displacementBias),v.emissiveMap&&(_.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,_.emissiveMapTransform)),v.specularMap&&(_.specularMap.value=v.specularMap,t(v.specularMap,_.specularMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest);const w=e.get(v).envMap;if(w&&(_.envMap.value=w,_.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=v.reflectivity,_.ior.value=v.ior,_.refractionRatio.value=v.refractionRatio),v.lightMap){_.lightMap.value=v.lightMap;const x=i._useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=v.lightMapIntensity*x,t(v.lightMap,_.lightMapTransform)}v.aoMap&&(_.aoMap.value=v.aoMap,_.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,_.aoMapTransform))}function a(_,v){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,v.map&&(_.map.value=v.map,t(v.map,_.mapTransform))}function o(_,v){_.dashSize.value=v.dashSize,_.totalSize.value=v.dashSize+v.gapSize,_.scale.value=v.scale}function l(_,v,w,x){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,_.size.value=v.size*w,_.scale.value=x*.5,v.map&&(_.map.value=v.map,t(v.map,_.uvTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,t(v.alphaMap,_.alphaMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest)}function c(_,v){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,_.rotation.value=v.rotation,v.map&&(_.map.value=v.map,t(v.map,_.mapTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,t(v.alphaMap,_.alphaMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest)}function u(_,v){_.specular.value.copy(v.specular),_.shininess.value=Math.max(v.shininess,1e-4)}function h(_,v){v.gradientMap&&(_.gradientMap.value=v.gradientMap)}function d(_,v){_.metalness.value=v.metalness,v.metalnessMap&&(_.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,_.metalnessMapTransform)),_.roughness.value=v.roughness,v.roughnessMap&&(_.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,_.roughnessMapTransform)),e.get(v).envMap&&(_.envMapIntensity.value=v.envMapIntensity)}function f(_,v,w){_.ior.value=v.ior,v.sheen>0&&(_.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),_.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(_.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,_.sheenColorMapTransform)),v.sheenRoughnessMap&&(_.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,_.sheenRoughnessMapTransform))),v.clearcoat>0&&(_.clearcoat.value=v.clearcoat,_.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(_.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,_.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(_.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Fo&&_.clearcoatNormalScale.value.negate())),v.iridescence>0&&(_.iridescence.value=v.iridescence,_.iridescenceIOR.value=v.iridescenceIOR,_.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(_.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,_.iridescenceMapTransform)),v.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),v.transmission>0&&(_.transmission.value=v.transmission,_.transmissionSamplerMap.value=w.texture,_.transmissionSamplerSize.value.set(w.width,w.height),v.transmissionMap&&(_.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,_.transmissionMapTransform)),_.thickness.value=v.thickness,v.thicknessMap&&(_.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=v.attenuationDistance,_.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(_.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(_.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=v.specularIntensity,_.specularColor.value.copy(v.specularColor),v.specularColorMap&&(_.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,_.specularColorMapTransform)),v.specularIntensityMap&&(_.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,_.specularIntensityMapTransform))}function m(_,v){v.matcap&&(_.matcap.value=v.matcap)}function A(_,v){const w=e.get(v).light;_.referencePosition.value.setFromMatrixPosition(w.matrixWorld),_.nearDistance.value=w.shadow.camera.near,_.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function wte(i,e,t,n){let r={},s={},a=[];const o=t.isWebGL2?i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(w,x){const C=x.program;n.uniformBlockBinding(w,C)}function c(w,x){let C=r[w.id];C===void 0&&(m(w),C=u(w),r[w.id]=C,w.addEventListener("dispose",_));const S=x.program;n.updateUBOMapping(w,S);const I=e.render.frame;s[w.id]!==I&&(d(w),s[w.id]=I)}function u(w){const x=h();w.__bindingPointIndex=x;const C=i.createBuffer(),S=w.__size,I=w.usage;return i.bindBuffer(i.UNIFORM_BUFFER,C),i.bufferData(i.UNIFORM_BUFFER,S,I),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,x,C),C}function h(){for(let w=0;w<o;w++)if(a.indexOf(w)===-1)return a.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(w){const x=r[w.id],C=w.uniforms,S=w.__cache;i.bindBuffer(i.UNIFORM_BUFFER,x);for(let I=0,P=C.length;I<P;I++){const k=C[I];if(f(k,I,S)===!0){const M=k.__offset,R=Array.isArray(k.value)?k.value:[k.value];let N=0;for(let U=0;U<R.length;U++){const q=R[U],W=A(q);typeof q=="number"?(k.__data[0]=q,i.bufferSubData(i.UNIFORM_BUFFER,M+N,k.__data)):q.isMatrix3?(k.__data[0]=q.elements[0],k.__data[1]=q.elements[1],k.__data[2]=q.elements[2],k.__data[3]=q.elements[0],k.__data[4]=q.elements[3],k.__data[5]=q.elements[4],k.__data[6]=q.elements[5],k.__data[7]=q.elements[0],k.__data[8]=q.elements[6],k.__data[9]=q.elements[7],k.__data[10]=q.elements[8],k.__data[11]=q.elements[0]):(q.toArray(k.__data,N),N+=W.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,M,k.__data)}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function f(w,x,C){const S=w.value;if(C[x]===void 0){if(typeof S=="number")C[x]=S;else{const I=Array.isArray(S)?S:[S],P=[];for(let k=0;k<I.length;k++)P.push(I[k].clone());C[x]=P}return!0}else if(typeof S=="number"){if(C[x]!==S)return C[x]=S,!0}else{const I=Array.isArray(C[x])?C[x]:[C[x]],P=Array.isArray(S)?S:[S];for(let k=0;k<I.length;k++){const M=I[k];if(M.equals(P[k])===!1)return M.copy(P[k]),!0}}return!1}function m(w){const x=w.uniforms;let C=0;const S=16;let I=0;for(let P=0,k=x.length;P<k;P++){const M=x[P],R={boundary:0,storage:0},N=Array.isArray(M.value)?M.value:[M.value];for(let U=0,q=N.length;U<q;U++){const W=N[U],F=A(W);R.boundary+=F.boundary,R.storage+=F.storage}if(M.__data=new Float32Array(R.storage/Float32Array.BYTES_PER_ELEMENT),M.__offset=C,P>0){I=C%S;const U=S-I;I!==0&&U-R.boundary<0&&(C+=S-I,M.__offset=C)}C+=R.storage}return I=C%S,I>0&&(C+=S-I),w.__size=C,w.__cache={},this}function A(w){const x={boundary:0,storage:0};return typeof w=="number"?(x.boundary=4,x.storage=4):w.isVector2?(x.boundary=8,x.storage=8):w.isVector3||w.isColor?(x.boundary=16,x.storage=12):w.isVector4?(x.boundary=16,x.storage=16):w.isMatrix3?(x.boundary=48,x.storage=48):w.isMatrix4?(x.boundary=64,x.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),x}function _(w){const x=w.target;x.removeEventListener("dispose",_);const C=a.indexOf(x.__bindingPointIndex);a.splice(C,1),i.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}function v(){for(const w in r)i.deleteBuffer(r[w]);a=[],r={},s={}}return{bind:l,update:c,dispose:v}}function xte(){const i=w1("canvas");return i.style.display="block",i}class m5{constructor(e={}){const{canvas:t=xte(),context:n=null,depth:r=!0,stencil:s=!0,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1,webgl1:d=!1}=e;this.isWebGLRenderer=!0,d&&(this.isWebGL1Renderer=!0);let f;n!==null?f=n.getContextAttributes().alpha:f=a;const m=new Uint32Array(4),A=new Int32Array(4);let _=null,v=null;const w=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=En,this._useLegacyLights=!1,this.toneMapping=md,this.toneMappingExposure=1;const C=this;let S=!1,I=0,P=0,k=null,M=-1,R=null;const N=new zi,U=new zi;let q=null;const W=new Ut(0);let F=0,ue=t.width,J=t.height,Y=1,Pe=null,Ie=null;const pe=new zi(0,0,ue,J),Ce=new zi(0,0,ue,J);let G=!1;const oe=new C2;let je=!1,Tt=!1,rt=null;const De=new jn,xt=new _t,mt=new le,et={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function st(){return k===null?Y:1}let ce=n;function tt(se,Ze){for(let ht=0;ht<se.length;ht++){const qe=se[ht],gt=t.getContext(qe,Ze);if(gt!==null)return gt}return null}try{const se={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${h2}`),t.addEventListener("webglcontextlost",$e,!1),t.addEventListener("webglcontextrestored",Lt,!1),t.addEventListener("webglcontextcreationerror",Ft,!1),ce===null){const Ze=["webgl2","webgl","experimental-webgl"];if(C.isWebGL1Renderer===!0&&Ze.shift(),ce=tt(Ze,se),ce===null)throw tt(Ze)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&ce instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),ce.getShaderPrecisionFormat===void 0&&(ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(se){throw console.error("THREE.WebGLRenderer: "+se.message),se}let he,be,Ne,nt,ze,me,fe,Be,V,$,ee,Te,te,Qe,Vt,ye,Ee,St,Rt,Bt,Qt,Nt,$t,Qn;function de(){he=new FZ(ce),be=new BZ(ce,he,e),he.init(be),Nt=new rO(ce,he,be),Ne=new vte(ce,he,be),nt=new VZ(ce),ze=new ste,me=new Ate(ce,he,Ne,ze,be,Nt,nt),fe=new DZ(C),Be=new NZ(C),V=new KY(ce,be),$t=new PZ(ce,he,V,be),$=new zZ(ce,V,nt,$t),ee=new qZ(ce,$,V,nt),Rt=new QZ(ce,be,me),ye=new RZ(ze),Te=new rte(C,fe,Be,he,be,$t,ye),te=new yte(C,ze),Qe=new ote,Vt=new fte(he,be),St=new IZ(C,fe,Be,Ne,ee,f,l),Ee=new gte(C,ee,be),Qn=new wte(ce,nt,be,Ne),Bt=new kZ(ce,he,nt,be),Qt=new UZ(ce,he,nt,be),nt.programs=Te.programs,C.capabilities=be,C.extensions=he,C.properties=ze,C.renderLists=Qe,C.shadowMap=Ee,C.state=Ne,C.info=nt}de();const It=new bte(C,ce);this.xr=It,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const se=he.get("WEBGL_lose_context");se&&se.loseContext()},this.forceContextRestore=function(){const se=he.get("WEBGL_lose_context");se&&se.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(se){se!==void 0&&(Y=se,this.setSize(ue,J,!1))},this.getSize=function(se){return se.set(ue,J)},this.setSize=function(se,Ze,ht=!0){if(It.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ue=se,J=Ze,t.width=Math.floor(se*Y),t.height=Math.floor(Ze*Y),ht===!0&&(t.style.width=se+"px",t.style.height=Ze+"px"),this.setViewport(0,0,se,Ze)},this.getDrawingBufferSize=function(se){return se.set(ue*Y,J*Y).floor()},this.setDrawingBufferSize=function(se,Ze,ht){ue=se,J=Ze,Y=ht,t.width=Math.floor(se*ht),t.height=Math.floor(Ze*ht),this.setViewport(0,0,se,Ze)},this.getCurrentViewport=function(se){return se.copy(N)},this.getViewport=function(se){return se.copy(pe)},this.setViewport=function(se,Ze,ht,qe){se.isVector4?pe.set(se.x,se.y,se.z,se.w):pe.set(se,Ze,ht,qe),Ne.viewport(N.copy(pe).multiplyScalar(Y).floor())},this.getScissor=function(se){return se.copy(Ce)},this.setScissor=function(se,Ze,ht,qe){se.isVector4?Ce.set(se.x,se.y,se.z,se.w):Ce.set(se,Ze,ht,qe),Ne.scissor(U.copy(Ce).multiplyScalar(Y).floor())},this.getScissorTest=function(){return G},this.setScissorTest=function(se){Ne.setScissorTest(G=se)},this.setOpaqueSort=function(se){Pe=se},this.setTransparentSort=function(se){Ie=se},this.getClearColor=function(se){return se.copy(St.getClearColor())},this.setClearColor=function(){St.setClearColor.apply(St,arguments)},this.getClearAlpha=function(){return St.getClearAlpha()},this.setClearAlpha=function(){St.setClearAlpha.apply(St,arguments)},this.clear=function(se=!0,Ze=!0,ht=!0){let qe=0;if(se){let gt=!1;if(k!==null){const Yt=k.texture.format;gt=Yt===n5||Yt===t5||Yt===e5}if(gt){const Yt=k.texture.type,un=Yt===ts||Yt===Sc||Yt===V0||Yt===Bf||Yt===g2||Yt===v2,sn=St.getClearColor(),yn=St.getClearAlpha(),Hn=sn.r,vn=sn.g,wn=sn.b;un?(m[0]=Hn,m[1]=vn,m[2]=wn,m[3]=yn,ce.clearBufferuiv(ce.COLOR,0,m)):(A[0]=Hn,A[1]=vn,A[2]=wn,A[3]=yn,ce.clearBufferiv(ce.COLOR,0,A))}else qe|=ce.COLOR_BUFFER_BIT}Ze&&(qe|=ce.DEPTH_BUFFER_BIT),ht&&(qe|=ce.STENCIL_BUFFER_BIT),ce.clear(qe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",$e,!1),t.removeEventListener("webglcontextrestored",Lt,!1),t.removeEventListener("webglcontextcreationerror",Ft,!1),Qe.dispose(),Vt.dispose(),ze.dispose(),fe.dispose(),Be.dispose(),ee.dispose(),$t.dispose(),Qn.dispose(),Te.dispose(),It.dispose(),It.removeEventListener("sessionstart",vs),It.removeEventListener("sessionend",er),rt&&(rt.dispose(),rt=null),fa.stop()};function $e(se){se.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function Lt(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const se=nt.autoReset,Ze=Ee.enabled,ht=Ee.autoUpdate,qe=Ee.needsUpdate,gt=Ee.type;de(),nt.autoReset=se,Ee.enabled=Ze,Ee.autoUpdate=ht,Ee.needsUpdate=qe,Ee.type=gt}function Ft(se){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",se.statusMessage)}function Le(se){const Ze=se.target;Ze.removeEventListener("dispose",Le),bn(Ze)}function bn(se){_i(se),ze.remove(se)}function _i(se){const Ze=ze.get(se).programs;Ze!==void 0&&(Ze.forEach(function(ht){Te.releaseProgram(ht)}),se.isShaderMaterial&&Te.releaseShaderCache(se))}this.renderBufferDirect=function(se,Ze,ht,qe,gt,Yt){Ze===null&&(Ze=et);const un=gt.isMesh&&gt.matrixWorld.determinant()<0,sn=_o(se,Ze,ht,qe,gt);Ne.setMaterial(qe,un);let yn=ht.index,Hn=1;qe.wireframe===!0&&(yn=$.getWireframeAttribute(ht),Hn=2);const vn=ht.drawRange,wn=ht.attributes.position;let tr=vn.start*Hn,Si=(vn.start+vn.count)*Hn;Yt!==null&&(tr=Math.max(tr,Yt.start*Hn),Si=Math.min(Si,(Yt.start+Yt.count)*Hn)),yn!==null?(tr=Math.max(tr,0),Si=Math.min(Si,yn.count)):wn!=null&&(tr=Math.max(tr,0),Si=Math.min(Si,wn.count));const rs=Si-tr;if(rs<0||rs===1/0)return;$t.setup(gt,qe,sn,ht,yn);let js,Xn=Bt;if(yn!==null&&(js=V.get(yn),Xn=Qt,Xn.setIndex(js)),gt.isMesh)qe.wireframe===!0?(Ne.setLineWidth(qe.wireframeLinewidth*st()),Xn.setMode(ce.LINES)):Xn.setMode(ce.TRIANGLES);else if(gt.isLine){let Tn=qe.linewidth;Tn===void 0&&(Tn=1),Ne.setLineWidth(Tn*st()),gt.isLineSegments?Xn.setMode(ce.LINES):gt.isLineLoop?Xn.setMode(ce.LINE_LOOP):Xn.setMode(ce.LINE_STRIP)}else gt.isPoints?Xn.setMode(ce.POINTS):gt.isSprite&&Xn.setMode(ce.TRIANGLES);if(gt.isInstancedMesh)Xn.renderInstances(tr,rs,gt.count);else if(ht.isInstancedBufferGeometry){const Tn=ht._maxInstanceCount!==void 0?ht._maxInstanceCount:1/0,bo=Math.min(ht.instanceCount,Tn);Xn.renderInstances(tr,rs,bo)}else Xn.render(tr,rs)},this.compile=function(se,Ze){function ht(qe,gt,Yt){qe.transparent===!0&&qe.side===fs&&qe.forceSinglePass===!1?(qe.side=Fo,qe.needsUpdate=!0,Mu(qe,gt,Yt),qe.side=dh,qe.needsUpdate=!0,Mu(qe,gt,Yt),qe.side=fs):Mu(qe,gt,Yt)}v=Vt.get(se),v.init(),x.push(v),se.traverseVisible(function(qe){qe.isLight&&qe.layers.test(Ze.layers)&&(v.pushLight(qe),qe.castShadow&&v.pushShadow(qe))}),v.setupLights(C._useLegacyLights),se.traverse(function(qe){const gt=qe.material;if(gt)if(Array.isArray(gt))for(let Yt=0;Yt<gt.length;Yt++){const un=gt[Yt];ht(un,se,qe)}else ht(gt,se,qe)}),x.pop(),v=null};let gs=null;function ei(se){gs&&gs(se)}function vs(){fa.stop()}function er(){fa.start()}const fa=new ZL;fa.setAnimationLoop(ei),typeof self<"u"&&fa.setContext(self),this.setAnimationLoop=function(se){gs=se,It.setAnimationLoop(se),se===null?fa.stop():fa.start()},It.addEventListener("sessionstart",vs),It.addEventListener("sessionend",er),this.render=function(se,Ze){if(Ze!==void 0&&Ze.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;se.matrixWorldAutoUpdate===!0&&se.updateMatrixWorld(),Ze.parent===null&&Ze.matrixWorldAutoUpdate===!0&&Ze.updateMatrixWorld(),It.enabled===!0&&It.isPresenting===!0&&(It.cameraAutoUpdate===!0&&It.updateCamera(Ze),Ze=It.getCamera()),se.isScene===!0&&se.onBeforeRender(C,se,Ze,k),v=Vt.get(se,x.length),v.init(),x.push(v),De.multiplyMatrices(Ze.projectionMatrix,Ze.matrixWorldInverse),oe.setFromProjectionMatrix(De),Tt=this.localClippingEnabled,je=ye.init(this.clippingPlanes,Tt),_=Qe.get(se,w.length),_.init(),w.push(_),El(se,Ze,0,C.sortObjects),_.finish(),C.sortObjects===!0&&_.sort(Pe,Ie),this.info.render.frame++,je===!0&&ye.beginShadows();const ht=v.state.shadowsArray;if(Ee.render(ht,se,Ze),je===!0&&ye.endShadows(),this.info.autoReset===!0&&this.info.reset(),St.render(_,se),v.setupLights(C._useLegacyLights),Ze.isArrayCamera){const qe=Ze.cameras;for(let gt=0,Yt=qe.length;gt<Yt;gt++){const un=qe[gt];nc(_,se,un,un.viewport)}}else nc(_,se,Ze);k!==null&&(me.updateMultisampleRenderTarget(k),me.updateRenderTargetMipmap(k)),se.isScene===!0&&se.onAfterRender(C,se,Ze),$t.resetDefaultState(),M=-1,R=null,x.pop(),x.length>0?v=x[x.length-1]:v=null,w.pop(),w.length>0?_=w[w.length-1]:_=null};function El(se,Ze,ht,qe){if(se.visible===!1)return;if(se.layers.test(Ze.layers)){if(se.isGroup)ht=se.renderOrder;else if(se.isLOD)se.autoUpdate===!0&&se.update(Ze);else if(se.isLight)v.pushLight(se),se.castShadow&&v.pushShadow(se);else if(se.isSprite){if(!se.frustumCulled||oe.intersectsSprite(se)){qe&&mt.setFromMatrixPosition(se.matrixWorld).applyMatrix4(De);const un=ee.update(se),sn=se.material;sn.visible&&_.push(se,un,sn,ht,mt.z,null)}}else if((se.isMesh||se.isLine||se.isPoints)&&(!se.frustumCulled||oe.intersectsObject(se))){const un=ee.update(se),sn=se.material;if(qe&&(se.boundingSphere!==void 0?(se.boundingSphere===null&&se.computeBoundingSphere(),mt.copy(se.boundingSphere.center)):(un.boundingSphere===null&&un.computeBoundingSphere(),mt.copy(un.boundingSphere.center)),mt.applyMatrix4(se.matrixWorld).applyMatrix4(De)),Array.isArray(sn)){const yn=un.groups;for(let Hn=0,vn=yn.length;Hn<vn;Hn++){const wn=yn[Hn],tr=sn[wn.materialIndex];tr&&tr.visible&&_.push(se,un,tr,ht,mt.z,wn)}}else sn.visible&&_.push(se,un,sn,ht,mt.z,null)}}const Yt=se.children;for(let un=0,sn=Yt.length;un<sn;un++)El(Yt[un],Ze,ht,qe)}function nc(se,Ze,ht,qe){const gt=se.opaque,Yt=se.transmissive,un=se.transparent;v.setupLightsView(ht),je===!0&&ye.setGlobalState(C.clippingPlanes,ht),Yt.length>0&&Ka(gt,Yt,Ze,ht),qe&&Ne.viewport(N.copy(qe)),gt.length>0&&Sl(gt,Ze,ht),Yt.length>0&&Sl(Yt,Ze,ht),un.length>0&&Sl(un,Ze,ht),Ne.buffers.depth.setTest(!0),Ne.buffers.depth.setMask(!0),Ne.buffers.color.setMask(!0),Ne.setPolygonOffset(!1)}function Ka(se,Ze,ht,qe){const gt=be.isWebGL2;rt===null&&(rt=new Va(1,1,{generateMipmaps:!0,type:he.has("EXT_color_buffer_half_float")?zo:ts,minFilter:_u,samples:gt?4:0})),C.getDrawingBufferSize(xt),gt?rt.setSize(xt.x,xt.y):rt.setSize(bx(xt.x),bx(xt.y));const Yt=C.getRenderTarget();C.setRenderTarget(rt),C.getClearColor(W),F=C.getClearAlpha(),F<1&&C.setClearColor(16777215,.5),C.clear();const un=C.toneMapping;C.toneMapping=md,Sl(se,ht,qe),me.updateMultisampleRenderTarget(rt),me.updateRenderTargetMipmap(rt);let sn=!1;for(let yn=0,Hn=Ze.length;yn<Hn;yn++){const vn=Ze[yn],wn=vn.object,tr=vn.geometry,Si=vn.material,rs=vn.group;if(Si.side===fs&&wn.layers.test(qe.layers)){const js=Si.side;Si.side=Fo,Si.needsUpdate=!0,Uc(wn,ht,qe,tr,Si,rs),Si.side=js,Si.needsUpdate=!0,sn=!0}}sn===!0&&(me.updateMultisampleRenderTarget(rt),me.updateRenderTargetMipmap(rt)),C.setRenderTarget(Yt),C.setClearColor(W,F),C.toneMapping=un}function Sl(se,Ze,ht){const qe=Ze.isScene===!0?Ze.overrideMaterial:null;for(let gt=0,Yt=se.length;gt<Yt;gt++){const un=se[gt],sn=un.object,yn=un.geometry,Hn=qe===null?un.material:qe,vn=un.group;sn.layers.test(ht.layers)&&Uc(sn,Ze,ht,yn,Hn,vn)}}function Uc(se,Ze,ht,qe,gt,Yt){se.onBeforeRender(C,Ze,ht,qe,gt,Yt),se.modelViewMatrix.multiplyMatrices(ht.matrixWorldInverse,se.matrixWorld),se.normalMatrix.getNormalMatrix(se.modelViewMatrix),gt.onBeforeRender(C,Ze,ht,qe,se,Yt),gt.transparent===!0&&gt.side===fs&&gt.forceSinglePass===!1?(gt.side=Fo,gt.needsUpdate=!0,C.renderBufferDirect(ht,Ze,qe,gt,se,Yt),gt.side=dh,gt.needsUpdate=!0,C.renderBufferDirect(ht,Ze,qe,gt,se,Yt),gt.side=fs):C.renderBufferDirect(ht,Ze,qe,gt,se,Yt),se.onAfterRender(C,Ze,ht,qe,gt,Yt)}function Mu(se,Ze,ht){Ze.isScene!==!0&&(Ze=et);const qe=ze.get(se),gt=v.state.lights,Yt=v.state.shadowsArray,un=gt.state.version,sn=Te.getParameters(se,gt.state,Yt,Ze,ht),yn=Te.getProgramCacheKey(sn);let Hn=qe.programs;qe.environment=se.isMeshStandardMaterial?Ze.environment:null,qe.fog=Ze.fog,qe.envMap=(se.isMeshStandardMaterial?Be:fe).get(se.envMap||qe.environment),Hn===void 0&&(se.addEventListener("dispose",Le),Hn=new Map,qe.programs=Hn);let vn=Hn.get(yn);if(vn!==void 0){if(qe.currentProgram===vn&&qe.lightsStateVersion===un)return Nd(se,sn),vn}else sn.uniforms=Te.getUniforms(se),se.onBuild(ht,sn,C),se.onBeforeCompile(sn,C),vn=Te.acquireProgram(sn,yn),Hn.set(yn,vn),qe.uniforms=sn.uniforms;const wn=qe.uniforms;(!se.isShaderMaterial&&!se.isRawShaderMaterial||se.clipping===!0)&&(wn.clippingPlanes=ye.uniform),Nd(se,sn),qe.needsLights=Ds(se),qe.lightsStateVersion=un,qe.needsLights&&(wn.ambientLightColor.value=gt.state.ambient,wn.lightProbe.value=gt.state.probe,wn.directionalLights.value=gt.state.directional,wn.directionalLightShadows.value=gt.state.directionalShadow,wn.spotLights.value=gt.state.spot,wn.spotLightShadows.value=gt.state.spotShadow,wn.rectAreaLights.value=gt.state.rectArea,wn.ltc_1.value=gt.state.rectAreaLTC1,wn.ltc_2.value=gt.state.rectAreaLTC2,wn.pointLights.value=gt.state.point,wn.pointLightShadows.value=gt.state.pointShadow,wn.hemisphereLights.value=gt.state.hemi,wn.directionalShadowMap.value=gt.state.directionalShadowMap,wn.directionalShadowMatrix.value=gt.state.directionalShadowMatrix,wn.spotShadowMap.value=gt.state.spotShadowMap,wn.spotLightMatrix.value=gt.state.spotLightMatrix,wn.spotLightMap.value=gt.state.spotLightMap,wn.pointShadowMap.value=gt.state.pointShadowMap,wn.pointShadowMatrix.value=gt.state.pointShadowMatrix);const tr=vn.getUniforms(),Si=Ww.seqWithValue(tr.seq,wn);return qe.currentProgram=vn,qe.uniformsList=Si,vn}function Nd(se,Ze){const ht=ze.get(se);ht.outputColorSpace=Ze.outputColorSpace,ht.instancing=Ze.instancing,ht.skinning=Ze.skinning,ht.morphTargets=Ze.morphTargets,ht.morphNormals=Ze.morphNormals,ht.morphColors=Ze.morphColors,ht.morphTargetsCount=Ze.morphTargetsCount,ht.numClippingPlanes=Ze.numClippingPlanes,ht.numIntersection=Ze.numClipIntersection,ht.vertexAlphas=Ze.vertexAlphas,ht.vertexTangents=Ze.vertexTangents,ht.toneMapping=Ze.toneMapping}function _o(se,Ze,ht,qe,gt){Ze.isScene!==!0&&(Ze=et),me.resetTextureUnits();const Yt=Ze.fog,un=qe.isMeshStandardMaterial?Ze.environment:null,sn=k===null?C.outputColorSpace:k.isXRRenderTarget===!0?k.texture.colorSpace:Dc,yn=(qe.isMeshStandardMaterial?Be:fe).get(qe.envMap||un),Hn=qe.vertexColors===!0&&!!ht.attributes.color&&ht.attributes.color.itemSize===4,vn=!!ht.attributes.tangent&&(!!qe.normalMap||qe.anisotropy>0),wn=!!ht.morphAttributes.position,tr=!!ht.morphAttributes.normal,Si=!!ht.morphAttributes.color;let rs=md;qe.toneMapped&&(k===null||k.isXRRenderTarget===!0)&&(rs=C.toneMapping);const js=ht.morphAttributes.position||ht.morphAttributes.normal||ht.morphAttributes.color,Xn=js!==void 0?js.length:0,Tn=ze.get(qe),bo=v.state.lights;if(je===!0&&(Tt===!0||se!==R)){const Ws=se===R&&qe.id===M;ye.setState(qe,se,Ws)}let Mr=!1;qe.version===Tn.__version?(Tn.needsLights&&Tn.lightsStateVersion!==bo.state.version||Tn.outputColorSpace!==sn||gt.isInstancedMesh&&Tn.instancing===!1||!gt.isInstancedMesh&&Tn.instancing===!0||gt.isSkinnedMesh&&Tn.skinning===!1||!gt.isSkinnedMesh&&Tn.skinning===!0||Tn.envMap!==yn||qe.fog===!0&&Tn.fog!==Yt||Tn.numClippingPlanes!==void 0&&(Tn.numClippingPlanes!==ye.numPlanes||Tn.numIntersection!==ye.numIntersection)||Tn.vertexAlphas!==Hn||Tn.vertexTangents!==vn||Tn.morphTargets!==wn||Tn.morphNormals!==tr||Tn.morphColors!==Si||Tn.toneMapping!==rs||be.isWebGL2===!0&&Tn.morphTargetsCount!==Xn)&&(Mr=!0):(Mr=!0,Tn.__version=qe.version);let ur=Tn.currentProgram;Mr===!0&&(ur=Mu(qe,Ze,gt));let $r=!1,ic=!1,Ml=!1;const hr=ur.getUniforms(),Ja=Tn.uniforms;if(Ne.useProgram(ur.program)&&($r=!0,ic=!0,Ml=!0),qe.id!==M&&(M=qe.id,ic=!0),$r||R!==se){if(hr.setValue(ce,"projectionMatrix",se.projectionMatrix),be.logarithmicDepthBuffer&&hr.setValue(ce,"logDepthBufFC",2/(Math.log(se.far+1)/Math.LN2)),R!==se&&(R=se,ic=!0,Ml=!0),qe.isShaderMaterial||qe.isMeshPhongMaterial||qe.isMeshToonMaterial||qe.isMeshStandardMaterial||qe.envMap){const Ws=hr.map.cameraPosition;Ws!==void 0&&Ws.setValue(ce,mt.setFromMatrixPosition(se.matrixWorld))}(qe.isMeshPhongMaterial||qe.isMeshToonMaterial||qe.isMeshLambertMaterial||qe.isMeshBasicMaterial||qe.isMeshStandardMaterial||qe.isShaderMaterial)&&hr.setValue(ce,"isOrthographic",se.isOrthographicCamera===!0),(qe.isMeshPhongMaterial||qe.isMeshToonMaterial||qe.isMeshLambertMaterial||qe.isMeshBasicMaterial||qe.isMeshStandardMaterial||qe.isShaderMaterial||qe.isShadowMaterial||gt.isSkinnedMesh)&&hr.setValue(ce,"viewMatrix",se.matrixWorldInverse)}if(gt.isSkinnedMesh){hr.setOptional(ce,gt,"bindMatrix"),hr.setOptional(ce,gt,"bindMatrixInverse");const Ws=gt.skeleton;Ws&&(be.floatVertexTextures?(Ws.boneTexture===null&&Ws.computeBoneTexture(),hr.setValue(ce,"boneTexture",Ws.boneTexture,me),hr.setValue(ce,"boneTextureSize",Ws.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Tl=ht.morphAttributes;if((Tl.position!==void 0||Tl.normal!==void 0||Tl.color!==void 0&&be.isWebGL2===!0)&&Rt.update(gt,ht,ur),(ic||Tn.receiveShadow!==gt.receiveShadow)&&(Tn.receiveShadow=gt.receiveShadow,hr.setValue(ce,"receiveShadow",gt.receiveShadow)),qe.isMeshGouraudMaterial&&qe.envMap!==null&&(Ja.envMap.value=yn,Ja.flipEnvMap.value=yn.isCubeTexture&&yn.isRenderTargetTexture===!1?-1:1),ic&&(hr.setValue(ce,"toneMappingExposure",C.toneMappingExposure),Tn.needsLights&&Tu(Ja,Ml),Yt&&qe.fog===!0&&te.refreshFogUniforms(Ja,Yt),te.refreshMaterialUniforms(Ja,qe,Y,J,rt),Ww.upload(ce,Tn.uniformsList,Ja,me)),qe.isShaderMaterial&&qe.uniformsNeedUpdate===!0&&(Ww.upload(ce,Tn.uniformsList,Ja,me),qe.uniformsNeedUpdate=!1),qe.isSpriteMaterial&&hr.setValue(ce,"center",gt.center),hr.setValue(ce,"modelViewMatrix",gt.modelViewMatrix),hr.setValue(ce,"normalMatrix",gt.normalMatrix),hr.setValue(ce,"modelMatrix",gt.matrixWorld),qe.isShaderMaterial||qe.isRawShaderMaterial){const Ws=qe.uniformsGroups;for(let Vc=0,Sh=Ws.length;Vc<Sh;Vc++)if(be.isWebGL2){const rc=Ws[Vc];Qn.update(rc,ur),Qn.bind(rc,ur)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ur}function Tu(se,Ze){se.ambientLightColor.needsUpdate=Ze,se.lightProbe.needsUpdate=Ze,se.directionalLights.needsUpdate=Ze,se.directionalLightShadows.needsUpdate=Ze,se.pointLights.needsUpdate=Ze,se.pointLightShadows.needsUpdate=Ze,se.spotLights.needsUpdate=Ze,se.spotLightShadows.needsUpdate=Ze,se.rectAreaLights.needsUpdate=Ze,se.hemisphereLights.needsUpdate=Ze}function Ds(se){return se.isMeshLambertMaterial||se.isMeshToonMaterial||se.isMeshPhongMaterial||se.isMeshStandardMaterial||se.isShadowMaterial||se.isShaderMaterial&&se.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return k},this.setRenderTargetTextures=function(se,Ze,ht){ze.get(se.texture).__webglTexture=Ze,ze.get(se.depthTexture).__webglTexture=ht;const qe=ze.get(se);qe.__hasExternalTextures=!0,qe.__hasExternalTextures&&(qe.__autoAllocateDepthBuffer=ht===void 0,qe.__autoAllocateDepthBuffer||he.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),qe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(se,Ze){const ht=ze.get(se);ht.__webglFramebuffer=Ze,ht.__useDefaultFramebuffer=Ze===void 0},this.setRenderTarget=function(se,Ze=0,ht=0){k=se,I=Ze,P=ht;let qe=!0,gt=null,Yt=!1,un=!1;if(se){const yn=ze.get(se);yn.__useDefaultFramebuffer!==void 0?(Ne.bindFramebuffer(ce.FRAMEBUFFER,null),qe=!1):yn.__webglFramebuffer===void 0?me.setupRenderTarget(se):yn.__hasExternalTextures&&me.rebindTextures(se,ze.get(se.texture).__webglTexture,ze.get(se.depthTexture).__webglTexture);const Hn=se.texture;(Hn.isData3DTexture||Hn.isDataArrayTexture||Hn.isCompressedArrayTexture)&&(un=!0);const vn=ze.get(se).__webglFramebuffer;se.isWebGLCubeRenderTarget?(gt=vn[Ze],Yt=!0):be.isWebGL2&&se.samples>0&&me.useMultisampledRTT(se)===!1?gt=ze.get(se).__webglMultisampledFramebuffer:gt=vn,N.copy(se.viewport),U.copy(se.scissor),q=se.scissorTest}else N.copy(pe).multiplyScalar(Y).floor(),U.copy(Ce).multiplyScalar(Y).floor(),q=G;if(Ne.bindFramebuffer(ce.FRAMEBUFFER,gt)&&be.drawBuffers&&qe&&Ne.drawBuffers(se,gt),Ne.viewport(N),Ne.scissor(U),Ne.setScissorTest(q),Yt){const yn=ze.get(se.texture);ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,yn.__webglTexture,ht)}else if(un){const yn=ze.get(se.texture),Hn=Ze||0;ce.framebufferTextureLayer(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,yn.__webglTexture,ht||0,Hn)}M=-1},this.readRenderTargetPixels=function(se,Ze,ht,qe,gt,Yt,un){if(!(se&&se.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let sn=ze.get(se).__webglFramebuffer;if(se.isWebGLCubeRenderTarget&&un!==void 0&&(sn=sn[un]),sn){Ne.bindFramebuffer(ce.FRAMEBUFFER,sn);try{const yn=se.texture,Hn=yn.format,vn=yn.type;if(Hn!==Ps&&Nt.convert(Hn)!==ce.getParameter(ce.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const wn=vn===zo&&(he.has("EXT_color_buffer_half_float")||be.isWebGL2&&he.has("EXT_color_buffer_float"));if(vn!==ts&&Nt.convert(vn)!==ce.getParameter(ce.IMPLEMENTATION_COLOR_READ_TYPE)&&!(vn===ns&&(be.isWebGL2||he.has("OES_texture_float")||he.has("WEBGL_color_buffer_float")))&&!wn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ze>=0&&Ze<=se.width-qe&&ht>=0&&ht<=se.height-gt&&ce.readPixels(Ze,ht,qe,gt,Nt.convert(Hn),Nt.convert(vn),Yt)}finally{const yn=k!==null?ze.get(k).__webglFramebuffer:null;Ne.bindFramebuffer(ce.FRAMEBUFFER,yn)}}},this.copyFramebufferToTexture=function(se,Ze,ht=0){const qe=Math.pow(2,-ht),gt=Math.floor(Ze.image.width*qe),Yt=Math.floor(Ze.image.height*qe);me.setTexture2D(Ze,0),ce.copyTexSubImage2D(ce.TEXTURE_2D,ht,0,0,se.x,se.y,gt,Yt),Ne.unbindTexture()},this.copyTextureToTexture=function(se,Ze,ht,qe=0){const gt=Ze.image.width,Yt=Ze.image.height,un=Nt.convert(ht.format),sn=Nt.convert(ht.type);me.setTexture2D(ht,0),ce.pixelStorei(ce.UNPACK_FLIP_Y_WEBGL,ht.flipY),ce.pixelStorei(ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ht.premultiplyAlpha),ce.pixelStorei(ce.UNPACK_ALIGNMENT,ht.unpackAlignment),Ze.isDataTexture?ce.texSubImage2D(ce.TEXTURE_2D,qe,se.x,se.y,gt,Yt,un,sn,Ze.image.data):Ze.isCompressedTexture?ce.compressedTexSubImage2D(ce.TEXTURE_2D,qe,se.x,se.y,Ze.mipmaps[0].width,Ze.mipmaps[0].height,un,Ze.mipmaps[0].data):ce.texSubImage2D(ce.TEXTURE_2D,qe,se.x,se.y,un,sn,Ze.image),qe===0&&ht.generateMipmaps&&ce.generateMipmap(ce.TEXTURE_2D),Ne.unbindTexture()},this.copyTextureToTexture3D=function(se,Ze,ht,qe,gt=0){if(C.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Yt=se.max.x-se.min.x+1,un=se.max.y-se.min.y+1,sn=se.max.z-se.min.z+1,yn=Nt.convert(qe.format),Hn=Nt.convert(qe.type);let vn;if(qe.isData3DTexture)me.setTexture3D(qe,0),vn=ce.TEXTURE_3D;else if(qe.isDataArrayTexture)me.setTexture2DArray(qe,0),vn=ce.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ce.pixelStorei(ce.UNPACK_FLIP_Y_WEBGL,qe.flipY),ce.pixelStorei(ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,qe.premultiplyAlpha),ce.pixelStorei(ce.UNPACK_ALIGNMENT,qe.unpackAlignment);const wn=ce.getParameter(ce.UNPACK_ROW_LENGTH),tr=ce.getParameter(ce.UNPACK_IMAGE_HEIGHT),Si=ce.getParameter(ce.UNPACK_SKIP_PIXELS),rs=ce.getParameter(ce.UNPACK_SKIP_ROWS),js=ce.getParameter(ce.UNPACK_SKIP_IMAGES),Xn=ht.isCompressedTexture?ht.mipmaps[0]:ht.image;ce.pixelStorei(ce.UNPACK_ROW_LENGTH,Xn.width),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,Xn.height),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,se.min.x),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,se.min.y),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,se.min.z),ht.isDataTexture||ht.isData3DTexture?ce.texSubImage3D(vn,gt,Ze.x,Ze.y,Ze.z,Yt,un,sn,yn,Hn,Xn.data):ht.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ce.compressedTexSubImage3D(vn,gt,Ze.x,Ze.y,Ze.z,Yt,un,sn,yn,Xn.data)):ce.texSubImage3D(vn,gt,Ze.x,Ze.y,Ze.z,Yt,un,sn,yn,Hn,Xn),ce.pixelStorei(ce.UNPACK_ROW_LENGTH,wn),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,tr),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,Si),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,rs),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,js),gt===0&&qe.generateMipmaps&&ce.generateMipmap(vn),Ne.unbindTexture()},this.initTexture=function(se){se.isCubeTexture?me.setTextureCube(se,0):se.isData3DTexture?me.setTexture3D(se,0):se.isDataArrayTexture||se.isCompressedArrayTexture?me.setTexture2DArray(se,0):me.setTexture2D(se,0),Ne.unbindTexture()},this.resetState=function(){I=0,P=0,k=null,Ne.reset(),$t.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Xu}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===En?sh:_1}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===sh?En:Dc}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class g5 extends m5{}g5.prototype.isWebGL1Renderer=!0;class S2{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ut(e),this.density=t}clone(){return new S2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class M2{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Ut(e),this.near=t,this.far=n}clone(){return new M2(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}let ov=class extends Bi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}};class o_{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=b1,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Jl()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Jl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Jl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Io=new le;class Hf{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Io.fromBufferAttribute(this,t),Io.applyMatrix4(e),this.setXYZ(t,Io.x,Io.y,Io.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Io.fromBufferAttribute(this,t),Io.applyNormalMatrix(e),this.setXYZ(t,Io.x,Io.y,Io.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Io.fromBufferAttribute(this,t),Io.transformDirection(e),this.setXYZ(t,Io.x,Io.y,Io.z);return this}setX(e,t){return this.normalized&&(t=mi(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=mi(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=mi(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=mi(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Yl(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Yl(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Yl(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Yl(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=mi(t,this.array),n=mi(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=mi(t,this.array),n=mi(n,this.array),r=mi(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=mi(t,this.array),n=mi(n,this.array),r=mi(r,this.array),s=mi(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Ln(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Hf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class v5 extends ya{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ut(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Um;const cA=new le,Vm=new le,Hm=new le,Gm=new _t,uA=new _t,oO=new jn,Sy=new le,hA=new le,My=new le,Yk=new _t,$S=new _t,Kk=new _t;let lO=class extends Bi{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Um===void 0){Um=new Zn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new o_(t,5);Um.setIndex([0,1,2,0,2,3]),Um.setAttribute("position",new Hf(n,3,0,!1)),Um.setAttribute("uv",new Hf(n,2,3,!1))}this.geometry=Um,this.material=e!==void 0?e:new v5,this.center=new _t(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Vm.setFromMatrixScale(this.matrixWorld),oO.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Hm.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Vm.multiplyScalar(-Hm.z);const n=this.material.rotation;let r,s;n!==0&&(s=Math.cos(n),r=Math.sin(n));const a=this.center;Ty(Sy.set(-.5,-.5,0),Hm,a,Vm,r,s),Ty(hA.set(.5,-.5,0),Hm,a,Vm,r,s),Ty(My.set(.5,.5,0),Hm,a,Vm,r,s),Yk.set(0,0),$S.set(1,0),Kk.set(1,1);let o=e.ray.intersectTriangle(Sy,hA,My,!1,cA);if(o===null&&(Ty(hA.set(-.5,.5,0),Hm,a,Vm,r,s),$S.set(0,1),o=e.ray.intersectTriangle(Sy,My,hA,!1,cA),o===null))return;const l=e.ray.origin.distanceTo(cA);l<e.near||l>e.far||t.push({distance:l,point:cA.clone(),uv:sl.getInterpolation(cA,Sy,hA,My,Yk,$S,Kk,new _t),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};function Ty(i,e,t,n,r,s){Gm.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(uA.x=s*Gm.x-r*Gm.y,uA.y=r*Gm.x+s*Gm.y):uA.copy(Gm),i.copy(e),i.x+=uA.x,i.y+=uA.y,i.applyMatrix4(oO)}const Iy=new le,Jk=new le;class cO extends Bi{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Iy.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Iy);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Iy.setFromMatrixPosition(e.matrixWorld),Jk.setFromMatrixPosition(this.matrixWorld);const n=Iy.distanceTo(Jk)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),n>=a)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const a=n[r];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const Zk=new le,e8=new zi,t8=new zi,Cte=new le,n8=new jn,Qm=new le,XS=new zc,i8=new jn,YS=new rv;class A5 extends cr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new jn,this.bindMatrixInverse=new jn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new yu),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)Qm.fromBufferAttribute(t,n),this.applyBoneTransform(n,Qm),this.boundingBox.expandByPoint(Qm)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new zc),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)Qm.fromBufferAttribute(t,n),this.applyBoneTransform(n,Qm),this.boundingSphere.expandByPoint(Qm)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),XS.copy(this.boundingSphere),XS.applyMatrix4(r),e.ray.intersectsSphere(XS)!==!1&&(i8.copy(r).invert(),YS.copy(e.ray).applyMatrix4(i8),!(this.boundingBox!==null&&YS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,YS)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new zi,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;e8.fromBufferAttribute(r.attributes.skinIndex,e),t8.fromBufferAttribute(r.attributes.skinWeight,e),Zk.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=t8.getComponent(s);if(a!==0){const o=e8.getComponent(s);n8.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(Cte.copy(Zk).applyMatrix4(n8),a)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class T2 extends Bi{constructor(){super(),this.isBone=!0,this.type="Bone"}}let b0=class extends zr{constructor(e=null,t=1,n=1,r,s,a,o,l,c=ki,u=ki,h,d){super(null,a,o,l,c,u,r,s,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};const r8=new jn,Ete=new jn;class l_{constructor(e=[],t=[]){this.uuid=Jl(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new jn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new jn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:Ete;r8.multiplyMatrices(o,t[s]),r8.toArray(n,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new l_(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=GL(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new b0(t,e,e,Ps,ns);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new T2),this.bones.push(a),this.boneInverses.push(new jn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const o=n[r];e.boneInverses.push(o.toArray())}return e}}class Bg extends Ln{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const qm=new jn,s8=new jn,Py=[],a8=new yu,Ste=new jn,dA=new cr,fA=new zc;class _5 extends cr{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Bg(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,Ste)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new yu),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,qm),a8.copy(e.boundingBox).applyMatrix4(qm),this.boundingBox.union(a8)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new zc),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,qm),fA.copy(e.boundingSphere).applyMatrix4(qm),this.boundingSphere.union(fA)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(dA.geometry=this.geometry,dA.material=this.material,dA.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),fA.copy(this.boundingSphere),fA.applyMatrix4(n),e.ray.intersectsSphere(fA)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,qm),s8.multiplyMatrices(n,qm),dA.matrixWorld=s8,dA.raycast(e,Py);for(let a=0,o=Py.length;a<o;a++){const l=Py[a];l.instanceId=s,l.object=this,t.push(l)}Py.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Bg(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class mo extends ya{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ut(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const o8=new le,l8=new le,c8=new jn,KS=new rv,ky=new zc;let yd=class extends Bi{constructor(e=new Zn,t=new mo){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)o8.fromBufferAttribute(t,r-1),l8.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=o8.distanceTo(l8);e.setAttribute("lineDistance",new rn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),ky.copy(n.boundingSphere),ky.applyMatrix4(r),ky.radius+=s,e.ray.intersectsSphere(ky)===!1)return;c8.copy(r).invert(),KS.copy(e.ray).applyMatrix4(c8);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=new le,u=new le,h=new le,d=new le,f=this.isLineSegments?2:1,m=n.index,_=n.attributes.position;if(m!==null){const v=Math.max(0,a.start),w=Math.min(m.count,a.start+a.count);for(let x=v,C=w-1;x<C;x+=f){const S=m.getX(x),I=m.getX(x+1);if(c.fromBufferAttribute(_,S),u.fromBufferAttribute(_,I),KS.distanceSqToSegment(c,u,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const k=e.ray.origin.distanceTo(d);k<e.near||k>e.far||t.push({distance:k,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,a.start),w=Math.min(_.count,a.start+a.count);for(let x=v,C=w-1;x<C;x+=f){if(c.fromBufferAttribute(_,x),u.fromBufferAttribute(_,x+1),KS.distanceSqToSegment(c,u,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(d);I<e.near||I>e.far||t.push({distance:I,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}};const u8=new le,h8=new le;class wu extends yd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)u8.fromBufferAttribute(t,r),h8.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+u8.distanceTo(h8);e.setAttribute("lineDistance",new rn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class b5 extends yd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class I2 extends ya{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ut(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const d8=new jn,AM=new rv,By=new zc,Ry=new le;let y5=class extends Bi{constructor(e=new Zn,t=new I2){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),By.copy(n.boundingSphere),By.applyMatrix4(r),By.radius+=s,e.ray.intersectsSphere(By)===!1)return;d8.copy(r).invert(),AM.copy(e.ray).applyMatrix4(d8);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=n.index,h=n.attributes.position;if(c!==null){const d=Math.max(0,a.start),f=Math.min(c.count,a.start+a.count);for(let m=d,A=f;m<A;m++){const _=c.getX(m);Ry.fromBufferAttribute(h,_),f8(Ry,_,l,r,e,t,this)}}else{const d=Math.max(0,a.start),f=Math.min(h.count,a.start+a.count);for(let m=d,A=f;m<A;m++)Ry.fromBufferAttribute(h,m),f8(Ry,m,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}};function f8(i,e,t,n,r,s,a){const o=AM.distanceSqToPoint(i);if(o<t){const l=new le;AM.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:a})}}class Mte extends zr{constructor(e,t,n,r,s,a,o,l,c){super(e,t,n,r,s,a,o,l,c),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Sr,this.magFilter=s!==void 0?s:Sr,this.generateMipmaps=!1;const u=this;function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Tte extends zr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ki,this.minFilter=ki,this.generateMipmaps=!1,this.needsUpdate=!0}}class c_ extends zr{constructor(e,t,n,r,s,a,o,l,c,u,h,d){super(null,a,o,l,c,u,r,s,h,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class uO extends c_{constructor(e,t,n,r,s,a){super(e,t,n,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=oa}}class hO extends c_{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,_d),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Ite extends zr{constructor(e,t,n,r,s,a,o,l,c){super(e,t,n,r,s,a,o,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class xu{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const s=n.length;let a;t?a=t:a=e*n[s-1];let o=0,l=s-1,c;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),c=n[r]-a,c<0)o=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,n[r]===a)return r/(s-1);const u=n[r],d=n[r+1]-u,f=(a-u)/d;return(r+f)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),l=t||(a.isVector2?new _t:new le);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new le,r=[],s=[],a=[],o=new le,l=new jn;for(let f=0;f<=e;f++){const m=f/e;r[f]=this.getTangentAt(m,new le)}s[0]=new le,a[0]=new le;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),h=Math.abs(r[0].y),d=Math.abs(r[0].z);u<=c&&(c=u,n.set(1,0,0)),h<=c&&(c=h,n.set(0,1,0)),d<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),a[f]=a[f-1].clone(),o.crossVectors(r[f-1],r[f]),o.length()>Number.EPSILON){o.normalize();const m=Math.acos(Ts(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(o,m))}a[f].crossVectors(r[f],s[f])}if(t===!0){let f=Math.acos(Ts(s[0].dot(s[e]),-1,1));f/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(f=-f);for(let m=1;m<=e;m++)s[m].applyMatrix4(l.makeRotationAxis(r[m],f*m)),a[m].crossVectors(r[m],s[m])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class P2 extends xu{constructor(e=0,t=0,n=1,r=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t){const n=t||new _t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=l-this.aX,f=c-this.aY;l=d*u-f*h+this.aX,c=d*h+f*u+this.aY}return n.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class dO extends P2{constructor(e,t,n,r,s,a){super(e,t,n,n,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function w5(){let i=0,e=0,t=0,n=0;function r(s,a,o,l){i=s,e=o,t=-3*s+3*a-2*o-l,n=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,c){r(a,o,c*(o-s),c*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,c,u,h){let d=(a-s)/c-(o-s)/(c+u)+(o-a)/u,f=(o-a)/u-(l-a)/(u+h)+(l-o)/h;d*=u,f*=u,r(a,o,d,f)},calc:function(s){const a=s*s,o=a*s;return i+e*s+t*a+n*o}}}const Dy=new le,JS=new w5,ZS=new w5,e4=new w5;class fO extends xu{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new le){const n=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let c,u;this.closed||o>0?c=r[(o-1)%s]:(Dy.subVectors(r[0],r[1]).add(r[0]),c=Dy);const h=r[o%s],d=r[(o+1)%s];if(this.closed||o+2<s?u=r[(o+2)%s]:(Dy.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=Dy),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let m=Math.pow(c.distanceToSquared(h),f),A=Math.pow(h.distanceToSquared(d),f),_=Math.pow(d.distanceToSquared(u),f);A<1e-4&&(A=1),m<1e-4&&(m=A),_<1e-4&&(_=A),JS.initNonuniformCatmullRom(c.x,h.x,d.x,u.x,m,A,_),ZS.initNonuniformCatmullRom(c.y,h.y,d.y,u.y,m,A,_),e4.initNonuniformCatmullRom(c.z,h.z,d.z,u.z,m,A,_)}else this.curveType==="catmullrom"&&(JS.initCatmullRom(c.x,h.x,d.x,u.x,this.tension),ZS.initCatmullRom(c.y,h.y,d.y,u.y,this.tension),e4.initCatmullRom(c.z,h.z,d.z,u.z,this.tension));return n.set(JS.calc(l),ZS.calc(l),e4.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new le().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function p8(i,e,t,n,r){const s=(n-e)*.5,a=(r-t)*.5,o=i*i,l=i*o;return(2*t-2*n+s+a)*l+(-3*t+3*n-2*s-a)*o+s*i+t}function Pte(i,e){const t=1-i;return t*t*e}function kte(i,e){return 2*(1-i)*i*e}function Bte(i,e){return i*i*e}function n1(i,e,t,n){return Pte(i,e)+kte(i,t)+Bte(i,n)}function Rte(i,e){const t=1-i;return t*t*t*e}function Dte(i,e){const t=1-i;return 3*t*t*i*e}function Lte(i,e){return 3*(1-i)*i*i*e}function Ote(i,e){return i*i*i*e}function i1(i,e,t,n,r){return Rte(i,e)+Dte(i,t)+Lte(i,n)+Ote(i,r)}class x5 extends xu{constructor(e=new _t,t=new _t,n=new _t,r=new _t){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new _t){const n=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return n.set(i1(e,r.x,s.x,a.x,o.x),i1(e,r.y,s.y,a.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class pO extends xu{constructor(e=new le,t=new le,n=new le,r=new le){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new le){const n=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return n.set(i1(e,r.x,s.x,a.x,o.x),i1(e,r.y,s.y,a.y,o.y),i1(e,r.z,s.z,a.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class k2 extends xu{constructor(e=new _t,t=new _t){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new _t){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new _t){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class mO extends xu{constructor(e=new le,t=new le){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new le){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new le){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class C5 extends xu{constructor(e=new _t,t=new _t,n=new _t){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new _t){const n=t,r=this.v0,s=this.v1,a=this.v2;return n.set(n1(e,r.x,s.x,a.x),n1(e,r.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class E5 extends xu{constructor(e=new le,t=new le,n=new le){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new le){const n=t,r=this.v0,s=this.v1,a=this.v2;return n.set(n1(e,r.x,s.x,a.x),n1(e,r.y,s.y,a.y),n1(e,r.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class S5 extends xu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new _t){const n=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,l=r[a===0?a:a-1],c=r[a],u=r[a>r.length-2?r.length-1:a+1],h=r[a>r.length-3?r.length-1:a+2];return n.set(p8(o,l.x,c.x,u.x,h.x),p8(o,l.y,c.y,u.y,h.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new _t().fromArray(r))}return this}}var M5=Object.freeze({__proto__:null,ArcCurve:dO,CatmullRomCurve3:fO,CubicBezierCurve:x5,CubicBezierCurve3:pO,EllipseCurve:P2,LineCurve:k2,LineCurve3:mO,QuadraticBezierCurve:C5,QuadraticBezierCurve3:E5,SplineCurve:S5});class gO extends xu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new k2(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const a=r[s]-n,o=this.curves[s],l=o.getLength(),c=l===0?0:1-a/l;return o.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let c=0;c<l.length;c++){const u=l[c];n&&n.equals(u)||(t.push(u),n=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new M5[r.type]().fromJSON(r))}return this}}class x1 extends gO{constructor(e){super(),this.type="Path",this.currentPoint=new _t,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new k2(this.currentPoint.clone(),new _t(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new C5(this.currentPoint.clone(),new _t(e,t),new _t(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,a){const o=new x5(this.currentPoint.clone(),new _t(e,t),new _t(n,r),new _t(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new S5(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,n,r,s,a),this}absarc(e,t,n,r,s,a){return this.absellipse(e,t,n,n,r,s,a),this}ellipse(e,t,n,r,s,a,o,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,n,r,s,a,o,l),this}absellipse(e,t,n,r,s,a,o,l){const c=new P2(e,t,n,r,s,a,o,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class u_ extends Zn{constructor(e=[new _t(0,-.5),new _t(.5,0),new _t(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Ts(r,0,Math.PI*2);const s=[],a=[],o=[],l=[],c=[],u=1/t,h=new le,d=new _t,f=new le,m=new le,A=new le;let _=0,v=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:_=e[w+1].x-e[w].x,v=e[w+1].y-e[w].y,f.x=v*1,f.y=-_,f.z=v*0,A.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case e.length-1:l.push(A.x,A.y,A.z);break;default:_=e[w+1].x-e[w].x,v=e[w+1].y-e[w].y,f.x=v*1,f.y=-_,f.z=v*0,m.copy(f),f.x+=A.x,f.y+=A.y,f.z+=A.z,f.normalize(),l.push(f.x,f.y,f.z),A.copy(m)}for(let w=0;w<=t;w++){const x=n+w*u*r,C=Math.sin(x),S=Math.cos(x);for(let I=0;I<=e.length-1;I++){h.x=e[I].x*C,h.y=e[I].y,h.z=e[I].x*S,a.push(h.x,h.y,h.z),d.x=w/t,d.y=I/(e.length-1),o.push(d.x,d.y);const P=l[3*I+0]*C,k=l[3*I+1],M=l[3*I+0]*S;c.push(P,k,M)}}for(let w=0;w<t;w++)for(let x=0;x<e.length-1;x++){const C=x+w*e.length,S=C,I=C+e.length,P=C+e.length+1,k=C+1;s.push(S,I,k),s.push(P,k,I)}this.setIndex(s),this.setAttribute("position",new rn(a,3)),this.setAttribute("uv",new rn(o,2)),this.setAttribute("normal",new rn(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new u_(e.points,e.segments,e.phiStart,e.phiLength)}}class B2 extends u_{constructor(e=1,t=1,n=4,r=8){const s=new x1;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new B2(e.radius,e.length,e.capSegments,e.radialSegments)}}class R2 extends Zn{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],a=[],o=[],l=[],c=new le,u=new _t;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let h=0,d=3;h<=t;h++,d+=3){const f=n+h/t*r;c.x=e*Math.cos(f),c.y=e*Math.sin(f),a.push(c.x,c.y,c.z),o.push(0,0,1),u.x=(a[d]/e+1)/2,u.y=(a[d+1]/e+1)/2,l.push(u.x,u.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new rn(a,3)),this.setAttribute("normal",new rn(o,3)),this.setAttribute("uv",new rn(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new R2(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class lv extends Zn{constructor(e=1,t=1,n=1,r=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],h=[],d=[],f=[];let m=0;const A=[],_=n/2;let v=0;w(),a===!1&&(e>0&&x(!0),t>0&&x(!1)),this.setIndex(u),this.setAttribute("position",new rn(h,3)),this.setAttribute("normal",new rn(d,3)),this.setAttribute("uv",new rn(f,2));function w(){const C=new le,S=new le;let I=0;const P=(t-e)/n;for(let k=0;k<=s;k++){const M=[],R=k/s,N=R*(t-e)+e;for(let U=0;U<=r;U++){const q=U/r,W=q*l+o,F=Math.sin(W),ue=Math.cos(W);S.x=N*F,S.y=-R*n+_,S.z=N*ue,h.push(S.x,S.y,S.z),C.set(F,P,ue).normalize(),d.push(C.x,C.y,C.z),f.push(q,1-R),M.push(m++)}A.push(M)}for(let k=0;k<r;k++)for(let M=0;M<s;M++){const R=A[M][k],N=A[M+1][k],U=A[M+1][k+1],q=A[M][k+1];u.push(R,N,q),u.push(N,U,q),I+=6}c.addGroup(v,I,0),v+=I}function x(C){const S=m,I=new _t,P=new le;let k=0;const M=C===!0?e:t,R=C===!0?1:-1;for(let U=1;U<=r;U++)h.push(0,_*R,0),d.push(0,R,0),f.push(.5,.5),m++;const N=m;for(let U=0;U<=r;U++){const W=U/r*l+o,F=Math.cos(W),ue=Math.sin(W);P.x=M*ue,P.y=_*R,P.z=M*F,h.push(P.x,P.y,P.z),d.push(0,R,0),I.x=F*.5+.5,I.y=ue*.5*R+.5,f.push(I.x,I.y),m++}for(let U=0;U<r;U++){const q=S+U,W=N+U;C===!0?u.push(W,W+1,q):u.push(W+1,W,q),k+=3}c.addGroup(v,k,C===!0?1:2),v+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class D2 extends lv{constructor(e=1,t=1,n=32,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,n,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new D2(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ip extends Zn{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],a=[];o(r),c(n),u(),this.setAttribute("position",new rn(s,3)),this.setAttribute("normal",new rn(s.slice(),3)),this.setAttribute("uv",new rn(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(w){const x=new le,C=new le,S=new le;for(let I=0;I<t.length;I+=3)f(t[I+0],x),f(t[I+1],C),f(t[I+2],S),l(x,C,S,w)}function l(w,x,C,S){const I=S+1,P=[];for(let k=0;k<=I;k++){P[k]=[];const M=w.clone().lerp(C,k/I),R=x.clone().lerp(C,k/I),N=I-k;for(let U=0;U<=N;U++)U===0&&k===I?P[k][U]=M:P[k][U]=M.clone().lerp(R,U/N)}for(let k=0;k<I;k++)for(let M=0;M<2*(I-k)-1;M++){const R=Math.floor(M/2);M%2===0?(d(P[k][R+1]),d(P[k+1][R]),d(P[k][R])):(d(P[k][R+1]),d(P[k+1][R+1]),d(P[k+1][R]))}}function c(w){const x=new le;for(let C=0;C<s.length;C+=3)x.x=s[C+0],x.y=s[C+1],x.z=s[C+2],x.normalize().multiplyScalar(w),s[C+0]=x.x,s[C+1]=x.y,s[C+2]=x.z}function u(){const w=new le;for(let x=0;x<s.length;x+=3){w.x=s[x+0],w.y=s[x+1],w.z=s[x+2];const C=_(w)/2/Math.PI+.5,S=v(w)/Math.PI+.5;a.push(C,1-S)}m(),h()}function h(){for(let w=0;w<a.length;w+=6){const x=a[w+0],C=a[w+2],S=a[w+4],I=Math.max(x,C,S),P=Math.min(x,C,S);I>.9&&P<.1&&(x<.2&&(a[w+0]+=1),C<.2&&(a[w+2]+=1),S<.2&&(a[w+4]+=1))}}function d(w){s.push(w.x,w.y,w.z)}function f(w,x){const C=w*3;x.x=e[C+0],x.y=e[C+1],x.z=e[C+2]}function m(){const w=new le,x=new le,C=new le,S=new le,I=new _t,P=new _t,k=new _t;for(let M=0,R=0;M<s.length;M+=9,R+=6){w.set(s[M+0],s[M+1],s[M+2]),x.set(s[M+3],s[M+4],s[M+5]),C.set(s[M+6],s[M+7],s[M+8]),I.set(a[R+0],a[R+1]),P.set(a[R+2],a[R+3]),k.set(a[R+4],a[R+5]),S.copy(w).add(x).add(C).divideScalar(3);const N=_(S);A(I,R+0,w,N),A(P,R+2,x,N),A(k,R+4,C,N)}}function A(w,x,C,S){S<0&&w.x===1&&(a[x]=w.x-1),C.x===0&&C.z===0&&(a[x]=S/2/Math.PI+.5)}function _(w){return Math.atan2(w.z,-w.x)}function v(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ip(e.vertices,e.indices,e.radius,e.details)}}class L2 extends ip{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new L2(e.radius,e.detail)}}const Ly=new le,Oy=new le,t4=new le,Ny=new sl;class vO extends Zn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(A0*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,c=[0,0,0],u=["a","b","c"],h=new Array(3),d={},f=[];for(let m=0;m<l;m+=3){a?(c[0]=a.getX(m),c[1]=a.getX(m+1),c[2]=a.getX(m+2)):(c[0]=m,c[1]=m+1,c[2]=m+2);const{a:A,b:_,c:v}=Ny;if(A.fromBufferAttribute(o,c[0]),_.fromBufferAttribute(o,c[1]),v.fromBufferAttribute(o,c[2]),Ny.getNormal(t4),h[0]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,h[1]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,h[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let w=0;w<3;w++){const x=(w+1)%3,C=h[w],S=h[x],I=Ny[u[w]],P=Ny[u[x]],k=`${C}_${S}`,M=`${S}_${C}`;M in d&&d[M]?(t4.dot(d[M].normal)<=s&&(f.push(I.x,I.y,I.z),f.push(P.x,P.y,P.z)),d[M]=null):k in d||(d[k]={index0:c[w],index1:c[x],normal:t4.clone()})}}for(const m in d)if(d[m]){const{index0:A,index1:_}=d[m];Ly.fromBufferAttribute(o,A),Oy.fromBufferAttribute(o,_),f.push(Ly.x,Ly.y,Ly.z),f.push(Oy.x,Oy.y,Oy.z)}this.setAttribute("position",new rn(f,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class y0 extends x1{constructor(e){super(e),this.uuid=Jl(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new x1().fromJSON(r))}return this}}const Nte={triangulate:function(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=AO(i,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,h,d,f;if(n&&(s=Hte(i,e,s,t)),i.length>80*t){o=c=i[0],l=u=i[1];for(let m=t;m<r;m+=t)h=i[m],d=i[m+1],h<o&&(o=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);f=Math.max(c-o,u-l),f=f!==0?32767/f:0}return C1(s,a,t,o,l,f,0),a}};function AO(i,e,t,n,r){let s,a;if(r===Zte(i,e,t,n)>0)for(s=e;s<t;s+=n)a=m8(s,i[s],i[s+1],a);else for(s=t-n;s>=e;s-=n)a=m8(s,i[s],i[s+1],a);return a&&O2(a,a.next)&&(S1(a),a=a.next),a}function k0(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(O2(t,t.next)||ps(t.prev,t,t.next)===0)){if(S1(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function C1(i,e,t,n,r,s,a){if(!i)return;!a&&s&&Wte(i,n,r,s);let o=i,l,c;for(;i.prev!==i.next;){if(l=i.prev,c=i.next,s?zte(i,n,r,s):Fte(i)){e.push(l.i/t|0),e.push(i.i/t|0),e.push(c.i/t|0),S1(i),i=c.next,o=c.next;continue}if(i=c,i===o){a?a===1?(i=Ute(k0(i),e,t),C1(i,e,t,n,r,s,2)):a===2&&Vte(i,e,t,n,r,s):C1(k0(i),e,t,n,r,s,1);break}}}function Fte(i){const e=i.prev,t=i,n=i.next;if(ps(e,t,n)>=0)return!1;const r=e.x,s=t.x,a=n.x,o=e.y,l=t.y,c=n.y,u=r<s?r<a?r:a:s<a?s:a,h=o<l?o<c?o:c:l<c?l:c,d=r>s?r>a?r:a:s>a?s:a,f=o>l?o>c?o:c:l>c?l:c;let m=n.next;for(;m!==e;){if(m.x>=u&&m.x<=d&&m.y>=h&&m.y<=f&&dg(r,o,s,l,a,c,m.x,m.y)&&ps(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function zte(i,e,t,n){const r=i.prev,s=i,a=i.next;if(ps(r,s,a)>=0)return!1;const o=r.x,l=s.x,c=a.x,u=r.y,h=s.y,d=a.y,f=o<l?o<c?o:c:l<c?l:c,m=u<h?u<d?u:d:h<d?h:d,A=o>l?o>c?o:c:l>c?l:c,_=u>h?u>d?u:d:h>d?h:d,v=_M(f,m,e,t,n),w=_M(A,_,e,t,n);let x=i.prevZ,C=i.nextZ;for(;x&&x.z>=v&&C&&C.z<=w;){if(x.x>=f&&x.x<=A&&x.y>=m&&x.y<=_&&x!==r&&x!==a&&dg(o,u,l,h,c,d,x.x,x.y)&&ps(x.prev,x,x.next)>=0||(x=x.prevZ,C.x>=f&&C.x<=A&&C.y>=m&&C.y<=_&&C!==r&&C!==a&&dg(o,u,l,h,c,d,C.x,C.y)&&ps(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;x&&x.z>=v;){if(x.x>=f&&x.x<=A&&x.y>=m&&x.y<=_&&x!==r&&x!==a&&dg(o,u,l,h,c,d,x.x,x.y)&&ps(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;C&&C.z<=w;){if(C.x>=f&&C.x<=A&&C.y>=m&&C.y<=_&&C!==r&&C!==a&&dg(o,u,l,h,c,d,C.x,C.y)&&ps(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function Ute(i,e,t){let n=i;do{const r=n.prev,s=n.next.next;!O2(r,s)&&_O(r,n,n.next,s)&&E1(r,s)&&E1(s,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),S1(n),S1(n.next),n=i=s),n=n.next}while(n!==i);return k0(n)}function Vte(i,e,t,n,r,s){let a=i;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&Yte(a,o)){let l=bO(a,o);a=k0(a,a.next),l=k0(l,l.next),C1(a,e,t,n,r,s,0),C1(l,e,t,n,r,s,0);return}o=o.next}a=a.next}while(a!==i)}function Hte(i,e,t,n){const r=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;s++)o=e[s]*n,l=s<a-1?e[s+1]*n:i.length,c=AO(i,o,l,n,!1),c===c.next&&(c.steiner=!0),r.push(Xte(c));for(r.sort(Gte),s=0;s<r.length;s++)t=Qte(r[s],t);return t}function Gte(i,e){return i.x-e.x}function Qte(i,e){const t=qte(i,e);if(!t)return e;const n=bO(t,i);return k0(n,n.next),k0(t,t.next)}function qte(i,e){let t=e,n=-1/0,r;const s=i.x,a=i.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const d=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=s&&d>n&&(n=d,r=t.x<t.next.x?t:t.next,d===s))return r}t=t.next}while(t!==e);if(!r)return null;const o=r,l=r.x,c=r.y;let u=1/0,h;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&dg(a<c?s:n,a,l,c,a<c?n:s,a,t.x,t.y)&&(h=Math.abs(a-t.y)/(s-t.x),E1(t,i)&&(h<u||h===u&&(t.x>r.x||t.x===r.x&&jte(r,t)))&&(r=t,u=h)),t=t.next;while(t!==o);return r}function jte(i,e){return ps(i.prev,i,e.prev)<0&&ps(e.next,i,i.next)<0}function Wte(i,e,t,n){let r=i;do r.z===0&&(r.z=_M(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,$te(r)}function $te(i){let e,t,n,r,s,a,o,l,c=1;do{for(t=i,i=null,s=null,a=0;t;){for(a++,n=t,o=0,e=0;e<c&&(o++,n=n.nextZ,!!n);e++);for(l=c;o>0||l>0&&n;)o!==0&&(l===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,o--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,c*=2}while(a>1);return i}function _M(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function Xte(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function dg(i,e,t,n,r,s,a,o){return(r-a)*(e-o)>=(i-a)*(s-o)&&(i-a)*(n-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(r-a)*(n-o)}function Yte(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!Kte(i,e)&&(E1(i,e)&&E1(e,i)&&Jte(i,e)&&(ps(i.prev,i,e.prev)||ps(i,e.prev,e))||O2(i,e)&&ps(i.prev,i,i.next)>0&&ps(e.prev,e,e.next)>0)}function ps(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function O2(i,e){return i.x===e.x&&i.y===e.y}function _O(i,e,t,n){const r=zy(ps(i,e,t)),s=zy(ps(i,e,n)),a=zy(ps(t,n,i)),o=zy(ps(t,n,e));return!!(r!==s&&a!==o||r===0&&Fy(i,t,e)||s===0&&Fy(i,n,e)||a===0&&Fy(t,i,n)||o===0&&Fy(t,e,n))}function Fy(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function zy(i){return i>0?1:i<0?-1:0}function Kte(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&_O(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function E1(i,e){return ps(i.prev,i,i.next)<0?ps(i,e,i.next)>=0&&ps(i,i.prev,e)>=0:ps(i,e,i.prev)<0||ps(i,i.next,e)<0}function Jte(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function bO(i,e){const t=new bM(i.i,i.x,i.y),n=new bM(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function m8(i,e,t,n){const r=new bM(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function S1(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function bM(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Zte(i,e,t,n){let r=0;for(let s=e,a=t-n;s<t;s+=n)r+=(i[a]-i[s])*(i[s+1]+i[a+1]),a=s;return r}class oh{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return oh.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];g8(e),v8(n,e);let a=e.length;t.forEach(g8);for(let l=0;l<t.length;l++)r.push(a),a+=t[l].length,v8(n,t[l]);const o=Nte.triangulate(n,r);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function g8(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function v8(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class N2 extends Zn{constructor(e=new y0([new _t(.5,.5),new _t(-.5,.5),new _t(-.5,-.5),new _t(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];a(c)}this.setAttribute("position",new rn(r,3)),this.setAttribute("uv",new rn(s,2)),this.computeVertexNormals();function a(o){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:.2,m=t.bevelSize!==void 0?t.bevelSize:f-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:ene;let x,C=!1,S,I,P,k;v&&(x=v.getSpacedPoints(u),C=!0,d=!1,S=v.computeFrenetFrames(u,!1),I=new le,P=new le,k=new le),d||(_=0,f=0,m=0,A=0);const M=o.extractPoints(c);let R=M.shape;const N=M.holes;if(!oh.isClockWise(R)){R=R.reverse();for(let st=0,ce=N.length;st<ce;st++){const tt=N[st];oh.isClockWise(tt)&&(N[st]=tt.reverse())}}const q=oh.triangulateShape(R,N),W=R;for(let st=0,ce=N.length;st<ce;st++){const tt=N[st];R=R.concat(tt)}function F(st,ce,tt){return ce||console.error("THREE.ExtrudeGeometry: vec does not exist"),st.clone().addScaledVector(ce,tt)}const ue=R.length,J=q.length;function Y(st,ce,tt){let he,be,Ne;const nt=st.x-ce.x,ze=st.y-ce.y,me=tt.x-st.x,fe=tt.y-st.y,Be=nt*nt+ze*ze,V=nt*fe-ze*me;if(Math.abs(V)>Number.EPSILON){const $=Math.sqrt(Be),ee=Math.sqrt(me*me+fe*fe),Te=ce.x-ze/$,te=ce.y+nt/$,Qe=tt.x-fe/ee,Vt=tt.y+me/ee,ye=((Qe-Te)*fe-(Vt-te)*me)/(nt*fe-ze*me);he=Te+nt*ye-st.x,be=te+ze*ye-st.y;const Ee=he*he+be*be;if(Ee<=2)return new _t(he,be);Ne=Math.sqrt(Ee/2)}else{let $=!1;nt>Number.EPSILON?me>Number.EPSILON&&($=!0):nt<-Number.EPSILON?me<-Number.EPSILON&&($=!0):Math.sign(ze)===Math.sign(fe)&&($=!0),$?(he=-ze,be=nt,Ne=Math.sqrt(Be)):(he=nt,be=ze,Ne=Math.sqrt(Be/2))}return new _t(he/Ne,be/Ne)}const Pe=[];for(let st=0,ce=W.length,tt=ce-1,he=st+1;st<ce;st++,tt++,he++)tt===ce&&(tt=0),he===ce&&(he=0),Pe[st]=Y(W[st],W[tt],W[he]);const Ie=[];let pe,Ce=Pe.concat();for(let st=0,ce=N.length;st<ce;st++){const tt=N[st];pe=[];for(let he=0,be=tt.length,Ne=be-1,nt=he+1;he<be;he++,Ne++,nt++)Ne===be&&(Ne=0),nt===be&&(nt=0),pe[he]=Y(tt[he],tt[Ne],tt[nt]);Ie.push(pe),Ce=Ce.concat(pe)}for(let st=0;st<_;st++){const ce=st/_,tt=f*Math.cos(ce*Math.PI/2),he=m*Math.sin(ce*Math.PI/2)+A;for(let be=0,Ne=W.length;be<Ne;be++){const nt=F(W[be],Pe[be],he);rt(nt.x,nt.y,-tt)}for(let be=0,Ne=N.length;be<Ne;be++){const nt=N[be];pe=Ie[be];for(let ze=0,me=nt.length;ze<me;ze++){const fe=F(nt[ze],pe[ze],he);rt(fe.x,fe.y,-tt)}}}const G=m+A;for(let st=0;st<ue;st++){const ce=d?F(R[st],Ce[st],G):R[st];C?(P.copy(S.normals[0]).multiplyScalar(ce.x),I.copy(S.binormals[0]).multiplyScalar(ce.y),k.copy(x[0]).add(P).add(I),rt(k.x,k.y,k.z)):rt(ce.x,ce.y,0)}for(let st=1;st<=u;st++)for(let ce=0;ce<ue;ce++){const tt=d?F(R[ce],Ce[ce],G):R[ce];C?(P.copy(S.normals[st]).multiplyScalar(tt.x),I.copy(S.binormals[st]).multiplyScalar(tt.y),k.copy(x[st]).add(P).add(I),rt(k.x,k.y,k.z)):rt(tt.x,tt.y,h/u*st)}for(let st=_-1;st>=0;st--){const ce=st/_,tt=f*Math.cos(ce*Math.PI/2),he=m*Math.sin(ce*Math.PI/2)+A;for(let be=0,Ne=W.length;be<Ne;be++){const nt=F(W[be],Pe[be],he);rt(nt.x,nt.y,h+tt)}for(let be=0,Ne=N.length;be<Ne;be++){const nt=N[be];pe=Ie[be];for(let ze=0,me=nt.length;ze<me;ze++){const fe=F(nt[ze],pe[ze],he);C?rt(fe.x,fe.y+x[u-1].y,x[u-1].x+tt):rt(fe.x,fe.y,h+tt)}}}oe(),je();function oe(){const st=r.length/3;if(d){let ce=0,tt=ue*ce;for(let he=0;he<J;he++){const be=q[he];De(be[2]+tt,be[1]+tt,be[0]+tt)}ce=u+_*2,tt=ue*ce;for(let he=0;he<J;he++){const be=q[he];De(be[0]+tt,be[1]+tt,be[2]+tt)}}else{for(let ce=0;ce<J;ce++){const tt=q[ce];De(tt[2],tt[1],tt[0])}for(let ce=0;ce<J;ce++){const tt=q[ce];De(tt[0]+ue*u,tt[1]+ue*u,tt[2]+ue*u)}}n.addGroup(st,r.length/3-st,0)}function je(){const st=r.length/3;let ce=0;Tt(W,ce),ce+=W.length;for(let tt=0,he=N.length;tt<he;tt++){const be=N[tt];Tt(be,ce),ce+=be.length}n.addGroup(st,r.length/3-st,1)}function Tt(st,ce){let tt=st.length;for(;--tt>=0;){const he=tt;let be=tt-1;be<0&&(be=st.length-1);for(let Ne=0,nt=u+_*2;Ne<nt;Ne++){const ze=ue*Ne,me=ue*(Ne+1),fe=ce+he+ze,Be=ce+be+ze,V=ce+be+me,$=ce+he+me;xt(fe,Be,V,$)}}}function rt(st,ce,tt){l.push(st),l.push(ce),l.push(tt)}function De(st,ce,tt){mt(st),mt(ce),mt(tt);const he=r.length/3,be=w.generateTopUV(n,r,he-3,he-2,he-1);et(be[0]),et(be[1]),et(be[2])}function xt(st,ce,tt,he){mt(st),mt(ce),mt(he),mt(ce),mt(tt),mt(he);const be=r.length/3,Ne=w.generateSideWallUV(n,r,be-6,be-3,be-2,be-1);et(Ne[0]),et(Ne[1]),et(Ne[3]),et(Ne[1]),et(Ne[2]),et(Ne[3])}function mt(st){r.push(l[st*3+0]),r.push(l[st*3+1]),r.push(l[st*3+2])}function et(st){s.push(st.x),s.push(st.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return tne(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];n.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new M5[r.type]().fromJSON(r)),new N2(n,e.options)}}const ene={generateTopUV:function(i,e,t,n,r){const s=e[t*3],a=e[t*3+1],o=e[n*3],l=e[n*3+1],c=e[r*3],u=e[r*3+1];return[new _t(s,a),new _t(o,l),new _t(c,u)]},generateSideWallUV:function(i,e,t,n,r,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],c=e[n*3],u=e[n*3+1],h=e[n*3+2],d=e[r*3],f=e[r*3+1],m=e[r*3+2],A=e[s*3],_=e[s*3+1],v=e[s*3+2];return Math.abs(o-u)<Math.abs(a-c)?[new _t(a,1-l),new _t(c,1-h),new _t(d,1-m),new _t(A,1-v)]:[new _t(o,1-l),new _t(u,1-h),new _t(f,1-m),new _t(_,1-v)]}};function tne(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class F2 extends ip{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new F2(e.radius,e.detail)}}class h_ extends ip{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new h_(e.radius,e.detail)}}class z2 extends Zn{constructor(e=.5,t=1,n=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:a},n=Math.max(3,n),r=Math.max(1,r);const o=[],l=[],c=[],u=[];let h=e;const d=(t-e)/r,f=new le,m=new _t;for(let A=0;A<=r;A++){for(let _=0;_<=n;_++){const v=s+_/n*a;f.x=h*Math.cos(v),f.y=h*Math.sin(v),l.push(f.x,f.y,f.z),c.push(0,0,1),m.x=(f.x/t+1)/2,m.y=(f.y/t+1)/2,u.push(m.x,m.y)}h+=d}for(let A=0;A<r;A++){const _=A*(n+1);for(let v=0;v<n;v++){const w=v+_,x=w,C=w+n+1,S=w+n+2,I=w+1;o.push(x,C,I),o.push(C,S,I)}}this.setIndex(o),this.setAttribute("position",new rn(l,3)),this.setAttribute("normal",new rn(c,3)),this.setAttribute("uv",new rn(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new z2(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class U2 extends Zn{constructor(e=new y0([new _t(0,.5),new _t(-.5,-.5),new _t(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(o,l,u),o+=l,l=0;this.setIndex(n),this.setAttribute("position",new rn(r,3)),this.setAttribute("normal",new rn(s,3)),this.setAttribute("uv",new rn(a,2));function c(u){const h=r.length/3,d=u.extractPoints(t);let f=d.shape;const m=d.holes;oh.isClockWise(f)===!1&&(f=f.reverse());for(let _=0,v=m.length;_<v;_++){const w=m[_];oh.isClockWise(w)===!0&&(m[_]=w.reverse())}const A=oh.triangulateShape(f,m);for(let _=0,v=m.length;_<v;_++){const w=m[_];f=f.concat(w)}for(let _=0,v=f.length;_<v;_++){const w=f[_];r.push(w.x,w.y,0),s.push(0,0,1),a.push(w.x,w.y)}for(let _=0,v=A.length;_<v;_++){const w=A[_],x=w[0]+h,C=w[1]+h,S=w[2]+h;n.push(x,C,S),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return nne(t,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];n.push(a)}return new U2(n,e.curveSegments)}}function nne(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}class d_ extends Zn{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(a+o,Math.PI);let c=0;const u=[],h=new le,d=new le,f=[],m=[],A=[],_=[];for(let v=0;v<=n;v++){const w=[],x=v/n;let C=0;v===0&&a===0?C=.5/t:v===n&&l===Math.PI&&(C=-.5/t);for(let S=0;S<=t;S++){const I=S/t;h.x=-e*Math.cos(r+I*s)*Math.sin(a+x*o),h.y=e*Math.cos(a+x*o),h.z=e*Math.sin(r+I*s)*Math.sin(a+x*o),m.push(h.x,h.y,h.z),d.copy(h).normalize(),A.push(d.x,d.y,d.z),_.push(I+C,1-x),w.push(c++)}u.push(w)}for(let v=0;v<n;v++)for(let w=0;w<t;w++){const x=u[v][w+1],C=u[v][w],S=u[v+1][w],I=u[v+1][w+1];(v!==0||a>0)&&f.push(x,C,I),(v!==n-1||l<Math.PI)&&f.push(C,S,I)}this.setIndex(f),this.setAttribute("position",new rn(m,3)),this.setAttribute("normal",new rn(A,3)),this.setAttribute("uv",new rn(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new d_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class V2 extends ip{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new V2(e.radius,e.detail)}}class H2 extends Zn{constructor(e=1,t=.4,n=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const a=[],o=[],l=[],c=[],u=new le,h=new le,d=new le;for(let f=0;f<=n;f++)for(let m=0;m<=r;m++){const A=m/r*s,_=f/n*Math.PI*2;h.x=(e+t*Math.cos(_))*Math.cos(A),h.y=(e+t*Math.cos(_))*Math.sin(A),h.z=t*Math.sin(_),o.push(h.x,h.y,h.z),u.x=e*Math.cos(A),u.y=e*Math.sin(A),d.subVectors(h,u).normalize(),l.push(d.x,d.y,d.z),c.push(m/r),c.push(f/n)}for(let f=1;f<=n;f++)for(let m=1;m<=r;m++){const A=(r+1)*f+m-1,_=(r+1)*(f-1)+m-1,v=(r+1)*(f-1)+m,w=(r+1)*f+m;a.push(A,_,w),a.push(_,v,w)}this.setIndex(a),this.setAttribute("position",new rn(o,3)),this.setAttribute("normal",new rn(l,3)),this.setAttribute("uv",new rn(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new H2(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class G2 extends Zn{constructor(e=1,t=.4,n=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:a},n=Math.floor(n),r=Math.floor(r);const o=[],l=[],c=[],u=[],h=new le,d=new le,f=new le,m=new le,A=new le,_=new le,v=new le;for(let x=0;x<=n;++x){const C=x/n*s*Math.PI*2;w(C,s,a,e,f),w(C+.01,s,a,e,m),_.subVectors(m,f),v.addVectors(m,f),A.crossVectors(_,v),v.crossVectors(A,_),A.normalize(),v.normalize();for(let S=0;S<=r;++S){const I=S/r*Math.PI*2,P=-t*Math.cos(I),k=t*Math.sin(I);h.x=f.x+(P*v.x+k*A.x),h.y=f.y+(P*v.y+k*A.y),h.z=f.z+(P*v.z+k*A.z),l.push(h.x,h.y,h.z),d.subVectors(h,f).normalize(),c.push(d.x,d.y,d.z),u.push(x/n),u.push(S/r)}}for(let x=1;x<=n;x++)for(let C=1;C<=r;C++){const S=(r+1)*(x-1)+(C-1),I=(r+1)*x+(C-1),P=(r+1)*x+C,k=(r+1)*(x-1)+C;o.push(S,I,k),o.push(I,P,k)}this.setIndex(o),this.setAttribute("position",new rn(l,3)),this.setAttribute("normal",new rn(c,3)),this.setAttribute("uv",new rn(u,2));function w(x,C,S,I,P){const k=Math.cos(x),M=Math.sin(x),R=S/C*x,N=Math.cos(R);P.x=I*(2+N)*.5*k,P.y=I*(2+N)*M*.5,P.z=I*Math.sin(R)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new G2(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Q2 extends Zn{constructor(e=new E5(new le(-1,-1,0),new le(-1,1,0),new le(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new le,l=new le,c=new _t;let u=new le;const h=[],d=[],f=[],m=[];A(),this.setIndex(m),this.setAttribute("position",new rn(h,3)),this.setAttribute("normal",new rn(d,3)),this.setAttribute("uv",new rn(f,2));function A(){for(let x=0;x<t;x++)_(x);_(s===!1?t:0),w(),v()}function _(x){u=e.getPointAt(x/t,u);const C=a.normals[x],S=a.binormals[x];for(let I=0;I<=r;I++){const P=I/r*Math.PI*2,k=Math.sin(P),M=-Math.cos(P);l.x=M*C.x+k*S.x,l.y=M*C.y+k*S.y,l.z=M*C.z+k*S.z,l.normalize(),d.push(l.x,l.y,l.z),o.x=u.x+n*l.x,o.y=u.y+n*l.y,o.z=u.z+n*l.z,h.push(o.x,o.y,o.z)}}function v(){for(let x=1;x<=t;x++)for(let C=1;C<=r;C++){const S=(r+1)*(x-1)+(C-1),I=(r+1)*x+(C-1),P=(r+1)*x+C,k=(r+1)*(x-1)+C;m.push(S,I,k),m.push(I,P,k)}}function w(){for(let x=0;x<=t;x++)for(let C=0;C<=r;C++)c.x=x/t,c.y=C/r,f.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Q2(new M5[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class yO extends Zn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new le,s=new le;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const h=l[c],d=h.start,f=h.count;for(let m=d,A=d+f;m<A;m+=3)for(let _=0;_<3;_++){const v=o.getX(m+_),w=o.getX(m+(_+1)%3);r.fromBufferAttribute(a,v),s.fromBufferAttribute(a,w),A8(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let c=0;c<3;c++){const u=3*o+c,h=3*o+(c+1)%3;r.fromBufferAttribute(a,u),s.fromBufferAttribute(a,h),A8(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new rn(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function A8(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var _8=Object.freeze({__proto__:null,BoxGeometry:G0,CapsuleGeometry:B2,CircleGeometry:R2,ConeGeometry:D2,CylinderGeometry:lv,DodecahedronGeometry:L2,EdgesGeometry:vO,ExtrudeGeometry:N2,IcosahedronGeometry:F2,LatheGeometry:u_,OctahedronGeometry:h_,PlaneGeometry:sv,PolyhedronGeometry:ip,RingGeometry:z2,ShapeGeometry:U2,SphereGeometry:d_,TetrahedronGeometry:V2,TorusGeometry:H2,TorusKnotGeometry:G2,TubeGeometry:Q2,WireframeGeometry:yO});class wO extends ya{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ut(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class T5 extends $a{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class f_ extends ya{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ut(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=np,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _h extends f_{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new _t(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ts(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ut(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ut(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ut(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class xO extends ya{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ut(16777215),this.specular=new Ut(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=np,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=t_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class CO extends ya{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ut(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=np,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class EO extends ya{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=np,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class SO extends ya{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=np,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=t_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class MO extends ya{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ut(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=np,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class TO extends mo{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function xc(i,e,t){return I5(i)?new i.constructor(i.subarray(e,t!==void 0?t:i.length)):i.slice(e,t)}function p0(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function I5(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function IO(i){function e(r,s){return i[r]-i[s]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function yM(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,a=0;a!==n;++s){const o=t[s]*e;for(let l=0;l!==e;++l)r[a++]=i[o+l]}return r}function P5(i,e,t,n){let r=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[r++];if(s===void 0)return;let a=s[n];if(a!==void 0)if(Array.isArray(a))do a=s[n],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=i[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[n],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=i[r++];while(s!==void 0);else do a=s[n],a!==void 0&&(e.push(s.time),t.push(a)),s=i[r++];while(s!==void 0)}function ine(i,e,t,n,r=30){const s=i.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),h=[],d=[];for(let f=0;f<c.times.length;++f){const m=c.times[f]*r;if(!(m<t||m>=n)){h.push(c.times[f]);for(let A=0;A<u;++A)d.push(c.values[f*u+A])}}h.length!==0&&(c.times=p0(h,c.times.constructor),c.values=p0(d,c.values.constructor),a.push(c))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s}function rne(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,s=e/n;for(let a=0;a<r;++a){const o=t.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const c=i.tracks.find(function(v){return v.name===o.name&&v.ValueTypeName===l});if(c===void 0)continue;let u=0;const h=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=h/3);let d=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);const m=o.times.length-1;let A;if(s<=o.times[0]){const v=u,w=h-u;A=xc(o.values,v,w)}else if(s>=o.times[m]){const v=m*h+u,w=v+h-u;A=xc(o.values,v,w)}else{const v=o.createInterpolant(),w=u,x=h-u;v.evaluate(s),A=xc(v.resultBuffer,w,x)}l==="quaternion"&&new la().fromArray(A).normalize().conjugate().toArray(A);const _=c.times.length;for(let v=0;v<_;++v){const w=v*f+d;if(l==="quaternion")la.multiplyQuaternionsFlat(c.values,w,A,0,c.values,w);else{const x=f-d*2;for(let C=0;C<x;++C)c.values[w+C]-=A[C]}}}return i.blendMode=r5,i}const sne={arraySlice:xc,convertArray:p0,isTypedArray:I5,getKeyframeOrder:IO,sortedArray:yM,flattenJSON:P5,subclip:ine,makeClipAdditive:rne};class cv{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let a;n:{i:if(!(e<r)){for(let o=n+2;;){if(r===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(s=r,r=t[++n],e<r)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(n=2,s=o);for(let l=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=t[--n-1],e>=s)break t}a=n,n=0;break n}break e}for(;n<a;){const o=n+a>>>1;e<t[o]?a=o:n=o+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=n[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class PO extends cv{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:h0,endingEnd:h0}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,a=e+1,o=r[s],l=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case d0:s=e,o=2*t-n;break;case A1:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=n}if(l===void 0)switch(this.getSettings_().endingEnd){case d0:a=e,l=2*n-t;break;case A1:a=1,l=n+r[1]-r[0];break;default:a=e-1,l=t}const c=(n-t)*.5,u=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(l-n),this._offsetPrev=s*u,this._offsetNext=a*u}interpolate_(e,t,n,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,f=this._weightNext,m=(n-t)/(r-t),A=m*m,_=A*m,v=-d*_+2*d*A-d*m,w=(1+d)*_+(-1.5-2*d)*A+(-.5+d)*m+1,x=(-1-f)*_+(1.5+f)*A+.5*m,C=f*_-f*A;for(let S=0;S!==o;++S)s[S]=v*a[u+S]+w*a[c+S]+x*a[l+S]+C*a[h+S];return s}}class k5 extends cv{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=(n-t)/(r-t),h=1-u;for(let d=0;d!==o;++d)s[d]=a[c+d]*h+a[l+d]*u;return s}}class kO extends cv{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Cu{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=p0(t,this.TimeBufferType),this.values=p0(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:p0(e.times,Array),values:p0(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new kO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new k5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new PO(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ig:t=this.InterpolantFactoryMethodDiscrete;break;case P0:t=this.InterpolantFactoryMethodLinear;break;case qw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ig;case this.InterpolantFactoryMethodLinear:return P0;case this.InterpolantFactoryMethodSmooth:return qw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,a=r-1;for(;s!==r&&n[s]<e;)++s;for(;a!==-1&&n[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=xc(n,s,a),this.values=xc(this.values,s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=n[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(r!==void 0&&I5(r))for(let o=0,l=r.length;o!==l;++o){const c=r[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=xc(this.times),t=xc(this.values),n=this.getValueSize(),r=this.getInterpolation()===qw,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const c=e[o],u=e[o+1];if(c!==u&&(o!==1||c!==e[0]))if(r)l=!0;else{const h=o*n,d=h-n,f=h+n;for(let m=0;m!==n;++m){const A=t[h+m];if(A!==t[d+m]||A!==t[f+m]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const h=o*n,d=a*n;for(let f=0;f!==n;++f)t[d+f]=t[h+f]}++a}}if(s>0){e[a]=e[s];for(let o=s*n,l=a*n,c=0;c!==n;++c)t[l+c]=t[o+c];++a}return a!==e.length?(this.times=xc(e,0,a),this.values=xc(t,0,a*n)):(this.times=e,this.values=t),this}clone(){const e=xc(this.times,0),t=xc(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Cu.prototype.TimeBufferType=Float32Array;Cu.prototype.ValueBufferType=Float32Array;Cu.prototype.DefaultInterpolation=P0;class Q0 extends Cu{}Q0.prototype.ValueTypeName="bool";Q0.prototype.ValueBufferType=Array;Q0.prototype.DefaultInterpolation=Ig;Q0.prototype.InterpolantFactoryMethodLinear=void 0;Q0.prototype.InterpolantFactoryMethodSmooth=void 0;class B5 extends Cu{}B5.prototype.ValueTypeName="color";class B0 extends Cu{}B0.prototype.ValueTypeName="number";class BO extends cv{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(n-t)/(r-t);let c=e*o;for(let u=c+o;c!==u;c+=4)la.slerpFlat(s,0,a,c-o,a,c,l);return s}}class Gf extends Cu{InterpolantFactoryMethodLinear(e){return new BO(this.times,this.values,this.getValueSize(),e)}}Gf.prototype.ValueTypeName="quaternion";Gf.prototype.DefaultInterpolation=P0;Gf.prototype.InterpolantFactoryMethodSmooth=void 0;class q0 extends Cu{}q0.prototype.ValueTypeName="string";q0.prototype.ValueBufferType=Array;q0.prototype.DefaultInterpolation=Ig;q0.prototype.InterpolantFactoryMethodLinear=void 0;q0.prototype.InterpolantFactoryMethodSmooth=void 0;class Rg extends Cu{}Rg.prototype.ValueTypeName="vector";class Dg{constructor(e,t=-1,n,r=b2){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Jl(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let a=0,o=n.length;a!==o;++a)t.push(one(n[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=n.length;s!==a;++s)t.push(Cu.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],c=[];l.push((o+s-1)%s,o,(o+1)%s),c.push(0,1,0);const u=IO(l);l=yM(l,1,u),c=yM(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),a.push(new B0(".morphTargetInfluences["+t[o].name+"]",l,c).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],u=c.name.match(s);if(u&&u.length>1){const h=u[1];let d=r[h];d||(r[h]=d=[]),d.push(c)}}const a=[];for(const o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(h,d,f,m,A){if(f.length!==0){const _=[],v=[];P5(f,_,v,m),_.length!==0&&A.push(new h(d,_,v))}},r=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const d=c[h].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const f={};let m;for(m=0;m<d.length;m++)if(d[m].morphTargets)for(let A=0;A<d[m].morphTargets.length;A++)f[d[m].morphTargets[A]]=-1;for(const A in f){const _=[],v=[];for(let w=0;w!==d[m].morphTargets.length;++w){const x=d[m];_.push(x.time),v.push(x.morphTarget===A?1:0)}r.push(new B0(".morphTargetInfluence["+A+"]",_,v))}l=f.length*a}else{const f=".bones["+t[h].name+"]";n(Rg,f+".position",d,"pos",r),n(Gf,f+".quaternion",d,"rot",r),n(Rg,f+".scale",d,"scl",r)}}return r.length===0?null:new this(s,l,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ane(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return B0;case"vector":case"vector2":case"vector3":case"vector4":return Rg;case"color":return B5;case"quaternion":return Gf;case"bool":case"boolean":return Q0;case"string":return q0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function one(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=ane(i.type);if(i.times===void 0){const t=[],n=[];P5(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const R0={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class R5{constructor(e,t,n){const r=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(u){o++,s===!1&&r.onStart!==void 0&&r.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,r.onProgress!==void 0&&r.onProgress(u,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,d=c.length;h<d;h+=2){const f=c[h],m=c[h+1];if(f.global&&(f.lastIndex=0),f.test(u))return m}return null}}}const RO=new R5;class Xa{constructor(e){this.manager=e!==void 0?e:RO,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Xa.DEFAULT_MATERIAL_NAME="__DEFAULT";const Jh={};class lne extends Error{constructor(e,t){super(e),this.response=t}}class ho extends Xa{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=R0.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Jh[e]!==void 0){Jh[e].push({onLoad:t,onProgress:n,onError:r});return}Jh[e]=[],Jh[e].push({onLoad:t,onProgress:n,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Jh[e],h=c.body.getReader(),d=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),f=d?parseInt(d):0,m=f!==0;let A=0;const _=new ReadableStream({start(v){w();function w(){h.read().then(({done:x,value:C})=>{if(x)v.close();else{A+=C.byteLength;const S=new ProgressEvent("progress",{lengthComputable:m,loaded:A,total:f});for(let I=0,P=u.length;I<P;I++){const k=u[I];k.onProgress&&k.onProgress(S)}v.enqueue(C),w()}})}}});return new Response(_)}else throw new lne(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,o));case"json":return c.json();default:if(o===void 0)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(o),d=h&&h[1]?h[1].toLowerCase():void 0,f=new TextDecoder(d);return c.arrayBuffer().then(m=>f.decode(m))}}}).then(c=>{R0.add(e,c);const u=Jh[e];delete Jh[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=Jh[e];if(u===void 0)throw this.manager.itemError(e),c;delete Jh[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class cne extends Xa{constructor(e){super(e)}load(e,t,n,r){const s=this,a=new ho(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=Dg.parse(e[n]);t.push(r)}return t}}class une extends Xa{constructor(e){super(e)}load(e,t,n,r){const s=this,a=[],o=new c_,l=new ho(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(h){l.load(e[h],function(d){const f=s.parse(d,!0);a[h]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},c+=1,c===6&&(f.mipmapCount===1&&(o.minFilter=Sr),o.image=a,o.format=f.format,o.needsUpdate=!0,t&&t(o))},n,r)}if(Array.isArray(e))for(let h=0,d=e.length;h<d;++h)u(h);else l.load(e,function(h){const d=s.parse(h,!0);if(d.isCubemap){const f=d.mipmaps.length/d.mipmapCount;for(let m=0;m<f;m++){a[m]={mipmaps:[]};for(let A=0;A<d.mipmapCount;A++)a[m].mipmaps.push(d.mipmaps[m*d.mipmapCount+A]),a[m].format=d.format,a[m].width=d.width,a[m].height=d.height}o.image=a}else o.image.width=d.width,o.image.height=d.height,o.mipmaps=d.mipmaps;d.mipmapCount===1&&(o.minFilter=Sr),o.format=d.format,o.needsUpdate=!0,t&&t(o)},n,r);return o}}class M1 extends Xa{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=R0.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=w1("img");function l(){u(),R0.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){u(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class hne extends Xa{constructor(e){super(e)}load(e,t,n,r){const s=new a_;s.colorSpace=En;const a=new M1(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(c){a.load(e[c],function(u){s.images[c]=u,o++,o===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class dne extends Xa{constructor(e){super(e)}load(e,t,n,r){const s=this,a=new b0,o=new ho(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:oa,a.wrapT=c.wrapT!==void 0?c.wrapT:oa,a.magFilter=c.magFilter!==void 0?c.magFilter:Sr,a.minFilter=c.minFilter!==void 0?c.minFilter:Sr,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?a.colorSpace=c.colorSpace:c.encoding!==void 0&&(a.encoding=c.encoding),c.flipY!==void 0&&(a.flipY=c.flipY),c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps,a.minFilter=_u),c.mipmapCount===1&&(a.minFilter=Sr),c.generateMipmaps!==void 0&&(a.generateMipmaps=c.generateMipmaps),a.needsUpdate=!0,t&&t(a,c))},n,r),a}}class D5 extends Xa{constructor(e){super(e)}load(e,t,n,r){const s=new zr,a=new M1(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}class rp extends Bi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ut(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class DO extends rp{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Bi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ut(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const n4=new jn,b8=new le,y8=new le;class L5{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new _t(512,512),this.map=null,this.mapPass=null,this.matrix=new jn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new C2,this._frameExtents=new _t(1,1),this._viewportCount=1,this._viewports=[new zi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;b8.setFromMatrixPosition(e.matrixWorld),t.position.copy(b8),y8.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(y8),t.updateMatrixWorld(),n4.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(n4),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(n4)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class fne extends L5{constructor(){super(new _r(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=Pg*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class O5 extends rp{constructor(e,t,n=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Bi.DEFAULT_UP),this.updateMatrix(),this.target=new Bi,this.distance=n,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new fne}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const w8=new jn,pA=new le,i4=new le;class pne extends L5{constructor(){super(new _r(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new _t(4,2),this._viewportCount=6,this._viewports=[new zi(2,1,1,1),new zi(0,1,1,1),new zi(3,1,1,1),new zi(1,1,1,1),new zi(3,0,1,1),new zi(1,0,1,1)],this._cubeDirections=[new le(1,0,0),new le(-1,0,0),new le(0,0,1),new le(0,0,-1),new le(0,1,0),new le(0,-1,0)],this._cubeUps=[new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,0,1),new le(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),pA.setFromMatrixPosition(e.matrixWorld),n.position.copy(pA),i4.copy(n.position),i4.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(i4),n.updateMatrixWorld(),r.makeTranslation(-pA.x,-pA.y,-pA.z),w8.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(w8)}}class N5 extends rp{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new pne}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class mne extends L5{constructor(){super(new Ah(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class F5 extends rp{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Bi.DEFAULT_UP),this.updateMatrix(),this.target=new Bi,this.shadow=new mne}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class LO extends rp{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class OO extends rp{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class NO{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new le)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],1.092548*(n*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(n*s)),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*n),t.addScaledVector(a[4],2*.429043*n*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*n*s),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class q2 extends rp{constructor(e=new NO,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class j2 extends Xa{constructor(e){super(e),this.textures={}}load(e,t,n,r){const s=this,a=new ho(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=j2.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ut().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=n(a.value);break;case"c":r.uniforms[s].value=new Ut().setHex(a.value);break;case"v2":r.uniforms[s].value=new _t().fromArray(a.value);break;case"v3":r.uniforms[s].value=new le().fromArray(a.value);break;case"v4":r.uniforms[s].value=new zi().fromArray(a.value);break;case"m3":r.uniforms[s].value=new Ai().fromArray(a.value);break;case"m4":r.uniforms[s].value=new jn().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new _t().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new _t().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:wO,SpriteMaterial:v5,RawShaderMaterial:T5,ShaderMaterial:$a,PointsMaterial:I2,MeshPhysicalMaterial:_h,MeshStandardMaterial:f_,MeshPhongMaterial:xO,MeshToonMaterial:CO,MeshNormalMaterial:EO,MeshLambertMaterial:SO,MeshDepthMaterial:f5,MeshDistanceMaterial:p5,MeshBasicMaterial:Lo,MeshMatcapMaterial:MO,LineDashedMaterial:TO,LineBasicMaterial:mo,Material:ya};return new t[e]}}class Lg{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class FO extends Zn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class zO extends Xa{constructor(e){super(e)}load(e,t,n,r){const s=this,a=new ho(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(f,m){if(t[m]!==void 0)return t[m];const _=f.interleavedBuffers[m],v=s(f,_.buffer),w=ug(_.type,v),x=new o_(w,_.stride);return x.uuid=_.uuid,t[m]=x,x}function s(f,m){if(n[m]!==void 0)return n[m];const _=f.arrayBuffers[m],v=new Uint32Array(_).buffer;return n[m]=v,v}const a=e.isInstancedBufferGeometry?new FO:new Zn,o=e.data.index;if(o!==void 0){const f=ug(o.type,o.array);a.setIndex(new Ln(f,1))}const l=e.data.attributes;for(const f in l){const m=l[f];let A;if(m.isInterleavedBufferAttribute){const _=r(e.data,m.data);A=new Hf(_,m.itemSize,m.offset,m.normalized)}else{const _=ug(m.type,m.array),v=m.isInstancedBufferAttribute?Bg:Ln;A=new v(_,m.itemSize,m.normalized)}m.name!==void 0&&(A.name=m.name),m.usage!==void 0&&A.setUsage(m.usage),m.updateRange!==void 0&&(A.updateRange.offset=m.updateRange.offset,A.updateRange.count=m.updateRange.count),a.setAttribute(f,A)}const c=e.data.morphAttributes;if(c)for(const f in c){const m=c[f],A=[];for(let _=0,v=m.length;_<v;_++){const w=m[_];let x;if(w.isInterleavedBufferAttribute){const C=r(e.data,w.data);x=new Hf(C,w.itemSize,w.offset,w.normalized)}else{const C=ug(w.type,w.array);x=new Ln(C,w.itemSize,w.normalized)}w.name!==void 0&&(x.name=w.name),A.push(x)}a.morphAttributes[f]=A}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let f=0,m=h.length;f!==m;++f){const A=h[f];a.addGroup(A.start,A.count,A.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const f=new le;d.center!==void 0&&f.fromArray(d.center),a.boundingSphere=new zc(f,d.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class gne extends Xa{constructor(e){super(e)}load(e,t,n,r){const s=this,a=this.path===""?Lg.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new ho(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(h){r!==void 0&&r(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},n,r)}async loadAsync(e,t){const n=this,r=this.path===""?Lg.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new ho(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(c)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,s,l,o,n),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let h=!1;for(const d in a)if(a[d].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,o,a,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const s=new y0().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new l_().fromJSON(e[s],r);n[o.uuid]=o}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new zO;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(l);break;default:l.type in _8?o=_8[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),n[l.uuid]=o}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const s=new j2;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];n[l.uuid]===void 0&&(n[l.uuid]=s.parse(l)),r[l.uuid]=n[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],s=Dg.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const n=this,r={};let s;function a(l){return n.manager.itemStart(l),s.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:n.resourcePath+c;return a(u)}else return l.data?{data:ug(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new R5(t);s=new M1(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const h=e[c],d=h.url;if(Array.isArray(d)){const f=[];for(let m=0,A=d.length;m<A;m++){const _=d[m],v=o(_);v!==null&&(v instanceof HTMLImageElement?f.push(v):f.push(new b0(v.data,v.width,v.height)))}r[h.uuid]=new f0(f)}else{const f=o(h.url);r[h.uuid]=new f0(f)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(l)}else return a.data?{data:ug(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new M1(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],c=l.url;if(Array.isArray(c)){const u=[];for(let h=0,d=c.length;h<d;h++){const f=c[h],m=await s(f);m!==null&&(m instanceof HTMLImageElement?u.push(m):u.push(new b0(m.data,m.width,m.height)))}n[l.uuid]=new f0(u)}else{const u=await s(l.url);n[l.uuid]=new f0(u)}}}return n}parseTextures(e,t){function n(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],c=l.data;let u;Array.isArray(c)?(u=new a_,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new b0:u=new zr,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=o.uuid,o.name!==void 0&&(u.name=o.name),o.mapping!==void 0&&(u.mapping=n(o.mapping,vne)),o.channel!==void 0&&(u.channel=o.channel),o.offset!==void 0&&u.offset.fromArray(o.offset),o.repeat!==void 0&&u.repeat.fromArray(o.repeat),o.center!==void 0&&u.center.fromArray(o.center),o.rotation!==void 0&&(u.rotation=o.rotation),o.wrap!==void 0&&(u.wrapS=n(o.wrap[0],x8),u.wrapT=n(o.wrap[1],x8)),o.format!==void 0&&(u.format=o.format),o.internalFormat!==void 0&&(u.internalFormat=o.internalFormat),o.type!==void 0&&(u.type=o.type),o.colorSpace!==void 0&&(u.colorSpace=o.colorSpace),o.encoding!==void 0&&(u.encoding=o.encoding),o.minFilter!==void 0&&(u.minFilter=n(o.minFilter,C8)),o.magFilter!==void 0&&(u.magFilter=n(o.magFilter,C8)),o.anisotropy!==void 0&&(u.anisotropy=o.anisotropy),o.flipY!==void 0&&(u.flipY=o.flipY),o.generateMipmaps!==void 0&&(u.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(u.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(u.compareFunction=o.compareFunction),o.userData!==void 0&&(u.userData=o.userData),r[o.uuid]=u}return r}parseObject(e,t,n,r,s){let a;function o(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const f=[];for(let m=0,A=d.length;m<A;m++){const _=d[m];n[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),f.push(n[_])}return f}return n[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),n[d]}}function c(d){return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),r[d]}let u,h;switch(e.type){case"Scene":a=new ov,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new Ut(e.background):a.background=c(e.background)),e.environment!==void 0&&(a.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new M2(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new S2(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new _r(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Ah(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new LO(e.color,e.intensity);break;case"DirectionalLight":a=new F5(e.color,e.intensity);break;case"PointLight":a=new N5(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new OO(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new O5(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new DO(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new q2().fromJSON(e);break;case"SkinnedMesh":u=o(e.geometry),h=l(e.material),a=new A5(u,h),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":u=o(e.geometry),h=l(e.material),a=new cr(u,h);break;case"InstancedMesh":u=o(e.geometry),h=l(e.material);const d=e.count,f=e.instanceMatrix,m=e.instanceColor;a=new _5(u,h,d),a.instanceMatrix=new Bg(new Float32Array(f.array),16),m!==void 0&&(a.instanceColor=new Bg(new Float32Array(m.array),m.itemSize));break;case"LOD":a=new cO;break;case"Line":a=new yd(o(e.geometry),l(e.material));break;case"LineLoop":a=new b5(o(e.geometry),l(e.material));break;case"LineSegments":a=new wu(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new y5(o(e.geometry),l(e.material));break;case"Sprite":a=new lO(l(e.material));break;case"Group":a=new Yu;break;case"Bone":a=new T2;break;default:a=new Bi}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let f=0;f<d.length;f++)a.add(this.parseObject(d[f],t,n,r,s))}if(e.animations!==void 0){const d=e.animations;for(let f=0;f<d.length;f++){const m=d[f];a.animations.push(s[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const d=e.levels;for(let f=0;f<d.length;f++){const m=d[f],A=a.getObjectByProperty("uuid",m.object);A!==void 0&&a.addLevel(A,m.distance,m.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}}const vne={UVMapping:n_,CubeReflectionMapping:_d,CubeRefractionMapping:Vf,EquirectangularReflectionMapping:m1,EquirectangularRefractionMapping:g1,CubeUVReflectionMapping:nv},x8={RepeatWrapping:bd,ClampToEdgeWrapping:oa,MirroredRepeatWrapping:T0},C8={NearestFilter:ki,NearestMipmapNearestFilter:v1,NearestMipmapLinearFilter:yg,LinearFilter:Sr,LinearMipmapNearestFilter:m2,LinearMipmapLinearFilter:_u};class UO extends Xa{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=R0.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){R0.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Uy;class z5{static getContext(){return Uy===void 0&&(Uy=new(window.AudioContext||window.webkitAudioContext)),Uy}static setContext(e){Uy=e}}class Ane extends Xa{constructor(e){super(e)}load(e,t,n,r){const s=this,a=new ho(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const c=l.slice(0);z5.getContext().decodeAudioData(c,function(h){t(h)},o)}catch(c){o(c)}},n,r);function o(l){r?r(l):console.error(l),s.manager.itemError(e)}}}class _ne extends q2{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const r=new Ut().set(e),s=new Ut().set(t),a=new le(r.r,r.g,r.b),o=new le(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(l),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(c)}}class bne extends q2{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const n=new Ut().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const E8=new jn,S8=new jn,Np=new jn;class yne{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new _r,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new _r,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Np.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,a=t.near*Math.tan(A0*t.fov*.5)/t.zoom;let o,l;S8.elements[12]=-r,E8.elements[12]=r,o=-a*t.aspect+s,l=a*t.aspect+s,Np.elements[0]=2*t.near/(l-o),Np.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(Np),o=-a*t.aspect-s,l=a*t.aspect-s,Np.elements[0]=2*t.near/(l-o),Np.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(Np)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(S8),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(E8)}}let W2=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=M8(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=M8();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function M8(){return(typeof performance>"u"?Date:performance).now()}const Fp=new le,T8=new la,wne=new le,zp=new le;class xne extends Bi{constructor(){super(),this.type="AudioListener",this.context=z5.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new W2}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Fp,T8,wne),zp.set(0,0,-1).applyQuaternion(T8),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Fp.x,r),t.positionY.linearRampToValueAtTime(Fp.y,r),t.positionZ.linearRampToValueAtTime(Fp.z,r),t.forwardX.linearRampToValueAtTime(zp.x,r),t.forwardY.linearRampToValueAtTime(zp.y,r),t.forwardZ.linearRampToValueAtTime(zp.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(Fp.x,Fp.y,Fp.z),t.setOrientation(zp.x,zp.y,zp.z,n.x,n.y,n.z)}}class VO extends Bi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Up=new le,I8=new la,Cne=new le,Vp=new le;class Ene extends VO{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Up,I8,Cne),Vp.set(0,0,1).applyQuaternion(I8);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Up.x,n),t.positionY.linearRampToValueAtTime(Up.y,n),t.positionZ.linearRampToValueAtTime(Up.z,n),t.orientationX.linearRampToValueAtTime(Vp.x,n),t.orientationY.linearRampToValueAtTime(Vp.y,n),t.orientationZ.linearRampToValueAtTime(Vp.z,n)}else t.setPosition(Up.x,Up.y,Up.z),t.setOrientation(Vp.x,Vp.y,Vp.z)}}class Sne{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class HO{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==r;++o)n[s+o]=n[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(n,s,0,o,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(n,r,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(n[l]!==n[l+t]){o.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,a=r;s!==a;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[n+a]}_slerp(e,t,n,r){la.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const a=this._workIndex*s;la.multiplyQuaternionsFlat(e,a,e,t,e,n),la.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,n,r,s){const a=1-r;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[n+o]*r}}_lerpAdditive(e,t,n,r,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[n+a]*r}}}const U5="\\[\\]\\.:\\/",Mne=new RegExp("["+U5+"]","g"),V5="[^"+U5+"]",Tne="[^"+U5.replace("\\.","")+"]",Ine=/((?:WC+[\/:])*)/.source.replace("WC",V5),Pne=/(WCOD+)?/.source.replace("WCOD",Tne),kne=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",V5),Bne=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",V5),Rne=new RegExp("^"+Ine+Pne+kne+Bne+"$"),Dne=["material","materials","bones","map"];class Lne{constructor(e,t,n){const r=n||Gi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Gi{constructor(e,t,n){this.path=t,this.parsedPath=n||Gi.parseTrackName(t),this.node=Gi.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Gi.Composite(e,t,n):new Gi(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Mne,"")}static parseTrackName(e){const t=Rne.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=n.nodeName.substring(r+1);Dne.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=n(o.children);if(l)return l}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Gi.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let c=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const a=e[r];if(a===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Gi.Composite=Lne;Gi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Gi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Gi.prototype.GetterByBindingType=[Gi.prototype._getValue_direct,Gi.prototype._getValue_array,Gi.prototype._getValue_arrayElement,Gi.prototype._getValue_toArray];Gi.prototype.SetterByBindingTypeAndVersioning=[[Gi.prototype._setValue_direct,Gi.prototype._setValue_direct_setNeedsUpdate,Gi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Gi.prototype._setValue_array,Gi.prototype._setValue_array_setNeedsUpdate,Gi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Gi.prototype._setValue_arrayElement,Gi.prototype._setValue_arrayElement_setNeedsUpdate,Gi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Gi.prototype._setValue_fromArray,Gi.prototype._setValue_fromArray_setNeedsUpdate,Gi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class One{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Jl(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let o,l=e.length,c=this.nCachedObjects_;for(let u=0,h=arguments.length;u!==h;++u){const d=arguments[u],f=d.uuid;let m=t[f];if(m===void 0){m=l++,t[f]=m,e.push(d);for(let A=0,_=a;A!==_;++A)s[A].push(new Gi(d,n[A],r[A]))}else if(m<c){o=e[m];const A=--c,_=e[A];t[_.uuid]=m,e[m]=_,t[f]=A,e[A]=d;for(let v=0,w=a;v!==w;++v){const x=s[v],C=x[A];let S=x[m];x[m]=C,S===void 0&&(S=new Gi(d,n[v],r[v])),x[A]=S}}else e[m]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const h=s++,d=e[h];t[d.uuid]=u,e[u]=d,t[c]=h,e[h]=l;for(let f=0,m=r;f!==m;++f){const A=n[f],_=A[h],v=A[u];A[u]=_,A[h]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_,a=e.length;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],u=c.uuid,h=t[u];if(h!==void 0)if(delete t[u],h<s){const d=--s,f=e[d],m=--a,A=e[m];t[f.uuid]=h,e[h]=f,t[A.uuid]=d,e[d]=A,e.pop();for(let _=0,v=r;_!==v;++_){const w=n[_],x=w[d],C=w[m];w[h]=x,w[d]=C,w.pop()}}else{const d=--a,f=e[d];d>0&&(t[f.uuid]=h),e[h]=f,e.pop();for(let m=0,A=r;m!==A;++m){const _=n[m];_[h]=_[d],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,o=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,h=new Array(c);r=s.length,n[e]=r,a.push(e),o.push(t),s.push(h);for(let d=u,f=l.length;d!==f;++d){const m=l[d];h[d]=new Gi(m,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o],c=e[o];t[c]=n,a[n]=l,a.pop(),s[n]=s[o],s.pop(),r[n]=r[o],r.pop()}}}class GO{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:h0,endingEnd:h0};for(let c=0;c!==a;++c){const u=s[c].createInterpolant(null);o[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=TL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,s=e._clip.duration,a=s/r,o=r/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,l[1]=s+n,c[0]=e/a,c[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case r5:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(a),c[u].accumulateAdditive(o);break;case b2:default:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(a),c[u].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const a=n===IL;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(n===ML){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=d0,r.endingEnd=d0):(e?r.endingStart=this.zeroSlopeAtStart?d0:h0:r.endingStart=A1,t?r.endingEnd=this.zeroSlopeAtEnd?d0:h0:r.endingEnd=A1)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=n,this}}const Nne=new Float32Array(1);class Fne extends Rc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,o=e._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let h=0;h!==s;++h){const d=r[h],f=d.name;let m=u[f];if(m!==void 0)++m.referenceCount,a[h]=m;else{if(m=a[h],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,f));continue}const A=t&&t._propertyBindings[h].binding.parsedPath;m=new HO(Gi.create(n,f,A),d.ValueTypeName,d.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,f),a[h]=m}o[h].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const h=o.actionByRoot,d=(e._localRoot||this._root).uuid;delete h[d],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,a=this._bindingsByRootAndName,o=a[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new k5(new Float32Array(2),new Float32Array(2),1,Nne),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?Dg.findByName(r,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let c=null;if(n===void 0&&(a!==null?n=a.blendMode:n=b2),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===n)return h;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const u=new GO(this,a,t,n);return this._bindAction(u,c),this._addInactiveAction(u,o,s),u}existingAction(e,t){const n=t||this._root,r=n.uuid,s=typeof e=="string"?Dg.findByName(n,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let c=0;c!==n;++c)t[c]._update(r,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const c=a[o];this._deactivateAction(c);const u=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=u,t[u]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const a in n){const o=n[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class H5{constructor(e){this.value=e}clone(){return new H5(this.value.clone===void 0?this.value:this.value.clone())}}let zne=0;class Une extends Rc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:zne++}),this.name="",this.usage=b1,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++)this.uniforms.push(t[n].clone());return this}clone(){return new this.constructor().copy(this)}}class Vne extends o_{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Hne{constructor(e,t,n,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class QO{constructor(e,t,n=0,r=1/0){this.ray=new rv(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new x2,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return wM(e,this,n,t),n.sort(P8),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)wM(e[r],this,n,t);return n.sort(P8),n}}function P8(i,e){return i.distance-e.distance}function wM(i,e,t,n){if(i.layers.test(e.layers)&&i.raycast(e,t),n===!0){const r=i.children;for(let s=0,a=r.length;s<a;s++)wM(r[s],e,t,!0)}}let Gne=class{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Ts(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};class Qne{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}const k8=new _t;class qne{constructor(e=new _t(1/0,1/0),t=new _t(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=k8.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,k8).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const B8=new le,Vy=new le;class jne{constructor(e=new le,t=new le){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){B8.subVectors(e,this.start),Vy.subVectors(this.end,this.start);const n=Vy.dot(Vy);let s=Vy.dot(B8)/n;return t&&(s=Ts(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const R8=new le;class Wne extends Bi{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Zn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,l=32;a<l;a++,o++){const c=a/l*Math.PI*2,u=o/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}n.setAttribute("position",new rn(r,3));const s=new mo({fog:!1,toneMapped:!1});this.cone=new wu(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),R8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(R8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const sf=new le,Hy=new jn,r4=new jn;class $ne extends wu{constructor(e){const t=qO(e),n=new Zn,r=[],s=[],a=new Ut(0,0,1),o=new Ut(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(o.r,o.g,o.b))}n.setAttribute("position",new rn(r,3)),n.setAttribute("color",new rn(s,3));const l=new mo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");r4.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const o=t[s];o.parent&&o.parent.isBone&&(Hy.multiplyMatrices(r4,o.matrixWorld),sf.setFromMatrixPosition(Hy),r.setXYZ(a,sf.x,sf.y,sf.z),Hy.multiplyMatrices(r4,o.parent.matrixWorld),sf.setFromMatrixPosition(Hy),r.setXYZ(a+1,sf.x,sf.y,sf.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function qO(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,qO(i.children[t]));return e}class Xne extends cr{constructor(e,t,n){const r=new d_(t,4,2),s=new Lo({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Yne=new le,D8=new Ut,L8=new Ut;class Kne extends Bi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new h_(t);r.rotateY(Math.PI*.5),this.material=new Lo({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new Ln(a,3)),this.add(new cr(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");D8.copy(this.light.color),L8.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const s=n<r/2?D8:L8;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Yne.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Jne extends wu{constructor(e=10,t=10,n=4473924,r=8947848){n=new Ut(n),r=new Ut(r);const s=t/2,a=e/t,o=e/2,l=[],c=[];for(let d=0,f=0,m=-o;d<=t;d++,m+=a){l.push(-o,0,m,o,0,m),l.push(m,0,-o,m,0,o);const A=d===s?n:r;A.toArray(c,f),f+=3,A.toArray(c,f),f+=3,A.toArray(c,f),f+=3,A.toArray(c,f),f+=3}const u=new Zn;u.setAttribute("position",new rn(l,3)),u.setAttribute("color",new rn(c,3));const h=new mo({vertexColors:!0,toneMapped:!1});super(u,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Zne extends wu{constructor(e=10,t=16,n=8,r=64,s=4473924,a=8947848){s=new Ut(s),a=new Ut(a);const o=[],l=[];if(t>1)for(let h=0;h<t;h++){const d=h/t*(Math.PI*2),f=Math.sin(d)*e,m=Math.cos(d)*e;o.push(0,0,0),o.push(f,0,m);const A=h&1?s:a;l.push(A.r,A.g,A.b),l.push(A.r,A.g,A.b)}for(let h=0;h<n;h++){const d=h&1?s:a,f=e-e/n*h;for(let m=0;m<r;m++){let A=m/r*(Math.PI*2),_=Math.sin(A)*f,v=Math.cos(A)*f;o.push(_,0,v),l.push(d.r,d.g,d.b),A=(m+1)/r*(Math.PI*2),_=Math.sin(A)*f,v=Math.cos(A)*f,o.push(_,0,v),l.push(d.r,d.g,d.b)}}const c=new Zn;c.setAttribute("position",new rn(o,3)),c.setAttribute("color",new rn(l,3));const u=new mo({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const O8=new le,Gy=new le,N8=new le;class eie extends Bi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Zn;r.setAttribute("position",new rn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new mo({fog:!1,toneMapped:!1});this.lightPlane=new yd(r,s),this.add(this.lightPlane),r=new Zn,r.setAttribute("position",new rn([0,0,0,0,0,1],3)),this.targetLine=new yd(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),O8.setFromMatrixPosition(this.light.matrixWorld),Gy.setFromMatrixPosition(this.light.target.matrixWorld),N8.subVectors(Gy,O8),this.lightPlane.lookAt(Gy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Gy),this.targetLine.scale.z=N8.length()}}const Qy=new le,Cs=new s_;class tie extends wu{constructor(e){const t=new Zn,n=new mo({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(m,A){l(m),l(A)}function l(m){r.push(0,0,0),s.push(0,0,0),a[m]===void 0&&(a[m]=[]),a[m].push(r.length/3-1)}t.setAttribute("position",new rn(r,3)),t.setAttribute("color",new rn(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const c=new Ut(16755200),u=new Ut(16711680),h=new Ut(43775),d=new Ut(16777215),f=new Ut(3355443);this.setColors(c,u,h,d,f)}setColors(e,t,n,r,s){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;Cs.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Us("c",t,e,Cs,0,0,-1),Us("t",t,e,Cs,0,0,1),Us("n1",t,e,Cs,-n,-r,-1),Us("n2",t,e,Cs,n,-r,-1),Us("n3",t,e,Cs,-n,r,-1),Us("n4",t,e,Cs,n,r,-1),Us("f1",t,e,Cs,-n,-r,1),Us("f2",t,e,Cs,n,-r,1),Us("f3",t,e,Cs,-n,r,1),Us("f4",t,e,Cs,n,r,1),Us("u1",t,e,Cs,n*.7,r*1.1,-1),Us("u2",t,e,Cs,-n*.7,r*1.1,-1),Us("u3",t,e,Cs,0,r*2,-1),Us("cf1",t,e,Cs,-n,0,1),Us("cf2",t,e,Cs,n,0,1),Us("cf3",t,e,Cs,0,-r,1),Us("cf4",t,e,Cs,0,r,1),Us("cn1",t,e,Cs,-n,0,-1),Us("cn2",t,e,Cs,n,0,-1),Us("cn3",t,e,Cs,0,-r,-1),Us("cn4",t,e,Cs,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Us(i,e,t,n,r,s,a){Qy.set(r,s,a).unproject(n);const o=e[i];if(o!==void 0){const l=t.getAttribute("position");for(let c=0,u=o.length;c<u;c++)l.setXYZ(o[c],Qy.x,Qy.y,Qy.z)}}const qy=new yu;class nie extends wu{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Zn;s.setIndex(new Ln(n,1)),s.setAttribute("position",new Ln(r,3)),super(s,new mo({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&qy.setFromObject(this.object),qy.isEmpty())return;const t=qy.min,n=qy.max,r=this.geometry.attributes.position,s=r.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class iie extends wu{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Zn;s.setIndex(new Ln(n,1)),s.setAttribute("position",new rn(r,3)),super(s,new mo({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class rie extends yd{constructor(e,t=1,n=16776960){const r=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new Zn;a.setAttribute("position",new rn(s,3)),a.computeBoundingSphere(),super(a,new mo({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Zn;l.setAttribute("position",new rn(o,3)),l.computeBoundingSphere(),this.add(new cr(l,new Lo({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const F8=new le;let jy,s4;class sie extends Bi{constructor(e=new le(0,0,1),t=new le(0,0,0),n=1,r=16776960,s=n*.2,a=s*.2){super(),this.type="ArrowHelper",jy===void 0&&(jy=new Zn,jy.setAttribute("position",new rn([0,0,0,0,1,0],3)),s4=new lv(0,.5,1,5,1),s4.translate(0,-.5,0)),this.position.copy(t),this.line=new yd(jy,new mo({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new cr(s4,new Lo({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{F8.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(F8,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class aie extends wu{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Zn;r.setAttribute("position",new rn(t,3)),r.setAttribute("color",new rn(n,3));const s=new mo({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,n){const r=new Ut,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class oie{constructor(){this.type="ShapePath",this.color=new Ut,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new x1,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,a){return this.currentPath.bezierCurveTo(e,t,n,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(v){const w=[];for(let x=0,C=v.length;x<C;x++){const S=v[x],I=new y0;I.curves=S.curves,w.push(I)}return w}function n(v,w){const x=w.length;let C=!1;for(let S=x-1,I=0;I<x;S=I++){let P=w[S],k=w[I],M=k.x-P.x,R=k.y-P.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(P=w[I],M=-M,k=w[S],R=-R),v.y<P.y||v.y>k.y)continue;if(v.y===P.y){if(v.x===P.x)return!0}else{const N=R*(v.x-P.x)-M*(v.y-P.y);if(N===0)return!0;if(N<0)continue;C=!C}}else{if(v.y!==P.y)continue;if(k.x<=v.x&&v.x<=P.x||P.x<=v.x&&v.x<=k.x)return!0}}return C}const r=oh.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,l;const c=[];if(s.length===1)return o=s[0],l=new y0,l.curves=o.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const h=[],d=[];let f=[],m=0,A;d[m]=void 0,f[m]=[];for(let v=0,w=s.length;v<w;v++)o=s[v],A=o.getPoints(),a=r(A),a=e?!a:a,a?(!u&&d[m]&&m++,d[m]={s:new y0,p:A},d[m].s.curves=o.curves,u&&m++,f[m]=[]):f[m].push({h:o,p:A[0]});if(!d[0])return t(s);if(d.length>1){let v=!1,w=0;for(let x=0,C=d.length;x<C;x++)h[x]=[];for(let x=0,C=d.length;x<C;x++){const S=f[x];for(let I=0;I<S.length;I++){const P=S[I];let k=!0;for(let M=0;M<d.length;M++)n(P.p,d[M].p)&&(x!==M&&w++,k?(k=!1,h[M].push(P)):v=!0);k&&h[x].push(P)}}w>0&&v===!1&&(f=h)}let _;for(let v=0,w=d.length;v<w;v++){l=d[v].s,c.push(l),_=f[v];for(let x=0,C=_.length;x<C;x++)l.holes.push(_[x].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:h2}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=h2);const jO=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:$T,AddEquation:xf,AddOperation:yL,AdditiveAnimationBlendMode:r5,AdditiveBlending:Q3,AlphaFormat:ZT,AlwaysCompare:HL,AlwaysDepth:pL,AlwaysStencilFunc:DL,AmbientLight:LO,AmbientLightProbe:bne,AnimationAction:GO,AnimationClip:Dg,AnimationLoader:cne,AnimationMixer:Fne,AnimationObjectGroup:One,AnimationUtils:sne,ArcCurve:dO,ArrayCamera:sO,ArrowHelper:sie,Audio:VO,AudioAnalyser:Sne,AudioContext:z5,AudioListener:xne,AudioLoader:Ane,AxesHelper:aie,BackSide:Fo,BasicDepthPacking:kL,BasicShadowMap:kX,Bone:T2,BooleanKeyframeTrack:Q0,Box2:qne,Box3:yu,Box3Helper:iie,BoxGeometry:G0,BoxHelper:nie,BufferAttribute:Ln,BufferGeometry:Zn,BufferGeometryLoader:zO,ByteType:i_,Cache:R0,Camera:s_,CameraHelper:tie,CanvasTexture:Ite,CapsuleGeometry:B2,CatmullRomCurve3:fO,CineonToneMapping:CL,CircleGeometry:R2,ClampToEdgeWrapping:oa,Clock:W2,Color:Ut,ColorKeyframeTrack:B5,ColorManagement:Vl,CompressedArrayTexture:uO,CompressedCubeTexture:hO,CompressedTexture:c_,CompressedTextureLoader:une,ConeGeometry:D2,CubeCamera:KL,CubeReflectionMapping:_d,CubeRefractionMapping:Vf,CubeTexture:a_,CubeTextureLoader:hne,CubeUVReflectionMapping:nv,CubicBezierCurve:x5,CubicBezierCurve3:pO,CubicInterpolant:PO,CullFaceBack:G3,CullFaceFront:hL,CullFaceFrontBack:PX,CullFaceNone:uL,Curve:xu,CurvePath:gO,CustomBlending:dL,CustomToneMapping:EL,CylinderGeometry:lv,Cylindrical:Qne,Data3DTexture:w2,DataArrayTexture:y2,DataTexture:b0,DataTextureLoader:dne,DataUtils:OY,DecrementStencilOp:OX,DecrementWrapStencilOp:FX,DefaultLoadingManager:RO,DepthFormat:Rf,DepthStencilFormat:I0,DepthTexture:aO,DirectionalLight:F5,DirectionalLightHelper:eie,DiscreteInterpolant:kO,DisplayP3ColorSpace:a5,DodecahedronGeometry:L2,DoubleSide:fs,DstAlphaFactor:GT,DstColorFactor:qT,DynamicCopyUsage:ZX,DynamicDrawUsage:WX,DynamicReadUsage:YX,EdgesGeometry:vO,EllipseCurve:P2,EqualCompare:NL,EqualDepth:gL,EqualStencilFunc:HX,EquirectangularReflectionMapping:m1,EquirectangularRefractionMapping:g1,Euler:H0,EventDispatcher:Rc,ExtrudeGeometry:N2,FileLoader:ho,Float16BufferAttribute:HY,Float32BufferAttribute:rn,Float64BufferAttribute:GY,FloatType:ns,Fog:M2,FogExp2:S2,FramebufferTexture:Tte,FrontSide:dh,Frustum:C2,GLBufferAttribute:Hne,GLSL1:tY,GLSL3:fM,GreaterCompare:zL,GreaterDepth:AL,GreaterEqualCompare:VL,GreaterEqualDepth:vL,GreaterEqualStencilFunc:jX,GreaterStencilFunc:QX,GridHelper:Jne,Group:Yu,HalfFloatType:zo,HemisphereLight:DO,HemisphereLightHelper:Kne,HemisphereLightProbe:_ne,IcosahedronGeometry:F2,ImageBitmapLoader:UO,ImageLoader:M1,ImageUtils:c5,IncrementStencilOp:LX,IncrementWrapStencilOp:NX,InstancedBufferAttribute:Bg,InstancedBufferGeometry:FO,InstancedInterleavedBuffer:Vne,InstancedMesh:_5,Int16BufferAttribute:UY,Int32BufferAttribute:VY,Int8BufferAttribute:NY,IntType:iv,InterleavedBuffer:o_,InterleavedBufferAttribute:Hf,Interpolant:cv,InterpolateDiscrete:Ig,InterpolateLinear:P0,InterpolateSmooth:qw,InvertStencilOp:zX,KeepStencilOp:jw,KeyframeTrack:Cu,LOD:cO,LatheGeometry:u_,Layers:x2,LessCompare:OL,LessDepth:mL,LessEqualCompare:FL,LessEqualDepth:dx,LessEqualStencilFunc:GX,LessStencilFunc:VX,Light:rp,LightProbe:q2,Line:yd,Line3:jne,LineBasicMaterial:mo,LineCurve:k2,LineCurve3:mO,LineDashedMaterial:TO,LineLoop:b5,LineSegments:wu,LinearEncoding:_1,LinearFilter:Sr,LinearInterpolant:k5,LinearMipMapLinearFilter:JT,LinearMipMapNearestFilter:KT,LinearMipmapLinearFilter:_u,LinearMipmapNearestFilter:m2,LinearSRGBColorSpace:Dc,LinearToneMapping:wL,Loader:Xa,LoaderUtils:Lg,LoadingManager:R5,LoopOnce:ML,LoopPingPong:IL,LoopRepeat:TL,LuminanceAlphaFormat:_2,LuminanceFormat:A2,MOUSE:TX,Material:ya,MaterialLoader:j2,MathUtils:l5,Matrix3:Ai,Matrix4:jn,MaxEquation:$3,Mesh:cr,MeshBasicMaterial:Lo,MeshDepthMaterial:f5,MeshDistanceMaterial:p5,MeshLambertMaterial:SO,MeshMatcapMaterial:MO,MeshNormalMaterial:EO,MeshPhongMaterial:xO,MeshPhysicalMaterial:_h,MeshStandardMaterial:f_,MeshToonMaterial:CO,MinEquation:W3,MirroredRepeatWrapping:T0,MixOperation:bL,MultiplyBlending:j3,MultiplyOperation:t_,NearestFilter:ki,NearestMipMapLinearFilter:YT,NearestMipMapNearestFilter:XT,NearestMipmapLinearFilter:yg,NearestMipmapNearestFilter:v1,NeverCompare:LL,NeverDepth:fL,NeverStencilFunc:UX,NoBlending:rh,NoColorSpace:ah,NoToneMapping:md,NormalAnimationBlendMode:b2,NormalBlending:kf,NotEqualCompare:UL,NotEqualDepth:_L,NotEqualStencilFunc:qX,NumberKeyframeTrack:B0,Object3D:Bi,ObjectLoader:gne,ObjectSpaceNormalMap:RL,OctahedronGeometry:h_,OneFactor:UT,OneMinusDstAlphaFactor:QT,OneMinusDstColorFactor:jT,OneMinusSrcAlphaFactor:p2,OneMinusSrcColorFactor:HT,OrthographicCamera:Ah,PCFShadowMap:OT,PCFSoftShadowMap:d2,PMREMGenerator:gM,Path:x1,PerspectiveCamera:_r,Plane:bf,PlaneGeometry:sv,PlaneHelper:rie,PointLight:N5,PointLightHelper:Xne,Points:y5,PointsMaterial:I2,PolarGridHelper:Zne,PolyhedronGeometry:ip,PositionalAudio:Ene,PropertyBinding:Gi,PropertyMixer:HO,QuadraticBezierCurve:C5,QuadraticBezierCurve3:E5,Quaternion:la,QuaternionKeyframeTrack:Gf,QuaternionLinearInterpolant:BO,RED_GREEN_RGTC2_Format:hM,RED_RGTC1_Format:SL,REVISION:h2,RGBADepthPacking:BL,RGBAFormat:Ps,RGBAIntegerFormat:n5,RGBA_ASTC_10x10_Format:oM,RGBA_ASTC_10x5_Format:rM,RGBA_ASTC_10x6_Format:sM,RGBA_ASTC_10x8_Format:aM,RGBA_ASTC_12x10_Format:lM,RGBA_ASTC_12x12_Format:cM,RGBA_ASTC_4x4_Format:vx,RGBA_ASTC_5x4_Format:K3,RGBA_ASTC_5x5_Format:J3,RGBA_ASTC_6x5_Format:Z3,RGBA_ASTC_6x6_Format:eM,RGBA_ASTC_8x5_Format:tM,RGBA_ASTC_8x6_Format:nM,RGBA_ASTC_8x8_Format:iM,RGBA_BPTC_Format:ZA,RGBA_ETC2_EAC_Format:gx,RGBA_PVRTC_2BPPV1_Format:Y3,RGBA_PVRTC_4BPPV1_Format:px,RGBA_S3TC_DXT1_Format:Gw,RGBA_S3TC_DXT3_Format:Qw,RGBA_S3TC_DXT5_Format:JA,RGB_ETC1_Format:i5,RGB_ETC2_Format:mx,RGB_PVRTC_2BPPV1_Format:X3,RGB_PVRTC_4BPPV1_Format:fx,RGB_S3TC_DXT1_Format:KA,RGFormat:cg,RGIntegerFormat:t5,RawShaderMaterial:T5,Ray:rv,Raycaster:QO,RectAreaLight:OO,RedFormat:lg,RedIntegerFormat:e5,ReinhardToneMapping:xL,RepeatWrapping:bd,ReplaceStencilOp:DX,ReverseSubtractEquation:FT,RingGeometry:z2,SIGNED_RED_GREEN_RGTC2_Format:dM,SIGNED_RED_RGTC1_Format:uM,SRGBColorSpace:En,Scene:ov,ShaderChunk:ci,ShaderLib:cu,ShaderMaterial:$a,ShadowMaterial:wO,Shape:y0,ShapeGeometry:U2,ShapePath:oie,ShapeUtils:oh,ShortType:r_,Skeleton:l_,SkeletonHelper:$ne,SkinnedMesh:A5,Source:f0,Sphere:zc,SphereGeometry:d_,Spherical:Gne,SphericalHarmonics3:NO,SplineCurve:S5,SpotLight:O5,SpotLightHelper:Wne,Sprite:lO,SpriteMaterial:v5,SrcAlphaFactor:f2,SrcAlphaSaturateFactor:WT,SrcColorFactor:VT,StaticCopyUsage:JX,StaticDrawUsage:b1,StaticReadUsage:XX,StereoCamera:yne,StreamCopyUsage:eY,StreamDrawUsage:$X,StreamReadUsage:KX,StringKeyframeTrack:q0,SubtractEquation:NT,SubtractiveBlending:q3,TOUCH:IX,TangentSpaceNormalMap:np,TetrahedronGeometry:V2,Texture:zr,TextureLoader:D5,TorusGeometry:H2,TorusKnotGeometry:G2,Triangle:sl,TriangleFanDrawMode:Ax,TriangleStripDrawMode:s5,TrianglesDrawMode:PL,TubeGeometry:Q2,TwoPassDoubleSide:BX,UVMapping:n_,Uint16BufferAttribute:u5,Uint32BufferAttribute:h5,Uint8BufferAttribute:FY,Uint8ClampedBufferAttribute:zY,Uniform:H5,UniformsGroup:Une,UniformsLib:Xt,UniformsUtils:_0,UnsignedByteType:ts,UnsignedInt248Type:Bf,UnsignedIntType:Sc,UnsignedShort4444Type:g2,UnsignedShort5551Type:v2,UnsignedShortType:V0,VSMShadowMap:qu,Vector2:_t,Vector3:le,Vector4:zi,VectorKeyframeTrack:Rg,VideoTexture:Mte,WebGL1Renderer:g5,WebGL3DRenderTarget:EY,WebGLArrayRenderTarget:CY,WebGLCoordinateSystem:Xu,WebGLCubeRenderTarget:JL,WebGLMultipleRenderTargets:SY,WebGLRenderTarget:Va,WebGLRenderer:m5,WebGLUtils:rO,WebGPUCoordinateSystem:y1,WireframeGeometry:yO,WrapAroundEnding:A1,ZeroCurvatureEnding:h0,ZeroFactor:zT,ZeroSlopeEnding:d0,ZeroStencilOp:RX,_SRGBAFormat:_x,sRGBEncoding:sh},Symbol.toStringTag,{value:"Module"})),lie=()=>mu("threlte-internal-context");function cie(i){let e;const t=i[9].default,n=Yi(t,i,i[8],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,[s]){n&&n.p&&(!e||s&256)&&Ki(n,t,r,r[8],e?Zi(t,r[8],s,null):Ji(r[8]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}const z8="threlte-disposable-object-context";function uie(i,e,t){let n,r,{$$slots:s={},$$scope:a}=e;const{collectDisposableObjects:o,addDisposableObjects:l,removeDisposableObjects:c}=lie();let{object:u=void 0}=e,h=u,{dispose:d=void 0}=e;const f=mu(z8);Wt(i,f,_=>t(7,r=_));const m=Ms(d??r??!0);Wt(i,m,_=>t(6,n=_)),fu(z8,m);let A=n?o(u):[];return l(A),Ua(()=>{c(A)}),i.$$set=_=>{"object"in _&&t(2,u=_.object),"dispose"in _&&t(3,d=_.dispose),"$$scope"in _&&t(8,a=_.$$scope)},i.$$.update=()=>{i.$$.dirty&136&&m.set(d??r??!0),i.$$.dirty&116&&u!==h&&(c(A),t(5,A=n?o(u):[]),l(A),t(4,h=u))},[f,m,u,d,h,A,n,r,a,s]}class hie extends Sn{constructor(e){super(),Mn(this,e,uie,cie,gn,{object:2,dispose:3})}}function die(i,e){const t=Ms(i);let n=i;const r=t.subscribe(o=>n=o);return Ua(r),{...t,set:o=>{if((o==null?void 0:o.uuid)===(n==null?void 0:n.uuid))return;const l=n;t.set(o),e==null||e(o,l)},update:o=>{const l=o(n);if((l==null?void 0:l.uuid)===(n==null?void 0:n.uuid))return;const c=n;t.set(l),e==null||e(l,c)}}}const Id=()=>mu("threlte"),fie=()=>mu("threlte-hierarchical-parent-context");function pie(i){let e;const t=i[8].default,n=Yi(t,i,i[7],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,[s]){n&&n.p&&(!e||s&128)&&Ki(n,t,r,r[7],e?Zi(t,r[7],s,null):Ji(r[7]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}const mie=()=>({onChildMount:mu("threlte-hierarchical-object-on-mount"),onChildDestroy:mu("threlte-hierarchical-object-on-destroy")});function gie(i,e,t){var v;let n,{$$slots:r={},$$scope:s}=e,{object:a=void 0}=e,{children:o=[]}=e,{onChildMount:l=void 0}=e;const c=w=>{o.push(w),t(1,o),l==null||l(w)};let{onChildDestroy:u=void 0}=e;const h=w=>{const x=o.findIndex(C=>C.uuid===w.uuid);x!==-1&&o.splice(x,1),t(1,o),u==null||u(w)},{invalidate:d}=Id(),f=fie();Wt(i,f,w=>t(6,n=w));let{parent:m=n}=e;const A=mie();a&&((v=A.onChildMount)==null||v.call(A,a),d("HierarchicalObject: object added"));const _=die(a,(w,x)=>{var C,S;x&&((C=A.onChildDestroy)==null||C.call(A,x),d("HierarchicalObject: object added")),w&&((S=A.onChildMount)==null||S.call(A,w),d("HierarchicalObject: object removed"))});return Ua(()=>{var w;a&&((w=A.onChildDestroy)==null||w.call(A,a),d("HierarchicalObject: object removed"))}),fu("threlte-hierarchical-object-on-mount",c),fu("threlte-hierarchical-object-on-destroy",h),fu("threlte-hierarchical-parent-context",_),i.$$set=w=>{"object"in w&&t(3,a=w.object),"children"in w&&t(1,o=w.children),"onChildMount"in w&&t(4,l=w.onChildMount),"onChildDestroy"in w&&t(5,u=w.onChildDestroy),"parent"in w&&t(2,m=w.parent),"$$scope"in w&&t(7,s=w.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&t(2,m=n),i.$$.dirty&8&&_.set(a)},[f,o,m,a,l,u,n,s,r]}class vie extends Sn{constructor(e){super(),Mn(this,e,gie,pie,gn,{object:3,children:1,onChildMount:4,onChildDestroy:5,parent:2})}}function Aie(i){let e;const t=i[1].default,n=Yi(t,i,i[4],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&16)&&Ki(n,t,r,r[4],e?Zi(t,r[4],s,null):Ji(r[4]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function _ie(i){let e,t;return e=new vie({props:{object:i[0],onChildMount:i[2],onChildDestroy:i[3],$$slots:{default:[Aie]},$$scope:{ctx:i}}}),{c(){ot(e.$$.fragment)},l(n){lt(e.$$.fragment,n)},m(n,r){ct(e,n,r),t=!0},p(n,[r]){const s={};r&1&&(s.object=n[0]),r&1&&(s.onChildMount=n[2]),r&1&&(s.onChildDestroy=n[3]),r&16&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(we(e.$$.fragment,n),t=!0)},o(n){Me(e.$$.fragment,n),t=!1},d(n){ut(e,n)}}}function bie(i,e,t){let{$$slots:n={},$$scope:r}=e,{object:s}=e;const a=l=>s.add(l),o=l=>s.remove(l);return i.$$set=l=>{"object"in l&&t(0,s=l.object),"$$scope"in l&&t(4,r=l.$$scope)},[s,n,a,o,r]}class yie extends Sn{constructor(e){super(),Mn(this,e,bie,_ie,gn,{object:0})}}const WO=(i,e)=>{if(e.includes(".")){const t=e.split("."),n=t.pop();for(let r=0;r<t.length;r+=1)i=i[t[r]];return{target:i,key:n}}else return{target:i,key:e}},a4=Symbol("initialValueBeforeAttach"),wie=()=>{const{invalidate:i}=Id();let e=!1,t=a4,n,r,s;const a=(l,c,u)=>{if(o(),!u){const h=l;((h==null?void 0:h.isMaterial)||!1)&&(u="material"),((h==null?void 0:h.isBufferGeometry)||(h==null?void 0:h.isGeometry)||!1)&&(u="geometry")}if(u){if(typeof u=="function")n=u(c,l);else{const{target:h,key:d}=WO(c,u);t=h[d],h[d]=l,r=h,s=d}e=!0,i()}},o=()=>{e&&(n?(n(),n=void 0):r&&s&&t!==a4&&(r[s]=t,t=a4,r=void 0,s=void 0),e=!1,i())};return Ua(()=>{o()}),{update:a}},xie=i=>i&&i.isCamera,$O=i=>i&&i.isOrthographicCamera,XO=i=>i&&i.isPerspectiveCamera,Cie=i=>XO(i)||$O(i),Eie=()=>{const{invalidate:i,size:e,camera:t}=Id();let n,r;Ua(()=>{r==null||r()});const s=l=>{n&&($O(n)?(n.left=l.width/-2,n.right=l.width/2,n.top=l.height/2,n.bottom=l.height/-2,n.updateProjectionMatrix(),n.updateMatrixWorld(),i()):XO(n)&&(n.aspect=l.width/l.height,n.updateProjectionMatrix(),n.updateMatrixWorld(),i()))};return{update:(l,c)=>{if(r==null||r(),c||!Cie(l)){n=void 0;return}n=l,r=e.subscribe(s)},makeDefaultCamera:(l,c)=>{!xie(l)||!c||(t.set(l),i())}}},G5=()=>{const i=J1(),e=(n,r)=>{const s=i.$$.callbacks[n];s&&s.forEach(a=>{a(r)})};return Object.defineProperty(e,"hasEventListener",{value:n=>!!i.$$.callbacks[n],enumerable:!0}),e},Sie=()=>{const i=G5(),e=[];let t,n=!1;const r=()=>{e.forEach(o=>o()),e.length=0,i("create",{ref:t,cleanup:o=>{e.push(o)}})},s=a=>{t=a,n&&r()};return Fc(()=>{r(),n=!0}),Ua(()=>{e.forEach(a=>a())}),{updateRef:s}},U8=i=>!!(i!=null&&i.addEventListener),Mie=()=>{const i=G5(),e=J1(),t=d=>{d!=null&&d.type&&i(d.type,d)},n=(d,f)=>{U8(d)&&f.forEach(m=>{d.removeEventListener(m,t)})},r=(d,f)=>{U8(d)&&f.forEach(m=>{d.addEventListener(m,t)})};let s=[],a;const o=Ms([]),l=o.subscribe(d=>{n(a,s),r(a,d),s=d});Ua(l);const c=Ms(),u=c.subscribe(d=>{n(a,s),r(d,s),a=d});return Ua(u),Ua(()=>{n(a,s)}),Fc(()=>{o.set(Object.keys(e.$$.callbacks))}),{updateRef:d=>{c.set(d)}}},Tie=i=>{const t=mu("threlte-plugin-context");if(!t)return;const n=Object.values(t).map(c=>c(i)).filter(Boolean),r=n.flatMap(c=>c.pluginProps??[]);let s=[];return Ua(()=>{s.forEach(c=>c())}),{updateRef:c=>{s.forEach(u=>u()),s=[],n.forEach(u=>{var d;const h=(d=u.onRefChange)==null?void 0:d.call(u,c);h&&s.push(h)})},updateProps:c=>{n.forEach(u=>{var h;(h=u.onPropsChange)==null||h.call(u,c)})},updateRestProps:c=>{n.forEach(u=>{var h;(h=u.onRestPropsChange)==null||h.call(u,c)})},pluginsProps:r}},Iie=new Set(["$$scope","$$slots","type","args","attach","instance"]),Pie=new Set(["fov","aspect","near","far","left","right","top","bottom","zoom"]),kie=i=>typeof i=="string"||typeof i=="number"||typeof i=="boolean"||typeof i>"u"||i===null,Bie=()=>{const{invalidate:i}=Id(),e=new Map,t=(r,s,a,o)=>{var u,h;if(kie(a)){const d=e.get(s);if(d&&d.instance===r&&d.value===a)return;e.set(s,{instance:r,value:a})}const{key:l,target:c}=WO(r,s);if(!Array.isArray(a)&&typeof a=="number"&&typeof((u=c[l])==null?void 0:u.setScalar)=="function")c[l].setScalar(a);else if(typeof((h=c[l])==null?void 0:h.set)=="function")Array.isArray(a)?c[l].set(...a):c[l].set(a);else{if(c[l]=a,o.manualCamera)return;Pie.has(l)&&(c.isPerspectiveCamera||c.isOrthographicCamera)&&c.updateProjectionMatrix()}};return{updateProps:(r,s,a)=>{var o;for(const l in s)!Iie.has(l)&&!((o=a.pluginsProps)!=null&&o.includes(l))&&t(r,l,s[l],a),i()}}},Rie=i=>({ref:i&2}),V8=i=>({ref:i[1]}),Die=i=>({ref:i&2}),H8=i=>({ref:i[1]});function G8(i){let e,t;return e=new hie({props:{object:i[1],dispose:i[0]}}),{c(){ot(e.$$.fragment)},l(n){lt(e.$$.fragment,n)},m(n,r){ct(e,n,r),t=!0},p(n,r){const s={};r&2&&(s.object=n[1]),r&1&&(s.dispose=n[0]),e.$set(s)},i(n){t||(we(e.$$.fragment,n),t=!0)},o(n){Me(e.$$.fragment,n),t=!1},d(n){ut(e,n)}}}function Lie(i){let e;const t=i[12].default,n=Yi(t,i,i[13],V8);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8194)&&Ki(n,t,r,r[13],e?Zi(t,r[13],s,Rie):Ji(r[13]),V8)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function Oie(i){let e,t;return e=new yie({props:{object:i[1],$$slots:{default:[Nie]},$$scope:{ctx:i}}}),{c(){ot(e.$$.fragment)},l(n){lt(e.$$.fragment,n)},m(n,r){ct(e,n,r),t=!0},p(n,r){const s={};r&2&&(s.object=n[1]),r&8194&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(we(e.$$.fragment,n),t=!0)},o(n){Me(e.$$.fragment,n),t=!1},d(n){ut(e,n)}}}function Nie(i){let e;const t=i[12].default,n=Yi(t,i,i[13],H8);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8194)&&Ki(n,t,r,r[13],e?Zi(t,r[13],s,Die):Ji(r[13]),H8)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function Fie(i){let e=i[4](i[1]),t,n,r,s,a,o,l=e&&G8(i);const c=[Oie,Lie],u=[];function h(d,f){return f&2&&(n=null),n==null&&(n=!!d[3](d[1])),n?0:1}return r=h(i,-1),s=u[r]=c[r](i),{c(){l&&l.c(),t=Ct(),s.c(),a=ca()},l(d){l&&l.l(d),t=Et(d),s.l(d),a=ca()},m(d,f){l&&l.m(d,f),Fe(d,t,f),u[r].m(d,f),Fe(d,a,f),o=!0},p(d,[f]){f&2&&(e=d[4](d[1])),e?l?(l.p(d,f),f&2&&we(l,1)):(l=G8(d),l.c(),we(l,1),l.m(t.parentNode,t)):l&&(Hs(),Me(l,1,1,()=>{l=null}),Gs());let m=r;r=h(d,f),r===m?u[r].p(d,f):(Hs(),Me(u[m],1,1,()=>{u[m]=null}),Gs(),s=u[r],s?s.p(d,f):(s=u[r]=c[r](d),s.c()),we(s,1),s.m(a.parentNode,a))},i(d){o||(we(l),we(s),o=!0)},o(d){Me(l),Me(s),o=!1},d(d){d&&(ae(t),ae(a)),l&&l.d(d),u[r].d(d)}}}function zie(i,e,t){const n=["is","args","attach","manual","makeDefault","dispose","ref"];let r=Uf(e,n),s,{$$slots:a={},$$scope:o}=e,{is:l}=e,{args:c=void 0}=e,{attach:u=void 0}=e,{manual:h=void 0}=e,{makeDefault:d=void 0}=e,{dispose:f=void 0}=e;const m=mu("threlte-hierarchical-parent-context");Wt(i,m,F=>t(11,s=F));const A=F=>typeof F=="function"&&/^\s*class\s+/.test(F.toString()),_=F=>Array.isArray(F),v=Sie();let w=A(l)&&_(c)?new l(...c):A(l)?new l:l;v.updateRef(w);let x=!1;const C=()=>{if(!x){x=!0;return}t(1,w=A(l)&&_(c)?new l(...c):A(l)?new l:l),v.updateRef(w)};let{ref:S=w}=e;const I=Ms(w);fu("threlte-hierarchical-parent-context",I);const P=Tie({ref:w,props:e}),k=(P==null?void 0:P.pluginsProps)??[],M=Bie(),R=Eie(),N=wie(),U=Mie(),q=F=>!!F.isObject3D,W=F=>F.dispose!==void 0;return i.$$set=F=>{t(27,e=jt(jt({},e),Ri(F))),t(26,r=Uf(e,n)),"is"in F&&t(6,l=F.is),"args"in F&&t(7,c=F.args),"attach"in F&&t(8,u=F.attach),"manual"in F&&t(9,h=F.manual),"makeDefault"in F&&t(10,d=F.makeDefault),"dispose"in F&&t(0,f=F.dispose),"ref"in F&&t(5,S=F.ref),"$$scope"in F&&t(13,o=F.$$scope)},i.$$.update=()=>{i.$$.dirty&192&&C(),i.$$.dirty&2&&t(5,S=w),i.$$.dirty&2&&I.set(w),M.updateProps(w,r,{manualCamera:h,pluginsProps:k}),i.$$.dirty&514&&R.update(w,h),i.$$.dirty&1026&&R.makeDefaultCamera(w,d),i.$$.dirty&2306&&N.update(w,s,u),i.$$.dirty&2&&U.updateRef(w),i.$$.dirty&2&&(P==null||P.updateRef(w)),P==null||P.updateProps(e),P==null||P.updateRestProps(r)},e=Ri(e),[f,w,m,q,W,S,l,c,u,h,d,s,a,o]}let Q5=class extends Sn{constructor(e){super(),Mn(this,e,zie,Fie,gn,{is:6,args:7,attach:8,manual:9,makeDefault:10,dispose:0,ref:5})}};const $2=typeof window<"u",Uie=()=>{const i=Ms({width:0,height:0});let e={width:0,height:0};const t=i.subscribe(a=>e=a);Ua(t);let n;const r=()=>{const a=e;if(!n||!n.parentElement)return;const{clientWidth:o,clientHeight:l}=n.parentElement;(o!==a.width||l!==a.height)&&i.set({width:o,height:l})},s=a=>{n=a,r(),window.addEventListener("resize",r)};return $2?(Ua(()=>{window.removeEventListener("resize",r)}),{parentSizeAction:s,parentSize:i}):{parentSize:i,parentSizeAction:s}},Q8=(i,e)=>{if(i===e)return!0;if(!i||!e)return!1;const t=i.length;if(e.length!==t)return!1;for(let n=0;n<t;n++)if(i[n]!==e[n])return!1;return!0},Vie=()=>{fu("threlte-cache",[])},Hie=()=>{const i=mu("threlte-cache");if(!i)throw new Error("No cache found. The cache can only be used in a child component to <Canvas>.");return{remember:(n,r)=>{for(const a of i)if(Q8(r,a.keys)){if(a.error)throw a.error;if(a.promise)return a.promise}const s={promise:n(),keys:r,value:void 0};return i.push(s),s.promise.catch(a=>{s.error=a}),s.promise},clear:n=>{const r=i.findIndex(s=>Q8(n,s.keys));r!==-1&&i.splice(r,1)}}},YO=i=>i.userData,Gie=()=>{const i=new _r(75,0,.1,1e3);return YO(i).threlteDefaultCamera=!0,i.position.z=5,i.lookAt(0,0,0),i},Qie=i=>{q5(i.size,e=>{YO(ox(i.camera)).threlteDefaultCamera&&i.camera.update(t=>{const n=t;return n.aspect=e.width/e.height,n.updateProjectionMatrix(),i.invalidate("Default camera: aspect ratio changed"),n})})},q5=(i,e)=>{const t=ou(i,s=>s);let n;const r=t.subscribe(async s=>{n&&n();const a=await e(s);a&&(n=a)});Ua(()=>{r(),n&&n()})},Zh=i=>{const e=Ms(i),t={set:n=>{t.current=n,e.set(n)},subscribe:e.subscribe,update:n=>{const r=n(t.current);t.current=r,e.set(r)},current:i};return t},qie=i=>{const e={debugFrameloop:i.debugFrameloop,frame:0,frameInvalidated:!0,invalidations:{},manualFrameHandlers:new Set,autoFrameHandlers:new Set,allFrameHandlers:new Set,allFrameHandlersNeedSortCheck:!1,renderHandlers:new Set,renderHandlersNeedSortCheck:!1,advance:!1,dispose:async(a=!1)=>{await N3(),!(!e.shouldDispose&&!a)&&(e.disposableObjects.forEach((o,l)=>{var c;(o===0||a)&&((c=l==null?void 0:l.dispose)==null||c.call(l),e.disposableObjects.delete(l))}),e.shouldDispose=!1)},collectDisposableObjects:(a,o)=>{const l=o??[];return a&&(a!=null&&a.dispose&&typeof a.dispose=="function"&&a.type!=="Scene"&&l.push(a),Object.entries(a).forEach(([c,u])=>{if(c==="parent"||c==="children"||typeof u!="object")return;const h=u;h!=null&&h.dispose&&e.collectDisposableObjects(h,l)})),l},addDisposableObjects:a=>{a.forEach(o=>{const l=e.disposableObjects.get(o);l?e.disposableObjects.set(o,l+1):e.disposableObjects.set(o,1)})},removeDisposableObjects:a=>{a.length!==0&&(a.forEach(o=>{const l=e.disposableObjects.get(o);l&&l>0&&e.disposableObjects.set(o,l-1)}),e.shouldDispose=!0)},disposableObjects:new Map,shouldDispose:!1},t={size:ou([i.userSize,i.parentSize],([a,o])=>a||o),clock:new W2,camera:Zh(Gie()),scene:new ov,renderer:void 0,invalidate:a=>{e.frameInvalidated=!0,e.debugFrameloop&&a&&(e.invalidations[a]=e.invalidations[a]?e.invalidations[a]+1:1)},advance:()=>{e.advance=!0},colorSpace:Zh(i.colorSpace),toneMapping:Zh(i.toneMapping),dpr:Zh(i.dpr),useLegacyLights:Zh(i.useLegacyLights),shadows:Zh(i.shadows),colorManagementEnabled:Zh(i.colorManagementEnabled),frameloop:Zh(i.frameloop)},n=Zh({});return fu("threlte",t),fu("threlte-internal-context",e),fu("threlte-user-context",n),{ctx:t,internalCtx:e,getCtx:()=>t,getInternalCtx:()=>e}},jie=(i,e,t)=>{if(e.allFrameHandlers.size!==0){if(e.allFrameHandlersNeedSortCheck){const n=Array.from(e.allFrameHandlers);if(n.some(s=>s.order)){const s=n.sort((a,o)=>(a.order??0)>(o.order??0)?1:-1);e.allFrameHandlers.clear(),s.forEach(a=>e.allFrameHandlers.add(a))}e.allFrameHandlersNeedSortCheck=!1}if(e.debugFrameloop){let n=0;e.autoFrameHandlers.forEach(r=>{r.debugFrameloopMessage?e.invalidations[r.debugFrameloopMessage]=r.debugFrameloopMessage in e.invalidations?e.invalidations[r.debugFrameloopMessage]+1:1:++n}),n>0&&(e.invalidations.useFrame=e.autoFrameHandlers.size)}e.allFrameHandlers.forEach(n=>n.fn(i,t))}},Wie=(i,e,t)=>{if(e.renderHandlers.size!==0){if(e.renderHandlersNeedSortCheck){const n=Array.from(e.renderHandlers);if(n.some(s=>s.order)){const s=n.sort((a,o)=>(a.order??0)>(o.order??0)?1:-1);e.renderHandlers.clear(),s.forEach(a=>e.renderHandlers.add(a))}e.renderHandlersNeedSortCheck=!1}e.renderHandlers.forEach(n=>n.fn(i,t))}},$ie=i=>{i.debugFrameloop&&(i.frame+=1,console.log(`frame: ${i.frame}${Object.keys(i.invalidations).length>0?", requested by ":""}`),Object.keys(i.invalidations).length>0&&console.table(i.invalidations),i.invalidations={})},Xie=(i,e)=>i.frameloop.current==="always"||i.frameloop.current==="demand"&&(e.frameInvalidated||e.autoFrameHandlers.size>0)||i.frameloop.current==="never"&&e.advance,Yie=(i,e)=>{var t;(t=i.renderer)==null||t.setAnimationLoop(()=>{e.dispose();const n=i.clock.getDelta();jie(i,e,n),Xie(i,e)&&(e.renderHandlers.size>0?Wie(i,e,n):i.renderer&&i.camera.current&&i.renderer.render(i.scene,i.camera.current),$ie(e),e.frameInvalidated=!1,e.advance=!1)})},Kie={srgb:sh,"srgb-linear":_1,"":_1},Jie=i=>i.outputColorSpace!==void 0,Zie=i=>{const e=Ms(void 0),t=(n,r)=>{i.renderer=new m5({powerPreference:"high-performance",canvas:n,antialias:!0,alpha:!0,...r}),e.set(i.renderer)};return q5([e,i.size,i.toneMapping,i.colorSpace,i.dpr,i.shadows,i.colorManagementEnabled,i.useLegacyLights],([n,r,s,a,o,l,c,u])=>{if(!n)return;if(n.setSize(r.width,r.height),n.setPixelRatio(o),Jie(n))n.outputColorSpace=a;else{const f=Kie[a];f?n.outputEncoding=f:console.warn("No encoding found for colorSpace",a)}n.toneMapping=s,n.shadowMap.enabled=!!l,l&&l!==!0?n.shadowMap.type=l:l===!0&&(n.shadowMap.type=d2);const h=Vl;h.enabled!==void 0?h.enabled=c:h.legacyMode!==void 0&&(h.legacyMode=!c);const d=n;u&&d.useLegacyLights!==void 0?d.useLegacyLights=u:d.physicallyCorrectLights!==void 0&&(d.physicallyCorrectLights=!u)}),Ua(()=>{var n;(n=i.renderer)==null||n.dispose()}),{createRenderer:t}};function q8(i){let e,t;return e=new Q5({props:{is:i[3].ctx.scene,$$slots:{default:[ere]},$$scope:{ctx:i}}}),{c(){ot(e.$$.fragment)},l(n){lt(e.$$.fragment,n)},m(n,r){ct(e,n,r),t=!0},p(n,r){const s={};r&131072&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(we(e.$$.fragment,n),t=!0)},o(n){Me(e.$$.fragment,n),t=!1},d(n){ut(e,n)}}}function ere(i){let e;const t=i[15].default,n=Yi(t,i,i[17],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&131072)&&Ki(n,t,r,r[17],e?Zi(t,r[17],s,null):Ji(r[17]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function tre(i){let e,t,n,r,s=i[1]&&q8(i);return{c(){e=ft("canvas"),s&&s.c(),this.h()},l(a){e=pt(a,"CANVAS",{class:!0});var o=zt(e);s&&s.l(o),o.forEach(ae),this.h()},h(){Je(e,"class","svelte-15bl8wt")},m(a,o){Fe(a,e,o),s&&s.m(e,null),i[16](e),t=!0,n||(r=ra(i[2].call(null,e)),n=!0)},p(a,[o]){a[1]?s?(s.p(a,o),o&2&&we(s,1)):(s=q8(a),s.c(),we(s,1),s.m(e,null)):s&&(Hs(),Me(s,1,1,()=>{s=null}),Gs())},i(a){t||(we(s),t=!0)},o(a){Me(s),t=!1},d(a){a&&ae(e),s&&s.d(),i[16](null),n=!1,r()}}}const j8=new Set;function nre(i,e,t){let{$$slots:n={},$$scope:r}=e,{dpr:s=$2?window.devicePixelRatio:1}=e,{toneMapping:a=$T}=e,{colorSpace:o="srgb"}=e,{frameloop:l="demand"}=e,{debugFrameloop:c=!1}=e,{shadows:u=d2}=e,{size:h=void 0}=e,{rendererParameters:d=void 0}=e,{colorManagementEnabled:f=!0}=e,{useLegacyLights:m=!0}=e,A,_=!1;const v=Ms(h),{parentSize:w,parentSizeAction:x}=Uie(),C=qie({colorSpace:o,toneMapping:a,dpr:s,userSize:v,parentSize:w,debugFrameloop:c,frameloop:l,shadows:u,colorManagementEnabled:f,useLegacyLights:m});Vie();const S=C.ctx;Qie(S),j8.add(S.invalidate),Ua(()=>{j8.delete(S.invalidate)});const{createRenderer:I}=Zie(S);Fc(()=>{A&&(I(A,d),Yie(C.ctx,C.internalCtx),t(1,_=!0))}),Ua(()=>{var k;C.internalCtx.dispose(!0),(k=C.ctx.renderer)==null||k.setAnimationLoop(null)});function P(k){Wa[k?"unshift":"push"](()=>{A=k,t(0,A)})}return i.$$set=k=>{"dpr"in k&&t(4,s=k.dpr),"toneMapping"in k&&t(5,a=k.toneMapping),"colorSpace"in k&&t(6,o=k.colorSpace),"frameloop"in k&&t(7,l=k.frameloop),"debugFrameloop"in k&&t(8,c=k.debugFrameloop),"shadows"in k&&t(9,u=k.shadows),"size"in k&&t(10,h=k.size),"rendererParameters"in k&&t(11,d=k.rendererParameters),"colorManagementEnabled"in k&&t(12,f=k.colorManagementEnabled),"useLegacyLights"in k&&t(13,m=k.useLegacyLights),"$$scope"in k&&t(17,r=k.$$scope)},i.$$.update=()=>{i.$$.dirty&1024&&v.set(h)},[A,_,x,C,s,a,o,l,c,u,h,d,f,m,S,n,P,r]}class ire extends Sn{constructor(e){super(),Mn(this,e,nre,tre,gn,{dpr:4,toneMapping:5,colorSpace:6,frameloop:7,debugFrameloop:8,shadows:9,size:10,rendererParameters:11,colorManagementEnabled:12,useLegacyLights:13,ctx:14})}get ctx(){return this.$$.ctx[14]}}const KO={},rre=i=>{Object.assign(KO,i)},sre=(i,e)=>{const t=KO[e]||jO[e];if(!t)throw new Error(`No Three.js module found for ${e}. Did you forget to extend the catalogue?`);return{...i,props:{...i.props,is:t}}},are=i=>new Proxy(class{},{construct(e,[t]){const n=t;return new Q5(sre(n,i))}}),Oo=new Proxy(class{},{construct(i,[e]){const t=e;return new Q5(t)},get(i,e){return are(e)}}),JO=(i,e)=>{if(!$2)return{start:()=>{},stop:()=>{},started:RT(!1)};const t=(e==null?void 0:e.invalidate)??!0,n=mu("threlte-internal-context"),r={fn:i,order:e==null?void 0:e.order,debugFrameloopMessage:e==null?void 0:e.debugFrameloopMessage,invalidate:t},s=Ms(!1),a=()=>{t?n.autoFrameHandlers.delete(r):n.manualFrameHandlers.delete(r),n.allFrameHandlers.delete(r),s.set(!1)},o=()=>{t?n.autoFrameHandlers.add(r):n.manualFrameHandlers.add(r),n.allFrameHandlers.add(r),n.allFrameHandlersNeedSortCheck=!0,s.set(!0)};return((e==null?void 0:e.autostart)??!0)&&o(),Ua(()=>{a()}),{start:o,stop:a,started:{subscribe:s.subscribe}}},ore=(i,e)=>{if(!$2)return;const t=mu("threlte-internal-context"),n={fn:i,order:e==null?void 0:e.order};t.renderHandlers.add(n),t.renderHandlersNeedSortCheck=!0,Ua(()=>{t.renderHandlers.delete(n)})},o4=i=>{const e=Ms(void 0),t=Ms(void 0);return i.then(n=>{e.set(n)}).catch(n=>{console.error("Error in asyncWritable:",n.message),t.set(n)}),Object.assign(Object.assign(i,e),{error:t,promise:i})},ZO=(i,e={})=>{var o;const{remember:t,clear:n}=Hie(),r=new i;return(o=e.extend)==null||o.call(e,r),{load:(l,c)=>{if(Array.isArray(l)){const u=l.map(d=>t(async()=>{var m;const f=await r.loadAsync(d,c==null?void 0:c.onProgress);return((m=c==null?void 0:c.transform)==null?void 0:m.call(c,f))??f},[i,d]));return o4(Promise.all(u))}else if(typeof l=="string"){const u=t(async()=>{var f;const d=await r.loadAsync(l,c==null?void 0:c.onProgress);return((f=c==null?void 0:c.transform)==null?void 0:f.call(c,d))??d},[i,l]);return o4(u)}else{const u=Object.values(l).map(d=>t(async()=>{var m;const f=await r.loadAsync(d,c==null?void 0:c.onProgress);return((m=c==null?void 0:c.transform)==null?void 0:m.call(c,f))??f},[i,d]));return o4(Promise.all(u).then(d=>Object.fromEntries(Object.entries(l).map(([f],m)=>[f,d[m]]))))}},clear:l=>{Array.isArray(l)?l.forEach(c=>{n([i,c])}):typeof l=="string"?n([i,l]):Object.entries(l).forEach(([c,u])=>{n([i,c,u])})},loader:r}},eN=()=>{const i=J1(),e=Ms(void 0);return q5(e,t=>{t&&Object.entries(i.$$.callbacks).forEach(n=>{const[r,s]=n;r in t.$$.callbacks&&Array.isArray(t.$$.callbacks[r])?t.$$.callbacks[r].push(...s):t.$$.callbacks[r]=s})}),e};var lre=function(){var i="b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:P8Yqdbk;3sezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfgocl4cifcd4hxdndndndnaoc9WGgmTmbcbhPcehsawcjdfhzalhHinaraH9Rax6midnaraHaxfgl9RcK6mbczhoinawcj;cbfaogifgoc9WfhOdndndndndnaHaic9WfgAco4fRbbaAci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOalRblalRbbgAco4gCaCciSgCE86bbaocGfalclfaCfgORbbaAcl4ciGgCaCciSgCE86bbaocVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbaoc7faOaCfgORbbaAciGgAaAciSgAE86bbaoctfaOaAfgARbbalRbegOco4gCaCciSgCE86bbaoc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc93faAaCfgARbbaOciGgOaOciSgOE86bbaoc94faAaOfgARbbalRbdgOco4gCaCciSgCE86bbaoc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc97faAaCfgARbbaOciGgOaOciSgOE86bbaoc98faAaOfgORbbalRbiglco4gAaAciSgAE86bbaoc99faOaAfgORbbalcl4ciGgAaAciSgAE86bbaoc9:faOaAfgORbbalcd4ciGgAaAciSgAE86bbaocufaOaAfgoRbbalciGglalciSglE86bbaoalfhlxdkaOalRbwalRbbgAcl4gCaCcsSgCE86bbaocGfalcwfaCfgORbbaAcsGgAaAcsSgAE86bbaocVfaOaAfgORbbalRbegAcl4gCaCcsSgCE86bbaoc7faOaCfgORbbaAcsGgAaAcsSgAE86bbaoctfaOaAfgORbbalRbdgAcl4gCaCcsSgCE86bbaoc91faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc4faOaAfgORbbalRbigAcl4gCaCcsSgCE86bbaoc93faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc94faOaAfgORbbalRblgAcl4gCaCcsSgCE86bbaoc95faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc96faOaAfgORbbalRbvgAcl4gCaCcsSgCE86bbaoc97faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc98faOaAfgORbbalRbogAcl4gCaCcsSgCE86bbaoc99faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc9:faOaAfgORbbalRbrglcl4gAaAcsSgAE86bbaocufaOaAfgoRbbalcsGglalcsSglE86bbaoalfhlxekaOal8Pbb83bbaOcwfalcwf8Pbb83bbalczfhlkdnaiam9pmbaiczfhoaral9RcL0mekkaiam6mialTmidnakTmbawaPfRbbhOcbhoazhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkkazcefhzaPcefgPad6hsalhHaPad9hmexvkkcbhlasceGmdxikalaxad2fhCdnakTmbcbhHcehsawcjdfhminaral9Rax6mialTmdalaxfhlawaHfRbbhOcbhoamhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkamcefhmaHcefgHad6hsaHad9hmbkaChlxikcbhocehsinaral9Rax6mdalTmealaxfhlaocefgoad6hsadao9hmbkaChlxdkcbhlasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqalmbkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;yzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2geTmbinababydbgdcwtcw91:Yadce91cjjj;8ifcjjj98G::NUdbabclfhbaecufgembkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaiczfhiaeczfheadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb",e="b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;t9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;h8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgohAaoclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;uzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:EPliuo97eue978Jjjjjbca9Rhidndnadcl9hmbdnaec98GglTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaiaeciGgvcdtgdVcbczad9R;8kbaiabalcdtfglad;8qbbdnavTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkalaiad;8qbbskdnaec98GgxTmbcbhvabhdinadczfglalpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgvax6mbkkaxae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabaxcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbhdabheinaeaepbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbaeczfheadclfgdav6mbkkdnaval9pmbaialciGgdcdtgeVcbc;abae9R;8kbaiabavcdtfgvae;8qbbdnadTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiae;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var r=WebAssembly.validate(t)?e:i,s,a=WebAssembly.instantiate(o(r),{}).then(function(v){s=v.instance,s.exports.__wasm_call_ctors()});function o(v){for(var w=new Uint8Array(v.length),x=0;x<v.length;++x){var C=v.charCodeAt(x);w[x]=C>96?C-97:C>64?C-39:C+4}for(var S=0,x=0;x<v.length;++x)w[S++]=w[x]<60?n[w[x]]:(w[x]-60)*64+w[++x];return w.buffer.slice(0,S)}function l(v,w,x,C,S,I){var P=s.exports.sbrk,k=x+3&-4,M=P(k*C),R=P(S.length),N=new Uint8Array(s.exports.memory.buffer);N.set(S,R);var U=v(M,x,C,R,S.length);if(U==0&&I&&I(M,k,C),w.set(N.subarray(M,M+x*C)),P(M-P(0)),U!=0)throw new Error("Malformed buffer data: "+U)}var c={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},h=[],d=0;function f(v){var w={object:new Worker(v),pending:0,requests:{}};return w.object.onmessage=function(x){var C=x.data;w.pending-=C.count,w.requests[C.id][C.action](C.value),delete w.requests[C.id]},w}function m(v){for(var w="var instance; var ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(o(r))+"]), {}).then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });self.onmessage = workerProcess;"+l.toString()+_.toString(),x=new Blob([w],{type:"text/javascript"}),C=URL.createObjectURL(x),S=0;S<v;++S)h[S]=f(C);URL.revokeObjectURL(C)}function A(v,w,x,C,S){for(var I=h[0],P=1;P<h.length;++P)h[P].pending<I.pending&&(I=h[P]);return new Promise(function(k,M){var R=new Uint8Array(x),N=d++;I.pending+=v,I.requests[N]={resolve:k,reject:M},I.object.postMessage({id:N,count:v,size:w,source:R,mode:C,filter:S},[R.buffer])})}function _(v){a.then(function(){var w=v.data;try{var x=new Uint8Array(w.count*w.size);l(s.exports[w.mode],x,w.count,w.size,w.source,s.exports[w.filter]),self.postMessage({id:w.id,count:w.count,action:"resolve",value:x},[x.buffer])}catch(C){self.postMessage({id:w.id,count:w.count,action:"reject",value:C})}})}return{ready:a,supported:!0,useWorkers:function(v){m(v)},decodeVertexBuffer:function(v,w,x,C,S){l(s.exports.meshopt_decodeVertexBuffer,v,w,x,C,s.exports[c[S]])},decodeIndexBuffer:function(v,w,x,C){l(s.exports.meshopt_decodeIndexBuffer,v,w,x,C)},decodeIndexSequence:function(v,w,x,C){l(s.exports.meshopt_decodeIndexSequence,v,w,x,C)},decodeGltfBuffer:function(v,w,x,C,S,I){l(s.exports[u[S]],v,w,x,C,s.exports[c[I]])},decodeGltfBufferAsync:function(v,w,x,C,S){return h.length>0?A(v,w,x,u[C],c[S]):a.then(function(){var I=new Uint8Array(v*w);return l(s.exports[u[C]],I,v,w,x,s.exports[c[S]]),I})}}}();const l4=new WeakMap;class cre extends Xa{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const s=new ho(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{this.parse(a,t,r)},n,r)}parse(e,t,n){this.decodeDracoFile(e,t,null,null,En).catch(n)}decodeDracoFile(e,t,n,r,s=Dc){const a={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:s};return this.decodeGeometry(e,a).then(t)}decodeGeometry(e,t){const n=JSON.stringify(t);if(l4.has(e)){const l=l4.get(e);if(l.key===n)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(s,a).then(l=>(r=l,new Promise((c,u)=>{r._callbacks[s]={resolve:c,reject:u},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return o.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),l4.set(e,{key:n,promise:o}),o}_createGeometry(e){const t=new Zn;e.index&&t.setIndex(new Ln(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],s=r.name,a=r.array,o=r.itemSize,l=new Ln(a,o);s==="color"&&(this._assignVertexColorSpace(l,r.vertexColorSpace),l.normalized=!(a instanceof Float32Array)),t.setAttribute(s,l)}return t}_assignVertexColorSpace(e,t){if(t!==En)return;const n=new Ut;for(let r=0,s=e.count;r<s;r++)n.fromBufferAttribute(e,r).convertSRGBToLinear(),e.setXYZ(r,n.r,n.g,n.b)}_loadLibrary(e,t){const n=new ho(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((r,s)=>{n.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const r=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=ure.toString(),a=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const a=s.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function ure(){let i,e;onmessage=function(a){const o=a.data;switch(o.type){case"init":i=o.decoderConfig,e=new Promise(function(u){i.onModuleLoaded=function(h){u({draco:h})},DracoDecoderModule(i)});break;case"decode":const l=o.buffer,c=o.taskConfig;e.then(u=>{const h=u.draco,d=new h.Decoder;try{const f=t(h,d,new Int8Array(l),c),m=f.attributes.map(A=>A.array.buffer);f.index&&m.push(f.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:f},m)}catch(f){console.error(f),self.postMessage({type:"error",id:o.id,error:f.message})}finally{h.destroy(d)}});break}};function t(a,o,l,c){const u=c.attributeIDs,h=c.attributeTypes;let d,f;const m=o.GetEncodedGeometryType(l);if(m===a.TRIANGULAR_MESH)d=new a.Mesh,f=o.DecodeArrayToMesh(l,l.byteLength,d);else if(m===a.POINT_CLOUD)d=new a.PointCloud,f=o.DecodeArrayToPointCloud(l,l.byteLength,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());const A={index:null,attributes:[]};for(const _ in u){const v=self[h[_]];let w,x;if(c.useUniqueIDs)x=u[_],w=o.GetAttributeByUniqueId(d,x);else{if(x=o.GetAttributeId(d,a[u[_]]),x===-1)continue;w=o.GetAttribute(d,x)}const C=r(a,o,d,_,v,w);_==="color"&&(C.vertexColorSpace=c.vertexColorSpace),A.attributes.push(C)}return m===a.TRIANGULAR_MESH&&(A.index=n(a,o,d)),a.destroy(d),A}function n(a,o,l){const u=l.num_faces()*3,h=u*4,d=a._malloc(h);o.GetTrianglesUInt32Array(l,h,d);const f=new Uint32Array(a.HEAPF32.buffer,d,u).slice();return a._free(d),{array:f,itemSize:1}}function r(a,o,l,c,u,h){const d=h.num_components(),m=l.num_points()*d,A=m*u.BYTES_PER_ELEMENT,_=s(a,u),v=a._malloc(A);o.GetAttributeDataArrayForAllPoints(l,h,_,A,v);const w=new u(a.HEAPF32.buffer,v,m).slice();return a._free(v),{name:c,array:w,itemSize:d}}function s(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}function W8(i,e){if(e===PL)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===Ax||e===s5){let t=i.getIndex();if(t===null){const a=[],o=i.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);i.setIndex(a),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(e===Ax)for(let a=1;a<=n;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<n;a++)a%2===0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}class hre extends Xa{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new gre(t)}),this.register(function(t){return new Cre(t)}),this.register(function(t){return new Ere(t)}),this.register(function(t){return new Sre(t)}),this.register(function(t){return new Are(t)}),this.register(function(t){return new _re(t)}),this.register(function(t){return new bre(t)}),this.register(function(t){return new yre(t)}),this.register(function(t){return new mre(t)}),this.register(function(t){return new wre(t)}),this.register(function(t){return new vre(t)}),this.register(function(t){return new xre(t)}),this.register(function(t){return new fre(t)}),this.register(function(t){return new Mre(t)}),this.register(function(t){return new Tre(t)})}load(e,t,n,r){const s=this;let a;this.resourcePath!==""?a=this.resourcePath:this.path!==""?a=this.path:a=Lg.extractUrlBase(e),this.manager.itemStart(e);const o=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new ho(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,a,function(u){t(u),s.manager.itemEnd(e)},o)}catch(u){o(u)}},n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const a={},o={},l=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===tN){try{a[Fi.KHR_BINARY_GLTF]=new Ire(e)}catch(h){r&&r(h);return}s=JSON.parse(a[Fi.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new Hre(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](c);o[h.name]=h,a[h.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const h=s.extensionsUsed[u],d=s.extensionsRequired||[];switch(h){case Fi.KHR_MATERIALS_UNLIT:a[h]=new pre;break;case Fi.KHR_DRACO_MESH_COMPRESSION:a[h]=new Pre(s,this.dracoLoader);break;case Fi.KHR_TEXTURE_TRANSFORM:a[h]=new kre;break;case Fi.KHR_MESH_QUANTIZATION:a[h]=new Bre;break;default:d.indexOf(h)>=0&&o[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}c.setExtensions(a),c.setPlugins(o),c.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function dre(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const Fi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class fre{constructor(e){this.parser=e,this.name=Fi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new Ut(16777215);l.color!==void 0&&u.fromArray(l.color);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new F5(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new N5(u),c.distance=h;break;case"spot":c=new O5(u),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,yf(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return n._getNodeRef(t.cache,o,l)})}}class pre{constructor(){this.name=Fi.KHR_MATERIALS_UNLIT}getMaterialType(){return Lo}extendParams(e,t,n){const r=[];e.color=new Ut(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}s.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",s.baseColorTexture,En))}return Promise.all(r)}}class mre{constructor(e){this.parser=e,this.name=Fi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class gre{constructor(e){this.parser=e,this.name=Fi.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:_h}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new _t(o,o)}return Promise.all(s)}}class vre{constructor(e){this.parser=e,this.name=Fi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:_h}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class Are{constructor(e){this.parser=e,this.name=Fi.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:_h}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ut(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];return a.sheenColorFactor!==void 0&&t.sheenColor.fromArray(a.sheenColorFactor),a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,En)),a.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class _re{constructor(e){this.parser=e,this.name=Fi.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:_h}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class bre{constructor(e){this.parser=e,this.name=Fi.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:_h}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new Ut(o[0],o[1],o[2]),Promise.all(s)}}class yre{constructor(e){this.parser=e,this.name=Fi.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:_h}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class wre{constructor(e){this.parser=e,this.name=Fi.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:_h}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new Ut(o[0],o[1],o[2]),a.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,En)),Promise.all(s)}}class xre{constructor(e){this.parser=e,this.name=Fi.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:_h}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(s)}}class Cre{constructor(e){this.parser=e,this.name=Fi.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class Ere{constructor(e){this.parser=e,this.name=Fi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let l=n.textureLoader;if(o.uri){const c=n.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,a.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Sre{constructor(e){this.parser=e,this.name=Fi.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let l=n.textureLoader;if(o.uri){const c=n.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,a.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Mre{constructor(e){this.name=Fi.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(o){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,h=r.byteStride,d=new Uint8Array(o,l,c);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(u,h,d,r.mode,r.filter).then(function(f){return f.buffer}):a.ready.then(function(){const f=new ArrayBuffer(u*h);return a.decodeGltfBuffer(new Uint8Array(f),u,h,d,r.mode,r.filter),f})})}else return null}}class Tre{constructor(e){this.name=Fi.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const c of r.primitives)if(c.mode!==bc.TRIANGLES&&c.mode!==bc.TRIANGLE_STRIP&&c.mode!==bc.TRIANGLE_FAN&&c.mode!==void 0)return null;const a=n.extensions[this.name].attributes,o=[],l={};for(const c in a)o.push(this.parser.getDependency("accessor",a[c]).then(u=>(l[c]=u,l[c])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(c=>{const u=c.pop(),h=u.isGroup?u.children:[u],d=c[0].count,f=[];for(const m of h){const A=new jn,_=new le,v=new la,w=new le(1,1,1),x=new _5(m.geometry,m.material,d);for(let C=0;C<d;C++)l.TRANSLATION&&_.fromBufferAttribute(l.TRANSLATION,C),l.ROTATION&&v.fromBufferAttribute(l.ROTATION,C),l.SCALE&&w.fromBufferAttribute(l.SCALE,C),x.setMatrixAt(C,A.compose(_,v,w));for(const C in l)C!=="TRANSLATION"&&C!=="ROTATION"&&C!=="SCALE"&&m.geometry.setAttribute(C,l[C]);Bi.prototype.copy.call(x,m),this.parser.assignFinalMaterial(x),f.push(x)}return u.isGroup?(u.clear(),u.add(...f),u):f[0]}))}}const tN="glTF",mA=12,$8={JSON:1313821514,BIN:5130562};class Ire{constructor(e){this.name=Fi.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,mA),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==tN)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-mA,s=new DataView(e,mA);let a=0;for(;a<r;){const o=s.getUint32(a,!0);a+=4;const l=s.getUint32(a,!0);if(a+=4,l===$8.JSON){const c=new Uint8Array(e,mA+a,o);this.content=n.decode(c)}else if(l===$8.BIN){const c=mA+a;this.body=e.slice(c,c+o)}a+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Pre{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Fi.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},l={},c={};for(const u in a){const h=xM[u]||u.toLowerCase();o[h]=a[u]}for(const u in e.attributes){const h=xM[u]||u.toLowerCase();if(a[u]!==void 0){const d=n.accessors[e.attributes[u]],f=xg[d.componentType];c[h]=f.name,l[h]=d.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(h){r.decodeDracoFile(u,function(d){for(const f in d.attributes){const m=d.attributes[f],A=l[f];A!==void 0&&(m.normalized=A)}h(d)},o,c)})})}}class kre{constructor(){this.name=Fi.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Bre{constructor(){this.name=Fi.KHR_MESH_QUANTIZATION}}class nN extends cv{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let a=0;a!==r;a++)t[a]=n[s+a];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=o*2,c=o*3,u=r-t,h=(n-t)/u,d=h*h,f=d*h,m=e*c,A=m-c,_=-2*f+3*d,v=f-d,w=1-_,x=v-d+h;for(let C=0;C!==o;C++){const S=a[A+C+o],I=a[A+C+l]*u,P=a[m+C+o],k=a[m+C]*u;s[C]=w*S+x*I+_*P+v*k}return s}}const Rre=new la;class Dre extends nN{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return Rre.fromArray(s).normalize().toArray(s),s}}const bc={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},xg={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},X8={9728:ki,9729:Sr,9984:v1,9985:m2,9986:yg,9987:_u},Y8={33071:oa,33648:T0,10497:bd},c4={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},xM={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},af={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Lre={CUBICSPLINE:void 0,LINEAR:P0,STEP:Ig},u4={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Ore(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new f_({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:dh})),i.DefaultMaterial}function Hp(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function yf(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Nre(i,e,t){let n=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const h=e[c];if(h.POSITION!==void 0&&(n=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const a=[],o=[],l=[];for(let c=0,u=e.length;c<u;c++){const h=e[c];if(n){const d=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):i.attributes.position;a.push(d)}if(r){const d=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):i.attributes.normal;o.push(d)}if(s){const d=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):i.attributes.color;l.push(d)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(c){const u=c[0],h=c[1],d=c[2];return n&&(i.morphAttributes.position=u),r&&(i.morphAttributes.normal=h),s&&(i.morphAttributes.color=d),i.morphTargetsRelative=!0,i})}function Fre(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function zre(i){let e;const t=i.extensions&&i.extensions[Fi.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+h4(t.attributes):e=i.indices+":"+h4(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,r=i.targets.length;n<r;n++)e+=":"+h4(i.targets[n]);return e}function h4(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function CM(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Ure(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Vre=new jn;class Hre{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new dre,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,s=-1;typeof navigator<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||r&&s<98?this.textureLoader=new D5(this.options.manager):this.textureLoader=new UO(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ho(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(a){const o={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:n,userData:{}};Hp(s,o,r),yf(o,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const a=t[r].joints;for(let o=0,l=a.length;o<l;o++)e[a[o]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const a=e[r];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(n[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(a,o)=>{const l=this.associations.get(a);l!=null&&this.associations.set(o,l);for(const[c,u]of a.children.entries())s(u,o.children[c])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,a){return n.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Fi.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,a){n.load(Lg.resolveURL(t.uri,r.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const a=c4[r.type],o=xg[r.componentType],l=r.normalized===!0,c=new o(r.count*a);return Promise.resolve(new Ln(c,a,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],l=c4[r.type],c=xg[r.componentType],u=c.BYTES_PER_ELEMENT,h=u*l,d=r.byteOffset||0,f=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,m=r.normalized===!0;let A,_;if(f&&f!==h){const v=Math.floor(d/f),w="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+v+":"+r.count;let x=t.cache.get(w);x||(A=new c(o,v*f,r.count*f/u),x=new o_(A,f/u),t.cache.add(w,x)),_=new Hf(x,l,d%f/u,m)}else o===null?A=new c(r.count*l):A=new c(o,d,r.count*l),_=new Ln(A,l,m);if(r.sparse!==void 0){const v=c4.SCALAR,w=xg[r.sparse.indices.componentType],x=r.sparse.indices.byteOffset||0,C=r.sparse.values.byteOffset||0,S=new w(a[1],x,r.sparse.count*v),I=new c(a[2],C,r.sparse.count*l);o!==null&&(_=new Ln(_.array.slice(),_.itemSize,_.normalized));for(let P=0,k=S.length;P<k;P++){const M=S[P];if(_.setX(M,I[P*l]),l>=2&&_.setY(M,I[P*l+1]),l>=3&&_.setZ(M,I[P*l+2]),l>=4&&_.setW(M,I[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,a=t.images[s];let o=this.textureLoader;if(a.uri){const l=n.manager.getHandler(a.uri);l!==null&&(o=l)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,n){const r=this,s=this.json,a=s.textures[e],o=s.images[t],l=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,n).then(function(u){u.flipY=!1,u.name=a.name||o.name||"",u.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(u.name=o.uri);const d=(s.samplers||{})[a.sampler]||{};return u.magFilter=X8[d.magFilter]||Sr,u.minFilter=X8[d.minFilter]||_u,u.wrapS=Y8[d.wrapS]||bd,u.wrapT=Y8[d.wrapT]||bd,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const n=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const a=r.images[e],o=self.URL||self.webkitURL;let l=a.uri||"",c=!1;if(a.bufferView!==void 0)l=n.getDependency("bufferView",a.bufferView).then(function(h){c=!0;const d=new Blob([h],{type:a.mimeType});return l=o.createObjectURL(d),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(h){return new Promise(function(d,f){let m=d;t.isImageBitmapLoader===!0&&(m=function(A){const _=new zr(A);_.needsUpdate=!0,d(_)}),t.load(Lg.resolveURL(h,s.path),m,void 0,f)})}).then(function(h){return c===!0&&o.revokeObjectURL(l),h.userData.mimeType=a.mimeType||Ure(a.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=u,u}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(a=a.clone(),a.channel=n.texCoord),s.extensions[Fi.KHR_TEXTURE_TRANSFORM]){const o=n.extensions!==void 0?n.extensions[Fi.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=s.associations.get(a);a=s.extensions[Fi.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),s.associations.set(a,l)}}return r!==void 0&&(a.colorSpace=r),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+n.uuid;let l=this.cache.get(o);l||(l=new I2,ya.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(o,l)),n=l}else if(e.isLine){const o="LineBasicMaterial:"+n.uuid;let l=this.cache.get(o);l||(l=new mo,ya.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(o,l)),n=l}if(r||s||a){let o="ClonedMaterial:"+n.uuid+":";r&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=n.clone(),s&&(l.vertexColors=!0),a&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(n))),n=l}e.material=n}getMaterialType(){return f_}loadMaterial(e){const t=this,n=this.json,r=this.extensions,s=n.materials[e];let a;const o={},l=s.extensions||{},c=[];if(l[Fi.KHR_MATERIALS_UNLIT]){const h=r[Fi.KHR_MATERIALS_UNLIT];a=h.getMaterialType(),c.push(h.extendParams(o,s,t))}else{const h=s.pbrMetallicRoughness||{};if(o.color=new Ut(1,1,1),o.opacity=1,Array.isArray(h.baseColorFactor)){const d=h.baseColorFactor;o.color.fromArray(d),o.opacity=d[3]}h.baseColorTexture!==void 0&&c.push(t.assignTexture(o,"map",h.baseColorTexture,En)),o.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,o.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(o,"metalnessMap",h.metallicRoughnessTexture)),c.push(t.assignTexture(o,"roughnessMap",h.metallicRoughnessTexture))),a=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=fs);const u=s.alphaMode||u4.OPAQUE;if(u===u4.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,u===u4.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==Lo&&(c.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new _t(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;o.normalScale.set(h,h)}return s.occlusionTexture!==void 0&&a!==Lo&&(c.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==Lo&&(o.emissive=new Ut().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&a!==Lo&&c.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,En)),Promise.all(c).then(function(){const h=new a(o);return s.name&&(h.name=s.name),yf(h,s),t.associations.set(h,{materials:e}),s.extensions&&Hp(r,h,s),h})}createUniqueName(e){const t=Gi.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(o){return n[Fi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return K8(l,o,t)})}const a=[];for(let o=0,l=e.length;o<l;o++){const c=e[o],u=zre(c),h=r[u];if(h)a.push(h.promise);else{let d;c.extensions&&c.extensions[Fi.KHR_DRACO_MESH_COMPRESSION]?d=s(c):d=K8(new Zn,c,t),r[u]={primitive:c,promise:d},a.push(d)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,r=this.extensions,s=n.meshes[e],a=s.primitives,o=[];for(let l=0,c=a.length;l<c;l++){const u=a[l].material===void 0?Ore(this.cache):this.getDependency("material",a[l].material);o.push(u)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],h=[];for(let f=0,m=u.length;f<m;f++){const A=u[f],_=a[f];let v;const w=c[f];if(_.mode===bc.TRIANGLES||_.mode===bc.TRIANGLE_STRIP||_.mode===bc.TRIANGLE_FAN||_.mode===void 0)v=s.isSkinnedMesh===!0?new A5(A,w):new cr(A,w),v.isSkinnedMesh===!0&&v.normalizeSkinWeights(),_.mode===bc.TRIANGLE_STRIP?v.geometry=W8(v.geometry,s5):_.mode===bc.TRIANGLE_FAN&&(v.geometry=W8(v.geometry,Ax));else if(_.mode===bc.LINES)v=new wu(A,w);else if(_.mode===bc.LINE_STRIP)v=new yd(A,w);else if(_.mode===bc.LINE_LOOP)v=new b5(A,w);else if(_.mode===bc.POINTS)v=new y5(A,w);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);Object.keys(v.geometry.morphAttributes).length>0&&Fre(v,s),v.name=t.createUniqueName(s.name||"mesh_"+e),yf(v,s),_.extensions&&Hp(r,v,_),t.assignFinalMaterial(v),h.push(v)}for(let f=0,m=h.length;f<m;f++)t.associations.set(h[f],{meshes:e,primitives:f});if(h.length===1)return s.extensions&&Hp(r,h[0],s),h[0];const d=new Yu;s.extensions&&Hp(r,d,s),t.associations.set(d,{meshes:e});for(let f=0,m=h.length;f<m;f++)d.add(h[f]);return d})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new _r(l5.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new Ah(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),yf(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const s=r.pop(),a=r,o=[],l=[];for(let c=0,u=a.length;c<u;c++){const h=a[c];if(h){o.push(h);const d=new jn;s!==null&&d.fromArray(s.array,c*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new l_(o,l)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,a=[],o=[],l=[],c=[],u=[];for(let h=0,d=r.channels.length;h<d;h++){const f=r.channels[h],m=r.samplers[f.sampler],A=f.target,_=A.node,v=r.parameters!==void 0?r.parameters[m.input]:m.input,w=r.parameters!==void 0?r.parameters[m.output]:m.output;A.node!==void 0&&(a.push(this.getDependency("node",_)),o.push(this.getDependency("accessor",v)),l.push(this.getDependency("accessor",w)),c.push(m),u.push(A))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(h){const d=h[0],f=h[1],m=h[2],A=h[3],_=h[4],v=[];for(let w=0,x=d.length;w<x;w++){const C=d[w],S=f[w],I=m[w],P=A[w],k=_[w];if(C===void 0)continue;C.updateMatrix&&(C.updateMatrix(),C.matrixAutoUpdate=!0);const M=n._createAnimationTracks(C,S,I,P,k);if(M)for(let R=0;R<M.length;R++)v.push(M[R])}return new Dg(s,void 0,v)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(s){const a=n._getNodeRef(n.meshCache,r.mesh,s);return r.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let l=0,c=r.weights.length;l<c;l++)o.morphTargetInfluences[l]=r.weights[l]}),a})}loadNode(e){const t=this.json,n=this,r=t.nodes[e],s=n._loadNodeShallow(e),a=[],o=r.children||[];for(let c=0,u=o.length;c<u;c++)a.push(n.getDependency("node",o[c]));const l=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(a),l]).then(function(c){const u=c[0],h=c[1],d=c[2];d!==null&&u.traverse(function(f){f.isSkinnedMesh&&f.bind(d,Vre)});for(let f=0,m=h.length;f<m;f++)u.add(h[f]);return u})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],a=s.name?r.createUniqueName(s.name):"",o=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&o.push(l),s.camera!==void 0&&o.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){o.push(c)}),this.nodeCache[e]=Promise.all(o).then(function(c){let u;if(s.isBone===!0?u=new T2:c.length>1?u=new Yu:c.length===1?u=c[0]:u=new Bi,u!==c[0])for(let h=0,d=c.length;h<d;h++)u.add(c[h]);if(s.name&&(u.userData.name=s.name,u.name=a),yf(u,s),s.extensions&&Hp(n,u,s),s.matrix!==void 0){const h=new jn;h.fromArray(s.matrix),u.applyMatrix4(h)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,s=new Yu;n.name&&(s.name=r.createUniqueName(n.name)),yf(s,n),n.extensions&&Hp(t,s,n);const a=n.nodes||[],o=[];for(let l=0,c=a.length;l<c;l++)o.push(r.getDependency("node",a[l]));return Promise.all(o).then(function(l){for(let u=0,h=l.length;u<h;u++)s.add(l[u]);const c=u=>{const h=new Map;for(const[d,f]of r.associations)(d instanceof ya||d instanceof zr)&&h.set(d,f);return u.traverse(d=>{const f=r.associations.get(d);f!=null&&h.set(d,f)}),h};return r.associations=c(s),s})}_createAnimationTracks(e,t,n,r,s){const a=[],o=e.name?e.name:e.uuid,l=[];af[s.path]===af.weights?e.traverse(function(d){d.morphTargetInfluences&&l.push(d.name?d.name:d.uuid)}):l.push(o);let c;switch(af[s.path]){case af.weights:c=B0;break;case af.rotation:c=Gf;break;case af.position:case af.scale:default:switch(n.itemSize){case 1:c=B0;break;case 2:case 3:c=Rg;break}break}const u=r.interpolation!==void 0?Lre[r.interpolation]:P0,h=this._getArrayFromAccessor(n);for(let d=0,f=l.length;d<f;d++){const m=new c(l[d]+"."+af[s.path],t.array,h,u);u==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(m),a.push(m)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=CM(t.constructor),r=new Float32Array(t.length);for(let s=0,a=t.length;s<a;s++)r[s]=t[s]*n;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const r=this instanceof Gf?Dre:nN;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Gre(i,e,t){const n=e.attributes,r=new yu;if(n.POSITION!==void 0){const o=t.json.accessors[n.POSITION],l=o.min,c=o.max;if(l!==void 0&&c!==void 0){if(r.set(new le(l[0],l[1],l[2]),new le(c[0],c[1],c[2])),o.normalized){const u=CM(xg[o.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new le,l=new le;for(let c=0,u=s.length;c<u;c++){const h=s[c];if(h.POSITION!==void 0){const d=t.json.accessors[h.POSITION],f=d.min,m=d.max;if(f!==void 0&&m!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(m[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(m[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(m[2]))),d.normalized){const A=CM(xg[d.componentType]);l.multiplyScalar(A)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(o)}i.boundingBox=r;const a=new zc;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=a}function K8(i,e,t){const n=e.attributes,r=[];function s(a,o){return t.getDependency("accessor",a).then(function(l){i.setAttribute(o,l)})}for(const a in n){const o=xM[a]||a.toLowerCase();o in i.attributes||r.push(s(n[a],o))}if(e.indices!==void 0&&!i.index){const a=t.getDependency("accessor",e.indices).then(function(o){i.setIndex(o)});r.push(a)}return yf(i,e),Gre(i,e,t),Promise.all(r).then(function(){return e.targets!==void 0?Nre(i,e.targets,t):i})}class Qre{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const n=this.workersResolve[e];if(n&&n(t),this.queue.length){const{resolve:r,msg:s,transfer:a}=this.queue.shift();this.workersResolve[e]=r,this.workers[e].postMessage(s,a)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(n=>{const r=this._getIdleWorker();r!==-1?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=n,this.workers[r].postMessage(e,t)):this.queue.push({resolve:n,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const qre=0,jre=2,Wre=1,$re=2,Xre=0,iN=9,j5=15,rN=16,W5=22,sN=37,$5=43,aN=76,oN=83,lN=97,cN=100,uN=103,hN=109;class Yre{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class gA{constructor(e,t,n,r){this._dataView=new DataView(e.buffer,e.byteOffset+t,n),this._littleEndian=r,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_skip(e){return this._offset+=e,this}_scan(e,t=0){const n=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==t&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,r)}}const Po=[171,75,84,88,32,50,48,187,13,10,26,10];function J8(i){return typeof TextDecoder<"u"?new TextDecoder().decode(i):Buffer.from(i).toString("utf8")}function Kre(i){const e=new Uint8Array(i.buffer,i.byteOffset,Po.length);if(e[0]!==Po[0]||e[1]!==Po[1]||e[2]!==Po[2]||e[3]!==Po[3]||e[4]!==Po[4]||e[5]!==Po[5]||e[6]!==Po[6]||e[7]!==Po[7]||e[8]!==Po[8]||e[9]!==Po[9]||e[10]!==Po[10]||e[11]!==Po[11])throw new Error("Missing KTX 2.0 identifier.");const t=new Yre,n=17*Uint32Array.BYTES_PER_ELEMENT,r=new gA(i,Po.length,n,!0);t.vkFormat=r._nextUint32(),t.typeSize=r._nextUint32(),t.pixelWidth=r._nextUint32(),t.pixelHeight=r._nextUint32(),t.pixelDepth=r._nextUint32(),t.layerCount=r._nextUint32(),t.faceCount=r._nextUint32();const s=r._nextUint32();t.supercompressionScheme=r._nextUint32();const a=r._nextUint32(),o=r._nextUint32(),l=r._nextUint32(),c=r._nextUint32(),u=r._nextUint64(),h=r._nextUint64(),d=new gA(i,Po.length+n,3*s*8,!0);for(let J=0;J<s;J++)t.levels.push({levelData:new Uint8Array(i.buffer,i.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const f=new gA(i,a,o,!0),m={vendorId:f._skip(4)._nextUint16(),descriptorType:f._nextUint16(),versionNumber:f._nextUint16(),descriptorBlockSize:f._nextUint16(),colorModel:f._nextUint8(),colorPrimaries:f._nextUint8(),transferFunction:f._nextUint8(),flags:f._nextUint8(),texelBlockDimension:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],bytesPlane:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],samples:[]},A=(m.descriptorBlockSize/4-6)/4;for(let J=0;J<A;J++){const Y={bitOffset:f._nextUint16(),bitLength:f._nextUint8(),channelType:f._nextUint8(),samplePosition:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&Y.channelType?(Y.sampleLower=f._nextInt32(),Y.sampleUpper=f._nextInt32()):(Y.sampleLower=f._nextUint32(),Y.sampleUpper=f._nextUint32()),m.samples[J]=Y}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(m);const _=new gA(i,l,c,!0);for(;_._offset<c;){const J=_._nextUint32(),Y=_._scan(J),Pe=J8(Y),Ie=_._scan(J-Y.byteLength);t.keyValue[Pe]=Pe.match(/^ktx/i)?J8(Ie):Ie,_._offset%4&&_._skip(4-_._offset%4)}if(h<=0)return t;const v=new gA(i,u,h,!0),w=v._nextUint16(),x=v._nextUint16(),C=v._nextUint32(),S=v._nextUint32(),I=v._nextUint32(),P=v._nextUint32(),k=[];for(let J=0;J<s;J++)k.push({imageFlags:v._nextUint32(),rgbSliceByteOffset:v._nextUint32(),rgbSliceByteLength:v._nextUint32(),alphaSliceByteOffset:v._nextUint32(),alphaSliceByteLength:v._nextUint32()});const M=u+v._offset,R=M+C,N=R+S,U=N+I,q=new Uint8Array(i.buffer,i.byteOffset+M,C),W=new Uint8Array(i.buffer,i.byteOffset+R,S),F=new Uint8Array(i.buffer,i.byteOffset+N,I),ue=new Uint8Array(i.buffer,i.byteOffset+U,P);return t.globalData={endpointCount:w,selectorCount:x,imageDescs:k,endpointsData:q,selectorsData:W,tablesData:F,extendedData:ue},t}let d4,ld,EM;const f4={env:{emscripten_notify_memory_growth:function(i){EM=new Uint8Array(ld.exports.memory.buffer)}}};class Jre{init(){return d4||(d4=typeof fetch<"u"?fetch("data:application/wasm;base64,"+Z8).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,f4)).then(this._init):WebAssembly.instantiate(Buffer.from(Z8,"base64"),f4).then(this._init),d4)}_init(e){ld=e.instance,f4.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!ld)throw new Error("ZSTDDecoder: Await .init() before decoding.");const n=e.byteLength,r=ld.exports.malloc(n);EM.set(e,r),t=t||Number(ld.exports.ZSTD_findDecompressedSize(r,n));const s=ld.exports.malloc(t),a=ld.exports.ZSTD_decompress(s,t,r,n),o=EM.slice(s,s+a);return ld.exports.free(r),ld.exports.free(s),o}}const Z8="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",p4=new WeakMap;let m4=0,g4;class Ku extends Xa{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new Qre,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}detectSupport(e){return e.isWebGPURenderer===!0?this.workerConfig={astcSupported:e.hasFeature("texture-compression-astc"),etc1Supported:!1,etc2Supported:e.hasFeature("texture-compression-etc2"),dxtSupported:e.hasFeature("texture-compression-bc"),bptcSupported:!1,pvrtcSupported:!1}:(this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},e.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1)),this}init(){if(!this.transcoderPending){const e=new ho(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const t=e.loadAsync("basis_transcoder.js"),n=new ho(this.manager);n.setPath(this.transcoderPath),n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials);const r=n.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,r]).then(([s,a])=>{const o=Ku.BasisWorker.toString(),l=["/* constants */","let _EngineFormat = "+JSON.stringify(Ku.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(Ku.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Ku.BasisFormat),"/* basis_transcoder.js */",s,"/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l])),this.transcoderBinary=a,this.workerPool.setWorkerCreator(()=>{const c=new Worker(this.workerSourceURL),u=this.transcoderBinary.slice(0);return c.postMessage({type:"init",config:this.workerConfig,transcoderBinary:u},[u]),c})}),m4>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),m4++}return this.transcoderPending}load(e,t,n,r){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const s=new ho(this.manager);s.setResponseType("arraybuffer"),s.setWithCredentials(this.withCredentials),s.load(e,a=>{if(p4.has(a))return p4.get(a).promise.then(t).catch(r);this._createTexture(a).then(o=>t?t(o):null).catch(r)},n,r)}_createTextureFrom(e,t){const{faces:n,width:r,height:s,format:a,type:o,error:l,dfdTransferFn:c,dfdFlags:u}=e;if(o==="error")return Promise.reject(l);let h;if(t.faceCount===6)h=new hO(n,a,ts);else{const d=n[0].mipmaps;h=t.layerCount>1?new uO(d,r,s,t.layerCount,a,ts):new c_(d,r,s,a,ts)}return h.minFilter=n[0].mipmaps.length===1?Sr:_u,h.magFilter=Sr,h.generateMipmaps=!1,h.needsUpdate=!0,h.colorSpace=c===$re?En:ah,h.premultiplyAlpha=!!(u&Wre),h}async _createTexture(e,t={}){const n=Kre(new Uint8Array(e));if(n.vkFormat!==Xre){const a=[],o=[];for(let c=0;c<n.levels.length;c++)o.push(ese(n,c).then(function(u){a[c]=u}));await Promise.all(o);const l=a[0];return l.mipmaps=a.map(c=>({data:c.source.data,width:c.source.data.width,height:c.source.data.height,depth:c.source.data.depth})),l}const r=t,s=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:r},[e])).then(a=>this._createTextureFrom(a.data,n));return p4.set(e,{promise:s}),s}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),m4--,this}}Ku.BasisFormat={ETC1S:0,UASTC_4x4:1};Ku.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16};Ku.EngineFormat={RGBAFormat:Ps,RGBA_ASTC_4x4_Format:vx,RGBA_BPTC_Format:ZA,RGBA_ETC2_EAC_Format:gx,RGBA_PVRTC_4BPPV1_Format:px,RGBA_S3TC_DXT5_Format:JA,RGB_ETC1_Format:i5,RGB_ETC2_Format:mx,RGB_PVRTC_4BPPV1_Format:fx,RGB_S3TC_DXT1_Format:KA};Ku.BasisWorker=function(){let i,e,t;const n=_EngineFormat,r=_TranscoderFormat,s=_BasisFormat;self.addEventListener("message",function(m){const A=m.data;switch(A.type){case"init":i=A.config,a(A.transcoderBinary);break;case"transcode":e.then(()=>{try{const{faces:_,buffers:v,width:w,height:x,hasAlpha:C,format:S,dfdTransferFn:I,dfdFlags:P}=o(A.buffer);self.postMessage({type:"transcode",id:A.id,faces:_,width:w,height:x,hasAlpha:C,format:S,dfdTransferFn:I,dfdFlags:P},v)}catch(_){console.error(_),self.postMessage({type:"error",id:A.id,error:_.message})}});break}});function a(m){e=new Promise(A=>{t={wasmBinary:m,onRuntimeInitialized:A},BASIS(t)}).then(()=>{t.initializeBasis(),t.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function o(m){const A=new t.KTX2File(new Uint8Array(m));function _(){A.close(),A.delete()}if(!A.isValid())throw _(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const v=A.isUASTC()?s.UASTC_4x4:s.ETC1S,w=A.getWidth(),x=A.getHeight(),C=A.getLayers()||1,S=A.getLevels(),I=A.getFaces(),P=A.getHasAlpha(),k=A.getDFDTransferFunc(),M=A.getDFDFlags(),{transcoderFormat:R,engineFormat:N}=h(v,w,x,P);if(!w||!x||!S)throw _(),new Error("THREE.KTX2Loader:	Invalid texture");if(!A.startTranscoding())throw _(),new Error("THREE.KTX2Loader: .startTranscoding failed");const U=[],q=[];for(let W=0;W<I;W++){const F=[];for(let ue=0;ue<S;ue++){const J=[];let Y,Pe;for(let pe=0;pe<C;pe++){const Ce=A.getImageLevelInfo(ue,pe,W);W===0&&ue===0&&pe===0&&(Ce.origWidth%4!==0||Ce.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),S>1?(Y=Ce.origWidth,Pe=Ce.origHeight):(Y=Ce.width,Pe=Ce.height);const G=new Uint8Array(A.getImageTranscodedSizeInBytes(ue,pe,0,R));if(!A.transcodeImage(G,ue,pe,W,R,0,-1,-1))throw _(),new Error("THREE.KTX2Loader: .transcodeImage failed.");J.push(G)}const Ie=f(J);F.push({data:Ie,width:Y,height:Pe}),q.push(Ie.buffer)}U.push({mipmaps:F,width:w,height:x,format:N})}return _(),{faces:U,buffers:q,width:w,height:x,hasAlpha:P,format:N,dfdTransferFn:k,dfdFlags:M}}const l=[{if:"astcSupported",basisFormat:[s.UASTC_4x4],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[n.RGBA_ASTC_4x4_Format,n.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[n.RGBA_BPTC_Format,n.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.BC1,r.BC3],engineFormat:[n.RGB_S3TC_DXT1_Format,n.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[n.RGB_ETC2_Format,n.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.ETC1],engineFormat:[n.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[n.RGB_PVRTC_4BPPV1_Format,n.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],c=l.sort(function(m,A){return m.priorityETC1S-A.priorityETC1S}),u=l.sort(function(m,A){return m.priorityUASTC-A.priorityUASTC});function h(m,A,_,v){let w,x;const C=m===s.ETC1S?c:u;for(let S=0;S<C.length;S++){const I=C[S];if(i[I.if]&&I.basisFormat.includes(m)&&!(v&&I.transcoderFormat.length<2)&&!(I.needsPowerOfTwo&&!(d(A)&&d(_))))return w=I.transcoderFormat[v?1:0],x=I.engineFormat[v?1:0],{transcoderFormat:w,engineFormat:x}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),w=r.RGBA32,x=n.RGBAFormat,{transcoderFormat:w,engineFormat:x}}function d(m){return m<=2?!0:(m&m-1)===0&&m!==0}function f(m){if(m.length===1)return m[0];let A=0;for(let w=0;w<m.length;w++){const x=m[w];A+=x.byteLength}const _=new Uint8Array(A);let v=0;for(let w=0;w<m.length;w++){const x=m[w];_.set(x,v),v+=x.byteLength}return _}};const eB={[hN]:Ps,[lN]:Ps,[sN]:Ps,[$5]:Ps,[uN]:cg,[oN]:cg,[rN]:cg,[W5]:cg,[cN]:lg,[aN]:lg,[j5]:lg,[iN]:lg},v4={[hN]:ns,[lN]:zo,[sN]:ts,[$5]:ts,[uN]:ns,[oN]:zo,[rN]:ts,[W5]:ts,[cN]:ns,[aN]:zo,[j5]:ts,[iN]:ts},Zre={[$5]:En,[W5]:En,[j5]:En};async function ese(i,e=0){const{vkFormat:t}=i,n=Math.max(1,i.pixelWidth>>e),r=Math.max(1,i.pixelHeight>>e),s=Math.max(1,i.pixelDepth>>e);if(eB[t]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const a=i.levels[e];let o,l;if(i.supercompressionScheme===qre)o=a.levelData;else if(i.supercompressionScheme===jre)g4||(g4=new Promise(async u=>{const h=new Jre;await h.init(),u(h)})),o=(await g4).decode(a.levelData,a.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");v4[t]===ns?l=new Float32Array(o.buffer,o.byteOffset,o.byteLength/Float32Array.BYTES_PER_ELEMENT):v4[t]===zo?l=new Uint16Array(o.buffer,o.byteOffset,o.byteLength/Uint16Array.BYTES_PER_ELEMENT):l=o;const c=s===0?new b0(l,n,r):new w2(l,n,r,s);return c.type=v4[t],c.format=eB[t],c.colorSpace=Zre[t]||ah,c.needsUpdate=!0,Promise.resolve(c)}const tse=i=>{const e={nodes:{},materials:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e};function dN(i,e){const{renderer:t}=Id(),n=typeof i=="string"?e:i,r=ZO(hre,{extend(o){if(n!=null&&n.useDraco){const l=typeof n.useDraco=="string"?n.useDraco:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/",c=new cre().setDecoderPath(l);o.setDRACOLoader(c)}if(n!=null&&n.useMeshopt&&o.setMeshoptDecoder(lre),n!=null&&n.ktxTranscoderPath&&t){const l=new Ku;l.setTranscoderPath(n==null?void 0:n.ktxTranscoderPath),l.detectSupport(t),o.setKTX2Loader(l)}}}),s=o=>r.load(o,{transform(l){return{...l,...tse(l.scene)}}}),a=typeof i=="string"?i:void 0;return a?s(a):{load:s}}const nse=(i,e)=>ZO(D5,e).load(i),ise=()=>{const i=J1();return{hasEventListeners:t=>{const n=i.$$.callbacks;return t in n&&n[t].length>0}}},p_=new le,X5=new le,rse=new le,sse=(i,e,t)=>{const n=p_.setFromMatrixPosition(i.matrixWorld);n.project(e);const r=t.width/2,s=t.height/2;return[n.x*r+r,-(n.y*s)+s]},ase=(i,e)=>{const t=p_.setFromMatrixPosition(i.matrixWorld),n=X5.setFromMatrixPosition(e.matrixWorld),r=t.sub(n),s=e.getWorldDirection(rse);return r.angleTo(s)>Math.PI/2},ose=(i,e,t,n)=>{const r=p_.setFromMatrixPosition(i.matrixWorld),s=r.clone();s.project(e),t.setFromCamera(s,e);const a=t.intersectObjects(n,!0);if(a.length){const o=a[0].distance;return r.distanceTo(t.ray.origin)<o}return!0},lse=(i,e)=>{if(e instanceof Ah)return e.zoom;if(e instanceof _r){const t=p_.setFromMatrixPosition(i.matrixWorld),n=X5.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(n);return 1/(2*Math.tan(r/2)*s)}else return 1},cse=(i,e,t)=>{if(e instanceof _r||e instanceof Ah){const n=p_.setFromMatrixPosition(i.matrixWorld),r=X5.setFromMatrixPosition(e.matrixWorld),s=n.distanceTo(r),a=(t[1]-t[0])/(e.far-e.near),o=t[1]-a*e.far;return Math.round(a*s+o)}},SM=i=>Math.abs(i)<1e-10?0:i,fN=(i,e,t="")=>{let n="matrix3d(";for(let r=0;r!==16;r++)n+=SM(e[r]*i.elements[r])+(r!==15?",":")");return t+n},use=(i=>e=>fN(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),hse=(i=>(e,t)=>fN(e,i(t),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]),dse=i=>i.split(/(?=[A-Z])/).join("-").toLowerCase(),ju=i=>Object.entries(i).filter(([e,t])=>!!t).map(([e,t])=>`${dse(e)}: ${t}`).join("; "),gc=(i,e)=>{i.update(t=>({...t,...e}))},fse=i=>({ref:i[0]&4}),tB=i=>({ref:i[2]});function pse(i){let e;const t=i[40].threlte,n=Yi(t,i,i[46],tB);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s[0]&4|s[1]&32768)&&Ki(n,t,r,r[46],e?Zi(t,r[46],s,fse):Ji(r[46]),tB)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function mse(i){let e=i[1],t,n,r=i[1]&&A4(i);return{c(){r&&r.c(),t=ca()},l(s){r&&r.l(s),t=ca()},m(s,a){r&&r.m(s,a),Fe(s,t,a),n=!0},p(s,a){s[1]?e?gn(e,s[1])?(r.d(1),r=A4(s),e=s[1],r.c(),r.m(t.parentNode,t)):r.p(s,a):(r=A4(s),e=s[1],r.c(),r.m(t.parentNode,t)):e&&(r.d(1),r=null,e=s[1])},i(s){n||(we(r,s),n=!0)},o(s){Me(r,s),n=!1},d(s){s&&ae(t),r&&r.d(s)}}}function gse(i){let e=i[1],t,n,r=i[1]&&_4(i);return{c(){r&&r.c(),t=ca()},l(s){r&&r.l(s),t=ca()},m(s,a){r&&r.m(s,a),Fe(s,t,a),n=!0},p(s,a){s[1]?e?gn(e,s[1])?(r.d(1),r=_4(s),e=s[1],r.c(),r.m(t.parentNode,t)):r.p(s,a):(r=_4(s),e=s[1],r.c(),r.m(t.parentNode,t)):e&&(r.d(1),r=null,e=s[1])},i(s){n||(we(r,s),n=!0)},o(s){Me(r,s),n=!1},d(s){s&&ae(t),r&&r.d(s)}}}function nB(i){let e;const t=i[40].default,n=Yi(t,i,i[46],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s[1]&32768)&&Ki(n,t,r,r[46],e?Zi(t,r[46],s,null):Ji(r[46]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function A4(i){let e,t,n,r,s,a,o,l=i[6]&&nB(i),c=[{style:r=ju(i[11])}],u={};for(let h=0;h<c.length;h+=1)u=jt(u,c[h]);return{c(){e=ft(i[1]),t=ft("div"),l&&l.c(),this.h()},l(h){e=pt(h,(i[1]||"null").toUpperCase(),{style:!0});var d=zt(e);t=pt(d,"DIV",{style:!0});var f=zt(t);l&&l.l(f),f.forEach(ae),d.forEach(ae),this.h()},h(){Je(t,"style",n=ju(i[12])),lx(i[1])(e,u)},m(h,d){Fe(h,e,d),bt(e,t),l&&l.m(t,null),i[45](e),s=!0,a||(o=[ra(i[23].call(null,e)),ra(i[22].call(null,e))],a=!0)},p(h,d){h[6]?l?(l.p(h,d),d[0]&64&&we(l,1)):(l=nB(h),l.c(),we(l,1),l.m(t,null)):l&&(Hs(),Me(l,1,1,()=>{l=null}),Gs()),(!s||d[0]&4096&&n!==(n=ju(h[12])))&&Je(t,"style",n),lx(h[1])(e,u=si(c,[(!s||d[0]&2048&&r!==(r=ju(h[11])))&&{style:r}]))},i(h){s||(we(l),s=!0)},o(h){Me(l),s=!1},d(h){h&&ae(e),l&&l.d(),i[45](null),a=!1,tv(o)}}}function iB(i){let e;const t=i[40].default,n=Yi(t,i,i[46],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s[1]&32768)&&Ki(n,t,r,r[46],e?Zi(t,r[46],s,null):Ji(r[46]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function _4(i){let e,t,n,r,s,a,o,l,c,u=i[6]&&iB(i),h=[{style:a=ju(i[8])}],d={};for(let f=0;f<h.length;f+=1)d=jt(d,h[f]);return{c(){e=ft(i[1]),t=ft("div"),n=ft("div"),u&&u.c(),this.h()},l(f){e=pt(f,(i[1]||"null").toUpperCase(),{style:!0});var m=zt(e);t=pt(m,"DIV",{style:!0});var A=zt(t);n=pt(A,"DIV",{style:!0});var _=zt(n);u&&u.l(_),_.forEach(ae),A.forEach(ae),m.forEach(ae),this.h()},h(){Je(n,"style",r=ju(i[10])),Je(t,"style",s=ju(i[9])),lx(i[1])(e,d)},m(f,m){Fe(f,e,m),bt(e,t),bt(t,n),u&&u.m(n,null),i[42](n),i[43](t),i[44](e),o=!0,l||(c=ra(i[23].call(null,e)),l=!0)},p(f,m){f[6]?u?(u.p(f,m),m[0]&64&&we(u,1)):(u=iB(f),u.c(),we(u,1),u.m(n,null)):u&&(Hs(),Me(u,1,1,()=>{u=null}),Gs()),(!o||m[0]&1024&&r!==(r=ju(f[10])))&&Je(n,"style",r),(!o||m[0]&512&&s!==(s=ju(f[9])))&&Je(t,"style",s),lx(f[1])(e,d=si(h,[(!o||m[0]&256&&a!==(a=ju(f[8])))&&{style:a}]))},i(f){o||(we(u),o=!0)},o(f){Me(u),o=!1},d(f){f&&ae(e),u&&u.d(),i[42](null),i[43](null),i[44](null),l=!1,c()}}}function vse(i){let e,t,n,r,s,a;const o=[{is:i[2]},i[25]];let l={$$slots:{default:[pse,({ref:d})=>({2:d}),({ref:d})=>[d?4:0]]},$$scope:{ctx:i}};for(let d=0;d<o.length;d+=1)l=jt(l,o[d]);e=new Oo({props:l}),i[41](e);const c=[gse,mse],u=[];function h(d,f){return d[0]?0:1}return n=h(i),r=u[n]=c[n](i),{c(){ot(e.$$.fragment),t=Ct(),r.c(),s=ca()},l(d){lt(e.$$.fragment,d),t=Et(d),r.l(d),s=ca()},m(d,f){ct(e,d,f),Fe(d,t,f),u[n].m(d,f),Fe(d,s,f),a=!0},p(d,f){const m=f[0]&33554436?si(o,[f[0]&4&&{is:d[2]},f[0]&33554432&&Bs(d[25])]):{};f[0]&4|f[1]&32768&&(m.$$scope={dirty:f,ctx:d}),e.$set(m);let A=n;n=h(d),n===A?u[n].p(d,f):(Hs(),Me(u[A],1,1,()=>{u[A]=null}),Gs(),r=u[n],r?r.p(d,f):(r=u[n]=c[n](d),r.c()),we(r,1),r.m(s.parentNode,s))},i(d){a||(we(e.$$.fragment,d),we(r),a=!0)},o(d){Me(e.$$.fragment,d),Me(r),a=!1},d(d){d&&(ae(t),ae(s)),i[41](null),ut(e,d),u[n].d(d)}}}function Ase(i,e,t){const n=["transform","calculatePosition","eps","occlude","zIndexRange","sprite","pointerEvents","center","fullscreen","distanceFactor","as","portal","ref","visible"];let r=Uf(e,n),s,a,o,l,c,u,h,d,f,m,{$$slots:A={},$$scope:_}=e,{transform:v=!1}=e,{calculatePosition:w=sse}=e,{eps:x=.001}=e,{occlude:C=!1}=e,{zIndexRange:S=[16777271,0]}=e,{sprite:I=!1}=e,{pointerEvents:P="auto"}=e,{center:k=!1}=e,{fullscreen:M=!1}=e,{distanceFactor:R=void 0}=e,{as:N="div"}=e,{portal:U=void 0}=e;const q=G5();let{ref:W=new Yu}=e;const{renderer:F,camera:ue,scene:J,size:Y}=Id();Wt(i,ue,te=>t(50,a=te)),Wt(i,Y,te=>t(37,s=te));const Pe=()=>{if(!(a instanceof _r)&&!(a instanceof Ah))throw new Error("Only PerspectiveCamera or OrthographicCamera supported for component <HTML>");return a},Ie=new QO;let pe=[0,0],Ce=0,{visible:G=!0}=e,oe=document.createElement(N),je,Tt;const{hasEventListeners:rt}=ise();let De=typeof C=="boolean"&&C===!0?[J]:Array.isArray(C)?C:void 0;const xt=ou(Y,te=>te.width/2);Wt(i,xt,te=>t(39,l=te));const mt=ou(Y,te=>te.height/2);Wt(i,mt,te=>t(38,o=te));let et={common:{el:Ms({})},transform:{el:Ms({position:"absolute",top:"0",left:"0",pointerEvents:"none",overflow:"hidden",display:"block",width:`${s.width}px`,height:`${s.height}px`}),outerRef:Ms({position:"absolute",top:"0",left:"0",width:`${s.width}px`,height:`${s.height}px`,transformStyle:"preserve-3d",pointerEvents:"none"}),innerRef:Ms({position:"absolute",pointerEvents:P})},noTransform:{el:Ms({}),div:Ms({position:"absolute",transform:k?"translate3d(-50%,-50%,0)":"none",top:M?`${-o}px`:void 0,left:M?`${-l}px`:void 0,width:M?`${s.width}px`:void 0,height:M?`${s.height}px`:void 0})}};const st=ou([et.transform.el,et.common.el],([te,Qe])=>({...te,...Qe}));Wt(i,st,te=>t(8,u=te));const ce=ou(et.transform.outerRef,te=>te);Wt(i,ce,te=>t(9,h=te));const tt=ou(et.transform.innerRef,te=>te);Wt(i,tt,te=>t(10,d=te));const he=ou(et.noTransform.el,te=>te);Wt(i,he,te=>t(11,f=te));const be=ou(et.noTransform.div,te=>te);Wt(i,be,te=>t(12,m=te));const Ne=()=>{let te=!0,Qe=W.parent;e:for(;Qe;){if("visible"in Qe&&!Qe.visible){te=!1;break e}Qe=Qe.parent}return te};let nt=Ne();JO(async()=>{t(6,nt=Ne());const te=Pe();te.updateMatrixWorld(),W.updateWorldMatrix(!0,!1);const Qe=v?pe:w(W,te,s);if(v||Math.abs(Ce-te.zoom)>x||Math.abs(pe[0]-Qe[0])>x||Math.abs(pe[1]-Qe[1])>x){const Vt=ase(W,te),ye=G;if(De){const Ee=ose(W,te,Ie,De);t(26,G=Ee&&!Vt)}else t(26,G=!Vt);if(ye!==G&&(rt("visibilitychange")?q("visibilitychange",G):gc(et.common.el,{display:G?"block":"none"})),gc(et.common.el,{zIndex:`${cse(W,te,S)}`}),v){const Ee=te.projectionMatrix.elements[5]*o,{isOrthographicCamera:St,top:Rt,left:Bt,bottom:Qt,right:Nt}=te;let $t=W.matrixWorld;if(I&&($t=te.matrixWorldInverse.clone().transpose().copyPosition($t).scale(W.scale),$t.elements[3]=$t.elements[7]=$t.elements[11]=0,$t.elements[15]=1),gc(et.transform.el,{perspective:St?"":`${Ee}px`}),je&&Tt){const Qn=St?`scale(${Ee}) translate(${SM(-(Nt+Bt)/2)}px,${SM((Rt+Qt)/2)}px)`:`translateZ(${Ee}px)`,de=use(te.matrixWorldInverse);gc(et.transform.outerRef,{transform:`${Qn}${de}translate(${l}px, ${o}px)`}),gc(et.transform.innerRef,{transform:hse($t,1/((R||10)/400))})}}else{const Ee=R===void 0?1:lse(W,te)*R;gc(et.noTransform.el,{transform:`translate3d(${Qe[0]}px, ${Qe[1]}px, 0) scale(${Ee})`})}pe=Qe,Ce=te.zoom}},{debugFrameloopMessage:"HTML: tracking parent"});const ze=te=>{if(!W||v)return;J.updateMatrixWorld();const Qe=w(W,a,s);gc(et.noTransform.el,{position:"absolute",top:"0",left:"0",transform:`translate3d(${Qe[0]}px, ${Qe[1]}px, 0)`,transformOrigin:"0 0"})},me=te=>{if(!F){console.warn("HTML: renderer is undefined. Is this component a child to <Canvas>?");return}const Qe=U??F.domElement.parentElement;if(!Qe){console.warn("HTML: target is undefined.");return}return Qe.appendChild(te),{destroy:()=>{te.parentNode&&te.parentNode.removeChild(te)}}},fe=eN();Wt(i,fe,te=>t(7,c=te));function Be(te){Wa[te?"unshift":"push"](()=>{c=te,fe.set(c)})}function V(te){Wa[te?"unshift":"push"](()=>{Tt=te,t(5,Tt)})}function $(te){Wa[te?"unshift":"push"](()=>{je=te,t(4,je)})}function ee(te){Wa[te?"unshift":"push"](()=>{oe=te,t(3,oe)})}function Te(te){Wa[te?"unshift":"push"](()=>{oe=te,t(3,oe)})}return i.$$set=te=>{e=jt(jt({},e),Ri(te)),t(25,r=Uf(e,n)),"transform"in te&&t(0,v=te.transform),"calculatePosition"in te&&t(27,w=te.calculatePosition),"eps"in te&&t(28,x=te.eps),"occlude"in te&&t(29,C=te.occlude),"zIndexRange"in te&&t(30,S=te.zIndexRange),"sprite"in te&&t(31,I=te.sprite),"pointerEvents"in te&&t(32,P=te.pointerEvents),"center"in te&&t(33,k=te.center),"fullscreen"in te&&t(34,M=te.fullscreen),"distanceFactor"in te&&t(35,R=te.distanceFactor),"as"in te&&t(1,N=te.as),"portal"in te&&t(36,U=te.portal),"ref"in te&&t(2,W=te.ref),"visible"in te&&t(26,G=te.visible),"$$scope"in te&&t(46,_=te.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&536870912&&(De=typeof C=="boolean"&&C===!0?[J]:Array.isArray(C)?C:void 0),i.$$.dirty[1]&64&&gc(et.transform.el,{width:`${s.width}px`,height:`${s.height}px`}),i.$$.dirty[1]&64&&gc(et.transform.outerRef,{width:`${s.width}px`,height:`${s.height}px`}),i.$$.dirty[1]&2&&gc(et.transform.innerRef,{pointerEvents:P}),i.$$.dirty[1]&4&&gc(et.noTransform.div,{transform:k?"translate3d(-50%, -50%, 0)":"none"}),i.$$.dirty[1]&456&&gc(et.noTransform.div,{top:M?`${-o}px`:void 0,left:M?`${-l}px`:void 0,width:M?`${s.width}px`:void 0,height:M?`${s.height}px`:void 0})},[v,N,W,oe,je,Tt,nt,c,u,h,d,f,m,ue,Y,xt,mt,st,ce,tt,he,be,ze,me,fe,r,G,w,x,C,S,I,P,k,M,R,U,s,o,l,A,Be,V,$,ee,Te,_]}let pN=class extends Sn{constructor(e){super(),Mn(this,e,Ase,vse,gn,{transform:0,calculatePosition:27,eps:28,occlude:29,zIndexRange:30,sprite:31,pointerEvents:32,center:33,fullscreen:34,distanceFactor:35,as:1,portal:36,ref:2,visible:26},null,[-1,-1])}};const _se=i=>({ref:i&1}),rB=i=>({ref:i[0]});function bse(i){let e,t,n;e=new Oo.PlaneGeometry({props:{args:typeof i[1]=="number"?[i[1],i[1]]:i[1]}});const r=i[17].default,s=Yi(r,i,i[20],rB);return{c(){ot(e.$$.fragment),t=Ct(),s&&s.c()},l(a){lt(e.$$.fragment,a),t=Et(a),s&&s.l(a)},m(a,o){ct(e,a,o),Fe(a,t,o),s&&s.m(a,o),n=!0},p(a,o){const l={};o&2&&(l.args=typeof a[1]=="number"?[a[1],a[1]]:a[1]),e.$set(l),s&&s.p&&(!n||o&1048577)&&Ki(s,r,a,a[20],n?Zi(r,a[20],o,_se):Ji(a[20]),rB)},i(a){n||(we(e.$$.fragment,a),we(s,a),n=!0)},o(a){Me(e.$$.fragment,a),Me(s,a),n=!1},d(a){a&&ae(t),ut(e,a),s&&s.d(a)}}}function yse(i){let e,t,n;const r=[{material:i[2]},{frustumCulled:!1},i[5]];function s(o){i[19](o)}let a={$$slots:{default:[bse,({ref:o})=>({0:o}),({ref:o})=>o?1:0]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=jt(a,r[o]);return i[0]!==void 0&&(a.ref=i[0]),e=new Oo.Mesh({props:a}),i[18](e),Wa.push(()=>e_(e,"ref",s)),{c(){ot(e.$$.fragment)},l(o){lt(e.$$.fragment,o)},m(o,l){ct(e,o,l),n=!0},p(o,[l]){const c=l&36?si(r,[l&4&&{material:o[2]},r[1],l&32&&Bs(o[5])]):{};l&1048579&&(c.$$scope={dirty:l,ctx:o}),!t&&l&1&&(t=!0,c.ref=o[0],Z1(()=>t=!1)),e.$set(c)},i(o){n||(we(e.$$.fragment,o),n=!0)},o(o){Me(e.$$.fragment,o),n=!1},d(o){i[18](null),ut(e,o)}}}function wse(i,e,t){let n;const r=["cellColor","sectionColor","cellSize","sectionSize","axes","gridSize","followCamera","infiniteGrid","fadeDistance","fadeStrength","cellThickness","sectionThickness","ref"];let s=Uf(e,r),a,{$$slots:o={},$$scope:l}=e,{cellColor:c="#000000"}=e,{sectionColor:u="#0000ee"}=e,{cellSize:h=1}=e,{sectionSize:d=10}=e,{axes:f="xzy"}=e,{gridSize:m=[20,20]}=e,{followCamera:A=!1}=e,{infiniteGrid:_=!1}=e,{fadeDistance:v=100}=e,{fadeStrength:w=1}=e,{cellThickness:x=1}=e,{sectionThickness:C=2}=e,{ref:S}=e;const{invalidate:I}=Id(),P=N=>new $a({side:fs,uniforms:{uSize1:{value:h},uSize2:{value:d},uColor1:{value:new Ut(c)},uColor2:{value:new Ut(u)},uFadeDistance:{value:v},uFadeStrength:{value:w},uThickness1:{value:1},uThickness2:{value:1},uInfiniteGrid:{value:_?1:0},uFollowCamera:{value:0}},transparent:!0,vertexShader:`
      varying vec3 worldPosition;
      uniform float uFadeDistance;
      uniform float uInfiniteGrid;
      uniform float uFollowCamera;

      void main() {

        vec3 pos = position.${N} * (1. + uFadeDistance * uInfiniteGrid);
        pos.${N.slice(0,2)} += (cameraPosition.${N.slice(0,2)} * uFollowCamera);

        worldPosition = pos;

        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);

      }`,fragmentShader:`
      varying vec3 worldPosition;
      uniform float uSize1;
      uniform float uSize2;
      uniform vec3 uColor1;
      uniform vec3 uColor2;
      uniform float uFadeDistance;
      uniform float uFadeStrength;
      uniform float uThickness1;
      uniform float uThickness2;
      uniform float uInfiniteGrid;

      float getGrid(float size, float thickness) {

        vec2 r = worldPosition.${N.slice(0,2)} / size;

        vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
        float line = min(grid.x, grid.y) + 1. - thickness;

        return 1.0 - min(line, 1.);
      }

      void main() {

        float g1 = getGrid(uSize1, uThickness1);
        float g2 = getGrid(uSize2, uThickness2);

        float d = 1.0 - min(distance(cameraPosition.${N.slice(0,2)}, worldPosition.${N.slice(0,2)}) / uFadeDistance, 1.);
        vec3 color = mix(uColor1, uColor2, min(1.,uThickness2*g2));

        gl_FragColor = vec4(color, (g1 + g2) * pow(d,uFadeStrength));
        gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);

        if(gl_FragColor.a <= 0.0)
          discard;
        #include <tonemapping_fragment>
        #include <encodings_fragment>
      }
       `,extensions:{derivatives:!0}}),k=eN();Wt(i,k,N=>t(3,a=N));function M(N){Wa[N?"unshift":"push"](()=>{a=N,k.set(a)})}function R(N){S=N,t(0,S)}return i.$$set=N=>{e=jt(jt({},e),Ri(N)),t(5,s=Uf(e,r)),"cellColor"in N&&t(6,c=N.cellColor),"sectionColor"in N&&t(7,u=N.sectionColor),"cellSize"in N&&t(8,h=N.cellSize),"sectionSize"in N&&t(9,d=N.sectionSize),"axes"in N&&t(10,f=N.axes),"gridSize"in N&&t(1,m=N.gridSize),"followCamera"in N&&t(11,A=N.followCamera),"infiniteGrid"in N&&t(12,_=N.infiniteGrid),"fadeDistance"in N&&t(13,v=N.fadeDistance),"fadeStrength"in N&&t(14,w=N.fadeStrength),"cellThickness"in N&&t(15,x=N.cellThickness),"sectionThickness"in N&&t(16,C=N.sectionThickness),"ref"in N&&t(0,S=N.ref),"$$scope"in N&&t(20,l=N.$$scope)},i.$$.update=()=>{i.$$.dirty&1024&&t(2,n=P(f)),i.$$.dirty&131008&&(t(2,n.uniforms.uSize1={value:h},n),t(2,n.uniforms.uSize2={value:d},n),t(2,n.uniforms.uColor1={value:new Ut(c)},n),t(2,n.uniforms.uColor2={value:new Ut(u)},n),t(2,n.uniforms.uFadeDistance={value:v},n),t(2,n.uniforms.uFadeStrength={value:w},n),t(2,n.uniforms.uThickness1={value:x},n),t(2,n.uniforms.uThickness2={value:C},n),t(2,n.uniforms.uFollowCamera={value:A?1:0},n),t(2,n.uniforms.uInfiniteGrid={value:_?1:0},n),I("Grid uniforms changed")),i.$$.dirty&4&&n&&I("Grid axes changed")},[S,m,n,a,k,s,c,u,h,d,f,A,_,v,w,x,C,o,M,R,l]}let yx=class extends Sn{constructor(e){super(),Mn(this,e,wse,yse,gn,{cellColor:6,sectionColor:7,cellSize:8,sectionSize:9,axes:10,gridSize:1,followCamera:11,infiniteGrid:12,fadeDistance:13,fadeStrength:14,cellThickness:15,sectionThickness:16,ref:0})}};var wx={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */wx.exports;(function(i,e){(function(){var t,n="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",h=1,d=2,f=4,m=1,A=2,_=1,v=2,w=4,x=8,C=16,S=32,I=64,P=128,k=256,M=512,R=30,N="...",U=800,q=16,W=1,F=2,ue=3,J=1/0,Y=9007199254740991,Pe=17976931348623157e292,Ie=0/0,pe=4294967295,Ce=pe-1,G=pe>>>1,oe=[["ary",P],["bind",_],["bindKey",v],["curry",x],["curryRight",C],["flip",M],["partial",S],["partialRight",I],["rearg",k]],je="[object Arguments]",Tt="[object Array]",rt="[object AsyncFunction]",De="[object Boolean]",xt="[object Date]",mt="[object DOMException]",et="[object Error]",st="[object Function]",ce="[object GeneratorFunction]",tt="[object Map]",he="[object Number]",be="[object Null]",Ne="[object Object]",nt="[object Promise]",ze="[object Proxy]",me="[object RegExp]",fe="[object Set]",Be="[object String]",V="[object Symbol]",$="[object Undefined]",ee="[object WeakMap]",Te="[object WeakSet]",te="[object ArrayBuffer]",Qe="[object DataView]",Vt="[object Float32Array]",ye="[object Float64Array]",Ee="[object Int8Array]",St="[object Int16Array]",Rt="[object Int32Array]",Bt="[object Uint8Array]",Qt="[object Uint8ClampedArray]",Nt="[object Uint16Array]",$t="[object Uint32Array]",Qn=/\b__p \+= '';/g,de=/\b(__p \+=) '' \+/g,It=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$e=/&(?:amp|lt|gt|quot|#39);/g,Lt=/[&<>"']/g,Ft=RegExp($e.source),Le=RegExp(Lt.source),bn=/<%-([\s\S]+?)%>/g,_i=/<%([\s\S]+?)%>/g,gs=/<%=([\s\S]+?)%>/g,ei=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vs=/^\w*$/,er=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fa=/[\\^$.*+?()[\]{}|]/g,El=RegExp(fa.source),nc=/^\s+/,Ka=/\s/,Sl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Uc=/\{\n\/\* \[wrapped with (.+)\] \*/,Mu=/,? & /,Nd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_o=/[()=,{}\[\]\/\s]/,Tu=/\\(\\)?/g,Ds=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,se=/\w*$/,Ze=/^[-+]0x[0-9a-f]+$/i,ht=/^0b[01]+$/i,qe=/^\[object .+?Constructor\]$/,gt=/^0o[0-7]+$/i,Yt=/^(?:0|[1-9]\d*)$/,un=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,sn=/($^)/,yn=/['\n\r\u2028\u2029\\]/g,Hn="\\ud800-\\udfff",vn="\\u0300-\\u036f",wn="\\ufe20-\\ufe2f",tr="\\u20d0-\\u20ff",Si=vn+wn+tr,rs="\\u2700-\\u27bf",js="a-z\\xdf-\\xf6\\xf8-\\xff",Xn="\\xac\\xb1\\xd7\\xf7",Tn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",bo="\\u2000-\\u206f",Mr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ur="A-Z\\xc0-\\xd6\\xd8-\\xde",$r="\\ufe0e\\ufe0f",ic=Xn+Tn+bo+Mr,Ml="[']",hr="["+Hn+"]",Ja="["+ic+"]",Tl="["+Si+"]",Ws="\\d+",Vc="["+rs+"]",Sh="["+js+"]",rc="[^"+Hn+ic+Ws+rs+js+ur+"]",Xr="\\ud83c[\\udffb-\\udfff]",As="(?:"+Tl+"|"+Xr+")",Mh="[^"+Hn+"]",sc="(?:\\ud83c[\\udde6-\\uddff]){2}",Sa="[\\ud800-\\udbff][\\udc00-\\udfff]",Ma="["+ur+"]",Il="\\u200d",Iu="(?:"+Sh+"|"+rc+")",Hc="(?:"+Ma+"|"+rc+")",Yn="(?:"+Ml+"(?:d|ll|m|re|s|t|ve))?",Fd="(?:"+Ml+"(?:D|LL|M|RE|S|T|VE))?",Ho=As+"?",zd="["+$r+"]?",Pu="(?:"+Il+"(?:"+[Mh,sc,Sa].join("|")+")"+zd+Ho+")*",Ud="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ku="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ac=zd+Ho+Pu,Vd="(?:"+[Vc,sc,Sa].join("|")+")"+ac,lm="(?:"+[Mh+Tl+"?",Tl,sc,Sa,hr].join("|")+")",oc=RegExp(Ml,"g"),Ta=RegExp(Tl,"g"),Hd=RegExp(Xr+"(?="+Xr+")|"+lm+ac,"g"),mp=RegExp([Ma+"?"+Sh+"+"+Yn+"(?="+[Ja,Ma,"$"].join("|")+")",Hc+"+"+Fd+"(?="+[Ja,Ma+Iu,"$"].join("|")+")",Ma+"?"+Iu+"+"+Yn,Ma+"+"+Fd,ku,Ud,Ws,Vd].join("|"),"g"),cm=RegExp("["+Il+Hn+Si+$r+"]"),pa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Gd=-1,qi={};qi[Vt]=qi[ye]=qi[Ee]=qi[St]=qi[Rt]=qi[Bt]=qi[Qt]=qi[Nt]=qi[$t]=!0,qi[je]=qi[Tt]=qi[te]=qi[De]=qi[Qe]=qi[xt]=qi[et]=qi[st]=qi[tt]=qi[he]=qi[Ne]=qi[me]=qi[fe]=qi[Be]=qi[ee]=!1;var sr={};sr[je]=sr[Tt]=sr[te]=sr[Qe]=sr[De]=sr[xt]=sr[Vt]=sr[ye]=sr[Ee]=sr[St]=sr[Rt]=sr[tt]=sr[he]=sr[Ne]=sr[me]=sr[fe]=sr[Be]=sr[V]=sr[Bt]=sr[Qt]=sr[Nt]=sr[$t]=!0,sr[et]=sr[st]=sr[ee]=!1;var yo={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},gp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ru={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Pl=parseFloat,vp=parseInt,Th=typeof dt=="object"&&dt&&dt.Object===Object&&dt,Bv=typeof self=="object"&&self&&self.Object===Object&&self,ss=Th||Bv||Function("return this")(),Ap=e&&!e.nodeType&&e,Za=Ap&&!0&&i&&!i.nodeType&&i,Ih=Za&&Za.exports===Ap,_p=Ih&&Th.process,ma=function(){try{var Se=Za&&Za.require&&Za.require("util").types;return Se||_p&&_p.binding&&_p.binding("util")}catch{}}(),bp=ma&&ma.isArrayBuffer,um=ma&&ma.isDate,yp=ma&&ma.isMap,wp=ma&&ma.isRegExp,Ph=ma&&ma.isSet,Qd=ma&&ma.isTypedArray;function xn(Se,it,Ke){switch(Ke.length){case 0:return Se.call(it);case 1:return Se.call(it,Ke[0]);case 2:return Se.call(it,Ke[0],Ke[1]);case 3:return Se.call(it,Ke[0],Ke[1],Ke[2])}return Se.apply(it,Ke)}function hm(Se,it,Ke,Ht){for(var Ve=-1,Wn=Se==null?0:Se.length;++Ve<Wn;){var Vi=Se[Ve];it(Ht,Vi,Ke(Vi),Se)}return Ht}function Ia(Se,it){for(var Ke=-1,Ht=Se==null?0:Se.length;++Ke<Ht&&it(Se[Ke],Ke,Se)!==!1;);return Se}function kh(Se,it){for(var Ke=Se==null?0:Se.length;Ke--&&it(Se[Ke],Ke,Se)!==!1;);return Se}function dm(Se,it){for(var Ke=-1,Ht=Se==null?0:Se.length;++Ke<Ht;)if(!it(Se[Ke],Ke,Se))return!1;return!0}function Ls(Se,it){for(var Ke=-1,Ht=Se==null?0:Se.length,Ve=0,Wn=[];++Ke<Ht;){var Vi=Se[Ke];it(Vi,Ke,Se)&&(Wn[Ve++]=Vi)}return Wn}function Bh(Se,it){var Ke=Se==null?0:Se.length;return!!Ke&&qt(Se,it,0)>-1}function qd(Se,it,Ke){for(var Ht=-1,Ve=Se==null?0:Se.length;++Ht<Ve;)if(Ke(it,Se[Ht]))return!0;return!1}function Kn(Se,it){for(var Ke=-1,Ht=Se==null?0:Se.length,Ve=Array(Ht);++Ke<Ht;)Ve[Ke]=it(Se[Ke],Ke,Se);return Ve}function lc(Se,it){for(var Ke=-1,Ht=it.length,Ve=Se.length;++Ke<Ht;)Se[Ve+Ke]=it[Ke];return Se}function He(Se,it,Ke,Ht){var Ve=-1,Wn=Se==null?0:Se.length;for(Ht&&Wn&&(Ke=Se[++Ve]);++Ve<Wn;)Ke=it(Ke,Se[Ve],Ve,Se);return Ke}function X(Se,it,Ke,Ht){var Ve=Se==null?0:Se.length;for(Ht&&Ve&&(Ke=Se[--Ve]);Ve--;)Ke=it(Ke,Se[Ve],Ve,Se);return Ke}function xe(Se,it){for(var Ke=-1,Ht=Se==null?0:Se.length;++Ke<Ht;)if(it(Se[Ke],Ke,Se))return!0;return!1}var ie=on("length");function re(Se){return Se.split("")}function Oe(Se){return Se.match(Nd)||[]}function at(Se,it,Ke){var Ht;return Ke(Se,function(Ve,Wn,Vi){if(it(Ve,Wn,Vi))return Ht=Wn,!1}),Ht}function Ye(Se,it,Ke,Ht){for(var Ve=Se.length,Wn=Ke+(Ht?1:-1);Ht?Wn--:++Wn<Ve;)if(it(Se[Wn],Wn,Se))return Wn;return-1}function qt(Se,it,Ke){return it===it?Qc(Se,it,Ke):Ye(Se,ti,Ke)}function Bn(Se,it,Ke,Ht){for(var Ve=Ke-1,Wn=Se.length;++Ve<Wn;)if(Ht(Se[Ve],it))return Ve;return-1}function ti(Se){return Se!==Se}function an(Se,it){var Ke=Se==null?0:Se.length;return Ke?ar(Se,it)/Ke:Ie}function on(Se){return function(it){return it==null?t:it[Se]}}function vt(Se){return function(it){return Se==null?t:Se[it]}}function hn(Se,it,Ke,Ht,Ve){return Ve(Se,function(Wn,Vi,Jt){Ke=Ht?(Ht=!1,Wn):it(Ke,Wn,Vi,Jt)}),Ke}function Mi(Se,it){var Ke=Se.length;for(Se.sort(it);Ke--;)Se[Ke]=Se[Ke].value;return Se}function ar(Se,it){for(var Ke,Ht=-1,Ve=Se.length;++Ht<Ve;){var Wn=it(Se[Ht]);Wn!==t&&(Ke=Ke===t?Wn:Ke+Wn)}return Ke}function mr(Se,it){for(var Ke=-1,Ht=Array(Se);++Ke<Se;)Ht[Ke]=it(Ke);return Ht}function gr(Se,it){return Kn(it,function(Ke){return[Ke,Se[Ke]]})}function _s(Se){return Se&&Se.slice(0,Xs(Se)+1).replace(nc,"")}function dn(Se){return function(it){return Se(it)}}function $s(Se,it){return Kn(it,function(Ke){return Se[Ke]})}function nr(Se,it){return Se.has(it)}function In(Se,it){for(var Ke=-1,Ht=Se.length;++Ke<Ht&&qt(it,Se[Ke],0)>-1;);return Ke}function Yr(Se,it){for(var Ke=Se.length;Ke--&&qt(it,Se[Ke],0)>-1;);return Ke}function Os(Se,it){for(var Ke=Se.length,Ht=0;Ke--;)Se[Ke]===it&&++Ht;return Ht}var fn=vt(yo),br=vt(gp);function On(Se){return"\\"+Ru[Se]}function wo(Se,it){return Se==null?t:Se[it]}function yr(Se){return cm.test(Se)}function bs(Se){return pa.test(Se)}function Kr(Se){for(var it,Ke=[];!(it=Se.next()).done;)Ke.push(it.value);return Ke}function bi(Se){var it=-1,Ke=Array(Se.size);return Se.forEach(function(Ht,Ve){Ke[++it]=[Ve,Ht]}),Ke}function wr(Se,it){return function(Ke){return Se(it(Ke))}}function or(Se,it){for(var Ke=-1,Ht=Se.length,Ve=0,Wn=[];++Ke<Ht;){var Vi=Se[Ke];(Vi===it||Vi===u)&&(Se[Ke]=u,Wn[Ve++]=Ke)}return Wn}function We(Se){var it=-1,Ke=Array(Se.size);return Se.forEach(function(Ht){Ke[++it]=Ht}),Ke}function as(Se){var it=-1,Ke=Array(Se.size);return Se.forEach(function(Ht){Ke[++it]=[Ht,Ht]}),Ke}function Qc(Se,it,Ke){for(var Ht=Ke-1,Ve=Se.length;++Ht<Ve;)if(Se[Ht]===it)return Ht;return-1}function Pa(Se,it,Ke){for(var Ht=Ke+1;Ht--;)if(Se[Ht]===it)return Ht;return Ht}function Ns(Se){return yr(Se)?Ys(Se):ie(Se)}function os(Se){return yr(Se)?Ks(Se):re(Se)}function Xs(Se){for(var it=Se.length;it--&&Ka.test(Se.charAt(it)););return it}var Jr=vt(Bu);function Ys(Se){for(var it=Hd.lastIndex=0;Hd.test(Se);)++it;return it}function Ks(Se){return Se.match(Hd)||[]}function cc(Se){return Se.match(mp)||[]}var Zr=function Se(it){it=it==null?ss:Js.defaults(ss.Object(),it,Js.pick(ss,Gc));var Ke=it.Array,Ht=it.Date,Ve=it.Error,Wn=it.Function,Vi=it.Math,Jt=it.Object,ji=it.RegExp,qc=it.String,ys=it.TypeError,Go=Ke.prototype,Tr=Wn.prototype,Ti=Jt.prototype,ka=it["__core-js_shared__"],vr=Tr.toString,gi=Ti.hasOwnProperty,Qo=0,eo=function(){var p=/[^.]+$/.exec(ka&&ka.keys&&ka.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),ws=Ti.toString,uc=vr.call(Jt),jc=ss._,Wc=ji("^"+vr.call(gi).replace(fa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xo=Ih?it.Buffer:t,Zs=it.Symbol,to=it.Uint8Array,vi=xo?xo.allocUnsafe:t,qo=wr(Jt.getPrototypeOf,Jt),Ga=Jt.create,no=Ti.propertyIsEnumerable,ga=Go.splice,kl=Zs?Zs.isConcatSpreadable:t,Co=Zs?Zs.iterator:t,ea=Zs?Zs.toStringTag:t,Gn=function(){try{var p=Ip(Jt,"defineProperty");return p({},"",{}),p}catch{}}(),An=it.clearTimeout!==ss.clearTimeout&&it.clearTimeout,xi=Ht&&Ht.now!==ss.Date.now&&Ht.now,Ir=it.setTimeout!==ss.setTimeout&&it.setTimeout,en=Vi.ceil,ni=Vi.floor,_n=Jt.getOwnPropertySymbols,ri=xo?xo.isBuffer:t,Hr=it.isFinite,yi=Go.join,Gr=wr(Jt.keys,Jt),di=Vi.max,Ii=Vi.min,Pr=Ht.now,lr=it.parseInt,Qa=Vi.random,kr=Go.reverse,ta=Ip(it,"DataView"),Ba=Ip(it,"Map"),va=Ip(it,"Promise"),xr=Ip(it,"Set"),Cr=Ip(it,"WeakMap"),Eo=Ip(Jt,"create"),$c=Cr&&new Cr,dr={},ls=Pp(ta),jo=Pp(Ba),xp=Pp(va),fm=Pp(xr),Xc=Pp(Cr),qa=Zs?Zs.prototype:t,So=qa?qa.valueOf:t,Rh=qa?qa.toString:t;function K(p){if(xs(p)&&!ii(p)&&!(p instanceof wi)){if(p instanceof Wo)return p;if(gi.call(p,"__wrapped__"))return _6(p)}return new Wo(p)}var Du=function(){function p(){}return function(b){if(!cs(b))return{};if(Ga)return Ga(b);p.prototype=b;var T=new p;return p.prototype=t,T}}();function Cp(){}function Wo(p,b){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=t}K.templateSettings={escape:bn,evaluate:_i,interpolate:gs,variable:"",imports:{_:K}},K.prototype=Cp.prototype,K.prototype.constructor=K,Wo.prototype=Du(Cp.prototype),Wo.prototype.constructor=Wo;function wi(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=pe,this.__views__=[]}function AE(){var p=new wi(this.__wrapped__);return p.__actions__=Yo(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=Yo(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=Yo(this.__views__),p}function Rv(){if(this.__filtered__){var p=new wi(this);p.__dir__=-1,p.__filtered__=!0}else p=this.clone(),p.__dir__*=-1;return p}function _E(){var p=this.__wrapped__.value(),b=this.__dir__,T=ii(p),L=b<0,H=T?p.length:0,ne=OQ(0,H,this.__views__),Ae=ne.start,ke=ne.end,Ue=ke-Ae,yt=L?ke:Ae-1,wt=this.__iteratees__,Pt=wt.length,Kt=0,cn=Ii(Ue,this.__takeCount__);if(!T||!L&&H==Ue&&cn==Ue)return Fu(p,this.__actions__);var Nn=[];e:for(;Ue--&&Kt<cn;){yt+=b;for(var fi=-1,Fn=p[yt];++fi<Pt;){var Ci=wt[fi],Li=Ci.iteratee,Ll=Ci.type,To=Li(Fn);if(Ll==F)Fn=To;else if(!To){if(Ll==W)continue e;break e}}Nn[Kt++]=Fn}return Nn}wi.prototype=Du(Cp.prototype),wi.prototype.constructor=wi;function Dh(p){var b=-1,T=p==null?0:p.length;for(this.clear();++b<T;){var L=p[b];this.set(L[0],L[1])}}function Dv(){this.__data__=Eo?Eo(null):{},this.size=0}function bE(p){var b=this.has(p)&&delete this.__data__[p];return this.size-=b?1:0,b}function yE(p){var b=this.__data__;if(Eo){var T=b[p];return T===l?t:T}return gi.call(b,p)?b[p]:t}function wE(p){var b=this.__data__;return Eo?b[p]!==t:gi.call(b,p)}function xE(p,b){var T=this.__data__;return this.size+=this.has(p)?0:1,T[p]=Eo&&b===t?l:b,this}Dh.prototype.clear=Dv,Dh.prototype.delete=bE,Dh.prototype.get=yE,Dh.prototype.has=wE,Dh.prototype.set=xE;function Yc(p){var b=-1,T=p==null?0:p.length;for(this.clear();++b<T;){var L=p[b];this.set(L[0],L[1])}}function CE(){this.__data__=[],this.size=0}function EE(p){var b=this.__data__,T=Rl(b,p);if(T<0)return!1;var L=b.length-1;return T==L?b.pop():ga.call(b,T,1),--this.size,!0}function SE(p){var b=this.__data__,T=Rl(b,p);return T<0?t:b[T][1]}function ME(p){return Rl(this.__data__,p)>-1}function TE(p,b){var T=this.__data__,L=Rl(T,p);return L<0?(++this.size,T.push([p,b])):T[L][1]=b,this}Yc.prototype.clear=CE,Yc.prototype.delete=EE,Yc.prototype.get=SE,Yc.prototype.has=ME,Yc.prototype.set=TE;function Kc(p){var b=-1,T=p==null?0:p.length;for(this.clear();++b<T;){var L=p[b];this.set(L[0],L[1])}}function IE(){this.size=0,this.__data__={hash:new Dh,map:new(Ba||Yc),string:new Dh}}function Lv(p){var b=jb(this,p).delete(p);return this.size-=b?1:0,b}function PE(p){return jb(this,p).get(p)}function kE(p){return jb(this,p).has(p)}function BE(p,b){var T=jb(this,p),L=T.size;return T.set(p,b),this.size+=T.size==L?0:1,this}Kc.prototype.clear=IE,Kc.prototype.delete=Lv,Kc.prototype.get=PE,Kc.prototype.has=kE,Kc.prototype.set=BE;function Lh(p){var b=-1,T=p==null?0:p.length;for(this.__data__=new Kc;++b<T;)this.add(p[b])}function RE(p){return this.__data__.set(p,l),this}function DE(p){return this.__data__.has(p)}Lh.prototype.add=Lh.prototype.push=RE,Lh.prototype.has=DE;function Bl(p){var b=this.__data__=new Yc(p);this.size=b.size}function LE(){this.__data__=new Yc,this.size=0}function Lu(p){var b=this.__data__,T=b.delete(p);return this.size=b.size,T}function wb(p){return this.__data__.get(p)}function OE(p){return this.__data__.has(p)}function NE(p,b){var T=this.__data__;if(T instanceof Yc){var L=T.__data__;if(!Ba||L.length<r-1)return L.push([p,b]),this.size=++T.size,this;T=this.__data__=new Kc(L)}return T.set(p,b),this.size=T.size,this}Bl.prototype.clear=LE,Bl.prototype.delete=Lu,Bl.prototype.get=wb,Bl.prototype.has=OE,Bl.prototype.set=NE;function pm(p,b){var T=ii(p),L=!T&&kp(p),H=!T&&!L&&Zd(p),ne=!T&&!L&&!H&&ym(p),Ae=T||L||H||ne,ke=Ae?mr(p.length,qc):[],Ue=ke.length;for(var yt in p)(b||gi.call(p,yt))&&!(Ae&&(yt=="length"||H&&(yt=="offset"||yt=="parent")||ne&&(yt=="buffer"||yt=="byteLength"||yt=="byteOffset")||Hh(yt,Ue)))&&ke.push(yt);return ke}function Ov(p){var b=p.length;return b?p[Zv(0,b-1)]:t}function xb(p,b){return Wb(Yo(p),Ou(b,0,p.length))}function FE(p){return Wb(Yo(p))}function Nv(p,b,T){(T!==t&&!Jc(p[b],T)||T===t&&!(b in p))&&Ra(p,b,T)}function Ep(p,b,T){var L=p[b];(!(gi.call(p,b)&&Jc(L,T))||T===t&&!(b in p))&&Ra(p,b,T)}function Rl(p,b){for(var T=p.length;T--;)if(Jc(p[T][0],b))return T;return-1}function Cb(p,b,T,L){return Nu(p,function(H,ne,Ae){b(L,H,T(H),Ae)}),L}function Oh(p,b){return p&&zu(b,La(b),p)}function zE(p,b){return p&&zu(b,Jo(b),p)}function Ra(p,b,T){b=="__proto__"&&Gn?Gn(p,b,{configurable:!0,enumerable:!0,value:T,writable:!0}):p[b]=T}function Fv(p,b){for(var T=-1,L=b.length,H=Ke(L),ne=p==null;++T<L;)H[T]=ne?t:AS(p,b[T]);return H}function Ou(p,b,T){return p===p&&(T!==t&&(p=p<=T?p:T),b!==t&&(p=p>=b?p:b)),p}function $o(p,b,T,L,H,ne){var Ae,ke=b&h,Ue=b&d,yt=b&f;if(T&&(Ae=H?T(p,L,H,ne):T(p)),Ae!==t)return Ae;if(!cs(p))return p;var wt=ii(p);if(wt){if(Ae=FQ(p),!ke)return Yo(p,Ae)}else{var Pt=io(p),Kt=Pt==st||Pt==ce;if(Zd(p))return qP(p,ke);if(Pt==Ne||Pt==je||Kt&&!H){if(Ae=Ue||Kt?{}:u6(p),!ke)return Ue?MQ(p,zE(Ae,p)):SQ(p,Oh(Ae,p))}else{if(!sr[Pt])return H?p:{};Ae=zQ(p,Pt,ke)}}ne||(ne=new Bl);var cn=ne.get(p);if(cn)return cn;ne.set(p,Ae),z6(p)?p.forEach(function(Fn){Ae.add($o(Fn,b,T,Fn,p,ne))}):N6(p)&&p.forEach(function(Fn,Ci){Ae.set(Ci,$o(Fn,b,T,Ci,p,ne))});var Nn=yt?Ue?rS:iS:Ue?Jo:La,fi=wt?t:Nn(p);return Ia(fi||p,function(Fn,Ci){fi&&(Ci=Fn,Fn=p[Ci]),Ep(Ae,Ci,$o(Fn,b,T,Ci,p,ne))}),Ae}function UE(p){var b=La(p);return function(T){return Nh(T,p,b)}}function Nh(p,b,T){var L=T.length;if(p==null)return!L;for(p=Jt(p);L--;){var H=T[L],ne=b[H],Ae=p[H];if(Ae===t&&!(H in p)||!ne(Ae))return!1}return!0}function zv(p,b,T){if(typeof p!="function")throw new ys(a);return iA(function(){p.apply(t,T)},b)}function Sp(p,b,T,L){var H=-1,ne=Bh,Ae=!0,ke=p.length,Ue=[],yt=b.length;if(!ke)return Ue;T&&(b=Kn(b,dn(T))),L?(ne=qd,Ae=!1):b.length>=r&&(ne=nr,Ae=!1,b=new Lh(b));e:for(;++H<ke;){var wt=p[H],Pt=T==null?wt:T(wt);if(wt=L||wt!==0?wt:0,Ae&&Pt===Pt){for(var Kt=yt;Kt--;)if(b[Kt]===Pt)continue e;Ue.push(wt)}else ne(b,Pt,L)||Ue.push(wt)}return Ue}var Nu=YP(hc),Eb=YP(Gv,!0);function Uv(p,b){var T=!0;return Nu(p,function(L,H,ne){return T=!!b(L,H,ne),T}),T}function mm(p,b,T){for(var L=-1,H=p.length;++L<H;){var ne=p[L],Ae=b(ne);if(Ae!=null&&(ke===t?Ae===Ae&&!Dl(Ae):T(Ae,ke)))var ke=Ae,Ue=ne}return Ue}function jd(p,b,T,L){var H=p.length;for(T=oi(T),T<0&&(T=-T>H?0:H+T),L=L===t||L>H?H:oi(L),L<0&&(L+=H),L=T>L?0:V6(L);T<L;)p[T++]=b;return p}function Vv(p,b){var T=[];return Nu(p,function(L,H,ne){b(L,H,ne)&&T.push(L)}),T}function Aa(p,b,T,L,H){var ne=-1,Ae=p.length;for(T||(T=VQ),H||(H=[]);++ne<Ae;){var ke=p[ne];b>0&&T(ke)?b>1?Aa(ke,b-1,T,L,H):lc(H,ke):L||(H[H.length]=ke)}return H}var Hv=KP(),Sb=KP(!0);function hc(p,b){return p&&Hv(p,b,La)}function Gv(p,b){return p&&Sb(p,b,La)}function gm(p,b){return Ls(b,function(T){return Gh(p[T])})}function Fh(p,b){b=Kd(b,p);for(var T=0,L=b.length;p!=null&&T<L;)p=p[Uu(b[T++])];return T&&T==L?p:t}function Wd(p,b,T){var L=b(p);return ii(p)?L:lc(L,T(p))}function Da(p){return p==null?p===t?$:be:ea&&ea in Jt(p)?LQ(p):$Q(p)}function Qv(p,b){return p>b}function qv(p,b){return p!=null&&gi.call(p,b)}function Mb(p,b){return p!=null&&b in Jt(p)}function VE(p,b,T){return p>=Ii(b,T)&&p<di(b,T)}function Mp(p,b,T){for(var L=T?qd:Bh,H=p[0].length,ne=p.length,Ae=ne,ke=Ke(ne),Ue=1/0,yt=[];Ae--;){var wt=p[Ae];Ae&&b&&(wt=Kn(wt,dn(b))),Ue=Ii(wt.length,Ue),ke[Ae]=!T&&(b||H>=120&&wt.length>=120)?new Lh(Ae&&wt):t}wt=p[0];var Pt=-1,Kt=ke[0];e:for(;++Pt<H&&yt.length<Ue;){var cn=wt[Pt],Nn=b?b(cn):cn;if(cn=T||cn!==0?cn:0,!(Kt?nr(Kt,Nn):L(yt,Nn,T))){for(Ae=ne;--Ae;){var fi=ke[Ae];if(!(fi?nr(fi,Nn):L(p[Ae],Nn,T)))continue e}Kt&&Kt.push(Nn),yt.push(cn)}}return yt}function HE(p,b,T,L){return hc(p,function(H,ne,Ae){b(L,T(H),ne,Ae)}),L}function Xo(p,b,T){b=Kd(b,p),p=p6(p,b);var L=p==null?p:p[Uu(fc(b))];return L==null?t:xn(L,p,T)}function Tb(p){return xs(p)&&Da(p)==je}function GE(p){return xs(p)&&Da(p)==te}function jv(p){return xs(p)&&Da(p)==xt}function Tp(p,b,T,L,H){return p===b?!0:p==null||b==null||!xs(p)&&!xs(b)?p!==p&&b!==b:QE(p,b,T,L,Tp,H)}function QE(p,b,T,L,H,ne){var Ae=ii(p),ke=ii(b),Ue=Ae?Tt:io(p),yt=ke?Tt:io(b);Ue=Ue==je?Ne:Ue,yt=yt==je?Ne:yt;var wt=Ue==Ne,Pt=yt==Ne,Kt=Ue==yt;if(Kt&&Zd(p)){if(!Zd(b))return!1;Ae=!0,wt=!1}if(Kt&&!wt)return ne||(ne=new Bl),Ae||ym(p)?o6(p,b,T,L,H,ne):RQ(p,b,Ue,T,L,H,ne);if(!(T&m)){var cn=wt&&gi.call(p,"__wrapped__"),Nn=Pt&&gi.call(b,"__wrapped__");if(cn||Nn){var fi=cn?p.value():p,Fn=Nn?b.value():b;return ne||(ne=new Bl),H(fi,Fn,T,L,ne)}}return Kt?(ne||(ne=new Bl),DQ(p,b,T,L,H,ne)):!1}function Ib(p){return xs(p)&&io(p)==tt}function Wv(p,b,T,L){var H=T.length,ne=H,Ae=!L;if(p==null)return!ne;for(p=Jt(p);H--;){var ke=T[H];if(Ae&&ke[2]?ke[1]!==p[ke[0]]:!(ke[0]in p))return!1}for(;++H<ne;){ke=T[H];var Ue=ke[0],yt=p[Ue],wt=ke[1];if(Ae&&ke[2]){if(yt===t&&!(Ue in p))return!1}else{var Pt=new Bl;if(L)var Kt=L(yt,wt,Ue,p,b,Pt);if(!(Kt===t?Tp(wt,yt,m|A,L,Pt):Kt))return!1}}return!0}function Pb(p){if(!cs(p)||GQ(p))return!1;var b=Gh(p)?Wc:qe;return b.test(Pp(p))}function qE(p){return xs(p)&&Da(p)==me}function jE(p){return xs(p)&&io(p)==fe}function WE(p){return xs(p)&&Zb(p.length)&&!!qi[Da(p)]}function kb(p){return typeof p=="function"?p:p==null?Zo:typeof p=="object"?ii(p)?Yv(p[0],p[1]):Bb(p):J6(p)}function $v(p){if(!nA(p))return Gr(p);var b=[];for(var T in Jt(p))gi.call(p,T)&&T!="constructor"&&b.push(T);return b}function $E(p){if(!cs(p))return WQ(p);var b=nA(p),T=[];for(var L in p)L=="constructor"&&(b||!gi.call(p,L))||T.push(L);return T}function Xv(p,b){return p<b}function dc(p,b){var T=-1,L=Ko(p)?Ke(p.length):[];return Nu(p,function(H,ne,Ae){L[++T]=b(H,ne,Ae)}),L}function Bb(p){var b=aS(p);return b.length==1&&b[0][2]?d6(b[0][0],b[0][1]):function(T){return T===p||Wv(T,p,b)}}function Yv(p,b){return lS(p)&&h6(b)?d6(Uu(p),b):function(T){var L=AS(T,p);return L===t&&L===b?_S(T,p):Tp(b,L,m|A)}}function vm(p,b,T,L,H){p!==b&&Hv(b,function(ne,Ae){if(H||(H=new Bl),cs(ne))Rb(p,b,Ae,T,vm,L,H);else{var ke=L?L(uS(p,Ae),ne,Ae+"",p,b,H):t;ke===t&&(ke=ne),Nv(p,Ae,ke)}},Jo)}function Rb(p,b,T,L,H,ne,Ae){var ke=uS(p,T),Ue=uS(b,T),yt=Ae.get(Ue);if(yt){Nv(p,T,yt);return}var wt=ne?ne(ke,Ue,T+"",p,b,Ae):t,Pt=wt===t;if(Pt){var Kt=ii(Ue),cn=!Kt&&Zd(Ue),Nn=!Kt&&!cn&&ym(Ue);wt=Ue,Kt||cn||Nn?ii(ke)?wt=ke:Fs(ke)?wt=Yo(ke):cn?(Pt=!1,wt=qP(Ue,!0)):Nn?(Pt=!1,wt=jP(Ue,!0)):wt=[]:rA(Ue)||kp(Ue)?(wt=ke,kp(ke)?wt=H6(ke):(!cs(ke)||Gh(ke))&&(wt=u6(Ue))):Pt=!1}Pt&&(Ae.set(Ue,wt),H(wt,Ue,L,ne,Ae),Ae.delete(Ue)),Nv(p,T,wt)}function Db(p,b){var T=p.length;if(T)return b+=b<0?T:0,Hh(b,T)?p[b]:t}function Lb(p,b,T){b.length?b=Kn(b,function(ne){return ii(ne)?function(Ae){return Fh(Ae,ne.length===1?ne[0]:ne)}:ne}):b=[Zo];var L=-1;b=Kn(b,dn(Rn()));var H=dc(p,function(ne,Ae,ke){var Ue=Kn(b,function(yt){return yt(ne)});return{criteria:Ue,index:++L,value:ne}});return Mi(H,function(ne,Ae){return EQ(ne,Ae,T)})}function Ob(p,b){return Kv(p,b,function(T,L){return _S(p,L)})}function Kv(p,b,T){for(var L=-1,H=b.length,ne={};++L<H;){var Ae=b[L],ke=Fh(p,Ae);T(ke,Ae)&&$d(ne,Kd(Ae,p),ke)}return ne}function Nb(p){return function(b){return Fh(b,p)}}function Jv(p,b,T,L){var H=L?Bn:qt,ne=-1,Ae=b.length,ke=p;for(p===b&&(b=Yo(b)),T&&(ke=Kn(p,dn(T)));++ne<Ae;)for(var Ue=0,yt=b[ne],wt=T?T(yt):yt;(Ue=H(ke,wt,Ue,L))>-1;)ke!==p&&ga.call(ke,Ue,1),ga.call(p,Ue,1);return p}function Fb(p,b){for(var T=p?b.length:0,L=T-1;T--;){var H=b[T];if(T==L||H!==ne){var ne=H;Hh(H)?ga.call(p,H,1):Pn(p,H)}}return p}function Zv(p,b){return p+ni(Qa()*(b-p+1))}function XE(p,b,T,L){for(var H=-1,ne=di(en((b-p)/(T||1)),0),Ae=Ke(ne);ne--;)Ae[L?ne:++H]=p,p+=T;return Ae}function eA(p,b){var T="";if(!p||b<1||b>Y)return T;do b%2&&(T+=p),b=ni(b/2),b&&(p+=p);while(b);return T}function ai(p,b){return hS(f6(p,b,Zo),p+"")}function YE(p){return Ov(wm(p))}function KE(p,b){var T=wm(p);return Wb(T,Ou(b,0,T.length))}function $d(p,b,T,L){if(!cs(p))return p;b=Kd(b,p);for(var H=-1,ne=b.length,Ae=ne-1,ke=p;ke!=null&&++H<ne;){var Ue=Uu(b[H]),yt=T;if(Ue==="__proto__"||Ue==="constructor"||Ue==="prototype")return p;if(H!=Ae){var wt=ke[Ue];yt=L?L(wt,Ue,ke):t,yt===t&&(yt=cs(wt)?wt:Hh(b[H+1])?[]:{})}Ep(ke,Ue,yt),ke=ke[Ue]}return p}var zb=$c?function(p,b){return $c.set(p,b),p}:Zo,JE=Gn?function(p,b){return Gn(p,"toString",{configurable:!0,enumerable:!1,value:yS(b),writable:!0})}:Zo;function E(p){return Wb(wm(p))}function g(p,b,T){var L=-1,H=p.length;b<0&&(b=-b>H?0:H+b),T=T>H?H:T,T<0&&(T+=H),H=b>T?0:T-b>>>0,b>>>=0;for(var ne=Ke(H);++L<H;)ne[L]=p[L+b];return ne}function y(p,b){var T;return Nu(p,function(L,H,ne){return T=b(L,H,ne),!T}),!!T}function B(p,b,T){var L=0,H=p==null?L:p.length;if(typeof b=="number"&&b===b&&H<=G){for(;L<H;){var ne=L+H>>>1,Ae=p[ne];Ae!==null&&!Dl(Ae)&&(T?Ae<=b:Ae<b)?L=ne+1:H=ne}return H}return z(p,b,Zo,T)}function z(p,b,T,L){var H=0,ne=p==null?0:p.length;if(ne===0)return 0;b=T(b);for(var Ae=b!==b,ke=b===null,Ue=Dl(b),yt=b===t;H<ne;){var wt=ni((H+ne)/2),Pt=T(p[wt]),Kt=Pt!==t,cn=Pt===null,Nn=Pt===Pt,fi=Dl(Pt);if(Ae)var Fn=L||Nn;else yt?Fn=Nn&&(L||Kt):ke?Fn=Nn&&Kt&&(L||!cn):Ue?Fn=Nn&&Kt&&!cn&&(L||!fi):cn||fi?Fn=!1:Fn=L?Pt<=b:Pt<b;Fn?H=wt+1:ne=wt}return Ii(ne,Ce)}function ve(p,b){for(var T=-1,L=p.length,H=0,ne=[];++T<L;){var Ae=p[T],ke=b?b(Ae):Ae;if(!T||!Jc(ke,Ue)){var Ue=ke;ne[H++]=Ae===0?0:Ae}}return ne}function Ge(p){return typeof p=="number"?p:Dl(p)?Ie:+p}function Mt(p){if(typeof p=="string")return p;if(ii(p))return Kn(p,Mt)+"";if(Dl(p))return Rh?Rh.call(p):"";var b=p+"";return b=="0"&&1/p==-J?"-0":b}function ln(p,b,T){var L=-1,H=Bh,ne=p.length,Ae=!0,ke=[],Ue=ke;if(T)Ae=!1,H=qd;else if(ne>=r){var yt=b?null:kQ(p);if(yt)return We(yt);Ae=!1,H=nr,Ue=new Lh}else Ue=b?[]:ke;e:for(;++L<ne;){var wt=p[L],Pt=b?b(wt):wt;if(wt=T||wt!==0?wt:0,Ae&&Pt===Pt){for(var Kt=Ue.length;Kt--;)if(Ue[Kt]===Pt)continue e;b&&Ue.push(Pt),ke.push(wt)}else H(Ue,Pt,T)||(Ue!==ke&&Ue.push(Pt),ke.push(wt))}return ke}function Pn(p,b){return b=Kd(b,p),p=p6(p,b),p==null||delete p[Uu(fc(b))]}function Di(p,b,T,L){return $d(p,b,T(Fh(p,b)),L)}function Pi(p,b,T,L){for(var H=p.length,ne=L?H:-1;(L?ne--:++ne<H)&&b(p[ne],ne,p););return T?g(p,L?0:ne,L?ne+1:H):g(p,L?ne+1:0,L?H:ne)}function Fu(p,b){var T=p;return T instanceof wi&&(T=T.value()),He(b,function(L,H){return H.func.apply(H.thisArg,lc([L],H.args))},T)}function zh(p,b,T){var L=p.length;if(L<2)return L?ln(p[0]):[];for(var H=-1,ne=Ke(L);++H<L;)for(var Ae=p[H],ke=-1;++ke<L;)ke!=H&&(ne[H]=Sp(ne[H]||Ae,p[ke],b,T));return ln(Aa(ne,1),b,T)}function Xd(p,b,T){for(var L=-1,H=p.length,ne=b.length,Ae={};++L<H;){var ke=L<ne?b[L]:t;T(Ae,p[L],ke)}return Ae}function Yd(p){return Fs(p)?p:[]}function ZE(p){return typeof p=="function"?p:Zo}function Kd(p,b){return ii(p)?p:lS(p,b)?[p]:A6(fr(p))}var yQ=ai;function Jd(p,b,T){var L=p.length;return T=T===t?L:T,!b&&T>=L?p:g(p,b,T)}var QP=An||function(p){return ss.clearTimeout(p)};function qP(p,b){if(b)return p.slice();var T=p.length,L=vi?vi(T):new p.constructor(T);return p.copy(L),L}function eS(p){var b=new p.constructor(p.byteLength);return new to(b).set(new to(p)),b}function wQ(p,b){var T=b?eS(p.buffer):p.buffer;return new p.constructor(T,p.byteOffset,p.byteLength)}function xQ(p){var b=new p.constructor(p.source,se.exec(p));return b.lastIndex=p.lastIndex,b}function CQ(p){return So?Jt(So.call(p)):{}}function jP(p,b){var T=b?eS(p.buffer):p.buffer;return new p.constructor(T,p.byteOffset,p.length)}function WP(p,b){if(p!==b){var T=p!==t,L=p===null,H=p===p,ne=Dl(p),Ae=b!==t,ke=b===null,Ue=b===b,yt=Dl(b);if(!ke&&!yt&&!ne&&p>b||ne&&Ae&&Ue&&!ke&&!yt||L&&Ae&&Ue||!T&&Ue||!H)return 1;if(!L&&!ne&&!yt&&p<b||yt&&T&&H&&!L&&!ne||ke&&T&&H||!Ae&&H||!Ue)return-1}return 0}function EQ(p,b,T){for(var L=-1,H=p.criteria,ne=b.criteria,Ae=H.length,ke=T.length;++L<Ae;){var Ue=WP(H[L],ne[L]);if(Ue){if(L>=ke)return Ue;var yt=T[L];return Ue*(yt=="desc"?-1:1)}}return p.index-b.index}function $P(p,b,T,L){for(var H=-1,ne=p.length,Ae=T.length,ke=-1,Ue=b.length,yt=di(ne-Ae,0),wt=Ke(Ue+yt),Pt=!L;++ke<Ue;)wt[ke]=b[ke];for(;++H<Ae;)(Pt||H<ne)&&(wt[T[H]]=p[H]);for(;yt--;)wt[ke++]=p[H++];return wt}function XP(p,b,T,L){for(var H=-1,ne=p.length,Ae=-1,ke=T.length,Ue=-1,yt=b.length,wt=di(ne-ke,0),Pt=Ke(wt+yt),Kt=!L;++H<wt;)Pt[H]=p[H];for(var cn=H;++Ue<yt;)Pt[cn+Ue]=b[Ue];for(;++Ae<ke;)(Kt||H<ne)&&(Pt[cn+T[Ae]]=p[H++]);return Pt}function Yo(p,b){var T=-1,L=p.length;for(b||(b=Ke(L));++T<L;)b[T]=p[T];return b}function zu(p,b,T,L){var H=!T;T||(T={});for(var ne=-1,Ae=b.length;++ne<Ae;){var ke=b[ne],Ue=L?L(T[ke],p[ke],ke,T,p):t;Ue===t&&(Ue=p[ke]),H?Ra(T,ke,Ue):Ep(T,ke,Ue)}return T}function SQ(p,b){return zu(p,oS(p),b)}function MQ(p,b){return zu(p,l6(p),b)}function Ub(p,b){return function(T,L){var H=ii(T)?hm:Cb,ne=b?b():{};return H(T,p,Rn(L,2),ne)}}function Am(p){return ai(function(b,T){var L=-1,H=T.length,ne=H>1?T[H-1]:t,Ae=H>2?T[2]:t;for(ne=p.length>3&&typeof ne=="function"?(H--,ne):t,Ae&&Mo(T[0],T[1],Ae)&&(ne=H<3?t:ne,H=1),b=Jt(b);++L<H;){var ke=T[L];ke&&p(b,ke,L,ne)}return b})}function YP(p,b){return function(T,L){if(T==null)return T;if(!Ko(T))return p(T,L);for(var H=T.length,ne=b?H:-1,Ae=Jt(T);(b?ne--:++ne<H)&&L(Ae[ne],ne,Ae)!==!1;);return T}}function KP(p){return function(b,T,L){for(var H=-1,ne=Jt(b),Ae=L(b),ke=Ae.length;ke--;){var Ue=Ae[p?ke:++H];if(T(ne[Ue],Ue,ne)===!1)break}return b}}function TQ(p,b,T){var L=b&_,H=tA(p);function ne(){var Ae=this&&this!==ss&&this instanceof ne?H:p;return Ae.apply(L?T:this,arguments)}return ne}function JP(p){return function(b){b=fr(b);var T=yr(b)?os(b):t,L=T?T[0]:b.charAt(0),H=T?Jd(T,1).join(""):b.slice(1);return L[p]()+H}}function _m(p){return function(b){return He(Y6(X6(b).replace(oc,"")),p,"")}}function tA(p){return function(){var b=arguments;switch(b.length){case 0:return new p;case 1:return new p(b[0]);case 2:return new p(b[0],b[1]);case 3:return new p(b[0],b[1],b[2]);case 4:return new p(b[0],b[1],b[2],b[3]);case 5:return new p(b[0],b[1],b[2],b[3],b[4]);case 6:return new p(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new p(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var T=Du(p.prototype),L=p.apply(T,b);return cs(L)?L:T}}function IQ(p,b,T){var L=tA(p);function H(){for(var ne=arguments.length,Ae=Ke(ne),ke=ne,Ue=bm(H);ke--;)Ae[ke]=arguments[ke];var yt=ne<3&&Ae[0]!==Ue&&Ae[ne-1]!==Ue?[]:or(Ae,Ue);if(ne-=yt.length,ne<T)return i6(p,b,Vb,H.placeholder,t,Ae,yt,t,t,T-ne);var wt=this&&this!==ss&&this instanceof H?L:p;return xn(wt,this,Ae)}return H}function ZP(p){return function(b,T,L){var H=Jt(b);if(!Ko(b)){var ne=Rn(T,3);b=La(b),T=function(ke){return ne(H[ke],ke,H)}}var Ae=p(b,T,L);return Ae>-1?H[ne?b[Ae]:Ae]:t}}function e6(p){return Vh(function(b){var T=b.length,L=T,H=Wo.prototype.thru;for(p&&b.reverse();L--;){var ne=b[L];if(typeof ne!="function")throw new ys(a);if(H&&!Ae&&qb(ne)=="wrapper")var Ae=new Wo([],!0)}for(L=Ae?L:T;++L<T;){ne=b[L];var ke=qb(ne),Ue=ke=="wrapper"?sS(ne):t;Ue&&cS(Ue[0])&&Ue[1]==(P|x|S|k)&&!Ue[4].length&&Ue[9]==1?Ae=Ae[qb(Ue[0])].apply(Ae,Ue[3]):Ae=ne.length==1&&cS(ne)?Ae[ke]():Ae.thru(ne)}return function(){var yt=arguments,wt=yt[0];if(Ae&&yt.length==1&&ii(wt))return Ae.plant(wt).value();for(var Pt=0,Kt=T?b[Pt].apply(this,yt):wt;++Pt<T;)Kt=b[Pt].call(this,Kt);return Kt}})}function Vb(p,b,T,L,H,ne,Ae,ke,Ue,yt){var wt=b&P,Pt=b&_,Kt=b&v,cn=b&(x|C),Nn=b&M,fi=Kt?t:tA(p);function Fn(){for(var Ci=arguments.length,Li=Ke(Ci),Ll=Ci;Ll--;)Li[Ll]=arguments[Ll];if(cn)var To=bm(Fn),Ol=Os(Li,To);if(L&&(Li=$P(Li,L,H,cn)),ne&&(Li=XP(Li,ne,Ae,cn)),Ci-=Ol,cn&&Ci<yt){var zs=or(Li,To);return i6(p,b,Vb,Fn.placeholder,T,Li,zs,ke,Ue,yt-Ci)}var Zc=Pt?T:this,qh=Kt?Zc[p]:p;return Ci=Li.length,ke?Li=XQ(Li,ke):Nn&&Ci>1&&Li.reverse(),wt&&Ue<Ci&&(Li.length=Ue),this&&this!==ss&&this instanceof Fn&&(qh=fi||tA(qh)),qh.apply(Zc,Li)}return Fn}function t6(p,b){return function(T,L){return HE(T,p,b(L),{})}}function Hb(p,b){return function(T,L){var H;if(T===t&&L===t)return b;if(T!==t&&(H=T),L!==t){if(H===t)return L;typeof T=="string"||typeof L=="string"?(T=Mt(T),L=Mt(L)):(T=Ge(T),L=Ge(L)),H=p(T,L)}return H}}function tS(p){return Vh(function(b){return b=Kn(b,dn(Rn())),ai(function(T){var L=this;return p(b,function(H){return xn(H,L,T)})})})}function Gb(p,b){b=b===t?" ":Mt(b);var T=b.length;if(T<2)return T?eA(b,p):b;var L=eA(b,en(p/Ns(b)));return yr(b)?Jd(os(L),0,p).join(""):L.slice(0,p)}function PQ(p,b,T,L){var H=b&_,ne=tA(p);function Ae(){for(var ke=-1,Ue=arguments.length,yt=-1,wt=L.length,Pt=Ke(wt+Ue),Kt=this&&this!==ss&&this instanceof Ae?ne:p;++yt<wt;)Pt[yt]=L[yt];for(;Ue--;)Pt[yt++]=arguments[++ke];return xn(Kt,H?T:this,Pt)}return Ae}function n6(p){return function(b,T,L){return L&&typeof L!="number"&&Mo(b,T,L)&&(T=L=t),b=Qh(b),T===t?(T=b,b=0):T=Qh(T),L=L===t?b<T?1:-1:Qh(L),XE(b,T,L,p)}}function Qb(p){return function(b,T){return typeof b=="string"&&typeof T=="string"||(b=pc(b),T=pc(T)),p(b,T)}}function i6(p,b,T,L,H,ne,Ae,ke,Ue,yt){var wt=b&x,Pt=wt?Ae:t,Kt=wt?t:Ae,cn=wt?ne:t,Nn=wt?t:ne;b|=wt?S:I,b&=~(wt?I:S),b&w||(b&=~(_|v));var fi=[p,b,H,cn,Pt,Nn,Kt,ke,Ue,yt],Fn=T.apply(t,fi);return cS(p)&&m6(Fn,fi),Fn.placeholder=L,g6(Fn,p,b)}function nS(p){var b=Vi[p];return function(T,L){if(T=pc(T),L=L==null?0:Ii(oi(L),292),L&&Hr(T)){var H=(fr(T)+"e").split("e"),ne=b(H[0]+"e"+(+H[1]+L));return H=(fr(ne)+"e").split("e"),+(H[0]+"e"+(+H[1]-L))}return b(T)}}var kQ=xr&&1/We(new xr([,-0]))[1]==J?function(p){return new xr(p)}:CS;function r6(p){return function(b){var T=io(b);return T==tt?bi(b):T==fe?as(b):gr(b,p(b))}}function Uh(p,b,T,L,H,ne,Ae,ke){var Ue=b&v;if(!Ue&&typeof p!="function")throw new ys(a);var yt=L?L.length:0;if(yt||(b&=~(S|I),L=H=t),Ae=Ae===t?Ae:di(oi(Ae),0),ke=ke===t?ke:oi(ke),yt-=H?H.length:0,b&I){var wt=L,Pt=H;L=H=t}var Kt=Ue?t:sS(p),cn=[p,b,T,L,H,wt,Pt,ne,Ae,ke];if(Kt&&jQ(cn,Kt),p=cn[0],b=cn[1],T=cn[2],L=cn[3],H=cn[4],ke=cn[9]=cn[9]===t?Ue?0:p.length:di(cn[9]-yt,0),!ke&&b&(x|C)&&(b&=~(x|C)),!b||b==_)var Nn=TQ(p,b,T);else b==x||b==C?Nn=IQ(p,b,ke):(b==S||b==(_|S))&&!H.length?Nn=PQ(p,b,T,L):Nn=Vb.apply(t,cn);var fi=Kt?zb:m6;return g6(fi(Nn,cn),p,b)}function s6(p,b,T,L){return p===t||Jc(p,Ti[T])&&!gi.call(L,T)?b:p}function a6(p,b,T,L,H,ne){return cs(p)&&cs(b)&&(ne.set(b,p),vm(p,b,t,a6,ne),ne.delete(b)),p}function BQ(p){return rA(p)?t:p}function o6(p,b,T,L,H,ne){var Ae=T&m,ke=p.length,Ue=b.length;if(ke!=Ue&&!(Ae&&Ue>ke))return!1;var yt=ne.get(p),wt=ne.get(b);if(yt&&wt)return yt==b&&wt==p;var Pt=-1,Kt=!0,cn=T&A?new Lh:t;for(ne.set(p,b),ne.set(b,p);++Pt<ke;){var Nn=p[Pt],fi=b[Pt];if(L)var Fn=Ae?L(fi,Nn,Pt,b,p,ne):L(Nn,fi,Pt,p,b,ne);if(Fn!==t){if(Fn)continue;Kt=!1;break}if(cn){if(!xe(b,function(Ci,Li){if(!nr(cn,Li)&&(Nn===Ci||H(Nn,Ci,T,L,ne)))return cn.push(Li)})){Kt=!1;break}}else if(!(Nn===fi||H(Nn,fi,T,L,ne))){Kt=!1;break}}return ne.delete(p),ne.delete(b),Kt}function RQ(p,b,T,L,H,ne,Ae){switch(T){case Qe:if(p.byteLength!=b.byteLength||p.byteOffset!=b.byteOffset)return!1;p=p.buffer,b=b.buffer;case te:return!(p.byteLength!=b.byteLength||!ne(new to(p),new to(b)));case De:case xt:case he:return Jc(+p,+b);case et:return p.name==b.name&&p.message==b.message;case me:case Be:return p==b+"";case tt:var ke=bi;case fe:var Ue=L&m;if(ke||(ke=We),p.size!=b.size&&!Ue)return!1;var yt=Ae.get(p);if(yt)return yt==b;L|=A,Ae.set(p,b);var wt=o6(ke(p),ke(b),L,H,ne,Ae);return Ae.delete(p),wt;case V:if(So)return So.call(p)==So.call(b)}return!1}function DQ(p,b,T,L,H,ne){var Ae=T&m,ke=iS(p),Ue=ke.length,yt=iS(b),wt=yt.length;if(Ue!=wt&&!Ae)return!1;for(var Pt=Ue;Pt--;){var Kt=ke[Pt];if(!(Ae?Kt in b:gi.call(b,Kt)))return!1}var cn=ne.get(p),Nn=ne.get(b);if(cn&&Nn)return cn==b&&Nn==p;var fi=!0;ne.set(p,b),ne.set(b,p);for(var Fn=Ae;++Pt<Ue;){Kt=ke[Pt];var Ci=p[Kt],Li=b[Kt];if(L)var Ll=Ae?L(Li,Ci,Kt,b,p,ne):L(Ci,Li,Kt,p,b,ne);if(!(Ll===t?Ci===Li||H(Ci,Li,T,L,ne):Ll)){fi=!1;break}Fn||(Fn=Kt=="constructor")}if(fi&&!Fn){var To=p.constructor,Ol=b.constructor;To!=Ol&&"constructor"in p&&"constructor"in b&&!(typeof To=="function"&&To instanceof To&&typeof Ol=="function"&&Ol instanceof Ol)&&(fi=!1)}return ne.delete(p),ne.delete(b),fi}function Vh(p){return hS(f6(p,t,w6),p+"")}function iS(p){return Wd(p,La,oS)}function rS(p){return Wd(p,Jo,l6)}var sS=$c?function(p){return $c.get(p)}:CS;function qb(p){for(var b=p.name+"",T=dr[b],L=gi.call(dr,b)?T.length:0;L--;){var H=T[L],ne=H.func;if(ne==null||ne==p)return H.name}return b}function bm(p){var b=gi.call(K,"placeholder")?K:p;return b.placeholder}function Rn(){var p=K.iteratee||wS;return p=p===wS?kb:p,arguments.length?p(arguments[0],arguments[1]):p}function jb(p,b){var T=p.__data__;return HQ(b)?T[typeof b=="string"?"string":"hash"]:T.map}function aS(p){for(var b=La(p),T=b.length;T--;){var L=b[T],H=p[L];b[T]=[L,H,h6(H)]}return b}function Ip(p,b){var T=wo(p,b);return Pb(T)?T:t}function LQ(p){var b=gi.call(p,ea),T=p[ea];try{p[ea]=t;var L=!0}catch{}var H=ws.call(p);return L&&(b?p[ea]=T:delete p[ea]),H}var oS=_n?function(p){return p==null?[]:(p=Jt(p),Ls(_n(p),function(b){return no.call(p,b)}))}:ES,l6=_n?function(p){for(var b=[];p;)lc(b,oS(p)),p=qo(p);return b}:ES,io=Da;(ta&&io(new ta(new ArrayBuffer(1)))!=Qe||Ba&&io(new Ba)!=tt||va&&io(va.resolve())!=nt||xr&&io(new xr)!=fe||Cr&&io(new Cr)!=ee)&&(io=function(p){var b=Da(p),T=b==Ne?p.constructor:t,L=T?Pp(T):"";if(L)switch(L){case ls:return Qe;case jo:return tt;case xp:return nt;case fm:return fe;case Xc:return ee}return b});function OQ(p,b,T){for(var L=-1,H=T.length;++L<H;){var ne=T[L],Ae=ne.size;switch(ne.type){case"drop":p+=Ae;break;case"dropRight":b-=Ae;break;case"take":b=Ii(b,p+Ae);break;case"takeRight":p=di(p,b-Ae);break}}return{start:p,end:b}}function NQ(p){var b=p.match(Uc);return b?b[1].split(Mu):[]}function c6(p,b,T){b=Kd(b,p);for(var L=-1,H=b.length,ne=!1;++L<H;){var Ae=Uu(b[L]);if(!(ne=p!=null&&T(p,Ae)))break;p=p[Ae]}return ne||++L!=H?ne:(H=p==null?0:p.length,!!H&&Zb(H)&&Hh(Ae,H)&&(ii(p)||kp(p)))}function FQ(p){var b=p.length,T=new p.constructor(b);return b&&typeof p[0]=="string"&&gi.call(p,"index")&&(T.index=p.index,T.input=p.input),T}function u6(p){return typeof p.constructor=="function"&&!nA(p)?Du(qo(p)):{}}function zQ(p,b,T){var L=p.constructor;switch(b){case te:return eS(p);case De:case xt:return new L(+p);case Qe:return wQ(p,T);case Vt:case ye:case Ee:case St:case Rt:case Bt:case Qt:case Nt:case $t:return jP(p,T);case tt:return new L;case he:case Be:return new L(p);case me:return xQ(p);case fe:return new L;case V:return CQ(p)}}function UQ(p,b){var T=b.length;if(!T)return p;var L=T-1;return b[L]=(T>1?"& ":"")+b[L],b=b.join(T>2?", ":" "),p.replace(Sl,`{
/* [wrapped with `+b+`] */
`)}function VQ(p){return ii(p)||kp(p)||!!(kl&&p&&p[kl])}function Hh(p,b){var T=typeof p;return b=b??Y,!!b&&(T=="number"||T!="symbol"&&Yt.test(p))&&p>-1&&p%1==0&&p<b}function Mo(p,b,T){if(!cs(T))return!1;var L=typeof b;return(L=="number"?Ko(T)&&Hh(b,T.length):L=="string"&&b in T)?Jc(T[b],p):!1}function lS(p,b){if(ii(p))return!1;var T=typeof p;return T=="number"||T=="symbol"||T=="boolean"||p==null||Dl(p)?!0:vs.test(p)||!ei.test(p)||b!=null&&p in Jt(b)}function HQ(p){var b=typeof p;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?p!=="__proto__":p===null}function cS(p){var b=qb(p),T=K[b];if(typeof T!="function"||!(b in wi.prototype))return!1;if(p===T)return!0;var L=sS(T);return!!L&&p===L[0]}function GQ(p){return!!eo&&eo in p}var QQ=ka?Gh:SS;function nA(p){var b=p&&p.constructor,T=typeof b=="function"&&b.prototype||Ti;return p===T}function h6(p){return p===p&&!cs(p)}function d6(p,b){return function(T){return T==null?!1:T[p]===b&&(b!==t||p in Jt(T))}}function qQ(p){var b=Kb(p,function(L){return T.size===c&&T.clear(),L}),T=b.cache;return b}function jQ(p,b){var T=p[1],L=b[1],H=T|L,ne=H<(_|v|P),Ae=L==P&&T==x||L==P&&T==k&&p[7].length<=b[8]||L==(P|k)&&b[7].length<=b[8]&&T==x;if(!(ne||Ae))return p;L&_&&(p[2]=b[2],H|=T&_?0:w);var ke=b[3];if(ke){var Ue=p[3];p[3]=Ue?$P(Ue,ke,b[4]):ke,p[4]=Ue?or(p[3],u):b[4]}return ke=b[5],ke&&(Ue=p[5],p[5]=Ue?XP(Ue,ke,b[6]):ke,p[6]=Ue?or(p[5],u):b[6]),ke=b[7],ke&&(p[7]=ke),L&P&&(p[8]=p[8]==null?b[8]:Ii(p[8],b[8])),p[9]==null&&(p[9]=b[9]),p[0]=b[0],p[1]=H,p}function WQ(p){var b=[];if(p!=null)for(var T in Jt(p))b.push(T);return b}function $Q(p){return ws.call(p)}function f6(p,b,T){return b=di(b===t?p.length-1:b,0),function(){for(var L=arguments,H=-1,ne=di(L.length-b,0),Ae=Ke(ne);++H<ne;)Ae[H]=L[b+H];H=-1;for(var ke=Ke(b+1);++H<b;)ke[H]=L[H];return ke[b]=T(Ae),xn(p,this,ke)}}function p6(p,b){return b.length<2?p:Fh(p,g(b,0,-1))}function XQ(p,b){for(var T=p.length,L=Ii(b.length,T),H=Yo(p);L--;){var ne=b[L];p[L]=Hh(ne,T)?H[ne]:t}return p}function uS(p,b){if(!(b==="constructor"&&typeof p[b]=="function")&&b!="__proto__")return p[b]}var m6=v6(zb),iA=Ir||function(p,b){return ss.setTimeout(p,b)},hS=v6(JE);function g6(p,b,T){var L=b+"";return hS(p,UQ(L,YQ(NQ(L),T)))}function v6(p){var b=0,T=0;return function(){var L=Pr(),H=q-(L-T);if(T=L,H>0){if(++b>=U)return arguments[0]}else b=0;return p.apply(t,arguments)}}function Wb(p,b){var T=-1,L=p.length,H=L-1;for(b=b===t?L:b;++T<b;){var ne=Zv(T,H),Ae=p[ne];p[ne]=p[T],p[T]=Ae}return p.length=b,p}var A6=qQ(function(p){var b=[];return p.charCodeAt(0)===46&&b.push(""),p.replace(er,function(T,L,H,ne){b.push(H?ne.replace(Tu,"$1"):L||T)}),b});function Uu(p){if(typeof p=="string"||Dl(p))return p;var b=p+"";return b=="0"&&1/p==-J?"-0":b}function Pp(p){if(p!=null){try{return vr.call(p)}catch{}try{return p+""}catch{}}return""}function YQ(p,b){return Ia(oe,function(T){var L="_."+T[0];b&T[1]&&!Bh(p,L)&&p.push(L)}),p.sort()}function _6(p){if(p instanceof wi)return p.clone();var b=new Wo(p.__wrapped__,p.__chain__);return b.__actions__=Yo(p.__actions__),b.__index__=p.__index__,b.__values__=p.__values__,b}function KQ(p,b,T){(T?Mo(p,b,T):b===t)?b=1:b=di(oi(b),0);var L=p==null?0:p.length;if(!L||b<1)return[];for(var H=0,ne=0,Ae=Ke(en(L/b));H<L;)Ae[ne++]=g(p,H,H+=b);return Ae}function JQ(p){for(var b=-1,T=p==null?0:p.length,L=0,H=[];++b<T;){var ne=p[b];ne&&(H[L++]=ne)}return H}function ZQ(){var p=arguments.length;if(!p)return[];for(var b=Ke(p-1),T=arguments[0],L=p;L--;)b[L-1]=arguments[L];return lc(ii(T)?Yo(T):[T],Aa(b,1))}var eq=ai(function(p,b){return Fs(p)?Sp(p,Aa(b,1,Fs,!0)):[]}),tq=ai(function(p,b){var T=fc(b);return Fs(T)&&(T=t),Fs(p)?Sp(p,Aa(b,1,Fs,!0),Rn(T,2)):[]}),nq=ai(function(p,b){var T=fc(b);return Fs(T)&&(T=t),Fs(p)?Sp(p,Aa(b,1,Fs,!0),t,T):[]});function iq(p,b,T){var L=p==null?0:p.length;return L?(b=T||b===t?1:oi(b),g(p,b<0?0:b,L)):[]}function rq(p,b,T){var L=p==null?0:p.length;return L?(b=T||b===t?1:oi(b),b=L-b,g(p,0,b<0?0:b)):[]}function sq(p,b){return p&&p.length?Pi(p,Rn(b,3),!0,!0):[]}function aq(p,b){return p&&p.length?Pi(p,Rn(b,3),!0):[]}function oq(p,b,T,L){var H=p==null?0:p.length;return H?(T&&typeof T!="number"&&Mo(p,b,T)&&(T=0,L=H),jd(p,b,T,L)):[]}function b6(p,b,T){var L=p==null?0:p.length;if(!L)return-1;var H=T==null?0:oi(T);return H<0&&(H=di(L+H,0)),Ye(p,Rn(b,3),H)}function y6(p,b,T){var L=p==null?0:p.length;if(!L)return-1;var H=L-1;return T!==t&&(H=oi(T),H=T<0?di(L+H,0):Ii(H,L-1)),Ye(p,Rn(b,3),H,!0)}function w6(p){var b=p==null?0:p.length;return b?Aa(p,1):[]}function lq(p){var b=p==null?0:p.length;return b?Aa(p,J):[]}function cq(p,b){var T=p==null?0:p.length;return T?(b=b===t?1:oi(b),Aa(p,b)):[]}function uq(p){for(var b=-1,T=p==null?0:p.length,L={};++b<T;){var H=p[b];L[H[0]]=H[1]}return L}function x6(p){return p&&p.length?p[0]:t}function hq(p,b,T){var L=p==null?0:p.length;if(!L)return-1;var H=T==null?0:oi(T);return H<0&&(H=di(L+H,0)),qt(p,b,H)}function dq(p){var b=p==null?0:p.length;return b?g(p,0,-1):[]}var fq=ai(function(p){var b=Kn(p,Yd);return b.length&&b[0]===p[0]?Mp(b):[]}),pq=ai(function(p){var b=fc(p),T=Kn(p,Yd);return b===fc(T)?b=t:T.pop(),T.length&&T[0]===p[0]?Mp(T,Rn(b,2)):[]}),mq=ai(function(p){var b=fc(p),T=Kn(p,Yd);return b=typeof b=="function"?b:t,b&&T.pop(),T.length&&T[0]===p[0]?Mp(T,t,b):[]});function gq(p,b){return p==null?"":yi.call(p,b)}function fc(p){var b=p==null?0:p.length;return b?p[b-1]:t}function vq(p,b,T){var L=p==null?0:p.length;if(!L)return-1;var H=L;return T!==t&&(H=oi(T),H=H<0?di(L+H,0):Ii(H,L-1)),b===b?Pa(p,b,H):Ye(p,ti,H,!0)}function Aq(p,b){return p&&p.length?Db(p,oi(b)):t}var _q=ai(C6);function C6(p,b){return p&&p.length&&b&&b.length?Jv(p,b):p}function bq(p,b,T){return p&&p.length&&b&&b.length?Jv(p,b,Rn(T,2)):p}function yq(p,b,T){return p&&p.length&&b&&b.length?Jv(p,b,t,T):p}var wq=Vh(function(p,b){var T=p==null?0:p.length,L=Fv(p,b);return Fb(p,Kn(b,function(H){return Hh(H,T)?+H:H}).sort(WP)),L});function xq(p,b){var T=[];if(!(p&&p.length))return T;var L=-1,H=[],ne=p.length;for(b=Rn(b,3);++L<ne;){var Ae=p[L];b(Ae,L,p)&&(T.push(Ae),H.push(L))}return Fb(p,H),T}function dS(p){return p==null?p:kr.call(p)}function Cq(p,b,T){var L=p==null?0:p.length;return L?(T&&typeof T!="number"&&Mo(p,b,T)?(b=0,T=L):(b=b==null?0:oi(b),T=T===t?L:oi(T)),g(p,b,T)):[]}function Eq(p,b){return B(p,b)}function Sq(p,b,T){return z(p,b,Rn(T,2))}function Mq(p,b){var T=p==null?0:p.length;if(T){var L=B(p,b);if(L<T&&Jc(p[L],b))return L}return-1}function Tq(p,b){return B(p,b,!0)}function Iq(p,b,T){return z(p,b,Rn(T,2),!0)}function Pq(p,b){var T=p==null?0:p.length;if(T){var L=B(p,b,!0)-1;if(Jc(p[L],b))return L}return-1}function kq(p){return p&&p.length?ve(p):[]}function Bq(p,b){return p&&p.length?ve(p,Rn(b,2)):[]}function Rq(p){var b=p==null?0:p.length;return b?g(p,1,b):[]}function Dq(p,b,T){return p&&p.length?(b=T||b===t?1:oi(b),g(p,0,b<0?0:b)):[]}function Lq(p,b,T){var L=p==null?0:p.length;return L?(b=T||b===t?1:oi(b),b=L-b,g(p,b<0?0:b,L)):[]}function Oq(p,b){return p&&p.length?Pi(p,Rn(b,3),!1,!0):[]}function Nq(p,b){return p&&p.length?Pi(p,Rn(b,3)):[]}var Fq=ai(function(p){return ln(Aa(p,1,Fs,!0))}),zq=ai(function(p){var b=fc(p);return Fs(b)&&(b=t),ln(Aa(p,1,Fs,!0),Rn(b,2))}),Uq=ai(function(p){var b=fc(p);return b=typeof b=="function"?b:t,ln(Aa(p,1,Fs,!0),t,b)});function Vq(p){return p&&p.length?ln(p):[]}function Hq(p,b){return p&&p.length?ln(p,Rn(b,2)):[]}function Gq(p,b){return b=typeof b=="function"?b:t,p&&p.length?ln(p,t,b):[]}function fS(p){if(!(p&&p.length))return[];var b=0;return p=Ls(p,function(T){if(Fs(T))return b=di(T.length,b),!0}),mr(b,function(T){return Kn(p,on(T))})}function E6(p,b){if(!(p&&p.length))return[];var T=fS(p);return b==null?T:Kn(T,function(L){return xn(b,t,L)})}var Qq=ai(function(p,b){return Fs(p)?Sp(p,b):[]}),qq=ai(function(p){return zh(Ls(p,Fs))}),jq=ai(function(p){var b=fc(p);return Fs(b)&&(b=t),zh(Ls(p,Fs),Rn(b,2))}),Wq=ai(function(p){var b=fc(p);return b=typeof b=="function"?b:t,zh(Ls(p,Fs),t,b)}),$q=ai(fS);function Xq(p,b){return Xd(p||[],b||[],Ep)}function Yq(p,b){return Xd(p||[],b||[],$d)}var Kq=ai(function(p){var b=p.length,T=b>1?p[b-1]:t;return T=typeof T=="function"?(p.pop(),T):t,E6(p,T)});function S6(p){var b=K(p);return b.__chain__=!0,b}function Jq(p,b){return b(p),p}function $b(p,b){return b(p)}var Zq=Vh(function(p){var b=p.length,T=b?p[0]:0,L=this.__wrapped__,H=function(ne){return Fv(ne,p)};return b>1||this.__actions__.length||!(L instanceof wi)||!Hh(T)?this.thru(H):(L=L.slice(T,+T+(b?1:0)),L.__actions__.push({func:$b,args:[H],thisArg:t}),new Wo(L,this.__chain__).thru(function(ne){return b&&!ne.length&&ne.push(t),ne}))});function ej(){return S6(this)}function tj(){return new Wo(this.value(),this.__chain__)}function nj(){this.__values__===t&&(this.__values__=U6(this.value()));var p=this.__index__>=this.__values__.length,b=p?t:this.__values__[this.__index__++];return{done:p,value:b}}function ij(){return this}function rj(p){for(var b,T=this;T instanceof Cp;){var L=_6(T);L.__index__=0,L.__values__=t,b?H.__wrapped__=L:b=L;var H=L;T=T.__wrapped__}return H.__wrapped__=p,b}function sj(){var p=this.__wrapped__;if(p instanceof wi){var b=p;return this.__actions__.length&&(b=new wi(this)),b=b.reverse(),b.__actions__.push({func:$b,args:[dS],thisArg:t}),new Wo(b,this.__chain__)}return this.thru(dS)}function aj(){return Fu(this.__wrapped__,this.__actions__)}var oj=Ub(function(p,b,T){gi.call(p,T)?++p[T]:Ra(p,T,1)});function lj(p,b,T){var L=ii(p)?dm:Uv;return T&&Mo(p,b,T)&&(b=t),L(p,Rn(b,3))}function cj(p,b){var T=ii(p)?Ls:Vv;return T(p,Rn(b,3))}var uj=ZP(b6),hj=ZP(y6);function dj(p,b){return Aa(Xb(p,b),1)}function fj(p,b){return Aa(Xb(p,b),J)}function pj(p,b,T){return T=T===t?1:oi(T),Aa(Xb(p,b),T)}function M6(p,b){var T=ii(p)?Ia:Nu;return T(p,Rn(b,3))}function T6(p,b){var T=ii(p)?kh:Eb;return T(p,Rn(b,3))}var mj=Ub(function(p,b,T){gi.call(p,T)?p[T].push(b):Ra(p,T,[b])});function gj(p,b,T,L){p=Ko(p)?p:wm(p),T=T&&!L?oi(T):0;var H=p.length;return T<0&&(T=di(H+T,0)),ey(p)?T<=H&&p.indexOf(b,T)>-1:!!H&&qt(p,b,T)>-1}var vj=ai(function(p,b,T){var L=-1,H=typeof b=="function",ne=Ko(p)?Ke(p.length):[];return Nu(p,function(Ae){ne[++L]=H?xn(b,Ae,T):Xo(Ae,b,T)}),ne}),Aj=Ub(function(p,b,T){Ra(p,T,b)});function Xb(p,b){var T=ii(p)?Kn:dc;return T(p,Rn(b,3))}function _j(p,b,T,L){return p==null?[]:(ii(b)||(b=b==null?[]:[b]),T=L?t:T,ii(T)||(T=T==null?[]:[T]),Lb(p,b,T))}var bj=Ub(function(p,b,T){p[T?0:1].push(b)},function(){return[[],[]]});function yj(p,b,T){var L=ii(p)?He:hn,H=arguments.length<3;return L(p,Rn(b,4),T,H,Nu)}function wj(p,b,T){var L=ii(p)?X:hn,H=arguments.length<3;return L(p,Rn(b,4),T,H,Eb)}function xj(p,b){var T=ii(p)?Ls:Vv;return T(p,Jb(Rn(b,3)))}function Cj(p){var b=ii(p)?Ov:YE;return b(p)}function Ej(p,b,T){(T?Mo(p,b,T):b===t)?b=1:b=oi(b);var L=ii(p)?xb:KE;return L(p,b)}function Sj(p){var b=ii(p)?FE:E;return b(p)}function Mj(p){if(p==null)return 0;if(Ko(p))return ey(p)?Ns(p):p.length;var b=io(p);return b==tt||b==fe?p.size:$v(p).length}function Tj(p,b,T){var L=ii(p)?xe:y;return T&&Mo(p,b,T)&&(b=t),L(p,Rn(b,3))}var Ij=ai(function(p,b){if(p==null)return[];var T=b.length;return T>1&&Mo(p,b[0],b[1])?b=[]:T>2&&Mo(b[0],b[1],b[2])&&(b=[b[0]]),Lb(p,Aa(b,1),[])}),Yb=xi||function(){return ss.Date.now()};function Pj(p,b){if(typeof b!="function")throw new ys(a);return p=oi(p),function(){if(--p<1)return b.apply(this,arguments)}}function I6(p,b,T){return b=T?t:b,b=p&&b==null?p.length:b,Uh(p,P,t,t,t,t,b)}function P6(p,b){var T;if(typeof b!="function")throw new ys(a);return p=oi(p),function(){return--p>0&&(T=b.apply(this,arguments)),p<=1&&(b=t),T}}var pS=ai(function(p,b,T){var L=_;if(T.length){var H=or(T,bm(pS));L|=S}return Uh(p,L,b,T,H)}),k6=ai(function(p,b,T){var L=_|v;if(T.length){var H=or(T,bm(k6));L|=S}return Uh(b,L,p,T,H)});function B6(p,b,T){b=T?t:b;var L=Uh(p,x,t,t,t,t,t,b);return L.placeholder=B6.placeholder,L}function R6(p,b,T){b=T?t:b;var L=Uh(p,C,t,t,t,t,t,b);return L.placeholder=R6.placeholder,L}function D6(p,b,T){var L,H,ne,Ae,ke,Ue,yt=0,wt=!1,Pt=!1,Kt=!0;if(typeof p!="function")throw new ys(a);b=pc(b)||0,cs(T)&&(wt=!!T.leading,Pt="maxWait"in T,ne=Pt?di(pc(T.maxWait)||0,b):ne,Kt="trailing"in T?!!T.trailing:Kt);function cn(zs){var Zc=L,qh=H;return L=H=t,yt=zs,Ae=p.apply(qh,Zc),Ae}function Nn(zs){return yt=zs,ke=iA(Ci,b),wt?cn(zs):Ae}function fi(zs){var Zc=zs-Ue,qh=zs-yt,Z6=b-Zc;return Pt?Ii(Z6,ne-qh):Z6}function Fn(zs){var Zc=zs-Ue,qh=zs-yt;return Ue===t||Zc>=b||Zc<0||Pt&&qh>=ne}function Ci(){var zs=Yb();if(Fn(zs))return Li(zs);ke=iA(Ci,fi(zs))}function Li(zs){return ke=t,Kt&&L?cn(zs):(L=H=t,Ae)}function Ll(){ke!==t&&QP(ke),yt=0,L=Ue=H=ke=t}function To(){return ke===t?Ae:Li(Yb())}function Ol(){var zs=Yb(),Zc=Fn(zs);if(L=arguments,H=this,Ue=zs,Zc){if(ke===t)return Nn(Ue);if(Pt)return QP(ke),ke=iA(Ci,b),cn(Ue)}return ke===t&&(ke=iA(Ci,b)),Ae}return Ol.cancel=Ll,Ol.flush=To,Ol}var kj=ai(function(p,b){return zv(p,1,b)}),Bj=ai(function(p,b,T){return zv(p,pc(b)||0,T)});function Rj(p){return Uh(p,M)}function Kb(p,b){if(typeof p!="function"||b!=null&&typeof b!="function")throw new ys(a);var T=function(){var L=arguments,H=b?b.apply(this,L):L[0],ne=T.cache;if(ne.has(H))return ne.get(H);var Ae=p.apply(this,L);return T.cache=ne.set(H,Ae)||ne,Ae};return T.cache=new(Kb.Cache||Kc),T}Kb.Cache=Kc;function Jb(p){if(typeof p!="function")throw new ys(a);return function(){var b=arguments;switch(b.length){case 0:return!p.call(this);case 1:return!p.call(this,b[0]);case 2:return!p.call(this,b[0],b[1]);case 3:return!p.call(this,b[0],b[1],b[2])}return!p.apply(this,b)}}function Dj(p){return P6(2,p)}var Lj=yQ(function(p,b){b=b.length==1&&ii(b[0])?Kn(b[0],dn(Rn())):Kn(Aa(b,1),dn(Rn()));var T=b.length;return ai(function(L){for(var H=-1,ne=Ii(L.length,T);++H<ne;)L[H]=b[H].call(this,L[H]);return xn(p,this,L)})}),mS=ai(function(p,b){var T=or(b,bm(mS));return Uh(p,S,t,b,T)}),L6=ai(function(p,b){var T=or(b,bm(L6));return Uh(p,I,t,b,T)}),Oj=Vh(function(p,b){return Uh(p,k,t,t,t,b)});function Nj(p,b){if(typeof p!="function")throw new ys(a);return b=b===t?b:oi(b),ai(p,b)}function Fj(p,b){if(typeof p!="function")throw new ys(a);return b=b==null?0:di(oi(b),0),ai(function(T){var L=T[b],H=Jd(T,0,b);return L&&lc(H,L),xn(p,this,H)})}function zj(p,b,T){var L=!0,H=!0;if(typeof p!="function")throw new ys(a);return cs(T)&&(L="leading"in T?!!T.leading:L,H="trailing"in T?!!T.trailing:H),D6(p,b,{leading:L,maxWait:b,trailing:H})}function Uj(p){return I6(p,1)}function Vj(p,b){return mS(ZE(b),p)}function Hj(){if(!arguments.length)return[];var p=arguments[0];return ii(p)?p:[p]}function Gj(p){return $o(p,f)}function Qj(p,b){return b=typeof b=="function"?b:t,$o(p,f,b)}function qj(p){return $o(p,h|f)}function jj(p,b){return b=typeof b=="function"?b:t,$o(p,h|f,b)}function Wj(p,b){return b==null||Nh(p,b,La(b))}function Jc(p,b){return p===b||p!==p&&b!==b}var $j=Qb(Qv),Xj=Qb(function(p,b){return p>=b}),kp=Tb(function(){return arguments}())?Tb:function(p){return xs(p)&&gi.call(p,"callee")&&!no.call(p,"callee")},ii=Ke.isArray,Yj=bp?dn(bp):GE;function Ko(p){return p!=null&&Zb(p.length)&&!Gh(p)}function Fs(p){return xs(p)&&Ko(p)}function Kj(p){return p===!0||p===!1||xs(p)&&Da(p)==De}var Zd=ri||SS,Jj=um?dn(um):jv;function Zj(p){return xs(p)&&p.nodeType===1&&!rA(p)}function eW(p){if(p==null)return!0;if(Ko(p)&&(ii(p)||typeof p=="string"||typeof p.splice=="function"||Zd(p)||ym(p)||kp(p)))return!p.length;var b=io(p);if(b==tt||b==fe)return!p.size;if(nA(p))return!$v(p).length;for(var T in p)if(gi.call(p,T))return!1;return!0}function tW(p,b){return Tp(p,b)}function nW(p,b,T){T=typeof T=="function"?T:t;var L=T?T(p,b):t;return L===t?Tp(p,b,t,T):!!L}function gS(p){if(!xs(p))return!1;var b=Da(p);return b==et||b==mt||typeof p.message=="string"&&typeof p.name=="string"&&!rA(p)}function iW(p){return typeof p=="number"&&Hr(p)}function Gh(p){if(!cs(p))return!1;var b=Da(p);return b==st||b==ce||b==rt||b==ze}function O6(p){return typeof p=="number"&&p==oi(p)}function Zb(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=Y}function cs(p){var b=typeof p;return p!=null&&(b=="object"||b=="function")}function xs(p){return p!=null&&typeof p=="object"}var N6=yp?dn(yp):Ib;function rW(p,b){return p===b||Wv(p,b,aS(b))}function sW(p,b,T){return T=typeof T=="function"?T:t,Wv(p,b,aS(b),T)}function aW(p){return F6(p)&&p!=+p}function oW(p){if(QQ(p))throw new Ve(s);return Pb(p)}function lW(p){return p===null}function cW(p){return p==null}function F6(p){return typeof p=="number"||xs(p)&&Da(p)==he}function rA(p){if(!xs(p)||Da(p)!=Ne)return!1;var b=qo(p);if(b===null)return!0;var T=gi.call(b,"constructor")&&b.constructor;return typeof T=="function"&&T instanceof T&&vr.call(T)==uc}var vS=wp?dn(wp):qE;function uW(p){return O6(p)&&p>=-Y&&p<=Y}var z6=Ph?dn(Ph):jE;function ey(p){return typeof p=="string"||!ii(p)&&xs(p)&&Da(p)==Be}function Dl(p){return typeof p=="symbol"||xs(p)&&Da(p)==V}var ym=Qd?dn(Qd):WE;function hW(p){return p===t}function dW(p){return xs(p)&&io(p)==ee}function fW(p){return xs(p)&&Da(p)==Te}var pW=Qb(Xv),mW=Qb(function(p,b){return p<=b});function U6(p){if(!p)return[];if(Ko(p))return ey(p)?os(p):Yo(p);if(Co&&p[Co])return Kr(p[Co]());var b=io(p),T=b==tt?bi:b==fe?We:wm;return T(p)}function Qh(p){if(!p)return p===0?p:0;if(p=pc(p),p===J||p===-J){var b=p<0?-1:1;return b*Pe}return p===p?p:0}function oi(p){var b=Qh(p),T=b%1;return b===b?T?b-T:b:0}function V6(p){return p?Ou(oi(p),0,pe):0}function pc(p){if(typeof p=="number")return p;if(Dl(p))return Ie;if(cs(p)){var b=typeof p.valueOf=="function"?p.valueOf():p;p=cs(b)?b+"":b}if(typeof p!="string")return p===0?p:+p;p=_s(p);var T=ht.test(p);return T||gt.test(p)?vp(p.slice(2),T?2:8):Ze.test(p)?Ie:+p}function H6(p){return zu(p,Jo(p))}function gW(p){return p?Ou(oi(p),-Y,Y):p===0?p:0}function fr(p){return p==null?"":Mt(p)}var vW=Am(function(p,b){if(nA(b)||Ko(b)){zu(b,La(b),p);return}for(var T in b)gi.call(b,T)&&Ep(p,T,b[T])}),G6=Am(function(p,b){zu(b,Jo(b),p)}),ty=Am(function(p,b,T,L){zu(b,Jo(b),p,L)}),AW=Am(function(p,b,T,L){zu(b,La(b),p,L)}),_W=Vh(Fv);function bW(p,b){var T=Du(p);return b==null?T:Oh(T,b)}var yW=ai(function(p,b){p=Jt(p);var T=-1,L=b.length,H=L>2?b[2]:t;for(H&&Mo(b[0],b[1],H)&&(L=1);++T<L;)for(var ne=b[T],Ae=Jo(ne),ke=-1,Ue=Ae.length;++ke<Ue;){var yt=Ae[ke],wt=p[yt];(wt===t||Jc(wt,Ti[yt])&&!gi.call(p,yt))&&(p[yt]=ne[yt])}return p}),wW=ai(function(p){return p.push(t,a6),xn(Q6,t,p)});function xW(p,b){return at(p,Rn(b,3),hc)}function CW(p,b){return at(p,Rn(b,3),Gv)}function EW(p,b){return p==null?p:Hv(p,Rn(b,3),Jo)}function SW(p,b){return p==null?p:Sb(p,Rn(b,3),Jo)}function MW(p,b){return p&&hc(p,Rn(b,3))}function TW(p,b){return p&&Gv(p,Rn(b,3))}function IW(p){return p==null?[]:gm(p,La(p))}function PW(p){return p==null?[]:gm(p,Jo(p))}function AS(p,b,T){var L=p==null?t:Fh(p,b);return L===t?T:L}function kW(p,b){return p!=null&&c6(p,b,qv)}function _S(p,b){return p!=null&&c6(p,b,Mb)}var BW=t6(function(p,b,T){b!=null&&typeof b.toString!="function"&&(b=ws.call(b)),p[b]=T},yS(Zo)),RW=t6(function(p,b,T){b!=null&&typeof b.toString!="function"&&(b=ws.call(b)),gi.call(p,b)?p[b].push(T):p[b]=[T]},Rn),DW=ai(Xo);function La(p){return Ko(p)?pm(p):$v(p)}function Jo(p){return Ko(p)?pm(p,!0):$E(p)}function LW(p,b){var T={};return b=Rn(b,3),hc(p,function(L,H,ne){Ra(T,b(L,H,ne),L)}),T}function OW(p,b){var T={};return b=Rn(b,3),hc(p,function(L,H,ne){Ra(T,H,b(L,H,ne))}),T}var NW=Am(function(p,b,T){vm(p,b,T)}),Q6=Am(function(p,b,T,L){vm(p,b,T,L)}),FW=Vh(function(p,b){var T={};if(p==null)return T;var L=!1;b=Kn(b,function(ne){return ne=Kd(ne,p),L||(L=ne.length>1),ne}),zu(p,rS(p),T),L&&(T=$o(T,h|d|f,BQ));for(var H=b.length;H--;)Pn(T,b[H]);return T});function zW(p,b){return q6(p,Jb(Rn(b)))}var UW=Vh(function(p,b){return p==null?{}:Ob(p,b)});function q6(p,b){if(p==null)return{};var T=Kn(rS(p),function(L){return[L]});return b=Rn(b),Kv(p,T,function(L,H){return b(L,H[0])})}function VW(p,b,T){b=Kd(b,p);var L=-1,H=b.length;for(H||(H=1,p=t);++L<H;){var ne=p==null?t:p[Uu(b[L])];ne===t&&(L=H,ne=T),p=Gh(ne)?ne.call(p):ne}return p}function HW(p,b,T){return p==null?p:$d(p,b,T)}function GW(p,b,T,L){return L=typeof L=="function"?L:t,p==null?p:$d(p,b,T,L)}var j6=r6(La),W6=r6(Jo);function QW(p,b,T){var L=ii(p),H=L||Zd(p)||ym(p);if(b=Rn(b,4),T==null){var ne=p&&p.constructor;H?T=L?new ne:[]:cs(p)?T=Gh(ne)?Du(qo(p)):{}:T={}}return(H?Ia:hc)(p,function(Ae,ke,Ue){return b(T,Ae,ke,Ue)}),T}function qW(p,b){return p==null?!0:Pn(p,b)}function jW(p,b,T){return p==null?p:Di(p,b,ZE(T))}function WW(p,b,T,L){return L=typeof L=="function"?L:t,p==null?p:Di(p,b,ZE(T),L)}function wm(p){return p==null?[]:$s(p,La(p))}function $W(p){return p==null?[]:$s(p,Jo(p))}function XW(p,b,T){return T===t&&(T=b,b=t),T!==t&&(T=pc(T),T=T===T?T:0),b!==t&&(b=pc(b),b=b===b?b:0),Ou(pc(p),b,T)}function YW(p,b,T){return b=Qh(b),T===t?(T=b,b=0):T=Qh(T),p=pc(p),VE(p,b,T)}function KW(p,b,T){if(T&&typeof T!="boolean"&&Mo(p,b,T)&&(b=T=t),T===t&&(typeof b=="boolean"?(T=b,b=t):typeof p=="boolean"&&(T=p,p=t)),p===t&&b===t?(p=0,b=1):(p=Qh(p),b===t?(b=p,p=0):b=Qh(b)),p>b){var L=p;p=b,b=L}if(T||p%1||b%1){var H=Qa();return Ii(p+H*(b-p+Pl("1e-"+((H+"").length-1))),b)}return Zv(p,b)}var JW=_m(function(p,b,T){return b=b.toLowerCase(),p+(T?$6(b):b)});function $6(p){return bS(fr(p).toLowerCase())}function X6(p){return p=fr(p),p&&p.replace(un,fn).replace(Ta,"")}function ZW(p,b,T){p=fr(p),b=Mt(b);var L=p.length;T=T===t?L:Ou(oi(T),0,L);var H=T;return T-=b.length,T>=0&&p.slice(T,H)==b}function e$(p){return p=fr(p),p&&Le.test(p)?p.replace(Lt,br):p}function t$(p){return p=fr(p),p&&El.test(p)?p.replace(fa,"\\$&"):p}var n$=_m(function(p,b,T){return p+(T?"-":"")+b.toLowerCase()}),i$=_m(function(p,b,T){return p+(T?" ":"")+b.toLowerCase()}),r$=JP("toLowerCase");function s$(p,b,T){p=fr(p),b=oi(b);var L=b?Ns(p):0;if(!b||L>=b)return p;var H=(b-L)/2;return Gb(ni(H),T)+p+Gb(en(H),T)}function a$(p,b,T){p=fr(p),b=oi(b);var L=b?Ns(p):0;return b&&L<b?p+Gb(b-L,T):p}function o$(p,b,T){p=fr(p),b=oi(b);var L=b?Ns(p):0;return b&&L<b?Gb(b-L,T)+p:p}function l$(p,b,T){return T||b==null?b=0:b&&(b=+b),lr(fr(p).replace(nc,""),b||0)}function c$(p,b,T){return(T?Mo(p,b,T):b===t)?b=1:b=oi(b),eA(fr(p),b)}function u$(){var p=arguments,b=fr(p[0]);return p.length<3?b:b.replace(p[1],p[2])}var h$=_m(function(p,b,T){return p+(T?"_":"")+b.toLowerCase()});function d$(p,b,T){return T&&typeof T!="number"&&Mo(p,b,T)&&(b=T=t),T=T===t?pe:T>>>0,T?(p=fr(p),p&&(typeof b=="string"||b!=null&&!vS(b))&&(b=Mt(b),!b&&yr(p))?Jd(os(p),0,T):p.split(b,T)):[]}var f$=_m(function(p,b,T){return p+(T?" ":"")+bS(b)});function p$(p,b,T){return p=fr(p),T=T==null?0:Ou(oi(T),0,p.length),b=Mt(b),p.slice(T,T+b.length)==b}function m$(p,b,T){var L=K.templateSettings;T&&Mo(p,b,T)&&(b=t),p=fr(p),b=ty({},b,L,s6);var H=ty({},b.imports,L.imports,s6),ne=La(H),Ae=$s(H,ne),ke,Ue,yt=0,wt=b.interpolate||sn,Pt="__p += '",Kt=ji((b.escape||sn).source+"|"+wt.source+"|"+(wt===gs?Ds:sn).source+"|"+(b.evaluate||sn).source+"|$","g"),cn="//# sourceURL="+(gi.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Gd+"]")+`
`;p.replace(Kt,function(Fn,Ci,Li,Ll,To,Ol){return Li||(Li=Ll),Pt+=p.slice(yt,Ol).replace(yn,On),Ci&&(ke=!0,Pt+=`' +
__e(`+Ci+`) +
'`),To&&(Ue=!0,Pt+=`';
`+To+`;
__p += '`),Li&&(Pt+=`' +
((__t = (`+Li+`)) == null ? '' : __t) +
'`),yt=Ol+Fn.length,Fn}),Pt+=`';
`;var Nn=gi.call(b,"variable")&&b.variable;if(!Nn)Pt=`with (obj) {
`+Pt+`
}
`;else if(_o.test(Nn))throw new Ve(o);Pt=(Ue?Pt.replace(Qn,""):Pt).replace(de,"$1").replace(It,"$1;"),Pt="function("+(Nn||"obj")+`) {
`+(Nn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ke?", __e = _.escape":"")+(Ue?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Pt+`return __p
}`;var fi=K6(function(){return Wn(ne,cn+"return "+Pt).apply(t,Ae)});if(fi.source=Pt,gS(fi))throw fi;return fi}function g$(p){return fr(p).toLowerCase()}function v$(p){return fr(p).toUpperCase()}function A$(p,b,T){if(p=fr(p),p&&(T||b===t))return _s(p);if(!p||!(b=Mt(b)))return p;var L=os(p),H=os(b),ne=In(L,H),Ae=Yr(L,H)+1;return Jd(L,ne,Ae).join("")}function _$(p,b,T){if(p=fr(p),p&&(T||b===t))return p.slice(0,Xs(p)+1);if(!p||!(b=Mt(b)))return p;var L=os(p),H=Yr(L,os(b))+1;return Jd(L,0,H).join("")}function b$(p,b,T){if(p=fr(p),p&&(T||b===t))return p.replace(nc,"");if(!p||!(b=Mt(b)))return p;var L=os(p),H=In(L,os(b));return Jd(L,H).join("")}function y$(p,b){var T=R,L=N;if(cs(b)){var H="separator"in b?b.separator:H;T="length"in b?oi(b.length):T,L="omission"in b?Mt(b.omission):L}p=fr(p);var ne=p.length;if(yr(p)){var Ae=os(p);ne=Ae.length}if(T>=ne)return p;var ke=T-Ns(L);if(ke<1)return L;var Ue=Ae?Jd(Ae,0,ke).join(""):p.slice(0,ke);if(H===t)return Ue+L;if(Ae&&(ke+=Ue.length-ke),vS(H)){if(p.slice(ke).search(H)){var yt,wt=Ue;for(H.global||(H=ji(H.source,fr(se.exec(H))+"g")),H.lastIndex=0;yt=H.exec(wt);)var Pt=yt.index;Ue=Ue.slice(0,Pt===t?ke:Pt)}}else if(p.indexOf(Mt(H),ke)!=ke){var Kt=Ue.lastIndexOf(H);Kt>-1&&(Ue=Ue.slice(0,Kt))}return Ue+L}function w$(p){return p=fr(p),p&&Ft.test(p)?p.replace($e,Jr):p}var x$=_m(function(p,b,T){return p+(T?" ":"")+b.toUpperCase()}),bS=JP("toUpperCase");function Y6(p,b,T){return p=fr(p),b=T?t:b,b===t?bs(p)?cc(p):Oe(p):p.match(b)||[]}var K6=ai(function(p,b){try{return xn(p,t,b)}catch(T){return gS(T)?T:new Ve(T)}}),C$=Vh(function(p,b){return Ia(b,function(T){T=Uu(T),Ra(p,T,pS(p[T],p))}),p});function E$(p){var b=p==null?0:p.length,T=Rn();return p=b?Kn(p,function(L){if(typeof L[1]!="function")throw new ys(a);return[T(L[0]),L[1]]}):[],ai(function(L){for(var H=-1;++H<b;){var ne=p[H];if(xn(ne[0],this,L))return xn(ne[1],this,L)}})}function S$(p){return UE($o(p,h))}function yS(p){return function(){return p}}function M$(p,b){return p==null||p!==p?b:p}var T$=e6(),I$=e6(!0);function Zo(p){return p}function wS(p){return kb(typeof p=="function"?p:$o(p,h))}function P$(p){return Bb($o(p,h))}function k$(p,b){return Yv(p,$o(b,h))}var B$=ai(function(p,b){return function(T){return Xo(T,p,b)}}),R$=ai(function(p,b){return function(T){return Xo(p,T,b)}});function xS(p,b,T){var L=La(b),H=gm(b,L);T==null&&!(cs(b)&&(H.length||!L.length))&&(T=b,b=p,p=this,H=gm(b,La(b)));var ne=!(cs(T)&&"chain"in T)||!!T.chain,Ae=Gh(p);return Ia(H,function(ke){var Ue=b[ke];p[ke]=Ue,Ae&&(p.prototype[ke]=function(){var yt=this.__chain__;if(ne||yt){var wt=p(this.__wrapped__),Pt=wt.__actions__=Yo(this.__actions__);return Pt.push({func:Ue,args:arguments,thisArg:p}),wt.__chain__=yt,wt}return Ue.apply(p,lc([this.value()],arguments))})}),p}function D$(){return ss._===this&&(ss._=jc),this}function CS(){}function L$(p){return p=oi(p),ai(function(b){return Db(b,p)})}var O$=tS(Kn),N$=tS(dm),F$=tS(xe);function J6(p){return lS(p)?on(Uu(p)):Nb(p)}function z$(p){return function(b){return p==null?t:Fh(p,b)}}var U$=n6(),V$=n6(!0);function ES(){return[]}function SS(){return!1}function H$(){return{}}function G$(){return""}function Q$(){return!0}function q$(p,b){if(p=oi(p),p<1||p>Y)return[];var T=pe,L=Ii(p,pe);b=Rn(b),p-=pe;for(var H=mr(L,b);++T<p;)b(T);return H}function j$(p){return ii(p)?Kn(p,Uu):Dl(p)?[p]:Yo(A6(fr(p)))}function W$(p){var b=++Qo;return fr(p)+b}var $$=Hb(function(p,b){return p+b},0),X$=nS("ceil"),Y$=Hb(function(p,b){return p/b},1),K$=nS("floor");function J$(p){return p&&p.length?mm(p,Zo,Qv):t}function Z$(p,b){return p&&p.length?mm(p,Rn(b,2),Qv):t}function eX(p){return an(p,Zo)}function tX(p,b){return an(p,Rn(b,2))}function nX(p){return p&&p.length?mm(p,Zo,Xv):t}function iX(p,b){return p&&p.length?mm(p,Rn(b,2),Xv):t}var rX=Hb(function(p,b){return p*b},1),sX=nS("round"),aX=Hb(function(p,b){return p-b},0);function oX(p){return p&&p.length?ar(p,Zo):0}function lX(p,b){return p&&p.length?ar(p,Rn(b,2)):0}return K.after=Pj,K.ary=I6,K.assign=vW,K.assignIn=G6,K.assignInWith=ty,K.assignWith=AW,K.at=_W,K.before=P6,K.bind=pS,K.bindAll=C$,K.bindKey=k6,K.castArray=Hj,K.chain=S6,K.chunk=KQ,K.compact=JQ,K.concat=ZQ,K.cond=E$,K.conforms=S$,K.constant=yS,K.countBy=oj,K.create=bW,K.curry=B6,K.curryRight=R6,K.debounce=D6,K.defaults=yW,K.defaultsDeep=wW,K.defer=kj,K.delay=Bj,K.difference=eq,K.differenceBy=tq,K.differenceWith=nq,K.drop=iq,K.dropRight=rq,K.dropRightWhile=sq,K.dropWhile=aq,K.fill=oq,K.filter=cj,K.flatMap=dj,K.flatMapDeep=fj,K.flatMapDepth=pj,K.flatten=w6,K.flattenDeep=lq,K.flattenDepth=cq,K.flip=Rj,K.flow=T$,K.flowRight=I$,K.fromPairs=uq,K.functions=IW,K.functionsIn=PW,K.groupBy=mj,K.initial=dq,K.intersection=fq,K.intersectionBy=pq,K.intersectionWith=mq,K.invert=BW,K.invertBy=RW,K.invokeMap=vj,K.iteratee=wS,K.keyBy=Aj,K.keys=La,K.keysIn=Jo,K.map=Xb,K.mapKeys=LW,K.mapValues=OW,K.matches=P$,K.matchesProperty=k$,K.memoize=Kb,K.merge=NW,K.mergeWith=Q6,K.method=B$,K.methodOf=R$,K.mixin=xS,K.negate=Jb,K.nthArg=L$,K.omit=FW,K.omitBy=zW,K.once=Dj,K.orderBy=_j,K.over=O$,K.overArgs=Lj,K.overEvery=N$,K.overSome=F$,K.partial=mS,K.partialRight=L6,K.partition=bj,K.pick=UW,K.pickBy=q6,K.property=J6,K.propertyOf=z$,K.pull=_q,K.pullAll=C6,K.pullAllBy=bq,K.pullAllWith=yq,K.pullAt=wq,K.range=U$,K.rangeRight=V$,K.rearg=Oj,K.reject=xj,K.remove=xq,K.rest=Nj,K.reverse=dS,K.sampleSize=Ej,K.set=HW,K.setWith=GW,K.shuffle=Sj,K.slice=Cq,K.sortBy=Ij,K.sortedUniq=kq,K.sortedUniqBy=Bq,K.split=d$,K.spread=Fj,K.tail=Rq,K.take=Dq,K.takeRight=Lq,K.takeRightWhile=Oq,K.takeWhile=Nq,K.tap=Jq,K.throttle=zj,K.thru=$b,K.toArray=U6,K.toPairs=j6,K.toPairsIn=W6,K.toPath=j$,K.toPlainObject=H6,K.transform=QW,K.unary=Uj,K.union=Fq,K.unionBy=zq,K.unionWith=Uq,K.uniq=Vq,K.uniqBy=Hq,K.uniqWith=Gq,K.unset=qW,K.unzip=fS,K.unzipWith=E6,K.update=jW,K.updateWith=WW,K.values=wm,K.valuesIn=$W,K.without=Qq,K.words=Y6,K.wrap=Vj,K.xor=qq,K.xorBy=jq,K.xorWith=Wq,K.zip=$q,K.zipObject=Xq,K.zipObjectDeep=Yq,K.zipWith=Kq,K.entries=j6,K.entriesIn=W6,K.extend=G6,K.extendWith=ty,xS(K,K),K.add=$$,K.attempt=K6,K.camelCase=JW,K.capitalize=$6,K.ceil=X$,K.clamp=XW,K.clone=Gj,K.cloneDeep=qj,K.cloneDeepWith=jj,K.cloneWith=Qj,K.conformsTo=Wj,K.deburr=X6,K.defaultTo=M$,K.divide=Y$,K.endsWith=ZW,K.eq=Jc,K.escape=e$,K.escapeRegExp=t$,K.every=lj,K.find=uj,K.findIndex=b6,K.findKey=xW,K.findLast=hj,K.findLastIndex=y6,K.findLastKey=CW,K.floor=K$,K.forEach=M6,K.forEachRight=T6,K.forIn=EW,K.forInRight=SW,K.forOwn=MW,K.forOwnRight=TW,K.get=AS,K.gt=$j,K.gte=Xj,K.has=kW,K.hasIn=_S,K.head=x6,K.identity=Zo,K.includes=gj,K.indexOf=hq,K.inRange=YW,K.invoke=DW,K.isArguments=kp,K.isArray=ii,K.isArrayBuffer=Yj,K.isArrayLike=Ko,K.isArrayLikeObject=Fs,K.isBoolean=Kj,K.isBuffer=Zd,K.isDate=Jj,K.isElement=Zj,K.isEmpty=eW,K.isEqual=tW,K.isEqualWith=nW,K.isError=gS,K.isFinite=iW,K.isFunction=Gh,K.isInteger=O6,K.isLength=Zb,K.isMap=N6,K.isMatch=rW,K.isMatchWith=sW,K.isNaN=aW,K.isNative=oW,K.isNil=cW,K.isNull=lW,K.isNumber=F6,K.isObject=cs,K.isObjectLike=xs,K.isPlainObject=rA,K.isRegExp=vS,K.isSafeInteger=uW,K.isSet=z6,K.isString=ey,K.isSymbol=Dl,K.isTypedArray=ym,K.isUndefined=hW,K.isWeakMap=dW,K.isWeakSet=fW,K.join=gq,K.kebabCase=n$,K.last=fc,K.lastIndexOf=vq,K.lowerCase=i$,K.lowerFirst=r$,K.lt=pW,K.lte=mW,K.max=J$,K.maxBy=Z$,K.mean=eX,K.meanBy=tX,K.min=nX,K.minBy=iX,K.stubArray=ES,K.stubFalse=SS,K.stubObject=H$,K.stubString=G$,K.stubTrue=Q$,K.multiply=rX,K.nth=Aq,K.noConflict=D$,K.noop=CS,K.now=Yb,K.pad=s$,K.padEnd=a$,K.padStart=o$,K.parseInt=l$,K.random=KW,K.reduce=yj,K.reduceRight=wj,K.repeat=c$,K.replace=u$,K.result=VW,K.round=sX,K.runInContext=Se,K.sample=Cj,K.size=Mj,K.snakeCase=h$,K.some=Tj,K.sortedIndex=Eq,K.sortedIndexBy=Sq,K.sortedIndexOf=Mq,K.sortedLastIndex=Tq,K.sortedLastIndexBy=Iq,K.sortedLastIndexOf=Pq,K.startCase=f$,K.startsWith=p$,K.subtract=aX,K.sum=oX,K.sumBy=lX,K.template=m$,K.times=q$,K.toFinite=Qh,K.toInteger=oi,K.toLength=V6,K.toLower=g$,K.toNumber=pc,K.toSafeInteger=gW,K.toString=fr,K.toUpper=v$,K.trim=A$,K.trimEnd=_$,K.trimStart=b$,K.truncate=y$,K.unescape=w$,K.uniqueId=W$,K.upperCase=x$,K.upperFirst=bS,K.each=M6,K.eachRight=T6,K.first=x6,xS(K,function(){var p={};return hc(K,function(b,T){gi.call(K.prototype,T)||(p[T]=b)}),p}(),{chain:!1}),K.VERSION=n,Ia(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){K[p].placeholder=K}),Ia(["drop","take"],function(p,b){wi.prototype[p]=function(T){T=T===t?1:di(oi(T),0);var L=this.__filtered__&&!b?new wi(this):this.clone();return L.__filtered__?L.__takeCount__=Ii(T,L.__takeCount__):L.__views__.push({size:Ii(T,pe),type:p+(L.__dir__<0?"Right":"")}),L},wi.prototype[p+"Right"]=function(T){return this.reverse()[p](T).reverse()}}),Ia(["filter","map","takeWhile"],function(p,b){var T=b+1,L=T==W||T==ue;wi.prototype[p]=function(H){var ne=this.clone();return ne.__iteratees__.push({iteratee:Rn(H,3),type:T}),ne.__filtered__=ne.__filtered__||L,ne}}),Ia(["head","last"],function(p,b){var T="take"+(b?"Right":"");wi.prototype[p]=function(){return this[T](1).value()[0]}}),Ia(["initial","tail"],function(p,b){var T="drop"+(b?"":"Right");wi.prototype[p]=function(){return this.__filtered__?new wi(this):this[T](1)}}),wi.prototype.compact=function(){return this.filter(Zo)},wi.prototype.find=function(p){return this.filter(p).head()},wi.prototype.findLast=function(p){return this.reverse().find(p)},wi.prototype.invokeMap=ai(function(p,b){return typeof p=="function"?new wi(this):this.map(function(T){return Xo(T,p,b)})}),wi.prototype.reject=function(p){return this.filter(Jb(Rn(p)))},wi.prototype.slice=function(p,b){p=oi(p);var T=this;return T.__filtered__&&(p>0||b<0)?new wi(T):(p<0?T=T.takeRight(-p):p&&(T=T.drop(p)),b!==t&&(b=oi(b),T=b<0?T.dropRight(-b):T.take(b-p)),T)},wi.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},wi.prototype.toArray=function(){return this.take(pe)},hc(wi.prototype,function(p,b){var T=/^(?:filter|find|map|reject)|While$/.test(b),L=/^(?:head|last)$/.test(b),H=K[L?"take"+(b=="last"?"Right":""):b],ne=L||/^find/.test(b);H&&(K.prototype[b]=function(){var Ae=this.__wrapped__,ke=L?[1]:arguments,Ue=Ae instanceof wi,yt=ke[0],wt=Ue||ii(Ae),Pt=function(Ci){var Li=H.apply(K,lc([Ci],ke));return L&&Kt?Li[0]:Li};wt&&T&&typeof yt=="function"&&yt.length!=1&&(Ue=wt=!1);var Kt=this.__chain__,cn=!!this.__actions__.length,Nn=ne&&!Kt,fi=Ue&&!cn;if(!ne&&wt){Ae=fi?Ae:new wi(this);var Fn=p.apply(Ae,ke);return Fn.__actions__.push({func:$b,args:[Pt],thisArg:t}),new Wo(Fn,Kt)}return Nn&&fi?p.apply(this,ke):(Fn=this.thru(Pt),Nn?L?Fn.value()[0]:Fn.value():Fn)})}),Ia(["pop","push","shift","sort","splice","unshift"],function(p){var b=Go[p],T=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",L=/^(?:pop|shift)$/.test(p);K.prototype[p]=function(){var H=arguments;if(L&&!this.__chain__){var ne=this.value();return b.apply(ii(ne)?ne:[],H)}return this[T](function(Ae){return b.apply(ii(Ae)?Ae:[],H)})}}),hc(wi.prototype,function(p,b){var T=K[b];if(T){var L=T.name+"";gi.call(dr,L)||(dr[L]=[]),dr[L].push({name:b,func:T})}}),dr[Vb(t,v).name]=[{name:"wrapper",func:t}],wi.prototype.clone=AE,wi.prototype.reverse=Rv,wi.prototype.value=_E,K.prototype.at=Zq,K.prototype.chain=ej,K.prototype.commit=tj,K.prototype.next=nj,K.prototype.plant=rj,K.prototype.reverse=sj,K.prototype.toJSON=K.prototype.valueOf=K.prototype.value=aj,K.prototype.first=K.prototype.head,Co&&(K.prototype[Co]=ij),K},Js=Zr();Za?((Za.exports=Js)._=Js,Ap._=Js):ss._=Js}).call(dt)})(wx,wx.exports);wx.exports;new jn;new jn;new cr;class xse{static apply(e){e.set=function(t){const n=this.options||{},r=Object.entries(t).reduce(function(s,[a,o]){return n[a]!==o&&(s[a]=o),s},{});this.options=Object.assign(n,r),this.trigger({type:"change",options:t,changes:r})},e.get=function(){return this.options},e.api=function(t,n){return t||(t={}),n&&Object.entries(t).forEach(function([r,s]){typeof s=="function"&&(t[r]=(...a)=>s(...a,n))}),t.set=this.set.bind(this),t.get=this.get.bind(this),t}}}class du{static bind(e,t){return function(n,r){r.__binds||(r.__binds=[]);let s=e;Array.isArray(n)&&(s=n[0],n=n[1]);const a=/^([^.:]*(?:\.[^.:]+)*)?(?::(.*))?$/.exec(n),o=a[1].split(/\./g),l=o.pop(),c=a[2]||l,u=o.shift();let h={this:r}[u]||t[u]||e[u]||s;for(;h&&(n=o.shift());)h=h[n];if(h&&(h.on||h.addEventListener)){const d=function(m){r[c]&&r[c](m,e)};du._polyfill(h,["addEventListener","on"],function(m){h[m](l,d)});const f={target:h,name:l,callback:d};return r.__binds.push(f),d}else throw"Cannot bind '"+n+"' in "+this.__name}}static unbind(){return function(e){e.__binds&&(e.__binds.forEach((function(t){du._polyfill(t.target,["removeEventListener","off"],function(n){t.target[n](t.name,t.callback)})}).bind(this)),e.__binds=[])}}static apply(e){e.trigger=du._trigger,e.triggerOnce=du._triggerOnce,e.hasEventListener=Rc.prototype.hasEventListener,e.addEventListener=Rc.prototype.addEventListener,e.removeEventListener=Rc.prototype.removeEventListener,e.on=e.addEventListener,e.off=e.removeEventListener,e.dispatchEvent=e.trigger}static _triggerOnce(e){this.trigger(e),this._listeners&&delete this._listeners[e.type]}static _trigger(e){if(this._listeners===void 0)return;const t=e.type;let n=this._listeners[t];if(n!==void 0){n=n.slice();const r=n.length;e.target=this;for(let s=0;s<r;s++)n[s].call(this,e,this)}}static _polyfill(e,t,n){t.map(function(r){return e.method}),t.length&&n(t[0])}}function sB(i){return i&&typeof i.valueOf()=="string"}const Cse=(i,e)=>{let t=0;for(const n of i){if(e(n,t,i)===!1)break;t++}};class $i{static initClass(){this.Plugins={},this.Aliases={}}static registerPlugin(e,t){const n=function(r){$i.Plugin.call(this,r),this.__name=e};n.prototype=Object.assign(new $i.Plugin,t),this.Plugins[e]=n}static unregisterPlugin(e){delete this.Plugins[e]}static registerAlias(e,t){this.Aliases[e]=t}static unregisterAlias(e){delete this.Aliases[e]}constructor(e){if(e){let r=[].slice.apply(arguments);if(e={},r[0]instanceof Node){const s=r[0];r=r.slice(1),e.element=s}sB(r[0])?e.plugins=r:Array.isArray(r[0])?e.plugins=r[0]:r[0]&&(e=Object.assign({},r[0],e))}const t={init:!0,element:document.body,plugins:["core"],aliases:{},plugindb:$i.Plugins||{},aliasdb:$i.Aliases||{}};this.__options=Object.assign({},t,e||{}),this.__inited=!1,this.__destroyed=!1,this.__installed=[];let n=this.__options.element;n===""+n&&(n=document.querySelector(n)),this.plugins={},this.element=n,this.trigger=this.trigger.bind(this),this.frame=this.frame.bind(this),this.events=["pre","update","render","post"].map(function(r){return{type:r}}),this.__options.init&&this.init()}init(){this.__inited||(this.__inited=!0,this.install(this.__options.plugins))}destroy(){this.__inited&&(this.__destroyed||(this.__destroyed=!0,this.trigger({type:"destroy"}),this.uninstall()))}frame(){this.events.map(this.trigger)}resolve(e){e=Array.isArray(e)?e:[e];const t=this.__options,n=Object.assign({},t.aliasdb,t.aliases),r=function(a){const o=a.split(":");return o[1]?(n[o[0]]=[o[1]],!1):!0};e=e.filter(r),Object.entries(n).forEach(function([a,o]){n[a]=Array.isArray(o)?o:[o]});function s(a,o,l){if(l>=256)throw"Plug-in alias recursion detected.";return a=a.filter(r),a.forEach(function(c){const u=n[c];u?o=o.concat(s(u,[],l+1)):o.push(c)}),o}return s(e,[],0)}install(e){e=Array.isArray(e)?e:[e],e=this.resolve(e),Cse(e,t=>this.__install(t)),this.__ready()}uninstall(e){e&&(e=Array.isArray(e)?e:[e],e=this.resolve(e)),(e||this.__installed).reverse().forEach(t=>this.__uninstall(t))}__install(e){const t=this.__options.plugindb[e];if(!t)throw"[three.install] Cannot install. '"+e+"' is not registered.";if(this.plugins[e])return console.warn("[three.install] "+e+" is already installed.");const n=t,r=new n(this.__options[e]||{},e);this.plugins[e]=r;const s=r.install(this);return this.__installed.push(r),this.trigger({type:"install",plugin:r}),s}__uninstall(e){const t=sB(e)?this.plugins[e]:e;if(!t){console.warn("[three.uninstall] "+e+"' is not installed.");return}e=t.__name,t.uninstall(this),this.__installed=this.__installed.filter(n=>n!==t),delete this.plugins[e],this.trigger({type:"uninstall",plugin:t})}__ready(){this.triggerOnce({type:"ready"})}}$i.initClass();$i.Plugin=function(i){this.options=Object.assign({},this.defaults,i||{})};$i.Plugin.prototype={listen:[],defaults:{},install:function(i){},uninstall:function(i){}};du.apply($i.prototype);du.apply($i.Plugin.prototype);xse.apply($i.Plugin.prototype);$i.registerPlugin("splash",{defaults:{color:"mono",fancy:!0},listen:["ready","mathbox/init:init","mathbox/progress:progress","mathbox/destroy:destroy"],uninstall(){return this.destroy()},ready(i,e){if(e.MathBox&&!this.div)return this.init(i,e)},init(i,e){let t;this.destroy();const{color:n}=this.options,r=`<div class="mathbox-loader mathbox-splash-${n}">
  <div class="mathbox-logo">
    <div> <div></div><div></div><div></div> </div>
    <div> <div></div><div></div><div></div> </div>
  </div>
  <div class="mathbox-progress"><div></div></div>
</div>`;this.div=t=document.createElement("div"),t.innerHTML=r,e.element.appendChild(t);const s=Math.random()*2-1,a=Math.random()*2-1,o=Math.random()*2-1,l=1/Math.sqrt(s*s+a*a+o*o);return this.loader=t.querySelector(".mathbox-loader"),this.bar=t.querySelector(".mathbox-progress > div"),this.gyro=t.querySelectorAll(".mathbox-logo > div"),this.transforms=["rotateZ(22deg) rotateX(24deg) rotateY(30deg)","rotateZ(11deg) rotateX(12deg) rotateY(15deg) scale3d(.6, .6, .6)"],this.random=[s*l,a*l,o*l],this.start=e.Time.now,this.timer=null},progress(i,e){if(!this.div)return;const{current:t,total:n}=i,r=t<n;clearTimeout(this.timer),r?(this.loader.classList.remove("mathbox-exit"),this.loader.style.display="block"):(this.loader.classList.add("mathbox-exit"),this.timer=setTimeout(()=>this.loader.style.display="none",150));const s=t<n?Math.round(1e3*t/n)*.1+"%":"100%";if(this.bar.style.width=s,this.options.fancy){const a=this.random,o=Math.max(0,Math.min(1,e.Time.now-this.start)),l=function(c,u){return u==null&&(u=0),c.replace(/(-?[0-9.e]+)deg/g,(h,d)=>+d+a[u++]*o*e.Time.step*60+"deg")};return(()=>{const c=[];for(let u=0;u<this.gyro.length;u++){let h;const d=this.gyro[u];this.transforms[u]=h=l(this.transforms[u]),c.push(d.style.transform=d.style.WebkitTransform=h)}return c})()}},destroy(){return this.div!=null&&this.div.remove(),this.div=null}});$i.registerAlias("empty",["fallback","bind","renderer","size","fill","loop","time"]);$i.registerAlias("core",["empty","scene","camera","render","warmup"]);$i.registerAlias("VR",["core","cursor","fullscreen","render:vr"]);$i.registerPlugin("bind",{install:function(i){const e={three:i,window};i.bind=du.bind(i,e),i.unbind=du.unbind(i),i.bind("install:bind",this),i.bind("uninstall:unbind",this)},uninstall:function(i){i.unbind(this),delete i.bind,delete i.unbind},bind:function(i,e){const t=i.plugin,n=t.listen;n&&n.forEach(function(r){e.bind(r,t)})},unbind:function(i,e){e.unbind(i.plugin)}});$i.registerPlugin("camera",{defaults:{near:.01,far:1e4,type:"perspective",fov:60,aspect:null,left:-1,right:1,bottom:-1,top:1,klass:null,parameters:null},listen:["resize","this.change"],install:function(i){i.Camera=this.api(),i.camera=null,this.aspect=1,this.change({},i)},uninstall:function(i){delete i.Camera,delete i.camera},change:function(i,e){const t=this.options,n=e.camera;if(!e.camera||i.changes.type||i.changes.klass){const r=t.klass||{perspective:_r,orthographic:Ah}[t.type]||s_;e.camera=t.parameters?new r(t.parameters):new r}Object.entries(t).forEach((function([r]){Object.prototype.hasOwnProperty.call(e.camera,r)&&(e.camera[r]=t[r])}).bind(this)),this.update(e),n===e.camera||e.trigger({type:"camera",camera:e.camera})},resize:function(i,e){this.aspect=i.viewWidth/Math.max(1,i.viewHeight),this.update(e)},update:function(i){i.camera.aspect=this.options.aspect||this.aspect,i.camera.updateProjectionMatrix()}});$i.registerPlugin("fallback",{defaults:{force:!1,fill:!0,begin:'<div class="threestrap-fallback" style="display: table; width: 100%; height: 100%;box-sizing: border-box; border: 1px dashed rgba(0, 0, 0, .25);"><div style="display: table-cell; padding: 10px; vertical-align: middle; text-align: center;">',end:"</div></div>",message:'<big><strong>This example requires WebGL</strong></big><br>Visit <a target="_blank" href="http://get.webgl.org/">get.webgl.org</a> for more info</a>'},install:function(i){let e,t;try{if(e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl"),!t||this.options.force)throw"WebGL unavailable.";i.fallback=!1}catch{const r=this.options.message,s=this.options.begin,a=this.options.end,o=this.options.fill,l=document.createElement("div");for(l.innerHTML=s+r+a,this.children=[];l.childNodes.length>0;)this.children.push(l.firstChild),i.element.appendChild(l.firstChild);return o&&i.install("fill"),this.div=l,i.fallback=!0,!1}},uninstall:function(i){this.children&&(this.children.forEach(function(e){e.parentNode.removeChild(e)}),this.children=null),delete i.fallback}});$i.registerPlugin("fill",{defaults:{block:!0,body:!0,layout:!0},install:function(i){function e(n){const r=n.style.height;return r=="auto"||r==""}function t(n){return n.style.height="100%",n.style.margin=0,n.style.padding=0,n}this.options.body&&i.element==document.body&&(this.applied=[i.element,document.documentElement].filter(e).map(t)),this.options.block&&i.canvas&&(i.canvas.style.display="block",this.block=!0),this.options.layout&&i.element&&window.getComputedStyle(i.element).position=="static"&&(i.element.style.position="relative",this.layout=!0)},uninstall:function(i){if(this.applied){const e=function(t){return t.style.height="",t.style.margin="",t.style.padding="",t};this.applied.map(e),delete this.applied}this.block&&i.canvas&&(i.canvas.style.display="",delete this.block),this.layout&&i.element&&(i.element.style.position="",delete this.layout)},change:function(i){this.uninstall(i),this.install(i)}});$i.registerPlugin("loop",{defaults:{start:!0,each:1},listen:["ready"],install:function(i){this.running=!1,this.lastRequestId=null,i.Loop=this.api({start:this.start.bind(this),stop:this.stop.bind(this),running:!1,window},i),this.events=["pre","update","render","post"].map(function(e){return{type:e}})},uninstall:function(i){this.stop(i)},ready:function(i,e){this.options.start&&this.start(e)},start:function(i){if(this.running)return;i.Loop.running=this.running=!0;const e=i.trigger.bind(i),t=(function(){this.running&&(this.lastRequestId=i.Loop.window.requestAnimationFrame(t),this.events.map(e))}).bind(this);this.lastRequestId=i.Loop.window.requestAnimationFrame(t),i.trigger({type:"start"})},stop:function(i){this.running&&(i.Loop.running=this.running=!1,i.Loop.window.cancelAnimationFrame(this.lastRequestId),this.lastRequestId=null,i.trigger({type:"stop"}))}});$i.registerPlugin("render",{listen:["render"],render:function(i,e){e.scene&&e.camera&&e.renderer.render(e.scene,e.camera)}});$i.registerPlugin("renderer",{defaults:{klass:g5,parameters:{depth:!0,stencil:!0,preserveDrawingBuffer:!0,antialias:!0}},listen:["resize"],install:function(i){const e=i.renderer=new this.options.klass(this.options.parameters);i.canvas=e.domElement,i.element.appendChild(e.domElement)},uninstall:function(i){i.element.removeChild(i.renderer.domElement),delete i.renderer,delete i.canvas},resize:function(i,e){const t=e.renderer,n=t.domElement;n&&n.tagName=="CANVAS"?t.setSize(i.renderWidth,i.renderHeight,!1):(t.setRenderSize&&t.setRenderSize(i.renderWidth,i.renderHeight),t.setSize(i.viewWidth,i.viewHeight,!1))}});$i.registerPlugin("scene",{install:function(i){i.scene=new ov},uninstall:function(i){delete i.scene}});$i.registerPlugin("size",{defaults:{width:null,height:null,aspect:null,scale:1,maxRenderWidth:1/0,maxRenderHeight:1/0,devicePixelRatio:!0},listen:["window.resize:queue","element.resize:queue","this.change:queue","ready:resize","pre:pre"],install:function(i){i.Size=this.api({renderWidth:0,renderHeight:0,viewWidth:0,viewHeight:0}),this.resized=!1},uninstall:function(i){delete i.Size},queue:function(i,e){this.resized=!0},pre:function(i,e){this.resized&&(this.resized=!1,this.resize(i,e))},resize:function(i,e){const t=this.options,n=e.element,r=e.renderer;let s,a,o,l,c,u,h,d,f=0,m=0;s=o=t.width===void 0||t.width==null?n.offsetWidth||n.innerWidth||0:t.width,a=l=t.height===void 0||t.height==null?n.offsetHeight||n.innerHeight||0:t.height,h=s/a,t.aspect&&(t.aspect>h?(a=Math.round(s/t.aspect),m=Math.floor((l-a)/2)):(s=Math.round(a*t.aspect),f=Math.floor((o-s)/2)),h=s/a),d=1,t.devicePixelRatio&&typeof window<"u"&&(d=window.devicePixelRatio||1),c=Math.round(Math.min(s*d*t.scale,t.maxRenderWidth)),u=Math.round(Math.min(a*d*t.scale,t.maxRenderHeight)),c/u>h?c=Math.round(u*h):u=Math.round(c/h),d=u/a;const _=r.domElement.style;_.width=s+"px",_.height=a+"px",_.marginLeft=f+"px",_.marginTop=m+"px",Object.assign(e.Size,{renderWidth:c,renderHeight:u,viewWidth:s,viewHeight:a,aspect:h,pixelRatio:d}),e.trigger({type:"resize",renderWidth:c,renderHeight:u,viewWidth:s,viewHeight:a,aspect:h,pixelRatio:d})}});$i.registerPlugin("time",{defaults:{speed:1,warmup:0,timeout:1},listen:["pre:tick","this.change"],now:function(){return+new Date/1e3},install:function(i){i.Time=this.api({now:this.now(),clock:0,step:1/60,frames:0,time:0,delta:1/60,average:0,fps:0}),this.last=0,this.time=0,this.clock=0,this.wait=this.options.warmup,this.clockStart=0,this.timeStart=0},tick:function(i,e){const t=this.options.speed,n=this.options.timeout,r=e.Time,s=r.now=this.now(),a=this.last;let o=this.time,l=this.clock;if(a){let c=r.delta=s-a;const u=r.average||c;c>n&&(c=0);const h=c*t;o+=c,l+=h,r.frames>0&&(r.average=u+(c-u)*.1,r.fps=1/u),r.step=h,r.clock=l-this.clockStart,r.time=o-this.timeStart,r.frames++,this.wait-- >0&&(this.clockStart=l,this.timeStart=o,r.clock=0,r.step=1e-100)}this.last=s,this.clock=l,this.time=o},uninstall:function(i){delete i.Time}});$i.registerPlugin("warmup",{defaults:{delay:2},listen:["ready","post"],ready:function(i,e){e.renderer.domElement.style.visibility="hidden",this.frame=0,this.hidden=!0},post:function(i,e){this.hidden&&this.frame>=this.options.delay&&(e.renderer.domElement.style.visibility="visible",this.hidden=!1),this.frame++}});$i.registerPlugin("controls",{listen:["update","resize","camera","this.change"],defaults:{klass:null,parameters:{}},install:function(i){if(!this.options.klass)throw"Must provide class for `controls.klass`";i.controls=null,this._camera=i.camera||new _r,this.change(null,i)},uninstall:function(i){delete i.controls},change:function(i,e){this.options.klass?((!i||i.changes.klass)&&(e.controls=new this.options.klass(this._camera,e.renderer.domElement)),Object.assign(e.controls,this.options.parameters)):e.controls=null},update:function(i,e){const t=e.Time&&e.Time.delta||.016666666666666666,n=e.VR&&e.VR.state;e.controls.vr&&e.controls.vr(n),e.controls.update(t)},camera:function(i,e){e.controls.object=this._camera=i.camera},resize:function(i,e){e.controls.handleResize&&e.controls.handleResize()}});$i.registerPlugin("cursor",{listen:["update","this.change","install:change","uninstall:change","element.mousemove","vr"],defaults:{cursor:null,hide:!1,timeout:3},install:function(i){this.timeout=this.options.timeout,this.element=i.element,this.change(null,i)},uninstall:function(i){delete i.controls},change:function(i,e){this.applyCursor(e)},mousemove:function(i,e){this.options.hide&&(this.applyCursor(e),this.timeout=+this.options.timeout||0)},update:function(i,e){const t=e.Time&&e.Time.delta||.016666666666666666;this.options.hide&&(this.timeout-=t,this.timeout<0&&this.applyCursor(e,"none"))},vr:function(i,e){this.hide=i.active&&!i.hmd.fake,this.applyCursor(e)},applyCursor:function(i,e){const t=i.controls?"move":"";e=e||this.options.cursor||t,this.hide&&(e="none"),this.cursor!=e&&(this.element.style.cursor=e)}});$i.registerPlugin("fullscreen",{defaults:{key:"f"},listen:["ready","update"],install:function(i){i.Fullscreen=this.api({active:!1,toggle:this.toggle.bind(this)},i)},uninstall:function(i){delete i.Fullscreen},ready:function(i,e){document.body.addEventListener("keypress",(function(n){this.options.key&&n.charCode==this.options.key.charCodeAt(0)&&this.toggle(e)}).bind(this));const t=(function(){const n=!!document.fullscreenElement||!!document.mozFullScreenElement||!!document.webkitFullscreenElement||!!document.msFullscreenElement;e.Fullscreen.active=this.active=n,e.trigger({type:"fullscreen",active:n})}).bind(this);document.addEventListener("fullscreenchange",t,!1),document.addEventListener("webkitfullscreenchange",t,!1),document.addEventListener("mozfullscreenchange",t,!1)},toggle:function(i){const e=i.canvas,t=i.VR&&i.VR.active?{vrDisplay:i.VR.hmd}:{};this.active?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen&&document.mozCancelFullScreen():e.requestFullScreen?e.requestFullScreen(t):e.msRequestFullScreen?e.msRequestFullscreen(t):e.webkitRequestFullscreen?e.webkitRequestFullscreen(t):e.mozRequestFullScreen&&e.mozRequestFullScreen(t)}});var mN={exports:{}};(function(i,e){(function(t,n){i.exports=n()})(dt,function(){var t=function(){function n(f){return a.appendChild(f.dom),f}function r(f){for(var m=0;m<a.children.length;m++)a.children[m].style.display=m===f?"block":"none";s=f}var s=0,a=document.createElement("div");a.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",a.addEventListener("click",function(f){f.preventDefault(),r(++s%a.children.length)},!1);var o=(performance||Date).now(),l=o,c=0,u=n(new t.Panel("FPS","#0ff","#002")),h=n(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=n(new t.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:a,addPanel:n,showPanel:r,begin:function(){o=(performance||Date).now()},end:function(){c++;var f=(performance||Date).now();if(h.update(f-o,200),f>l+1e3&&(u.update(1e3*c/(f-l),100),l=f,c=0,d)){var m=performance.memory;d.update(m.usedJSHeapSize/1048576,m.jsHeapSizeLimit/1048576)}return f},update:function(){o=this.end()},domElement:a,setMode:r}};return t.Panel=function(n,r,s){var a=1/0,o=0,l=Math.round,c=l(window.devicePixelRatio||1),u=80*c,h=48*c,d=3*c,f=2*c,m=3*c,A=15*c,_=74*c,v=30*c,w=document.createElement("canvas");w.width=u,w.height=h,w.style.cssText="width:80px;height:48px";var x=w.getContext("2d");return x.font="bold "+9*c+"px Helvetica,Arial,sans-serif",x.textBaseline="top",x.fillStyle=s,x.fillRect(0,0,u,h),x.fillStyle=r,x.fillText(n,d,f),x.fillRect(m,A,_,v),x.fillStyle=s,x.globalAlpha=.9,x.fillRect(m,A,_,v),{dom:w,update:function(C,S){a=Math.min(a,C),o=Math.max(o,C),x.fillStyle=s,x.globalAlpha=1,x.fillRect(0,0,u,A),x.fillStyle=r,x.fillText(l(C)+" "+n+" ("+l(a)+"-"+l(o)+")",d,f),x.drawImage(w,m+c,A,_-c,v,m,A,_-c,v),x.fillRect(m+_-c,A,c,v),x.fillStyle=s,x.globalAlpha=.9,x.fillRect(m+_-c,A,c,l((1-C/S)*v))}}},t})})(mN);var Ese=mN.exports;const Sse=U0(Ese);$i.registerPlugin("stats",{listen:["pre","post"],install:function(i){const e=this.stats=new Sse,t=e.domElement.style;t.position="absolute",t.top=t.left=0,i.element.appendChild(e.domElement),i.stats=e},uninstall:function(i){this.stats.domElement.remove(),delete i.stats},pre:function(i,e){this.stats.begin()},post:function(i,e){this.stats.end()}});$i.registerPlugin("ui",{defaults:{theme:"white",style:".threestrap-ui { position: absolute; bottom: 5px; right: 5px; float: left; }.threestrap-ui button { border: 0; background: none;  vertical-align: middle; font-weight: bold; } .threestrap-ui .glyphicon { top: 2px; font-weight: bold; } @media (max-width: 640px) { .threestrap-ui button { font-size: 120% } }.threestrap-white button { color: #fff; text-shadow: 0 1px 1px rgba(0, 0, 0, 1), 0 1px 3px rgba(0, 0, 0, 1); }.threestrap-black button { color: #000; text-shadow: 0 0px 1px rgba(255, 255, 255, 1), 0 0px 2px rgba(255, 255, 255, 1), 0 0px 2px rgba(255, 255, 255, 1) }"},listen:["fullscreen"],markup:function(i,e,t){let n="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css";location.href.match(/^file:\/\//)&&(n="http://"+n);const r=[];return i.Fullscreen&&r.push('<button class="fullscreen" title="Full Screen"><span class="glyphicon glyphicon-fullscreen"></span></button>'),i.VR&&r.push('<button class="vr" title="VR Headset">VR</button>'),'<style type="text/css">@import url("'+n+'"); '+t+'</style><div class="threestrap-ui threestrap-'+e+'">'+r.join(`
`)+"</div>"},install:function(i){const e=this.ui=document.createElement("div");e.innerHTML=this.markup(i,this.options.theme,this.options.style),document.body.appendChild(e);const t=this.ui.fullscreen=e.querySelector("button.fullscreen");t&&i.bind([t,"click:goFullscreen"],this);const n=this.ui.vr=e.querySelector("button.vr");n&&i.VR&&(i.VR.set({mode:"2d"}),i.bind([n,"click:goVR"],this))},fullscreen:function(i,e){this.ui.style.display=i.active?"none":"block",i.active||e.VR&&e.VR.set({mode:"2d"})},goFullscreen:function(i,e){e.Fullscreen&&e.Fullscreen.toggle()},goVR:function(i,e){e.VR&&(e.VR.set({mode:"auto"}),e.Fullscreen.toggle())},uninstall:function(i){document.body.removeChild(this.ui)}});class aB{constructor(e,t){this.renderer=e,this.right=new le,this.cameraLeft=new _r,this.cameraRight=new _r;const n=t.getEyeTranslation("left");this.halfIPD=new le(n.x,n.y,n.z).length(),this.fovLeft=t.getRecommendedEyeFieldOfView("left"),this.fovRight=t.getRecommendedEyeFieldOfView("right")}FovToNDCScaleOffset(e){const t=2/(e.leftTan+e.rightTan),n=(e.leftTan-e.rightTan)*t*.5,r=2/(e.upTan+e.downTan),s=(e.upTan-e.downTan)*r*.5;return{scale:[t,r],offset:[n,s]}}FovPortToProjection(e,t,n,r,s){n=n===void 0?!0:n,r=r===void 0?.01:r,s=s===void 0?1e4:s;const a=n?-1:1,o=e.elements,l=this.FovToNDCScaleOffset(t);o[0*4+0]=l.scale[0],o[0*4+1]=0,o[0*4+2]=l.offset[0]*a,o[0*4+3]=0,o[1*4+0]=0,o[1*4+1]=l.scale[1],o[1*4+2]=-l.offset[1]*a,o[1*4+3]=0,o[2*4+0]=0,o[2*4+1]=0,o[2*4+2]=s/(r-s)*-a,o[2*4+3]=s*r/(r-s),o[3*4+0]=0,o[3*4+1]=0,o[3*4+2]=a,o[3*4+3]=0,e.transpose()}FovToProjection(e,t,n,r,s){const a={upTan:Math.tan(t.upDegrees*Math.PI/180),downTan:Math.tan(t.downDegrees*Math.PI/180),leftTan:Math.tan(t.leftDegrees*Math.PI/180),rightTan:Math.tan(t.rightDegrees*Math.PI/180)};return this.FovPortToProjection(e,a,n,r,s)}render(e,t){this.FovToProjection(this.cameraLeft.projectionMatrix,this.fovLeft,!0,t.near,t.far),this.FovToProjection(this.cameraRight.projectionMatrix,this.fovRight,!0,t.near,t.far),this.right.set(this.halfIPD,0,0),this.right.applyQuaternion(t.quaternion),this.cameraLeft.position.copy(t.position).sub(this.right),this.cameraRight.position.copy(t.position).add(this.right),this.cameraLeft.quaternion.copy(t.quaternion),this.cameraRight.quaternion.copy(t.quaternion);const n=this.renderer.devicePixelRatio||1,r=this.renderer.domElement.width/2/n,s=this.renderer.domElement.height/n;this.renderer.enableScissorTest(!0),this.renderer.setViewport(0,0,r,s),this.renderer.setScissor(0,0,r,s),this.renderer.render(e,this.cameraLeft),this.renderer.setViewport(r,0,r,s),this.renderer.setScissor(r,0,r,s),this.renderer.render(e,this.cameraRight)}}$i.registerPlugin("vr",{defaults:{mode:"auto",device:null,fov:80},listen:["window.load","pre","render","resize","this.change"],install:function(i){i.VR=this.api({active:!1,devices:[],hmd:null,sensor:null,renderer:null,state:null},i)},uninstall:function(i){delete i.VR},mocks:function(i,e,t){return[{fake:!0,force:1,deviceId:"emu",deviceName:"Emulated",getEyeTranslation:function(o){return{left:{x:-.03,y:0,z:0},right:{x:.03,y:0,z:0}}[o]},getRecommendedEyeFieldOfView:function(o){const l=i.camera,c=l&&l.aspect||16/9,u=(e||l&&l.fov||t)/2,h=Math.atan(Math.tan(u*Math.PI/180)*c/2)*180/Math.PI,d=u;return{left:{rightDegrees:h,leftDegrees:h,downDegrees:d,upDegrees:d},right:{rightDegrees:h,leftDegrees:h,downDegrees:d,upDegrees:d}}[o]}},{force:2,getState:function(){return{}}}]},load:function(i,e){const t=(function(n){this.callback(n,e)}).bind(this);navigator.getVRDevices?navigator.getVRDevices().then(t):navigator.mozGetVRDevices?navigator.mozGetVRDevices(t):(console.warn("No native VR support detected."),t(this.mocks(e,this.options.fov,this.defaults.fov),e))},callback:function(i,e){let t,n;const r=window.HMDVRDevice||function(){},s=window.PositionSensorVRDevice||function(){};i=e.VR.devices=i||e.VR.devices;const a=this.options.device;let o;for(let l=0;l<i.length;++l)if(o=i[l],o.force==1||o instanceof r){if(a&&a!=o.deviceId)continue;t=o;break}if(t){let l;for(let c=0;c<i.length;++c)if(l=i[c],l.force==2||l instanceof s&&l.hardwareUnitId==t.hardwareUnitId){n=l;break}this.hookup(t,n,e)}},hookup:function(i,e,t){aB||console.log("VRRenderer not found");const n=aB||function(){};this.renderer=new n(t.renderer,i),this.hmd=i,this.sensor=e,t.VR.renderer=this.renderer,t.VR.hmd=i,t.VR.sensor=e,console.log("VRRenderer",i.deviceName)},change:function(i,e){i.changes.device&&this.callback(null,e),this.pre(i,e)},pre:function(i,e){const t=this.active,n=this.active=this.renderer&&this.options.mode!="2d";if(e.VR.active=n,n&&this.sensor){const r=this.sensor.getState();e.VR.state=r}else e.VR.state=null;t!=this.active&&e.trigger({type:"vr",active:n,hmd:this.hmd,sensor:this.sensor})},resize:function(i,e){this.active&&this.renderer.initialize()},render:function(i,e){if(e.scene&&e.camera){const t=this.active?this.renderer:e.renderer;if(this.last!=t&&t==e.renderer){const n=t.getPixelRatio(),r=t.domElement.width/n,s=t.domElement.height/n;t.setScissorTest(!1),t.setViewport(0,0,r,s)}this.last=t,t.render(e.scene,e.camera)}}});class gN{constructor(e,t){this.context=t,this.traits=e.Traits,this.types=e.Types,this.pending=[],this.bound=[],this.last=null}make(e){return{enum:typeof e.enum=="function"?e.enum():void 0,type:typeof e.uniform=="function"?e.uniform():void 0,value:e.make()}}apply(e,t){return new Mse(e,t,this)}bind(e){return this.bound.push(e)}unbind(e){return this.bound=Array.from(this.bound).filter(t=>t!==e)}queue(e,t,n,r){return this.lastObject=t,this.lastKey=n,this.lastValue=r,this.pending.push(e)}invoke(e){return e(this.context.time.clock,this.context.time.step)}compute(){if(this.bound.length)for(const e of Array.from(this.bound))this.invoke(e)}digest(){let e;if(!this.pending.length)return!1;[e,this.pending]=Array.from([this.pending,[]]);for(const t of Array.from(e))t();return!0}getTrait(e){return this.traits[e]}getLastTrigger(){return`${this.lastObject.toString()} - ${this.lastKey}=\`${this.lastValue}\``}}const Wy=function(i){const e={};for(const t in i){const n=i[t];e[t]=n}return e};let Mse=class{constructor(e,t,n){let r,s,a,o,l,c,u,{props:h}=t;const{traits:d,finals:f,freeform:m}=t,A=this;e.props!=null&&e.expr!=null&&e.orig!=null&&e.computed!=null&&e.attributes!=null&&(c=Wy(e.props),o=Wy(e.expr),l=e.orig(),a=e.computed(),e.attributes!=null&&e.attributes.dispose());const _={},v={},w={},x=he=>w[he]!=null?w[he]:he,C=function(he,be){if(w[be])throw new Error(`${e.toString()} - Duplicate property \`${be}\``);return w[be]=he},S=he=>(A[he]!=null?A[he].value:void 0)!=null?A[he]!=null?A[he].value:void 0:Tse(A[x(he)],be=>be.value),I=function(he,be,Ne,nt){let ze;if(he=x(he),(ze=A[he])==null){if(!m)throw new Error(`${e.toString()} - Setting unknown property \`${he}={${be}}\``);ze=A[he]={short:he,type:null,last:null,value:null},Y[he]=Be=>Be}if(!Ne){if(N[he])throw new Error(`${e.toString()} - Can't set bound property \`${he}={${be}}\``);if(U[he])throw new Error(`${e.toString()} - Can't set computed property \`${he}={${be}}\``);if(q[he])throw new Error(`${e.toString()} - Can't set final property \`${he}={${be}}\``)}let me=!0;const fe=pe(he,be,ze.last,function(){return me=!1,null});if(me){[ze.value,ze.last]=Array.from([fe,ze.value]);const{short:Be}=ze;_[Be]=fe,Ne||(v[Be]=be),!nt&&!Ie(he,ze.value,ze.last)&&De(he,be)}return me},P=function(he,be,Ne){return he=x(he),I(he,be,!0,Ne),q[he]=!0},k={},M={},R={},N={},U={},q={},W=function(he,be,Ne){if(Ne==null&&(Ne=!1),he=x(he),typeof be!="function")throw new Error(`${e.toString()} - Expression \`${he}=>{${k}}\` is not a function`);if(N[he])throw new Error(`${e.toString()} - Property \`${he}=>{${k}}\` is already bound`);if(U[he])throw new Error(`${e.toString()} - Property \`${he}\` is computed`);if(q[he])throw new Error(`${e.toString()} - Property \`${he}\` is final`);const nt=Ne?U:N;nt[he]=be;const ze=A[he]!=null?A[he].short:he;return Ne||(k[ze]=be),R[he]=be,be=be.bind(e),M[he]=function(me,fe){let Be;return(Be=e.clock!=null?e.clock.getTime():void 0)&&(me=Be.clock,fe=Be.step),e.set(he,be(me,fe),!0)},n.bind(M[he])},F=function(he,be){be==null&&(be=!1),he=x(he);const Ne=be?U:N;if(Ne[he])return n.unbind(M[he]),delete M[he],delete Ne[he],A[he]!=null&&(he=A[he].short),delete k[he]},ue=function(he,be){let Ne;return he=x(he),(Ne=typeof R[he]=="function"?R[he](be,0):void 0)!=null?Ne:A[he].value};e.expr=k,e.props=_,e.evaluate=function(he,be){if(he!=null)return ue(he,be);{const Ne={};for(he in h)Ne[he]=ue(he,be);return Ne}},e.get=function(he){return he!=null?S(he):_},e.set=function(he,be,Ne,nt){if(typeof he=="string")I(he,be,Ne,nt);else{nt=Ne,Ne=be;const ze=he;for(he in ze)be=ze[he],I(he,be,Ne,nt)}},e.bind=function(he,be,Ne){if(typeof he=="string")W(he,be,Ne);else{Ne=be;const nt=he;for(he in nt)be=nt[he],W(he,be,Ne)}},e.unbind=function(he,be){if(typeof he=="string")F(he,be);else{be=k;const Ne=he;for(he in Ne)F(he,be)}},e.attribute=function(he){return he!=null?A[x(he)]:A},e.orig=function(he){return he!=null?v[x(he)]:Wy(v)},e.computed=function(he){return he!=null?U[x(he)]:Wy(U)};const J={},Y={},Pe={},Ie=(he,be,Ne)=>Pe[he](be,Ne),pe=(he,be,Ne,nt)=>Y[he](be,Ne,nt);e.validate=function(he,be){let Ne;he=x(he);const nt=J[he];return nt!=null&&(Ne=nt()),Ne=pe(he,be,Ne,function(){throw new Error(`${e.toString()} - Invalid value \`${he}={${be}}\``)})};let Ce=!1,G={},oe={},je={},Tt={};const rt=he=>he.split(".")[0],De=function(he,be){Ce||(Ce=!0,n.queue(mt,e,he,be));const Ne=rt(he);return G[he]=!0,oe[Ne]=!0},xt={type:"change",changed:null,touched:null},mt=function(){let he;xt.changed=G,xt.touched=oe,G=je,oe=Tt,{changed:je}=xt,{touched:Tt}=xt,Ce=!1;for(he in G)G[he]=!1;for(he in oe)oe[he]=!1;return xt.type="change",e.trigger(xt),(()=>{const be=[];for(const Ne in xt.touched)xt.type=`change:${Ne}`,be.push(e.trigger(xt));return be})()},et=function(he){const be=he.split(/\./g),Ne=be.pop();return be.pop(),be.unshift(Ne),be.reduce((nt,ze)=>nt+ze.charAt(0).toUpperCase()+ze.substring(1))},st=(he,be)=>(()=>{const Ne=[];for(let nt in be){let ze;const me=be[nt];nt=[he,nt].join(".");const fe=et(nt);A[nt]={T:me,ns:he,short:fe,enum:typeof me.enum=="function"?me.enum():void 0,type:typeof me.uniform=="function"?me.uniform():void 0,last:me.make(),value:ze=me.make()},C(nt,fe),_[fe]=ze,J[nt]=me.make,Y[nt]=me.validate!=null?me.validate:Be=>Be,Ne.push(Pe[nt]=me.equals!=null?me.equals:(Be,V)=>Be===V)}return Ne})(),ce=[];for(let he of Array.from(d)){[he,s]=Array.from(he.split(":"));const be=s?[s,he].join("."):he;u=n.getTrait(he),ce.push(he),u!=null&&st(be,u)}if(h!=null)for(s in h)u=h[s],st(s,u);const tt=ce.filter((he,be)=>ce.indexOf(he)===be);if(e.traits=tt,c!=null&&e.set(c,!0,!0),f!=null)for(r in f){const he=f[r];P(r,he,!0)}l!=null&&e.set(l,!1,!0),a!=null&&e.bind(a,!0),o!=null&&e.bind(o,!1),this.dispose=function(){for(r in U)F(r,!0);for(r in N)F(r,!1);return h={},delete e.attributes,delete e.get,delete e.set}}};function Tse(i,e){return typeof i<"u"&&i!==null?e(i):void 0}const oB=5,Ise=1e-4,Pse=(i,e)=>Math.abs(i/e-Math.round(i/e))<Ise,$y=i=>Pse(i,1),kse=function(i,e,t,n){const r=Math.round(i/e);return r===1?`${t}`:r===-1?`-${t}`:t==="1"?`${r}`:n?`${r}${t}`:`${r}*${t}`},Bse=function(i,e,t,n){let r=Math.round(i*e);return Math.abs(r)===1?(r=r<0?"-":"",r+=t):t!=="1"&&(r+=n?`${t}`:`*${t}`),`${r}/${e}`},lB=[{1:1},{1:1,:Math.PI*2},{1:1,:Math.PI},{1:1,:Math.PI*2,:Math.PI},{1:1,e:Math.E},{1:1,:Math.PI*2,e:Math.E},{1:1,:Math.PI,e:Math.E},{1:1,:Math.PI*2,:Math.PI,e:Math.E}],Rse=[[2*2*3*5*7,[2,3,5,7]],[2*2*2*3*3*5*5*7*7,[2,3,5,7]],[2*2*3*5*7*11*13,[2,3,5,7,11,13]],[2*2*17*19*23*29,[2,17,19,23,29]],[256*256,[2]],[1e6,[2,5]]],vN=function(i){let e,t,n,r,s;i&&({cache:e,compact:t,tau:s,pi:r,e:n}=i),t=+!!(t??!0),s=+!!(s??!0),r=+!!(r??!0),n=+!!(n??!0),e=+!!(e??!0);const a=s+r*2+n*4,o=e?{}:null;return function(l){if(o!=null){let d;if((d=o[l])!=null)return d;if(l===Math.round(l))return o[l]=`${l}`}let c=`${l}`,u=c.length+c.indexOf(".")+2;const h=function(d){const f=d.length;if(f<=u)return c=`${d}`,u=f};for(const d in lB[a]){const f=lB[a][d];if($y(l/f))h(`${kse(l/f,1,d,t)}`);else for(let[m,A]of Array.from(Rse)){let _=l/f*m;if($y(_)){for(const v of Array.from(A)){let w,x;for(;$y(x=_/v)&&$y(w=m/v);)_=x,m=w}h(`${Bse(l/f,m,d,t)}`);break}}}return`${l}`.length>oB&&h(`${l.toPrecision(oB)}`),o!=null&&(o[l]=c),c}},Y5=function(i,e){return e==null&&(e="info"),i=AN(i),console[e].apply(console,i)},AN=function(i){const e="color:rgb(128,0,128)",t="color:rgb(144,64,0)",n="color:rgb(0,0,192)",r="color:rgb(0,70,156)",s="color:inherit";let a=!1,o=0;const l=[];return i=i.replace(/(\\[<={}> "'])|(=>|[<={}> "'])/g,function(c,u,h){return u!=null&&u.length?u:a&&!['"',"'"].includes(h)||o&&!['"',"'","{","}"].includes(h)?h:(()=>{switch(h){case"<":return l.push(e),"%c<";case">":return l.push(e),l.push(s),"%c>%c";case" ":return l.push(t)," %c";case"=":case"=>":return l.push(e),`%c${h}`;case'"':case"'":return a=!a,a?(l.push(o?t:n),`${h}%c`):(l.push(o?r:e),`%c${h}`);case"{":return o++===0?(l.push(r),`%c${h}`):h;case"}":return--o===0?(l.push(e),`${h}%c`):h;default:return h}})()}),[i].concat(l)},Dse=(i,e)=>_N(i,e,"="),Lse=(i,e)=>_N(i,e,"=>"),_N=function(){const i=vN({compact:!1});return function(e,t,n){const r=function(o){return o===""+ +o||o.match(/^[A-Za-z_][A-Za-z0-9]*$/)?o:JSON.stringify(o)},s=function(o){return o.match(`
*"`)?o:`{${o}}`},a=function(o){if(o instanceof Array)return`[${o.map(a).join(", ")}]`;switch(typeof o){case"string":return o.match(`
`)?`"
${o}"
`:`"${o}"`;case"function":return o=`${o}`,o.match(`
`),o=o.replace(/^function (\([^)]*\))/,"$1 =>"),o=o.replace(/^(\([^)]*\)) =>\s*{\s*return\s*([^}]+)\s*;\s*}/,"$1 => $2");case"number":return i(o);default:return o!=null&&o!==!!o?o._up!=null?a(o.map(l=>l)):o.toMarkup?o.toString():"{"+(()=>{const l=[];for(const c in o){const u=o[c];Object.prototype.hasOwnProperty.call(o,c)&&l.push(`${r(c)}: ${a(u)}`)}return l})().join(", ")+"}":`${JSON.stringify(o)}`}};return[e,n,s(a(t))].join("")}}(),b4=function(i){return i=i.replace(/&/g,"&amp;"),i=i.replace(/</g,"&lt;"),i=i.replace(/"/g,"&quot;")},Ose=function(i){const e=[].slice.call(arguments);e.shift();let t="<span>";i=b4(i);for(const n of Array.from(e))i=i.replace(/%([a-z])/,function(r,s){const a=e.shift();switch(s){case"c":return`</span><span style="${b4(a)}">`;default:return b4(a)}});return t+=i,t+="</span>"},MM={prop:Dse,bind:Lse},Nse=Object.freeze(Object.defineProperty({__proto__:null,JSX:MM,format:Ose,markup:AN,number:vN,print:Y5},Symbol.toStringTag,{value:"Module"}));let Fse=0,T1=class{constructor(e,t,n,r,s,a){this.type=e,this._id=(++Fse).toString(),this.configure(s,a),this.parent=this.root=this.path=this.index=null,this.set(t,!0,!0),this.set(n,!1,!0),this.bind(r,!1)}configure(e,t){let{traits:n,props:r,finals:s,freeform:a}=e;return n==null&&(n=(this._config!=null?this._config.traits:void 0)!=null?this._config!=null?this._config.traits:void 0:[]),r==null&&(r=(this._config!=null?this._config.props:void 0)!=null?this._config!=null?this._config.props:void 0:{}),s==null&&(s=(this._config!=null?this._config.finals:void 0)!=null?this._config!=null?this._config.finals:void 0:{}),a==null&&(a=(this._config!=null?this._config.freeform:void 0)!=null?this._config!=null?this._config.freeform:void 0:!1),this._config={traits:n,props:r,finals:s,freeform:a},this.attributes=t.apply(this,this._config)}dispose(){return this.attributes.dispose(),this.attributes=null}_added(e){this.parent=e,this.root=e.root;const t={type:"add",node:this,parent:this.parent};return this.root&&this.root.trigger(t),t.type="added",this.trigger(t)}_removed(){const e={type:"remove",node:this};return this.root&&this.root.trigger(e),e.type="removed",this.trigger(e),this.root=this.parent=null}_index(e,t){let n;if(t==null&&({parent:t}=this),this.index=e,this.path=n=e!=null?((t!=null?t.path:void 0)!=null?t!=null?t.path:void 0:[]).concat([e]):null,this.order=n!=null?this._encode(n):1/0,this.root!=null)return this.trigger({type:"reindex"})}_encode(e){const n=o=>3/(o+3),r=o=>a+(s-a)*o;let s=1.3333333333333333,a=0;for(const o of Array.from(e)){const l=n(o+1),c=n(o+2);[s,a]=Array.from([r(l),r(c)])}return s}toString(){const e=this.id!=null?this.id:this._id,t=this.type!=null?this.type:"node";let n=t;if(n+=`#${e}`,this.classes!=null&&this.classes.length&&(n+=`.${this.classes.join(".")}`),this.children!=null){let r;return(r=this.children.length)?`<${n}>(${r})</${t}>`:`<${n}></${t}>`}else return`<${n} />`}toMarkup(e=null,t){let n,r;if(t==null&&(t=""),e&&typeof e!="function"){let f;e=(f=this.root!=null?this.root.model._matcher(e):void 0)!=null?f:()=>!0}const s=this.type!=null?this.type:"node";let{expr:a}=this;const o={id:this._id},l=typeof this.orig=="function"?this.orig():void 0;for(n in l)r=l[n],o[n]=r;const c=(()=>{const f=[];for(n in o)r=o[n],this.expr[n]||f.push(MM.prop(n,r));return f})();a=(()=>{const f=[];for(n in a)r=a[n],f.push(MM.bind(n,r));return f})();let u=[""];c.length&&(u=u.concat(c)),a.length&&(u=u.concat(a)),u=u.join(" ");let h=t;const d=()=>this.children!=null&&this.children.length?this.children.map(f=>f.toMarkup(e,h)).filter(f=>f!=null&&f.length).join(`
`):"";if(e&&!e(this))return d();if(this.children!=null){const f=`<${s}${u}>`,m=`</${s}>`;h=t+"  ";let A=d();return A.length&&(A=`
`+A+`
`+t),A==null&&(A=""),t+f+A+m}else return`${t}<${s}${u} />`}print(e,t){return Y5(this.toMarkup(e),t)}};du.apply(T1.prototype);let bN=class extends T1{constructor(e,t,n,r,s,a){super(e,t,n,r,s,a),this.children=[],this.on("reindex",o=>Array.from(this.children).map(l=>l.trigger(o)))}add(e){return e.parent!=null&&e.parent.remove(e),e._index(this.children.length,this),this.children.push(e),e._added(this)}remove(e){e.children!=null&&e.children.length&&e.empty();const t=this.children.indexOf(e);if(t!==-1){this.children.splice(t,1),e._index(null),e._removed(this);for(let n=0;n<this.children.length;n++)e=this.children[n],n>=t&&e._index(n)}}empty(){const e=this.children.slice().reverse();for(const t of Array.from(e))this.remove(t)}};class yN{constructor(e){e==null&&(e=10),this.limit=e}iterate(e){const{step:t,last:n}=e;let{limit:r}=this;for(;t();)if(!--r)throw console.warn("Last iteration",typeof n=="function"?n():void 0),new Error("Exceeded iteration limit.");return null}}var xx={},wN={},ql={},j0={},m_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Doctype=i.CDATA=i.Tag=i.Style=i.Script=i.Comment=i.Directive=i.Text=i.Root=i.isTag=i.ElementType=void 0;var e;(function(n){n.Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype"})(e=i.ElementType||(i.ElementType={}));function t(n){return n.type===e.Tag||n.type===e.Script||n.type===e.Style}i.isTag=t,i.Root=e.Root,i.Text=e.Text,i.Directive=e.Directive,i.Comment=e.Comment,i.Script=e.Script,i.Style=e.Style,i.Tag=e.Tag,i.CDATA=e.CDATA,i.Doctype=e.Doctype})(m_);var Oi={},W0=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),r1=dt&&dt.__assign||function(){return r1=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},r1.apply(this,arguments)};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.cloneNode=Oi.hasChildren=Oi.isDocument=Oi.isDirective=Oi.isComment=Oi.isText=Oi.isCDATA=Oi.isTag=Oi.Element=Oi.Document=Oi.NodeWithChildren=Oi.ProcessingInstruction=Oi.Comment=Oi.Text=Oi.DataNode=Oi.Node=void 0;var Es=m_,zse=new Map([[Es.ElementType.Tag,1],[Es.ElementType.Script,1],[Es.ElementType.Style,1],[Es.ElementType.Directive,1],[Es.ElementType.Text,3],[Es.ElementType.CDATA,4],[Es.ElementType.Comment,8],[Es.ElementType.Root,9]]),K5=function(){function i(e){this.type=e,this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(i.prototype,"nodeType",{get:function(){var e;return(e=zse.get(this.type))!==null&&e!==void 0?e:1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),i.prototype.cloneNode=function(e){return e===void 0&&(e=!1),J5(this,e)},i}();Oi.Node=K5;var X2=function(i){W0(e,i);function e(t,n){var r=i.call(this,t)||this;return r.data=n,r}return Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.data},set:function(t){this.data=t},enumerable:!1,configurable:!0}),e}(K5);Oi.DataNode=X2;var xN=function(i){W0(e,i);function e(t){return i.call(this,Es.ElementType.Text,t)||this}return e}(X2);Oi.Text=xN;var CN=function(i){W0(e,i);function e(t){return i.call(this,Es.ElementType.Comment,t)||this}return e}(X2);Oi.Comment=CN;var EN=function(i){W0(e,i);function e(t,n){var r=i.call(this,Es.ElementType.Directive,n)||this;return r.name=t,r}return e}(X2);Oi.ProcessingInstruction=EN;var Y2=function(i){W0(e,i);function e(t,n){var r=i.call(this,t)||this;return r.children=n,r}return Object.defineProperty(e.prototype,"firstChild",{get:function(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.children},set:function(t){this.children=t},enumerable:!1,configurable:!0}),e}(K5);Oi.NodeWithChildren=Y2;var SN=function(i){W0(e,i);function e(t){return i.call(this,Es.ElementType.Root,t)||this}return e}(Y2);Oi.Document=SN;var MN=function(i){W0(e,i);function e(t,n,r,s){r===void 0&&(r=[]),s===void 0&&(s=t==="script"?Es.ElementType.Script:t==="style"?Es.ElementType.Style:Es.ElementType.Tag);var a=i.call(this,s,r)||this;return a.name=t,a.attribs=n,a}return Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name},set:function(t){this.name=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){var t=this;return Object.keys(this.attribs).map(function(n){var r,s;return{name:n,value:t.attribs[n],namespace:(r=t["x-attribsNamespace"])===null||r===void 0?void 0:r[n],prefix:(s=t["x-attribsPrefix"])===null||s===void 0?void 0:s[n]}})},enumerable:!1,configurable:!0}),e}(Y2);Oi.Element=MN;function TN(i){return(0,Es.isTag)(i)}Oi.isTag=TN;function IN(i){return i.type===Es.ElementType.CDATA}Oi.isCDATA=IN;function PN(i){return i.type===Es.ElementType.Text}Oi.isText=PN;function kN(i){return i.type===Es.ElementType.Comment}Oi.isComment=kN;function BN(i){return i.type===Es.ElementType.Directive}Oi.isDirective=BN;function RN(i){return i.type===Es.ElementType.Root}Oi.isDocument=RN;function Use(i){return Object.prototype.hasOwnProperty.call(i,"children")}Oi.hasChildren=Use;function J5(i,e){e===void 0&&(e=!1);var t;if(PN(i))t=new xN(i.data);else if(kN(i))t=new CN(i.data);else if(TN(i)){var n=e?y4(i.children):[],r=new MN(i.name,r1({},i.attribs),n);n.forEach(function(l){return l.parent=r}),i.namespace!=null&&(r.namespace=i.namespace),i["x-attribsNamespace"]&&(r["x-attribsNamespace"]=r1({},i["x-attribsNamespace"])),i["x-attribsPrefix"]&&(r["x-attribsPrefix"]=r1({},i["x-attribsPrefix"])),t=r}else if(IN(i)){var n=e?y4(i.children):[],s=new Y2(Es.ElementType.CDATA,n);n.forEach(function(c){return c.parent=s}),t=s}else if(RN(i)){var n=e?y4(i.children):[],a=new SN(n);n.forEach(function(c){return c.parent=a}),i["x-mode"]&&(a["x-mode"]=i["x-mode"]),t=a}else if(BN(i)){var o=new EN(i.name,i.data);i["x-name"]!=null&&(o["x-name"]=i["x-name"],o["x-publicId"]=i["x-publicId"],o["x-systemId"]=i["x-systemId"]),t=o}else throw new Error("Not implemented yet: ".concat(i.type));return t.startIndex=i.startIndex,t.endIndex=i.endIndex,i.sourceCodeLocation!=null&&(t.sourceCodeLocation=i.sourceCodeLocation),t}Oi.cloneNode=J5;function y4(i){for(var e=i.map(function(n){return J5(n,!0)}),t=1;t<e.length;t++)e[t].prev=e[t-1],e[t-1].next=e[t];return e}(function(i){var e=dt&&dt.__createBinding||(Object.create?function(l,c,u,h){h===void 0&&(h=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(l,h,d)}:function(l,c,u,h){h===void 0&&(h=u),l[h]=c[u]}),t=dt&&dt.__exportStar||function(l,c){for(var u in l)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&e(c,l,u)};Object.defineProperty(i,"__esModule",{value:!0}),i.DomHandler=void 0;var n=m_,r=Oi;t(Oi,i);var s=/\s+/g,a={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1,xmlMode:!1},o=function(){function l(c,u,h){this.dom=[],this.root=new r.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(h=u,u=a),typeof c=="object"&&(u=c,c=void 0),this.callback=c??null,this.options=u??a,this.elementCB=h??null}return l.prototype.onparserinit=function(c){this.parser=c},l.prototype.onreset=function(){this.dom=[],this.root=new r.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},l.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},l.prototype.onerror=function(c){this.handleCallback(c)},l.prototype.onclosetag=function(){this.lastNode=null;var c=this.tagStack.pop();this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(c)},l.prototype.onopentag=function(c,u){var h=this.options.xmlMode?n.ElementType.Tag:void 0,d=new r.Element(c,u,void 0,h);this.addNode(d),this.tagStack.push(d)},l.prototype.ontext=function(c){var u=this.options.normalizeWhitespace,h=this.lastNode;if(h&&h.type===n.ElementType.Text)u?h.data=(h.data+c).replace(s," "):h.data+=c,this.options.withEndIndices&&(h.endIndex=this.parser.endIndex);else{u&&(c=c.replace(s," "));var d=new r.Text(c);this.addNode(d),this.lastNode=d}},l.prototype.oncomment=function(c){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=c;return}var u=new r.Comment(c);this.addNode(u),this.lastNode=u},l.prototype.oncommentend=function(){this.lastNode=null},l.prototype.oncdatastart=function(){var c=new r.Text(""),u=new r.NodeWithChildren(n.ElementType.CDATA,[c]);this.addNode(u),c.parent=u,this.lastNode=c},l.prototype.oncdataend=function(){this.lastNode=null},l.prototype.onprocessinginstruction=function(c,u){var h=new r.ProcessingInstruction(c,u);this.addNode(h)},l.prototype.handleCallback=function(c){if(typeof this.callback=="function")this.callback(c,this.dom);else if(c)throw c},l.prototype.addNode=function(c){var u=this.tagStack[this.tagStack.length-1],h=u.children[u.children.length-1];this.options.withStartIndices&&(c.startIndex=this.parser.startIndex),this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),u.children.push(c),h&&(c.prev=h,h.next=c),c.parent=u,this.lastNode=null},l}();i.DomHandler=o,i.default=o})(j0);var Z5={},DN={},gd={};const Vse="",Hse="",Gse="",Qse="",qse="",jse="",Wse="",$se="",Xse="",Yse="",Kse="",Jse="",Zse="",eae="",tae="",nae="",iae="",rae="",sae="",aae="",oae="",lae="",cae="",uae="",hae="",dae="",fae="&",pae="&",mae="",gae="",vae="",Aae="",_ae="",bae="",yae="",wae="",xae="",Cae="",Eae="",Sae="",Mae="",Tae="",Iae="",Pae="",kae="",Bae="",Rae="",Dae="",Lae="",Oae="",Nae="",Fae="",zae="",Uae="",Vae="",Hae="",Gae="",Qae="",qae="",jae="",Wae="",$ae="'",Xae="",Yae="",Kae="",Jae="",Zae="",eoe="",toe="",noe="",ioe="*",roe="",soe="",aoe="",ooe="",loe="",coe="",uoe="",hoe="",doe="",foe="",poe="",moe="",goe="",voe="",Aoe="",_oe="",boe="",yoe="",woe="",xoe="",Coe="",Eoe="",Soe="",Moe="",Toe="",Ioe="",Poe="",koe="",Boe="",Roe="",Doe="",Loe="",Ooe="",Noe="",Foe="",zoe="",Uoe="",Voe="",Hoe="",Goe="",Qoe="",qoe="",joe="",Woe="",$oe="",Xoe="",Yoe="",Koe="",Joe="",Zoe="",ele="",tle="",nle="",ile="",rle="",sle="",ale="",ole="",lle="",cle="",ule="",hle="",dle="",fle="=",ple="",mle="",gle="",vle="",Ale="",_le="",ble="",yle="",wle="",xle="",Cle="",Ele="",Sle="",Mle="",Tle="",Ile="",Ple="",kle="",Ble="",Rle="",Dle="",Lle="",Ole="",Nle="",Fle="",zle="",Ule="",Vle="",Hle="",Gle="",Qle="",qle="",jle="",Wle="",$le="",Xle="",Yle="",Kle="",Jle="",Zle="",ece="",tce="",nce="",ice="",rce="",sce="",ace="",oce="",lce="",cce="",uce="",hce="",dce="",fce="",pce="",mce="",gce="",vce="",Ace="",_ce="",bce="",yce="",wce="\\",xce="",Cce="",Ece="",Sce="",Mce="",Tce="",Ice="",Pce="",kce="",Bce="",Rce="",Dce="",Lce="",Oce="",Nce="",Fce="",zce="",Uce="",Vce="",Hce="",Gce="",Qce="",qce="",jce="",Wce="",$ce="",Xce="",Yce="",Kce="",Jce="",Zce="",eue="",tue="",nue="",iue="",rue="",sue="",aue="",oue="",lue="",cue="",uue="",hue="",due="",fue="",pue="",mue="",gue="",vue="",Aue="",_ue="",bue="",yue="",wue="",xue="",Cue="",Eue="",Sue="",Mue="",Tue="",Iue="",Pue="",kue="",Bue="",Rue="",Due="",Lue="",Oue="",Nue="",Fue="",zue="",Uue="",Vue=":",Hue="",Gue="",Que="",que="",jue=",",Wue="@",$ue="",Xue="",Yue="",Kue="",Jue="",Zue="",ehe="",the="",nhe="",ihe="",rhe="",she="",ahe="",ohe="",lhe="",che="",uhe="",hhe="",dhe="",fhe="",phe="",mhe="",ghe="",vhe="",Ahe="",_he="",bhe="",yhe="",whe="",xhe="",Che="",Ehe="",She="",Mhe="",The="",Ihe="",Phe="",khe="",Bhe="",Rhe="",Dhe="",Lhe="",Ohe="",Nhe="",Fhe="",zhe="",Uhe="",Vhe="",Hhe="",Ghe="",Qhe="",qhe="",jhe="",Whe="",$he="",Xhe="",Yhe="",Khe="",Jhe="",Zhe="",ede="",tde="",nde="",ide="",rde="",sde="",ade="",ode="",lde="",cde="",ude="",hde="",dde="",fde="",pde="",mde="",gde="",vde="",Ade="",_de="",bde="",yde="",wde="",xde="",Cde="",Ede="",Sde="",Mde="",Tde="",Ide="",Pde="",kde="",Bde="`",Rde="",Dde="",Lde="",Ode="",Nde="",Fde="",zde="",Ude="",Vde="",Hde="",Gde="",Qde="",qde="",jde="",Wde="",$de="",Xde="",Yde="",Kde="$",Jde="",Zde="",efe="",tfe="",nfe="",ife="",rfe="",sfe="",afe="",ofe="",lfe="",cfe="",ufe="",hfe="",dfe="",ffe="",pfe="",mfe="",gfe="",vfe="",Afe="",_fe="",bfe="",yfe="",wfe="",xfe="",Cfe="",Efe="",Sfe="",Mfe="",Tfe="",Ife="",Pfe="",kfe="",Bfe="",Rfe="",Dfe="",Lfe="",Ofe="",Nfe="",Ffe="",zfe="",Ufe="",Vfe="",Hfe="",Gfe="",Qfe="",qfe="",jfe="",Wfe="",$fe="",Xfe="",Yfe="",Kfe="",Jfe="",Zfe="",epe="",tpe="",npe="",ipe="",rpe="",spe="",ape="",ope="",lpe="",cpe="",upe="",hpe="",dpe="",fpe="",ppe="",mpe="",gpe="",vpe="",Ape="",_pe="",bpe="",ype="",wpe="",xpe="",Cpe="",Epe="",Spe="",Mpe="",Tpe="",Ipe="",Ppe="",kpe="",Bpe="",Rpe="",Dpe="",Lpe="",Ope="",Npe="",Fpe="",zpe="",Upe="",Vpe="",Hpe="",Gpe="",Qpe="",qpe="",jpe="",Wpe="",$pe="",Xpe="",Ype="",Kpe="",Jpe="",Zpe="",e0e="",t0e="",n0e="",i0e="",r0e="",s0e="",a0e="",o0e="",l0e="",c0e="",u0e="",h0e="",d0e="",f0e="=",p0e="",m0e="",g0e="",v0e="",A0e="",_0e="",b0e="",y0e="",w0e="",x0e="",C0e="",E0e="",S0e="",M0e="",T0e="",I0e="",P0e="",k0e="",B0e="",R0e="",D0e="!",L0e="",O0e="",N0e="",F0e="",z0e="",U0e="",V0e="",H0e="",G0e="",Q0e="",q0e="",j0e="",W0e="",$0e="",X0e="",Y0e="",K0e="",J0e="fj",Z0e="",eme="",tme="",nme="",ime="",rme="",sme="",ame="",ome="",lme="",cme="",ume="",hme="",dme="",fme="",pme="",mme="",gme="",vme="",Ame="",_me="",bme="",yme="",wme="",xme="",Cme="",Eme="",Sme="",Mme="",Tme="",Ime="",Pme="",kme="",Bme="",Rme="",Dme="",Lme="",Ome="",Nme="",Fme="",zme="",Ume="",Vme="",Hme="",Gme="",Qme="",qme="",jme="",Wme="",$me="",Xme="",Yme="",Kme="",Jme="",Zme="",ege="",tge="",nge="",ige="",rge="",sge="",age="",oge="",lge="",cge="",uge="",hge="",dge="",fge="",pge="",mge="",gge="",vge="",Age="",_ge="",bge="",yge="",wge="",xge="",Cge="",Ege="",Sge="`",Mge="",Tge="",Ige="",Pge="",kge="",Bge="",Rge="",Dge="",Lge="",Oge="",Nge="",Fge="",zge="",Uge="",Vge=">",Hge=">",Gge="",Qge="",qge="",jge="",Wge="",$ge="",Xge="",Yge="",Kge="",Jge="",Zge="",eve="",tve="",nve="",ive="",rve="",sve="",ave="",ove="",lve="",cve="",uve="",hve="",dve="^",fve="",pve="",mve="",gve="",vve="",Ave="",_ve="",bve="",yve="",wve="",xve="",Cve="",Eve="",Sve="",Mve="",Tve="",Ive="",Pve="",kve="",Bve="",Rve="",Dve="",Lve="",Ove="",Nve="",Fve="",zve="",Uve="",Vve="",Hve="",Gve="",Qve="",qve="",jve="",Wve="",$ve="",Xve="",Yve="",Kve="",Jve="",Zve="",eAe="",tAe="",nAe="",iAe="",rAe="",sAe="",aAe="",oAe="",lAe="",cAe="",uAe="",hAe="",dAe="",fAe="",pAe="",mAe="",gAe="",vAe="",AAe="",_Ae="",bAe="",yAe="",wAe="",xAe="",CAe="",EAe="",SAe="",MAe="",TAe="",IAe="",PAe="",kAe="",BAe="",RAe="",DAe="",LAe="",OAe="",NAe="",FAe="",zAe="",UAe="",VAe="",HAe="",GAe="",QAe="",qAe="",jAe="",WAe="",$Ae="",XAe="",YAe="",KAe="",JAe="",ZAe="",e1e="",t1e="",n1e="",i1e="",r1e="",s1e="",a1e="",o1e="",l1e="",c1e="",u1e="",h1e="",d1e="",f1e="",p1e="",m1e="",g1e="",v1e="",A1e="",_1e="",b1e="",y1e="",w1e="",x1e="",C1e="",E1e="",S1e="",M1e="",T1e="",I1e="",P1e="",k1e="",B1e="",R1e="",D1e="",L1e="",O1e="",N1e="",F1e="",z1e="",U1e="",V1e="",H1e="",G1e="",Q1e="",q1e="",j1e="",W1e="",$1e="",X1e="",Y1e="",K1e="",J1e="",Z1e="",e_e="",t_e="",n_e="",i_e="",r_e="",s_e="",a_e="",o_e="",l_e="",c_e="",u_e="",h_e="",d_e="",f_e="",p_e="",m_e="",g_e="",v_e="",A_e="",__e="",b_e="{",y_e="[",w_e="",x_e="",C_e="",E_e="",S_e="",M_e="",T_e="",I_e="",P_e="{",k_e="",B_e="",R_e="",D_e="",L_e="",O_e="",N_e="",F_e="",z_e="",U_e="",V_e="",H_e="",G_e="",Q_e="",q_e="",j_e="",W_e="",$_e="",X_e="",Y_e="",K_e="",J_e="",Z_e="",ebe="",tbe="",nbe="",ibe="",rbe="",sbe="",abe="",obe="",lbe="",cbe="",ube="",hbe="",dbe="",fbe="",pbe="",mbe="",gbe="",vbe="",Abe="",_be="",bbe="",ybe="",wbe="",xbe="",Cbe="",Ebe="",Sbe="",Mbe="",Tbe="",Ibe="",Pbe="",kbe="",Bbe="",Rbe="",Dbe="",Lbe="",Obe="",Nbe="",Fbe="",zbe="",Ube="",Vbe="",Hbe="",Gbe="",Qbe="",qbe="",jbe="",Wbe="",$be="",Xbe="",Ybe="",Kbe="",Jbe="",Zbe="",eye="",tye="",nye="",iye="",rye="",sye="",aye="",oye="",lye="",cye="",uye="",hye="",dye="",fye="",pye="",mye="",gye="",vye="",Aye="",_ye="",bye="",yye="",wye="",xye="",Cye="",Eye="",Sye="",Mye="",Tye="",Iye="",Pye="",kye="",Bye="",Rye="",Dye="",Lye="",Oye="",Nye="",Fye="",zye="",Uye="",Vye="",Hye="",Gye="",Qye="",qye="_",jye="",Wye="",$ye="",Xye="",Yye="",Kye="(",Jye="",Zye="",ewe="",twe="",nwe="",iwe="",rwe="",swe="",awe="",owe="",lwe="",cwe="",uwe="",hwe="",dwe="",fwe="[",pwe="",mwe="",gwe="",vwe="",Awe="",_we="",bwe="<",ywe="<",wwe="",xwe="",Cwe="",Ewe="",Swe="",Mwe="",Twe="",Iwe="",Pwe="",kwe="",Bwe="",Rwe="",Dwe="",Lwe="",Owe="",Nwe="",Fwe="",zwe="",Uwe="",Vwe="",Hwe="",Gwe="",Qwe="",qwe="",jwe="",Wwe="",$we="",Xwe="",Ywe="",Kwe="",Jwe="",Zwe="",exe="",txe="",nxe="",ixe="",rxe="*",sxe="",axe="",oxe="",lxe="",cxe="",uxe="",hxe="",dxe="",fxe="",pxe="",mxe="",gxe="",vxe="",Axe="",_xe="",bxe="",yxe="",wxe="",xxe="",Cxe="",Exe="",Sxe="",Mxe="",Txe="",Ixe="",Pxe="",kxe="",Bxe="",Rxe="",Dxe="",Lxe="",Oxe="",Nxe="",Fxe="",zxe="",Uxe="",Vxe="",Hxe="",Gxe="",Qxe="",qxe="",jxe="",Wxe="",$xe="",Xxe="",Yxe="",Kxe="",Jxe="",Zxe="",e2e="",t2e="",n2e="",i2e="",r2e="",s2e="",a2e="",o2e="",l2e="",c2e="",u2e="",h2e="",d2e="",f2e="",p2e=`
`,m2e="",g2e="",v2e="",A2e="",_2e="",b2e="",y2e="",w2e="",x2e="",C2e="",E2e="",S2e="",M2e="",T2e="",I2e="",P2e="",k2e="",B2e="",R2e="",D2e="",L2e="",O2e="",N2e="",F2e="",z2e="",U2e="",V2e="",H2e="",G2e="",Q2e="",q2e="",j2e="",W2e="",$2e="",X2e="",Y2e="",K2e="",J2e="",Z2e="",eCe="",tCe="",nCe="",iCe="",rCe="",sCe="",aCe="",oCe="",lCe="",cCe="",uCe="",hCe="",dCe="",fCe="",pCe="",mCe="",gCe="",vCe="",ACe="",_Ce="",bCe="",yCe="",wCe="",xCe="",CCe="",ECe="",SCe="",MCe="",TCe="",ICe="",PCe="",kCe="",BCe="",RCe="",DCe="",LCe="",OCe="",NCe="",FCe="",zCe="",UCe="",VCe="",HCe="",GCe="",QCe="",qCe="",jCe="",WCe="",$Ce="",XCe="",YCe="",KCe="",JCe="",ZCe="",eEe="",tEe="",nEe="",iEe="",rEe="",sEe="",aEe="",oEe="",lEe="",cEe="",uEe="",hEe="",dEe="",fEe="",pEe="",mEe="",gEe="",vEe="",AEe="",_Ee="",bEe="",yEe="",wEe="",xEe="",CEe="",EEe="",SEe="",MEe="",TEe="",IEe="",PEe="",kEe="",BEe="",REe="",DEe="",LEe="",OEe="",NEe="",FEe="",zEe="",UEe="",VEe="",HEe="",GEe="",QEe="",qEe="",jEe="",WEe="",$Ee="",XEe="",YEe="",KEe="",JEe="",ZEe="",eSe="",tSe="",nSe="",iSe="",rSe="",sSe="",aSe="",oSe="",lSe="",cSe="",uSe="",hSe="",dSe="",fSe="",pSe="",mSe="",gSe="",vSe="",ASe="",_Se="",bSe="",ySe="",wSe="",xSe="#",CSe="",ESe="",SSe="",MSe="",TSe="",ISe="",PSe="",kSe="",BSe=">",RSe="",DSe="",LSe="",OSe="",NSe="<",FSe="",zSe="",USe="",VSe="",HSe="",GSe="",QSe="",qSe="",jSe="",WSe="",$Se="",XSe="",YSe="",KSe="",JSe="",ZSe="",e4e="",t4e="",n4e="",i4e="",r4e="",s4e="",a4e="",o4e="",l4e="",c4e="",u4e="",h4e="",d4e="",f4e="",p4e="",m4e="",g4e="",v4e="",A4e="",_4e="",b4e="",y4e="",w4e="",x4e="",C4e="",E4e="",S4e="",M4e="",T4e="",I4e="",P4e="",k4e="",B4e="",R4e="",D4e="",L4e="",O4e="",N4e="",F4e="",z4e="",U4e="",V4e="",H4e="",G4e="",Q4e="",q4e="",j4e="",W4e="",$4e="",X4e="",Y4e="",K4e="",J4e="",Z4e="",e3e="",t3e="",n3e="",i3e="",r3e="",s3e="",a3e="",o3e="",l3e="",c3e="",u3e="",h3e="",d3e="",f3e="",p3e="",m3e="",g3e="",v3e="",A3e="",_3e="",b3e="",y3e="",w3e="",x3e="",C3e="%",E3e=".",S3e="",M3e="",T3e="",I3e="",P3e="",k3e="",B3e="",R3e="",D3e="",L3e="",O3e="",N3e="",F3e="",z3e="",U3e="",V3e="",H3e="",G3e="",Q3e="",q3e="",j3e="+",W3e="",$3e="",X3e="",Y3e="",K3e="",J3e="",Z3e="",eMe="",tMe="",nMe="",iMe="",rMe="",sMe="",aMe="",oMe="",lMe="",cMe="",uMe="",hMe="",dMe="",fMe="",pMe="",mMe="",gMe="",vMe="",AMe="",_Me="",bMe="",yMe="",wMe="",xMe="",CMe="",EMe="",SMe="",MMe="",TMe="",IMe="",PMe="",kMe="",BMe="",RMe="",DMe="",LMe="",OMe="",NMe="",FMe="",zMe="",UMe="",VMe="",HMe="",GMe="",QMe="",qMe="",jMe="",WMe="",$Me="",XMe="",YMe="",KMe="",JMe="",ZMe="",eTe="",tTe="",nTe="?",iTe="",rTe='"',sTe='"',aTe="",oTe="",lTe="",cTe="",uTe="",hTe="",dTe="",fTe="",pTe="",mTe="",gTe="",vTe="",ATe="",_Te="",bTe="",yTe="",wTe="",xTe="",CTe="",ETe="",STe="",MTe="",TTe="",ITe="",PTe="",kTe="",BTe="",RTe="",DTe="",LTe="",OTe="",NTe="",FTe="",zTe="",UTe="",VTe="}",HTe="]",GTe="",QTe="",qTe="",jTe="",WTe="",$Te="",XTe="",YTe="",KTe="}",JTe="",ZTe="",e5e="",t5e="",n5e="",i5e="",r5e="",s5e="",a5e="",o5e="",l5e="",c5e="",u5e="",h5e="",d5e="",f5e="",p5e="",m5e="",g5e="",v5e="",A5e="",_5e="",b5e="",y5e="",w5e="",x5e="",C5e="",E5e="",S5e="",M5e="",T5e="",I5e="",P5e="",k5e="",B5e="",R5e="",D5e="",L5e="",O5e="",N5e="",F5e="",z5e="",U5e="",V5e="",H5e="",G5e="",Q5e="",q5e="",j5e="",W5e="",$5e="",X5e="",Y5e="",K5e="",J5e="",Z5e="",eIe="",tIe="",nIe="",iIe="",rIe="",sIe="",aIe="",oIe="",lIe="",cIe="",uIe="",hIe="",dIe="",fIe="",pIe="",mIe="",gIe="",vIe="",AIe="",_Ie="",bIe="",yIe="",wIe=")",xIe="",CIe="",EIe="",SIe="",MIe="",TIe="",IIe="",PIe="",kIe="",BIe="]",RIe="",DIe="",LIe="",OIe="",NIe="",FIe="",zIe="",UIe="",VIe="",HIe="",GIe="",QIe="",qIe="",jIe="",WIe="",$Ie="",XIe="",YIe="",KIe="",JIe="",ZIe="",ePe="",tPe="",nPe="",iPe="",rPe="",sPe="",aPe="",oPe="",lPe="",cPe="",uPe="",hPe="",dPe="",fPe="",pPe="",mPe="",gPe="",vPe="",APe="",_Pe="",bPe=";",yPe="",wPe="",xPe="",CPe="",EPe="",SPe="",MPe="",TPe="",IPe="",PPe="",kPe="",BPe="",RPe="",DPe="",LPe="",OPe="",NPe="",FPe="",zPe="",UPe="",VPe="",HPe="",GPe="",QPe="",qPe="",jPe="",WPe="",$Pe="",XPe="",YPe="",KPe="",JPe="",ZPe="",e6e="",t6e="",n6e="",i6e="",r6e="",s6e="",a6e="",o6e="",l6e="",c6e="",u6e="",h6e="",d6e="",f6e="",p6e="",m6e="/",g6e="",v6e="",A6e="",_6e="",b6e="",y6e="",w6e="",x6e="",C6e="",E6e="",S6e="",M6e="",T6e="",I6e="",P6e="",k6e="",B6e="",R6e="",D6e="",L6e="",O6e="",N6e="",F6e="",z6e="",U6e="",V6e="",H6e="",G6e="",Q6e="",q6e="",j6e="",W6e="",$6e="",X6e="",Y6e="",K6e="",J6e="",Z6e="",eke="",tke="",nke="",ike="",rke="",ske="",ake="",oke="",lke="",cke="",uke="",hke="",dke="",fke="",pke="",mke="",gke="",vke="",Ake="",_ke="",bke="",yke="",wke="",xke="",Cke="",Eke="",Ske="",Mke="",Tke="",Ike="",Pke="",kke="",Bke="",Rke="",Dke="",Lke="",Oke="",Nke="",Fke="",zke="",Uke="",Vke="",Hke="",Gke="",Qke="",qke="",jke="",Wke="",$ke="",Xke="",Yke="",Kke="",Jke="",Zke="",e8e="",t8e="",n8e="",i8e="",r8e="",s8e="",a8e="",o8e="",l8e="",c8e="",u8e="",h8e="",d8e="",f8e="",p8e="",m8e="",g8e="",v8e="",A8e="",_8e="",b8e="	",y8e="",w8e="",x8e="",C8e="",E8e="",S8e="",M8e="",T8e="",I8e="",P8e="",k8e="",B8e="",R8e="",D8e="",L8e="",O8e="",N8e="",F8e="",z8e="",U8e="",V8e="",H8e="",G8e="",Q8e="",q8e="",j8e="",W8e="",$8e="",X8e="",Y8e="",K8e="",J8e="",Z8e="",eBe="",tBe="",nBe="",iBe="",rBe="",sBe="",aBe="",oBe="",lBe="",cBe="",uBe="",hBe="",dBe="",fBe="",pBe="",mBe="",gBe="",vBe="",ABe="",_Be="",bBe="",yBe="",wBe="",xBe="",CBe="",EBe="",SBe="",MBe="",TBe="",IBe="",PBe="",kBe="",BBe="",RBe="",DBe="",LBe="",OBe="",NBe="",FBe="",zBe="",UBe="",VBe="",HBe="",GBe="",QBe="",qBe="",jBe="",WBe="",$Be="",XBe="",YBe="",KBe="",JBe="",ZBe="",eRe="",tRe="",nRe="",iRe="",rRe="",sRe="",aRe="",oRe="",lRe="",cRe="",uRe="",hRe="",dRe="",fRe="",pRe="",mRe="",gRe="",vRe="",ARe="",_Re="",bRe="",yRe="",wRe="",xRe="",CRe="_",ERe="",SRe="",MRe="",TRe="",IRe="",PRe="",kRe="",BRe="",RRe="",DRe="",LRe="",ORe="",NRe="",FRe="",zRe="",URe="",VRe="",HRe="",GRe="",QRe="",qRe="",jRe="",WRe="",$Re="",XRe="",YRe="",KRe="",JRe="",ZRe="",eDe="",tDe="",nDe="",iDe="",rDe="",sDe="",aDe="",oDe="",lDe="",cDe="",uDe="",hDe="",dDe="",fDe="",pDe="",mDe="",gDe="",vDe="",ADe="",_De="",bDe="",yDe="",wDe="",xDe="",CDe="",EDe="",SDe="",MDe="",TDe="",IDe="",PDe="",kDe="",BDe="",RDe="",DDe="",LDe="",ODe="",NDe="",FDe="",zDe="",UDe="",VDe="",HDe="",GDe="",QDe="",qDe="",jDe="",WDe="",$De="",XDe="",YDe="",KDe="",JDe="|",ZDe="",e7e="|",t7e="",n7e="",i7e="|",r7e="",s7e="",a7e="",o7e="",l7e="",c7e="",u7e="",h7e="",d7e="",f7e="",p7e="",m7e="",g7e="",v7e="",A7e="",_7e="",b7e="",y7e="",w7e="",x7e="",C7e="",E7e="",S7e="",M7e="",T7e="",I7e="",P7e="",k7e="",B7e="",R7e="",D7e="",L7e="",O7e="",N7e="",F7e="",z7e="",U7e="",V7e="",H7e="",G7e="",Q7e="",q7e="",j7e="",W7e="",$7e="",X7e="",Y7e="",K7e="",J7e="",Z7e="",e9e="",t9e="",n9e="",i9e="",r9e="",s9e="",a9e="",o9e="",l9e="",c9e="",u9e="",h9e="",d9e="",f9e="",p9e="",m9e="",g9e="",v9e="",A9e="",_9e="",b9e="",y9e="",w9e="",x9e="",C9e="",E9e="",S9e="",M9e="",T9e="",I9e="",P9e="",k9e="",B9e="",R9e="",D9e="",L9e="",O9e="",N9e="",F9e="",z9e="",U9e="",V9e="",H9e="",G9e="",Q9e="",q9e="",j9e="",W9e="",$9e="",X9e="",Y9e="",K9e="",J9e="",Z9e="",eLe="",tLe="",nLe="",iLe="",LN={Aacute:Vse,aacute:Hse,Abreve:Gse,abreve:Qse,ac:qse,acd:jse,acE:Wse,Acirc:$se,acirc:Xse,acute:Yse,Acy:Kse,acy:Jse,AElig:Zse,aelig:eae,af:tae,Afr:nae,afr:iae,Agrave:rae,agrave:sae,alefsym:aae,aleph:oae,Alpha:lae,alpha:cae,Amacr:uae,amacr:hae,amalg:dae,amp:fae,AMP:pae,andand:mae,And:gae,and:vae,andd:Aae,andslope:_ae,andv:bae,ang:yae,ange:wae,angle:xae,angmsdaa:Cae,angmsdab:Eae,angmsdac:Sae,angmsdad:Mae,angmsdae:Tae,angmsdaf:Iae,angmsdag:Pae,angmsdah:kae,angmsd:Bae,angrt:Rae,angrtvb:Dae,angrtvbd:Lae,angsph:Oae,angst:Nae,angzarr:Fae,Aogon:zae,aogon:Uae,Aopf:Vae,aopf:Hae,apacir:Gae,ap:Qae,apE:qae,ape:jae,apid:Wae,apos:$ae,ApplyFunction:Xae,approx:Yae,approxeq:Kae,Aring:Jae,aring:Zae,Ascr:eoe,ascr:toe,Assign:noe,ast:ioe,asymp:roe,asympeq:soe,Atilde:aoe,atilde:ooe,Auml:loe,auml:coe,awconint:uoe,awint:hoe,backcong:doe,backepsilon:foe,backprime:poe,backsim:moe,backsimeq:goe,Backslash:voe,Barv:Aoe,barvee:_oe,barwed:boe,Barwed:yoe,barwedge:woe,bbrk:xoe,bbrktbrk:Coe,bcong:Eoe,Bcy:Soe,bcy:Moe,bdquo:Toe,becaus:Ioe,because:Poe,Because:koe,bemptyv:Boe,bepsi:Roe,bernou:Doe,Bernoullis:Loe,Beta:Ooe,beta:Noe,beth:Foe,between:zoe,Bfr:Uoe,bfr:Voe,bigcap:Hoe,bigcirc:Goe,bigcup:Qoe,bigodot:qoe,bigoplus:joe,bigotimes:Woe,bigsqcup:$oe,bigstar:Xoe,bigtriangledown:Yoe,bigtriangleup:Koe,biguplus:Joe,bigvee:Zoe,bigwedge:ele,bkarow:tle,blacklozenge:nle,blacksquare:ile,blacktriangle:rle,blacktriangledown:sle,blacktriangleleft:ale,blacktriangleright:ole,blank:lle,blk12:cle,blk14:ule,blk34:hle,block:dle,bne:fle,bnequiv:ple,bNot:mle,bnot:gle,Bopf:vle,bopf:Ale,bot:_le,bottom:ble,bowtie:yle,boxbox:wle,boxdl:xle,boxdL:Cle,boxDl:Ele,boxDL:Sle,boxdr:Mle,boxdR:Tle,boxDr:Ile,boxDR:Ple,boxh:kle,boxH:Ble,boxhd:Rle,boxHd:Dle,boxhD:Lle,boxHD:Ole,boxhu:Nle,boxHu:Fle,boxhU:zle,boxHU:Ule,boxminus:Vle,boxplus:Hle,boxtimes:Gle,boxul:Qle,boxuL:qle,boxUl:jle,boxUL:Wle,boxur:$le,boxuR:Xle,boxUr:Yle,boxUR:Kle,boxv:Jle,boxV:Zle,boxvh:ece,boxvH:tce,boxVh:nce,boxVH:ice,boxvl:rce,boxvL:sce,boxVl:ace,boxVL:oce,boxvr:lce,boxvR:cce,boxVr:uce,boxVR:hce,bprime:dce,breve:fce,Breve:pce,brvbar:mce,bscr:gce,Bscr:vce,bsemi:Ace,bsim:_ce,bsime:bce,bsolb:yce,bsol:wce,bsolhsub:xce,bull:Cce,bullet:Ece,bump:Sce,bumpE:Mce,bumpe:Tce,Bumpeq:Ice,bumpeq:Pce,Cacute:kce,cacute:Bce,capand:Rce,capbrcup:Dce,capcap:Lce,cap:Oce,Cap:Nce,capcup:Fce,capdot:zce,CapitalDifferentialD:Uce,caps:Vce,caret:Hce,caron:Gce,Cayleys:Qce,ccaps:qce,Ccaron:jce,ccaron:Wce,Ccedil:$ce,ccedil:Xce,Ccirc:Yce,ccirc:Kce,Cconint:Jce,ccups:Zce,ccupssm:eue,Cdot:tue,cdot:nue,cedil:iue,Cedilla:rue,cemptyv:sue,cent:aue,centerdot:oue,CenterDot:lue,cfr:cue,Cfr:uue,CHcy:hue,chcy:due,check:fue,checkmark:pue,Chi:mue,chi:gue,circ:vue,circeq:Aue,circlearrowleft:_ue,circlearrowright:bue,circledast:yue,circledcirc:wue,circleddash:xue,CircleDot:Cue,circledR:Eue,circledS:Sue,CircleMinus:Mue,CirclePlus:Tue,CircleTimes:Iue,cir:Pue,cirE:kue,cire:Bue,cirfnint:Rue,cirmid:Due,cirscir:Lue,ClockwiseContourIntegral:Oue,CloseCurlyDoubleQuote:Nue,CloseCurlyQuote:Fue,clubs:zue,clubsuit:Uue,colon:Vue,Colon:Hue,Colone:Gue,colone:Que,coloneq:que,comma:jue,commat:Wue,comp:$ue,compfn:Xue,complement:Yue,complexes:Kue,cong:Jue,congdot:Zue,Congruent:ehe,conint:the,Conint:nhe,ContourIntegral:ihe,copf:rhe,Copf:she,coprod:ahe,Coproduct:ohe,copy:lhe,COPY:che,copysr:uhe,CounterClockwiseContourIntegral:hhe,crarr:dhe,cross:fhe,Cross:phe,Cscr:mhe,cscr:ghe,csub:vhe,csube:Ahe,csup:_he,csupe:bhe,ctdot:yhe,cudarrl:whe,cudarrr:xhe,cuepr:Che,cuesc:Ehe,cularr:She,cularrp:Mhe,cupbrcap:The,cupcap:Ihe,CupCap:Phe,cup:khe,Cup:Bhe,cupcup:Rhe,cupdot:Dhe,cupor:Lhe,cups:Ohe,curarr:Nhe,curarrm:Fhe,curlyeqprec:zhe,curlyeqsucc:Uhe,curlyvee:Vhe,curlywedge:Hhe,curren:Ghe,curvearrowleft:Qhe,curvearrowright:qhe,cuvee:jhe,cuwed:Whe,cwconint:$he,cwint:Xhe,cylcty:Yhe,dagger:Khe,Dagger:Jhe,daleth:Zhe,darr:ede,Darr:tde,dArr:nde,dash:ide,Dashv:rde,dashv:sde,dbkarow:ade,dblac:ode,Dcaron:lde,dcaron:cde,Dcy:ude,dcy:hde,ddagger:dde,ddarr:fde,DD:pde,dd:mde,DDotrahd:gde,ddotseq:vde,deg:Ade,Del:_de,Delta:bde,delta:yde,demptyv:wde,dfisht:xde,Dfr:Cde,dfr:Ede,dHar:Sde,dharl:Mde,dharr:Tde,DiacriticalAcute:Ide,DiacriticalDot:Pde,DiacriticalDoubleAcute:kde,DiacriticalGrave:Bde,DiacriticalTilde:Rde,diam:Dde,diamond:Lde,Diamond:Ode,diamondsuit:Nde,diams:Fde,die:zde,DifferentialD:Ude,digamma:Vde,disin:Hde,div:Gde,divide:Qde,divideontimes:qde,divonx:jde,DJcy:Wde,djcy:$de,dlcorn:Xde,dlcrop:Yde,dollar:Kde,Dopf:Jde,dopf:Zde,Dot:efe,dot:tfe,DotDot:nfe,doteq:ife,doteqdot:rfe,DotEqual:sfe,dotminus:afe,dotplus:ofe,dotsquare:lfe,doublebarwedge:cfe,DoubleContourIntegral:ufe,DoubleDot:hfe,DoubleDownArrow:dfe,DoubleLeftArrow:ffe,DoubleLeftRightArrow:pfe,DoubleLeftTee:mfe,DoubleLongLeftArrow:gfe,DoubleLongLeftRightArrow:vfe,DoubleLongRightArrow:Afe,DoubleRightArrow:_fe,DoubleRightTee:bfe,DoubleUpArrow:yfe,DoubleUpDownArrow:wfe,DoubleVerticalBar:xfe,DownArrowBar:Cfe,downarrow:Efe,DownArrow:Sfe,Downarrow:Mfe,DownArrowUpArrow:Tfe,DownBreve:Ife,downdownarrows:Pfe,downharpoonleft:kfe,downharpoonright:Bfe,DownLeftRightVector:Rfe,DownLeftTeeVector:Dfe,DownLeftVectorBar:Lfe,DownLeftVector:Ofe,DownRightTeeVector:Nfe,DownRightVectorBar:Ffe,DownRightVector:zfe,DownTeeArrow:Ufe,DownTee:Vfe,drbkarow:Hfe,drcorn:Gfe,drcrop:Qfe,Dscr:qfe,dscr:jfe,DScy:Wfe,dscy:$fe,dsol:Xfe,Dstrok:Yfe,dstrok:Kfe,dtdot:Jfe,dtri:Zfe,dtrif:epe,duarr:tpe,duhar:npe,dwangle:ipe,DZcy:rpe,dzcy:spe,dzigrarr:ape,Eacute:ope,eacute:lpe,easter:cpe,Ecaron:upe,ecaron:hpe,Ecirc:dpe,ecirc:fpe,ecir:ppe,ecolon:mpe,Ecy:gpe,ecy:vpe,eDDot:Ape,Edot:_pe,edot:bpe,eDot:ype,ee:wpe,efDot:xpe,Efr:Cpe,efr:Epe,eg:Spe,Egrave:Mpe,egrave:Tpe,egs:Ipe,egsdot:Ppe,el:kpe,Element:Bpe,elinters:Rpe,ell:Dpe,els:Lpe,elsdot:Ope,Emacr:Npe,emacr:Fpe,empty:zpe,emptyset:Upe,EmptySmallSquare:Vpe,emptyv:Hpe,EmptyVerySmallSquare:Gpe,emsp13:Qpe,emsp14:qpe,emsp:jpe,ENG:Wpe,eng:$pe,ensp:Xpe,Eogon:Ype,eogon:Kpe,Eopf:Jpe,eopf:Zpe,epar:e0e,eparsl:t0e,eplus:n0e,epsi:i0e,Epsilon:r0e,epsilon:s0e,epsiv:a0e,eqcirc:o0e,eqcolon:l0e,eqsim:c0e,eqslantgtr:u0e,eqslantless:h0e,Equal:d0e,equals:f0e,EqualTilde:p0e,equest:m0e,Equilibrium:g0e,equiv:v0e,equivDD:A0e,eqvparsl:_0e,erarr:b0e,erDot:y0e,escr:w0e,Escr:x0e,esdot:C0e,Esim:E0e,esim:S0e,Eta:M0e,eta:T0e,ETH:I0e,eth:P0e,Euml:k0e,euml:B0e,euro:R0e,excl:D0e,exist:L0e,Exists:O0e,expectation:N0e,exponentiale:F0e,ExponentialE:z0e,fallingdotseq:U0e,Fcy:V0e,fcy:H0e,female:G0e,ffilig:Q0e,fflig:q0e,ffllig:j0e,Ffr:W0e,ffr:$0e,filig:X0e,FilledSmallSquare:Y0e,FilledVerySmallSquare:K0e,fjlig:J0e,flat:Z0e,fllig:eme,fltns:tme,fnof:nme,Fopf:ime,fopf:rme,forall:sme,ForAll:ame,fork:ome,forkv:lme,Fouriertrf:cme,fpartint:ume,frac12:hme,frac13:dme,frac14:fme,frac15:pme,frac16:mme,frac18:gme,frac23:vme,frac25:Ame,frac34:_me,frac35:bme,frac38:yme,frac45:wme,frac56:xme,frac58:Cme,frac78:Eme,frasl:Sme,frown:Mme,fscr:Tme,Fscr:Ime,gacute:Pme,Gamma:kme,gamma:Bme,Gammad:Rme,gammad:Dme,gap:Lme,Gbreve:Ome,gbreve:Nme,Gcedil:Fme,Gcirc:zme,gcirc:Ume,Gcy:Vme,gcy:Hme,Gdot:Gme,gdot:Qme,ge:qme,gE:jme,gEl:Wme,gel:$me,geq:Xme,geqq:Yme,geqslant:Kme,gescc:Jme,ges:Zme,gesdot:ege,gesdoto:tge,gesdotol:nge,gesl:ige,gesles:rge,Gfr:sge,gfr:age,gg:oge,Gg:lge,ggg:cge,gimel:uge,GJcy:hge,gjcy:dge,gla:fge,gl:pge,glE:mge,glj:gge,gnap:vge,gnapprox:Age,gne:_ge,gnE:bge,gneq:yge,gneqq:wge,gnsim:xge,Gopf:Cge,gopf:Ege,grave:Sge,GreaterEqual:Mge,GreaterEqualLess:Tge,GreaterFullEqual:Ige,GreaterGreater:Pge,GreaterLess:kge,GreaterSlantEqual:Bge,GreaterTilde:Rge,Gscr:Dge,gscr:Lge,gsim:Oge,gsime:Nge,gsiml:Fge,gtcc:zge,gtcir:Uge,gt:Vge,GT:Hge,Gt:Gge,gtdot:Qge,gtlPar:qge,gtquest:jge,gtrapprox:Wge,gtrarr:$ge,gtrdot:Xge,gtreqless:Yge,gtreqqless:Kge,gtrless:Jge,gtrsim:Zge,gvertneqq:eve,gvnE:tve,Hacek:nve,hairsp:ive,half:rve,hamilt:sve,HARDcy:ave,hardcy:ove,harrcir:lve,harr:cve,hArr:uve,harrw:hve,Hat:dve,hbar:fve,Hcirc:pve,hcirc:mve,hearts:gve,heartsuit:vve,hellip:Ave,hercon:_ve,hfr:bve,Hfr:yve,HilbertSpace:wve,hksearow:xve,hkswarow:Cve,hoarr:Eve,homtht:Sve,hookleftarrow:Mve,hookrightarrow:Tve,hopf:Ive,Hopf:Pve,horbar:kve,HorizontalLine:Bve,hscr:Rve,Hscr:Dve,hslash:Lve,Hstrok:Ove,hstrok:Nve,HumpDownHump:Fve,HumpEqual:zve,hybull:Uve,hyphen:Vve,Iacute:Hve,iacute:Gve,ic:Qve,Icirc:qve,icirc:jve,Icy:Wve,icy:$ve,Idot:Xve,IEcy:Yve,iecy:Kve,iexcl:Jve,iff:Zve,ifr:eAe,Ifr:tAe,Igrave:nAe,igrave:iAe,ii:rAe,iiiint:sAe,iiint:aAe,iinfin:oAe,iiota:lAe,IJlig:cAe,ijlig:uAe,Imacr:hAe,imacr:dAe,image:fAe,ImaginaryI:pAe,imagline:mAe,imagpart:gAe,imath:vAe,Im:AAe,imof:_Ae,imped:bAe,Implies:yAe,incare:wAe,in:"",infin:xAe,infintie:CAe,inodot:EAe,intcal:SAe,int:MAe,Int:TAe,integers:IAe,Integral:PAe,intercal:kAe,Intersection:BAe,intlarhk:RAe,intprod:DAe,InvisibleComma:LAe,InvisibleTimes:OAe,IOcy:NAe,iocy:FAe,Iogon:zAe,iogon:UAe,Iopf:VAe,iopf:HAe,Iota:GAe,iota:QAe,iprod:qAe,iquest:jAe,iscr:WAe,Iscr:$Ae,isin:XAe,isindot:YAe,isinE:KAe,isins:JAe,isinsv:ZAe,isinv:e1e,it:t1e,Itilde:n1e,itilde:i1e,Iukcy:r1e,iukcy:s1e,Iuml:a1e,iuml:o1e,Jcirc:l1e,jcirc:c1e,Jcy:u1e,jcy:h1e,Jfr:d1e,jfr:f1e,jmath:p1e,Jopf:m1e,jopf:g1e,Jscr:v1e,jscr:A1e,Jsercy:_1e,jsercy:b1e,Jukcy:y1e,jukcy:w1e,Kappa:x1e,kappa:C1e,kappav:E1e,Kcedil:S1e,kcedil:M1e,Kcy:T1e,kcy:I1e,Kfr:P1e,kfr:k1e,kgreen:B1e,KHcy:R1e,khcy:D1e,KJcy:L1e,kjcy:O1e,Kopf:N1e,kopf:F1e,Kscr:z1e,kscr:U1e,lAarr:V1e,Lacute:H1e,lacute:G1e,laemptyv:Q1e,lagran:q1e,Lambda:j1e,lambda:W1e,lang:$1e,Lang:X1e,langd:Y1e,langle:K1e,lap:J1e,Laplacetrf:Z1e,laquo:e_e,larrb:t_e,larrbfs:n_e,larr:i_e,Larr:r_e,lArr:s_e,larrfs:a_e,larrhk:o_e,larrlp:l_e,larrpl:c_e,larrsim:u_e,larrtl:h_e,latail:d_e,lAtail:f_e,lat:p_e,late:m_e,lates:g_e,lbarr:v_e,lBarr:A_e,lbbrk:__e,lbrace:b_e,lbrack:y_e,lbrke:w_e,lbrksld:x_e,lbrkslu:C_e,Lcaron:E_e,lcaron:S_e,Lcedil:M_e,lcedil:T_e,lceil:I_e,lcub:P_e,Lcy:k_e,lcy:B_e,ldca:R_e,ldquo:D_e,ldquor:L_e,ldrdhar:O_e,ldrushar:N_e,ldsh:F_e,le:z_e,lE:U_e,LeftAngleBracket:V_e,LeftArrowBar:H_e,leftarrow:G_e,LeftArrow:Q_e,Leftarrow:q_e,LeftArrowRightArrow:j_e,leftarrowtail:W_e,LeftCeiling:$_e,LeftDoubleBracket:X_e,LeftDownTeeVector:Y_e,LeftDownVectorBar:K_e,LeftDownVector:J_e,LeftFloor:Z_e,leftharpoondown:ebe,leftharpoonup:tbe,leftleftarrows:nbe,leftrightarrow:ibe,LeftRightArrow:rbe,Leftrightarrow:sbe,leftrightarrows:abe,leftrightharpoons:obe,leftrightsquigarrow:lbe,LeftRightVector:cbe,LeftTeeArrow:ube,LeftTee:hbe,LeftTeeVector:dbe,leftthreetimes:fbe,LeftTriangleBar:pbe,LeftTriangle:mbe,LeftTriangleEqual:gbe,LeftUpDownVector:vbe,LeftUpTeeVector:Abe,LeftUpVectorBar:_be,LeftUpVector:bbe,LeftVectorBar:ybe,LeftVector:wbe,lEg:xbe,leg:Cbe,leq:Ebe,leqq:Sbe,leqslant:Mbe,lescc:Tbe,les:Ibe,lesdot:Pbe,lesdoto:kbe,lesdotor:Bbe,lesg:Rbe,lesges:Dbe,lessapprox:Lbe,lessdot:Obe,lesseqgtr:Nbe,lesseqqgtr:Fbe,LessEqualGreater:zbe,LessFullEqual:Ube,LessGreater:Vbe,lessgtr:Hbe,LessLess:Gbe,lesssim:Qbe,LessSlantEqual:qbe,LessTilde:jbe,lfisht:Wbe,lfloor:$be,Lfr:Xbe,lfr:Ybe,lg:Kbe,lgE:Jbe,lHar:Zbe,lhard:eye,lharu:tye,lharul:nye,lhblk:iye,LJcy:rye,ljcy:sye,llarr:aye,ll:oye,Ll:lye,llcorner:cye,Lleftarrow:uye,llhard:hye,lltri:dye,Lmidot:fye,lmidot:pye,lmoustache:mye,lmoust:gye,lnap:vye,lnapprox:Aye,lne:_ye,lnE:bye,lneq:yye,lneqq:wye,lnsim:xye,loang:Cye,loarr:Eye,lobrk:Sye,longleftarrow:Mye,LongLeftArrow:Tye,Longleftarrow:Iye,longleftrightarrow:Pye,LongLeftRightArrow:kye,Longleftrightarrow:Bye,longmapsto:Rye,longrightarrow:Dye,LongRightArrow:Lye,Longrightarrow:Oye,looparrowleft:Nye,looparrowright:Fye,lopar:zye,Lopf:Uye,lopf:Vye,loplus:Hye,lotimes:Gye,lowast:Qye,lowbar:qye,LowerLeftArrow:jye,LowerRightArrow:Wye,loz:$ye,lozenge:Xye,lozf:Yye,lpar:Kye,lparlt:Jye,lrarr:Zye,lrcorner:ewe,lrhar:twe,lrhard:nwe,lrm:iwe,lrtri:rwe,lsaquo:swe,lscr:awe,Lscr:owe,lsh:lwe,Lsh:cwe,lsim:uwe,lsime:hwe,lsimg:dwe,lsqb:fwe,lsquo:pwe,lsquor:mwe,Lstrok:gwe,lstrok:vwe,ltcc:Awe,ltcir:_we,lt:bwe,LT:ywe,Lt:wwe,ltdot:xwe,lthree:Cwe,ltimes:Ewe,ltlarr:Swe,ltquest:Mwe,ltri:Twe,ltrie:Iwe,ltrif:Pwe,ltrPar:kwe,lurdshar:Bwe,luruhar:Rwe,lvertneqq:Dwe,lvnE:Lwe,macr:Owe,male:Nwe,malt:Fwe,maltese:zwe,Map:"",map:Uwe,mapsto:Vwe,mapstodown:Hwe,mapstoleft:Gwe,mapstoup:Qwe,marker:qwe,mcomma:jwe,Mcy:Wwe,mcy:$we,mdash:Xwe,mDDot:Ywe,measuredangle:Kwe,MediumSpace:Jwe,Mellintrf:Zwe,Mfr:exe,mfr:txe,mho:nxe,micro:ixe,midast:rxe,midcir:sxe,mid:axe,middot:oxe,minusb:lxe,minus:cxe,minusd:uxe,minusdu:hxe,MinusPlus:dxe,mlcp:fxe,mldr:pxe,mnplus:mxe,models:gxe,Mopf:vxe,mopf:Axe,mp:_xe,mscr:bxe,Mscr:yxe,mstpos:wxe,Mu:xxe,mu:Cxe,multimap:Exe,mumap:Sxe,nabla:Mxe,Nacute:Txe,nacute:Ixe,nang:Pxe,nap:kxe,napE:Bxe,napid:Rxe,napos:Dxe,napprox:Lxe,natural:Oxe,naturals:Nxe,natur:Fxe,nbsp:zxe,nbump:Uxe,nbumpe:Vxe,ncap:Hxe,Ncaron:Gxe,ncaron:Qxe,Ncedil:qxe,ncedil:jxe,ncong:Wxe,ncongdot:$xe,ncup:Xxe,Ncy:Yxe,ncy:Kxe,ndash:Jxe,nearhk:Zxe,nearr:e2e,neArr:t2e,nearrow:n2e,ne:i2e,nedot:r2e,NegativeMediumSpace:s2e,NegativeThickSpace:a2e,NegativeThinSpace:o2e,NegativeVeryThinSpace:l2e,nequiv:c2e,nesear:u2e,nesim:h2e,NestedGreaterGreater:d2e,NestedLessLess:f2e,NewLine:p2e,nexist:m2e,nexists:g2e,Nfr:v2e,nfr:A2e,ngE:_2e,nge:b2e,ngeq:y2e,ngeqq:w2e,ngeqslant:x2e,nges:C2e,nGg:E2e,ngsim:S2e,nGt:M2e,ngt:T2e,ngtr:I2e,nGtv:P2e,nharr:k2e,nhArr:B2e,nhpar:R2e,ni:D2e,nis:L2e,nisd:O2e,niv:N2e,NJcy:F2e,njcy:z2e,nlarr:U2e,nlArr:V2e,nldr:H2e,nlE:G2e,nle:Q2e,nleftarrow:q2e,nLeftarrow:j2e,nleftrightarrow:W2e,nLeftrightarrow:$2e,nleq:X2e,nleqq:Y2e,nleqslant:K2e,nles:J2e,nless:Z2e,nLl:eCe,nlsim:tCe,nLt:nCe,nlt:iCe,nltri:rCe,nltrie:sCe,nLtv:aCe,nmid:oCe,NoBreak:lCe,NonBreakingSpace:cCe,nopf:uCe,Nopf:hCe,Not:dCe,not:fCe,NotCongruent:pCe,NotCupCap:mCe,NotDoubleVerticalBar:gCe,NotElement:vCe,NotEqual:ACe,NotEqualTilde:_Ce,NotExists:bCe,NotGreater:yCe,NotGreaterEqual:wCe,NotGreaterFullEqual:xCe,NotGreaterGreater:CCe,NotGreaterLess:ECe,NotGreaterSlantEqual:SCe,NotGreaterTilde:MCe,NotHumpDownHump:TCe,NotHumpEqual:ICe,notin:PCe,notindot:kCe,notinE:BCe,notinva:RCe,notinvb:DCe,notinvc:LCe,NotLeftTriangleBar:OCe,NotLeftTriangle:NCe,NotLeftTriangleEqual:FCe,NotLess:zCe,NotLessEqual:UCe,NotLessGreater:VCe,NotLessLess:HCe,NotLessSlantEqual:GCe,NotLessTilde:QCe,NotNestedGreaterGreater:qCe,NotNestedLessLess:jCe,notni:WCe,notniva:$Ce,notnivb:XCe,notnivc:YCe,NotPrecedes:KCe,NotPrecedesEqual:JCe,NotPrecedesSlantEqual:ZCe,NotReverseElement:eEe,NotRightTriangleBar:tEe,NotRightTriangle:nEe,NotRightTriangleEqual:iEe,NotSquareSubset:rEe,NotSquareSubsetEqual:sEe,NotSquareSuperset:aEe,NotSquareSupersetEqual:oEe,NotSubset:lEe,NotSubsetEqual:cEe,NotSucceeds:uEe,NotSucceedsEqual:hEe,NotSucceedsSlantEqual:dEe,NotSucceedsTilde:fEe,NotSuperset:pEe,NotSupersetEqual:mEe,NotTilde:gEe,NotTildeEqual:vEe,NotTildeFullEqual:AEe,NotTildeTilde:_Ee,NotVerticalBar:bEe,nparallel:yEe,npar:wEe,nparsl:xEe,npart:CEe,npolint:EEe,npr:SEe,nprcue:MEe,nprec:TEe,npreceq:IEe,npre:PEe,nrarrc:kEe,nrarr:BEe,nrArr:REe,nrarrw:DEe,nrightarrow:LEe,nRightarrow:OEe,nrtri:NEe,nrtrie:FEe,nsc:zEe,nsccue:UEe,nsce:VEe,Nscr:HEe,nscr:GEe,nshortmid:QEe,nshortparallel:qEe,nsim:jEe,nsime:WEe,nsimeq:$Ee,nsmid:XEe,nspar:YEe,nsqsube:KEe,nsqsupe:JEe,nsub:ZEe,nsubE:eSe,nsube:tSe,nsubset:nSe,nsubseteq:iSe,nsubseteqq:rSe,nsucc:sSe,nsucceq:aSe,nsup:oSe,nsupE:lSe,nsupe:cSe,nsupset:uSe,nsupseteq:hSe,nsupseteqq:dSe,ntgl:fSe,Ntilde:pSe,ntilde:mSe,ntlg:gSe,ntriangleleft:vSe,ntrianglelefteq:ASe,ntriangleright:_Se,ntrianglerighteq:bSe,Nu:ySe,nu:wSe,num:xSe,numero:CSe,numsp:ESe,nvap:SSe,nvdash:MSe,nvDash:TSe,nVdash:ISe,nVDash:PSe,nvge:kSe,nvgt:BSe,nvHarr:RSe,nvinfin:DSe,nvlArr:LSe,nvle:OSe,nvlt:NSe,nvltrie:FSe,nvrArr:zSe,nvrtrie:USe,nvsim:VSe,nwarhk:HSe,nwarr:GSe,nwArr:QSe,nwarrow:qSe,nwnear:jSe,Oacute:WSe,oacute:$Se,oast:XSe,Ocirc:YSe,ocirc:KSe,ocir:JSe,Ocy:ZSe,ocy:e4e,odash:t4e,Odblac:n4e,odblac:i4e,odiv:r4e,odot:s4e,odsold:a4e,OElig:o4e,oelig:l4e,ofcir:c4e,Ofr:u4e,ofr:h4e,ogon:d4e,Ograve:f4e,ograve:p4e,ogt:m4e,ohbar:g4e,ohm:v4e,oint:A4e,olarr:_4e,olcir:b4e,olcross:y4e,oline:w4e,olt:x4e,Omacr:C4e,omacr:E4e,Omega:S4e,omega:M4e,Omicron:T4e,omicron:I4e,omid:P4e,ominus:k4e,Oopf:B4e,oopf:R4e,opar:D4e,OpenCurlyDoubleQuote:L4e,OpenCurlyQuote:O4e,operp:N4e,oplus:F4e,orarr:z4e,Or:U4e,or:V4e,ord:H4e,order:G4e,orderof:Q4e,ordf:q4e,ordm:j4e,origof:W4e,oror:$4e,orslope:X4e,orv:Y4e,oS:K4e,Oscr:J4e,oscr:Z4e,Oslash:e3e,oslash:t3e,osol:n3e,Otilde:i3e,otilde:r3e,otimesas:s3e,Otimes:a3e,otimes:o3e,Ouml:l3e,ouml:c3e,ovbar:u3e,OverBar:h3e,OverBrace:d3e,OverBracket:f3e,OverParenthesis:p3e,para:m3e,parallel:g3e,par:v3e,parsim:A3e,parsl:_3e,part:b3e,PartialD:y3e,Pcy:w3e,pcy:x3e,percnt:C3e,period:E3e,permil:S3e,perp:M3e,pertenk:T3e,Pfr:I3e,pfr:P3e,Phi:k3e,phi:B3e,phiv:R3e,phmmat:D3e,phone:L3e,Pi:O3e,pi:N3e,pitchfork:F3e,piv:z3e,planck:U3e,planckh:V3e,plankv:H3e,plusacir:G3e,plusb:Q3e,pluscir:q3e,plus:j3e,plusdo:W3e,plusdu:$3e,pluse:X3e,PlusMinus:Y3e,plusmn:K3e,plussim:J3e,plustwo:Z3e,pm:eMe,Poincareplane:tMe,pointint:nMe,popf:iMe,Popf:rMe,pound:sMe,prap:aMe,Pr:oMe,pr:lMe,prcue:cMe,precapprox:uMe,prec:hMe,preccurlyeq:dMe,Precedes:fMe,PrecedesEqual:pMe,PrecedesSlantEqual:mMe,PrecedesTilde:gMe,preceq:vMe,precnapprox:AMe,precneqq:_Me,precnsim:bMe,pre:yMe,prE:wMe,precsim:xMe,prime:CMe,Prime:EMe,primes:SMe,prnap:MMe,prnE:TMe,prnsim:IMe,prod:PMe,Product:kMe,profalar:BMe,profline:RMe,profsurf:DMe,prop:LMe,Proportional:OMe,Proportion:NMe,propto:FMe,prsim:zMe,prurel:UMe,Pscr:VMe,pscr:HMe,Psi:GMe,psi:QMe,puncsp:qMe,Qfr:jMe,qfr:WMe,qint:$Me,qopf:XMe,Qopf:YMe,qprime:KMe,Qscr:JMe,qscr:ZMe,quaternions:eTe,quatint:tTe,quest:nTe,questeq:iTe,quot:rTe,QUOT:sTe,rAarr:aTe,race:oTe,Racute:lTe,racute:cTe,radic:uTe,raemptyv:hTe,rang:dTe,Rang:fTe,rangd:pTe,range:mTe,rangle:gTe,raquo:vTe,rarrap:ATe,rarrb:_Te,rarrbfs:bTe,rarrc:yTe,rarr:wTe,Rarr:xTe,rArr:CTe,rarrfs:ETe,rarrhk:STe,rarrlp:MTe,rarrpl:TTe,rarrsim:ITe,Rarrtl:PTe,rarrtl:kTe,rarrw:BTe,ratail:RTe,rAtail:DTe,ratio:LTe,rationals:OTe,rbarr:NTe,rBarr:FTe,RBarr:zTe,rbbrk:UTe,rbrace:VTe,rbrack:HTe,rbrke:GTe,rbrksld:QTe,rbrkslu:qTe,Rcaron:jTe,rcaron:WTe,Rcedil:$Te,rcedil:XTe,rceil:YTe,rcub:KTe,Rcy:JTe,rcy:ZTe,rdca:e5e,rdldhar:t5e,rdquo:n5e,rdquor:i5e,rdsh:r5e,real:s5e,realine:a5e,realpart:o5e,reals:l5e,Re:c5e,rect:u5e,reg:h5e,REG:d5e,ReverseElement:f5e,ReverseEquilibrium:p5e,ReverseUpEquilibrium:m5e,rfisht:g5e,rfloor:v5e,rfr:A5e,Rfr:_5e,rHar:b5e,rhard:y5e,rharu:w5e,rharul:x5e,Rho:C5e,rho:E5e,rhov:S5e,RightAngleBracket:M5e,RightArrowBar:T5e,rightarrow:I5e,RightArrow:P5e,Rightarrow:k5e,RightArrowLeftArrow:B5e,rightarrowtail:R5e,RightCeiling:D5e,RightDoubleBracket:L5e,RightDownTeeVector:O5e,RightDownVectorBar:N5e,RightDownVector:F5e,RightFloor:z5e,rightharpoondown:U5e,rightharpoonup:V5e,rightleftarrows:H5e,rightleftharpoons:G5e,rightrightarrows:Q5e,rightsquigarrow:q5e,RightTeeArrow:j5e,RightTee:W5e,RightTeeVector:$5e,rightthreetimes:X5e,RightTriangleBar:Y5e,RightTriangle:K5e,RightTriangleEqual:J5e,RightUpDownVector:Z5e,RightUpTeeVector:eIe,RightUpVectorBar:tIe,RightUpVector:nIe,RightVectorBar:iIe,RightVector:rIe,ring:sIe,risingdotseq:aIe,rlarr:oIe,rlhar:lIe,rlm:cIe,rmoustache:uIe,rmoust:hIe,rnmid:dIe,roang:fIe,roarr:pIe,robrk:mIe,ropar:gIe,ropf:vIe,Ropf:AIe,roplus:_Ie,rotimes:bIe,RoundImplies:yIe,rpar:wIe,rpargt:xIe,rppolint:CIe,rrarr:EIe,Rrightarrow:SIe,rsaquo:MIe,rscr:TIe,Rscr:IIe,rsh:PIe,Rsh:kIe,rsqb:BIe,rsquo:RIe,rsquor:DIe,rthree:LIe,rtimes:OIe,rtri:NIe,rtrie:FIe,rtrif:zIe,rtriltri:UIe,RuleDelayed:VIe,ruluhar:HIe,rx:GIe,Sacute:QIe,sacute:qIe,sbquo:jIe,scap:WIe,Scaron:$Ie,scaron:XIe,Sc:YIe,sc:KIe,sccue:JIe,sce:ZIe,scE:ePe,Scedil:tPe,scedil:nPe,Scirc:iPe,scirc:rPe,scnap:sPe,scnE:aPe,scnsim:oPe,scpolint:lPe,scsim:cPe,Scy:uPe,scy:hPe,sdotb:dPe,sdot:fPe,sdote:pPe,searhk:mPe,searr:gPe,seArr:vPe,searrow:APe,sect:_Pe,semi:bPe,seswar:yPe,setminus:wPe,setmn:xPe,sext:CPe,Sfr:EPe,sfr:SPe,sfrown:MPe,sharp:TPe,SHCHcy:IPe,shchcy:PPe,SHcy:kPe,shcy:BPe,ShortDownArrow:RPe,ShortLeftArrow:DPe,shortmid:LPe,shortparallel:OPe,ShortRightArrow:NPe,ShortUpArrow:FPe,shy:zPe,Sigma:UPe,sigma:VPe,sigmaf:HPe,sigmav:GPe,sim:QPe,simdot:qPe,sime:jPe,simeq:WPe,simg:$Pe,simgE:XPe,siml:YPe,simlE:KPe,simne:JPe,simplus:ZPe,simrarr:e6e,slarr:t6e,SmallCircle:n6e,smallsetminus:i6e,smashp:r6e,smeparsl:s6e,smid:a6e,smile:o6e,smt:l6e,smte:c6e,smtes:u6e,SOFTcy:h6e,softcy:d6e,solbar:f6e,solb:p6e,sol:m6e,Sopf:g6e,sopf:v6e,spades:A6e,spadesuit:_6e,spar:b6e,sqcap:y6e,sqcaps:w6e,sqcup:x6e,sqcups:C6e,Sqrt:E6e,sqsub:S6e,sqsube:M6e,sqsubset:T6e,sqsubseteq:I6e,sqsup:P6e,sqsupe:k6e,sqsupset:B6e,sqsupseteq:R6e,square:D6e,Square:L6e,SquareIntersection:O6e,SquareSubset:N6e,SquareSubsetEqual:F6e,SquareSuperset:z6e,SquareSupersetEqual:U6e,SquareUnion:V6e,squarf:H6e,squ:G6e,squf:Q6e,srarr:q6e,Sscr:j6e,sscr:W6e,ssetmn:$6e,ssmile:X6e,sstarf:Y6e,Star:K6e,star:J6e,starf:Z6e,straightepsilon:eke,straightphi:tke,strns:nke,sub:ike,Sub:rke,subdot:ske,subE:ake,sube:oke,subedot:lke,submult:cke,subnE:uke,subne:hke,subplus:dke,subrarr:fke,subset:pke,Subset:mke,subseteq:gke,subseteqq:vke,SubsetEqual:Ake,subsetneq:_ke,subsetneqq:bke,subsim:yke,subsub:wke,subsup:xke,succapprox:Cke,succ:Eke,succcurlyeq:Ske,Succeeds:Mke,SucceedsEqual:Tke,SucceedsSlantEqual:Ike,SucceedsTilde:Pke,succeq:kke,succnapprox:Bke,succneqq:Rke,succnsim:Dke,succsim:Lke,SuchThat:Oke,sum:Nke,Sum:Fke,sung:zke,sup1:Uke,sup2:Vke,sup3:Hke,sup:Gke,Sup:Qke,supdot:qke,supdsub:jke,supE:Wke,supe:$ke,supedot:Xke,Superset:Yke,SupersetEqual:Kke,suphsol:Jke,suphsub:Zke,suplarr:e8e,supmult:t8e,supnE:n8e,supne:i8e,supplus:r8e,supset:s8e,Supset:a8e,supseteq:o8e,supseteqq:l8e,supsetneq:c8e,supsetneqq:u8e,supsim:h8e,supsub:d8e,supsup:f8e,swarhk:p8e,swarr:m8e,swArr:g8e,swarrow:v8e,swnwar:A8e,szlig:_8e,Tab:b8e,target:y8e,Tau:w8e,tau:x8e,tbrk:C8e,Tcaron:E8e,tcaron:S8e,Tcedil:M8e,tcedil:T8e,Tcy:I8e,tcy:P8e,tdot:k8e,telrec:B8e,Tfr:R8e,tfr:D8e,there4:L8e,therefore:O8e,Therefore:N8e,Theta:F8e,theta:z8e,thetasym:U8e,thetav:V8e,thickapprox:H8e,thicksim:G8e,ThickSpace:Q8e,ThinSpace:q8e,thinsp:j8e,thkap:W8e,thksim:$8e,THORN:X8e,thorn:Y8e,tilde:K8e,Tilde:J8e,TildeEqual:Z8e,TildeFullEqual:eBe,TildeTilde:tBe,timesbar:nBe,timesb:iBe,times:rBe,timesd:sBe,tint:aBe,toea:oBe,topbot:lBe,topcir:cBe,top:uBe,Topf:hBe,topf:dBe,topfork:fBe,tosa:pBe,tprime:mBe,trade:gBe,TRADE:vBe,triangle:ABe,triangledown:_Be,triangleleft:bBe,trianglelefteq:yBe,triangleq:wBe,triangleright:xBe,trianglerighteq:CBe,tridot:EBe,trie:SBe,triminus:MBe,TripleDot:TBe,triplus:IBe,trisb:PBe,tritime:kBe,trpezium:BBe,Tscr:RBe,tscr:DBe,TScy:LBe,tscy:OBe,TSHcy:NBe,tshcy:FBe,Tstrok:zBe,tstrok:UBe,twixt:VBe,twoheadleftarrow:HBe,twoheadrightarrow:GBe,Uacute:QBe,uacute:qBe,uarr:jBe,Uarr:WBe,uArr:$Be,Uarrocir:XBe,Ubrcy:YBe,ubrcy:KBe,Ubreve:JBe,ubreve:ZBe,Ucirc:eRe,ucirc:tRe,Ucy:nRe,ucy:iRe,udarr:rRe,Udblac:sRe,udblac:aRe,udhar:oRe,ufisht:lRe,Ufr:cRe,ufr:uRe,Ugrave:hRe,ugrave:dRe,uHar:fRe,uharl:pRe,uharr:mRe,uhblk:gRe,ulcorn:vRe,ulcorner:ARe,ulcrop:_Re,ultri:bRe,Umacr:yRe,umacr:wRe,uml:xRe,UnderBar:CRe,UnderBrace:ERe,UnderBracket:SRe,UnderParenthesis:MRe,Union:TRe,UnionPlus:IRe,Uogon:PRe,uogon:kRe,Uopf:BRe,uopf:RRe,UpArrowBar:DRe,uparrow:LRe,UpArrow:ORe,Uparrow:NRe,UpArrowDownArrow:FRe,updownarrow:zRe,UpDownArrow:URe,Updownarrow:VRe,UpEquilibrium:HRe,upharpoonleft:GRe,upharpoonright:QRe,uplus:qRe,UpperLeftArrow:jRe,UpperRightArrow:WRe,upsi:$Re,Upsi:XRe,upsih:YRe,Upsilon:KRe,upsilon:JRe,UpTeeArrow:ZRe,UpTee:eDe,upuparrows:tDe,urcorn:nDe,urcorner:iDe,urcrop:rDe,Uring:sDe,uring:aDe,urtri:oDe,Uscr:lDe,uscr:cDe,utdot:uDe,Utilde:hDe,utilde:dDe,utri:fDe,utrif:pDe,uuarr:mDe,Uuml:gDe,uuml:vDe,uwangle:ADe,vangrt:_De,varepsilon:bDe,varkappa:yDe,varnothing:wDe,varphi:xDe,varpi:CDe,varpropto:EDe,varr:SDe,vArr:MDe,varrho:TDe,varsigma:IDe,varsubsetneq:PDe,varsubsetneqq:kDe,varsupsetneq:BDe,varsupsetneqq:RDe,vartheta:DDe,vartriangleleft:LDe,vartriangleright:ODe,vBar:NDe,Vbar:FDe,vBarv:zDe,Vcy:UDe,vcy:VDe,vdash:HDe,vDash:GDe,Vdash:QDe,VDash:qDe,Vdashl:jDe,veebar:WDe,vee:$De,Vee:XDe,veeeq:YDe,vellip:KDe,verbar:JDe,Verbar:ZDe,vert:e7e,Vert:t7e,VerticalBar:n7e,VerticalLine:i7e,VerticalSeparator:r7e,VerticalTilde:s7e,VeryThinSpace:a7e,Vfr:o7e,vfr:l7e,vltri:c7e,vnsub:u7e,vnsup:h7e,Vopf:d7e,vopf:f7e,vprop:p7e,vrtri:m7e,Vscr:g7e,vscr:v7e,vsubnE:A7e,vsubne:_7e,vsupnE:b7e,vsupne:y7e,Vvdash:w7e,vzigzag:x7e,Wcirc:C7e,wcirc:E7e,wedbar:S7e,wedge:M7e,Wedge:T7e,wedgeq:I7e,weierp:P7e,Wfr:k7e,wfr:B7e,Wopf:R7e,wopf:D7e,wp:L7e,wr:O7e,wreath:N7e,Wscr:F7e,wscr:z7e,xcap:U7e,xcirc:V7e,xcup:H7e,xdtri:G7e,Xfr:Q7e,xfr:q7e,xharr:j7e,xhArr:W7e,Xi:$7e,xi:X7e,xlarr:Y7e,xlArr:K7e,xmap:J7e,xnis:Z7e,xodot:e9e,Xopf:t9e,xopf:n9e,xoplus:i9e,xotime:r9e,xrarr:s9e,xrArr:a9e,Xscr:o9e,xscr:l9e,xsqcup:c9e,xuplus:u9e,xutri:h9e,xvee:d9e,xwedge:f9e,Yacute:p9e,yacute:m9e,YAcy:g9e,yacy:v9e,Ycirc:A9e,ycirc:_9e,Ycy:b9e,ycy:y9e,yen:w9e,Yfr:x9e,yfr:C9e,YIcy:E9e,yicy:S9e,Yopf:M9e,yopf:T9e,Yscr:I9e,yscr:P9e,YUcy:k9e,yucy:B9e,yuml:R9e,Yuml:D9e,Zacute:L9e,zacute:O9e,Zcaron:N9e,zcaron:F9e,Zcy:z9e,zcy:U9e,Zdot:V9e,zdot:H9e,zeetrf:G9e,ZeroWidthSpace:Q9e,Zeta:q9e,zeta:j9e,zfr:W9e,Zfr:$9e,ZHcy:X9e,zhcy:Y9e,zigrarr:K9e,zopf:J9e,Zopf:Z9e,Zscr:eLe,zscr:tLe,zwj:nLe,zwnj:iLe},rLe="",sLe="",aLe="",oLe="",lLe="",cLe="",uLe="",hLe="",dLe="",fLe="&",pLe="&",mLe="",gLe="",vLe="",ALe="",_Le="",bLe="",yLe="",wLe="",xLe="",CLe="",ELe="",SLe="",MLe="",TLe="",ILe="",PLe="",kLe="",BLe="",RLe="",DLe="",LLe="",OLe="",NLe="",FLe="",zLe="",ULe="",VLe="",HLe="",GLe="",QLe=">",qLe=">",jLe="",WLe="",$Le="",XLe="",YLe="",KLe="",JLe="",ZLe="",eOe="",tOe="",nOe="",iOe="<",rOe="<",sOe="",aOe="",oOe="",lOe="",cOe="",uOe="",hOe="",dOe="",fOe="",pOe="",mOe="",gOe="",vOe="",AOe="",_Oe="",bOe="",yOe="",wOe="",xOe="",COe="",EOe="",SOe="",MOe="",TOe="",IOe='"',POe='"',kOe="",BOe="",ROe="",DOe="",LOe="",OOe="",NOe="",FOe="",zOe="",UOe="",VOe="",HOe="",GOe="",QOe="",qOe="",jOe="",WOe="",$Oe="",XOe="",YOe="",KOe="",JOe="",ZOe="",eNe="",tNe="",nNe={Aacute:rLe,aacute:sLe,Acirc:aLe,acirc:oLe,acute:lLe,AElig:cLe,aelig:uLe,Agrave:hLe,agrave:dLe,amp:fLe,AMP:pLe,Aring:mLe,aring:gLe,Atilde:vLe,atilde:ALe,Auml:_Le,auml:bLe,brvbar:yLe,Ccedil:wLe,ccedil:xLe,cedil:CLe,cent:ELe,copy:SLe,COPY:MLe,curren:TLe,deg:ILe,divide:PLe,Eacute:kLe,eacute:BLe,Ecirc:RLe,ecirc:DLe,Egrave:LLe,egrave:OLe,ETH:NLe,eth:FLe,Euml:zLe,euml:ULe,frac12:VLe,frac14:HLe,frac34:GLe,gt:QLe,GT:qLe,Iacute:jLe,iacute:WLe,Icirc:$Le,icirc:XLe,iexcl:YLe,Igrave:KLe,igrave:JLe,iquest:ZLe,Iuml:eOe,iuml:tOe,laquo:nOe,lt:iOe,LT:rOe,macr:sOe,micro:aOe,middot:oOe,nbsp:lOe,not:cOe,Ntilde:uOe,ntilde:hOe,Oacute:dOe,oacute:fOe,Ocirc:pOe,ocirc:mOe,Ograve:gOe,ograve:vOe,ordf:AOe,ordm:_Oe,Oslash:bOe,oslash:yOe,Otilde:wOe,otilde:xOe,Ouml:COe,ouml:EOe,para:SOe,plusmn:MOe,pound:TOe,quot:IOe,QUOT:POe,raquo:kOe,reg:BOe,REG:ROe,sect:DOe,shy:LOe,sup1:OOe,sup2:NOe,sup3:FOe,szlig:zOe,THORN:UOe,thorn:VOe,times:HOe,Uacute:GOe,uacute:QOe,Ucirc:qOe,ucirc:jOe,Ugrave:WOe,ugrave:$Oe,uml:XOe,Uuml:YOe,uuml:KOe,Yacute:JOe,yacute:ZOe,yen:eNe,yuml:tNe},iNe="&",rNe="'",sNe=">",aNe="<",oNe='"',ON={amp:iNe,apos:rNe,gt:sNe,lt:aNe,quot:oNe};var eI={};const lNe={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376};var cNe=dt&&dt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(eI,"__esModule",{value:!0});var cB=cNe(lNe),uNe=String.fromCodePoint||function(i){var e="";return i>65535&&(i-=65536,e+=String.fromCharCode(i>>>10&1023|55296),i=56320|i&1023),e+=String.fromCharCode(i),e};function hNe(i){return i>=55296&&i<=57343||i>1114111?"":(i in cB.default&&(i=cB.default[i]),uNe(i))}eI.default=hNe;var K2=dt&&dt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(gd,"__esModule",{value:!0});gd.decodeHTML=gd.decodeHTMLStrict=gd.decodeXML=void 0;var TM=K2(LN),dNe=K2(nNe),fNe=K2(ON),uB=K2(eI),pNe=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;gd.decodeXML=NN(fNe.default);gd.decodeHTMLStrict=NN(TM.default);function NN(i){var e=FN(i);return function(t){return String(t).replace(pNe,e)}}var hB=function(i,e){return i<e?1:-1};gd.decodeHTML=function(){for(var i=Object.keys(dNe.default).sort(hB),e=Object.keys(TM.default).sort(hB),t=0,n=0;t<e.length;t++)i[n]===e[t]?(e[t]+=";?",n++):e[t]+=";";var r=new RegExp("&(?:"+e.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),s=FN(TM.default);function a(o){return o.substr(-1)!==";"&&(o+=";"),s(o)}return function(o){return String(o).replace(r,a)}}();function FN(i){return function(t){if(t.charAt(1)==="#"){var n=t.charAt(2);return n==="X"||n==="x"?uB.default(parseInt(t.substr(3),16)):uB.default(parseInt(t.substr(2),10))}return i[t.slice(1,-1)]||t}}var jl={},zN=dt&&dt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(jl,"__esModule",{value:!0});jl.escapeUTF8=jl.escape=jl.encodeNonAsciiHTML=jl.encodeHTML=jl.encodeXML=void 0;var mNe=zN(ON),UN=HN(mNe.default),VN=GN(UN);jl.encodeXML=jN(UN);var gNe=zN(LN),tI=HN(gNe.default),vNe=GN(tI);jl.encodeHTML=_Ne(tI,vNe);jl.encodeNonAsciiHTML=jN(tI);function HN(i){return Object.keys(i).sort().reduce(function(e,t){return e[i[t]]="&"+t+";",e},{})}function GN(i){for(var e=[],t=[],n=0,r=Object.keys(i);n<r.length;n++){var s=r[n];s.length===1?e.push("\\"+s):t.push(s)}e.sort();for(var a=0;a<e.length-1;a++){for(var o=a;o<e.length-1&&e[o].charCodeAt(1)+1===e[o+1].charCodeAt(1);)o+=1;var l=1+o-a;l<3||e.splice(a,l,e[a]+"-"+e[o])}return t.unshift("["+e.join("")+"]"),new RegExp(t.join("|"),"g")}var QN=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,ANe=String.prototype.codePointAt!=null?function(i){return i.codePointAt(0)}:function(i){return(i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536};function J2(i){return"&#x"+(i.length>1?ANe(i):i.charCodeAt(0)).toString(16).toUpperCase()+";"}function _Ne(i,e){return function(t){return t.replace(e,function(n){return i[n]}).replace(QN,J2)}}var qN=new RegExp(VN.source+"|"+QN.source,"g");function bNe(i){return i.replace(qN,J2)}jl.escape=bNe;function yNe(i){return i.replace(VN,J2)}jl.escapeUTF8=yNe;function jN(i){return function(e){return e.replace(qN,function(t){return i[t]||J2(t)})}}(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.decodeXMLStrict=i.decodeHTML5Strict=i.decodeHTML4Strict=i.decodeHTML5=i.decodeHTML4=i.decodeHTMLStrict=i.decodeHTML=i.decodeXML=i.encodeHTML5=i.encodeHTML4=i.escapeUTF8=i.escape=i.encodeNonAsciiHTML=i.encodeHTML=i.encodeXML=i.encode=i.decodeStrict=i.decode=void 0;var e=gd,t=jl;function n(l,c){return(!c||c<=0?e.decodeXML:e.decodeHTML)(l)}i.decode=n;function r(l,c){return(!c||c<=0?e.decodeXML:e.decodeHTMLStrict)(l)}i.decodeStrict=r;function s(l,c){return(!c||c<=0?t.encodeXML:t.encodeHTML)(l)}i.encode=s;var a=jl;Object.defineProperty(i,"encodeXML",{enumerable:!0,get:function(){return a.encodeXML}}),Object.defineProperty(i,"encodeHTML",{enumerable:!0,get:function(){return a.encodeHTML}}),Object.defineProperty(i,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return a.encodeNonAsciiHTML}}),Object.defineProperty(i,"escape",{enumerable:!0,get:function(){return a.escape}}),Object.defineProperty(i,"escapeUTF8",{enumerable:!0,get:function(){return a.escapeUTF8}}),Object.defineProperty(i,"encodeHTML4",{enumerable:!0,get:function(){return a.encodeHTML}}),Object.defineProperty(i,"encodeHTML5",{enumerable:!0,get:function(){return a.encodeHTML}});var o=gd;Object.defineProperty(i,"decodeXML",{enumerable:!0,get:function(){return o.decodeXML}}),Object.defineProperty(i,"decodeHTML",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(i,"decodeHTMLStrict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(i,"decodeHTML4",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(i,"decodeHTML5",{enumerable:!0,get:function(){return o.decodeHTML}}),Object.defineProperty(i,"decodeHTML4Strict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(i,"decodeHTML5Strict",{enumerable:!0,get:function(){return o.decodeHTMLStrict}}),Object.defineProperty(i,"decodeXMLStrict",{enumerable:!0,get:function(){return o.decodeXML}})})(DN);var Og={};Object.defineProperty(Og,"__esModule",{value:!0});Og.attributeNames=Og.elementNames=void 0;Og.elementNames=new Map([["altglyph","altGlyph"],["altglyphdef","altGlyphDef"],["altglyphitem","altGlyphItem"],["animatecolor","animateColor"],["animatemotion","animateMotion"],["animatetransform","animateTransform"],["clippath","clipPath"],["feblend","feBlend"],["fecolormatrix","feColorMatrix"],["fecomponenttransfer","feComponentTransfer"],["fecomposite","feComposite"],["feconvolvematrix","feConvolveMatrix"],["fediffuselighting","feDiffuseLighting"],["fedisplacementmap","feDisplacementMap"],["fedistantlight","feDistantLight"],["fedropshadow","feDropShadow"],["feflood","feFlood"],["fefunca","feFuncA"],["fefuncb","feFuncB"],["fefuncg","feFuncG"],["fefuncr","feFuncR"],["fegaussianblur","feGaussianBlur"],["feimage","feImage"],["femerge","feMerge"],["femergenode","feMergeNode"],["femorphology","feMorphology"],["feoffset","feOffset"],["fepointlight","fePointLight"],["fespecularlighting","feSpecularLighting"],["fespotlight","feSpotLight"],["fetile","feTile"],["feturbulence","feTurbulence"],["foreignobject","foreignObject"],["glyphref","glyphRef"],["lineargradient","linearGradient"],["radialgradient","radialGradient"],["textpath","textPath"]]);Og.attributeNames=new Map([["definitionurl","definitionURL"],["attributename","attributeName"],["attributetype","attributeType"],["basefrequency","baseFrequency"],["baseprofile","baseProfile"],["calcmode","calcMode"],["clippathunits","clipPathUnits"],["diffuseconstant","diffuseConstant"],["edgemode","edgeMode"],["filterunits","filterUnits"],["glyphref","glyphRef"],["gradienttransform","gradientTransform"],["gradientunits","gradientUnits"],["kernelmatrix","kernelMatrix"],["kernelunitlength","kernelUnitLength"],["keypoints","keyPoints"],["keysplines","keySplines"],["keytimes","keyTimes"],["lengthadjust","lengthAdjust"],["limitingconeangle","limitingConeAngle"],["markerheight","markerHeight"],["markerunits","markerUnits"],["markerwidth","markerWidth"],["maskcontentunits","maskContentUnits"],["maskunits","maskUnits"],["numoctaves","numOctaves"],["pathlength","pathLength"],["patterncontentunits","patternContentUnits"],["patterntransform","patternTransform"],["patternunits","patternUnits"],["pointsatx","pointsAtX"],["pointsaty","pointsAtY"],["pointsatz","pointsAtZ"],["preservealpha","preserveAlpha"],["preserveaspectratio","preserveAspectRatio"],["primitiveunits","primitiveUnits"],["refx","refX"],["refy","refY"],["repeatcount","repeatCount"],["repeatdur","repeatDur"],["requiredextensions","requiredExtensions"],["requiredfeatures","requiredFeatures"],["specularconstant","specularConstant"],["specularexponent","specularExponent"],["spreadmethod","spreadMethod"],["startoffset","startOffset"],["stddeviation","stdDeviation"],["stitchtiles","stitchTiles"],["surfacescale","surfaceScale"],["systemlanguage","systemLanguage"],["tablevalues","tableValues"],["targetx","targetX"],["targety","targetY"],["textlength","textLength"],["viewbox","viewBox"],["viewtarget","viewTarget"],["xchannelselector","xChannelSelector"],["ychannelselector","yChannelSelector"],["zoomandpan","zoomAndPan"]]);var fg=dt&&dt.__assign||function(){return fg=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},fg.apply(this,arguments)},wNe=dt&&dt.__createBinding||(Object.create?function(i,e,t,n){n===void 0&&(n=t),Object.defineProperty(i,n,{enumerable:!0,get:function(){return e[t]}})}:function(i,e,t,n){n===void 0&&(n=t),i[n]=e[t]}),xNe=dt&&dt.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),CNe=dt&&dt.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&wNe(e,i,t);return xNe(e,i),e};Object.defineProperty(Z5,"__esModule",{value:!0});var ed=CNe(m_),WN=DN,$N=Og,ENe=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function SNe(i,e){if(i)return Object.keys(i).map(function(t){var n,r,s=(n=i[t])!==null&&n!==void 0?n:"";return e.xmlMode==="foreign"&&(t=(r=$N.attributeNames.get(t))!==null&&r!==void 0?r:t),!e.emptyAttrs&&!e.xmlMode&&s===""?t:t+'="'+(e.decodeEntities!==!1?WN.encodeXML(s):s.replace(/"/g,"&quot;"))+'"'}).join(" ")}var dB=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function nI(i,e){e===void 0&&(e={});for(var t=("length"in i)?i:[i],n="",r=0;r<t.length;r++)n+=MNe(t[r],e);return n}Z5.default=nI;function MNe(i,e){switch(i.type){case ed.Root:return nI(i.children,e);case ed.Directive:case ed.Doctype:return kNe(i);case ed.Comment:return DNe(i);case ed.CDATA:return RNe(i);case ed.Script:case ed.Style:case ed.Tag:return PNe(i,e);case ed.Text:return BNe(i,e)}}var TNe=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),INe=new Set(["svg","math"]);function PNe(i,e){var t;e.xmlMode==="foreign"&&(i.name=(t=$N.elementNames.get(i.name))!==null&&t!==void 0?t:i.name,i.parent&&TNe.has(i.parent.name)&&(e=fg(fg({},e),{xmlMode:!1}))),!e.xmlMode&&INe.has(i.name)&&(e=fg(fg({},e),{xmlMode:"foreign"}));var n="<"+i.name,r=SNe(i.attribs,e);return r&&(n+=" "+r),i.children.length===0&&(e.xmlMode?e.selfClosingTags!==!1:e.selfClosingTags&&dB.has(i.name))?(e.xmlMode||(n+=" "),n+="/>"):(n+=">",i.children.length>0&&(n+=nI(i.children,e)),(e.xmlMode||!dB.has(i.name))&&(n+="</"+i.name+">")),n}function kNe(i){return"<"+i.data+">"}function BNe(i,e){var t=i.data||"";return e.decodeEntities!==!1&&!(!e.xmlMode&&i.parent&&ENe.has(i.parent.name))&&(t=WN.encodeXML(t)),t}function RNe(i){return"<![CDATA["+i.children[0].data+"]]>"}function DNe(i){return"<!--"+i.data+"-->"}var LNe=dt&&dt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ql,"__esModule",{value:!0});ql.innerText=ql.textContent=ql.getText=ql.getInnerHTML=ql.getOuterHTML=void 0;var lh=j0,ONe=LNe(Z5),NNe=m_;function XN(i,e){return(0,ONe.default)(i,e)}ql.getOuterHTML=XN;function FNe(i,e){return(0,lh.hasChildren)(i)?i.children.map(function(t){return XN(t,e)}).join(""):""}ql.getInnerHTML=FNe;function $w(i){return Array.isArray(i)?i.map($w).join(""):(0,lh.isTag)(i)?i.name==="br"?`
`:$w(i.children):(0,lh.isCDATA)(i)?$w(i.children):(0,lh.isText)(i)?i.data:""}ql.getText=$w;function IM(i){return Array.isArray(i)?i.map(IM).join(""):(0,lh.hasChildren)(i)&&!(0,lh.isComment)(i)?IM(i.children):(0,lh.isText)(i)?i.data:""}ql.textContent=IM;function PM(i){return Array.isArray(i)?i.map(PM).join(""):(0,lh.hasChildren)(i)&&(i.type===NNe.ElementType.Tag||(0,lh.isCDATA)(i))?PM(i.children):(0,lh.isText)(i)?i.data:""}ql.innerText=PM;var Na={};Object.defineProperty(Na,"__esModule",{value:!0});Na.prevElementSibling=Na.nextElementSibling=Na.getName=Na.hasAttrib=Na.getAttributeValue=Na.getSiblings=Na.getParent=Na.getChildren=void 0;var YN=j0,zNe=[];function KN(i){var e;return(e=i.children)!==null&&e!==void 0?e:zNe}Na.getChildren=KN;function JN(i){return i.parent||null}Na.getParent=JN;function UNe(i){var e,t,n=JN(i);if(n!=null)return KN(n);for(var r=[i],s=i.prev,a=i.next;s!=null;)r.unshift(s),e=s,s=e.prev;for(;a!=null;)r.push(a),t=a,a=t.next;return r}Na.getSiblings=UNe;function VNe(i,e){var t;return(t=i.attribs)===null||t===void 0?void 0:t[e]}Na.getAttributeValue=VNe;function HNe(i,e){return i.attribs!=null&&Object.prototype.hasOwnProperty.call(i.attribs,e)&&i.attribs[e]!=null}Na.hasAttrib=HNe;function GNe(i){return i.name}Na.getName=GNe;function QNe(i){for(var e,t=i.next;t!==null&&!(0,YN.isTag)(t);)e=t,t=e.next;return t}Na.nextElementSibling=QNe;function qNe(i){for(var e,t=i.prev;t!==null&&!(0,YN.isTag)(t);)e=t,t=e.prev;return t}Na.prevElementSibling=qNe;var al={};Object.defineProperty(al,"__esModule",{value:!0});al.prepend=al.prependChild=al.append=al.appendChild=al.replaceElement=al.removeElement=void 0;function g_(i){if(i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),i.parent){var e=i.parent.children;e.splice(e.lastIndexOf(i),1)}}al.removeElement=g_;function jNe(i,e){var t=e.prev=i.prev;t&&(t.next=e);var n=e.next=i.next;n&&(n.prev=e);var r=e.parent=i.parent;if(r){var s=r.children;s[s.lastIndexOf(i)]=e}}al.replaceElement=jNe;function WNe(i,e){if(g_(e),e.next=null,e.parent=i,i.children.push(e)>1){var t=i.children[i.children.length-2];t.next=e,e.prev=t}else e.prev=null}al.appendChild=WNe;function $Ne(i,e){g_(e);var t=i.parent,n=i.next;if(e.next=n,e.prev=i,i.next=e,e.parent=t,n){if(n.prev=e,t){var r=t.children;r.splice(r.lastIndexOf(n),0,e)}}else t&&t.children.push(e)}al.append=$Ne;function XNe(i,e){if(g_(e),e.parent=i,e.prev=null,i.children.unshift(e)!==1){var t=i.children[1];t.prev=e,e.next=t}else e.next=null}al.prependChild=XNe;function YNe(i,e){g_(e);var t=i.parent;if(t){var n=t.children;n.splice(n.indexOf(i),0,e)}i.prev&&(i.prev.next=e),e.parent=t,e.prev=i.prev,e.next=i,i.prev=e}al.prepend=YNe;var Ro={};Object.defineProperty(Ro,"__esModule",{value:!0});Ro.findAll=Ro.existsOne=Ro.findOne=Ro.findOneChild=Ro.find=Ro.filter=void 0;var I1=j0;function KNe(i,e,t,n){return t===void 0&&(t=!0),n===void 0&&(n=1/0),Array.isArray(e)||(e=[e]),iI(i,e,t,n)}Ro.filter=KNe;function iI(i,e,t,n){for(var r=[],s=0,a=e;s<a.length;s++){var o=a[s];if(i(o)&&(r.push(o),--n<=0))break;if(t&&(0,I1.hasChildren)(o)&&o.children.length>0){var l=iI(i,o.children,t,n);if(r.push.apply(r,l),n-=l.length,n<=0)break}}return r}Ro.find=iI;function JNe(i,e){return e.find(i)}Ro.findOneChild=JNe;function ZN(i,e,t){t===void 0&&(t=!0);for(var n=null,r=0;r<e.length&&!n;r++){var s=e[r];if((0,I1.isTag)(s))i(s)?n=s:t&&s.children.length>0&&(n=ZN(i,s.children));else continue}return n}Ro.findOne=ZN;function eF(i,e){return e.some(function(t){return(0,I1.isTag)(t)&&(i(t)||t.children.length>0&&eF(i,t.children))})}Ro.existsOne=eF;function ZNe(i,e){for(var t,n=[],r=e.filter(I1.isTag),s;s=r.shift();){var a=(t=s.children)===null||t===void 0?void 0:t.filter(I1.isTag);a&&a.length>0&&r.unshift.apply(r,a),i(s)&&n.push(s)}return n}Ro.findAll=ZNe;var Wl={};Object.defineProperty(Wl,"__esModule",{value:!0});Wl.getElementsByTagType=Wl.getElementsByTagName=Wl.getElementById=Wl.getElements=Wl.testElement=void 0;var a0=j0,Z2=Ro,Cx={tag_name:function(i){return typeof i=="function"?function(e){return(0,a0.isTag)(e)&&i(e.name)}:i==="*"?a0.isTag:function(e){return(0,a0.isTag)(e)&&e.name===i}},tag_type:function(i){return typeof i=="function"?function(e){return i(e.type)}:function(e){return e.type===i}},tag_contains:function(i){return typeof i=="function"?function(e){return(0,a0.isText)(e)&&i(e.data)}:function(e){return(0,a0.isText)(e)&&e.data===i}}};function tF(i,e){return typeof e=="function"?function(t){return(0,a0.isTag)(t)&&e(t.attribs[i])}:function(t){return(0,a0.isTag)(t)&&t.attribs[i]===e}}function eFe(i,e){return function(t){return i(t)||e(t)}}function nF(i){var e=Object.keys(i).map(function(t){var n=i[t];return Object.prototype.hasOwnProperty.call(Cx,t)?Cx[t](n):tF(t,n)});return e.length===0?null:e.reduce(eFe)}function tFe(i,e){var t=nF(i);return t?t(e):!0}Wl.testElement=tFe;function nFe(i,e,t,n){n===void 0&&(n=1/0);var r=nF(i);return r?(0,Z2.filter)(r,e,t,n):[]}Wl.getElements=nFe;function iFe(i,e,t){return t===void 0&&(t=!0),Array.isArray(e)||(e=[e]),(0,Z2.findOne)(tF("id",i),e,t)}Wl.getElementById=iFe;function rFe(i,e,t,n){return t===void 0&&(t=!0),n===void 0&&(n=1/0),(0,Z2.filter)(Cx.tag_name(i),e,t,n)}Wl.getElementsByTagName=rFe;function sFe(i,e,t,n){return t===void 0&&(t=!0),n===void 0&&(n=1/0),(0,Z2.filter)(Cx.tag_type(i),e,t,n)}Wl.getElementsByTagType=sFe;var Df={};Object.defineProperty(Df,"__esModule",{value:!0});Df.uniqueSort=Df.compareDocumentPosition=Df.removeSubsets=void 0;var fB=j0;function aFe(i){for(var e=i.length;--e>=0;){var t=i[e];if(e>0&&i.lastIndexOf(t,e-1)>=0){i.splice(e,1);continue}for(var n=t.parent;n;n=n.parent)if(i.includes(n)){i.splice(e,1);break}}return i}Df.removeSubsets=aFe;function iF(i,e){var t=[],n=[];if(i===e)return 0;for(var r=(0,fB.hasChildren)(i)?i:i.parent;r;)t.unshift(r),r=r.parent;for(r=(0,fB.hasChildren)(e)?e:e.parent;r;)n.unshift(r),r=r.parent;for(var s=Math.min(t.length,n.length),a=0;a<s&&t[a]===n[a];)a++;if(a===0)return 1;var o=t[a-1],l=o.children,c=t[a],u=n[a];return l.indexOf(c)>l.indexOf(u)?o===e?20:4:o===i?10:2}Df.compareDocumentPosition=iF;function oFe(i){return i=i.filter(function(e,t,n){return!n.includes(e,t+1)}),i.sort(function(e,t){var n=iF(e,t);return n&2?-1:n&4?1:0}),i}Df.uniqueSort=oFe;var eC={};Object.defineProperty(eC,"__esModule",{value:!0});eC.getFeed=void 0;var lFe=ql,v_=Wl;function cFe(i){var e=Ex(pFe,i);return e?e.name==="feed"?uFe(e):hFe(e):null}eC.getFeed=cFe;function uFe(i){var e,t=i.children,n={type:"atom",items:(0,v_.getElementsByTagName)("entry",t).map(function(a){var o,l=a.children,c={media:rF(l)};rl(c,"id","id",l),rl(c,"title","title",l);var u=(o=Ex("link",l))===null||o===void 0?void 0:o.attribs.href;u&&(c.link=u);var h=m0("summary",l)||m0("content",l);h&&(c.description=h);var d=m0("updated",l);return d&&(c.pubDate=new Date(d)),c})};rl(n,"id","id",t),rl(n,"title","title",t);var r=(e=Ex("link",t))===null||e===void 0?void 0:e.attribs.href;r&&(n.link=r),rl(n,"description","subtitle",t);var s=m0("updated",t);return s&&(n.updated=new Date(s)),rl(n,"author","email",t,!0),n}function hFe(i){var e,t,n=(t=(e=Ex("channel",i.children))===null||e===void 0?void 0:e.children)!==null&&t!==void 0?t:[],r={type:i.name.substr(0,3),id:"",items:(0,v_.getElementsByTagName)("item",i.children).map(function(a){var o=a.children,l={media:rF(o)};rl(l,"id","guid",o),rl(l,"title","title",o),rl(l,"link","link",o),rl(l,"description","description",o);var c=m0("pubDate",o);return c&&(l.pubDate=new Date(c)),l})};rl(r,"title","title",n),rl(r,"link","link",n),rl(r,"description","description",n);var s=m0("lastBuildDate",n);return s&&(r.updated=new Date(s)),rl(r,"author","managingEditor",n,!0),r}var dFe=["url","type","lang"],fFe=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function rF(i){return(0,v_.getElementsByTagName)("media:content",i).map(function(e){for(var t=e.attribs,n={medium:t.medium,isDefault:!!t.isDefault},r=0,s=dFe;r<s.length;r++){var a=s[r];t[a]&&(n[a]=t[a])}for(var o=0,l=fFe;o<l.length;o++){var a=l[o];t[a]&&(n[a]=parseInt(t[a],10))}return t.expression&&(n.expression=t.expression),n})}function Ex(i,e){return(0,v_.getElementsByTagName)(i,e,!0,1)[0]}function m0(i,e,t){return t===void 0&&(t=!1),(0,lFe.textContent)((0,v_.getElementsByTagName)(i,e,t,1)).trim()}function rl(i,e,t,n,r){r===void 0&&(r=!1);var s=m0(t,n,r);s&&(i[e]=s)}function pFe(i){return i==="rss"||i==="feed"||i==="rdf:RDF"}(function(i){var e=dt&&dt.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a),Object.defineProperty(r,o,{enumerable:!0,get:function(){return s[a]}})}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=dt&&dt.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,r,a)};Object.defineProperty(i,"__esModule",{value:!0}),i.hasChildren=i.isDocument=i.isComment=i.isText=i.isCDATA=i.isTag=void 0,t(ql,i),t(Na,i),t(al,i),t(Ro,i),t(Wl,i),t(Df,i),t(eC,i);var n=j0;Object.defineProperty(i,"isTag",{enumerable:!0,get:function(){return n.isTag}}),Object.defineProperty(i,"isCDATA",{enumerable:!0,get:function(){return n.isCDATA}}),Object.defineProperty(i,"isText",{enumerable:!0,get:function(){return n.isText}}),Object.defineProperty(i,"isComment",{enumerable:!0,get:function(){return n.isComment}}),Object.defineProperty(i,"isDocument",{enumerable:!0,get:function(){return n.isDocument}}),Object.defineProperty(i,"hasChildren",{enumerable:!0,get:function(){return n.hasChildren}})})(wN);var $0={trueFunc:function(){return!0},falseFunc:function(){return!1}},Lf={},Ni;(function(i){i.Attribute="attribute",i.Pseudo="pseudo",i.PseudoElement="pseudo-element",i.Tag="tag",i.Universal="universal",i.Adjacent="adjacent",i.Child="child",i.Descendant="descendant",i.Parent="parent",i.Sibling="sibling",i.ColumnCombinator="column-combinator"})(Ni||(Ni={}));const mFe={Unknown:null,QuirksMode:"quirks",IgnoreCase:!0,CaseSensitive:!1};var es;(function(i){i.Any="any",i.Element="element",i.End="end",i.Equals="equals",i.Exists="exists",i.Hyphen="hyphen",i.Not="not",i.Start="start"})(es||(es={}));const pB=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,gFe=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,vFe=new Map([[126,es.Element],[94,es.Start],[36,es.End],[42,es.Any],[33,es.Not],[124,es.Hyphen]]),AFe=new Set(["has","not","matches","is","where","host","host-context"]);function sF(i){switch(i.type){case Ni.Adjacent:case Ni.Child:case Ni.Descendant:case Ni.Parent:case Ni.Sibling:case Ni.ColumnCombinator:return!0;default:return!1}}const _Fe=new Set(["contains","icontains"]);function bFe(i,e,t){const n=parseInt(e,16)-65536;return n!==n||t?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)}function vA(i){return i.replace(gFe,bFe)}function w4(i){return i===39||i===34}function mB(i){return i===32||i===9||i===10||i===12||i===13}function yFe(i){const e=[],t=aF(e,`${i}`,0);if(t<i.length)throw new Error(`Unmatched selector: ${i.slice(t)}`);return e}function aF(i,e,t){let n=[];function r(d){const f=e.slice(t+d).match(pB);if(!f)throw new Error(`Expected name, found ${e.slice(t)}`);const[m]=f;return t+=d+m.length,vA(m)}function s(d){for(t+=d;t<e.length&&mB(e.charCodeAt(t));)t++}function a(){t+=1;const d=t;let f=1;for(;f>0&&t<e.length;t++)e.charCodeAt(t)===40&&!o(t)?f++:e.charCodeAt(t)===41&&!o(t)&&f--;if(f)throw new Error("Parenthesis not matched");return vA(e.slice(d,t-1))}function o(d){let f=0;for(;e.charCodeAt(--d)===92;)f++;return(f&1)===1}function l(){if(n.length>0&&sF(n[n.length-1]))throw new Error("Did not expect successive traversals.")}function c(d){if(n.length>0&&n[n.length-1].type===Ni.Descendant){n[n.length-1].type=d;return}l(),n.push({type:d})}function u(d,f){n.push({type:Ni.Attribute,name:d,action:f,value:r(1),namespace:null,ignoreCase:"quirks"})}function h(){if(n.length&&n[n.length-1].type===Ni.Descendant&&n.pop(),n.length===0)throw new Error("Empty sub-selector");i.push(n)}if(s(0),e.length===t)return t;e:for(;t<e.length;){const d=e.charCodeAt(t);switch(d){case 32:case 9:case 10:case 12:case 13:{(n.length===0||n[0].type!==Ni.Descendant)&&(l(),n.push({type:Ni.Descendant})),s(1);break}case 62:{c(Ni.Child),s(1);break}case 60:{c(Ni.Parent),s(1);break}case 126:{c(Ni.Sibling),s(1);break}case 43:{c(Ni.Adjacent),s(1);break}case 46:{u("class",es.Element);break}case 35:{u("id",es.Equals);break}case 91:{s(1);let f,m=null;e.charCodeAt(t)===124?f=r(1):e.startsWith("*|",t)?(m="*",f=r(2)):(f=r(0),e.charCodeAt(t)===124&&e.charCodeAt(t+1)!==61&&(m=f,f=r(1))),s(0);let A=es.Exists;const _=vFe.get(e.charCodeAt(t));if(_){if(A=_,e.charCodeAt(t+1)!==61)throw new Error("Expected `=`");s(2)}else e.charCodeAt(t)===61&&(A=es.Equals,s(1));let v="",w=null;if(A!=="exists"){if(w4(e.charCodeAt(t))){const S=e.charCodeAt(t);let I=t+1;for(;I<e.length&&(e.charCodeAt(I)!==S||o(I));)I+=1;if(e.charCodeAt(I)!==S)throw new Error("Attribute value didn't end");v=vA(e.slice(t+1,I)),t=I+1}else{const S=t;for(;t<e.length&&(!mB(e.charCodeAt(t))&&e.charCodeAt(t)!==93||o(t));)t+=1;v=vA(e.slice(S,t))}s(0);const C=e.charCodeAt(t)|32;C===115?(w=!1,s(1)):C===105&&(w=!0,s(1))}if(e.charCodeAt(t)!==93)throw new Error("Attribute selector didn't terminate");t+=1;const x={type:Ni.Attribute,name:f,action:A,value:v,namespace:m,ignoreCase:w};n.push(x);break}case 58:{if(e.charCodeAt(t+1)===58){n.push({type:Ni.PseudoElement,name:r(2).toLowerCase(),data:e.charCodeAt(t)===40?a():null});continue}const f=r(1).toLowerCase();let m=null;if(e.charCodeAt(t)===40)if(AFe.has(f)){if(w4(e.charCodeAt(t+1)))throw new Error(`Pseudo-selector ${f} cannot be quoted`);if(m=[],t=aF(m,e,t+1),e.charCodeAt(t)!==41)throw new Error(`Missing closing parenthesis in :${f} (${e})`);t+=1}else{if(m=a(),_Fe.has(f)){const A=m.charCodeAt(0);A===m.charCodeAt(m.length-1)&&w4(A)&&(m=m.slice(1,-1))}m=vA(m)}n.push({type:Ni.Pseudo,name:f,data:m});break}case 44:{h(),n=[],s(1);break}default:{if(e.startsWith("/*",t)){const A=e.indexOf("*/",t+2);if(A<0)throw new Error("Comment was not terminated");t=A+2,n.length===0&&s(0);break}let f=null,m;if(d===42)t+=1,m="*";else if(d===124){if(m="",e.charCodeAt(t+1)===124){c(Ni.ColumnCombinator),s(2);break}}else if(pB.test(e.slice(t)))m=r(0);else break e;e.charCodeAt(t)===124&&e.charCodeAt(t+1)!==124&&(f=m,e.charCodeAt(t+1)===42?(m="*",t+=2):m=r(1)),n.push(m==="*"?{type:Ni.Universal,namespace:f}:{type:Ni.Tag,name:m,namespace:f})}}}return h(),t}const oF=["\\",'"'],lF=[...oF,"(",")"],wFe=new Set(oF.map(i=>i.charCodeAt(0))),gB=new Set(lF.map(i=>i.charCodeAt(0))),pg=new Set([...lF,"~","^","$","*","+","!","|",":","[","]"," ","."].map(i=>i.charCodeAt(0)));function cF(i){return i.map(e=>e.map(xFe).join("")).join(", ")}function xFe(i,e,t){switch(i.type){case Ni.Child:return e===0?"> ":" > ";case Ni.Parent:return e===0?"< ":" < ";case Ni.Sibling:return e===0?"~ ":" ~ ";case Ni.Adjacent:return e===0?"+ ":" + ";case Ni.Descendant:return" ";case Ni.ColumnCombinator:return e===0?"|| ":" || ";case Ni.Universal:return i.namespace==="*"&&e+1<t.length&&"name"in t[e+1]?"":`${uF(i.namespace)}*`;case Ni.Tag:return vB(i);case Ni.PseudoElement:return`::${ud(i.name,pg)}${i.data===null?"":`(${ud(i.data,gB)})`}`;case Ni.Pseudo:return`:${ud(i.name,pg)}${i.data===null?"":`(${typeof i.data=="string"?ud(i.data,gB):cF(i.data)})`}`;case Ni.Attribute:{if(i.name==="id"&&i.action===es.Equals&&i.ignoreCase==="quirks"&&!i.namespace)return`#${ud(i.value,pg)}`;if(i.name==="class"&&i.action===es.Element&&i.ignoreCase==="quirks"&&!i.namespace)return`.${ud(i.value,pg)}`;const n=vB(i);return i.action===es.Exists?`[${n}]`:`[${n}${CFe(i.action)}="${ud(i.value,wFe)}"${i.ignoreCase===null?"":i.ignoreCase?" i":" s"}]`}}}function CFe(i){switch(i){case es.Equals:return"";case es.Element:return"~";case es.Start:return"^";case es.End:return"$";case es.Any:return"*";case es.Not:return"!";case es.Hyphen:return"|";case es.Exists:throw new Error("Shouldn't be here")}}function vB(i){return`${uF(i.namespace)}${ud(i.name,pg)}`}function uF(i){return i!==null?`${i==="*"?"*":ud(i,pg)}|`:""}function ud(i,e){let t=0,n="";for(let r=0;r<i.length;r++)e.has(i.charCodeAt(r))&&(n+=`${i.slice(t,r)}\\${i.charAt(r)}`,t=r+1);return n.length>0?n+i.slice(t):i}const EFe=Object.freeze(Object.defineProperty({__proto__:null,get AttributeAction(){return es},IgnoreCaseMode:mFe,get SelectorType(){return Ni},isTraversal:sF,parse:yFe,stringify:cF},Symbol.toStringTag,{value:"Module"})),tC=mX(EFe);var rI={},nC={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.isTraversal=i.procedure=void 0,i.procedure={universal:50,tag:30,attribute:1,pseudo:0,"pseudo-element":0,"column-combinator":-1,descendant:-1,child:-1,parent:-1,sibling:-1,adjacent:-1,_flexibleDescendant:-1};function e(t){return i.procedure[t.type]<0}i.isTraversal=e})(nC);Object.defineProperty(rI,"__esModule",{value:!0});var AB=tC,SFe=nC,_B={exists:10,equals:8,not:7,start:6,end:6,any:5,hyphen:4,element:4};function MFe(i){for(var e=i.map(hF),t=1;t<i.length;t++){var n=e[t];if(!(n<0))for(var r=t-1;r>=0&&n<e[r];r--){var s=i[r+1];i[r+1]=i[r],i[r]=s,e[r+1]=e[r],e[r]=n}}}rI.default=MFe;function hF(i){var e=SFe.procedure[i.type];if(i.type===AB.SelectorType.Attribute)e=_B[i.action],e===_B.equals&&i.name==="id"&&(e=9),i.ignoreCase&&(e>>=1);else if(i.type===AB.SelectorType.Pseudo)if(!i.data)e=3;else if(i.name==="has"||i.name==="contains")e=0;else if(Array.isArray(i.data)){e=0;for(var t=0;t<i.data.length;t++)if(i.data[t].length===1){var n=hF(i.data[t][0]);if(n===0){e=0;break}n>e&&(e=n)}i.data.length>1&&e>0&&(e-=1)}else e=1;return e}var iC={},rC={};Object.defineProperty(rC,"__esModule",{value:!0});rC.attributeRules=void 0;var Xy=$0,TFe=/[-[\]{}()*+?.,\\^$|#\s]/g;function bB(i){return i.replace(TFe,"\\$&")}var IFe=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function Gp(i,e){return typeof i.ignoreCase=="boolean"?i.ignoreCase:i.ignoreCase==="quirks"?!!e.quirksMode:!e.xmlMode&&IFe.has(i.name)}rC.attributeRules={equals:function(i,e,t){var n=t.adapter,r=e.name,s=e.value;return Gp(e,t)?(s=s.toLowerCase(),function(a){var o=n.getAttributeValue(a,r);return o!=null&&o.length===s.length&&o.toLowerCase()===s&&i(a)}):function(a){return n.getAttributeValue(a,r)===s&&i(a)}},hyphen:function(i,e,t){var n=t.adapter,r=e.name,s=e.value,a=s.length;return Gp(e,t)?(s=s.toLowerCase(),function(l){var c=n.getAttributeValue(l,r);return c!=null&&(c.length===a||c.charAt(a)==="-")&&c.substr(0,a).toLowerCase()===s&&i(l)}):function(l){var c=n.getAttributeValue(l,r);return c!=null&&(c.length===a||c.charAt(a)==="-")&&c.substr(0,a)===s&&i(l)}},element:function(i,e,t){var n=t.adapter,r=e.name,s=e.value;if(/\s/.test(s))return Xy.falseFunc;var a=new RegExp("(?:^|\\s)".concat(bB(s),"(?:$|\\s)"),Gp(e,t)?"i":"");return function(l){var c=n.getAttributeValue(l,r);return c!=null&&c.length>=s.length&&a.test(c)&&i(l)}},exists:function(i,e,t){var n=e.name,r=t.adapter;return function(s){return r.hasAttrib(s,n)&&i(s)}},start:function(i,e,t){var n=t.adapter,r=e.name,s=e.value,a=s.length;return a===0?Xy.falseFunc:Gp(e,t)?(s=s.toLowerCase(),function(o){var l=n.getAttributeValue(o,r);return l!=null&&l.length>=a&&l.substr(0,a).toLowerCase()===s&&i(o)}):function(o){var l;return!!(!((l=n.getAttributeValue(o,r))===null||l===void 0)&&l.startsWith(s))&&i(o)}},end:function(i,e,t){var n=t.adapter,r=e.name,s=e.value,a=-s.length;return a===0?Xy.falseFunc:Gp(e,t)?(s=s.toLowerCase(),function(o){var l;return((l=n.getAttributeValue(o,r))===null||l===void 0?void 0:l.substr(a).toLowerCase())===s&&i(o)}):function(o){var l;return!!(!((l=n.getAttributeValue(o,r))===null||l===void 0)&&l.endsWith(s))&&i(o)}},any:function(i,e,t){var n=t.adapter,r=e.name,s=e.value;if(s==="")return Xy.falseFunc;if(Gp(e,t)){var a=new RegExp(bB(s),"i");return function(l){var c=n.getAttributeValue(l,r);return c!=null&&c.length>=s.length&&a.test(c)&&i(l)}}return function(o){var l;return!!(!((l=n.getAttributeValue(o,r))===null||l===void 0)&&l.includes(s))&&i(o)}},not:function(i,e,t){var n=t.adapter,r=e.name,s=e.value;return s===""?function(a){return!!n.getAttributeValue(a,r)&&i(a)}:Gp(e,t)?(s=s.toLowerCase(),function(a){var o=n.getAttributeValue(a,r);return(o==null||o.length!==s.length||o.toLowerCase()!==s)&&i(a)}):function(a){return n.getAttributeValue(a,r)!==s&&i(a)}}};var sI={},dF={},fF={},sC={};Object.defineProperty(sC,"__esModule",{value:!0});sC.parse=void 0;var PFe=new Set([9,10,12,13,32]),yB="0".charCodeAt(0),kFe="9".charCodeAt(0);function BFe(i){if(i=i.trim().toLowerCase(),i==="even")return[2,0];if(i==="odd")return[2,1];var e=0,t=0,n=s(),r=a();if(e<i.length&&i.charAt(e)==="n"&&(e++,t=n*(r??1),o(),e<i.length?(n=s(),o(),r=a()):n=r=0),r===null||e<i.length)throw new Error("n-th rule couldn't be parsed ('".concat(i,"')"));return[t,n*r];function s(){return i.charAt(e)==="-"?(e++,-1):(i.charAt(e)==="+"&&e++,1)}function a(){for(var l=e,c=0;e<i.length&&i.charCodeAt(e)>=yB&&i.charCodeAt(e)<=kFe;)c=c*10+(i.charCodeAt(e)-yB),e++;return e===l?null:c}function o(){for(;e<i.length&&PFe.has(i.charCodeAt(e));)e++}}sC.parse=BFe;var Ng={},RFe=dt&&dt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ng,"__esModule",{value:!0});Ng.generate=Ng.compile=void 0;var wB=RFe($0);function DFe(i){var e=i[0],t=i[1]-1;if(t<0&&e<=0)return wB.default.falseFunc;if(e===-1)return function(s){return s<=t};if(e===0)return function(s){return s===t};if(e===1)return t<0?wB.default.trueFunc:function(s){return s>=t};var n=Math.abs(e),r=(t%n+n)%n;return e>1?function(s){return s>=t&&s%n===r}:function(s){return s<=t&&s%n===r}}Ng.compile=DFe;function LFe(i){var e=i[0],t=i[1]-1,n=0;if(e<0){var r=-e,s=(t%r+r)%r;return function(){var a=s+r*n++;return a>t?null:a}}return e===0?t<0?function(){return null}:function(){return n++===0?t:null}:(t<0&&(t+=e*Math.ceil(-t/e)),function(){return e*n+++t})}Ng.generate=LFe;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.sequence=i.generate=i.compile=i.parse=void 0;var e=sC;Object.defineProperty(i,"parse",{enumerable:!0,get:function(){return e.parse}});var t=Ng;Object.defineProperty(i,"compile",{enumerable:!0,get:function(){return t.compile}}),Object.defineProperty(i,"generate",{enumerable:!0,get:function(){return t.generate}});function n(s){return(0,t.compile)((0,e.parse)(s))}i.default=n;function r(s){return(0,t.generate)((0,e.parse)(s))}i.sequence=r})(fF);(function(i){var e=dt&&dt.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(i,"__esModule",{value:!0}),i.filters=void 0;var t=e(fF),n=$0;function r(a,o){return function(l){var c=o.getParent(l);return c!=null&&o.isTag(c)&&a(l)}}i.filters={contains:function(a,o,l){var c=l.adapter;return function(h){return a(h)&&c.getText(h).includes(o)}},icontains:function(a,o,l){var c=l.adapter,u=o.toLowerCase();return function(d){return a(d)&&c.getText(d).toLowerCase().includes(u)}},"nth-child":function(a,o,l){var c=l.adapter,u=l.equals,h=(0,t.default)(o);return h===n.falseFunc?n.falseFunc:h===n.trueFunc?r(a,c):function(f){for(var m=c.getSiblings(f),A=0,_=0;_<m.length&&!u(f,m[_]);_++)c.isTag(m[_])&&A++;return h(A)&&a(f)}},"nth-last-child":function(a,o,l){var c=l.adapter,u=l.equals,h=(0,t.default)(o);return h===n.falseFunc?n.falseFunc:h===n.trueFunc?r(a,c):function(f){for(var m=c.getSiblings(f),A=0,_=m.length-1;_>=0&&!u(f,m[_]);_--)c.isTag(m[_])&&A++;return h(A)&&a(f)}},"nth-of-type":function(a,o,l){var c=l.adapter,u=l.equals,h=(0,t.default)(o);return h===n.falseFunc?n.falseFunc:h===n.trueFunc?r(a,c):function(f){for(var m=c.getSiblings(f),A=0,_=0;_<m.length;_++){var v=m[_];if(u(f,v))break;c.isTag(v)&&c.getName(v)===c.getName(f)&&A++}return h(A)&&a(f)}},"nth-last-of-type":function(a,o,l){var c=l.adapter,u=l.equals,h=(0,t.default)(o);return h===n.falseFunc?n.falseFunc:h===n.trueFunc?r(a,c):function(f){for(var m=c.getSiblings(f),A=0,_=m.length-1;_>=0;_--){var v=m[_];if(u(f,v))break;c.isTag(v)&&c.getName(v)===c.getName(f)&&A++}return h(A)&&a(f)}},root:function(a,o,l){var c=l.adapter;return function(u){var h=c.getParent(u);return(h==null||!c.isTag(h))&&a(u)}},scope:function(a,o,l,c){var u=l.equals;return!c||c.length===0?i.filters.root(a,o,l):c.length===1?function(h){return u(c[0],h)&&a(h)}:function(h){return c.includes(h)&&a(h)}},hover:s("isHovered"),visited:s("isVisited"),active:s("isActive")};function s(a){return function(l,c,u){var h=u.adapter,d=h[a];return typeof d!="function"?n.falseFunc:function(m){return d(m)&&l(m)}}}})(dF);var Fg={};Object.defineProperty(Fg,"__esModule",{value:!0});Fg.verifyPseudoArgs=Fg.pseudos=void 0;Fg.pseudos={empty:function(i,e){var t=e.adapter;return!t.getChildren(i).some(function(n){return t.isTag(n)||t.getText(n)!==""})},"first-child":function(i,e){var t=e.adapter,n=e.equals,r=t.getSiblings(i).find(function(s){return t.isTag(s)});return r!=null&&n(i,r)},"last-child":function(i,e){for(var t=e.adapter,n=e.equals,r=t.getSiblings(i),s=r.length-1;s>=0;s--){if(n(i,r[s]))return!0;if(t.isTag(r[s]))break}return!1},"first-of-type":function(i,e){for(var t=e.adapter,n=e.equals,r=t.getSiblings(i),s=t.getName(i),a=0;a<r.length;a++){var o=r[a];if(n(i,o))return!0;if(t.isTag(o)&&t.getName(o)===s)break}return!1},"last-of-type":function(i,e){for(var t=e.adapter,n=e.equals,r=t.getSiblings(i),s=t.getName(i),a=r.length-1;a>=0;a--){var o=r[a];if(n(i,o))return!0;if(t.isTag(o)&&t.getName(o)===s)break}return!1},"only-of-type":function(i,e){var t=e.adapter,n=e.equals,r=t.getName(i);return t.getSiblings(i).every(function(s){return n(i,s)||!t.isTag(s)||t.getName(s)!==r})},"only-child":function(i,e){var t=e.adapter,n=e.equals;return t.getSiblings(i).every(function(r){return n(i,r)||!t.isTag(r)})}};function OFe(i,e,t){if(t===null){if(i.length>2)throw new Error("pseudo-selector :".concat(e," requires an argument"))}else if(i.length===2)throw new Error("pseudo-selector :".concat(e," doesn't have any arguments"))}Fg.verifyPseudoArgs=OFe;var aC={};Object.defineProperty(aC,"__esModule",{value:!0});aC.aliases=void 0;aC.aliases={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"};var oC={};(function(i){var e=dt&&dt.__spreadArray||function(o,l,c){if(c||arguments.length===2)for(var u=0,h=l.length,d;u<h;u++)(d||!(u in l))&&(d||(d=Array.prototype.slice.call(l,0,u)),d[u]=l[u]);return o.concat(d||Array.prototype.slice.call(l))};Object.defineProperty(i,"__esModule",{value:!0}),i.subselects=i.getNextSiblings=i.ensureIsTag=i.PLACEHOLDER_ELEMENT=void 0;var t=$0,n=nC;i.PLACEHOLDER_ELEMENT={};function r(o,l){return o===t.falseFunc?t.falseFunc:function(c){return l.isTag(c)&&o(c)}}i.ensureIsTag=r;function s(o,l){var c=l.getSiblings(o);if(c.length<=1)return[];var u=c.indexOf(o);return u<0||u===c.length-1?[]:c.slice(u+1).filter(l.isTag)}i.getNextSiblings=s;var a=function(o,l,c,u,h){var d={xmlMode:!!c.xmlMode,adapter:c.adapter,equals:c.equals},f=h(l,d,u);return function(m){return f(m)&&o(m)}};i.subselects={is:a,matches:a,where:a,not:function(o,l,c,u,h){var d={xmlMode:!!c.xmlMode,adapter:c.adapter,equals:c.equals},f=h(l,d,u);return f===t.falseFunc?o:f===t.trueFunc?t.falseFunc:function(A){return!f(A)&&o(A)}},has:function(o,l,c,u,h){var d=c.adapter,f={xmlMode:!!c.xmlMode,adapter:d,equals:c.equals},m=l.some(function(x){return x.some(n.isTraversal)})?[i.PLACEHOLDER_ELEMENT]:void 0,A=h(l,f,m);if(A===t.falseFunc)return t.falseFunc;if(A===t.trueFunc)return function(x){return d.getChildren(x).some(d.isTag)&&o(x)};var _=r(A,d),v=A.shouldTestNextSiblings,w=v===void 0?!1:v;return m?function(x){m[0]=x;var C=d.getChildren(x),S=w?e(e([],C,!0),s(x,d),!0):C;return o(x)&&d.existsOne(_,S)}:function(x){return o(x)&&d.existsOne(_,d.getChildren(x))}}}})(oC);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.compilePseudoSelector=i.aliases=i.pseudos=i.filters=void 0;var e=$0,t=tC,n=dF;Object.defineProperty(i,"filters",{enumerable:!0,get:function(){return n.filters}});var r=Fg;Object.defineProperty(i,"pseudos",{enumerable:!0,get:function(){return r.pseudos}});var s=aC;Object.defineProperty(i,"aliases",{enumerable:!0,get:function(){return s.aliases}});var a=oC;function o(l,c,u,h,d){var f=c.name,m=c.data;if(Array.isArray(m))return a.subselects[f](l,m,u,h,d);if(f in s.aliases){if(m!=null)throw new Error("Pseudo ".concat(f," doesn't have any arguments"));var A=(0,t.parse)(s.aliases[f]);return a.subselects.is(l,A,u,h,d)}if(f in n.filters)return n.filters[f](l,m,u,h);if(f in r.pseudos){var _=r.pseudos[f];return(0,r.verifyPseudoArgs)(_,f,m),_===e.falseFunc?e.falseFunc:l===e.trueFunc?function(v){return _(v,u,m)}:function(v){return _(v,u,m)&&l(v)}}throw new Error("unmatched pseudo-class :".concat(f))}i.compilePseudoSelector=o})(sI);Object.defineProperty(iC,"__esModule",{value:!0});iC.compileGeneralSelector=void 0;var NFe=rC,FFe=sI,iu=tC;function zFe(i,e,t,n,r){var s=t.adapter,a=t.equals;switch(e.type){case iu.SelectorType.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case iu.SelectorType.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case iu.SelectorType.Attribute:{if(e.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!t.xmlMode||t.lowerCaseAttributeNames)&&(e.name=e.name.toLowerCase()),NFe.attributeRules[e.action](i,e,t)}case iu.SelectorType.Pseudo:return(0,FFe.compilePseudoSelector)(i,e,t,n,r);case iu.SelectorType.Tag:{if(e.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");var o=e.name;return(!t.xmlMode||t.lowerCaseTags)&&(o=o.toLowerCase()),function(u){return s.getName(u)===o&&i(u)}}case iu.SelectorType.Descendant:{if(t.cacheResults===!1||typeof WeakSet>"u")return function(u){for(var h=u;h=s.getParent(h);)if(s.isTag(h)&&i(h))return!0;return!1};var l=new WeakSet;return function(u){for(var h=u;h=s.getParent(h);)if(!l.has(h)){if(s.isTag(h)&&i(h))return!0;l.add(h)}return!1}}case"_flexibleDescendant":return function(u){var h=u;do if(s.isTag(h)&&i(h))return!0;while(h=s.getParent(h));return!1};case iu.SelectorType.Parent:return function(u){return s.getChildren(u).some(function(h){return s.isTag(h)&&i(h)})};case iu.SelectorType.Child:return function(u){var h=s.getParent(u);return h!=null&&s.isTag(h)&&i(h)};case iu.SelectorType.Sibling:return function(u){for(var h=s.getSiblings(u),d=0;d<h.length;d++){var f=h[d];if(a(u,f))break;if(s.isTag(f)&&i(f))return!0}return!1};case iu.SelectorType.Adjacent:return s.prevElementSibling?function(u){var h=s.prevElementSibling(u);return h!=null&&i(h)}:function(u){for(var h=s.getSiblings(u),d,f=0;f<h.length;f++){var m=h[f];if(a(u,m))break;s.isTag(m)&&(d=m)}return!!d&&i(d)};case iu.SelectorType.Universal:{if(e.namespace!=null&&e.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return i}}}iC.compileGeneralSelector=zFe;var UFe=dt&&dt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Lf,"__esModule",{value:!0});Lf.compileToken=Lf.compileUnsafe=Lf.compile=void 0;var aI=tC,Sf=$0,VFe=UFe(rI),HFe=nC,GFe=iC,pF=oC;function QFe(i,e,t){var n=mF(i,e,t);return(0,pF.ensureIsTag)(n,e.adapter)}Lf.compile=QFe;function mF(i,e,t){var n=typeof i=="string"?(0,aI.parse)(i):i;return oI(n,e,t)}Lf.compileUnsafe=mF;function gF(i){return i.type==="pseudo"&&(i.name==="scope"||Array.isArray(i.data)&&i.data.some(function(e){return e.some(gF)}))}var qFe={type:aI.SelectorType.Descendant},jFe={type:"_flexibleDescendant"},WFe={type:aI.SelectorType.Pseudo,name:"scope",data:null};function $Fe(i,e,t){for(var n=e.adapter,r=!!(t!=null&&t.every(function(l){var c=n.isTag(l)&&n.getParent(l);return l===pF.PLACEHOLDER_ELEMENT||c&&n.isTag(c)})),s=0,a=i;s<a.length;s++){var o=a[s];if(!(o.length>0&&(0,HFe.isTraversal)(o[0])&&o[0].type!=="descendant"))if(r&&!o.some(gF))o.unshift(qFe);else continue;o.unshift(WFe)}}function oI(i,e,t){var n;i=i.filter(function(l){return l.length>0}),i.forEach(VFe.default),t=(n=e.context)!==null&&n!==void 0?n:t;var r=Array.isArray(t),s=t&&(Array.isArray(t)?t:[t]);$Fe(i,e,s);var a=!1,o=i.map(function(l){if(l.length>=2){var c=l[0],u=l[1];c.type!=="pseudo"||c.name!=="scope"||(r&&u.type==="descendant"?l[1]=jFe:(u.type==="adjacent"||u.type==="sibling")&&(a=!0))}return XFe(l,e,s)}).reduce(YFe,Sf.falseFunc);return o.shouldTestNextSiblings=a,o}Lf.compileToken=oI;function XFe(i,e,t){var n;return i.reduce(function(r,s){return r===Sf.falseFunc?Sf.falseFunc:(0,GFe.compileGeneralSelector)(r,s,e,t,oI)},(n=e.rootFunc)!==null&&n!==void 0?n:Sf.trueFunc)}function YFe(i,e){return e===Sf.falseFunc||i===Sf.trueFunc?i:i===Sf.falseFunc||e===Sf.trueFunc?e:function(n){return i(n)||e(n)}}(function(i){var e=dt&&dt.__createBinding||(Object.create?function(v,w,x,C){C===void 0&&(C=x);var S=Object.getOwnPropertyDescriptor(w,x);(!S||("get"in S?!w.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return w[x]}}),Object.defineProperty(v,C,S)}:function(v,w,x,C){C===void 0&&(C=x),v[C]=w[x]}),t=dt&&dt.__setModuleDefault||(Object.create?function(v,w){Object.defineProperty(v,"default",{enumerable:!0,value:w})}:function(v,w){v.default=w}),n=dt&&dt.__importStar||function(v){if(v&&v.__esModule)return v;var w={};if(v!=null)for(var x in v)x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)&&e(w,v,x);return t(w,v),w};Object.defineProperty(i,"__esModule",{value:!0}),i.aliases=i.pseudos=i.filters=i.is=i.selectOne=i.selectAll=i.prepareContext=i._compileToken=i._compileUnsafe=i.compile=void 0;var r=n(wN),s=$0,a=Lf,o=oC,l=function(v,w){return v===w},c={adapter:r,equals:l};function u(v){var w,x,C,S,I=v??c;return(w=I.adapter)!==null&&w!==void 0||(I.adapter=r),(x=I.equals)!==null&&x!==void 0||(I.equals=(S=(C=I.adapter)===null||C===void 0?void 0:C.equals)!==null&&S!==void 0?S:l),I}function h(v){return function(x,C,S){var I=u(C);return v(x,I,S)}}i.compile=h(a.compile),i._compileUnsafe=h(a.compileUnsafe),i._compileToken=h(a.compileToken);function d(v){return function(x,C,S){var I=u(S);typeof x!="function"&&(x=(0,a.compileUnsafe)(x,I,C));var P=f(C,I.adapter,x.shouldTestNextSiblings);return v(x,P,I)}}function f(v,w,x){return x===void 0&&(x=!1),x&&(v=m(v,w)),Array.isArray(v)?w.removeSubsets(v):w.getChildren(v)}i.prepareContext=f;function m(v,w){for(var x=Array.isArray(v)?v.slice(0):[v],C=x.length,S=0;S<C;S++){var I=(0,o.getNextSiblings)(x[S],w);x.push.apply(x,I)}return x}i.selectAll=d(function(v,w,x){return v===s.falseFunc||!w||w.length===0?[]:x.adapter.findAll(v,w)}),i.selectOne=d(function(v,w,x){return v===s.falseFunc||!w||w.length===0?null:x.adapter.findOne(v,w)});function A(v,w,x){var C=u(x);return(typeof w=="function"?w:(0,a.compile)(w,C))(v)}i.is=A,i.default=i.selectAll;var _=sI;Object.defineProperty(i,"filters",{enumerable:!0,get:function(){return _.filters}}),Object.defineProperty(i,"pseudos",{enumerable:!0,get:function(){return _.pseudos}}),Object.defineProperty(i,"aliases",{enumerable:!0,get:function(){return _.aliases}})})(xx);function KFe(i){return!0}function AA(i){return i.children||[]}function xB(i){return i.parent}function JFe(i){const e=new Set(i);return e.forEach(t=>{let n=t.parent;for(;n;){if(e.has(n)){e.delete(t);return}n=n.parent}}),Array.from(e)}const zg={isTag:KFe,existsOne(i,e){return e.some(t=>i(t)||zg.existsOne(i,AA(t)))},getSiblings(i){const e=xB(i);return e?AA(e):[i]},getChildren:AA,getParent:xB,getAttributeValue(i,e){return e==="class"?i.props.classes.join(" "):e==="id"?i.id:""},hasAttrib(i,e){return e==="id"?!!i.id:e==="class"?i.props.classes.length>0:i.traits.hash?Object.prototype.hasOwnProperty.call(i.traits.hash,e):!1},removeSubsets:JFe,getName(i){var e;return(e=i.type)!==null&&e!==void 0?e:""},findOne:function i(e,t){for(const n of t){if(e(n))return n;{const r=i(e,AA(n));if(r)return r}}return null},findAll:function i(e,t){const n=[];for(const r of t)e(r)&&n.push(r),n.push(...i(e,AA(r)));return n},getText:function(e){return""}},ZFe=(i,e)=>{const t=[],n=Array.isArray(e)?e:[e],r=new Set(n);for(const s of Array.from(i)){let a=s;for(;a!=null;){if(r.has(a)){t.push(s);break}a=zg.getParent(a)}}return t},eze=i=>{let e=i;for(;zg.getParent(e)!==null;)e=zg.getParent(e);return e},tze=(i,e)=>{try{xx.compile(i)}catch{return[]}const t=Array.isArray(e);if(t&&e.length===0)return[];const n=eze(t?e[0]:e),r=xx.selectAll(i,n,{adapter:zg});return e?ZFe(r,e):r},nze=i=>{try{return xx.compile(i,{adapter:zg})}catch{return()=>!1}},ize=/^<([0-9]+|<*)$/;class vF{constructor(e){this.root=e,this.root.model=this,this.root.root=this.root,this.ids={},this.classes={},this.traits={},this.types={},this.nodes=[],this.watchers=[],this.fire=!1,this.lastNode=null,this.event={type:"update"};const t=k=>r(k.node),n=k=>s(k.node);this.root.on("add",t),this.root.on("remove",n);const r=k=>(w(k),C(k),I(k),k.on("change:node",c),c(null,k,!0),l(k)),s=k=>(x(k),S(k),P(k),A(k.id,k),v(k.classes,k),k.off("change:node",c),l(k)),a=k=>{for(const M of Array.from(this.watchers))M.match=M.matcher(k);return null},o=k=>{for(const M of Array.from(this.watchers)){const R=M.fire||(M.fire=M.match!==M.matcher(k));R&&(this.lastNode=k),this.fire||(this.fire=R)}return null},l=k=>{for(const M of Array.from(this.watchers)){const R=M.fire||(M.fire=M.matcher(k));R&&(this.lastNode=k),this.fire||(this.fire=R)}return null};this.digest=()=>{if(!this.fire)return!1;for(const k of Array.from(this.watchers.slice()))k.fire&&(k.fire=!1,k.handler());return this.fire=!1,!0};const c=(k,M,R)=>{const N=R||k.changed["node.id"],U=R||k.changed["node.classes"];let q=!1;if(N){const W=M.get("node.id");W!==M.id&&(R||a(M),q=!0,M.id!=null&&A(M.id,M),m(W,M))}if(U){let W,F=(W=M.get("node.classes"))!=null?W:[];const ue=F.join(",");ue!==(M.classes!=null?M.classes.klass:void 0)&&(F=F.slice(),!R&&!q&&a(M),q=!0,M.classes!=null&&v(M.classes,M),_(F,M),M.classes=F,M.classes.klass=ue)}return!R&&q&&o(M),null},u=function(k,M,R){if(M!=null){for(const N of Array.from(M)){const U=k[N]!=null?k[N]:[];U.push(R),k[N]=U}return null}},h=function(k,M,R){if(M!=null){for(const N of Array.from(M)){const U=k[N],q=U.indexOf(R);q>=0&&U.splice(q,1),U.length===0&&delete k[N]}return null}},d=function(k){if(!(k.length>0))return;const M=k.hash={};return Array.from(k).map(R=>M[R]=!0)},f=k=>delete k.hash,m=(k,M)=>{if(this.ids[k])throw new Error(`Duplicate node id \`${k}\``);return k!=null&&(this.ids[k]=[M]),M.id=k??M._id},A=(k,M)=>(k!=null&&delete this.ids[k],M.id=M._id),_=(k,M)=>{if(u(this.classes,k,M),k!=null)return d(k)},v=(k,M)=>{if(h(this.classes,k,M),k!=null)return f(k)},w=k=>this.nodes.push(k),x=k=>this.nodes.splice(this.nodes.indexOf(k),1),C=k=>u(this.types,[k.type],k),S=k=>h(this.types,[k.type],k),I=k=>(u(this.traits,k.traits,k),d(k.traits)),P=k=>(h(this.traits,k.traits,k),f(k.traits));r(this.root),this.root.trigger({type:"added"})}select(e,t){return tze(e,t||this.getRoot())}watch(e,t){let n;return t.unwatch=()=>this.unwatch(t),t.watcher=n={selector:e,handler:t,matcher:this._matcher(e),match:!1,fire:!1},this.watchers.push(n),this.select(e)}unwatch(e){const{watcher:t}=e;if(t!=null)return this.watchers.splice(this.watchers.indexOf(t),1),delete e.unwatch,delete e.watcher}_matcher(e){if(ize.test(e))throw new Error("Auto-link matcher unsupported");return nze(e)}getRoot(){return this.root}getLastTrigger(){return this.lastNode.toString()}}const rze=Object.freeze(Object.defineProperty({__proto__:null,Attributes:gN,Group:bN,Guard:yN,Model:vF,Node:T1},Symbol.toStringTag,{value:"Module"}));class AF{constructor(e,t){this.classes=e,this.canvas=t;const n=document.createElement("div");n.classList.add("mathbox-overlays"),this.div=n}inject(){const e=this.canvas.parentNode;if(!e)throw new Error("Canvas not inserted into document.");return e.insertBefore(this.div,this.canvas)}unject(){return this.div.parentNode.removeChild(this.div)}getTypes(){return Object.keys(this.classes)}make(e,t){return new this.classes[e](this.div,t)}}const P1=[];let sze=0;const Sx={},_F=()=>({id:sze++,type:null,props:null,children:null,rendered:null,instance:null}),bF=function(i){return i*=2,i=Math.max(0,P1.length-i),cze(0,i,!1).map(e=>P1.push(_F()))},k1=function(i,e,t){const n=P1.length?P1.pop():_F();return n.type=i??"div",n.props=e??null,n.children=t??null,n},lI=function(i){if(!i.type)return;const{children:e}=i;if(i.type=i.props=i.children=i.instance=null,P1.push(i),e!=null)for(const t of Array.from(e))lI(t)},mg=function(i,e,t,n,r){if(i!=null){if(e==null)return gg(i,n,r);{let s;if(i instanceof Node){if(s=i===e,s)return}else s=typeof i==typeof e&&e!==null&&i!==null&&i.type===e.type;if(s){let a,o,l;i.instance=e.instance;const c=i.type!=null&&i.type.isComponentClass?i.type:Sx[i.type],u=e!=null?e.props:void 0,h=i.props,d=(e!=null?e.children:void 0)!=null?e!=null?e.children:void 0:null,f=i.children;if(h!=null&&(h.children=f),c!=null){let m=t._COMPONENT_DIRTY;if(u!=null!=(h!=null)&&(m=!0),d!==f&&(m=!0),u!=null&&h!=null){if(!m)for(a in u)Object.prototype.hasOwnProperty.call(h,a)||(m=!0);if(!m)for(a in h)l=h[a],(o=u[a])!==l&&(m=!0)}if(m){let A;const _=e.instance;i.props==null&&(i.props={});for(const C in _.defaultProps){const S=_.defaultProps[C];i.props[C]==null&&(i.props[C]=S)}i.props.children=i.children,typeof _.willReceiveProps=="function"&&_.willReceiveProps(i.props);const v=t._COMPONENT_FORCE||((A=typeof _.shouldUpdate=="function"?_.shouldUpdate(i.props):void 0)!=null?A:!0);if(v){const C=_.getNextState();typeof _.willUpdate=="function"&&_.willUpdate(i.props,C)}const w=_.props,x=_.applyNextState();_.props=i.props,_.children=i.children,v&&(i=i.rendered=typeof _.render=="function"?_.render(k1,i.props,i.children):void 0,mg(i,e.rendered,t,n,r),typeof _.didUpdate=="function"&&_.didUpdate(w,x))}return}else{if(u!=null)for(a in u)Object.prototype.hasOwnProperty.call(h,a)||oze(t,a,u[a]);if(h!=null)for(a in h)l=h[a],(o=u[a])!==l&&a!=="children"&&yF(t,a,l,o);if(f!=null)if(["string","number"].includes(typeof f))f!==d&&(t.textContent=f);else if(f.type!=null)mg(f,d,t.childNodes[0],t,0);else{let m,A;const{childNodes:_}=t;if(d!=null)for(A=0;A<f.length;A++)m=f[A],mg(m,d[A],_[A],t,A);else for(A=0;A<f.length;A++)m=f[A],mg(m,null,_[A],t,A)}else d!=null&&(Xw(null,t),t.innerHTML="")}return}else return Xw(e.instance,t),t.remove(),gg(i,n,r)}}if(e!=null)return Xw(e.instance,t),e.node.remove()},gg=function(i,e,t){let n;t==null&&(t=0);const r=i.type!=null&&i.type.isComponentClass?i.type:Sx[i.type];if(i instanceof Node)n=i;else{if(r!=null){let a;const o=i.type!=null&&i.type.isComponentClass?i.type:Sx[i.type];if(!o)return i=i.rendered=k1("noscript"),n=gg(i,e,t),n;i.instance=a=new o(e),i.props==null&&(i.props={});for(const l in a.defaultProps){const c=a.defaultProps[l];i.props[l]==null&&(i.props[l]=c)}return i.props.children=i.children,a.props=i.props,a.children=i.children,a.setState(typeof a.getInitialState=="function"?a.getInitialState():void 0),typeof a.willMount=="function"&&a.willMount(),i=i.rendered=typeof a.render=="function"?a.render(k1,i.props,i.children):void 0,n=gg(i,e,t),typeof a.didMount=="function"&&a.didMount(i),n._COMPONENT=a,n}else if(["string","number"].includes(typeof i))n=document.createTextNode(i);else{n=document.createElement(i.type);for(const a in i.props){const o=i.props[a];yF(n,a,o)}}const{children:s}=i;if(s!=null)if(["string","number"].includes(typeof s))n.textContent=s;else if(s.type!=null)gg(s,n,0);else for(let a=0;a<s.length;a++){const o=s[a];gg(o,n,a)}}return e.insertBefore(n,e.childNodes[t]),n},Xw=function(i,e){if(i){typeof i.willUnmount=="function"&&i.willUnmount();for(const t in i)delete i[t]}return(()=>{const t=[];for(const n of Array.from(e.childNodes))Xw(n._COMPONENT,n),t.push(delete n._COMPONENT);return t})()},aze=function(i){if(typeof document>"u")return!0;if(document.documentElement.style[i]!=null)return i;i=i[0].toUpperCase()+i.slice(1);const e=["webkit","moz","ms","o"];for(const t of Array.from(e))if(document.documentElement.style[t+i]!=null)return t+i},B1={};for(const i of["transform"])B1[i]=aze(i);const yF=function(i,e,t,n){if(e==="style"){for(const r in t){const s=t[r];(n!=null?n[r]:void 0)!==s&&(i.style[B1[r]!=null?B1[r]:r]=s)}return}if(i[e]!=null){try{i[e]=t}catch{console.log("failed setting "+e)}return}if(i instanceof Node){i.setAttribute(e,t);return}},oze=function(i,e,t){if(e==="style"){for(const n in t)i.style[B1[n]!=null?B1[n]:n]="";return}if(i[e]!=null&&(i[e]=void 0),i instanceof Node){i.removeAttribute(e);return}},lze=function(i){let e;const t={willMount:"componentWillMount",didMount:"componentDidMount",willReceiveProps:"componentWillReceiveProps",shouldUpdate:"shouldComponentUpdate",willUpdate:"componentWillUpdate",didUpdate:"componentDidUpdate",willUnmount:"componentWillUnmount"};for(const r in t){const s=t[r];i[r]==null&&(i[r]=i[s])}class n{constructor(s,a,o=null,l=null){let c,u;a==null&&(a={}),this.props=a,this.state=o,this.children=l;const h=function(f,m){return typeof f=="function"?f.bind(m):f};for(c in i)u=i[c],this[c]=h(u,this);let d=null;this.setState=function(f){d==null&&(d=f?d??{}:null);for(c in f)u=f[c],d[c]=u;s._COMPONENT_DIRTY=!0},this.forceUpdate=function(){s._COMPONENT_FORCE=s._COMPONENT_DIRTY=!0;let f=s;return(()=>{const m=[];for(;f=f.parentNode;)f._COMPONENT?m.push(f._COMPONENT_FORCE=!0):m.push(void 0);return m})()},this.getNextState=()=>d,this.applyNextState=function(){s._COMPONENT_FORCE=s._COMPONENT_DIRTY=!1;const f=this.state;return[d,this.state]=Array.from([null,d]),f}}}return n.isComponentClass=!0,n.prototype.defaultProps=(e=typeof i.getDefaultProps=="function"?i.getDefaultProps():void 0)!=null?e:{},n};function cze(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let a=i;r?a<s:a>s;r?a++:a--)n.push(a);return n}const uze=Object.freeze(Object.defineProperty({__proto__:null,Types:Sx,apply:mg,createClass:lze,element:k1,hint:bF,recycle:lI},Symbol.toStringTag,{value:"Module"}));class wF{constructor(e,t){this.element=e,typeof this.init=="function"&&this.init(t)}dispose(){}}let xF=class extends wF{static initClass(){this.prototype.el=k1,this.prototype.hint=bF,this.prototype.apply=mg,this.prototype.recycle=lI}init(e){return this.last=null}dispose(){return this.unmount(),super.dispose()}mount(){const e=document.createElement("div");return e.classList.add("mathbox-overlay"),this.element.appendChild(e),this.overlay=e}unmount(e){return this.overlay&&this.overlay.parentNode&&this.element.removeChild(this.overlay),this.overlay=null}render(e){this.overlay||this.mount(),["string","number"].includes(typeof e)&&(e=this.el("div",null,e)),e instanceof Array&&(e=this.el("div",null,e)),e==null&&(e=this.el("div"));const t=e.type==="div";let{last:n}=this;const{overlay:r}=this,s=t?r:r.childNodes[0],a=t?r.parentNode:r;!n&&s&&(n=this.el("div")),this.apply(e,n,s,a,0),this.last=e,n!=null&&this.recycle(n)}};xF.initClass();const CF={dom:xF},hze=Object.freeze(Object.defineProperty({__proto__:null,Classes:CF,Factory:AF,Overlay:wF},Symbol.toStringTag,{value:"Module"}));class Rs{static initClass(){this.Node=T1,this.Group=bN,this.model=this.Node,this.defaults=null,this.traits=null,this.props=null,this.finals=null,this.freeform=!1}constructor(e,t,n){this.node=e,this._context=t,this._renderables=this._context.renderables,this._attributes=this._context.attributes,this._shaders=this._context.shaders,this._overlays=this._context.overlays,this._animator=this._context.animator,this._types=this._attributes.types,this.node.controller=this,this.node.on("added",r=>this._added()),this.node.on("removed",r=>this._removed()),this.node.on("change",r=>{if(this._root)return this.change(r.changed,r.touched)}),this.reconfigure(),this._get=this.node.get.bind(this.node),this._helpers=n(this,this.node.traits),this._handlers={inherit:{},listen:[],watch:[],compute:[]},this._root=this._parent=null,this.init()}is(e){return this.traits.hash[e]}init(){}make(){}made(){}unmake(e){}unmade(){}change(e,t,n){}refresh(){return this.change({},{},!0)}rebuild(){if(this._root)return this._removed(!0),this._added()}reconfigure(e){return e!=null&&this.node.configure(e,this._attributes),this.traits=this.node.traits,this.props=this.node.props}_added(){let e,t;this._parent=this.node.parent!=null?this.node.parent.controller:void 0,this._root=this.node.root!=null?this.node.root.controller:void 0,this.node.clock=(t=this._inherit("clock"))!=null?t:this._root;try{try{return this.make(),this.refresh(),this.made()}catch(n){throw e=n,this.node.print("warn"),console.error(e),e}}catch(n){e=n;try{return this._removed()}catch{}}}_removed(e){return e==null&&(e=!1),this.unmake(e),this._unlisten(),this._unattach(),this._uncompute(),this._root=null,this._parent=null,this.unmade(e)}_listen(e,t,n,r){if(r==null&&(r=this),e instanceof Array)for(const s of Array.from(e))return this.__listen(s,t,n,r);return this.__listen(e,t,n,r)}__listen(e,t,n,r){if(r==null&&(r=this),typeof e=="string"&&(e=this._inherit(e)),e!=null){const s=n.bind(r);s.node=this.node,e.on(t,s),this._handlers.listen.push([e,t,s])}return e}_unlisten(){if(this._handlers.listen.length){for(const[e,t,n]of Array.from(this._handlers.listen))e.off(t,n);return this._handlers.listen=[]}}_inherit(e){const t=this._handlers.inherit[e];return t!==void 0?t:this._handlers.inherit[e]=this._parent!=null?this._parent._find(e??null):void 0}_find(e){return this.is(e)?this:this._parent!=null?this._parent._find(e):void 0}_uninherit(){return this._handlers.inherit={}}_attach(e,t,n,r,s,a,o){r==null&&(r=this),s==null&&(s=this),a==null&&(a=!1),o==null&&(o=!1);const l=function(f){if(f!=null&&Array.from(f.traits).includes(t))return f},c=f=>f!=null?f.controller:void 0,u=function(f){if(f==null)return f;let m=[];for(const A of Array.from(f))A instanceof Array?m=m.concat(A):m.push(A);return m},h=f=>{let m,A;if(typeof f=="object"){if(m=f,m!=null&&m._up)return f=o?m._targets:[m[0]],f;if(m instanceof Array)return f=o?u(m.map(h)):h(m[0]),f;if(m instanceof T1)return[m]}else if(typeof f=="string"&&f[0]==="<"){let _,v=0;(_=f.match(/^<([0-9])+$/))&&(v=+_[1]-1),f.match(/^<+$/)&&(v=+f.length-1),A=[];let w=s.node;for(;w;){const{parent:x}=w;if(!x)break;if(w=x.children[w.index-1],!w&&!A.length&&(w=x),m=null,l(w)&&(m=w),m!=null&&v--<=0&&A.push(m),!o&&A.length)return A}if(o&&A.length)return A}else if(typeof f=="string"){const _=n.bind(r);this._handlers.watch.push(_);const v=this._root.watch(f,_);if(o){if(A=v.filter(l),A.length)return A}else if(l(v[0])&&(m=v[0]),m!=null)return[m]}if(!a)throw console.warn(this.node.toMarkup()),new Error(`${this.node.toString()} - Could not find ${t} \`${f}\``);return o?[]:null},d=u(h(e));return o?d!=null?d.map(c):null:d!=null?c(d[0]):null}_unattach(){if(this._handlers.watch.length){for(const e of Array.from(this._handlers.watch))e!=null&&e.unwatch();return this._handlers.watch=[]}}_compute(e,t){return this._handlers.compute.push(e),this.node.bind(e,t,!0)}_uncompute(){if(this._handlers.compute.length){for(const e of Array.from(this._handlers.compute))this.node.unbind(e,!0);return this._handlers.compute=[]}}}Rs.initClass();du.apply(Rs.prototype);class yl extends Rs{static initClass(){this.model=Rs.Group,this.traits=["node"]}}yl.initClass();class EF extends yl{static initClass(){this.traits=["node","object","entity","visible","active"]}make(){return this._helpers.visible.make(),this._helpers.active.make()}unmake(){return this._helpers.visible.unmake(),this._helpers.active.unmake()}}EF.initClass();class SF extends yl{static initClass(){this.traits=["node","bind"]}make(){return this._helpers.bind.make([{to:"inherit.source",trait:"node"}])}unmake(){return this._helpers.bind.unmake()}_find(e){return this.bind.source&&Array.from(this.props.traits).includes(e)?this.bind.source._inherit(e):super._find()}}SF.initClass();class MF extends yl{static initClass(){this.traits=["node","root","clock","scene","vertex","unit"]}init(){return this.size=null,this.cameraEvent={type:"root.camera"},this.preEvent={type:"root.pre"},this.updateEvent={type:"root.update"},this.renderEvent={type:"root.render"},this.postEvent={type:"root.post"},this.clockEvent={type:"clock.tick"},this.camera=null}make(){return this._helpers.unit.make()}unmake(){return this._helpers.unit.unmake()}change(e,t,n){if(e["root.camera"]||n)return this._unattach(),this._attach(this.props.camera,"camera",this.setCamera,this,this,!0),this.setCamera()}adopt(e){return Array.from(e.renders).map(t=>this._context.scene.add(t))}unadopt(e){return Array.from(e.renders).map(t=>this._context.scene.remove(t))}select(e){return this.node.model.select(e)}watch(e,t){return this.node.model.watch(e,t)}unwatch(e){return this.node.model.unwatch(e)}resize(e){return this.size=e,this.trigger({type:"root.resize",size:e})}getSize(){return this.size}getSpeed(){return this.props.speed}getUnit(){return this._helpers.unit.get()}getUnitUniforms(){return this._helpers.unit.uniforms()}pre(){return this.getCamera().updateProjectionMatrix(),this.trigger(this.clockEvent),this.trigger(this.preEvent)}update(){return this.trigger(this.updateEvent)}render(){return this.trigger(this.renderEvent)}post(){return this.trigger(this.postEvent)}setCamera(){const e=dze(this.select(this.props.camera)[0],t=>t.controller);if(this.camera!==e)return this.camera=e,this.trigger({type:"root.camera"})}getCamera(){let e;return(e=this.camera!=null?this.camera.getCamera():void 0)!=null?e:this._context.defaultCamera}getTime(){return this._context.time}vertex(e,t){return t===2?e.pipe("view.position"):t===3?e.pipe("root.position"):e}}MF.initClass();function dze(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class TF extends yl{static initClass(){this.traits=["node","unit"]}make(){return this._helpers.unit.make()}unmake(){return this._helpers.unit.unmake()}getUnit(){return this._helpers.unit.get()}getUnitUniforms(){return this._helpers.unit.uniforms()}}TF.initClass();const Yw=function(i,e){return e===bd?i.REPEAT:e===oa?i.CLAMP_TO_EDGE:e===T0?i.MIRRORED_REPEAT:e===ki?i.NEAREST:e===XT?i.NEAREST_MIPMAP_NEAREST:e===YT?i.NEAREST_MIPMAP_LINEAR:e===Sr?i.LINEAR:e===KT?i.LINEAR_MIPMAP_NEAREST:e===JT?i.LINEAR_MIPMAP_LINEAR:e===ts?i.UNSIGNED_BYTE:e===g2?i.UNSIGNED_SHORT_4_4_4_4:e===v2?i.UNSIGNED_SHORT_5_5_5_1:e===i_?i.BYTE:e===r_?i.SHORT:e===V0?i.UNSIGNED_SHORT:e===iv?i.INT:e===Sc?i.UNSIGNED_INT:e===ns?i.FLOAT:e===ZT?i.ALPHA:e===Ps?i.RGBA:e===A2?i.LUMINANCE:e===_2?i.LUMINANCE_ALPHA:e===xf?i.FUNC_ADD:e===NT?i.FUNC_SUBTRACT:e===FT?i.FUNC_REVERSE_SUBTRACT:e===zT?i.ZERO:e===UT?i.ONE:e===VT?i.SRC_COLOR:e===HT?i.ONE_MINUS_SRC_COLOR:e===f2?i.SRC_ALPHA:e===p2?i.ONE_MINUS_SRC_ALPHA:e===GT?i.DST_ALPHA:e===QT?i.ONE_MINUS_DST_ALPHA:e===qT?i.DST_COLOR:e===jT?i.ONE_MINUS_DST_COLOR:e===WT?i.SRC_ALPHA_SATURATE:0},IF=function(i){switch(i){case ts:return Uint8Array;case i_:return Int8Array;case r_:return Int16Array;case V0:return Uint16Array;case iv:return Int32Array;case Sc:return Uint32Array;case ns:return Float32Array}},cI=i=>i.map(e=>["","X","Y","Z"][e]).join(""),uv=function(){const i=new H0,e=new la,t=new le,n=new le,r=new jn;return function(s,a,o,l,c,u){return u==null&&(u="XYZ"),a!=null?(u instanceof Array&&(u=cI(u)),i.setFromVector3(a,u),e.setFromEuler(i)):e.set(0,0,0,1),o!=null&&e.multiply(o),s!=null?t.copy(s):t.set(0,0,0),l!=null?n.copy(l):n.set(1,1,1),r.compose(t,e,n),c!=null&&r.multiplyMatrices(r,c),r}},fze=Object.freeze(Object.defineProperty({__proto__:null,paramToArrayStorage:IF,paramToGL:Yw,swizzleToEulerOrder:cI,transformComposer:uv},Symbol.toStringTag,{value:"Module"}));class PF extends Rs{static initClass(){this.traits=["node","camera"]}init(){}make(){const e=this._context.defaultCamera;return this.camera=this.props.proxy?e:e.clone(),this.euler=new H0,this.quat=new la}unmake(){}getCamera(){return this.camera}change(e,t,n){if(e["camera.position"]||e["camera.quaternion"]||e["camera.rotation"]||e["camera.lookAt"]||e["camera.up"]||e["camera.fov"]||n){const{position:r,quaternion:s,rotation:a,lookAt:o,up:l,fov:c}=this.props;return r!=null&&this.camera.position.copy(r),(s!=null||a!=null||o!=null)&&(o!=null?this.camera.lookAt(o):this.camera.quaternion.set(0,0,0,1),a!=null&&(this.euler.setFromVector3(a,cI(this.props.eulerOrder)),this.quat.setFromEuler(this.euler),this.camera.quaternion.multiply(this.quat)),s!=null&&this.camera.quaternion.multiply(s)),c!=null&&this.camera.fov!=null&&(this.camera.fov=c),l!=null&&this.camera.up.copy(l),this.camera.updateMatrix()}}}PF.initClass();const D0=function(i){const e=[];let t=i;for(;typeof t!="string"&&(t!=null?t.length:void 0)!=null;)e.push(t.length),t=t[0];return e},Qf=function(i,e){let t;e==null&&(e={});const{items:n,channels:r,width:s,height:a,depth:o}=e,l={};if(!i||!i.length)return{items:n,channels:r,width:s??0,height:a??0,depth:o??0};const c=D0(i),u=c.length;l.channels=r!==1&&c.length>1?c.pop():r,l.items=n!==1&&c.length>1?c.pop():n,l.width=s!==1&&c.length>1?c.pop():s,l.height=a!==1&&c.length>1?c.pop():a,l.depth=o!==1&&c.length>1?c.pop():o;let h=u;r===1&&h++,n===1&&h>1&&h++,s===1&&h>2&&h++,a===1&&h>3&&h++;let d=(t=c.pop())!=null?t:1;return h<=1&&(d/=l.channels!=null?l.channels:1),h<=2&&(d/=l.items!=null?l.items:1),h<=3&&(d/=l.width!=null?l.width:1),h<=4&&(d/=l.height!=null?l.height:1),d=Math.floor(d),l.width==null&&(l.width=d,d=1),l.height==null&&(l.height=d,d=1),l.depth==null&&(l.depth=d,d=1),l},A_=function(i,e){switch(e){case 0:return()=>!0;case 1:return()=>i();case 2:return function(){return i(),i()};case 3:return function(){return i(),i(),i(),i()};case 4:return function(){return i(),i(),i(),i()};case 6:return function(){return i(),i(),i(),i(),i(),i()};case 8:return function(){return i(),i(),i(),i(),i(),i()}}},kF=function(i,e,t){let n;const r=(()=>{switch(t){case 0:return()=>!0;case 1:return a=>a(i());case 2:return a=>a(i(),i());case 3:return a=>a(i(),i(),i());case 4:return a=>a(i(),i(),i(),i());case 6:return a=>a(i(),i(),i(),i(),i(),i());case 8:return a=>a(i(),i(),i(),i(),i(),i(),i(),i())}})();let s=null;for(;e>0;){const a=Math.min(e,8);n=(()=>{switch(a){case 1:return o=>r(o);case 2:return function(o){return r(o),r(o)};case 3:return function(o){return r(o),r(o),r(o)};case 4:return function(o){return r(o),r(o),r(o),r(o)};case 5:return function(o){return r(o),r(o),r(o),r(o),r(o)};case 6:return function(o){return r(o),r(o),r(o),r(o),r(o),r(o)};case 7:return function(o){return r(o),r(o),r(o),r(o),r(o),r(o),r(o)};case 8:return function(o){return r(o),r(o),r(o),r(o),r(o),r(o),r(o),r(o)}}})(),s!=null?s=((o,l)=>function(c){return o(c),l(c)})(n,s):s=n,e-=a}return n=s??(()=>!0),n.reset=i.reset,n.rebind=i.rebind,n},Mx=function(i){let e,t,n,r,s,a=D0(i);const o=a.length;let l=a.pop(),c=a.pop(),u=a.pop();const h=a.pop();let d,f,m,A,_;switch(o){case 0:e=()=>0,e.reset=function(){};break;case 1:d=0,e=()=>i[d++],e.reset=()=>d=0;break;case 2:d=t=0,f=i[t]!=null?i[t]:[],e=function(){const v=f[d++];return d===l&&(d=0,t++,f=i[t]!=null?i[t]:[]),v},e.reset=function(){d=t=0,f=i[t]!=null?i[t]:[]};break;case 3:d=t=n=0,m=i[n]!=null?i[n]:[],f=m[t]!=null?m[t]:[],e=function(){const v=f[d++];return d===l&&(d=0,t++,t===c&&(t=0,n++,m=i[n]!=null?i[n]:[]),f=m[t]!=null?m[t]:[]),v},e.reset=function(){d=t=n=0,m=i[n]!=null?i[n]:[],f=m[t]!=null?m[t]:[]};break;case 4:d=t=n=r=0,A=i[r]!=null?i[r]:[],m=A[n]!=null?A[n]:[],f=m[t]!=null?m[t]:[],e=function(){const v=f[d++];return d===l&&(d=0,t++,t===c&&(t=0,n++,n===u&&(n=0,r++,A=i[r]!=null?i[r]:[]),m=A[n]!=null?A[n]:[]),f=m[t]!=null?m[t]:[]),v},e.reset=function(){d=t=n=r=0,A=i[r]!=null?i[r]:[],m=A[n]!=null?A[n]:[],f=m[t]!=null?m[t]:[]};break;case 5:d=t=n=r=s=0,_=i[s]!=null?i[s]:[],A=_[r]!=null?_[r]:[],m=A[n]!=null?A[n]:[],f=m[t]!=null?m[t]:[],e=function(){const v=f[d++];return d===l&&(d=0,t++,t===c&&(t=0,n++,n===u&&(n=0,r++,r===h&&(r=0,s++,_=i[s]!=null?i[s]:[]),A=_[r]!=null?_[r]:[]),m=A[n]!=null?A[n]:[]),f=m[t]!=null?m[t]:[]),v},e.reset=function(){d=t=n=r=s=0,_=i[s]!=null?i[s]:[],A=_[r]!=null?_[r]:[],m=A[n]!=null?A[n]:[],f=m[t]!=null?m[t]:[]};break}return e.rebind=function(v){if(i=v,a=D0(i),a.length&&(l=a.pop()),a.length&&(c=a.pop()),a.length&&(u=a.pop()),a.length)return v=a.pop()},e},uI=function(i,e,t,n){let r,s,a=r=s=0;const o=function(){return a=e*t*n,r=s=0},l=()=>s,c=()=>a-r<=0,u=(()=>{switch(t){case 1:return function(f){r+=f,s+=f};case 2:return function(f){r+=f*2,s+=f};case 3:return function(f){r+=f*3,s+=f};case 4:return function(f){r+=f*4,s+=f}}})(),h=(()=>{switch(t){case 1:return function(f){f(i[r++]),++s};case 2:return function(f){f(i[r++],i[r++]),++s};case 3:return function(f){f(i[r++],i[r++],i[r++]),++s};case 4:return function(f){f(i[r++],i[r++],i[r++],i[r++]),++s}}})(),d=(()=>{switch(t){case 1:return function(f){i[r++]=f,++s};case 2:return function(f,m){i[r++]=f,i[r++]=m,++s};case 3:return function(f,m,A){i[r++]=f,i[r++]=m,i[r++]=A,++s};case 4:return function(f,m,A,_){i[r++]=f,i[r++]=m,i[r++]=A,i[r++]=_,++s}}})();return h.reset=o,d.reset=o,o(),{emit:d,consume:h,skip:u,count:l,done:c,reset:o}},BF=function(i,e){let t,n,r,s,a;const o=new Float32Array(4096);let l=n=.5,c=r=s=a=0;const u=function(f,m,A,_){return s++,o[c++]=f*l,o[c++]=m*l,o[c++]=A*l,o[c++]=_*l},h=function(f,m,A,_){return a++,o[r++]+=f*n,o[r++]+=m*n,o[r++]+=A*n,o[r++]+=_*n},d=Math.max(i.length,e.length);return d<=3?t=function(f,m,A){c=r=s=a=0,i(u,m,A),e(h,m,A);const _=Math.min(s,a);let v=0;return CB(0,_,!1).map(w=>f(o[v++],o[v++],o[v++],o[v++]))}:d<=5?t=function(f,m,A,_,v){c=r=s=a=0,i(u,m,A,_,v),e(h,m,A,_,v);const w=Math.min(s,a);let x=0;return CB(0,w,!1).map(C=>f(o[x++],o[x++],o[x++],o[x++]))}:d<=7?t=function(f,m,A,_,v,w,x){c=r=s=a=0,i(u,m,A,_,v,w,x),e(h,m,A,_,v,w,x);const C=Math.min(s,a);let S=0;return(()=>{let I,P;const k=[];for(x=0,P=C,I=0<=P;I?x<P:x>P;I?x++:x--)k.push(f(o[S++],o[S++],o[S++],o[S++]));return k})()}:d<=9?t=function(f,m,A,_,v,w,x,C,S){c=r=s=a=0,i(u,m,A,_,v,w,x,C,S),e(h,m,A,_,v,w,x,C,S);const I=Math.min(s,a);return S=0,(()=>{let P,k;const M=[];for(C=0,k=I,P=0<=k;P?C<k:C>k;P?C++:C--)M.push(f(o[S++],o[S++],o[S++],o[S++]));return M})()}:t=function(f,m,A,_,v,w,x,C,S,I,P){c=r=0,i(u,m,A,_,v,w,x,C,S,I,P),e(h,m,A,_,v,w,x,C,S,I,P);const k=Math.min(s,a);return S=0,(()=>{let M,R;const N=[];for(C=0,R=k,M=0<=R;M?C<R:C>R;M?C++:C--)N.push(f(o[S++],o[S++],o[S++],o[S++]));return N})()},t.lerp=function(f){let m;return[l,n]=Array.from(m=[1-f,f]),m},t},RF=function(i,e){const t=D0(i).reduce((l,c)=>l*c),n=D0(e).reduce((l,c)=>l*c),r=Math.min(t,n),s=Mx(i),a=Mx(e),o=new Float32Array(r);return o.lerp=function(l){s.reset(),a.reset();let c=0;return(()=>{const u=[];for(;c<r;){const h=s(),d=a();u.push(o[c++]=h+(d-h)*l)}return u})()},o};function CB(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let a=i;r?a<s:a>s;r?a++:a--)n.push(a);return n}const pze=Object.freeze(Object.defineProperty({__proto__:null,getDimensions:Qf,getLerpEmitter:BF,getLerpThunk:RF,getSizes:D0,getStreamer:uI,getThunk:Mx,makeEmitter:kF,repeatCall:A_},Symbol.toStringTag,{value:"Module"})),EB="xyzw".split(""),hI={0:-1,x:0,y:1,z:2,w:3},dI=function(i){return i===""+i&&(i=i.split("")),i===+i&&(i=[i]),i},Ug=function(i){return i===+i&&(i="vec"+i),i==="vec1"&&(i="float"),i},DF=function(i){if(i=""+i,i.indexOf(".")<0)return i+=".0"},LF=function(i){i==null&&(i=4);const e=DF(i);return`vec4 float2ByteIndex(vec4 xyzw, out float channelIndex) {
  float relative = xyzw.w / ${e};
  float w = floor(relative);
  channelIndex = (relative - w) * ${e};
  return vec4(xyzw.xyz, w);
}`},OF=function(i){const e=function(n,r){let s;if(n===r)s=`return texture2D(dataTextures[${n}], uv);`;else{const a=Math.ceil(n+(r-n)/2);s=`if (z < ${a-.5}) {
  ${e(n,a-1)}
}
else {
  ${e(a,r)}
}`}return s=s.replace(/\n/g,`
  `)},t=e(0,i-1);return`uniform sampler2D dataTextures[${i}];

vec4 sample2DArray(vec2 uv, float z) {
  ${t}
}`},$l=function(i,e,t){return i=Ug(i),t!=null?`${i} binaryOperator(${i} a) {
  return a ${e} ${t};
}`:`${i} binaryOperator(${i} a, ${i} b) {
  return a ${e} b;
}`},L0=function(i,e,t){if(t==null&&(t=0),i>e)return qf(i,e);const n=e-i;i=Ug(i),e=Ug(e),t=DF(t);const s=mze(0,n,!0).map(function(a){return a?t:"v"}).join(",");return`${e} extendVec(${i} v) { return ${e}(${s}); }`},qf=function(i,e){if(i<e)return L0(i,e);const t="."+"xyzw".substr(0,e);return i=Ug(i),e=Ug(e),`${e} truncateVec(${i} v) { return v${t}; }`},fI=function(i){const e=["0.0","0.0","0.0","0.0"];i=dI(i),i=i.map(function(r){return r===""+r?hI[r]:r});for(let r=0;r<i.length;r++){const s=i[r];e[s]=["a","b","c","d"][r]}const t=e.slice(0,4).join(", ");return`vec4 inject(${["float a","float b","float c","float d"].slice(0,i.length)}) {
  return vec4(${t});
}`},hl=function(i,e=null){const t=["0.0","xyzw.x","xyzw.y","xyzw.z","xyzw.w"];for(e==null&&(e=i.length),i=dI(i),i=i.map(function(r){return Array.from([0,1,2,3,4]).includes(+r)&&(r=+r),r===""+r&&(r=hI[r]+1),t[r]});i.length<e;)i.push("0.0");const n=i.join(", ");return`vec${e} swizzle(vec4 xyzw) {
  return vec${e}(${n});
}`.replace(/vec1/g,"float")},lC=function(i){const e=["0.0","0.0","0.0","0.0"];i=dI(i),i=i.map(function(n){return n===+n?EB[n-1]:n});for(let n=0;n<i.length;n++){const r=i[n],s=EB[n],a=hI[r];e[a]=`xyzw.${s}`}return`vec4 invertSwizzle(vec4 xyzw) {
  return vec4(${e.join(", ")});
}`},fh=function(i){let e=[].slice.call(arguments);return e.length>1?(e=e.map((t,n)=>["inout",t,String.fromCharCode(97+n)].join(" ")),e=e.join(", "),`void identity(${e}) { }`):`${i} identity(${i} x) {
  return x;
}`},kM=(i,e)=>`${i} constant() {
return ${e};
}`;function mze(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let a=i;r?a<s:a>s;r?a++:a--)n.push(a);return n}const gze=Object.freeze(Object.defineProperty({__proto__:null,binaryOperator:$l,constant:kM,extendVec:L0,identity:fh,injectVec4:fI,invertSwizzleVec4:lC,mapByte2FloatOffset:LF,sample2DArray:OF,swizzleVec4:hl,toType:Ug,truncateVec:qf},Symbol.toStringTag,{value:"Module"}));class cC extends Rs{static initClass(){this.traits=["node","source","index"]}made(){return this.trigger({type:"source.rebuild"})}indexShader(e){return e.pipe(fh("vec4"))}sourceShader(e){return e.pipe(fh("vec4"))}getDimensions(){return{items:1,width:1,height:1,depth:1}}getActiveDimensions(){return this.getDimensions()}getIndexDimensions(){return this.getActiveDimensions()}getFutureDimensions(){return this.getActiveDimensions()}}cC.initClass();let NF=class extends cC{static initClass(){this.traits=["node","data","source","index","entity","active"]}init(){return this.dataEmitter=null,this.dataSizes=null}emitter(e,t){let n;const{data:r,bind:s,expr:a}=this.props;if(r!=null){const o=this.dataSizes,l=D0(r);if(!o||o.length!==l.length){const c=Mx(r);this.dataEmitter=this.callback(kF(c,t,e)),this.dataSizes=l}n=this.dataEmitter}else a!=null?n=this.callback(a):n=this.callback(this.passthrough);return n}callback(e){return e??function(){}}update(){}make(){return this._helpers.active.make(),this.first=!0,this._listen("root","root.update",()=>((this.isActive||this.first)&&this.update(),this.first=!1))}unmake(){return this._helpers.active.unmake(),this.dataEmitter=null,this.dataSizes=null}};NF.initClass();let __=class extends NF{static initClass(){this.traits=["node","buffer","active","data","source","index","texture"]}init(){this.bufferSlack=0,this.bufferFrames=0,this.bufferTime=0,this.bufferDelta=0,this.bufferClock=0,this.bufferStep=0,super.init()}make(){super.make(),this.clockParent=this._inherit("clock"),this.latchParent=this._inherit("latch")}unmake(){return super.unmake()}rawBuffer(){return this.buffer}emitter(){const{channels:e,items:t}=this.props;return super.emitter(e,t)}change(e,t,n){if(e["buffer.fps"]||n){const{fps:r}=this.props;return this.bufferSlack=r?.5/r:0}}syncBuffer(e){let t,n;if(!this.buffer)return;const{live:r,fps:s,hurry:a,limit:o,realtime:l,observe:c}=this.props,u=this.buffer.getFilled();if(u&&!r||this.latchParent&&!this.latchParent.isDirty)return;const h=this.clockParent.getTime();if(s!=null){const d=this.bufferSlack,f=h.step/h.delta;t=l?h.delta:h.step;const m=1/s;n=l&&c?f*m:m,Math.abs(h.time-this.bufferTime)>h.step*o&&(this.bufferTime=h.time,this.bufferClock=h.clock),this.bufferSlack=Math.min(o/s,d+t),this.bufferDelta=t,this.bufferStep=n;let A=Math.min(a,Math.floor(d*s));u||(A=Math.max(1,A));let _=!1;const v=()=>_=!0;return(()=>{const w=[];for(let x=0,C=A,S=0<=C;(S?x<C:x>C)&&(this.bufferTime+=t,this.bufferClock+=n,!_);S?x++:x--)e(v,this.bufferFrames++,x,A),w.push(this.bufferSlack-=m);return w})()}else return this.bufferTime=h.time,this.bufferDelta=h.delta,this.bufferClock=h.clock,this.bufferStep=h.step,e(function(){},this.bufferFrames++,0,1)}alignShader(e,t){const{minFilter:n,magFilter:r,aligned:s}=this.props,a=e.items>1&&e.width>1||e.height>1&&e.depth>1;return s||!a?void 0:(n===this.node.attributes["texture.minFilter"].enum.nearest&&r===this.node.attributes["texture.magFilter"].enum.nearest||console.warn(`${this.node.toString()} - Cannot use linear min/magFilter with 3D/4D sampling`),t.pipe("map.xyzw.align"))}};__.initClass();class pI extends __{static initClass(){this.traits=["node","buffer","active","data","source","index","array","texture","raw"]}init(){return this.buffer=this.spec=null,this.space={width:0,history:0},this.used={width:0},this.storage="arrayBuffer",this.passthrough=(e,t)=>e(t,0,0,0),super.init()}sourceShader(e){const t=this.getDimensions();return this.alignShader(t,e),this.buffer.shader(e)}getDimensions(){return{items:this.items,width:this.space.width,height:this.space.history,depth:1}}getActiveDimensions(){return{items:this.items,width:this.used.width,height:this.buffer.getFilled(),depth:1}}getFutureDimensions(){return{items:this.items,width:this.used.width,height:this.space.history,depth:1}}getRawDimensions(){return{items:this.items,width:this.space.width,height:1,depth:1}}make(){super.make();const e=this.minFilter!=null?this.minFilter:this.props.minFilter,t=this.magFilter!=null?this.magFilter:this.props.magFilter,n=this.type!=null?this.type:this.props.type,{width:r}=this.props,{history:s}=this.props,a=this.props.bufferWidth,{channels:o}=this.props,{items:l}=this.props;let c=this.spec={channels:o,items:l,width:r};this.items=c.items,this.channels=c.channels;const{data:u}=this.props;c=Qf(u,c);const{space:h}=this;return h.width=Math.max(a,c.width||1),h.history=s,this.buffer=this._renderables.make(this.storage,{width:h.width,history:h.history,channels:o,items:l,minFilter:e,magFilter:t,type:n})}unmake(){if(super.unmake(),this.buffer)return this.buffer.dispose(),this.buffer=this.spec=null}change(e,t,n){if(t.texture||e["history.history"]||e["buffer.channels"]||e["buffer.items"]||e["array.bufferWidth"])return this.rebuild();if(this.buffer){if(e["array.width"]){const{width:r,bufferWidth:s}=this.props;if(this.spec.width=r,r>s)return this.rebuild()}if(e["data.map"]||e["data.data"]||e["data.resolve"]||e["data.expr"]||n)return this.buffer.setCallback(this.emitter())}}callback(e){return e.length<=2?e:(t,n)=>e(t,n,this.bufferClock,this.bufferStep)}update(){if(!this.buffer)return;const{data:e}=this.props;let{width:t}=this.props;const{space:n,used:r}=this,s=r.width,a=this.buffer.getFilled();if(this.syncBuffer(o=>{if(e!=null){const l=Qf(e,this.spec);return l.width>n.width?(o(),this.rebuild()):(r.width=l.width,this.buffer.setActive(r.width),typeof this.buffer.callback.rebind=="function"&&this.buffer.callback.rebind(e),this.buffer.update())}else return t=this.spec.width||1,this.buffer.setActive(t),t=this.buffer.update(),r.width=t}),r.width!==s||a!==this.buffer.getFilled())return this.trigger({type:"source.resize"})}}pI.initClass();class FF extends pI{static initClass(){this.traits=["node","buffer","active","data","source","index","texture","array","span","interval","sampler","raw"]}updateSpan(){let e;const t=this.props.axis;let{width:n}=this.props;const{centered:r}=this.props,s=this.props.padding,a=this._helpers.span.get("",t);n+=s*2,this.a=a.x;const o=a.y-a.x;return r?(e=1/Math.max(1,n),this.a+=o*e/2):e=1/Math.max(1,n-1),this.b=o*e,this.a+=s*this.b}callback(e){return this.updateSpan(),this.last===e?this._callback:(this.last=e,e.length<=3?this._callback=(t,n)=>{const r=this.a+this.b*n;return e(t,r,n)}:this._callback=(t,n)=>{const r=this.a+this.b*n;return e(t,r,n,this.bufferClock,this.bufferStep)})}make(){return super.make(),this._helpers.span.make(),this._listen(this,"span.range",this.updateSpan)}unmake(){return super.unmake(),this._helpers.span.unmake()}change(e,t,n){super.change(e,t,n),t.span&&this.updateSpan()}}FF.initClass();function vze(){this.__data__=[],this.size=0}var Aze=vze;function _ze(i,e){return i===e||i!==i&&e!==e}var mI=_ze,bze=mI;function yze(i,e){for(var t=i.length;t--;)if(bze(i[t][0],e))return t;return-1}var uC=yze,wze=uC,xze=Array.prototype,Cze=xze.splice;function Eze(i){var e=this.__data__,t=wze(e,i);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():Cze.call(e,t,1),--this.size,!0}var Sze=Eze,Mze=uC;function Tze(i){var e=this.__data__,t=Mze(e,i);return t<0?void 0:e[t][1]}var Ize=Tze,Pze=uC;function kze(i){return Pze(this.__data__,i)>-1}var Bze=kze,Rze=uC;function Dze(i,e){var t=this.__data__,n=Rze(t,i);return n<0?(++this.size,t.push([i,e])):t[n][1]=e,this}var Lze=Dze,Oze=Aze,Nze=Sze,Fze=Ize,zze=Bze,Uze=Lze;function hv(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}hv.prototype.clear=Oze;hv.prototype.delete=Nze;hv.prototype.get=Fze;hv.prototype.has=zze;hv.prototype.set=Uze;var hC=hv,Vze=hC;function Hze(){this.__data__=new Vze,this.size=0}var Gze=Hze;function Qze(i){var e=this.__data__,t=e.delete(i);return this.size=e.size,t}var qze=Qze;function jze(i){return this.__data__.get(i)}var Wze=jze;function $ze(i){return this.__data__.has(i)}var Xze=$ze,Yze=typeof dt=="object"&&dt&&dt.Object===Object&&dt,zF=Yze,Kze=zF,Jze=typeof self=="object"&&self&&self.Object===Object&&self,Zze=Kze||Jze||Function("return this")(),bh=Zze,eUe=bh,tUe=eUe.Symbol,dC=tUe,SB=dC,UF=Object.prototype,nUe=UF.hasOwnProperty,iUe=UF.toString,_A=SB?SB.toStringTag:void 0;function rUe(i){var e=nUe.call(i,_A),t=i[_A];try{i[_A]=void 0;var n=!0}catch{}var r=iUe.call(i);return n&&(e?i[_A]=t:delete i[_A]),r}var sUe=rUe,aUe=Object.prototype,oUe=aUe.toString;function lUe(i){return oUe.call(i)}var cUe=lUe,MB=dC,uUe=sUe,hUe=cUe,dUe="[object Null]",fUe="[object Undefined]",TB=MB?MB.toStringTag:void 0;function pUe(i){return i==null?i===void 0?fUe:dUe:TB&&TB in Object(i)?uUe(i):hUe(i)}var fC=pUe;function mUe(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var b_=mUe,gUe=fC,vUe=b_,AUe="[object AsyncFunction]",_Ue="[object Function]",bUe="[object GeneratorFunction]",yUe="[object Proxy]";function wUe(i){if(!vUe(i))return!1;var e=gUe(i);return e==_Ue||e==bUe||e==AUe||e==yUe}var VF=wUe,xUe=bh,CUe=xUe["__core-js_shared__"],EUe=CUe,x4=EUe,IB=function(){var i=/[^.]+$/.exec(x4&&x4.keys&&x4.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function SUe(i){return!!IB&&IB in i}var MUe=SUe,TUe=Function.prototype,IUe=TUe.toString;function PUe(i){if(i!=null){try{return IUe.call(i)}catch{}try{return i+""}catch{}}return""}var HF=PUe,kUe=VF,BUe=MUe,RUe=b_,DUe=HF,LUe=/[\\^$.*+?()[\]{}|]/g,OUe=/^\[object .+?Constructor\]$/,NUe=Function.prototype,FUe=Object.prototype,zUe=NUe.toString,UUe=FUe.hasOwnProperty,VUe=RegExp("^"+zUe.call(UUe).replace(LUe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function HUe(i){if(!RUe(i)||BUe(i))return!1;var e=kUe(i)?VUe:OUe;return e.test(DUe(i))}var GUe=HUe;function QUe(i,e){return i==null?void 0:i[e]}var qUe=QUe,jUe=GUe,WUe=qUe;function $Ue(i,e){var t=WUe(i,e);return jUe(t)?t:void 0}var X0=$Ue,XUe=X0,YUe=bh,KUe=XUe(YUe,"Map"),gI=KUe,JUe=X0,ZUe=JUe(Object,"create"),pC=ZUe,PB=pC;function eVe(){this.__data__=PB?PB(null):{},this.size=0}var tVe=eVe;function nVe(i){var e=this.has(i)&&delete this.__data__[i];return this.size-=e?1:0,e}var iVe=nVe,rVe=pC,sVe="__lodash_hash_undefined__",aVe=Object.prototype,oVe=aVe.hasOwnProperty;function lVe(i){var e=this.__data__;if(rVe){var t=e[i];return t===sVe?void 0:t}return oVe.call(e,i)?e[i]:void 0}var cVe=lVe,uVe=pC,hVe=Object.prototype,dVe=hVe.hasOwnProperty;function fVe(i){var e=this.__data__;return uVe?e[i]!==void 0:dVe.call(e,i)}var pVe=fVe,mVe=pC,gVe="__lodash_hash_undefined__";function vVe(i,e){var t=this.__data__;return this.size+=this.has(i)?0:1,t[i]=mVe&&e===void 0?gVe:e,this}var AVe=vVe,_Ve=tVe,bVe=iVe,yVe=cVe,wVe=pVe,xVe=AVe;function dv(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}dv.prototype.clear=_Ve;dv.prototype.delete=bVe;dv.prototype.get=yVe;dv.prototype.has=wVe;dv.prototype.set=xVe;var CVe=dv,kB=CVe,EVe=hC,SVe=gI;function MVe(){this.size=0,this.__data__={hash:new kB,map:new(SVe||EVe),string:new kB}}var TVe=MVe;function IVe(i){var e=typeof i;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?i!=="__proto__":i===null}var PVe=IVe,kVe=PVe;function BVe(i,e){var t=i.__data__;return kVe(e)?t[typeof e=="string"?"string":"hash"]:t.map}var mC=BVe,RVe=mC;function DVe(i){var e=RVe(this,i).delete(i);return this.size-=e?1:0,e}var LVe=DVe,OVe=mC;function NVe(i){return OVe(this,i).get(i)}var FVe=NVe,zVe=mC;function UVe(i){return zVe(this,i).has(i)}var VVe=UVe,HVe=mC;function GVe(i,e){var t=HVe(this,i),n=t.size;return t.set(i,e),this.size+=t.size==n?0:1,this}var QVe=GVe,qVe=TVe,jVe=LVe,WVe=FVe,$Ve=VVe,XVe=QVe;function fv(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}fv.prototype.clear=qVe;fv.prototype.delete=jVe;fv.prototype.get=WVe;fv.prototype.has=$Ve;fv.prototype.set=XVe;var GF=fv,YVe=hC,KVe=gI,JVe=GF,ZVe=200;function eHe(i,e){var t=this.__data__;if(t instanceof YVe){var n=t.__data__;if(!KVe||n.length<ZVe-1)return n.push([i,e]),this.size=++t.size,this;t=this.__data__=new JVe(n)}return t.set(i,e),this.size=t.size,this}var tHe=eHe,nHe=hC,iHe=Gze,rHe=qze,sHe=Wze,aHe=Xze,oHe=tHe;function pv(i){var e=this.__data__=new nHe(i);this.size=e.size}pv.prototype.clear=iHe;pv.prototype.delete=rHe;pv.prototype.get=sHe;pv.prototype.has=aHe;pv.prototype.set=oHe;var QF=pv;function lHe(i,e){for(var t=-1,n=i==null?0:i.length;++t<n&&e(i[t],t,i)!==!1;);return i}var cHe=lHe,uHe=X0,hHe=function(){try{var i=uHe(Object,"defineProperty");return i({},"",{}),i}catch{}}(),dHe=hHe,BB=dHe;function fHe(i,e,t){e=="__proto__"&&BB?BB(i,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):i[e]=t}var qF=fHe,pHe=qF,mHe=mI,gHe=Object.prototype,vHe=gHe.hasOwnProperty;function AHe(i,e,t){var n=i[e];(!(vHe.call(i,e)&&mHe(n,t))||t===void 0&&!(e in i))&&pHe(i,e,t)}var jF=AHe,_He=jF,bHe=qF;function yHe(i,e,t,n){var r=!t;t||(t={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=n?n(t[o],i[o],o,t,i):void 0;l===void 0&&(l=i[o]),r?bHe(t,o,l):_He(t,o,l)}return t}var gC=yHe;function wHe(i,e){for(var t=-1,n=Array(i);++t<i;)n[t]=e(t);return n}var xHe=wHe;function CHe(i){return i!=null&&typeof i=="object"}var mv=CHe,EHe=fC,SHe=mv,MHe="[object Arguments]";function THe(i){return SHe(i)&&EHe(i)==MHe}var IHe=THe,RB=IHe,PHe=mv,WF=Object.prototype,kHe=WF.hasOwnProperty,BHe=WF.propertyIsEnumerable,RHe=RB(function(){return arguments}())?RB:function(i){return PHe(i)&&kHe.call(i,"callee")&&!BHe.call(i,"callee")},DHe=RHe,LHe=Array.isArray,vC=LHe,Tx={exports:{}};function OHe(){return!1}var NHe=OHe;Tx.exports;(function(i,e){var t=bh,n=NHe,r=e&&!e.nodeType&&e,s=r&&!0&&i&&!i.nodeType&&i,a=s&&s.exports===r,o=a?t.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||n;i.exports=c})(Tx,Tx.exports);var vI=Tx.exports,FHe=9007199254740991,zHe=/^(?:0|[1-9]\d*)$/;function UHe(i,e){var t=typeof i;return e=e??FHe,!!e&&(t=="number"||t!="symbol"&&zHe.test(i))&&i>-1&&i%1==0&&i<e}var VHe=UHe,HHe=9007199254740991;function GHe(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=HHe}var $F=GHe,QHe=fC,qHe=$F,jHe=mv,WHe="[object Arguments]",$He="[object Array]",XHe="[object Boolean]",YHe="[object Date]",KHe="[object Error]",JHe="[object Function]",ZHe="[object Map]",eGe="[object Number]",tGe="[object Object]",nGe="[object RegExp]",iGe="[object Set]",rGe="[object String]",sGe="[object WeakMap]",aGe="[object ArrayBuffer]",oGe="[object DataView]",lGe="[object Float32Array]",cGe="[object Float64Array]",uGe="[object Int8Array]",hGe="[object Int16Array]",dGe="[object Int32Array]",fGe="[object Uint8Array]",pGe="[object Uint8ClampedArray]",mGe="[object Uint16Array]",gGe="[object Uint32Array]",qr={};qr[lGe]=qr[cGe]=qr[uGe]=qr[hGe]=qr[dGe]=qr[fGe]=qr[pGe]=qr[mGe]=qr[gGe]=!0;qr[WHe]=qr[$He]=qr[aGe]=qr[XHe]=qr[oGe]=qr[YHe]=qr[KHe]=qr[JHe]=qr[ZHe]=qr[eGe]=qr[tGe]=qr[nGe]=qr[iGe]=qr[rGe]=qr[sGe]=!1;function vGe(i){return jHe(i)&&qHe(i.length)&&!!qr[QHe(i)]}var AGe=vGe;function _Ge(i){return function(e){return i(e)}}var AI=_Ge,Ix={exports:{}};Ix.exports;(function(i,e){var t=zF,n=e&&!e.nodeType&&e,r=n&&!0&&i&&!i.nodeType&&i,s=r&&r.exports===n,a=s&&t.process,o=function(){try{var l=r&&r.require&&r.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();i.exports=o})(Ix,Ix.exports);var _I=Ix.exports,bGe=AGe,yGe=AI,DB=_I,LB=DB&&DB.isTypedArray,wGe=LB?yGe(LB):bGe,XF=wGe,xGe=xHe,CGe=DHe,EGe=vC,SGe=vI,MGe=VHe,TGe=XF,IGe=Object.prototype,PGe=IGe.hasOwnProperty;function kGe(i,e){var t=EGe(i),n=!t&&CGe(i),r=!t&&!n&&SGe(i),s=!t&&!n&&!r&&TGe(i),a=t||n||r||s,o=a?xGe(i.length,String):[],l=o.length;for(var c in i)(e||PGe.call(i,c))&&!(a&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||MGe(c,l)))&&o.push(c);return o}var YF=kGe,BGe=Object.prototype;function RGe(i){var e=i&&i.constructor,t=typeof e=="function"&&e.prototype||BGe;return i===t}var bI=RGe;function DGe(i,e){return function(t){return i(e(t))}}var KF=DGe,LGe=KF,OGe=LGe(Object.keys,Object),NGe=OGe,FGe=bI,zGe=NGe,UGe=Object.prototype,VGe=UGe.hasOwnProperty;function HGe(i){if(!FGe(i))return zGe(i);var e=[];for(var t in Object(i))VGe.call(i,t)&&t!="constructor"&&e.push(t);return e}var GGe=HGe,QGe=VF,qGe=$F;function jGe(i){return i!=null&&qGe(i.length)&&!QGe(i)}var JF=jGe,WGe=YF,$Ge=GGe,XGe=JF;function YGe(i){return XGe(i)?WGe(i):$Ge(i)}var yI=YGe,KGe=gC,JGe=yI;function ZGe(i,e){return i&&KGe(e,JGe(e),i)}var eQe=ZGe;function tQe(i){var e=[];if(i!=null)for(var t in Object(i))e.push(t);return e}var nQe=tQe,iQe=b_,rQe=bI,sQe=nQe,aQe=Object.prototype,oQe=aQe.hasOwnProperty;function lQe(i){if(!iQe(i))return sQe(i);var e=rQe(i),t=[];for(var n in i)n=="constructor"&&(e||!oQe.call(i,n))||t.push(n);return t}var cQe=lQe,uQe=YF,hQe=cQe,dQe=JF;function fQe(i){return dQe(i)?uQe(i,!0):hQe(i)}var wI=fQe,pQe=gC,mQe=wI;function gQe(i,e){return i&&pQe(e,mQe(e),i)}var vQe=gQe,Px={exports:{}};Px.exports;(function(i,e){var t=bh,n=e&&!e.nodeType&&e,r=n&&!0&&i&&!i.nodeType&&i,s=r&&r.exports===n,a=s?t.Buffer:void 0,o=a?a.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var h=c.length,d=o?o(h):new c.constructor(h);return c.copy(d),d}i.exports=l})(Px,Px.exports);var AQe=Px.exports;function _Qe(i,e){var t=-1,n=i.length;for(e||(e=Array(n));++t<n;)e[t]=i[t];return e}var bQe=_Qe;function yQe(i,e){for(var t=-1,n=i==null?0:i.length,r=0,s=[];++t<n;){var a=i[t];e(a,t,i)&&(s[r++]=a)}return s}var wQe=yQe;function xQe(){return[]}var ZF=xQe,CQe=wQe,EQe=ZF,SQe=Object.prototype,MQe=SQe.propertyIsEnumerable,OB=Object.getOwnPropertySymbols,TQe=OB?function(i){return i==null?[]:(i=Object(i),CQe(OB(i),function(e){return MQe.call(i,e)}))}:EQe,xI=TQe,IQe=gC,PQe=xI;function kQe(i,e){return IQe(i,PQe(i),e)}var BQe=kQe;function RQe(i,e){for(var t=-1,n=e.length,r=i.length;++t<n;)i[r+t]=e[t];return i}var ez=RQe,DQe=KF,LQe=DQe(Object.getPrototypeOf,Object),tz=LQe,OQe=ez,NQe=tz,FQe=xI,zQe=ZF,UQe=Object.getOwnPropertySymbols,VQe=UQe?function(i){for(var e=[];i;)OQe(e,FQe(i)),i=NQe(i);return e}:zQe,nz=VQe,HQe=gC,GQe=nz;function QQe(i,e){return HQe(i,GQe(i),e)}var qQe=QQe,jQe=ez,WQe=vC;function $Qe(i,e,t){var n=e(i);return WQe(i)?n:jQe(n,t(i))}var iz=$Qe,XQe=iz,YQe=xI,KQe=yI;function JQe(i){return XQe(i,KQe,YQe)}var rz=JQe,ZQe=iz,eqe=nz,tqe=wI;function nqe(i){return ZQe(i,tqe,eqe)}var iqe=nqe,rqe=X0,sqe=bh,aqe=rqe(sqe,"DataView"),oqe=aqe,lqe=X0,cqe=bh,uqe=lqe(cqe,"Promise"),hqe=uqe,dqe=X0,fqe=bh,pqe=dqe(fqe,"Set"),mqe=pqe,gqe=X0,vqe=bh,Aqe=gqe(vqe,"WeakMap"),_qe=Aqe,BM=oqe,RM=gI,DM=hqe,LM=mqe,OM=_qe,sz=fC,gv=HF,NB="[object Map]",bqe="[object Object]",FB="[object Promise]",zB="[object Set]",UB="[object WeakMap]",VB="[object DataView]",yqe=gv(BM),wqe=gv(RM),xqe=gv(DM),Cqe=gv(LM),Eqe=gv(OM),e0=sz;(BM&&e0(new BM(new ArrayBuffer(1)))!=VB||RM&&e0(new RM)!=NB||DM&&e0(DM.resolve())!=FB||LM&&e0(new LM)!=zB||OM&&e0(new OM)!=UB)&&(e0=function(i){var e=sz(i),t=e==bqe?i.constructor:void 0,n=t?gv(t):"";if(n)switch(n){case yqe:return VB;case wqe:return NB;case xqe:return FB;case Cqe:return zB;case Eqe:return UB}return e});var AC=e0,Sqe=Object.prototype,Mqe=Sqe.hasOwnProperty;function Tqe(i){var e=i.length,t=new i.constructor(e);return e&&typeof i[0]=="string"&&Mqe.call(i,"index")&&(t.index=i.index,t.input=i.input),t}var Iqe=Tqe,Pqe=bh,kqe=Pqe.Uint8Array,az=kqe,HB=az;function Bqe(i){var e=new i.constructor(i.byteLength);return new HB(e).set(new HB(i)),e}var CI=Bqe,Rqe=CI;function Dqe(i,e){var t=e?Rqe(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.byteLength)}var Lqe=Dqe,Oqe=/\w*$/;function Nqe(i){var e=new i.constructor(i.source,Oqe.exec(i));return e.lastIndex=i.lastIndex,e}var Fqe=Nqe,GB=dC,QB=GB?GB.prototype:void 0,qB=QB?QB.valueOf:void 0;function zqe(i){return qB?Object(qB.call(i)):{}}var Uqe=zqe,Vqe=CI;function Hqe(i,e){var t=e?Vqe(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.length)}var Gqe=Hqe,Qqe=CI,qqe=Lqe,jqe=Fqe,Wqe=Uqe,$qe=Gqe,Xqe="[object Boolean]",Yqe="[object Date]",Kqe="[object Map]",Jqe="[object Number]",Zqe="[object RegExp]",eje="[object Set]",tje="[object String]",nje="[object Symbol]",ije="[object ArrayBuffer]",rje="[object DataView]",sje="[object Float32Array]",aje="[object Float64Array]",oje="[object Int8Array]",lje="[object Int16Array]",cje="[object Int32Array]",uje="[object Uint8Array]",hje="[object Uint8ClampedArray]",dje="[object Uint16Array]",fje="[object Uint32Array]";function pje(i,e,t){var n=i.constructor;switch(e){case ije:return Qqe(i);case Xqe:case Yqe:return new n(+i);case rje:return qqe(i,t);case sje:case aje:case oje:case lje:case cje:case uje:case hje:case dje:case fje:return $qe(i,t);case Kqe:return new n;case Jqe:case tje:return new n(i);case Zqe:return jqe(i);case eje:return new n;case nje:return Wqe(i)}}var mje=pje,gje=b_,jB=Object.create,vje=function(){function i(){}return function(e){if(!gje(e))return{};if(jB)return jB(e);i.prototype=e;var t=new i;return i.prototype=void 0,t}}(),Aje=vje,_je=Aje,bje=tz,yje=bI;function wje(i){return typeof i.constructor=="function"&&!yje(i)?_je(bje(i)):{}}var xje=wje,Cje=AC,Eje=mv,Sje="[object Map]";function Mje(i){return Eje(i)&&Cje(i)==Sje}var Tje=Mje,Ije=Tje,Pje=AI,WB=_I,$B=WB&&WB.isMap,kje=$B?Pje($B):Ije,Bje=kje,Rje=AC,Dje=mv,Lje="[object Set]";function Oje(i){return Dje(i)&&Rje(i)==Lje}var Nje=Oje,Fje=Nje,zje=AI,XB=_I,YB=XB&&XB.isSet,Uje=YB?zje(YB):Fje,Vje=Uje,Hje=QF,Gje=cHe,Qje=jF,qje=eQe,jje=vQe,Wje=AQe,$je=bQe,Xje=BQe,Yje=qQe,Kje=rz,Jje=iqe,Zje=AC,eWe=Iqe,tWe=mje,nWe=xje,iWe=vC,rWe=vI,sWe=Bje,aWe=b_,oWe=Vje,lWe=yI,cWe=wI,uWe=1,hWe=2,dWe=4,oz="[object Arguments]",fWe="[object Array]",pWe="[object Boolean]",mWe="[object Date]",gWe="[object Error]",lz="[object Function]",vWe="[object GeneratorFunction]",AWe="[object Map]",_We="[object Number]",cz="[object Object]",bWe="[object RegExp]",yWe="[object Set]",wWe="[object String]",xWe="[object Symbol]",CWe="[object WeakMap]",EWe="[object ArrayBuffer]",SWe="[object DataView]",MWe="[object Float32Array]",TWe="[object Float64Array]",IWe="[object Int8Array]",PWe="[object Int16Array]",kWe="[object Int32Array]",BWe="[object Uint8Array]",RWe="[object Uint8ClampedArray]",DWe="[object Uint16Array]",LWe="[object Uint32Array]",Or={};Or[oz]=Or[fWe]=Or[EWe]=Or[SWe]=Or[pWe]=Or[mWe]=Or[MWe]=Or[TWe]=Or[IWe]=Or[PWe]=Or[kWe]=Or[AWe]=Or[_We]=Or[cz]=Or[bWe]=Or[yWe]=Or[wWe]=Or[xWe]=Or[BWe]=Or[RWe]=Or[DWe]=Or[LWe]=!0;Or[gWe]=Or[lz]=Or[CWe]=!1;function Kw(i,e,t,n,r,s){var a,o=e&uWe,l=e&hWe,c=e&dWe;if(t&&(a=r?t(i,n,r,s):t(i)),a!==void 0)return a;if(!aWe(i))return i;var u=iWe(i);if(u){if(a=eWe(i),!o)return $je(i,a)}else{var h=Zje(i),d=h==lz||h==vWe;if(rWe(i))return Wje(i,o);if(h==cz||h==oz||d&&!r){if(a=l||d?{}:nWe(i),!o)return l?Yje(i,jje(a,i)):Xje(i,qje(a,i))}else{if(!Or[h])return r?i:{};a=tWe(i,h,o)}}s||(s=new Hje);var f=s.get(i);if(f)return f;s.set(i,a),oWe(i)?i.forEach(function(_){a.add(Kw(_,e,t,_,i,s))}):sWe(i)&&i.forEach(function(_,v){a.set(v,Kw(_,e,t,v,i,s))});var m=c?l?Jje:Kje:l?cWe:lWe,A=u?void 0:m(i);return Gje(A||i,function(_,v){A&&(v=_,_=i[v]),Qje(a,v,Kw(_,e,t,v,i,s))}),a}var OWe=Kw,NWe=OWe,FWe=1,zWe=4;function UWe(i){return NWe(i,FWe|zWe)}var VWe=UWe;const HWe=U0(VWe);var GWe="__lodash_hash_undefined__";function QWe(i){return this.__data__.set(i,GWe),this}var qWe=QWe;function jWe(i){return this.__data__.has(i)}var WWe=jWe,$We=GF,XWe=qWe,YWe=WWe;function kx(i){var e=-1,t=i==null?0:i.length;for(this.__data__=new $We;++e<t;)this.add(i[e])}kx.prototype.add=kx.prototype.push=XWe;kx.prototype.has=YWe;var KWe=kx;function JWe(i,e){for(var t=-1,n=i==null?0:i.length;++t<n;)if(e(i[t],t,i))return!0;return!1}var ZWe=JWe;function e$e(i,e){return i.has(e)}var t$e=e$e,n$e=KWe,i$e=ZWe,r$e=t$e,s$e=1,a$e=2;function o$e(i,e,t,n,r,s){var a=t&s$e,o=i.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(i),u=s.get(e);if(c&&u)return c==e&&u==i;var h=-1,d=!0,f=t&a$e?new n$e:void 0;for(s.set(i,e),s.set(e,i);++h<o;){var m=i[h],A=e[h];if(n)var _=a?n(A,m,h,e,i,s):n(m,A,h,i,e,s);if(_!==void 0){if(_)continue;d=!1;break}if(f){if(!i$e(e,function(v,w){if(!r$e(f,w)&&(m===v||r(m,v,t,n,s)))return f.push(w)})){d=!1;break}}else if(!(m===A||r(m,A,t,n,s))){d=!1;break}}return s.delete(i),s.delete(e),d}var uz=o$e;function l$e(i){var e=-1,t=Array(i.size);return i.forEach(function(n,r){t[++e]=[r,n]}),t}var c$e=l$e;function u$e(i){var e=-1,t=Array(i.size);return i.forEach(function(n){t[++e]=n}),t}var h$e=u$e,KB=dC,JB=az,d$e=mI,f$e=uz,p$e=c$e,m$e=h$e,g$e=1,v$e=2,A$e="[object Boolean]",_$e="[object Date]",b$e="[object Error]",y$e="[object Map]",w$e="[object Number]",x$e="[object RegExp]",C$e="[object Set]",E$e="[object String]",S$e="[object Symbol]",M$e="[object ArrayBuffer]",T$e="[object DataView]",ZB=KB?KB.prototype:void 0,C4=ZB?ZB.valueOf:void 0;function I$e(i,e,t,n,r,s,a){switch(t){case T$e:if(i.byteLength!=e.byteLength||i.byteOffset!=e.byteOffset)return!1;i=i.buffer,e=e.buffer;case M$e:return!(i.byteLength!=e.byteLength||!s(new JB(i),new JB(e)));case A$e:case _$e:case w$e:return d$e(+i,+e);case b$e:return i.name==e.name&&i.message==e.message;case x$e:case E$e:return i==e+"";case y$e:var o=p$e;case C$e:var l=n&g$e;if(o||(o=m$e),i.size!=e.size&&!l)return!1;var c=a.get(i);if(c)return c==e;n|=v$e,a.set(i,e);var u=f$e(o(i),o(e),n,r,s,a);return a.delete(i),u;case S$e:if(C4)return C4.call(i)==C4.call(e)}return!1}var P$e=I$e,eR=rz,k$e=1,B$e=Object.prototype,R$e=B$e.hasOwnProperty;function D$e(i,e,t,n,r,s){var a=t&k$e,o=eR(i),l=o.length,c=eR(e),u=c.length;if(l!=u&&!a)return!1;for(var h=l;h--;){var d=o[h];if(!(a?d in e:R$e.call(e,d)))return!1}var f=s.get(i),m=s.get(e);if(f&&m)return f==e&&m==i;var A=!0;s.set(i,e),s.set(e,i);for(var _=a;++h<l;){d=o[h];var v=i[d],w=e[d];if(n)var x=a?n(w,v,d,e,i,s):n(v,w,d,i,e,s);if(!(x===void 0?v===w||r(v,w,t,n,s):x)){A=!1;break}_||(_=d=="constructor")}if(A&&!_){var C=i.constructor,S=e.constructor;C!=S&&"constructor"in i&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof S=="function"&&S instanceof S)&&(A=!1)}return s.delete(i),s.delete(e),A}var L$e=D$e,E4=QF,O$e=uz,N$e=P$e,F$e=L$e,tR=AC,nR=vC,iR=vI,z$e=XF,U$e=1,rR="[object Arguments]",sR="[object Array]",Yy="[object Object]",V$e=Object.prototype,aR=V$e.hasOwnProperty;function H$e(i,e,t,n,r,s){var a=nR(i),o=nR(e),l=a?sR:tR(i),c=o?sR:tR(e);l=l==rR?Yy:l,c=c==rR?Yy:c;var u=l==Yy,h=c==Yy,d=l==c;if(d&&iR(i)){if(!iR(e))return!1;a=!0,u=!1}if(d&&!u)return s||(s=new E4),a||z$e(i)?O$e(i,e,t,n,r,s):N$e(i,e,l,t,n,r,s);if(!(t&U$e)){var f=u&&aR.call(i,"__wrapped__"),m=h&&aR.call(e,"__wrapped__");if(f||m){var A=f?i.value():i,_=m?e.value():e;return s||(s=new E4),r(A,_,t,n,s)}}return d?(s||(s=new E4),F$e(i,e,t,n,r,s)):!1}var G$e=H$e,Q$e=G$e,oR=mv;function hz(i,e,t,n,r){return i===e?!0:i==null||e==null||!oR(i)&&!oR(e)?i!==i&&e!==e:Q$e(i,e,t,n,hz,r)}var q$e=hz,j$e=q$e;function W$e(i,e){return j$e(i,e)}var $$e=W$e;const X$e=U0($$e);class dz extends yl{static initClass(){this.traits=["node","entity","active","latch"]}init(){this.data=void 0,this.isDirty=!0}make(){this._helpers.active.make(),this._listen("root","root.update",function(){this.isActive&&this.update()})}unmake(){this._helpers.active.unmake(),this.data=void 0}swap(){const{deep:e,data:t}=this.props;(e?!X$e(t,this.data):t!=this.data)&&(this.data=e?HWe(t):t)}update(){this.isDirty=this.swap()}}dz.initClass();class EI extends __{static initClass(){this.traits=["node","buffer","active","data","source","index","texture","matrix","raw"]}init(){return this.buffer=this.spec=null,this.space={width:0,height:0,history:0},this.used={width:0,height:0},this.storage="matrixBuffer",this.passthrough=(e,t,n)=>e(t,n,0,0),super.init()}sourceShader(e){const t=this.getDimensions();return this.alignShader(t,e),this.buffer.shader(e)}getDimensions(){return{items:this.items,width:this.space.width,height:this.space.height,depth:this.space.history}}getActiveDimensions(){return{items:this.items,width:this.used.width,height:this.used.height,depth:this.buffer.getFilled()}}getFutureDimensions(){return{items:this.items,width:this.used.width,height:this.used.height,depth:this.space.history}}getRawDimensions(){return{items:this.items,width:this.space.width,height:this.space.height,depth:1}}make(){super.make();const e=this.minFilter!=null?this.minFilter:this.props.minFilter,t=this.magFilter!=null?this.magFilter:this.props.magFilter,n=this.type!=null?this.type:this.props.type,{width:r}=this.props,{height:s}=this.props,{history:a}=this.props,o=this.props.bufferWidth,l=this.props.bufferHeight,{channels:c}=this.props,{items:u}=this.props;let h=this.spec={channels:c,items:u,width:r,height:s};this.items=h.items,this.channels=h.channels;const{data:d}=this.props;h=Qf(d,h);const{space:f}=this;return f.width=Math.max(o,h.width||1),f.height=Math.max(l,h.height||1),f.history=a,this.buffer=this._renderables.make(this.storage,{width:f.width,height:f.height,history:f.history,channels:c,items:u,minFilter:e,magFilter:t,type:n})}unmake(){if(super.unmake(),this.buffer)return this.buffer.dispose(),this.buffer=this.spec=null}change(e,t,n){if(t.texture||e["matrix.history"]||e["buffer.channels"]||e["buffer.items"]||e["matrix.bufferWidth"]||e["matrix.bufferHeight"])return this.rebuild();if(this.buffer){if(e["matrix.width"]){const{width:r,bufferWidth:s}=this.props;if(this.spec.width=r,r>s)return this.rebuild()}if(e["matrix.height"]){const{height:r,bufferHeight:s}=this.props;if(this.spec.height=r,r>s)return this.rebuild()}if(e["data.map"]||e["data.data"]||e["data.resolve"]||e["data.expr"]||n)return this.buffer.setCallback(this.emitter())}}callback(e){return e.length<=3?e:(t,n,r)=>e(t,n,r,this.bufferClock,this.bufferStep)}update(){if(!this.buffer)return;const{data:e}=this.props,{space:t,used:n}=this,r=n.width,s=n.height,a=this.buffer.getFilled();if(this.syncBuffer(o=>{if(e!=null){const l=Qf(e,this.spec);return l.width>t.width||l.height>t.height?(o(),this.rebuild()):(n.width=l.width,n.height=l.height,this.buffer.setActive(n.width,n.height),typeof this.buffer.callback.rebind=="function"&&this.buffer.callback.rebind(e),this.buffer.update())}else{let l;const c=this.spec.width||1,u=this.spec.height||1;this.buffer.setActive(c,u);const h=this.buffer.update();n.width=l=c,n.height=Math.min(u,Math.ceil(h/l)),n.height===1&&(n.width=Math.min(c,h))}}),n.width!==r||n.height!==s||a!==this.buffer.getFilled())return this.trigger({type:"source.resize"})}}EI.initClass();class fz extends EI{static initClass(){this.traits=["node","buffer","active","data","source","index","matrix","texture","raw","span:x","span:y","area","sampler:x","sampler:y"]}updateSpan(){let e,t;const n=this.props.axes;let{width:r}=this.props,{height:s}=this.props;const{centeredX:a}=this.props,{centeredY:o}=this.props,l=this.props.paddingX,c=this.props.paddingY,u=this._helpers.span.get("x.",n[0]),h=this._helpers.span.get("y.",n[1]);this.aX=u.x,this.aY=h.x;const d=u.y-u.x,f=h.y-h.x;return r+=l*2,s+=c*2,a?(e=1/Math.max(1,r),this.aX+=d*e/2):e=1/Math.max(1,r-1),o?(t=1/Math.max(1,s),this.aY+=f*t/2):t=1/Math.max(1,s-1),this.bX=d*e,this.bY=f*t,this.aX+=l*this.bX,this.aY+=c*this.bY}callback(e){return this.updateSpan(),this.last===e?this._callback:(this.last=e,e.length<=5?this._callback=(t,n,r)=>{const s=this.aX+this.bX*n,a=this.aY+this.bY*r;return e(t,s,a,n,r)}:this._callback=(t,n,r)=>{const s=this.aX+this.bX*n,a=this.aY+this.bY*r;return e(t,s,a,n,r,this.bufferClock,this.bufferStep)})}make(){return super.make(),this._helpers.span.make(),this._listen(this,"span.range",this.updateSpan)}unmake(){return super.unmake(),this._helpers.span.unmake()}change(e,t,n){super.change(e,t,n),(t.x||t.y)&&this.updateSpan()}}fz.initClass();class y_ extends __{constructor(...e){super(...e),this.update=this.update.bind(this)}static initClass(){this.traits=["node","buffer","active","data","source","index","texture","voxel","raw"]}init(){this.buffer=this.spec=null,this.space={width:0,height:0,depth:0},this.used={width:0,height:0,depth:0},this.storage="voxelBuffer",this.passthrough=(e,t,n,r)=>e(t,n,r,0),super.init()}sourceShader(e){const t=this.getDimensions();return this.alignShader(t,e),this.buffer.shader(e)}getDimensions(){return{items:this.items,width:this.space.width,height:this.space.height,depth:this.space.depth}}getActiveDimensions(){return{items:this.items,width:this.used.width,height:this.used.height,depth:this.used.depth*this.buffer.getFilled()}}getRawDimensions(){return this.getDimensions()}make(){super.make();const e=this.minFilter!=null?this.minFilter:this.props.minFilter,t=this.magFilter!=null?this.magFilter:this.props.magFilter,n=this.type!=null?this.type:this.props.type,{width:r}=this.props,{height:s}=this.props,{depth:a}=this.props,o=this.props.bufferWidth,l=this.props.bufferHeight,c=this.props.bufferDepth,{channels:u}=this.props,{items:h}=this.props;let d=this.spec={channels:u,items:h,width:r,height:s,depth:a};this.items=d.items,this.channels=d.channels;const{data:f}=this.props;d=Qf(f,d);const{space:m}=this;return m.width=Math.max(o,d.width||1),m.height=Math.max(l,d.height||1),m.depth=Math.max(c,d.depth||1),this.buffer=this._renderables.make(this.storage,{width:m.width,height:m.height,depth:m.depth,channels:u,items:h,minFilter:e,magFilter:t,type:n})}unmake(){if(super.unmake(),this.buffer)return this.buffer.dispose(),this.buffer=this.spec=null}change(e,t,n){if(t.texture||e["buffer.channels"]||e["buffer.items"]||e["voxel.bufferWidth"]||e["voxel.bufferHeight"]||e["voxel.bufferDepth"])return this.rebuild();if(this.buffer){if(e["voxel.width"]){const{width:r,bufferWidth:s}=this.props;if(this.spec.width=r,r>s)return this.rebuild()}if(e["voxel.height"]){const{height:r,bufferHeight:s}=this.props;if(this.spec.height=r,r>s)return this.rebuild()}if(e["voxel.depth"]){const{depth:r,bufferDepth:s}=this.props;if(this.spec.depth=r,r>s)return this.rebuild()}if(e["data.map"]||e["data.data"]||e["data.resolve"]||e["data.expr"]||n)return this.buffer.setCallback(this.emitter())}}callback(e){return e.length<=4?e:(t,n,r,s)=>e(t,n,r,s,this.bufferClock,this.bufferStep)}update(){if(!this.buffer)return;const{data:e}=this.props,{space:t,used:n}=this,r=n.width,s=n.height,a=n.depth,o=this.buffer.getFilled();if(this.syncBuffer(l=>{if(e!=null){const c=Qf(e,this.spec);return c.width>t.width||c.height>t.height||c.depth>t.depth?(l(),this.rebuild()):(n.width=c.width,n.height=c.height,n.depth=c.depth,this.buffer.setActive(n.width,n.height,n.depth),typeof this.buffer.callback.rebind=="function"&&this.buffer.callback.rebind(e),this.buffer.update())}else{let c,u;const h=this.spec.width||1,d=this.spec.height||1,f=this.spec.depth||1;this.buffer.setActive(h,d,f);const m=this.buffer.update();n.width=u=h,n.height=c=d,n.depth=Math.min(f,Math.ceil(m/u/c)),n.depth===1&&(n.height=Math.min(d,Math.ceil(m/u)),n.height===1&&(n.width=Math.min(h,m)))}}),n.width!==r||n.height!==s||n.depth!==a||o!==this.buffer.getFilled())return this.trigger({type:"source.resize"})}}y_.initClass();class pz extends y_{static initClass(){this.traits=["node","buffer","active","data","source","index","texture","voxel","span:x","span:y","span:z","volume","sampler:x","sampler:y","sampler:z","raw"]}updateSpan(){let e,t,n;const r=this.props.axes;let{width:s}=this.props,{height:a}=this.props,{depth:o}=this.props;const{centeredX:l}=this.props,{centeredY:c}=this.props,{centeredZ:u}=this.props,h=this.props.paddingX,d=this.props.paddingY,f=this.props.paddingZ,m=this._helpers.span.get("x.",r[0]),A=this._helpers.span.get("y.",r[1]),_=this._helpers.span.get("z.",r[2]);this.aX=m.x,this.aY=A.x,this.aZ=_.x;const v=m.y-m.x,w=A.y-A.x,x=_.y-_.x;return s+=h*2,a+=d*2,o+=f*2,l?(e=1/Math.max(1,s),this.aX+=v*e/2):e=1/Math.max(1,s-1),c?(t=1/Math.max(1,a),this.aY+=w*t/2):t=1/Math.max(1,a-1),u?(n=1/Math.max(1,o),this.aZ+=x*n/2):n=1/Math.max(1,o-1),this.bX=v*e,this.bY=w*t,this.bZ=x*n,this.aX+=this.bX*h,this.aY+=this.bY*d,this.aZ+=this.bZ*d}callback(e){return this.updateSpan(),this.last===e?this._callback:(this.last=e,e.length<=7?this._callback=(t,n,r,s)=>{const a=this.aX+this.bX*n,o=this.aY+this.bY*r,l=this.aZ+this.bZ*s;return e(t,a,o,l,n,r,s)}:this._callback=(t,n,r,s)=>{const a=this.aX+this.bX*n,o=this.aY+this.bY*r,l=this.aZ+this.bZ*s;return e(t,a,o,l,n,r,s,this.bufferClock,this.bufferStep)})}make(){return super.make(),this._helpers.span.make(),this._listen(this,"span.range",this.updateSpan)}unmake(){return super.unmake(),this._helpers.span.unmake()}change(e,t,n){super.change(e,t,n),(t.x||t.y||t.z)&&this.updateSpan()}}pz.initClass();const SI=function(i,e,t){+e===e&&(e=[e]);const n=Array.from(e).includes(1)?0:t.x,r=Array.from(e).includes(2)?0:t.y,s=Array.from(e).includes(3)?0:t.z,a=Array.from(e).includes(4)?0:t.w;return i.set(n,r,s,a)},MI=function(){const i=new zi;return function(e,t,n){return SI(i,t,n),e.add(i)}}(),w0=function(i,e){const t=e===1?1:0,n=e===2?1:0,r=e===3?1:0,s=e===4?1:0;return i.set(t,n,r,s)},Y$e=function(i,e){const t=e===1?1:0,n=e===2?1:0,r=e===3?1:0,s=e===4?1:0;return i.set(n,r+t,s,0)},Vg=function(){const i=[0,0];return function(e,t,n,r){if(r==null&&(r=0),n>0){const s=e,a=e+t,o=Math.max(Math.abs(s),Math.abs(a)),l=o*r,c=Math.min(s,a),u=Math.max(s,a);e=c+(-o+l-c)*n,t=u+(o+l-u)*n-e}return i[0]=e,i[1]=t,i}}(),K$e=Object.freeze(Object.defineProperty({__proto__:null,addOrigin:MI,recenterAxis:Vg,setDimension:w0,setDimensionNormal:Y$e,setOrigin:SI},Symbol.toStringTag,{value:"Module"}));class mz extends cC{static initClass(){this.traits=["node","source","index","interval","span","scale","raw","origin"]}init(){return this.used=this.space=this.scaleAxis=this.sampler=null}rawBuffer(){return this.buffer}sourceShader(e){return e.pipe(this.sampler)}getDimensions(){return{items:1,width:this.space,height:1,depth:1}}getActiveDimensions(){return{items:1,width:this.used,height:this.buffer.getFilled(),depth:1}}getRawDimensions(){return this.getDimensions()}make(){let e;this.space=e=this._helpers.scale.divide(""),this.buffer=this._renderables.make("dataBuffer",{width:e,channels:1,items:1});const t={scaleAxis:this._attributes.make(this._types.vec4()),scaleOffset:this._attributes.make(this._types.vec4())};this.scaleAxis=t.scaleAxis.value,this.scaleOffset=t.scaleOffset.value;const n=this.sampler=this._shaders.shader();return n.require(this.buffer.shader(this._shaders.shader(),1)),n.pipe("scale.position",t),this._helpers.span.make(),this._listen(this,"span.range",this.updateRanges)}unmake(){return this.scaleAxis=null,this._helpers.span.unmake()}change(e,t,n){if(e["scale.divide"])return this.rebuild();if(t.view||t.interval||t.span||t.scale||t.origin||n)return this.updateRanges()}updateRanges(){const{used:e}=this,{axis:t,origin:n}=this.props,r=this._helpers.span.get("",t),s=r.x,a=r.y,o=this._helpers.scale.generate("",this.buffer,s,a);if(w0(this.scaleAxis,t),SI(this.scaleOffset,t,n),this.used=o.length,this.used!==e)return this.trigger({type:"source.resize"})}}mz.initClass();const Al=function(){const i={};for(const e of Array.from(arguments))for(const t in e){const n=e[t];i[t]=n}return i},J$e=i=>JSON.parse(JSON.serialize(i)),gz=function(i){let e="";const t=a=>a=a.replace(/\\/g,""),n=function(a){return e.length&&s.push(t(e)),e=a??""};i=i.split(/(?=(?:\\.|["' ,]))/g);let r=!1;const s=[];for(const a of Array.from(i)){const o=a[0],l=a.slice(1);switch(o){case'"':case"'":if(r)r===o?(r=!1,n(l)):e+=a;else{if(e!=="")throw new Error(`ParseError: String \`${i}\` does not contain comma-separated quoted tokens.`);r=o,e+=l}break;case" ":case",":r?e+=a:n(l);break;default:e+=a}}return n(),s},Z$e=Object.freeze(Object.defineProperty({__proto__:null,clone:J$e,merge:Al,parseQuoted:gz},Symbol.toStringTag,{value:"Module"}));let vz=class extends Rs{static initClass(){this.traits=["node","object","visible","style","line","axis","span","interval","arrow","position","origin","shade"],this.defaults={end:!0,zBias:-1}}constructor(e,t,n){super(e,t,n),this.axisPosition=this.axisStep=this.resolution=this.line=this.arrows=null}make(){const e={axisPosition:this._attributes.make(this._types.vec4()),axisStep:this._attributes.make(this._types.vec4())};this.axisPosition=e.axisPosition.value,this.axisStep=e.axisStep.value;let t=this._shaders.shader();t.pipe("axis.position",e),t=this._helpers.position.pipeline(t);const n=this._helpers.style.uniforms(),r=this._helpers.line.uniforms(),s=this._helpers.arrow.uniforms(),a=this._inherit("unit").getUnitUniforms(),{detail:o}=this.props,l=o+1;this.resolution=1/o;const{start:c,end:u}=this.props,{stroke:h,join:d}=this.props;let f=this._helpers.object.mask();const m=this._helpers.shade.pipeline()||!1,{crossed:A,axis:_}=this.props;if(!A&&f!=null&&_>1){const w=["x000","y000","z000","w000"][_];f=this._helpers.position.swizzle(f,w)}const v=Al(s,r,n,a);return this.line=this._renderables.make("line",{uniforms:v,samples:l,position:t,clip:c||u,stroke:h,join:d,mask:f,material:m}),this.arrows=[],c&&this.arrows.push(this._renderables.make("arrow",{uniforms:v,flip:!0,samples:l,position:t,mask:f,material:m})),u&&this.arrows.push(this._renderables.make("arrow",{uniforms:v,samples:l,position:t,mask:f,material:m})),this._helpers.visible.make(),this._helpers.object.make(this.arrows.concat([this.line])),this._helpers.span.make(),this._listen(this,"span.range",this.updateRanges)}unmake(){return this._helpers.visible.unmake(),this._helpers.object.unmake(),this._helpers.span.unmake()}change(e,t,n){if(e["axis.detail"]||e["line.stroke"]||e["line.join"]||e["axis.crossed"]||e["interval.axis"]&&this.props.crossed)return this.rebuild();if(t.interval||t.span||t.view||t.origin||n)return this.updateRanges()}updateRanges(){const{axis:e,origin:t}=this.props,n=this._helpers.span.get("",e),r=n.x,s=n.y;return w0(this.axisPosition,e).multiplyScalar(r),w0(this.axisStep,e).multiplyScalar((s-r)*this.resolution),MI(this.axisPosition,e,t)}};vz.initClass();let Az=class extends Rs{static initClass(){this.traits=["node","object","visible","style","line","mesh","face","geometry","position","bind","shade"]}constructor(e,t,n){super(e,t,n),this.face=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),{items:t,width:n,height:r,depth:s}=e;if(this.face&&this.face.geometry.clip(n,r,s,t),this.line&&this.line.geometry.clip(t,n,r,s),this.bind.map!=null){const a=this.bind.map.getActiveDimensions();if(this.face)return this.face.geometry.map(a.width,a.height,a.depth,a.items)}}make(){let e,t;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"mesh.map",trait:"source"}]),this.bind.points==null)return;let n=this.bind.points.sourceShader(this._shaders.shader());n=this._helpers.position.pipeline(n);const r=this._helpers.style.uniforms(),s=this._helpers.line.uniforms(),a=this._inherit("unit").getUnitUniforms(),o={};o.styleZBias=this._attributes.make(this._types.number()),this.wireZBias=o.styleZBias;const l=this.bind.points.getDimensions(),{items:c,width:u,height:h,depth:d}=l,{line:f,shaded:m,fill:A,stroke:_,join:v}=this.props;this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));const w=this._helpers.object.mask(),x=this._helpers.shade.map(this.bind.map!=null?this.bind.map.sourceShader(this._shaders.shader()):void 0),C=this._helpers.shade.pipeline(),S=C||m,I=C||!1,P=[];if(f){const k=this._shaders.shader();k.pipe(hl("yzwx")),k.pipe(n),t=Al(a,s,r,o),this.line=this._renderables.make("line",{uniforms:t,samples:c,strips:u,ribbons:h,layers:d,position:k,color:e,stroke:_,join:v,material:I,mask:w,closed:!0}),P.push(this.line)}return A&&(t=Al(a,r,{}),this.face=this._renderables.make("face",{uniforms:t,width:u,height:h,depth:d,items:c,position:n,color:e,material:S,mask:w,map:x}),P.push(this.face)),this._helpers.visible.make(),this._helpers.object.make(P)}made(){return this.resize()}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.face=this.line=null}change(e,t,n){if(e["geometry.points"]||t.mesh)return this.rebuild();if(e["style.zBias"]||e["mesh.lineBias"]||n){const{fill:r,zBias:s,lineBias:a}=this.props;return this.wireZBias.value=s+(r?a:0)}}};Az.initClass();let _z=class extends Rs{static initClass(){this.traits=["node","object","visible","style","line","grid","area","position","origin","shade","axis:x","axis:y","scale:x","scale:y","span:x","span:y"],this.defaults={width:1,zBias:-2}}constructor(e,t,n){super(e,t,n),this.axes=null}make(){let e,t=this._helpers.object.mask();const n=this._helpers.shade.pipeline()||!1;e=(d,f,m)=>{let A;const _=this._get(d+"axis.detail"),v=_+1,w=1/_,x=this._helpers.scale.divide(f),C=this._renderables.make("dataBuffer",{width:x,channels:1}),S={gridPosition:this._attributes.make(this._types.vec4()),gridStep:this._attributes.make(this._types.vec4()),gridAxis:this._attributes.make(this._types.vec4())},I={gridPosition:S.gridPosition.value,gridStep:S.gridStep.value,gridAxis:S.gridAxis.value},P=A=this._shaders.shader();m!=null&&t!=null&&(t=this._helpers.position.swizzle(t,m)),P.require(C.shader(this._shaders.shader(),2)),P.pipe("grid.position",S),A=this._helpers.position.pipeline(P);const k=this._helpers.style.uniforms(),M=this._helpers.line.uniforms(),R=this._inherit("unit").getUnitUniforms(),N=Al(M,k,R),U=this._renderables.make("line",{uniforms:N,samples:v,strips:x,position:A,stroke:c,join:u,mask:t,material:n});return{first:d,second:f,resolution:w,samples:v,line:U,buffer:C,values:I}};const{lineX:r,lineY:s,crossed:a,axes:o}=this.props,l=["0000","x000","y000","z000","w000"][o[1]],{stroke:c,join:u}=this.props;this.axes=[],r&&this.axes.push(e("x.","y.",null)),s&&this.axes.push(e("y.","x.",a?null:l));const h=(()=>{const d=[];for(e of this.axes)d.push(e.line);return d})();return this._helpers.visible.make(),this._helpers.object.make(h),this._helpers.span.make(),this._listen(this,"span.range",this.updateRanges)}unmake(){this._helpers.visible.unmake(),this._helpers.object.unmake(),this._helpers.span.unmake();for(const e of this.axes)e.buffer.dispose();this.axes=null}change(e,t,n){if(e["x.axis.detail"]||e["y.axis.detail"]||e["x.axis.factor"]||e["y.axis.factor"]||e["grid.lineX"]||e["grid.lineY"]||e["line.stroke"]||e["line.join"]||e["grid.crossed"]||e["grid.axes"]&&this.props.crossed)return this.rebuild();if(t.x||t.y||t.area||t.grid||t.view||t.origin||n)return this.updateRanges()}updateRanges(){const e=(l,c,u,h,d)=>{const{second:f,resolution:m,samples:A,line:_,buffer:v,values:w}=d;let x=u.x,C=u.y;w0(w.gridPosition,l).multiplyScalar(x),w0(w.gridStep,l).multiplyScalar((C-x)*m),MI(w.gridPosition,t,n),x=h.x,C=h.y;const S=this._helpers.scale.generate(f,v,x,C);w0(w.gridAxis,c);const I=S.length;return _.geometry.clip(A,I,1,1)},{axes:t,origin:n}=this.props,r=this._helpers.span.get("x.",t[0]),s=this._helpers.span.get("y.",t[1]),{lineX:a,lineY:o}=this.props;a&&e(t[0],t[1],r,s,this.axes[0]),o&&e(t[1],t[0],s,r,this.axes[+a]),window.cake1=this.axes[0].buffer,window.cake2=this.axes[1].buffer,window.cake3=this.axes[0]}};_z.initClass();let bz=class extends Rs{static initClass(){this.traits=["node","object","visible","style","line","arrow","geometry","position","bind","shade"]}constructor(e,t,n){super(e,t,n),this.line=this.arrows=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),t=e.width,n=e.height,r=e.depth,s=e.items;return this.line.geometry.clip(t,n,r,s),Array.from(this.arrows).map(a=>a.geometry.clip(t,n,r,s))}make(){let e;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]),this.bind.points==null)return;let t=this._shaders.shader();t=this.bind.points.sourceShader(t),t=this._helpers.position.pipeline(t);const n=this._helpers.style.uniforms(),r=this._helpers.line.uniforms(),s=this._helpers.arrow.uniforms(),a=this._inherit("unit").getUnitUniforms(),{start:o,end:l}=this.props,{stroke:c,join:u,proximity:h,closed:d}=this.props;this.proximity=h;const f=this.bind.points.getDimensions(),m=f.width,A=f.height,_=f.depth,v=f.items;this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));const w=this._helpers.object.mask(),x=this._helpers.shade.pipeline()||!1,C=Al(s,r,n,a);return this.line=this._renderables.make("line",{uniforms:C,samples:m,strips:A,ribbons:_,layers:v,position:t,color:e,clip:o||l,stroke:c,join:u,proximity:h,closed:d,mask:w,material:x}),this.arrows=[],o&&this.arrows.push(this._renderables.make("arrow",{uniforms:C,flip:!0,samples:m,strips:A,ribbons:_,layers:v,position:t,color:e,closed:d,mask:w,material:x})),l&&this.arrows.push(this._renderables.make("arrow",{uniforms:C,samples:m,strips:A,ribbons:_,layers:v,position:t,color:e,closed:d,mask:w,material:x})),this._helpers.visible.make(),this._helpers.object.make(this.arrows.concat([this.line]))}made(){return this.resize()}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.line=this.arrows=null}change(e,t,n){if(e["geometry.points"]||e["line.stroke"]||e["line.join"]||e["arrow.start"]||e["arrow.end"])return this.rebuild();if(e["line.proximity"]&&this.proximity!=null!=(this.props.proximity!=null))return this.rebuild()}};bz.initClass();let yz=class extends Rs{static initClass(){this.traits=["node","object","visible","style","point","geometry","position","bind","shade"]}constructor(e,t,n){super(e,t,n),this.point=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),{items:t,width:n,height:r,depth:s}=e;return this.point.geometry.clip(n,r,s,t)}make(){let e,t;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"point.sizes",trait:"source"}]),this.bind.points==null)return;let n=this._shaders.shader();n=this.bind.points.sourceShader(n),n=this._helpers.position.pipeline(n);const r=this.bind.points.getDimensions(),{items:s,width:a,height:o,depth:l}=r,c=this._helpers.style.uniforms(),u=this._helpers.point.uniforms(),h=this._inherit("unit").getUnitUniforms();this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e)),this.bind.sizes&&(t=this._shaders.shader(),this.bind.sizes.sourceShader(t));const d=this._helpers.object.mask(),f=this._helpers.shade.pipeline()||!1,{shape:m}=this.props,{fill:A}=this.props,{optical:_}=this.props,v=Al(h,u,c);this.point=this._renderables.make("point",{uniforms:v,width:a,height:o,depth:l,items:s,position:n,color:e,size:t,shape:m,optical:_,fill:A,mask:d,material:f}),this._helpers.visible.make(),this._helpers.object.make([this.point])}made(){return this.resize()}unmake(){this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.point=null}change(e,t,n){if(e["geometry.points"]||e["point.shape"]||e["point.fill"])return this.rebuild()}};yz.initClass();let wz=class extends Rs{static initClass(){this.traits=["node","object","visible","style","line","mesh","strip","geometry","position","bind","shade"]}constructor(e,t,n){super(e,t,n),this.strip=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),{items:t,width:n,height:r,depth:s}=e;if(this.strip&&this.strip.geometry.clip(n,r,s,t),this.line&&this.line.geometry.clip(t,n,r,s),this.bind.map!=null){const a=this.bind.map.getActiveDimensions();if(this.strip)return this.strip.geometry.map(a.width,a.height,a.depth,a.items)}}make(){let e,t;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"mesh.map",trait:"source"}]),this.bind.points==null)return;let n=this._shaders.shader();n=this.bind.points.sourceShader(n),n=this._helpers.position.pipeline(n);const r=this._helpers.style.uniforms(),s=this._helpers.line.uniforms(),a=this._inherit("unit").getUnitUniforms(),{line:o,shaded:l,fill:c,stroke:u,join:h}=this.props,d={};d.styleZBias=this._attributes.make(this._types.number()),this.wireZBias=d.styleZBias;const f=this.bind.points.getDimensions(),{items:m,width:A,height:_,depth:v}=f;this.bind.colors&&(e=this._shaders.shader(),e=this.bind.colors.sourceShader(e));const w=this._helpers.object.mask();this._helpers.shade.map(this.bind.map!=null?this.bind.map.sourceShader(this._shaders.shader()):void 0);const x=this._helpers.shade.pipeline(),C=x||l,S=x||!1,I=[];if(o){const P=this._shaders.shader();P.pipe(hl("yzwx")),P.pipe(n),t=Al(a,s,r,d),this.line=this._renderables.make("line",{uniforms:t,samples:m,strips:A,ribbons:_,layers:v,position:P,color:e,stroke:u,join:h,mask:w,material:S}),I.push(this.line)}return c&&(t=Al(r,{}),this.strip=this._renderables.make("strip",{uniforms:t,width:A,height:_,depth:v,items:m,position:n,color:e,material:C}),I.push(this.strip)),this._helpers.visible.make(),this._helpers.object.make(I)}made(){return this.resize()}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.strip=null}change(e,t,n){if(e["geometry.points"]||t.mesh)return this.rebuild();if(e["style.zBias"]||e["mesh.lineBias"]||n){const{fill:r,zBias:s,lineBias:a}=this.props;return this.wireZBias.value=s+(r?a:0)}}};wz.initClass();let xz=class extends Rs{static initClass(){this.traits=["node","object","visible","style","line","mesh","geometry","surface","position","grid","bind","shade"],this.defaults={lineX:!1,lineY:!1}}constructor(e,t,n){super(e,t,n),this.lineX=this.lineY=this.surface=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),{width:t,height:n,depth:r,items:s}=e;if(this.surface&&this.surface.geometry.clip(t,n,r,s),this.lineX&&this.lineX.geometry.clip(t,n,r,s),this.lineY&&this.lineY.geometry.clip(n,t,r,s),this.bind.map!=null){const a=this.bind.map.getActiveDimensions();if(this.surface)return this.surface.geometry.map(a.width,a.height,a.depth,a.items)}}make(){let e,t;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"mesh.normals",trait:"source"},{to:"mesh.map",trait:"source"}]),this.bind.points==null)return;let n=this._shaders.shader();n=this.bind.points.sourceShader(n),n=this._helpers.position.pipeline(n);const r=this._helpers.style.uniforms(),s=this._helpers.style.uniforms(),a=this._helpers.line.uniforms(),o=this._helpers.surface.uniforms(),l=this._inherit("unit").getUnitUniforms();s.styleColor=this._attributes.make(this._types.color()),s.styleZBias=this._attributes.make(this._types.number()),this.wireColor=s.styleColor.value,this.wireZBias=s.styleZBias,this.wireScratch=new Ut;const c=this.bind.points.getDimensions(),{width:u,height:h,depth:d,items:f}=c,{shaded:m,fill:A,lineX:_,lineY:v,closedX:w,closedY:x,stroke:C,join:S,proximity:I,crossed:P}=this.props,k=[];this.proximity=I,this.bind.normals!=null&&(t=this._shaders.shader(),this.bind.normals.sourceShader(t),this._helpers.shade.normal(t)),this.bind.colors!=null&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));const M=this._helpers.object.mask(),R=this._helpers.shade.map(this.bind.map!=null?this.bind.map.sourceShader(this._shaders.shader()):void 0),N=this._helpers.shade.pipeline(),U=N||m,q=N||!1,{swizzle:W,swizzle2:F}=this._helpers.position;let ue=Al(l,a,r,s);const J=_||v?-50:0;return _&&(this.lineX=this._renderables.make("line",{uniforms:ue,samples:u,strips:h,ribbons:d,layers:f,position:n,color:e,normal:t,zUnits:-J,stroke:C,join:S,mask:M,material:q,proximity:I,closed:w||closed}),k.push(this.lineX)),v&&(this.lineY=this._renderables.make("line",{uniforms:ue,samples:h,strips:u,ribbons:d,layers:f,position:F(n,"yxzw","yxzw"),color:W(e,"yxzw"),zUnits:-J,stroke:C,join:S,mask:W(M,P?"xyzw":"yxzw"),material:q,proximity:I,closed:x||closed}),k.push(this.lineY)),A&&(ue=Al(l,o,r),this.surface=this._renderables.make("surface",{uniforms:ue,width:u,height:h,surfaces:d,layers:f,position:n,color:e,zUnits:J,stroke:C,material:U,mask:M,map:R,intUV:!0,closedX:w||closed,closedY:x||closed}),k.push(this.surface)),this._helpers.visible.make(),this._helpers.object.make(k)}made(){return this.resize()}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.lineX=this.lineY=this.surface=null}_convertGammaToLinear(e,t=2){return e.r=Math.pow(e.r,t),e.g=Math.pow(e.g,t),e.b=Math.pow(e.b,t),e}_convertLinearToGamma(e,t=2){const n=t>0?1/t:1;return e.r=Math.pow(e.r,n),e.g=Math.pow(e.g,n),e.b=Math.pow(e.b,n),e}change(e,t,n){if(e["geometry.points"]||e["mesh.shaded"]||e["mesh.fill"]||e["line.stroke"]||e["line.join"]||t.grid)return this.rebuild();if(e["style.color"]||e["style.zBias"]||e["mesh.fill"]||e["mesh.lineBias"]||n){const{fill:r,color:s,zBias:a,lineBias:o}=this.props;if(this.wireZBias.value=a+(r?o:0),this.wireColor.copy(s),r){const l=this.wireScratch;l.setRGB(s.r,s.g,s.b),this._convertLinearToGamma(this._convertGammaToLinear(l).multiplyScalar(.75)),this.wireColor.r=l.r,this.wireColor.g=l.g,this.wireColor.b=l.b}}if(e["line.proximity"]&&this.proximity!=null!=(this.props.proximity!=null))return this.rebuild()}};xz.initClass();let Cz=class extends Rs{static initClass(){this.traits=["node","object","visible","style","line","ticks","geometry","position","bind","shade"]}init(){return this.tickStrip=this.line=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),t=+(e.items>0),n=e.width*t,r=e.height*t,s=e.depth*t;return this.line.geometry.clip(2,n,r,s),this.tickStrip.set(0,n-1)}make(){let e,t;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]),this.bind.points==null)return;const n=this._helpers.style.uniforms(),r=this._helpers.line.uniforms(),s=this._inherit("unit").getUnitUniforms(),a=Al(r,n,s),o={tickEpsilon:this.node.attributes["ticks.epsilon"],tickSize:this.node.attributes["ticks.size"],tickNormal:this.node.attributes["ticks.normal"],tickStrip:this._attributes.make(this._types.vec2(0,0)),worldUnit:a.worldUnit,focusDepth:a.focusDepth};this.tickStrip=o.tickStrip.value;const l=t=this._shaders.shader();l.require(this.bind.points.sourceShader(this._shaders.shader())),l.require(this._helpers.position.pipeline(this._shaders.shader())),l.pipe("ticks.position",o);const{stroke:c,join:u}=this.props,h=this.bind.points.getDimensions(),d=h.width,f=h.height,m=h.depth;this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));const A=this._helpers.object.mask(),_=this._helpers.shade.pipeline()||!1,{swizzle:v}=this._helpers.position;return this.line=this._renderables.make("line",{uniforms:a,samples:2,strips:d,ribbons:f,layers:m,position:t,color:e,stroke:c,join:u,mask:v(A,"yzwx"),material:_}),this._helpers.visible.make(),this._helpers.object.make([this.line])}made(){return this.resize()}unmake(){return this.line=null,this._helpers.visible.unmake(),this._helpers.object.unmake()}change(e,t,n){if(e["geometry.points"]||e["line.stroke"]||e["line.join"])return this.rebuild()}};Cz.initClass();let Ez=class extends Rs{static initClass(){this.traits=["node","object","visible","style","line","arrow","geometry","position","bind","shade"]}constructor(e,t,n){super(e,t,n),this.line=this.arrows=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),t=e.items,n=e.width,r=e.height,s=e.depth;return this.line.geometry.clip(t,n,r,s),Array.from(this.arrows).map(a=>a.geometry.clip(t,n,r,s))}make(){let e;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]),this.bind.points==null)return;let t=this._shaders.shader();this.bind.points.sourceShader(t),this._helpers.position.pipeline(t);const n=this._helpers.style.uniforms(),r=this._helpers.line.uniforms(),s=this._helpers.arrow.uniforms(),a=this._inherit("unit").getUnitUniforms(),{start:o,end:l}=this.props,{stroke:c,join:u,proximity:h,closed:d}=this.props;this.proximity=h;const f=this.bind.points.getDimensions(),m=f.items,A=f.width,_=f.height,v=f.depth;this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));let w=this._helpers.object.mask(),x=this._helpers.shade.pipeline()||!1;const{swizzle:C,swizzle2:S}=this._helpers.position;t=S(t,"yzwx","yzwx"),e=C(e,"yzwx"),w=C(w,"yzwx"),x=C(x,"yzwx");const I=Al(s,r,n,a);return this.line=this._renderables.make("line",{uniforms:I,samples:m,ribbons:_,strips:A,layers:v,position:t,color:e,clip:o||l,stroke:c,join:u,proximity:h,closed:d,mask:w,material:x}),this.arrows=[],o&&this.arrows.push(this._renderables.make("arrow",{uniforms:I,flip:!0,samples:m,ribbons:_,strips:A,layers:v,position:t,color:e,closed:d,mask:w,material:x})),l&&this.arrows.push(this._renderables.make("arrow",{uniforms:I,samples:m,ribbons:_,strips:A,layers:v,position:t,color:e,closed:d,mask:w,material:x})),this._helpers.visible.make(),this._helpers.object.make(this.arrows.concat([this.line]))}made(){return this.resize()}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.line=this.arrows=null}change(e,t,n){if(e["geometry.points"]||e["line.stroke"]||e["line.join"]||e["arrow.start"]||e["arrow.end"])return this.rebuild();if(e["line.proximity"]&&this.proximity!=null!=(this.props.proximity!=null))return this.rebuild()}};Ez.initClass();class Sz extends y_{static initClass(){this.traits=["node","buffer","active","data","voxel","html"],this.finals={channels:1}}init(){super.init(),this.storage="pushBuffer"}make(){super.make();const{items:e,width:t,height:n,depth:r}=this.getDimensions();return this.dom=this._overlays.make("dom"),this.dom.hint(e*t*n*r)}unmake(){if(super.unmake(),this.dom!=null)return this.dom.dispose(),this.dom=null}update(){return super.update()}change(e,t,n){return t.html?this.rebuild():super.change(e,t,n)}nodes(){return this.buffer.read()}callback(e){const{el:t}=this.dom;return e.length<=6?(n,r,s,a,o)=>e(n,t,r,s,a,o):(n,r,s,a,o)=>e(n,t,r,s,a,o,this.bufferClock,this.bufferStep)}}Sz.initClass();class Mz extends Rs{static initClass(){this.traits=["node","bind","object","visible","overlay","dom","attach","position"]}init(){this.emitter=this.root=null,this.active={}}make(){if(super.make(),this._helpers.bind.make([{to:"dom.html",trait:"html"},{to:"dom.points",trait:"source"}]),this.bind.points==null||this.bind.html==null)return;this.root=this._inherit("root"),this._listen("root","root.update",this.update),this._listen("root","root.post",this.post);const e=this.bind.points.getDimensions(),t=this.bind.html.getDimensions(),n=Math.min(e.items,t.items),r=Math.min(e.width,t.width),s=Math.min(e.height,t.height),a=Math.min(e.depth,t.depth);let o=this.bind.points.sourceShader(this._shaders.shader());o=this._helpers.position.pipeline(o);const l=this._shaders.shader({globals:["projectionMatrix"]});l.pipe("project.readback"),o.pipe(l);const c=this._shaders.shader();this.readback=this._renderables.make("readback",{map:o,indexer:c,items:n,width:r,height:s,depth:a,channels:4,stpq:!0}),this.dom=this._overlays.make("dom"),this.dom.hint(n*r*s*a*2),this.emitter=this.callback(this.bind.html.nodes()),this.readback.setCallback(this.emitter),this._helpers.visible.make()}unmake(){this.readback!=null&&(this.readback.dispose(),this.dom.dispose(),this.readback=this.dom=null,this.root=null,this.emitter=null,this.active={}),this._helpers.bind.unmake(),this._helpers.visible.unmake()}update(){this.readback!=null&&this.props.visible&&(this.readback.update(this.root!=null?this.root.getCamera():void 0),this.readback.post(),this.readback.iterate())}post(){this.readback!=null&&this.dom.render(this.isVisible?this.emitter.nodes():null)}callback(e){let t,n;const r=this._inherit("unit").getUnitUniforms(),s=r.viewWidth,a=r.viewHeight,o=this.node.attributes["dom.attributes"],l=this.node.attributes["dom.size"],c=this.node.attributes["dom.zoom"],u=this.node.attributes["dom.color"],h=this.node.attributes["dom.outline"],d=this.node.attributes["dom.pointerEvents"],f=this.node.attributes["overlay.opacity"],m=this.node.attributes["overlay.zIndex"],A=this.node.attributes["attach.offset"],_=this.node.attributes["attach.depth"],v=this.node.attributes["attach.snap"],{el:w}=this.dom;let x=[],C=null,S=null,I=t=n=0,P="";const k=function(M,R,N,U,q,W,F,ue){let J;const Y=ue+I*q+t*W+n*F,Pe=e[Y],Ie=U<0,Ce=1+(1/U-1)*_.value,G=Ie?0:Ce,oe=+A.value.x*G,je=+A.value.y*G;let Tt=(M+1)*s.value*.5+oe,rt=(R-1)*a.value*.5+je;Tt/=c.value,rt/=c.value,v.value&&(Tt=Math.round(Tt),rt=Math.round(rt));const De=Math.min(.999,Ie?0:f.value),xt={className:S,style:{transform:`translate3d(${Tt}px, ${-rt}px, ${1-U}px) translate(-50%, -50%) scale(${G},${G})`,opacity:De}};for(F in C)J=C[F],xt.style[F]=J;const mt=o.value;if(mt!=null){const et=mt.style;for(F in mt)J=mt[F],["style","className"].includes(F)||(xt[F]=J);if(et!=null)for(F in et)J=et[F],xt.style[F]=J}return xt.className+=" "+((mt!=null?mt.className:void 0)!=null?mt!=null?mt.className:void 0:"mathbox-label"),x.push(w("div",xt,Pe))};return k.reset=()=>{x=[],[I,t,n]=Array.from([this.strideI,this.strideJ,this.strideK]);const M=u.value,R=N=>Math.floor(N*255);if(P=M?`rgb(${[R(M.x),R(M.y),R(M.z)]})`:"",S=`mathbox-outline-${Math.round(h.value)}`,C={},M&&(C.color=P),C.fontSize=`${l.value}px`,c.value!==1&&(C.zoom=c.value),m.value>0&&(C.zIndex=m.value),d.value)return C.pointerEvents="auto"},k.nodes=()=>x,k}resize(){let e,t;if(this.readback==null)return;const n=this.bind.points.getActiveDimensions(),r=this.bind.html.getActiveDimensions(),s=Math.min(n.items,r.items),a=Math.min(n.width,r.width),o=Math.min(n.height,r.height),l=Math.min(n.depth,r.depth);this.readback.setActive(s,a,o,l),this.strideI=e=r.items,this.strideJ=t=e*r.width,this.strideK=t*r.height}change(e,t,n){if(e["dom.html"]||e["dom.points"])return this.rebuild()}}Mz.initClass();class Tz extends y_{static initClass(){this.traits=["node","buffer","active","data","texture","voxel","text","font"],this.defaults={minFilter:"linear",magFilter:"linear"},this.finals={channels:1}}init(){return super.init(),this.atlas=null}textShader(e){return this.atlas.shader(e)}textIsSDF(){return this.props.sdf>0}textHeight(){return this.props.detail}make(){let{minFilter:e,magFilter:t,type:n}=this.props;const{font:r,style:s,variant:a,weight:o,detail:l,sdf:c}=this.props;this.atlas=this._renderables.make("textAtlas",{font:r,size:l,style:s,variant:a,weight:o,outline:c,minFilter:e,magFilter:t,type:n}),this.minFilter=ki,this.magFilter=ki,this.type=ns,__.prototype.make.call(this),e=this.minFilter!=null?this.minFilter:this.props.minFilter,t=this.magFilter!=null?this.magFilter:this.props.magFilter,n=this.type!=null?this.type:this.props.type;const{width:u}=this.props,{height:h}=this.props,{depth:d}=this.props,f=this.props.bufferWidth,m=this.props.bufferHeight,A=this.props.bufferDepth,{channels:_}=this.props,{items:v}=this.props;let w=this.spec={channels:_,items:v,width:u,height:h,depth:d};this.items=w.items,this.channels=w.channels;const{data:x}=this.props;w=Qf(x,w);const{space:C}=this;C.width=Math.max(f,w.width||1),C.height=Math.max(m,w.height||1),C.depth=Math.max(A,w.depth||1),this.buffer=this._renderables.make(this.storage,{width:C.width,height:C.height,depth:C.depth,channels:4,items:v,minFilter:e,magFilter:t,type:n});const{atlas:S}=this,{emit:I}=this.buffer.streamer;return this.buffer.streamer.emit=P=>S.map(P,I)}unmake(){if(super.unmake(),this.atlas)return this.atlas.dispose(),this.atlas=null}update(){return this.atlas.begin(),super.update(),this.atlas.end()}change(e,t,n){return t.font?this.rebuild():super.change(e,t,n)}}Tz.initClass();class go extends cC{static initClass(){this.traits=["node","bind","operator","source","index"]}indexShader(e){return lR(this.bind.source,"indexShader",t=>t.indexShader(e))}sourceShader(e){return lR(this.bind.source,"sourceShader",t=>t.sourceShader(e))}getDimensions(){return this.bind.source.getDimensions()}getFutureDimensions(){return this.bind.source.getFutureDimensions()}getActiveDimensions(){return this.bind.source.getActiveDimensions()}getIndexDimensions(){return this.bind.source.getIndexDimensions()}init(){return this.sourceSpec=[{to:"operator.source",trait:"source",optional:!0}]}make(){return super.make(),this._helpers.bind.make(this.sourceSpec)}made(){return this.resize(),super.made()}unmake(){return this._helpers.bind.unmake()}resize(e){return this.trigger({type:"source.resize"})}}go.initClass();function lR(i,e,t){if(typeof i<"u"&&i!==null&&typeof i[e]=="function")return t(i,e)}class Iz extends go{static initClass(){this.traits=["node","bind","operator","texture","text","format","font"],this.defaults={minFilter:"linear",magFilter:"linear"}}init(){return super.init(),this.atlas=this.buffer=this.used=this.time=null,this.filled=!1}sourceShader(e){return this.buffer.shader(e)}textShader(e){return this.atlas.shader(e)}textIsSDF(){return this.props.sdf>0}textHeight(){return this.props.detail}make(){this._helpers.bind.make([{to:"operator.source",trait:"raw"}]);let{minFilter:e,magFilter:t,type:n}=this.props;const{font:r,style:s,variant:a,weight:o,detail:l,sdf:c}=this.props;this.atlas=this._renderables.make("textAtlas",{font:r,size:l,style:s,variant:a,weight:o,outline:c,minFilter:e,magFilter:t,type:n}),e=ki,t=ki,n=ns;const u=this.bind.source.getDimensions(),{items:h,width:d,height:f,depth:m}=u;this.buffer=this._renderables.make("voxelBuffer",{width:d,height:f,depth:m,channels:4,items:h,minFilter:e,magFilter:t,type:n});const{atlas:A}=this,{emit:_}=this.buffer.streamer;return this.buffer.streamer.emit=v=>A.map(v,_),this.clockParent=this._inherit("clock"),this._listen("root","root.update",this.update)}made(){return super.made(),this.resize()}unmake(){if(super.unmake(),this.buffer&&(this.buffer.dispose(),this.buffer=null),this.atlas)return this.atlas.dispose(),this.atlas=null}update(){if(this.filled&&!this.props.live||!this.through)return;this.time=this.clockParent.getTime();const{used:e}=this;if(this.atlas.begin(),this.used=this.through(),this.buffer.write(this.used),this.atlas.end(),this.filled=!0,e!==this.used)return this.trigger({type:"source.resize"})}change(e,t,n){if(t.font)return this.rebuild();if(e["format.expr"]||e["format.digits"]||e["format.data"]||n){let r,{expr:s}=this.props;const{digits:a,data:o}=this.props;s==null&&(o!=null?s=(c,u,h,d,f)=>o[f]:s=c=>c);const{length:l}=s;return a!=null&&(s=(c=>(u,h,d,f,m,A,_,v,w,x)=>+c(u,h,d,f,m,A,_,v,w,x).toPrecision(a))(s)),l>8?r=(c,u,h,d,f,m,A,_,v,w,x)=>c(s(u,h,d,f,m,A,_,v,this.time.clock,this.time.step)):r=(c,u,h,d,f,m,A,_,v)=>c(s(u,h,d,f,m,A,_,v)),this.through=this.bind.source.rawBuffer().through(r,this.buffer)}}}Iz.initClass();class Pz extends Rs{static initClass(){this.traits=["node","bind","object","visible","style","label","attach","geometry","position"]}make(){let e;if(super.make(),this._helpers.bind.make([{to:"label.text",trait:"text"},{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]),this.bind.points==null||this.bind.text==null)return;const t=this.bind.points.getDimensions(),n=this.bind.text.getDimensions(),r=this.bind.text.textIsSDF(),s=Math.min(t.items,n.items),a=Math.min(t.width,n.width),o=Math.min(t.height,n.height),l=Math.min(t.depth,n.depth);let c=this.bind.points.sourceShader(this._shaders.shader());c=this._helpers.position.pipeline(c);const u=this.bind.text.sourceShader(this._shaders.shader()),h=this._shaders.shader().pipe("label.map");h.pipe(this.bind.text.textShader(this._shaders.shader()));const d={spriteDepth:this.node.attributes["attach.depth"],spriteOffset:this.node.attributes["attach.offset"],spriteSnap:this.node.attributes["attach.snap"],spriteScale:this._attributes.make(this._types.number()),outlineStep:this._attributes.make(this._types.number()),outlineExpand:this._attributes.make(this._types.number()),outlineColor:this.node.attributes["label.background"]};this.spriteScale=d.spriteScale,this.outlineStep=d.outlineStep,this.outlineExpand=d.outlineExpand;const f=r?"label.outline":"label.alpha",m=this._shaders.shader().pipe(f,d);this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));const A=this._helpers.object.mask(),_=this._helpers.style.uniforms(),v=this._inherit("unit").getUnitUniforms(),w=Al(v,_,d);return this.sprite=this._renderables.make("sprite",{uniforms:w,width:a,height:o,depth:l,items:s,position:c,sprite:u,map:h,combine:m,color:e,mask:A,linear:!0}),this._helpers.visible.make(),this._helpers.object.make([this.sprite])}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.sprite=null}resize(){const e=this.bind.points.getActiveDimensions(),t=this.bind.text.getActiveDimensions(),n=Math.min(e.items,t.items),r=Math.min(e.width,t.width),s=Math.min(e.height,t.height),a=Math.min(e.depth,t.depth);return this.sprite.geometry.clip(r,s,a,n)}change(e,t,n){if(t.geometry||e["label.text"])return this.rebuild();if(this.bind.points==null)return;const{size:r}=this.props,{outline:s}=this.props,{expand:a}=this.props,o=this.bind.text.textHeight(),l=r/o;return this.outlineExpand.value=a/l*16/255,this.outlineStep.value=s/l*16/255,this.spriteScale.value=l}}Pz.initClass();class TI extends go{static initClass(){this.traits=["node","bind","operator","source","index","resample","sampler:x","sampler:y","sampler:z","sampler:w","include"]}indexShader(e){return e.pipe(this.indexer),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(e){const t=this.resampled,n=this.centered,r=this.padding;return this.relativeSize?(n.items||e.items--,n.width||e.width--,n.height||e.height--,n.depth||e.depth--,t.items!=null&&(e.items*=t.items),t.width!=null&&(e.width*=t.width),t.height!=null&&(e.height*=t.height),t.depth!=null&&(e.depth*=t.depth),n.items||e.items++,n.width||e.width++,n.height||e.height++,n.depth||e.depth++,e.items-=r.items*2,e.width-=r.width*2,e.height-=r.height*2,e.depth-=r.depth*2):(t.items!=null&&(e.items=t.items),t.width!=null&&(e.width=t.width),t.height!=null&&(e.height=t.height),t.depth!=null&&(e.depth=t.depth)),e.items=Math.max(0,Math.floor(e.items)),e.width=Math.max(0,Math.floor(e.width)),e.height=Math.max(0,Math.floor(e.height)),e.depth=Math.max(0,Math.floor(e.depth)),e}make(){if(super.make(),this.bind.source==null)return;this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}]);const{indices:e,channels:t}=this.props,{shader:n}=this.bind,{sample:r,size:s,items:a,width:o,height:l,depth:c}=this.props,u=r===this.node.attributes["resample.sample"].enum.relative,h=s===this.node.attributes["resample.size"].enum.relative;this.resampled={},a!=null&&(this.resampled.items=a),o!=null&&(this.resampled.width=o),l!=null&&(this.resampled.height=l),c!=null&&(this.resampled.depth=c),this.centered={},this.centered.items=this.props.centeredW,this.centered.width=this.props.centeredX,this.centered.height=this.props.centeredY,this.centered.depth=this.props.centeredZ,this.padding={},this.padding.items=this.props.paddingW,this.padding.width=this.props.paddingX,this.padding.height=this.props.paddingY,this.padding.depth=this.props.paddingZ;const d=this._shaders.shader(),f=this._shaders.shader(),m=[null,this._types.number,this._types.vec2,this._types.vec3,this._types.vec4][e],A={dataSize:this._attributes.make(m(0,0,0,0)),dataResolution:this._attributes.make(m(0,0,0,0)),targetSize:this._attributes.make(m(0,0,0,0)),targetResolution:this._attributes.make(m(0,0,0,0)),resampleFactor:this._attributes.make(this._types.vec4(0,0,0,0)),resampleBias:this._attributes.make(this._types.vec4(0,0,0,0))};this.dataResolution=A.dataResolution,this.dataSize=A.dataSize,this.targetResolution=A.targetResolution,this.targetSize=A.targetSize,this.resampleFactor=A.resampleFactor,this.resampleBias=A.resampleBias;const _=a!=null||o!=null||l!=null||c!=null;d.pipe("resample.padding",A);let v=[],w=!1;const x=["width","height","depth","items"];for(let C=0;C<x.length;C++){const S=x[C],I=this.centered[S];w||(w=I),v[C]=I?"0.5":"0.0"}return w&&(v=`vec4(${v})`,d.pipe($l(4,"+",v)),_&&f.pipe($l(4,"+",v))),u&&(_?(d.pipe("resample.relative",A),f.pipe("resample.relative",A)):f.pipe(fh("vec4"))),n!=null?(e!==4&&d.pipe(qf(4,e)),d.callback(),e!==4&&d.pipe(L0(e,4)),w&&d.pipe($l(4,"-",v)),d.pipe(this.bind.source.sourceShader(this._shaders.shader())),t!==4&&d.pipe(qf(4,t)),d.join(),this.bind.shader!=null&&d.pipe(this.bind.shader.shaderBind(A)),t!==4&&d.pipe(L0(t,4))):(w&&d.pipe($l(4,"-",v)),d.pipe(this.bind.source.sourceShader(this._shaders.shader()))),w&&_&&f.pipe($l(4,"-",v)),this.operator=d,this.indexer=f,this.indices=e,this.relativeSample=u,this.relativeSize=h}unmake(){return super.unmake(),this.operator=null}resize(){if(this.bind.source==null)return;const e=this.bind.source.getActiveDimensions(),t=this.getActiveDimensions(),n=d=>{const f=this.centered[d],m=this.padding[d];return t[d]+=m*2,[f?e[d]/Math.max(1,t[d]):Math.max(1,e[d]-1)/Math.max(1,t[d]-1),m]},[r,s]=Array.from(n("width")),[a,o]=Array.from(n("height")),[l,c]=Array.from(n("depth")),[u,h]=Array.from(n("items"));return this.indices===1?(this.dataResolution.value=1/e.width,this.targetResolution.value=1/t.width,this.dataSize.value=e.width,this.targetSize.value=t.width):(this.dataResolution.value.set(1/e.width,1/e.height,1/e.depth,1/e.items),this.targetResolution.value.set(1/t.width,1/t.height,1/t.depth,1/t.items),this.dataSize.value.set(e.width,e.height,e.depth,e.items),this.targetSize.value.set(t.width,t.height,t.depth,t.items)),this.resampleFactor.value.set(r,a,l,u),this.resampleBias.value.set(s,o,c,h),super.resize()}change(e,t,n){if(t.operator||t.resample||t.sampler||t.include)return this.rebuild()}}TI.initClass();class kz extends TI{static initClass(){this.traits=["node","bind","operator","resample","sampler:x","sampler:y","sampler:z","sampler:w","include","text"]}init(){return this.sourceSpec=[{to:"operator.source",trait:"text"}]}textShader(e){return this.bind.source.textShader(e)}textIsSDF(){return(this.bind.source!=null?this.bind.source.props.sdf:void 0)>0}textHeight(){return this.bind.source!=null?this.bind.source.props.detail:void 0}}kz.initClass();class Bz extends yl{static initClass(){this.traits=["node","clock","seek","play"]}init(){return this.skew=0,this.last=0,this.time={now:+new Date/1e3,time:0,delta:0,clock:0,step:0}}make(){return this._listen("clock","clock.tick",this.tick)}reset(){return this.skew=0}tick(e){const{from:t,to:n,speed:r,seek:s,pace:a,delay:o,realtime:l}=this.props,c=this._inherit("clock").getTime(),u=l?c.time:c.clock,h=l?c.delta:c.step,d=r/a;this.skew+=h*(d-1),this.last>u&&(this.skew=0),this.time.now=c.now+this.skew,this.time.time=c.time,this.time.delta=c.delta;const f=s??c.clock+this.skew;return this.time.clock=Math.min(n,t+Math.max(0,f-o*d)),this.time.step=h*d,this.last=u,this.trigger(e)}getTime(){return this.time}}Bz.initClass();class Rz extends yl{static initClass(){this.traits=["node","clock","now"]}init(){let e;return this.now=e=+new Date/1e3,this.skew=0,this.time={now:e,time:0,delta:0,clock:0,step:0}}make(){return this.clockParent=this._inherit("clock"),this._listen("clock","clock.tick",this.tick)}unmake(){return this.clockParent=null}change(e,t,n){if(e["date.now"])return this.skew=0}tick(e){const{seek:t,pace:n,speed:r}=this.props,s=this.clockParent.getTime();return this.skew+=s.step*n/r,t!=null&&(this.skew=t),this.time.now=this.time.time=this.time.clock=(this.props.now!=null?this.props.now:this.now)+this.skew,this.time.delta=this.time.step=s.delta,this.trigger(e)}getTime(){return this.time}}Rz.initClass();class Y0 extends yl{static initClass(){this.traits=["node","vertex","fragment"]}vertex(e,t){let n;return(n=cR(this._inherit("vertex"),r=>r.vertex(e,t)))!=null?n:e}fragment(e,t){let n;return(n=cR(this._inherit("fragment"),r=>r.fragment(e,t)))!=null?n:e}}Y0.initClass();function cR(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class Dz extends Y0{static initClass(){this.traits=["node","vertex","transform3"]}make(){return this.uniforms={transformMatrix:this._attributes.make(this._types.mat4())},this.composer=uv()}unmake(){return delete this.uniforms}change(e,t,n){if(e["transform3.pass"])return this.rebuild();if(!t.transform3&&!n)return;const r=this.props.position,s=this.props.quaternion,a=this.props.rotation,o=this.props.scale,l=this.props.matrix,c=this.props.eulerOrder;return this.uniforms.transformMatrix.value=this.composer(r,a,s,o,l,c)}vertex(e,t){return t===this.props.pass&&e.pipe("transform3.position",this.uniforms),super.vertex(e,t)}}Dz.initClass();class Lz extends Y0{static initClass(){this.traits=["node","vertex","transform4"]}make(){return this.uniforms={transformMatrix:this._attributes.make(this._types.mat4()),transformOffset:this.node.attributes["transform4.position"]},this.transformMatrix=this.uniforms.transformMatrix.value}unmake(){return delete this.uniforms}change(e,t,n){if(e["transform4.pass"])return this.rebuild();if(!t.transform4&&!n)return;const r=this.props.scale,s=this.props.matrix,a=this.transformMatrix;return a.copy(s),a.scale(r)}vertex(e,t){return t===this.props.pass&&e.pipe("transform4.position",this.uniforms),super.vertex(e,t)}}Lz.initClass();class Oz extends Y0{static initClass(){this.traits=["node","include","vertex","bind"]}make(){return this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}])}unmake(){return this._helpers.bind.unmake()}change(e,t,n){if(t.include)return this.rebuild()}vertex(e,t){return this.bind.shader!=null&&t===this.props.pass&&e.pipe(this.bind.shader.shaderBind()),super.vertex(e,t)}}Oz.initClass();class Nz extends Y0{static initClass(){this.traits=["node","include","fragment","bind"]}make(){return this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}])}unmake(){return this._helpers.bind.unmake()}change(e,t,n){if(t.include||e["fragment.gamma"])return this.rebuild()}fragment(e,t){return this.bind.shader!=null&&t===this.props.pass&&(this.props.gamma&&e.pipe("mesh.gamma.out"),e.pipe(this.bind.shader.shaderBind()),e.split(),this.props.gamma&&e.pipe("mesh.gamma.in"),e.pass()),super.fragment(e,t)}}Nz.initClass();class Fz extends Y0{static initClass(){this.traits=["node","vertex","layer"]}make(){return this._listen("root","root.resize",this.update),this.uniforms={layerScale:this._attributes.make(this._types.vec4()),layerBias:this._attributes.make(this._types.vec4())}}update(){const e=this._inherit("root").getCamera(),t=e.aspect!=null?e.aspect:1,n=e.fov!=null?e.fov:1,r=Math.tan(n*Math.PI/360),s=this.node.attributes["layer.fit"].enum;let{fit:a}=this.props;const{depth:o}=this.props;switch(a){case s.contain:a=t>1?s.y:s.x;break;case s.cover:a=t>1?s.x:s.y;break}switch(a){case s.x:this.uniforms.layerScale.value.set(r*t,r*t,1,1);break;case s.y:this.uniforms.layerScale.value.set(r,r,1,1);break}return this.uniforms.layerBias.value.set(0,0,-o,0)}change(e,t,n){if(e["layer.fit"]||e["layer.depth"]||n)return this.update()}vertex(e,t){return t===2?e.pipe("layer.position",this.uniforms):t===3?e.pipe("root.position"):e}}Fz.initClass();class zz extends yl{static initClass(){this.traits=["node","include","mask","bind"]}make(){return this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}])}unmake(){return this._helpers.bind.unmake()}change(e,t,n){if(t.include)return this.rebuild()}mask(e){let t,n;return this.bind.shader!=null?e?(n=this._shaders.shader(),n.pipe(fh("vec4")),n.fan(),n.pipe(e),n.next(),n.pipe(this.bind.shader.shaderBind()),n.end(),n.pipe("float combine(float a, float b) { return min(a, b); }")):(n=this._shaders.shader(),n.pipe(this.bind.shader.shaderBind())):n=e,(t=eXe(this._inherit("mask"),r=>r.mask(n)))!=null?t:n}}zz.initClass();function eXe(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class Uz extends go{static initClass(){this.traits=["node","bind","operator","source","index","clamp"]}indexShader(e){return e.pipe(this.operator),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator),super.sourceShader(e)}make(){if(super.make(),this.bind.source==null)return;const e={clampLimit:this._attributes.make(this._types.vec4())};this.clampLimit=e.clampLimit;const t=this._shaders.shader();return t.pipe("clamp.position",e),this.operator=t}unmake(){return super.unmake()}resize(){if(this.bind.source!=null){const e=this.bind.source.getActiveDimensions();this.clampLimit.value.set(e.width-1,e.height-1,e.depth-1,e.items-1)}return super.resize()}change(e,t,n){if(t.operator||t.clamp)return this.rebuild()}}Uz.initClass();class Vz extends go{static initClass(){this.traits=["node","bind","operator","source","index","grow"]}sourceShader(e){return e.pipe(this.operator)}make(){if(super.make(),this.bind.source==null)return;const e={growScale:this.node.attributes["grow.scale"],growMask:this._attributes.make(this._types.vec4()),growAnchor:this._attributes.make(this._types.vec4())};this.growMask=e.growMask.value,this.growAnchor=e.growAnchor.value;const t=this._shaders.shader();return t.require(this.bind.source.sourceShader(this._shaders.shader())),t.pipe("grow.position",e),this.operator=t}unmake(){return super.unmake()}resize(){return this.update(),super.resize()}update(){const e=this.bind.source.getFutureDimensions(),t=["width","height","depth","items"],n=(r,s)=>((r||1)-1)*(.5-s*.5);return(()=>{const r=[];for(let s=0;s<t.length;s++){const a=t[s],o=this.props[a];this.growMask.setComponent(s,+(o==null)),r.push(this.growAnchor.setComponent(s,o!=null?n(e[a],o):0))}return r})()}change(e,t,n){if(t.operator)return this.rebuild();if(t.grow)return this.update()}}Vz.initClass();let Hz=class extends go{static initClass(){this.traits=["node","bind","operator","source","index","join"]}indexShader(e){return e.pipe(this.operator),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator),super.sourceShader(e)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(e){let t,n;const{order:r,axis:s,stride:a}=this,o=["width","height","depth","items"],l=r.map(f=>o[f-1]),c=r.indexOf(s);let u=(()=>{const f=[];for(n of Array.from(l))f.push(e[n]);return f})();const h=((t=u[c+1])!=null?t:1)*a;u.splice(c,2,h),u=u.slice(0,3),u.push(1);const d={};for(let f=0;f<l.length;f++)n=l[f],d[n]=u[f];return d}make(){if(super.make(),this.bind.source==null)return;const{order:e}=this.props;let{axis:t}=this.props,{overlap:n}=this.props;const r=e.join("");t==null&&(t=e[0]);const s=r.indexOf(t),a=r.replace(t,"00").substring(0,4),l=[null,"width","height","depth","items"][t],u=this.bind.source.getDimensions()[l];n=Math.min(u-1,n);const h=u-n,d={joinStride:this._attributes.make(this._types.number(h)),joinStrideInv:this._attributes.make(this._types.number(1/h))},f=this._shaders.shader();return f.require(hl(t,1)),f.require(hl(a,4)),f.require(fI([s,s+1])),f.pipe("join.position",d),f.pipe(lC(e)),this.operator=f,this.order=e,this.axis=t,this.overlap=n,this.length=u,this.stride=h}unmake(){return super.unmake()}change(e,t,n){if(t.join||t.operator)return this.rebuild()}};Hz.initClass();class Gz extends go{static initClass(){this.traits=["node","bind","operator","source","index","lerp","sampler:x","sampler:y","sampler:z","sampler:w"]}indexShader(e){return e.pipe(this.indexer),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(e){const t=this.resampled,n=this.centered,r=this.padding;return this.relativeSize?(n.items||e.items--,n.width||e.width--,n.height||e.height--,n.depth||e.depth--,t.items!=null&&(e.items*=t.items),t.width!=null&&(e.width*=t.width),t.height!=null&&(e.height*=t.height),t.depth!=null&&(e.depth*=t.depth),n.items||e.items++,n.width||e.width++,n.height||e.height++,n.depth||e.depth++,e.items-=r.items*2,e.width-=r.width*2,e.height-=r.height*2,e.depth-=r.depth*2):(t.items!=null&&(e.items=t.items),t.width!=null&&(e.width=t.width),t.height!=null&&(e.height=t.height),t.depth!=null&&(e.depth=t.depth)),e.items=Math.max(0,Math.floor(e.items)),e.width=Math.max(0,Math.floor(e.width)),e.height=Math.max(0,Math.floor(e.height)),e.depth=Math.max(0,Math.floor(e.depth)),e}make(){let e,t;if(super.make(),this.bind.source==null)return;const{size:n,items:r,width:s,height:a,depth:o}=this.props,l=n===this.node.attributes["lerp.size"].enum.relative;this.resampled={},r!=null&&(this.resampled.items=r),s!=null&&(this.resampled.width=s),a!=null&&(this.resampled.height=a),o!=null&&(this.resampled.depth=o),this.centered={},this.centered.items=this.props.centeredW,this.centered.width=this.props.centeredX,this.centered.height=this.props.centeredY,this.centered.depth=this.props.centeredZ,this.padding={},this.padding.items=this.props.paddingW,this.padding.width=this.props.paddingX,this.padding.height=this.props.paddingY,this.padding.depth=this.props.paddingZ;const c=this._shaders.shader(),u=this._shaders.shader(),h={resampleFactor:this._attributes.make(this._types.vec4(0,0,0,0)),resampleBias:this._attributes.make(this._types.vec4(0,0,0,0))};this.resampleFactor=h.resampleFactor,this.resampleBias=h.resampleBias;const d=r!=null||s!=null||a!=null||o!=null;c.pipe("resample.padding",h);const f=[];let m=!1;const A=["width","height","depth","items"];for(e=0;e<A.length;e++){t=A[e];const x=this.centered[t];m||(m=x),f[e]=x?"0.5":"0.0"}let _;m&&d&&(_=`vec4(${f})`,c.pipe($l(4,"+",_)),u.pipe($l(4,"+",_))),d?(c.pipe("resample.relative",h),u.pipe("resample.relative",h)):(c.pipe(fh("vec4")),u.pipe(fh("vec4"))),m&&d&&(c.pipe($l(4,"-",_)),u.pipe($l(4,"-",_)));let v=this.bind.source.sourceShader(this._shaders.shader());const w=["width","height","depth","items"];for(e=0;e<w.length;e++){t=w[e];const x=`lerp.${t}`;this.props[t]!=null&&(v=this._shaders.shader().require(v),v.pipe(x,h))}return c.pipe(v),this.operator=c,this.indexer=u,this.relativeSize=l}unmake(){return super.unmake(),this.operator=null}resize(){if(this.bind.source==null)return;const e=this.bind.source.getActiveDimensions(),t=this.getActiveDimensions(),n=d=>{const f=this.centered[d],m=this.padding[d];return t[d]+=m*2,[f?e[d]/Math.max(1,t[d]):Math.max(1,e[d]-1)/Math.max(1,t[d]-1),m]},[r,s]=Array.from(n("width")),[a,o]=Array.from(n("height")),[l,c]=Array.from(n("depth")),[u,h]=Array.from(n("items"));return this.resampleFactor.value.set(r,a,l,u),this.resampleBias.value.set(s,o,c,h),super.resize()}change(e,t,n){if(t.operator||t.lerp||t.sampler)return this.rebuild()}}Gz.initClass();let Qz=class extends go{static initClass(){this.traits=["node","bind","active","operator","source","index","texture","memo"]}sourceShader(e){return this.memo.shaderAbsolute(e,1)}make(){if(super.make(),this.bind.source==null)return;this._helpers.active.make(),this._listen("root","root.update",()=>{if(this.isActive)return this.update()});const{minFilter:e,magFilter:t,type:n}=this.props,r=this.bind.source.getDimensions(),{items:s,width:a,height:o,depth:l}=r;this.memo=this._renderables.make("memo",{items:s,width:a,height:o,depth:l,minFilter:e,magFilter:t,type:n});const c=this._shaders.shader();return this.bind.source.sourceShader(c),this.compose=this._renderables.make("memoScreen",{map:c,items:s,width:a,height:o,depth:l}),this.memo.adopt(this.compose),this.objects=[this.compose],this.renders=this.compose.renders}unmake(){this._helpers.active.unmake(),this.bind.source!=null&&(this.memo.unadopt(this.compose),this.memo.dispose(),this.memo=this.compose=null,super.unmake())}update(){return this.memo!=null?this.memo.render():void 0}resize(){if(this.bind.source==null)return;const e=this.bind.source.getActiveDimensions(),{width:t,height:n,depth:r}=e;return this.compose.cover(t,n,r),super.resize()}change(e,t,n){if(t.texture||t.operator)return this.rebuild()}};Qz.initClass();let qz=class extends Rs{static initClass(){this.traits=["node","bind","operator","readback","entity","active"],this.finals={channels:4}}init(){return this.emitter=this.root=null,this.active={}}make(){if(super.make(),this._compute("readback.data",()=>this.readback!=null?this.readback.data:void 0),this._compute("readback.items",()=>this.readback!=null?this.readback.items:void 0),this._compute("readback.width",()=>this.readback!=null?this.readback.width:void 0),this._compute("readback.height",()=>this.readback!=null?this.readback.height:void 0),this._compute("readback.depth",()=>this.readback!=null?this.readback.depth:void 0),this._helpers.bind.make([{to:"operator.source",trait:"source"}]),this.bind.source==null)return;const{type:e,channels:t,expr:n}=this.props;this.root=this._inherit("root"),this._listen("root","root.update",this.update);const{items:r,width:s,height:a,depth:o}=this.bind.source.getDimensions(),l=this.bind.source.sourceShader(this._shaders.shader());this.readback=this._renderables.make("readback",{map:l,items:r,width:s,height:a,depth:o,channels:t,type:e}),n!=null&&this.readback.setCallback(n),this._helpers.active.make()}unmake(){return this.readback!=null&&(this.readback.dispose(),this.readback=null,this.root=null,this.emitter=null,this.active={}),this._helpers.active.unmake(),this._helpers.bind.unmake()}update(){this.readback!=null&&this.isActive&&(this.readback.update(this.root!=null?this.root.getCamera():void 0),this.readback.post(),this.props.expr!=null&&this.readback.iterate())}resize(){let e,t;if(this.readback==null)return;const{items:n,width:r,height:s,depth:a}=this.bind.source.getActiveDimensions();return this.readback.setActive(n,r,s,a),this.strideI=e=n,this.strideJ=t=e*r,this.strideK=t*s}change(e,t,n){if(e["readback.type"])return this.rebuild();if(e["readback.expr"]&&this.readback)return this.readback.setCallback(this.props.expr)}};qz.initClass();class jz extends go{static initClass(){this.traits=["node","bind","operator","source","index","repeat"]}indexShader(e){return e.pipe(this.operator),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator),super.sourceShader(e)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(e){const t=this.resample;return{items:t.items*e.items,width:t.width*e.width,height:t.height*e.height,depth:t.depth*e.depth}}make(){if(super.make(),this.bind.source==null)return;this.resample={};const e={repeatModulus:this._attributes.make(this._types.vec4())};this.repeatModulus=e.repeatModulus;const t=this._shaders.shader();return t.pipe("repeat.position",e),this.operator=t}unmake(){return super.unmake()}resize(){if(this.bind.source!=null){const e=this.bind.source.getActiveDimensions();this.repeatModulus.value.set(e.width,e.height,e.depth,e.items)}return super.resize()}change(e,t,n){if(t.operator||t.repeat)return this.rebuild();if(n)return["items","width","height","depth"].map(r=>this.resample[r]=this.props[r])}}jz.initClass();class Wz extends go{static initClass(){this.traits=["node","bind","operator","source","index","reverse"]}getDimensions(){return this.bind.source.getDimensions()}getActiveDimensions(){return this.bind.source.getActiveDimensions()}getFutureDimensions(){return this.bind.source.getFutureDimensions()}getIndexDimensions(){return this.bind.source.getIndexDimensions()}sourceShader(e){return e.pipe("reverse.position",this.uniforms),this.bind.source.sourceShader(e)}_resolveScale(e,t){return this.props[e]?-1:1}_resolveOffset(e,t){const n=this.props[e],r=t[e];return n?r-1:0}make(){if(super.make(),this.bind.source!=null)return this.uniforms={reverseScale:this._attributes.make(this._types.vec4()),reverseOffset:this._attributes.make(this._types.vec4())}}unmake(){return super.unmake()}resize(){if(this.bind.source==null)return;const e=this.bind.source.getActiveDimensions();return this.uniforms.reverseScale.value.set(this._resolveScale("width",e),this._resolveScale("height",e),this._resolveScale("depth",e),this._resolveScale("items",e)),this.uniforms.reverseOffset.value.set(this._resolveOffset("width",e),this._resolveOffset("height",e),this._resolveOffset("depth",e),this._resolveOffset("items",e)),super.resize()}change(e,t,n){if(t.operator)return this.rebuild();if(t.reverse)return this.resize()}}Wz.initClass();class $z extends go{static initClass(){this.traits=["node","bind","operator","source","index","swizzle"]}sourceShader(e){return e=super.sourceShader(e),this.swizzler&&e.pipe(this.swizzler),e}make(){if(super.make(),this.bind.source==null)return;const{order:e}=this.props;if(e.join()!=="1234")return this.swizzler=hl(e,4)}unmake(){return super.unmake(),this.swizzler=null}change(e,t,n){if(t.swizzle||t.operator)return this.rebuild()}}$z.initClass();class Xz extends go{static initClass(){this.traits=["node","bind","operator","source","index","spread"]}sourceShader(e){return e.pipe(this.operator)}make(){if(super.make(),this.bind.source==null)return;const e={spreadMatrix:this._attributes.make(this._types.mat4()),spreadOffset:this._attributes.make(this._types.vec4())};this.spreadMatrix=e.spreadMatrix,this.spreadOffset=e.spreadOffset;const t=this._shaders.shader();return t.require(this.bind.source.sourceShader(this._shaders.shader())),t.pipe("spread.position",e),this.operator=t}unmake(){return super.unmake()}resize(){return this.update(),super.resize()}update(){let e,t,n,r;const s=this.bind.source.getFutureDimensions(),o=this.spreadMatrix.value.elements,l=["width","height","depth","items"],c=["alignWidth","alignHeight","alignDepth","alignItems"],{unit:u}=this.props,h=this.node.attributes["spread.unit"].enum,d=(()=>{switch(u){case h.relative:return(f,m,A,_)=>o[m*4+A]=_/Math.max(1,s[f]-1);case h.absolute:return(f,m,A,_)=>o[m*4+A]=_}})();return(()=>{const f=[];for(t=0;t<l.length;t++){let m;e=l[t];const A=this.props[e],_=this.props[c[t]];A!=null?m=-((s[e]!=null?s[e]:1)-1)*(.5-_*.5):m=0,this.spreadOffset.value.setComponent(t,m),f.push((()=>{const v=[];for(n=0;n<=3;n++){let w;r=(w=A!=null?A.getComponent(n):void 0)!=null?w:0,v.push(o[t*4+n]=d(e,t,n,r))}return v})())}return f})()}change(e,t,n){if(t.operator)return this.rebuild();if(t.spread)return this.update()}}Xz.initClass();class Yz extends go{static initClass(){this.traits=["node","bind","operator","source","index","split"]}indexShader(e){return e.pipe(this.operator),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator),super.sourceShader(e)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(e){let t;const{order:n}=this,{axis:r}=this,{overlap:s}=this,{length:a}=this,{stride:o}=this,l=["width","height","depth","items"],c=n.map(m=>l[m-1]),u=n.indexOf(r);let h=(()=>{const m=[];for(t of Array.from(c))m.push(e[t]);return m})();const d=Math.floor((h[u]-s)/o);h.splice(u,1,a,d),h=h.slice(0,4);const f={};for(let m=0;m<c.length;m++)t=c[m],f[t]=h[m];return f}make(){let e;if(super.make(),this.bind.source==null)return;const{order:t}=this.props;let{axis:n}=this.props,{overlap:r}=this.props;const{length:s}=this.props,a=t.join("");n==null&&(n=t[0]);const o=a.indexOf(n),l=a[o]+((e=a[o+1])!=null?e:0),c=a.replace(l[1],"").replace(l[0],"0")+"0";r=Math.min(s-1,r);const u=s-r,h={splitStride:this._attributes.make(this._types.number(u))},d=this._shaders.shader();return d.require(hl(l,2)),d.require(hl(c,4)),d.require(fI(o)),d.pipe("split.position",h),d.pipe(lC(t)),this.operator=d,this.order=t,this.axis=n,this.overlap=r,this.length=s,this.stride=u}unmake(){return super.unmake()}change(e,t,n){if(e["split.axis"]||e["split.order"]||t.operator)return this.rebuild()}}Yz.initClass();class Kz extends go{static initClass(){this.traits=["node","bind","operator","source","index","slice"]}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}sourceShader(e){return e.pipe("slice.position",this.uniforms),this.bind.source.sourceShader(e)}_resolve(e,t){const n=this.props[e],r=t[e];if(n==null)return[0,r];const s=function(l,c){return l<0?c+l:l},a=s(Math.round(n.x),r);let o=s(Math.round(n.y),r);return o=Math.max(a,o),[a,o-a]}_resample(e){return e.width=this._resolve("width",e)[1],e.height=this._resolve("height",e)[1],e.depth=this._resolve("depth",e)[1],e.items=this._resolve("items",e)[1],e}make(){if(super.make(),this.bind.source!=null)return this.uniforms={sliceOffset:this._attributes.make(this._types.vec4())}}unmake(){return super.unmake()}resize(){if(this.bind.source==null)return;const e=this.bind.source.getActiveDimensions();return this.uniforms.sliceOffset.value.set(this._resolve("width",e)[0],this._resolve("height",e)[0],this._resolve("depth",e)[0],this._resolve("items",e)[0]),super.resize()}change(e,t,n){if(t.operator)return this.rebuild();if(t.slice)return this.resize()}}Kz.initClass();class Jz extends go{static initClass(){this.traits=["node","bind","operator","source","index","subdivide"]}indexShader(e){return e.pipe(this.indexer),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(e){const t=this.resampled;return e.items--,e.width--,e.height--,e.depth--,t.items!=null&&(e.items*=t.items),t.width!=null&&(e.width*=t.width),t.height!=null&&(e.height*=t.height),t.depth!=null&&(e.depth*=t.depth),e.items++,e.width++,e.height++,e.depth++,e}make(){if(super.make(),this.bind.source==null)return;let{lerp:e}=this.props;const{items:t,width:n,height:r,depth:s}=this.props;this.resampled={},t!=null&&(this.resampled.items=t),n!=null&&(this.resampled.width=n),r!=null&&(this.resampled.height=r),s!=null&&(this.resampled.depth=s);const a=this._shaders.shader(),o=this._shaders.shader(),l={resampleFactor:this._attributes.make(this._types.vec4(0,0,0,0)),subdivideBevel:this.node.attributes["subdivide.bevel"]};this.resampleFactor=l.resampleFactor,this.resampleBias=l.resampleBias,t!=null||n!=null||r!=null||s!=null?(a.pipe("resample.relative",l),o.pipe("resample.relative",l)):(a.pipe(fh("vec4")),o.pipe(fh("vec4")));let u=this.bind.source.sourceShader(this._shaders.shader());e=e?".lerp":"";const h=["width","height","depth","items"];for(let d=0;d<h.length;d++){const f=h[d],m=`subdivide.${f}${e}`;this.props[f]!=null&&(u=this._shaders.shader().require(u),u.pipe(m,l))}return a.pipe(u),this.operator=a,this.indexer=o}unmake(){return super.unmake(),this.operator=null}resize(){if(this.bind.source==null)return;const e=this.bind.source.getActiveDimensions(),t=this.getActiveDimensions(),n=l=>Math.max(1,e[l]-1)/Math.max(1,t[l]-1),r=n("width"),s=n("height"),a=n("depth"),o=n("items");return this.resampleFactor.value.set(r,s,a,o),super.resize()}change(e,t,n){if(t.operator||t.subdivide)return this.rebuild()}}Jz.initClass();const uR={1:"width",2:"height",3:"depth",4:"items"};class Zz extends go{static initClass(){this.traits=["node","bind","operator","source","index","transpose"]}indexShader(e){return this.swizzler&&e.pipe(this.swizzler),super.indexShader(e)}sourceShader(e){return this.swizzler&&e.pipe(this.swizzler),super.sourceShader(e)}getDimensions(){return this._remap(this.transpose,this.bind.source.getDimensions())}getActiveDimensions(){return this._remap(this.transpose,this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._remap(this.transpose,this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._remap(this.transpose,this.bind.source.getIndexDimensions())}_remap(e,t){const n={};for(let r=0;r<=3;r++){const s=uR[r+1],a=uR[e[r]];n[s]=t[a]!=null?t[a]:1}return n}make(){if(super.make(),this.bind.source==null)return;const{order:e}=this.props;return e.join()!=="1234"&&(this.swizzler=lC(e)),this.transpose=e,this.trigger({type:"source.rebuild"})}unmake(){return super.unmake(),this.swizzler=null}change(e,t,n){if(t.transpose||t.operator)return this.rebuild()}}Zz.initClass();class II extends yl{static initClass(){this.traits=["node","transition","transform","mask","visible","active"]}init(){return this.animate=null,this.uniforms=null,this.state={isVisible:!0,isActive:!0,enter:1,exit:1},this.latched=null,this.locked=null}make(){this.uniforms={transitionFrom:this._attributes.make(this._types.vec4()),transitionTo:this._attributes.make(this._types.vec4()),transitionActive:this._attributes.make(this._types.bool()),transitionScale:this._attributes.make(this._types.vec4()),transitionBias:this._attributes.make(this._types.vec4()),transitionEnter:this._attributes.make(this._types.number()),transitionExit:this._attributes.make(this._types.number()),transitionSkew:this._attributes.make(this._types.number())};const e=this._inherit("slide"),t=this._inherit("visible"),n=this._inherit("active");return this._listen(e,"transition.latch",r=>this.latch(r.step)),this._listen(e,"transition.release",()=>this.release()),this._listen(t,"visible.change",()=>this.update(this.state.isVisible=t.isVisible)),this._listen(n,"active.change",()=>this.update(this.state.isActive=n.isActive)),this.animate=this._animator.make(this._types.vec2(1,1),{step:r=>(this.state.enter=r.x,this.state.exit=r.y,this.update()),complete:r=>this.complete(r)}),this.move=this.props.from!=null||this.props.to!=null}unmake(){return this.animate.dispose()}latch(e){let t;if(this.locked=null,this.latched=t={isVisible:this.state.isVisible,isActive:this.state.isActive,step:e},!this.isVisible){const r=t.step>=0,[s,a]=Array.from(r?[0,1]:[1,0]);return this.animate.set(s,a)}}release(){const{latched:e}=this,{state:t}=this;if(this.latched=null,e.isVisible!==t.isVisible){const n=e.step>=0,r=t.isVisible,[s,a]=Array.from(r?[1,1]:n?[1,0]:[0,1]);let{duration:o,durationEnter:l,durationExit:c}=this.props;l==null&&(l=o),c==null&&(c=o),o=r*l+!r*c;let{delay:u,delayEnter:h,delayExit:d}=this.props;h==null&&(h=u),d==null&&(d=u),u=r*h+!r*d,this.animate.immediate({x:s,y:a},{duration:o,delay:u,ease:"linear"}),this.locked={isVisible:!0,isActive:e.isActive||t.isActive}}return this.update()}complete(e){if(e)return this.locked=null,this.update()}update(){if(this.latched!=null)return;let{enter:e,exit:t}=this.props;e==null&&({enter:e}=this.state),t==null&&({exit:t}=this.state);const n=e*t;let r=n>0;const s=n<1;this.uniforms.transitionEnter.value=e,this.uniforms.transitionExit.value=t,this.uniforms.transitionActive.value=s,r&&(r=!!this.state.isVisible),this.locked!=null&&(r=this.locked.isVisible),this.isVisible!==r&&(this.isVisible=r,this.trigger({type:"visible.change"}));const a=!!(this.state.isActive||this.locked!=null&&this.locked.isActive);if(this.isActive!==a)return this.isActive=a,this.trigger({type:"active.change"})}change(e,t,n){if((e["transition.enter"]||e["transition.exit"]||n)&&this.update(),e["transition.stagger"]||n){const{stagger:r}=this.props,s=r.x<0,a=r.y<0,o=r.z<0,l=r.w<0,c=Math.abs(r.x),u=Math.abs(r.y),h=Math.abs(r.z),d=Math.abs(r.w);return this.uniforms.transitionSkew.value=c+u+h+d,this.uniforms.transitionScale.value.set((1-s*2)*c,(1-a*2)*u,(1-o*2)*h,(1-l*2)*d),this.uniforms.transitionBias.value.set(s*c,a*u,o*h,l*d)}}}II.initClass();class eU extends II{static initClass(){this.traits=["node","transition","vertex","move","visible","active"]}make(){super.make();const e={moveFrom:this.node.attributes["move.from"],moveTo:this.node.attributes["move.to"]};for(const t in e){const n=e[t];this.uniforms[t]=n}}vertex(e,t){let n;return t===this.props.pass&&e.pipe("move.position",this.uniforms),(n=tXe(this._inherit("vertex"),r=>r.vertex(e,t)))!=null?n:e}}eU.initClass();function tXe(i,e){return typeof i<"u"&&i!==null?e(i):void 0}function _C(i,e,t){return Math.max(e,Math.min(t,i))}function R1(i){return .5-.5*Math.cos(_C(i,0,1)*Math.PI)}function PI(i){return+(i>=.5)}function kI(i){return+(i>=1)}const nXe=Object.freeze(Object.defineProperty({__proto__:null,binary:PI,clamp:_C,cosine:R1,hold:kI},Symbol.toStringTag,{value:"Module"})),QA=function(i){const e={};for(const t in i){const n=i[t];n instanceof Array?e[t]=n.slice():n!=null&&typeof n=="object"?e[t]=QA(n):e[t]=n}return e};class BI extends Rs{static initClass(){this.traits=["node","track","seek","bind"]}init(){return this.handlers={},this.script=null,this.values=null,this.playhead=0,this.velocity=null,this.section=null,this.expr=null}make(){let e;this._helpers.bind.make([{to:"track.target",trait:"node",callback:null}]);const{script:t}=this.props,{node:n}=this.bind.target;return this.targetNode=n,[this.script,this.values,this.start,this.end]=Array.from(e=this._process(n,t)),e}unmake(){return this.unbindExpr(),this._helpers.bind.unmake(),this.script=this.values=this.start=this.end=this.section=this.expr=null,this.playhead=0}bindExpr(e){this.unbindExpr(),this.expr=e,this.targetNode.bind(e,!0);const{clock:t}=this.targetNode,n=this;return this._attributes.bind(this.measure=function(){let r=null;return()=>{const{step:s}=t.getTime();return r!=null&&(n.velocity=(n.playhead-r)/s),r=n.playhead}}())}unbindExpr(){return this.expr!=null&&this.targetNode.unbind(this.expr,!0),this.measure!=null&&this._attributes.unbind(this.measure),this.expr=this.measure=null}_process(e,t){let n,r,s,a,o,l,c;if(t instanceof Array){o={};for(let A=0;A<t.length;A++)l=t[A],o[A]=l;t=o}o=[];for(r in t)l=t[r],l==null&&(l=[]),l instanceof Array?l={key:+r,props:l[0]!=null?QA(l[0]):{},bind:l[1]!=null?QA(l[1]):{}}:(l.key==null&&!l.props&&!l.bind?l={props:QA(l)}:l=QA(l),l.key=l.key!=null?+l.key:+r,l.props==null&&(l.props={}),l.bind==null&&(l.bind={})),o.push(l);if(t=o,!t.length)return[[],{},0,0];t.sort((A,_)=>A.key-_.key);const u=t[0].key,h=t[t.length-1].key;for(r in t)l=t[r],s!=null&&(s.next=l),s=l;s.next=s,t=o;const d={},f={};for(r in t){l=t[r];for(n in l.props)c=l.props[n],d[n]=!0}for(r in t){l=t[r];for(n in l.bind)c=l.bind[n],d[n]=!0}for(n in d)d[n]=e.get(n);try{for(n in d)f[n]=[e.attribute(n).T.make(),e.attribute(n).T.make(),e.attribute(n).T.make()]}catch{throw console.warn(this.node.toMarkup()),a=`${this.node.toString()} - Target ${e} has no \`${n}\` property`,new Error(a)}const m=[];for(l of Array.from(t)){for(n in d)if(c=d[n],c=e.validate(n,l.props[n]!=null?l.props[n]:c),d[n]=l.props[n]=c,l.bind[n]!=null&&typeof l.bind[n]!="function")throw console.warn(this.node.toMarkup()),a=`${this.node.toString()} - Bind expression \`${l.bind[n]}\` on property \`${n}\` is not a function`,new Error(a);m.push(l)}return[m,f,u,h]}update(){let{playhead:e}=this;const{script:t}=this,{ease:n,seek:r}=this.props,s=this.targetNode;if(r!=null&&(e=r),t.length){let a;const o=function(){let x=t[0];for(let C=0;C<t.length;C++){const S=t[C];if(S.key>e)break;x=S}return x};let{section:l}=this;if((!l||e<l.key||e>l.next.key)&&(l=o()),l===this.section)return;this.section=l;const c=l,u=l.next,h=c.key,d=u.key,f=(()=>{switch(n){case"linear":case 0:return _C;case"cosine":case 1:return R1;case"binary":case 2:return PI;case"hold":case 3:return kI;default:return R1}})(),{clock:m}=s,A=x=>{if(this.velocity==null)return this.playhead;const C=m.getTime();return this.playhead+this.velocity*(x-C.time)},_=function(){const x=1/Math.max(1e-4,d-h);return C=>f((A(C)-h)*x,0,1)}(),v=x=>{const C=c.bind[x],S=u.bind[x],I=c.props[x],P=u.props[x],k=function(){throw console.warn(s.toMarkup()),new Error(`${this.node.toString()} - Invalid expression result on track \`${x}\``)},M=s.attribute(x),R=this.values[x],N=this._animator;return C&&S?((U,q,W)=>function(F,ue){let J,Y;return U[0]=J=M.T.validate(C(F,ue),U[0],k),U[1]=Y=M.T.validate(S(F,ue),U[1],k),U[2]=N.lerp(M.T,J,Y,_(F),U[2])})(R):C?((U,q,W)=>function(F,ue){let J;return U[0]=J=M.T.validate(C(F,ue),U[0],k),U[1]=N.lerp(M.T,J,P,_(F),U[1])})(R):S?((U,q,W)=>function(F,ue){let J;return U[0]=J=M.T.validate(S(F,ue),U[0],k),U[1]=N.lerp(M.T,I,J,_(F),U[1])})(R):((U,q,W)=>(F,ue)=>U[0]=N.lerp(M.T,I,P,_(F),U[0]))(R)},w={};for(a in c.bind)w[a]==null&&(w[a]=v(a));for(a in u.bind)w[a]==null&&(w[a]=v(a));for(a in c.props)w[a]==null&&(w[a]=v(a));for(a in u.props)w[a]==null&&(w[a]=v(a));return this.bindExpr(w)}}change(e,t,n){if(e["track.target"]||e["track.script"]||e["track.mode"])return this.rebuild();if(e["seek.seek"]||n)return this.update()}}BI.initClass();let tU=class extends BI{static initClass(){this.traits=["node","track","trigger","play","bind"]}init(){return super.init(),this.skew=null,this.start=null}reset(e){return e==null&&(e=!0),this.skew=e?0:null,this.start=null}make(){super.make(),this._listen("slide","slide.step",t=>{const{trigger:n}=this.props;if(n!=null&&t.index===n)return this.reset();if(n!=null&&t.index===0)return this.reset(!1)}),(!this.props.trigger||this._inherit("slide")==null)&&this.reset();const e=this._inherit("clock");return this._listen(e,"clock.tick",()=>{const{from:t,to:n,speed:r,pace:s,delay:a,realtime:o}=this.props,l=e.getTime();if(this.skew!=null){const c=o?l.time:l.clock,u=o?l.delta:l.step,h=r/s;this.start==null&&(this.start=c),this.skew+=u*(h-1);let d=Math.max(0,c-this.start+this.skew-a*h);this.props.loop&&(d=d%(n-t)),this.playhead=Math.min(n,t+d)}else this.playhead=0;return this.update()})}update(){return super.update()}change(e,t,n){return e["trigger.trigger"]||e["play.realtime"]?this.rebuild():super.change(e,t,n)}};tU.initClass();class nU extends yl{static initClass(){this.traits=["node","present"]}init(){}make(){return this.nodes=[],this.steps=[],this.length=0,this.last=[],this.index=0,this.dirty=[],this._listen("root","root.update",this.update),this._compute("present.length",()=>this.length)}adopt(e){const{node:t}=e;return this.nodes.indexOf(e)<0&&this.nodes.push(t),this.dirty.push(e)}unadopt(e){return this.nodes=this.nodes.filter(t=>t!==e),this.dirty.push(e)}update(){if(this.dirty.length){for(const e of Array.from(this.dirty))this.slideReset(e);return[this.steps,this.indices]=Array.from(this.process(this.nodes)),this.length=this.steps.length,this.index=null,this.go(this.props.index),this.dirty=[]}}slideLatch(e,t,n){return e.slideLatch(t,n)}slideStep(e,t,n){return e.slideStep(this.mapIndex(e,t),n)}slideRelease(e,t){return e.slideRelease()}slideReset(e){return e.slideReset()}mapIndex(e,t){return t-this.indices[e.node._id]}process(e){const t=f=>Array.from(f).map(m=>r(m).filter(s)),r=(f=>m=>(()=>{let A,_;const v=[];for(;m&&([m,A]=Array.from(_=[f(m),m]),_);)v.push(A);return v})())(function(f){return f.parent.traits.hash.present?null:f.parent}),s=f=>e.indexOf(f)>=0,a=f=>f.sort(function(m,A){const _=m.length,v=A.length;let w=Math.min(_,v);for(let x=1,C=w,S=1<=C;S?x<=C:x>=C;S?x++:x--){const I=m[_-x],P=A[v-x],k=I.props.order,M=P.props.order;if(k!=null||M!=null){if(k!=null&&M!=null&&(w=k-M)!==0)return w;if(k!=null)return-1;if(M!=null)return 1}if(P.order!==I.order)return P.order-I.order}return w=_-v,w!==0?w:0}),o=function(f){const m=[],A=[];for(const _ of Array.from(f))(_[0].props.steps!=null?m:A).push(_);return[m,A]},l=function(f){let m;const[A,_]=Array.from(f),v=100,w={};let x=[];const C=function(I,P){let k;const{props:M}=k=I[0],R=I[1],N=R!=null?w[R._id]:0,U=P;let q=M.from!=null?N+M.from:U-M.early,W=M.to!=null?N+M.to:U+M.steps+M.late;q=Math.max(0,q),W=Math.min(v,W),w[k._id]==null&&(w[k._id]=q);for(let F=q,ue=W,J=q<=ue;J?F<ue:F>ue;J?F++:F--)x[F]=(x[F]!=null?x[F]:x[F]=[]).concat(I);return M.steps};let S=0;for(m of Array.from(A))S+=C(m,S);for(m of Array.from(_))C(m,0);return x=(()=>{const I=[];for(m of Array.from(x))I.push(u(c(m)));return I})(),[x,w]},c=function(f){return f?(()=>{const m=[];for(let A=0;A<f.length;A++){const _=f[A];f.indexOf(_)===A&&m.push(_)}return m})():[]},u=f=>f.sort((m,A)=>m.order-A.order),h=t(e),d=a(h);return l(o(d))}go(e){let t,n;e=Math.max(0,Math.min(this.length+1,+e||0));const r=(t=this.steps[e-1])!=null?t:[],s=this.props.directed?e-this.index:1;this.index=e;const a=(()=>{const h=[];for(n of Array.from(r))this.last.indexOf(n)<0&&h.push(n);return h})(),o=(()=>{const h=[];for(n of Array.from(this.last))r.indexOf(n)<0&&h.push(n);return h})(),l=(()=>{const h=[];for(n of Array.from(r))a.indexOf(n)<0&&o.indexOf(n)<0&&h.push(n);return h})(),c=h=>h.sort((d,f)=>d.order-f.order),u=h=>h.sort((d,f)=>f.order-d.order);for(n of Array.from(c(a)))this.slideLatch(n.controller,!0,s);for(n of Array.from(c(l)))this.slideLatch(n.controller,null,s);for(n of Array.from(c(o)))this.slideLatch(n.controller,!1,s);for(n of Array.from(a))this.slideStep(n.controller,e,s);for(n of Array.from(l))this.slideStep(n.controller,e,s);for(n of Array.from(o))this.slideStep(n.controller,e,s);for(n of Array.from(u(a)))this.slideRelease(n.controller);for(n of Array.from(u(l)))this.slideRelease(n.controller);for(n of Array.from(u(o)))this.slideRelease(n.controller);this.last=r}change(e,t,n){if(e["present.index"]||n)return this.go(this.props.index)}}nU.initClass();class iU extends II{static initClass(){this.traits=["node","transition","mask","visible","active"]}mask(e){let t,n;return e?(n=this._shaders.shader(),n.pipe(fh("vec4")),n.fan(),n.pipe(e,this.uniforms),n.next(),n.pipe("reveal.mask",this.uniforms),n.end(),n.pipe("float combine(float a, float b) { return min(a, b); }")):(n=this._shaders.shader(),n.pipe("reveal.mask",this.uniforms)),(t=iXe(this._inherit("mask"),r=>r.mask(n)))!=null?t:n}}iU.initClass();function iXe(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class rU extends yl{static initClass(){this.traits=["node","slide","visible","active"]}make(){if(this._helpers.visible.make(),this._helpers.active.make(),!this._inherit("present"))throw new Error(`${this.node.toString()} must be placed inside <present></present>`);return this._inherit("present").adopt(this)}unmake(){return this._helpers.visible.unmake(),this._helpers.active.unmake(),this._inherit("present").unadopt(this)}change(e,t,n){if(e["slide.early"]||e["slide.late"]||e["slide.steps"]||e["slide.from"]||e["slide.to"])return this.rebuild()}slideLatch(e,t){if(this.trigger({type:"transition.latch",step:t}),e!=null)return this._instant(e)}slideStep(e,t){return this.trigger({type:"slide.step",index:e,step:t})}slideRelease(){return this.trigger({type:"transition.release"})}slideReset(){return this._instant(!1),this.trigger({type:"slide.reset"})}_instant(e){return this.setVisible(e),this.setActive(e)}}rU.initClass();class sU extends BI{static initClass(){this.traits=["node","track","step","trigger","bind"]}make(){super.make();const e=this._inherit("clock");return this.actualIndex==null&&(this.actualIndex=null),this.animateIndex=this._animator.make(this._types.number(0),{clock:e,realtime:this.props.realtime,step:t=>this.actualIndex=t}),this.lastIndex==null&&(this.lastIndex=null),this.animateStep=this._animator.make(this._types.number(0),{clock:e,realtime:this.props.realtime,step:t=>(this.playhead=t,this.update())}),this.stops=this.props.stops!=null?this.props.stops:rXe(0,this.script.length,!1),this._listen("slide","slide.reset",t=>this.lastIndex=null),this._listen("slide","slide.step",t=>{let n,{duration:r}=this.props;const{delay:s,pace:a,speed:o,playback:l,rewind:c,skip:u,trigger:h}=this.props,d=Math.max(0,Math.min(this.stops.length-1,t.index-h)),f=this.playhead,m=this.stops[d];if(this.lastIndex==null&&h){this.lastIndex=d,this.animateStep.set(m),this.animateIndex.set(d);return}let A=(n=this.actualIndex!=null?this.actualIndex:this.lastIndex)!=null?n:0;const _=d-A,v=this.stops.slice(Math.min(A,d),Math.max(A,d));let w=0;A=v.shift();for(const C of Array.from(v))A===C&&w++,A=C;this.lastIndex=d;let x=o*(t.step>=0?1:c);if(x*=u?Math.max(1,Math.abs(_)-w):1,r+=Math.abs(m-f)*a/x,f!==m)return this.animateIndex.immediate(d,{delay:s,duration:r,ease:l}),this.animateStep.immediate(m,{delay:s,duration:r,ease:l})})}made(){return this.update()}unmake(){return this.animateIndex.dispose(),this.animateStep.dispose(),this.animateIndex=this.animateStep=null,super.unmake()}change(e,t,n){return e["step.stops"]||e["step.realtime"]?this.rebuild():super.change(e,t,n)}}sU.initClass();function rXe(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let a=i;r?a<s:a>s;r?a++:a--)n.push(a);return n}class aU extends yl{static initClass(){this.traits=["node","root","scene","vertex","texture","rtt","source","index","image"],this.defaults={minFilter:"linear",magFilter:"linear",type:"unsignedByte"}}init(){return this.rtt=this.scene=this.camera=this.width=this.height=this.history=this.rootSize=this.size=null}indexShader(e){return e}imageShader(e){return this.rtt.shaderRelative(e)}sourceShader(e){return this.rtt.shaderAbsolute(e,this.history)}getDimensions(){return{items:1,width:this.width,height:this.height,depth:this.history}}getActiveDimensions(){return this.getDimensions()}make(){let e;if(this.parentRoot=this._inherit("root"),this.rootSize=this.parentRoot.getSize(),this._listen(this.parentRoot,"root.pre",this.pre),this._listen(this.parentRoot,"root.update",this.update),this._listen(this.parentRoot,"root.render",this.render),this._listen(this.parentRoot,"root.post",this.post),this._listen(this.parentRoot,"root.camera",this.setCamera),this._listen(this.parentRoot,"root.resize",function(m){return this.resize(m.size)}),this.rootSize==null)return;const{minFilter:t,magFilter:n,type:r}=this.props,{width:s,height:a,history:o,size:l}=this.props,c=l===this.node.attributes["rtt.size"].enum.relative,u=c?this.rootSize.renderWidth:1,h=c?this.rootSize.renderHeight:1;this.width=Math.round(s!=null?s*u:this.rootSize.renderWidth),this.height=Math.round(a!=null?a*h:this.rootSize.renderHeight),this.history=o,this.aspect=e=this.width/this.height,this.scene==null&&(this.scene=this._renderables.make("scene")),this.rtt=this._renderables.make("renderToTexture",{scene:this.scene,camera:this._context.defaultCamera,width:this.width,height:this.height,frames:this.history,minFilter:t,magFilter:n,type:r}),e=s||a?e:this.rootSize.aspect;const d=s??this.rootSize.viewWidth,f=a??this.rootSize.viewHeight;return this.size={renderWidth:this.width,renderHeight:this.height,aspect:e,viewWidth:d,viewHeight:f,pixelRatio:this.height/f}}made(){if(this.trigger({type:"source.rebuild"}),this.size)return this.trigger({type:"root.resize",size:this.size})}unmake(e){if(this.rtt!=null)return this.rtt.dispose(),e||this.scene.dispose(),this.rtt=this.width=this.height=this.history=null}change(e,t,n){if(t.texture||e["rtt.width"]||e["rtt.height"])return this.rebuild();if(e["root.camera"]||n)return this._unattach(),this._attach(this.props.camera,"camera",this.setCamera,this,this,!0),this.setCamera()}adopt(e){return Array.from(e.renders).map(t=>this.scene.add(t))}unadopt(e){return Array.from(e.renders).map(t=>this.scene.remove(t))}resize(e){let t,n;this.rootSize=e,{width:n,height:t,size:e}=this.props;const r=e===this.node.attributes["rtt.size"].enum.relative;if(!this.rtt||n==null||t==null||r)return this.rebuild()}select(e){return this._root.node.model.select(e,[this.node])}watch(e,t){return this._root.node.model.watch(e,t)}unwatch(e){return this._root.node.model.unwatch(e)}pre(e){return this.trigger(e)}update(e){let t;return(t=this.getOwnCamera())!=null&&(t.aspect=this.aspect||1,t.updateProjectionMatrix()),this.trigger(e)}render(e){return this.trigger(e),this.rtt!=null?this.rtt.render(this.getCamera()):void 0}post(e){return this.trigger(e)}setCamera(){const e=sXe(this.select(this.props.camera)[0],t=>t.controller);if(this.camera!==e)return this.camera=e,this.rtt.camera=this.getCamera(),this.trigger({type:"root.camera"});if(!this.camera)return this.trigger({type:"root.camera"})}getOwnCamera(){return this.camera!=null?this.camera.getCamera():void 0}getCamera(){let e;return(e=this.getOwnCamera())!=null?e:this._inherit("root").getCamera()}vertex(e,t){return t===2?e.pipe("view.position"):t===3?e.pipe("root.position"):e}}aU.initClass();function sXe(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class oU extends Rs{static initClass(){this.traits=["node","bind","object","visible","operator","style","compose"],this.defaults={zWrite:!1,zTest:!1,color:"#ffffff"}}init(){return this.compose=null}resize(){if(!this.compose||!this.bind.source)return;const e=this.bind.source.getActiveDimensions(),{width:t}=e,{height:n}=e;return this.remapUVScale.set(t,n)}make(){if(this._helpers.bind.make([{to:"operator.source",trait:"source"}]),this.bind.source==null)return;const e={remapUVScale:this._attributes.make(this._types.vec2())};this.remapUVScale=e.remapUVScale.value;let t=this._shaders.shader();const{alpha:n}=this.props;this.bind.source.is("image")?(t.pipe("screen.pass.uv",e),t=this.bind.source.imageShader(t)):(t.pipe("screen.map.xy",e),t=this.bind.source.sourceShader(t)),n||t.pipe("color.opaque");const r=this._helpers.style.uniforms();return this.compose=this._renderables.make("screen",{map:t,uniforms:r,linear:!0}),this._helpers.visible.make(),this._helpers.object.make([this.compose])}made(){return this.resize()}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake()}change(e,t,n){if(e["operator.source"]||e["compose.alpha"])return this.rebuild()}}oU.initClass();class sp extends Y0{static initClass(){this.traits=["node","object","visible","view","vertex"]}make(){return this._helpers.visible.make()}unmake(){return this._helpers.visible.unmake()}axis(e){return this.props.range[e-1]}}sp.initClass();class lU extends sp{static initClass(){this.traits=["node","object","visible","view","view3","vertex"]}make(){super.make(),this.uniforms={viewMatrix:this._attributes.make(this._types.mat4())},this.viewMatrix=this.uniforms.viewMatrix.value,this.composer=uv()}unmake(){super.unmake(),delete this.viewMatrix,delete this.objectMatrix,delete this.uniforms}change(e,t,n){if(!t.view&&!t.view3&&!n)return;const r=this.props.position,s=this.props.scale,a=this.props.quaternion,o=this.props.rotation,l=this.props.range,c=this.props.eulerOrder,{x:u}=l[0],h=l[1].x,d=l[2].x,f=l[0].y-u||1,m=l[1].y-h||1,A=l[2].y-d||1;this.viewMatrix.set(2/f,0,0,-(2*u+f)/f,0,2/m,0,-(2*h+m)/m,0,0,2/A,-(2*d+A)/A,0,0,0,1);const _=this.composer(r,o,a,s,null,c);this.viewMatrix.multiplyMatrices(_,this.viewMatrix),e["view.range"]&&this.trigger({type:"view.range"})}vertex(e,t){return t===1&&e.pipe("cartesian.position",this.uniforms),super.vertex(e,t)}}lU.initClass();class cU extends sp{static initClass(){this.traits=["node","object","visible","view","view4","vertex"]}make(){return super.make(),this.uniforms={basisOffset:this._attributes.make(this._types.vec4()),basisScale:this._attributes.make(this._types.vec4())},this.basisScale=this.uniforms.basisScale.value,this.basisOffset=this.uniforms.basisOffset.value}unmake(){return super.unmake(),delete this.basisScale,delete this.basisOffset,delete this.uniforms}change(e,t,n){if(!t.view&&!t.view4&&!n)return;const r=this.props.position,s=this.props.scale,a=this.props.range,{x:o}=a[0],l=a[1].x,c=a[2].x,u=a[3].x,h=a[0].y-o||1,d=a[1].y-l||1,f=a[2].y-c||1,m=a[3].y-u||1,A=function(_,v){return _.x*=v.x,_.y*=v.y,_.z*=v.z,_.w*=v.w};if(this.basisScale.set(2/h,2/d,2/f,2/m),this.basisOffset.set(-(2*o+h)/h,-(2*l+d)/d,-(2*c+f)/f,-(2*u+m)/m),A(this.basisScale,s),A(this.basisOffset,s),this.basisOffset.add(r),e["view.range"])return this.trigger({type:"view.range"})}vertex(e,t){return t===1&&e.pipe("cartesian4.position",this.uniforms),super.vertex(e,t)}}cU.initClass();class uU extends sp{static initClass(){this.traits=["node","object","visible","view","view3","polar","vertex"]}make(){super.make();const{types:e}=this._attributes;return this.uniforms={polarBend:this.node.attributes["polar.bend"],polarHelix:this.node.attributes["polar.helix"],polarFocus:this._attributes.make(e.number()),polarAspect:this._attributes.make(e.number()),viewMatrix:this._attributes.make(e.mat4())},this.viewMatrix=this.uniforms.viewMatrix.value,this.composer=uv(),this.aspect=1}unmake(){return super.unmake(),delete this.viewMatrix,delete this.objectMatrix,delete this.aspect,delete this.uniforms}change(e,t,n){let r,s,a;if(!t.view&&!t.view3&&!t.polar&&!n)return;this.helix=this.props.helix,this.bend=s=this.props.bend,this.focus=a=s>0?1/s-1:0;const o=this.props.position,l=this.props.scale,c=this.props.quaternion,u=this.props.rotation,h=this.props.range,d=this.props.eulerOrder,{x:f}=h[0];let m=h[1].x;const A=h[2].x,_=h[0].y-f||1;let v=h[1].y-m||1;const w=h[2].y-A||1,x=l.x,C=l.y,S=_>0?1:-1;[m,v]=Array.from(Vg(m,v,s));const I=Math.abs(v),P=_+(I*S-_)*s,k=P/x,M=v/C;this.aspect=r=Math.abs(k/M),this.uniforms.polarFocus.value=a,this.uniforms.polarAspect.value=r,this.viewMatrix.set(2/P,0,0,-(2*f+_)/_,0,2/v,0,-(2*m+v)/v,0,0,2/w,-(2*A+w)/w,0,0,0,1);const R=this.composer(o,u,c,l,null,d);this.viewMatrix.multiplyMatrices(R,this.viewMatrix),(e["view.range"]||t.polar)&&this.trigger({type:"view.range"})}vertex(e,t){return t===1&&e.pipe("polar.position",this.uniforms),super.vertex(e,t)}axis(e){const t=this.props.range[e-1];let n=t.x,r=t.y;return e===2&&this.bend>0&&(r=Math.max(Math.abs(r),Math.abs(n)),n=Math.max(-this.focus/this.aspect,n)),new _t(n,r)}}uU.initClass();class hU extends sp{static initClass(){this.traits=["node","object","visible","view","view3","spherical","vertex"]}make(){return super.make(),this.uniforms={sphericalBend:this.node.attributes["spherical.bend"],sphericalFocus:this._attributes.make(this._types.number()),sphericalAspectX:this._attributes.make(this._types.number()),sphericalAspectY:this._attributes.make(this._types.number()),sphericalScaleY:this._attributes.make(this._types.number()),viewMatrix:this._attributes.make(this._types.mat4())},this.viewMatrix=this.uniforms.viewMatrix.value,this.composer=uv(),this.aspectX=1,this.aspectY=1}unmake(){return super.unmake(),delete this.viewMatrix,delete this.objectMatrix,delete this.aspectX,delete this.aspectY,delete this.uniforms}change(e,t,n){let r,s,a,o,l;if(!t.view&&!t.view3&&!t.spherical&&!n)return;this.bend=a=this.props.bend,this.focus=o=a>0?1/a-1:0;const c=this.props.position,u=this.props.scale,h=this.props.quaternion,d=this.props.rotation,f=this.props.range,m=this.props.eulerOrder,{x:A}=f[0];let _=f[1].x,v=f[2].x;const w=f[0].y-A||1;let x=f[1].y-_||1,C=f[2].y-v||1;const S=u.x,I=u.y,P=u.z;[_,x]=Array.from(Vg(_,x,a)),[v,C]=Array.from(Vg(v,C,a));const k=w>0?1:-1,M=x>0?1:-1,R=Math.abs(C),N=w+(R*k-w)*a,U=x+(R*M-x)*a,q=N/S,W=U/I,F=C/P;this.aspectX=r=Math.abs(q/F),this.aspectY=s=Math.abs(W/F/r);const ue=x/w*S/I*2;this.scaleY=l=Math.min(s/a,1+(ue-1)*a),this.uniforms.sphericalBend.value=a,this.uniforms.sphericalFocus.value=o,this.uniforms.sphericalAspectX.value=r,this.uniforms.sphericalAspectY.value=s,this.uniforms.sphericalScaleY.value=l,this.viewMatrix.set(2/N,0,0,-(2*A+w)/w,0,2/U,0,-(2*_+x)/x,0,0,2/C,-(2*v+C)/C,0,0,0,1);const J=this.composer(c,d,h,u,null,m);if(this.viewMatrix.multiplyMatrices(J,this.viewMatrix),e["view.range"]||t.spherical)return this.trigger({type:"view.range"})}vertex(e,t){return t===1&&e.pipe("spherical.position",this.uniforms),super.vertex(e,t)}axis(e){const t=this.props.range[e-1];let n=t.x,r=t.y;return e===3&&this.bend>0&&(r=Math.max(Math.abs(r),Math.abs(n)),n=Math.max(-this.focus/this.aspectX+.001,n)),new _t(n,r)}}hU.initClass();class dU extends sp{static initClass(){this.traits=["node","object","visible","view","view3","stereographic","vertex"]}make(){return super.make(),this.uniforms={stereoBend:this.node.attributes["stereographic.bend"],viewMatrix:this._attributes.make(this._types.mat4())},this.viewMatrix=this.uniforms.viewMatrix.value,this.composer=uv()}unmake(){return super.unmake(),delete this.viewMatrix,delete this.rotationMatrix,delete this.uniforms}change(e,t,n){let r;if(!t.view&&!t.view3&&!t.stereographic&&!n)return;this.bend=r=this.props.bend;const s=this.props.position,a=this.props.scale,o=this.props.quaternion,l=this.props.rotation,c=this.props.range,u=this.props.eulerOrder,{x:h}=c[0],d=c[1].x;let f=c[2].x;const m=c[0].y-h||1,A=c[1].y-d||1;let _=c[2].y-f||1;[f,_]=Array.from(Vg(f,_,r,1)),this.uniforms.stereoBend.value=r,this.viewMatrix.set(2/m,0,0,-(2*h+m)/m,0,2/A,0,-(2*d+A)/A,0,0,2/_,-(2*f+_)/_,0,0,0,1);const v=this.composer(s,l,o,a,null,u);if(this.viewMatrix.multiplyMatrices(v,this.viewMatrix),e["view.range"]||t.stereographic)return this.trigger({type:"view.range"})}vertex(e,t){return t===1&&e.pipe("stereographic.position",this.uniforms),super.vertex(e,t)}}dU.initClass();class fU extends sp{static initClass(){this.traits=["node","object","visible","view","view4","stereographic","vertex"]}make(){super.make(),this.uniforms={basisOffset:this._attributes.make(this._types.vec4()),basisScale:this._attributes.make(this._types.vec4()),stereoBend:this.node.attributes["stereographic.bend"]},this.basisScale=this.uniforms.basisScale.value,this.basisOffset=this.uniforms.basisOffset.value}unmake(){super.unmake(),delete this.basisScale,delete this.basisOffset,delete this.uniforms}change(e,t,n){let r;if(!t.view&&!t.view4&&!t.stereographic&&!n)return;this.bend=r=this.props.bend;const s=this.props.position,a=this.props.scale,o=this.props.range,{x:l}=o[0],c=o[1].x,u=o[2].x;let h=o[3].x;const d=o[0].y-l||1,f=o[1].y-c||1,m=o[2].y-u||1;let A=o[3].y-h||1;const _=function(v,w){v.x*=w.x,v.y*=w.y,v.z*=w.z,v.w*=w.w};[h,A]=Array.from(Vg(h,A,r,1)),this.basisScale.set(2/d,2/f,2/m,2/A),this.basisOffset.set(-(2*l+d)/d,-(2*c+f)/f,-(2*u+m)/m,-(2*h+A)/A),_(this.basisScale,a),_(this.basisOffset,a),this.basisOffset.add(s),(e["view.range"]||t.stereographic)&&this.trigger({type:"view.range"})}vertex(e,t){return t===1&&e.pipe("stereographic4.position",this.uniforms),super.vertex(e,t)}}fU.initClass();class pU extends Rs{static initClass(){this.traits=["node","bind","shader"],this.freeform=!0}init(){return this.shader=null}make(){const{language:e,code:t}=this.props;if(e!=="glsl")throw new Error("GLSL required");this._helpers.bind.make([{to:"shader.sources",trait:"source",multiple:!0}]);const n=this._shaders.fetch(t),r=this._types,s={},a=o=>{let l;switch(o){case"i":return r.int();case"f":return r.number();case"v2":return r.vec2();case"v3":return r.vec3();case"v4":return r.vec4();case"m3":return r.mat3();case"m4":return r.mat4();case"t":return r.object();default:return l=o.split(""),l.pop()==="v"?r.array(a(l.join(""))):null}};for(const o of Array.from(n._signatures.uniform)){let l;(l=a(o.type))&&(s[o.name]=l)}return this.reconfigure({props:{uniform:s}})}made(){return this.trigger({type:"source.rebuild"})}unmake(){return this.shader=null}change(e,t,n){if(e["shader.uniforms"]||e["shader.code"]||e["shader.language"])return this.rebuild()}shaderBind(e){let t,n,r;e==null&&(e={});const{code:s,indices:a,channels:o}=this.props;for(t in this.node.attributes)r=this.node.attributes[t],r.type!=null&&r.short!=null&&r.ns==="uniform"&&e[r.short]==null&&(e[r.short]=r);if((n=this.props.uniforms)!=null)for(t in n)r=n[t],e[t]=r;const l=this._shaders.shader();if(this.bind.sources!=null)for(const c of Array.from(this.bind.sources))l.callback(),a!=4&&l.pipe(L0(a,4)),l.pipe(c.sourceShader(this._shaders.shader())),o!=4&&l.pipe(qf(4,o)),l.join();return l.pipe(s,e)}}pU.initClass();const aXe={axis:vz,face:Az,grid:_z,line:bz,point:yz,strip:wz,surface:xz,ticks:Cz,vector:Ez,view:sp,cartesian:lU,cartesian4:cU,polar:uU,spherical:hU,stereographic:dU,stereographic4:fU,transform:Dz,transform4:Lz,vertex:Oz,fragment:Nz,layer:Fz,mask:zz,array:pI,interval:FF,matrix:EI,area:fz,voxel:y_,volume:pz,scale:mz,latch:dz,html:Sz,dom:Mz,text:Tz,format:Iz,label:Pz,retext:kz,clamp:Uz,grow:Vz,join:Hz,lerp:Gz,memo:Qz,readback:qz,resample:TI,repeat:jz,reverse:Wz,swizzle:$z,spread:Xz,split:Yz,slice:Kz,subdivide:Jz,transpose:Zz,group:EF,inherit:SF,root:MF,unit:TF,shader:pU,camera:PF,rtt:aU,compose:oU,clock:Bz,now:Rz,move:eU,play:tU,present:nU,reveal:iU,slide:rU,step:sU},oXe={array(i,e,t=null){const n=i.lerp?function(s,a,o,l){const c=Math.min(s.length,a.length);for(let u=0,h=c,d=0<=h;d?u<h:u>h;d?u++:u--)o[u]=i.lerp(s[u],a[u],o[u],l);return o}:void 0,r=i.op?function(s,a,o,l){const c=Math.min(s.length,a.length);for(let u=0,h=c,d=0<=h;d?u<h:u>h;d?u++:u--)o[u]=i.op(s[u],a[u],o[u],l);return o}:void 0;return t!=null&&!(t instanceof Array)&&(t=[t]),{uniform(){if(i.uniform)return i.uniform()+"v"},make(){return t!=null?t.slice():e?cXe(0,e,!1).map(s=>i.make()):[]},validate(s,a,o){s instanceof Array||(s=[s]);const l=a.length=e||s.length;for(let c=0,u=l,h=0<=u;h?c<u:c>u;h?c++:c--){const d=s[c]!=null?s[c]:i.make();a[c]=i.validate(d,a[c],o)}return a},equals(s,a){const o=s.length,l=a.length;if(o!==l)return!1;const c=Math.min(o,l);for(let u=0,h=c,d=0<=h;d?u<h:u>h;d?u++:u--)if(!(typeof i.equals=="function"&&i.equals(s[u],a[u])))return!1;return!0},lerp:n,op:r,clone(s){return Array.from(s).map(a=>i.clone(a))}}},letters(i,e,t=null){if(t!=null){t===""+t&&(t=t.split(""));for(let r=0;r<t.length;r++){const s=t[r];t[r]=i.validate(s,s)}}const n=Hi.array(i,e,t);return{uniform(){return n.uniform()},make(){return n.make()},validate(r,s,a){return r===""+r&&(r=r.split("")),n.validate(r,s,a)},equals(r,s){return n.equals(r,s)},clone:n.clone}},nullable(i,e){e==null&&(e=!1);let t=e?i.make():null;const n=i.emitter?function(a,o){return o==null?a:a==null?o:i.emitter(a,o)}:void 0,r=i.lerp?function(a,o,l,c){return a===null||o===null?c<.5?a:o:(l==null&&(l=i.make()),t=i.lerp(a,o,l,c),l)}:void 0,s=i.op?function(a,o,l,c){return a===null||o===null?null:(l==null&&(l=i.make()),t=i.op(a,o,l,c),t)}:void 0;return{make(){return t},validate(a,o,l){return a===null?a:(o===null&&(o=i.make()),i.validate(a,o,l))},uniform(){return typeof i.uniform=="function"?i.uniform():void 0},equals(a,o){let l;const c=a===null,u=o===null;return c&&u?!0:c^u?!1:(l=typeof i.equals=="function"?i.equals(a,o):void 0)!=null?l:a===o},lerp:r,op:s,emitter:n}},enum(i,e,t){let n;e==null&&(e=[]),t==null&&(t={});let r=0;const s={};for(n of Array.from(e))n!==+n&&t[n]==null&&(t[n]=r++);for(n of Array.from(e))n===+n&&(s[n]=n);for(n in t)r=t[n],s[r]=!0;return s[i]==null&&(i=t[i]),{enum(){return t},make(){return i},validate(a,o,l){const c=s[a]?a:t[a];return c??l()}}},enumber(i,e,t){t==null&&(t={});const n=Hi.enum(i,e,t);return{enum:n.enum,uniform(){return"f"},make(){let r;return(r=n.make())!=null?r:+i},validate(r,s,a){return r===+r?r:n.validate(r,s,a)},op(r,s,a,o){return o(r,s)}}},select(i){return i==null&&(i="<"),{make(){return i},validate(e,t,n){return typeof e=="string"||typeof e=="object"?e:n()}}},bool(i){return i=!!i,{uniform(){return"f"},make(){return i},validate(e,t,n){return!!e}}},int(i){return i==null&&(i=0),i=+Math.round(i),{uniform(){return"i"},make(){return i},validate(e,t,n){let r;return e!==(r=+e)?n():Math.round(r)||0},op(e,t,n,r){return r(e,t)}}},round(i){return i==null&&(i=0),i=+Math.round(i),{uniform(){return"f"},make(){return i},validate(e,t,n){let r;return e!==(r=+e)?n():Math.round(r)||0},op(e,t,n,r){return r(e,t)}}},number(i){return i==null&&(i=0),{uniform(){return"f"},make(){return+i},validate(e,t,n){let r;return e!==(r=+e)?n():r||0},op(e,t,n,r){return r(e,t)}}},positive(i,e){return e==null&&(e=!1),{uniform:i.uniform,make:i.make,validate(t,n,r){return t=i.validate(t,n,r),t<0||e&&t<=0?r():t},op(t,n,r,s){return s(t,n)}}},string(i){return i==null&&(i=""),{make(){return""+i},validate(e,t,n){let r;return e!==(r=""+e)?n():r}}},func(){return{make(){return function(){}},validate(i,e,t){return typeof i=="function"?i:t()}}},emitter(){return{make(){return i=>i(1,1,1,1)},validate(i,e,t){return typeof i=="function"?i:t()},emitter(i,e){return BF(i,e)}}},object(i){return{make(){return i??{}},validate(e,t,n){return typeof e=="object"?e:n()},clone(e){return JSON.parse(JSON.stringify(e))}}},timestamp(i=null){return typeof i=="string"&&(i=Date.parse(i)),{uniform(){return"f"},make(){return i??+new Date},validate(e,t,n){return e=Date.parse(e),e!==+e?n():e},op(e,t,n,r){return r(e,t)}}},vec2(i,e){i==null&&(i=0),e==null&&(e=0);const t=[i,e];return{uniform(){return"v2"},make(){return new _t(i,e)},validate(n,r,s){if(n===+n&&(n=[n]),n!=null&&n.isVector2)r.copy(n);else if(n instanceof Array)n=n.concat(t.slice(n.length)),r.set.apply(r,n);else if(n!=null){const a=n.x!=null?n.x:i,o=n.y!=null?n.y:e;r.set(a,o)}else return s();return r},equals(n,r){return n.x===r.x&&n.y===r.y},op(n,r,s,a){return s.x=a(n.x,r.x),s.y=a(n.y,r.y),s}}},ivec2(i,e){i==null&&(i=0),e==null&&(e=0);const t=Hi.vec2(i,e),{validate:n}=t;return t.validate=function(r,s,a){return n(r,s,a),s.x=Math.round(s.x),s.y=Math.round(s.y),s},t},vec3(i,e,t){i==null&&(i=0),e==null&&(e=0),t==null&&(t=0);const n=[i,e,t];return{uniform(){return"v3"},make(){return new le(i,e,t)},validate(r,s,a){if(r===+r&&(r=[r]),r!=null&&r.isVector3)s.copy(r);else if(r instanceof Array)r=r.concat(n.slice(r.length)),s.set.apply(s,r);else if(r!=null){const o=r.x!=null?r.x:i,l=r.y!=null?r.y:e,c=r.z!=null?r.z:t;s.set(o,l,c)}else return a();return s},equals(r,s){return r.x===s.x&&r.y===s.y&&r.z===s.z},op(r,s,a,o){return a.x=o(r.x,s.x),a.y=o(r.y,s.y),a.z=o(r.z,s.z),a}}},ivec3(i,e,t){i==null&&(i=0),e==null&&(e=0),t==null&&(t=0);const n=Hi.vec3(i,e,t),{validate:r}=n;return n.validate=function(s,a,o){return r(s,a,o),a.x=Math.round(a.x),a.y=Math.round(a.y),a.z=Math.round(a.z),a},n},vec4(i,e,t,n){i==null&&(i=0),e==null&&(e=0),t==null&&(t=0),n==null&&(n=0);const r=[i,e,t,n];return{uniform(){return"v4"},make(){return new zi(i,e,t,n)},validate(s,a,o){if(s===+s&&(s=[s]),s!=null&&s.isVector4)a.copy(s);else if(s instanceof Array)s=s.concat(r.slice(s.length)),a.set.apply(a,s);else if(s!=null){const l=s.x!=null?s.x:i,c=s.y!=null?s.y:e,u=s.z!=null?s.z:t,h=s.w!=null?s.w:n;a.set(l,c,u,h)}else return o();return a},equals(s,a){return s.x===a.x&&s.y===a.y&&s.z===a.z&&s.w===a.w},op(s,a,o,l){return o.x=l(s.x,a.x),o.y=l(s.y,a.y),o.z=l(s.z,a.z),o.w=l(s.w,a.w),o}}},ivec4(i,e,t,n){i==null&&(i=0),e==null&&(e=0),t==null&&(t=0),n==null&&(n=0);const r=Hi.vec4(i,e,t,n),{validate:s}=r;return r.validate=function(a,o,l){return s(a,o,l),o.x=Math.round(o.x),o.y=Math.round(o.y),o.z=Math.round(o.z),o.w=Math.round(o.w),o},r},mat3(i,e,t,n,r,s,a,o,l){i==null&&(i=1),e==null&&(e=0),t==null&&(t=0),n==null&&(n=0),r==null&&(r=1),s==null&&(s=0),a==null&&(a=0),o==null&&(o=0),l==null&&(l=1);const c=[i,e,t,n,r,s,a,o,l];return{uniform(){return"m4"},make(){const u=new Ai;return u.set(i,e,t,n,r,s,a,o,l),u},validate(u,h,d){if(u!=null&&u.isMatrix3)h.copy(u);else if(u instanceof Array)u=u.concat(c.slice(u.length)),h.set.apply(h,u);else return d();return h}}},mat4(i,e,t,n,r,s,a,o,l,c,u,h,d,f,m,A){i==null&&(i=1),e==null&&(e=0),t==null&&(t=0),n==null&&(n=0),r==null&&(r=0),s==null&&(s=1),a==null&&(a=0),o==null&&(o=0),l==null&&(l=0),c==null&&(c=0),u==null&&(u=1),h==null&&(h=0),d==null&&(d=0),f==null&&(f=0),m==null&&(m=0),A==null&&(A=1);const _=[i,e,t,n,r,s,a,o,l,c,u,h,d,f,m,A];return{uniform(){return"m4"},make(){const v=new jn;return v.set(i,e,t,n,r,s,a,o,l,c,u,h,d,f,m,A),v},validate(v,w,x){if(v!=null&&v.isMatrix4)w.copy(v);else if(v instanceof Array)v=v.concat(_.slice(v.length)),w.set.apply(w,v);else return x();return w}}},quat(i,e,t,n){i==null&&(i=0),e==null&&(e=0),t==null&&(t=0),n==null&&(n=1);const r=Hi.vec4(i,e,t,n);return{uniform(){return"v4"},make(){return new la},validate(s,a,o){return s!=null&&s.isQuaternion?a.copy(s):a=r.validate(s,a,o),a.normalize(),a},equals(s,a){return s.x===a.x&&s.y===a.y&&s.z===a.z&&s.w===a.w},op(s,a,o,l){return o.x=l(s.x,a.x),o.y=l(s.y,a.y),o.z=l(s.z,a.z),o.w=l(s.w,a.w),o.normalize(),o},lerp(s,a,o,l){return o.slerpQuaternions?o.slerpQuaternions(s,a,l):la.slerp(s,a,o,l),o}}},color(i,e,t){i==null&&(i=.5),e==null&&(e=.5),t==null&&(t=.5);const n=[i,e,t];return{uniform(){return"c"},make(){return new Ut(i,e,t)},validate(r,s,a){if(r===""+r?r=new Ut().setStyle(r):r===+r&&(r=new Ut(r)),r!=null&&r.isColor)s.copy(r);else if(r instanceof Array)r=r.concat(n.slice(r.length)),s.setRGB.apply(s,r);else if(r!=null){const o=r.r!=null?r.r:i,l=r.g!=null?r.g:e,c=r.b!=null?r.b:t;s.set(o,l,c)}else return a();return s},equals(r,s){return r.r===s.r&&r.g===s.g&&r.b===s.b},op(r,s,a,o){return a.r=o(r.r,s.r),a.g=o(r.g,s.g),a.b=o(r.b,s.b),a}}},axis(i,e){let t;i==null&&(i=1),e==null&&(e=!1);const n={x:1,y:2,z:3,w:4,W:1,H:2,D:3,I:4,zero:0,null:0,width:1,height:2,depth:3,items:4},r=e?[0,1,2,3,4]:[1,2,3,4];return(t=n[i])!=null&&(i=t),{make(){return i},validate(s,a,o){let l;return(t=n[s])!=null&&(s=t),s=(l=Math.round(s))!=null?l:0,Array.from(r).includes(s)?s:o()}}},transpose(i){i==null&&(i=[1,2,3,4]);const e=Hi.letters(Hi.axis(null,!1),0,i),t=Hi.letters(Hi.axis(null,!1),4,i);return{make(){return t.make()},validate(n,r,s){let a=[1,2,3,4];if(e.validate(n,a,s),a.length<4){const l=[1,2,3,4].filter(c=>a.indexOf(c)===-1);a=a.concat(l)}return Array.from(a).map((l,c)=>a.indexOf(l)===c).indexOf(!1)<0?t.validate(a,r,s):s()},equals:t.equals,clone:t.clone}},swizzle(i,e=null){i==null&&(i=[1,2,3,4]),e==null&&(e=i.length),i=i.slice(0,e);const t=Hi.letters(Hi.axis(null,!1),0,i),n=Hi.letters(Hi.axis(null,!0),e,i);return{make(){return n.make()},validate(r,s,a){let o=i.slice();return t.validate(r,o,a),o.length<e&&(o=o.concat([0,0,0,0]).slice(0,e)),n.validate(o,s,a)},equals:n.equals,clone:n.clone}},classes(){const i=Hi.array(Hi.string());return{make(){return i.make()},validate(e,t,n){return e===""+e&&(e=e.split(" ")),e=e.filter(r=>!!r.length),i.validate(e,t,n)},equals:i.equals,clone:i.clone}},blending(i){i==null&&(i="normal");const e=["no","normal","add","subtract","multiply","custom"];return Hi.enum(i,e)},filter(i){i==null&&(i="nearest");const e={nearest:ki,nearestMipMapNearest:XT,nearestMipMapLinear:YT,linear:Sr,linearMipMapNearest:KT,linearMipmapLinear:JT};return Hi.enum(i,[],e)},type(i){i==null&&(i="unsignedByte");const e={unsignedByte:ts,byte:i_,short:r_,unsignedShort:V0,int:iv,unsignedInt:Sc,float:ns};return Hi.enum(i,[],e)},scale(i){i==null&&(i="linear");const e=["linear","log"];return Hi.enum(i,e)},mapping(i){i==null&&(i="relative");const e=["relative","absolute"];return Hi.enum(i,e)},indexing(i){i==null&&(i="original");const e=["original","final"];return Hi.enum(i,e)},shape(i){i==null&&(i="circle");const e=["circle","square","diamond","up","down","left","right"];return Hi.enum(i,e)},join(i){i==null&&(i="miter");const e=["miter","round","bevel"];return Hi.enum(i,e)},stroke(i){i==null&&(i="solid");const e=["solid","dotted","dashed"];return Hi.enum(i,e)},vertexPass(i){i==null&&(i="view");const e=["data","view","world","eye"];return Hi.enum(i,e)},fragmentPass(i){i==null&&(i="light");const e=["color","light","rgba"];return Hi.enum(i,e)},ease(i){i==null&&(i="linear");const e=["linear","cosine","binary","hold"];return Hi.enum(i,e)},fit(i){i==null&&(i="contain");const e=["x","y","contain","cover"];return Hi.enum(i,e)},anchor(i){i==null&&(i="middle");const e={first:1,middle:0,last:-1};return Hi.enumber(i,[],e)},transitionState(i){i==null&&(i="enter");const e={enter:-1,visible:0,exit:1};return Hi.enumber(i,[],e)},font(i){i==null&&(i="sans-serif");const e=gz;i instanceof Array||(i=e(i));const t=Hi.array(Hi.string(),0,i);return{make(){return t.make()},validate(n,r,s){try{n instanceof Array||(n=e(n))}catch{return s()}return n=n.filter(a=>!!a.length),t.validate(n,r,s)},equals:t.equals,clone:t.clone}},data(i){return{make(){return[]},validate(e,t,n){return e instanceof Array||(e!=null?e.length:void 0)!=null?e:n()},emitter(e,t){return RF(e,t)}}}},lXe=function(i){for(const e in i){const t=i[e];i[e]=(n=>function(){const r=n.apply(n,arguments);return r.validate==null&&(r.validate=s=>s!=null),r.equals==null&&(r.equals=(s,a)=>s===a),r.clone==null&&(r.clone=function(s){let a;return(a=uXe(s,"clone",o=>o.clone()))!=null?a:s}),r})(t)}return i},Hi=lXe(oXe);function cXe(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let a=i;r?a<s:a>s;r?a++:a--)n.push(a);return n}function uXe(i,e,t){if(typeof i<"u"&&i!==null&&typeof i[e]=="function")return t(i,e)}const j=Hi,hXe={node:{id:j.nullable(j.string()),classes:j.classes()},entity:{active:j.bool(!0)},object:{visible:j.bool(!0)},latch:{data:j.nullable(j.object()),deep:j.nullable(j.bool(!0))},unit:{scale:j.nullable(j.number()),fov:j.nullable(j.number()),focus:j.nullable(j.number(1),!0)},span:{range:j.nullable(j.vec2(-1,1))},view:{range:j.array(j.vec2(-1,1),4)},view3:{position:j.vec3(),quaternion:j.quat(),rotation:j.vec3(),scale:j.vec3(1,1,1),eulerOrder:j.swizzle("xyz")},view4:{position:j.vec4(),scale:j.vec4(1,1,1,1)},layer:{depth:j.number(1),fit:j.fit("y")},vertex:{pass:j.vertexPass()},fragment:{pass:j.fragmentPass(),gamma:j.bool(!1)},transform3:{position:j.vec3(),quaternion:j.quat(),rotation:j.vec3(),eulerOrder:j.swizzle("xyz"),scale:j.vec3(1,1,1),matrix:j.mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transform4:{position:j.vec4(),scale:j.vec4(1,1,1,1),matrix:j.mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},camera:{proxy:j.bool(!1),position:j.nullable(j.vec3()),quaternion:j.nullable(j.quat()),rotation:j.nullable(j.vec3()),lookAt:j.nullable(j.vec3()),up:j.nullable(j.vec3()),eulerOrder:j.swizzle("xyz"),fov:j.nullable(j.number(1))},polar:{bend:j.number(1),helix:j.number(0)},spherical:{bend:j.number(1)},stereographic:{bend:j.number(1)},interval:{axis:j.axis()},area:{axes:j.swizzle([1,2],2)},volume:{axes:j.swizzle([1,2,3],3)},origin:{origin:j.vec4()},scale:{divide:j.number(10),unit:j.number(1),base:j.number(10),mode:j.scale(),start:j.bool(!0),end:j.bool(!0),zero:j.bool(!0),factor:j.positive(j.number(1)),nice:j.bool(!0)},grid:{lineX:j.bool(!0),lineY:j.bool(!0),crossed:j.bool(!1),closedX:j.bool(!1),closedY:j.bool(!1)},axis:{detail:j.int(1),crossed:j.bool(!1)},data:{data:j.nullable(j.data()),expr:j.nullable(j.emitter()),bind:j.nullable(j.func()),live:j.bool(!0)},buffer:{channels:j.enum(4,[1,2,3,4]),items:j.int(1),fps:j.nullable(j.int(60)),hurry:j.int(5),limit:j.int(60),realtime:j.bool(!1),observe:j.bool(!1),aligned:j.bool(!1)},sampler:{centered:j.bool(!1),padding:j.number(0)},array:{width:j.nullable(j.positive(j.int(1),!0)),bufferWidth:j.int(1),history:j.int(1)},matrix:{width:j.nullable(j.positive(j.int(1),!0)),height:j.nullable(j.positive(j.int(1),!0)),history:j.int(1),bufferWidth:j.int(1),bufferHeight:j.int(1)},voxel:{width:j.nullable(j.positive(j.int(1),!0)),height:j.nullable(j.positive(j.int(1),!0)),depth:j.nullable(j.positive(j.int(1),!0)),bufferWidth:j.int(1),bufferHeight:j.int(1),bufferDepth:j.int(1)},resolve:{expr:j.nullable(j.func()),items:j.int(1)},style:{opacity:j.positive(j.number(1)),color:j.color(),blending:j.blending(),zWrite:j.bool(!0),zTest:j.bool(!0),zIndex:j.positive(j.round()),zBias:j.number(0),zOrder:j.nullable(j.int())},geometry:{points:j.select(),colors:j.nullable(j.select())},point:{size:j.positive(j.number(4)),sizes:j.nullable(j.select()),shape:j.shape(),optical:j.bool(!0),fill:j.bool(!0),depth:j.number(1)},line:{width:j.positive(j.number(2)),depth:j.positive(j.number(1)),join:j.join(),stroke:j.stroke(),proximity:j.nullable(j.number(1/0)),closed:j.bool(!1)},mesh:{fill:j.bool(!0),shaded:j.bool(!1),normals:j.nullable(j.select()),map:j.nullable(j.select()),lineBias:j.number(5)},strip:{line:j.bool(!1)},face:{line:j.bool(!1)},arrow:{size:j.number(3),start:j.bool(!1),end:j.bool(!1)},ticks:{normal:j.vec3(0,0,1),size:j.positive(j.number(10)),epsilon:j.positive(j.number(.001))},attach:{offset:j.vec2(0,-20),snap:j.bool(!1),depth:j.number(0)},format:{digits:j.nullable(j.positive(j.number(3))),data:j.nullable(j.data()),expr:j.nullable(j.func()),live:j.bool(!0)},font:{font:j.font("sans-serif"),style:j.string(),variant:j.string(),weight:j.string(),detail:j.number(24),sdf:j.number(5)},label:{text:j.select(),size:j.number(16),outline:j.number(2),expand:j.number(0),background:j.color(1,1,1)},overlay:{opacity:j.number(1),zIndex:j.positive(j.round(0))},dom:{points:j.select(),html:j.select(),size:j.number(16),outline:j.number(2),zoom:j.number(1),color:j.nullable(j.color()),attributes:j.nullable(j.object()),pointerEvents:j.bool(!1)},texture:{minFilter:j.filter("nearest"),magFilter:j.filter("nearest"),type:j.type("float")},shader:{sources:j.nullable(j.select()),indices:j.number(4),channels:j.number(4),language:j.string("glsl"),code:j.string(),uniforms:j.nullable(j.object())},include:{shader:j.select()},operator:{source:j.select()},spread:{unit:j.mapping(),items:j.nullable(j.vec4()),width:j.nullable(j.vec4()),height:j.nullable(j.vec4()),depth:j.nullable(j.vec4()),alignItems:j.anchor(),alignWidth:j.anchor(),alignHeight:j.anchor(),alignDepth:j.anchor()},grow:{scale:j.number(1),items:j.nullable(j.anchor()),width:j.nullable(j.anchor()),height:j.nullable(j.anchor()),depth:j.nullable(j.anchor())},split:{order:j.transpose("wxyz"),axis:j.nullable(j.axis()),length:j.int(1),overlap:j.int(0)},join:{order:j.transpose("wxyz"),axis:j.nullable(j.axis()),overlap:j.int(0)},swizzle:{order:j.swizzle()},transpose:{order:j.transpose()},repeat:{items:j.number(1),width:j.number(1),height:j.number(1),depth:j.number(1)},slice:{items:j.nullable(j.vec2()),width:j.nullable(j.vec2()),height:j.nullable(j.vec2()),depth:j.nullable(j.vec2())},reverse:{items:j.bool(!1),width:j.bool(!1),height:j.bool(!1),depth:j.bool(!1)},lerp:{size:j.mapping("absolute"),items:j.nullable(j.number()),width:j.nullable(j.number()),height:j.nullable(j.number()),depth:j.nullable(j.number())},subdivide:{items:j.nullable(j.positive(j.int(),!0)),width:j.nullable(j.positive(j.int(),!0)),height:j.nullable(j.positive(j.int(),!0)),depth:j.nullable(j.positive(j.int(),!0)),bevel:j.number(1),lerp:j.bool(!0)},resample:{indices:j.number(4),channels:j.number(4),sample:j.mapping(),size:j.mapping("absolute"),items:j.nullable(j.number()),width:j.nullable(j.number()),height:j.nullable(j.number()),depth:j.nullable(j.number())},readback:{type:j.type("float"),expr:j.nullable(j.func()),data:j.data(),channels:j.enum(4,[1,2,3,4]),items:j.nullable(j.int()),width:j.nullable(j.int()),height:j.nullable(j.int()),depth:j.nullable(j.int())},root:{speed:j.number(1),camera:j.select("[camera]")},inherit:{source:j.select(),traits:j.array(j.string())},rtt:{size:j.mapping("absolute"),width:j.nullable(j.number()),height:j.nullable(j.number()),history:j.int(1)},compose:{alpha:j.bool(!1)},present:{index:j.int(1),directed:j.bool(!0),length:j.number(0)},slide:{order:j.nullable(j.int(0)),steps:j.number(1),early:j.int(0),late:j.int(0),from:j.nullable(j.int(0)),to:j.nullable(j.int(1))},transition:{stagger:j.vec4(),enter:j.nullable(j.number(1)),exit:j.nullable(j.number(1)),delay:j.number(0),delayEnter:j.nullable(j.number(0)),delayExit:j.nullable(j.number(0)),duration:j.number(.3),durationEnter:j.nullable(j.number(0)),durationExit:j.nullable(j.number(0))},move:{from:j.vec4(),to:j.vec4()},seek:{seek:j.nullable(j.number(0))},track:{target:j.select(),script:j.object({}),ease:j.ease("cosine")},trigger:{trigger:j.nullable(j.int(1),!0)},step:{playback:j.ease("linear"),stops:j.nullable(j.array(j.number())),delay:j.number(0),duration:j.number(.3),pace:j.number(0),speed:j.number(1),rewind:j.number(2),skip:j.bool(!0),realtime:j.bool(!1)},play:{delay:j.number(0),pace:j.number(1),speed:j.number(1),from:j.number(0),to:j.number(1/0),realtime:j.bool(!1),loop:j.bool(!1)},now:{now:j.nullable(j.timestamp()),seek:j.nullable(j.number(0)),pace:j.number(1),speed:j.number(1)}},mU=function(i,e,t,n,r,s,a,o,l,c){let u,h,d;c==null&&(c=!0),t||(t=10),n||(n=1),r||(r=10),s||(s=1);const m=(e-i)/t;if(!c)return u=(()=>{let C,S;const I=[];for(h=0,S=t,C=0<=S;C?h<=S:h>=S;C?h++:h--)I.push(i+h*m);return I})(),a||u.shift(),o||u.pop(),l||(u=u.filter(C=>C!==0)),u;n||(n=1),r||(r=10);const A=n*Math.pow(r,Math.floor(Math.log(m/n)/Math.log(r))),_=r%2===0?[r/2,1,1/2]:r%3===0?[r/3,1,1/3]:[1],v=(()=>{const C=[];for(d of Array.from(_))C.push(A*d);return C})();let w=1/0,x=v.reduce(function(C,S){d=S/m;const I=Math.max(d,1/d);return I<w?(w=I,S):C},A);return x*=s,i=Math.ceil(i/x+ +!a)*x,e=(Math.floor(e/x)-+!o)*x,t=Math.ceil((e-i)/x),u=(()=>{let C,S;const I=[];for(h=0,S=t,C=0<=S;C?h<=S:h>=S;C?h++:h--)I.push(i+h*x);return I})(),l||(u=u.filter(C=>C!==0)),u},gU=function(i,e,t,n,r,s,a,o,l,c){throw new Error("Log ticks not yet implemented.")},dXe=0,fXe=1,vU=function(i,e,t,n,r,s,a,o,l,c,u){switch(i){case dXe:return mU(e,t,n,r,s,a,o,l,c,u);case fXe:return gU()}},pXe=Object.freeze(Object.defineProperty({__proto__:null,linear:mU,log:gU,make:vU},Symbol.toStringTag,{value:"Module"})),mXe={bind:{make(i){this.bind==null&&(this.bind={}),this.bound==null&&(this.bound=[]);for(const e of Array.from(i)){let{callback:t}=e;const{to:n,trait:r,optional:s,unique:a,multiple:o}=e;t==null&&(t=this.rebuild);const l=n.split(/\./g).pop(),c=this._get(n);let u=null;if(c!=null){let h=this,d=!1;for(;!d;){h=u=this._attach(c,r,t,this,h,s,o);const f=a&&(u==null||this.bound.indexOf(u)<0);d=o||s||!a||f}}if(u!=null)if(this.resize!=null&&this._listen(u,"source.resize",this.resize),t&&this._listen(u,"source.rebuild",t),o)for(const h of Array.from(u))this.bound.push(h);else this.bound.push(u);this.bind[l]=u}return null},unmake(){if(this.bind)return delete this.bind,delete this.bound}},span:{make(){return this.spanView=this._inherit("view"),this._listen("view","view.range",()=>this.trigger({type:"span.range"}))},unmake(){return delete this.spanView},get:function(){const i=new _t(-1,1);return function(e,t){let n;const r=this._get(e+"span.range");return r??((n=this.spanView!=null?this.spanView.axis(t):void 0)!=null?n:i)}}()},scale:{divide(i){const e=this._get(i+"scale.divide"),t=this._get(i+"scale.factor");return Math.round(e*2.5/t)},generate(i,e,t,n){const r=this._get(i+"scale.mode"),s=this._get(i+"scale.divide"),a=this._get(i+"scale.unit"),o=this._get(i+"scale.base"),l=this._get(i+"scale.factor"),c=this._get(i+"scale.start"),u=this._get(i+"scale.end"),h=this._get(i+"scale.zero"),d=this._get(i+"scale.nice"),f=vU(r,t,n,s,a,o,l,c,u,h,d);return e.copy(f),f}},style:{uniforms(){return{styleColor:this.node.attributes["style.color"],styleOpacity:this.node.attributes["style.opacity"],styleZBias:this.node.attributes["style.zBias"],styleZIndex:this.node.attributes["style.zIndex"]}}},arrow:{uniforms(){const{start:i}=this.props,{end:e}=this.props,t=this._attributes.make(this._types.number(1.25/(i+e))),n=this._attributes.make(this._types.vec2(+i,+e)),r=this.node.attributes["arrow.size"];return{clipStyle:n,clipRange:r,clipSpace:t,arrowSpace:t,arrowSize:r}}},point:{uniforms(){return{pointSize:this.node.attributes["point.size"],pointDepth:this.node.attributes["point.depth"]}}},line:{uniforms(){return{lineWidth:this.node.attributes["line.width"],lineDepth:this.node.attributes["line.depth"],lineProximity:this.node.attributes["line.proximity"]}}},surface:{uniforms(){return{}}},shade:{pipeline(i){if(!this._inherit("fragment"))return i;i==null&&(i=this._shaders.shader());for(let e=0;e<=2;e++)i=hR(this._inherit("fragment"),t=>t.fragment(i,e));return i.pipe("fragment.map.rgba"),i},normal(i){return i.pipe(hl("xyz")),i},map(i){return i&&(i=this._shaders.shader().pipe("mesh.map.uvwo").pipe(i))}},position:{pipeline(i){if(!this._inherit("vertex"))return i;i==null&&(i=this._shaders.shader());for(let e=0;e<=3;e++)i=hR(this._inherit("vertex"),t=>t.vertex(i,e));return i},swizzle(i,e){if(i)return this._shaders.shader().pipe(hl(e)).pipe(i)},swizzle2(i,e,t){if(i)return this._shaders.shader().split().pipe(hl(e)).next().pipe(hl(t)).join().pipe(i)}},visible:{make(){const i={type:"visible.change"};let e=null;this.setVisible=function(r){return r!=null&&(e=r),t()};const t=()=>{let r;const s=this.isVisible;let a=(r=e??this._get("object.visible"))!=null?r:!0;if(n!=null&&a&&(a=n.isVisible),this.isVisible=a,s!==this.isVisible)return this.trigger(i)},n=this._inherit("visible");return n&&this._listen(n,"visible.change",t),this.is("object")&&this._listen(this.node,"change:object",t),t()},unmake(){return delete this.isVisible}},active:{make(){const i={type:"active.change"};let e=null;this.setActive=function(r){return r!=null&&(e=r),t()};const t=()=>{let r;const s=this.isActive;let a=(r=e??this._get("entity.active"))!=null?r:!0;if(n!=null&&a&&(a=n.isActive),this.isActive=a,s!==this.isActive)return this.trigger(i)},n=this._inherit("active");return n&&this._listen(n,"active.change",t),this.is("entity")&&this._listen(this.node,"change:entity",t),t()},unmake(){return delete this.isActive}},object:{make(i){let e,t;i==null&&(i=[]),this.objects=i,this.renders=this.objects.reduce((u,h)=>u.concat(h.renders),[]);const n=this._inherit("scene");let r=e=t=null;const s=Array.from(this.traits).includes("style");r=1,e=kf;let a=!0,o=!0;s&&({opacity:r}=this.props,{blending:e}=this.props,{zOrder:t}=this.props,{zWrite:a}=this.props,{zTest:o}=this.props);const l=u=>{const{changed:h}=u;let d=null;if(h["style.opacity"]&&(d=r=this.props.opacity),h["style.blending"]&&(d=e=this.props.blending),h["style.zOrder"]&&(d=t=this.props.zOrder),h["style.zWrite"]&&(d=a=this.props.zWrite),h["style.zTest"]&&(d=o=this.props.zTest),d!=null)return c()},c=()=>{const u=t!=null?-t:this.node.order;return(this.isVisible!=null?this.isVisible:!0)&&r>0?s?(()=>{const d=[];for(const f of Array.from(this.objects))f.show(r<1,e,u),d.push(f.depth(a,o));return d})():(()=>{const d=[];for(const f of Array.from(this.objects))d.push(f.show(!0,e,u));return d})():(()=>{const d=[];for(const f of Array.from(this.objects))d.push(f.hide());return d})()};this._listen(this.node,"change:style",l),this._listen(this.node,"reindex",c),this._listen(this,"visible.change",c);for(const u of Array.from(this.objects))n.adopt(u);return c()},unmake(i){let e;if(i==null&&(i=!0),!this.objects)return;const t=this._inherit("scene");for(e of Array.from(this.objects))t.unadopt(e);if(i)return(()=>{const n=[];for(e of Array.from(this.objects))n.push(e.dispose());return n})()},mask(){let i,e;if(i=this._inherit("mask"))return e=i.mask(e)}},unit:{make(){let i,e,t,n,r,s,a,o,l,c,u,h,d=Math.PI;this.unitUniforms={renderScaleInv:o=this._attributes.make(this._types.number(1)),renderScale:a=this._attributes.make(this._types.number(1)),renderAspect:n=this._attributes.make(this._types.number(1)),renderWidth:l=this._attributes.make(this._types.number(0)),renderHeight:r=this._attributes.make(this._types.number(0)),viewWidth:u=this._attributes.make(this._types.number(0)),viewHeight:c=this._attributes.make(this._types.number(0)),pixelRatio:e=this._attributes.make(this._types.number(1)),pixelUnit:t=this._attributes.make(this._types.number(1)),worldUnit:h=this._attributes.make(this._types.number(1)),focusDepth:i=this._attributes.make(this._types.number(1)),renderOdd:s=this._attributes.make(this._types.vec2())};const f=new le,m=new le,A=()=>{let v,w;if((w=_!=null?_.getSize():void 0)==null)return;d=Math.PI;const{scale:x}=this.props,{fov:C}=this.props,S=this.props.focus!=null?this.props.focus:this.inherit("unit").props.focus,I=x===null;let P=1;if(v=_!=null?_.getCamera():void 0){const q=v.projectionMatrix;f.set(0,-.5,1).applyMatrix4(q),m.set(0,.5,1).applyMatrix4(q),f.sub(m),P=f.y}const k=w.renderHeight/w.viewHeight,M=C!=null?P*Math.tan(C*d/360):1,R=I?k:w.renderHeight/x*M,N=w.renderHeight*P/2,U=R/N;return u.value=w.viewWidth,c.value=w.viewHeight,l.value=w.renderWidth,r.value=w.renderHeight,n.value=w.aspect,a.value=N,o.value=1/N,e.value=k,t.value=R,h.value=U,i.value=S,s.value.set(w.renderWidth%2,w.renderHeight%2).multiplyScalar(.5)},_=this.is("root")?this:this._inherit("root");return this._listen(_,"root.update",A),A()},unmake(){return delete this.unitUniforms},get(){const i={};for(const e in this.unitUniforms){const t=this.unitUniforms[e];i[e]=t.value}return i},uniforms(){return this.unitUniforms}}},gXe=function(i,e){const t={};for(const n of Array.from(e)){let r;if(r=mXe[n]){t[n]={};for(const s in r){const a=r[s];t[n][s]=a.bind(i)}}}return t};function hR(i,e){return typeof i<"u"&&i!==null?e(i):void 0}const vXe=Object.freeze(Object.defineProperty({__proto__:null,Classes:aXe,Helpers:gXe,Traits:hXe,Types:j},Symbol.toStringTag,{value:"Module"}));class AU{constructor(e,t){this.context=t,this.classes=e.Classes,this.helpers=e.Helpers}getTypes(){return Object.keys(this.classes)}make(e,t,n=null){t==null&&(t={});const r=this.classes[e];if(r==null)throw new Error(`Unknown primitive class \`${e}\``);const s=new r.model(e,r.defaults,t,n,r,this.context.attributes);return new r(s,this.context,this.helpers),s}}const NM=vXe,AXe=Object.freeze(Object.defineProperty({__proto__:null,Factory:AU,Primitive:Rs,Types:NM},Symbol.toStringTag,{value:"Module"}));class vv{constructor(e,t){this.renderer=e,this.shaders=t,this.gl=this.renderer.getContext(),this.uniforms==null&&(this.uniforms={})}dispose(){this.uniforms=null}_adopt(e){for(const t in e){const n=e[t];this.uniforms[t]=n}}_set(e){for(const t in e){const n=e[t];this.uniforms[t]!=null&&(this.uniforms[t].value=n)}}}class _Xe extends Bi{constructor(){super(),this.rotationAutoUpdate=!1,this.frustumCulled=!1,this.matrixAutoUpdate=!1}}let _U=class extends vv{constructor(e,t,n){super(e,t,n),this.root=new _Xe,(n!=null?n.scene:void 0)!=null&&(this.scene=n.scene),this.scene==null&&(this.scene=new ov),this.pending=[],this.async=0,this.scratch=new Va(1,1),this.camera=new _r}inject(e){return e!=null&&(this.scene=e),this.scene.add(this.root)}unject(){return this.scene!=null?this.scene.remove(this.root):void 0}add(e){return this.async?this.pending.push(e):this._add(e)}remove(e){if(this.pending=this.pending.filter(t=>t!==e),e.parent!=null)return this._remove(e)}_add(e){return this.root.add(e)}_remove(e){return this.root.remove(e)}dispose(){if(this.root.parent!=null)return this.unject()}warmup(e){return this.async=+e||0}render(){if(!this.pending.length)return;const{children:e}=this.root,t=[];for(let s=0,a=this.async,o=0<=a;o?s<a:s>a;o?s++:s--){const l=this.pending.shift();if(!l)break;this._add(l),t.push(t)}const n=e.map(function(s){return s.visible});e.map(s=>s.visible=!Array.from(t).includes(s));const r=this.renderer.getRenderTarget();return this.renderer.setRenderTarget(this.scratch),this.renderer.render(this.scene,this.camera),this.renderer.setRenderTarget(r),e.map((s,a)=>s.visible=n[a])}toJSON(){return this.root.toJSON()}};class bU{constructor(e,t,n){this.classes=e,this.renderer=t,this.shaders=n}getTypes(){return Object.keys(this.classes)}make(e,t){return new this.classes[e](this.renderer,this.shaders,t)}}let yU=class extends vv{constructor(e,t,n){super(e,t),this.items==null&&(this.items=n.items||1),this.samples==null&&(this.samples=n.samples||1),this.channels==null&&(this.channels=n.channels||4),this.callback==null&&(this.callback=n.callback||function(){})}dispose(){return super.dispose()}update(){const e=this.fill();return this.write(e),e}setActive(e,t,n,r){}setCallback(e){this.callback=e}write(){}fill(){}generate(e){return uI(e,this.samples,this.channels,this.items)}};class RI{constructor(e,t,n,r,s){this.renderer=e,this.width=t,this.height=n,this.channels=r,this.n=this.width*this.height*this.channels;const a=this.renderer.getContext();this.gl=a;const o=(s!=null?s.minFilter:void 0)!=null?s!=null?s.minFilter:void 0:ki,l=(s!=null?s.magFilter:void 0)!=null?s!=null?s.magFilter:void 0:ki,c=(s!=null?s.type:void 0)!=null?s!=null?s.type:void 0:ns;this.minFilter=Yw(a,o),this.magFilter=Yw(a,l),this.type=Yw(a,c),this.ctor=IF(c),this.build(s)}build(e){const{gl:t}=this,n=this.renderer.state;this.texture=t.createTexture(),this.format=[null,t.LUMINANCE,t.LUMINANCE_ALPHA,t.RGB,t.RGBA][this.channels],this.format3=[null,A2,_2,void 0,Ps][this.channels],n.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.minFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this.magFilter),this.data=new this.ctor(this.n),t.pixelStorei(t.UNPACK_ALIGNMENT,1),t.texImage2D(t.TEXTURE_2D,0,this.format,this.width,this.height,0,this.format,this.type,this.data),this.textureObject=new zr(new Image,n_,oa,oa,e!=null?e.minFilter:void 0,e!=null?e.magFilter:void 0),this.textureProperties=this.renderer.properties.get(this.textureObject),this.textureProperties.__webglInit=!0,this.textureProperties.__webglTexture=this.texture,this.textureObject.format=this.format3,this.textureObject.type=ns,this.textureObject.unpackAlignment=1,this.textureObject.flipY=!1,this.textureObject.generateMipmaps=!1,this.uniforms={dataResolution:{type:"v2",value:new _t(1/this.width,1/this.height)},dataTexture:{type:"t",value:this.textureObject}}}write(e,t,n,r,s){const{gl:a}=this;return this.renderer.state.bindTexture(a.TEXTURE_2D,this.texture),a.pixelStorei(a.UNPACK_ALIGNMENT,1),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),a.texSubImage2D(a.TEXTURE_2D,0,t,n,r,s,this.format,this.type,e)}dispose(){return this.gl.deleteTexture(this.texture),this.textureProperties.__webglInit=!1,this.textureProperties.__webglTexture=null,this.textureProperties=null,this.textureObject=this.texture=null}}class bC extends yU{constructor(e,t,n,r){r==null&&(r=!0);const s=n.width||1,a=n.height||1,o=n.depth||1,l=s*a*o;n.samples||(n.samples=l),super(e,t,n),this.width=s,this.height=a,this.depth=o,this.samples==null&&(this.samples=l),r&&this.build(n)}shader(e,t){t==null&&(t=4),this.items>1||this.depth>1?(t!==4&&e.pipe(L0(t,4)),e.pipe("map.xyzw.texture",this.uniforms)):t!==2&&e.pipe(qf(t,2));const n=this.wrap?".wrap":"";return e.pipe(`map.2d.data${n}`,this.uniforms),e.pipe("sample.2d",this.uniforms),this.channels<4&&e.pipe(hl(["0000","x000","xw00","xyz0"][this.channels])),e}build(e){this.data=new Float32Array(this.samples*this.channels*this.items),this.texture=new RI(this.renderer,this.items*this.width,this.height*this.depth,this.channels,e),this.filled=0,this.used=0,this._adopt(this.texture.uniforms),this._adopt({dataPointer:{type:"v2",value:new _t},textureItems:{type:"f",value:this.items},textureHeight:{type:"f",value:this.height}}),this.dataPointer=this.uniforms.dataPointer.value,this.streamer=this.generate(this.data)}dispose(){return this.data=null,this.texture.dispose(),super.dispose()}getFilled(){return this.filled}setCallback(e){return this.callback=e,this.filled=0}copy(e){const t=Math.min(e.length,this.samples*this.channels*this.items),n=this.data;for(let r=0,s=t,a=0<=s;a?r<s:r>s;a?r++:r--)n[r]=e[r];this.write(Math.ceil(t/this.channels/this.items))}write(e){e==null&&(e=this.samples);let t=e/this.width;e*=this.items;const n=t<1?e:this.items*this.width;t=Math.ceil(t),this.texture.write(this.data,0,0,n,t),this.dataPointer.set(.5,.5),this.filled=1,this.used=e}through(e,t){let n,r;const{consume:s,done:a}=r=this.streamer,{emit:o}=n=t.streamer;let l=0,c=()=>s((u,h,d,f)=>e(o,u,h,d,f,l));return c=A_(c,this.items),()=>{r.reset(),n.reset();const u=this.used;for(l=0;!a()&&l<u;)c(),l++;return r.count()}}}class bXe extends bC{constructor(e,t,n){const r=n.width||1,s=n.history||1;n.width=r,n.height=s,n.depth=1,super(e,t,n,!1),this.width=r,this.history=s,this.samples=r,this.wrap=s>1,this.build(n)}build(e){return super.build(),this.index=0,this.pad=0,this.streamer=this.generate(this.data)}setActive(e){return this.pad=Math.max(0,this.width-e)}fill(){const{callback:e}=this;typeof e.reset=="function"&&e.reset();const{emit:t,count:n,done:r,reset:s}=this.streamer;s();const a=this.samples-this.pad;let o=0;for(;!r()&&o<a&&e(t,o++)!==!1;);return Math.floor(n()/this.items)}write(e){return e==null&&(e=this.samples),e*=this.items,this.texture.write(this.data,0,this.index,e,1),this.dataPointer.set(.5,this.index+.5),this.index=(this.index+this.history-1)%this.history,this.filled=Math.min(this.history,this.filled+1)}through(e,t){let n,r;const{consume:s,done:a}=r=this.streamer,{emit:o}=n=t.streamer;let l=0,c=()=>s((u,h,d,f)=>e(o,u,h,d,f,l));return c=A_(c,this.items),()=>{r.reset(),n.reset();const u=this.samples-this.pad;for(l=0;!a()&&l<u;)c(),l++;return r.count()}}}class yXe extends Zn{constructor(){super(),new Zn(this),this.uniforms==null&&(this.uniforms={}),this.groups==null&&(this.groups=[])}_reduce(e,t){let n=!1;for(let r=0;r<e.length;r++){const s=e[r],a=t[r];n&&(e[r]=a),s>1&&(n=!0)}return e.reduce((r,s)=>r*s)}_emitter(e){const t=e=="index"?this.getIndex():this.getAttribute(e),n=t.itemSize,{array:r}=t;let s=0;return[null,function(u){r[s++]=u},function(u,h){r[s++]=u,r[s++]=h},function(u,h,d){r[s++]=u,r[s++]=h,r[s++]=d},function(u,h,d,f){r[s++]=u,r[s++]=h,r[s++]=d,r[s++]=f}][n]}_finalize(){}_offsets(e){this.groups=e}}class Av extends yXe{_clipUniforms(){return this.geometryClip=new zi(1e10,1e10,1e10,1e10),this.geometryResolution=new zi,this.mapSize=new zi,this.uniforms==null&&(this.uniforms={}),this.uniforms.geometryClip={type:"v4",value:this.geometryClip},this.uniforms.geometryResolution={type:"v4",value:this.geometryResolution},this.uniforms.mapSize={type:"v4",value:this.mapSize}}_clipGeometry(e,t,n,r){const s=o=>Math.max(0,o-1),a=o=>1/Math.max(1,o-1);return this.geometryClip.set(s(e),s(t),s(n),s(r)),this.geometryResolution.set(a(e),a(t),a(n),a(r))}_clipMap(e,t,n,r){return this.mapSize.set(e,t,n,r)}_clipOffsets(e,t,n,r,s,a,o,l,c){const u=[r,n,t,s],h=[l,o,a,c],d=this._reduce(u,h);return this._offsets([{start:0,count:d*e,materialIndex:0}])}}class wXe extends Av{constructor(e){let t,n,r,s,a,o,l,c,u,h,d;super(e),this._clipUniforms(),this.sides=c=+e.sides||12,this.samples=l=+e.samples||2,this.strips=u=+e.strips||1,this.ribbons=o=+e.ribbons||1,this.layers=a=+e.layers||1,this.flip=n=e.flip!=null?e.flip:!1,this.closed=r=e.closed!=null?e.closed:!1,this.anchor=t=e.anchor!=null?e.anchor:n||r?0:l-1;const f=u*o*a,m=(c+2)*f,A=c*2*f;this.setIndex(new Ln(new Uint32Array(A*3),1)),this.setAttribute("position4",new Ln(new Float32Array(m*4),4)),this.setAttribute("arrow",new Ln(new Float32Array(m*3),3)),this.setAttribute("attach",new Ln(new Float32Array(m*2),2));const _=this._emitter("index"),v=this._emitter("position4"),w=this._emitter("arrow"),x=this._emitter("attach"),C=[];for(s=0,d=c,h=0<=d;h?s<d:s>d;h?s++:s--){const M=s/c*2*Math.PI;C.push([Math.cos(M),Math.sin(M),1])}let S=0;for(let M=0,R=f,N=0<=R;N?M<R:M>R;N?M++:M--){let U,q;const W=S++,F=W+c+1;for(s=0,q=c,U=0<=q;U?s<q:s>q;U?s++:s--){const ue=S+s%c,J=S+(s+1)%c;_(W),_(ue),_(J),_(J),_(ue),_(F)}S+=c+1}const I=n?1:r?l-1:-1,P=n&&!r?l-1:0,k=t;for(let M=0,R=a,N=0<=R;N?M<R:M>R;N?M++:M--)for(let U=0,q=o,W=0<=q;W?U<q:U>q;W?U++:U--)for(let F=0,ue=u,J=0<=ue;J?F<ue:F>ue;J?F++:F--){let Y,Pe;for(v(k,F,U,M),w(0,0,0),x(I,P),s=0,Pe=c,Y=0<=Pe;Y?s<Pe:s>Pe;Y?s++:s--){v(k,F,U,M);const Ie=C[s];w(Ie[0],Ie[1],Ie[2]),x(I,P)}v(k,F,U,M),w(0,0,1),x(I,P)}this._finalize(),this.clip()}clip(e,t,n,r){let s;if(e==null&&({samples:e}=this),t==null&&({strips:t}=this),n==null&&({ribbons:n}=this),r==null&&({layers:r}=this),this._clipGeometry(e,t,n,r),e>0){const a=[r,n,t],o=[this.layers,this.ribbons,this.strips];s=this.sides*this._reduce(a,o)}else s=0;return this._offsets([{start:0,count:s*6,materialIndex:0}])}}class Pd extends vv{constructor(e,t,n){super(e,t,n),this.zUnits=n.zUnits!=null?n.zUnits:0}raw(){for(const e of Array.from(this.renders))this._raw(e);return null}depth(e,t){for(const n of Array.from(this.renders))this._depth(n,e,t);return null}polygonOffset(e,t){for(const n of Array.from(this.renders))this._polygonOffset(n,e,t);return null}show(e,t,n){return Array.from(this.renders).map(r=>this._show(r,e,t,n))}hide(){for(const e of Array.from(this.renders))this._hide(e);return null}_injectPreamble(e,t){const n=e+`
`+t;return t.match(/#extension/)?this._hoist(n):n}_hoist(e){const t=e.split(`
`),n=[];for(const r of Array.from(t))r.match(/^\s*#extension/)?n.unshift(r):n.push(r);return n.join(`
`)}_material(e){const t=this.renderer.capabilities.precision,n=`    precision ${t} float;
    precision ${t} int;
uniform mat4 modelMatrix;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 cameraPosition;`,r=`    precision ${t} float;
    precision ${t} int;
uniform mat4 viewMatrix;
uniform vec3 cameraPosition;`,s={};Object.assign(s,e),delete s.attributes,delete s.varyings,delete s.inspect,delete s.vertexGraph,delete s.fragmentGraph;const a=new T5(s);return["vertexGraph","fragmentGraph","inspect"].forEach(o=>a[o]=e[o]),a.vertexShader=this._injectPreamble(n,a.vertexShader),a.fragmentShader=this._injectPreamble(r,a.fragmentShader),a}_raw(e){e.rotationAutoUpdate=!1,e.frustumCulled=!1,e.matrixAutoUpdate=!1,e.material.defaultAttributeValues=void 0}_depth(e,t,n){const r=e.material;return r.depthWrite=t,r.depthTest=n}_polygonOffset(e,t,n){n-=this.zUnits;const r=n!==0,s=e.material;if(s.polygonOffset=r,r)return s.polygonOffsetFactor=t,s.polygonOffsetUnits=n}_show(e,t,n,r){t=!0;const s=e.material;return e.renderOrder=-r,e.visible=!0,s.transparent=t,s.blending=n,null}_hide(e){return e.visible=!1}_vertexColor(e,t){if(!e&&!t)return;const n=this.shaders.shader();return e&&(n.require(e),n.pipe("mesh.vertex.color",this.uniforms)),t&&(n.require(t),n.pipe("mesh.vertex.mask",this.uniforms)),n}_vertexPosition(e,t,n,r,s){let a;const o=this.shaders.shader();return(n||t&&t!==!0)&&(a={},(r>0||s)&&(a.POSITION_MAP=""),r>0&&(a[["POSITION_U","POSITION_UV","POSITION_UVW","POSITION_UVWO"][r-1]]=""),s&&(a.POSITION_STPQ="")),o.require(e),o.pipe("mesh.vertex.position",this.uniforms,a)}_fragmentColor(e,t,n,r,s,a,o,l,c){const u=this.shaders.shader();let h=!1,d=!1;const f={};return a>0&&(f[["POSITION_U","POSITION_UV","POSITION_UVW","POSITION_UVWO"][a-1]]=""),o&&(f.POSITION_STPQ=""),e&&(u.pipe("style.color",this.uniforms),h=!0,(n||s||t)&&((!c||n)&&u.pipe("mesh.gamma.in"),d=!0)),n&&(u.isolate(),u.pipe("mesh.fragment.color",this.uniforms),(!c||h)&&u.pipe("mesh.gamma.in"),u.end(),h&&u.pipe($l("vec4","*")),c&&h&&u.pipe("mesh.gamma.out"),h=!0,d=!0),s&&(!h&&l&&u.pipe(kM("vec4","vec4(1.0)")),u.isolate(),u.require(s),u.pipe("mesh.fragment.map",this.uniforms,f),c||u.pipe("mesh.gamma.in"),u.end(),l?u.pipe(l):h&&u.pipe($l("vec4","*")),h=!0,d=!0),t&&(h||u.pipe(kM("vec4","vec4(1.0)")),t===!0?u.pipe("mesh.fragment.shaded",this.uniforms):(u.require(t),u.pipe("mesh.fragment.material",this.uniforms,f)),d=!0),d&&!c&&u.pipe("mesh.gamma.out"),r&&(u.pipe("mesh.fragment.mask",this.uniforms),h&&u.pipe($l("vec4","*"))),u}}class xXe extends Pd{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s}=n;const{material:a,position:o,color:l,mask:c,map:u,combine:h,stpq:d,linear:f}=n;s==null&&(s={});const m=s.styleColor!=null;this.geometry=new wXe({sides:n.sides,samples:n.samples,strips:n.strips,ribbons:n.ribbons,layers:n.layers,anchor:n.anchor,flip:n.flip,closed:n.closed}),this._adopt(s),this._adopt(this.geometry.uniforms);const A={};closed&&(A.ARROW_CLOSED="");const _=t.material(),v=_.vertex;v.pipe(this._vertexColor(l,c)),v.require(this._vertexPosition(o,a,u,1,d)),v.pipe("arrow.position",this.uniforms,A),v.pipe("project.position",this.uniforms),_.fragment=r=this._fragmentColor(m,a,l,c,u,1,d,h,f),r.pipe("fragment.color",this.uniforms);const w=_.link({side:fs});this.material=this._material(w);const x=new cr(this.geometry,this.material);x.frustumCulled=!1,x.matrixAutoUpdate=!1,x.userData=w,this._raw(x),this.renders=[x]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.renders=this.geometry=this.material=null,super.dispose()}}class CXe extends RI{constructor(e,t,n,r,s){super(e,t,n,r,s),this.data=new this.ctor(this.n)}resize(e,t){const n=this.data,r=this.width,s=this.height;this.width=e,this.height=t,this.n=e*t*this.channels,this.data=new this.ctor(this.n);const{gl:a}=this;return this.renderer.state.bindTexture(a.TEXTURE_2D,this.texture),a.pixelStorei(a.UNPACK_ALIGNMENT,1),a.texImage2D(a.TEXTURE_2D,0,this.format,e,t,0,this.format,this.type,this.data),this.uniforms.dataResolution.value.set(1/e,1/t),this.write(n,0,0,r,s)}write(e,t,n,r,s){let a;const{width:o}=this,l=this.data,{channels:c}=this;let u=0;if(o===r&&t===0){a=n*r*c;const h=r*s*c;for(;u<h;)l[a++]=e[u++]}else{const h=o*c,d=r*c,f=t*c;let m=n;const A=n+s;for(;m<A;){let _=0;for(a=f+m*h;_++<d;)l[a++]=e[u++];m++}}return super.write(e,t,n,r,s)}dispose(){return this.data=null,super.dispose()}}class wU extends vv{constructor(e,t,n,r){r==null&&(r=!0),super(e,t),this.width==null&&(this.width=n.width||512),this.height==null&&(this.height=n.height||512),this.channels==null&&(this.channels=n.channels||4),this.backed==null&&(this.backed=n.backed||!1),this.samples=this.width*this.height,r&&this.build(n)}shader(e){return e.pipe("map.2d.data",this.uniforms),e.pipe("sample.2d",this.uniforms),this.channels<4&&e.pipe(hl(["0000","x000","xw00","xyz0"][this.channels])),e}build(e){let t;return this.klass=t=this.backed?CXe:RI,this.texture=new t(this.renderer,this.width,this.height,this.channels,e),this.uniforms={dataPointer:{type:"v2",value:new _t(0,0)}},this._adopt(this.texture.uniforms),this.reset()}reset(){return this.rows=[],this.bottom=0}resize(e,t){if(!this.backed)throw new Error("Cannot resize unbacked texture atlas");return e>2048&&t>2048?console.warn(`Giant text atlas ${e}x${t}.`):console.info(`Resizing text atlas ${e}x${t}.`),this.texture.resize(e,t),this.width=e,this.height=t,this.samples=e*t}collapse(e){let t;const{rows:n}=this;if(n.splice(n.indexOf(e),1),this.bottom=(t=EXe(n[n.length-1],r=>r.bottom))!=null?t:0,this.last===e)return this.last=null}allocate(e,t,n,r){const s=this.width,a=this.height,o=n*2;if(t>s)return this.resize(s*2,a*2),this.last=null,this.allocate(e,t,n,r);let l=this.last;if(l!=null&&l.height>=n&&l.height<o&&l.width+t<=s){l.append(e,t,n,r);return}let c=0,u=-1,h=0;for(let d=0;d<this.rows.length;d++)if(l=this.rows[d],l.top-c>=n&&u<0&&(u=d,h=c),{bottom:c}=l,l.height>=n&&l.height<o&&l.width+t<=s){l.append(e,t,n,r),this.last=l;return}if(u>=0)l=new dR(h,n),this.rows.splice(u,0,l);else{if(h=c,c+=n,c>=a)return this.resize(s*2,a*2),this.last=null,this.allocate(e,t,n,r);l=new dR(h,n),this.rows.push(l),this.bottom=c}l.append(e,t,n,r),this.last=l}read(){return this.texture.textureObject}write(e,t,n,r,s){return this.texture.write(e,t,n,r,s)}dispose(){return this.texture.dispose(),this.data=null,super.dispose()}}class dR{constructor(e,t){this.top=e,this.bottom=e+t,this.width=0,this.height=t,this.alive=0,this.keys=[]}append(e,t,n,r){const s=this.width,a=this.top;return this.alive++,this.width+=t,this.keys.push(e),r(this,s,a)}}function EXe(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class SXe extends Pd{constructor(e,t,n){super(e,t,n),this.geometry=new sv(1,1),this.material=new Lo({map:n.map}),this.material.side=fs;const r=new cr(this.geometry,this.material);r.position.x+=n.x||0,r.position.y+=n.y||0,r.frustumCulled=!1,r.scale.set(2,2,2),r.__debug=!0,this.objects=[r]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.objects=this.geometry=this.material=null,super.dispose()}}class MXe extends Av{constructor(e){let t,n,r,s,a;super(e),this._clipUniforms(),this.items=r=+e.items||2,this.width=a=+e.width||1,this.height=n=+e.height||1,this.depth=t=+e.depth||1,this.sides=s=Math.max(0,r-2);const o=a*n*t,l=r*o,c=s*o;this.setIndex(new Ln(new Uint32Array(c*3),1)),this.setAttribute("position4",new Ln(new Float32Array(l*4),4));const u=this._emitter("index"),h=this._emitter("position4");let d=0;for(let f=0,m=o,A=0<=m;A?f<m:f>m;A?f++:f--){for(let _=0,v=s,w=0<=v;w?_<v:_>v;w?_++:_--)u(d),u(d+_+1),u(d+_+2);d+=r}for(let f=0,m=t,A=0<=m;A?f<m:f>m;A?f++:f--)for(let _=0,v=n,w=0<=v;w?_<v:_>v;w?_++:_--)for(let x=0,C=a,S=0<=C;S?x<C:x>C;S?x++:x--)for(let I=0,P=r,k=0<=P;k?I<P:I>P;k?I++:I--)h(x,_,f,I);this._finalize(),this.clip()}clip(e,t,n,r){e==null&&({width:e}=this),t==null&&({height:t}=this),n==null&&({depth:n}=this),r==null&&({items:r}=this);const s=Math.max(0,r-2);return this._clipGeometry(e,t,n,r),this._clipOffsets(3,e,t,n,s,this.width,this.height,this.depth,this.sides)}}class TXe extends Pd{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s,material:a}=n;const{position:o,color:l,mask:c,map:u,combine:h,stpq:d,linear:f}=n;s==null&&(s={}),a==null&&(a=!0);const m=s.styleColor!=null;this.geometry=new MXe({items:n.items,width:n.width,height:n.height,depth:n.depth}),this._adopt(s),this._adopt(this.geometry.uniforms);const A=t.material(),_=A.vertex;_.pipe(this._vertexColor(l,c)),_.require(this._vertexPosition(o,a,u,2,d)),a||_.pipe("face.position",this.uniforms),a&&_.pipe("face.position.normal",this.uniforms),_.pipe("project.position",this.uniforms),A.fragment=r=this._fragmentColor(m,a,l,c,u,2,d,h,f),r.pipe("fragment.color",this.uniforms);const v=A.link({side:fs});this.material=this._material(v);const w=new cr(this.geometry,this.material);w.userData=v,this._raw(w),this.renders=[w]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.renders=this.geometry=this.material=null,super.dispose()}}class IXe extends Av{constructor(e){let t,n,r,s,a,o,l,c,u,h,d,f,m,A,_;super(e),this._clipUniforms(),this.closed=t=e.closed||!1,this.samples=u=(+e.samples||2)+(t?1:0),this.strips=d=+e.strips||1,this.ribbons=c=+e.ribbons||1,this.layers=l=+e.layers||1,this.detail=n=+e.detail||1;const v=u-1;this.joints=a=n-1,this.vertices=f=(v-(t?0:1))*a+u,this.segments=h=(v-(t?0:1))*a+v;const w=f*d*c*l*2,C=h*d*c*l*2;this.setIndex(new Ln(new Uint32Array(C*3),1)),this.setAttribute("position4",new Ln(new Float32Array(w*4),4)),this.setAttribute("line",new Ln(new Float32Array(w*1),1)),n>1&&this.setAttribute("joint",new Ln(new Float32Array(w),1));const S=this._emitter("index"),I=this._emitter("position4"),P=this._emitter("line");n>1&&(s=this._emitter("joint"));let k=0;for(let R=0,N=c*l,U=0<=N;U?R<N:R>N;U?R++:R--)for(let q=0,W=d,F=0<=W;F?q<W:q>W;F?q++:q--){for(let ue=0,J=h,Y=0<=J;Y?ue<J:ue>J;Y?ue++:ue--)S(k),S(k+1),S(k+2),S(k+2),S(k+1),S(k+3),k+=2;k+=2}const M=t?()=>0:function(R){return R===0?-1:R===u-1?1:0};if(n>1){let R,N;for(o=0,N=l,R=0<=N;R?o<N:o>N;R?o++:o--){let U,q;for(_=0,q=c,U=0<=q;U?_<q:_>q;U?_++:_--){let W,F;for(A=0,F=d,W=0<=F;W?A<F:A>F;W?A++:A--){let ue,J,Y;for(Y=0,m=Y,J=u,ue=0<=J;ue?Y<J:Y>J;ue?Y++:Y--,m=Y)if(r=M(m),r!==0)I(m,A,_,o),I(m,A,_,o),P(1),P(-1),s(.5),s(.5);else for(let Pe=0,Ie=n,pe=0<=Ie;pe?Pe<Ie:Pe>Ie;pe?Pe++:Pe--)I(m,A,_,o),I(m,A,_,o),P(1),P(-1),s(Pe/a),s(Pe/a)}}}}else{let R,N;for(o=0,N=l,R=0<=N;R?o<N:o>N;R?o++:o--){let U,q;for(_=0,q=c,U=0<=q;U?_<q:_>q;U?_++:_--){let W,F;for(A=0,F=d,W=0<=F;W?A<F:A>F;W?A++:A--){let ue,J,Y;for(Y=0,m=Y,J=u,ue=0<=J;ue?Y<J:Y>J;ue?Y++:Y--,m=Y)I(m,A,_,o),I(m,A,_,o),P(1),P(-1)}}}}this._finalize(),this.clip()}clip(e,t,n,r){e==null&&(e=this.samples-this.closed),t==null&&({strips:t}=this),n==null&&({ribbons:n}=this),r==null&&({layers:r}=this);const a=e+(e-(this.closed?0:2))*this.joints-(this.closed?0:1);return e+=this.closed,this._clipGeometry(e,t,n,r),this._clipOffsets(6,a,t,n,r,this.segments,this.strips,this.ribbons,this.layers)}}class PXe extends Pd{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s,stroke:a,join:o}=n;const{material:l,position:c,color:u,mask:h,map:d,combine:f,stpq:m,linear:A,clip:_,proximity:v,closed:w}=n;s==null&&(s={}),a=[null,"dotted","dashed"][a];const x=s.styleColor!=null;o=(r=["miter","round","bevel"][o])!=null?r:"miter";const C={miter:1,round:4,bevel:2}[o];this.geometry=new IXe({samples:n.samples,strips:n.strips,ribbons:n.ribbons,layers:n.layers,anchor:n.anchor,closed:n.closed,detail:C}),this._adopt(s),this._adopt(this.geometry.uniforms);const S=t.material(),I={};a&&(I.LINE_STROKE=""),_&&(I.LINE_CLIP=""),v!=null&&(I.LINE_PROXIMITY=""),I["LINE_JOIN_"+o.toUpperCase()]="",C>1&&(I.LINE_JOIN_DETAIL=C),w&&(I.LINE_CLOSED="");const P=S.vertex;P.pipe(this._vertexColor(u,h)),P.require(this._vertexPosition(c,l,d,2,m)),P.pipe("line.position",this.uniforms,I),P.pipe("project.position",this.uniforms);const k=S.fragment;a&&k.pipe(`fragment.clip.${a}`,this.uniforms),_&&k.pipe("fragment.clip.ends",this.uniforms),v!=null&&k.pipe("fragment.clip.proximity",this.uniforms),k.pipe(this._fragmentColor(x,l,u,h,d,2,m,f,A)),k.pipe("fragment.color",this.uniforms);const M=S.link({side:fs});this.material=this._material(M);const R=new cr(this.geometry,this.material);R.userData=M,this._raw(R),this.renders=[R]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.renders=this.geometry=this.material=null,super.dispose()}}class kXe extends bC{constructor(e,t,n){const r=n.width||1,s=n.height||1,a=n.history||1;n.depth=a,super(e,t,n,!1),this.width=r,this.height=s,this.history=a,this.samples=r*s,this.wrap=a>1,this.build(n)}build(e){return super.build(),this.index=0,this.pad={x:0,y:0},this.streamer=this.generate(this.data)}getFilled(){return this.filled}setActive(e,t){let n;return[this.pad.x,this.pad.y]=Array.from(n=[Math.max(0,this.width-e),Math.max(0,this.height-t)]),n}fill(){let e,t,n;const{callback:r}=this;typeof r.reset=="function"&&r.reset();const{emit:s,skip:a,count:o,done:l,reset:c}=this.streamer;c();const u=this.width,h=this.pad.x,d=this.samples-this.pad.y*u;let f=e=t=0;if(h)for(;!l()&&t<d&&(t++,n=r(s,f,e),++f===u-h&&(a(h),t+=h,f=0,e++),n!==!1););else for(;!l()&&t<d&&(t++,n=r(s,f,e),++f===u&&(f=0,e++),n!==!1););return Math.floor(o()/this.items)}write(e){e==null&&(e=this.samples),e*=this.items;const t=this.width*this.items,n=Math.ceil(e/t);return this.texture.write(this.data,0,this.index*this.height,t,n),this.dataPointer.set(.5,this.index*this.height+.5),this.index=(this.index+this.history-1)%this.history,this.filled=Math.min(this.history,this.filled+1)}through(e,t){let n,r,s;const{consume:a,skip:o,done:l}=s=this.streamer,{emit:c}=n=t.streamer;let u=r=0,h=()=>a((d,f,m,A)=>e(c,d,f,m,A,u,r));return h=A_(h,this.items),()=>{let d;s.reset(),n.reset();const f=this.width,m=this.pad.x,A=this.samples-this.pad.y*f;if(u=r=d=0,m)for(;!l()&&d<A;)d++,h(),++u===f-m&&(o(m),u=0,r++);else for(;!l()&&d<A;)d++,h(),++u===f&&(u=0,r++);return s.count()}}}class BXe{constructor(e,t,n,r,s){this.gl=e,s==null&&(s={}),s.minFilter==null&&(s.minFilter=ki),s.magFilter==null&&(s.magFilter=ki),s.format==null&&(s.format=Ps),s.type==null&&(s.type=ts),this.options=s,this.width=t||1,this.height=n||1,this.frames=r||1,this.buffers=this.frames+1,this.build()}build(){let e;const t=()=>new Va(this.width,this.height,this.options);this.targets=(()=>{let r,s;const a=[];for(e=0,s=this.buffers,r=0<=s;r?e<s:e>s;r?e++:e--)a.push(t());return a})();const n=[];this.targets.forEach(r=>n.push(r.texture)),this.reads=n,this.write=this.targets[this.buffers-1],this.uniforms={dataResolution:{type:"v2",value:new _t(1/this.width,1/this.height)},dataTexture:{type:"t",value:this.reads[0]},dataTextures:{type:"tv",value:this.reads}}}cycle(){this.targets.unshift(this.targets.pop()),this.write=this.targets[this.buffers-1],this.reads.unshift(this.reads.pop()),this.uniforms.dataTexture.value=this.reads[0]}warmup(e){return(()=>{const t=[];for(let n=0,r=this.buffers,s=0<=r;s?n<r:n>r;s?n++:n--)e(this.write),t.push(this.cycle());return t})()}dispose(){for(const e of Array.from(this.targets))e.dispose();return this.targets=this.reads=this.write=null}}class xU extends vv{constructor(e,t,n){super(e,t),this.scene=n.scene!=null?n.scene:new ov,this.camera=n.camera,this.build(n)}shaderRelative(e){return e==null&&(e=this.shaders.shader()),e.pipe("sample.2d",this.uniforms)}shaderAbsolute(e,t,n){if(t==null&&(t=1),n==null&&(n=4),e==null&&(e=this.shaders.shader()),t<=1)return n>2&&e.pipe(qf(n,2)),e.pipe("map.2d.data",this.uniforms),e.pipe("sample.2d",this.uniforms);{const r=OF(Math.min(t,this.target.frames));return n<4&&e.pipe(L0(n,4)),e.pipe("map.xyzw.2dv"),e.split(),e.pipe("map.2d.data",this.uniforms),e.pass(),e.pipe(r,this.uniforms)}}build(e){return this.camera||(this.camera=new _r,this.camera.position.set(0,0,3),this.camera.lookAt(new le)),typeof this.scene.inject=="function"&&this.scene.inject(),this.target=new BXe(this.gl,e.width,e.height,e.frames,e),this.target.warmup(t=>this.renderer.setRenderTarget(t)),this.renderer.setRenderTarget(null),this._adopt(this.target.uniforms),this._adopt({dataPointer:{type:"v2",value:new _t(.5,.5)}}),this.filled=0}adopt(e){return Array.from(e.renders).map(t=>this.scene.add(t))}unadopt(e){return Array.from(e.renders).map(t=>this.scene.remove(t))}render(e){e==null&&({camera:e}=this);const t=this.renderer.getRenderTarget();if(this.renderer.setRenderTarget(this.target.write),this.renderer.render(this.scene.scene!=null?this.scene.scene:this.scene,e),this.renderer.setRenderTarget(t),this.target.cycle(),this.filled<this.target.frames)return this.filled++}read(e){return e==null&&(e=0),this.target.reads[Math.abs(e)]}getFrames(){return this.target.frames}getFilled(){return this.filled}dispose(){return typeof this.scene.unject=="function"&&this.scene.unject(),this.scene=this.camera=null,this.target.dispose(),super.dispose()}}class FM extends xU{constructor(e,t,n){let r,s;const a=n.items||1,o=n.channels||4,l=n.width||1,c=n.height||1,u=n.depth||1;n.format=Ps,n.width=s=a*l,n.height=r=c*u,n.frames=1,delete n.items,delete n.depth,delete n.channels,super(e,t,n),this.items==null&&(this.items=a),this.channels==null&&(this.channels=o),this.width==null&&(this.width=l),this._width=s,this.height==null&&(this.height=c),this._height=r,this.depth==null&&(this.depth=u),this._adopt({textureItems:{type:"f",value:this.items},textureHeight:{type:"f",value:this.height}})}shaderAbsolute(e){return e==null&&(e=this.shaders.shader()),e.pipe("map.xyzw.texture",this.uniforms),super.shaderAbsolute(e,1,2)}}class CU extends Av{constructor(e,t){t==null&&(t=!0),super(),t&&this.construct(e)}construct(e){let t,n,r,s,a,o,l,c;this._clipUniforms(),this.closedX=t=e.closedX||!1,this.closedY=n=e.closedY||!1,this.width=c=(+e.width||2)+(t?1:0),this.height=r=(+e.height||2)+(n?1:0),this.surfaces=l=+e.surfaces||1,this.layers=s=+e.layers||1,this.segmentsX=a=Math.max(0,c-1),this.segmentsY=o=Math.max(0,r-1);const u=c*r*l*s,d=a*o*l*s*2;this.setIndex(new Ln(new Uint32Array(d*3),1)),this.setAttribute("position4",new Ln(new Float32Array(u*4),4)),this.setAttribute("surface",new Ln(new Float32Array(u*2),2));const f=this._emitter("index"),m=this._emitter("position4");let A=0;for(let _=0,v=l*s,w=0<=v;w?_<v:_>v;w?_++:_--){for(let x=0,C=o,S=0<=C;S?x<C:x>C;S?x++:x--){for(let I=0,P=a,k=0<=P;k?I<P:I>P;k?I++:I--)f(A),f(A+1),f(A+c),f(A+c),f(A+1),f(A+c+1),A++;A++}A+=c}for(let _=0,v=s,w=0<=v;w?_<v:_>v;w?_++:_--)for(let x=0,C=l,S=0<=C;S?x<C:x>C;S?x++:x--)for(let I=0,P=I,k=r,M=0<=k;M?I<k:I>k;M?I++:I--,P=I)for(let R=0,N=R,U=c,q=0<=U;q?R<U:R>U;q?R++:R--,N=R)m(N,P,x,_);this._finalize(),this.clip()}clip(e,t,n,r){e==null&&(e=this.width-this.closedX),t==null&&(t=this.height-this.closedY),n==null&&({surfaces:n}=this),r==null&&({layers:r}=this),e+=this.closedX,t+=this.closedY;const s=Math.max(0,e-1),a=Math.max(0,t-1);return this._clipGeometry(e,t,n,r),this._clipOffsets(6,s,a,n,r,this.segmentsX,this.segmentsY,this.surfaces,this.layers)}map(e,t,n,r){return e==null&&({width:e}=this),t==null&&({height:t}=this),n==null&&({surfaces:n}=this),r==null&&({layers:r}=this),this._clipMap(e,t,n,r)}}class RXe extends CU{constructor(e){e.width=Math.max(2,+e.width!=null?+e.width:2),e.height=Math.max(2,+e.height!=null?+e.height:2),super(e,!1),this.uniforms==null&&(this.uniforms={}),this.uniforms.geometryScale={type:"v4",value:new zi},this.cover(),this.construct(e)}cover(e,t,n,r){e==null&&(e=1),this.scaleX=e,t==null&&(t=1),this.scaleY=t,n==null&&(n=1),this.scaleZ=n,r==null&&(r=1),this.scaleW=r}clip(e,t,n,r){e==null&&({width:e}=this),t==null&&({height:t}=this),n==null&&({surfaces:n}=this),r==null&&({layers:r}=this),super.clip(e,t,n,r);const s=a=>1/Math.max(1,a-1);return this.uniforms.geometryScale.value.set(s(e)*this.scaleX,s(t)*this.scaleY,s(n)*this.scaleZ,s(r)*this.scaleW)}}class EU extends Pd{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s}=n;const{map:a,combine:o,stpq:l,linear:c}=n;s==null&&(s={});const u=s.styleColor!=null;this.geometry=new RXe({width:n.width,height:n.height}),this._adopt(s),this._adopt(this.geometry.uniforms);const h=t.material(),d=h.vertex;d.pipe("raw.position.scale",this.uniforms),d.fan(),d.pipe("stpq.xyzw.2d",this.uniforms),d.next(),d.pipe("screen.position",this.uniforms),d.join(),h.fragment=r=this._fragmentColor(u,!1,null,null,a,2,l,o,c),r.pipe("fragment.color",this.uniforms);const f=h.link({side:fs});this.material=this._material(f);const m=new cr(this.geometry,this.material);m.frustumCulled=!1,m.userData=f,this._raw(m),this.renders=[m]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.renders=this.geometry=this.material=null,super.dispose()}}class zM extends EU{constructor(e,t,n){const{items:r,width:s,height:a,depth:o,stpq:l}=n,c=f=>1/Math.max(1,f),u=f=>1/Math.max(1,f-1),h={remapUVScale:{type:"v2",value:new _t(r*s,a*o)},remapModulus:{type:"v2",value:new _t(r,a)},remapModulusInv:{type:"v2",value:new _t(c(r),c(a))},remapSTPQScale:{type:"v4",value:new zi(u(s),u(a),u(o),u(r))}},d=t.shader();d.pipe("screen.map.xyzw",h),n.map!=null&&(l&&d.pipe("screen.map.stpq",h),d.pipe(n.map)),super(e,t,{map:d,linear:!0}),this.memo=n,this.uniforms=h;for(const f of Array.from(this.renders))f.transparent=!1}cover(e,t,n,r){e==null&&({width:e}=this.memo),t==null&&({height:t}=this.memo),n==null&&({depth:n}=this.memo),r==null&&({items:r}=this.memo);const s=l=>1/Math.max(1,l-1);this.uniforms.remapSTPQScale.value.set(s(e),s(t),s(n),s(r));const a=e/this.memo.width;let o=n/this.memo.depth;return this.memo.depth===1&&(o=t/this.memo.height),this.geometry.cover(a,o)}}class SU extends Av{constructor(e){let t,n,r,s;super(e),this._clipUniforms(),this.items=r=+e.items||2,this.width=s=+e.width||1,this.height=n=+e.height||1,this.depth=t=+e.depth||1;const a=r*s*n*t,o=a*4,l=a*2;this.setIndex(new Ln(new Uint32Array(l*3),1)),this.setAttribute("position4",new Ln(new Float32Array(o*4),4)),this.setAttribute("sprite",new Ln(new Float32Array(o*2),2));const c=this._emitter("index"),u=this._emitter("position4"),h=this._emitter("sprite"),d=[[-1,-1],[-1,1],[1,-1],[1,1]];let f=0;for(let m=0,A=a,_=0<=A;_?m<A:m>A;_?m++:m--)c(f),c(f+1),c(f+2),c(f+1),c(f+2),c(f+3),f+=4;for(let m=0,A=t,_=0<=A;_?m<A:m>A;_?m++:m--)for(let v=0,w=n,x=0<=w;x?v<w:v>w;x?v++:v--)for(let C=0,S=s,I=0<=S;I?C<S:C>S;I?C++:C--)for(let P=0,k=r,M=0<=k;M?P<k:P>k;M?P++:P--)for(const R of Array.from(d))u(C,v,m,P),h(R[0],R[1]);this._finalize(),this.clip()}clip(e,t,n,r){return e==null&&({width:e}=this),t==null&&({height:t}=this),n==null&&({depth:n}=this),r==null&&({items:r}=this),this._clipGeometry(e,t,n,r),this._clipOffsets(6,e,t,n,r,this.width,this.height,this.depth,this.items)}}class DXe extends Pd{constructor(e,t,n){let r,s;super(e,t,n);let{uniforms:a,shape:o,fill:l}=n;const{material:c,position:u,color:h,size:d,mask:f,map:m,combine:A,linear:_,optical:v,stpq:w}=n;a==null&&(a={}),o=+o!=null?+o:0,l==null&&(l=!0);const x=a.styleColor!=null,C=["circle","square","diamond","up","down","left","right"],S=["circle","generic","generic","generic","generic","generic","generic"],I=[1.2,1,1.414,1.16,1.16,1.16,1.16],P=S[o]!=null?S[o]:S[0],k=C[o]!=null?C[o]:C[0],M=(s=v&&I[o])!=null?s:1,R=l?P:`${P}.hollow`;this.geometry=new SU({items:n.items,width:n.width,height:n.height,depth:n.depth}),this._adopt(a),this._adopt(this.geometry.uniforms);const N={POINT_SHAPE_SCALE:+(M+1e-5)},U=t.material(),q=U.vertex;q.pipe(this._vertexColor(h,f)),d?(q.isolate(),q.require(d),q.require("point.size.varying",this.uniforms),q.end()):q.require("point.size.uniform",this.uniforms),q.require(this._vertexPosition(u,c,m,2,w)),q.pipe("point.position",this.uniforms,N),q.pipe("project.position",this.uniforms),U.fragment=r=this._fragmentColor(x,c,h,f,m,2,w,A,_);const W=t.material();W.vertex.pipe(q),r=W.fragment.pipe(U.fragment),r.require(`point.mask.${k}`,this.uniforms),r.require(`point.alpha.${R}`,this.uniforms),r.pipe("point.edge",this.uniforms);const F=t.material();F.vertex.pipe(q),r=F.fragment.pipe(U.fragment),r.require(`point.mask.${k}`,this.uniforms),r.require(`point.alpha.${R}`,this.uniforms),r.pipe("point.fill",this.uniforms);const ue=F.link({side:fs});this.fillMaterial=this._material(ue);const J=W.link({side:fs});this.edgeMaterial=this._material(J),this.fillObject=new cr(this.geometry,this.fillMaterial),this.edgeObject=new cr(this.geometry,this.edgeMaterial),this._raw(this.fillObject),this.fillObject.userData=ue,this._raw(this.edgeObject),this.edgeObject.userData=J,this.renders=[this.fillObject,this.edgeObject]}show(e,t,n,r){return this._show(this.edgeObject,!0,t,n,r),this._show(this.fillObject,e,t,n,r)}dispose(){return this.geometry.dispose(),this.edgeMaterial.dispose(),this.fillMaterial.dispose(),this.renders=this.edgeObject=this.fillObject=this.geometry=this.edgeMaterial=this.fillMaterial=null,super.dispose()}}class LXe extends yU{constructor(e,t,n){const r=n.width||1,s=n.height||1,a=n.depth||1,o=r*s*a;n.samples||(n.samples=o),super(e,t,n),this.width=r,this.height=s,this.depth=a,this.samples==null&&(this.samples=o),this.build(n)}build(e){return this.data=[],this.data.length=this.samples,this.filled=0,this.pad={x:0,y:0,z:0},this.streamer=this.generate(this.data)}dispose(){return this.data=null,super.dispose()}getFilled(){return this.filled}setActive(e,t,n){let r;return[this.pad.x,this.pad.y,this.pad.z]=Array.from(r=[this.width-e,this.height-t,this.depth-n]),r}read(){return this.data}copy(e){const t=Math.min(e.length,this.samples),n=this.data;return OXe(0,t,!1).map(r=>n[r]=e[r])}fill(){let e,t,n,r;const{callback:s}=this;typeof s.reset=="function"&&s.reset();const{emit:a,skip:o,count:l,done:c,reset:u}=this.streamer;u();const h=this.width,d=this.height,f=this.pad.x,m=this.pad.y,A=this.samples-this.pad.z*h*d;let _=e=t=n=0;if(f>0||m>0)for(;!c()&&n<A&&(n++,r=s(a,_,e,t),++_===h-f&&(o(f),_=0,++e===d-m&&(o(h*m),e=0,t++)),r!==!1););else for(;!c()&&n<A&&(n++,r=s(a,_,e,t),++_===h&&(_=0,++e===d&&(e=0,t++)),r!==!1););return this.filled=1,l()}}function OXe(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let a=i;r?a<s:a>s;r?a++:a--)n.push(a);return n}class NXe extends vv{constructor(e,t,n){super(e,t),this.items==null&&(this.items=n.items||1),this.channels==null&&(this.channels=n.channels||4),this.width==null&&(this.width=n.width||1),this.height==null&&(this.height=n.height||1),this.depth==null&&(this.depth=n.depth||1),this.type==null&&(this.type=n.type||ns),this.stpq==null&&(this.stpq=n.stpq||!1),this.isFloat=this.type===ns,this.active=this.sampled=this.rect=this.pad=null,this.build(n)}build(e){let t,n,r;const{map:s}=e,{indexer:a}=e,o=a!=null&&!a.empty();let{stpq:l}=this;const{items:c,width:u,height:h,depth:d}=this;let f=s;o&&(this._adopt({indexModulus:{type:"v4",value:new zi(c,c*u,c*u*h,1)}}),f=this.shaders.shader(),f.require(s),f.require(a),f.pipe("float.index.pack",this.uniforms)),this.isFloat&&this.channels>1&&(this.floatMemo=new FM(this.renderer,this.shaders,{items:c,channels:4,width:u,height:h,depth:d,history:0,type:ns}),this.floatCompose=new zM(this.renderer,this.shaders,{map:f,items:c,width:u,height:h,depth:d,stpq:l}),this.floatMemo.adopt(this.floatCompose),l=!1,f=this.shaders.shader(),this.floatMemo.shaderAbsolute(f)),this.isFloat?(r=this.channels,t=4):(r=1,t=this.channels),r>1?(n=this.shaders.shader(),n.pipe(LF(r)),n.require(f),n.pipe("float.stretch"),n.pipe("float.encode"),f=n):this.isFloat&&(n=this.shaders.shader(),n.pipe(f),n.pipe(qf(4,1)),n.pipe("float.encode"),f=n),this.byteMemo=new FM(this.renderer,this.shaders,{items:c*r,channels:t,width:u,height:h,depth:d,history:0,type:ts}),this.byteCompose=new zM(this.renderer,this.shaders,{map:f,items:c*r,width:u,height:h,depth:d,stpq:l}),this.byteMemo.adopt(this.byteCompose);const m=c*u*r,A=h*d;return this.samples=this.width*this.height*this.depth,this.bytes=new Uint8Array(m*A*4),this.isFloat&&(this.floats=new Float32Array(this.bytes.buffer)),this.data=this.isFloat?this.floats:this.bytes,this.streamer=this.generate(this.data),this.active={items:0,width:0,height:0,depth:0},this.sampled={items:0,width:0,height:0,depth:0},this.rect={w:0,h:0},this.pad={x:0,y:0,z:0,w:0},this.stretch=r,this.isIndexed=o,this.setActive(c,u,h,d)}generate(e){return uI(e,this.samples,4,this.items)}setActive(e,t,n,r){let s;if(e===this.active.items&&t===this.active.width&&n===this.active.height&&r===this.active.depth)return;[this.active.items,this.active.width,this.active.height,this.active.depth]=Array.from([e,t,n,r]),this.floatCompose!=null&&this.floatCompose.cover(t,n,r),this.byteCompose!=null&&this.byteCompose.cover(t*this.stretch,n,r),{items:e}=this,{width:t}=this.active,n=this.depth===1?this.active.height:this.height,{depth:r}=this.active;const a=e*t*this.stretch,o=n*r;return[this.sampled.items,this.sampled.width,this.sampled.height,this.sampled.depth]=Array.from([e,t,n,r]),[this.rect.w,this.rect.h]=Array.from([a,o]),[this.pad.x,this.pad.y,this.pad.z,this.pad.w]=Array.from(s=[this.sampled.width-this.active.width,this.sampled.height-this.active.height,this.sampled.depth-this.active.depth,this.sampled.items-this.active.items]),s}update(e){return this.floatMemo!=null&&this.floatMemo.render(e),this.byteMemo!=null?this.byteMemo.render(e):void 0}post(){const e=this.renderer.getRenderTarget();this.renderer.setRenderTarget(this.byteMemo.target.targets[0]),this.gl.readPixels(0,0,this.rect.w,this.rect.h,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.bytes),this.renderer.setRenderTarget(e)}readFloat(e){return this.floatMemo!=null?this.floatMemo.read(e):void 0}readByte(e){return this.byteMemo!=null?this.byteMemo.read(e):void 0}setCallback(e){this.emitter=this.callback(e)}callback(e){if(!this.isIndexed)return e;const t=this.width,n=this.height,r=this.items,s=function(a,o,l,c){let u=c;const h=u%r;u=(u-h)/r;const d=u%t;u=(u-d)/t;const f=u%n;return u=(u-f)/n,e(a,o,l,c,d,f,u,h)};return s.reset=()=>typeof e.reset=="function"?e.reset():void 0,s}iterate(){let e,t,n,r=this.emitter;typeof r.reset=="function"&&r.reset();const{consume:s,skip:a,count:o,done:l,reset:c}=this.streamer;c();const u=this.sampled.width|0;let h=this.sampled.height|0;const d=this.sampled.depth|0,f=this.sampled.items|0,m=this.pad.x|0,A=this.pad.y|0,_=this.pad.z|0,v=this.pad.w|0,w=u*h*f*(d-_);if(!this.isIndexed){const C=r;r=(S,I,P,k)=>C(S,I,P,k,x,e,t,n)}let x=e=t=n=h=0;for(;!l()&&h<w;){h++;const C=s(r);if(++n===f-v&&(a(m),n=0,++x===u-m&&(a(f*m),x=0,++e===h-A&&(a(f*u*A),e=0,t++))),C===!1)break}return Math.floor(o()/f)}dispose(){return this.floatMemo!=null&&this.floatMemo.unadopt(this.floatCompose),this.floatMemo!=null&&this.floatMemo.dispose(),this.floatCompose!=null&&this.floatCompose.dispose(),this.byteMemo!=null&&this.byteMemo.unadopt(this.byteCompose),this.byteMemo!=null&&this.byteMemo.dispose(),this.byteCompose!=null&&this.byteCompose.dispose(),this.floatMemo=this.byteMemo=this.floatCompose=this.byteCompose=null}}class FXe extends Pd{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s}=n;const{material:a,position:o,sprite:l,map:c,combine:u,linear:h,color:d,mask:f,stpq:m}=n;s==null&&(s={});const A=s.styleColor!=null;this.geometry=new SU({items:n.items,width:n.width,height:n.height,depth:n.depth}),this._adopt(s),this._adopt(this.geometry.uniforms);const _=t.material(),v=_.vertex;v.pipe(this._vertexColor(d,f)),v.require(this._vertexPosition(o,a,c,2,m)),v.require(l),v.pipe("sprite.position",this.uniforms),v.pipe("project.position",this.uniforms),_.fragment=r=this._fragmentColor(A,a,d,f,c,2,m,u,h);const w=t.material();w.vertex.pipe(v),w.fragment.pipe(r),w.fragment.pipe("fragment.transparent",this.uniforms);const x=t.material();x.vertex.pipe(v),x.fragment.pipe(r),x.fragment.pipe("fragment.solid",this.uniforms);const C=x.link({side:fs});this.fillMaterial=this._material(C);const S=w.link({side:fs});this.edgeMaterial=this._material(S),this.fillObject=new cr(this.geometry,this.fillMaterial),this.edgeObject=new cr(this.geometry,this.edgeMaterial),this._raw(this.fillObject),this.fillObject.userData=C,this._raw(this.edgeObject),this.edgeObject.userData=S,this.renders=[this.fillObject,this.edgeObject]}show(e,t,n,r){return this._show(this.edgeObject,!0,t,n,r),this._show(this.fillObject,e,t,n,r)}dispose(){return this.geometry.dispose(),this.edgeMaterial.dispose(),this.fillMaterial.dispose(),this.renders=this.geometry=this.edgeMaterial=this.fillMaterial=this.edgeObject=this.fillObject=null,super.dispose()}}class zXe extends Av{constructor(e){let t,n,r,s,a;super(e),this._clipUniforms(),this.items=r=+e.items||2,this.width=a=+e.width||1,this.height=n=+e.height||1,this.depth=t=+e.depth||1,this.sides=s=Math.max(0,r-2);const o=a*n*t,l=r*o,c=s*o;this.setIndex(new Ln(new Uint32Array(c*3),1)),this.setAttribute("position4",new Ln(new Float32Array(l*4),4)),this.setAttribute("strip",new Ln(new Float32Array(l*3),3));const u=this._emitter("index"),h=this._emitter("position4"),d=this._emitter("strip");let f=0;for(let A=0,_=o,v=0<=_;v?A<_:A>_;v?A++:A--){let w=f;for(let x=0,C=s,S=0<=C;S?x<C:x>C;S?x++:x--)x&1?(u(w+1),u(w),u(w+2)):(u(w),u(w+1),u(w+2)),w++;f+=r}const m=r-1;for(let A=0,_=t,v=0<=_;v?A<_:A>_;v?A++:A--)for(let w=0,x=n,C=0<=x;C?w<x:w>x;C?w++:w--)for(let S=0,I=a,P=0<=I;P?S<I:S>I;P?S++:S--){let k=1;h(S,w,A,0),d(1,2,k);for(let M=1,R=m,N=1<=R;N?M<R:M>R;N?M++:M--)h(S,w,A,M),d(M-1,M+1,k=-k);h(S,w,A,m),d(m-2,m-1,-k)}this._finalize(),this.clip()}clip(e,t,n,r){e==null&&({width:e}=this),t==null&&({height:t}=this),n==null&&({depth:n}=this),r==null&&({items:r}=this);const s=Math.max(0,r-2);return this._clipGeometry(e,t,n,r),this._clipOffsets(3,e,t,n,s,this.width,this.height,this.depth,this.sides)}}class UXe extends Pd{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s,material:a}=n;const{position:o,color:l,mask:c,map:u,combine:h,linear:d,stpq:f}=n;s==null&&(s={}),a==null&&(a=!0);const m=s.styleColor!=null;this.geometry=new zXe({items:n.items,width:n.width,height:n.height,depth:n.depth}),this._adopt(s),this._adopt(this.geometry.uniforms);const A=t.material(),_=A.vertex;_.pipe(this._vertexColor(l,c)),_.require(this._vertexPosition(o,a,u,2,f)),a||_.pipe("mesh.position",this.uniforms),a&&_.pipe("strip.position.normal",this.uniforms),_.pipe("project.position",this.uniforms),A.fragment=r=this._fragmentColor(m,a,l,c,u,2,f,h,d),r.pipe("fragment.color",this.uniforms);const v=A.link({side:fs});this.material=this._material(v);const w=new cr(this.geometry,this.material);w.userData=v,this._raw(w),this.renders=[w]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.renders=this.geometry=this.material=null,super.dispose()}}class VXe extends Pd{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s,material:a}=n;const{position:o,color:l,normal:c,mask:u,map:h,combine:d,linear:f,stpq:m,intUV:A}=n;s==null&&(s={}),a==null&&(a=!0);const _=s.styleColor!=null;this.geometry=new CU({width:n.width,height:n.height,surfaces:n.surfaces,layers:n.layers,closedX:n.closedX,closedY:n.closedY}),this._adopt(s),this._adopt(this.geometry.uniforms);const v={};n.closedX&&(v.SURFACE_CLOSED_X=""),n.closedY&&(v.SURFACE_CLOSED_Y=""),A&&(v.POSITION_UV_INT="");const w=t.material(),x=w.vertex;x.pipe(this._vertexColor(l,u)),x.require(this._vertexPosition(o,a,h,2,m)),c?(x.require(c),x.pipe("surface.position.normal",this.uniforms,v)):(a||x.pipe("surface.position",this.uniforms,v),a&&x.pipe("surface.position.shaded",this.uniforms,v)),x.pipe("project.position",this.uniforms),w.fragment=r=this._fragmentColor(_,a,l,u,h,2,m,d,f),r.pipe("fragment.color",this.uniforms);const C=w.link({side:fs});this.material=this._material(C);const S=new cr(this.geometry,this.material);S.userData=C,this._raw(S),this.renders=[S]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.renders=this.geometry=this.material=null,super.dispose()}}const HXe=512/16;class GXe extends wU{constructor(e,t,n){let r;if(n.width||(n.width=256),n.height||(n.height=256),n.type=ts,n.channels=1,n.backed=!0,super(e,t,n,!1),this.font=n.font!=null?n.font:["sans-serif"],this.size=n.size||24,this.style=n.style!=null?n.style:"normal",this.variant=n.variant!=null?n.variant:"normal",this.weight=n.weight!=null?n.weight:"normal",this.outline=(r=+(n.outline!=null?n.outline:5))!=null?r:0,this.gamma=1,typeof navigator<"u"){const s=navigator.userAgent;s.match(/Chrome/)&&s.match(/OS X/)&&(this.gamma=.5)}this.scratchW=this.scratchH=0,this.build(n)}build(e){super.build(e);let t=16;t=this.size,t+=4+2*Math.min(1,this.outline);const n=HXe*t,r=document.createElement("canvas");r.width=n,r.height=t;const s=h=>`${h.replace(/(['"\\])/g,"\\$1")}`,a=this.font.map(s).join(", "),o=r.getContext("2d",{willReadFrequently:!0});o.font=`${this.style} ${this.variant} ${this.weight} ${this.size}px ${a}`,o.fillStyle="#FF0000",o.textAlign="left",o.textBaseline="bottom",o.lineJoin="round";const l=[],c=this.outline*3;for(let h=0,d=c,f=0<=d;f?h<d:h>d;f?h++:h--){const m=("00"+Math.max(0,-h*8+128-!h*8).toString(16)).slice(-2);l.push("#"+m+m+m)}const u=new Uint8Array(n*t*2);return this.canvas=r,this.context=o,this.lineHeight=t,this.maxWidth=n,this.colors=l,this.scratch=u,this._allocate=this.allocate.bind(this),this._write=this.write.bind(this)}reset(){return super.reset(),this.mapped={}}begin(){return Array.from(this.rows).map(e=>e.alive=0)}end(){const{mapped:e}=this;for(const t of Array.from(this.rows.slice()))if(t.alive===0){for(const n of Array.from(t.keys))delete e[n];this.collapse(t)}}map(e,t){const{mapped:n}=this,r=n[e];if(r!=null)return r.row.alive++,t(r.x,r.y,r.w,r.h);this.draw(e);const s=this.scratch,a=this.scratchW,o=this.scratchH,l=this._allocate,c=this._write;return l(e,a,o,function(u,h,d){return n[e]={x:h,y:d,w:a,h:o,row:u},c(s,h,d,a,o),t(h,d,a,o)})}draw(e){let t,n,r,s=this.width;const a=this.lineHeight,o=this.outline,l=this.context,c=this.scratch,u=this.maxWidth,{colors:h}=this,d=o+1,f=Math.round(a*1.05-1),m=l.measureText(e);if(s=Math.min(u,Math.ceil(m.width+2*d+1)),l.clearRect(0,0,s,a),this.outline===0){let A,_;for(l.fillText(e,d,f),{data:t}=l.getImageData(0,0,s,a),r=3,n=0,_=t.length/4,A=0<=_;A?n<_:n>_;A?n++:n--)c[n]=t[r],r+=4;return this.scratchW=s,this.scratchH=a}else{let A,_,v,w;for(l.globalCompositeOperation="source-over",_=o+1,n=_,A=_<=1;A?n<=1:n>=1;A?n++:n--)r=n>1?n*2-2:n,l.strokeStyle=h[r-1],l.lineWidth=r,l.strokeText(e,d,f);l.globalCompositeOperation="multiply",l.fillText(e,d,f),{data:t}=l.getImageData(0,0,s,a),r=0;const{gamma:x}=this;for(n=0,w=t.length/4,v=0<=w;v?n<w:n>w;v?n++:n--){const C=t[r];let S=C?t[r+1]/C:1;x===.5&&(S=Math.sqrt(S)),S=Math.min(1,Math.max(0,S));const I=256-C,P=I+(C-I)*S;c[n]=Math.max(0,Math.min(255,P+2)),r+=4}return this.scratchW=s,this.scratchH=a}}}class QXe extends bC{build(e){return super.build(),this.pad={x:0,y:0,z:0},this.streamer=this.generate(this.data)}setActive(e,t,n){let r;return[this.pad.x,this.pad.y,this.pad.z]=Array.from(r=[Math.max(0,this.width-e),Math.max(0,this.height-t),Math.max(0,this.depth-n)]),r}fill(){let e,t,n,r;const{callback:s}=this;typeof s.reset=="function"&&s.reset();const{emit:a,skip:o,count:l,done:c,reset:u}=this.streamer;u();const h=this.width,d=this.height,f=this.pad.x,m=this.pad.y,A=this.samples-this.pad.z*h*d;let _=e=t=n=0;if(f>0||m>0)for(;!c()&&n<A&&(n++,r=s(a,_,e,t),++_===h-f&&(o(f),n+=f,_=0,++e===d-m&&(o(h*m),n+=h*m,e=0,t++)),r!==!1););else for(;!c()&&n<A&&(n++,r=s(a,_,e,t),++_===h&&(_=0,++e===d&&(e=0,t++)),r!==!1););return Math.floor(l()/this.items)}through(e,t){let n,r,s,a;const{consume:o,done:l,skip:c}=a=this.streamer,{emit:u}=n=t.streamer;let h=r=s=0,d=()=>o((f,m,A,_)=>e(u,f,m,A,_,h,r,s));return d=A_(d,this.items),()=>{let f;a.reset(),n.reset();const m=this.width,A=this.height,_=this.pad.x,v=this.pad.y,w=this.samples-this.pad.z*m*A;if(h=r=s=f=0,_>0||v>0)for(;!l()&&f<w;)f++,d(),++h===m-_&&(c(_),h=0,++r===A-v&&(c(m*v),r=0,s++));else for(;!l()&&f<w;)f++,d(),++h===m&&(h=0,++r===A&&(r=0,s++));return a.count()}}}const MU={sprite:FXe,point:DXe,line:PXe,surface:VXe,face:TXe,strip:UXe,arrow:xXe,screen:EU,memoScreen:zM,debug:SXe,dataBuffer:bC,arrayBuffer:bXe,matrixBuffer:kXe,voxelBuffer:QXe,pushBuffer:LXe,renderToTexture:xU,memo:FM,readback:NXe,atlas:wU,textAtlas:GXe,scene:_U},qXe=Object.freeze(Object.defineProperty({__proto__:null,Classes:MU,Factory:bU,Scene:_U},Symbol.toStringTag,{value:"Module"})),jXe=`uniform float worldUnit;
uniform float lineDepth;
uniform float lineWidth;
uniform float focusDepth;

uniform vec4 geometryClip;
uniform float arrowSize;
uniform float arrowSpace;

attribute vec4 position4;
attribute vec3 arrow;
attribute vec2 attach;

// External
vec3 getPosition(vec4 xyzw, float canonical);

void getArrowGeometry(vec4 xyzw, float near, float mid, float far, out vec3 left, out vec3 right, out vec3 middle, out vec3 start) {
  right  = getPosition(xyzw, 1.0);
  left   = getPosition(vec4(near, xyzw.yzw), 0.0);
  middle = getPosition(vec4(mid,  xyzw.yzw), 0.0);
  start  = getPosition(vec4(far,  xyzw.yzw), 0.0);
}

mat4 getArrowMatrix(vec3 left, vec3 right, vec3 middle, vec3 start) {

  float depth = focusDepth;
  if (lineDepth < 1.0) {
    // Depth blending
    float z = max(0.00001, -right.z);
    depth = mix(z, focusDepth, lineDepth);
  }

  vec3 diff = left - right;
  float l = length(diff);
  if (l == 0.0) {
    return mat4(1.0, 0.0, 0.0, 0.0,
                0.0, 1.0, 0.0, 0.0,
                0.0, 0.0, 1.0, 0.0,
                0.0, 0.0, 0.0, 1.0);
  }

  // Construct TBN matrix around shaft
  vec3 t = normalize(diff);
  vec3 n = normalize(cross(t, t.yzx + vec3(.1, .2, .3)));
  vec3 b = cross(n, t);

  // Shrink arrows when vector gets too small
  // Approach linear scaling with cubic ease the smaller we get
  float size = arrowSize * lineWidth * worldUnit * depth * 1.25;
  l = max(length(right - middle), length(middle - start)) * 2.0 * arrowSpace;
  float mini = clamp(1.0 - l / size * .333, 0.0, 1.0);
  float scale = 1.0 - mini * mini * mini;
  float range = size * scale;

  // Size to 2.5:1 ratio
  float rangeNB = range / 2.5;

  // Anchor at end position
  return mat4(vec4(n * rangeNB,  0),
              vec4(b * rangeNB,  0),
              vec4(t * range, 0),
              vec4(right,  1.0));
}

vec3 getArrowPosition() {
  vec3 left, right, middle, start;

  // Clip arrow position and attachment anchors to data
  vec4 p = min(geometryClip, position4);
  vec3 a = vec3(min(geometryClip.x, p.x + attach.x), geometryClip.x / 2.0, min(geometryClip.x, attach.y));

  getArrowGeometry(p, a.x, a.y, a.z, left, right, middle, start);
  mat4 matrix = getArrowMatrix(left, right, middle, start);

  return (matrix * vec4(arrow.xyz, 1.0)).xyz;

}
`,WXe=`uniform vec4 axisStep;
uniform vec4 axisPosition;

vec4 getAxisPosition(vec4 xyzw, inout vec4 stpq) {
  return axisStep * xyzw.x + axisPosition;
}
`,$Xe=`uniform vec4 basisScale;
uniform vec4 basisOffset;
uniform vec4 viewScale;
uniform vec4 viewOffset;

vec4 getCartesian4Position(vec4 position, inout vec4 stpq) {
  return position * basisScale + basisOffset;
}
`,XXe=`uniform mat4 viewMatrix;

vec4 getCartesianPosition(vec4 position, inout vec4 stpq) {
  return viewMatrix * vec4(position.xyz, 1.0);
}
`,YXe=`uniform vec4 clampLimit;

vec4 getClampXYZW(vec4 xyzw) {
  return clamp(xyzw, vec4(0.0), clampLimit);
}
`,KXe=`vec4 opaqueColor(vec4 color) {
  return vec4(color.rgb, 1.0);
}
`,JXe=`uniform vec4 geometryClip;
attribute vec4 position4;

// External
vec3 getPosition(vec4 xyzw, float canonical);

vec3 getFacePosition() {
  vec4 p = min(geometryClip, position4);
  return getPosition(p, 1.0);
}
`,ZXe=`attribute vec4 position4;

// External
vec3 getPosition(vec4 xyzw, float canonical);

varying vec3 vNormal;
varying vec3 vLight;
varying vec3 vPosition;

void getFaceGeometry(vec4 xyzw, out vec3 pos, out vec3 normal) {
  vec3 a, b, c;

  a   = getPosition(vec4(xyzw.xyz, 0.0), 0.0);
  b   = getPosition(vec4(xyzw.xyz, 1.0), 0.0);
  c   = getPosition(vec4(xyzw.xyz, 2.0), 0.0);

  pos = getPosition(xyzw, 1.0);
  normal = normalize(cross(c - a, b - a));
}

vec3 getFacePositionNormal() {
  vec3 center, normal;

  getFaceGeometry(position4, center, normal);
  vNormal   = normal;
  vLight    = normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz);
  vPosition = -center;

  return center;
}
`,eYe=`/*
Float encoding technique by
Carlos Scheidegger
https://github.com/cscheid/lux/blob/master/src/shade/bits/encode_float.js

Conversion to GLSL by:
http://concord-consortium.github.io/lab/experiments/webgl-gpgpu/script.js
*/

float shift_right(float v, float amt) { 
  v = floor(v) + 0.5; 
  return floor(v / exp2(amt)); 
}

float shift_left(float v, float amt) { 
  return floor(v * exp2(amt) + 0.5); 
}

float mask_last(float v, float bits) { 
  return mod(v, shift_left(1.0, bits)); 
}

float extract_bits(float num, float from, float to) { 
  from = floor(from + 0.5); to = floor(to + 0.5); 
  return mask_last(shift_right(num, from), to - from); 
}

vec4 encode_float(float val) { 
  if (val == 0.0) return vec4(0, 0, 0, 0); 
  float valuesign = val > 0.0 ? 0.0 : 1.0; 
  val = abs(val); 
  float exponent = floor(log2(val)); 
  float biased_exponent = exponent + 127.0; 
  float fraction = ((val / exp2(exponent)) - 1.0) * 8388608.0; 
  float t = biased_exponent / 2.0; 
  float last_bit_of_biased_exponent = fract(t) * 2.0; 
  float remaining_bits_of_biased_exponent = floor(t); 
  float byte4 = extract_bits(fraction, 0.0, 8.0) / 255.0; 
  float byte3 = extract_bits(fraction, 8.0, 16.0) / 255.0; 
  float byte2 = (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0; 
  float byte1 = (valuesign * 128.0 + remaining_bits_of_biased_exponent) / 255.0; 
  return vec4(byte4, byte3, byte2, byte1); 
}
`,tYe=`uniform vec4 indexModulus;

vec4 getSample(vec4 xyzw);
vec4 getIndex(vec4 xyzw);

vec4 floatPackIndex(vec4 xyzw) {
  vec4 value = getSample(xyzw);
  vec4 index = getIndex(xyzw);

  vec4 offset = floor(index + .5) * indexModulus;
  vec2 sum2 = offset.xy + offset.zw;
  float sum = sum2.x + sum2.y;
  return vec4(value.xyz, sum);
}`,nYe=`vec4 getSample(vec4 xyzw);

float floatStretch(vec4 xyzw, float channelIndex) {
  vec4 sample = getSample(xyzw);
  vec2 xy = channelIndex > 1.5 ? sample.zw : sample.xy;
  return mod(channelIndex, 2.0) > .5 ? xy.y : xy.x;
}`,iYe=`varying float vClipStrokeWidth;
varying float vClipStrokeIndex;
varying vec3  vClipStrokeEven;
varying vec3  vClipStrokeOdd;
varying vec3  vClipStrokePosition;

void clipStrokeFragment() {
  bool odd = mod(vClipStrokeIndex, 2.0) >= 1.0;

  vec3 tangent;
  if (odd) {
    tangent = vClipStrokeOdd;
  }
  else {
    tangent = vClipStrokeEven;
  }

  float travel = dot(vClipStrokePosition, normalize(tangent)) / vClipStrokeWidth;
  if (mod(travel, 16.0) > 8.0) {
    discard;
  }
}
`,rYe=`varying float vClipStrokeWidth;
varying float vClipStrokeIndex;
varying vec3  vClipStrokeEven;
varying vec3  vClipStrokeOdd;
varying vec3  vClipStrokePosition;

void clipStrokeFragment() {
  bool odd = mod(vClipStrokeIndex, 2.0) >= 1.0;

  vec3 tangent;
  if (odd) {
    tangent = vClipStrokeOdd;
  }
  else {
    tangent = vClipStrokeEven;
  }

  float travel = dot(vClipStrokePosition, normalize(tangent)) / vClipStrokeWidth;
  if (mod(travel, 4.0) > 2.0) {
    discard;
  }
}
`,sYe=`varying vec2 vClipEnds;

void clipEndsFragment() {
  if (vClipEnds.x < 0.0 || vClipEnds.y < 0.0) discard;
}
`,aYe=`varying float vClipProximity;

void clipProximityFragment() {
  if (vClipProximity >= 0.5) discard;
}`,oYe=`void setFragmentColor(vec4 color) {
  gl_FragColor = color;
}`,lYe=`vec4 fragmentRGBA(vec4 rgba, vec4 stpq) {
  return rgba;
}`,cYe=`void setFragmentColor(vec4 color) {
  if (color.a < 1.0) discard;
  gl_FragColor = color;
}`,uYe=`void setFragmentColor(vec4 color) {
  if (color.a >= 1.0) discard;
  gl_FragColor = color;
}`,hYe=`uniform vec4 gridPosition;
uniform vec4 gridStep;
uniform vec4 gridAxis;

vec4 sampleData(vec2 xy);

vec4 getGridPosition(vec4 xyzw) {
  vec4 onAxis  = gridAxis * sampleData(vec2(xyzw.y, 0.0)).x;
  vec4 offAxis = gridStep * xyzw.x + gridPosition;
  return onAxis + offAxis;
}
`,dYe=`uniform float growScale;
uniform vec4  growMask;
uniform vec4  growAnchor;

vec4 getSample(vec4 xyzw);

vec4 getGrowSample(vec4 xyzw) {
  vec4 anchor = xyzw * growMask + growAnchor;

  vec4 position = getSample(xyzw);
  vec4 center = getSample(anchor);

  return mix(center, position, growScale);
}`,fYe=`uniform float joinStride;
uniform float joinStrideInv;

float getIndex(vec4 xyzw);
vec4 getRest(vec4 xyzw);
vec4 injectIndices(float a, float b);

vec4 getJoinXYZW(vec4 xyzw) {

  float a = getIndex(xyzw);
  float b = a * joinStrideInv;

  float integer  = floor(b);
  float fraction = b - integer;
  
  return injectIndices(fraction * joinStride, integer) + getRest(xyzw);
}
`,pYe=`varying float vPixelSize;

vec4 getLabelAlphaColor(vec4 color, vec4 sample) {
  float mask = clamp(sample.r * 1000.0, 0.0, 1.0);
  float alpha = (sample.r - .5) * vPixelSize + .5;
  float a = mask * alpha * color.a;
  if (a <= 0.0) discard;
  return vec4(color.xyz, a);
}
`,mYe=`vec2 mapUV(vec4 uvwo, vec4 stpq) {
  return uvwo.xy;
}
`,gYe=`uniform float outlineExpand;
uniform float outlineStep;
uniform vec3  outlineColor;

varying float vPixelSize;

const float PIXEL_STEP = 255.0 / 16.0;

vec4 getLabelOutlineColor(vec4 color, vec4 sample) {
  float ps = vPixelSize * PIXEL_STEP;
  float os = outlineStep;

  float sdf = sample.r - .5 + outlineExpand;
  vec2  sdfs = vec2(sdf, sdf + os);
  vec2  alpha = clamp(sdfs * ps + .5, 0.0, 1.0);

  if (alpha.y <= 0.0) {
    discard;
  }

  vec3 blend = color.xyz;
  if (alpha.y > alpha.x) {
    blend = sqrt(mix(outlineColor * outlineColor, blend * blend, alpha.x));
  }
  
  return vec4(blend, alpha.y * color.a);
}
`,vYe=`uniform vec4 layerScale;
uniform vec4 layerBias;

#define PROJECT_ORTHOGONAL

vec4 layerPosition(vec4 position, inout vec4 stpq) {
  return layerScale * position + layerBias;
}
`,AYe=`// External
vec4 sampleData(vec4 xyzw);

vec4 lerpDepth(vec4 xyzw) {
  float x = xyzw.z;
  float i = floor(x);
  float f = x - i;
    
  vec4 xyzw1 = vec4(xyzw.xy, i, xyzw.w);
  vec4 xyzw2 = vec4(xyzw.xy, i + 1.0, xyzw.w);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, f);
}
`,_Ye=`// External
vec4 sampleData(vec4 xyzw);

vec4 lerpHeight(vec4 xyzw) {
  float x = xyzw.y;
  float i = floor(x);
  float f = x - i;
    
  vec4 xyzw1 = vec4(xyzw.x, i, xyzw.zw);
  vec4 xyzw2 = vec4(xyzw.x, i + 1.0, xyzw.zw);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, f);
}
`,bYe=`// External
vec4 sampleData(vec4 xyzw);

vec4 lerpItems(vec4 xyzw) {
  float x = xyzw.w;
  float i = floor(x);
  float f = x - i;
    
  vec4 xyzw1 = vec4(xyzw.xyz, i);
  vec4 xyzw2 = vec4(xyzw.xyz, i + 1.0);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, f);
}
`,yYe=`// External
vec4 sampleData(vec4 xyzw);

vec4 lerpWidth(vec4 xyzw) {
  float x = xyzw.x;
  float i = floor(x);
  float f = x - i;
    
  vec4 xyzw1 = vec4(i, xyzw.yzw);
  vec4 xyzw2 = vec4(i + 1.0, xyzw.yzw);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, f);
}
`,wYe=`// Units and calibration
uniform float worldUnit;
uniform float lineWidth;
uniform float lineDepth;
uniform float focusDepth;

// General data index
uniform vec4 geometryClip;
attribute vec4 position4;

// (Top/bottom -1,1)
attribute float line;

// 0...1 for round or bevel joins
#ifdef LINE_JOIN_DETAIL
attribute float joint;
#else
const float joint = 0.0;
#endif

// Knock out excessively long line segments (e.g. for asymtpotes)
#ifdef LINE_PROXIMITY
uniform float lineProximity;
varying float vClipProximity;
#endif

// Ghetto line stroking (local only, not global)
#ifdef LINE_STROKE
varying float vClipStrokeWidth;
varying float vClipStrokeIndex;
varying vec3  vClipStrokeEven;
varying vec3  vClipStrokeOdd;
varying vec3  vClipStrokePosition;
#endif

// External
vec3 getPosition(vec4 xyzw, float canonical);

// Clip line ends for arrows / decoration
#ifdef LINE_CLIP
uniform float clipRange;
uniform vec2  clipStyle;
uniform float clipSpace;

attribute vec2 strip;

varying vec2 vClipEnds;

void clipEnds(vec4 xyzw, vec3 center, vec3 pos) {

  // Sample start of line strip
  vec4 xyzwS = vec4(0.0, xyzw.yzw);
  vec3 start = getPosition(xyzwS, 0.0);

  // Sample middle of line strip
  vec4 xyzwM = vec4(geometryClip.x / 2.0, xyzw.yzw);
  vec3 middle = getPosition(xyzwM, 0.0);

#ifdef LINE_CLOSED
  vec3 end = start;
#else
  // Sample other end of line strip
  vec4 xyzwE = vec4(geometryClip.x, xyzw.yzw);
  vec3 end   = getPosition(xyzwE, 0.0);
#endif

  // Measure length
  float l = max(length(end - middle), length(middle - start)) * clipSpace * 2.0;

  // Arrow length (=2.5x radius)
  float arrowSize = 1.25 * clipRange * lineWidth * worldUnit;

#ifdef LINE_CLOSED
  // Clip around start/end
  end = start;
#endif

  vClipEnds = vec2(1.0);

  if (clipStyle.y > 0.0) {
    // Depth blend end
    float depth = focusDepth;
    if (lineDepth < 1.0) {
      float z = max(0.00001, -end.z);
      depth = mix(z, focusDepth, lineDepth);
    }

    // Absolute arrow length
    float size = arrowSize * depth;

    // Adjust clip range
    // Approach linear scaling with cubic ease the smaller we get
    float mini = clamp(1.0 - l / size * .333, 0.0, 1.0);
    float scale = 1.0 - mini * mini * mini;
    float invrange = 1.0 / (size * scale);

    // Clip end
    vec3 diff = end - center;
    if(diff == vec3(0.0))
      vClipEnds.x = -1.0;
    else {
      diff = normalize(end - center);
      float d = dot(end - pos, diff);
      vClipEnds.x = d * invrange - 1.0;
    }
  }

  if (clipStyle.x > 0.0) {
    // Depth blend start
    float depth = focusDepth;
    if (lineDepth < 1.0) {
      float z = max(0.00001, -start.z);
      depth = mix(z, focusDepth, lineDepth);
    }

    // Absolute arrow length
    float size = arrowSize * depth;

    // Adjust clip range
    // Approach linear scaling with cubic ease the smaller we get
    float mini = clamp(1.0 - l / size * .333, 0.0, 1.0);
    float scale = 1.0 - mini * mini * mini;
    float invrange = 1.0 / (size * scale);

    // Clip start
    vec3 diff = center - start;
    if(diff == vec3(0.0))
      vClipEnds.y = -1.0;
    else {
      diff = normalize(center - start);
      float d = dot(pos - start, diff);
      vClipEnds.y = d * invrange - 1.0;
    }
  }
}
#endif

// Adjust left/center/right to be inside near/far z range
const float epsilon = 1e-5;
void fixCenter(inout vec3 left, inout vec3 center, inout vec3 right) {
  if (center.z >= 0.0) {
    if (left.z < 0.0) {
      float d = (center.z + epsilon) / (center.z - left.z);
      center = mix(center, left, d);
    }
    else if (right.z < 0.0) {
      float d = (center.z + epsilon) / (center.z - right.z);
      center = mix(center, right, d);
    }
  }

  if (left.z >= 0.0) {
    if (center.z < 0.0) {
      float d = (left.z + epsilon) / (left.z - center.z);
      left = mix(left, center, d);
    }
  }

  if (right.z >= 0.0) {
    if (center.z < 0.0) {
      float d = (right.z + epsilon) / (right.z - center.z);
      right = mix(right, center, d);
    }
  }
}

vec4 wrapAround(vec4 xyzw) {
#ifdef LINE_CLOSED
  float gx = geometryClip.x;
  if (xyzw.x < 0.0) xyzw.x += gx;
  if (xyzw.x >= gx) xyzw.x -= gx;
#endif
  return xyzw;
}

// Sample the source data in an edge-aware manner
void getLineGeometry(vec4 xyzw, float edge, out vec3 left, out vec3 center, out vec3 right) {
  vec4 delta = vec4(1.0, 0.0, 0.0, 0.0);

  center = getPosition(xyzw, 1.0);
  left   = (edge > -0.5) ? getPosition(wrapAround(xyzw - delta), 0.0) : center;
  right  = (edge < 0.5)  ? getPosition(wrapAround(xyzw + delta), 0.0) : center;
}

// Calculate the position for a vertex along the line, including joins
vec3 getLineJoin(float edge, bool odd, vec3 left, vec3 center, vec3 right, float width, float offset, float joint) {
  vec2 join = vec2(1.0, 0.0);

  fixCenter(left, center, right);

  vec4 a = vec4(left.xy, right.xy);
  vec4 b = a / vec4(left.zz, right.zz);

  vec2 l = b.xy;
  vec2 r = b.zw;
  vec2 c = center.xy / center.z;

  vec4 d = vec4(l, c) - vec4(c, r);
  float l1 = dot(d.xy, d.xy);
  float l2 = dot(d.zw, d.zw);

  if (l1 + l2 > 0.0) {

    if (edge > 0.5 || l2 == 0.0) {
      vec2 nl = normalize(d.xy);
      vec2 tl = vec2(nl.y, -nl.x);

#ifdef LINE_PROXIMITY
      vClipProximity = 1.0;
#endif

#ifdef LINE_STROKE
      vClipStrokeEven = vClipStrokeOdd = normalize(left - center);
#endif
      join = tl;
    }
    else if (edge < -0.5 || l1 == 0.0) {
      vec2 nr = normalize(d.zw);
      vec2 tr = vec2(nr.y, -nr.x);

#ifdef LINE_PROXIMITY
      vClipProximity = 1.0;
#endif

#ifdef LINE_STROKE
      vClipStrokeEven = vClipStrokeOdd = normalize(center - right);
#endif
      join = tr;
    }
    else {
      // Limit join stretch for tiny segments
      float lmin2 = min(l1, l2) / (width * width);

      // Hide line segment if ratio of leg lengths exceeds promixity threshold
#ifdef LINE_PROXIMITY
      float lr     = l1 / l2;
      float rl     = l2 / l1;
      float ratio  = max(lr, rl);
      float thresh = lineProximity + 1.0;
      vClipProximity = (ratio > thresh * thresh) ? 1.0 : 0.0;
#endif

      // Calculate normals/tangents
      vec2 nl = normalize(d.xy);
      vec2 nr = normalize(d.zw);

      // Calculate tangents
      vec2 tl = vec2(nl.y, -nl.x);
      vec2 tr = vec2(nr.y, -nr.x);

#ifdef LINE_PROXIMITY
      // Mix tangents according to leg lengths
      vec2 tc = normalize(mix(tl, tr, l1/(l1+l2)));
#else
      // Average tangent
      vec2 tc = normalize(tl + tr);
#endif

      // Miter join
      float cosA   = dot(nl, tc);
      float sinA   = max(0.1, abs(dot(tl, tc)));
      float factor = cosA / sinA;
      float scale  = sqrt(1.0 + min(lmin2, factor * factor));

      // Stroke normals
#ifdef LINE_STROKE
      vec3 stroke1 = normalize(left - center);
      vec3 stroke2 = normalize(center - right);

      if (odd) {
        vClipStrokeEven = stroke1;
        vClipStrokeOdd  = stroke2;
      }
      else {
        vClipStrokeEven = stroke2;
        vClipStrokeOdd  = stroke1;
      }
#endif

#ifdef LINE_JOIN_MITER
      // Apply straight up miter
      join = tc * scale;
#endif

#ifdef LINE_JOIN_ROUND
      // Slerp bevel join into circular arc
      float dotProduct = dot(nl, nr);
      float angle = acos(dotProduct);
      float sinT  = sin(angle);
      join = (sin((1.0 - joint) * angle) * tl + sin(joint * angle) * tr) / sinT;
#endif

#ifdef LINE_JOIN_BEVEL
      // Direct bevel join between two flat ends
      float dotProduct = dot(nl, nr);
      join = mix(tl, tr, joint);
#endif

#ifdef LINE_JOIN_DETAIL
      // Check if on inside or outside of joint
      float crossProduct = nl.x * nr.y - nl.y * nr.x;
      if (offset * crossProduct < 0.0) {
        // For near-180-degree bends, correct back to a miter to avoid discontinuities
        float ratio = clamp(-dotProduct * 2.0 - 1.0, 0.0, 1.0);
        // Otherwise collapse the inside vertices into one.
        join = mix(tc * scale, join, ratio * ratio * ratio);
      }
#endif

    }
    return vec3(join, 0.0);
  }
  else {
    return vec3(0.0);
  }

}

// Calculate final line position
vec3 getLinePosition() {
  vec3 left, center, right, join;

  // Up/down along segment
  float offset = line;

  // Clip data
  vec4 p = min(geometryClip, position4);

  // Left/center/right
  float edge = 0.0;
#ifdef LINE_CLOSED
  if (p.x == geometryClip.x) p.x = 0.0;
#else
  if (p.x == geometryClip.x) edge = 1.0;
  if (p.x == 0.0) edge = -1.0;
#endif

  // Get position + adjacent neighbours
  getLineGeometry(p, edge, left, center, right);

#ifdef LINE_STROKE
  // Set parameters for line stroke fragment shader
  vClipStrokePosition = center;
  vClipStrokeIndex = p.x;
  bool odd = mod(p.x, 2.0) >= 1.0;
#else
  bool odd = true;
#endif

  // Divide line width up/down
  float width = lineWidth * 0.5;

  float depth = focusDepth;
  if (lineDepth < 1.0) {
    // Depth blending
    float z = max(0.00001, -center.z);
    depth = mix(z, focusDepth, lineDepth);
  }
  width *= depth;

  // Convert to world units
  width *= worldUnit;

  // Calculate line join
#ifdef LINE_CLOSED
  join = getLineJoin(0.0, odd, left, center, right, width, offset, joint);
#else
  join = getLineJoin(edge, odd, left, center, right, width, offset, joint);
#endif
  vec3 pos = center + join * offset * width;

#ifdef LINE_STROKE
  vClipStrokeWidth = width;
#endif

#ifdef LINE_CLIP
  clipEnds(p, center, pos);
#endif

  return pos;
}
`,xYe=`uniform vec2 dataResolution;
uniform vec2 dataPointer;

vec2 map2DData(vec2 xy) {
  return (xy + dataPointer) * dataResolution;
}
`,CYe=`uniform vec2 dataResolution;
uniform vec2 dataPointer;

vec2 map2DData(vec2 xy) {
  return fract((xy + dataPointer) * dataResolution);
}
`,EYe=`void mapXyzw2DV(vec4 xyzw, out vec2 xy, out float z) {
  xy = xyzw.xy;
  z  = xyzw.z;
}

`,SYe=`vec4 alignXYZW(vec4 xyzw) {
  return floor(xyzw + .5);
}

`,MYe=`uniform float textureItems;
uniform float textureHeight;

vec2 mapXyzwTexture(vec4 xyzw) {
  
  float x = xyzw.x;
  float y = xyzw.y;
  float z = xyzw.z;
  float i = xyzw.w;
  
  return vec2(i, y) + vec2(x, z) * vec2(textureItems, textureHeight);
}

`,TYe=`varying vec4 vColor;

vec4 getColor() {
  if (vColor.a <= 0.0) discard;
  return vColor;
}
`,IYe=`#ifdef POSITION_STPQ
varying vec4 vSTPQ;
#endif
#ifdef POSITION_U
varying float vU;
#endif
#ifdef POSITION_UV
varying vec2 vUV;
#endif
#ifdef POSITION_UVW
varying vec3 vUVW;
#endif
#ifdef POSITION_UVWO
varying vec4 vUVWO;
#endif

vec4 getSample(vec4 uvwo, vec4 stpq);

vec4 getMapColor() {
  #ifdef POSITION_STPQ
  vec4 stpq = vSTPQ;
  #else
  vec4 stpq = vec4(0.0);
  #endif

  #ifdef POSITION_U
  vec4 uvwo = vec4(vU, 0.0, 0.0, 0.0);
  #endif
  #ifdef POSITION_UV
  vec4 uvwo = vec4(vUV, 0.0, 0.0);
  #endif
  #ifdef POSITION_UVW
  vec4 uvwo = vec4(vUVW, 0.0);
  #endif
  #ifdef POSITION_UVWO
  vec4 uvwo = vec4(vUVWO);
  #endif

  return getSample(uvwo, stpq);
}
`,PYe=`varying float vMask;

float ease(float t) {
  t = clamp(t, 0.0, 1.0);
  return t * t * (3.0 - 2.0 * t);
}

vec4 maskColor() {
  if (vMask <= 0.0) discard;
  return vec4(vec3(1.0), ease(vMask));
}
`,kYe=`#ifdef POSITION_STPQ
varying vec4 vSTPQ;
#endif
#ifdef POSITION_U
varying float vU;
#endif
#ifdef POSITION_UV
varying vec2 vUV;
#endif
#ifdef POSITION_UVW
varying vec3 vUVW;
#endif
#ifdef POSITION_UVWO
varying vec4 vUVWO;
#endif

vec4 getSample(vec4 rgba, vec4 stpq);

vec4 getMaterialColor(vec4 rgba) {
  vec4 stpq = vec4(0.0);

  #ifdef POSITION_U
  stpq.x = vU;
  #endif
  #ifdef POSITION_UV
  stpq.xy = vUV;
  #endif
  #ifdef POSITION_UVW
  stpq.xyz = vUVW;
  #endif
  #ifdef POSITION_UVWO
  stpq = vUVWO;
  #endif

  #ifdef POSITION_STPQ
  stpq = vSTPQ;
  #endif

  return getSample(rgba, stpq);
}
`,BYe=`
#extension GL_OES_standard_derivatives : enable
varying vec3 vNormal;
varying vec3 vLight;
varying vec3 vPosition;

vec3 offSpecular(vec3 color) {
  vec3 c = 1.0 - color;
  return 1.0 - c * c;
}

vec4 getShadedColor(vec4 rgba) {
  
  vec3 color = rgba.xyz;
  vec3 color2 = offSpecular(rgba.xyz);

  vec3 normal = normalize(vNormal);
  vec3 light = normalize(vLight);
  vec3 position = normalize(vPosition);
  
  // Workaround to avoid gl_FrontFacing. See https://github.com/unconed/mathbox/pull/26
  vec3 pdx = dFdx(vPosition);
  vec3 pdy = dFdy(vPosition);
  bool frontFacting = dot(vNormal, cross(pdx, pdy)) > 0.0;

  float side = frontFacting ? 1.0 : -1.0;
  float cosine  = side * dot(normal, light);
  float diffuse = mix(max(0.0, cosine), .5 + .5 * cosine, .1);
  
  vec3  halfLight = normalize(light + position);
	float cosineHalf = max(0.0, side * dot(normal, halfLight));
	float specular = pow(cosineHalf, 16.0);
	
	return vec4(color * (diffuse * .9 + .05) + .25 * color2 * specular, rgba.a);
}
`,RYe="",DYe=`vec4 getGammaInColor(vec4 rgba) {
  return vec4(rgba.rgb * rgba.rgb, rgba.a);
}
`,LYe=`vec4 getGammaOutColor(vec4 rgba) {
  return vec4(sqrt(rgba.rgb), rgba.a);
}
`,OYe=`vec4 mapUVWO(vec4 uvwo, vec4 stpq) {
  return uvwo;
}
`,NYe=`uniform vec4 geometryClip;
attribute vec4 position4;

// External
vec3 getPosition(vec4 xyzw, float canonical);

vec3 getMeshPosition() {
  vec4 p = min(geometryClip, position4);
  return getPosition(p, 1.0);
}
`,FYe=`attribute vec4 position4;
uniform vec4 geometryClip;
varying vec4 vColor;

// External
vec4 getSample(vec4 xyzw);

void vertexColor() {
  vec4 p = min(geometryClip, position4);
  vColor = getSample(p);
}
`,zYe=`attribute vec4 position4;
uniform vec4 geometryResolution;
uniform vec4 geometryClip;
varying float vMask;

// External
float getSample(vec4 xyzw);

void maskLevel() {
  vec4 p = min(geometryClip, position4);
  vMask = getSample(p * geometryResolution);
}
`,UYe=`uniform vec4 geometryResolution;

#ifdef POSITION_STPQ
varying vec4 vSTPQ;
#endif
#ifdef POSITION_U
varying float vU;
#endif
#ifdef POSITION_UV
varying vec2 vUV;
#endif
#ifdef POSITION_UVW
varying vec3 vUVW;
#endif
#ifdef POSITION_UVWO
varying vec4 vUVWO;
#endif

// External
vec3 getPosition(vec4 xyzw, in vec4 stpqIn, out vec4 stpqOut);

vec3 getMeshPosition(vec4 xyzw, float canonical) {
  vec4 stpqOut, stpqIn = xyzw * geometryResolution;
  vec3 xyz = getPosition(xyzw, stpqIn, stpqOut);

  #ifdef POSITION_MAP
  if (canonical > 0.5) {
    #ifdef POSITION_STPQ
    vSTPQ = stpqOut;
    #endif
    #ifdef POSITION_U
    vU = stpqOut.x;
    #endif
    #ifdef POSITION_UV
    vUV = stpqOut.xy;
    #endif
    #ifdef POSITION_UVW
    vUVW = stpqOut.xyz;
    #endif
    #ifdef POSITION_UVWO
    vUVWO = stpqOut;
    #endif
  }
  #endif
  return xyz;
}
`,VYe=`uniform float transitionEnter;
uniform float transitionExit;
uniform vec4  transitionScale;
uniform vec4  transitionBias;
uniform float transitionSkew;
uniform float transitionActive;

uniform vec4  moveFrom;
uniform vec4  moveTo;

float ease(float t) {
  t = clamp(t, 0.0, 1.0);
  return 1.0 - (2.0 - t) * t;
}

vec4 getTransitionPosition(vec4 xyzw, inout vec4 stpq) {
  if (transitionActive < 0.5) return xyzw;

  float enter   = transitionEnter;
  float exit    = transitionExit;
  float skew    = transitionSkew;
  vec4  scale   = transitionScale;
  vec4  bias    = transitionBias;

  float factor  = 1.0 + skew;
  float offset  = dot(vec4(1.0), stpq * scale + bias);

  float a1 = ease(enter * factor - offset);
  float a2 = ease(exit  * factor + offset - skew);

  return xyzw + a1 * moveFrom + a2 * moveTo;
}`,HYe=`vec4 getMask(vec4 xyzw) {
  return vec4(1.0);
}`,GYe=`varying float vPixelSize;

float getDiscAlpha(float mask) {
  // Approximation: 1 - x*x is approximately linear around x = 1 with slope 2
  return vPixelSize * (1.0 - mask);
  //  return vPixelSize * 2.0 * (1.0 - sqrt(mask));
}
`,QYe=`varying float vPixelSize;

float getDiscHollowAlpha(float mask) {
  return vPixelSize * (0.5 - 2.0 * abs(sqrt(mask) - .75));
}
`,qYe=`varying float vPixelSize;

float getGenericAlpha(float mask) {
  return vPixelSize * 2.0 * (1.0 - mask);
}
`,jYe=`varying float vPixelSize;

float getGenericHollowAlpha(float mask) {
  return vPixelSize * (0.5 - 2.0 * abs(mask - .75));
}
`,WYe=`varying vec2 vSprite;

float getSpriteMask(vec2 xy);
float getSpriteAlpha(float mask);

void setFragmentColorFill(vec4 color) {
  float mask = getSpriteMask(vSprite);
  if (mask > 1.0) {
    discard;
  }
  float alpha = getSpriteAlpha(mask);
  if (alpha >= 1.0) {
    discard;
  }
  gl_FragColor = vec4(color.rgb, alpha * color.a);
}
`,$Ye=`varying vec2 vSprite;

float getSpriteMask(vec2 xy);
float getSpriteAlpha(float mask);

void setFragmentColorFill(vec4 color) {
  float mask = getSpriteMask(vSprite);
  if (mask > 1.0) {
    discard;
  }
  float alpha = getSpriteAlpha(mask);
  if (alpha < 1.0) {
    discard;
  }
  gl_FragColor = color;
}

`,XYe=`varying float vPixelSize;

float getCircleMask(vec2 uv) {
  return dot(uv, uv);
}
`,YYe=`varying float vPixelSize;

float getDiamondMask(vec2 uv) {
  vec2 a = abs(uv);
  return a.x + a.y;
}
`,KYe=`varying float vPixelSize;

float getTriangleDownMask(vec2 uv) {
  uv.y += .25;
  return max(uv.y, abs(uv.x) * .866 - uv.y * .5 + .6);
}
`,JYe=`varying float vPixelSize;

float getTriangleLeftMask(vec2 uv) {
  uv.x += .25;
  return max(uv.x, abs(uv.y) * .866 - uv.x * .5 + .6);
}
`,ZYe=`varying float vPixelSize;

float getTriangleRightMask(vec2 uv) {
  uv.x -= .25;
  return max(-uv.x, abs(uv.y) * .866 + uv.x * .5 + .6);
}
`,eKe=`varying float vPixelSize;

float getSquareMask(vec2 uv) {
  vec2 a = abs(uv);
  return max(a.x, a.y);
}
`,tKe=`varying float vPixelSize;

float getTriangleUpMask(vec2 uv) {
  uv.y -= .25;
  return max(-uv.y, abs(uv.x) * .866 + uv.y * .5 + .6);
}
`,nKe=`uniform float pointDepth;

uniform float pixelUnit;
uniform float renderScale;
uniform float renderScaleInv;
uniform float focusDepth;

uniform vec4 geometryClip;
attribute vec4 position4;
attribute vec2 sprite;

varying vec2 vSprite;
varying float vPixelSize;

const float pointScale = POINT_SHAPE_SCALE;

// External
float getPointSize(vec4 xyzw);
vec3 getPosition(vec4 xyzw, float canonical);

vec3 getPointPosition() {
  // Discard out-of-range points by generating degenerate face
  if (
    position4.x > geometryClip.x ||
    position4.y > geometryClip.y ||
    position4.z > geometryClip.z ||
    position4.w > geometryClip.w
  ) return vec3(0.0, 0.0, 0.0);
  vec4 p = position4;

  vec3 center = getPosition(p, 1.0);

  // Depth blending
  // TODO: orthographic camera
  // Workaround: set depth = 0
  float z = -center.z;
  float depth = mix(z, focusDepth, pointDepth);

  // Match device/unit mapping
  // Sprite goes from -1..1, width = 2.
  float pointSize = getPointSize(p);
  float size = pointScale * pointSize * pixelUnit * .5;
  float depthSize = depth * size;

  // Pad sprite by half a pixel to make the anti-aliasing straddle the pixel edge
  // Note: pixelsize measures radius
  float pixelSize = .5 * (pointDepth > 0.0 ? depthSize / z : size);
  float paddedSize = pixelSize + 0.5;
  float padFactor = paddedSize / pixelSize;

  vPixelSize = paddedSize;
  vSprite    = sprite;

  return center + vec3(sprite * depthSize * renderScaleInv * padFactor, 0.0);
}
`,iKe=`uniform float pointSize;

float getPointSize(vec4 xyzw) {
  return pointSize;
}`,rKe=`uniform float pointSize;

vec4 getSample(vec4 xyzw);

float getPointSize(vec4 xyzw) {
  return pointSize * getSample(xyzw).x;
}`,sKe=`uniform float polarBend;
uniform float polarFocus;
uniform float polarAspect;
uniform float polarHelix;

uniform mat4 viewMatrix;

vec4 getPolarPosition(vec4 position, inout vec4 stpq) {
  if (polarBend > 0.0) {

    if (polarBend < 0.001) {
      // Factor out large addition/subtraction of polarFocus
      // to avoid numerical error
      // sin(x) ~ x
      // cos(x) ~ 1 - x * x / 2
      vec2 pb = position.xy * polarBend;
      float ppbbx = pb.x * pb.x;
      return viewMatrix * vec4(
        position.x * (1.0 - polarBend + (pb.y * polarAspect)),
        position.y * (1.0 - .5 * ppbbx) - (.5 * ppbbx) * polarFocus / polarAspect,
        position.z + position.x * polarHelix * polarBend,
        1.0
      );
    }
    else {
      vec2 xy = position.xy * vec2(polarBend, polarAspect);
      float radius = polarFocus + xy.y;
      return viewMatrix * vec4(
        sin(xy.x) * radius,
        (cos(xy.x) * radius - polarFocus) / polarAspect,
        position.z + position.x * polarHelix * polarBend,
        1.0
      );
    }
  }
  else {
    return viewMatrix * vec4(position.xyz, 1.0);
  }
}`,aKe=`uniform float styleZBias;
uniform float styleZIndex;

void setPosition(vec3 position) {

  #ifdef PROJECT_ORTHOGONAL
  // Orthogonal projection with depth preservation around z = 1
  vec4 pos = projectionMatrix * vec4(position, 1.0);
  pos.xy *= -position.z;
  #else
  // Normal perspective projection
  vec4 pos = projectionMatrix * vec4(position, 1.0);
  #endif

  // Apply relative Z bias
  float bias  = (1.0 - styleZBias / 32768.0);
  pos.z *= bias;

  // Apply large scale Z index changes
  if (styleZIndex > 0.0) {
    float z = pos.z / pos.w;
    pos.z = ((z + 1.0) / (styleZIndex + 1.0) - 1.0) * pos.w;
  }

  gl_Position = pos;
}`,oKe=`// This is three.js' global uniform, missing from fragment shaders.
uniform mat4 projectionMatrix;

vec4 readbackPosition(vec3 position, vec4 stpq) {
  vec4 pos = projectionMatrix * vec4(position, 1.0);
  vec3 final = pos.xyz / pos.w;
  if (final.z < -1.0) {
    return vec4(0.0, 0.0, 0.0, -1.0);
  }
  else {
    return vec4(final, -position.z);
  }
}
`,lKe=`uniform vec4 geometryScale;
attribute vec4 position4;

vec4 getRawPositionScale() {
  return geometryScale * position4;
}
`,cKe=`uniform vec4 repeatModulus;

vec4 getRepeatXYZW(vec4 xyzw) {
  return mod(xyzw + .5, repeatModulus) - .5;
}
`,uKe=`uniform vec4 resampleBias;

vec4 resamplePadding(vec4 xyzw) {
  return xyzw + resampleBias;
}`,hKe=`uniform vec4 resampleFactor;

vec4 resampleRelative(vec4 xyzw) {
  return xyzw * resampleFactor;
}`,dKe=`uniform float transitionEnter;
uniform float transitionExit;
uniform vec4  transitionScale;
uniform vec4  transitionBias;
uniform float transitionSkew;
uniform float transitionActive;

float getTransitionSDFMask(vec4 stpq) {
  if (transitionActive < 0.5) return 1.0;

  float enter   = transitionEnter;
  float exit    = transitionExit;
  float skew    = transitionSkew;
  vec4  scale   = transitionScale;
  vec4  bias    = transitionBias;

  float factor  = 1.0 + skew;
  float offset  = dot(vec4(1.0), stpq * scale + bias);

  vec2 d = vec2(enter, exit) * factor + vec2(-offset, offset - skew);
  if (exit  == 1.0) return d.x;
  if (enter == 1.0) return d.y;
  return min(d.x, d.y);
}`,fKe=`uniform vec4 reverseScale;
uniform vec4 reverseOffset;

vec4 getReverseOffset(vec4 xyzw) {
  return xyzw * reverseScale + reverseOffset;
}`,pKe=`vec3 getRootPosition(vec4 position, in vec4 stpqIn, out vec4 stpqOut) {
  stpqOut = stpqIn; // avoid inout confusion
  return position.xyz;
}`,mKe=`uniform sampler2D dataTexture;

vec4 sample2D(vec2 uv) {
  return texture2D(dataTexture, uv);
}
`,gKe=`uniform vec4 scaleAxis;
uniform vec4 scaleOffset;

vec4 sampleData(float x);

vec4 getScalePosition(vec4 xyzw) {
  return scaleAxis * sampleData(xyzw.x).x + scaleOffset;
}
`,vKe=`uniform vec4 remapSTPQScale;

vec4 screenMapSTPQ(vec4 xyzw, out vec4 stpq) {
  stpq = xyzw * remapSTPQScale;
  return xyzw;
}
`,AKe=`uniform vec2 remapUVScale;

vec4 screenMapXY(vec4 uvwo, vec4 stpq) {
  return vec4(floor(remapUVScale * uvwo.xy), 0.0, 0.0);
}
`,_Ke=`uniform vec2 remapUVScale;
uniform vec2 remapModulus;
uniform vec2 remapModulusInv;

vec4 screenMapXYZW(vec4 uvwo, vec4 stpq) {
  vec2 st = floor(remapUVScale * uvwo.xy);
  vec2 xy = st * remapModulusInv;
  vec2 ixy = floor(xy);
  vec2 fxy = xy - ixy;
  vec2 zw = fxy * remapModulus;
  return vec4(ixy.x, zw.y, ixy.y, zw.x);
}
`,bKe=`vec2 screenPassUV(vec4 uvwo, vec4 stpq) {
  return uvwo.xy;
}
`,yKe=`void setScreenPosition(vec4 position) {
  gl_Position = vec4(position.xy * 2.0 - 1.0, 0.5, 1.0);
}
`,wKe=`uniform vec4 sliceOffset;

vec4 getSliceOffset(vec4 xyzw) {
  return xyzw + sliceOffset;
}
`,xKe=`uniform float sphericalBend;
uniform float sphericalFocus;
uniform float sphericalAspectX;
uniform float sphericalAspectY;
uniform float sphericalScaleY;

uniform mat4 viewMatrix;

vec4 getSphericalPosition(vec4 position, inout vec4 stpq) {
  if (sphericalBend > 0.0001) {

    vec3 xyz = position.xyz * vec3(sphericalBend, sphericalBend / sphericalAspectY * sphericalScaleY, sphericalAspectX);
    float radius = sphericalFocus + xyz.z;
    float cosine = cos(xyz.y) * radius;

    return viewMatrix * vec4(
      sin(xyz.x) * cosine,
      sin(xyz.y) * radius * sphericalAspectY,
      (cos(xyz.x) * cosine - sphericalFocus) / sphericalAspectX,
      1.0
    );
  }
  else {
    return viewMatrix * vec4(position.xyz, 1.0);
  }
}`,CKe=`uniform float splitStride;

vec2 getIndices(vec4 xyzw);
vec4 getRest(vec4 xyzw);
vec4 injectIndex(float v);

vec4 getSplitXYZW(vec4 xyzw) {
  vec2 uv = getIndices(xyzw);
  float offset = uv.x + uv.y * splitStride;
  return injectIndex(offset) + getRest(xyzw);
}
`,EKe=`uniform vec4 spreadOffset;
uniform mat4 spreadMatrix;

// External
vec4 getSample(vec4 xyzw);

vec4 getSpreadSample(vec4 xyzw) {
  vec4 sample = getSample(xyzw);
  return sample + spreadMatrix * (spreadOffset + xyzw);
}
`,SKe=`varying vec2 vSprite;

vec4 getSample(vec2 xy);

vec4 getSpriteColor() {
  return getSample(vSprite);
}`,MKe=`uniform vec2 spriteOffset;
uniform float spriteScale;
uniform float spriteDepth;
uniform float spriteSnap;

uniform vec2 renderOdd;
uniform float renderScale;
uniform float renderScaleInv;
uniform float pixelUnit;
uniform float focusDepth;

uniform vec4 geometryClip;
attribute vec4 position4;
attribute vec2 sprite;

varying float vPixelSize;

// External
vec3 getPosition(vec4 xyzw, float canonical);
vec4 getSprite(vec4 xyzw);

vec3 getSpritePosition() {
  // Clip points
  vec4 p = min(geometryClip, position4);
  float diff = length(position4 - p);
  if (diff > 0.0) {
    return vec3(0.0, 0.0, 1000.0);
  }

  // Make sprites
  vec3 center = getPosition(p, 1.0);
  vec4 atlas = getSprite(p);

  // Sprite goes from -1..1, width = 2.
  // -1..1 -> -0.5..0.5
  vec2 halfSprite = sprite * .5;
  vec2 halfFlipSprite = vec2(halfSprite.x, -halfSprite.y);

#ifdef POSITION_UV
  // Assign UVs
  vUV = atlas.xy + atlas.zw * (halfFlipSprite + .5);
#endif

  // Depth blending
  // TODO: orthographic camera
  // Workaround: set depth = 0
  float depth = focusDepth, z;
  z = -center.z;
  if (spriteDepth < 1.0) {
    depth = mix(z, focusDepth, spriteDepth);
  }
  
  // Match device/unit mapping 
  float size = pixelUnit * spriteScale;
  float depthSize = depth * size;

  // Calculate pixelSize for anti-aliasing
  float pixelSize = (spriteDepth > 0.0 ? depthSize / z : size);
  vPixelSize = pixelSize;

  // Position sprite
  vec2 atlasOdd = fract(atlas.zw / 2.0);
  vec2 offset = (spriteOffset + halfSprite * atlas.zw) * depthSize;
  if (spriteSnap > 0.5) {
    // Snap to pixel (w/ epsilon shift to avoid jitter)
    return vec3(((floor(center.xy / center.z * renderScale + 0.001) + renderOdd + atlasOdd) * center.z + offset) * renderScaleInv, center.z);
  }
  else {
    // Place directly
    return center + vec3(offset * renderScaleInv, 0.0);
  }

}
`,TKe=`uniform float stereoBend;
uniform vec4 basisScale;
uniform vec4 basisOffset;
uniform mat4 viewMatrix;
uniform vec2 view4D;

vec4 getStereographic4Position(vec4 position, inout vec4 stpq) {
  
  vec4 transformed;
  if (stereoBend > 0.0001) {

    float r = length(position);
    float w = r + position.w;
    vec4 project = vec4(position.xyz / w, r);
    
    transformed = mix(position, project, stereoBend);
  }
  else {
    transformed = position;
  }

  vec4 pos4 = transformed * basisScale - basisOffset;
  vec3 xyz = (viewMatrix * vec4(pos4.xyz, 1.0)).xyz;
  return vec4(xyz, pos4.w * view4D.y + view4D.x);
}
`,IKe=`uniform float stereoBend;

uniform mat4 viewMatrix;

vec4 getStereoPosition(vec4 position, inout vec4 stpq) {
  if (stereoBend > 0.0001) {

    vec3 pos = position.xyz;
    float r = length(pos);
    float z = r + pos.z;
    vec3 project = vec3(pos.xy / z, r);
    
    vec3 lerped = mix(pos, project, stereoBend);

    return viewMatrix * vec4(lerped, 1.0);
  }
  else {
    return viewMatrix * vec4(position.xyz, 1.0);
  }
}`,PKe=`varying vec2 vST;

vec4 getSample(vec2 st);

vec4 getSTSample() {
  return getSample(vST);
}
`,kKe=`varying vec2 vUV;

void setRawUV(vec4 xyzw) {
  vUV = xyzw.xy;
}
`,BKe=`uniform vec4 geometryClip;
attribute vec4 position4;
attribute vec3 strip;

// External
vec3 getPosition(vec4 xyzw, float canonical);

varying vec3 vNormal;
varying vec3 vLight;
varying vec3 vPosition;

void getStripGeometry(vec4 xyzw, vec3 strip, out vec3 pos, out vec3 normal) {
  vec3 a, b, c;

  a   = getPosition(xyzw, 1.0);
  b   = getPosition(vec4(xyzw.xyz, strip.x), 0.0);
  c   = getPosition(vec4(xyzw.xyz, strip.y), 0.0);

  normal = normalize(cross(c - a, b - a)) * strip.z;
  
  pos = a;
}

vec3 getStripPositionNormal() {
  vec3 center, normal;

  vec4 p = min(geometryClip, position4);

  getStripGeometry(p, strip, center, normal);
  vNormal   = normal;
  vLight    = normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz);
  vPosition = -center;

  return center;
}
`,RKe=`uniform vec3 styleColor;
uniform float styleOpacity;

vec4 getStyleColor() {
  return vec4(styleColor, styleOpacity);
}
`,DKe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideDepth(vec4 xyzw) {
  float x = xyzw.z;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  return sampleData(vec4(xyzw.xy, i + g, xyzw.w));
}
`,LKe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideDepthLerp(vec4 xyzw) {
  float x = xyzw.z;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  vec4 xyzw1 = vec4(xyzw.xy, i, xyzw.w);
  vec4 xyzw2 = vec4(xyzw.xy, i + 1.0, xyzw.w);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, g);
}
`,OKe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideHeight(vec4 xyzw) {
  float x = xyzw.y;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  return sampleData(vec4(xyzw.x, i + g, xyzw.zw));
}
`,NKe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideHeightLerp(vec4 xyzw) {
  float x = xyzw.y;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  vec4 xyzw1 = vec4(xyzw.x, i, xyzw.zw);
  vec4 xyzw2 = vec4(xyzw.x, i + 1.0, xyzw.zw);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, g);
}
`,FKe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideItems(vec4 xyzw) {
  float x = xyzw.w;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  return sampleData(vec4(xyzw.xyz, i + g));
}
`,zKe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideItemsLerp(vec4 xyzw) {
  float x = xyzw.w;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  vec4 xyzw1 = vec4(xyzw.xyz, i);
  vec4 xyzw2 = vec4(xyzw.xyz, i + 1.0);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, g);
}
`,UKe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideWidth(vec4 xyzw) {
  float x = xyzw.x;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  return sampleData(vec4(i + g, xyzw.yzw));
}
`,VKe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideWidthLerp(vec4 xyzw) {
  float x = xyzw.x;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  vec4 xyzw1 = vec4(i, xyzw.yzw);
  vec4 xyzw2 = vec4(i + 1.0, xyzw.yzw);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, g);
}
`,HKe=`attribute vec4 position4;

float getSurfaceHollowMask(vec4 xyzw) {
  vec4 df = abs(fract(position4) - .5);
  vec2 df2 = min(df.xy, df.zw);
  float df3 = min(df2.x, df2.y);
  return df3;
}`,GKe=`uniform vec4 geometryClip;
uniform vec4 geometryResolution;
uniform vec4 mapSize;

attribute vec4 position4;

// External
vec3 getPosition(vec4 xyzw, float canonical);

vec3 getSurfacePosition() {
  vec4 p = min(geometryClip, position4);

#ifdef SURFACE_CLOSED_X
  if (p.x == geometryClip.x) p.x = 0.0;
#endif
#ifdef SURFACE_CLOSED_Y
  if (p.y == geometryClip.y) p.y = 0.0;
#endif

  vec3 xyz = getPosition(p, 1.0);

  // Overwrite UVs
#ifdef POSITION_UV
#ifdef POSITION_UV_INT
  vUV = -.5 + (position4.xy * geometryResolution.xy) * mapSize.xy;
#else
  vUV = position4.xy * geometryResolution.xy;
#endif
#endif

  return xyz;
}
`,QKe=`uniform vec4 mapSize;
uniform vec4 geometryResolution;
uniform vec4 geometryClip;
attribute vec4 position4;

// External
vec3 getPosition(vec4 xyzw, float canonical);
vec3 getNormal(vec4 xyzw);

varying vec3 vNormal;
varying vec3 vLight;
varying vec3 vPosition;

vec3 getSurfacePositionNormal() {

  vec4 p = min(geometryClip, position4);
#ifdef SURFACE_CLOSED_X
  if (p.x == geometryClip.x) p.x = 0.0;
#endif
#ifdef SURFACE_CLOSED_Y
  if (p.y == geometryClip.y) p.y = 0.0;
#endif

  vec3 center = getPosition(p, 1.0);
  vNormal     = normalMatrix * normalize(getNormal(p));
  vLight      = normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz); // hardcoded directional light
  vPosition   = -center;

#ifdef POSITION_UV
#ifdef POSITION_UV_INT
  vUV = -.5 + (position4.xy * geometryResolution.xy) * mapSize.xy;
#else
  vUV = position4.xy * geometryResolution.xy;
#endif
#endif

  return center;
}
`,qKe=`uniform vec4 mapSize;
uniform vec4 geometryResolution;
uniform vec4 geometryClip;
attribute vec4 position4;

// External
vec3 getPosition(vec4 xyzw, float canonical);

vec4 wrapAround(vec4 xyzw) {
#ifdef SURFACE_CLOSED_X
  float gx = geometryClip.x;
  if (xyzw.x < 0.0) xyzw.x += gx;
  if (xyzw.x >= gx) xyzw.x -= gx;
#endif
#ifdef SURFACE_CLOSED_Y
  float gy = geometryClip.y;
  if (xyzw.y < 0.0) xyzw.y += gy;
  if (xyzw.y >= gy) xyzw.y -= gy;
#endif
  return xyzw;
}

void getSurfaceGeometry(vec4 xyzw, float edgeX, float edgeY, out vec3 left, out vec3 center, out vec3 right, out vec3 up, out vec3 down) {
  vec4 deltaX = vec4(1.0, 0.0, 0.0, 0.0);
  vec4 deltaY = vec4(0.0, 1.0, 0.0, 0.0);

  center =                  getPosition(xyzw, 1.0);
  left   =                  center;
  down   =                  center;
  right  = (edgeX < 0.5)  ? getPosition(wrapAround(xyzw + deltaX), 0.0) : (2.0 * center - getPosition(xyzw - deltaX, 0.0));
  up     = (edgeY < 0.5)  ? getPosition(wrapAround(xyzw + deltaY), 0.0) : (2.0 * center - getPosition(xyzw - deltaY, 0.0));
}

vec3 getSurfaceNormal(vec3 left, vec3 center, vec3 right, vec3 up, vec3 down) {
  vec3 dx = right - left;
  vec3 dy = up    - down;
  vec3 n = cross(dy, dx);
  if (length(n) > 0.0) {
    return normalize(n);
  }
  return vec3(0.0, 1.0, 0.0);
}

varying vec3 vNormal;
varying vec3 vLight;
varying vec3 vPosition;

vec3 getSurfacePositionShaded() {
  vec3 left, center, right, up, down;

  vec4 p = min(geometryClip, position4);
  vec2 surface = vec2(0.0);
#ifdef SURFACE_CLOSED_X
  if (p.x == geometryClip.x) p.x = 0.0;
#else
  if (p.x == geometryClip.x) surface.x = 1.0;
  //if (p.x == 0.0) surface.x = -1.0;
#endif
#ifdef SURFACE_CLOSED_Y
  if (p.y == geometryClip.y) p.y = 0.0;
#else
  if (p.y == geometryClip.y) surface.y = 1.0;
  //if (p.y == 0.0) surface.y = -1.0;
#endif

  getSurfaceGeometry(p, surface.x, surface.y, left, center, right, up, down);
  vNormal   = getSurfaceNormal(left, center, right, up, down);
  vLight    = normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz); // hardcoded directional light
  vPosition = -center;

#ifdef POSITION_UV
#ifdef POSITION_UV_INT
  vUV = -.5 + (position4.xy * geometryResolution.xy) * mapSize.xy;
#else
  vUV = position4.xy * geometryResolution.xy;
#endif
#endif

  return center;
}
`,jKe=`uniform float worldUnit;
uniform float focusDepth;
uniform float tickSize;
uniform float tickEpsilon;
uniform vec3  tickNormal;
uniform vec2  tickStrip;

vec4 getSample(vec4 xyzw);

vec3 transformPosition(vec4 position, in vec4 stpqIn, out vec4 stpqOut);

vec3 getTickPosition(vec4 xyzw, in vec4 stpqIn, out vec4 stpqOut) {
  float epsilon = tickEpsilon;

  // determine tick direction
  float leftX  = max(tickStrip.x, xyzw.y - 1.0);
  float rightX = min(tickStrip.y, xyzw.y + 1.0);
  
  vec4 left    = getSample(vec4(leftX,  xyzw.zw, 0.0));
  vec4 right   = getSample(vec4(rightX, xyzw.zw, 0.0));
  vec4 diff    = right - left;

  vec3 normal  = cross(normalize(diff.xyz + vec3(diff.w)), tickNormal);
  float bias   = max(0.0, 1.0 - length(normal) * 2.0);
       normal  = mix(normal, tickNormal.yzx, bias * bias);
  
  // transform (point) and (point + delta)
  vec4 center  = getSample(vec4(xyzw.yzw, 0.0));
  vec4 delta   = vec4(normal, 0.0) * epsilon;

  vec4 a = center;
  vec4 b = center + delta;

  vec4 _;
  vec3 c = transformPosition(a, stpqIn, stpqOut);
  vec3 d = transformPosition(b, stpqIn, _);
  
  // sample on either side to create line
  float line = xyzw.x - .5;
  vec3  mid  = c;
  vec3  side = normalize(d - c);

  return mid + side * line * tickSize * worldUnit * focusDepth;
}
`,WKe=`uniform mat4 transformMatrix;

vec4 transformPosition(vec4 position, inout vec4 stpq) {
  return transformMatrix * vec4(position.xyz, 1.0);
}
`,$Ke=`uniform mat4 transformMatrix;
uniform vec4 transformOffset;

vec4 transformPosition(vec4 position, inout vec4 stpq) {
  return transformMatrix * position + transformOffset;
}
`,XKe=`// Implicit three.js uniform
// uniform mat4 viewMatrix;

vec4 getViewPosition(vec4 position, inout vec4 stpq) {
  return (viewMatrix * vec4(position.xyz, 1.0));
}
`;let co=class UM{static initClass(){this.index=0,this.IN=0,this.OUT=1}static id(e){return++UM.index}constructor(e,t=null){this.parent=t,this.id=UM.id(),this.nodes=[],e&&this.add(e)}inputs(){const e=[];for(const t of Array.from(this.nodes))for(const n of Array.from(t.inputs))n.input===null&&e.push(n);return e}outputs(){const e=[];for(const t of Array.from(this.nodes))for(const n of Array.from(t.outputs))n.output.length===0&&e.push(n);return e}getIn(e){return Array.from(this.inputs()).filter(t=>t.name===e)[0]}getOut(e){return Array.from(this.outputs()).filter(t=>t.name===e)[0]}add(e,t){if(e.length){for(const n of Array.from(e))this.add(n);return}if(e.graph&&!t)throw new Error("Adding node to two graphs at once");e.graph=this,this.nodes.push(e)}remove(e,t){if(e.length){for(const n of Array.from(e))this.remove(n);return}if(e.graph!==this)throw new Error("Removing node from wrong graph.");t||e.disconnect(),this.nodes.splice(this.nodes.indexOf(e),1),e.graph=null}adopt(e){if(e.length){for(const t of Array.from(e))this.adopt(t);return}e.graph.remove(e,!0),this.add(e,!0)}};co.initClass();class ol{static initClass(){this.index=0}static make(e,t){t==null&&(t={});const n=t;if(e.meta!=null)for(const r in e.meta){const s=e.meta[r];n[r]=s}return new ol(e.inout,e.name,e.hint,e.type,n)}static id(e){return`_io_${++ol.index}_${e}`}static hint(e){return e=e.replace(/^_io_[0-9]+_/,""),e=e.replace(/_i_o$/,""),e=e.replace(/(In|Out|Inout|InOut)$/,"")}constructor(e,t,n,r,s,a){this.inout=e,this.name=t,this.hint=n,this.type=r,s==null&&(s={}),this.meta=s,this.id=a,this.hint==null&&(this.hint=ol.hint(this.name)),this.node=null,this.input=null,this.output=[],this.id==null&&(this.id=ol.id(this.hint))}morph(e){return this.inout=e.inout,this.name=e.name,this.hint=e.hint,this.type=e.type,this.meta=e.meta}dupe(e){e==null&&(e=this.id);const t=ol.make(this);return t.name=e,t}connect(e){if(this.inout===co.IN&&e.inout===co.OUT)return e.connect(this);if(this.inout!==co.OUT||e.inout!==co.IN)throw new Error("Can only connect out to in.");if(e.input!==this)return e.disconnect(),e.input=this,this.output.push(e)}disconnect(e){if(this.input&&this.input.disconnect(this),this.output.length)if(e){const t=this.output.indexOf(e);if(t>=0)return this.output.splice(t,1),e.input=null}else{for(e of Array.from(this.output))e.input=null;return this.output=[]}}}ol.initClass();let DI=class VM{static initClass(){this.index=0}static id(e){return++VM.index}constructor(e,t){this.owner=e,this.graph=null,this.inputs=[],this.outputs=[],this.all=[],this.outlets=null,this.id=VM.id(),this.setOutlets(t)}getIn(e){return Array.from(this.inputs).filter(t=>t.name===e)[0]}getOut(e){return Array.from(this.outputs).filter(t=>t.name===e)[0]}get(e){return this.getIn(e)||this.getOut(e)}setOutlets(e){if(e!=null){let t;if(this.outlets==null){this.outlets={};for(t of Array.from(e))t instanceof ol||(t=ol.make(t)),this._add(t);return}const n=s=>[s.name,s.inout,s.type].join("-"),r={};for(t of Array.from(e))r[n(t)]=!0;for(let s in this.outlets)t=this.outlets[s],s=n(t),r[s]?r[s]=t:this._remove(t);for(t of Array.from(e)){const s=r[n(t)];s instanceof ol?this._morph(s,t):(t instanceof ol||(t=ol.make(t)),this._add(t))}}return this.outlets}connect(e,t,n){let r,s,a,o,l;const c={},u={},h=f=>l+"/"+f.hint;for(r of Array.from(e.inputs)){let f;!n&&r.input||({type:l}=r,a=h(r),u[a]||(u[a]=r),c[l]=f=c[l]||[],f.push(r))}let d=this.outputs;d=d.filter(f=>!(t&&f.output.length));for(o of Array.from(d.slice()))({type:l}=o),a=h(o),s=c[l],(r=u[a])&&(o.connect(r),delete u[a],s.splice(s.indexOf(r),1),d.splice(d.indexOf(o),1));if(!d.length)return this;for(o of Array.from(d.slice()))({type:l}=o),s=c[l],s&&s.length&&o.connect(s.shift());return this}disconnect(e){let t;for(t of Array.from(this.inputs))t.disconnect();for(t of Array.from(this.outputs))t.disconnect();return this}_key(e){return[e.name,e.inout].join("-")}_add(e){const t=this._key(e);if(e.node)throw new Error("Adding outlet to two nodes at once.");if(this.outlets[t])throw new Error(`Adding two identical outlets to same node. (${t})`);return e.node=this,e.inout===co.IN&&this.inputs.push(e),e.inout===co.OUT&&this.outputs.push(e),this.all.push(e),this.outlets[t]=e}_morph(e,t){let n=this._key(t);return delete this.outlets[n],e.morph(t),n=this._key(t),this.outlets[n]=t}_remove(e){const t=this._key(e);if(e.node!==this)throw new Error("Removing outlet from wrong node.");return e.disconnect(),e.node=null,delete this.outlets[t],e.inout===co.IN&&this.inputs.splice(this.inputs.indexOf(e),1),e.inout===co.OUT&&this.outputs.splice(this.outputs.indexOf(e),1),this.all.splice(this.all.indexOf(e),1),this}};DI.initClass();const{IN:D1,OUT:LI}=co,YKe=Object.freeze(Object.defineProperty({__proto__:null,Graph:co,IN:D1,Node:DI,OUT:LI,Outlet:ol},Symbol.toStringTag,{value:"Module"}));let w_=class qA{static initClass(){this.index=0}static namespace(){return`_sn_${++qA.index}_`}static load(e,t,n){const r=e.parse(t,n),[s,a]=Array.from(e.compile(r));return new qA(e,s,a,t,n)}constructor(e,t,n,r,s){this.language=e,this._signatures=t,this._compiler=n,this._name=r,this._original=s,this.namespace=null,this.code=null,this.main=null,this.entry=null,this.uniforms=null,this.externals=null,this.symbols=null,this.attributes=null,this.varyings=null,this.language||delete this.language,this._signatures||delete this._signatures,this._compiler||delete this._compiler,this._original||delete this._original,this._name||(this._name=this._signatures!=null?this._signatures.main.name:void 0)}clone(){return new qA(this.language,this._signatures,this._compiler,this._name,this._original)}bind(e,t,n,r){let s,a,o;t===""+t?[n,t,r]=Array.from([t,n??{},r??{}]):n!==""+n&&([r,n]=Array.from([n??{},void 0])),this.main=this._signatures.main,this.namespace=(a=n??this.namespace)!=null?a:qA.namespace(),this.entry=this.namespace+this.main.name,this.uniforms={},this.varyings={},this.attributes={},this.externals={},this.symbols=[];const l={},c={},u=function(S){return c[S]=!0,S},h=S=>this.namespace+S;if(e.globals)for(const S of Array.from(e.globals))u(S);const d=e.globalUniforms?u:h,f=e.globalVaryings?u:h,m=e.globalAttributes?u:h,A=h,_=S=>l[S.name]=!0,v=(S,I)=>this.uniforms[d(I??S.name)]=S;o=S=>this.varyings[f(S.name)]=S;const w=S=>this.attributes[m(S.name)]=S,x=S=>{const I=A(S.name);return this.externals[I]=S,this.symbols.push(I)},C=S=>({type:S.type,name:S.name,value:S.value});for(s of Array.from(this._signatures.uniform))_(s);for(s of Array.from(this._signatures.uniform))v(C(s));for(s of Array.from(this._signatures.varying))o(C(s));for(s of Array.from(this._signatures.external))x(s);for(s of Array.from(this._signatures.attribute))w(C(s));for(const S in t)s=t[S],l[S]&&v(s,S);if(this.body=this.code=this._compiler(this.namespace,c,r),r){const S=(()=>{const I=[];for(const P in r)o=r[P],I.push(`#define ${P} ${o}`);return I})().join(`
`);S.length&&(this._original=[S,"//----------------------------------------",this._original].join(`
`))}return null}};w_.initClass();var Ju={};(function(i){i.make=function(e){return e==null&&(e=[]),e instanceof Array||(e=[+e!=null?+e:0]),e},i.nest=(e,t)=>e.concat(t),i.compare=function(e,t){const n=Math.min(e.length,t.length);for(let r=0,s=n,a=0<=s;a?r<s:r>s;a?r++:r--){const o=e[r],l=t[r];if(o>l)return-1;if(o<l)return 1}return e=e.length,t=t.length,e>t?-1:e<t?1:0},i.max=function(e,t){return i.compare(e,t)>0?t:e}})(Ju);const TU=function(i,e,t,n){const r=i,s={},a=[],o={},l={},c={},u={},h=function(){let w,x;for(x in n){const k=n[x];A(k.node,k.module)}[w,t]=Array.from(d(t)),e!=null&&(w.entry=e);const C=r.build(w,t),I=(()=>{const k=[];for(x in u){const M=u[x];k.push(M)}return k})().sort((k,M)=>Ju.compare(k.priority,M.priority)).map(k=>k.code);I.push(C.code);const P=r.lines(I);return{namespace:C.name,library:u,body:C.code,code:P,main:C,entry:C.name,symbols:a,externals:s,uniforms:o,varyings:l,attributes:c}},d=w=>{let x;w=(()=>{const I=[];for(const P in w)x=w[P],I.push(x);return I})(),w.sort((I,P)=>P.priority-I.priority);const C=(I,P,k)=>{m(I,P,k);const{main:M}=P,{entry:R}=P,N=q=>v(I,q),U=q=>_(I,q);return r.call(N,U,R,M.signature,S)},S=r.body();for(x of Array.from(w))C(x.node,x.module,x.priority);return[S,w]},f=function(w,x,C){const S=u[w];return S!=null?S.priority=Ju.max(S.priority,C):u[w]={code:x,priority:C}},m=function(w,x,C){let S,I;C=Ju.make(C);for(const P in x.library){const k=x.library[P];f(P,k.code,Ju.nest(C,k.priority))}f(x.namespace,x.body,C);for(I in x.uniforms)S=x.uniforms[I],o[I]=S;for(I in x.varyings)S=x.varyings[I],l[I]=S;for(I in x.attributes)S=x.attributes[I],c[I]=S;return A(w,x)},A=(w,x)=>(()=>{const C=[];for(const S of Array.from(x.symbols)){const I=x.externals[S];if(_(w,I.name)){const P={};for(const k in I){const M=I[k];P[k]=M}P.name=v(w,I.name),s[S]=P,C.push(a.push(S))}else C.push(void 0)}return C})(),_=function(w,x){const C=w.get(x);if(C.inout===D1)return C.input===null;if(C.inout===LI)return C.output.length===0},v=function(w,x){let C=w.get(x);return C?(C.input&&(C=C.input),{name:x}=C,C.id):null};return h()};class Of{static initClass(){this.index=0}static entry(){return`_pg_${++Of.index}_`}constructor(e,t,n){this.language=e,this.namespace=t,this.graph=n,this.calls={},this.requires={}}call(e,t,n){let r;const s=t.namespace;return(r=this.calls[s])?r.priority=Math.max(r.priority,n):this.calls[s]={node:e,module:t,priority:n},this}require(e,t){const n=t.namespace;return this.requires[n]={node:e,module:t}}assemble(){const e=TU(this.language,this.namespace!=null?this.namespace:Of.entry,this.calls,this.requires),t=new w_;for(const n in e)t[n]=e[n];return t.graph=this.graph,t}}Of.initClass();const IU=function(i,e,t,n){const r=i;let s=[];const a=[],o={},l={},c={},u={},h={},d=function(){const _=r.links(e),v=[];_.defs!=null&&v.push(_.defs),_.bodies!=null&&v.push(_.bodies);for(const S of Array.from(t))m(S.node,S.module,S.priority);s=(()=>{const S=[];for(const I in h){const P=h[I];S.push(P)}return S})().sort((S,I)=>Ju.compare(S.priority,I.priority)).map(S=>S.code);let x=r.lines(s);x=r.defuse(x),v.length&&(x=[r.lines(v),x].join(`
`)),x=r.hoist(x),x=r.dedupe(x);const C=n;return{namespace:C.main.name,code:x,main:C.main,entry:C.main.name,externals:o,uniforms:l,attributes:c,varyings:u}},f=function(_,v,w){const x=h[_];return x!=null?x.priority=Ju.max(x.priority,w):h[_]={code:v,priority:w}},m=function(_,v,w){let x,C;w=Ju.make(w);for(const S in v.library){const I=v.library[S];f(S,I.code,Ju.nest(w,I.priority))}f(v.namespace,v.body,w);for(C in v.uniforms)x=v.uniforms[C],l[C]=x;for(C in v.varyings)x=v.varyings[C],u[C]=x;for(C in v.attributes)x=v.attributes[C],c[C]=x;return(()=>{const S=[];for(C of Array.from(v.symbols)){const I=v.externals[C];A(_,I.name)?(o[C]=I,S.push(a.push(C))):S.push(void 0)}return S})()},A=function(_,v){const w=_.get(v);if(!w){const x=(_.owner.snippet!=null?_.owner.snippet._name:void 0)!=null?_.owner.snippet!=null?_.owner.snippet._name:void 0:_.owner.namespace;throw new Error(`Unable to link program. Unlinked callback \`${v}\` on \`${x}\``)}if(w.inout===D1)return w.input===null;if(w.inout===LI)return w.output.length===0};return d()};class PU{constructor(e,t){this.language=e,this.graph=t,this.links=[],this.includes=[],this.modules={},this.visits={}}callback(e,t,n,r,s){return this.links.push({node:e,module:t,priority:n,name:r,external:s})}include(e,t,n){let r;return(r=this.modules[t.namespace])!=null?r.priority=Math.max(n,r.priority):(this.modules[t.namespace]=!0,this.includes.push({node:e,module:t,priority:n}))}visit(e){return this.visits[e]?!1:this.visits[e]=!0}link(e){const t=IU(this.language,this.links,this.includes,e),n=new w_;for(const r in t)n[r]=t[r];return n.graph=this.graph,n}}const{load:KKe}=w_,kU=aL({__proto__:null,Layout:PU,Program:Of,Snippet:w_,assemble:TU,link:IU,load:KKe},[Ju]);class Zu{static previous(e){return e.input!=null?e.input.node.owner:void 0}constructor(e){e==null&&(e=!1),e||this.construct()}construct(){let e;return this.namespace==null&&(this.namespace=Of.entry()),this.node=new DI(this,(e=typeof this.makeOutlets=="function"?this.makeOutlets():void 0)!=null?e:{})}refresh(){let e;return this.node.setOutlets((e=typeof this.makeOutlets=="function"?this.makeOutlets():void 0)!=null?e:{})}clone(){return new Zu}compile(e,t){const n=new Of(e,t??Of.entry(),this.node.graph);return this.call(n,0),n.assemble()}link(e,t){const n=this.compile(e,t),r=new PU(e,this.node.graph);return this._include(n,r,0),this.export(r,0),r.link(n)}call(e,t){}callback(e,t,n,r,s){}export(e,t){}_info(e){let t=(this.node.owner.snippet!=null?this.node.owner.snippet._name:void 0)!=null?this.node.owner.snippet!=null?this.node.owner.snippet._name:void 0:this.node.owner.namespace;if(e!=null)return t+="."+e}_outlet(e,t){const n=ol.make(e,t);return n.meta.def=e,n}_call(e,t,n){return t.call(this.node,e,n)}_require(e,t){return t.require(this.node,e)}_inputs(e,t,n){return(()=>{const r=[];for(const s of Array.from(e.main.signature)){const a=this.node.get(s.name);r.push(fR(Zu.previous(a),o=>o.call(t,n+1)))}return r})()}_callback(e,t,n,r,s,a){return t.callback(this.node,e,n,r,s,a)}_include(e,t,n){return t.include(this.node,e,n)}_link(e,t,n){return(()=>{const r=[];for(const s of Array.from(e.symbols)){const a=e.externals[s];let o=this.node.get(a.name);if(!o)throw new HM(`External not found on ${this._info(a.name)}`);if(o.meta.child!=null)continue;let l=o,c;for(;!c&&l;)[l,o]=Array.from([o.meta.parent,l]);if(c=Zu.previous(o),!c)throw new HM(`Missing connection on ${this._info(a.name)}`);c.callback(t,n+1,s,a,o.input),r.push(c!=null?c.export(t,n+1):void 0)}return r})()}_trace(e,t,n){return(()=>{const r=[];for(const s of Array.from(e.main.signature)){const a=this.node.get(s.name);r.push(fR(Zu.previous(a),o=>o.export(t,n+1)))}return r})()}}const HM=function(i){const e=new Error(i);return e.name="OutletError",e};HM.prototype=new Error;function fR(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class yC extends Zu{constructor(e){super(!0),this.snippet=e,this.namespace=e.namespace,this.construct()}clone(){return new yC(this.snippet)}makeOutlets(){const e=this.snippet.main.signature,{externals:t}=this.snippet,{symbols:n}=this.snippet,r=Array.from(e).map(a=>this._outlet(a,{callback:!1})),s=Array.from(n).map(a=>this._outlet(t[a],{callback:!0}));return r.concat(s)}call(e,t){return this._call(this.snippet,e,t),this._inputs(this.snippet,e,t)}export(e,t){if(e.visit(this.namespace,t))return this._link(this.snippet,e,t),this._trace(this.snippet,e,t)}}class L1 extends Zu{constructor(e){super(!0),this.graph=e,this.construct()}refresh(){return super.refresh(),delete this.subroutine}clone(){return new L1(this.graph)}makeOutlets(){let e;this.make();const t=[];let n=[],r=[];const s=(o,l)=>{if(o.meta.callback){if(o.inout===co.IN){const c=o.dupe();return c.meta.child==null&&(c.meta.child=o),o.meta.parent=c,t.push(c)}}else return l.push(o.type)};for(e of Array.from(this.graph.inputs()))s(e,n);for(e of Array.from(this.graph.outputs()))s(e,r);n=n.join(","),r=r.join(",");const a=`(${n})(${r})`;return t.push({name:"callback",type:a,inout:co.OUT,meta:{callback:!0,def:this.subroutine.main}}),t}make(){return this.subroutine=this.graph.compile(this.namespace)}export(e,t){if(e.visit(this.namespace,t))return this._link(this.subroutine,e,t),this.graph.export(e,t)}call(e,t){return this._require(this.subroutine,e,t)}callback(e,t,n,r,s){return this._include(this.subroutine,e,t),this._callback(this.subroutine,e,t,n,r,s)}}class O1 extends Zu{constructor(e){super(!0),this.graph=e,this.construct()}refresh(){return super.refresh(),delete this.subroutine}clone(){return new O1(this.graph)}makeOutlets(){this.make();const e=[],t={},n={};for(const r of["inputs","outputs"])for(const s of Array.from(this.graph[r]())){let a;["return","callback"].includes(s.hint)&&s.inout===co.OUT&&(a=s.hint),t[a]!=null&&(a=void 0);const o=s.dupe(a);o.meta.child==null&&(o.meta.child=s),s.meta.parent=o,a!=null&&(t[a]=!0),n[s.name]=o,e.push(o)}return e}make(){return this.subroutine=this.graph.compile(this.namespace)}call(e,t){return this._call(this.subroutine,e,t),this._inputs(this.subroutine,e,t)}export(e,t){if(e.visit(this.namespace,t))return this._link(this.subroutine,e,t),this._trace(this.subroutine,e,t),this.graph.export(e,t)}callback(e,t,n,r,s){return s=s.meta.child,s.node.owner.callback(e,t,n,r,s)}}class wC extends Zu{constructor(e){super(!0),this.nodes=e,this.construct()}clone(){return new wC(this.nodes)}makeOutlets(){return[]}call(e,t){return(()=>{const n=[];for(const r of Array.from(this.nodes)){const s=r.owner;n.push(s.call(e,t))}return n})()}export(e,t){return(()=>{const n=[];for(const r of Array.from(this.nodes)){const s=r.owner;n.push(s.export(e,t))}return n})()}}const Jw=function(i){const e=[],t=[];for(const n of Array.from(i.nodes)){let r;const s={id:n.id,name:null,type:null,depth:null,graph:null,inputs:[],outputs:[]};e.push(s);const{inputs:a}=s,{outputs:o}=s,l=n.owner;l instanceof yC?(s.name=l.snippet._name,s.type="call",s.code=l.snippet._original):l instanceof L1?(s.name="Callback",s.type="callback",s.graph=Jw(l.graph)):l instanceof O1?(s.name="Isolate",s.type="isolate",s.graph=Jw(l.graph)):l instanceof wC?(s.name="Join",s.type="join"):l!=null&&(s.name==null&&(s.name=l.name!=null?l.name:l.type),s.type==null&&(s.type=l.type),s.code==null&&(s.code=l.code),l.graph!=null&&(s.graph=Jw(l.graph)));const c=function(u){return u=u.replace(")(",")("),u=u.replace("()","")};for(r of Array.from(n.inputs))a.push({id:r.id,name:r.name,type:c(r.type),open:r.input==null});for(r of Array.from(n.outputs)){o.push({id:r.id,name:r.name,type:c(r.type),open:!r.output.length});for(const u of Array.from(r.output))t.push({from:n.id,out:r.id,to:u.node.id,in:u.id,type:c(r.type)})}}return{nodes:e,links:t}},JKe=3432918353,ZKe=461845907,eJe=3864292196,tJe=2246822507,nJe=3266489909;let ag=function(i,e){const t=i>>>16&65535,n=i&65535,r=e>>>16&65535,s=e&65535;return n*s+(t*s+n*r<<16>>>0)|0};Math.imul!=null&&Math.imul(4294967295,5)===-5&&({imul:ag}=Math);const OI=function(i){let e;const t=i.length;let n=Math.floor(t/2),r=e=0;const s=()=>i.charCodeAt(r++),a=function(o,l){let c=o|l<<16;return c^=c<<9,c=ag(c,JKe),c=c<<15|c>>>17,c=ag(c,ZKe),e^=c,e=e<<13|e>>>19,e=ag(e,5),e=e+eJe|0};for(;n--;)a(s(),s());return t&1&&a(s(),0),e^=t,e^=e>>>16,e=ag(e,tJe),e^=e>>>13,e=ag(e,nJe),e^=e>>>16},iJe=i=>(""+i).replace(/^\s+|\s+$/g,""),rJe=(i,e,t,n)=>"rgba("+[i,e,t,n].join(", ")+")",pR=function(i,e){e==null&&(e=1);const t=OI(i)^1193046;let n=t&255,r=t>>>8&255,s=t>>>16&255;const a=Math.max(n,r,s),o=140/a,l=Math.round(a/3);return n=Math.min(255,Math.round(o*Math.max(n,l))),r=Math.min(255,Math.round(o*Math.max(r,l))),s=Math.min(255,Math.round(o*Math.max(s,l))),rJe(n,r,s,e)},Ky=function(i){return i=i??"",i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},sJe=function(i){const e=[],t=BU(i,e);return t.update=()=>cJe(t,e),aJe(t),t},aJe=function(i){const e=i.querySelectorAll(".shadergraph-code");return Array.from(e).map(t=>function(){const n=t;return n.parentNode.classList.add("shadergraph-has-code"),n.parentNode.addEventListener("click",r=>n.style.display={block:"none",none:"block"}[n.style.display||"none"])}())},oJe=function(i){let e,t;const n={},r={};for(t of Array.from(i.nodes))n[t.id]=t;for(e of Array.from(i.links))r[e.from]==null&&(r[e.from]=[]),r[e.from].push(e);const s=function(a,o){let l;if(o==null&&(o=0),a.depth=Math.max(a.depth!=null?a.depth:0,o),l=r[a.id])for(e of Array.from(l))s(n[e.to],o+1);return null};for(t of Array.from(i.nodes))t.depth==null&&s(t);return null},BU=function(i,e){let t;oJe(i);const n=document.createElement("div");n.classList.add("shadergraph-graph");const r=[],s={};for(const a of Array.from(i.nodes)){let o;const l=document.createElement("div");l.classList.add("shadergraph-node"),l.classList.add(`shadergraph-node-${a.type}`),l.innerHTML=`<div class="shadergraph-header">${Ky(a.name)}</div>`;const c=function(u,h){const d=pR(u.type),f=document.createElement("div");return f.classList.add("shadergraph-outlet"),f.classList.add(`shadergraph-outlet-${h}`),f.innerHTML=`<div class="shadergraph-point" style="background: ${d}"></div>
<div class="shadergraph-type" style="color: ${d}">${Ky(u.type)}</div>
<div class="shadergraph-name">${Ky(u.name)}</div>`,l.appendChild(f),s[u.id]=f.querySelector(".shadergraph-point")};for(o of Array.from(a.inputs))c(o,"in");for(o of Array.from(a.outputs))c(o,"out");if(a.graph!=null)l.appendChild(BU(a.graph,e));else{const u=document.createElement("div");u.classList.add("shadergraph-clear"),l.appendChild(u)}if(a.code!=null){const u=document.createElement("div");u.classList.add("shadergraph-code"),u.innerHTML=Ky(iJe(a.code)),l.appendChild(u)}t=r[a.depth],t==null&&(t=document.createElement("div"),t.classList.add("shadergraph-column"),r[a.depth]=t),t.appendChild(l)}for(t of Array.from(r))t!=null&&n.appendChild(t);for(const a of Array.from(i.links)){const o=pR(a.type);e.push({color:o,out:s[a.out],in:s[a.in]})}return n},mR=i=>i*i,lJe=function(i,e,t,n){let r;const s=t-i,a=n-e,o=Math.sqrt(mR(s)+mR(a));if(Math.abs(a)>Math.abs(s)){const c=(i+t)/2,u=(e+n)/2,h=a>0?.3:-.3;return r=Math.min(Math.abs(s)/2,20+o/8),["M",i,e,"C",i+r,e+",",c,u-o*h,c,u,"C",c,u+o*h,t-r,n+",",t,n].join(" ")}else return r=Math.min(Math.abs(s)/2.5,20+o/4),["M",i,e,"C",i+r,e+",",t-r,n+",",t,n].join(" ")},gR=function(i){return i==null&&(i="svg"),document.createElementNS("http://www.w3.org/2000/svg",i)},cJe=function(i,e){let t;if(i.parentNode==null)return;const n=i.getBoundingClientRect();for(t of Array.from(e)){const a=t.out.getBoundingClientRect(),o=t.in.getBoundingClientRect();t.coords={x1:(a.left+a.right)/2-n.left,y1:(a.top+a.bottom)/2-n.top,x2:(o.left+o.right)/2-n.left,y2:(o.top+o.bottom)/2-n.top}}let r=i.querySelector("svg");r!=null&&i.removeChild(r);let s=i;for(;s.parentNode&&s.offsetHeight===0;)s=s.parentNode;r=gR(),r.setAttribute("width",s.offsetWidth),r.setAttribute("height",s.offsetHeight);for(t of Array.from(e)){const a=t.coords,o=gR("path");o.setAttribute("d",lJe(a.x1,a.y1,a.x2,a.y2)),o.setAttribute("stroke",t.color),o.setAttribute("stroke-width",3),o.setAttribute("fill","transparent"),r.appendChild(o)}return i.appendChild(r)},uJe=function(i){const e=document.createElement("div");e.setAttribute("class","shadergraph-overlay");const t=document.createElement("div");t.setAttribute("class","shadergraph-close"),t.innerHTML="&times;";const n=document.createElement("div");n.setAttribute("class","shadergraph-view");const r=document.createElement("div");return r.setAttribute("class","shadergraph-inside"),r.appendChild(i),n.appendChild(r),e.appendChild(n),e.appendChild(t),t.addEventListener("click",()=>e.parentNode.removeChild(e)),e},vR=function(i){if(i instanceof Node)return i;const e=document.createElement("span");return e.innerText=i??"",e},hJe=function(i){if(i.length!==1){let e;const t=document.createElement("div");for(e of Array.from(i))t.appendChild(vR(e));return t.update=()=>(()=>{const n=[];for(e of Array.from(i))n.push(typeof e.update=="function"?e.update():void 0);return n})(),t}else return vR(i[0])},dJe=Object.freeze(Object.defineProperty({__proto__:null,merge:hJe,overlay:uJe,process:sJe},Symbol.toStringTag,{value:"Module"})),NI=Jw,xC=dJe,fJe=function(i){if(!i)return;if(!i.nodes)return i;const e=NI(i);return xC.process(e)},Zw=function(i){return i==null?i:i instanceof Array?i.map(Zw):i.vertex!=null&&i.fragment!=null?[Zw(i.vertex,Zw(i.fragment))]:i._graph!=null?i._graph:i.graph!=null?i.graph:i},RU=function(i){let e=[];for(const t of Array.from(i))t instanceof Array?e=e.concat(RU(t)):t!=null&&e.push(t);return e},DU=function(){const i=RU(Zw([].slice.call(arguments)));return xC.merge(Array.from(i).filter(e=>e).map(e=>fJe(e)))},Cf=function(){const i=DU.apply(null,arguments),e=xC.overlay(i);for(const t of Array.from(document.querySelectorAll(".shadergraph-overlay")))t.remove();return document.body.appendChild(e),i.update(),e},LU=Object.freeze(Object.defineProperty({__proto__:null,inspect:Cf,markup:xC,serialize:NI,visualize:DU},Symbol.toStringTag,{value:"Module"}));let OU=class GM{constructor(e,t,n){this.language=e,this.fetch=t,this.config=n,this.graph()}pipe(e,t,n,r){return e instanceof GM?this._concat(e):e!=null&&this._call(e,t,n,r),this}call(e,t,n,r){return this.pipe(e,t,n,r)}require(e,t,n,r){return e instanceof GM?this._import(e):e!=null&&(this.callback(),this._call(e,t,n,r),this.end()),this}import(e,t,n,r){return this.require(e,t,n,r)}split(){return this._group("_combine",!0),this}fan(){return this._group("_combine",!1),this}isolate(){return this._group("_isolate"),this}callback(){return this._group("_callback"),this}next(){return this._next(),this}pass(){const e=this._stack[2].end;return this.end(),this._state.end=this._state.end.concat(e),this}end(){const[e,t]=Array.from(this._exit()),{op:n}=e;return this[n]&&this[n](e,t),this}join(){return this.end()}graph(){for(;(this._stack!=null?this._stack.length:void 0)>1;)this.end();this._graph&&this._tail(this._state,this._graph);const e=this._graph;return this._graph=new co,this._state=new Jy,this._stack=[this._state],e}compile(e){return e==null&&(e="main"),this.graph().compile(e)}link(e){return e==null&&(e="main"),this.graph().link(e)}serialize(){return NI(this._graph)}empty(){return this._graph.nodes.length===0}_concat(e){let t;if(e._state.nodes.length===0)return this;this._tail(e._state,e._graph);try{t=new O1(e._graph)}catch(n){throw this.config.autoInspect&&Cf(n,this._graph,e),n}return this._auto(t),this}_import(e){let t;if(e._state.nodes.length===0)throw"Can't import empty callback";this._tail(e._state,e._graph);try{t=new L1(e._graph)}catch(n){throw this.config.autoInspect&&Cf(n,this._graph,e),n}return this._auto(t),this}_combine(e,t){for(const n of Array.from(e.start))for(const r of Array.from(t.end))r.connect(n,e.multi);return t.end=e.end,t.nodes=t.nodes.concat(e.nodes)}_isolate(e,t){if(e.nodes.length){let n;const r=this._subgraph(e);this._tail(e,r);try{n=new O1(r)}catch(s){throw this.config.autoInspect&&Cf(s,this._graph,r),s}return this._auto(n)}}_callback(e,t){if(e.nodes.length){let n;const r=this._subgraph(e);this._tail(e,r);try{n=new L1(r)}catch(s){throw this.config.autoInspect&&Cf(s,this._graph,r),s}return this._auto(n)}}_call(e,t,n,r){const s=this.fetch(e);s.bind(this.config,t,n,r);const a=new yC(s);return this._auto(a)}_subgraph(e){const t=new co(null,this._graph);return t.adopt(e.nodes),t}_tail(e,t){let n=e.end.concat(e.tail);if(n=n.filter((r,s)=>n.indexOf(r)===s),n.length>1&&(n=new wC(n),n=[n.node],this._graph.add(n)),t.tail=n[0],e.end=n,e.tail=[],!t.tail)throw new Error("Cannot finalize empty graph");return t.compile=r=>{r==null&&(r="main");try{return t.tail.owner.compile(this.language,r)}catch(s){throw this.config.autoInspect&&t.inspect(s),s}},t.link=r=>{r==null&&(r="main");try{return t.tail.owner.link(this.language,r)}catch(s){throw this.config.autoInspect&&t.inspect(s),s}},t.export=(r,s)=>t.tail.owner.export(r,s),t.inspect=(r=null)=>Cf(r,t)}_group(e,t){return this._push(e,t),this._push(),this}_next(){const e=this._pop();return this._state.start=this._state.start.concat(e.start),this._state.end=this._state.end.concat(e.end),this._state.nodes=this._state.nodes.concat(e.nodes),this._state.tail=this._state.tail.concat(e.tail),this._push()}_exit(){return this._next(),this._pop(),[this._pop(),this._state]}_push(e,t){return this._stack.unshift(new Jy(e,t)),this._state=this._stack[0]}_pop(){let e;return this._state=this._stack[1],this._state==null&&(this._state=new Jy),(e=this._stack.shift())!=null?e:new Jy}_auto(e){return e.node.inputs.length?this._append(e):this._insert(e)}_append(e){let t;const{node:n}=e;this._graph.add(n);for(t of Array.from(this._state.end))t.connect(n);this._state.start.length||(this._state.start=[n]),this._state.end=[n],this._state.nodes.push(n),n.outputs.length||this._state.tail.push(n)}_prepend(e){let t;const{node:n}=e;this._graph.add(n);for(t of Array.from(this._state.start))n.connect(t);this._state.end.length||(this._state.end=[n]),this._state.start=[n],this._state.nodes.push(n),n.outputs.length||this._state.tail.push(n)}_insert(e){const{node:t}=e;if(this._graph.add(t),this._state.start.push(t),this._state.end.push(t),this._state.nodes.push(t),!t.outputs.length)return this._state.tail.push(t)}};class Jy{constructor(e=null,t,n,r,s,a){this.op=e,t==null&&(t=!1),this.multi=t,n==null&&(n=[]),this.start=n,r==null&&(r=[]),this.end=r,s==null&&(s=[]),this.nodes=s,a==null&&(a=[]),this.tail=a}}class NU{constructor(e,t){this.vertex=e,this.fragment=t}build(e){return this.link(e)}link(e){e==null&&(e={});const t={},n={},r={},s=this.vertex.link("main"),a=this.fragment.link("main");for(const o of[s,a]){for(const l in o.uniforms){const c=o.uniforms[l];t[l]=c}for(const l in o.varyings){const c=o.varyings[l];n[l]=c}for(const l in o.attributes){const c=o.attributes[l];r[l]=c}}return e.vertexShader=s.code,e.vertexGraph=s.graph,e.fragmentShader=a.code,e.fragmentGraph=a.graph,e.attributes=r,e.uniforms=t,e.varyings=n,e.inspect=()=>Cf("Vertex Shader",s,"Fragment Shader",a.graph),e}inspect(){return Cf("Vertex Shader",this.vertex,"Fragment Shader",this.fragment.graph)}}const pJe=function(i,e,t){let n=null,r={};e!=null&&(typeof e=="function"?n=o=>t(i,o,e(o)):typeof e=="object"&&(n=function(o){if(e[o]==null)throw new Error(`Unknown snippet \`${o}\``);return t(i,o,e[o])}));const s=o=>t(i,"",o);if(n==null)return s;const a=function(o){return o.match(/[{;]/)?s(o):(r[o]=!0,n(o))};return a.used=function(o){return o==null&&(o=r),r=o},a},FU=function(i){i==null&&(i=100);const e={};let t=null,n=null,r=0;const s=function(o){if(o.prev=null,o.next=t,t!=null&&(t.prev=o),t=o,n==null)return n=o},a=function(o){const{prev:l}=o,{next:c}=o;if(l!=null&&(l.next=c),c!=null&&(c.prev=l),t===o&&(t=c),n===o)return n=l};return function(o){let l,c;return(c=e[o])&&c!==t?(a(c),s(c)):(r===i?(l=n.key,a(n),delete e[l]):r++,c={next:t,prev:null,key:o},s(c),e[o]=c),l}},mJe=function(i){const e={},t=FU(100);return function(n){const r=n.length>32?"##"+OI(n).toString(16):n,s=t(r);return s!=null&&delete e[s],e[r]==null&&(e[r]=i(n)),e[r].clone()}},zU=Object.freeze(Object.defineProperty({__proto__:null,Factory:OU,Material:NU,cache:mJe,hash:OI,library:pJe,queue:FU},Symbol.toStringTag,{value:"Module"})),gJe=function(i){const{code:e,signatures:t}=i,n=vJe(t),r=AJe(e,n);return[t,r]},vJe=function(i){const e={},t=n=>e[n.name]=!0;t(i.main);for(const n of["external","internal","varying","uniform","attribute"])for(const r of i[n])t(r);return e},AJe=function(i,e){let t;const n=new RegExp("\\b("+(()=>{const r=[];for(t in e)r.push(t);return r})().join("|")+")\\b","g");return i=i.replace(/\/\/[^\n]*/g,""),i=i.replace(/\/\*([^*]|\*[^/])*\*\//g,""),function(r,s,a){let o;r==null&&(r=""),s==null&&(s={}),a==null&&(a={});const l={};for(o in e)l[o]=s[o]!=null?o:r+o;const c=i.replace(n,h=>l[h]),u=(()=>{const h=[];for(o in a){const d=a[o];h.push(`#define ${o} ${d}`)}return h})();return u.length&&u.push(""),u.join(`
`)+c}};var UU=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"],_Je=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"],VU=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],bJe=UU,yJe=bJe.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),QM=VU;QM=QM.slice().filter(function(i){return!/^(gl\_|texture)/.test(i)});var wJe=QM.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),xJe=RJe,CJe=UU,AR=_Je,EJe=VU,SJe=yJe,MJe=wJe,ru=999,_R=9999,S4=0,M4=1,bR=2,yR=3,wR=4,bA=5,TJe=6,IJe=7,PJe=8,xR=9,kJe=10,CR=11,BJe=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function RJe(i){var e=0,t=0,n=ru,r,s,a=[],o=[],l=1,c=0,u=0,h=!1,d=!1,f="",m;i=i||{};var A=EJe,_=CJe;i.version==="300 es"&&(A=MJe,_=SJe);for(var v={},w={},e=0;e<A.length;e++)v[A[e]]=!0;for(var e=0;e<_.length;e++)w[_[e]]=!0;return function(J){return o=[],J!==null?C(J):S()};function x(J){J.length&&o.push({type:BJe[n],data:J,position:u,line:l,column:c})}function C(J){e=0,J.toString&&(J=J.toString()),f+=J.replace(/\r\n/g,`
`),m=f.length;for(var Y;r=f[e],e<m;){switch(Y=e,n){case S4:e=R();break;case M4:e=M();break;case bR:e=k();break;case yR:e=N();break;case wR:e=W();break;case CR:e=q();break;case bA:e=F();break;case _R:e=ue();break;case xR:e=P();break;case ru:e=I();break}if(Y!==e)switch(f[Y]){case`
`:c=0,++l;break;default:++c;break}}return t+=e,f=f.slice(e),o}function S(J){return a.length&&x(a.join("")),n=kJe,x("(eof)"),o}function I(){return a=a.length?[]:a,s==="/"&&r==="*"?(u=t+e-1,n=S4,s=r,e+1):s==="/"&&r==="/"?(u=t+e-1,n=M4,s=r,e+1):r==="#"?(n=bR,u=t+e,e):/\s/.test(r)?(n=xR,u=t+e,e):(h=/\d/.test(r),d=/[^\w_]/.test(r),u=t+e,n=h?wR:d?yR:_R,e)}function P(){return/[^\s]/g.test(r)?(x(a.join("")),n=ru,e):(a.push(r),s=r,e+1)}function k(){return(r==="\r"||r===`
`)&&s!=="\\"?(x(a.join("")),n=ru,e):(a.push(r),s=r,e+1)}function M(){return k()}function R(){return r==="/"&&s==="*"?(a.push(r),x(a.join("")),n=ru,e+1):(a.push(r),s=r,e+1)}function N(){if(s==="."&&/\d/.test(r))return n=bA,e;if(s==="/"&&r==="*")return n=S4,e;if(s==="/"&&r==="/")return n=M4,e;if(r==="."&&a.length){for(;U(a););return n=bA,e}if(r===";"||r===")"||r==="("){if(a.length)for(;U(a););return x(r),n=ru,e+1}var J=a.length===2&&r!=="=";if(/[\w_\d\s]/.test(r)||J){for(;U(a););return n=ru,e}return a.push(r),s=r,e+1}function U(J){var Y=0,Pe,Ie;do{if(Pe=AR.indexOf(J.slice(0,J.length+Y).join("")),Ie=AR[Pe],Pe===-1){if(Y--+J.length>0)continue;Ie=J.slice(0,1).join("")}return x(Ie),u+=Ie.length,a=a.slice(Ie.length),a.length}while(1)}function q(){return/[^a-fA-F0-9]/.test(r)?(x(a.join("")),n=ru,e):(a.push(r),s=r,e+1)}function W(){return r==="."||/[eE]/.test(r)?(a.push(r),n=bA,s=r,e+1):r==="x"&&a.length===1&&a[0]==="0"?(n=CR,a.push(r),s=r,e+1):/[^\d]/.test(r)?(x(a.join("")),n=ru,e):(a.push(r),s=r,e+1)}function F(){return r==="f"&&(a.push(r),s=r,e+=1),/[eE]/.test(r)||(r==="-"||r==="+")&&/[eE]/.test(s)?(a.push(r),s=r,e+1):/[^\d]/.test(r)?(x(a.join("")),n=ru,e):(a.push(r),s=r,e+1)}function ue(){if(/[^\d\w_]/.test(r)){var J=a.join("");return w[J]?n=PJe:v[J]?n=IJe:n=TJe,x(a.join("")),n=ru,e}return a.push(r),s=r,e+1}}var DJe=xJe,LJe=OJe;function OJe(i,e){var t=DJe(e),n=[];return n=n.concat(t(i)),n=n.concat(t(null)),n}const NJe=U0(LJe);let hu,Mc,s1,Bx;const FJe={nud:function(){return this.children&&this.children.length?this:ER("unexpected")()},led:ER("missing operator")},o0={};function x_(){return this}Uo("(ident)").nud=x_;Uo("(keyword)").nud=x_;Uo("(builtin)").nud=x_;Uo("(literal)").nud=x_;Uo("(end)");Uo(":");Uo(";");Uo(",");Uo(")");Uo("]");Uo("}");FI("&&",30);FI("||",30);ua("|",43);ua("^",44);ua("&",45);ua("==",46);ua("!=",46);ua("<",47);ua("<=",47);ua(">",47);ua(">=",47);ua(">>",48);ua("<<",48);ua("+",50);ua("-",50);ua("*",60);ua("/",60);ua("%",60);ua("?",20,function(i){return this.children=[i,ph(0),(wd(":"),ph(0))],this.type="ternary",this});ua(".",80,function(i){return Mc.type="literal",hu.fake(Mc),this.children=[i,Mc],wd(),this});ua("[",80,function(i){return this.children=[i,ph(0)],this.type="binary",wd("]"),this});ua("(",80,function(i){if(this.children=[i],this.type="call",Mc.data!==")")for(;this.children.push(ph(0)),Mc.data===",";)wd(",");return wd(")"),this});ap("-");ap("+");ap("!");ap("~");ap("defined");ap("(",function(){return this.type="group",this.children=[ph(0)],wd(")"),this});ap("++");ap("--");HU("++");HU("--");Eu("=");Eu("+=");Eu("-=");Eu("*=");Eu("/=");Eu("%=");Eu("&=");Eu("|=");Eu("^=");Eu(">>=");Eu("<<=");var zJe=function(i,e){hu=i,s1=e,Bx=0;let t;if(!s1.length)return;if(wd(),t=ph(0),t.parent=hu[0],n(t),Bx<s1.length)throw new Error("did not use all tokens");t.parent.children=[t];function n(r){hu.unshift(r,!1);for(let s=0,a=r.children.length;s<a;++s)n(r.children[s]);hu.shift()}};function Uo(i,e){let t=o0[i];return e=e||0,t?e>t.lbp&&(t.lbp=e):(t=Object.create(FJe),t.id=i,t.lbp=e,o0[i]=t),t}function ph(i){let e,t=Mc;for(wd(),e=t.nud();i<Mc.lbp;)t=Mc,wd(),e=t.led(e);return e}function ua(i,e,t){const n=Uo(i,e);n.led=t||function(r){return this.children=[r,ph(e)],this.type="binary",this}}function FI(i,e,t){const n=Uo(i,e);return n.led=t||function(r){return this.children=[r,ph(e-1)],this.type="binary",this},n}function ap(i,e){const t=Uo(i);return t.nud=e||function(){return this.children=[ph(70)],this.type="unary",this},t}function HU(i){const e=Uo(i,150);e.led=function(t){return this.children=[t],this.type="suffix",this}}function Eu(i){return FI(i,10,function(e){return this.children=[e,ph(9)],this.assignment=!0,this.type="assign",this})}function wd(i){let e,t,n,r;if(i&&Mc.data!==i)return hu.unexpected("expected `"+i+"`, got `"+Mc.data+"`");if(Bx>=s1.length){Mc=o0["(end)"];return}if(e=s1[Bx++],t=e.data,n=e.type,n==="ident")r=hu.scope.find(t)||hu.create_node(),n=r.type;else if(n==="builtin")r=o0["(builtin)"];else if(n==="keyword")r=o0["(keyword)"];else if(n==="operator"){if(r=o0[t],!r)return hu.unexpected("unknown operator `"+t+"`")}else if(n==="float"||n==="integer")n="literal",r=o0["(literal)"];else return hu.unexpected("unexpected token.");return r&&(r.nud||(r.nud=x_),r.children||(r.children=[])),r=Object.create(r),r.token=e,r.type=n,r.data||(r.data=t),Mc=r}function ER(i){return function(){return hu.unexpected(i)}}var UJe=Rx;function Rx(i){if(this.constructor!==Rx)return new Rx(i);this.state=i,this.scopes=[],this.current=null}const VJe=Rx,CC=VJe.prototype;CC.enter=function(i){this.scopes.push(this.current=this.state[0].scope=i||{})};CC.exit=function(){this.scopes.pop(),this.current=this.scopes[this.scopes.length-1]};CC.define=function(i){this.current[i]=this.state[0]};CC.find=function(i,e){for(let t=this.scopes.length-1;t>-1;--t)if(this.scopes[t].hasOwnProperty(i))return this.scopes[t][i];return null};var HJe=iZe;const GJe=zJe,QJe=UJe,pi=new Object;let Wr=0,yA=Wr++,SR=Wr++,T4=Wr++,MR=Wr++,I4=Wr++,TR=Wr++,IR=Wr++,PR=Wr++,kR=Wr++,BR=Wr++,RR=Wr++,DR=Wr++,LR=Wr++,OR=Wr++,qJe=Wr++,P4=Wr++,jJe=Wr++,NR=Wr++,WJe=Wr++,$Je=Wr++,XJe=Wr++,FR=Wr++,Zy=Wr++,zR=Wr++;const zI=1,qM=2,YJe=4,UI=8,GU=16,QU=32,qU=64,vg=255,KJe=vg&~(zI|qM|QU|UI|YJe),JJe=vg&~(zI|UI|GU|qU),ZJe=!1,eZe=!1,tZe={"block-comment":OR,"line-comment":OR,preprocessor:qJe},nZe=Wr=["ident","stmt","stmtlist","struct","function","functionargs","decl","decllist","forloop","whileloop","if","expr","precision","comment","preprocessor","keyword","keyword_or_ident","return","break","continue","discard","do-while","placeholder","quantifier"];function iZe(){const i=ce(T4),e=ce(SR),t=ce(PR),n=ce(LR),r=ce(yA),s=ce(I4),a=ce(TR),o=ce(kR),l=ce(RR),c=ce(BR),u=ce(NR),h=ce(FR),d=ce(zR);let f,m,A,_,v,w,x,C,S,I,P=arguments.length?[].slice.call(arguments):[],k=!1,M=[],R=[],N=[],U=[],q=!1,W,F,ue;return M.shift=G,M.unshift=Ce,M.fake=pe,M.unexpected=ze,M.scope=new QJe(M),M.create_node=function(){const ye=ko(yA,F);return ye.parent=J.program,ye},Vt(),ue=i(),ue.expecting="(eof)",ue.mode=T4,ue.token={type:"(program)",data:"(program)"},W=ue,J.program=W,J.scope=function(ye){return arguments.length===1&&(M.scope=ye),M.scope},M.unshift(ue),J;function J(ye){return ye===null?(Pe(),W):(R=[],Y(ye),R)}function Y(ye){if(ye.type==="whitespace"||ye.type==="line-comment"||ye.type==="block-comment"){U.push(ye);return}for(N.push(ye),F=F||N[0],F&&U.length&&(F.preceding=F.preceding||[],F.preceding=F.preceding.concat(U),U=[]);Ie();)switch(M[0].mode){case SR:je();break;case T4:oe();break;case IR:rt();break;case PR:De();break;case DR:st();break;case MR:f(!0,!0);break;case LR:m();break;case yA:et();break;case P4:mt();break;case jJe:xt();break;case I4:S();break;case TR:I();break;case kR:_();break;case BR:x();break;case FR:C();break;case NR:w();break;case RR:v();break;case zR:A();break}}function Pe(ye){if(arguments.length&&Y(ye),M.length>1){ze("unexpected EOF");return}}function Ie(){return q||!M.length?!1:F=N[0]}function pe(ye){M.unshift(ye),M.shift()}function Ce(ye,Ee){ye.parent=M[0];const St=[].unshift.call(this,ye);return Ee=Ee===void 0?!0:Ee,Ee&&ue!==ye&&ue.children.push(ye),ue=ye,St}function G(){let ye=[].shift.call(this),Ee=P[this.length],St=!1;return P.length?typeof P[0]=="function"?St=P[0](ye):Ee!==void 0&&(St=Ee.test?Ee.test(ye.type):Ee===ye.type):St=!0,St&&!q&&R.push(ye),ue=ye.parent,ye}function oe(){return Be(function(){return M.scope.enter(),pi},ye)();function ye(){if(F.data===M[0].expecting)return M.scope.exit(),M.shift();switch(F.type){case"preprocessor":M.fake(tt()),N.shift();return;default:M.unshift(e());return}}}function je(){if(M[0].brace)return F.data!=="}"?ze("expected `}`, got "+F.data):(M[0].brace=!1,N.shift(),M.shift());switch(F.type){case"eof":return Tt();case"keyword":switch(F.data){case"for":return M.unshift(o());case"if":return M.unshift(l());case"while":return M.unshift(c());case"do":return M.unshift(h());case"break":return M.fake(ko(WJe,F)),N.shift();case"continue":return M.fake(ko($Je,F)),N.shift();case"discard":return M.fake(ko(XJe,F)),N.shift();case"return":return M.unshift(u());case"precision":return M.unshift(n())}return M.unshift(he(vg));case"ident":var ye;if(ye=M.scope.find(F.data))return ye.parent.type==="struct"?M.unshift(he(vg)):M.unshift(Ne(";"));case"operator":if(F.data==="{"){M[0].brace=!0;const Ee=i();return Ee.expecting="}",N.shift(),M.unshift(Ee)}if(F.data===";")return N.shift(),M.shift();default:return M.unshift(Ne(";"))}}function Tt(){return k&&(q=!0),k=!0,M.shift()}function rt(){const ye=M[0];return Be(Ee,St,Rt,Bt,Qt,Nt,$t,Qn,de)();function Ee(){return F.data==="invariant"?ye.flags&UI?(M.unshift(nt()),pi):ze("`invariant` is not allowed here"):(M.fake(ko(Zy,{data:"",position:F.position})),pi)}function St(){return rZe(F)?ye.flags&GU?(M.unshift(nt()),pi):ze("storage is not allowed here"):(M.fake(ko(Zy,{data:"",position:F.position})),pi)}function Rt(){return sZe(F)?ye.flags&QU?ze("parameter is not allowed here"):(M.unshift(nt()),pi):(M.fake(ko(Zy,{data:"",position:F.position})),pi)}function Bt(){return aZe(F)?(M.unshift(nt()),pi):(M.fake(ko(Zy,{data:"",position:F.position})),pi)}function Qt(){if(F.data==="struct")return ye.flags&qU?(M.unshift(be()),pi):ze("cannot nest structs");if(F.type==="keyword")return M.unshift(nt()),pi;const It=M.scope.find(F.data);return It?(M.fake(Object.create(It)),N.shift(),pi):ze("expected user defined type, struct or keyword, got "+F.data)}function Nt(){if(F.data===","&&!(ye.flags&qM))return M.shift();if(F.data==="["){M.unshift(d());return}return F.data===")"?M.shift():F.data===";"?ye.stage+3:F.type!=="ident"&&F.type!=="builtin"?ze("expected identifier, got "+F.data):(ye.collected_name=N.shift(),pi)}function $t(){return F.data==="("?(N.unshift(ye.collected_name),delete ye.collected_name,M.unshift(s()),ye.stage+2):pi}function Qn(){return N.unshift(ye.collected_name),delete ye.collected_name,M.unshift(t()),pi}function de(){return M.shift()}}function De(){if(F.type==="ident"||F.type==="builtin"){const ye=F.data;M.unshift(r()),M.scope.define(ye);return}if(F.type==="operator"){if(F.data===",")return M[1].flags&qM?N.shift():M.shift();if(F.data==="="){if(!(M[1].flags&zI))return ze("`=` is not allowed here.");N.shift(),M.unshift(Ne(",",";"));return}else if(F.data==="["){M.unshift(d());return}}return M.shift()}function xt(){if(F.type==="keyword"){M[0].type="keyword",M[0].mode=P4;return}if(F.type==="ident"){M[0].type="ident",M[0].mode=yA;return}return ze("expected keyword or user-defined name, got "+F.data)}function mt(){return F.type!=="keyword"?ze("expected keyword, got "+F.data):(M.shift(),N.shift())}function et(){return F.type!=="ident"&&F.type!=="builtin"?ze("expected user-defined name, got "+F.data):(M[0].data=F.data,M.shift(),N.shift())}function st(){const ye=M[0].expecting;if(M[0].tokens=M[0].tokens||[],M[0].parenlevel===void 0&&(M[0].parenlevel=0,M[0].bracelevel=0),M[0].parenlevel<1&&ye.indexOf(F.data)>-1)return Ee(M[0].tokens);switch(F.data==="("?++M[0].parenlevel:F.data===")"&&--M[0].parenlevel,F.data){case"{":++M[0].bracelevel;break;case"}":--M[0].bracelevel;break;case"(":++M[0].parenlevel;break;case")":--M[0].parenlevel;break}if(M[0].parenlevel<0)return ze("unexpected `)`");if(M[0].bracelevel<0)return ze("unexpected `}`");M[0].tokens.push(N.shift());return;function Ee(St){try{GJe(M,St)}catch(Rt){throw q=!0,Rt}return M.shift()}}function ce(ye){return function(){return ko(ye,F)}}function tt(){return ko(tZe[F.type],F)}function he(ye){const Ee=ko(IR,F);return Ee.flags=ye,Ee}function be(ye,Ee){const St=ko(MR,F);return St.allow_assign=ye===void 0?!0:ye,St.allow_comma=Ee===void 0?!0:Ee,St}function Ne(){const ye=ko(DR,F);return ye.expecting=[].slice.call(arguments),ye}function nt(ye){let Ee=F;return ye&&(Ee={type:"(implied)",data:"(default)",position:Ee.position}),ko(P4,Ee)}function ze(ye){throw q=!0,new Error((ye||"unexpected "+M)+" at line "+M[0].token.line)}function me(ye,Ee){return fe(ye,F.type)&&fe(Ee,F.data)}function fe(ye,Ee){switch(typeof ye){case"string":return Ee!==ye&&ze("expected `"+ye+"`, got "+Ee+`
`+F.data),!q;case"object":return ye&&ye.indexOf(Ee)===-1&&ze("expected one of `"+ye.join("`, `")+"`, got "+Ee),!q}return!0}function Be(){let ye=[].slice.call(arguments),Ee,St;return function(){const Rt=M[0];if(Rt.stage||(Rt.stage=0),Ee=ye[Rt.stage],!Ee)return ze("parser in undefined state!");if(St=Ee(),St===pi)return++Rt.stage;St!==void 0&&(Rt.stage=St)}}function V(ye,Ee){return Ee=Ee||"operator",function(){if(!me(Ee,ye))return;const St=N.shift(),Rt=M[0].children,Bt=Rt[Rt.length-1];return Bt&&Bt.token&&St.preceding&&(Bt.token.succeeding=Bt.token.succeeding||[],Bt.token.succeeding=Bt.token.succeeding.concat(St.preceding)),pi}}function $(ye){return function(){return M.unshift(Ne(ye)),pi}}function ee(ye){return ye?function(){const Ee=F.data;return me("ident")&&(M.unshift(r()),M.scope.define(Ee),pi)}:function(){if(!me("ident"))return;const Ee=Object.create(M.scope.find(F.data));return Ee.token=F,N.shift(),pi}}function Te(){return function(){const ye=i();return ye.expecting="}",M.unshift(ye),pi}}function te(ye){return function(){const Ee=M[0].stage;return F.data!=="{"?(M.unshift(e()),Ee+ye):(N.shift(),pi)}}function Qe(){return function(){return M.shift(),M.shift()}}function Vt(){f=Be(V("struct","keyword"),function(){return F.data==="{"?(M.fake(ko(yA,{data:"",position:F.position,type:"ident"})),pi):ee(!0)()},function(){return M.scope.enter(),pi},V("{"),function(){if(F.type==="preprocessor"){M.fake(tt()),N.shift();return}if(F.data==="}")return M.scope.exit(),N.shift(),M.shift();if(F.data===";"){N.shift();return}M.unshift(he(JJe))}),m=Be(function(){return N.shift(),pi},function(){return me("keyword",["lowp","mediump","highp"])&&(M.unshift(nt()),pi)},function(){return M.unshift(nt()),pi},function(){return M.shift()}),A=Be(V("["),$("]"),V("]"),function(){return M.shift()}),_=Be(V("for","keyword"),V("("),function(){let ye;if(F.type==="ident"){if((ye=M.scope.find(F.data))||(ye=M.create_node()),ye.parent.type==="struct")return M.unshift(he(vg)),pi}else if(F.type==="builtin"||F.type==="keyword")return M.unshift(he(vg)),pi;return $(";")()},V(";"),$(";"),V(";"),$(")"),V(")"),te(3),Te(),V("}"),Qe()),v=Be(V("if","keyword"),V("("),$(")"),V(")"),te(3),Te(),V("}"),function(){return F.data==="else"?(N.shift(),M.unshift(e()),pi):Qe()()},Qe()),w=Be(V("return","keyword"),function(){return F.data===";"||M.unshift(Ne(";")),pi},function(){N.shift(),Qe()()}),x=Be(V("while","keyword"),V("("),$(")"),V(")"),te(3),Te(),V("}"),Qe()),C=Be(V("do","keyword"),te(3),Te(),V("}"),V("while","keyword"),V("("),$(")"),V(")"),Qe()),S=Be(function(){for(let ye=1,Ee=M.length;ye<Ee;++ye)if(M[ye].mode===I4)return ze("function definition is not allowed within another function");return pi},function(){if(!me("ident"))return;const ye=F.data,Ee=M.scope.find(ye);return M.unshift(r()),M.scope.define(ye),M.scope.enter(Ee?Ee.scope:null),pi},V("("),function(){return M.unshift(a()),pi},V(")"),function(){return F.data===";"?(M.scope.exit(),M.shift(),M.shift()):pi},V("{"),Te(),V("}"),function(){return M.scope.exit(),pi},function(){return M.shift(),M.shift(),M.shift()}),I=Be(function(){if(F.data==="void")return M.fake(nt()),N.shift(),pi;if(F.data===")"){M.shift();return}return F.data==="struct"?(M.unshift(be(ZJe,eZe)),pi):(M.unshift(he(KJe)),pi)},function(){if(F.data===",")return N.shift(),0;if(F.data===")"){M.shift();return}ze("expected one of `,` or `)`, got "+F.data)})}}function ko(i,e){return{mode:i,token:e,children:[],type:nZe[i],id:(Math.random()*4294967295).toString(16)}}function rZe(i){return i.data==="const"||i.data==="attribute"||i.data==="uniform"||i.data==="varying"}function sZe(i){return i.data==="in"||i.data==="inout"||i.data==="out"}function aZe(i){return i.data==="highp"||i.data==="mediump"||i.data==="lowp"}var oZe=HJe,lZe=cZe;function cZe(i){for(var e=oZe(),t=0;t<i.length;t++)e(i[t]);return e(null)}const uZe=U0(lZe);function VI(i,e,t){return Math.max(e,Math.min(t,i))}class HI{constructor(e=0,t=0){HI.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(VI(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*n-a*r+e.x,this.y=s*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class hZe{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,a,o){let l=n[r+0],c=n[r+1],u=n[r+2],h=n[r+3];const d=s[a+0],f=s[a+1],m=s[a+2],A=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(o===1){e[t+0]=d,e[t+1]=f,e[t+2]=m,e[t+3]=A;return}if(h!==A||l!==d||c!==f||u!==m){let _=1-o;const v=l*d+c*f+u*m+h*A,w=v>=0?1:-1,x=1-v*v;if(x>Number.EPSILON){const S=Math.sqrt(x),I=Math.atan2(S,v*w);_=Math.sin(_*I)/S,o=Math.sin(o*I)/S}const C=o*w;if(l=l*_+d*C,c=c*_+f*C,u=u*_+m*C,h=h*_+A*C,_===1-o){const S=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=S,c*=S,u*=S,h*=S}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,r,s,a){const o=n[r],l=n[r+1],c=n[r+2],u=n[r+3],h=s[a],d=s[a+1],f=s[a+2],m=s[a+3];return e[t]=o*m+u*h+l*f-c*d,e[t+1]=l*m+u*d+c*h-o*f,e[t+2]=c*m+u*f+o*d-l*h,e[t+3]=u*m-o*h-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(n/2),u=o(r/2),h=o(s/2),d=l(n/2),f=l(r/2),m=l(s/2);switch(a){case"XYZ":this._x=d*u*h+c*f*m,this._y=c*f*h-d*u*m,this._z=c*u*m+d*f*h,this._w=c*u*h-d*f*m;break;case"YXZ":this._x=d*u*h+c*f*m,this._y=c*f*h-d*u*m,this._z=c*u*m-d*f*h,this._w=c*u*h+d*f*m;break;case"ZXY":this._x=d*u*h-c*f*m,this._y=c*f*h+d*u*m,this._z=c*u*m+d*f*h,this._w=c*u*h-d*f*m;break;case"ZYX":this._x=d*u*h-c*f*m,this._y=c*f*h+d*u*m,this._z=c*u*m-d*f*h,this._w=c*u*h+d*f*m;break;case"YZX":this._x=d*u*h+c*f*m,this._y=c*f*h+d*u*m,this._z=c*u*m-d*f*h,this._w=c*u*h-d*f*m;break;case"XZY":this._x=d*u*h-c*f*m,this._y=c*f*h-d*u*m,this._z=c*u*m+d*f*h,this._w=c*u*h+d*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=n+o+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(a-r)*f}else if(n>o&&n>h){const f=2*Math.sqrt(1+n-o-h);this._w=(u-l)/f,this._x=.25*f,this._y=(r+a)/f,this._z=(s+c)/f}else if(o>h){const f=2*Math.sqrt(1+o-n-h);this._w=(s-c)/f,this._x=(r+a)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+h-n-o);this._w=(a-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(VI(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=n*u+a*o+r*c-s*l,this._y=r*u+a*l+s*o-n*c,this._z=s*u+a*c+n*l-r*o,this._w=a*u-n*o-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+n*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const f=1-t;return this._w=f*a+t*this._w,this._x=f*n+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=a*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(s),n*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class yh{constructor(e=0,t=0,n=0){yh.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(UR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(UR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=l*t+a*r-o*n,u=l*n+o*t-s*r,h=l*r+s*n-a*t,d=-s*t-a*n-o*r;return this.x=c*l+d*-s+u*-o-h*-a,this.y=u*l+d*-a+h*-s-c*-o,this.z=h*l+d*-o+c*-a-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-n*l,this.z=n*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return k4.copy(this).projectOnVector(e),this.sub(k4)}reflect(e){return this.sub(k4.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(VI(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const k4=new yh,UR=new hZe;class GI{constructor(e=0,t=0,n=0,r=1){GI.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,c=l[0],u=l[4],h=l[8],d=l[1],f=l[5],m=l[9],A=l[2],_=l[6],v=l[10];if(Math.abs(u-d)<.01&&Math.abs(h-A)<.01&&Math.abs(m-_)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+A)<.1&&Math.abs(m+_)<.1&&Math.abs(c+f+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const x=(c+1)/2,C=(f+1)/2,S=(v+1)/2,I=(u+d)/4,P=(h+A)/4,k=(m+_)/4;return x>C&&x>S?x<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(x),r=I/n,s=P/n):C>S?C<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(C),n=I/r,s=k/r):S<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(S),n=P/s,r=k/s),this.set(n,r,s,t),this}let w=Math.sqrt((_-m)*(_-m)+(h-A)*(h-A)+(d-u)*(d-u));return Math.abs(w)<.001&&(w=1),this.x=(_-m)/w,this.y=(h-A)/w,this.z=(d-u)/w,this.w=Math.acos((c+f+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class EC{constructor(e,t,n,r,s,a,o,l,c){EC.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,a,o,l,c)}set(e,t,n,r,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=s,u[5]=l,u[6]=n,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,a=n[0],o=n[3],l=n[6],c=n[1],u=n[4],h=n[7],d=n[2],f=n[5],m=n[8],A=r[0],_=r[3],v=r[6],w=r[1],x=r[4],C=r[7],S=r[2],I=r[5],P=r[8];return s[0]=a*A+o*w+l*S,s[3]=a*_+o*x+l*I,s[6]=a*v+o*C+l*P,s[1]=c*A+u*w+h*S,s[4]=c*_+u*x+h*I,s[7]=c*v+u*C+h*P,s[2]=d*A+f*w+m*S,s[5]=d*_+f*x+m*I,s[8]=d*v+f*C+m*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*a*u-t*o*c-n*s*u+n*o*l+r*s*c-r*a*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=u*a-o*c,d=o*l-u*s,f=c*s-a*l,m=t*h+n*d+r*f;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/m;return e[0]=h*A,e[1]=(r*c-u*n)*A,e[2]=(o*n-r*a)*A,e[3]=d*A,e[4]=(u*t-r*l)*A,e[5]=(r*s-o*t)*A,e[6]=f*A,e[7]=(n*l-c*t)*A,e[8]=(a*t-n*s)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*a+c*o)+a+e,-r*c,r*l,-r*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(B4.makeScale(e,t)),this}rotate(e){return this.premultiply(B4.makeRotation(-e)),this}translate(e,t){return this.premultiply(B4.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const B4=new EC,ew=2e3,VR=2001;class N1{constructor(e,t,n,r,s,a,o,l,c,u,h,d,f,m,A,_){N1.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,a,o,l,c,u,h,d,f,m,A,_)}set(e,t,n,r,s,a,o,l,c,u,h,d,f,m,A,_){const v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=s,v[5]=a,v[9]=o,v[13]=l,v[2]=c,v[6]=u,v[10]=h,v[14]=d,v[3]=f,v[7]=m,v[11]=A,v[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new N1().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/jm.setFromMatrixColumn(e,0).length(),s=1/jm.setFromMatrixColumn(e,1).length(),a=1/jm.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,a=Math.cos(n),o=Math.sin(n),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const d=a*u,f=a*h,m=o*u,A=o*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=f+m*c,t[5]=d-A*c,t[9]=-o*l,t[2]=A-d*c,t[6]=m+f*c,t[10]=a*l}else if(e.order==="YXZ"){const d=l*u,f=l*h,m=c*u,A=c*h;t[0]=d+A*o,t[4]=m*o-f,t[8]=a*c,t[1]=a*h,t[5]=a*u,t[9]=-o,t[2]=f*o-m,t[6]=A+d*o,t[10]=a*l}else if(e.order==="ZXY"){const d=l*u,f=l*h,m=c*u,A=c*h;t[0]=d-A*o,t[4]=-a*h,t[8]=m+f*o,t[1]=f+m*o,t[5]=a*u,t[9]=A-d*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const d=a*u,f=a*h,m=o*u,A=o*h;t[0]=l*u,t[4]=m*c-f,t[8]=d*c+A,t[1]=l*h,t[5]=A*c+d,t[9]=f*c-m,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const d=a*l,f=a*c,m=o*l,A=o*c;t[0]=l*u,t[4]=A-d*h,t[8]=m*h+f,t[1]=h,t[5]=a*u,t[9]=-o*u,t[2]=-c*u,t[6]=f*h+m,t[10]=d-A*h}else if(e.order==="XZY"){const d=a*l,f=a*c,m=o*l,A=o*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+A,t[5]=a*u,t[9]=f*h-m,t[2]=m*h-f,t[6]=o*u,t[10]=A*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(dZe,e,fZe)}lookAt(e,t,n){const r=this.elements;return zl.subVectors(e,t),zl.lengthSq()===0&&(zl.z=1),zl.normalize(),of.crossVectors(n,zl),of.lengthSq()===0&&(Math.abs(n.z)===1?zl.x+=1e-4:zl.z+=1e-4,zl.normalize(),of.crossVectors(n,zl)),of.normalize(),tw.crossVectors(zl,of),r[0]=of.x,r[4]=tw.x,r[8]=zl.x,r[1]=of.y,r[5]=tw.y,r[9]=zl.y,r[2]=of.z,r[6]=tw.z,r[10]=zl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,a=n[0],o=n[4],l=n[8],c=n[12],u=n[1],h=n[5],d=n[9],f=n[13],m=n[2],A=n[6],_=n[10],v=n[14],w=n[3],x=n[7],C=n[11],S=n[15],I=r[0],P=r[4],k=r[8],M=r[12],R=r[1],N=r[5],U=r[9],q=r[13],W=r[2],F=r[6],ue=r[10],J=r[14],Y=r[3],Pe=r[7],Ie=r[11],pe=r[15];return s[0]=a*I+o*R+l*W+c*Y,s[4]=a*P+o*N+l*F+c*Pe,s[8]=a*k+o*U+l*ue+c*Ie,s[12]=a*M+o*q+l*J+c*pe,s[1]=u*I+h*R+d*W+f*Y,s[5]=u*P+h*N+d*F+f*Pe,s[9]=u*k+h*U+d*ue+f*Ie,s[13]=u*M+h*q+d*J+f*pe,s[2]=m*I+A*R+_*W+v*Y,s[6]=m*P+A*N+_*F+v*Pe,s[10]=m*k+A*U+_*ue+v*Ie,s[14]=m*M+A*q+_*J+v*pe,s[3]=w*I+x*R+C*W+S*Y,s[7]=w*P+x*N+C*F+S*Pe,s[11]=w*k+x*U+C*ue+S*Ie,s[15]=w*M+x*q+C*J+S*pe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],f=e[14],m=e[3],A=e[7],_=e[11],v=e[15];return m*(+s*l*h-r*c*h-s*o*d+n*c*d+r*o*f-n*l*f)+A*(+t*l*f-t*c*d+s*a*d-r*a*f+r*c*u-s*l*u)+_*(+t*c*h-t*o*f-s*a*h+n*a*f+s*o*u-n*c*u)+v*(-r*o*u-t*l*h+t*o*d+r*a*h-n*a*d+n*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],m=e[12],A=e[13],_=e[14],v=e[15],w=h*_*c-A*d*c+A*l*f-o*_*f-h*l*v+o*d*v,x=m*d*c-u*_*c-m*l*f+a*_*f+u*l*v-a*d*v,C=u*A*c-m*h*c+m*o*f-a*A*f-u*o*v+a*h*v,S=m*h*l-u*A*l-m*o*d+a*A*d+u*o*_-a*h*_,I=t*w+n*x+r*C+s*S;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/I;return e[0]=w*P,e[1]=(A*d*s-h*_*s-A*r*f+n*_*f+h*r*v-n*d*v)*P,e[2]=(o*_*s-A*l*s+A*r*c-n*_*c-o*r*v+n*l*v)*P,e[3]=(h*l*s-o*d*s-h*r*c+n*d*c+o*r*f-n*l*f)*P,e[4]=x*P,e[5]=(u*_*s-m*d*s+m*r*f-t*_*f-u*r*v+t*d*v)*P,e[6]=(m*l*s-a*_*s-m*r*c+t*_*c+a*r*v-t*l*v)*P,e[7]=(a*d*s-u*l*s+u*r*c-t*d*c-a*r*f+t*l*f)*P,e[8]=C*P,e[9]=(m*h*s-u*A*s-m*n*f+t*A*f+u*n*v-t*h*v)*P,e[10]=(a*A*s-m*o*s+m*n*c-t*A*c-a*n*v+t*o*v)*P,e[11]=(u*o*s-a*h*s-u*n*c+t*h*c+a*n*f-t*o*f)*P,e[12]=S*P,e[13]=(u*A*r-m*h*r+m*n*d-t*A*d-u*n*_+t*h*_)*P,e[14]=(m*o*r-a*A*r-m*n*l+t*A*l+a*n*_-t*o*_)*P,e[15]=(a*h*r-u*o*r+u*n*l-t*h*l-a*n*d+t*o*d)*P,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+n,c*o-r*l,c*l+r*o,0,c*o+r*l,u*o+n,u*l-r*a,0,c*l-r*o,u*l+r*a,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,a){return this.set(1,n,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,u=a+a,h=o+o,d=s*c,f=s*u,m=s*h,A=a*u,_=a*h,v=o*h,w=l*c,x=l*u,C=l*h,S=n.x,I=n.y,P=n.z;return r[0]=(1-(A+v))*S,r[1]=(f+C)*S,r[2]=(m-x)*S,r[3]=0,r[4]=(f-C)*I,r[5]=(1-(d+v))*I,r[6]=(_+w)*I,r[7]=0,r[8]=(m+x)*P,r[9]=(_-w)*P,r[10]=(1-(d+A))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=jm.set(r[0],r[1],r[2]).length();const a=jm.set(r[4],r[5],r[6]).length(),o=jm.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],su.copy(this);const c=1/s,u=1/a,h=1/o;return su.elements[0]*=c,su.elements[1]*=c,su.elements[2]*=c,su.elements[4]*=u,su.elements[5]*=u,su.elements[6]*=u,su.elements[8]*=h,su.elements[9]*=h,su.elements[10]*=h,t.setFromRotationMatrix(su),n.x=s,n.y=a,n.z=o,this}makePerspective(e,t,n,r,s,a,o=ew){const l=this.elements,c=2*s/(t-e),u=2*s/(n-r),h=(t+e)/(t-e),d=(n+r)/(n-r);let f,m;if(o===ew)f=-(a+s)/(a-s),m=-2*a*s/(a-s);else if(o===VR)f=-a/(a-s),m=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,s,a,o=ew){const l=this.elements,c=1/(t-e),u=1/(n-r),h=1/(a-s),d=(t+e)*c,f=(n+r)*u;let m,A;if(o===ew)m=(a+s)*h,A=-2*h;else if(o===VR)m=s*h,A=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=A,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const jm=new yh,su=new N1,dZe=new yh(0,0,0),fZe=new yh(1,1,1),of=new yh,tw=new yh,zl=new yh,Ar={};Ar.in=0;Ar.out=1;Ar.inout=2;const eh=i=>i.token.data;Ar.node=function(i){if((i.children[5]!=null?i.children[5].type:void 0)==="function")return Ar.function(i);if((i.token!=null?i.token.type:void 0)==="keyword")return Ar.external(i)};Ar.external=function(i){let e=i.children,t=eh(e[1]);const n=eh(e[4]),r=e[5];["attribute","uniform","varying"].includes(t)||(t="global");const s=[];for(let a=0;a<r.children.length;a++)if(e=r.children[a],e.type==="ident"){const o=eh(e),l=r.children[a+1],c=(l!=null?l.type:void 0)==="quantifier";s.push({decl:"external",storage:t,type:n,ident:o,quant:!!c,count:c})}return s};Ar.function=function(i){const e=i.children,t=eh(e[1]),n=eh(e[4]),r=e[5],s=eh(r.children[0]),a=r.children[1],o=r.children[2],l=Array.from(a.children).map(c=>Ar.argument(c));return[{decl:"function",storage:t,type:n,ident:s,body:!!o,args:l}]};Ar.argument=function(i){const e=i.children,t=eh(e[1]),n=eh(e[2]),r=eh(e[4]),s=e[5],a=eh(s.children[0]),o=s.children[1],l=o?o.children[0].token.data:void 0;return{decl:"argument",storage:t,inout:n,type:r,ident:a,quant:!!o,count:l}};Ar.param=function(i,e,t,n,r){let s=[];e!=null&&s.push(e),t!=null&&s.push(t),s.push(""),s=s.join(" ");const a=n?"["+r+"]":"";i!==""&&(i+=" ");const o=(l,c)=>(c?i:"")+`${s}${l}${a}`;return o.split=l=>Ar.param(l,e,t,n,r),o};const pZe=typeof window<"u",wA=pZe&&!!window.THREE,mZe={int:0,float:0,vec2:wA?HI:null,vec3:wA?yh:null,vec4:wA?GI:null,mat2:null,mat3:wA?EC:null,mat4:wA?N1:null,sampler2D:0,samplerCube:0},gZe={int:"i",float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat2:"m2",mat3:"m3",mat4:"m4",sampler2D:"t",samplerCube:"t"};Ar.type=function(i,e,t,n,r,s){const a={in:Ar.in,out:Ar.out,inout:Ar.inout},o={const:"const"};let l=gZe[e];t&&(l+="v");let c=mZe[e];c!=null&&c.call&&(c=new c),t&&(c=[c]);const u=a[r]!=null?a[r]:a.in;s=o[s];const h=Ar.param(r,s,e,t,n);return new Dx(i,l,e,h,c,u)};class Dx{constructor(e,t,n,r,s,a,o){this.name=e,this.type=t,this.spec=n,this.param=r,this.value=s,this.inout=a,this.meta=o}split(){const e=this.meta.shadowed!=null,t=e?"in":"out",n=e?Ar.in:Ar.out,r=this.param.split(t);return new Dx(this.name,this.type,this.spec,r,this.value,n)}copy(e,t){return new Dx(e??this.name,this.type,this.spec,this.param,this.value,this.inout,t)}}const QI="_i_o",O0="return";let Hg=!1;const vZe=function(i,e){const t=AZe(i,e);return _Ze(t,e)},AZe=function(i,e){let t,n,r=[];Hg&&(n=jU());try{const a=NJe(e);t=uZe(a)}catch(a){r=[{message:a}]}Hg&&n("GLSL Tokenize & Parse");const s=function(a){a=a.split(`
`);const o=(""+a.length).length,l=function(c){return(c=""+c).length<o?("       "+c).slice(-o):c};return a.map((c,u)=>`${l(u+1)}: ${c}`).join(`
`)};if(!t||r.length){i||(i="(inline code)"),console.warn(s(e));for(const a of r)console.error(`${i} -`,a.message);throw new Error("GLSL parse error")}return t},_Ze=function(i,e){let t;Hg&&(t=jU());const n=[];qI(bZe,yZe(n),i,"");const[r,s,a]=Array.from(wZe(n)),o=xZe(r,s,a);return Hg&&t("GLSL AST"),{ast:i,code:e,signatures:o}},bZe=function(i,e){switch(i.type){case"decl":return e(Ar.node(i)),!1}return!0},yZe=i=>function(e){e!=null&&Array.from(e).map(t=>i.push(t))},wZe=function(i){let e=null;const t=[];let n=[];const r={};let s=!1;for(const a of Array.from(i))a.body?(r[a.ident]&&(n=Array.from(n).filter(o=>o.ident!==a.ident),delete r[a.ident]),t.push(a),a.ident==="main"?(e=a,s=!0):s||(e=a)):a.storage==="global"?t.push(a):(n.push(a),r[a.ident]=!0);return[e,t,n]},xZe=function(i,e,t){let n;const r={uniform:[],attribute:[],varying:[],external:[],internal:[],global:[],main:null},s=o=>Ar.type(o.ident,o.type,o.quant,o.count,o.inout,o.storage),a=function(o,l){let c;const u=Array.from(o.args).map(m=>s(m));for(c of Array.from(u))if(c.inout===Ar.inout){const m=c,A=c.copy();m.inout=Ar.in,A.inout=Ar.out,A.meta={shadow:m.name},A.name+=QI,m.meta={shadowed:A.name},u.push(A)}o.type!=="void"&&u.unshift(Ar.type(O0,o.type,!1,"","out"));const h=(()=>{const m=[];for(c of Array.from(u))c.inout===Ar.in&&m.push(c.type);return m})().join(","),d=(()=>{const m=[];for(c of Array.from(u))c.inout===Ar.out&&m.push(c.type);return m})().join(","),f=`(${h})(${d})`;return{name:o.ident,type:f,signature:u,inout:l,spec:o.type}};r.main=a(i,Ar.out);for(n of Array.from(e))r.internal.push({name:n.ident});for(n of Array.from(t)){let o;switch(n.decl){case"external":o=s(n),r[n.storage].push(o);break;case"function":o=a(n,Ar.in),r.external.push(o);break}}return r};Hg=!1;const qI=function(i,e,t,n){if(Hg&&console.log(n,t.type,t.token!=null?t.token.data:void 0,t.token!=null?t.token.type:void 0),i(t,e))for(let s=0;s<t.children.length;s++){const a=t.children[s];qI(i,e,a,n+"  ")}return null},jU=function(){const i=+new Date;return function(e){const t=+new Date-i;return console.log(e,t+" ms"),t}};function CZe(i){const e=i.replace(QI,"");return e!==i?e:null}function WU(i){return i.join(`
`)}function jI(i){return i.join(", ")}function Lx(i){return i.join(`;
`)}function jM(i){return{entry:i,type:"void",params:[],signature:[],return:"",vars:{},calls:[],post:[],chain:{}}}function WI(i,e){return`#define ${i} ${e}`}function $U(i,e,t,n,r){return`${i} ${e}(${t}) {
${n}${r}}`}function XU(i,e,t){return i=i?`${i} = `:"",t=jI(t),`  ${i}${e}(${t})`}function $I(i,e){for(let t=0;t<i.length;t++){const n=i[t],r=e[t];if(!r||n.type!==r.type||n.name===O0!=(r.name===O0))return!1}return!0}function WM(i,e,t,n,r){const s=[];let a="";for(let o of Array.from(n)){let l,c;const{name:u}=o;let h=l=i(u),d=null,f=null,m=!1;const A=u===O0;if((c=o.meta!=null?o.meta.shadowed:void 0)&&(d=i(c),d&&(r.vars[d]="  "+o.param(d),r.calls.push(`  ${d} = ${l}`),e(c)?f={shadowed:d}:o=o.split())),(c=o.meta!=null?o.meta.shadow:void 0)&&(d=i(c),d))if(!e(c))o=o.split(),m=!0;else{f={shadow:d};continue}if(A?a=l:m||s.push(d??l),e(u)){let _="push";A?r.return===""?(_="unshift",h=u,r.type=o.spec,r.return=`  return ${l}`,r.vars[l]="  "+o.param(l)):(r.vars[l]="  "+o.param(l),r.params.push(o.param(l,!0))):r.params.push(o.param(l,!0)),o=o.copy(h,f),r.signature[_](o)}else r.vars[l]="  "+o.param(l)}return r.calls.push(XU(a,t,s))}function $M(i,e){const{entry:t}=i;let n=null;if(e&&e.length===1&&t!=="main"){const r=e[0].module;$I(i.signature,r.main.signature)&&(n=WI(t,r.entry))}if(n==null){let r=(()=>{const c=[];for(const u in i.vars){const h=i.vars[u];c.push(h)}return c})();({calls:e}=i);const{post:s}=i;let{params:a}=i;const{type:o}=i,l=i.return;e=e.concat(s),l!==""&&e.push(l),e.push(""),r.length?(r.push(""),r=Lx(r)+`
`):r="",e=Lx(e),a=jI(a),n=$U(o,t,a,r,e)}return{signature:i.signature,code:n,name:t}}function EZe(i){const e={defs:[],bodies:[]};for(const t of Array.from(i))YU(t,e);return e.defs=WU(e.defs),e.bodies=Lx(e.bodies),e.defs===""&&delete e.defs,e.bodies===""&&delete e.bodies,e}const YU=(i,e)=>{let t,n;const{module:r,name:s,external:a}=i,{main:o}=r,{entry:l}=r;if($I(o.signature,a.signature))return e.defs.push(WI(s,l));const c=[],u=[];let h={};const d=[r.namespace,O0].join("");for(t of Array.from(a.signature))n=t.inout===D1?c:u,n.push(t);for(t of Array.from(o.signature)){n=t.inout===D1?c:u;let w=n.shift().name;w===O0&&(w=d),h[t.name]=w}let f=v=>h[v];const m=()=>!0,A=jM();WM(f,m,l,o.signature,A),A.entry=l,h={return:d},f=v=>h[v]!=null?h[v]:v;const _=jM();return WM(f,m,l,a.signature,_),_.calls=A.calls,_.entry=s,e.bodies.push($M(A).code.split(" {")[0]),e.bodies.push($M(_).code)};function SZe(i){const e=/([A-Za-z0-9_]+\s+)?[A-Za-z0-9_]+\s+[A-Za-z0-9_]+\s*\([^)]*\)\s*;\s*/gm,t=s=>s.replace(e,a=>""),n=i.split(/(?=[{}])/g);let r=0;for(let s=0;s<n.length;s++){const a=n[s];switch(a[0]){case"{":r++;break;case"}":r--;break}if(r===0){const o=a.split(/^[ \t]*#/m);for(let l=0;l<o.length;l++){let c=o[l];if(l>0){c=c.split(/\n/);const u=c.shift(),h=c.join(`
`);o[l]=[u,t(h)].join(`
`)}else o[l]=t(c)}n[s]=o.join("#")}}return i=n.join("")}function MZe(i){const e={},t=/((attribute|uniform|varying)\s+)[A-Za-z0-9_]+\s+([A-Za-z0-9_]+)\s*(\[[^\]]*\]\s*)?;\s*/gm;return i.replace(t,function(n,r,s,a,o){return e[a]?"":(e[a]=!0,n)})}function TZe(i){const e=function(n,r){const s=[],a=[];for(const o of Array.from(n))(o.match(r)?s:a).push(o);return s.concat(a)};let t=i.split(`
`);return t=e(t,/^#define ([^ ]+ _pg_[0-9]+_|_pg_[0-9]+_ [^ ]+)$/),t=e(t,/^#extension/),t.join(`
`)}const XM=Object.freeze(Object.defineProperty({__proto__:null,RETURN_ARG:O0,SHADOW_ARG:QI,body:jM,build:$M,call:WM,compile:gJe,dedupe:MZe,define:WI,defuse:SZe,fn:$U,hoist:TZe,invoke:XU,lines:WU,link:YU,links:EZe,list:jI,parse:vZe,same:$I,statements:Lx,unshadow:CZe,walk:qI},Symbol.toStringTag,{value:"Module"})),{library:IZe,cache:PZe}=zU,{visualize:kZe,inspect:KU}=LU,{Snippet:BZe}=kU,HR=function(i,e={}){const t={};for(let n in i)t[n]=e[n]||i[n];return t};class mh{constructor(e,t){const n={globalUniforms:!1,globalVaryings:!0,globalAttributes:!0,globals:[],autoInspect:!1};this.config=HR(n,t),this.fetch=PZe(IZe(XM,e,BZe.load))}shader(e){e==null&&(e={});const t=HR(this.config,e);return new OU(XM,this.fetch,t)}material(e){return new NU(this.shader(e),this.shader(e))}inspect(e){return mh.inspect(e)}visualize(e){return mh.visualize(e)}static inspect(e){return KU(e)}static visualize(e){return kZe(e)}}mh.Block=Zu;mh.Factory=zU;mh.GLSL=XM;mh.Graph=YKe;mh.Linker=kU;mh.Visualize=LU;function RZe(i,e={}){return new mh(i,e)}const JU=function(i){function e(t){const n=i[t];if(n!=null)return n;const s=["#",".",":","["].includes(t[0])?t:`#${t}`,a=document.querySelector(s);if(a!=null&&a.tagName==="SCRIPT")return a.textContent||a.innerText;throw new Error(`Unknown shader \`${t}\``)}return RZe(e,{autoInspect:!0})},ZU={"arrow.position":jXe,"axis.position":WXe,"cartesian.position":XXe,"cartesian4.position":$Xe,"clamp.position":YXe,"color.opaque":KXe,"face.position":JXe,"face.position.normal":ZXe,"float.encode":eYe,"float.index.pack":tYe,"float.stretch":nYe,"fragment.clip.dashed":iYe,"fragment.clip.dotted":rYe,"fragment.clip.ends":sYe,"fragment.clip.proximity":aYe,"fragment.color":oYe,"fragment.map.rgba":lYe,"fragment.solid":cYe,"fragment.transparent":uYe,"grid.position":hYe,"grow.position":dYe,"join.position":fYe,"label.alpha":pYe,"label.map":mYe,"label.outline":gYe,"layer.position":vYe,"lerp.depth":AYe,"lerp.height":_Ye,"lerp.items":bYe,"lerp.width":yYe,"line.position":wYe,"map.2d.data":xYe,"map.2d.data.wrap":CYe,"map.xyzw.2dv":EYe,"map.xyzw.align":SYe,"map.xyzw.texture":MYe,"mesh.fragment.color":TYe,"mesh.fragment.map":IYe,"mesh.fragment.mask":PYe,"mesh.fragment.material":kYe,"mesh.fragment.shaded":BYe,"mesh.fragment.texture":RYe,"mesh.gamma.in":DYe,"mesh.gamma.out":LYe,"mesh.map.uvwo":OYe,"mesh.position":NYe,"mesh.vertex.color":FYe,"mesh.vertex.mask":zYe,"mesh.vertex.position":UYe,"move.position":VYe,"object.mask.default":HYe,"point.alpha.circle":GYe,"point.alpha.circle.hollow":QYe,"point.alpha.generic":qYe,"point.alpha.generic.hollow":jYe,"point.edge":WYe,"point.fill":$Ye,"point.mask.circle":XYe,"point.mask.diamond":YYe,"point.mask.down":KYe,"point.mask.left":JYe,"point.mask.right":ZYe,"point.mask.square":eKe,"point.mask.up":tKe,"point.position":nKe,"point.size.uniform":iKe,"point.size.varying":rKe,"polar.position":sKe,"project.position":aKe,"project.readback":oKe,"raw.position.scale":lKe,"repeat.position":cKe,"resample.padding":uKe,"resample.relative":hKe,"reveal.mask":dKe,"reverse.position":fKe,"root.position":pKe,"sample.2d":mKe,"scale.position":gKe,"screen.map.stpq":vKe,"screen.map.xy":AKe,"screen.map.xyzw":_Ke,"screen.pass.uv":bKe,"screen.position":yKe,"slice.position":wKe,"spherical.position":xKe,"split.position":CKe,"spread.position":EKe,"sprite.fragment":SKe,"sprite.position":MKe,"stereographic.position":IKe,"stereographic4.position":TKe,"stpq.sample.2d":PKe,"stpq.xyzw.2d":kKe,"strip.position.normal":BKe,"style.color":RKe,"subdivide.depth":DKe,"subdivide.depth.lerp":LKe,"subdivide.height":OKe,"subdivide.height.lerp":NKe,"subdivide.items":FKe,"subdivide.items.lerp":zKe,"subdivide.width":UKe,"subdivide.width.lerp":VKe,"surface.mask.hollow":HKe,"surface.position":GKe,"surface.position.normal":QKe,"surface.position.shaded":qKe,"ticks.position":jKe,"transform3.position":WKe,"transform4.position":$Ke,"view.position":XKe},DZe=Object.freeze(Object.defineProperty({__proto__:null,Factory:JU,Snippets:ZU},Symbol.toStringTag,{value:"Module"}));class eV{constructor(e){this.context=e,this.anims=[]}make(e,t){const n=new LZe(this,this.context.time,e,t);return this.anims.push(n),n}unmake(e){return this.anims=Array.from(this.anims).filter(t=>t!==e)}update(){const{time:e}=this.context;return this.anims=(()=>{const t=[];for(const n of Array.from(this.anims))n.update(e)!==!1&&t.push(n);return t})()}lerp(e,t,n,r,s){if(s==null&&(s=e.make()),e.lerp)s=e.lerp(t,n,s,r);else if(e.emitter){const a=t.emitterFrom,o=n.emitterTo;if(a!=null&&o!=null&&a===o)return a.lerp(r),a;{const l=e.emitter(t,n);return t.emitterFrom=l,n.emitterTo=l,l.lerp(r),l}}else if(e.op){const a=function(o,l){return o===+o&&l===+l?o+(l-o)*r:r>.5?l:o};s=e.op(t,n,s,a)}else s=r>.5?n:t;return s}}let LZe=class{constructor(e,t,n,r){this.animator=e,this.time=t,this.type=n,this.options=r,this.value=this.type.make(),this.target=this.type.make(),this.queue=[]}dispose(){return this.animator.unmake(this)}set(){let{target:e}=this,t=arguments.length>1?[].slice.call(arguments):arguments[0],n=!1;return t=this.type.validate(t,e,()=>n=!0),n||(e=t),this.cancel(),this.target=this.value,this.value=e,this.notify()}getTime(){const{clock:e}=this.options,t=e?e.getTime():this.time;return this.options.realtime?t.time:t.clock}cancel(e){let t;e==null&&(e=this.getTime());const{queue:n}=this,r=(()=>{const s=[];for(t of Array.from(n))t.end>=e&&s.push(t);return s})();this.queue=(()=>{const s=[];for(t of Array.from(n))t.end<e&&s.push(t);return s})();for(t of Array.from(r))typeof t.complete=="function"&&t.complete(!1);typeof this.options.complete=="function"&&this.options.complete(!1)}notify(){return typeof this.options.step=="function"?this.options.step(this.value):void 0}immediate(e,t){const{duration:n,delay:r,ease:s,step:a,complete:o}=t,c=this.getTime()+r,u=c+n;let h=!1,d=this.type.make();return e=this.type.validate(e,d,function(){return h=!0,null}),e!==void 0&&!h&&(d=e),this.cancel(c),this.queue.push({from:null,to:d,start:c,end:u,ease:s,step:a,complete:o})}update(e){if(this.time=e,this.queue.length===0)return!0;const t=this.getTime();let{value:n}=this;const{queue:r}=this;let s=!1;for(;!s;){const a=r[0];let{from:o}=a;const{to:l,start:c,end:u,step:h,complete:d,ease:f}=a;o==null&&(o=a.from=this.type.clone(this.value));let m=_C((t-c)/Math.max(1e-5,u-c)||0,0,1);if(m===0)return;const A=(()=>{switch(f){case"linear":case 0:return null;case"cosine":case 1:return R1;case"binary":case 2:return PI;case"hold":case 3:return kI;default:return R1}})();if(A!=null&&(m=A(m)),s=m<1,n=s?this.animator.lerp(this.type,o,l,m,n):l,typeof h=="function"&&h(n),!s&&(typeof d=="function"&&d(!0),typeof this.options.complete=="function"&&this.options.complete(!0),r.shift(),r.length===0))break}return this.value=n,this.notify()}};class SC{v2(){return this}constructor(e,t,n){this._context=e,this._up=t,this._targets=n;const r=this._context.controller.getRoot();this._targets==null&&(this._targets=[r]),this.isRoot=this._targets.length===1&&this._targets[0]===r,this.isLeaf=this._targets.length===1&&this._targets[0].children==null;for(let s=0;s<this._targets.length;s++){const a=this._targets[s];this[s]=a}this.length=this._targets.length;for(const s of Array.from(this._context.controller.getTypes()))["root"].includes(s)||(this[s]=(a,o)=>this.add(s,a,o))}select(e){const t=this._context.model.select(e,this.isRoot?null:this._targets);return this._push(t)}eq(e){return this._targets.length>e?this._push([this._targets[e]]):this._push([])}filter(e){if(typeof e=="string"){const t=this._context.model._matcher(e);e=n=>t(n)}return this._push(this._targets.filter(e))}map(e){return OZe(0,this.length,!1).map(t=>e(this[t],t,this))}each(e){for(let t=0,n=this.length,r=0<=n;r?t<n:t>n;r?t++:t--)e(this[t],t,this);return this}add(e,t,n){const{controller:r}=this._context;if(this.isLeaf)return this._pop().add(e,t,n);const s=[];for(const a of this._targets){const o=r.make(e,t,n);r.add(o,a),s.push(o)}return this._push(s)}remove(e){if(e)return this.select(e).remove();for(const t of Array.from(this._targets.slice().reverse()))this._context.controller.remove(t);return this._pop()}set(e,t){for(const n of Array.from(this._targets))this._context.controller.set(n,e,t);return this}getAll(e){return Array.from(this._targets).map(t=>this._context.controller.get(t,e))}get(e){return this._targets[0]!=null?this._targets[0].get(e):void 0}evaluate(e,t){return this._targets[0]!=null?this._targets[0].evaluate(e,t):void 0}bind(e,t){for(const n of Array.from(this._targets))this._context.controller.bind(n,e,t);return this}unbind(e){for(const t of Array.from(this._targets))this._context.controller.unbind(t,e);return this}end(){return(this.isLeaf?this._pop():this)._pop()}_push(e){return new SC(this._context,this,e)}_pop(){return this._up!=null?this._up:this}_reset(){let e;return(e=this._up!=null?this._up.reset():void 0)!=null?e:this}map(e){return this._targets.map(e)}on(){const e=arguments;return this._targets.map(t=>t.on.apply(t,e)),this}off(){const e=arguments;return this._targets.map(t=>t.off.apply(t,e)),this}toString(){const e=this._targets.map(t=>t.toString());return this._targets.length>1?`[${e.join(", ")}]`:e[0]}toMarkup(){return this._targets.map(t=>t.toMarkup()).join(`

`)}print(){return Y5(this._targets.map(e=>e.toMarkup()).join(`

`)),this}debug(){const e=this.inspect();console.log("Renderables: ",e.renderables),console.log("Renders: ",e.renders),console.log("Shaders: ",e.shaders);const t=r=>r.constructor.name,n=[];for(const r of Array.from(e.shaders)){const s=t(r.owner);n.push(`${s} - Vertex`),n.push(r.vertex),n.push(`${s} - Fragment`),n.push(r.fragment)}return KU(n)}inspect(e,t,n){let r;typeof t=="boolean"&&(n=t,t=null),n==null&&(n=!0);const s=u=>(u.controller!=null?u.controller.objects:void 0)!=null?u.controller!=null?u.controller.objects:void 0:[],a=r=function(u,h){if(h==null&&(h=[]),(!t||u.traits.hash[t])&&h.push(s(u)),u.children!=null)for(const d of Array.from(u.children))r(d,h);return h},o=function(u){return u=u.reduce((h,d)=>h.concat(d),[]),u=u.filter((h,d)=>h!=null&&u.indexOf(h)===d)},l=function(u,h){const d={};return d.owner=u,d.geometry=h.geometry,d.material=h.material,d.vertex=h.userData.vertexGraph,d.fragment=h.userData.fragmentGraph,d},c={nodes:this._targets.slice(),renderables:[],renders:[],shaders:[]};for(const u of Array.from(this._targets)){let h;n&&u.print(e,"info");const d={renderables:h=o(a(u)),renders:o(h.map(f=>f.renders)),shaders:o(h.map(f=>f.renders!=null?f.renders.map(m=>l(f,m)):void 0))};for(const f in d)c[f]=c[f].concat(d[f])}return c}}function OZe(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let a=i;r?a<s:a>s;r?a++:a--)n.push(a);return n}class tV{constructor(e,t){this.model=e,this.primitives=t}getRoot(){return this.model.getRoot()}getTypes(){return this.primitives.getTypes()}make(e,t,n){return this.primitives.make(e,t,n)}get(e,t){return e.get(t)}set(e,t,n){try{return e.set(t,n)}catch(r){return e.print(null,"warn"),console.error(r)}}bind(e,t,n){try{return e.bind(t,n)}catch(r){return e.print(null,"warn"),console.error(r)}}unbind(e,t){try{return e.unbind(t)}catch(n){return e.print(null,"warn"),console.error(n)}}add(e,t){return t==null&&(t=this.model.getRoot()),t.add(e)}remove(e){const t=e.parent;if(t)return t.remove(e)}}const NZe=Object.freeze(Object.defineProperty({__proto__:null,API:SC,Animator:eV,Controller:tV},Symbol.toStringTag,{value:"Module"})),FZe=K$e,zZe=pze,UZe=nXe,VZe=gze,HZe=Z$e,GZe=Nse,QZe=fze,qZe=pXe,nV=uze,jZe=Object.freeze(Object.defineProperty({__proto__:null,Axis:FZe,Data:zZe,Ease:UZe,GLSL:VZe,JS:HZe,Pretty:GZe,Three:QZe,Ticks:qZe,VDOM:nV},Symbol.toStringTag,{value:"Module"}));let XI=class{static initClass(){this.Namespace={Model:rze,Overlay:hze,Primitives:AXe,Render:qXe,Shaders:DZe,Stage:NZe,Util:jZe,DOM:nV},this.Version="2.3.1"}constructor(e,t=null,n=null){let r;this.canvas=r=e.domElement,this.element=null,this.shaders=JU(ZU),this.renderables=new bU(MU,e,this.shaders),this.overlays=new AF(CF,r),this.scene=this.renderables.make("scene",{scene:t}),this.camera=this.defaultCamera=n??new _r,this.attributes=new gN(NM,this),this.primitives=new AU(NM,this),this.root=this.primitives.make("root"),this.model=new vF(this.root),this.guard=new yN,this.controller=new tV(this.model,this.primitives),this.animator=new eV(this),this.api=new SC(this),this.speed=1,this.time={now:+new Date/1e3,time:0,delta:0,clock:0,step:0}}init(){return this.scene.inject(),this.overlays.inject(),this}destroy(){return this.scene.unject(),this.overlays.unject(),this}resize(e){return e==null&&(e={}),e.renderWidth==null&&(e.renderWidth=e.viewWidth!=null?e.viewWidth:e.viewWidth=1280),e.renderHeight==null&&(e.renderHeight=e.viewHeight!=null?e.viewHeight:e.viewHeight=720),e.pixelRatio==null&&(e.pixelRatio=e.renderWidth/Math.max(1e-6,e.viewWidth)),e.aspect==null&&(e.aspect=e.viewWidth/Math.max(1e-6,e.viewHeight)),this.root.controller.resize(e),this}frame(e){return this.pre(e),this.update(),this.render(),this.post(),this}pre(e){return e||(e={now:+new Date/1e3,time:0,delta:0,clock:0,step:0},e.delta=this.time.now!=null?e.now-this.time.now:0,e.delta>1&&(e.delta=1/60),e.step=e.delta*this.speed,e.time=this.time.time+e.delta,e.clock=this.time.clock+e.step),this.time=e,typeof this.root.controller.pre=="function"&&this.root.controller.pre(),this}update(){return this.animator.update(),this.attributes.compute(),this.guard.iterate({step:()=>{let e=this.attributes.digest();return e||(e=this.model.digest())},last(){return{attribute:this.attributes.getLastTrigger(),model:this.model.getLastTrigger()}}}),typeof this.root.controller.update=="function"&&this.root.controller.update(),this.camera=this.root.controller.getCamera(),this.speed=this.root.controller.getSpeed(),this}render(){return typeof this.root.controller.render=="function"&&this.root.controller.render(),this.scene.render(),this}post(){return typeof this.root.controller.post=="function"&&this.root.controller.post(),this}setWarmup(e){return this.scene.warmup(e),this}getPending(){return this.scene.pending.length}};XI.initClass();const iV=XI,GR=XI.Version;$i.registerPlugin("mathbox",{defaults:{init:!0,warmup:2,inspect:!0,splash:!0},listen:["ready","pre","update","post","resize"],install(i){let e=!1;return this.first=!0,i.MathBox={init:t=>{if(e)return;e=!0;const n=(t!=null?t.scene:void 0)||this.options.scene||i.scene,r=(t!=null?t.camera:void 0)||this.options.camera||i.camera;this.context=new iV(i.renderer,n,r),this.context.api.three=i.three=i,this.context.api.mathbox=i.mathbox=this.context.api,this.context.api.start=()=>i.Loop.start(),this.context.api.stop=()=>i.Loop.stop(),this.context.init(),this.context.resize(i.Size),this.context.setWarmup(this.options.warmup),this.pending=0,this.warm=!this.options.warmup,console.log("MathBox",GR),i.trigger({type:"mathbox/init",version:GR,context:this.context})},destroy:()=>{e&&(e=!1,i.trigger({type:"mathbox/destroy",context:this.context}),this.context.destroy(),delete i.mathbox,delete this.context.api.three,delete this.context)},object:()=>this.context!=null?this.context.scene.root:void 0}},uninstall(i){i.MathBox.destroy(),delete i.MathBox},ready(i,e){if(this.options.init)return e.MathBox.init(),setTimeout(()=>{if(this.options.inspect&&e.MathBox)return this.inspect(e)})},inspect(i){if(this.context.api.inspect(),!this.options.warmup)return this.info(i)},info(i){const e=function(n){const r=[];for(;n>=1e3;)r.unshift(("000"+n%1e3).slice(-3)),n=Math.floor(n/1e3);return r.unshift(n),r.join(",")},t=i.renderer.info.render;console.log("Geometry  ",e(t.triangles)+" triangles  ",e(t.points)+" points  ",e(t.lines)+" lines  ",e(t.calls)+" draw calls  ")},resize(i,e){return this.context!=null?this.context.resize(e.Size):void 0},pre(i,e){return this.context!=null?this.context.pre(e.Time):void 0},update(i,e){let t;return this.context!=null&&this.context.update(),(t=this.context!=null?this.context.camera:void 0)&&t!==e.camera&&(e.camera=t),e.Time.set({speed:this.context.speed}),this.progress(this.context.getPending(),e),this.context!=null?this.context.render():void 0},post(i,e){return this.context!=null?this.context.post():void 0},progress(i,e){if(!i&&!this.pending)return;let t=Math.max(i+this.options.warmup,this.pending);const n=t-i,r=t;e.trigger({type:"mathbox/progress",current:t-i,total:t}),i===0&&(t=0),this.pending=t,n===r&&!this.warm&&(this.warm=!0,this.options.inspect&&this.info(e))}});var QR={exports:{}};/*! Tweakpane 3.1.10 (c) 2016 cocopon, licensed under the MIT license. */(function(i,e){(function(t,n){n(e)})(dt,function(t){class n{constructor(g){const[y,B]=g.split("-"),z=y.split(".");this.major=parseInt(z[0],10),this.minor=parseInt(z[1],10),this.patch=parseInt(z[2],10),this.prerelease=B??null}toString(){const g=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[g,this.prerelease].join("-"):g}}class r{constructor(g){this.controller_=g}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(g){this.controller_.viewProps.set("disabled",g)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(g){this.controller_.viewProps.set("hidden",g)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class s{constructor(g){this.target=g}}class a extends s{constructor(g,y,B,z){super(g),this.value=y,this.presetKey=B,this.last=z??!0}}class o extends s{constructor(g,y,B){super(g),this.value=y,this.presetKey=B}}class l extends s{constructor(g,y){super(g),this.expanded=y}}class c extends s{constructor(g,y){super(g),this.index=y}}function u(E){return E}function h(E){return E==null}function d(E,g){if(E.length!==g.length)return!1;for(let y=0;y<E.length;y++)if(E[y]!==g[y])return!1;return!0}function f(E,g){let y=E;do{const B=Object.getOwnPropertyDescriptor(y,g);if(B&&(B.set!==void 0||B.writable===!0))return!0;y=Object.getPrototypeOf(y)}while(y!==null);return!1}const m={alreadydisposed:()=>"View has been already disposed",invalidparams:E=>`Invalid parameters for '${E.name}'`,nomatchingcontroller:E=>`No matching controller for '${E.key}'`,nomatchingview:E=>`No matching view for '${JSON.stringify(E.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:E=>`Property '${E.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class A{static alreadyDisposed(){return new A({type:"alreadydisposed"})}static notBindable(){return new A({type:"notbindable"})}static propertyNotFound(g){return new A({type:"propertynotfound",context:{name:g}})}static shouldNeverHappen(){return new A({type:"shouldneverhappen"})}constructor(g){var y;this.message=(y=m[g.type](g.context))!==null&&y!==void 0?y:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=g.type}}class _{constructor(g,y,B){this.obj_=g,this.key_=y,this.presetKey_=B??y}static isBindable(g){return!(g===null||typeof g!="object"&&typeof g!="function")}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(g){this.obj_[this.key_]=g}writeProperty(g,y){const B=this.read();if(!_.isBindable(B))throw A.notBindable();if(!(g in B))throw A.propertyNotFound(g);B[g]=y}}class v extends r{get label(){return this.controller_.props.get("label")}set label(g){this.controller_.props.set("label",g)}get title(){var g;return(g=this.controller_.valueController.props.get("title"))!==null&&g!==void 0?g:""}set title(g){this.controller_.valueController.props.set("title",g)}on(g,y){const B=y.bind(this);return this.controller_.valueController.emitter.on(g,()=>{B(new s(this))}),this}}class w{constructor(){this.observers_={}}on(g,y){let B=this.observers_[g];return B||(B=this.observers_[g]=[]),B.push({handler:y}),this}off(g,y){const B=this.observers_[g];return B&&(this.observers_[g]=B.filter(z=>z.handler!==y)),this}emit(g,y){const B=this.observers_[g];B&&B.forEach(z=>{z.handler(y)})}}const x="tp";function C(E){return(y,B)=>[x,"-",E,"v",y?`_${y}`:"",B?`-${B}`:""].join("")}function S(E,g){return y=>g(E(y))}function I(E){return E.rawValue}function P(E,g){E.emitter.on("change",S(I,g)),g(E.rawValue)}function k(E,g,y){P(E.value(g),y)}function M(E,g,y){y?E.classList.add(g):E.classList.remove(g)}function R(E,g){return y=>{M(E,g,y)}}function N(E,g){P(E,y=>{g.textContent=y??""})}const U=C("btn");class q{constructor(g,y){this.element=g.createElement("div"),this.element.classList.add(U()),y.viewProps.bindClassModifiers(this.element);const B=g.createElement("button");B.classList.add(U("b")),y.viewProps.bindDisabled(B),this.element.appendChild(B),this.buttonElement=B;const z=g.createElement("div");z.classList.add(U("t")),N(y.props.value("title"),z),this.buttonElement.appendChild(z)}}class W{constructor(g,y){this.emitter=new w,this.onClick_=this.onClick_.bind(this),this.props=y.props,this.viewProps=y.viewProps,this.view=new q(g,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class F{constructor(g,y){var B;this.constraint_=y==null?void 0:y.constraint,this.equals_=(B=y==null?void 0:y.equals)!==null&&B!==void 0?B:(z,ve)=>z===ve,this.emitter=new w,this.rawValue_=g}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(g){this.setRawValue(g,{forceEmit:!1,last:!0})}setRawValue(g,y){const B=y??{forceEmit:!1,last:!0},z=this.constraint_?this.constraint_.constrain(g):g,ve=this.rawValue_;this.equals_(ve,z)&&!B.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=z,this.emitter.emit("change",{options:B,previousRawValue:ve,rawValue:z,sender:this}))}}class ue{constructor(g){this.emitter=new w,this.value_=g}get rawValue(){return this.value_}set rawValue(g){this.setRawValue(g,{forceEmit:!1,last:!0})}setRawValue(g,y){const B=y??{forceEmit:!1,last:!0},z=this.value_;z===g&&!B.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=g,this.emitter.emit("change",{options:B,previousRawValue:z,rawValue:this.value_,sender:this}))}}function J(E,g){const y=g==null?void 0:g.constraint,B=g==null?void 0:g.equals;return!y&&!B?new ue(E):new F(E,g)}class Y{constructor(g){this.emitter=new w,this.valMap_=g;for(const y in this.valMap_)this.valMap_[y].emitter.on("change",()=>{this.emitter.emit("change",{key:y,sender:this})})}static createCore(g){return Object.keys(g).reduce((B,z)=>Object.assign(B,{[z]:J(g[z])}),{})}static fromObject(g){const y=this.createCore(g);return new Y(y)}get(g){return this.valMap_[g].rawValue}set(g,y){this.valMap_[g].rawValue=y}value(g){return this.valMap_[g]}}function Pe(E,g){const B=Object.keys(g).reduce((z,ve)=>{if(z===void 0)return;const Ge=g[ve],Mt=Ge(E[ve]);return Mt.succeeded?Object.assign(Object.assign({},z),{[ve]:Mt.value}):void 0},{});return B}function Ie(E,g){return E.reduce((y,B)=>{if(y===void 0)return;const z=g(B);if(!(!z.succeeded||z.value===void 0))return[...y,z.value]},[])}function pe(E){return E===null?!1:typeof E=="object"}function Ce(E){return g=>y=>{if(!g&&y===void 0)return{succeeded:!1,value:void 0};if(g&&y===void 0)return{succeeded:!0,value:void 0};const B=E(y);return B!==void 0?{succeeded:!0,value:B}:{succeeded:!1,value:void 0}}}function G(E){return{custom:g=>Ce(g)(E),boolean:Ce(g=>typeof g=="boolean"?g:void 0)(E),number:Ce(g=>typeof g=="number"?g:void 0)(E),string:Ce(g=>typeof g=="string"?g:void 0)(E),function:Ce(g=>typeof g=="function"?g:void 0)(E),constant:g=>Ce(y=>y===g?g:void 0)(E),raw:Ce(g=>g)(E),object:g=>Ce(y=>{if(pe(y))return Pe(y,g)})(E),array:g=>Ce(y=>{if(Array.isArray(y))return Ie(y,g)})(E)}}const oe={optional:G(!0),required:G(!1)};function je(E,g){const y=oe.required.object(g)(E);return y.succeeded?y.value:void 0}function Tt(E){console.warn([`Missing '${E.key}' of ${E.target} in ${E.place}.`,"Please rebuild plugins with the latest core package."].join(" "))}function rt(E){return E&&E.parentElement&&E.parentElement.removeChild(E),null}class De{constructor(g){this.value_=g}static create(g){return[new De(g),(y,B)=>{g.setRawValue(y,B)}]}get emitter(){return this.value_.emitter}get rawValue(){return this.value_.rawValue}}const xt=C("");function mt(E,g){return R(E,xt(void 0,g))}class et extends Y{constructor(g){var y;super(g),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=De.create(J(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(y=this.get("parent"))===null||y===void 0||y.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(g){var y,B,z;const ve=g??{};return new et(Y.createCore({disabled:(y=ve.disabled)!==null&&y!==void 0?y:!1,disposed:!1,hidden:(B=ve.hidden)!==null&&B!==void 0?B:!1,parent:(z=ve.parent)!==null&&z!==void 0?z:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(g){P(this.globalDisabled_,mt(g,"disabled")),k(this,"hidden",mt(g,"hidden"))}bindDisabled(g){P(this.globalDisabled_,y=>{g.disabled=y})}bindTabIndex(g){P(this.globalDisabled_,y=>{g.tabIndex=y?-1:0})}handleDispose(g){this.value("disposed").emitter.on("change",y=>{y&&g()})}getGlobalDisabled_(){const g=this.get("parent");return(g?g.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(g){var y;const B=g.previousRawValue;B==null||B.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(y=this.get("parent"))===null||y===void 0||y.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}function st(){return["veryfirst","first","last","verylast"]}const ce=C(""),tt={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class he{constructor(g){this.parent_=null,this.blade=g.blade,this.view=g.view,this.viewProps=g.viewProps;const y=this.view.element;this.blade.value("positions").emitter.on("change",()=>{st().forEach(B=>{y.classList.remove(ce(void 0,tt[B]))}),this.blade.get("positions").forEach(B=>{y.classList.add(ce(void 0,tt[B]))})}),this.viewProps.handleDispose(()=>{rt(y)})}get parent(){return this.parent_}set parent(g){if(this.parent_=g,!("parent"in this.viewProps.valMap_)){Tt({key:"parent",target:et.name,place:"BladeController.parent"});return}this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}}const be="http://www.w3.org/2000/svg";function Ne(E){E.offsetHeight}function nt(E,g){const y=E.style.transition;E.style.transition="none",g(),E.style.transition=y}function ze(E){return E.ontouchstart!==void 0}function me(){return globalThis}function fe(){return me().document}function Be(E){const g=E.ownerDocument.defaultView;return g&&"document"in g?E.getContext("2d",{willReadFrequently:!0}):null}const V={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function $(E,g){const y=E.createElementNS(be,"svg");return y.innerHTML=V[g],y}function ee(E,g,y){E.insertBefore(g,E.children[y])}function Te(E){E.parentElement&&E.parentElement.removeChild(E)}function te(E){for(;E.children.length>0;)E.removeChild(E.children[0])}function Qe(E){for(;E.childNodes.length>0;)E.removeChild(E.childNodes[0])}function Vt(E){return E.relatedTarget?E.relatedTarget:"explicitOriginalTarget"in E?E.explicitOriginalTarget:null}const ye=C("lbl");function Ee(E,g){const y=E.createDocumentFragment();return g.split(`
`).map(z=>E.createTextNode(z)).forEach((z,ve)=>{ve>0&&y.appendChild(E.createElement("br")),y.appendChild(z)}),y}class St{constructor(g,y){this.element=g.createElement("div"),this.element.classList.add(ye()),y.viewProps.bindClassModifiers(this.element);const B=g.createElement("div");B.classList.add(ye("l")),k(y.props,"label",ve=>{h(ve)?this.element.classList.add(ye(void 0,"nol")):(this.element.classList.remove(ye(void 0,"nol")),Qe(B),B.appendChild(Ee(g,ve)))}),this.element.appendChild(B),this.labelElement=B;const z=g.createElement("div");z.classList.add(ye("v")),this.element.appendChild(z),this.valueElement=z}}class Rt extends he{constructor(g,y){const B=y.valueController.viewProps;super(Object.assign(Object.assign({},y),{view:new St(g,{props:y.props,viewProps:B}),viewProps:B})),this.props=y.props,this.valueController=y.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const Bt={id:"button",type:"blade",accept(E){const g=oe,y=je(E,{title:g.required.string,view:g.required.constant("button"),label:g.optional.string});return y?{params:y}:null},controller(E){return new Rt(E.document,{blade:E.blade,props:Y.fromObject({label:E.params.label}),valueController:new W(E.document,{props:Y.fromObject({title:E.params.title}),viewProps:E.viewProps})})},api(E){return!(E.controller instanceof Rt)||!(E.controller.valueController instanceof W)?null:new v(E.controller)}};class Qt extends he{constructor(g){super(g),this.value=g.value}}function Nt(){return new Y({positions:J([],{equals:d})})}class $t extends Y{constructor(g){super(g)}static create(g){const y={completed:!0,expanded:g,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},B=Y.createCore(y);return new $t(B)}get styleExpanded(){var g;return(g=this.get("temporaryExpanded"))!==null&&g!==void 0?g:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const g=this.get("expandedHeight");return this.get("shouldFixHeight")&&!h(g)?`${g}px`:"auto"}bindExpandedClass(g,y){const B=()=>{this.styleExpanded?g.classList.add(y):g.classList.remove(y)};k(this,"expanded",B),k(this,"temporaryExpanded",B)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Qn(E,g){let y=0;return nt(g,()=>{E.set("expandedHeight",null),E.set("temporaryExpanded",!0),Ne(g),y=g.clientHeight,E.set("temporaryExpanded",null),Ne(g)}),y}function de(E,g){g.style.height=E.styleHeight}function It(E,g){E.value("expanded").emitter.on("beforechange",()=>{if(E.set("completed",!1),h(E.get("expandedHeight"))){const y=Qn(E,g);y>0&&E.set("expandedHeight",y)}E.set("shouldFixHeight",!0),Ne(g)}),E.emitter.on("change",()=>{de(E,g)}),de(E,g),g.addEventListener("transitionend",y=>{y.propertyName==="height"&&E.cleanUpTransition()})}class $e extends r{constructor(g,y){super(g),this.rackApi_=y}}function Lt(E,g){return E.addBlade(Object.assign(Object.assign({},g),{view:"button"}))}function Ft(E,g){return E.addBlade(Object.assign(Object.assign({},g),{view:"folder"}))}function Le(E,g){const y=g??{};return E.addBlade(Object.assign(Object.assign({},y),{view:"separator"}))}function bn(E,g){return E.addBlade(Object.assign(Object.assign({},g),{view:"tab"}))}class _i{constructor(g){this.emitter=new w,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=g}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(g){for(const y of this.allItems())if(g(y))return y;return null}includes(g){return this.cache_.has(g)}add(g,y){if(this.includes(g))throw A.shouldNeverHappen();const B=y!==void 0?y:this.items_.length;this.items_.splice(B,0,g),this.cache_.add(g);const z=this.extract_(g);z&&(z.emitter.on("add",this.onSubListAdd_),z.emitter.on("remove",this.onSubListRemove_),z.allItems().forEach(ve=>{this.cache_.add(ve)})),this.emitter.emit("add",{index:B,item:g,root:this,target:this})}remove(g){const y=this.items_.indexOf(g);if(y<0)return;this.items_.splice(y,1),this.cache_.delete(g);const B=this.extract_(g);B&&(B.emitter.off("add",this.onSubListAdd_),B.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:y,item:g,root:this,target:this})}onSubListAdd_(g){this.cache_.add(g.item),this.emitter.emit("add",{index:g.index,item:g.item,root:this,target:g.target})}onSubListRemove_(g){this.cache_.delete(g.item),this.emitter.emit("remove",{index:g.index,item:g.item,root:this,target:g.target})}}class gs extends r{constructor(g){super(g),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new w,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(g){this.controller_.props.set("label",g)}on(g,y){const B=y.bind(this);return this.emitter_.on(g,z=>{B(z.event)}),this}refresh(){this.controller_.binding.read()}onBindingChange_(g){const y=g.sender.target.read();this.emitter_.emit("change",{event:new a(this,y,this.controller_.binding.target.presetKey,g.options.last)})}}class ei extends Rt{constructor(g,y){super(g,y),this.binding=y.binding}}class vs extends r{constructor(g){super(g),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new w,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(g){this.controller_.props.set("label",g)}on(g,y){const B=y.bind(this);return this.emitter_.on(g,z=>{B(z.event)}),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(g){const y=g.sender.target.read();this.emitter_.emit("update",{event:new o(this,y,this.controller_.binding.target.presetKey)})}}class er extends Rt{constructor(g,y){super(g,y),this.binding=y.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose(()=>{this.binding.dispose()})}}function fa(E){return E instanceof Ka?E.apiSet_:E instanceof $e?E.rackApi_.apiSet_:null}function El(E,g){const y=E.find(B=>B.controller_===g);if(!y)throw A.shouldNeverHappen();return y}function nc(E,g,y){if(!_.isBindable(E))throw A.notBindable();return new _(E,g,y)}class Ka extends r{constructor(g,y){super(g),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new w,this.apiSet_=new _i(fa),this.pool_=y;const B=this.controller_.rack;B.emitter.on("add",this.onRackAdd_),B.emitter.on("remove",this.onRackRemove_),B.emitter.on("inputchange",this.onRackInputChange_),B.emitter.on("monitorupdate",this.onRackMonitorUpdate_),B.children.forEach(z=>{this.setUpApi_(z)})}get children(){return this.controller_.rack.children.map(g=>El(this.apiSet_,g))}addInput(g,y,B){const z=B??{},ve=this.controller_.view.element.ownerDocument,Ge=this.pool_.createInput(ve,nc(g,y,z.presetKey),z),Mt=new gs(Ge);return this.add(Mt,z.index)}addMonitor(g,y,B){const z=B??{},ve=this.controller_.view.element.ownerDocument,Ge=this.pool_.createMonitor(ve,nc(g,y),z),Mt=new vs(Ge);return this.add(Mt,z.index)}addFolder(g){return Ft(this,g)}addButton(g){return Lt(this,g)}addSeparator(g){return Le(this,g)}addTab(g){return bn(this,g)}add(g,y){this.controller_.rack.add(g.controller_,y);const B=this.apiSet_.find(z=>z.controller_===g.controller_);return B&&this.apiSet_.remove(B),this.apiSet_.add(g),g}remove(g){this.controller_.rack.remove(g.controller_)}addBlade(g){const y=this.controller_.view.element.ownerDocument,B=this.pool_.createBlade(y,g),z=this.pool_.createBladeApi(B);return this.add(z,g.index)}on(g,y){const B=y.bind(this);return this.emitter_.on(g,z=>{B(z.event)}),this}setUpApi_(g){this.apiSet_.find(B=>B.controller_===g)||this.apiSet_.add(this.pool_.createBladeApi(g))}onRackAdd_(g){this.setUpApi_(g.bladeController)}onRackRemove_(g){if(g.isRoot){const y=El(this.apiSet_,g.bladeController);this.apiSet_.remove(y)}}onRackInputChange_(g){const y=g.bladeController;if(y instanceof ei){const B=El(this.apiSet_,y),z=y.binding;this.emitter_.emit("change",{event:new a(B,z.target.read(),z.target.presetKey,g.options.last)})}else if(y instanceof Qt){const B=El(this.apiSet_,y);this.emitter_.emit("change",{event:new a(B,y.value.rawValue,void 0,g.options.last)})}}onRackMonitorUpdate_(g){if(!(g.bladeController instanceof er))throw A.shouldNeverHappen();const y=El(this.apiSet_,g.bladeController),B=g.bladeController.binding;this.emitter_.emit("update",{event:new o(y,B.target.read(),B.target.presetKey)})}}class Sl extends $e{constructor(g,y){super(g,new Ka(g.rackController,y)),this.emitter_=new w,this.controller_.foldable.value("expanded").emitter.on("change",B=>{this.emitter_.emit("fold",{event:new l(this,B.sender.rawValue)})}),this.rackApi_.on("change",B=>{this.emitter_.emit("change",{event:B})}),this.rackApi_.on("update",B=>{this.emitter_.emit("update",{event:B})})}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(g){this.controller_.foldable.set("expanded",g)}get title(){return this.controller_.props.get("title")}set title(g){this.controller_.props.set("title",g)}get children(){return this.rackApi_.children}addInput(g,y,B){return this.rackApi_.addInput(g,y,B)}addMonitor(g,y,B){return this.rackApi_.addMonitor(g,y,B)}addFolder(g){return this.rackApi_.addFolder(g)}addButton(g){return this.rackApi_.addButton(g)}addSeparator(g){return this.rackApi_.addSeparator(g)}addTab(g){return this.rackApi_.addTab(g)}add(g,y){return this.rackApi_.add(g,y)}remove(g){this.rackApi_.remove(g)}addBlade(g){return this.rackApi_.addBlade(g)}on(g,y){const B=y.bind(this);return this.emitter_.on(g,z=>{B(z.event)}),this}}class Uc extends he{constructor(g){super({blade:g.blade,view:g.view,viewProps:g.rackController.viewProps}),this.rackController=g.rackController}}class Mu{constructor(g,y){const B=C(y.viewName);this.element=g.createElement("div"),this.element.classList.add(B()),y.viewProps.bindClassModifiers(this.element)}}function Nd(E,g){for(let y=0;y<E.length;y++){const B=E[y];if(B instanceof ei&&B.binding===g)return B}return null}function _o(E,g){for(let y=0;y<E.length;y++){const B=E[y];if(B instanceof er&&B.binding===g)return B}return null}function Tu(E,g){for(let y=0;y<E.length;y++){const B=E[y];if(B instanceof Qt&&B.value===g)return B}return null}function Ds(E){return E instanceof ht?E.rack:E instanceof Uc?E.rackController.rack:null}function se(E){const g=Ds(E);return g?g.bcSet_:null}class Ze{constructor(g){var y,B;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new w,this.blade_=(y=g.blade)!==null&&y!==void 0?y:null,(B=this.blade_)===null||B===void 0||B.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=g.viewProps,this.bcSet_=new _i(se),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(g,y){var B;(B=g.parent)===null||B===void 0||B.remove(g),f(g,"parent")?g.parent=this:(g.parent_=this,Tt({key:"parent",target:"BladeController",place:"BladeRack.add"})),this.bcSet_.add(g,y)}remove(g){f(g,"parent")?g.parent=null:(g.parent_=null,Tt({key:"parent",target:"BladeController",place:"BladeRack.remove"})),this.bcSet_.remove(g)}find(g){return this.bcSet_.allItems().filter(y=>y instanceof g)}onSetAdd_(g){this.updatePositions_();const y=g.target===g.root;if(this.emitter.emit("add",{bladeController:g.item,index:g.index,isRoot:y,sender:this}),!y)return;const B=g.item;if(B.viewProps.emitter.on("change",this.onChildViewPropsChange_),B.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),B.viewProps.handleDispose(this.onChildDispose_),B instanceof ei)B.binding.emitter.on("change",this.onChildInputChange_);else if(B instanceof er)B.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(B instanceof Qt)B.value.emitter.on("change",this.onChildValueChange_);else{const z=Ds(B);if(z){const ve=z.emitter;ve.on("layout",this.onDescendantLayout_),ve.on("inputchange",this.onDescendantInputChange_),ve.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(g){this.updatePositions_();const y=g.target===g.root;if(this.emitter.emit("remove",{bladeController:g.item,isRoot:y,sender:this}),!y)return;const B=g.item;if(B instanceof ei)B.binding.emitter.off("change",this.onChildInputChange_);else if(B instanceof er)B.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(B instanceof Qt)B.value.emitter.off("change",this.onChildValueChange_);else{const z=Ds(B);if(z){const ve=z.emitter;ve.off("layout",this.onDescendantLayout_),ve.off("inputchange",this.onDescendantInputChange_),ve.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const g=this.bcSet_.items.filter(z=>!z.viewProps.get("hidden")),y=g[0],B=g[g.length-1];this.bcSet_.items.forEach(z=>{const ve=[];z===y&&(ve.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&ve.push("veryfirst")),z===B&&(ve.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&ve.push("verylast")),z.blade.set("positions",ve)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(g){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(y=>y.viewProps.get("disposed")).forEach(y=>{this.bcSet_.remove(y)})}onChildInputChange_(g){const y=Nd(this.find(ei),g.sender);if(!y)throw A.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:y,options:g.options,sender:this})}onChildMonitorUpdate_(g){const y=_o(this.find(er),g.sender);if(!y)throw A.alreadyDisposed();this.emitter.emit("monitorupdate",{bladeController:y,sender:this})}onChildValueChange_(g){const y=Tu(this.find(Qt),g.sender);if(!y)throw A.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:y,options:g.options,sender:this})}onDescendantLayout_(g){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(g){this.emitter.emit("inputchange",{bladeController:g.bladeController,options:g.options,sender:this})}onDescendantMonitorUpdate_(g){this.emitter.emit("monitorupdate",{bladeController:g.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class ht extends he{constructor(g,y){super(Object.assign(Object.assign({},y),{view:new Mu(g,{viewName:"brk",viewProps:y.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const B=new Ze({blade:y.root?void 0:y.blade,viewProps:y.viewProps});B.emitter.on("add",this.onRackAdd_),B.emitter.on("remove",this.onRackRemove_),this.rack=B,this.viewProps.handleDispose(()=>{for(let z=this.rack.children.length-1;z>=0;z--)this.rack.children[z].viewProps.set("disposed",!0)})}onRackAdd_(g){g.isRoot&&ee(this.view.element,g.bladeController.view.element,g.index)}onRackRemove_(g){g.isRoot&&Te(g.bladeController.view.element)}}const qe=C("cnt");class gt{constructor(g,y){var B;this.className_=C((B=y.viewName)!==null&&B!==void 0?B:"fld"),this.element=g.createElement("div"),this.element.classList.add(this.className_(),qe()),y.viewProps.bindClassModifiers(this.element),this.foldable_=y.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),k(this.foldable_,"completed",R(this.element,this.className_(void 0,"cpl")));const z=g.createElement("button");z.classList.add(this.className_("b")),k(y.props,"title",Pn=>{h(Pn)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),y.viewProps.bindDisabled(z),this.element.appendChild(z),this.buttonElement=z;const ve=g.createElement("div");ve.classList.add(this.className_("i")),this.element.appendChild(ve);const Ge=g.createElement("div");Ge.classList.add(this.className_("t")),N(y.props.value("title"),Ge),this.buttonElement.appendChild(Ge),this.titleElement=Ge;const Mt=g.createElement("div");Mt.classList.add(this.className_("m")),this.buttonElement.appendChild(Mt);const ln=y.containerElement;ln.classList.add(this.className_("c")),this.element.appendChild(ln),this.containerElement=ln}}class Yt extends Uc{constructor(g,y){var B;const z=$t.create((B=y.expanded)!==null&&B!==void 0?B:!0),ve=new ht(g,{blade:y.blade,root:y.root,viewProps:y.viewProps});super(Object.assign(Object.assign({},y),{rackController:ve,view:new gt(g,{containerElement:ve.view.element,foldable:z,props:y.props,viewName:y.root?"rot":void 0,viewProps:y.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=y.props,this.foldable=z,It(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const un={id:"folder",type:"blade",accept(E){const g=oe,y=je(E,{title:g.required.string,view:g.required.constant("folder"),expanded:g.optional.boolean});return y?{params:y}:null},controller(E){return new Yt(E.document,{blade:E.blade,expanded:E.params.expanded,props:Y.fromObject({title:E.params.title}),viewProps:E.viewProps})},api(E){return E.controller instanceof Yt?new Sl(E.controller,E.pool):null}};class sn extends Qt{constructor(g,y){const B=y.valueController.viewProps;super(Object.assign(Object.assign({},y),{value:y.valueController.value,view:new St(g,{props:y.props,viewProps:B}),viewProps:B})),this.props=y.props,this.valueController=y.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class yn extends r{}const Hn=C("spr");class vn{constructor(g,y){this.element=g.createElement("div"),this.element.classList.add(Hn()),y.viewProps.bindClassModifiers(this.element);const B=g.createElement("hr");B.classList.add(Hn("r")),this.element.appendChild(B)}}class wn extends he{constructor(g,y){super(Object.assign(Object.assign({},y),{view:new vn(g,{viewProps:y.viewProps})}))}}const tr={id:"separator",type:"blade",accept(E){const y=je(E,{view:oe.required.constant("separator")});return y?{params:y}:null},controller(E){return new wn(E.document,{blade:E.blade,viewProps:E.viewProps})},api(E){return E.controller instanceof wn?new yn(E.controller):null}},Si=C("tbi");class rs{constructor(g,y){this.element=g.createElement("div"),this.element.classList.add(Si()),y.viewProps.bindClassModifiers(this.element),k(y.props,"selected",ve=>{ve?this.element.classList.add(Si(void 0,"sel")):this.element.classList.remove(Si(void 0,"sel"))});const B=g.createElement("button");B.classList.add(Si("b")),y.viewProps.bindDisabled(B),this.element.appendChild(B),this.buttonElement=B;const z=g.createElement("div");z.classList.add(Si("t")),N(y.props.value("title"),z),this.buttonElement.appendChild(z),this.titleElement=z}}class js{constructor(g,y){this.emitter=new w,this.onClick_=this.onClick_.bind(this),this.props=y.props,this.viewProps=y.viewProps,this.view=new rs(g,{props:y.props,viewProps:y.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Xn{constructor(g,y){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new js(g,{props:y.itemProps,viewProps:et.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new ht(g,{blade:Nt(),viewProps:et.create()}),this.props=y.props,k(this.props,"selected",B=>{this.itemController.props.set("selected",B),this.contentController.viewProps.set("hidden",!B)})}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class Tn{constructor(g,y){this.controller_=g,this.rackApi_=y}get title(){var g;return(g=this.controller_.itemController.props.get("title"))!==null&&g!==void 0?g:""}set title(g){this.controller_.itemController.props.set("title",g)}get selected(){return this.controller_.props.get("selected")}set selected(g){this.controller_.props.set("selected",g)}get children(){return this.rackApi_.children}addButton(g){return this.rackApi_.addButton(g)}addFolder(g){return this.rackApi_.addFolder(g)}addSeparator(g){return this.rackApi_.addSeparator(g)}addTab(g){return this.rackApi_.addTab(g)}add(g,y){this.rackApi_.add(g,y)}remove(g){this.rackApi_.remove(g)}addInput(g,y,B){return this.rackApi_.addInput(g,y,B)}addMonitor(g,y,B){return this.rackApi_.addMonitor(g,y,B)}addBlade(g){return this.rackApi_.addBlade(g)}}class bo extends $e{constructor(g,y){super(g,new Ka(g.rackController,y)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new w,this.pageApiMap_=new Map,this.rackApi_.on("change",B=>{this.emitter_.emit("change",{event:B})}),this.rackApi_.on("update",B=>{this.emitter_.emit("update",{event:B})}),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach(B=>{this.setUpPageApi_(B)})}get pages(){return this.controller_.pageSet.items.map(g=>{const y=this.pageApiMap_.get(g);if(!y)throw A.shouldNeverHappen();return y})}addPage(g){const y=this.controller_.view.element.ownerDocument,B=new Xn(y,{itemProps:Y.fromObject({selected:!1,title:g.title}),props:Y.fromObject({selected:!1})});this.controller_.add(B,g.index);const z=this.pageApiMap_.get(B);if(!z)throw A.shouldNeverHappen();return z}removePage(g){this.controller_.remove(g)}on(g,y){const B=y.bind(this);return this.emitter_.on(g,z=>{B(z.event)}),this}setUpPageApi_(g){const y=this.rackApi_.apiSet_.find(z=>z.controller_===g.contentController);if(!y)throw A.shouldNeverHappen();const B=new Tn(g,y);this.pageApiMap_.set(g,B)}onPageAdd_(g){this.setUpPageApi_(g.item)}onPageRemove_(g){if(!this.pageApiMap_.get(g.item))throw A.shouldNeverHappen();this.pageApiMap_.delete(g.item)}onSelect_(g){this.emitter_.emit("select",{event:new c(this,g.rawValue)})}}const Mr=-1;class ur{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=J(!0),this.selectedIndex=J(Mr),this.items_=[]}add(g,y){const B=y??this.items_.length;this.items_.splice(B,0,g),g.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(g){const y=this.items_.indexOf(g);y<0||(this.items_.splice(y,1),g.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Mr,this.empty.rawValue=!0;return}const g=this.items_.findIndex(y=>y.rawValue);g<0?(this.items_.forEach((y,B)=>{y.rawValue=B===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((y,B)=>{y.rawValue=B===g}),this.selectedIndex.rawValue=g),this.empty.rawValue=!1}onItemSelectedChange_(g){if(g.rawValue){const y=this.items_.findIndex(B=>B===g.sender);this.items_.forEach((B,z)=>{B.rawValue=z===y}),this.selectedIndex.rawValue=y}else this.keepSelection_()}}const $r=C("tab");class ic{constructor(g,y){this.element=g.createElement("div"),this.element.classList.add($r(),qe()),y.viewProps.bindClassModifiers(this.element),P(y.empty,R(this.element,$r(void 0,"nop")));const B=g.createElement("div");B.classList.add($r("t")),this.element.appendChild(B),this.itemsElement=B;const z=g.createElement("div");z.classList.add($r("i")),this.element.appendChild(z);const ve=y.contentsElement;ve.classList.add($r("c")),this.element.appendChild(ve),this.contentsElement=ve}}class Ml extends Uc{constructor(g,y){const B=new ht(g,{blade:y.blade,viewProps:y.viewProps}),z=new ur;super({blade:y.blade,rackController:B,view:new ic(g,{contentsElement:B.view.element,empty:z.empty,viewProps:y.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new _i(()=>null),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=z}get pageSet(){return this.pageSet_}add(g,y){this.pageSet_.add(g,y)}remove(g){this.pageSet_.remove(this.pageSet_.items[g])}onPageAdd_(g){const y=g.item;ee(this.view.itemsElement,y.itemController.view.element,g.index),y.itemController.viewProps.set("parent",this.viewProps),this.rackController.rack.add(y.contentController,g.index),this.tab.add(y.props.value("selected"))}onPageRemove_(g){const y=g.item;Te(y.itemController.view.element),y.itemController.viewProps.set("parent",null),this.rackController.rack.remove(y.contentController),this.tab.remove(y.props.value("selected"))}}const hr={id:"tab",type:"blade",accept(E){const g=oe,y=je(E,{pages:g.required.array(g.required.object({title:g.required.string})),view:g.required.constant("tab")});return!y||y.pages.length===0?null:{params:y}},controller(E){const g=new Ml(E.document,{blade:E.blade,viewProps:E.viewProps});return E.params.pages.forEach(y=>{const B=new Xn(E.document,{itemProps:Y.fromObject({selected:!1,title:y.title}),props:Y.fromObject({selected:!1})});g.add(B)}),g},api(E){return E.controller instanceof Ml?new bo(E.controller,E.pool):null}};function Ja(E,g){const y=E.accept(g.params);if(!y)return null;const B=oe.optional.boolean(g.params.disabled).value,z=oe.optional.boolean(g.params.hidden).value;return E.controller({blade:Nt(),document:g.document,params:Object.assign(Object.assign({},y.params),{disabled:B,hidden:z}),viewProps:et.create({disabled:B,hidden:z})})}class Tl{constructor(){this.disabled=!1,this.emitter=new w}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class Ws{constructor(g,y){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=g,this.emitter=new w,this.interval_=y,this.setTimer_()}get disabled(){return this.disabled_}set disabled(g){this.disabled_=g,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const g=this.doc_.defaultView;g&&g.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const g=this.doc_.defaultView;g&&(this.timerId_=g.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Vc{constructor(g){this.onValueChange_=this.onValueChange_.bind(this),this.reader=g.reader,this.writer=g.writer,this.emitter=new w,this.value=g.value,this.value.emitter.on("change",this.onValueChange_),this.target=g.target,this.read()}read(){const g=this.target.read();g!==void 0&&(this.value.rawValue=this.reader(g))}write_(g){this.writer(this.target,g)}onValueChange_(g){this.write_(g.rawValue),this.emitter.emit("change",{options:g.options,rawValue:g.rawValue,sender:this})}}function Sh(E,g){for(;E.length<g;)E.push(void 0)}function rc(E){const g=[];return Sh(g,E),J(g)}function Xr(E){const g=E.indexOf(void 0);return g<0?E:E.slice(0,g)}function As(E,g){const y=[...Xr(E),g];return y.length>E.length?y.splice(0,y.length-E.length):Sh(y,E.length),y}class Mh{constructor(g){this.onTick_=this.onTick_.bind(this),this.reader_=g.reader,this.target=g.target,this.emitter=new w,this.value=g.value,this.ticker=g.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const g=this.target.read();if(g===void 0)return;const y=this.value.rawValue,B=this.reader_(g);this.value.rawValue=As(y,B),this.emitter.emit("update",{rawValue:B,sender:this})}onTick_(g){this.read()}}class sc{constructor(g){this.constraints=g}constrain(g){return this.constraints.reduce((y,B)=>B.constrain(y),g)}}function Sa(E,g){if(E instanceof g)return E;if(E instanceof sc){const y=E.constraints.reduce((B,z)=>B||(z instanceof g?z:null),null);if(y)return y}return null}class Ma{constructor(g){this.values=Y.fromObject({max:g.max,min:g.min})}constrain(g){const y=this.values.get("max"),B=this.values.get("min");return Math.min(Math.max(g,B),y)}}class Il{constructor(g){this.values=Y.fromObject({options:g})}get options(){return this.values.get("options")}constrain(g){const y=this.values.get("options");return y.length===0||y.filter(z=>z.value===g).length>0?g:y[0].value}}class Iu{constructor(g){this.values=Y.fromObject({max:g.max,min:g.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(g){const y=this.values.get("max"),B=this.values.get("min");let z=g;return h(B)||(z=Math.max(z,B)),h(y)||(z=Math.min(z,y)),z}}class Hc{constructor(g,y=0){this.step=g,this.origin=y}constrain(g){const y=this.origin%this.step,B=Math.round((g-y)/this.step);return y+B*this.step}}const Yn=C("lst");class Fd{constructor(g,y){this.onValueChange_=this.onValueChange_.bind(this),this.props_=y.props,this.element=g.createElement("div"),this.element.classList.add(Yn()),y.viewProps.bindClassModifiers(this.element);const B=g.createElement("select");B.classList.add(Yn("s")),y.viewProps.bindDisabled(B),this.element.appendChild(B),this.selectElement=B;const z=g.createElement("div");z.classList.add(Yn("m")),z.appendChild($(g,"dropdown")),this.element.appendChild(z),y.value.emitter.on("change",this.onValueChange_),this.value_=y.value,k(this.props_,"options",ve=>{te(this.selectElement),ve.forEach(Ge=>{const Mt=g.createElement("option");Mt.textContent=Ge.text,this.selectElement.appendChild(Mt)}),this.update_()})}update_(){const g=this.props_.get("options").map(y=>y.value);this.selectElement.selectedIndex=g.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class Ho{constructor(g,y){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=y.props,this.value=y.value,this.viewProps=y.viewProps,this.view=new Fd(g,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(g){const y=g.currentTarget;this.value.rawValue=this.props.get("options")[y.selectedIndex].value}}const zd=C("pop");class Pu{constructor(g,y){this.element=g.createElement("div"),this.element.classList.add(zd()),y.viewProps.bindClassModifiers(this.element),P(y.shows,R(this.element,zd(void 0,"v")))}}class Ud{constructor(g,y){this.shows=J(!1),this.viewProps=y.viewProps,this.view=new Pu(g,{shows:this.shows,viewProps:this.viewProps})}}const ku=C("txt");class ac{constructor(g,y){this.onChange_=this.onChange_.bind(this),this.element=g.createElement("div"),this.element.classList.add(ku()),y.viewProps.bindClassModifiers(this.element),this.props_=y.props,this.props_.emitter.on("change",this.onChange_);const B=g.createElement("input");B.classList.add(ku("i")),B.type="text",y.viewProps.bindDisabled(B),this.element.appendChild(B),this.inputElement=B,y.value.emitter.on("change",this.onChange_),this.value_=y.value,this.refresh()}refresh(){const g=this.props_.get("formatter");this.inputElement.value=g(this.value_.rawValue)}onChange_(){this.refresh()}}class Vd{constructor(g,y){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=y.parser,this.props=y.props,this.value=y.value,this.viewProps=y.viewProps,this.view=new ac(g,{props:y.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(g){const B=g.currentTarget.value,z=this.parser_(B);h(z)||(this.value.rawValue=z),this.view.refresh()}}function lm(E){return String(E)}function oc(E){return E==="false"?!1:!!E}function Ta(E){return lm(E)}class Hd{constructor(g){this.text=g}evaluate(){return Number(this.text)}toString(){return this.text}}const mp={"**":(E,g)=>Math.pow(E,g),"*":(E,g)=>E*g,"/":(E,g)=>E/g,"%":(E,g)=>E%g,"+":(E,g)=>E+g,"-":(E,g)=>E-g,"<<":(E,g)=>E<<g,">>":(E,g)=>E>>g,">>>":(E,g)=>E>>>g,"&":(E,g)=>E&g,"^":(E,g)=>E^g,"|":(E,g)=>E|g};class cm{constructor(g,y,B){this.left=y,this.operator=g,this.right=B}evaluate(){const g=mp[this.operator];if(!g)throw new Error(`unexpected binary operator: '${this.operator}`);return g(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const pa={"+":E=>E,"-":E=>-E,"~":E=>~E};class Gc{constructor(g,y){this.operator=g,this.expression=y}evaluate(){const g=pa[this.operator];if(!g)throw new Error(`unexpected unary operator: '${this.operator}`);return g(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Gd(E){return(g,y)=>{for(let B=0;B<E.length;B++){const z=E[B](g,y);if(z!=="")return z}return""}}function qi(E,g){var y;const B=E.substr(g).match(/^\s+/);return(y=B&&B[0])!==null&&y!==void 0?y:""}function sr(E,g){const y=E.substr(g,1);return y.match(/^[1-9]$/)?y:""}function yo(E,g){var y;const B=E.substr(g).match(/^[0-9]+/);return(y=B&&B[0])!==null&&y!==void 0?y:""}function gp(E,g){const y=yo(E,g);if(y!=="")return y;const B=E.substr(g,1);if(g+=1,B!=="-"&&B!=="+")return"";const z=yo(E,g);return z===""?"":B+z}function Bu(E,g){const y=E.substr(g,1);if(g+=1,y.toLowerCase()!=="e")return"";const B=gp(E,g);return B===""?"":y+B}function Ru(E,g){const y=E.substr(g,1);if(y==="0")return y;const B=sr(E,g);return g+=B.length,B===""?"":B+yo(E,g)}function Pl(E,g){const y=Ru(E,g);if(g+=y.length,y==="")return"";const B=E.substr(g,1);if(g+=B.length,B!==".")return"";const z=yo(E,g);return g+=z.length,y+B+z+Bu(E,g)}function vp(E,g){const y=E.substr(g,1);if(g+=y.length,y!==".")return"";const B=yo(E,g);return g+=B.length,B===""?"":y+B+Bu(E,g)}function Th(E,g){const y=Ru(E,g);return g+=y.length,y===""?"":y+Bu(E,g)}const Bv=Gd([Pl,vp,Th]);function ss(E,g){var y;const B=E.substr(g).match(/^[01]+/);return(y=B&&B[0])!==null&&y!==void 0?y:""}function Ap(E,g){const y=E.substr(g,2);if(g+=y.length,y.toLowerCase()!=="0b")return"";const B=ss(E,g);return B===""?"":y+B}function Za(E,g){var y;const B=E.substr(g).match(/^[0-7]+/);return(y=B&&B[0])!==null&&y!==void 0?y:""}function Ih(E,g){const y=E.substr(g,2);if(g+=y.length,y.toLowerCase()!=="0o")return"";const B=Za(E,g);return B===""?"":y+B}function _p(E,g){var y;const B=E.substr(g).match(/^[0-9a-f]+/i);return(y=B&&B[0])!==null&&y!==void 0?y:""}function ma(E,g){const y=E.substr(g,2);if(g+=y.length,y.toLowerCase()!=="0x")return"";const B=_p(E,g);return B===""?"":y+B}const bp=Gd([Ap,Ih,ma]),um=Gd([bp,Bv]);function yp(E,g){const y=um(E,g);return g+=y.length,y===""?null:{evaluable:new Hd(y),cursor:g}}function wp(E,g){const y=E.substr(g,1);if(g+=y.length,y!=="(")return null;const B=kh(E,g);if(!B)return null;g=B.cursor,g+=qi(E,g).length;const z=E.substr(g,1);return g+=z.length,z!==")"?null:{evaluable:B.evaluable,cursor:g}}function Ph(E,g){var y;return(y=yp(E,g))!==null&&y!==void 0?y:wp(E,g)}function Qd(E,g){const y=Ph(E,g);if(y)return y;const B=E.substr(g,1);if(g+=B.length,B!=="+"&&B!=="-"&&B!=="~")return null;const z=Qd(E,g);return z?(g=z.cursor,{cursor:g,evaluable:new Gc(B,z.evaluable)}):null}function xn(E,g,y){y+=qi(g,y).length;const B=E.filter(z=>g.startsWith(z,y))[0];return B?(y+=B.length,y+=qi(g,y).length,{cursor:y,operator:B}):null}function hm(E,g){return(y,B)=>{const z=E(y,B);if(!z)return null;B=z.cursor;let ve=z.evaluable;for(;;){const Ge=xn(g,y,B);if(!Ge)break;B=Ge.cursor;const Mt=E(y,B);if(!Mt)return null;B=Mt.cursor,ve=new cm(Ge.operator,ve,Mt.evaluable)}return ve?{cursor:B,evaluable:ve}:null}}const Ia=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((E,g)=>hm(E,g),Qd);function kh(E,g){return g+=qi(E,g).length,Ia(E,g)}function dm(E){const g=kh(E,0);return!g||g.cursor+qi(E,g.cursor).length!==E.length?null:g.evaluable}function Ls(E){var g;const y=dm(E);return(g=y==null?void 0:y.evaluate())!==null&&g!==void 0?g:null}function Bh(E){if(typeof E=="number")return E;if(typeof E=="string"){const g=Ls(E);if(!h(g))return g}return 0}function qd(E){return String(E)}function Kn(E){return g=>g.toFixed(Math.max(Math.min(E,20),0))}const lc=Kn(0);function He(E){return lc(E)+"%"}function X(E){return String(E)}function xe(E){return E}function ie({primary:E,secondary:g,forward:y,backward:B}){let z=!1;function ve(Ge){z||(z=!0,Ge(),z=!1)}E.emitter.on("change",Ge=>{ve(()=>{g.setRawValue(y(E,g),Ge.options)})}),g.emitter.on("change",Ge=>{ve(()=>{E.setRawValue(B(E,g),Ge.options)}),ve(()=>{g.setRawValue(y(E,g),Ge.options)})}),ve(()=>{g.setRawValue(y(E,g),{forceEmit:!1,last:!0})})}function re(E,g){const y=E*(g.altKey?.1:1)*(g.shiftKey?10:1);return g.upKey?+y:g.downKey?-y:0}function Oe(E){return{altKey:E.altKey,downKey:E.key==="ArrowDown",shiftKey:E.shiftKey,upKey:E.key==="ArrowUp"}}function at(E){return{altKey:E.altKey,downKey:E.key==="ArrowLeft",shiftKey:E.shiftKey,upKey:E.key==="ArrowRight"}}function Ye(E){return E==="ArrowUp"||E==="ArrowDown"}function qt(E){return Ye(E)||E==="ArrowLeft"||E==="ArrowRight"}function Bn(E,g){var y,B;const z=g.ownerDocument.defaultView,ve=g.getBoundingClientRect();return{x:E.pageX-(((y=z&&z.scrollX)!==null&&y!==void 0?y:0)+ve.left),y:E.pageY-(((B=z&&z.scrollY)!==null&&B!==void 0?B:0)+ve.top)}}class ti{constructor(g){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=g,this.emitter=new w,g.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),g.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),g.addEventListener("touchend",this.onTouchEnd_),g.addEventListener("mousedown",this.onMouseDown_)}computePosition_(g){const y=this.elem_.getBoundingClientRect();return{bounds:{width:y.width,height:y.height},point:g?{x:g.x,y:g.y}:null}}onMouseDown_(g){var y;g.preventDefault(),(y=g.currentTarget)===null||y===void 0||y.focus();const B=this.elem_.ownerDocument;B.addEventListener("mousemove",this.onDocumentMouseMove_),B.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:g.altKey,data:this.computePosition_(Bn(g,this.elem_)),sender:this,shiftKey:g.shiftKey})}onDocumentMouseMove_(g){this.emitter.emit("move",{altKey:g.altKey,data:this.computePosition_(Bn(g,this.elem_)),sender:this,shiftKey:g.shiftKey})}onDocumentMouseUp_(g){const y=this.elem_.ownerDocument;y.removeEventListener("mousemove",this.onDocumentMouseMove_),y.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:g.altKey,data:this.computePosition_(Bn(g,this.elem_)),sender:this,shiftKey:g.shiftKey})}onTouchStart_(g){g.preventDefault();const y=g.targetTouches.item(0),B=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:g.altKey,data:this.computePosition_(y?{x:y.clientX-B.left,y:y.clientY-B.top}:void 0),sender:this,shiftKey:g.shiftKey}),this.lastTouch_=y}onTouchMove_(g){const y=g.targetTouches.item(0),B=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:g.altKey,data:this.computePosition_(y?{x:y.clientX-B.left,y:y.clientY-B.top}:void 0),sender:this,shiftKey:g.shiftKey}),this.lastTouch_=y}onTouchEnd_(g){var y;const B=(y=g.targetTouches.item(0))!==null&&y!==void 0?y:this.lastTouch_,z=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:g.altKey,data:this.computePosition_(B?{x:B.clientX-z.left,y:B.clientY-z.top}:void 0),sender:this,shiftKey:g.shiftKey})}}function an(E,g,y,B,z){const ve=(E-g)/(y-g);return B+ve*(z-B)}function on(E){return String(E.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function vt(E,g,y){return Math.min(Math.max(E,g),y)}function hn(E,g){return(E%g+g)%g}const Mi=C("txt");class ar{constructor(g,y){this.onChange_=this.onChange_.bind(this),this.props_=y.props,this.props_.emitter.on("change",this.onChange_),this.element=g.createElement("div"),this.element.classList.add(Mi(),Mi(void 0,"num")),y.arrayPosition&&this.element.classList.add(Mi(void 0,y.arrayPosition)),y.viewProps.bindClassModifiers(this.element);const B=g.createElement("input");B.classList.add(Mi("i")),B.type="text",y.viewProps.bindDisabled(B),this.element.appendChild(B),this.inputElement=B,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=y.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Mi()),this.inputElement.classList.add(Mi("i"));const z=g.createElement("div");z.classList.add(Mi("k")),this.element.appendChild(z),this.knobElement=z;const ve=g.createElementNS(be,"svg");ve.classList.add(Mi("g")),this.knobElement.appendChild(ve);const Ge=g.createElementNS(be,"path");Ge.classList.add(Mi("gb")),ve.appendChild(Ge),this.guideBodyElem_=Ge;const Mt=g.createElementNS(be,"path");Mt.classList.add(Mi("gh")),ve.appendChild(Mt),this.guideHeadElem_=Mt;const ln=g.createElement("div");ln.classList.add(C("tt")()),this.knobElement.appendChild(ln),this.tooltipElem_=ln,y.value.emitter.on("change",this.onChange_),this.value=y.value,this.refresh()}onDraggingChange_(g){if(g.rawValue===null){this.element.classList.remove(Mi(void 0,"drg"));return}this.element.classList.add(Mi(void 0,"drg"));const y=g.rawValue/this.props_.get("draggingScale"),B=y+(y>0?-1:y<0?1:0),z=vt(-B,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${B+z},0 L${B},4 L${B+z},8`,`M ${y},-1 L${y},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${y},4`);const ve=this.props_.get("formatter");this.tooltipElem_.textContent=ve(this.value.rawValue),this.tooltipElem_.style.left=`${y}px`}refresh(){const g=this.props_.get("formatter");this.inputElement.value=g(this.value.rawValue)}onChange_(){this.refresh()}}class mr{constructor(g,y){var B;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=y.baseStep,this.parser_=y.parser,this.props=y.props,this.sliderProps_=(B=y.sliderProps)!==null&&B!==void 0?B:null,this.value=y.value,this.viewProps=y.viewProps,this.dragging_=J(null),this.view=new ar(g,{arrayPosition:y.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const z=new ti(this.view.knobElement);z.emitter.on("down",this.onPointerDown_),z.emitter.on("move",this.onPointerMove_),z.emitter.on("up",this.onPointerUp_)}constrainValue_(g){var y,B;const z=(y=this.sliderProps_)===null||y===void 0?void 0:y.get("minValue"),ve=(B=this.sliderProps_)===null||B===void 0?void 0:B.get("maxValue");let Ge=g;return z!==void 0&&(Ge=Math.max(Ge,z)),ve!==void 0&&(Ge=Math.min(Ge,ve)),Ge}onInputChange_(g){const B=g.currentTarget.value,z=this.parser_(B);h(z)||(this.value.rawValue=this.constrainValue_(z)),this.view.refresh()}onInputKeyDown_(g){const y=re(this.baseStep_,Oe(g));y!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+y),{forceEmit:!1,last:!1})}onInputKeyUp_(g){re(this.baseStep_,Oe(g))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(g){if(!g.point)return null;const y=g.point.x-g.bounds.width/2;return this.constrainValue_(this.originRawValue_+y*this.props.get("draggingScale"))}onPointerMove_(g){const y=this.computeDraggingValue_(g.data);y!==null&&(this.value.setRawValue(y,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(g){const y=this.computeDraggingValue_(g.data);y!==null&&(this.value.setRawValue(y,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const gr=C("sld");class _s{constructor(g,y){this.onChange_=this.onChange_.bind(this),this.props_=y.props,this.props_.emitter.on("change",this.onChange_),this.element=g.createElement("div"),this.element.classList.add(gr()),y.viewProps.bindClassModifiers(this.element);const B=g.createElement("div");B.classList.add(gr("t")),y.viewProps.bindTabIndex(B),this.element.appendChild(B),this.trackElement=B;const z=g.createElement("div");z.classList.add(gr("k")),this.trackElement.appendChild(z),this.knobElement=z,y.value.emitter.on("change",this.onChange_),this.value=y.value,this.update_()}update_(){const g=vt(an(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${g}%`}onChange_(){this.update_()}}class dn{constructor(g,y){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=y.baseStep,this.value=y.value,this.viewProps=y.viewProps,this.props=y.props,this.view=new _s(g,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ti(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(g,y){g.point&&this.value.setRawValue(an(vt(g.point.x,0,g.bounds.width),0,g.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),y)}onPointerDownOrMove_(g){this.handlePointerEvent_(g.data,{forceEmit:!1,last:!1})}onPointerUp_(g){this.handlePointerEvent_(g.data,{forceEmit:!0,last:!0})}onKeyDown_(g){const y=re(this.baseStep_,at(g));y!==0&&this.value.setRawValue(this.value.rawValue+y,{forceEmit:!1,last:!1})}onKeyUp_(g){re(this.baseStep_,at(g))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const $s=C("sldtxt");class nr{constructor(g,y){this.element=g.createElement("div"),this.element.classList.add($s());const B=g.createElement("div");B.classList.add($s("s")),this.sliderView_=y.sliderView,B.appendChild(this.sliderView_.element),this.element.appendChild(B);const z=g.createElement("div");z.classList.add($s("t")),this.textView_=y.textView,z.appendChild(this.textView_.element),this.element.appendChild(z)}}class In{constructor(g,y){this.value=y.value,this.viewProps=y.viewProps,this.sliderC_=new dn(g,{baseStep:y.baseStep,props:y.sliderProps,value:y.value,viewProps:this.viewProps}),this.textC_=new mr(g,{baseStep:y.baseStep,parser:y.parser,props:y.textProps,sliderProps:y.sliderProps,value:y.value,viewProps:y.viewProps}),this.view=new nr(g,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function Yr(E,g){E.write(g)}function Os(E){const g=oe;if(Array.isArray(E))return g.required.array(g.required.object({text:g.required.string,value:g.required.raw}))(E).value;if(typeof E=="object")return g.required.raw(E).value}function fn(E){if(E==="inline"||E==="popup")return E}function br(E){const g=oe;return g.required.object({max:g.optional.number,min:g.optional.number,step:g.optional.number})(E).value}function On(E){if(Array.isArray(E))return E;const g=[];return Object.keys(E).forEach(y=>{g.push({text:y,value:E[y]})}),g}function wo(E){return h(E)?null:new Il(On(E))}function yr(E){const g=E?Sa(E,Hc):null;return g?g.step:null}function bs(E,g){const y=E&&Sa(E,Hc);return y?on(y.step):Math.max(on(g),2)}function Kr(E){const g=yr(E);return g??1}function bi(E,g){var y;const B=E&&Sa(E,Hc),z=Math.abs((y=B==null?void 0:B.step)!==null&&y!==void 0?y:g);return z===0?.1:Math.pow(10,Math.floor(Math.log10(z))-1)}const wr=C("ckb");class or{constructor(g,y){this.onValueChange_=this.onValueChange_.bind(this),this.element=g.createElement("div"),this.element.classList.add(wr()),y.viewProps.bindClassModifiers(this.element);const B=g.createElement("label");B.classList.add(wr("l")),this.element.appendChild(B);const z=g.createElement("input");z.classList.add(wr("i")),z.type="checkbox",B.appendChild(z),this.inputElement=z,y.viewProps.bindDisabled(this.inputElement);const ve=g.createElement("div");ve.classList.add(wr("w")),B.appendChild(ve);const Ge=$(g,"check");ve.appendChild(Ge),y.value.emitter.on("change",this.onValueChange_),this.value=y.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class We{constructor(g,y){this.onInputChange_=this.onInputChange_.bind(this),this.value=y.value,this.viewProps=y.viewProps,this.view=new or(g,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(g){const y=g.currentTarget;this.value.rawValue=y.checked}}function as(E){const g=[],y=wo(E.options);return y&&g.push(y),new sc(g)}const Qc={id:"input-bool",type:"input",accept:(E,g)=>{if(typeof E!="boolean")return null;const B=je(g,{options:oe.optional.custom(Os)});return B?{initialValue:E,params:B}:null},binding:{reader:E=>oc,constraint:E=>as(E.params),writer:E=>Yr},controller:E=>{const g=E.document,y=E.value,B=E.constraint,z=B&&Sa(B,Il);return z?new Ho(g,{props:new Y({options:z.values.value("options")}),value:y,viewProps:E.viewProps}):new We(g,{value:y,viewProps:E.viewProps})}},Pa=C("col");class Ns{constructor(g,y){this.element=g.createElement("div"),this.element.classList.add(Pa()),y.foldable.bindExpandedClass(this.element,Pa(void 0,"expanded")),k(y.foldable,"completed",R(this.element,Pa(void 0,"cpl")));const B=g.createElement("div");B.classList.add(Pa("h")),this.element.appendChild(B);const z=g.createElement("div");z.classList.add(Pa("s")),B.appendChild(z),this.swatchElement=z;const ve=g.createElement("div");if(ve.classList.add(Pa("t")),B.appendChild(ve),this.textElement=ve,y.pickerLayout==="inline"){const Ge=g.createElement("div");Ge.classList.add(Pa("p")),this.element.appendChild(Ge),this.pickerElement=Ge}else this.pickerElement=null}}function os(E,g,y){const B=vt(E/255,0,1),z=vt(g/255,0,1),ve=vt(y/255,0,1),Ge=Math.max(B,z,ve),Mt=Math.min(B,z,ve),ln=Ge-Mt;let Pn=0,Di=0;const Pi=(Mt+Ge)/2;return ln!==0&&(Di=ln/(1-Math.abs(Ge+Mt-1)),B===Ge?Pn=(z-ve)/ln:z===Ge?Pn=2+(ve-B)/ln:Pn=4+(B-z)/ln,Pn=Pn/6+(Pn<0?1:0)),[Pn*360,Di*100,Pi*100]}function Xs(E,g,y){const B=(E%360+360)%360,z=vt(g/100,0,1),ve=vt(y/100,0,1),Ge=(1-Math.abs(2*ve-1))*z,Mt=Ge*(1-Math.abs(B/60%2-1)),ln=ve-Ge/2;let Pn,Di,Pi;return B>=0&&B<60?[Pn,Di,Pi]=[Ge,Mt,0]:B>=60&&B<120?[Pn,Di,Pi]=[Mt,Ge,0]:B>=120&&B<180?[Pn,Di,Pi]=[0,Ge,Mt]:B>=180&&B<240?[Pn,Di,Pi]=[0,Mt,Ge]:B>=240&&B<300?[Pn,Di,Pi]=[Mt,0,Ge]:[Pn,Di,Pi]=[Ge,0,Mt],[(Pn+ln)*255,(Di+ln)*255,(Pi+ln)*255]}function Jr(E,g,y){const B=vt(E/255,0,1),z=vt(g/255,0,1),ve=vt(y/255,0,1),Ge=Math.max(B,z,ve),Mt=Math.min(B,z,ve),ln=Ge-Mt;let Pn;ln===0?Pn=0:Ge===B?Pn=60*(((z-ve)/ln%6+6)%6):Ge===z?Pn=60*((ve-B)/ln+2):Pn=60*((B-z)/ln+4);const Di=Ge===0?0:ln/Ge,Pi=Ge;return[Pn,Di*100,Pi*100]}function Ys(E,g,y){const B=hn(E,360),z=vt(g/100,0,1),ve=vt(y/100,0,1),Ge=ve*z,Mt=Ge*(1-Math.abs(B/60%2-1)),ln=ve-Ge;let Pn,Di,Pi;return B>=0&&B<60?[Pn,Di,Pi]=[Ge,Mt,0]:B>=60&&B<120?[Pn,Di,Pi]=[Mt,Ge,0]:B>=120&&B<180?[Pn,Di,Pi]=[0,Ge,Mt]:B>=180&&B<240?[Pn,Di,Pi]=[0,Mt,Ge]:B>=240&&B<300?[Pn,Di,Pi]=[Mt,0,Ge]:[Pn,Di,Pi]=[Ge,0,Mt],[(Pn+ln)*255,(Di+ln)*255,(Pi+ln)*255]}function Ks(E,g,y){const B=y+g*(100-Math.abs(2*y-100))/200;return[E,B!==0?g*(100-Math.abs(2*y-100))/B:0,y+g*(100-Math.abs(2*y-100))/(2*100)]}function cc(E,g,y){const B=100-Math.abs(y*(200-g)/100-100);return[E,B!==0?g*y/B:0,y*(200-g)/(2*100)]}function Zr(E){return[E[0],E[1],E[2]]}function Js(E,g){return[E[0],E[1],E[2],g]}const Se={hsl:{hsl:(E,g,y)=>[E,g,y],hsv:Ks,rgb:Xs},hsv:{hsl:cc,hsv:(E,g,y)=>[E,g,y],rgb:Ys},rgb:{hsl:os,hsv:Jr,rgb:(E,g,y)=>[E,g,y]}};function it(E,g){return[g==="float"?1:E==="rgb"?255:360,g==="float"?1:E==="rgb"?255:100,g==="float"?1:E==="rgb"?255:100]}function Ke(E,g){return E===g?g:hn(E,g)}function Ht(E,g,y){var B;const z=it(g,y);return[g==="rgb"?vt(E[0],0,z[0]):Ke(E[0],z[0]),vt(E[1],0,z[1]),vt(E[2],0,z[2]),vt((B=E[3])!==null&&B!==void 0?B:1,0,1)]}function Ve(E,g,y,B){const z=it(g,y),ve=it(g,B);return E.map((Ge,Mt)=>Ge/z[Mt]*ve[Mt])}function Wn(E,g,y){const B=Ve(E,g.mode,g.type,"int"),z=Se[g.mode][y.mode](...B);return Ve(z,y.mode,"int",y.type)}function Vi(E,g){return typeof E!="object"||h(E)?!1:g in E&&typeof E[g]=="number"}class Jt{static black(g="int"){return new Jt([0,0,0],"rgb",g)}static fromObject(g,y="int"){const B="a"in g?[g.r,g.g,g.b,g.a]:[g.r,g.g,g.b];return new Jt(B,"rgb",y)}static toRgbaObject(g,y="int"){return g.toRgbaObject(y)}static isRgbColorObject(g){return Vi(g,"r")&&Vi(g,"g")&&Vi(g,"b")}static isRgbaColorObject(g){return this.isRgbColorObject(g)&&Vi(g,"a")}static isColorObject(g){return this.isRgbColorObject(g)}static equals(g,y){if(g.mode!==y.mode)return!1;const B=g.comps_,z=y.comps_;for(let ve=0;ve<B.length;ve++)if(B[ve]!==z[ve])return!1;return!0}constructor(g,y,B="int"){this.mode=y,this.type=B,this.comps_=Ht(g,y,B)}getComponents(g,y="int"){return Js(Wn(Zr(this.comps_),{mode:this.mode,type:this.type},{mode:g??this.mode,type:y}),this.comps_[3])}toRgbaObject(g="int"){const y=this.getComponents("rgb",g);return{r:y[0],g:y[1],b:y[2],a:y[3]}}}const ji=C("colp");class qc{constructor(g,y){this.alphaViews_=null,this.element=g.createElement("div"),this.element.classList.add(ji()),y.viewProps.bindClassModifiers(this.element);const B=g.createElement("div");B.classList.add(ji("hsv"));const z=g.createElement("div");z.classList.add(ji("sv")),this.svPaletteView_=y.svPaletteView,z.appendChild(this.svPaletteView_.element),B.appendChild(z);const ve=g.createElement("div");ve.classList.add(ji("h")),this.hPaletteView_=y.hPaletteView,ve.appendChild(this.hPaletteView_.element),B.appendChild(ve),this.element.appendChild(B);const Ge=g.createElement("div");if(Ge.classList.add(ji("rgb")),this.textView_=y.textView,Ge.appendChild(this.textView_.element),this.element.appendChild(Ge),y.alphaViews){this.alphaViews_={palette:y.alphaViews.palette,text:y.alphaViews.text};const Mt=g.createElement("div");Mt.classList.add(ji("a"));const ln=g.createElement("div");ln.classList.add(ji("ap")),ln.appendChild(this.alphaViews_.palette.element),Mt.appendChild(ln);const Pn=g.createElement("div");Pn.classList.add(ji("at")),Pn.appendChild(this.alphaViews_.text.element),Mt.appendChild(Pn),this.element.appendChild(Mt)}}get allFocusableElements(){const g=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(y=>y.inputElement)];return this.alphaViews_&&g.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),g}}function ys(E){return E==="int"?"int":E==="float"?"float":void 0}function Go(E){const g=oe;return je(E,{alpha:g.optional.boolean,color:g.optional.object({alpha:g.optional.boolean,type:g.optional.custom(ys)}),expanded:g.optional.boolean,picker:g.optional.custom(fn)})}function Tr(E){return E?.1:1}function Ti(E){var g;return(g=E.color)===null||g===void 0?void 0:g.type}function ka(E,g){return E.alpha===g.alpha&&E.mode===g.mode&&E.notation===g.notation&&E.type===g.type}function vr(E,g){const y=E.match(/^(.+)%$/);return Math.min(y?parseFloat(y[1])*.01*g:parseFloat(E),g)}const gi={deg:E=>E,grad:E=>E*360/400,rad:E=>E*360/(2*Math.PI),turn:E=>E*360};function Qo(E){const g=E.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!g)return parseFloat(E);const y=parseFloat(g[1]),B=g[2];return gi[B](y)}function eo(E){const g=E.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!g)return null;const y=[vr(g[1],255),vr(g[2],255),vr(g[3],255)];return isNaN(y[0])||isNaN(y[1])||isNaN(y[2])?null:y}function ws(E){return g=>{const y=eo(g);return y?new Jt(y,"rgb",E):null}}function uc(E){const g=E.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!g)return null;const y=[vr(g[1],255),vr(g[2],255),vr(g[3],255),vr(g[4],1)];return isNaN(y[0])||isNaN(y[1])||isNaN(y[2])||isNaN(y[3])?null:y}function jc(E){return g=>{const y=uc(g);return y?new Jt(y,"rgb",E):null}}function Wc(E){const g=E.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!g)return null;const y=[Qo(g[1]),vr(g[2],100),vr(g[3],100)];return isNaN(y[0])||isNaN(y[1])||isNaN(y[2])?null:y}function xo(E){return g=>{const y=Wc(g);return y?new Jt(y,"hsl",E):null}}function Zs(E){const g=E.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!g)return null;const y=[Qo(g[1]),vr(g[2],100),vr(g[3],100),vr(g[4],1)];return isNaN(y[0])||isNaN(y[1])||isNaN(y[2])||isNaN(y[3])?null:y}function to(E){return g=>{const y=Zs(g);return y?new Jt(y,"hsl",E):null}}function vi(E){const g=E.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(g)return[parseInt(g[1]+g[1],16),parseInt(g[2]+g[2],16),parseInt(g[3]+g[3],16)];const y=E.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return y?[parseInt(y[1],16),parseInt(y[2],16),parseInt(y[3],16)]:null}function qo(E){const g=vi(E);return g?new Jt(g,"rgb","int"):null}function Ga(E){const g=E.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(g)return[parseInt(g[1]+g[1],16),parseInt(g[2]+g[2],16),parseInt(g[3]+g[3],16),an(parseInt(g[4]+g[4],16),0,255,0,1)];const y=E.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return y?[parseInt(y[1],16),parseInt(y[2],16),parseInt(y[3],16),an(parseInt(y[4],16),0,255,0,1)]:null}function no(E){const g=Ga(E);return g?new Jt(g,"rgb","int"):null}function ga(E){const g=E.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!g)return null;const y=[parseFloat(g[1]),parseFloat(g[2]),parseFloat(g[3])];return isNaN(y[0])||isNaN(y[1])||isNaN(y[2])?null:y}function kl(E){return g=>{const y=ga(g);return y?new Jt(y,"rgb",E):null}}function Co(E){const g=E.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!g)return null;const y=[parseFloat(g[1]),parseFloat(g[2]),parseFloat(g[3]),parseFloat(g[4])];return isNaN(y[0])||isNaN(y[1])||isNaN(y[2])||isNaN(y[3])?null:y}function ea(E){return g=>{const y=Co(g);return y?new Jt(y,"rgb",E):null}}const Gn=[{parser:vi,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:Ga,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:eo,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:uc,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Wc,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Zs,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:ga,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Co,result:{alpha:!0,mode:"rgb",notation:"object"}}];function An(E){return Gn.reduce((g,{parser:y,result:B})=>g||(y(E)?B:null),null)}function xi(E,g="int"){const y=An(E);return y?y.notation==="hex"&&g!=="float"?Object.assign(Object.assign({},y),{type:"int"}):y.notation==="func"?Object.assign(Object.assign({},y),{type:g}):null:null}const Ir={int:[qo,no,ws("int"),jc("int"),xo("int"),to("int"),kl("int"),ea("int")],float:[ws("float"),jc("float"),xo("float"),to("float"),kl("float"),ea("float")]};function en(E){const g=Ir[E];return y=>{if(typeof y!="string")return Jt.black(E);const B=g.reduce((z,ve)=>z||ve(y),null);return B??Jt.black(E)}}function ni(E){const g=Ir[E];return y=>g.reduce((B,z)=>B||z(y),null)}function _n(E){const g=vt(Math.floor(E),0,255).toString(16);return g.length===1?`0${g}`:g}function ri(E,g="#"){const y=Zr(E.getComponents("rgb")).map(_n).join("");return`${g}${y}`}function Hr(E,g="#"){const y=E.getComponents("rgb"),B=[y[0],y[1],y[2],y[3]*255].map(_n).join("");return`${g}${B}`}function yi(E,g){const y=Kn(g==="float"?2:0);return`rgb(${Zr(E.getComponents("rgb",g)).map(z=>y(z)).join(", ")})`}function Gr(E){return g=>yi(g,E)}function di(E,g){const y=Kn(2),B=Kn(g==="float"?2:0);return`rgba(${E.getComponents("rgb",g).map((ve,Ge)=>(Ge===3?y:B)(ve)).join(", ")})`}function Ii(E){return g=>di(g,E)}function Pr(E){const g=[Kn(0),He,He];return`hsl(${Zr(E.getComponents("hsl")).map((B,z)=>g[z](B)).join(", ")})`}function lr(E){const g=[Kn(0),He,He,Kn(2)];return`hsla(${E.getComponents("hsl").map((B,z)=>g[z](B)).join(", ")})`}function Qa(E,g){const y=Kn(g==="float"?2:0),B=["r","g","b"];return`{${Zr(E.getComponents("rgb",g)).map((ve,Ge)=>`${B[Ge]}: ${y(ve)}`).join(", ")}}`}function kr(E){return g=>Qa(g,E)}function ta(E,g){const y=Kn(2),B=Kn(g==="float"?2:0),z=["r","g","b","a"];return`{${E.getComponents("rgb",g).map((Ge,Mt)=>{const ln=Mt===3?y:B;return`${z[Mt]}: ${ln(Ge)}`}).join(", ")}}`}function Ba(E){return g=>ta(g,E)}const va=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:ri},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Hr},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:Pr},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:lr},...["int","float"].reduce((E,g)=>[...E,{format:{alpha:!1,mode:"rgb",notation:"func",type:g},stringifier:Gr(g)},{format:{alpha:!0,mode:"rgb",notation:"func",type:g},stringifier:Ii(g)},{format:{alpha:!1,mode:"rgb",notation:"object",type:g},stringifier:kr(g)},{format:{alpha:!0,mode:"rgb",notation:"object",type:g},stringifier:Ba(g)}],[])];function xr(E){return va.reduce((g,y)=>g||(ka(y.format,E)?y.stringifier:null),null)}const Cr=C("apl");class Eo{constructor(g,y){this.onValueChange_=this.onValueChange_.bind(this),this.value=y.value,this.value.emitter.on("change",this.onValueChange_),this.element=g.createElement("div"),this.element.classList.add(Cr()),y.viewProps.bindClassModifiers(this.element),y.viewProps.bindTabIndex(this.element);const B=g.createElement("div");B.classList.add(Cr("b")),this.element.appendChild(B);const z=g.createElement("div");z.classList.add(Cr("c")),B.appendChild(z),this.colorElem_=z;const ve=g.createElement("div");ve.classList.add(Cr("m")),this.element.appendChild(ve),this.markerElem_=ve;const Ge=g.createElement("div");Ge.classList.add(Cr("p")),this.markerElem_.appendChild(Ge),this.previewElem_=Ge,this.update_()}update_(){const g=this.value.rawValue,y=g.getComponents("rgb"),B=new Jt([y[0],y[1],y[2],0],"rgb"),z=new Jt([y[0],y[1],y[2],255],"rgb"),ve=["to right",di(B),di(z)];this.colorElem_.style.background=`linear-gradient(${ve.join(",")})`,this.previewElem_.style.backgroundColor=di(g);const Ge=an(y[3],0,1,0,100);this.markerElem_.style.left=`${Ge}%`}onValueChange_(){this.update_()}}class $c{constructor(g,y){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=y.value,this.viewProps=y.viewProps,this.view=new Eo(g,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ti(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(g,y){if(!g.point)return;const B=g.point.x/g.bounds.width,z=this.value.rawValue,[ve,Ge,Mt]=z.getComponents("hsv");this.value.setRawValue(new Jt([ve,Ge,Mt,B],"hsv"),y)}onPointerDown_(g){this.handlePointerEvent_(g.data,{forceEmit:!1,last:!1})}onPointerMove_(g){this.handlePointerEvent_(g.data,{forceEmit:!1,last:!1})}onPointerUp_(g){this.handlePointerEvent_(g.data,{forceEmit:!0,last:!0})}onKeyDown_(g){const y=re(Tr(!0),at(g));if(y===0)return;const B=this.value.rawValue,[z,ve,Ge,Mt]=B.getComponents("hsv");this.value.setRawValue(new Jt([z,ve,Ge,Mt+y],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(g){re(Tr(!0),at(g))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const dr=C("coltxt");function ls(E){const g=E.createElement("select"),y=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return g.appendChild(y.reduce((B,z)=>{const ve=E.createElement("option");return ve.textContent=z.text,ve.value=z.value,B.appendChild(ve),B},E.createDocumentFragment())),g}class jo{constructor(g,y){this.element=g.createElement("div"),this.element.classList.add(dr()),y.viewProps.bindClassModifiers(this.element);const B=g.createElement("div");B.classList.add(dr("m")),this.modeElem_=ls(g),this.modeElem_.classList.add(dr("ms")),B.appendChild(this.modeSelectElement),y.viewProps.bindDisabled(this.modeElem_);const z=g.createElement("div");z.classList.add(dr("mm")),z.appendChild($(g,"dropdown")),B.appendChild(z),this.element.appendChild(B);const ve=g.createElement("div");ve.classList.add(dr("w")),this.element.appendChild(ve),this.textsElem_=ve,this.textViews_=y.textViews,this.applyTextViews_(),P(y.colorMode,Ge=>{this.modeElem_.value=Ge})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(g){this.textViews_=g,this.applyTextViews_()}applyTextViews_(){te(this.textsElem_);const g=this.element.ownerDocument;this.textViews_.forEach(y=>{const B=g.createElement("div");B.classList.add(dr("c")),B.appendChild(y.element),this.textsElem_.appendChild(B)})}}function xp(E){return Kn(E==="float"?2:0)}function fm(E,g,y){const B=it(E,g)[y];return new Ma({min:0,max:B})}function Xc(E,g,y){return new mr(E,{arrayPosition:y===0?"fst":y===3-1?"lst":"mid",baseStep:Tr(!1),parser:g.parser,props:Y.fromObject({draggingScale:g.colorType==="float"?.01:1,formatter:xp(g.colorType)}),value:J(0,{constraint:fm(g.colorMode,g.colorType,y)}),viewProps:g.viewProps})}class qa{constructor(g,y){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=y.colorType,this.parser_=y.parser,this.value=y.value,this.viewProps=y.viewProps,this.colorMode=J(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(g),this.view=new jo(g,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(g){const y={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},B=[Xc(g,y,0),Xc(g,y,1),Xc(g,y,2)];return B.forEach((z,ve)=>{ie({primary:this.value,secondary:z.value,forward:Ge=>Ge.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[ve],backward:(Ge,Mt)=>{const ln=this.colorMode.rawValue,Pn=Ge.rawValue.getComponents(ln,this.colorType_);return Pn[ve]=Mt.rawValue,new Jt(Js(Zr(Pn),Pn[3]),ln,this.colorType_)}})}),B}onModeSelectChange_(g){const y=g.currentTarget;this.colorMode.rawValue=y.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const So=C("hpl");class Rh{constructor(g,y){this.onValueChange_=this.onValueChange_.bind(this),this.value=y.value,this.value.emitter.on("change",this.onValueChange_),this.element=g.createElement("div"),this.element.classList.add(So()),y.viewProps.bindClassModifiers(this.element),y.viewProps.bindTabIndex(this.element);const B=g.createElement("div");B.classList.add(So("c")),this.element.appendChild(B);const z=g.createElement("div");z.classList.add(So("m")),this.element.appendChild(z),this.markerElem_=z,this.update_()}update_(){const g=this.value.rawValue,[y]=g.getComponents("hsv");this.markerElem_.style.backgroundColor=yi(new Jt([y,100,100],"hsv"));const B=an(y,0,360,0,100);this.markerElem_.style.left=`${B}%`}onValueChange_(){this.update_()}}class K{constructor(g,y){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=y.value,this.viewProps=y.viewProps,this.view=new Rh(g,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ti(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(g,y){if(!g.point)return;const B=an(vt(g.point.x,0,g.bounds.width),0,g.bounds.width,0,360),z=this.value.rawValue,[,ve,Ge,Mt]=z.getComponents("hsv");this.value.setRawValue(new Jt([B,ve,Ge,Mt],"hsv"),y)}onPointerDown_(g){this.handlePointerEvent_(g.data,{forceEmit:!1,last:!1})}onPointerMove_(g){this.handlePointerEvent_(g.data,{forceEmit:!1,last:!1})}onPointerUp_(g){this.handlePointerEvent_(g.data,{forceEmit:!0,last:!0})}onKeyDown_(g){const y=re(Tr(!1),at(g));if(y===0)return;const B=this.value.rawValue,[z,ve,Ge,Mt]=B.getComponents("hsv");this.value.setRawValue(new Jt([z+y,ve,Ge,Mt],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(g){re(Tr(!1),at(g))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Du=C("svp"),Cp=64;class Wo{constructor(g,y){this.onValueChange_=this.onValueChange_.bind(this),this.value=y.value,this.value.emitter.on("change",this.onValueChange_),this.element=g.createElement("div"),this.element.classList.add(Du()),y.viewProps.bindClassModifiers(this.element),y.viewProps.bindTabIndex(this.element);const B=g.createElement("canvas");B.height=Cp,B.width=Cp,B.classList.add(Du("c")),this.element.appendChild(B),this.canvasElement=B;const z=g.createElement("div");z.classList.add(Du("m")),this.element.appendChild(z),this.markerElem_=z,this.update_()}update_(){const g=Be(this.canvasElement);if(!g)return;const B=this.value.rawValue.getComponents("hsv"),z=this.canvasElement.width,ve=this.canvasElement.height,Ge=g.getImageData(0,0,z,ve),Mt=Ge.data;for(let Di=0;Di<ve;Di++)for(let Pi=0;Pi<z;Pi++){const Fu=an(Pi,0,z,0,100),zh=an(Di,0,ve,100,0),Xd=Ys(B[0],Fu,zh),Yd=(Di*z+Pi)*4;Mt[Yd]=Xd[0],Mt[Yd+1]=Xd[1],Mt[Yd+2]=Xd[2],Mt[Yd+3]=255}g.putImageData(Ge,0,0);const ln=an(B[1],0,100,0,100);this.markerElem_.style.left=`${ln}%`;const Pn=an(B[2],0,100,100,0);this.markerElem_.style.top=`${Pn}%`}onValueChange_(){this.update_()}}class wi{constructor(g,y){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=y.value,this.viewProps=y.viewProps,this.view=new Wo(g,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ti(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(g,y){if(!g.point)return;const B=an(g.point.x,0,g.bounds.width,0,100),z=an(g.point.y,0,g.bounds.height,100,0),[ve,,,Ge]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Jt([ve,B,z,Ge],"hsv"),y)}onPointerDown_(g){this.handlePointerEvent_(g.data,{forceEmit:!1,last:!1})}onPointerMove_(g){this.handlePointerEvent_(g.data,{forceEmit:!1,last:!1})}onPointerUp_(g){this.handlePointerEvent_(g.data,{forceEmit:!0,last:!0})}onKeyDown_(g){qt(g.key)&&g.preventDefault();const[y,B,z,ve]=this.value.rawValue.getComponents("hsv"),Ge=Tr(!1),Mt=re(Ge,at(g)),ln=re(Ge,Oe(g));Mt===0&&ln===0||this.value.setRawValue(new Jt([y,B+Mt,z+ln,ve],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(g){const y=Tr(!1),B=re(y,at(g)),z=re(y,Oe(g));B===0&&z===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class AE{constructor(g,y){this.value=y.value,this.viewProps=y.viewProps,this.hPaletteC_=new K(g,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new wi(g,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=y.supportsAlpha?{palette:new $c(g,{value:this.value,viewProps:this.viewProps}),text:new mr(g,{parser:Ls,baseStep:.1,props:Y.fromObject({draggingScale:.01,formatter:Kn(2)}),value:J(0,{constraint:new Ma({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&ie({primary:this.value,secondary:this.alphaIcs_.text.value,forward:B=>B.rawValue.getComponents()[3],backward:(B,z)=>{const ve=B.rawValue.getComponents();return ve[3]=z.rawValue,new Jt(ve,B.rawValue.mode)}}),this.textC_=new qa(g,{colorType:y.colorType,parser:Ls,value:this.value,viewProps:this.viewProps}),this.view=new qc(g,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:y.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}get textController(){return this.textC_}}const Rv=C("colsw");class _E{constructor(g,y){this.onValueChange_=this.onValueChange_.bind(this),y.value.emitter.on("change",this.onValueChange_),this.value=y.value,this.element=g.createElement("div"),this.element.classList.add(Rv()),y.viewProps.bindClassModifiers(this.element);const B=g.createElement("div");B.classList.add(Rv("sw")),this.element.appendChild(B),this.swatchElem_=B;const z=g.createElement("button");z.classList.add(Rv("b")),y.viewProps.bindDisabled(z),this.element.appendChild(z),this.buttonElement=z,this.update_()}update_(){const g=this.value.rawValue;this.swatchElem_.style.backgroundColor=Hr(g)}onValueChange_(){this.update_()}}class Dh{constructor(g,y){this.value=y.value,this.viewProps=y.viewProps,this.view=new _E(g,{value:this.value,viewProps:this.viewProps})}}class Dv{constructor(g,y){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=y.value,this.viewProps=y.viewProps,this.foldable_=$t.create(y.expanded),this.swatchC_=new Dh(g,{value:this.value,viewProps:this.viewProps});const B=this.swatchC_.view.buttonElement;B.addEventListener("blur",this.onButtonBlur_),B.addEventListener("click",this.onButtonClick_),this.textC_=new Vd(g,{parser:y.parser,props:Y.fromObject({formatter:y.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Ns(g,{foldable:this.foldable_,pickerLayout:y.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=y.pickerLayout==="popup"?new Ud(g,{viewProps:this.viewProps}):null;const z=new AE(g,{colorType:y.colorType,supportsAlpha:y.supportsAlpha,value:this.value,viewProps:this.viewProps});z.view.allFocusableElements.forEach(ve=>{ve.addEventListener("blur",this.onPopupChildBlur_),ve.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=z,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(z.view.element),ie({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:ve=>ve.rawValue,backward:(ve,Ge)=>Ge.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),It(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(g){if(!this.popC_)return;const y=this.view.element,B=g.relatedTarget;(!B||!y.contains(B))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(g){if(!this.popC_)return;const y=this.popC_.view.element,B=Vt(g);B&&y.contains(B)||B&&B===this.swatchC_.view.buttonElement&&!ze(y.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(g){this.popC_?g.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&g.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function bE(E,g){return Jt.isColorObject(E)?Jt.fromObject(E,g):Jt.black(g)}function yE(E){return Zr(E.getComponents("rgb")).reduce((g,y)=>g<<8|Math.floor(y)&255,0)}function wE(E){return E.getComponents("rgb").reduce((g,y,B)=>{const z=Math.floor(B===3?y*255:y)&255;return g<<8|z},0)>>>0}function xE(E){return new Jt([E>>16&255,E>>8&255,E&255],"rgb")}function Yc(E){return new Jt([E>>24&255,E>>16&255,E>>8&255,an(E&255,0,255,0,1)],"rgb")}function CE(E){return typeof E!="number"?Jt.black():xE(E)}function EE(E){return typeof E!="number"?Jt.black():Yc(E)}function SE(E){const g=xr(E);return g?(y,B)=>{Yr(y,g(B))}:null}function ME(E){const g=E?wE:yE;return(y,B)=>{Yr(y,g(B))}}function TE(E,g,y){const B=g.toRgbaObject(y);E.writeProperty("r",B.r),E.writeProperty("g",B.g),E.writeProperty("b",B.b),E.writeProperty("a",B.a)}function Kc(E,g,y){const B=g.toRgbaObject(y);E.writeProperty("r",B.r),E.writeProperty("g",B.g),E.writeProperty("b",B.b)}function IE(E,g){return(y,B)=>{E?TE(y,B,g):Kc(y,B,g)}}function Lv(E){var g;return!!(E!=null&&E.alpha||!((g=E==null?void 0:E.color)===null||g===void 0)&&g.alpha)}function PE(E){return E?g=>Hr(g,"0x"):g=>ri(g,"0x")}function kE(E){return"color"in E||"view"in E&&E.view==="color"}const BE={id:"input-color-number",type:"input",accept:(E,g)=>{if(typeof E!="number"||!kE(g))return null;const y=Go(g);return y?{initialValue:E,params:y}:null},binding:{reader:E=>Lv(E.params)?EE:CE,equals:Jt.equals,writer:E=>ME(Lv(E.params))},controller:E=>{const g=Lv(E.params),y="expanded"in E.params?E.params.expanded:void 0,B="picker"in E.params?E.params.picker:void 0;return new Dv(E.document,{colorType:"int",expanded:y??!1,formatter:PE(g),parser:ni("int"),pickerLayout:B??"popup",supportsAlpha:g,value:E.value,viewProps:E.viewProps})}};function Lh(E){return Jt.isRgbaColorObject(E)}function RE(E){return g=>bE(g,E)}function DE(E,g){return y=>E?ta(y,g):Qa(y,g)}const Bl={id:"input-color-object",type:"input",accept:(E,g)=>{if(!Jt.isColorObject(E))return null;const y=Go(g);return y?{initialValue:E,params:y}:null},binding:{reader:E=>RE(Ti(E.params)),equals:Jt.equals,writer:E=>IE(Lh(E.initialValue),Ti(E.params))},controller:E=>{var g;const y=Jt.isRgbaColorObject(E.initialValue),B="expanded"in E.params?E.params.expanded:void 0,z="picker"in E.params?E.params.picker:void 0,ve=(g=Ti(E.params))!==null&&g!==void 0?g:"int";return new Dv(E.document,{colorType:ve,expanded:B??!1,formatter:DE(y,ve),parser:ni(ve),pickerLayout:z??"popup",supportsAlpha:y,value:E.value,viewProps:E.viewProps})}},LE={id:"input-color-string",type:"input",accept:(E,g)=>{if(typeof E!="string"||"view"in g&&g.view==="text")return null;const y=xi(E,Ti(g));if(!y||!xr(y))return null;const z=Go(g);return z?{initialValue:E,params:z}:null},binding:{reader:E=>{var g;return en((g=Ti(E.params))!==null&&g!==void 0?g:"int")},equals:Jt.equals,writer:E=>{const g=xi(E.initialValue,Ti(E.params));if(!g)throw A.shouldNeverHappen();const y=SE(g);if(!y)throw A.notBindable();return y}},controller:E=>{const g=xi(E.initialValue,Ti(E.params));if(!g)throw A.shouldNeverHappen();const y=xr(g);if(!y)throw A.shouldNeverHappen();const B="expanded"in E.params?E.params.expanded:void 0,z="picker"in E.params?E.params.picker:void 0;return new Dv(E.document,{colorType:g.type,expanded:B??!1,formatter:y,parser:ni(g.type),pickerLayout:z??"popup",supportsAlpha:g.alpha,value:E.value,viewProps:E.viewProps})}};class Lu{constructor(g){this.components=g.components,this.asm_=g.assembly}constrain(g){const y=this.asm_.toComponents(g).map((B,z)=>{var ve,Ge;return(Ge=(ve=this.components[z])===null||ve===void 0?void 0:ve.constrain(B))!==null&&Ge!==void 0?Ge:B});return this.asm_.fromComponents(y)}}const wb=C("pndtxt");class OE{constructor(g,y){this.textViews=y.textViews,this.element=g.createElement("div"),this.element.classList.add(wb()),this.textViews.forEach(B=>{const z=g.createElement("div");z.classList.add(wb("a")),z.appendChild(B.element),this.element.appendChild(z)})}}function NE(E,g,y){return new mr(E,{arrayPosition:y===0?"fst":y===g.axes.length-1?"lst":"mid",baseStep:g.axes[y].baseStep,parser:g.parser,props:g.axes[y].textProps,value:J(0,{constraint:g.axes[y].constraint}),viewProps:g.viewProps})}class pm{constructor(g,y){this.value=y.value,this.viewProps=y.viewProps,this.acs_=y.axes.map((B,z)=>NE(g,y,z)),this.acs_.forEach((B,z)=>{ie({primary:this.value,secondary:B.value,forward:ve=>y.assembly.toComponents(ve.rawValue)[z],backward:(ve,Ge)=>{const Mt=y.assembly.toComponents(ve.rawValue);return Mt[z]=Ge.rawValue,y.assembly.fromComponents(Mt)}})}),this.view=new OE(g,{textViews:this.acs_.map(B=>B.view)})}}function Ov(E,g){return"step"in E&&!h(E.step)?new Hc(E.step,g):null}function xb(E){return!h(E.max)&&!h(E.min)?new Ma({max:E.max,min:E.min}):!h(E.max)||!h(E.min)?new Iu({max:E.max,min:E.min}):null}function FE(E){const g=Sa(E,Ma);if(g)return[g.values.get("min"),g.values.get("max")];const y=Sa(E,Iu);return y?[y.minValue,y.maxValue]:[void 0,void 0]}function Nv(E,g){const y=[],B=Ov(E,g);B&&y.push(B);const z=xb(E);z&&y.push(z);const ve=wo(E.options);return ve&&y.push(ve),new sc(y)}const Ep={id:"input-number",type:"input",accept:(E,g)=>{if(typeof E!="number")return null;const y=oe,B=je(g,{format:y.optional.function,max:y.optional.number,min:y.optional.number,options:y.optional.custom(Os),step:y.optional.number});return B?{initialValue:E,params:B}:null},binding:{reader:E=>Bh,constraint:E=>Nv(E.params,E.initialValue),writer:E=>Yr},controller:E=>{var g;const y=E.value,B=E.constraint,z=B&&Sa(B,Il);if(z)return new Ho(E.document,{props:new Y({options:z.values.value("options")}),value:y,viewProps:E.viewProps});const ve=(g="format"in E.params?E.params.format:void 0)!==null&&g!==void 0?g:Kn(bs(B,y.rawValue)),Ge=B&&Sa(B,Ma);return Ge?new In(E.document,{baseStep:Kr(B),parser:Ls,sliderProps:new Y({maxValue:Ge.values.value("max"),minValue:Ge.values.value("min")}),textProps:Y.fromObject({draggingScale:bi(B,y.rawValue),formatter:ve}),value:y,viewProps:E.viewProps}):new mr(E.document,{baseStep:Kr(B),parser:Ls,props:Y.fromObject({draggingScale:bi(B,y.rawValue),formatter:ve}),value:y,viewProps:E.viewProps})}};class Rl{constructor(g=0,y=0){this.x=g,this.y=y}getComponents(){return[this.x,this.y]}static isObject(g){if(h(g))return!1;const y=g.x,B=g.y;return!(typeof y!="number"||typeof B!="number")}static equals(g,y){return g.x===y.x&&g.y===y.y}toObject(){return{x:this.x,y:this.y}}}const Cb={toComponents:E=>E.getComponents(),fromComponents:E=>new Rl(...E)},Oh=C("p2d");class zE{constructor(g,y){this.element=g.createElement("div"),this.element.classList.add(Oh()),y.viewProps.bindClassModifiers(this.element),P(y.expanded,R(this.element,Oh(void 0,"expanded")));const B=g.createElement("div");B.classList.add(Oh("h")),this.element.appendChild(B);const z=g.createElement("button");z.classList.add(Oh("b")),z.appendChild($(g,"p2dpad")),y.viewProps.bindDisabled(z),B.appendChild(z),this.buttonElement=z;const ve=g.createElement("div");if(ve.classList.add(Oh("t")),B.appendChild(ve),this.textElement=ve,y.pickerLayout==="inline"){const Ge=g.createElement("div");Ge.classList.add(Oh("p")),this.element.appendChild(Ge),this.pickerElement=Ge}else this.pickerElement=null}}const Ra=C("p2dp");class Fv{constructor(g,y){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=y.invertsY,this.maxValue_=y.maxValue,this.element=g.createElement("div"),this.element.classList.add(Ra()),y.layout==="popup"&&this.element.classList.add(Ra(void 0,"p")),y.viewProps.bindClassModifiers(this.element);const B=g.createElement("div");B.classList.add(Ra("p")),y.viewProps.bindTabIndex(B),this.element.appendChild(B),this.padElement=B;const z=g.createElementNS(be,"svg");z.classList.add(Ra("g")),this.padElement.appendChild(z),this.svgElem_=z;const ve=g.createElementNS(be,"line");ve.classList.add(Ra("ax")),ve.setAttributeNS(null,"x1","0"),ve.setAttributeNS(null,"y1","50%"),ve.setAttributeNS(null,"x2","100%"),ve.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(ve);const Ge=g.createElementNS(be,"line");Ge.classList.add(Ra("ax")),Ge.setAttributeNS(null,"x1","50%"),Ge.setAttributeNS(null,"y1","0"),Ge.setAttributeNS(null,"x2","50%"),Ge.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(Ge);const Mt=g.createElementNS(be,"line");Mt.classList.add(Ra("l")),Mt.setAttributeNS(null,"x1","50%"),Mt.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(Mt),this.lineElem_=Mt;const ln=g.createElement("div");ln.classList.add(Ra("m")),this.padElement.appendChild(ln),this.markerElem_=ln,y.value.emitter.on("change",this.onValueChange_),this.value=y.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[g,y]=this.value.rawValue.getComponents(),B=this.maxValue_,z=an(g,-B,+B,0,100),ve=an(y,-B,+B,0,100),Ge=this.invertsY_?100-ve:ve;this.lineElem_.setAttributeNS(null,"x2",`${z}%`),this.lineElem_.setAttributeNS(null,"y2",`${Ge}%`),this.markerElem_.style.left=`${z}%`,this.markerElem_.style.top=`${Ge}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Ou(E,g,y){return[re(g[0],at(E)),re(g[1],Oe(E))*(y?1:-1)]}class $o{constructor(g,y){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=y.value,this.viewProps=y.viewProps,this.baseSteps_=y.baseSteps,this.maxValue_=y.maxValue,this.invertsY_=y.invertsY,this.view=new Fv(g,{invertsY:this.invertsY_,layout:y.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ti(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(g,y){if(!g.point)return;const B=this.maxValue_,z=an(g.point.x,0,g.bounds.width,-B,+B),ve=an(this.invertsY_?g.bounds.height-g.point.y:g.point.y,0,g.bounds.height,-B,+B);this.value.setRawValue(new Rl(z,ve),y)}onPointerDown_(g){this.handlePointerEvent_(g.data,{forceEmit:!1,last:!1})}onPointerMove_(g){this.handlePointerEvent_(g.data,{forceEmit:!1,last:!1})}onPointerUp_(g){this.handlePointerEvent_(g.data,{forceEmit:!0,last:!0})}onPadKeyDown_(g){qt(g.key)&&g.preventDefault();const[y,B]=Ou(g,this.baseSteps_,this.invertsY_);y===0&&B===0||this.value.setRawValue(new Rl(this.value.rawValue.x+y,this.value.rawValue.y+B),{forceEmit:!1,last:!1})}onPadKeyUp_(g){const[y,B]=Ou(g,this.baseSteps_,this.invertsY_);y===0&&B===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class UE{constructor(g,y){var B,z;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=y.value,this.viewProps=y.viewProps,this.foldable_=$t.create(y.expanded),this.popC_=y.pickerLayout==="popup"?new Ud(g,{viewProps:this.viewProps}):null;const ve=new $o(g,{baseSteps:[y.axes[0].baseStep,y.axes[1].baseStep],invertsY:y.invertsY,layout:y.pickerLayout,maxValue:y.maxValue,value:this.value,viewProps:this.viewProps});ve.view.allFocusableElements.forEach(Ge=>{Ge.addEventListener("blur",this.onPopupChildBlur_),Ge.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=ve,this.textC_=new pm(g,{assembly:Cb,axes:y.axes,parser:y.parser,value:this.value,viewProps:this.viewProps}),this.view=new zE(g,{expanded:this.foldable_.value("expanded"),pickerLayout:y.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(B=this.view.buttonElement)===null||B===void 0||B.addEventListener("blur",this.onPadButtonBlur_),(z=this.view.buttonElement)===null||z===void 0||z.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),ie({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:Ge=>Ge.rawValue,backward:(Ge,Mt)=>Mt.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),It(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(g){if(!this.popC_)return;const y=this.view.element,B=g.relatedTarget;(!B||!y.contains(B))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(g){if(!this.popC_)return;const y=this.popC_.view.element,B=Vt(g);B&&y.contains(B)||B&&B===this.view.buttonElement&&!ze(y.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(g){this.popC_?g.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&g.key==="Escape"&&this.view.buttonElement.focus()}}class Nh{constructor(g=0,y=0,B=0){this.x=g,this.y=y,this.z=B}getComponents(){return[this.x,this.y,this.z]}static isObject(g){if(h(g))return!1;const y=g.x,B=g.y,z=g.z;return!(typeof y!="number"||typeof B!="number"||typeof z!="number")}static equals(g,y){return g.x===y.x&&g.y===y.y&&g.z===y.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const zv={toComponents:E=>E.getComponents(),fromComponents:E=>new Nh(...E)};function Sp(E){return Nh.isObject(E)?new Nh(E.x,E.y,E.z):new Nh}function Nu(E,g){E.writeProperty("x",g.x),E.writeProperty("y",g.y),E.writeProperty("z",g.z)}function Eb(E,g){return new Lu({assembly:zv,components:[dc("x"in E?E.x:void 0,g.x),dc("y"in E?E.y:void 0,g.y),dc("z"in E?E.z:void 0,g.z)]})}function Uv(E,g){return{baseStep:Kr(g),constraint:g,textProps:Y.fromObject({draggingScale:bi(g,E),formatter:Kn(bs(g,E))})}}const mm={id:"input-point3d",type:"input",accept:(E,g)=>{if(!Nh.isObject(E))return null;const y=oe,B=je(g,{x:y.optional.custom(br),y:y.optional.custom(br),z:y.optional.custom(br)});return B?{initialValue:E,params:B}:null},binding:{reader:E=>Sp,constraint:E=>Eb(E.params,E.initialValue),equals:Nh.equals,writer:E=>Nu},controller:E=>{const g=E.value,y=E.constraint;if(!(y instanceof Lu))throw A.shouldNeverHappen();return new pm(E.document,{assembly:zv,axes:[Uv(g.rawValue.x,y.components[0]),Uv(g.rawValue.y,y.components[1]),Uv(g.rawValue.z,y.components[2])],parser:Ls,value:g,viewProps:E.viewProps})}};class jd{constructor(g=0,y=0,B=0,z=0){this.x=g,this.y=y,this.z=B,this.w=z}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(g){if(h(g))return!1;const y=g.x,B=g.y,z=g.z,ve=g.w;return!(typeof y!="number"||typeof B!="number"||typeof z!="number"||typeof ve!="number")}static equals(g,y){return g.x===y.x&&g.y===y.y&&g.z===y.z&&g.w===y.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Vv={toComponents:E=>E.getComponents(),fromComponents:E=>new jd(...E)};function Aa(E){return jd.isObject(E)?new jd(E.x,E.y,E.z,E.w):new jd}function Hv(E,g){E.writeProperty("x",g.x),E.writeProperty("y",g.y),E.writeProperty("z",g.z),E.writeProperty("w",g.w)}function Sb(E,g){return new Lu({assembly:Vv,components:[dc("x"in E?E.x:void 0,g.x),dc("y"in E?E.y:void 0,g.y),dc("z"in E?E.z:void 0,g.z),dc("w"in E?E.w:void 0,g.w)]})}function hc(E,g){return{baseStep:Kr(g),constraint:g,textProps:Y.fromObject({draggingScale:bi(g,E),formatter:Kn(bs(g,E))})}}const Gv={id:"input-point4d",type:"input",accept:(E,g)=>{if(!jd.isObject(E))return null;const y=oe,B=je(g,{x:y.optional.custom(br),y:y.optional.custom(br),z:y.optional.custom(br),w:y.optional.custom(br)});return B?{initialValue:E,params:B}:null},binding:{reader:E=>Aa,constraint:E=>Sb(E.params,E.initialValue),equals:jd.equals,writer:E=>Hv},controller:E=>{const g=E.value,y=E.constraint;if(!(y instanceof Lu))throw A.shouldNeverHappen();return new pm(E.document,{assembly:Vv,axes:g.rawValue.getComponents().map((B,z)=>hc(B,y.components[z])),parser:Ls,value:g,viewProps:E.viewProps})}};function gm(E){const g=[],y=wo(E.options);return y&&g.push(y),new sc(g)}const Fh={id:"input-string",type:"input",accept:(E,g)=>{if(typeof E!="string")return null;const B=je(g,{options:oe.optional.custom(Os)});return B?{initialValue:E,params:B}:null},binding:{reader:E=>X,constraint:E=>gm(E.params),writer:E=>Yr},controller:E=>{const g=E.document,y=E.value,B=E.constraint,z=B&&Sa(B,Il);return z?new Ho(g,{props:new Y({options:z.values.value("options")}),value:y,viewProps:E.viewProps}):new Vd(g,{parser:ve=>ve,props:Y.fromObject({formatter:xe}),value:y,viewProps:E.viewProps})}},Wd={monitor:{defaultInterval:200,defaultLineCount:3}},Da=C("mll");class Qv{constructor(g,y){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=y.formatter,this.element=g.createElement("div"),this.element.classList.add(Da()),y.viewProps.bindClassModifiers(this.element);const B=g.createElement("textarea");B.classList.add(Da("i")),B.style.height=`calc(var(--bld-us) * ${y.lineCount})`,B.readOnly=!0,y.viewProps.bindDisabled(B),this.element.appendChild(B),this.textareaElem_=B,y.value.emitter.on("change",this.onValueUpdate_),this.value=y.value,this.update_()}update_(){const g=this.textareaElem_,y=g.scrollTop===g.scrollHeight-g.clientHeight,B=[];this.value.rawValue.forEach(z=>{z!==void 0&&B.push(this.formatter_(z))}),g.textContent=B.join(`
`),y&&(g.scrollTop=g.scrollHeight)}onValueUpdate_(){this.update_()}}class qv{constructor(g,y){this.value=y.value,this.viewProps=y.viewProps,this.view=new Qv(g,{formatter:y.formatter,lineCount:y.lineCount,value:this.value,viewProps:this.viewProps})}}const Mb=C("sgl");class VE{constructor(g,y){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=y.formatter,this.element=g.createElement("div"),this.element.classList.add(Mb()),y.viewProps.bindClassModifiers(this.element);const B=g.createElement("input");B.classList.add(Mb("i")),B.readOnly=!0,B.type="text",y.viewProps.bindDisabled(B),this.element.appendChild(B),this.inputElement=B,y.value.emitter.on("change",this.onValueUpdate_),this.value=y.value,this.update_()}update_(){const g=this.value.rawValue,y=g[g.length-1];this.inputElement.value=y!==void 0?this.formatter_(y):""}onValueUpdate_(){this.update_()}}class Mp{constructor(g,y){this.value=y.value,this.viewProps=y.viewProps,this.view=new VE(g,{formatter:y.formatter,value:this.value,viewProps:this.viewProps})}}const HE={id:"monitor-bool",type:"monitor",accept:(E,g)=>{if(typeof E!="boolean")return null;const B=je(g,{lineCount:oe.optional.number});return B?{initialValue:E,params:B}:null},binding:{reader:E=>oc},controller:E=>{var g;return E.value.rawValue.length===1?new Mp(E.document,{formatter:Ta,value:E.value,viewProps:E.viewProps}):new qv(E.document,{formatter:Ta,lineCount:(g=E.params.lineCount)!==null&&g!==void 0?g:Wd.monitor.defaultLineCount,value:E.value,viewProps:E.viewProps})}},Xo=C("grl");class Tb{constructor(g,y){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=g.createElement("div"),this.element.classList.add(Xo()),y.viewProps.bindClassModifiers(this.element),this.formatter_=y.formatter,this.props_=y.props,this.cursor_=y.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const B=g.createElementNS(be,"svg");B.classList.add(Xo("g")),B.style.height=`calc(var(--bld-us) * ${y.lineCount})`,this.element.appendChild(B),this.svgElem_=B;const z=g.createElementNS(be,"polyline");this.svgElem_.appendChild(z),this.lineElem_=z;const ve=g.createElement("div");ve.classList.add(Xo("t"),C("tt")()),this.element.appendChild(ve),this.tooltipElem_=ve,y.value.emitter.on("change",this.onValueUpdate_),this.value=y.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const g=this.svgElem_.getBoundingClientRect(),y=this.value.rawValue.length-1,B=this.props_.get("minValue"),z=this.props_.get("maxValue"),ve=[];this.value.rawValue.forEach((Di,Pi)=>{if(Di===void 0)return;const Fu=an(Pi,0,y,0,g.width),zh=an(Di,B,z,g.height,0);ve.push([Fu,zh].join(","))}),this.lineElem_.setAttributeNS(null,"points",ve.join(" "));const Ge=this.tooltipElem_,Mt=this.value.rawValue[this.cursor_.rawValue];if(Mt===void 0){Ge.classList.remove(Xo("t","a"));return}const ln=an(this.cursor_.rawValue,0,y,0,g.width),Pn=an(Mt,B,z,g.height,0);Ge.style.left=`${ln}px`,Ge.style.top=`${Pn}px`,Ge.textContent=`${this.formatter_(Mt)}`,Ge.classList.contains(Xo("t","a"))||(Ge.classList.add(Xo("t","a"),Xo("t","in")),Ne(Ge),Ge.classList.remove(Xo("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class GE{constructor(g,y){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=y.props,this.value=y.value,this.viewProps=y.viewProps,this.cursor_=J(-1),this.view=new Tb(g,{cursor:this.cursor_,formatter:y.formatter,lineCount:y.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!ze(g))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const B=new ti(this.view.element);B.emitter.on("down",this.onGraphPointerDown_),B.emitter.on("move",this.onGraphPointerMove_),B.emitter.on("up",this.onGraphPointerUp_)}}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(g){const y=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(an(g.offsetX,0,y.width,0,this.value.rawValue.length))}onGraphPointerDown_(g){this.onGraphPointerMove_(g)}onGraphPointerMove_(g){if(!g.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(an(g.data.point.x,0,g.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function jv(E){return"format"in E&&!h(E.format)?E.format:Kn(2)}function Tp(E){var g;return E.value.rawValue.length===1?new Mp(E.document,{formatter:jv(E.params),value:E.value,viewProps:E.viewProps}):new qv(E.document,{formatter:jv(E.params),lineCount:(g=E.params.lineCount)!==null&&g!==void 0?g:Wd.monitor.defaultLineCount,value:E.value,viewProps:E.viewProps})}function QE(E){var g,y,B;return new GE(E.document,{formatter:jv(E.params),lineCount:(g=E.params.lineCount)!==null&&g!==void 0?g:Wd.monitor.defaultLineCount,props:Y.fromObject({maxValue:(y="max"in E.params?E.params.max:null)!==null&&y!==void 0?y:100,minValue:(B="min"in E.params?E.params.min:null)!==null&&B!==void 0?B:0}),value:E.value,viewProps:E.viewProps})}function Ib(E){return"view"in E&&E.view==="graph"}const Wv={id:"monitor-number",type:"monitor",accept:(E,g)=>{if(typeof E!="number")return null;const y=oe,B=je(g,{format:y.optional.function,lineCount:y.optional.number,max:y.optional.number,min:y.optional.number,view:y.optional.string});return B?{initialValue:E,params:B}:null},binding:{defaultBufferSize:E=>Ib(E)?64:1,reader:E=>Bh},controller:E=>Ib(E.params)?QE(E):Tp(E)},Pb={id:"monitor-string",type:"monitor",accept:(E,g)=>{if(typeof E!="string")return null;const y=oe,B=je(g,{lineCount:y.optional.number,multiline:y.optional.boolean});return B?{initialValue:E,params:B}:null},binding:{reader:E=>X},controller:E=>{var g;const y=E.value;return y.rawValue.length>1||"multiline"in E.params&&E.params.multiline?new qv(E.document,{formatter:xe,lineCount:(g=E.params.lineCount)!==null&&g!==void 0?g:Wd.monitor.defaultLineCount,value:y,viewProps:E.viewProps}):new Mp(E.document,{formatter:xe,value:y,viewProps:E.viewProps})}};function qE(E,g){var y;const B=E.accept(g.target.read(),g.params);if(h(B))return null;const z=oe,ve={target:g.target,initialValue:B.initialValue,params:B.params},Ge=E.binding.reader(ve),Mt=E.binding.constraint?E.binding.constraint(ve):void 0,ln=J(Ge(B.initialValue),{constraint:Mt,equals:E.binding.equals}),Pn=new Vc({reader:Ge,target:g.target,value:ln,writer:E.binding.writer(ve)}),Di=z.optional.boolean(g.params.disabled).value,Pi=z.optional.boolean(g.params.hidden).value,Fu=E.controller({constraint:Mt,document:g.document,initialValue:B.initialValue,params:B.params,value:Pn.value,viewProps:et.create({disabled:Di,hidden:Pi})});return new ei(g.document,{binding:Pn,blade:Nt(),props:Y.fromObject({label:"label"in g.params?(y=z.optional.string(g.params.label).value)!==null&&y!==void 0?y:null:g.target.key}),valueController:Fu})}function jE(E,g){return g===0?new Tl:new Ws(E,g??Wd.monitor.defaultInterval)}function WE(E,g){var y,B,z;const ve=oe,Ge=E.accept(g.target.read(),g.params);if(h(Ge))return null;const Mt={target:g.target,initialValue:Ge.initialValue,params:Ge.params},ln=E.binding.reader(Mt),Pn=(B=(y=ve.optional.number(g.params.bufferSize).value)!==null&&y!==void 0?y:E.binding.defaultBufferSize&&E.binding.defaultBufferSize(Ge.params))!==null&&B!==void 0?B:1,Di=ve.optional.number(g.params.interval).value,Pi=new Mh({reader:ln,target:g.target,ticker:jE(g.document,Di),value:rc(Pn)}),Fu=ve.optional.boolean(g.params.disabled).value,zh=ve.optional.boolean(g.params.hidden).value,Xd=E.controller({document:g.document,params:Ge.params,value:Pi.value,viewProps:et.create({disabled:Fu,hidden:zh})});return new er(g.document,{binding:Pi,blade:Nt(),props:Y.fromObject({label:"label"in g.params?(z=ve.optional.string(g.params.label).value)!==null&&z!==void 0?z:null:g.target.key}),valueController:Xd})}class kb{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(g){g.type==="blade"?this.pluginsMap_.blades.unshift(g):g.type==="input"?this.pluginsMap_.inputs.unshift(g):g.type==="monitor"&&this.pluginsMap_.monitors.unshift(g)}createInput(g,y,B){const z=y.read();if(h(z))throw new A({context:{key:y.key},type:"nomatchingcontroller"});const ve=this.pluginsMap_.inputs.reduce((Ge,Mt)=>Ge??qE(Mt,{document:g,target:y,params:B}),null);if(ve)return ve;throw new A({context:{key:y.key},type:"nomatchingcontroller"})}createMonitor(g,y,B){const z=this.pluginsMap_.monitors.reduce((ve,Ge)=>ve??WE(Ge,{document:g,params:B,target:y}),null);if(z)return z;throw new A({context:{key:y.key},type:"nomatchingcontroller"})}createBlade(g,y){const B=this.pluginsMap_.blades.reduce((z,ve)=>z??Ja(ve,{document:g,params:y}),null);if(!B)throw new A({type:"nomatchingview",context:{params:y}});return B}createBladeApi(g){if(g instanceof ei)return new gs(g);if(g instanceof er)return new vs(g);if(g instanceof ht)return new Ka(g,this);const y=this.pluginsMap_.blades.reduce((B,z)=>B??z.api({controller:g,pool:this}),null);if(!y)throw A.shouldNeverHappen();return y}}function $v(){const E=new kb;return[Lb,mm,Gv,Fh,Ep,LE,Bl,BE,Qc,HE,Pb,Wv,Bt,un,tr,hr].forEach(g=>{E.register(g)}),E}function $E(E){return Rl.isObject(E)?new Rl(E.x,E.y):new Rl}function Xv(E,g){E.writeProperty("x",g.x),E.writeProperty("y",g.y)}function dc(E,g){if(!E)return;const y=[],B=Ov(E,g);B&&y.push(B);const z=xb(E);return z&&y.push(z),new sc(y)}function Bb(E,g){return new Lu({assembly:Cb,components:[dc("x"in E?E.x:void 0,g.x),dc("y"in E?E.y:void 0,g.y)]})}function Yv(E,g){const[y,B]=E?FE(E):[];if(!h(y)||!h(B))return Math.max(Math.abs(y??0),Math.abs(B??0));const z=Kr(E);return Math.max(Math.abs(z)*10,Math.abs(g)*10)}function vm(E,g){const y=g instanceof Lu?g.components[0]:void 0,B=g instanceof Lu?g.components[1]:void 0,z=Yv(y,E.x),ve=Yv(B,E.y);return Math.max(z,ve)}function Rb(E,g){return{baseStep:Kr(g),constraint:g,textProps:Y.fromObject({draggingScale:bi(g,E),formatter:Kn(bs(g,E))})}}function Db(E){if(!("y"in E))return!1;const g=E.y;return g&&"inverted"in g?!!g.inverted:!1}const Lb={id:"input-point2d",type:"input",accept:(E,g)=>{if(!Rl.isObject(E))return null;const y=oe,B=je(g,{expanded:y.optional.boolean,picker:y.optional.custom(fn),x:y.optional.custom(br),y:y.optional.object({inverted:y.optional.boolean,max:y.optional.number,min:y.optional.number,step:y.optional.number})});return B?{initialValue:E,params:B}:null},binding:{reader:E=>$E,constraint:E=>Bb(E.params,E.initialValue),equals:Rl.equals,writer:E=>Xv},controller:E=>{const g=E.document,y=E.value,B=E.constraint;if(!(B instanceof Lu))throw A.shouldNeverHappen();const z="expanded"in E.params?E.params.expanded:void 0,ve="picker"in E.params?E.params.picker:void 0;return new UE(g,{axes:[Rb(y.rawValue.x,B.components[0]),Rb(y.rawValue.y,B.components[1])],expanded:z??!1,invertsY:Db(E.params),maxValue:vm(y.rawValue,B),parser:Ls,pickerLayout:ve??"popup",value:y,viewProps:E.viewProps})}};class Ob extends r{constructor(g){super(g),this.emitter_=new w,this.controller_.valueController.value.emitter.on("change",y=>{this.emitter_.emit("change",{event:new a(this,y.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(g){this.controller_.props.set("label",g)}get options(){return this.controller_.valueController.props.get("options")}set options(g){this.controller_.valueController.props.set("options",g)}get value(){return this.controller_.valueController.value.rawValue}set value(g){this.controller_.valueController.value.rawValue=g}on(g,y){const B=y.bind(this);return this.emitter_.on(g,z=>{B(z.event)}),this}}class Kv extends r{constructor(g){super(g),this.emitter_=new w,this.controller_.valueController.value.emitter.on("change",y=>{this.emitter_.emit("change",{event:new a(this,y.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(g){this.controller_.props.set("label",g)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(g){this.controller_.valueController.sliderController.props.set("maxValue",g)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(g){this.controller_.valueController.sliderController.props.set("minValue",g)}get value(){return this.controller_.valueController.value.rawValue}set value(g){this.controller_.valueController.value.rawValue=g}on(g,y){const B=y.bind(this);return this.emitter_.on(g,z=>{B(z.event)}),this}}class Nb extends r{constructor(g){super(g),this.emitter_=new w,this.controller_.valueController.value.emitter.on("change",y=>{this.emitter_.emit("change",{event:new a(this,y.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(g){this.controller_.props.set("label",g)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(g){this.controller_.valueController.props.set("formatter",g)}get value(){return this.controller_.valueController.value.rawValue}set value(g){this.controller_.valueController.value.rawValue=g}on(g,y){const B=y.bind(this);return this.emitter_.on(g,z=>{B(z.event)}),this}}const Jv=function(){return{id:"list",type:"blade",accept(E){const g=oe,y=je(E,{options:g.required.custom(Os),value:g.required.raw,view:g.required.constant("list"),label:g.optional.string});return y?{params:y}:null},controller(E){const g=new Il(On(E.params.options)),y=J(E.params.value,{constraint:g}),B=new Ho(E.document,{props:new Y({options:g.values.value("options")}),value:y,viewProps:E.viewProps});return new sn(E.document,{blade:E.blade,props:Y.fromObject({label:E.params.label}),valueController:B})},api(E){return!(E.controller instanceof sn)||!(E.controller.valueController instanceof Ho)?null:new Ob(E.controller)}}}();function Fb(E){return E.reduce((g,y)=>Object.assign(g,{[y.presetKey]:y.read()}),{})}function Zv(E,g){E.forEach(y=>{const B=g[y.target.presetKey];B!==void 0&&y.writer(y.target,y.reader(B))})}class XE extends Sl{constructor(g,y){super(g,y)}get element(){return this.controller_.view.element}importPreset(g){const y=this.controller_.rackController.rack.find(ei).map(B=>B.binding);Zv(y,g),this.refresh()}exportPreset(){const g=this.controller_.rackController.rack.find(ei).map(y=>y.binding.target);return Fb(g)}refresh(){this.controller_.rackController.rack.find(ei).forEach(g=>{g.binding.read()}),this.controller_.rackController.rack.find(er).forEach(g=>{g.binding.read()})}}class eA extends Yt{constructor(g,y){super(g,{expanded:y.expanded,blade:y.blade,props:y.props,root:!0,viewProps:y.viewProps})}}const ai={id:"slider",type:"blade",accept(E){const g=oe,y=je(E,{max:g.required.number,min:g.required.number,view:g.required.constant("slider"),format:g.optional.function,label:g.optional.string,value:g.optional.number});return y?{params:y}:null},controller(E){var g,y;const B=(g=E.params.value)!==null&&g!==void 0?g:0,z=new Ma({max:E.params.max,min:E.params.min}),ve=new In(E.document,{baseStep:1,parser:Ls,sliderProps:new Y({maxValue:z.values.value("max"),minValue:z.values.value("min")}),textProps:Y.fromObject({draggingScale:bi(void 0,B),formatter:(y=E.params.format)!==null&&y!==void 0?y:qd}),value:J(B,{constraint:z}),viewProps:E.viewProps});return new sn(E.document,{blade:E.blade,props:Y.fromObject({label:E.params.label}),valueController:ve})},api(E){return!(E.controller instanceof sn)||!(E.controller.valueController instanceof In)?null:new Kv(E.controller)}},YE=function(){return{id:"text",type:"blade",accept(E){const g=oe,y=je(E,{parse:g.required.function,value:g.required.raw,view:g.required.constant("text"),format:g.optional.function,label:g.optional.string});return y?{params:y}:null},controller(E){var g;const y=new Vd(E.document,{parser:E.params.parse,props:Y.fromObject({formatter:(g=E.params.format)!==null&&g!==void 0?g:B=>String(B)}),value:J(E.params.value),viewProps:E.viewProps});return new sn(E.document,{blade:E.blade,props:Y.fromObject({label:E.params.label}),valueController:y})},api(E){return!(E.controller instanceof sn)||!(E.controller.valueController instanceof Vd)?null:new Nb(E.controller)}}}();function KE(E){const g=E.createElement("div");return g.classList.add(C("dfw")()),E.body&&E.body.appendChild(g),g}function $d(E,g,y){if(E.querySelector(`style[data-tp-style=${g}]`))return;const B=E.createElement("style");B.dataset.tpStyle=g,B.textContent=y,E.head.appendChild(B)}class zb extends XE{constructor(g){var y,B;const z=g??{},ve=(y=z.document)!==null&&y!==void 0?y:fe(),Ge=$v(),Mt=new eA(ve,{expanded:z.expanded,blade:Nt(),props:Y.fromObject({title:z.title}),viewProps:et.create()});super(Mt,Ge),this.pool_=Ge,this.containerElem_=(B=z.container)!==null&&B!==void 0?B:KE(ve),this.containerElem_.appendChild(this.element),this.doc_=ve,this.usesDefaultWrapper_=!z.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw A.alreadyDisposed();return this.doc_}dispose(){const g=this.containerElem_;if(!g)throw A.alreadyDisposed();if(this.usesDefaultWrapper_){const y=g.parentElement;y&&y.removeChild(g)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(g){("plugin"in g?[g.plugin]:"plugins"in g?g.plugins:[]).forEach(B=>{this.pool_.register(B),this.embedPluginStyle_(B)})}embedPluginStyle_(g){g.css&&$d(this.document,`plugin-${g.id}`,g.css)}setUpDefaultPlugins_(){$d(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach(g=>{this.embedPluginStyle_(g)}),this.registerPlugin({plugins:[ai,Jv,hr,YE]})}}const JE=new n("3.1.10");t.BladeApi=r,t.ButtonApi=v,t.FolderApi=Sl,t.InputBindingApi=gs,t.ListApi=Ob,t.MonitorBindingApi=vs,t.Pane=zb,t.SeparatorApi=yn,t.SliderApi=Kv,t.TabApi=bo,t.TabPageApi=Tn,t.TextApi=Nb,t.TpChangeEvent=a,t.VERSION=JE,Object.defineProperty(t,"__esModule",{value:!0})})})(QR,QR.exports);var R4={},wh={};Object.defineProperty(wh,"__esModule",{value:!0});wh.BladeApi=void 0;var WZe=function(){function i(e){this.controller_=e}return Object.defineProperty(i.prototype,"element",{get:function(){return this.controller_.view.element},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"disabled",{get:function(){return this.controller_.viewProps.get("disabled")},set:function(e){this.controller_.viewProps.set("disabled",e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hidden",{get:function(){return this.controller_.viewProps.get("hidden")},set:function(e){this.controller_.viewProps.set("hidden",e)},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this.controller_.viewProps.set("disposed",!0)},i}();wh.BladeApi=WZe;var rV={};Object.defineProperty(rV,"__esModule",{value:!0});var sV={};Object.defineProperty(sV,"__esModule",{value:!0});var Fa={},MC=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Fa,"__esModule",{value:!0});Fa.TpTabSelectEvent=Fa.TpFoldEvent=Fa.TpUpdateEvent=Fa.TpChangeEvent=Fa.TpEvent=void 0;var C_=function(){function i(e){this.target=e}return i}();Fa.TpEvent=C_;var $Ze=function(i){MC(e,i);function e(t,n,r,s){var a=i.call(this,t)||this;return a.value=n,a.presetKey=r,a.last=s??!0,a}return e}(C_);Fa.TpChangeEvent=$Ze;var XZe=function(i){MC(e,i);function e(t,n,r){var s=i.call(this,t)||this;return s.value=n,s.presetKey=r,s}return e}(C_);Fa.TpUpdateEvent=XZe;var YZe=function(i){MC(e,i);function e(t,n){var r=i.call(this,t)||this;return r.expanded=n,r}return e}(C_);Fa.TpFoldEvent=YZe;var KZe=function(i){MC(e,i);function e(t,n){var r=i.call(this,t)||this;return r.index=n,r}return e}(C_);Fa.TpTabSelectEvent=KZe;var E_={},wl={},ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.isPropertyWritable=ui.deepEqualsArray=ui.isEmpty=ui.forceCast=void 0;function JZe(i){return i}ui.forceCast=JZe;function ZZe(i){return i==null}ui.isEmpty=ZZe;function eet(i,e){if(i.length!==e.length)return!1;for(var t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}ui.deepEqualsArray=eet;function tet(i,e){var t=i;do{var n=Object.getOwnPropertyDescriptor(t,e);if(n&&(n.set!==void 0||n.writable===!0))return!0;t=Object.getPrototypeOf(t)}while(t!==null);return!1}ui.isPropertyWritable=tet;Object.defineProperty(wl,"__esModule",{value:!0});wl.TpError=void 0;var net=ui,iet={alreadydisposed:function(){return"View has been already disposed"},invalidparams:function(i){return"Invalid parameters for '".concat(i.name,"'")},nomatchingcontroller:function(i){return"No matching controller for '".concat(i.key,"'")},nomatchingview:function(i){return"No matching view for '".concat(JSON.stringify(i.params),"'")},notbindable:function(){return"Value is not bindable"},propertynotfound:function(i){return"Property '".concat(i.name,"' not found")},shouldneverhappen:function(){return"This error should never happen"}},ret=function(){function i(e){var t;this.message=(t=iet[e.type]((0,net.forceCast)(e.context)))!==null&&t!==void 0?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}return i.alreadyDisposed=function(){return new i({type:"alreadydisposed"})},i.notBindable=function(){return new i({type:"notbindable"})},i.propertyNotFound=function(e){return new i({type:"propertynotfound",context:{name:e}})},i.shouldNeverHappen=function(){return new i({type:"shouldneverhappen"})},i}();wl.TpError=ret;Object.defineProperty(E_,"__esModule",{value:!0});E_.BindingTarget=void 0;var qR=wl,set=function(){function i(e,t,n){this.obj_=e,this.key_=t,this.presetKey_=n??t}return i.isBindable=function(e){return!(e===null||typeof e!="object"&&typeof e!="function")},Object.defineProperty(i.prototype,"key",{get:function(){return this.key_},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"presetKey",{get:function(){return this.presetKey_},enumerable:!1,configurable:!0}),i.prototype.read=function(){return this.obj_[this.key_]},i.prototype.write=function(e){this.obj_[this.key_]=e},i.prototype.writeProperty=function(e,t){var n=this.read();if(!i.isBindable(n))throw qR.TpError.notBindable();if(!(e in n))throw qR.TpError.propertyNotFound(e);n[e]=t},i}();E_.BindingTarget=set;var S_={},aet=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(S_,"__esModule",{value:!0});S_.ButtonApi=void 0;var oet=wh,cet=Fa,uet=function(i){aet(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){var t;return(t=this.controller_.valueController.props.get("title"))!==null&&t!==void 0?t:""},set:function(t){this.controller_.valueController.props.set("title",t)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n){var r=this,s=n.bind(this),a=this.controller_.valueController.emitter;return a.on(t,function(){s(new cet.TpEvent(r))}),this},e}(oet.BladeApi);S_.ButtonApi=uet;var M_={},qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.Emitter=void 0;var het=function(){function i(){this.observers_={}}return i.prototype.on=function(e,t){var n=this.observers_[e];return n||(n=this.observers_[e]=[]),n.push({handler:t}),this},i.prototype.off=function(e,t){var n=this.observers_[e];return n&&(this.observers_[e]=n.filter(function(r){return r.handler!==t})),this},i.prototype.emit=function(e,t){var n=this.observers_[e];n&&n.forEach(function(r){r.handler(t)})},i}();qs.Emitter=het;var T_={},Qi={};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.ClassName=void 0;var det="tp";function fet(i){var e=function(t,n){return[det,"-",i,"v",t?"_".concat(t):"",n?"-".concat(n):""].join("")};return e}Qi.ClassName=fet;var _l={},Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});Ca.bindValueMap=Ca.bindValue=void 0;function pet(i,e){return function(t){return e(i(t))}}function met(i){return i.rawValue}function aV(i,e){i.emitter.on("change",pet(met,e)),e(i.rawValue)}Ca.bindValue=aV;function get(i,e,t){aV(i.value(e),t)}Ca.bindValueMap=get;Object.defineProperty(_l,"__esModule",{value:!0});_l.bindValueToTextContent=_l.valueToClassName=void 0;var vet=Ca;function Aet(i,e,t){t?i.classList.add(e):i.classList.remove(e)}function _et(i,e){return function(t){Aet(i,e,t)}}_l.valueToClassName=_et;function bet(i,e){(0,vet.bindValue)(i,function(t){e.textContent=t??""})}_l.bindValueToTextContent=bet;Object.defineProperty(T_,"__esModule",{value:!0});T_.ButtonView=void 0;var yet=Qi,wet=_l,D4=(0,yet.ClassName)("btn"),xet=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(D4()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("button");n.classList.add(D4("b")),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;var r=e.createElement("div");r.classList.add(D4("t")),(0,wet.bindValueToTextContent)(t.props.value("title"),r),this.buttonElement.appendChild(r)}return i}();T_.ButtonView=xet;Object.defineProperty(M_,"__esModule",{value:!0});M_.ButtonController=void 0;var Cet=qs,Eet=T_,Met=function(){function i(e,t){this.emitter=new Cet.Emitter,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new Eet.ButtonView(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return i.prototype.onClick_=function(){this.emitter.emit("click",{sender:this})},i}();M_.ButtonController=Met;var I_={},Vr={},vo={},TC={};Object.defineProperty(TC,"__esModule",{value:!0});TC.BoundValue=void 0;var Tet=qs,Iet=function(){function i(e,t){var n;this.constraint_=t==null?void 0:t.constraint,this.equals_=(n=t==null?void 0:t.equals)!==null&&n!==void 0?n:function(r,s){return r===s},this.emitter=new Tet.Emitter,this.rawValue_=e}return Object.defineProperty(i.prototype,"constraint",{get:function(){return this.constraint_},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rawValue",{get:function(){return this.rawValue_},set:function(e){this.setRawValue(e,{forceEmit:!1,last:!0})},enumerable:!1,configurable:!0}),i.prototype.setRawValue=function(e,t){var n=t??{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(e):e,s=this.rawValue_,a=!this.equals_(s,r);!a&&!n.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:n,previousRawValue:s,rawValue:r,sender:this}))},i}();TC.BoundValue=Iet;var IC={};Object.defineProperty(IC,"__esModule",{value:!0});IC.PrimitiveValue=void 0;var Pet=qs,ket=function(){function i(e){this.emitter=new Pet.Emitter,this.value_=e}return Object.defineProperty(i.prototype,"rawValue",{get:function(){return this.value_},set:function(e){this.setRawValue(e,{forceEmit:!1,last:!0})},enumerable:!1,configurable:!0}),i.prototype.setRawValue=function(e,t){var n=t??{forceEmit:!1,last:!0},r=this.value_;r===e&&!n.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:n,previousRawValue:r,rawValue:this.value_,sender:this}))},i}();IC.PrimitiveValue=ket;Object.defineProperty(vo,"__esModule",{value:!0});vo.createValue=void 0;var Bet=TC,Ret=IC;function Det(i,e){var t=e==null?void 0:e.constraint,n=e==null?void 0:e.equals;return!t&&!n?new Ret.PrimitiveValue(i):new Bet.BoundValue(i,e)}vo.createValue=Det;Object.defineProperty(Vr,"__esModule",{value:!0});Vr.ValueMap=void 0;var Let=qs,Oet=vo,Net=function(){function i(e){var t=this;this.emitter=new Let.Emitter,this.valMap_=e;var n=function(a){var o=r.valMap_[a];o.emitter.on("change",function(){t.emitter.emit("change",{key:a,sender:t})})},r=this;for(var s in this.valMap_)n(s)}return i.createCore=function(e){var t=Object.keys(e);return t.reduce(function(n,r){var s;return Object.assign(n,(s={},s[r]=(0,Oet.createValue)(e[r]),s))},{})},i.fromObject=function(e){var t=this.createCore(e);return new i(t)},i.prototype.get=function(e){return this.valMap_[e].rawValue},i.prototype.set=function(e,t){this.valMap_[e].rawValue=t},i.prototype.value=function(e){return this.valMap_[e]},i}();Vr.ValueMap=Net;var ha={};(function(i){var e=dt&&dt.__assign||function(){return e=Object.assign||function(u){for(var h,d=1,f=arguments.length;d<f;d++){h=arguments[d];for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(u[m]=h[m])}return u},e.apply(this,arguments)},t=dt&&dt.__spreadArray||function(u,h,d){if(d||arguments.length===2)for(var f=0,m=h.length,A;f<m;f++)(A||!(f in h))&&(A||(A=Array.prototype.slice.call(h,0,f)),A[f]=h[f]);return u.concat(A||Array.prototype.slice.call(h))};Object.defineProperty(i,"__esModule",{value:!0}),i.parseParams=i.ParamsParsers=void 0;var n=ui;function r(u,h){var d=Object.keys(h),f=d.reduce(function(m,A){var _;if(m!==void 0){var v=h[A],w=v(u[A]);return w.succeeded?e(e({},m),(_={},_[A]=w.value,_)):void 0}},{});return(0,n.forceCast)(f)}function s(u,h){return u.reduce(function(d,f){if(d!==void 0){var m=h(f);if(!(!m.succeeded||m.value===void 0))return t(t([],d,!0),[m.value],!1)}},[])}function a(u){return u===null?!1:typeof u=="object"}function o(u){return function(h){return function(d){if(!h&&d===void 0)return{succeeded:!1,value:void 0};if(h&&d===void 0)return{succeeded:!0,value:void 0};var f=u(d);return f!==void 0?{succeeded:!0,value:f}:{succeeded:!1,value:void 0}}}}function l(u){return{custom:function(h){return o(h)(u)},boolean:o(function(h){return typeof h=="boolean"?h:void 0})(u),number:o(function(h){return typeof h=="number"?h:void 0})(u),string:o(function(h){return typeof h=="string"?h:void 0})(u),function:o(function(h){return typeof h=="function"?h:void 0})(u),constant:function(h){return o(function(d){return d===h?h:void 0})(u)},raw:o(function(h){return h})(u),object:function(h){return o(function(d){if(a(d))return r(d,h)})(u)},array:function(h){return o(function(d){if(Array.isArray(d))return s(d,h)})(u)}}}i.ParamsParsers={optional:l(!0),required:l(!1)};function c(u,h){var d=i.ParamsParsers.required.object(h)(u);return d.succeeded?d.value:void 0}i.parseParams=c})(ha);var K0={},kd={},jf={};Object.defineProperty(jf,"__esModule",{value:!0});jf.warnMissing=jf.warnDeprecation=void 0;function Fet(i){var e;console.warn(["".concat(i.name," is deprecated."),i.alternative?"use ".concat(i.alternative," instead."):"",(e=i.postscript)!==null&&e!==void 0?e:""].join(" "))}jf.warnDeprecation=Fet;function zet(i){console.warn(["Missing '".concat(i.key,"' of ").concat(i.target," in ").concat(i.place,"."),"Please rebuild plugins with the latest core package."].join(" "))}jf.warnMissing=zet;var PC={};Object.defineProperty(PC,"__esModule",{value:!0});PC.disposeElement=void 0;function Uet(i){return i&&i.parentElement&&i.parentElement.removeChild(i),null}PC.disposeElement=Uet;var Bd={},kC={};Object.defineProperty(kC,"__esModule",{value:!0});kC.ReadonlyValue=void 0;var Vet=function(){function i(e){this.value_=e}return i.create=function(e){return[new i(e),function(t,n){e.setRawValue(t,n)}]},Object.defineProperty(i.prototype,"emitter",{get:function(){return this.value_.emitter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rawValue",{get:function(){return this.value_.rawValue},enumerable:!1,configurable:!0}),i}();kC.ReadonlyValue=Vet;var Het=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Bd,"__esModule",{value:!0});Bd.ViewProps=void 0;var Get=Qi,Qet=_l,nw=Ca,qet=kC,jR=Vr,jet=vo,Wet=(0,Get.ClassName)("");function WR(i,e){return(0,Qet.valueToClassName)(i,Wet(void 0,e))}var $et=function(i){Het(e,i);function e(t){var n,r=this,s;return r=i.call(this,t)||this,r.onDisabledChange_=r.onDisabledChange_.bind(r),r.onParentChange_=r.onParentChange_.bind(r),r.onParentGlobalDisabledChange_=r.onParentGlobalDisabledChange_.bind(r),n=qet.ReadonlyValue.create((0,jet.createValue)(r.getGlobalDisabled_())),r.globalDisabled_=n[0],r.setGlobalDisabled_=n[1],r.value("disabled").emitter.on("change",r.onDisabledChange_),r.value("parent").emitter.on("change",r.onParentChange_),(s=r.get("parent"))===null||s===void 0||s.globalDisabled.emitter.on("change",r.onParentGlobalDisabledChange_),r}return e.create=function(t){var n,r,s,a=t??{};return new e(jR.ValueMap.createCore({disabled:(n=a.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=a.hidden)!==null&&r!==void 0?r:!1,parent:(s=a.parent)!==null&&s!==void 0?s:null}))},Object.defineProperty(e.prototype,"globalDisabled",{get:function(){return this.globalDisabled_},enumerable:!1,configurable:!0}),e.prototype.bindClassModifiers=function(t){(0,nw.bindValue)(this.globalDisabled_,WR(t,"disabled")),(0,nw.bindValueMap)(this,"hidden",WR(t,"hidden"))},e.prototype.bindDisabled=function(t){(0,nw.bindValue)(this.globalDisabled_,function(n){t.disabled=n})},e.prototype.bindTabIndex=function(t){(0,nw.bindValue)(this.globalDisabled_,function(n){t.tabIndex=n?-1:0})},e.prototype.handleDispose=function(t){this.value("disposed").emitter.on("change",function(n){n&&t()})},e.prototype.getGlobalDisabled_=function(){var t=this.get("parent"),n=t?t.globalDisabled.rawValue:!1;return n||this.get("disabled")},e.prototype.updateGlobalDisabled_=function(){this.setGlobalDisabled_(this.getGlobalDisabled_())},e.prototype.onDisabledChange_=function(){this.updateGlobalDisabled_()},e.prototype.onParentGlobalDisabledChange_=function(){this.updateGlobalDisabled_()},e.prototype.onParentChange_=function(t){var n,r=t.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()},e}(jR.ValueMap);Bd.ViewProps=$et;var P_={};Object.defineProperty(P_,"__esModule",{value:!0});P_.getAllBladePositions=void 0;function Xet(){return["veryfirst","first","last","verylast"]}P_.getAllBladePositions=Xet;Object.defineProperty(kd,"__esModule",{value:!0});kd.BladeController=void 0;var Yet=jf,Ket=PC,Jet=Bd,Zet=Qi,ett=P_,$R=(0,Zet.ClassName)(""),XR={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"},ttt=function(){function i(e){var t=this;this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;var n=this.view.element;this.blade.value("positions").emitter.on("change",function(){(0,ett.getAllBladePositions)().forEach(function(r){n.classList.remove($R(void 0,XR[r]))}),t.blade.get("positions").forEach(function(r){n.classList.add($R(void 0,XR[r]))})}),this.viewProps.handleDispose(function(){(0,Ket.disposeElement)(n)})}return Object.defineProperty(i.prototype,"parent",{get:function(){return this.parent_},set:function(e){if(this.parent_=e,!("parent"in this.viewProps.valMap_)){(0,Yet.warnMissing)({key:"parent",target:Jet.ViewProps.name,place:"BladeController.parent"});return}this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)},enumerable:!1,configurable:!0}),i}();kd.BladeController=ttt;var _v={},Ya={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.findNextTarget=i.indexOfChildElement=i.removeChildNodes=i.removeChildElements=i.removeElement=i.insertElementAt=i.createSvgIconElement=i.getCanvasContext=i.getWindowDocument=i.supportsTouch=i.disableTransitionTemporarily=i.forceReflow=i.SVG_NS=void 0;var e=ui;i.SVG_NS="http://www.w3.org/2000/svg";function t(_){_.offsetHeight}i.forceReflow=t;function n(_,v){var w=_.style.transition;_.style.transition="none",v(),_.style.transition=w}i.disableTransitionTemporarily=n;function r(_){return _.ontouchstart!==void 0}i.supportsTouch=r;function s(){return globalThis}function a(){var _=(0,e.forceCast)(s());return _.document}i.getWindowDocument=a;function o(_){var v=_.ownerDocument.defaultView;if(!v)return null;var w="document"in v;return w?_.getContext("2d",{willReadFrequently:!0}):null}i.getCanvasContext=o;var l={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function c(_,v){var w=_.createElementNS(i.SVG_NS,"svg");return w.innerHTML=l[v],w}i.createSvgIconElement=c;function u(_,v,w){_.insertBefore(v,_.children[w])}i.insertElementAt=u;function h(_){_.parentElement&&_.parentElement.removeChild(_)}i.removeElement=h;function d(_){for(;_.children.length>0;)_.removeChild(_.children[0])}i.removeChildElements=d;function f(_){for(;_.childNodes.length>0;)_.removeChild(_.childNodes[0])}i.removeChildNodes=f;function m(_){var v=_.parentElement;if(!v)return-1;var w=Array.prototype.slice.call(v.children);return w.indexOf(_)}i.indexOfChildElement=m;function A(_){return _.relatedTarget?(0,e.forceCast)(_.relatedTarget):"explicitOriginalTarget"in _?_.explicitOriginalTarget:null}i.findNextTarget=A})(Ya);Object.defineProperty(_v,"__esModule",{value:!0});_v.LabelView=void 0;var ntt=Ya,itt=Ca,rtt=Qi,stt=ui,xA=(0,rtt.ClassName)("lbl");function att(i,e){var t=i.createDocumentFragment(),n=e.split(`
`).map(function(r){return i.createTextNode(r)});return n.forEach(function(r,s){s>0&&t.appendChild(i.createElement("br")),t.appendChild(r)}),t}var ott=function(){function i(e,t){var n=this;this.element=e.createElement("div"),this.element.classList.add(xA()),t.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(xA("l")),(0,itt.bindValueMap)(t.props,"label",function(a){(0,stt.isEmpty)(a)?n.element.classList.add(xA(void 0,"nol")):(n.element.classList.remove(xA(void 0,"nol")),(0,ntt.removeChildNodes)(r),r.appendChild(att(e,a)))}),this.element.appendChild(r),this.labelElement=r;var s=e.createElement("div");s.classList.add(xA("v")),this.element.appendChild(s),this.valueElement=s}return i}();_v.LabelView=ott;var ltt=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ox=dt&&dt.__assign||function(){return Ox=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},Ox.apply(this,arguments)};Object.defineProperty(K0,"__esModule",{value:!0});K0.LabelController=void 0;var ctt=kd,utt=_v,htt=function(i){ltt(e,i);function e(t,n){var r=this,s=n.valueController.viewProps;return r=i.call(this,Ox(Ox({},n),{view:new utt.LabelView(t,{props:n.props,viewProps:s}),viewProps:s}))||this,r.props=n.props,r.valueController=n.valueController,r.view.valueElement.appendChild(r.valueController.view.element),r}return e}(ctt.BladeController);K0.LabelController=htt;Object.defineProperty(I_,"__esModule",{value:!0});I_.ButtonBladePlugin=void 0;var YR=Vr,KR=ha,JR=K0,dtt=S_,ZR=M_;I_.ButtonBladePlugin={id:"button",type:"blade",accept:function(i){var e=KR.ParamsParsers,t=(0,KR.parseParams)(i,{title:e.required.string,view:e.required.constant("button"),label:e.optional.string});return t?{params:t}:null},controller:function(i){return new JR.LabelController(i.document,{blade:i.blade,props:YR.ValueMap.fromObject({label:i.params.label}),valueController:new ZR.ButtonController(i.document,{props:YR.ValueMap.fromObject({title:i.params.title}),viewProps:i.viewProps})})},api:function(i){return!(i.controller instanceof JR.LabelController)||!(i.controller.valueController instanceof ZR.ButtonController)?null:new dtt.ButtonApi(i.controller)}};var J0={},ftt=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(J0,"__esModule",{value:!0});J0.ValueBladeController=void 0;var ptt=kd,mtt=function(i){ftt(e,i);function e(t){var n=i.call(this,t)||this;return n.value=t.value,n}return e}(ptt.BladeController);J0.ValueBladeController=mtt;var op={};Object.defineProperty(op,"__esModule",{value:!0});op.createBlade=void 0;var gtt=Vr,vtt=vo,Att=ui;function _tt(){return new gtt.ValueMap({positions:(0,vtt.createValue)([],{equals:Att.deepEqualsArray})})}op.createBlade=_tt;var Do={},btt=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Do,"__esModule",{value:!0});Do.bindFoldable=Do.getFoldableStyleHeight=Do.getFoldableStyleExpanded=Do.createFoldable=Do.Foldable=void 0;var ex=Ya,eD=Ca,tD=Vr,oV=ui,lV=function(i){btt(e,i);function e(t){return i.call(this,t)||this}return e.create=function(t){var n={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=tD.ValueMap.createCore(n);return new e(r)},Object.defineProperty(e.prototype,"styleExpanded",{get:function(){var t;return(t=this.get("temporaryExpanded"))!==null&&t!==void 0?t:this.get("expanded")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleHeight",{get:function(){if(!this.styleExpanded)return"0";var t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!(0,oV.isEmpty)(t)?"".concat(t,"px"):"auto"},enumerable:!1,configurable:!0}),e.prototype.bindExpandedClass=function(t,n){var r=this,s=function(){var a=r.styleExpanded;a?t.classList.add(n):t.classList.remove(n)};(0,eD.bindValueMap)(this,"expanded",s),(0,eD.bindValueMap)(this,"temporaryExpanded",s)},e.prototype.cleanUpTransition=function(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)},e}(tD.ValueMap);Do.Foldable=lV;function ytt(i){return lV.create(i)}Do.createFoldable=ytt;function wtt(i,e){var t=0;return(0,ex.disableTransitionTemporarily)(e,function(){i.set("expandedHeight",null),i.set("temporaryExpanded",!0),(0,ex.forceReflow)(e),t=e.clientHeight,i.set("temporaryExpanded",null),(0,ex.forceReflow)(e)}),t}function xtt(i){return i.styleExpanded}Do.getFoldableStyleExpanded=xtt;function Ctt(i){return i.styleHeight}Do.getFoldableStyleHeight=Ctt;function nD(i,e){e.style.height=i.styleHeight}function Ett(i,e){i.value("expanded").emitter.on("beforechange",function(){if(i.set("completed",!1),(0,oV.isEmpty)(i.get("expandedHeight"))){var t=wtt(i,e);t>0&&i.set("expandedHeight",t)}i.set("shouldFixHeight",!0),(0,ex.forceReflow)(e)}),i.emitter.on("change",function(){nD(i,e)}),nD(i,e),e.addEventListener("transitionend",function(t){t.propertyName==="height"&&i.cleanUpTransition()})}Do.bindFoldable=Ett;var k_={},bv={},Stt=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(bv,"__esModule",{value:!0});bv.RackLikeApi=void 0;var Mtt=wh,Ttt=function(i){Stt(e,i);function e(t,n){var r=i.call(this,t)||this;return r.rackApi_=n,r}return e}(Mtt.BladeApi);bv.RackLikeApi=Ttt;var Wf={},th={},gh=dt&&dt.__assign||function(){return gh=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},gh.apply(this,arguments)};Object.defineProperty(th,"__esModule",{value:!0});th.addTabAsBlade=th.addSeparatorAsBlade=th.addFolderAsBlade=th.addButtonAsBlade=void 0;function Itt(i,e){return i.addBlade(gh(gh({},e),{view:"button"}))}th.addButtonAsBlade=Itt;function Ptt(i,e){return i.addBlade(gh(gh({},e),{view:"folder"}))}th.addFolderAsBlade=Ptt;function ktt(i,e){var t=e??{};return i.addBlade(gh(gh({},t),{view:"separator"}))}th.addSeparatorAsBlade=ktt;function Btt(i,e){return i.addBlade(gh(gh({},e),{view:"tab"}))}th.addTabAsBlade=Btt;var yv={};Object.defineProperty(yv,"__esModule",{value:!0});yv.NestedOrderedSet=void 0;var Rtt=qs,Dtt=wl,Ltt=function(){function i(e){this.emitter=new Rtt.Emitter,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}return Object.defineProperty(i.prototype,"items",{get:function(){return this.items_},enumerable:!1,configurable:!0}),i.prototype.allItems=function(){return Array.from(this.cache_)},i.prototype.find=function(e){for(var t=0,n=this.allItems();t<n.length;t++){var r=n[t];if(e(r))return r}return null},i.prototype.includes=function(e){return this.cache_.has(e)},i.prototype.add=function(e,t){var n=this;if(this.includes(e))throw Dtt.TpError.shouldNeverHappen();var r=t!==void 0?t:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);var s=this.extract_(e);s&&(s.emitter.on("add",this.onSubListAdd_),s.emitter.on("remove",this.onSubListRemove_),s.allItems().forEach(function(a){n.cache_.add(a)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})},i.prototype.remove=function(e){var t=this.items_.indexOf(e);if(!(t<0)){this.items_.splice(t,1),this.cache_.delete(e);var n=this.extract_(e);n&&(n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}},i.prototype.onSubListAdd_=function(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})},i.prototype.onSubListRemove_=function(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})},i}();yv.NestedOrderedSet=Ltt;var wv={},Ott=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(wv,"__esModule",{value:!0});wv.InputBindingApi=void 0;var Ntt=qs,Ftt=ui,ztt=wh,Utt=Fa,Vtt=function(i){Ott(e,i);function e(t){var n=i.call(this,t)||this;return n.onBindingChange_=n.onBindingChange_.bind(n),n.emitter_=new Ntt.Emitter,n.controller_.binding.emitter.on("change",n.onBindingChange_),n}return Object.defineProperty(e.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n){var r=n.bind(this);return this.emitter_.on(t,function(s){r(s.event)}),this},e.prototype.refresh=function(){this.controller_.binding.read()},e.prototype.onBindingChange_=function(t){var n=t.sender.target.read();this.emitter_.emit("change",{event:new Utt.TpChangeEvent(this,(0,Ftt.forceCast)(n),this.controller_.binding.target.presetKey,t.options.last)})},e}(ztt.BladeApi);wv.InputBindingApi=Vtt;var lp={},Htt=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(lp,"__esModule",{value:!0});lp.InputBindingController=void 0;var Gtt=K0,Qtt=function(i){Htt(e,i);function e(t,n){var r=i.call(this,t,n)||this;return r.binding=n.binding,r}return e}(Gtt.LabelController);lp.InputBindingController=Qtt;var xv={},qtt=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(xv,"__esModule",{value:!0});xv.MonitorBindingApi=void 0;var jtt=qs,Wtt=ui,$tt=wh,Xtt=Fa,Ytt=function(i){qtt(e,i);function e(t){var n=i.call(this,t)||this;return n.onBindingUpdate_=n.onBindingUpdate_.bind(n),n.emitter_=new jtt.Emitter,n.controller_.binding.emitter.on("update",n.onBindingUpdate_),n}return Object.defineProperty(e.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n){var r=n.bind(this);return this.emitter_.on(t,function(s){r(s.event)}),this},e.prototype.refresh=function(){this.controller_.binding.read()},e.prototype.onBindingUpdate_=function(t){var n=t.sender.target.read();this.emitter_.emit("update",{event:new Xtt.TpUpdateEvent(this,(0,Wtt.forceCast)(n),this.controller_.binding.target.presetKey)})},e}($tt.BladeApi);xv.MonitorBindingApi=Ytt;var cp={},Ktt=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(cp,"__esModule",{value:!0});cp.MonitorBindingController=void 0;var Jtt=K0,Ztt=function(i){Ktt(e,i);function e(t,n){var r=i.call(this,t,n)||this;return r.binding=n.binding,r.viewProps.bindDisabled(r.binding.ticker),r.viewProps.handleDispose(function(){r.binding.dispose()}),r}return e}(Jtt.LabelController);cp.MonitorBindingController=Ztt;var ent=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Wf,"__esModule",{value:!0});Wf.RackApi=Wf.findSubBladeApiSet=void 0;var iD=E_,tnt=qs,YI=wl,L4=ui,nnt=wh,iw=th,int=bv,O4=Fa,rnt=J0,snt=yv,ant=wv,ont=lp,lnt=xv,cnt=cp;function cV(i){return i instanceof uV?i.apiSet_:i instanceof int.RackLikeApi?i.rackApi_.apiSet_:null}Wf.findSubBladeApiSet=cV;function CA(i,e){var t=i.find(function(n){return n.controller_===e});if(!t)throw YI.TpError.shouldNeverHappen();return t}function rD(i,e,t){if(!iD.BindingTarget.isBindable(i))throw YI.TpError.notBindable();return new iD.BindingTarget(i,e,t)}var uV=function(i){ent(e,i);function e(t,n){var r=i.call(this,t)||this;r.onRackAdd_=r.onRackAdd_.bind(r),r.onRackRemove_=r.onRackRemove_.bind(r),r.onRackInputChange_=r.onRackInputChange_.bind(r),r.onRackMonitorUpdate_=r.onRackMonitorUpdate_.bind(r),r.emitter_=new tnt.Emitter,r.apiSet_=new snt.NestedOrderedSet(cV),r.pool_=n;var s=r.controller_.rack;return s.emitter.on("add",r.onRackAdd_),s.emitter.on("remove",r.onRackRemove_),s.emitter.on("inputchange",r.onRackInputChange_),s.emitter.on("monitorupdate",r.onRackMonitorUpdate_),s.children.forEach(function(a){r.setUpApi_(a)}),r}return Object.defineProperty(e.prototype,"children",{get:function(){var t=this;return this.controller_.rack.children.map(function(n){return CA(t.apiSet_,n)})},enumerable:!1,configurable:!0}),e.prototype.addInput=function(t,n,r){var s=r??{},a=this.controller_.view.element.ownerDocument,o=this.pool_.createInput(a,rD(t,n,s.presetKey),s),l=new ant.InputBindingApi(o);return this.add(l,s.index)},e.prototype.addMonitor=function(t,n,r){var s=r??{},a=this.controller_.view.element.ownerDocument,o=this.pool_.createMonitor(a,rD(t,n),s),l=new lnt.MonitorBindingApi(o);return(0,L4.forceCast)(this.add(l,s.index))},e.prototype.addFolder=function(t){return(0,iw.addFolderAsBlade)(this,t)},e.prototype.addButton=function(t){return(0,iw.addButtonAsBlade)(this,t)},e.prototype.addSeparator=function(t){return(0,iw.addSeparatorAsBlade)(this,t)},e.prototype.addTab=function(t){return(0,iw.addTabAsBlade)(this,t)},e.prototype.add=function(t,n){this.controller_.rack.add(t.controller_,n);var r=this.apiSet_.find(function(s){return s.controller_===t.controller_});return r&&this.apiSet_.remove(r),this.apiSet_.add(t),t},e.prototype.remove=function(t){this.controller_.rack.remove(t.controller_)},e.prototype.addBlade=function(t){var n=this.controller_.view.element.ownerDocument,r=this.pool_.createBlade(n,t),s=this.pool_.createBladeApi(r);return this.add(s,t.index)},e.prototype.on=function(t,n){var r=n.bind(this);return this.emitter_.on(t,function(s){r(s.event)}),this},e.prototype.setUpApi_=function(t){var n=this.apiSet_.find(function(r){return r.controller_===t});n||this.apiSet_.add(this.pool_.createBladeApi(t))},e.prototype.onRackAdd_=function(t){this.setUpApi_(t.bladeController)},e.prototype.onRackRemove_=function(t){if(t.isRoot){var n=CA(this.apiSet_,t.bladeController);this.apiSet_.remove(n)}},e.prototype.onRackInputChange_=function(t){var n=t.bladeController;if(n instanceof ont.InputBindingController){var r=CA(this.apiSet_,n),s=n.binding;this.emitter_.emit("change",{event:new O4.TpChangeEvent(r,(0,L4.forceCast)(s.target.read()),s.target.presetKey,t.options.last)})}else if(n instanceof rnt.ValueBladeController){var r=CA(this.apiSet_,n);this.emitter_.emit("change",{event:new O4.TpChangeEvent(r,n.value.rawValue,void 0,t.options.last)})}},e.prototype.onRackMonitorUpdate_=function(t){if(!(t.bladeController instanceof cnt.MonitorBindingController))throw YI.TpError.shouldNeverHappen();var n=CA(this.apiSet_,t.bladeController),r=t.bladeController.binding;this.emitter_.emit("update",{event:new O4.TpUpdateEvent(n,(0,L4.forceCast)(r.target.read()),r.target.presetKey)})},e}(nnt.BladeApi);Wf.RackApi=uV;var unt=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(k_,"__esModule",{value:!0});k_.FolderApi=void 0;var hnt=qs,dnt=bv,fnt=Fa,pnt=Wf,mnt=function(i){unt(e,i);function e(t,n){var r=i.call(this,t,new pnt.RackApi(t.rackController,n))||this;return r.emitter_=new hnt.Emitter,r.controller_.foldable.value("expanded").emitter.on("change",function(s){r.emitter_.emit("fold",{event:new fnt.TpFoldEvent(r,s.sender.rawValue)})}),r.rackApi_.on("change",function(s){r.emitter_.emit("change",{event:s})}),r.rackApi_.on("update",function(s){r.emitter_.emit("update",{event:s})}),r}return Object.defineProperty(e.prototype,"expanded",{get:function(){return this.controller_.foldable.get("expanded")},set:function(t){this.controller_.foldable.set("expanded",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.controller_.props.get("title")},set:function(t){this.controller_.props.set("title",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.rackApi_.children},enumerable:!1,configurable:!0}),e.prototype.addInput=function(t,n,r){return this.rackApi_.addInput(t,n,r)},e.prototype.addMonitor=function(t,n,r){return this.rackApi_.addMonitor(t,n,r)},e.prototype.addFolder=function(t){return this.rackApi_.addFolder(t)},e.prototype.addButton=function(t){return this.rackApi_.addButton(t)},e.prototype.addSeparator=function(t){return this.rackApi_.addSeparator(t)},e.prototype.addTab=function(t){return this.rackApi_.addTab(t)},e.prototype.add=function(t,n){return this.rackApi_.add(t,n)},e.prototype.remove=function(t){this.rackApi_.remove(t)},e.prototype.addBlade=function(t){return this.rackApi_.addBlade(t)},e.prototype.on=function(t,n){var r=n.bind(this);return this.emitter_.on(t,function(s){r(s.event)}),this},e}(dnt.RackLikeApi);k_.FolderApi=mnt;var B_={},Cv={},gnt=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Cv,"__esModule",{value:!0});Cv.RackLikeController=void 0;var vnt=kd,Ant=function(i){gnt(e,i);function e(t){var n=i.call(this,{blade:t.blade,view:t.view,viewProps:t.rackController.viewProps})||this;return n.rackController=t.rackController,n}return e}(vnt.BladeController);Cv.RackLikeController=Ant;var EA={},R_={};Object.defineProperty(R_,"__esModule",{value:!0});R_.PlainView=void 0;var _nt=Qi,bnt=function(){function i(e,t){var n=(0,_nt.ClassName)(t.viewName);this.element=e.createElement("div"),this.element.classList.add(n()),t.viewProps.bindClassModifiers(this.element)}return i}();R_.PlainView=bnt;var SA={},sD;function ynt(){if(sD)return SA;sD=1,Object.defineProperty(SA,"__esModule",{value:!0}),SA.BladeRack=void 0;var i=jf,e=qs,t=wl,n=ui,r=lp,s=cp,a=D_(),o=Cv,l=J0,c=yv;function u(_,v){for(var w=0;w<_.length;w++){var x=_[w];if(x instanceof r.InputBindingController&&x.binding===v)return x}return null}function h(_,v){for(var w=0;w<_.length;w++){var x=_[w];if(x instanceof s.MonitorBindingController&&x.binding===v)return x}return null}function d(_,v){for(var w=0;w<_.length;w++){var x=_[w];if(x instanceof l.ValueBladeController&&x.value===v)return x}return null}function f(_){return _ instanceof a.RackController?_.rack:_ instanceof o.RackLikeController?_.rackController.rack:null}function m(_){var v=f(_);return v?v.bcSet_:null}var A=function(){function _(v){var w,x;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new e.Emitter,this.blade_=(w=v.blade)!==null&&w!==void 0?w:null,(x=this.blade_)===null||x===void 0||x.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=v.viewProps,this.bcSet_=new c.NestedOrderedSet(m),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}return Object.defineProperty(_.prototype,"children",{get:function(){return this.bcSet_.items},enumerable:!1,configurable:!0}),_.prototype.add=function(v,w){var x;(x=v.parent)===null||x===void 0||x.remove(v),(0,n.isPropertyWritable)(v,"parent")?v.parent=this:(v.parent_=this,(0,i.warnMissing)({key:"parent",target:"BladeController",place:"BladeRack.add"})),this.bcSet_.add(v,w)},_.prototype.remove=function(v){(0,n.isPropertyWritable)(v,"parent")?v.parent=null:(v.parent_=null,(0,i.warnMissing)({key:"parent",target:"BladeController",place:"BladeRack.remove"})),this.bcSet_.remove(v)},_.prototype.find=function(v){return(0,n.forceCast)(this.bcSet_.allItems().filter(function(w){return w instanceof v}))},_.prototype.onSetAdd_=function(v){this.updatePositions_();var w=v.target===v.root;if(this.emitter.emit("add",{bladeController:v.item,index:v.index,isRoot:w,sender:this}),!!w){var x=v.item;if(x.viewProps.emitter.on("change",this.onChildViewPropsChange_),x.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),x.viewProps.handleDispose(this.onChildDispose_),x instanceof r.InputBindingController)x.binding.emitter.on("change",this.onChildInputChange_);else if(x instanceof s.MonitorBindingController)x.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(x instanceof l.ValueBladeController)x.value.emitter.on("change",this.onChildValueChange_);else{var C=f(x);if(C){var S=C.emitter;S.on("layout",this.onDescendantLayout_),S.on("inputchange",this.onDescendantInputChange_),S.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}},_.prototype.onSetRemove_=function(v){this.updatePositions_();var w=v.target===v.root;if(this.emitter.emit("remove",{bladeController:v.item,isRoot:w,sender:this}),!!w){var x=v.item;if(x instanceof r.InputBindingController)x.binding.emitter.off("change",this.onChildInputChange_);else if(x instanceof s.MonitorBindingController)x.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(x instanceof l.ValueBladeController)x.value.emitter.off("change",this.onChildValueChange_);else{var C=f(x);if(C){var S=C.emitter;S.off("layout",this.onDescendantLayout_),S.off("inputchange",this.onDescendantInputChange_),S.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}},_.prototype.updatePositions_=function(){var v=this,w=this.bcSet_.items.filter(function(S){return!S.viewProps.get("hidden")}),x=w[0],C=w[w.length-1];this.bcSet_.items.forEach(function(S){var I=[];S===x&&(I.push("first"),(!v.blade_||v.blade_.get("positions").includes("veryfirst"))&&I.push("veryfirst")),S===C&&(I.push("last"),(!v.blade_||v.blade_.get("positions").includes("verylast"))&&I.push("verylast")),S.blade.set("positions",I)})},_.prototype.onChildPositionsChange_=function(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})},_.prototype.onChildViewPropsChange_=function(v){this.updatePositions_(),this.emitter.emit("layout",{sender:this})},_.prototype.onChildDispose_=function(){var v=this,w=this.bcSet_.items.filter(function(x){return x.viewProps.get("disposed")});w.forEach(function(x){v.bcSet_.remove(x)})},_.prototype.onChildInputChange_=function(v){var w=u(this.find(r.InputBindingController),v.sender);if(!w)throw t.TpError.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:w,options:v.options,sender:this})},_.prototype.onChildMonitorUpdate_=function(v){var w=h(this.find(s.MonitorBindingController),v.sender);if(!w)throw t.TpError.alreadyDisposed();this.emitter.emit("monitorupdate",{bladeController:w,sender:this})},_.prototype.onChildValueChange_=function(v){var w=d(this.find(l.ValueBladeController),v.sender);if(!w)throw t.TpError.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:w,options:v.options,sender:this})},_.prototype.onDescendantLayout_=function(v){this.updatePositions_(),this.emitter.emit("layout",{sender:this})},_.prototype.onDescendantInputChange_=function(v){this.emitter.emit("inputchange",{bladeController:v.bladeController,options:v.options,sender:this})},_.prototype.onDescendantMonitorUpdate_=function(v){this.emitter.emit("monitorupdate",{bladeController:v.bladeController,sender:this})},_.prototype.onBladePositionsChange_=function(){this.updatePositions_()},_}();return SA.BladeRack=A,SA}var aD;function D_(){if(aD)return EA;aD=1;var i=dt&&dt.__extends||function(){var o=function(l,c){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(u[d]=h[d])},o(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");o(l,c);function u(){this.constructor=l}l.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}}(),e=dt&&dt.__assign||function(){return e=Object.assign||function(o){for(var l,c=1,u=arguments.length;c<u;c++){l=arguments[c];for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(o[h]=l[h])}return o},e.apply(this,arguments)};Object.defineProperty(EA,"__esModule",{value:!0}),EA.RackController=void 0;var t=Ya,n=R_,r=kd,s=ynt(),a=function(o){i(l,o);function l(c,u){var h=o.call(this,e(e({},u),{view:new n.PlainView(c,{viewName:"brk",viewProps:u.viewProps})}))||this;h.onRackAdd_=h.onRackAdd_.bind(h),h.onRackRemove_=h.onRackRemove_.bind(h);var d=new s.BladeRack({blade:u.root?void 0:u.blade,viewProps:u.viewProps});return d.emitter.on("add",h.onRackAdd_),d.emitter.on("remove",h.onRackRemove_),h.rack=d,h.viewProps.handleDispose(function(){for(var f=h.rack.children.length-1;f>=0;f--){var m=h.rack.children[f];m.viewProps.set("disposed",!0)}}),h}return l.prototype.onRackAdd_=function(c){c.isRoot&&(0,t.insertElementAt)(this.view.element,c.bladeController.view.element,c.index)},l.prototype.onRackRemove_=function(c){c.isRoot&&(0,t.removeElement)(c.bladeController.view.element)},l}(r.BladeController);return EA.RackController=a,EA}var L_={},O_={};Object.defineProperty(O_,"__esModule",{value:!0});O_.bladeContainerClassName=void 0;var wnt=Qi;O_.bladeContainerClassName=(0,wnt.ClassName)("cnt");Object.defineProperty(L_,"__esModule",{value:!0});L_.FolderView=void 0;var oD=Ca,xnt=Qi,lD=_l,Cnt=ui,Ent=O_,Snt=function(){function i(e,t){var n=this,r;this.className_=(0,xnt.ClassName)((r=t.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),(0,Ent.bladeContainerClassName)()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),(0,oD.bindValueMap)(this.foldable_,"completed",(0,lD.valueToClassName)(this.element,this.className_(void 0,"cpl")));var s=e.createElement("button");s.classList.add(this.className_("b")),(0,oD.bindValueMap)(t.props,"title",function(u){(0,Cnt.isEmpty)(u)?n.element.classList.add(n.className_(void 0,"not")):n.element.classList.remove(n.className_(void 0,"not"))}),t.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;var a=e.createElement("div");a.classList.add(this.className_("i")),this.element.appendChild(a);var o=e.createElement("div");o.classList.add(this.className_("t")),(0,lD.bindValueToTextContent)(t.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;var l=e.createElement("div");l.classList.add(this.className_("m")),this.buttonElement.appendChild(l);var c=t.containerElement;c.classList.add(this.className_("c")),this.element.appendChild(c),this.containerElement=c}return i}();L_.FolderView=Snt;var Mnt=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nx=dt&&dt.__assign||function(){return Nx=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},Nx.apply(this,arguments)};Object.defineProperty(B_,"__esModule",{value:!0});B_.FolderController=void 0;var Tnt=Cv,cD=Do,Int=D_(),Pnt=L_,knt=function(i){Mnt(e,i);function e(t,n){var r=this,s,a=cD.Foldable.create((s=n.expanded)!==null&&s!==void 0?s:!0),o=new Int.RackController(t,{blade:n.blade,root:n.root,viewProps:n.viewProps});return r=i.call(this,Nx(Nx({},n),{rackController:o,view:new Pnt.FolderView(t,{containerElement:o.view.element,foldable:a,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps})}))||this,r.onTitleClick_=r.onTitleClick_.bind(r),r.props=n.props,r.foldable=a,(0,cD.bindFoldable)(r.foldable,r.view.containerElement),r.rackController.rack.emitter.on("add",function(){r.foldable.cleanUpTransition()}),r.rackController.rack.emitter.on("remove",function(){r.foldable.cleanUpTransition()}),r.view.buttonElement.addEventListener("click",r.onTitleClick_),r}return Object.defineProperty(e.prototype,"document",{get:function(){return this.view.element.ownerDocument},enumerable:!1,configurable:!0}),e.prototype.onTitleClick_=function(){this.foldable.set("expanded",!this.foldable.get("expanded"))},e}(Tnt.RackLikeController);B_.FolderController=knt;var N_={};Object.defineProperty(N_,"__esModule",{value:!0});N_.FolderBladePlugin=void 0;var Bnt=Vr,uD=ha,Rnt=k_,hD=B_;N_.FolderBladePlugin={id:"folder",type:"blade",accept:function(i){var e=uD.ParamsParsers,t=(0,uD.parseParams)(i,{title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean});return t?{params:t}:null},controller:function(i){return new hD.FolderController(i.document,{blade:i.blade,expanded:i.params.expanded,props:Bnt.ValueMap.fromObject({title:i.params.title}),viewProps:i.viewProps})},api:function(i){return i.controller instanceof hD.FolderController?new Rnt.FolderApi(i.controller,i.pool):null}};var BC={},Dnt=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fx=dt&&dt.__assign||function(){return Fx=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},Fx.apply(this,arguments)};Object.defineProperty(BC,"__esModule",{value:!0});BC.LabeledValueController=void 0;var Lnt=J0,Ont=_v,Nnt=function(i){Dnt(e,i);function e(t,n){var r=this,s=n.valueController.viewProps;return r=i.call(this,Fx(Fx({},n),{value:n.valueController.value,view:new Ont.LabelView(t,{props:n.props,viewProps:s}),viewProps:s}))||this,r.props=n.props,r.valueController=n.valueController,r.view.valueElement.appendChild(r.valueController.view.element),r}return e}(Lnt.ValueBladeController);BC.LabeledValueController=Nnt;var F_={},Fnt=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(F_,"__esModule",{value:!0});F_.SeparatorApi=void 0;var znt=wh,Unt=function(i){Fnt(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e}(znt.BladeApi);F_.SeparatorApi=Unt;var z_={},RC={};Object.defineProperty(RC,"__esModule",{value:!0});RC.SeparatorView=void 0;var Vnt=Qi,dD=(0,Vnt.ClassName)("spr"),Hnt=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(dD()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("hr");n.classList.add(dD("r")),this.element.appendChild(n)}return i}();RC.SeparatorView=Hnt;var Gnt=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zx=dt&&dt.__assign||function(){return zx=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},zx.apply(this,arguments)};Object.defineProperty(z_,"__esModule",{value:!0});z_.SeparatorController=void 0;var Qnt=kd,qnt=RC,jnt=function(i){Gnt(e,i);function e(t,n){return i.call(this,zx(zx({},n),{view:new qnt.SeparatorView(t,{viewProps:n.viewProps})}))||this}return e}(Qnt.BladeController);z_.SeparatorController=jnt;var U_={};Object.defineProperty(U_,"__esModule",{value:!0});U_.SeparatorBladePlugin=void 0;var fD=ha,Wnt=F_,pD=z_;U_.SeparatorBladePlugin={id:"separator",type:"blade",accept:function(i){var e=fD.ParamsParsers,t=(0,fD.parseParams)(i,{view:e.required.constant("separator")});return t?{params:t}:null},controller:function(i){return new pD.SeparatorController(i.document,{blade:i.blade,viewProps:i.viewProps})},api:function(i){return i.controller instanceof pD.SeparatorController?new Wnt.SeparatorApi(i.controller):null}};var V_={},Ev={},DC={},LC={};Object.defineProperty(LC,"__esModule",{value:!0});LC.TabItemView=void 0;var $nt=Ca,Xnt=Qi,Ynt=_l,MA=(0,Xnt.ClassName)("tbi"),Knt=function(){function i(e,t){var n=this;this.element=e.createElement("div"),this.element.classList.add(MA()),t.viewProps.bindClassModifiers(this.element),(0,$nt.bindValueMap)(t.props,"selected",function(a){a?n.element.classList.add(MA(void 0,"sel")):n.element.classList.remove(MA(void 0,"sel"))});var r=e.createElement("button");r.classList.add(MA("b")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;var s=e.createElement("div");s.classList.add(MA("t")),(0,Ynt.bindValueToTextContent)(t.props.value("title"),s),this.buttonElement.appendChild(s),this.titleElement=s}return i}();LC.TabItemView=Knt;Object.defineProperty(DC,"__esModule",{value:!0});DC.TabItemController=void 0;var Jnt=qs,Znt=LC,eit=function(){function i(e,t){this.emitter=new Jnt.Emitter,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new Znt.TabItemView(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return i.prototype.onClick_=function(){this.emitter.emit("click",{sender:this})},i}();DC.TabItemController=eit;Object.defineProperty(Ev,"__esModule",{value:!0});Ev.TabPageController=void 0;var tit=Ca,mD=Bd,nit=op,iit=D_(),rit=DC,sit=function(){function i(e,t){var n=this;this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new rit.TabItemController(e,{props:t.itemProps,viewProps:mD.ViewProps.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new iit.RackController(e,{blade:(0,nit.createBlade)(),viewProps:mD.ViewProps.create()}),this.props=t.props,(0,tit.bindValueMap)(this.props,"selected",function(r){n.itemController.props.set("selected",r),n.contentController.viewProps.set("hidden",!r)})}return Object.defineProperty(i.prototype,"itemController",{get:function(){return this.ic_},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"contentController",{get:function(){return this.cc_},enumerable:!1,configurable:!0}),i.prototype.onItemClick_=function(){this.props.set("selected",!0)},i}();Ev.TabPageController=sit;var H_={};Object.defineProperty(H_,"__esModule",{value:!0});H_.TabPageApi=void 0;var ait=function(){function i(e,t){this.controller_=e,this.rackApi_=t}return Object.defineProperty(i.prototype,"title",{get:function(){var e;return(e=this.controller_.itemController.props.get("title"))!==null&&e!==void 0?e:""},set:function(e){this.controller_.itemController.props.set("title",e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this.controller_.props.get("selected")},set:function(e){this.controller_.props.set("selected",e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"children",{get:function(){return this.rackApi_.children},enumerable:!1,configurable:!0}),i.prototype.addButton=function(e){return this.rackApi_.addButton(e)},i.prototype.addFolder=function(e){return this.rackApi_.addFolder(e)},i.prototype.addSeparator=function(e){return this.rackApi_.addSeparator(e)},i.prototype.addTab=function(e){return this.rackApi_.addTab(e)},i.prototype.add=function(e,t){this.rackApi_.add(e,t)},i.prototype.remove=function(e){this.rackApi_.remove(e)},i.prototype.addInput=function(e,t,n){return this.rackApi_.addInput(e,t,n)},i.prototype.addMonitor=function(e,t,n){return this.rackApi_.addMonitor(e,t,n)},i.prototype.addBlade=function(e){return this.rackApi_.addBlade(e)},i}();H_.TabPageApi=ait;var oit=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(V_,"__esModule",{value:!0});V_.TabApi=void 0;var lit=qs,gD=Vr,rw=wl,cit=bv,uit=Fa,hit=Wf,dit=Ev,fit=H_,pit=function(i){oit(e,i);function e(t,n){var r=i.call(this,t,new hit.RackApi(t.rackController,n))||this;return r.onPageAdd_=r.onPageAdd_.bind(r),r.onPageRemove_=r.onPageRemove_.bind(r),r.onSelect_=r.onSelect_.bind(r),r.emitter_=new lit.Emitter,r.pageApiMap_=new Map,r.rackApi_.on("change",function(s){r.emitter_.emit("change",{event:s})}),r.rackApi_.on("update",function(s){r.emitter_.emit("update",{event:s})}),r.controller_.tab.selectedIndex.emitter.on("change",r.onSelect_),r.controller_.pageSet.emitter.on("add",r.onPageAdd_),r.controller_.pageSet.emitter.on("remove",r.onPageRemove_),r.controller_.pageSet.items.forEach(function(s){r.setUpPageApi_(s)}),r}return Object.defineProperty(e.prototype,"pages",{get:function(){var t=this;return this.controller_.pageSet.items.map(function(n){var r=t.pageApiMap_.get(n);if(!r)throw rw.TpError.shouldNeverHappen();return r})},enumerable:!1,configurable:!0}),e.prototype.addPage=function(t){var n=this.controller_.view.element.ownerDocument,r=new dit.TabPageController(n,{itemProps:gD.ValueMap.fromObject({selected:!1,title:t.title}),props:gD.ValueMap.fromObject({selected:!1})});this.controller_.add(r,t.index);var s=this.pageApiMap_.get(r);if(!s)throw rw.TpError.shouldNeverHappen();return s},e.prototype.removePage=function(t){this.controller_.remove(t)},e.prototype.on=function(t,n){var r=n.bind(this);return this.emitter_.on(t,function(s){r(s.event)}),this},e.prototype.setUpPageApi_=function(t){var n=this.rackApi_.apiSet_.find(function(s){return s.controller_===t.contentController});if(!n)throw rw.TpError.shouldNeverHappen();var r=new fit.TabPageApi(t,n);this.pageApiMap_.set(t,r)},e.prototype.onPageAdd_=function(t){this.setUpPageApi_(t.item)},e.prototype.onPageRemove_=function(t){var n=this.pageApiMap_.get(t.item);if(!n)throw rw.TpError.shouldNeverHappen();this.pageApiMap_.delete(t.item)},e.prototype.onSelect_=function(t){this.emitter_.emit("select",{event:new uit.TpTabSelectEvent(this,t.rawValue)})},e}(cit.RackLikeApi);V_.TabApi=pit;var G_={},OC={};Object.defineProperty(OC,"__esModule",{value:!0});OC.Tab=void 0;var vD=vo,AD=-1,mit=function(){function i(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=(0,vD.createValue)(!0),this.selectedIndex=(0,vD.createValue)(AD),this.items_=[]}return i.prototype.add=function(e,t){var n=t??this.items_.length;this.items_.splice(n,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()},i.prototype.remove=function(e){var t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())},i.prototype.keepSelection_=function(){if(this.items_.length===0){this.selectedIndex.rawValue=AD,this.empty.rawValue=!0;return}var e=this.items_.findIndex(function(t){return t.rawValue});e<0?(this.items_.forEach(function(t,n){t.rawValue=n===0}),this.selectedIndex.rawValue=0):(this.items_.forEach(function(t,n){t.rawValue=n===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1},i.prototype.onItemSelectedChange_=function(e){if(e.rawValue){var t=this.items_.findIndex(function(n){return n===e.sender});this.items_.forEach(function(n,r){n.rawValue=r===t}),this.selectedIndex.rawValue=t}else this.keepSelection_()},i}();OC.Tab=mit;var NC={};Object.defineProperty(NC,"__esModule",{value:!0});NC.TabView=void 0;var git=Ca,vit=Qi,Ait=_l,_it=O_,TA=(0,vit.ClassName)("tab"),bit=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(TA(),(0,_it.bladeContainerClassName)()),t.viewProps.bindClassModifiers(this.element),(0,git.bindValue)(t.empty,(0,Ait.valueToClassName)(this.element,TA(void 0,"nop")));var n=e.createElement("div");n.classList.add(TA("t")),this.element.appendChild(n),this.itemsElement=n;var r=e.createElement("div");r.classList.add(TA("i")),this.element.appendChild(r);var s=t.contentsElement;s.classList.add(TA("c")),this.element.appendChild(s),this.contentsElement=s}return i}();NC.TabView=bit;var yit=dt&&dt.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(G_,"__esModule",{value:!0});G_.TabController=void 0;var _D=Ya,wit=Cv,xit=yv,Cit=D_(),Eit=OC,Sit=NC,Mit=function(i){yit(e,i);function e(t,n){var r=this,s=new Cit.RackController(t,{blade:n.blade,viewProps:n.viewProps}),a=new Eit.Tab;return r=i.call(this,{blade:n.blade,rackController:s,view:new Sit.TabView(t,{contentsElement:s.view.element,empty:a.empty,viewProps:n.viewProps})})||this,r.onPageAdd_=r.onPageAdd_.bind(r),r.onPageRemove_=r.onPageRemove_.bind(r),r.pageSet_=new xit.NestedOrderedSet(function(){return null}),r.pageSet_.emitter.on("add",r.onPageAdd_),r.pageSet_.emitter.on("remove",r.onPageRemove_),r.tab=a,r}return Object.defineProperty(e.prototype,"pageSet",{get:function(){return this.pageSet_},enumerable:!1,configurable:!0}),e.prototype.add=function(t,n){this.pageSet_.add(t,n)},e.prototype.remove=function(t){this.pageSet_.remove(this.pageSet_.items[t])},e.prototype.onPageAdd_=function(t){var n=t.item;(0,_D.insertElementAt)(this.view.itemsElement,n.itemController.view.element,t.index),n.itemController.viewProps.set("parent",this.viewProps),this.rackController.rack.add(n.contentController,t.index),this.tab.add(n.props.value("selected"))},e.prototype.onPageRemove_=function(t){var n=t.item;(0,_D.removeElement)(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.rackController.rack.remove(n.contentController),this.tab.remove(n.props.value("selected"))},e}(wit.RackLikeController);G_.TabController=Mit;var Q_={};Object.defineProperty(Q_,"__esModule",{value:!0});Q_.TabBladePlugin=void 0;var bD=Vr,yD=ha,Tit=V_,wD=G_,Iit=Ev;Q_.TabBladePlugin={id:"tab",type:"blade",accept:function(i){var e=yD.ParamsParsers,t=(0,yD.parseParams)(i,{pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")});return!t||t.pages.length===0?null:{params:t}},controller:function(i){var e=new wD.TabController(i.document,{blade:i.blade,viewProps:i.viewProps});return i.params.pages.forEach(function(t){var n=new Iit.TabPageController(i.document,{itemProps:bD.ValueMap.fromObject({selected:!1,title:t.title}),props:bD.ValueMap.fromObject({selected:!1})});e.add(n)}),e},api:function(i){return i.controller instanceof wD.TabController?new Tit.TabApi(i.controller,i.pool):null}};var q_={},Ux=dt&&dt.__assign||function(){return Ux=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},Ux.apply(this,arguments)};Object.defineProperty(q_,"__esModule",{value:!0});q_.createBladeController=void 0;var Pit=Bd,xD=ha,kit=ui,Bit=op;function Rit(i,e){var t=i.accept(e.params);if(!t)return null;var n=xD.ParamsParsers.optional.boolean(e.params.disabled).value,r=xD.ParamsParsers.optional.boolean(e.params.hidden).value;return i.controller({blade:(0,Bit.createBlade)(),document:e.document,params:(0,kit.forceCast)(Ux(Ux({},t.params),{disabled:n,hidden:r})),viewProps:Pit.ViewProps.create({disabled:n,hidden:r})})}q_.createBladeController=Rit;var j_={};Object.defineProperty(j_,"__esModule",{value:!0});j_.ManualTicker=void 0;var Dit=qs,Lit=function(){function i(){this.disabled=!1,this.emitter=new Dit.Emitter}return i.prototype.dispose=function(){},i.prototype.tick=function(){this.disabled||this.emitter.emit("tick",{sender:this})},i}();j_.ManualTicker=Lit;var W_={};Object.defineProperty(W_,"__esModule",{value:!0});W_.IntervalTicker=void 0;var Oit=qs,Nit=function(){function i(e,t){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new Oit.Emitter,this.interval_=t,this.setTimer_()}return Object.defineProperty(i.prototype,"disabled",{get:function(){return this.disabled_},set:function(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this.clearTimer_()},i.prototype.clearTimer_=function(){if(this.timerId_!==null){var e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}},i.prototype.setTimer_=function(){if(this.clearTimer_(),!(this.interval_<=0)){var e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}},i.prototype.onTick_=function(){this.disabled_||this.emitter.emit("tick",{sender:this})},i}();W_.IntervalTicker=Nit;var hV={};Object.defineProperty(hV,"__esModule",{value:!0});var $_={};Object.defineProperty($_,"__esModule",{value:!0});$_.InputBinding=void 0;var Fit=qs,zit=function(){function i(e){this.onValueChange_=this.onValueChange_.bind(this),this.reader=e.reader,this.writer=e.writer,this.emitter=new Fit.Emitter,this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.target=e.target,this.read()}return i.prototype.read=function(){var e=this.target.read();e!==void 0&&(this.value.rawValue=this.reader(e))},i.prototype.write_=function(e){this.writer(this.target,e)},i.prototype.onValueChange_=function(e){this.write_(e.rawValue),this.emitter.emit("change",{options:e.options,rawValue:e.rawValue,sender:this})},i}();$_.InputBinding=zit;var X_={},$f={},CD=dt&&dt.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))};Object.defineProperty($f,"__esModule",{value:!0});$f.createPushedBuffer=$f.initializeBuffer=void 0;var Uit=ui,Vit=vo;function dV(i,e){for(;i.length<e;)i.push(void 0)}function Hit(i){var e=[];return dV(e,i),(0,Vit.createValue)(e)}$f.initializeBuffer=Hit;function Git(i){var e=i.indexOf(void 0);return(0,Uit.forceCast)(e<0?i:i.slice(0,e))}function Qit(i,e){var t=CD(CD([],Git(i),!0),[e],!1);return t.length>i.length?t.splice(0,t.length-i.length):dV(t,i.length),t}$f.createPushedBuffer=Qit;Object.defineProperty(X_,"__esModule",{value:!0});X_.MonitorBinding=void 0;var qit=$f,jit=qs,Wit=function(){function i(e){this.onTick_=this.onTick_.bind(this),this.reader_=e.reader,this.target=e.target,this.emitter=new jit.Emitter,this.value=e.value,this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}return i.prototype.dispose=function(){this.ticker.dispose()},i.prototype.read=function(){var e=this.target.read();if(e!==void 0){var t=this.value.rawValue,n=this.reader_(e);this.value.rawValue=(0,qit.createPushedBuffer)(t,n),this.emitter.emit("update",{rawValue:n,sender:this})}},i.prototype.onTick_=function(e){this.read()},i}();X_.MonitorBinding=Wit;var bu={};Object.defineProperty(bu,"__esModule",{value:!0});bu.findConstraint=bu.CompositeConstraint=void 0;var fV=function(){function i(e){this.constraints=e}return i.prototype.constrain=function(e){return this.constraints.reduce(function(t,n){return n.constrain(t)},e)},i}();bu.CompositeConstraint=fV;function $it(i,e){if(i instanceof e)return i;if(i instanceof fV){var t=i.constraints.reduce(function(n,r){return n||(r instanceof e?r:null)},null);if(t)return t}return null}bu.findConstraint=$it;var pV={};Object.defineProperty(pV,"__esModule",{value:!0});var Z0={};Object.defineProperty(Z0,"__esModule",{value:!0});Z0.DefiniteRangeConstraint=void 0;var Xit=Vr,Yit=function(){function i(e){this.values=Xit.ValueMap.fromObject({max:e.max,min:e.min})}return i.prototype.constrain=function(e){var t=this.values.get("max"),n=this.values.get("min");return Math.min(Math.max(e,n),t)},i}();Z0.DefiniteRangeConstraint=Yit;var up={};Object.defineProperty(up,"__esModule",{value:!0});up.ListConstraint=void 0;var Kit=Vr,Jit=function(){function i(e){this.values=Kit.ValueMap.fromObject({options:e})}return Object.defineProperty(i.prototype,"options",{get:function(){return this.values.get("options")},enumerable:!1,configurable:!0}),i.prototype.constrain=function(e){var t=this.values.get("options");if(t.length===0)return e;var n=t.filter(function(r){return r.value===e}).length>0;return n?e:t[0].value},i}();up.ListConstraint=Jit;var Y_={};Object.defineProperty(Y_,"__esModule",{value:!0});Y_.RangeConstraint=void 0;var ED=ui,Zit=Vr,ert=function(){function i(e){this.values=Zit.ValueMap.fromObject({max:e.max,min:e.min})}return Object.defineProperty(i.prototype,"maxValue",{get:function(){return this.values.get("max")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minValue",{get:function(){return this.values.get("min")},enumerable:!1,configurable:!0}),i.prototype.constrain=function(e){var t=this.values.get("max"),n=this.values.get("min"),r=e;return(0,ED.isEmpty)(n)||(r=Math.max(r,n)),(0,ED.isEmpty)(t)||(r=Math.min(r,t)),r},i}();Y_.RangeConstraint=ert;var Sv={};Object.defineProperty(Sv,"__esModule",{value:!0});Sv.StepConstraint=void 0;var trt=function(){function i(e,t){t===void 0&&(t=0),this.step=e,this.origin=t}return i.prototype.constrain=function(e){var t=this.origin%this.step,n=Math.round((e-t)/this.step);return t+n*this.step},i}();Sv.StepConstraint=trt;var mV={};Object.defineProperty(mV,"__esModule",{value:!0});var em={},K_={};Object.defineProperty(K_,"__esModule",{value:!0});K_.ListView=void 0;var SD=Ya,nrt=Ca,irt=Qi,N4=(0,irt.ClassName)("lst"),rrt=function(){function i(e,t){var n=this;this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add(N4()),t.viewProps.bindClassModifiers(this.element);var r=e.createElement("select");r.classList.add(N4("s")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;var s=e.createElement("div");s.classList.add(N4("m")),s.appendChild((0,SD.createSvgIconElement)(e,"dropdown")),this.element.appendChild(s),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,(0,nrt.bindValueMap)(this.props_,"options",function(a){(0,SD.removeChildElements)(n.selectElement),a.forEach(function(o){var l=e.createElement("option");l.textContent=o.text,n.selectElement.appendChild(l)}),n.update_()})}return i.prototype.update_=function(){var e=this.props_.get("options").map(function(t){return t.value});this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)},i.prototype.onValueChange_=function(){this.update_()},i}();K_.ListView=rrt;Object.defineProperty(em,"__esModule",{value:!0});em.ListController=void 0;var srt=ui,art=K_,ort=function(){function i(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new art.ListView(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}return i.prototype.onSelectChange_=function(e){var t=(0,srt.forceCast)(e.currentTarget);this.value.rawValue=this.props.get("options")[t.selectedIndex].value},i}();em.ListController=ort;var Mv={},J_={};Object.defineProperty(J_,"__esModule",{value:!0});J_.PopupView=void 0;var lrt=Ca,crt=Qi,urt=_l,MD=(0,crt.ClassName)("pop"),hrt=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(MD()),t.viewProps.bindClassModifiers(this.element),(0,lrt.bindValue)(t.shows,(0,urt.valueToClassName)(this.element,MD(void 0,"v")))}return i}();J_.PopupView=hrt;Object.defineProperty(Mv,"__esModule",{value:!0});Mv.PopupController=void 0;var drt=vo,frt=J_,prt=function(){function i(e,t){this.shows=(0,drt.createValue)(!1),this.viewProps=t.viewProps,this.view=new frt.PopupView(e,{shows:this.shows,viewProps:this.viewProps})}return i}();Mv.PopupController=prt;var Tv={},Z_={};Object.defineProperty(Z_,"__esModule",{value:!0});Z_.TextView=void 0;var mrt=Qi,TD=(0,mrt.ClassName)("txt"),grt=function(){function i(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(TD()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);var n=e.createElement("input");n.classList.add(TD("i")),n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}return i.prototype.refresh=function(){var e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)},i.prototype.onChange_=function(){this.refresh()},i}();Z_.TextView=grt;Object.defineProperty(Tv,"__esModule",{value:!0});Tv.TextController=void 0;var ID=ui,vrt=Z_,Art=function(){function i(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new vrt.TextView(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return i.prototype.onInputChange_=function(e){var t=(0,ID.forceCast)(e.currentTarget),n=t.value,r=this.parser_(n);(0,ID.isEmpty)(r)||(this.value.rawValue=r),this.view.refresh()},i}();Tv.TextController=Art;var gV={};Object.defineProperty(gV,"__esModule",{value:!0});var ch={};Object.defineProperty(ch,"__esModule",{value:!0});ch.BooleanFormatter=ch.boolFromUnknown=ch.boolToString=void 0;function vV(i){return String(i)}ch.boolToString=vV;function _rt(i){return i==="false"?!1:!!i}ch.boolFromUnknown=_rt;function brt(i){return vV(i)}ch.BooleanFormatter=brt;var AV={};Object.defineProperty(AV,"__esModule",{value:!0});var ba={},FC={},Nf={};Object.defineProperty(Nf,"__esModule",{value:!0});Nf.UnaryOperationNode=Nf.BinaryOperationNode=Nf.NumberLiteralNode=void 0;var yrt=function(){function i(e){this.text=e}return i.prototype.evaluate=function(){return Number(this.text)},i.prototype.toString=function(){return this.text},i}();Nf.NumberLiteralNode=yrt;var wrt={"**":function(i,e){return Math.pow(i,e)},"*":function(i,e){return i*e},"/":function(i,e){return i/e},"%":function(i,e){return i%e},"+":function(i,e){return i+e},"-":function(i,e){return i-e},"<<":function(i,e){return i<<e},">>":function(i,e){return i>>e},">>>":function(i,e){return i>>>e},"&":function(i,e){return i&e},"^":function(i,e){return i^e},"|":function(i,e){return i|e}},xrt=function(){function i(e,t,n){this.left=t,this.operator=e,this.right=n}return i.prototype.evaluate=function(){var e=wrt[this.operator];if(!e)throw new Error("unexpected binary operator: '".concat(this.operator));return e(this.left.evaluate(),this.right.evaluate())},i.prototype.toString=function(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")},i}();Nf.BinaryOperationNode=xrt;var Crt={"+":function(i){return i},"-":function(i){return-i},"~":function(i){return~i}},Ert=function(){function i(e,t){this.operator=e,this.expression=t}return i.prototype.evaluate=function(){var e=Crt[this.operator];if(!e)throw new Error("unexpected unary operator: '".concat(this.operator));return e(this.expression.evaluate())},i.prototype.toString=function(){return["u(",this.operator,this.expression.toString(),")"].join(" ")},i}();Nf.UnaryOperationNode=Ert;var Gg={};Object.defineProperty(Gg,"__esModule",{value:!0});Gg.readNumericLiteral=Gg.readWhitespace=void 0;function KI(i){return function(e,t){for(var n=0;n<i.length;n++){var r=i[n](e,t);if(r!=="")return r}return""}}function Srt(i,e){var t,n=i.substr(e).match(/^\s+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}Gg.readWhitespace=Srt;function Mrt(i,e){var t=i.substr(e,1);return t.match(/^[1-9]$/)?t:""}function F1(i,e){var t,n=i.substr(e).match(/^[0-9]+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function Trt(i,e){var t=F1(i,e);if(t!=="")return t;var n=i.substr(e,1);if(e+=1,n!=="-"&&n!=="+")return"";var r=F1(i,e);return r===""?"":n+r}function JI(i,e){var t=i.substr(e,1);if(e+=1,t.toLowerCase()!=="e")return"";var n=Trt(i,e);return n===""?"":t+n}function _V(i,e){var t=i.substr(e,1);if(t==="0")return t;var n=Mrt(i,e);return e+=n.length,n===""?"":n+F1(i,e)}function Irt(i,e){var t=_V(i,e);if(e+=t.length,t==="")return"";var n=i.substr(e,1);if(e+=n.length,n!==".")return"";var r=F1(i,e);return e+=r.length,t+n+r+JI(i,e)}function Prt(i,e){var t=i.substr(e,1);if(e+=t.length,t!==".")return"";var n=F1(i,e);return e+=n.length,n===""?"":t+n+JI(i,e)}function krt(i,e){var t=_V(i,e);return e+=t.length,t===""?"":t+JI(i,e)}var Brt=KI([Irt,Prt,krt]);function Rrt(i,e){var t,n=i.substr(e).match(/^[01]+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function Drt(i,e){var t=i.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0b")return"";var n=Rrt(i,e);return n===""?"":t+n}function Lrt(i,e){var t,n=i.substr(e).match(/^[0-7]+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function Ort(i,e){var t=i.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0o")return"";var n=Lrt(i,e);return n===""?"":t+n}function Nrt(i,e){var t,n=i.substr(e).match(/^[0-9a-f]+/i);return(t=n&&n[0])!==null&&t!==void 0?t:""}function Frt(i,e){var t=i.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0x")return"";var n=Nrt(i,e);return n===""?"":t+n}var zrt=KI([Drt,Ort,Frt]);Gg.readNumericLiteral=KI([zrt,Brt]);Object.defineProperty(FC,"__esModule",{value:!0});FC.parseEcmaNumberExpression=void 0;var ZI=Nf,Qg=Gg;function Urt(i,e){var t=(0,Qg.readNumericLiteral)(i,e);return e+=t.length,t===""?null:{evaluable:new ZI.NumberLiteralNode(t),cursor:e}}function Vrt(i,e){var t=i.substr(e,1);if(e+=t.length,t!=="(")return null;var n=yV(i,e);if(!n)return null;e=n.cursor,e+=(0,Qg.readWhitespace)(i,e).length;var r=i.substr(e,1);return e+=r.length,r!==")"?null:{evaluable:n.evaluable,cursor:e}}function Hrt(i,e){var t;return(t=Urt(i,e))!==null&&t!==void 0?t:Vrt(i,e)}function bV(i,e){var t=Hrt(i,e);if(t)return t;var n=i.substr(e,1);if(e+=n.length,n!=="+"&&n!=="-"&&n!=="~")return null;var r=bV(i,e);return r?(e=r.cursor,{cursor:e,evaluable:new ZI.UnaryOperationNode(n,r.evaluable)}):null}function Grt(i,e,t){t+=(0,Qg.readWhitespace)(e,t).length;var n=i.filter(function(r){return e.startsWith(r,t)})[0];return n?(t+=n.length,t+=(0,Qg.readWhitespace)(e,t).length,{cursor:t,operator:n}):null}function Qrt(i,e){return function(t,n){var r=i(t,n);if(!r)return null;n=r.cursor;for(var s=r.evaluable;;){var a=Grt(e,t,n);if(!a)break;n=a.cursor;var o=i(t,n);if(!o)return null;n=o.cursor,s=new ZI.BinaryOperationNode(a.operator,s,o.evaluable)}return s?{cursor:n,evaluable:s}:null}}var qrt=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(function(i,e){return Qrt(i,e)},bV);function yV(i,e){return e+=(0,Qg.readWhitespace)(i,e).length,qrt(i,e)}function jrt(i){var e=yV(i,0);if(!e)return null;var t=e.cursor+(0,Qg.readWhitespace)(i,e.cursor).length;return t!==i.length?null:e.evaluable}FC.parseEcmaNumberExpression=jrt;Object.defineProperty(ba,"__esModule",{value:!0});ba.createNumberFormatter=ba.numberToString=ba.numberFromUnknown=ba.parseNumber=void 0;var Wrt=ui,$rt=FC;function wV(i){var e,t=(0,$rt.parseEcmaNumberExpression)(i);return(e=t==null?void 0:t.evaluate())!==null&&e!==void 0?e:null}ba.parseNumber=wV;function Xrt(i){if(typeof i=="number")return i;if(typeof i=="string"){var e=wV(i);if(!(0,Wrt.isEmpty)(e))return e}return 0}ba.numberFromUnknown=Xrt;function Yrt(i){return String(i)}ba.numberToString=Yrt;function Krt(i){return function(e){return e.toFixed(Math.max(Math.min(i,20),0))}}ba.createNumberFormatter=Krt;var xV={};Object.defineProperty(xV,"__esModule",{value:!0});var eb={};Object.defineProperty(eb,"__esModule",{value:!0});eb.formatPercentage=void 0;var Jrt=ba,Zrt=(0,Jrt.createNumberFormatter)(0);function est(i){return Zrt(i)+"%"}eb.formatPercentage=est;var Xf={};Object.defineProperty(Xf,"__esModule",{value:!0});Xf.formatString=Xf.stringFromUnknown=void 0;function tst(i){return String(i)}Xf.stringFromUnknown=tst;function nst(i){return i}Xf.formatString=nst;var CV={};Object.defineProperty(CV,"__esModule",{value:!0});var Rd={};Object.defineProperty(Rd,"__esModule",{value:!0});Rd.connectValues=void 0;function ist(i){var e=i.primary,t=i.secondary,n=i.forward,r=i.backward,s=!1;function a(o){s||(s=!0,o(),s=!1)}e.emitter.on("change",function(o){a(function(){t.setRawValue(n(e,t),o.options)})}),t.emitter.on("change",function(o){a(function(){e.setRawValue(r(e,t),o.options)}),a(function(){t.setRawValue(n(e,t),o.options)})}),a(function(){t.setRawValue(n(e,t),{forceEmit:!1,last:!0})})}Rd.connectValues=ist;var Dd={},za={};Object.defineProperty(za,"__esModule",{value:!0});za.isArrowKey=za.isVerticalArrowKey=za.getHorizontalStepKeys=za.getVerticalStepKeys=za.getStepForKey=void 0;function rst(i,e){var t=i*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+t:e.downKey?-t:0}za.getStepForKey=rst;function sst(i){return{altKey:i.altKey,downKey:i.key==="ArrowDown",shiftKey:i.shiftKey,upKey:i.key==="ArrowUp"}}za.getVerticalStepKeys=sst;function ast(i){return{altKey:i.altKey,downKey:i.key==="ArrowLeft",shiftKey:i.shiftKey,upKey:i.key==="ArrowRight"}}za.getHorizontalStepKeys=ast;function EV(i){return i==="ArrowUp"||i==="ArrowDown"}za.isVerticalArrowKey=EV;function ost(i){return EV(i)||i==="ArrowLeft"||i==="ArrowRight"}za.isArrowKey=ost;var Su={};Object.defineProperty(Su,"__esModule",{value:!0});Su.PointerHandler=void 0;var lst=qs;function F4(i,e){var t,n,r=e.ownerDocument.defaultView,s=e.getBoundingClientRect();return{x:i.pageX-(((t=r&&r.scrollX)!==null&&t!==void 0?t:0)+s.left),y:i.pageY-(((n=r&&r.scrollY)!==null&&n!==void 0?n:0)+s.top)}}var cst=function(){function i(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new lst.Emitter,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}return i.prototype.computePosition_=function(e){var t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}},i.prototype.onMouseDown_=function(e){var t;e.preventDefault(),(t=e.currentTarget)===null||t===void 0||t.focus();var n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(F4(e,this.elem_)),sender:this,shiftKey:e.shiftKey})},i.prototype.onDocumentMouseMove_=function(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(F4(e,this.elem_)),sender:this,shiftKey:e.shiftKey})},i.prototype.onDocumentMouseUp_=function(e){var t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(F4(e,this.elem_)),sender:this,shiftKey:e.shiftKey})},i.prototype.onTouchStart_=function(e){e.preventDefault();var t=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-n.left,y:t.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t},i.prototype.onTouchMove_=function(e){var t=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-n.left,y:t.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t},i.prototype.onTouchEnd_=function(e){var t,n=(t=e.targetTouches.item(0))!==null&&t!==void 0?t:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey})},i}();Su.PointerHandler=cst;var tb={},Fr={};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.loopRange=Fr.constrainRange=Fr.getDecimalDigits=Fr.mapRange=void 0;function ust(i,e,t,n,r){var s=(i-e)/(t-e);return n+s*(r-n)}Fr.mapRange=ust;function hst(i){var e=String(i.toFixed(10)),t=e.split(".")[1];return t.replace(/0+$/,"").length}Fr.getDecimalDigits=hst;function dst(i,e,t){return Math.min(Math.max(i,e),t)}Fr.constrainRange=dst;function fst(i,e){return(i%e+e)%e}Fr.loopRange=fst;Object.defineProperty(tb,"__esModule",{value:!0});tb.NumberTextView=void 0;var z4=Ya,pst=Fr,SV=Qi,vc=(0,SV.ClassName)("txt"),mst=function(){function i(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(vc(),vc(void 0,"num")),t.arrayPosition&&this.element.classList.add(vc(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("input");n.classList.add(vc("i")),n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(vc()),this.inputElement.classList.add(vc("i"));var r=e.createElement("div");r.classList.add(vc("k")),this.element.appendChild(r),this.knobElement=r;var s=e.createElementNS(z4.SVG_NS,"svg");s.classList.add(vc("g")),this.knobElement.appendChild(s);var a=e.createElementNS(z4.SVG_NS,"path");a.classList.add(vc("gb")),s.appendChild(a),this.guideBodyElem_=a;var o=e.createElementNS(z4.SVG_NS,"path");o.classList.add(vc("gh")),s.appendChild(o),this.guideHeadElem_=o;var l=e.createElement("div");l.classList.add((0,SV.ClassName)("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}return i.prototype.onDraggingChange_=function(e){if(e.rawValue===null){this.element.classList.remove(vc(void 0,"drg"));return}this.element.classList.add(vc(void 0,"drg"));var t=e.rawValue/this.props_.get("draggingScale"),n=t+(t>0?-1:t<0?1:0),r=(0,pst.constrainRange)(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",["M ".concat(n+r,",0 L").concat(n,",4 L").concat(n+r,",8"),"M ".concat(t,",-1 L").concat(t,",9")].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d","M 0,4 L".concat(t,",4"));var s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left="".concat(t,"px")},i.prototype.refresh=function(){var e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)},i.prototype.onChange_=function(){this.refresh()},i}();tb.NumberTextView=mst;Object.defineProperty(Dd,"__esModule",{value:!0});Dd.NumberTextController=void 0;var PD=ui,gst=vo,sw=za,vst=Su,Ast=tb,_st=function(){function i(e,t){var n;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=t.baseStep,this.parser_=t.parser,this.props=t.props,this.sliderProps_=(n=t.sliderProps)!==null&&n!==void 0?n:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=(0,gst.createValue)(null),this.view=new Ast.NumberTextView(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);var r=new vst.PointerHandler(this.view.knobElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}return i.prototype.constrainValue_=function(e){var t,n,r=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("minValue"),s=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("maxValue"),a=e;return r!==void 0&&(a=Math.max(a,r)),s!==void 0&&(a=Math.min(a,s)),a},i.prototype.onInputChange_=function(e){var t=(0,PD.forceCast)(e.currentTarget),n=t.value,r=this.parser_(n);(0,PD.isEmpty)(r)||(this.value.rawValue=this.constrainValue_(r)),this.view.refresh()},i.prototype.onInputKeyDown_=function(e){var t=(0,sw.getStepForKey)(this.baseStep_,(0,sw.getVerticalStepKeys)(e));t!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})},i.prototype.onInputKeyUp_=function(e){var t=(0,sw.getStepForKey)(this.baseStep_,(0,sw.getVerticalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},i.prototype.onPointerDown_=function(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0},i.prototype.computeDraggingValue_=function(e){if(!e.point)return null;var t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("draggingScale"))},i.prototype.onPointerMove_=function(e){var t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)},i.prototype.onPointerUp_=function(e){var t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)},i}();Dd.NumberTextController=_st;var nb={},ib={};Object.defineProperty(ib,"__esModule",{value:!0});ib.SliderView=void 0;var kD=Fr,bst=Qi,U4=(0,bst.ClassName)("sld"),yst=function(){function i(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(U4()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("div");n.classList.add(U4("t")),t.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;var r=e.createElement("div");r.classList.add(U4("k")),this.trackElement.appendChild(r),this.knobElement=r,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}return i.prototype.update_=function(){var e=(0,kD.constrainRange)((0,kD.mapRange)(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width="".concat(e,"%")},i.prototype.onChange_=function(){this.update_()},i}();ib.SliderView=yst;Object.defineProperty(nb,"__esModule",{value:!0});nb.SliderController=void 0;var BD=Fr,aw=za,wst=Su,xst=ib,Cst=function(){function i(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=t.baseStep,this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new xst.SliderView(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new wst.PointerHandler(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}return i.prototype.handlePointerEvent_=function(e,t){e.point&&this.value.setRawValue((0,BD.mapRange)((0,BD.constrainRange)(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),t)},i.prototype.onPointerDownOrMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},i.prototype.onKeyDown_=function(e){var t=(0,aw.getStepForKey)(this.baseStep_,(0,aw.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})},i.prototype.onKeyUp_=function(e){var t=(0,aw.getStepForKey)(this.baseStep_,(0,aw.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},i}();nb.SliderController=Cst;var rb={},sb={};Object.defineProperty(sb,"__esModule",{value:!0});sb.SliderTextView=void 0;var Est=Qi,V4=(0,Est.ClassName)("sldtxt"),Sst=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(V4());var n=e.createElement("div");n.classList.add(V4("s")),this.sliderView_=t.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);var r=e.createElement("div");r.classList.add(V4("t")),this.textView_=t.textView,r.appendChild(this.textView_.element),this.element.appendChild(r)}return i}();sb.SliderTextView=Sst;Object.defineProperty(rb,"__esModule",{value:!0});rb.SliderTextController=void 0;var Mst=sb,Tst=Dd,Ist=nb,Pst=function(){function i(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new Ist.SliderController(e,{baseStep:t.baseStep,props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new Tst.NumberTextController(e,{baseStep:t.baseStep,parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new Mst.SliderTextView(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}return Object.defineProperty(i.prototype,"sliderController",{get:function(){return this.sliderC_},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textController",{get:function(){return this.textC_},enumerable:!1,configurable:!0}),i}();rb.SliderTextController=Pst;var MV={};Object.defineProperty(MV,"__esModule",{value:!0});var TV={};Object.defineProperty(TV,"__esModule",{value:!0});var hp={};Object.defineProperty(hp,"__esModule",{value:!0});hp.writePrimitive=void 0;function kst(i,e){i.write(e)}hp.writePrimitive=kst;var jr={};Object.defineProperty(jr,"__esModule",{value:!0});jr.getSuitableDraggingScale=jr.getBaseStep=jr.getSuitableDecimalDigits=jr.createListConstraint=jr.normalizeListOptions=jr.parsePointDimensionParams=jr.parsePickerLayout=jr.parseListOptions=void 0;var RD=ui,eP=bu,Bst=up,tP=Sv,DD=Fr,IV=ha;function Rst(i){var e=IV.ParamsParsers;if(Array.isArray(i))return e.required.array(e.required.object({text:e.required.string,value:e.required.raw}))(i).value;if(typeof i=="object")return e.required.raw(i).value}jr.parseListOptions=Rst;function Dst(i){if(i==="inline"||i==="popup")return i}jr.parsePickerLayout=Dst;function Lst(i){var e=IV.ParamsParsers;return e.required.object({max:e.optional.number,min:e.optional.number,step:e.optional.number})(i).value}jr.parsePointDimensionParams=Lst;function PV(i){if(Array.isArray(i))return i;var e=[];return Object.keys(i).forEach(function(t){e.push({text:t,value:i[t]})}),e}jr.normalizeListOptions=PV;function Ost(i){return(0,RD.isEmpty)(i)?null:new Bst.ListConstraint(PV((0,RD.forceCast)(i)))}jr.createListConstraint=Ost;function Nst(i){var e=i?(0,eP.findConstraint)(i,tP.StepConstraint):null;return e?e.step:null}function Fst(i,e){var t=i&&(0,eP.findConstraint)(i,tP.StepConstraint);return t?(0,DD.getDecimalDigits)(t.step):Math.max((0,DD.getDecimalDigits)(e),2)}jr.getSuitableDecimalDigits=Fst;function zst(i){var e=Nst(i);return e??1}jr.getBaseStep=zst;function Ust(i,e){var t,n=i&&(0,eP.findConstraint)(i,tP.StepConstraint),r=Math.abs((t=n==null?void 0:n.step)!==null&&t!==void 0?t:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}jr.getSuitableDraggingScale=Ust;var ab={},zC={};Object.defineProperty(zC,"__esModule",{value:!0});zC.CheckboxView=void 0;var Vst=Ya,Hst=Qi,ow=(0,Hst.ClassName)("ckb"),Gst=function(){function i(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(ow()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("label");n.classList.add(ow("l")),this.element.appendChild(n);var r=e.createElement("input");r.classList.add(ow("i")),r.type="checkbox",n.appendChild(r),this.inputElement=r,t.viewProps.bindDisabled(this.inputElement);var s=e.createElement("div");s.classList.add(ow("w")),n.appendChild(s);var a=(0,Vst.createSvgIconElement)(e,"check");s.appendChild(a),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}return i.prototype.update_=function(){this.inputElement.checked=this.value.rawValue},i.prototype.onValueChange_=function(){this.update_()},i}();zC.CheckboxView=Gst;Object.defineProperty(ab,"__esModule",{value:!0});ab.CheckboxController=void 0;var Qst=ui,qst=zC,jst=function(){function i(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new qst.CheckboxView(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return i.prototype.onInputChange_=function(e){var t=(0,Qst.forceCast)(e.currentTarget);this.value.rawValue=t.checked},i}();ab.CheckboxController=jst;var ob={};Object.defineProperty(ob,"__esModule",{value:!0});ob.BooleanInputPlugin=void 0;var kV=bu,Wst=up,$st=em,Xst=ch,Yst=Vr,LD=ha,Kst=hp,BV=jr,Jst=ab;function Zst(i){var e=[],t=(0,BV.createListConstraint)(i.options);return t&&e.push(t),new kV.CompositeConstraint(e)}ob.BooleanInputPlugin={id:"input-bool",type:"input",accept:function(i,e){if(typeof i!="boolean")return null;var t=LD.ParamsParsers,n=(0,LD.parseParams)(e,{options:t.optional.custom(BV.parseListOptions)});return n?{initialValue:i,params:n}:null},binding:{reader:function(i){return Xst.boolFromUnknown},constraint:function(i){return Zst(i.params)},writer:function(i){return Kst.writePrimitive}},controller:function(i){var e=i.document,t=i.value,n=i.constraint,r=n&&(0,kV.findConstraint)(n,Wst.ListConstraint);return r?new $st.ListController(e,{props:new Yst.ValueMap({options:r.values.value("options")}),value:t,viewProps:i.viewProps}):new Jst.CheckboxController(e,{value:t,viewProps:i.viewProps})}};var tm={},UC={};Object.defineProperty(UC,"__esModule",{value:!0});UC.ColorView=void 0;var eat=Ca,tat=Qi,nat=_l,Qp=(0,tat.ClassName)("col"),iat=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(Qp()),t.foldable.bindExpandedClass(this.element,Qp(void 0,"expanded")),(0,eat.bindValueMap)(t.foldable,"completed",(0,nat.valueToClassName)(this.element,Qp(void 0,"cpl")));var n=e.createElement("div");n.classList.add(Qp("h")),this.element.appendChild(n);var r=e.createElement("div");r.classList.add(Qp("s")),n.appendChild(r),this.swatchElement=r;var s=e.createElement("div");if(s.classList.add(Qp("t")),n.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){var a=e.createElement("div");a.classList.add(Qp("p")),this.element.appendChild(a),this.pickerElement=a}else this.pickerElement=null}return i}();UC.ColorView=iat;var VC={},Ao={},Ss={};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.convertColor=Ss.constrainColorComponents=Ss.getColorMaxComponents=Ss.appendAlphaComponent=Ss.removeAlphaComponent=Ss.hsvToHslInt=Ss.hslToHsvInt=Ss.hsvToRgbInt=void 0;var uo=Fr;function rat(i,e,t){var n=(0,uo.constrainRange)(i/255,0,1),r=(0,uo.constrainRange)(e/255,0,1),s=(0,uo.constrainRange)(t/255,0,1),a=Math.max(n,r,s),o=Math.min(n,r,s),l=a-o,c=0,u=0,h=(o+a)/2;return l!==0&&(u=l/(1-Math.abs(a+o-1)),n===a?c=(r-s)/l:r===a?c=2+(s-n)/l:c=4+(n-r)/l,c=c/6+(c<0?1:0)),[c*360,u*100,h*100]}function sat(i,e,t){var n,r,s,a,o,l,c=(i%360+360)%360,u=(0,uo.constrainRange)(e/100,0,1),h=(0,uo.constrainRange)(t/100,0,1),d=(1-Math.abs(2*h-1))*u,f=d*(1-Math.abs(c/60%2-1)),m=h-d/2,A,_,v;return c>=0&&c<60?(n=[d,f,0],A=n[0],_=n[1],v=n[2]):c>=60&&c<120?(r=[f,d,0],A=r[0],_=r[1],v=r[2]):c>=120&&c<180?(s=[0,d,f],A=s[0],_=s[1],v=s[2]):c>=180&&c<240?(a=[0,f,d],A=a[0],_=a[1],v=a[2]):c>=240&&c<300?(o=[f,0,d],A=o[0],_=o[1],v=o[2]):(l=[d,0,f],A=l[0],_=l[1],v=l[2]),[(A+m)*255,(_+m)*255,(v+m)*255]}function aat(i,e,t){var n=(0,uo.constrainRange)(i/255,0,1),r=(0,uo.constrainRange)(e/255,0,1),s=(0,uo.constrainRange)(t/255,0,1),a=Math.max(n,r,s),o=Math.min(n,r,s),l=a-o,c;l===0?c=0:a===n?c=60*(((r-s)/l%6+6)%6):a===r?c=60*((s-n)/l+2):c=60*((n-r)/l+4);var u=a===0?0:l/a,h=a;return[c,u*100,h*100]}function RV(i,e,t){var n,r,s,a,o,l,c=(0,uo.loopRange)(i,360),u=(0,uo.constrainRange)(e/100,0,1),h=(0,uo.constrainRange)(t/100,0,1),d=h*u,f=d*(1-Math.abs(c/60%2-1)),m=h-d,A,_,v;return c>=0&&c<60?(n=[d,f,0],A=n[0],_=n[1],v=n[2]):c>=60&&c<120?(r=[f,d,0],A=r[0],_=r[1],v=r[2]):c>=120&&c<180?(s=[0,d,f],A=s[0],_=s[1],v=s[2]):c>=180&&c<240?(a=[0,f,d],A=a[0],_=a[1],v=a[2]):c>=240&&c<300?(o=[f,0,d],A=o[0],_=o[1],v=o[2]):(l=[d,0,f],A=l[0],_=l[1],v=l[2]),[(A+m)*255,(_+m)*255,(v+m)*255]}Ss.hsvToRgbInt=RV;function DV(i,e,t){var n=t+e*(100-Math.abs(2*t-100))/200;return[i,n!==0?e*(100-Math.abs(2*t-100))/n:0,t+e*(100-Math.abs(2*t-100))/(2*100)]}Ss.hslToHsvInt=DV;function LV(i,e,t){var n=100-Math.abs(t*(200-e)/100-100);return[i,n!==0?e*t/n:0,t*(200-e)/(2*100)]}Ss.hsvToHslInt=LV;function oat(i){return[i[0],i[1],i[2]]}Ss.removeAlphaComponent=oat;function lat(i,e){return[i[0],i[1],i[2],e]}Ss.appendAlphaComponent=lat;var cat={hsl:{hsl:function(i,e,t){return[i,e,t]},hsv:DV,rgb:sat},hsv:{hsl:LV,hsv:function(i,e,t){return[i,e,t]},rgb:RV},rgb:{hsl:rat,hsv:aat,rgb:function(i,e,t){return[i,e,t]}}};function Vx(i,e){return[e==="float"?1:i==="rgb"?255:360,e==="float"?1:i==="rgb"?255:100,e==="float"?1:i==="rgb"?255:100]}Ss.getColorMaxComponents=Vx;function uat(i,e){return i===e?e:(0,uo.loopRange)(i,e)}function hat(i,e,t){var n,r=Vx(e,t);return[e==="rgb"?(0,uo.constrainRange)(i[0],0,r[0]):uat(i[0],r[0]),(0,uo.constrainRange)(i[1],0,r[1]),(0,uo.constrainRange)(i[2],0,r[2]),(0,uo.constrainRange)((n=i[3])!==null&&n!==void 0?n:1,0,1)]}Ss.constrainColorComponents=hat;function OD(i,e,t,n){var r=Vx(e,t),s=Vx(e,n);return i.map(function(a,o){return a/r[o]*s[o]})}function dat(i,e,t){var n,r=OD(i,e.mode,e.type,"int"),s=(n=cat[e.mode])[t.mode].apply(n,r);return OD(s,t.mode,"int",t.type)}Ss.convertColor=dat;Object.defineProperty(Ao,"__esModule",{value:!0});Ao.Color=void 0;var fat=ui,lw=Ss;function cw(i,e){return typeof i!="object"||(0,fat.isEmpty)(i)?!1:e in i&&typeof i[e]=="number"}var pat=function(){function i(e,t,n){n===void 0&&(n="int"),this.mode=t,this.type=n,this.comps_=(0,lw.constrainColorComponents)(e,t,n)}return i.black=function(e){return e===void 0&&(e="int"),new i([0,0,0],"rgb",e)},i.fromObject=function(e,t){t===void 0&&(t="int");var n="a"in e?[e.r,e.g,e.b,e.a]:[e.r,e.g,e.b];return new i(n,"rgb",t)},i.toRgbaObject=function(e,t){return t===void 0&&(t="int"),e.toRgbaObject(t)},i.isRgbColorObject=function(e){return cw(e,"r")&&cw(e,"g")&&cw(e,"b")},i.isRgbaColorObject=function(e){return this.isRgbColorObject(e)&&cw(e,"a")},i.isColorObject=function(e){return this.isRgbColorObject(e)},i.equals=function(e,t){if(e.mode!==t.mode)return!1;for(var n=e.comps_,r=t.comps_,s=0;s<n.length;s++)if(n[s]!==r[s])return!1;return!0},i.prototype.getComponents=function(e,t){return t===void 0&&(t="int"),(0,lw.appendAlphaComponent)((0,lw.convertColor)((0,lw.removeAlphaComponent)(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:t}),this.comps_[3])},i.prototype.toRgbaObject=function(e){e===void 0&&(e="int");var t=this.getComponents("rgb",e);return{r:t[0],g:t[1],b:t[2],a:t[3]}},i}();Ao.Color=pat;var HC={},mat=dt&&dt.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(HC,"__esModule",{value:!0});HC.ColorPickerView=void 0;var gat=Qi,lf=(0,gat.ClassName)("colp"),vat=function(){function i(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(lf()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("div");n.classList.add(lf("hsv"));var r=e.createElement("div");r.classList.add(lf("sv")),this.svPaletteView_=t.svPaletteView,r.appendChild(this.svPaletteView_.element),n.appendChild(r);var s=e.createElement("div");s.classList.add(lf("h")),this.hPaletteView_=t.hPaletteView,s.appendChild(this.hPaletteView_.element),n.appendChild(s),this.element.appendChild(n);var a=e.createElement("div");if(a.classList.add(lf("rgb")),this.textView_=t.textView,a.appendChild(this.textView_.element),this.element.appendChild(a),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};var o=e.createElement("div");o.classList.add(lf("a"));var l=e.createElement("div");l.classList.add(lf("ap")),l.appendChild(this.alphaViews_.palette.element),o.appendChild(l);var c=e.createElement("div");c.classList.add(lf("at")),c.appendChild(this.alphaViews_.text.element),o.appendChild(c),this.element.appendChild(o)}}return Object.defineProperty(i.prototype,"allFocusableElements",{get:function(){var e=mat([this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement],this.textView_.textViews.map(function(t){return t.inputElement}),!0);return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e},enumerable:!1,configurable:!0}),i}();HC.ColorPickerView=vat;var GC={},fl={};Object.defineProperty(fl,"__esModule",{value:!0});fl.extractColorType=fl.getBaseStepForColor=fl.parseColorInputParams=void 0;var ND=ha,Aat=jr;function _at(i){return i==="int"?"int":i==="float"?"float":void 0}function bat(i){var e=ND.ParamsParsers;return(0,ND.parseParams)(i,{alpha:e.optional.boolean,color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(_at)}),expanded:e.optional.boolean,picker:e.optional.custom(Aat.parsePickerLayout)})}fl.parseColorInputParams=bat;function yat(i){return i?.1:1}fl.getBaseStepForColor=yat;function wat(i){var e;return(e=i.color)===null||e===void 0?void 0:e.type}fl.extractColorType=wat;var QC={},Ld={};(function(i){var e=dt&&dt.__assign||function(){return e=Object.assign||function(me){for(var fe,Be=1,V=arguments.length;Be<V;Be++){fe=arguments[Be];for(var $ in fe)Object.prototype.hasOwnProperty.call(fe,$)&&(me[$]=fe[$])}return me},e.apply(this,arguments)},t=dt&&dt.__spreadArray||function(me,fe,Be){if(Be||arguments.length===2)for(var V=0,$=fe.length,ee;V<$;V++)(ee||!(V in fe))&&(ee||(ee=Array.prototype.slice.call(fe,0,V)),ee[V]=fe[V]);return me.concat(ee||Array.prototype.slice.call(fe))};Object.defineProperty(i,"__esModule",{value:!0}),i.findColorStringifier=i.getColorStringifier=i.colorToObjectRgbaString=i.colorToObjectRgbString=i.colorToFunctionalHslaString=i.colorToFunctionalHslString=i.colorToFunctionalRgbaString=i.colorToFunctionalRgbString=i.colorToHexRgbaString=i.colorToHexRgbString=i.colorFromString=i.hasAlphaComponent=i.createColorStringParser=i.createColorStringBindingReader=i.CompositeColorParser=i.detectStringColorFormat=i.getColorNotation=void 0;var n=ba,r=eb,s=Fr,a=Ao,o=Ss;function l(me,fe){return me.alpha===fe.alpha&&me.mode===fe.mode&&me.notation===fe.notation&&me.type===fe.type}function c(me,fe){var Be=me.match(/^(.+)%$/);return Math.min(Be?parseFloat(Be[1])*.01*fe:parseFloat(me),fe)}var u={deg:function(me){return me},grad:function(me){return me*360/400},rad:function(me){return me*360/(2*Math.PI)},turn:function(me){return me*360}};function h(me){var fe=me.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!fe)return parseFloat(me);var Be=parseFloat(fe[1]),V=fe[2];return u[V](Be)}function d(me){var fe=me.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!fe)return null;var Be=[c(fe[1],255),c(fe[2],255),c(fe[3],255)];return isNaN(Be[0])||isNaN(Be[1])||isNaN(Be[2])?null:Be}function f(me){return function(fe){var Be=d(fe);return Be?new a.Color(Be,"rgb",me):null}}function m(me){var fe=me.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!fe)return null;var Be=[c(fe[1],255),c(fe[2],255),c(fe[3],255),c(fe[4],1)];return isNaN(Be[0])||isNaN(Be[1])||isNaN(Be[2])||isNaN(Be[3])?null:Be}function A(me){return function(fe){var Be=m(fe);return Be?new a.Color(Be,"rgb",me):null}}function _(me){var fe=me.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!fe)return null;var Be=[h(fe[1]),c(fe[2],100),c(fe[3],100)];return isNaN(Be[0])||isNaN(Be[1])||isNaN(Be[2])?null:Be}function v(me){return function(fe){var Be=_(fe);return Be?new a.Color(Be,"hsl",me):null}}function w(me){var fe=me.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!fe)return null;var Be=[h(fe[1]),c(fe[2],100),c(fe[3],100),c(fe[4],1)];return isNaN(Be[0])||isNaN(Be[1])||isNaN(Be[2])||isNaN(Be[3])?null:Be}function x(me){return function(fe){var Be=w(fe);return Be?new a.Color(Be,"hsl",me):null}}function C(me){var fe=me.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(fe)return[parseInt(fe[1]+fe[1],16),parseInt(fe[2]+fe[2],16),parseInt(fe[3]+fe[3],16)];var Be=me.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return Be?[parseInt(Be[1],16),parseInt(Be[2],16),parseInt(Be[3],16)]:null}function S(me){var fe=C(me);return fe?new a.Color(fe,"rgb","int"):null}function I(me){var fe=me.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(fe)return[parseInt(fe[1]+fe[1],16),parseInt(fe[2]+fe[2],16),parseInt(fe[3]+fe[3],16),(0,s.mapRange)(parseInt(fe[4]+fe[4],16),0,255,0,1)];var Be=me.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return Be?[parseInt(Be[1],16),parseInt(Be[2],16),parseInt(Be[3],16),(0,s.mapRange)(parseInt(Be[4],16),0,255,0,1)]:null}function P(me){var fe=I(me);return fe?new a.Color(fe,"rgb","int"):null}function k(me){var fe=me.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!fe)return null;var Be=[parseFloat(fe[1]),parseFloat(fe[2]),parseFloat(fe[3])];return isNaN(Be[0])||isNaN(Be[1])||isNaN(Be[2])?null:Be}function M(me){return function(fe){var Be=k(fe);return Be?new a.Color(Be,"rgb",me):null}}function R(me){var fe=me.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!fe)return null;var Be=[parseFloat(fe[1]),parseFloat(fe[2]),parseFloat(fe[3]),parseFloat(fe[4])];return isNaN(Be[0])||isNaN(Be[1])||isNaN(Be[2])||isNaN(Be[3])?null:Be}function N(me){return function(fe){var Be=R(fe);return Be?new a.Color(Be,"rgb",me):null}}var U={"func.rgb":f("int"),"func.rgba":A("int"),"func.hsl":v("int"),"func.hsla":x("int"),"hex.rgb":S,"hex.rgba":P};function q(me){var fe=Object.keys(U);return fe.reduce(function(Be,V){if(Be)return Be;var $=U[V];return $(me)?V:null},null)}i.getColorNotation=q;var W=[{parser:C,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:I,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:d,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:m,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:_,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:w,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:k,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:R,result:{alpha:!0,mode:"rgb",notation:"object"}}];function F(me){return W.reduce(function(fe,Be){var V=Be.parser,$=Be.result;return fe||(V(me)?$:null)},null)}function ue(me,fe){fe===void 0&&(fe="int");var Be=F(me);return Be?Be.notation==="hex"&&fe!=="float"?e(e({},Be),{type:"int"}):Be.notation==="func"?e(e({},Be),{type:fe}):null:null}i.detectStringColorFormat=ue;var J=function(me){var fe=q(me);return fe?U[fe](me):null};i.CompositeColorParser=J;var Y={int:[S,P,f("int"),A("int"),v("int"),x("int"),M("int"),N("int")],float:[f("float"),A("float"),v("float"),x("float"),M("float"),N("float")]};function Pe(me){var fe=Y[me];return function(Be){if(typeof Be!="string")return a.Color.black(me);var V=fe.reduce(function($,ee){return $||ee(Be)},null);return V??a.Color.black(me)}}i.createColorStringBindingReader=Pe;function Ie(me){var fe=Y[me];return function(Be){return fe.reduce(function(V,$){return V||$(Be)},null)}}i.createColorStringParser=Ie;function pe(me){return me==="func.hsla"||me==="func.rgba"||me==="hex.rgba"}i.hasAlphaComponent=pe;function Ce(me){if(typeof me=="string"){var fe=(0,i.CompositeColorParser)(me);if(fe)return fe}return a.Color.black()}i.colorFromString=Ce;function G(me){var fe=(0,s.constrainRange)(Math.floor(me),0,255).toString(16);return fe.length===1?"0".concat(fe):fe}function oe(me,fe){fe===void 0&&(fe="#");var Be=(0,o.removeAlphaComponent)(me.getComponents("rgb")).map(G).join("");return"".concat(fe).concat(Be)}i.colorToHexRgbString=oe;function je(me,fe){fe===void 0&&(fe="#");var Be=me.getComponents("rgb"),V=[Be[0],Be[1],Be[2],Be[3]*255].map(G).join("");return"".concat(fe).concat(V)}i.colorToHexRgbaString=je;function Tt(me,fe){var Be=(0,n.createNumberFormatter)(fe==="float"?2:0),V=(0,o.removeAlphaComponent)(me.getComponents("rgb",fe)).map(function($){return Be($)});return"rgb(".concat(V.join(", "),")")}i.colorToFunctionalRgbString=Tt;function rt(me){return function(fe){return Tt(fe,me)}}function De(me,fe){var Be=(0,n.createNumberFormatter)(2),V=(0,n.createNumberFormatter)(fe==="float"?2:0),$=me.getComponents("rgb",fe).map(function(ee,Te){var te=Te===3?Be:V;return te(ee)});return"rgba(".concat($.join(", "),")")}i.colorToFunctionalRgbaString=De;function xt(me){return function(fe){return De(fe,me)}}function mt(me){var fe=[(0,n.createNumberFormatter)(0),r.formatPercentage,r.formatPercentage],Be=(0,o.removeAlphaComponent)(me.getComponents("hsl")).map(function(V,$){return fe[$](V)});return"hsl(".concat(Be.join(", "),")")}i.colorToFunctionalHslString=mt;function et(me){var fe=[(0,n.createNumberFormatter)(0),r.formatPercentage,r.formatPercentage,(0,n.createNumberFormatter)(2)],Be=me.getComponents("hsl").map(function(V,$){return fe[$](V)});return"hsla(".concat(Be.join(", "),")")}i.colorToFunctionalHslaString=et;function st(me,fe){var Be=(0,n.createNumberFormatter)(fe==="float"?2:0),V=["r","g","b"],$=(0,o.removeAlphaComponent)(me.getComponents("rgb",fe)).map(function(ee,Te){return"".concat(V[Te],": ").concat(Be(ee))});return"{".concat($.join(", "),"}")}i.colorToObjectRgbString=st;function ce(me){return function(fe){return st(fe,me)}}function tt(me,fe){var Be=(0,n.createNumberFormatter)(2),V=(0,n.createNumberFormatter)(fe==="float"?2:0),$=["r","g","b","a"],ee=me.getComponents("rgb",fe).map(function(Te,te){var Qe=te===3?Be:V;return"".concat($[te],": ").concat(Qe(Te))});return"{".concat(ee.join(", "),"}")}i.colorToObjectRgbaString=tt;function he(me){return function(fe){return tt(fe,me)}}var be={"func.hsl":mt,"func.hsla":et,"func.rgb":Tt,"func.rgba":De,"hex.rgb":oe,"hex.rgba":je};function Ne(me){return be[me]}i.getColorStringifier=Ne;var nt=t([{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:oe},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:je},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:mt},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:et}],["int","float"].reduce(function(me,fe){return t(t([],me,!0),[{format:{alpha:!1,mode:"rgb",notation:"func",type:fe},stringifier:rt(fe)},{format:{alpha:!0,mode:"rgb",notation:"func",type:fe},stringifier:xt(fe)},{format:{alpha:!1,mode:"rgb",notation:"object",type:fe},stringifier:ce(fe)},{format:{alpha:!0,mode:"rgb",notation:"object",type:fe},stringifier:he(fe)}],!1)},[]),!0);function ze(me){return nt.reduce(function(fe,Be){return fe||(l(Be.format,me)?Be.stringifier:null)},null)}i.findColorStringifier=ze})(Ld);Object.defineProperty(QC,"__esModule",{value:!0});QC.APaletteView=void 0;var xat=Fr,Cat=Qi,H4=Ld,FD=Ao,IA=(0,Cat.ClassName)("apl"),Eat=function(){function i(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(IA()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);var n=e.createElement("div");n.classList.add(IA("b")),this.element.appendChild(n);var r=e.createElement("div");r.classList.add(IA("c")),n.appendChild(r),this.colorElem_=r;var s=e.createElement("div");s.classList.add(IA("m")),this.element.appendChild(s),this.markerElem_=s;var a=e.createElement("div");a.classList.add(IA("p")),this.markerElem_.appendChild(a),this.previewElem_=a,this.update_()}return i.prototype.update_=function(){var e=this.value.rawValue,t=e.getComponents("rgb"),n=new FD.Color([t[0],t[1],t[2],0],"rgb"),r=new FD.Color([t[0],t[1],t[2],255],"rgb"),s=["to right",(0,H4.colorToFunctionalRgbaString)(n),(0,H4.colorToFunctionalRgbaString)(r)];this.colorElem_.style.background="linear-gradient(".concat(s.join(","),")"),this.previewElem_.style.backgroundColor=(0,H4.colorToFunctionalRgbaString)(e);var a=(0,xat.mapRange)(t[3],0,1,0,100);this.markerElem_.style.left="".concat(a,"%")},i.prototype.onValueChange_=function(){this.update_()},i}();QC.APaletteView=Eat;Object.defineProperty(GC,"__esModule",{value:!0});GC.APaletteController=void 0;var uw=za,Sat=Su,zD=Ao,UD=fl,Mat=QC,Tat=function(){function i(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Mat.APaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Sat.PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return i.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=e.point.x/e.bounds.width,r=this.value.rawValue,s=r.getComponents("hsv"),a=s[0],o=s[1],l=s[2];this.value.setRawValue(new zD.Color([a,o,l,n],"hsv"),t)}},i.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},i.prototype.onKeyDown_=function(e){var t=(0,uw.getStepForKey)((0,UD.getBaseStepForColor)(!0),(0,uw.getHorizontalStepKeys)(e));if(t!==0){var n=this.value.rawValue,r=n.getComponents("hsv"),s=r[0],a=r[1],o=r[2],l=r[3];this.value.setRawValue(new zD.Color([s,a,o,l+t],"hsv"),{forceEmit:!1,last:!1})}},i.prototype.onKeyUp_=function(e){var t=(0,uw.getStepForKey)((0,UD.getBaseStepForColor)(!0),(0,uw.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},i}();GC.APaletteController=Tat;var qC={},jC={};Object.defineProperty(jC,"__esModule",{value:!0});jC.ColorTextView=void 0;var VD=Ya,Iat=Ca,Pat=Qi,Wm=(0,Pat.ClassName)("coltxt");function kat(i){var e=i.createElement("select"),t=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return e.appendChild(t.reduce(function(n,r){var s=i.createElement("option");return s.textContent=r.text,s.value=r.value,n.appendChild(s),n},i.createDocumentFragment())),e}var Bat=function(){function i(e,t){var n=this;this.element=e.createElement("div"),this.element.classList.add(Wm()),t.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(Wm("m")),this.modeElem_=kat(e),this.modeElem_.classList.add(Wm("ms")),r.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);var s=e.createElement("div");s.classList.add(Wm("mm")),s.appendChild((0,VD.createSvgIconElement)(e,"dropdown")),r.appendChild(s),this.element.appendChild(r);var a=e.createElement("div");a.classList.add(Wm("w")),this.element.appendChild(a),this.textsElem_=a,this.textViews_=t.textViews,this.applyTextViews_(),(0,Iat.bindValue)(t.colorMode,function(o){n.modeElem_.value=o})}return Object.defineProperty(i.prototype,"modeSelectElement",{get:function(){return this.modeElem_},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textViews",{get:function(){return this.textViews_},set:function(e){this.textViews_=e,this.applyTextViews_()},enumerable:!1,configurable:!0}),i.prototype.applyTextViews_=function(){var e=this;(0,VD.removeChildElements)(this.textsElem_);var t=this.element.ownerDocument;this.textViews_.forEach(function(n){var r=t.createElement("div");r.classList.add(Wm("c")),r.appendChild(n.element),e.textsElem_.appendChild(r)})},i}();jC.ColorTextView=Bat;Object.defineProperty(qC,"__esModule",{value:!0});qC.ColorTextController=void 0;var Rat=Z0,Dat=ba,Lat=Vr,Oat=Rd,OV=vo,Nat=Dd,Fat=Ao,YM=Ss,zat=fl,Uat=jC;function Vat(i){return(0,Dat.createNumberFormatter)(i==="float"?2:0)}function Hat(i,e,t){var n=(0,YM.getColorMaxComponents)(i,e)[t];return new Rat.DefiniteRangeConstraint({min:0,max:n})}function G4(i,e,t){return new Nat.NumberTextController(i,{arrayPosition:t===0?"fst":t===3-1?"lst":"mid",baseStep:(0,zat.getBaseStepForColor)(!1),parser:e.parser,props:Lat.ValueMap.fromObject({draggingScale:e.colorType==="float"?.01:1,formatter:Vat(e.colorType)}),value:(0,OV.createValue)(0,{constraint:Hat(e.colorMode,e.colorType,t)}),viewProps:e.viewProps})}var Gat=function(){function i(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.parser_=t.parser,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=(0,OV.createValue)(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new Uat.ColorTextView(e,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}return i.prototype.createComponentControllers_=function(e){var t=this,n={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},r=[G4(e,n,0),G4(e,n,1),G4(e,n,2)];return r.forEach(function(s,a){(0,Oat.connectValues)({primary:t.value,secondary:s.value,forward:function(o){return o.rawValue.getComponents(t.colorMode.rawValue,t.colorType_)[a]},backward:function(o,l){var c=t.colorMode.rawValue,u=o.rawValue.getComponents(c,t.colorType_);return u[a]=l.rawValue,new Fat.Color((0,YM.appendAlphaComponent)((0,YM.removeAlphaComponent)(u),u[3]),c,t.colorType_)}})}),r},i.prototype.onModeSelectChange_=function(e){var t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]},i}();qC.ColorTextController=Gat;var WC={},$C={};Object.defineProperty($C,"__esModule",{value:!0});$C.HPaletteView=void 0;var Qat=Fr,qat=Qi,jat=Ld,Wat=Ao,Q4=(0,qat.ClassName)("hpl"),$at=function(){function i(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Q4()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);var n=e.createElement("div");n.classList.add(Q4("c")),this.element.appendChild(n);var r=e.createElement("div");r.classList.add(Q4("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}return i.prototype.update_=function(){var e=this.value.rawValue,t=e.getComponents("hsv")[0];this.markerElem_.style.backgroundColor=(0,jat.colorToFunctionalRgbString)(new Wat.Color([t,100,100],"hsv"));var n=(0,Qat.mapRange)(t,0,360,0,100);this.markerElem_.style.left="".concat(n,"%")},i.prototype.onValueChange_=function(){this.update_()},i}();$C.HPaletteView=$at;Object.defineProperty(WC,"__esModule",{value:!0});WC.HPaletteController=void 0;var HD=Fr,hw=za,Xat=Su,GD=Ao,QD=fl,Yat=$C,Kat=function(){function i(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Yat.HPaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Xat.PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return i.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=(0,HD.mapRange)((0,HD.constrainRange)(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),r=this.value.rawValue,s=r.getComponents("hsv"),a=s[1],o=s[2],l=s[3];this.value.setRawValue(new GD.Color([n,a,o,l],"hsv"),t)}},i.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},i.prototype.onKeyDown_=function(e){var t=(0,hw.getStepForKey)((0,QD.getBaseStepForColor)(!1),(0,hw.getHorizontalStepKeys)(e));if(t!==0){var n=this.value.rawValue,r=n.getComponents("hsv"),s=r[0],a=r[1],o=r[2],l=r[3];this.value.setRawValue(new GD.Color([s+t,a,o,l],"hsv"),{forceEmit:!1,last:!1})}},i.prototype.onKeyUp_=function(e){var t=(0,hw.getStepForKey)((0,QD.getBaseStepForColor)(!1),(0,hw.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},i}();WC.HPaletteController=Kat;var XC={},YC={};Object.defineProperty(YC,"__esModule",{value:!0});YC.SvPaletteView=void 0;var Jat=Ya,dw=Fr,Zat=Qi,eot=Ss,q4=(0,Zat.ClassName)("svp"),qD=64,tot=function(){function i(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(q4()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);var n=e.createElement("canvas");n.height=qD,n.width=qD,n.classList.add(q4("c")),this.element.appendChild(n),this.canvasElement=n;var r=e.createElement("div");r.classList.add(q4("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}return i.prototype.update_=function(){var e=(0,Jat.getCanvasContext)(this.canvasElement);if(e){for(var t=this.value.rawValue,n=t.getComponents("hsv"),r=this.canvasElement.width,s=this.canvasElement.height,a=e.getImageData(0,0,r,s),o=a.data,l=0;l<s;l++)for(var c=0;c<r;c++){var u=(0,dw.mapRange)(c,0,r,0,100),h=(0,dw.mapRange)(l,0,s,100,0),d=(0,eot.hsvToRgbInt)(n[0],u,h),f=(l*r+c)*4;o[f]=d[0],o[f+1]=d[1],o[f+2]=d[2],o[f+3]=255}e.putImageData(a,0,0);var m=(0,dw.mapRange)(n[1],0,100,0,100);this.markerElem_.style.left="".concat(m,"%");var A=(0,dw.mapRange)(n[2],0,100,100,0);this.markerElem_.style.top="".concat(A,"%")}},i.prototype.onValueChange_=function(){this.update_()},i}();YC.SvPaletteView=tot;Object.defineProperty(XC,"__esModule",{value:!0});XC.SvPaletteController=void 0;var jD=Fr,td=za,not=Su,WD=Ao,$D=fl,iot=YC,rot=function(){function i(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new iot.SvPaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new not.PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return i.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=(0,jD.mapRange)(e.point.x,0,e.bounds.width,0,100),r=(0,jD.mapRange)(e.point.y,0,e.bounds.height,100,0),s=this.value.rawValue.getComponents("hsv"),a=s[0],o=s[3];this.value.setRawValue(new WD.Color([a,n,r,o],"hsv"),t)}},i.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},i.prototype.onKeyDown_=function(e){(0,td.isArrowKey)(e.key)&&e.preventDefault();var t=this.value.rawValue.getComponents("hsv"),n=t[0],r=t[1],s=t[2],a=t[3],o=(0,$D.getBaseStepForColor)(!1),l=(0,td.getStepForKey)(o,(0,td.getHorizontalStepKeys)(e)),c=(0,td.getStepForKey)(o,(0,td.getVerticalStepKeys)(e));l===0&&c===0||this.value.setRawValue(new WD.Color([n,r+l,s+c,a],"hsv"),{forceEmit:!1,last:!1})},i.prototype.onKeyUp_=function(e){var t=(0,$D.getBaseStepForColor)(!1),n=(0,td.getStepForKey)(t,(0,td.getHorizontalStepKeys)(e)),r=(0,td.getStepForKey)(t,(0,td.getVerticalStepKeys)(e));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},i}();XC.SvPaletteController=rot;Object.defineProperty(VC,"__esModule",{value:!0});VC.ColorPickerController=void 0;var sot=Z0,j4=ba,aot=Vr,oot=Rd,lot=vo,cot=Dd,uot=Ao,hot=HC,dot=GC,fot=qC,pot=WC,mot=XC,got=function(){function i(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new pot.HPaletteController(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new mot.SvPaletteController(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new dot.APaletteController(e,{value:this.value,viewProps:this.viewProps}),text:new cot.NumberTextController(e,{parser:j4.parseNumber,baseStep:.1,props:aot.ValueMap.fromObject({draggingScale:.01,formatter:(0,j4.createNumberFormatter)(2)}),value:(0,lot.createValue)(0,{constraint:new sot.DefiniteRangeConstraint({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&(0,oot.connectValues)({primary:this.value,secondary:this.alphaIcs_.text.value,forward:function(n){return n.rawValue.getComponents()[3]},backward:function(n,r){var s=n.rawValue.getComponents();return s[3]=r.rawValue,new uot.Color(s,n.rawValue.mode)}}),this.textC_=new fot.ColorTextController(e,{colorType:t.colorType,parser:j4.parseNumber,value:this.value,viewProps:this.viewProps}),this.view=new hot.ColorPickerView(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}return Object.defineProperty(i.prototype,"textController",{get:function(){return this.textC_},enumerable:!1,configurable:!0}),i}();VC.ColorPickerController=got;var KC={},JC={};Object.defineProperty(JC,"__esModule",{value:!0});JC.ColorSwatchView=void 0;var vot=Qi,Aot=Ld,W4=(0,vot.ClassName)("colsw"),_ot=function(){function i(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(W4()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("div");n.classList.add(W4("sw")),this.element.appendChild(n),this.swatchElem_=n;var r=e.createElement("button");r.classList.add(W4("b")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r,this.update_()}return i.prototype.update_=function(){var e=this.value.rawValue;this.swatchElem_.style.backgroundColor=(0,Aot.colorToHexRgbaString)(e)},i.prototype.onValueChange_=function(){this.update_()},i}();JC.ColorSwatchView=_ot;Object.defineProperty(KC,"__esModule",{value:!0});KC.ColorSwatchController=void 0;var bot=JC,yot=function(){function i(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new bot.ColorSwatchView(e,{value:this.value,viewProps:this.viewProps})}return i}();KC.ColorSwatchController=yot;Object.defineProperty(tm,"__esModule",{value:!0});tm.ColorController=void 0;var XD=Do,wot=Mv,xot=Tv,YD=Ya,Cot=Vr,Eot=Rd,Sot=ui,Mot=UC,Tot=VC,Iot=KC,Pot=function(){function i(e,t){var n=this;this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=XD.Foldable.create(t.expanded),this.swatchC_=new Iot.ColorSwatchController(e,{value:this.value,viewProps:this.viewProps});var r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new xot.TextController(e,{parser:t.parser,props:Cot.ValueMap.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Mot.ColorView(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=t.pickerLayout==="popup"?new wot.PopupController(e,{viewProps:this.viewProps}):null;var s=new Tot.ColorPickerController(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(function(a){a.addEventListener("blur",n.onPopupChildBlur_),a.addEventListener("keydown",n.onPopupChildKeydown_)}),this.pickerC_=s,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(s.view.element),(0,Eot.connectValues)({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(a){return a.rawValue},backward:function(a,o){return o.rawValue}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),(0,XD.bindFoldable)(this.foldable_,this.view.pickerElement))}return Object.defineProperty(i.prototype,"textController",{get:function(){return this.textC_},enumerable:!1,configurable:!0}),i.prototype.onButtonBlur_=function(e){if(this.popC_){var t=this.view.element,n=(0,Sot.forceCast)(e.relatedTarget);(!n||!t.contains(n))&&(this.popC_.shows.rawValue=!1)}},i.prototype.onButtonClick_=function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()},i.prototype.onPopupChildBlur_=function(e){if(this.popC_){var t=this.popC_.view.element,n=(0,YD.findNextTarget)(e);n&&t.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!(0,YD.supportsTouch)(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}},i.prototype.onPopupChildKeydown_=function(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()},i}();tm.ColorController=Pot;var _a={};Object.defineProperty(_a,"__esModule",{value:!0});_a.colorFromRgbaNumber=_a.colorFromRgbNumber=_a.numberToRgbaColor=_a.numberToRgbColor=_a.colorToRgbaNumber=_a.colorToRgbNumber=_a.colorFromObject=void 0;var kot=Fr,x0=Ao,Bot=Ss;function Rot(i,e){return x0.Color.isColorObject(i)?x0.Color.fromObject(i,e):x0.Color.black(e)}_a.colorFromObject=Rot;function Dot(i){return(0,Bot.removeAlphaComponent)(i.getComponents("rgb")).reduce(function(e,t){return e<<8|Math.floor(t)&255},0)}_a.colorToRgbNumber=Dot;function Lot(i){return i.getComponents("rgb").reduce(function(e,t,n){var r=Math.floor(n===3?t*255:t)&255;return e<<8|r},0)>>>0}_a.colorToRgbaNumber=Lot;function NV(i){return new x0.Color([i>>16&255,i>>8&255,i&255],"rgb")}_a.numberToRgbColor=NV;function FV(i){return new x0.Color([i>>24&255,i>>16&255,i>>8&255,(0,kot.mapRange)(i&255,0,255,0,1)],"rgb")}_a.numberToRgbaColor=FV;function Oot(i){return typeof i!="number"?x0.Color.black():NV(i)}_a.colorFromRgbNumber=Oot;function Not(i){return typeof i!="number"?x0.Color.black():FV(i)}_a.colorFromRgbaNumber=Not;var lb={},ll={};Object.defineProperty(ll,"__esModule",{value:!0});ll.createColorObjectWriter=ll.writeRgbColorObject=ll.writeRgbaColorObject=ll.createColorNumberWriter=ll.createColorStringWriter=void 0;var zV=hp,KD=_a,Fot=Ld;function zot(i){var e=(0,Fot.findColorStringifier)(i);return e?function(t,n){(0,zV.writePrimitive)(t,e(n))}:null}ll.createColorStringWriter=zot;function Uot(i){var e=i?KD.colorToRgbaNumber:KD.colorToRgbNumber;return function(t,n){(0,zV.writePrimitive)(t,e(n))}}ll.createColorNumberWriter=Uot;function UV(i,e,t){var n=e.toRgbaObject(t);i.writeProperty("r",n.r),i.writeProperty("g",n.g),i.writeProperty("b",n.b),i.writeProperty("a",n.a)}ll.writeRgbaColorObject=UV;function VV(i,e,t){var n=e.toRgbaObject(t);i.writeProperty("r",n.r),i.writeProperty("g",n.g),i.writeProperty("b",n.b)}ll.writeRgbColorObject=VV;function Vot(i,e){return function(t,n){i?UV(t,n,e):VV(t,n,e)}}ll.createColorObjectWriter=Vot;Object.defineProperty(lb,"__esModule",{value:!0});lb.NumberColorInputPlugin=void 0;var Hot=tm,JD=_a,KM=Ld,Got=ll,Qot=Ao,qot=fl;function $4(i){var e;return!!(i!=null&&i.alpha||!((e=i==null?void 0:i.color)===null||e===void 0)&&e.alpha)}function jot(i){return i?function(e){return(0,KM.colorToHexRgbaString)(e,"0x")}:function(e){return(0,KM.colorToHexRgbString)(e,"0x")}}function Wot(i){return"color"in i||"view"in i&&i.view==="color"}lb.NumberColorInputPlugin={id:"input-color-number",type:"input",accept:function(i,e){if(typeof i!="number"||!Wot(e))return null;var t=(0,qot.parseColorInputParams)(e);return t?{initialValue:i,params:t}:null},binding:{reader:function(i){return $4(i.params)?JD.colorFromRgbaNumber:JD.colorFromRgbNumber},equals:Qot.Color.equals,writer:function(i){return(0,Got.createColorNumberWriter)($4(i.params))}},controller:function(i){var e=$4(i.params),t="expanded"in i.params?i.params.expanded:void 0,n="picker"in i.params?i.params.picker:void 0;return new Hot.ColorController(i.document,{colorType:"int",expanded:t??!1,formatter:jot(e),parser:(0,KM.createColorStringParser)("int"),pickerLayout:n??"popup",supportsAlpha:e,value:i.value,viewProps:i.viewProps})}};var cb={};Object.defineProperty(cb,"__esModule",{value:!0});cb.ObjectColorInputPlugin=void 0;var $ot=tm,Xot=_a,JM=Ld,Yot=ll,tx=Ao,fw=fl;function Kot(i){return tx.Color.isRgbaColorObject(i)}function Jot(i){return function(e){return(0,Xot.colorFromObject)(e,i)}}function Zot(i,e){return function(t){return i?(0,JM.colorToObjectRgbaString)(t,e):(0,JM.colorToObjectRgbString)(t,e)}}cb.ObjectColorInputPlugin={id:"input-color-object",type:"input",accept:function(i,e){if(!tx.Color.isColorObject(i))return null;var t=(0,fw.parseColorInputParams)(e);return t?{initialValue:i,params:t}:null},binding:{reader:function(i){return Jot((0,fw.extractColorType)(i.params))},equals:tx.Color.equals,writer:function(i){return(0,Yot.createColorObjectWriter)(Kot(i.initialValue),(0,fw.extractColorType)(i.params))}},controller:function(i){var e,t=tx.Color.isRgbaColorObject(i.initialValue),n="expanded"in i.params?i.params.expanded:void 0,r="picker"in i.params?i.params.picker:void 0,s=(e=(0,fw.extractColorType)(i.params))!==null&&e!==void 0?e:"int";return new $ot.ColorController(i.document,{colorType:s,expanded:n??!1,formatter:Zot(t,s),parser:(0,JM.createColorStringParser)(s),pickerLayout:r??"popup",supportsAlpha:t,value:i.value,viewProps:i.viewProps})}};var ub={};Object.defineProperty(ub,"__esModule",{value:!0});ub.StringColorInputPlugin=void 0;var pw=wl,elt=tm,qp=Ld,tlt=ll,nlt=Ao,PA=fl;ub.StringColorInputPlugin={id:"input-color-string",type:"input",accept:function(i,e){if(typeof i!="string"||"view"in e&&e.view==="text")return null;var t=(0,qp.detectStringColorFormat)(i,(0,PA.extractColorType)(e));if(!t)return null;var n=(0,qp.findColorStringifier)(t);if(!n)return null;var r=(0,PA.parseColorInputParams)(e);return r?{initialValue:i,params:r}:null},binding:{reader:function(i){var e;return(0,qp.createColorStringBindingReader)((e=(0,PA.extractColorType)(i.params))!==null&&e!==void 0?e:"int")},equals:nlt.Color.equals,writer:function(i){var e=(0,qp.detectStringColorFormat)(i.initialValue,(0,PA.extractColorType)(i.params));if(!e)throw pw.TpError.shouldNeverHappen();var t=(0,tlt.createColorStringWriter)(e);if(!t)throw pw.TpError.notBindable();return t}},controller:function(i){var e=(0,qp.detectStringColorFormat)(i.initialValue,(0,PA.extractColorType)(i.params));if(!e)throw pw.TpError.shouldNeverHappen();var t=(0,qp.findColorStringifier)(e);if(!t)throw pw.TpError.shouldNeverHappen();var n="expanded"in i.params?i.params.expanded:void 0,r="picker"in i.params?i.params.picker:void 0;return new elt.ColorController(i.document,{colorType:e.type,expanded:n??!1,formatter:t,parser:(0,qp.createColorStringParser)(e.type),pickerLayout:r??"popup",supportsAlpha:e.alpha,value:i.value,viewProps:i.viewProps})}};var nm={};Object.defineProperty(nm,"__esModule",{value:!0});nm.PointNdConstraint=void 0;var ilt=function(){function i(e){this.components=e.components,this.asm_=e.assembly}return i.prototype.constrain=function(e){var t=this,n=this.asm_.toComponents(e).map(function(r,s){var a,o;return(o=(a=t.components[s])===null||a===void 0?void 0:a.constrain(r))!==null&&o!==void 0?o:r});return this.asm_.fromComponents(n)},i}();nm.PointNdConstraint=ilt;var im={},ZC={};Object.defineProperty(ZC,"__esModule",{value:!0});ZC.PointNdTextView=void 0;var rlt=Qi,ZD=(0,rlt.ClassName)("pndtxt"),slt=function(){function i(e,t){var n=this;this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(ZD()),this.textViews.forEach(function(r){var s=e.createElement("div");s.classList.add(ZD("a")),s.appendChild(r.element),n.element.appendChild(s)})}return i}();ZC.PointNdTextView=slt;Object.defineProperty(im,"__esModule",{value:!0});im.PointNdTextController=void 0;var alt=Rd,olt=vo,llt=Dd,clt=ZC;function ult(i,e,t){return new llt.NumberTextController(i,{arrayPosition:t===0?"fst":t===e.axes.length-1?"lst":"mid",baseStep:e.axes[t].baseStep,parser:e.parser,props:e.axes[t].textProps,value:(0,olt.createValue)(0,{constraint:e.axes[t].constraint}),viewProps:e.viewProps})}var hlt=function(){function i(e,t){var n=this;this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map(function(r,s){return ult(e,t,s)}),this.acs_.forEach(function(r,s){(0,alt.connectValues)({primary:n.value,secondary:r.value,forward:function(a){return t.assembly.toComponents(a.rawValue)[s]},backward:function(a,o){var l=t.assembly.toComponents(a.rawValue);return l[s]=o.rawValue,t.assembly.fromComponents(l)}})}),this.view=new clt.PointNdTextView(e,{textViews:this.acs_.map(function(r){return r.view})})}return i}();im.PointNdTextController=hlt;var Tc={};Object.defineProperty(Tc,"__esModule",{value:!0});Tc.NumberInputPlugin=Tc.findNumberRange=Tc.createRangeConstraint=Tc.createStepConstraint=void 0;var z1=bu,nP=Z0,dlt=up,HV=Y_,flt=Sv,plt=em,mw=ba,gw=Vr,mlt=Dd,glt=rb,e7=ha,vlt=hp,t0=jr,jA=ui;function GV(i,e){return"step"in i&&!(0,jA.isEmpty)(i.step)?new flt.StepConstraint(i.step,e):null}Tc.createStepConstraint=GV;function QV(i){return!(0,jA.isEmpty)(i.max)&&!(0,jA.isEmpty)(i.min)?new nP.DefiniteRangeConstraint({max:i.max,min:i.min}):!(0,jA.isEmpty)(i.max)||!(0,jA.isEmpty)(i.min)?new HV.RangeConstraint({max:i.max,min:i.min}):null}Tc.createRangeConstraint=QV;function Alt(i){var e=(0,z1.findConstraint)(i,nP.DefiniteRangeConstraint);if(e)return[e.values.get("min"),e.values.get("max")];var t=(0,z1.findConstraint)(i,HV.RangeConstraint);return t?[t.minValue,t.maxValue]:[void 0,void 0]}Tc.findNumberRange=Alt;function _lt(i,e){var t=[],n=GV(i,e);n&&t.push(n);var r=QV(i);r&&t.push(r);var s=(0,t0.createListConstraint)(i.options);return s&&t.push(s),new z1.CompositeConstraint(t)}Tc.NumberInputPlugin={id:"input-number",type:"input",accept:function(i,e){if(typeof i!="number")return null;var t=e7.ParamsParsers,n=(0,e7.parseParams)(e,{format:t.optional.function,max:t.optional.number,min:t.optional.number,options:t.optional.custom(t0.parseListOptions),step:t.optional.number});return n?{initialValue:i,params:n}:null},binding:{reader:function(i){return mw.numberFromUnknown},constraint:function(i){return _lt(i.params,i.initialValue)},writer:function(i){return vlt.writePrimitive}},controller:function(i){var e,t=i.value,n=i.constraint,r=n&&(0,z1.findConstraint)(n,dlt.ListConstraint);if(r)return new plt.ListController(i.document,{props:new gw.ValueMap({options:r.values.value("options")}),value:t,viewProps:i.viewProps});var s=(e="format"in i.params?i.params.format:void 0)!==null&&e!==void 0?e:(0,mw.createNumberFormatter)((0,t0.getSuitableDecimalDigits)(n,t.rawValue)),a=n&&(0,z1.findConstraint)(n,nP.DefiniteRangeConstraint);return a?new glt.SliderTextController(i.document,{baseStep:(0,t0.getBaseStep)(n),parser:mw.parseNumber,sliderProps:new gw.ValueMap({maxValue:a.values.value("max"),minValue:a.values.value("min")}),textProps:gw.ValueMap.fromObject({draggingScale:(0,t0.getSuitableDraggingScale)(n,t.rawValue),formatter:s}),value:t,viewProps:i.viewProps}):new mlt.NumberTextController(i.document,{baseStep:(0,t0.getBaseStep)(n),parser:mw.parseNumber,props:gw.ValueMap.fromObject({draggingScale:(0,t0.getSuitableDraggingScale)(n,t.rawValue),formatter:s}),value:t,viewProps:i.viewProps})}};var hb={},xd={},blt=dt&&dt.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(xd,"__esModule",{value:!0});xd.Point2dAssembly=xd.Point2d=void 0;var ylt=ui,ZM=function(){function i(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this.x=e,this.y=t}return i.prototype.getComponents=function(){return[this.x,this.y]},i.isObject=function(e){if((0,ylt.isEmpty)(e))return!1;var t=e.x,n=e.y;return!(typeof t!="number"||typeof n!="number")},i.equals=function(e,t){return e.x===t.x&&e.y===t.y},i.prototype.toObject=function(){return{x:this.x,y:this.y}},i}();xd.Point2d=ZM;xd.Point2dAssembly={toComponents:function(i){return i.getComponents()},fromComponents:function(i){return new(ZM.bind.apply(ZM,blt([void 0],i,!1)))}};var eE={};Object.defineProperty(eE,"__esModule",{value:!0});eE.Point2dView=void 0;var wlt=Ya,xlt=Ca,Clt=Qi,Elt=_l,$m=(0,Clt.ClassName)("p2d"),Slt=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add($m()),t.viewProps.bindClassModifiers(this.element),(0,xlt.bindValue)(t.expanded,(0,Elt.valueToClassName)(this.element,$m(void 0,"expanded")));var n=e.createElement("div");n.classList.add($m("h")),this.element.appendChild(n);var r=e.createElement("button");r.classList.add($m("b")),r.appendChild((0,wlt.createSvgIconElement)(e,"p2dpad")),t.viewProps.bindDisabled(r),n.appendChild(r),this.buttonElement=r;var s=e.createElement("div");if(s.classList.add($m("t")),n.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){var a=e.createElement("div");a.classList.add($m("p")),this.element.appendChild(a),this.pickerElement=a}else this.pickerElement=null}return i}();eE.Point2dView=Slt;var tE={},nE={};Object.defineProperty(nE,"__esModule",{value:!0});nE.Point2dPickerView=void 0;var vw=Ya,t7=Fr,Mlt=Qi,cf=(0,Mlt.ClassName)("p2dp"),Tlt=function(){function i(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=t.invertsY,this.maxValue_=t.maxValue,this.element=e.createElement("div"),this.element.classList.add(cf()),t.layout==="popup"&&this.element.classList.add(cf(void 0,"p")),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("div");n.classList.add(cf("p")),t.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;var r=e.createElementNS(vw.SVG_NS,"svg");r.classList.add(cf("g")),this.padElement.appendChild(r),this.svgElem_=r;var s=e.createElementNS(vw.SVG_NS,"line");s.classList.add(cf("ax")),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","50%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(s);var a=e.createElementNS(vw.SVG_NS,"line");a.classList.add(cf("ax")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","0"),a.setAttributeNS(null,"x2","50%"),a.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(a);var o=e.createElementNS(vw.SVG_NS,"line");o.classList.add(cf("l")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(o),this.lineElem_=o;var l=e.createElement("div");l.classList.add(cf("m")),this.padElement.appendChild(l),this.markerElem_=l,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}return Object.defineProperty(i.prototype,"allFocusableElements",{get:function(){return[this.padElement]},enumerable:!1,configurable:!0}),i.prototype.update_=function(){var e=this.value.rawValue.getComponents(),t=e[0],n=e[1],r=this.maxValue_,s=(0,t7.mapRange)(t,-r,+r,0,100),a=(0,t7.mapRange)(n,-r,+r,0,100),o=this.invertsY_?100-a:a;this.lineElem_.setAttributeNS(null,"x2","".concat(s,"%")),this.lineElem_.setAttributeNS(null,"y2","".concat(o,"%")),this.markerElem_.style.left="".concat(s,"%"),this.markerElem_.style.top="".concat(o,"%")},i.prototype.onValueChange_=function(){this.update_()},i.prototype.onFoldableChange_=function(){this.update_()},i}();nE.Point2dPickerView=Tlt;Object.defineProperty(tE,"__esModule",{value:!0});tE.Point2dPickerController=void 0;var n7=Fr,WA=za,Ilt=Su,i7=xd,Plt=nE;function r7(i,e,t){return[(0,WA.getStepForKey)(e[0],(0,WA.getHorizontalStepKeys)(i)),(0,WA.getStepForKey)(e[1],(0,WA.getVerticalStepKeys)(i))*(t?1:-1)]}var klt=function(){function i(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.baseSteps_=t.baseSteps,this.maxValue_=t.maxValue,this.invertsY_=t.invertsY,this.view=new Plt.Point2dPickerView(e,{invertsY:this.invertsY_,layout:t.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ilt.PointerHandler(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}return i.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=this.maxValue_,r=(0,n7.mapRange)(e.point.x,0,e.bounds.width,-n,+n),s=(0,n7.mapRange)(this.invertsY_?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-n,+n);this.value.setRawValue(new i7.Point2d(r,s),t)}},i.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},i.prototype.onPadKeyDown_=function(e){(0,WA.isArrowKey)(e.key)&&e.preventDefault();var t=r7(e,this.baseSteps_,this.invertsY_),n=t[0],r=t[1];n===0&&r===0||this.value.setRawValue(new i7.Point2d(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})},i.prototype.onPadKeyUp_=function(e){var t=r7(e,this.baseSteps_,this.invertsY_),n=t[0],r=t[1];n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},i}();tE.Point2dPickerController=klt;Object.defineProperty(hb,"__esModule",{value:!0});hb.Point2dController=void 0;var s7=Do,Blt=Mv,a7=Ya,Rlt=Rd,Dlt=ui,Llt=im,Olt=xd,Nlt=eE,Flt=tE,zlt=function(){function i(e,t){var n=this,r,s;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=s7.Foldable.create(t.expanded),this.popC_=t.pickerLayout==="popup"?new Blt.PopupController(e,{viewProps:this.viewProps}):null;var a=new Flt.Point2dPickerController(e,{baseSteps:[t.axes[0].baseStep,t.axes[1].baseStep],invertsY:t.invertsY,layout:t.pickerLayout,maxValue:t.maxValue,value:this.value,viewProps:this.viewProps});a.view.allFocusableElements.forEach(function(o){o.addEventListener("blur",n.onPopupChildBlur_),o.addEventListener("keydown",n.onPopupChildKeydown_)}),this.pickerC_=a,this.textC_=new Llt.PointNdTextController(e,{assembly:Olt.Point2dAssembly,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new Nlt.Point2dView(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(s=this.view.buttonElement)===null||s===void 0||s.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),(0,Rlt.connectValues)({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(o){return o.rawValue},backward:function(o,l){return l.rawValue}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),(0,s7.bindFoldable)(this.foldable_,this.view.pickerElement))}return i.prototype.onPadButtonBlur_=function(e){if(this.popC_){var t=this.view.element,n=(0,Dlt.forceCast)(e.relatedTarget);(!n||!t.contains(n))&&(this.popC_.shows.rawValue=!1)}},i.prototype.onPadButtonClick_=function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()},i.prototype.onPopupChildBlur_=function(e){if(this.popC_){var t=this.popC_.view.element,n=(0,a7.findNextTarget)(e);n&&t.contains(n)||n&&n===this.view.buttonElement&&!(0,a7.supportsTouch)(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}},i.prototype.onPopupChildKeydown_=function(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()},i}();hb.Point2dController=zlt;var nd={},qg={};Object.defineProperty(qg,"__esModule",{value:!0});qg.writePoint2d=qg.point2dFromUnknown=void 0;var X4=xd;function Ult(i){return X4.Point2d.isObject(i)?new X4.Point2d(i.x,i.y):new X4.Point2d}qg.point2dFromUnknown=Ult;function Vlt(i,e){i.writeProperty("x",e.x),i.writeProperty("y",e.y)}qg.writePoint2d=Vlt;var o7;function iE(){if(o7)return nd;o7=1,Object.defineProperty(nd,"__esModule",{value:!0}),nd.Point2dInputPlugin=nd.getSuitableMaxValue=nd.createDimensionConstraint=void 0;var i=bu,e=ba,t=Vr,n=ha,r=wl,s=jr,a=ZV(),o=nm,l=Tc,c=hb,u=qg,h=xd;function d(w,x){if(w){var C=[],S=(0,l.createStepConstraint)(w,x);S&&C.push(S);var I=(0,l.createRangeConstraint)(w);return I&&C.push(I),new i.CompositeConstraint(C)}}nd.createDimensionConstraint=d;function f(w,x){return new o.PointNdConstraint({assembly:h.Point2dAssembly,components:[d("x"in w?w.x:void 0,x.x),d("y"in w?w.y:void 0,x.y)]})}function m(w,x){var C=w?(0,l.findNumberRange)(w):[],S=C[0],I=C[1];if(!(0,a.isEmpty)(S)||!(0,a.isEmpty)(I))return Math.max(Math.abs(S??0),Math.abs(I??0));var P=(0,s.getBaseStep)(w);return Math.max(Math.abs(P)*10,Math.abs(x)*10)}function A(w,x){var C=x instanceof o.PointNdConstraint?x.components[0]:void 0,S=x instanceof o.PointNdConstraint?x.components[1]:void 0,I=m(C,w.x),P=m(S,w.y);return Math.max(I,P)}nd.getSuitableMaxValue=A;function _(w,x){return{baseStep:(0,s.getBaseStep)(x),constraint:x,textProps:t.ValueMap.fromObject({draggingScale:(0,s.getSuitableDraggingScale)(x,w),formatter:(0,e.createNumberFormatter)((0,s.getSuitableDecimalDigits)(x,w))})}}function v(w){if(!("y"in w))return!1;var x=w.y;return x&&"inverted"in x?!!x.inverted:!1}return nd.Point2dInputPlugin={id:"input-point2d",type:"input",accept:function(w,x){if(!h.Point2d.isObject(w))return null;var C=n.ParamsParsers,S=(0,n.parseParams)(x,{expanded:C.optional.boolean,picker:C.optional.custom(s.parsePickerLayout),x:C.optional.custom(s.parsePointDimensionParams),y:C.optional.object({inverted:C.optional.boolean,max:C.optional.number,min:C.optional.number,step:C.optional.number})});return S?{initialValue:w,params:S}:null},binding:{reader:function(w){return u.point2dFromUnknown},constraint:function(w){return f(w.params,w.initialValue)},equals:h.Point2d.equals,writer:function(w){return u.writePoint2d}},controller:function(w){var x=w.document,C=w.value,S=w.constraint;if(!(S instanceof o.PointNdConstraint))throw r.TpError.shouldNeverHappen();var I="expanded"in w.params?w.params.expanded:void 0,P="picker"in w.params?w.params.picker:void 0;return new c.Point2dController(x,{axes:[_(C.rawValue.x,S.components[0]),_(C.rawValue.y,S.components[1])],expanded:I??!1,invertsY:v(w.params),maxValue:A(C.rawValue,S),parser:e.parseNumber,pickerLayout:P??"popup",value:C,viewProps:w.viewProps})}},nd}var kA={},jg={},N0={},Hlt=dt&&dt.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(N0,"__esModule",{value:!0});N0.Point3dAssembly=N0.Point3d=void 0;var Glt=ui,eT=function(){function i(e,t,n){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),this.x=e,this.y=t,this.z=n}return i.prototype.getComponents=function(){return[this.x,this.y,this.z]},i.isObject=function(e){if((0,Glt.isEmpty)(e))return!1;var t=e.x,n=e.y,r=e.z;return!(typeof t!="number"||typeof n!="number"||typeof r!="number")},i.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z},i.prototype.toObject=function(){return{x:this.x,y:this.y,z:this.z}},i}();N0.Point3d=eT;N0.Point3dAssembly={toComponents:function(i){return i.getComponents()},fromComponents:function(i){return new(eT.bind.apply(eT,Hlt([void 0],i,!1)))}};Object.defineProperty(jg,"__esModule",{value:!0});jg.writePoint3d=jg.point3dFromUnknown=void 0;var Y4=N0;function Qlt(i){return Y4.Point3d.isObject(i)?new Y4.Point3d(i.x,i.y,i.z):new Y4.Point3d}jg.point3dFromUnknown=Qlt;function qlt(i,e){i.writeProperty("x",e.x),i.writeProperty("y",e.y),i.writeProperty("z",e.z)}jg.writePoint3d=qlt;var l7;function qV(){if(l7)return kA;l7=1,Object.defineProperty(kA,"__esModule",{value:!0}),kA.Point3dInputPlugin=void 0;var i=ba,e=Vr,t=ha,n=wl,r=jr,s=nm,a=im,o=iE(),l=jg,c=N0;function u(d,f){return new s.PointNdConstraint({assembly:c.Point3dAssembly,components:[(0,o.createDimensionConstraint)("x"in d?d.x:void 0,f.x),(0,o.createDimensionConstraint)("y"in d?d.y:void 0,f.y),(0,o.createDimensionConstraint)("z"in d?d.z:void 0,f.z)]})}function h(d,f){return{baseStep:(0,r.getBaseStep)(f),constraint:f,textProps:e.ValueMap.fromObject({draggingScale:(0,r.getSuitableDraggingScale)(f,d),formatter:(0,i.createNumberFormatter)((0,r.getSuitableDecimalDigits)(f,d))})}}return kA.Point3dInputPlugin={id:"input-point3d",type:"input",accept:function(d,f){if(!c.Point3d.isObject(d))return null;var m=t.ParamsParsers,A=(0,t.parseParams)(f,{x:m.optional.custom(r.parsePointDimensionParams),y:m.optional.custom(r.parsePointDimensionParams),z:m.optional.custom(r.parsePointDimensionParams)});return A?{initialValue:d,params:A}:null},binding:{reader:function(d){return l.point3dFromUnknown},constraint:function(d){return u(d.params,d.initialValue)},equals:c.Point3d.equals,writer:function(d){return l.writePoint3d}},controller:function(d){var f=d.value,m=d.constraint;if(!(m instanceof s.PointNdConstraint))throw n.TpError.shouldNeverHappen();return new a.PointNdTextController(d.document,{assembly:c.Point3dAssembly,axes:[h(f.rawValue.x,m.components[0]),h(f.rawValue.y,m.components[1]),h(f.rawValue.z,m.components[2])],parser:i.parseNumber,value:f,viewProps:d.viewProps})}},kA}var BA={},Wg={},F0={},jlt=dt&&dt.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(F0,"__esModule",{value:!0});F0.Point4dAssembly=F0.Point4d=void 0;var Wlt=ui,tT=function(){function i(e,t,n,r){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),this.x=e,this.y=t,this.z=n,this.w=r}return i.prototype.getComponents=function(){return[this.x,this.y,this.z,this.w]},i.isObject=function(e){if((0,Wlt.isEmpty)(e))return!1;var t=e.x,n=e.y,r=e.z,s=e.w;return!(typeof t!="number"||typeof n!="number"||typeof r!="number"||typeof s!="number")},i.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},i.prototype.toObject=function(){return{x:this.x,y:this.y,z:this.z,w:this.w}},i}();F0.Point4d=tT;F0.Point4dAssembly={toComponents:function(i){return i.getComponents()},fromComponents:function(i){return new(tT.bind.apply(tT,jlt([void 0],i,!1)))}};Object.defineProperty(Wg,"__esModule",{value:!0});Wg.writePoint4d=Wg.point4dFromUnknown=void 0;var K4=F0;function $lt(i){return K4.Point4d.isObject(i)?new K4.Point4d(i.x,i.y,i.z,i.w):new K4.Point4d}Wg.point4dFromUnknown=$lt;function Xlt(i,e){i.writeProperty("x",e.x),i.writeProperty("y",e.y),i.writeProperty("z",e.z),i.writeProperty("w",e.w)}Wg.writePoint4d=Xlt;var c7;function jV(){if(c7)return BA;c7=1,Object.defineProperty(BA,"__esModule",{value:!0}),BA.Point4dInputPlugin=void 0;var i=ba,e=Vr,t=ha,n=wl,r=jr,s=nm,a=im,o=iE(),l=Wg,c=F0;function u(d,f){return new s.PointNdConstraint({assembly:c.Point4dAssembly,components:[(0,o.createDimensionConstraint)("x"in d?d.x:void 0,f.x),(0,o.createDimensionConstraint)("y"in d?d.y:void 0,f.y),(0,o.createDimensionConstraint)("z"in d?d.z:void 0,f.z),(0,o.createDimensionConstraint)("w"in d?d.w:void 0,f.w)]})}function h(d,f){return{baseStep:(0,r.getBaseStep)(f),constraint:f,textProps:e.ValueMap.fromObject({draggingScale:(0,r.getSuitableDraggingScale)(f,d),formatter:(0,i.createNumberFormatter)((0,r.getSuitableDecimalDigits)(f,d))})}}return BA.Point4dInputPlugin={id:"input-point4d",type:"input",accept:function(d,f){if(!c.Point4d.isObject(d))return null;var m=t.ParamsParsers,A=(0,t.parseParams)(f,{x:m.optional.custom(r.parsePointDimensionParams),y:m.optional.custom(r.parsePointDimensionParams),z:m.optional.custom(r.parsePointDimensionParams),w:m.optional.custom(r.parsePointDimensionParams)});return A?{initialValue:d,params:A}:null},binding:{reader:function(d){return l.point4dFromUnknown},constraint:function(d){return u(d.params,d.initialValue)},equals:c.Point4d.equals,writer:function(d){return l.writePoint4d}},controller:function(d){var f=d.value,m=d.constraint;if(!(m instanceof s.PointNdConstraint))throw n.TpError.shouldNeverHappen();return new a.PointNdTextController(d.document,{assembly:c.Point4dAssembly,axes:f.rawValue.getComponents().map(function(A,_){return h(A,m.components[_])}),parser:i.parseNumber,value:f,viewProps:d.viewProps})}},BA}var db={};Object.defineProperty(db,"__esModule",{value:!0});db.StringInputPlugin=void 0;var WV=bu,Ylt=up,Klt=em,Jlt=Tv,u7=Xf,h7=Vr,d7=ha,Zlt=hp,$V=jr;function ect(i){var e=[],t=(0,$V.createListConstraint)(i.options);return t&&e.push(t),new WV.CompositeConstraint(e)}db.StringInputPlugin={id:"input-string",type:"input",accept:function(i,e){if(typeof i!="string")return null;var t=d7.ParamsParsers,n=(0,d7.parseParams)(e,{options:t.optional.custom($V.parseListOptions)});return n?{initialValue:i,params:n}:null},binding:{reader:function(i){return u7.stringFromUnknown},constraint:function(i){return ect(i.params)},writer:function(i){return Zlt.writePrimitive}},controller:function(i){var e=i.document,t=i.value,n=i.constraint,r=n&&(0,WV.findConstraint)(n,Ylt.ListConstraint);return r?new Klt.ListController(e,{props:new h7.ValueMap({options:r.values.value("options")}),value:t,viewProps:i.viewProps}):new Jlt.TextController(e,{parser:function(s){return s},props:h7.ValueMap.fromObject({formatter:u7.formatString}),value:t,viewProps:i.viewProps})}};var dp={};Object.defineProperty(dp,"__esModule",{value:!0});dp.Constants=void 0;dp.Constants={monitor:{defaultInterval:200,defaultLineCount:3}};var fb={},rm={},rE={};Object.defineProperty(rE,"__esModule",{value:!0});rE.MultiLogView=void 0;var tct=Qi,f7=(0,tct.ClassName)("mll"),nct=function(){function i(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(f7()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("textarea");n.classList.add(f7("i")),n.style.height="calc(var(--bld-us) * ".concat(t.lineCount,")"),n.readOnly=!0,t.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}return i.prototype.update_=function(){var e=this,t=this.textareaElem_,n=t.scrollTop===t.scrollHeight-t.clientHeight,r=[];this.value.rawValue.forEach(function(s){s!==void 0&&r.push(e.formatter_(s))}),t.textContent=r.join(`
`),n&&(t.scrollTop=t.scrollHeight)},i.prototype.onValueUpdate_=function(){this.update_()},i}();rE.MultiLogView=nct;Object.defineProperty(rm,"__esModule",{value:!0});rm.MultiLogController=void 0;var ict=rE,rct=function(){function i(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new ict.MultiLogView(e,{formatter:t.formatter,lineCount:t.lineCount,value:this.value,viewProps:this.viewProps})}return i}();rm.MultiLogController=rct;var sm={},sE={};Object.defineProperty(sE,"__esModule",{value:!0});sE.SingleLogView=void 0;var sct=Qi,p7=(0,sct.ClassName)("sgl"),act=function(){function i(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(p7()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("input");n.classList.add(p7("i")),n.readOnly=!0,n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}return i.prototype.update_=function(){var e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=t!==void 0?this.formatter_(t):""},i.prototype.onValueUpdate_=function(){this.update_()},i}();sE.SingleLogView=act;Object.defineProperty(sm,"__esModule",{value:!0});sm.SingleLogController=void 0;var oct=sE,lct=function(){function i(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new oct.SingleLogView(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}return i}();sm.SingleLogController=lct;Object.defineProperty(fb,"__esModule",{value:!0});fb.BooleanMonitorPlugin=void 0;var J4=ch,m7=ha,cct=dp,uct=rm,hct=sm;fb.BooleanMonitorPlugin={id:"monitor-bool",type:"monitor",accept:function(i,e){if(typeof i!="boolean")return null;var t=m7.ParamsParsers,n=(0,m7.parseParams)(e,{lineCount:t.optional.number});return n?{initialValue:i,params:n}:null},binding:{reader:function(i){return J4.boolFromUnknown}},controller:function(i){var e;return i.value.rawValue.length===1?new hct.SingleLogController(i.document,{formatter:J4.BooleanFormatter,value:i.value,viewProps:i.viewProps}):new uct.MultiLogController(i.document,{formatter:J4.BooleanFormatter,lineCount:(e=i.params.lineCount)!==null&&e!==void 0?e:cct.Constants.monitor.defaultLineCount,value:i.value,viewProps:i.viewProps})}};var pb={},aE={};Object.defineProperty(aE,"__esModule",{value:!0});aE.GraphLogView=void 0;var Z4=Ya,Aw=Fr,XV=Qi,uf=(0,XV.ClassName)("grl"),dct=function(){function i(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(uf()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);var n=e.createElementNS(Z4.SVG_NS,"svg");n.classList.add(uf("g")),n.style.height="calc(var(--bld-us) * ".concat(t.lineCount,")"),this.element.appendChild(n),this.svgElem_=n;var r=e.createElementNS(Z4.SVG_NS,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;var s=e.createElement("div");s.classList.add(uf("t"),(0,XV.ClassName)("tt")()),this.element.appendChild(s),this.tooltipElem_=s,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}return Object.defineProperty(i.prototype,"graphElement",{get:function(){return this.svgElem_},enumerable:!1,configurable:!0}),i.prototype.update_=function(){var e=this.svgElem_.getBoundingClientRect(),t=this.value.rawValue.length-1,n=this.props_.get("minValue"),r=this.props_.get("maxValue"),s=[];this.value.rawValue.forEach(function(u,h){if(u!==void 0){var d=(0,Aw.mapRange)(h,0,t,0,e.width),f=(0,Aw.mapRange)(u,n,r,e.height,0);s.push([d,f].join(","))}}),this.lineElem_.setAttributeNS(null,"points",s.join(" "));var a=this.tooltipElem_,o=this.value.rawValue[this.cursor_.rawValue];if(o===void 0){a.classList.remove(uf("t","a"));return}var l=(0,Aw.mapRange)(this.cursor_.rawValue,0,t,0,e.width),c=(0,Aw.mapRange)(o,n,r,e.height,0);a.style.left="".concat(l,"px"),a.style.top="".concat(c,"px"),a.textContent="".concat(this.formatter_(o)),a.classList.contains(uf("t","a"))||(a.classList.add(uf("t","a"),uf("t","in")),(0,Z4.forceReflow)(a),a.classList.remove(uf("t","in")))},i.prototype.onValueUpdate_=function(){this.update_()},i.prototype.onCursorChange_=function(){this.update_()},i}();aE.GraphLogView=dct;Object.defineProperty(pb,"__esModule",{value:!0});pb.GraphLogController=void 0;var fct=Ya,pct=vo,g7=Fr,mct=Su,gct=aE,vct=function(){function i(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=(0,pct.createValue)(-1),this.view=new gct.GraphLogView(e,{cursor:this.cursor_,formatter:t.formatter,lineCount:t.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!(0,fct.supportsTouch)(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{var n=new mct.PointerHandler(this.view.element);n.emitter.on("down",this.onGraphPointerDown_),n.emitter.on("move",this.onGraphPointerMove_),n.emitter.on("up",this.onGraphPointerUp_)}}return i.prototype.onGraphMouseLeave_=function(){this.cursor_.rawValue=-1},i.prototype.onGraphMouseMove_=function(e){var t=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor((0,g7.mapRange)(e.offsetX,0,t.width,0,this.value.rawValue.length))},i.prototype.onGraphPointerDown_=function(e){this.onGraphPointerMove_(e)},i.prototype.onGraphPointerMove_=function(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor((0,g7.mapRange)(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))},i.prototype.onGraphPointerUp_=function(){this.cursor_.rawValue=-1},i}();pb.GraphLogController=vct;var mb={};Object.defineProperty(mb,"__esModule",{value:!0});mb.NumberMonitorPlugin=void 0;var YV=ba,Act=Vr,v7=ha,KV=dp,_ct=ui,bct=rm,yct=sm,wct=pb;function nT(i){return"format"in i&&!(0,_ct.isEmpty)(i.format)?i.format:(0,YV.createNumberFormatter)(2)}function xct(i){var e;return i.value.rawValue.length===1?new yct.SingleLogController(i.document,{formatter:nT(i.params),value:i.value,viewProps:i.viewProps}):new bct.MultiLogController(i.document,{formatter:nT(i.params),lineCount:(e=i.params.lineCount)!==null&&e!==void 0?e:KV.Constants.monitor.defaultLineCount,value:i.value,viewProps:i.viewProps})}function Cct(i){var e,t,n;return new wct.GraphLogController(i.document,{formatter:nT(i.params),lineCount:(e=i.params.lineCount)!==null&&e!==void 0?e:KV.Constants.monitor.defaultLineCount,props:Act.ValueMap.fromObject({maxValue:(t="max"in i.params?i.params.max:null)!==null&&t!==void 0?t:100,minValue:(n="min"in i.params?i.params.min:null)!==null&&n!==void 0?n:0}),value:i.value,viewProps:i.viewProps})}function A7(i){return"view"in i&&i.view==="graph"}mb.NumberMonitorPlugin={id:"monitor-number",type:"monitor",accept:function(i,e){if(typeof i!="number")return null;var t=v7.ParamsParsers,n=(0,v7.parseParams)(e,{format:t.optional.function,lineCount:t.optional.number,max:t.optional.number,min:t.optional.number,view:t.optional.string});return n?{initialValue:i,params:n}:null},binding:{defaultBufferSize:function(i){return A7(i)?64:1},reader:function(i){return YV.numberFromUnknown}},controller:function(i){return A7(i.params)?Cct(i):xct(i)}};var gb={};Object.defineProperty(gb,"__esModule",{value:!0});gb.StringMonitorPlugin=void 0;var e3=Xf,_7=ha,Ect=dp,Sct=rm,Mct=sm;gb.StringMonitorPlugin={id:"monitor-string",type:"monitor",accept:function(i,e){if(typeof i!="string")return null;var t=_7.ParamsParsers,n=(0,_7.parseParams)(e,{lineCount:t.optional.number,multiline:t.optional.boolean});return n?{initialValue:i,params:n}:null},binding:{reader:function(i){return e3.stringFromUnknown}},controller:function(i){var e,t=i.value,n=t.rawValue.length>1||"multiline"in i.params&&i.params.multiline;return n?new Sct.MultiLogController(i.document,{formatter:e3.formatString,lineCount:(e=i.params.lineCount)!==null&&e!==void 0?e:Ect.Constants.monitor.defaultLineCount,value:t,viewProps:i.viewProps}):new Mct.SingleLogController(i.document,{formatter:e3.formatString,value:t,viewProps:i.viewProps})}};var JV={};Object.defineProperty(JV,"__esModule",{value:!0});var RA={},vb={},oE={};Object.defineProperty(oE,"__esModule",{value:!0});oE.createInputBindingController=void 0;var Tct=op,Ict=lp,Pct=$_,kct=Vr,Bct=vo,Rct=Bd,Dct=ha,Lct=ui;function Oct(i,e){var t,n=i.accept(e.target.read(),e.params);if((0,Lct.isEmpty)(n))return null;var r=Dct.ParamsParsers,s={target:e.target,initialValue:n.initialValue,params:n.params},a=i.binding.reader(s),o=i.binding.constraint?i.binding.constraint(s):void 0,l=(0,Bct.createValue)(a(n.initialValue),{constraint:o,equals:i.binding.equals}),c=new Pct.InputBinding({reader:a,target:e.target,value:l,writer:i.binding.writer(s)}),u=r.optional.boolean(e.params.disabled).value,h=r.optional.boolean(e.params.hidden).value,d=i.controller({constraint:o,document:e.document,initialValue:n.initialValue,params:n.params,value:c.value,viewProps:Rct.ViewProps.create({disabled:u,hidden:h})});return new Ict.InputBindingController(e.document,{binding:c,blade:(0,Tct.createBlade)(),props:kct.ValueMap.fromObject({label:"label"in e.params?(t=r.optional.string(e.params.label).value)!==null&&t!==void 0?t:null:e.target.key}),valueController:d})}oE.createInputBindingController=Oct;var lE={};Object.defineProperty(lE,"__esModule",{value:!0});lE.createMonitorBindingController=void 0;var Nct=op,Fct=cp,zct=X_,Uct=W_,Vct=j_,Hct=$f,Gct=Vr,Qct=Bd,qct=ha,jct=dp,Wct=ui;function $ct(i,e){return e===0?new Vct.ManualTicker:new Uct.IntervalTicker(i,e??jct.Constants.monitor.defaultInterval)}function Xct(i,e){var t,n,r,s=qct.ParamsParsers,a=i.accept(e.target.read(),e.params);if((0,Wct.isEmpty)(a))return null;var o={target:e.target,initialValue:a.initialValue,params:a.params},l=i.binding.reader(o),c=(n=(t=s.optional.number(e.params.bufferSize).value)!==null&&t!==void 0?t:i.binding.defaultBufferSize&&i.binding.defaultBufferSize(a.params))!==null&&n!==void 0?n:1,u=s.optional.number(e.params.interval).value,h=new zct.MonitorBinding({reader:l,target:e.target,ticker:$ct(e.document,u),value:(0,Hct.initializeBuffer)(c)}),d=s.optional.boolean(e.params.disabled).value,f=s.optional.boolean(e.params.hidden).value,m=i.controller({document:e.document,params:a.params,value:h.value,viewProps:Qct.ViewProps.create({disabled:d,hidden:f})});return new Fct.MonitorBindingController(e.document,{binding:h,blade:(0,Nct.createBlade)(),props:Gct.ValueMap.fromObject({label:"label"in e.params?(r=s.optional.string(e.params.label).value)!==null&&r!==void 0?r:null:e.target.key}),valueController:m})}lE.createMonitorBindingController=Xct;var t3=dt&&dt.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(vb,"__esModule",{value:!0});vb.PluginPool=void 0;var Yct=wv,Kct=lp,Jct=xv,Zct=cp,eut=q_,tut=Wf,nut=D_(),DA=wl,iut=oE,rut=ui,sut=lE,aut=function(){function i(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}return i.prototype.getAll=function(){return t3(t3(t3([],this.pluginsMap_.blades,!0),this.pluginsMap_.inputs,!0),this.pluginsMap_.monitors,!0)},i.prototype.register=function(e){e.type==="blade"?this.pluginsMap_.blades.unshift(e):e.type==="input"?this.pluginsMap_.inputs.unshift(e):e.type==="monitor"&&this.pluginsMap_.monitors.unshift(e)},i.prototype.createInput=function(e,t,n){var r=t.read();if((0,rut.isEmpty)(r))throw new DA.TpError({context:{key:t.key},type:"nomatchingcontroller"});var s=this.pluginsMap_.inputs.reduce(function(a,o){return a??(0,iut.createInputBindingController)(o,{document:e,target:t,params:n})},null);if(s)return s;throw new DA.TpError({context:{key:t.key},type:"nomatchingcontroller"})},i.prototype.createMonitor=function(e,t,n){var r=this.pluginsMap_.monitors.reduce(function(s,a){return s??(0,sut.createMonitorBindingController)(a,{document:e,params:n,target:t})},null);if(r)return r;throw new DA.TpError({context:{key:t.key},type:"nomatchingcontroller"})},i.prototype.createBlade=function(e,t){var n=this.pluginsMap_.blades.reduce(function(r,s){return r??(0,eut.createBladeController)(s,{document:e,params:t})},null);if(!n)throw new DA.TpError({type:"nomatchingview",context:{params:t}});return n},i.prototype.createBladeApi=function(e){var t=this;if(e instanceof Kct.InputBindingController)return new Yct.InputBindingApi(e);if(e instanceof Zct.MonitorBindingController)return new Jct.MonitorBindingApi(e);if(e instanceof nut.RackController)return new tut.RackApi(e,this);var n=this.pluginsMap_.blades.reduce(function(r,s){return r??s.api({controller:e,pool:t})},null);if(!n)throw DA.TpError.shouldNeverHappen();return n},i}();vb.PluginPool=aut;var b7;function out(){if(b7)return RA;b7=1,Object.defineProperty(RA,"__esModule",{value:!0}),RA.createDefaultPluginPool=void 0;var i=I_,e=N_,t=U_,n=Q_,r=ob,s=lb,a=cb,o=ub,l=Tc,c=iE(),u=qV(),h=jV(),d=db,f=fb,m=mb,A=gb,_=vb;function v(){var w=new _.PluginPool;return[c.Point2dInputPlugin,u.Point3dInputPlugin,h.Point4dInputPlugin,d.StringInputPlugin,l.NumberInputPlugin,o.StringColorInputPlugin,a.ObjectColorInputPlugin,s.NumberColorInputPlugin,r.BooleanInputPlugin,f.BooleanMonitorPlugin,A.StringMonitorPlugin,m.NumberMonitorPlugin,i.ButtonBladePlugin,e.FolderBladePlugin,t.SeparatorBladePlugin,n.TabBladePlugin].forEach(function(x){w.register(x)}),w}return RA.createDefaultPluginPool=v,RA}var y7;function ZV(){return y7||(y7=1,function(i){var e=dt&&dt.__createBinding||(Object.create?function(r,s,a,o){o===void 0&&(o=a);var l=Object.getOwnPropertyDescriptor(s,a);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(r,o,l)}:function(r,s,a,o){o===void 0&&(o=a),r[o]=s[a]}),t=dt&&dt.__exportStar||function(r,s){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,r,a)};Object.defineProperty(i,"__esModule",{value:!0}),i.createBladeController=void 0,t(wh,i),t(rV,i),t(sV,i),t(Fa,i),t(E_,i),t(S_,i),t(M_,i),t(T_,i),t(I_,i),t(kd,i),t(J0,i),t(P_,i),t(op,i),t(Do,i),t(k_,i),t(B_,i),t(L_,i),t(N_,i),t(wv,i),t(lp,i),t(K0,i),t(BC,i),t(_v,i),t(xv,i),t(cp,i),t(F_,i),t(z_,i),t(U_,i),t(V_,i),t(H_,i),t(G_,i),t(Ev,i),t(Q_,i);var n=q_;Object.defineProperty(i,"createBladeController",{enumerable:!0,get:function(){return n.createBladeController}}),t(j_,i),t(W_,i),t(hV,i),t($_,i),t(X_,i),t(bu,i),t(pV,i),t(Z0,i),t(up,i),t(Y_,i),t(Sv,i),t(mV,i),t(em,i),t(Mv,i),t(Tv,i),t(gV,i),t(ch,i),t(AV,i),t(ba,i),t(xV,i),t(eb,i),t(Xf,i),t($f,i),t(qs,i),t(Ca,i),t(CV,i),t(Vr,i),t(Rd,i),t(vo,i),t(Bd,i),t(Dd,i),t(nb,i),t(rb,i),t(tb,i),t(ib,i),t(sb,i),t(Qi,i),t(K_,i),t(R_,i),t(Su,i),t(J_,i),t(_l,i),t(Z_,i),t(MV,i),t(jf,i),t(Ya,i),t(Fr,i),t(ha,i),t(TV,i),t(hp,i),t(wl,i),t(za,i),t(jr,i),t(ab,i),t(ob,i),t(tm,i),t(_a,i),t(Ld,i),t(Ao,i),t(lb,i),t(cb,i),t(ub,i),t(nm,i),t(im,i),t(Tc,i),t(hb,i),t(iE(),i),t(qV(),i),t(jV(),i),t(db,i),t(dp,i),t(ui,i),t(fb,i),t(rm,i),t(sm,i),t(pb,i),t(mb,i),t(gb,i),t(JV,i),t(out(),i),t(vb,i)}(R4)),R4}var eH=ZV();const tH=U0(eH),lut=aL({__proto__:null,default:tH},[eH]),iT=tH??lut,w7=iT.ClassName("ph");class cut{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(w7()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(w7("t")),n.textContent=t.text,this.element.appendChild(n)}}class Uvt extends iT.BladeController{constructor(e,t){super({blade:iT.createBlade(),view:new cut(e,t),viewProps:t.viewProps})}}const uut=100,n3=20,id=6,x7=.5;function hut(i,e,t){let{view:n}=e,{t:r}=e,{dim3:s=!1}=e;const a=[0,1],o={rangeX:a,rangeY:a,rangeZ:a,width:n3,height:n3,depth:n3/4,items:1,channels:4,live:!1,expr:(u,h,d,f)=>{s?u(h,d,f,x7):u(h,d,1,x7)}};let l;s?l=[-id/2,-id/2,-id/2]:(o.depth=1,l=[-id/2,-id/2,-id]),n.volume(o);const c=n.reveal({stagger:[1,1,0,0]});return c.transform({scale:[id,id,id],position:l}).point({colors:"<",color:16777215,size:3,zBias:uut}),i.$$set=u=>{"view"in u&&t(0,n=u.view),"t"in u&&t(1,r=u.t),"dim3"in u&&t(2,s=u.dim3)},i.$$.update=()=>{i.$$.dirty&2&&c.set({enter:r})},[n,r,s]}class C7 extends Sn{constructor(e){super(),Mn(this,e,hut,null,gn,{view:0,t:1,dim3:2})}}const dut=`
  // Enable STPQ mapping
  #define POSITION_STPQ
  void getPosition(inout vec4 xyzw, inout vec4 stpq) {
    // Store XYZ per vertex in STPQ
    stpq = xyzw;
  }
`,fut=`
  // Enable STPQ mapping
  #define POSITION_STPQ
  vec4 getColor(vec4 rgba, inout vec4 stpq) {
    // Retrieve interpolated XYZ from vertices and use as RGB color.
    // Note: gamma correction is applied with .fragment({ gamma: true }).
    vec3 rgb = stpq.xyz;

    // Add spatial grid
    // vec3 d3 = abs(fract(stpq.xyz * 16.0) - .5);
    // float level = 1.0 - 2.0 * min(d3.x, min(d3.y, d3.z));
    // float grid = clamp(level * 32.0 - 24.0, 0.0, 1.0) * .5 + .5;

    // return vec4(rgb * grid, 1.0);

    return vec4(rgb, 0.3);
  }
`,i3=9,rd=6;function put(i,e,t){let{view:n}=e,{t:r}=e,{dim3:s=!1}=e;const a=[0,1],o={expr(h,d,f,m,A,_,v,w){s?h(d,f,m):h(d,f,1)},width:i3,height:i3,depth:i3,channels:3,rangeX:a,rangeY:a,rangeZ:a};let l;s?l=[-rd/2,-rd/2,-rd/2]:(o.depth=1,l=[-rd/2,-rd/2,-rd]),n.volume({...o});let c=n;c=c.shader({code:dut}).vertex({pass:"data"}),c=c.shader({code:fut}).fragment({gamma:!0});const u=c.reveal({stagger:[1,1,0,0]});return u.transform({position:l,scale:[rd,rd,rd]}).surface({fill:!0,lineX:!1,lineY:!1,width:2,zBias:1,color:16777215}),i.$$set=h=>{"view"in h&&t(0,n=h.view),"t"in h&&t(1,r=h.t),"dim3"in h&&t(2,s=h.dim3)},i.$$.update=()=>{i.$$.dirty&2&&u.set({enter:r})},[n,r,s]}class E7 extends Sn{constructor(e){super(),Mn(this,e,put,null,gn,{view:0,t:1,dim3:2})}}function mut(i,e,t){let{view:n}=e,{t:r}=e,{dim:s=10}=e,{position:a=[0,0,0]}=e,{rotation:o=[0,0,0]}=e;const l=[0,1],c={expr(h,d,f,m,A,_,v,w){h(d,f)},width:s+1,height:s+1,channels:2,rangeX:l,rangeY:l};n.area({...c});const u=n.reveal({stagger:[1,1,0,0]});return u.transform({position:a,scale:[s,s,s],rotation:o}).surface({fill:!0,width:2,color:gX,opacity:.95,closed:!0,width:1,zBias:-5}),i.$$set=h=>{"view"in h&&t(0,n=h.view),"t"in h&&t(1,r=h.t),"dim"in h&&t(2,s=h.dim),"position"in h&&t(3,a=h.position),"rotation"in h&&t(4,o=h.rotation)},i.$$.update=()=>{i.$$.dirty&2&&u.set({enter:r})},[n,r,s,a,o]}class S7 extends Sn{constructor(e){super(),Mn(this,e,mut,null,gn,{view:0,t:1,dim:2,position:3,rotation:4})}}class Gl{constructor(e,t,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=n}static range(e,t){return t?!e||!e.loc||!t.loc||e.loc.lexer!==t.loc.lexer?null:new Gl(e.loc.lexer,e.loc.start,t.loc.end):e&&e.loc}}class uh{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(e,t){return new uh(t,Gl.range(this,e))}}class Ot{constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,r,s,a=t&&t.loc;if(a&&a.start<=a.end){var o=a.lexer.input;r=a.start,s=a.end,r===o.length?n+=" at end of input: ":n+=" at position "+(r+1)+": ";var l=o.slice(r,s).replace(/[^]/g,"$&"),c;r>15?c=""+o.slice(r-15,r):c=o.slice(0,r);var u;s+15<o.length?u=o.slice(s,s+15)+"":u=o.slice(s),n+=c+l+u}var h=new Error(n);return h.name="ParseError",h.__proto__=Ot.prototype,h.position=r,r!=null&&s!=null&&(h.length=s-r),h.rawMessage=e,h}}Ot.prototype.__proto__=Error.prototype;var gut=function(e,t){return e.indexOf(t)!==-1},vut=function(e,t){return e===void 0?t:e},Aut=/([A-Z])/g,_ut=function(e){return e.replace(Aut,"-$1").toLowerCase()},but={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},yut=/[&><"']/g;function wut(i){return String(i).replace(yut,e=>but[e])}var nH=function i(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?i(e.body[0]):e:e.type==="font"?i(e.body):e},xut=function(e){var t=nH(e);return t.type==="mathord"||t.type==="textord"||t.type==="atom"},Cut=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},Eut=function(e){var t=/^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(e);return t!=null?t[1]:"_relative"},qn={contains:gut,deflt:vut,escape:wut,hyphenate:_ut,getBaseElem:nH,isCharacterBox:xut,protocolFromUrl:Eut},nx={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:i=>"#"+i},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(i,e)=>(e.push(i),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:i=>Math.max(0,i),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:i=>Math.max(0,i),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:i=>Math.max(0,i),cli:"-e, --max-expand <n>",cliProcessor:i=>i==="Infinity"?1/0:parseInt(i)},globalGroup:{type:"boolean",cli:!1}};function Sut(i){if(i.default)return i.default;var e=i.type,t=Array.isArray(e)?e[0]:e;if(typeof t!="string")return t.enum[0];switch(t){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class iP{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var t in nx)if(nx.hasOwnProperty(t)){var n=nx[t];this[t]=e[t]!==void 0?n.processor?n.processor(e[t]):e[t]:Sut(n)}}reportNonstrict(e,t,n){var r=this.strict;if(typeof r=="function"&&(r=r(e,t,n)),!(!r||r==="ignore")){if(r===!0||r==="error")throw new Ot("LaTeX-incompatible input and strict mode is set to 'error': "+(t+" ["+e+"]"),n);r==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+r+"': "+t+" ["+e+"]"))}}useStrictBehavior(e,t,n){var r=this.strict;if(typeof r=="function")try{r=r(e,t,n)}catch{r="error"}return!r||r==="ignore"?!1:r===!0||r==="error"?!0:r==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+r+"': "+t+" ["+e+"]")),!1)}isTrusted(e){e.url&&!e.protocol&&(e.protocol=qn.protocolFromUrl(e.url));var t=typeof this.trust=="function"?this.trust(e):this.trust;return!!t}}class hf{constructor(e,t,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=n}sup(){return Wu[Mut[this.id]]}sub(){return Wu[Tut[this.id]]}fracNum(){return Wu[Iut[this.id]]}fracDen(){return Wu[Put[this.id]]}cramp(){return Wu[kut[this.id]]}text(){return Wu[But[this.id]]}isTight(){return this.size>=2}}var rP=0,Hx=1,Cg=2,vd=3,U1=4,Ic=5,$g=6,No=7,Wu=[new hf(rP,0,!1),new hf(Hx,0,!0),new hf(Cg,1,!1),new hf(vd,1,!0),new hf(U1,2,!1),new hf(Ic,2,!0),new hf($g,3,!1),new hf(No,3,!0)],Mut=[U1,Ic,U1,Ic,$g,No,$g,No],Tut=[Ic,Ic,Ic,Ic,No,No,No,No],Iut=[Cg,vd,U1,Ic,$g,No,$g,No],Put=[vd,vd,Ic,Ic,No,No,No,No],kut=[Hx,Hx,vd,vd,Ic,Ic,No,No],But=[rP,Hx,Cg,vd,Cg,vd,Cg,vd],kn={DISPLAY:Wu[rP],TEXT:Wu[Cg],SCRIPT:Wu[U1],SCRIPTSCRIPT:Wu[$g]},rT=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Rut(i){for(var e=0;e<rT.length;e++)for(var t=rT[e],n=0;n<t.blocks.length;n++){var r=t.blocks[n];if(i>=r[0]&&i<=r[1])return t.name}return null}var ix=[];rT.forEach(i=>i.blocks.forEach(e=>ix.push(...e)));function iH(i){for(var e=0;e<ix.length;e+=2)if(i>=ix[e]&&i<=ix[e+1])return!0;return!1}var Xm=80,Dut=function(e,t){return"M95,"+(622+e+t)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},Lut=function(e,t){return"M263,"+(601+e+t)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},Out=function(e,t){return"M983 "+(10+e+t)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},Nut=function(e,t){return"M424,"+(2398+e+t)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+t+`
h400000v`+(40+e)+"h-400000z"},Fut=function(e,t){return"M473,"+(2713+e+t)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+t+"h400000v"+(40+e)+"H1017.7z"},zut=function(e){var t=e/2;return"M400000 "+e+" H0 L"+t+" 0 l65 45 L145 "+(e-80)+" H400000z"},Uut=function(e,t,n){var r=n-54-t-e;return"M702 "+(e+t)+"H400000"+(40+e)+`
H742v`+r+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+t+"H400000v"+(40+e)+"H742z"},Vut=function(e,t,n){t=1e3*t;var r="";switch(e){case"sqrtMain":r=Dut(t,Xm);break;case"sqrtSize1":r=Lut(t,Xm);break;case"sqrtSize2":r=Out(t,Xm);break;case"sqrtSize3":r=Nut(t,Xm);break;case"sqrtSize4":r=Fut(t,Xm);break;case"sqrtTall":r=Uut(t,Xm,n)}return r},Hut=function(e,t){switch(e){case"":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z"+("M367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z");case"":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257z"+("M478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z");default:return""}},M7={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Gut=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+` v585 h43z
M367 15 v585 v`+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v602 h84z
M403 1759 V0 H319 V1759 v`+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v602 h84z
M347 1759 V0 h-84 V1759 v`+t+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(t+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(t+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(t+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(t+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Ab{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return qn.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){var e=t=>t.toText();return this.children.map(e).join("")}}var nh={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},_w={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},T7={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function Qut(i,e){nh[i]=e}function sP(i,e,t){if(!nh[e])throw new Error("Font metrics not found for font: "+e+".");var n=i.charCodeAt(0),r=nh[e][n];if(!r&&i[0]in T7&&(n=T7[i[0]].charCodeAt(0),r=nh[e][n]),!r&&t==="text"&&iH(n)&&(r=nh[e][77]),r)return{depth:r[0],height:r[1],italic:r[2],skew:r[3],width:r[4]}}var r3={};function qut(i){var e;if(i>=5?e=0:i>=3?e=1:e=2,!r3[e]){var t=r3[e]={cssEmPerMu:_w.quad[e]/18};for(var n in _w)_w.hasOwnProperty(n)&&(t[n]=_w[n][e])}return r3[e]}var jut=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],I7=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],P7=function(e,t){return t.size<2?e:jut[e-1][t.size-1]};class dd{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||dd.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=I7[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return new dd(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:P7(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:I7[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=P7(dd.BASESIZE,e);return this.size===t&&this.textSize===dd.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==dd.BASESIZE?["sizing","reset-size"+this.size,"size"+dd.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=qut(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}dd.BASESIZE=6;var sT={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Wut={ex:!0,em:!0,mu:!0},rH=function(e){return typeof e!="string"&&(e=e.unit),e in sT||e in Wut||e==="ex"},ds=function(e,t){var n;if(e.unit in sT)n=sT[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if(e.unit==="mu")n=t.fontMetrics().cssEmPerMu;else{var r;if(t.style.isTight()?r=t.havingStyle(t.style.text()):r=t,e.unit==="ex")n=r.fontMetrics().xHeight;else if(e.unit==="em")n=r.fontMetrics().quad;else throw new Ot("Invalid unit: '"+e.unit+"'");r!==t&&(n*=r.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*n,t.maxSize)},Gt=function(e){return+e.toFixed(4)+"em"},Yf=function(e){return e.filter(t=>t).join(" ")},sH=function(e,t,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},t){t.style.isTight()&&this.classes.push("mtight");var r=t.getColor();r&&(this.style.color=r)}},aH=function(e){var t=document.createElement(e);t.className=Yf(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(t.style[n]=this.style[n]);for(var r in this.attributes)this.attributes.hasOwnProperty(r)&&t.setAttribute(r,this.attributes[r]);for(var s=0;s<this.children.length;s++)t.appendChild(this.children[s].toNode());return t},oH=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+qn.escape(Yf(this.classes))+'"');var n="";for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=qn.hyphenate(r)+":"+this.style[r]+";");n&&(t+=' style="'+qn.escape(n)+'"');for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&(t+=" "+s+'="'+qn.escape(this.attributes[s])+'"');t+=">";for(var a=0;a<this.children.length;a++)t+=this.children[a].toMarkup();return t+="</"+e+">",t};class _b{constructor(e,t,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,sH.call(this,e,n,r),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return qn.contains(this.classes,e)}toNode(){return aH.call(this,"span")}toMarkup(){return oH.call(this,"span")}}class aP{constructor(e,t,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,sH.call(this,t,r),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return qn.contains(this.classes,e)}toNode(){return aH.call(this,"a")}toMarkup(){return oH.call(this,"a")}}class $ut{constructor(e,t,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return qn.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var t in this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e="<img  src='"+this.src+" 'alt='"+this.alt+"' ",t="";for(var n in this.style)this.style.hasOwnProperty(n)&&(t+=qn.hyphenate(n)+":"+this.style[n]+";");return t&&(e+=' style="'+qn.escape(t)+'"'),e+="'/>",e}}var Xut={:"",:"",:"",:""};class Lc{constructor(e,t,n,r,s,a,o,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=n||0,this.italic=r||0,this.skew=s||0,this.width=a||0,this.classes=o||[],this.style=l||{},this.maxFontSize=0;var c=Rut(this.text.charCodeAt(0));c&&this.classes.push(c+"_fallback"),/[]/.test(this.text)&&(this.text=Xut[this.text])}hasClass(e){return qn.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),t=null;this.italic>0&&(t=document.createElement("span"),t.style.marginRight=Gt(this.italic)),this.classes.length>0&&(t=t||document.createElement("span"),t.className=Yf(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(t=t||document.createElement("span"),t.style[n]=this.style[n]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=qn.escape(Yf(this.classes)),t+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=qn.hyphenate(r)+":"+this.style[r]+";");n&&(e=!0,t+=' style="'+qn.escape(n)+'"');var s=qn.escape(this.text);return e?(t+=">",t+=s,t+="</span>",t):s}}class Cd{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&t.setAttribute(n,this.attributes[n]);for(var r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+"='"+this.attributes[t]+"'");e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class Kf{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",M7[this.pathName]),t}toMarkup(){return this.alternate?"<path d='"+this.alternate+"'/>":"<path d='"+M7[this.pathName]+"'/>"}}class aT{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&t.setAttribute(n,this.attributes[n]);return t}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+"='"+this.attributes[t]+"'");return e+="/>",e}}function k7(i){if(i instanceof Lc)return i;throw new Error("Expected symbolNode but got "+String(i)+".")}function Yut(i){if(i instanceof _b)return i;throw new Error("Expected span<HtmlDomNode> but got "+String(i)+".")}var Kut={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Jut={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Ur={math:{},text:{}};function D(i,e,t,n,r,s){Ur[i][r]={font:e,group:t,replace:n},s&&n&&(Ur[i][n]=Ur[i][r])}var O="math",kt="text",Q="main",ge="ams",is="accent-token",nn="bin",Vo="close",Iv="inner",Dn="mathord",da="op-token",tc="open",cE="punct",_e="rel",Od="spacing",Re="textord";D(O,Q,_e,"","\\equiv",!0);D(O,Q,_e,"","\\prec",!0);D(O,Q,_e,"","\\succ",!0);D(O,Q,_e,"","\\sim",!0);D(O,Q,_e,"","\\perp");D(O,Q,_e,"","\\preceq",!0);D(O,Q,_e,"","\\succeq",!0);D(O,Q,_e,"","\\simeq",!0);D(O,Q,_e,"","\\mid",!0);D(O,Q,_e,"","\\ll",!0);D(O,Q,_e,"","\\gg",!0);D(O,Q,_e,"","\\asymp",!0);D(O,Q,_e,"","\\parallel");D(O,Q,_e,"","\\bowtie",!0);D(O,Q,_e,"","\\smile",!0);D(O,Q,_e,"","\\sqsubseteq",!0);D(O,Q,_e,"","\\sqsupseteq",!0);D(O,Q,_e,"","\\doteq",!0);D(O,Q,_e,"","\\frown",!0);D(O,Q,_e,"","\\ni",!0);D(O,Q,_e,"","\\propto",!0);D(O,Q,_e,"","\\vdash",!0);D(O,Q,_e,"","\\dashv",!0);D(O,Q,_e,"","\\owns");D(O,Q,cE,".","\\ldotp");D(O,Q,cE,"","\\cdotp");D(O,Q,Re,"#","\\#");D(kt,Q,Re,"#","\\#");D(O,Q,Re,"&","\\&");D(kt,Q,Re,"&","\\&");D(O,Q,Re,"","\\aleph",!0);D(O,Q,Re,"","\\forall",!0);D(O,Q,Re,"","\\hbar",!0);D(O,Q,Re,"","\\exists",!0);D(O,Q,Re,"","\\nabla",!0);D(O,Q,Re,"","\\flat",!0);D(O,Q,Re,"","\\ell",!0);D(O,Q,Re,"","\\natural",!0);D(O,Q,Re,"","\\clubsuit",!0);D(O,Q,Re,"","\\wp",!0);D(O,Q,Re,"","\\sharp",!0);D(O,Q,Re,"","\\diamondsuit",!0);D(O,Q,Re,"","\\Re",!0);D(O,Q,Re,"","\\heartsuit",!0);D(O,Q,Re,"","\\Im",!0);D(O,Q,Re,"","\\spadesuit",!0);D(O,Q,Re,"","\\S",!0);D(kt,Q,Re,"","\\S");D(O,Q,Re,"","\\P",!0);D(kt,Q,Re,"","\\P");D(O,Q,Re,"","\\dag");D(kt,Q,Re,"","\\dag");D(kt,Q,Re,"","\\textdagger");D(O,Q,Re,"","\\ddag");D(kt,Q,Re,"","\\ddag");D(kt,Q,Re,"","\\textdaggerdbl");D(O,Q,Vo,"","\\rmoustache",!0);D(O,Q,tc,"","\\lmoustache",!0);D(O,Q,Vo,"","\\rgroup",!0);D(O,Q,tc,"","\\lgroup",!0);D(O,Q,nn,"","\\mp",!0);D(O,Q,nn,"","\\ominus",!0);D(O,Q,nn,"","\\uplus",!0);D(O,Q,nn,"","\\sqcap",!0);D(O,Q,nn,"","\\ast");D(O,Q,nn,"","\\sqcup",!0);D(O,Q,nn,"","\\bigcirc",!0);D(O,Q,nn,"","\\bullet",!0);D(O,Q,nn,"","\\ddagger");D(O,Q,nn,"","\\wr",!0);D(O,Q,nn,"","\\amalg");D(O,Q,nn,"&","\\And");D(O,Q,_e,"","\\longleftarrow",!0);D(O,Q,_e,"","\\Leftarrow",!0);D(O,Q,_e,"","\\Longleftarrow",!0);D(O,Q,_e,"","\\longrightarrow",!0);D(O,Q,_e,"","\\Rightarrow",!0);D(O,Q,_e,"","\\Longrightarrow",!0);D(O,Q,_e,"","\\leftrightarrow",!0);D(O,Q,_e,"","\\longleftrightarrow",!0);D(O,Q,_e,"","\\Leftrightarrow",!0);D(O,Q,_e,"","\\Longleftrightarrow",!0);D(O,Q,_e,"","\\mapsto",!0);D(O,Q,_e,"","\\longmapsto",!0);D(O,Q,_e,"","\\nearrow",!0);D(O,Q,_e,"","\\hookleftarrow",!0);D(O,Q,_e,"","\\hookrightarrow",!0);D(O,Q,_e,"","\\searrow",!0);D(O,Q,_e,"","\\leftharpoonup",!0);D(O,Q,_e,"","\\rightharpoonup",!0);D(O,Q,_e,"","\\swarrow",!0);D(O,Q,_e,"","\\leftharpoondown",!0);D(O,Q,_e,"","\\rightharpoondown",!0);D(O,Q,_e,"","\\nwarrow",!0);D(O,Q,_e,"","\\rightleftharpoons",!0);D(O,ge,_e,"","\\nless",!0);D(O,ge,_e,"","\\@nleqslant");D(O,ge,_e,"","\\@nleqq");D(O,ge,_e,"","\\lneq",!0);D(O,ge,_e,"","\\lneqq",!0);D(O,ge,_e,"","\\@lvertneqq");D(O,ge,_e,"","\\lnsim",!0);D(O,ge,_e,"","\\lnapprox",!0);D(O,ge,_e,"","\\nprec",!0);D(O,ge,_e,"","\\npreceq",!0);D(O,ge,_e,"","\\precnsim",!0);D(O,ge,_e,"","\\precnapprox",!0);D(O,ge,_e,"","\\nsim",!0);D(O,ge,_e,"","\\@nshortmid");D(O,ge,_e,"","\\nmid",!0);D(O,ge,_e,"","\\nvdash",!0);D(O,ge,_e,"","\\nvDash",!0);D(O,ge,_e,"","\\ntriangleleft");D(O,ge,_e,"","\\ntrianglelefteq",!0);D(O,ge,_e,"","\\subsetneq",!0);D(O,ge,_e,"","\\@varsubsetneq");D(O,ge,_e,"","\\subsetneqq",!0);D(O,ge,_e,"","\\@varsubsetneqq");D(O,ge,_e,"","\\ngtr",!0);D(O,ge,_e,"","\\@ngeqslant");D(O,ge,_e,"","\\@ngeqq");D(O,ge,_e,"","\\gneq",!0);D(O,ge,_e,"","\\gneqq",!0);D(O,ge,_e,"","\\@gvertneqq");D(O,ge,_e,"","\\gnsim",!0);D(O,ge,_e,"","\\gnapprox",!0);D(O,ge,_e,"","\\nsucc",!0);D(O,ge,_e,"","\\nsucceq",!0);D(O,ge,_e,"","\\succnsim",!0);D(O,ge,_e,"","\\succnapprox",!0);D(O,ge,_e,"","\\ncong",!0);D(O,ge,_e,"","\\@nshortparallel");D(O,ge,_e,"","\\nparallel",!0);D(O,ge,_e,"","\\nVDash",!0);D(O,ge,_e,"","\\ntriangleright");D(O,ge,_e,"","\\ntrianglerighteq",!0);D(O,ge,_e,"","\\@nsupseteqq");D(O,ge,_e,"","\\supsetneq",!0);D(O,ge,_e,"","\\@varsupsetneq");D(O,ge,_e,"","\\supsetneqq",!0);D(O,ge,_e,"","\\@varsupsetneqq");D(O,ge,_e,"","\\nVdash",!0);D(O,ge,_e,"","\\precneqq",!0);D(O,ge,_e,"","\\succneqq",!0);D(O,ge,_e,"","\\@nsubseteqq");D(O,ge,nn,"","\\unlhd");D(O,ge,nn,"","\\unrhd");D(O,ge,_e,"","\\nleftarrow",!0);D(O,ge,_e,"","\\nrightarrow",!0);D(O,ge,_e,"","\\nLeftarrow",!0);D(O,ge,_e,"","\\nRightarrow",!0);D(O,ge,_e,"","\\nleftrightarrow",!0);D(O,ge,_e,"","\\nLeftrightarrow",!0);D(O,ge,_e,"","\\vartriangle");D(O,ge,Re,"","\\hslash");D(O,ge,Re,"","\\triangledown");D(O,ge,Re,"","\\lozenge");D(O,ge,Re,"","\\circledS");D(O,ge,Re,"","\\circledR");D(kt,ge,Re,"","\\circledR");D(O,ge,Re,"","\\measuredangle",!0);D(O,ge,Re,"","\\nexists");D(O,ge,Re,"","\\mho");D(O,ge,Re,"","\\Finv",!0);D(O,ge,Re,"","\\Game",!0);D(O,ge,Re,"","\\backprime");D(O,ge,Re,"","\\blacktriangle");D(O,ge,Re,"","\\blacktriangledown");D(O,ge,Re,"","\\blacksquare");D(O,ge,Re,"","\\blacklozenge");D(O,ge,Re,"","\\bigstar");D(O,ge,Re,"","\\sphericalangle",!0);D(O,ge,Re,"","\\complement",!0);D(O,ge,Re,"","\\eth",!0);D(kt,Q,Re,"","");D(O,ge,Re,"","\\diagup");D(O,ge,Re,"","\\diagdown");D(O,ge,Re,"","\\square");D(O,ge,Re,"","\\Box");D(O,ge,Re,"","\\Diamond");D(O,ge,Re,"","\\yen",!0);D(kt,ge,Re,"","\\yen",!0);D(O,ge,Re,"","\\checkmark",!0);D(kt,ge,Re,"","\\checkmark");D(O,ge,Re,"","\\beth",!0);D(O,ge,Re,"","\\daleth",!0);D(O,ge,Re,"","\\gimel",!0);D(O,ge,Re,"","\\digamma",!0);D(O,ge,Re,"","\\varkappa");D(O,ge,tc,"","\\@ulcorner",!0);D(O,ge,Vo,"","\\@urcorner",!0);D(O,ge,tc,"","\\@llcorner",!0);D(O,ge,Vo,"","\\@lrcorner",!0);D(O,ge,_e,"","\\leqq",!0);D(O,ge,_e,"","\\leqslant",!0);D(O,ge,_e,"","\\eqslantless",!0);D(O,ge,_e,"","\\lesssim",!0);D(O,ge,_e,"","\\lessapprox",!0);D(O,ge,_e,"","\\approxeq",!0);D(O,ge,nn,"","\\lessdot");D(O,ge,_e,"","\\lll",!0);D(O,ge,_e,"","\\lessgtr",!0);D(O,ge,_e,"","\\lesseqgtr",!0);D(O,ge,_e,"","\\lesseqqgtr",!0);D(O,ge,_e,"","\\doteqdot");D(O,ge,_e,"","\\risingdotseq",!0);D(O,ge,_e,"","\\fallingdotseq",!0);D(O,ge,_e,"","\\backsim",!0);D(O,ge,_e,"","\\backsimeq",!0);D(O,ge,_e,"","\\subseteqq",!0);D(O,ge,_e,"","\\Subset",!0);D(O,ge,_e,"","\\sqsubset",!0);D(O,ge,_e,"","\\preccurlyeq",!0);D(O,ge,_e,"","\\curlyeqprec",!0);D(O,ge,_e,"","\\precsim",!0);D(O,ge,_e,"","\\precapprox",!0);D(O,ge,_e,"","\\vartriangleleft");D(O,ge,_e,"","\\trianglelefteq");D(O,ge,_e,"","\\vDash",!0);D(O,ge,_e,"","\\Vvdash",!0);D(O,ge,_e,"","\\smallsmile");D(O,ge,_e,"","\\smallfrown");D(O,ge,_e,"","\\bumpeq",!0);D(O,ge,_e,"","\\Bumpeq",!0);D(O,ge,_e,"","\\geqq",!0);D(O,ge,_e,"","\\geqslant",!0);D(O,ge,_e,"","\\eqslantgtr",!0);D(O,ge,_e,"","\\gtrsim",!0);D(O,ge,_e,"","\\gtrapprox",!0);D(O,ge,nn,"","\\gtrdot");D(O,ge,_e,"","\\ggg",!0);D(O,ge,_e,"","\\gtrless",!0);D(O,ge,_e,"","\\gtreqless",!0);D(O,ge,_e,"","\\gtreqqless",!0);D(O,ge,_e,"","\\eqcirc",!0);D(O,ge,_e,"","\\circeq",!0);D(O,ge,_e,"","\\triangleq",!0);D(O,ge,_e,"","\\thicksim");D(O,ge,_e,"","\\thickapprox");D(O,ge,_e,"","\\supseteqq",!0);D(O,ge,_e,"","\\Supset",!0);D(O,ge,_e,"","\\sqsupset",!0);D(O,ge,_e,"","\\succcurlyeq",!0);D(O,ge,_e,"","\\curlyeqsucc",!0);D(O,ge,_e,"","\\succsim",!0);D(O,ge,_e,"","\\succapprox",!0);D(O,ge,_e,"","\\vartriangleright");D(O,ge,_e,"","\\trianglerighteq");D(O,ge,_e,"","\\Vdash",!0);D(O,ge,_e,"","\\shortmid");D(O,ge,_e,"","\\shortparallel");D(O,ge,_e,"","\\between",!0);D(O,ge,_e,"","\\pitchfork",!0);D(O,ge,_e,"","\\varpropto");D(O,ge,_e,"","\\blacktriangleleft");D(O,ge,_e,"","\\therefore",!0);D(O,ge,_e,"","\\backepsilon");D(O,ge,_e,"","\\blacktriangleright");D(O,ge,_e,"","\\because",!0);D(O,ge,_e,"","\\llless");D(O,ge,_e,"","\\gggtr");D(O,ge,nn,"","\\lhd");D(O,ge,nn,"","\\rhd");D(O,ge,_e,"","\\eqsim",!0);D(O,Q,_e,"","\\Join");D(O,ge,_e,"","\\Doteq",!0);D(O,ge,nn,"","\\dotplus",!0);D(O,ge,nn,"","\\smallsetminus");D(O,ge,nn,"","\\Cap",!0);D(O,ge,nn,"","\\Cup",!0);D(O,ge,nn,"","\\doublebarwedge",!0);D(O,ge,nn,"","\\boxminus",!0);D(O,ge,nn,"","\\boxplus",!0);D(O,ge,nn,"","\\divideontimes",!0);D(O,ge,nn,"","\\ltimes",!0);D(O,ge,nn,"","\\rtimes",!0);D(O,ge,nn,"","\\leftthreetimes",!0);D(O,ge,nn,"","\\rightthreetimes",!0);D(O,ge,nn,"","\\curlywedge",!0);D(O,ge,nn,"","\\curlyvee",!0);D(O,ge,nn,"","\\circleddash",!0);D(O,ge,nn,"","\\circledast",!0);D(O,ge,nn,"","\\centerdot");D(O,ge,nn,"","\\intercal",!0);D(O,ge,nn,"","\\doublecap");D(O,ge,nn,"","\\doublecup");D(O,ge,nn,"","\\boxtimes",!0);D(O,ge,_e,"","\\dashrightarrow",!0);D(O,ge,_e,"","\\dashleftarrow",!0);D(O,ge,_e,"","\\leftleftarrows",!0);D(O,ge,_e,"","\\leftrightarrows",!0);D(O,ge,_e,"","\\Lleftarrow",!0);D(O,ge,_e,"","\\twoheadleftarrow",!0);D(O,ge,_e,"","\\leftarrowtail",!0);D(O,ge,_e,"","\\looparrowleft",!0);D(O,ge,_e,"","\\leftrightharpoons",!0);D(O,ge,_e,"","\\curvearrowleft",!0);D(O,ge,_e,"","\\circlearrowleft",!0);D(O,ge,_e,"","\\Lsh",!0);D(O,ge,_e,"","\\upuparrows",!0);D(O,ge,_e,"","\\upharpoonleft",!0);D(O,ge,_e,"","\\downharpoonleft",!0);D(O,Q,_e,"","\\origof",!0);D(O,Q,_e,"","\\imageof",!0);D(O,ge,_e,"","\\multimap",!0);D(O,ge,_e,"","\\leftrightsquigarrow",!0);D(O,ge,_e,"","\\rightrightarrows",!0);D(O,ge,_e,"","\\rightleftarrows",!0);D(O,ge,_e,"","\\twoheadrightarrow",!0);D(O,ge,_e,"","\\rightarrowtail",!0);D(O,ge,_e,"","\\looparrowright",!0);D(O,ge,_e,"","\\curvearrowright",!0);D(O,ge,_e,"","\\circlearrowright",!0);D(O,ge,_e,"","\\Rsh",!0);D(O,ge,_e,"","\\downdownarrows",!0);D(O,ge,_e,"","\\upharpoonright",!0);D(O,ge,_e,"","\\downharpoonright",!0);D(O,ge,_e,"","\\rightsquigarrow",!0);D(O,ge,_e,"","\\leadsto");D(O,ge,_e,"","\\Rrightarrow",!0);D(O,ge,_e,"","\\restriction");D(O,Q,Re,"","`");D(O,Q,Re,"$","\\$");D(kt,Q,Re,"$","\\$");D(kt,Q,Re,"$","\\textdollar");D(O,Q,Re,"%","\\%");D(kt,Q,Re,"%","\\%");D(O,Q,Re,"_","\\_");D(kt,Q,Re,"_","\\_");D(kt,Q,Re,"_","\\textunderscore");D(O,Q,Re,"","\\angle",!0);D(O,Q,Re,"","\\infty",!0);D(O,Q,Re,"","\\prime");D(O,Q,Re,"","\\triangle");D(O,Q,Re,"","\\Gamma",!0);D(O,Q,Re,"","\\Delta",!0);D(O,Q,Re,"","\\Theta",!0);D(O,Q,Re,"","\\Lambda",!0);D(O,Q,Re,"","\\Xi",!0);D(O,Q,Re,"","\\Pi",!0);D(O,Q,Re,"","\\Sigma",!0);D(O,Q,Re,"","\\Upsilon",!0);D(O,Q,Re,"","\\Phi",!0);D(O,Q,Re,"","\\Psi",!0);D(O,Q,Re,"","\\Omega",!0);D(O,Q,Re,"A","");D(O,Q,Re,"B","");D(O,Q,Re,"E","");D(O,Q,Re,"Z","");D(O,Q,Re,"H","");D(O,Q,Re,"I","");D(O,Q,Re,"K","");D(O,Q,Re,"M","");D(O,Q,Re,"N","");D(O,Q,Re,"O","");D(O,Q,Re,"P","");D(O,Q,Re,"T","");D(O,Q,Re,"X","");D(O,Q,Re,"","\\neg",!0);D(O,Q,Re,"","\\lnot");D(O,Q,Re,"","\\top");D(O,Q,Re,"","\\bot");D(O,Q,Re,"","\\emptyset");D(O,ge,Re,"","\\varnothing");D(O,Q,Dn,"","\\alpha",!0);D(O,Q,Dn,"","\\beta",!0);D(O,Q,Dn,"","\\gamma",!0);D(O,Q,Dn,"","\\delta",!0);D(O,Q,Dn,"","\\epsilon",!0);D(O,Q,Dn,"","\\zeta",!0);D(O,Q,Dn,"","\\eta",!0);D(O,Q,Dn,"","\\theta",!0);D(O,Q,Dn,"","\\iota",!0);D(O,Q,Dn,"","\\kappa",!0);D(O,Q,Dn,"","\\lambda",!0);D(O,Q,Dn,"","\\mu",!0);D(O,Q,Dn,"","\\nu",!0);D(O,Q,Dn,"","\\xi",!0);D(O,Q,Dn,"","\\omicron",!0);D(O,Q,Dn,"","\\pi",!0);D(O,Q,Dn,"","\\rho",!0);D(O,Q,Dn,"","\\sigma",!0);D(O,Q,Dn,"","\\tau",!0);D(O,Q,Dn,"","\\upsilon",!0);D(O,Q,Dn,"","\\phi",!0);D(O,Q,Dn,"","\\chi",!0);D(O,Q,Dn,"","\\psi",!0);D(O,Q,Dn,"","\\omega",!0);D(O,Q,Dn,"","\\varepsilon",!0);D(O,Q,Dn,"","\\vartheta",!0);D(O,Q,Dn,"","\\varpi",!0);D(O,Q,Dn,"","\\varrho",!0);D(O,Q,Dn,"","\\varsigma",!0);D(O,Q,Dn,"","\\varphi",!0);D(O,Q,nn,"","*",!0);D(O,Q,nn,"+","+");D(O,Q,nn,"","-",!0);D(O,Q,nn,"","\\cdot",!0);D(O,Q,nn,"","\\circ",!0);D(O,Q,nn,"","\\div",!0);D(O,Q,nn,"","\\pm",!0);D(O,Q,nn,"","\\times",!0);D(O,Q,nn,"","\\cap",!0);D(O,Q,nn,"","\\cup",!0);D(O,Q,nn,"","\\setminus",!0);D(O,Q,nn,"","\\land");D(O,Q,nn,"","\\lor");D(O,Q,nn,"","\\wedge",!0);D(O,Q,nn,"","\\vee",!0);D(O,Q,Re,"","\\surd");D(O,Q,tc,"","\\langle",!0);D(O,Q,tc,"","\\lvert");D(O,Q,tc,"","\\lVert");D(O,Q,Vo,"?","?");D(O,Q,Vo,"!","!");D(O,Q,Vo,"","\\rangle",!0);D(O,Q,Vo,"","\\rvert");D(O,Q,Vo,"","\\rVert");D(O,Q,_e,"=","=");D(O,Q,_e,":",":");D(O,Q,_e,"","\\approx",!0);D(O,Q,_e,"","\\cong",!0);D(O,Q,_e,"","\\ge");D(O,Q,_e,"","\\geq",!0);D(O,Q,_e,"","\\gets");D(O,Q,_e,">","\\gt",!0);D(O,Q,_e,"","\\in",!0);D(O,Q,_e,"","\\@not");D(O,Q,_e,"","\\subset",!0);D(O,Q,_e,"","\\supset",!0);D(O,Q,_e,"","\\subseteq",!0);D(O,Q,_e,"","\\supseteq",!0);D(O,ge,_e,"","\\nsubseteq",!0);D(O,ge,_e,"","\\nsupseteq",!0);D(O,Q,_e,"","\\models");D(O,Q,_e,"","\\leftarrow",!0);D(O,Q,_e,"","\\le");D(O,Q,_e,"","\\leq",!0);D(O,Q,_e,"<","\\lt",!0);D(O,Q,_e,"","\\rightarrow",!0);D(O,Q,_e,"","\\to");D(O,ge,_e,"","\\ngeq",!0);D(O,ge,_e,"","\\nleq",!0);D(O,Q,Od,"","\\ ");D(O,Q,Od,"","\\space");D(O,Q,Od,"","\\nobreakspace");D(kt,Q,Od,"","\\ ");D(kt,Q,Od,""," ");D(kt,Q,Od,"","\\space");D(kt,Q,Od,"","\\nobreakspace");D(O,Q,Od,null,"\\nobreak");D(O,Q,Od,null,"\\allowbreak");D(O,Q,cE,",",",");D(O,Q,cE,";",";");D(O,ge,nn,"","\\barwedge",!0);D(O,ge,nn,"","\\veebar",!0);D(O,Q,nn,"","\\odot",!0);D(O,Q,nn,"","\\oplus",!0);D(O,Q,nn,"","\\otimes",!0);D(O,Q,Re,"","\\partial",!0);D(O,Q,nn,"","\\oslash",!0);D(O,ge,nn,"","\\circledcirc",!0);D(O,ge,nn,"","\\boxdot",!0);D(O,Q,nn,"","\\bigtriangleup");D(O,Q,nn,"","\\bigtriangledown");D(O,Q,nn,"","\\dagger");D(O,Q,nn,"","\\diamond");D(O,Q,nn,"","\\star");D(O,Q,nn,"","\\triangleleft");D(O,Q,nn,"","\\triangleright");D(O,Q,tc,"{","\\{");D(kt,Q,Re,"{","\\{");D(kt,Q,Re,"{","\\textbraceleft");D(O,Q,Vo,"}","\\}");D(kt,Q,Re,"}","\\}");D(kt,Q,Re,"}","\\textbraceright");D(O,Q,tc,"{","\\lbrace");D(O,Q,Vo,"}","\\rbrace");D(O,Q,tc,"[","\\lbrack",!0);D(kt,Q,Re,"[","\\lbrack",!0);D(O,Q,Vo,"]","\\rbrack",!0);D(kt,Q,Re,"]","\\rbrack",!0);D(O,Q,tc,"(","\\lparen",!0);D(O,Q,Vo,")","\\rparen",!0);D(kt,Q,Re,"<","\\textless",!0);D(kt,Q,Re,">","\\textgreater",!0);D(O,Q,tc,"","\\lfloor",!0);D(O,Q,Vo,"","\\rfloor",!0);D(O,Q,tc,"","\\lceil",!0);D(O,Q,Vo,"","\\rceil",!0);D(O,Q,Re,"\\","\\backslash");D(O,Q,Re,"","|");D(O,Q,Re,"","\\vert");D(kt,Q,Re,"|","\\textbar",!0);D(O,Q,Re,"","\\|");D(O,Q,Re,"","\\Vert");D(kt,Q,Re,"","\\textbardbl");D(kt,Q,Re,"~","\\textasciitilde");D(kt,Q,Re,"\\","\\textbackslash");D(kt,Q,Re,"^","\\textasciicircum");D(O,Q,_e,"","\\uparrow",!0);D(O,Q,_e,"","\\Uparrow",!0);D(O,Q,_e,"","\\downarrow",!0);D(O,Q,_e,"","\\Downarrow",!0);D(O,Q,_e,"","\\updownarrow",!0);D(O,Q,_e,"","\\Updownarrow",!0);D(O,Q,da,"","\\coprod");D(O,Q,da,"","\\bigvee");D(O,Q,da,"","\\bigwedge");D(O,Q,da,"","\\biguplus");D(O,Q,da,"","\\bigcap");D(O,Q,da,"","\\bigcup");D(O,Q,da,"","\\int");D(O,Q,da,"","\\intop");D(O,Q,da,"","\\iint");D(O,Q,da,"","\\iiint");D(O,Q,da,"","\\prod");D(O,Q,da,"","\\sum");D(O,Q,da,"","\\bigotimes");D(O,Q,da,"","\\bigoplus");D(O,Q,da,"","\\bigodot");D(O,Q,da,"","\\oint");D(O,Q,da,"","\\oiint");D(O,Q,da,"","\\oiiint");D(O,Q,da,"","\\bigsqcup");D(O,Q,da,"","\\smallint");D(kt,Q,Iv,"","\\textellipsis");D(O,Q,Iv,"","\\mathellipsis");D(kt,Q,Iv,"","\\ldots",!0);D(O,Q,Iv,"","\\ldots",!0);D(O,Q,Iv,"","\\@cdots",!0);D(O,Q,Iv,"","\\ddots",!0);D(O,Q,Re,"","\\varvdots");D(O,Q,is,"","\\acute");D(O,Q,is,"","\\grave");D(O,Q,is,"","\\ddot");D(O,Q,is,"~","\\tilde");D(O,Q,is,"","\\bar");D(O,Q,is,"","\\breve");D(O,Q,is,"","\\check");D(O,Q,is,"^","\\hat");D(O,Q,is,"","\\vec");D(O,Q,is,"","\\dot");D(O,Q,is,"","\\mathring");D(O,Q,Dn,"","\\@imath");D(O,Q,Dn,"","\\@jmath");D(O,Q,Re,"","");D(O,Q,Re,"","");D(kt,Q,Re,"","\\i",!0);D(kt,Q,Re,"","\\j",!0);D(kt,Q,Re,"","\\ss",!0);D(kt,Q,Re,"","\\ae",!0);D(kt,Q,Re,"","\\oe",!0);D(kt,Q,Re,"","\\o",!0);D(kt,Q,Re,"","\\AE",!0);D(kt,Q,Re,"","\\OE",!0);D(kt,Q,Re,"","\\O",!0);D(kt,Q,is,"","\\'");D(kt,Q,is,"","\\`");D(kt,Q,is,"","\\^");D(kt,Q,is,"","\\~");D(kt,Q,is,"","\\=");D(kt,Q,is,"","\\u");D(kt,Q,is,"","\\.");D(kt,Q,is,"","\\c");D(kt,Q,is,"","\\r");D(kt,Q,is,"","\\v");D(kt,Q,is,"",'\\"');D(kt,Q,is,"","\\H");D(kt,Q,is,"","\\textcircled");var lH={"--":!0,"---":!0,"``":!0,"''":!0};D(kt,Q,Re,"","--",!0);D(kt,Q,Re,"","\\textendash");D(kt,Q,Re,"","---",!0);D(kt,Q,Re,"","\\textemdash");D(kt,Q,Re,"","`",!0);D(kt,Q,Re,"","\\textquoteleft");D(kt,Q,Re,"","'",!0);D(kt,Q,Re,"","\\textquoteright");D(kt,Q,Re,"","``",!0);D(kt,Q,Re,"","\\textquotedblleft");D(kt,Q,Re,"","''",!0);D(kt,Q,Re,"","\\textquotedblright");D(O,Q,Re,"","\\degree",!0);D(kt,Q,Re,"","\\degree");D(kt,Q,Re,"","\\textdegree",!0);D(O,Q,Re,"","\\pounds");D(O,Q,Re,"","\\mathsterling",!0);D(kt,Q,Re,"","\\pounds");D(kt,Q,Re,"","\\textsterling",!0);D(O,ge,Re,"","\\maltese");D(kt,ge,Re,"","\\maltese");var B7='0123456789/@."';for(var s3=0;s3<B7.length;s3++){var R7=B7.charAt(s3);D(O,Q,Re,R7,R7)}var D7='0123456789!@*()-=+";:?/.,';for(var a3=0;a3<D7.length;a3++){var L7=D7.charAt(a3);D(kt,Q,Re,L7,L7)}var Gx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var o3=0;o3<Gx.length;o3++){var bw=Gx.charAt(o3);D(O,Q,Dn,bw,bw),D(kt,Q,Re,bw,bw)}D(O,ge,Re,"C","");D(kt,ge,Re,"C","");D(O,ge,Re,"H","");D(kt,ge,Re,"H","");D(O,ge,Re,"N","");D(kt,ge,Re,"N","");D(O,ge,Re,"P","");D(kt,ge,Re,"P","");D(O,ge,Re,"Q","");D(kt,ge,Re,"Q","");D(O,ge,Re,"R","");D(kt,ge,Re,"R","");D(O,ge,Re,"Z","");D(kt,ge,Re,"Z","");D(O,Q,Dn,"h","");D(kt,Q,Dn,"h","");var Jn="";for(var el=0;el<Gx.length;el++){var ia=Gx.charAt(el);Jn=String.fromCharCode(55349,56320+el),D(O,Q,Dn,ia,Jn),D(kt,Q,Re,ia,Jn),Jn=String.fromCharCode(55349,56372+el),D(O,Q,Dn,ia,Jn),D(kt,Q,Re,ia,Jn),Jn=String.fromCharCode(55349,56424+el),D(O,Q,Dn,ia,Jn),D(kt,Q,Re,ia,Jn),Jn=String.fromCharCode(55349,56580+el),D(O,Q,Dn,ia,Jn),D(kt,Q,Re,ia,Jn),Jn=String.fromCharCode(55349,56736+el),D(O,Q,Dn,ia,Jn),D(kt,Q,Re,ia,Jn),Jn=String.fromCharCode(55349,56788+el),D(O,Q,Dn,ia,Jn),D(kt,Q,Re,ia,Jn),Jn=String.fromCharCode(55349,56840+el),D(O,Q,Dn,ia,Jn),D(kt,Q,Re,ia,Jn),Jn=String.fromCharCode(55349,56944+el),D(O,Q,Dn,ia,Jn),D(kt,Q,Re,ia,Jn),el<26&&(Jn=String.fromCharCode(55349,56632+el),D(O,Q,Dn,ia,Jn),D(kt,Q,Re,ia,Jn),Jn=String.fromCharCode(55349,56476+el),D(O,Q,Dn,ia,Jn),D(kt,Q,Re,ia,Jn))}Jn=String.fromCharCode(55349,56668);D(O,Q,Dn,"k",Jn);D(kt,Q,Re,"k",Jn);for(var jp=0;jp<10;jp++){var df=jp.toString();Jn=String.fromCharCode(55349,57294+jp),D(O,Q,Dn,df,Jn),D(kt,Q,Re,df,Jn),Jn=String.fromCharCode(55349,57314+jp),D(O,Q,Dn,df,Jn),D(kt,Q,Re,df,Jn),Jn=String.fromCharCode(55349,57324+jp),D(O,Q,Dn,df,Jn),D(kt,Q,Re,df,Jn),Jn=String.fromCharCode(55349,57334+jp),D(O,Q,Dn,df,Jn),D(kt,Q,Re,df,Jn)}var oT="";for(var l3=0;l3<oT.length;l3++){var yw=oT.charAt(l3);D(O,Q,Dn,yw,yw),D(kt,Q,Re,yw,yw)}var ww=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["","",""],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],O7=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Zut=function(e,t){var n=e.charCodeAt(0),r=e.charCodeAt(1),s=(n-55296)*1024+(r-56320)+65536,a=t==="math"?0:1;if(119808<=s&&s<120484){var o=Math.floor((s-119808)/26);return[ww[o][2],ww[o][a]]}else if(120782<=s&&s<=120831){var l=Math.floor((s-120782)/10);return[O7[l][2],O7[l][a]]}else{if(s===120485||s===120486)return[ww[0][2],ww[0][a]];if(120486<s&&s<120782)return["",""];throw new Ot("Unsupported character: "+e)}},uE=function(e,t,n){return Ur[n][e]&&Ur[n][e].replace&&(e=Ur[n][e].replace),{value:e,metrics:sP(e,t,n)}},lu=function(e,t,n,r,s){var a=uE(e,t,n),o=a.metrics;e=a.value;var l;if(o){var c=o.italic;(n==="text"||r&&r.font==="mathit")&&(c=0),l=new Lc(e,o.height,o.depth,c,o.skew,o.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+t+"' and mode '"+n+"'")),l=new Lc(e,0,0,0,0,0,s);if(r){l.maxFontSize=r.sizeMultiplier,r.style.isTight()&&l.classes.push("mtight");var u=r.getColor();u&&(l.style.color=u)}return l},eht=function(e,t,n,r){return r===void 0&&(r=[]),n.font==="boldsymbol"&&uE(e,"Main-Bold",t).metrics?lu(e,"Main-Bold",t,n,r.concat(["mathbf"])):e==="\\"||Ur[t][e].font==="main"?lu(e,"Main-Regular",t,n,r):lu(e,"AMS-Regular",t,n,r.concat(["amsrm"]))},tht=function(e,t,n,r,s){return s!=="textord"&&uE(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},nht=function(e,t,n){var r=e.mode,s=e.text,a=["mord"],o=r==="math"||r==="text"&&t.font,l=o?t.font:t.fontFamily;if(s.charCodeAt(0)===55349){var[c,u]=Zut(s,r);return lu(s,c,r,t,a.concat(u))}else if(l){var h,d;if(l==="boldsymbol"){var f=tht(s,r,t,a,n);h=f.fontName,d=[f.fontClass]}else o?(h=hH[l].fontName,d=[l]):(h=xw(l,t.fontWeight,t.fontShape),d=[l,t.fontWeight,t.fontShape]);if(uE(s,h,r).metrics)return lu(s,h,r,t,a.concat(d));if(lH.hasOwnProperty(s)&&h.slice(0,10)==="Typewriter"){for(var m=[],A=0;A<s.length;A++)m.push(lu(s[A],h,r,t,a.concat(d)));return uH(m)}}if(n==="mathord")return lu(s,"Math-Italic",r,t,a.concat(["mathnormal"]));if(n==="textord"){var _=Ur[r][s]&&Ur[r][s].font;if(_==="ams"){var v=xw("amsrm",t.fontWeight,t.fontShape);return lu(s,v,r,t,a.concat("amsrm",t.fontWeight,t.fontShape))}else if(_==="main"||!_){var w=xw("textrm",t.fontWeight,t.fontShape);return lu(s,w,r,t,a.concat(t.fontWeight,t.fontShape))}else{var x=xw(_,t.fontWeight,t.fontShape);return lu(s,x,r,t,a.concat(x,t.fontWeight,t.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},iht=(i,e)=>{if(Yf(i.classes)!==Yf(e.classes)||i.skew!==e.skew||i.maxFontSize!==e.maxFontSize)return!1;if(i.classes.length===1){var t=i.classes[0];if(t==="mbin"||t==="mord")return!1}for(var n in i.style)if(i.style.hasOwnProperty(n)&&i.style[n]!==e.style[n])return!1;for(var r in e.style)if(e.style.hasOwnProperty(r)&&i.style[r]!==e.style[r])return!1;return!0},rht=i=>{for(var e=0;e<i.length-1;e++){var t=i[e],n=i[e+1];t instanceof Lc&&n instanceof Lc&&iht(t,n)&&(t.text+=n.text,t.height=Math.max(t.height,n.height),t.depth=Math.max(t.depth,n.depth),t.italic=n.italic,i.splice(e+1,1),e--)}return i},oP=function(e){for(var t=0,n=0,r=0,s=0;s<e.children.length;s++){var a=e.children[s];a.height>t&&(t=a.height),a.depth>n&&(n=a.depth),a.maxFontSize>r&&(r=a.maxFontSize)}e.height=t,e.depth=n,e.maxFontSize=r},il=function(e,t,n,r){var s=new _b(e,t,n,r);return oP(s),s},cH=(i,e,t,n)=>new _b(i,e,t,n),sht=function(e,t,n){var r=il([e],[],t);return r.height=Math.max(n||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),r.style.borderBottomWidth=Gt(r.height),r.maxFontSize=1,r},aht=function(e,t,n,r){var s=new aP(e,t,n,r);return oP(s),s},uH=function(e){var t=new Ab(e);return oP(t),t},oht=function(e,t){return e instanceof Ab?il([],[e],t):e},lht=function(e){if(e.positionType==="individualShift"){for(var t=e.children,n=[t[0]],r=-t[0].shift-t[0].elem.depth,s=r,a=1;a<t.length;a++){var o=-t[a].shift-s-t[a].elem.depth,l=o-(t[a-1].elem.height+t[a-1].elem.depth);s=s+o,n.push({type:"kern",size:l}),n.push(t[a])}return{children:n,depth:r}}var c;if(e.positionType==="top"){for(var u=e.positionData,h=0;h<e.children.length;h++){var d=e.children[h];u-=d.type==="kern"?d.size:d.elem.height+d.elem.depth}c=u}else if(e.positionType==="bottom")c=-e.positionData;else{var f=e.children[0];if(f.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")c=-f.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")c=-f.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:c}},cht=function(e,t){for(var{children:n,depth:r}=lht(e),s=0,a=0;a<n.length;a++){var o=n[a];if(o.type==="elem"){var l=o.elem;s=Math.max(s,l.maxFontSize,l.height)}}s+=2;var c=il(["pstrut"],[]);c.style.height=Gt(s);for(var u=[],h=r,d=r,f=r,m=0;m<n.length;m++){var A=n[m];if(A.type==="kern")f+=A.size;else{var _=A.elem,v=A.wrapperClasses||[],w=A.wrapperStyle||{},x=il(v,[c,_],void 0,w);x.style.top=Gt(-s-f-_.depth),A.marginLeft&&(x.style.marginLeft=A.marginLeft),A.marginRight&&(x.style.marginRight=A.marginRight),u.push(x),f+=_.height+_.depth}h=Math.min(h,f),d=Math.max(d,f)}var C=il(["vlist"],u);C.style.height=Gt(d);var S;if(h<0){var I=il([],[]),P=il(["vlist"],[I]);P.style.height=Gt(-h);var k=il(["vlist-s"],[new Lc("")]);S=[il(["vlist-r"],[C,k]),il(["vlist-r"],[P])]}else S=[il(["vlist-r"],[C])];var M=il(["vlist-t"],S);return S.length===2&&M.classes.push("vlist-t2"),M.height=d,M.depth=-h,M},uht=(i,e)=>{var t=il(["mspace"],[],e),n=ds(i,e);return t.style.marginRight=Gt(n),t},xw=function(e,t,n){var r="";switch(e){case"amsrm":r="AMS";break;case"textrm":r="Main";break;case"textsf":r="SansSerif";break;case"texttt":r="Typewriter";break;default:r=e}var s;return t==="textbf"&&n==="textit"?s="BoldItalic":t==="textbf"?s="Bold":t==="textit"?s="Italic":s="Regular",r+"-"+s},hH={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},dH={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},hht=function(e,t){var[n,r,s]=dH[e],a=new Kf(n),o=new Cd([a],{width:Gt(r),height:Gt(s),style:"width:"+Gt(r),viewBox:"0 0 "+1e3*r+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),l=cH(["overlay"],[o],t);return l.height=s,l.style.height=Gt(s),l.style.width=Gt(r),l},Xe={fontMap:hH,makeSymbol:lu,mathsym:eht,makeSpan:il,makeSvgSpan:cH,makeLineSpan:sht,makeAnchor:aht,makeFragment:uH,wrapFragment:oht,makeVList:cht,makeOrd:nht,makeGlue:uht,staticSvg:hht,svgData:dH,tryCombineChars:rht},us={number:3,unit:"mu"},Wp={number:4,unit:"mu"},sd={number:5,unit:"mu"},dht={mord:{mop:us,mbin:Wp,mrel:sd,minner:us},mop:{mord:us,mop:us,mrel:sd,minner:us},mbin:{mord:Wp,mop:Wp,mopen:Wp,minner:Wp},mrel:{mord:sd,mop:sd,mopen:sd,minner:sd},mopen:{},mclose:{mop:us,mbin:Wp,mrel:sd,minner:us},mpunct:{mord:us,mop:us,mrel:sd,mopen:us,mclose:us,mpunct:us,minner:us},minner:{mord:us,mop:us,mbin:Wp,mrel:sd,mopen:us,mpunct:us,minner:us}},fht={mord:{mop:us},mop:{mord:us,mop:us},mbin:{},mrel:{},mopen:{},mclose:{mop:us},mpunct:{},minner:{mop:us}},fH={},Qx={},qx={};function Zt(i){for(var{type:e,names:t,props:n,handler:r,htmlBuilder:s,mathmlBuilder:a}=i,o={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:r},l=0;l<t.length;++l)fH[t[l]]=o;e&&(s&&(Qx[e]=s),a&&(qx[e]=a))}function am(i){var{type:e,htmlBuilder:t,mathmlBuilder:n}=i;Zt({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:t,mathmlBuilder:n})}var jx=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},Qs=function(e){return e.type==="ordgroup"?e.body:[e]},Ed=Xe.makeSpan,pht=["leftmost","mbin","mopen","mrel","mop","mpunct"],mht=["rightmost","mrel","mclose","mpunct"],ght={display:kn.DISPLAY,text:kn.TEXT,script:kn.SCRIPT,scriptscript:kn.SCRIPTSCRIPT},vht={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Ea=function(e,t,n,r){r===void 0&&(r=[null,null]);for(var s=[],a=0;a<e.length;a++){var o=Xi(e[a],t);if(o instanceof Ab){var l=o.children;s.push(...l)}else s.push(o)}if(Xe.tryCombineChars(s),!n)return s;var c=t;if(e.length===1){var u=e[0];u.type==="sizing"?c=t.havingSize(u.size):u.type==="styling"&&(c=t.havingStyle(ght[u.style]))}var h=Ed([r[0]||"leftmost"],[],t),d=Ed([r[1]||"rightmost"],[],t),f=n==="root";return N7(s,(m,A)=>{var _=A.classes[0],v=m.classes[0];_==="mbin"&&qn.contains(mht,v)?A.classes[0]="mord":v==="mbin"&&qn.contains(pht,_)&&(m.classes[0]="mord")},{node:h},d,f),N7(s,(m,A)=>{var _=lT(A),v=lT(m),w=_&&v?m.hasClass("mtight")?fht[_][v]:dht[_][v]:null;if(w)return Xe.makeGlue(w,c)},{node:h},d,f),s},N7=function i(e,t,n,r,s){r&&e.push(r);for(var a=0;a<e.length;a++){var o=e[a],l=pH(o);if(l){i(l.children,t,n,null,s);continue}var c=!o.hasClass("mspace");if(c){var u=t(o,n.node);u&&(n.insertAfter?n.insertAfter(u):(e.unshift(u),a++))}c?n.node=o:s&&o.hasClass("newline")&&(n.node=Ed(["leftmost"])),n.insertAfter=(h=>d=>{e.splice(h+1,0,d),a++})(a)}r&&e.pop()},pH=function(e){return e instanceof Ab||e instanceof aP||e instanceof _b&&e.hasClass("enclosing")?e:null},Aht=function i(e,t){var n=pH(e);if(n){var r=n.children;if(r.length){if(t==="right")return i(r[r.length-1],"right");if(t==="left")return i(r[0],"left")}}return e},lT=function(e,t){return e?(t&&(e=Aht(e,t)),vht[e.classes[0]]||null):null},V1=function(e,t){var n=["nulldelimiter"].concat(e.baseSizingClasses());return Ed(t.concat(n))},Xi=function(e,t,n){if(!e)return Ed();if(Qx[e.type]){var r=Qx[e.type](e,t);if(n&&t.size!==n.size){r=Ed(t.sizingClasses(n),[r],t);var s=t.sizeMultiplier/n.sizeMultiplier;r.height*=s,r.depth*=s}return r}else throw new Ot("Got group of unknown type: '"+e.type+"'")};function Cw(i,e){var t=Ed(["base"],i,e),n=Ed(["strut"]);return n.style.height=Gt(t.height+t.depth),t.depth&&(n.style.verticalAlign=Gt(-t.depth)),t.children.unshift(n),t}function cT(i,e){var t=null;i.length===1&&i[0].type==="tag"&&(t=i[0].tag,i=i[0].body);var n=Ea(i,e,"root"),r;n.length===2&&n[1].hasClass("tag")&&(r=n.pop());for(var s=[],a=[],o=0;o<n.length;o++)if(a.push(n[o]),n[o].hasClass("mbin")||n[o].hasClass("mrel")||n[o].hasClass("allowbreak")){for(var l=!1;o<n.length-1&&n[o+1].hasClass("mspace")&&!n[o+1].hasClass("newline");)o++,a.push(n[o]),n[o].hasClass("nobreak")&&(l=!0);l||(s.push(Cw(a,e)),a=[])}else n[o].hasClass("newline")&&(a.pop(),a.length>0&&(s.push(Cw(a,e)),a=[]),s.push(n[o]));a.length>0&&s.push(Cw(a,e));var c;t?(c=Cw(Ea(t,e,!0)),c.classes=["tag"],s.push(c)):r&&s.push(r);var u=Ed(["katex-html"],s);if(u.setAttribute("aria-hidden","true"),c){var h=c.children[0];h.style.height=Gt(u.height+u.depth),u.depth&&(h.style.verticalAlign=Gt(-u.depth))}return u}function mH(i){return new Ab(i)}class Ec{constructor(e,t,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=n||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=Yf(this.classes));for(var n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=qn.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+qn.escape(Yf(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class a1{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return qn.escape(this.toText())}toText(){return this.text}}class _ht{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",Gt(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Gt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Dt={MathNode:Ec,TextNode:a1,SpaceNode:_ht,newDocumentFragment:mH},Oc=function(e,t,n){return Ur[t][e]&&Ur[t][e].replace&&e.charCodeAt(0)!==55349&&!(lH.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=Ur[t][e].replace),new Dt.TextNode(e)},lP=function(e){return e.length===1?e[0]:new Dt.MathNode("mrow",e)},cP=function(e,t){if(t.fontFamily==="texttt")return"monospace";if(t.fontFamily==="textsf")return t.fontShape==="textit"&&t.fontWeight==="textbf"?"sans-serif-bold-italic":t.fontShape==="textit"?"sans-serif-italic":t.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(t.fontShape==="textit"&&t.fontWeight==="textbf")return"bold-italic";if(t.fontShape==="textit")return"italic";if(t.fontWeight==="textbf")return"bold";var n=t.font;if(!n||n==="mathnormal")return null;var r=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var s=e.text;if(qn.contains(["\\imath","\\jmath"],s))return null;Ur[r][s]&&Ur[r][s].replace&&(s=Ur[r][s].replace);var a=Xe.fontMap[n].fontName;return sP(s,a,r)?Xe.fontMap[n].variant:null},xl=function(e,t,n){if(e.length===1){var r=Dr(e[0],t);return n&&r instanceof Ec&&r.type==="mo"&&(r.setAttribute("lspace","0em"),r.setAttribute("rspace","0em")),[r]}for(var s=[],a,o=0;o<e.length;o++){var l=Dr(e[o],t);if(l instanceof Ec&&a instanceof Ec){if(l.type==="mtext"&&a.type==="mtext"&&l.getAttribute("mathvariant")===a.getAttribute("mathvariant")){a.children.push(...l.children);continue}else if(l.type==="mn"&&a.type==="mn"){a.children.push(...l.children);continue}else if(l.type==="mi"&&l.children.length===1&&a.type==="mn"){var c=l.children[0];if(c instanceof a1&&c.text==="."){a.children.push(...l.children);continue}}else if(a.type==="mi"&&a.children.length===1){var u=a.children[0];if(u instanceof a1&&u.text===""&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var h=l.children[0];h instanceof a1&&h.text.length>0&&(h.text=h.text.slice(0,1)+""+h.text.slice(1),s.pop())}}}s.push(l),a=l}return s},Jf=function(e,t,n){return lP(xl(e,t,n))},Dr=function(e,t){if(!e)return new Dt.MathNode("mrow");if(qx[e.type]){var n=qx[e.type](e,t);return n}else throw new Ot("Got group of unknown type: '"+e.type+"'")};function F7(i,e,t,n,r){var s=xl(i,t),a;s.length===1&&s[0]instanceof Ec&&qn.contains(["mrow","mtable"],s[0].type)?a=s[0]:a=new Dt.MathNode("mrow",s);var o=new Dt.MathNode("annotation",[new Dt.TextNode(e)]);o.setAttribute("encoding","application/x-tex");var l=new Dt.MathNode("semantics",[a,o]),c=new Dt.MathNode("math",[l]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&c.setAttribute("display","block");var u=r?"katex":"katex-mathml";return Xe.makeSpan([u],[c])}var gH=function(e){return new dd({style:e.displayMode?kn.DISPLAY:kn.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},vH=function(e,t){if(t.displayMode){var n=["katex-display"];t.leqno&&n.push("leqno"),t.fleqn&&n.push("fleqn"),e=Xe.makeSpan(n,[e])}return e},bht=function(e,t,n){var r=gH(n),s;if(n.output==="mathml")return F7(e,t,r,n.displayMode,!0);if(n.output==="html"){var a=cT(e,r);s=Xe.makeSpan(["katex"],[a])}else{var o=F7(e,t,r,n.displayMode,!1),l=cT(e,r);s=Xe.makeSpan(["katex"],[o,l])}return vH(s,n)},yht=function(e,t,n){var r=gH(n),s=cT(e,r),a=Xe.makeSpan(["katex"],[s]);return vH(a,n)},wht={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},xht=function(e){var t=new Dt.MathNode("mo",[new Dt.TextNode(wht[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},Cht={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Eht=function(e){return e.type==="ordgroup"?e.body.length:1},Sht=function(e,t){function n(){var o=4e5,l=e.label.slice(1);if(qn.contains(["widehat","widecheck","widetilde","utilde"],l)){var c=e,u=Eht(c.base),h,d,f;if(u>5)l==="widehat"||l==="widecheck"?(h=420,o=2364,f=.42,d=l+"4"):(h=312,o=2340,f=.34,d="tilde4");else{var m=[1,1,2,2,3,3][u];l==="widehat"||l==="widecheck"?(o=[0,1062,2364,2364,2364][m],h=[0,239,300,360,420][m],f=[0,.24,.3,.3,.36,.42][m],d=l+m):(o=[0,600,1033,2339,2340][m],h=[0,260,286,306,312][m],f=[0,.26,.286,.3,.306,.34][m],d="tilde"+m)}var A=new Kf(d),_=new Cd([A],{width:"100%",height:Gt(f),viewBox:"0 0 "+o+" "+h,preserveAspectRatio:"none"});return{span:Xe.makeSvgSpan([],[_],t),minWidth:0,height:f}}else{var v=[],w=Cht[l],[x,C,S]=w,I=S/1e3,P=x.length,k,M;if(P===1){var R=w[3];k=["hide-tail"],M=[R]}else if(P===2)k=["halfarrow-left","halfarrow-right"],M=["xMinYMin","xMaxYMin"];else if(P===3)k=["brace-left","brace-center","brace-right"],M=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+P+" children.");for(var N=0;N<P;N++){var U=new Kf(x[N]),q=new Cd([U],{width:"400em",height:Gt(I),viewBox:"0 0 "+o+" "+S,preserveAspectRatio:M[N]+" slice"}),W=Xe.makeSvgSpan([k[N]],[q],t);if(P===1)return{span:W,minWidth:C,height:I};W.style.height=Gt(I),v.push(W)}return{span:Xe.makeSpan(["stretchy"],v,t),minWidth:C,height:I}}}var{span:r,minWidth:s,height:a}=n();return r.height=a,r.style.height=Gt(a),s>0&&(r.style.minWidth=Gt(s)),r},Mht=function(e,t,n,r,s){var a,o=e.height+e.depth+n+r;if(/fbox|color|angl/.test(t)){if(a=Xe.makeSpan(["stretchy",t],[],s),t==="fbox"){var l=s.color&&s.getColor();l&&(a.style.borderColor=l)}}else{var c=[];/^[bx]cancel$/.test(t)&&c.push(new aT({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&c.push(new aT({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var u=new Cd(c,{width:"100%",height:Gt(o)});a=Xe.makeSvgSpan([],[u],s)}return a.height=o,a.style.height=Gt(o),a},Sd={encloseSpan:Mht,mathMLnode:xht,svgSpan:Sht};function hi(i,e){if(!i||i.type!==e)throw new Error("Expected node of type "+e+", but got "+(i?"node of type "+i.type:String(i)));return i}function uP(i){var e=hE(i);if(!e)throw new Error("Expected node of symbol group type, but got "+(i?"node of type "+i.type:String(i)));return e}function hE(i){return i&&(i.type==="atom"||Jut.hasOwnProperty(i.type))?i:null}var hP=(i,e)=>{var t,n,r;i&&i.type==="supsub"?(n=hi(i.base,"accent"),t=n.base,i.base=t,r=Yut(Xi(i,e)),i.base=n):(n=hi(i,"accent"),t=n.base);var s=Xi(t,e.havingCrampedStyle()),a=n.isShifty&&qn.isCharacterBox(t),o=0;if(a){var l=qn.getBaseElem(t),c=Xi(l,e.havingCrampedStyle());o=k7(c).skew}var u=n.label==="\\c",h=u?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight),d;if(n.isStretchy)d=Sd.svgSpan(n,e),d=Xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:d,wrapperClasses:["svg-align"],wrapperStyle:o>0?{width:"calc(100% - "+Gt(2*o)+")",marginLeft:Gt(2*o)}:void 0}]},e);else{var f,m;n.label==="\\vec"?(f=Xe.staticSvg("vec",e),m=Xe.svgData.vec[1]):(f=Xe.makeOrd({mode:n.mode,text:n.label},e,"textord"),f=k7(f),f.italic=0,m=f.width,u&&(h+=f.depth)),d=Xe.makeSpan(["accent-body"],[f]);var A=n.label==="\\textcircled";A&&(d.classes.push("accent-full"),h=s.height);var _=o;A||(_-=m/2),d.style.left=Gt(_),n.label==="\\textcircled"&&(d.style.top=".2em"),d=Xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-h},{type:"elem",elem:d}]},e)}var v=Xe.makeSpan(["mord","accent"],[d],e);return r?(r.children[0]=v,r.height=Math.max(v.height,r.height),r.classes[0]="mord",r):v},AH=(i,e)=>{var t=i.isStretchy?Sd.mathMLnode(i.label):new Dt.MathNode("mo",[Oc(i.label,i.mode)]),n=new Dt.MathNode("mover",[Dr(i.base,e),t]);return n.setAttribute("accent","true"),n},Tht=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(i=>"\\"+i).join("|"));Zt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(i,e)=>{var t=jx(e[0]),n=!Tht.test(i.funcName),r=!n||i.funcName==="\\widehat"||i.funcName==="\\widetilde"||i.funcName==="\\widecheck";return{type:"accent",mode:i.parser.mode,label:i.funcName,isStretchy:n,isShifty:r,base:t}},htmlBuilder:hP,mathmlBuilder:AH});Zt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(i,e)=>{var t=e[0],n=i.parser.mode;return n==="math"&&(i.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+i.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:i.funcName,isStretchy:!1,isShifty:!0,base:t}},htmlBuilder:hP,mathmlBuilder:AH});Zt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=e[0];return{type:"accentUnder",mode:t.mode,label:n,base:r}},htmlBuilder:(i,e)=>{var t=Xi(i.base,e),n=Sd.svgSpan(i,e),r=i.label==="\\utilde"?.12:0,s=Xe.makeVList({positionType:"top",positionData:t.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:r},{type:"elem",elem:t}]},e);return Xe.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:(i,e)=>{var t=Sd.mathMLnode(i.label),n=new Dt.MathNode("munder",[Dr(i.base,e),t]);return n.setAttribute("accentunder","true"),n}});var Ew=i=>{var e=new Dt.MathNode("mpadded",i?[i]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};Zt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(i,e,t){var{parser:n,funcName:r}=i;return{type:"xArrow",mode:n.mode,label:r,body:e[0],below:t[0]}},htmlBuilder(i,e){var t=e.style,n=e.havingStyle(t.sup()),r=Xe.wrapFragment(Xi(i.body,n,e),e),s=i.label.slice(0,2)==="\\x"?"x":"cd";r.classes.push(s+"-arrow-pad");var a;i.below&&(n=e.havingStyle(t.sub()),a=Xe.wrapFragment(Xi(i.below,n,e),e),a.classes.push(s+"-arrow-pad"));var o=Sd.svgSpan(i,e),l=-e.fontMetrics().axisHeight+.5*o.height,c=-e.fontMetrics().axisHeight-.5*o.height-.111;(r.depth>.25||i.label==="\\xleftequilibrium")&&(c-=r.depth);var u;if(a){var h=-e.fontMetrics().axisHeight+a.height+.5*o.height+.111;u=Xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:c},{type:"elem",elem:o,shift:l},{type:"elem",elem:a,shift:h}]},e)}else u=Xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:c},{type:"elem",elem:o,shift:l}]},e);return u.children[0].children[0].children[1].classes.push("svg-align"),Xe.makeSpan(["mrel","x-arrow"],[u],e)},mathmlBuilder(i,e){var t=Sd.mathMLnode(i.label);t.setAttribute("minsize",i.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(i.body){var r=Ew(Dr(i.body,e));if(i.below){var s=Ew(Dr(i.below,e));n=new Dt.MathNode("munderover",[t,s,r])}else n=new Dt.MathNode("mover",[t,r])}else if(i.below){var a=Ew(Dr(i.below,e));n=new Dt.MathNode("munder",[t,a])}else n=Ew(),n=new Dt.MathNode("mover",[t,n]);return n}});var Iht=Xe.makeSpan;function _H(i,e){var t=Ea(i.body,e,!0);return Iht([i.mclass],t,e)}function bH(i,e){var t,n=xl(i.body,e);return i.mclass==="minner"?t=new Dt.MathNode("mpadded",n):i.mclass==="mord"?i.isCharacterBox?(t=n[0],t.type="mi"):t=new Dt.MathNode("mi",n):(i.isCharacterBox?(t=n[0],t.type="mo"):t=new Dt.MathNode("mo",n),i.mclass==="mbin"?(t.attributes.lspace="0.22em",t.attributes.rspace="0.22em"):i.mclass==="mpunct"?(t.attributes.lspace="0em",t.attributes.rspace="0.17em"):i.mclass==="mopen"||i.mclass==="mclose"?(t.attributes.lspace="0em",t.attributes.rspace="0em"):i.mclass==="minner"&&(t.attributes.lspace="0.0556em",t.attributes.width="+0.1111em")),t}Zt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(i,e){var{parser:t,funcName:n}=i,r=e[0];return{type:"mclass",mode:t.mode,mclass:"m"+n.slice(5),body:Qs(r),isCharacterBox:qn.isCharacterBox(r)}},htmlBuilder:_H,mathmlBuilder:bH});var dE=i=>{var e=i.type==="ordgroup"&&i.body.length?i.body[0]:i;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};Zt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(i,e){var{parser:t}=i;return{type:"mclass",mode:t.mode,mclass:dE(e[0]),body:Qs(e[1]),isCharacterBox:qn.isCharacterBox(e[1])}}});Zt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(i,e){var{parser:t,funcName:n}=i,r=e[1],s=e[0],a;n!=="\\stackrel"?a=dE(r):a="mrel";var o={type:"op",mode:r.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:Qs(r)},l={type:"supsub",mode:s.mode,base:o,sup:n==="\\underset"?null:s,sub:n==="\\underset"?s:null};return{type:"mclass",mode:t.mode,mclass:a,body:[l],isCharacterBox:qn.isCharacterBox(l)}},htmlBuilder:_H,mathmlBuilder:bH});Zt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(i,e){var{parser:t}=i;return{type:"pmb",mode:t.mode,mclass:dE(e[0]),body:Qs(e[0])}},htmlBuilder(i,e){var t=Ea(i.body,e,!0),n=Xe.makeSpan([i.mclass],t,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(i,e){var t=xl(i.body,e),n=new Dt.MathNode("mstyle",t);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var Pht={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},z7=()=>({type:"styling",body:[],mode:"math",style:"display"}),U7=i=>i.type==="textord"&&i.text==="@",kht=(i,e)=>(i.type==="mathord"||i.type==="atom")&&i.text===e;function Bht(i,e,t){var n=Pht[i];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return t.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var r=t.callFunction("\\\\cdleft",[e[0]],[]),s={type:"atom",text:n,mode:"math",family:"rel"},a=t.callFunction("\\Big",[s],[]),o=t.callFunction("\\\\cdright",[e[1]],[]),l={type:"ordgroup",mode:"math",body:[r,a,o]};return t.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return t.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var c={type:"textord",text:"\\Vert",mode:"math"};return t.callFunction("\\Big",[c],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Rht(i){var e=[];for(i.gullet.beginGroup(),i.gullet.macros.set("\\cr","\\\\\\relax"),i.gullet.beginGroup();;){e.push(i.parseExpression(!1,"\\\\")),i.gullet.endGroup(),i.gullet.beginGroup();var t=i.fetch().text;if(t==="&"||t==="\\\\")i.consume();else if(t==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new Ot("Expected \\\\ or \\cr or \\end",i.nextToken)}for(var n=[],r=[n],s=0;s<e.length;s++){for(var a=e[s],o=z7(),l=0;l<a.length;l++)if(!U7(a[l]))o.body.push(a[l]);else{n.push(o),l+=1;var c=uP(a[l]).text,u=new Array(2);if(u[0]={type:"ordgroup",mode:"math",body:[]},u[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1))if("<>AV".indexOf(c)>-1)for(var h=0;h<2;h++){for(var d=!0,f=l+1;f<a.length;f++){if(kht(a[f],c)){d=!1,l=f;break}if(U7(a[f]))throw new Ot("Missing a "+c+" character to complete a CD arrow.",a[f]);u[h].body.push(a[f])}if(d)throw new Ot("Missing a "+c+" character to complete a CD arrow.",a[l])}else throw new Ot('Expected one of "<>AV=|." after @',a[l]);var m=Bht(c,u,i),A={type:"styling",body:[m],mode:"math",style:"display"};n.push(A),o=z7()}s%2===0?n.push(o):n.shift(),n=[],r.push(n)}i.gullet.endGroup(),i.gullet.endGroup();var _=new Array(r[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:r,arraystretch:1,addJot:!0,rowGaps:[null],cols:_,colSeparationType:"CD",hLinesBeforeRow:new Array(r.length+1).fill([])}}Zt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(i,e){var{parser:t,funcName:n}=i;return{type:"cdlabel",mode:t.mode,side:n.slice(4),label:e[0]}},htmlBuilder(i,e){var t=e.havingStyle(e.style.sup()),n=Xe.wrapFragment(Xi(i.label,t,e),e);return n.classes.push("cd-label-"+i.side),n.style.bottom=Gt(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(i,e){var t=new Dt.MathNode("mrow",[Dr(i.label,e)]);return t=new Dt.MathNode("mpadded",[t]),t.setAttribute("width","0"),i.side==="left"&&t.setAttribute("lspace","-1width"),t.setAttribute("voffset","0.7em"),t=new Dt.MathNode("mstyle",[t]),t.setAttribute("displaystyle","false"),t.setAttribute("scriptlevel","1"),t}});Zt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(i,e){var{parser:t}=i;return{type:"cdlabelparent",mode:t.mode,fragment:e[0]}},htmlBuilder(i,e){var t=Xe.wrapFragment(Xi(i.fragment,e),e);return t.classes.push("cd-vert-arrow"),t},mathmlBuilder(i,e){return new Dt.MathNode("mrow",[Dr(i.fragment,e)])}});Zt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(i,e){for(var{parser:t}=i,n=hi(e[0],"ordgroup"),r=n.body,s="",a=0;a<r.length;a++){var o=hi(r[a],"textord");s+=o.text}var l=parseInt(s),c;if(isNaN(l))throw new Ot("\\@char has non-numeric argument "+s);if(l<0||l>=1114111)throw new Ot("\\@char with invalid code point "+s);return l<=65535?c=String.fromCharCode(l):(l-=65536,c=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:t.mode,text:c}}});var yH=(i,e)=>{var t=Ea(i.body,e.withColor(i.color),!1);return Xe.makeFragment(t)},wH=(i,e)=>{var t=xl(i.body,e.withColor(i.color)),n=new Dt.MathNode("mstyle",t);return n.setAttribute("mathcolor",i.color),n};Zt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(i,e){var{parser:t}=i,n=hi(e[0],"color-token").color,r=e[1];return{type:"color",mode:t.mode,color:n,body:Qs(r)}},htmlBuilder:yH,mathmlBuilder:wH});Zt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(i,e){var{parser:t,breakOnTokenText:n}=i,r=hi(e[0],"color-token").color;t.gullet.macros.set("\\current@color",r);var s=t.parseExpression(!0,n);return{type:"color",mode:t.mode,color:r,body:s}},htmlBuilder:yH,mathmlBuilder:wH});Zt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(i,e,t){var{parser:n}=i,r=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,s=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:s,size:r&&hi(r,"size").value}},htmlBuilder(i,e){var t=Xe.makeSpan(["mspace"],[],e);return i.newLine&&(t.classes.push("newline"),i.size&&(t.style.marginTop=Gt(ds(i.size,e)))),t},mathmlBuilder(i,e){var t=new Dt.MathNode("mspace");return i.newLine&&(t.setAttribute("linebreak","newline"),i.size&&t.setAttribute("height",Gt(ds(i.size,e)))),t}});var uT={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},xH=i=>{var e=i.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new Ot("Expected a control sequence",i);return e},Dht=i=>{var e=i.gullet.popToken();return e.text==="="&&(e=i.gullet.popToken(),e.text===" "&&(e=i.gullet.popToken())),e},CH=(i,e,t,n)=>{var r=i.gullet.macros.get(t.text);r==null&&(t.noexpand=!0,r={tokens:[t],numArgs:0,unexpandable:!i.gullet.isExpandable(t.text)}),i.gullet.macros.set(e,r,n)};Zt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(i){var{parser:e,funcName:t}=i;e.consumeSpaces();var n=e.fetch();if(uT[n.text])return(t==="\\global"||t==="\\\\globallong")&&(n.text=uT[n.text]),hi(e.parseFunction(),"internal");throw new Ot("Invalid token after macro prefix",n)}});Zt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(i){var{parser:e,funcName:t}=i,n=e.gullet.popToken(),r=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(r))throw new Ot("Expected a control sequence",n);for(var s=0,a,o=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){a=e.gullet.future(),o[s].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new Ot('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==s+1)throw new Ot('Argument number "'+n.text+'" out of order');s++,o.push([])}else{if(n.text==="EOF")throw new Ot("Expected a macro definition");o[s].push(n.text)}var{tokens:l}=e.gullet.consumeArg();return a&&l.unshift(a),(t==="\\edef"||t==="\\xdef")&&(l=e.gullet.expandTokens(l),l.reverse()),e.gullet.macros.set(r,{tokens:l,numArgs:s,delimiters:o},t===uT[t]),{type:"internal",mode:e.mode}}});Zt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(i){var{parser:e,funcName:t}=i,n=xH(e.gullet.popToken());e.gullet.consumeSpaces();var r=Dht(e);return CH(e,n,r,t==="\\\\globallet"),{type:"internal",mode:e.mode}}});Zt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(i){var{parser:e,funcName:t}=i,n=xH(e.gullet.popToken()),r=e.gullet.popToken(),s=e.gullet.popToken();return CH(e,n,s,t==="\\\\globalfuture"),e.gullet.pushToken(s),e.gullet.pushToken(r),{type:"internal",mode:e.mode}}});var $A=function(e,t,n){var r=Ur.math[e]&&Ur.math[e].replace,s=sP(r||e,t,n);if(!s)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return s},dP=function(e,t,n,r){var s=n.havingBaseStyle(t),a=Xe.makeSpan(r.concat(s.sizingClasses(n)),[e],n),o=s.sizeMultiplier/n.sizeMultiplier;return a.height*=o,a.depth*=o,a.maxFontSize=s.sizeMultiplier,a},EH=function(e,t,n){var r=t.havingBaseStyle(n),s=(1-t.sizeMultiplier/r.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=Gt(s),e.height-=s,e.depth+=s},Lht=function(e,t,n,r,s,a){var o=Xe.makeSymbol(e,"Main-Regular",s,r),l=dP(o,t,r,a);return n&&EH(l,r,t),l},Oht=function(e,t,n,r){return Xe.makeSymbol(e,"Size"+t+"-Regular",n,r)},SH=function(e,t,n,r,s,a){var o=Oht(e,t,s,r),l=dP(Xe.makeSpan(["delimsizing","size"+t],[o],r),kn.TEXT,r,a);return n&&EH(l,r,kn.TEXT),l},c3=function(e,t,n){var r;t==="Size1-Regular"?r="delim-size1":r="delim-size4";var s=Xe.makeSpan(["delimsizinginner",r],[Xe.makeSpan([],[Xe.makeSymbol(e,t,n)])]);return{type:"elem",elem:s}},u3=function(e,t,n){var r=nh["Size4-Regular"][e.charCodeAt(0)]?nh["Size4-Regular"][e.charCodeAt(0)][4]:nh["Size1-Regular"][e.charCodeAt(0)][4],s=new Kf("inner",Hut(e,Math.round(1e3*t))),a=new Cd([s],{width:Gt(r),height:Gt(t),style:"width:"+Gt(r),viewBox:"0 0 "+1e3*r+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),o=Xe.makeSvgSpan([],[a],n);return o.height=t,o.style.height=Gt(t),o.style.width=Gt(r),{type:"elem",elem:o}},hT=.008,Sw={type:"kern",size:-1*hT},Nht=["|","\\lvert","\\rvert","\\vert"],Fht=["\\|","\\lVert","\\rVert","\\Vert"],MH=function(e,t,n,r,s,a){var o,l,c,u,h="",d=0;o=c=u=e,l=null;var f="Size1-Regular";e==="\\uparrow"?c=u="":e==="\\Uparrow"?c=u="":e==="\\downarrow"?o=c="":e==="\\Downarrow"?o=c="":e==="\\updownarrow"?(o="\\uparrow",c="",u="\\downarrow"):e==="\\Updownarrow"?(o="\\Uparrow",c="",u="\\Downarrow"):qn.contains(Nht,e)?(c="",h="vert",d=333):qn.contains(Fht,e)?(c="",h="doublevert",d=556):e==="["||e==="\\lbrack"?(o="",c="",u="",f="Size4-Regular",h="lbrack",d=667):e==="]"||e==="\\rbrack"?(o="",c="",u="",f="Size4-Regular",h="rbrack",d=667):e==="\\lfloor"||e===""?(c=o="",u="",f="Size4-Regular",h="lfloor",d=667):e==="\\lceil"||e===""?(o="",c=u="",f="Size4-Regular",h="lceil",d=667):e==="\\rfloor"||e===""?(c=o="",u="",f="Size4-Regular",h="rfloor",d=667):e==="\\rceil"||e===""?(o="",c=u="",f="Size4-Regular",h="rceil",d=667):e==="("||e==="\\lparen"?(o="",c="",u="",f="Size4-Regular",h="lparen",d=875):e===")"||e==="\\rparen"?(o="",c="",u="",f="Size4-Regular",h="rparen",d=875):e==="\\{"||e==="\\lbrace"?(o="",l="",u="",c="",f="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(o="",l="",u="",c="",f="Size4-Regular"):e==="\\lgroup"||e===""?(o="",u="",c="",f="Size4-Regular"):e==="\\rgroup"||e===""?(o="",u="",c="",f="Size4-Regular"):e==="\\lmoustache"||e===""?(o="",u="",c="",f="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(o="",u="",c="",f="Size4-Regular");var m=$A(o,f,s),A=m.height+m.depth,_=$A(c,f,s),v=_.height+_.depth,w=$A(u,f,s),x=w.height+w.depth,C=0,S=1;if(l!==null){var I=$A(l,f,s);C=I.height+I.depth,S=2}var P=A+x+C,k=Math.max(0,Math.ceil((t-P)/(S*v))),M=P+k*S*v,R=r.fontMetrics().axisHeight;n&&(R*=r.sizeMultiplier);var N=M/2-R,U=[];if(h.length>0){var q=M-A-x,W=Math.round(M*1e3),F=Gut(h,Math.round(q*1e3)),ue=new Kf(h,F),J=(d/1e3).toFixed(3)+"em",Y=(W/1e3).toFixed(3)+"em",Pe=new Cd([ue],{width:J,height:Y,viewBox:"0 0 "+d+" "+W}),Ie=Xe.makeSvgSpan([],[Pe],r);Ie.height=W/1e3,Ie.style.width=J,Ie.style.height=Y,U.push({type:"elem",elem:Ie})}else{if(U.push(c3(u,f,s)),U.push(Sw),l===null){var pe=M-A-x+2*hT;U.push(u3(c,pe,r))}else{var Ce=(M-A-x-C)/2+2*hT;U.push(u3(c,Ce,r)),U.push(Sw),U.push(c3(l,f,s)),U.push(Sw),U.push(u3(c,Ce,r))}U.push(Sw),U.push(c3(o,f,s))}var G=r.havingBaseStyle(kn.TEXT),oe=Xe.makeVList({positionType:"bottom",positionData:N,children:U},G);return dP(Xe.makeSpan(["delimsizing","mult"],[oe],G),kn.TEXT,r,a)},h3=80,d3=.08,f3=function(e,t,n,r,s){var a=Vut(e,r,n),o=new Kf(e,a),l=new Cd([o],{width:"400em",height:Gt(t),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return Xe.makeSvgSpan(["hide-tail"],[l],s)},zht=function(e,t){var n=t.havingBaseSizing(),r=kH("\\surd",e*n.sizeMultiplier,PH,n),s=n.sizeMultiplier,a=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),o,l=0,c=0,u=0,h;return r.type==="small"?(u=1e3+1e3*a+h3,e<1?s=1:e<1.4&&(s=.7),l=(1+a+d3)/s,c=(1+a)/s,o=f3("sqrtMain",l,u,a,t),o.style.minWidth="0.853em",h=.833/s):r.type==="large"?(u=(1e3+h3)*o1[r.size],c=(o1[r.size]+a)/s,l=(o1[r.size]+a+d3)/s,o=f3("sqrtSize"+r.size,l,u,a,t),o.style.minWidth="1.02em",h=1/s):(l=e+a+d3,c=e+a,u=Math.floor(1e3*e+a)+h3,o=f3("sqrtTall",l,u,a,t),o.style.minWidth="0.742em",h=1.056),o.height=c,o.style.height=Gt(l),{span:o,advanceWidth:h,ruleWidth:(t.fontMetrics().sqrtRuleThickness+a)*s}},TH=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],Uht=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],IH=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],o1=[0,1.2,1.8,2.4,3],Vht=function(e,t,n,r,s){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),qn.contains(TH,e)||qn.contains(IH,e))return SH(e,t,!1,n,r,s);if(qn.contains(Uht,e))return MH(e,o1[t],!1,n,r,s);throw new Ot("Illegal delimiter: '"+e+"'")},Hht=[{type:"small",style:kn.SCRIPTSCRIPT},{type:"small",style:kn.SCRIPT},{type:"small",style:kn.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Ght=[{type:"small",style:kn.SCRIPTSCRIPT},{type:"small",style:kn.SCRIPT},{type:"small",style:kn.TEXT},{type:"stack"}],PH=[{type:"small",style:kn.SCRIPTSCRIPT},{type:"small",style:kn.SCRIPT},{type:"small",style:kn.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Qht=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},kH=function(e,t,n,r){for(var s=Math.min(2,3-r.style.size),a=s;a<n.length&&n[a].type!=="stack";a++){var o=$A(e,Qht(n[a]),"math"),l=o.height+o.depth;if(n[a].type==="small"){var c=r.havingBaseStyle(n[a].style);l*=c.sizeMultiplier}if(l>t)return n[a]}return n[n.length-1]},BH=function(e,t,n,r,s,a){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var o;qn.contains(IH,e)?o=Hht:qn.contains(TH,e)?o=PH:o=Ght;var l=kH(e,t,o,r);return l.type==="small"?Lht(e,l.style,n,r,s,a):l.type==="large"?SH(e,l.size,n,r,s,a):MH(e,t,n,r,s,a)},qht=function(e,t,n,r,s,a){var o=r.fontMetrics().axisHeight*r.sizeMultiplier,l=901,c=5/r.fontMetrics().ptPerEm,u=Math.max(t-o,n+o),h=Math.max(u/500*l,2*u-c);return BH(e,h,!0,r,s,a)},Ad={sqrtImage:zht,sizedDelim:Vht,sizeToMaxHeight:o1,customSizedDelim:BH,leftRightDelim:qht},V7={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},jht=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function fE(i,e){var t=hE(i);if(t&&qn.contains(jht,t.text))return t;throw t?new Ot("Invalid delimiter '"+t.text+"' after '"+e.funcName+"'",i):new Ot("Invalid delimiter type '"+i.type+"'",i)}Zt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(i,e)=>{var t=fE(e[0],i);return{type:"delimsizing",mode:i.parser.mode,size:V7[i.funcName].size,mclass:V7[i.funcName].mclass,delim:t.text}},htmlBuilder:(i,e)=>i.delim==="."?Xe.makeSpan([i.mclass]):Ad.sizedDelim(i.delim,i.size,e,i.mode,[i.mclass]),mathmlBuilder:i=>{var e=[];i.delim!=="."&&e.push(Oc(i.delim,i.mode));var t=new Dt.MathNode("mo",e);i.mclass==="mopen"||i.mclass==="mclose"?t.setAttribute("fence","true"):t.setAttribute("fence","false"),t.setAttribute("stretchy","true");var n=Gt(Ad.sizeToMaxHeight[i.size]);return t.setAttribute("minsize",n),t.setAttribute("maxsize",n),t}});function H7(i){if(!i.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Zt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(i,e)=>{var t=i.parser.gullet.macros.get("\\current@color");if(t&&typeof t!="string")throw new Ot("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:i.parser.mode,delim:fE(e[0],i).text,color:t}}});Zt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(i,e)=>{var t=fE(e[0],i),n=i.parser;++n.leftrightDepth;var r=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var s=hi(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:r,left:t.text,right:s.delim,rightColor:s.color}},htmlBuilder:(i,e)=>{H7(i);for(var t=Ea(i.body,e,!0,["mopen","mclose"]),n=0,r=0,s=!1,a=0;a<t.length;a++)t[a].isMiddle?s=!0:(n=Math.max(t[a].height,n),r=Math.max(t[a].depth,r));n*=e.sizeMultiplier,r*=e.sizeMultiplier;var o;if(i.left==="."?o=V1(e,["mopen"]):o=Ad.leftRightDelim(i.left,n,r,e,i.mode,["mopen"]),t.unshift(o),s)for(var l=1;l<t.length;l++){var c=t[l],u=c.isMiddle;u&&(t[l]=Ad.leftRightDelim(u.delim,n,r,u.options,i.mode,[]))}var h;if(i.right===".")h=V1(e,["mclose"]);else{var d=i.rightColor?e.withColor(i.rightColor):e;h=Ad.leftRightDelim(i.right,n,r,d,i.mode,["mclose"])}return t.push(h),Xe.makeSpan(["minner"],t,e)},mathmlBuilder:(i,e)=>{H7(i);var t=xl(i.body,e);if(i.left!=="."){var n=new Dt.MathNode("mo",[Oc(i.left,i.mode)]);n.setAttribute("fence","true"),t.unshift(n)}if(i.right!=="."){var r=new Dt.MathNode("mo",[Oc(i.right,i.mode)]);r.setAttribute("fence","true"),i.rightColor&&r.setAttribute("mathcolor",i.rightColor),t.push(r)}return lP(t)}});Zt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(i,e)=>{var t=fE(e[0],i);if(!i.parser.leftrightDepth)throw new Ot("\\middle without preceding \\left",t);return{type:"middle",mode:i.parser.mode,delim:t.text}},htmlBuilder:(i,e)=>{var t;if(i.delim===".")t=V1(e,[]);else{t=Ad.sizedDelim(i.delim,1,e,i.mode,[]);var n={delim:i.delim,options:e};t.isMiddle=n}return t},mathmlBuilder:(i,e)=>{var t=i.delim==="\\vert"||i.delim==="|"?Oc("|","text"):Oc(i.delim,i.mode),n=new Dt.MathNode("mo",[t]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var fP=(i,e)=>{var t=Xe.wrapFragment(Xi(i.body,e),e),n=i.label.slice(1),r=e.sizeMultiplier,s,a=0,o=qn.isCharacterBox(i.body);if(n==="sout")s=Xe.makeSpan(["stretchy","sout"]),s.height=e.fontMetrics().defaultRuleThickness/r,a=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var l=ds({number:.6,unit:"pt"},e),c=ds({number:.35,unit:"ex"},e),u=e.havingBaseSizing();r=r/u.sizeMultiplier;var h=t.height+t.depth+l+c;t.style.paddingLeft=Gt(h/2+l);var d=Math.floor(1e3*h*r),f=zut(d),m=new Cd([new Kf("phase",f)],{width:"400em",height:Gt(d/1e3),viewBox:"0 0 400000 "+d,preserveAspectRatio:"xMinYMin slice"});s=Xe.makeSvgSpan(["hide-tail"],[m],e),s.style.height=Gt(h),a=t.depth+l+c}else{/cancel/.test(n)?o||t.classes.push("cancel-pad"):n==="angl"?t.classes.push("anglpad"):t.classes.push("boxpad");var A=0,_=0,v=0;/box/.test(n)?(v=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),A=e.fontMetrics().fboxsep+(n==="colorbox"?0:v),_=A):n==="angl"?(v=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),A=4*v,_=Math.max(0,.25-t.depth)):(A=o?.2:0,_=A),s=Sd.encloseSpan(t,n,A,_,e),/fbox|boxed|fcolorbox/.test(n)?(s.style.borderStyle="solid",s.style.borderWidth=Gt(v)):n==="angl"&&v!==.049&&(s.style.borderTopWidth=Gt(v),s.style.borderRightWidth=Gt(v)),a=t.depth+_,i.backgroundColor&&(s.style.backgroundColor=i.backgroundColor,i.borderColor&&(s.style.borderColor=i.borderColor))}var w;if(i.backgroundColor)w=Xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:a},{type:"elem",elem:t,shift:0}]},e);else{var x=/cancel|phase/.test(n)?["svg-align"]:[];w=Xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:t,shift:0},{type:"elem",elem:s,shift:a,wrapperClasses:x}]},e)}return/cancel/.test(n)&&(w.height=t.height,w.depth=t.depth),/cancel/.test(n)&&!o?Xe.makeSpan(["mord","cancel-lap"],[w],e):Xe.makeSpan(["mord"],[w],e)},pP=(i,e)=>{var t=0,n=new Dt.MathNode(i.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Dr(i.body,e)]);switch(i.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(t=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*t+"pt"),n.setAttribute("height","+"+2*t+"pt"),n.setAttribute("lspace",t+"pt"),n.setAttribute("voffset",t+"pt"),i.label==="\\fcolorbox"){var r=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+r+"em solid "+String(i.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return i.backgroundColor&&n.setAttribute("mathbackground",i.backgroundColor),n};Zt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(i,e,t){var{parser:n,funcName:r}=i,s=hi(e[0],"color-token").color,a=e[1];return{type:"enclose",mode:n.mode,label:r,backgroundColor:s,body:a}},htmlBuilder:fP,mathmlBuilder:pP});Zt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(i,e,t){var{parser:n,funcName:r}=i,s=hi(e[0],"color-token").color,a=hi(e[1],"color-token").color,o=e[2];return{type:"enclose",mode:n.mode,label:r,backgroundColor:a,borderColor:s,body:o}},htmlBuilder:fP,mathmlBuilder:pP});Zt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(i,e){var{parser:t}=i;return{type:"enclose",mode:t.mode,label:"\\fbox",body:e[0]}}});Zt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(i,e){var{parser:t,funcName:n}=i,r=e[0];return{type:"enclose",mode:t.mode,label:n,body:r}},htmlBuilder:fP,mathmlBuilder:pP});Zt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(i,e){var{parser:t}=i;return{type:"enclose",mode:t.mode,label:"\\angl",body:e[0]}}});var RH={};function xh(i){for(var{type:e,names:t,props:n,handler:r,htmlBuilder:s,mathmlBuilder:a}=i,o={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:r},l=0;l<t.length;++l)RH[t[l]]=o;s&&(Qx[e]=s),a&&(qx[e]=a)}var DH={};function Z(i,e){DH[i]=e}function G7(i){var e=[];i.consumeSpaces();var t=i.fetch().text;for(t==="\\relax"&&(i.consume(),i.consumeSpaces(),t=i.fetch().text);t==="\\hline"||t==="\\hdashline";)i.consume(),e.push(t==="\\hdashline"),i.consumeSpaces(),t=i.fetch().text;return e}var pE=i=>{var e=i.parser.settings;if(!e.displayMode)throw new Ot("{"+i.envName+"} can be used only in display mode.")};function mP(i){if(i.indexOf("ed")===-1)return i.indexOf("*")===-1}function fp(i,e,t){var{hskipBeforeAndAfter:n,addJot:r,cols:s,arraystretch:a,colSeparationType:o,autoTag:l,singleRow:c,emptySingleRow:u,maxNumCols:h,leqno:d}=e;if(i.gullet.beginGroup(),c||i.gullet.macros.set("\\cr","\\\\\\relax"),!a){var f=i.gullet.expandMacroAsText("\\arraystretch");if(f==null)a=1;else if(a=parseFloat(f),!a||a<0)throw new Ot("Invalid \\arraystretch: "+f)}i.gullet.beginGroup();var m=[],A=[m],_=[],v=[],w=l!=null?[]:void 0;function x(){l&&i.gullet.macros.set("\\@eqnsw","1",!0)}function C(){w&&(i.gullet.macros.get("\\df@tag")?(w.push(i.subparse([new uh("\\df@tag")])),i.gullet.macros.set("\\df@tag",void 0,!0)):w.push(!!l&&i.gullet.macros.get("\\@eqnsw")==="1"))}for(x(),v.push(G7(i));;){var S=i.parseExpression(!1,c?"\\end":"\\\\");i.gullet.endGroup(),i.gullet.beginGroup(),S={type:"ordgroup",mode:i.mode,body:S},t&&(S={type:"styling",mode:i.mode,style:t,body:[S]}),m.push(S);var I=i.fetch().text;if(I==="&"){if(h&&m.length===h){if(c||o)throw new Ot("Too many tab characters: &",i.nextToken);i.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}i.consume()}else if(I==="\\end"){C(),m.length===1&&S.type==="styling"&&S.body[0].body.length===0&&(A.length>1||!u)&&A.pop(),v.length<A.length+1&&v.push([]);break}else if(I==="\\\\"){i.consume();var P=void 0;i.gullet.future().text!==" "&&(P=i.parseSizeGroup(!0)),_.push(P?P.value:null),C(),v.push(G7(i)),m=[],A.push(m),x()}else throw new Ot("Expected & or \\\\ or \\cr or \\end",i.nextToken)}return i.gullet.endGroup(),i.gullet.endGroup(),{type:"array",mode:i.mode,addJot:r,arraystretch:a,body:A,cols:s,rowGaps:_,hskipBeforeAndAfter:n,hLinesBeforeRow:v,colSeparationType:o,tags:w,leqno:d}}function gP(i){return i.slice(0,1)==="d"?"display":"text"}var Ch=function(e,t){var n,r,s=e.body.length,a=e.hLinesBeforeRow,o=0,l=new Array(s),c=[],u=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),h=1/t.fontMetrics().ptPerEm,d=5*h;if(e.colSeparationType&&e.colSeparationType==="small"){var f=t.havingStyle(kn.SCRIPT).sizeMultiplier;d=.2778*(f/t.sizeMultiplier)}var m=e.colSeparationType==="CD"?ds({number:3,unit:"ex"},t):12*h,A=3*h,_=e.arraystretch*m,v=.7*_,w=.3*_,x=0;function C(nt){for(var ze=0;ze<nt.length;++ze)ze>0&&(x+=.25),c.push({pos:x,isDashed:nt[ze]})}for(C(a[0]),n=0;n<e.body.length;++n){var S=e.body[n],I=v,P=w;o<S.length&&(o=S.length);var k=new Array(S.length);for(r=0;r<S.length;++r){var M=Xi(S[r],t);P<M.depth&&(P=M.depth),I<M.height&&(I=M.height),k[r]=M}var R=e.rowGaps[n],N=0;R&&(N=ds(R,t),N>0&&(N+=w,P<N&&(P=N),N=0)),e.addJot&&(P+=A),k.height=I,k.depth=P,x+=I,k.pos=x,x+=P+N,l[n]=k,C(a[n+1])}var U=x/2+t.fontMetrics().axisHeight,q=e.cols||[],W=[],F,ue,J=[];if(e.tags&&e.tags.some(nt=>nt))for(n=0;n<s;++n){var Y=l[n],Pe=Y.pos-U,Ie=e.tags[n],pe=void 0;Ie===!0?pe=Xe.makeSpan(["eqn-num"],[],t):Ie===!1?pe=Xe.makeSpan([],[],t):pe=Xe.makeSpan([],Ea(Ie,t,!0),t),pe.depth=Y.depth,pe.height=Y.height,J.push({type:"elem",elem:pe,shift:Pe})}for(r=0,ue=0;r<o||ue<q.length;++r,++ue){for(var Ce=q[ue]||{},G=!0;Ce.type==="separator";){if(G||(F=Xe.makeSpan(["arraycolsep"],[]),F.style.width=Gt(t.fontMetrics().doubleRuleSep),W.push(F)),Ce.separator==="|"||Ce.separator===":"){var oe=Ce.separator==="|"?"solid":"dashed",je=Xe.makeSpan(["vertical-separator"],[],t);je.style.height=Gt(x),je.style.borderRightWidth=Gt(u),je.style.borderRightStyle=oe,je.style.margin="0 "+Gt(-u/2);var Tt=x-U;Tt&&(je.style.verticalAlign=Gt(-Tt)),W.push(je)}else throw new Ot("Invalid separator type: "+Ce.separator);ue++,Ce=q[ue]||{},G=!1}if(!(r>=o)){var rt=void 0;(r>0||e.hskipBeforeAndAfter)&&(rt=qn.deflt(Ce.pregap,d),rt!==0&&(F=Xe.makeSpan(["arraycolsep"],[]),F.style.width=Gt(rt),W.push(F)));var De=[];for(n=0;n<s;++n){var xt=l[n],mt=xt[r];if(mt){var et=xt.pos-U;mt.depth=xt.depth,mt.height=xt.height,De.push({type:"elem",elem:mt,shift:et})}}De=Xe.makeVList({positionType:"individualShift",children:De},t),De=Xe.makeSpan(["col-align-"+(Ce.align||"c")],[De]),W.push(De),(r<o-1||e.hskipBeforeAndAfter)&&(rt=qn.deflt(Ce.postgap,d),rt!==0&&(F=Xe.makeSpan(["arraycolsep"],[]),F.style.width=Gt(rt),W.push(F)))}}if(l=Xe.makeSpan(["mtable"],W),c.length>0){for(var st=Xe.makeLineSpan("hline",t,u),ce=Xe.makeLineSpan("hdashline",t,u),tt=[{type:"elem",elem:l,shift:0}];c.length>0;){var he=c.pop(),be=he.pos-U;he.isDashed?tt.push({type:"elem",elem:ce,shift:be}):tt.push({type:"elem",elem:st,shift:be})}l=Xe.makeVList({positionType:"individualShift",children:tt},t)}if(J.length===0)return Xe.makeSpan(["mord"],[l],t);var Ne=Xe.makeVList({positionType:"individualShift",children:J},t);return Ne=Xe.makeSpan(["tag"],[Ne],t),Xe.makeFragment([l,Ne])},Wht={c:"center ",l:"left ",r:"right "},Eh=function(e,t){for(var n=[],r=new Dt.MathNode("mtd",[],["mtr-glue"]),s=new Dt.MathNode("mtd",[],["mml-eqn-num"]),a=0;a<e.body.length;a++){for(var o=e.body[a],l=[],c=0;c<o.length;c++)l.push(new Dt.MathNode("mtd",[Dr(o[c],t)]));e.tags&&e.tags[a]&&(l.unshift(r),l.push(r),e.leqno?l.unshift(s):l.push(s)),n.push(new Dt.MathNode("mtr",l))}var u=new Dt.MathNode("mtable",n),h=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);u.setAttribute("rowspacing",Gt(h));var d="",f="";if(e.cols&&e.cols.length>0){var m=e.cols,A="",_=!1,v=0,w=m.length;m[0].type==="separator"&&(d+="top ",v=1),m[m.length-1].type==="separator"&&(d+="bottom ",w-=1);for(var x=v;x<w;x++)m[x].type==="align"?(f+=Wht[m[x].align],_&&(A+="none "),_=!0):m[x].type==="separator"&&_&&(A+=m[x].separator==="|"?"solid ":"dashed ",_=!1);u.setAttribute("columnalign",f.trim()),/[sd]/.test(A)&&u.setAttribute("columnlines",A.trim())}if(e.colSeparationType==="align"){for(var C=e.cols||[],S="",I=1;I<C.length;I++)S+=I%2?"0em ":"1em ";u.setAttribute("columnspacing",S.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?u.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?u.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?u.setAttribute("columnspacing","0.5em"):u.setAttribute("columnspacing","1em");var P="",k=e.hLinesBeforeRow;d+=k[0].length>0?"left ":"",d+=k[k.length-1].length>0?"right ":"";for(var M=1;M<k.length-1;M++)P+=k[M].length===0?"none ":k[M][0]?"dashed ":"solid ";return/[sd]/.test(P)&&u.setAttribute("rowlines",P.trim()),d!==""&&(u=new Dt.MathNode("menclose",[u]),u.setAttribute("notation",d.trim())),e.arraystretch&&e.arraystretch<1&&(u=new Dt.MathNode("mstyle",[u]),u.setAttribute("scriptlevel","1")),u},LH=function(e,t){e.envName.indexOf("ed")===-1&&pE(e);var n=[],r=e.envName.indexOf("at")>-1?"alignat":"align",s=e.envName==="split",a=fp(e.parser,{cols:n,addJot:!0,autoTag:s?void 0:mP(e.envName),emptySingleRow:!0,colSeparationType:r,maxNumCols:s?2:void 0,leqno:e.parser.settings.leqno},"display"),o,l=0,c={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&t[0].type==="ordgroup"){for(var u="",h=0;h<t[0].body.length;h++){var d=hi(t[0].body[h],"textord");u+=d.text}o=Number(u),l=o*2}var f=!l;a.body.forEach(function(v){for(var w=1;w<v.length;w+=2){var x=hi(v[w],"styling"),C=hi(x.body[0],"ordgroup");C.body.unshift(c)}if(f)l<v.length&&(l=v.length);else{var S=v.length/2;if(o<S)throw new Ot("Too many math in a row: "+("expected "+o+", but got "+S),v[0])}});for(var m=0;m<l;++m){var A="r",_=0;m%2===1?A="l":m>0&&f&&(_=1),n[m]={type:"align",align:A,pregap:_,postgap:0}}return a.colSeparationType=f?"align":"alignat",a};xh({type:"array",names:["array","darray"],props:{numArgs:1},handler(i,e){var t=hE(e[0]),n=t?[e[0]]:hi(e[0],"ordgroup").body,r=n.map(function(a){var o=uP(a),l=o.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new Ot("Unknown column alignment: "+l,a)}),s={cols:r,hskipBeforeAndAfter:!0,maxNumCols:r.length};return fp(i.parser,s,gP(i.envName))},htmlBuilder:Ch,mathmlBuilder:Eh});xh({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(i){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[i.envName.replace("*","")],t="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:t}]};if(i.envName.charAt(i.envName.length-1)==="*"){var r=i.parser;if(r.consumeSpaces(),r.fetch().text==="["){if(r.consume(),r.consumeSpaces(),t=r.fetch().text,"lcr".indexOf(t)===-1)throw new Ot("Expected l or c or r",r.nextToken);r.consume(),r.consumeSpaces(),r.expect("]"),r.consume(),n.cols=[{type:"align",align:t}]}}var s=fp(i.parser,n,gP(i.envName)),a=Math.max(0,...s.body.map(o=>o.length));return s.cols=new Array(a).fill({type:"align",align:t}),e?{type:"leftright",mode:i.mode,body:[s],left:e[0],right:e[1],rightColor:void 0}:s},htmlBuilder:Ch,mathmlBuilder:Eh});xh({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(i){var e={arraystretch:.5},t=fp(i.parser,e,"script");return t.colSeparationType="small",t},htmlBuilder:Ch,mathmlBuilder:Eh});xh({type:"array",names:["subarray"],props:{numArgs:1},handler(i,e){var t=hE(e[0]),n=t?[e[0]]:hi(e[0],"ordgroup").body,r=n.map(function(a){var o=uP(a),l=o.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new Ot("Unknown column alignment: "+l,a)});if(r.length>1)throw new Ot("{subarray} can contain only one column");var s={cols:r,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=fp(i.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new Ot("{subarray} can contain only one column");return s},htmlBuilder:Ch,mathmlBuilder:Eh});xh({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(i){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},t=fp(i.parser,e,gP(i.envName));return{type:"leftright",mode:i.mode,body:[t],left:i.envName.indexOf("r")>-1?".":"\\{",right:i.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Ch,mathmlBuilder:Eh});xh({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:LH,htmlBuilder:Ch,mathmlBuilder:Eh});xh({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(i){qn.contains(["gather","gather*"],i.envName)&&pE(i);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:mP(i.envName),emptySingleRow:!0,leqno:i.parser.settings.leqno};return fp(i.parser,e,"display")},htmlBuilder:Ch,mathmlBuilder:Eh});xh({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:LH,htmlBuilder:Ch,mathmlBuilder:Eh});xh({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(i){pE(i);var e={autoTag:mP(i.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:i.parser.settings.leqno};return fp(i.parser,e,"display")},htmlBuilder:Ch,mathmlBuilder:Eh});xh({type:"array",names:["CD"],props:{numArgs:0},handler(i){return pE(i),Rht(i.parser)},htmlBuilder:Ch,mathmlBuilder:Eh});Z("\\nonumber","\\gdef\\@eqnsw{0}");Z("\\notag","\\nonumber");Zt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(i,e){throw new Ot(i.funcName+" valid only within array environment")}});var Q7=RH;Zt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(i,e){var{parser:t,funcName:n}=i,r=e[0];if(r.type!=="ordgroup")throw new Ot("Invalid environment name",r);for(var s="",a=0;a<r.body.length;++a)s+=hi(r.body[a],"textord").text;if(n==="\\begin"){if(!Q7.hasOwnProperty(s))throw new Ot("No such environment: "+s,r);var o=Q7[s],{args:l,optArgs:c}=t.parseArguments("\\begin{"+s+"}",o),u={mode:t.mode,envName:s,parser:t},h=o.handler(u,l,c);t.expect("\\end",!1);var d=t.nextToken,f=hi(t.parseFunction(),"environment");if(f.name!==s)throw new Ot("Mismatch: \\begin{"+s+"} matched by \\end{"+f.name+"}",d);return h}return{type:"environment",mode:t.mode,name:s,nameGroup:r}}});var OH=(i,e)=>{var t=i.font,n=e.withFont(t);return Xi(i.body,n)},NH=(i,e)=>{var t=i.font,n=e.withFont(t);return Dr(i.body,n)},q7={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Zt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=jx(e[0]),s=n;return s in q7&&(s=q7[s]),{type:"font",mode:t.mode,font:s.slice(1),body:r}},htmlBuilder:OH,mathmlBuilder:NH});Zt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(i,e)=>{var{parser:t}=i,n=e[0],r=qn.isCharacterBox(n);return{type:"mclass",mode:t.mode,mclass:dE(n),body:[{type:"font",mode:t.mode,font:"boldsymbol",body:n}],isCharacterBox:r}}});Zt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(i,e)=>{var{parser:t,funcName:n,breakOnTokenText:r}=i,{mode:s}=t,a=t.parseExpression(!0,r),o="math"+n.slice(1);return{type:"font",mode:s,font:o,body:{type:"ordgroup",mode:t.mode,body:a}}},htmlBuilder:OH,mathmlBuilder:NH});var FH=(i,e)=>{var t=e;return i==="display"?t=t.id>=kn.SCRIPT.id?t.text():kn.DISPLAY:i==="text"&&t.size===kn.DISPLAY.size?t=kn.TEXT:i==="script"?t=kn.SCRIPT:i==="scriptscript"&&(t=kn.SCRIPTSCRIPT),t},vP=(i,e)=>{var t=FH(i.size,e.style),n=t.fracNum(),r=t.fracDen(),s;s=e.havingStyle(n);var a=Xi(i.numer,s,e);if(i.continued){var o=8.5/e.fontMetrics().ptPerEm,l=3.5/e.fontMetrics().ptPerEm;a.height=a.height<o?o:a.height,a.depth=a.depth<l?l:a.depth}s=e.havingStyle(r);var c=Xi(i.denom,s,e),u,h,d;i.hasBarLine?(i.barSize?(h=ds(i.barSize,e),u=Xe.makeLineSpan("frac-line",e,h)):u=Xe.makeLineSpan("frac-line",e),h=u.height,d=u.height):(u=null,h=0,d=e.fontMetrics().defaultRuleThickness);var f,m,A;t.size===kn.DISPLAY.size||i.size==="display"?(f=e.fontMetrics().num1,h>0?m=3*d:m=7*d,A=e.fontMetrics().denom1):(h>0?(f=e.fontMetrics().num2,m=d):(f=e.fontMetrics().num3,m=3*d),A=e.fontMetrics().denom2);var _;if(u){var w=e.fontMetrics().axisHeight;f-a.depth-(w+.5*h)<m&&(f+=m-(f-a.depth-(w+.5*h))),w-.5*h-(c.height-A)<m&&(A+=m-(w-.5*h-(c.height-A)));var x=-(w-.5*h);_=Xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:A},{type:"elem",elem:u,shift:x},{type:"elem",elem:a,shift:-f}]},e)}else{var v=f-a.depth-(c.height-A);v<m&&(f+=.5*(m-v),A+=.5*(m-v)),_=Xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:A},{type:"elem",elem:a,shift:-f}]},e)}s=e.havingStyle(t),_.height*=s.sizeMultiplier/e.sizeMultiplier,_.depth*=s.sizeMultiplier/e.sizeMultiplier;var C;t.size===kn.DISPLAY.size?C=e.fontMetrics().delim1:t.size===kn.SCRIPTSCRIPT.size?C=e.havingStyle(kn.SCRIPT).fontMetrics().delim2:C=e.fontMetrics().delim2;var S,I;return i.leftDelim==null?S=V1(e,["mopen"]):S=Ad.customSizedDelim(i.leftDelim,C,!0,e.havingStyle(t),i.mode,["mopen"]),i.continued?I=Xe.makeSpan([]):i.rightDelim==null?I=V1(e,["mclose"]):I=Ad.customSizedDelim(i.rightDelim,C,!0,e.havingStyle(t),i.mode,["mclose"]),Xe.makeSpan(["mord"].concat(s.sizingClasses(e)),[S,Xe.makeSpan(["mfrac"],[_]),I],e)},AP=(i,e)=>{var t=new Dt.MathNode("mfrac",[Dr(i.numer,e),Dr(i.denom,e)]);if(!i.hasBarLine)t.setAttribute("linethickness","0px");else if(i.barSize){var n=ds(i.barSize,e);t.setAttribute("linethickness",Gt(n))}var r=FH(i.size,e.style);if(r.size!==e.style.size){t=new Dt.MathNode("mstyle",[t]);var s=r.size===kn.DISPLAY.size?"true":"false";t.setAttribute("displaystyle",s),t.setAttribute("scriptlevel","0")}if(i.leftDelim!=null||i.rightDelim!=null){var a=[];if(i.leftDelim!=null){var o=new Dt.MathNode("mo",[new Dt.TextNode(i.leftDelim.replace("\\",""))]);o.setAttribute("fence","true"),a.push(o)}if(a.push(t),i.rightDelim!=null){var l=new Dt.MathNode("mo",[new Dt.TextNode(i.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),a.push(l)}return lP(a)}return t};Zt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=e[0],s=e[1],a,o=null,l=null,c="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":a=!0;break;case"\\\\atopfrac":a=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":a=!1,o="(",l=")";break;case"\\\\bracefrac":a=!1,o="\\{",l="\\}";break;case"\\\\brackfrac":a=!1,o="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text";break}return{type:"genfrac",mode:t.mode,continued:!1,numer:r,denom:s,hasBarLine:a,leftDelim:o,rightDelim:l,size:c,barSize:null}},htmlBuilder:vP,mathmlBuilder:AP});Zt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=e[0],s=e[1];return{type:"genfrac",mode:t.mode,continued:!0,numer:r,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Zt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(i){var{parser:e,funcName:t,token:n}=i,r;switch(t){case"\\over":r="\\frac";break;case"\\choose":r="\\binom";break;case"\\atop":r="\\\\atopfrac";break;case"\\brace":r="\\\\bracefrac";break;case"\\brack":r="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:r,token:n}}});var j7=["display","text","script","scriptscript"],W7=function(e){var t=null;return e.length>0&&(t=e,t=t==="."?null:t),t};Zt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(i,e){var{parser:t}=i,n=e[4],r=e[5],s=jx(e[0]),a=s.type==="atom"&&s.family==="open"?W7(s.text):null,o=jx(e[1]),l=o.type==="atom"&&o.family==="close"?W7(o.text):null,c=hi(e[2],"size"),u,h=null;c.isBlank?u=!0:(h=c.value,u=h.number>0);var d="auto",f=e[3];if(f.type==="ordgroup"){if(f.body.length>0){var m=hi(f.body[0],"textord");d=j7[Number(m.text)]}}else f=hi(f,"textord"),d=j7[Number(f.text)];return{type:"genfrac",mode:t.mode,numer:n,denom:r,continued:!1,hasBarLine:u,barSize:h,leftDelim:a,rightDelim:l,size:d}},htmlBuilder:vP,mathmlBuilder:AP});Zt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(i,e){var{parser:t,funcName:n,token:r}=i;return{type:"infix",mode:t.mode,replaceWith:"\\\\abovefrac",size:hi(e[0],"size").value,token:r}}});Zt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=e[0],s=Cut(hi(e[1],"infix").size),a=e[2],o=s.number>0;return{type:"genfrac",mode:t.mode,numer:r,denom:a,continued:!1,hasBarLine:o,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:vP,mathmlBuilder:AP});var zH=(i,e)=>{var t=e.style,n,r;i.type==="supsub"?(n=i.sup?Xi(i.sup,e.havingStyle(t.sup()),e):Xi(i.sub,e.havingStyle(t.sub()),e),r=hi(i.base,"horizBrace")):r=hi(i,"horizBrace");var s=Xi(r.base,e.havingBaseStyle(kn.DISPLAY)),a=Sd.svgSpan(r,e),o;if(r.isOver?(o=Xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:a}]},e),o.children[0].children[0].children[1].classes.push("svg-align")):(o=Xe.makeVList({positionType:"bottom",positionData:s.depth+.1+a.height,children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:s}]},e),o.children[0].children[0].children[0].classes.push("svg-align")),n){var l=Xe.makeSpan(["mord",r.isOver?"mover":"munder"],[o],e);r.isOver?o=Xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:n}]},e):o=Xe.makeVList({positionType:"bottom",positionData:l.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:l}]},e)}return Xe.makeSpan(["mord",r.isOver?"mover":"munder"],[o],e)},$ht=(i,e)=>{var t=Sd.mathMLnode(i.label);return new Dt.MathNode(i.isOver?"mover":"munder",[Dr(i.base,e),t])};Zt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(i,e){var{parser:t,funcName:n}=i;return{type:"horizBrace",mode:t.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:zH,mathmlBuilder:$ht});Zt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,n=e[1],r=hi(e[0],"url").url;return t.settings.isTrusted({command:"\\href",url:r})?{type:"href",mode:t.mode,href:r,body:Qs(n)}:t.formatUnsupportedCmd("\\href")},htmlBuilder:(i,e)=>{var t=Ea(i.body,e,!1);return Xe.makeAnchor(i.href,[],t,e)},mathmlBuilder:(i,e)=>{var t=Jf(i.body,e);return t instanceof Ec||(t=new Ec("mrow",[t])),t.setAttribute("href",i.href),t}});Zt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,n=hi(e[0],"url").url;if(!t.settings.isTrusted({command:"\\url",url:n}))return t.formatUnsupportedCmd("\\url");for(var r=[],s=0;s<n.length;s++){var a=n[s];a==="~"&&(a="\\textasciitilde"),r.push({type:"textord",mode:"text",text:a})}var o={type:"text",mode:t.mode,font:"\\texttt",body:r};return{type:"href",mode:t.mode,href:n,body:Qs(o)}}});Zt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(i,e){var{parser:t}=i;return{type:"hbox",mode:t.mode,body:Qs(e[0])}},htmlBuilder(i,e){var t=Ea(i.body,e,!1);return Xe.makeFragment(t)},mathmlBuilder(i,e){return new Dt.MathNode("mrow",xl(i.body,e))}});Zt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(i,e)=>{var{parser:t,funcName:n,token:r}=i,s=hi(e[0],"raw").string,a=e[1];t.settings.strict&&t.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var o,l={};switch(n){case"\\htmlClass":l.class=s,o={command:"\\htmlClass",class:s};break;case"\\htmlId":l.id=s,o={command:"\\htmlId",id:s};break;case"\\htmlStyle":l.style=s,o={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var c=s.split(","),u=0;u<c.length;u++){var h=c[u].split("=");if(h.length!==2)throw new Ot("Error parsing key-value for \\htmlData");l["data-"+h[0].trim()]=h[1].trim()}o={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return t.settings.isTrusted(o)?{type:"html",mode:t.mode,attributes:l,body:Qs(a)}:t.formatUnsupportedCmd(n)},htmlBuilder:(i,e)=>{var t=Ea(i.body,e,!1),n=["enclosing"];i.attributes.class&&n.push(...i.attributes.class.trim().split(/\s+/));var r=Xe.makeSpan(n,t,e);for(var s in i.attributes)s!=="class"&&i.attributes.hasOwnProperty(s)&&r.setAttribute(s,i.attributes[s]);return r},mathmlBuilder:(i,e)=>Jf(i.body,e)});Zt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(i,e)=>{var{parser:t}=i;return{type:"htmlmathml",mode:t.mode,html:Qs(e[0]),mathml:Qs(e[1])}},htmlBuilder:(i,e)=>{var t=Ea(i.html,e,!1);return Xe.makeFragment(t)},mathmlBuilder:(i,e)=>Jf(i.mathml,e)});var p3=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new Ot("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(t[1]+t[2]),unit:t[3]};if(!rH(n))throw new Ot("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};Zt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(i,e,t)=>{var{parser:n}=i,r={number:0,unit:"em"},s={number:.9,unit:"em"},a={number:0,unit:"em"},o="";if(t[0])for(var l=hi(t[0],"raw").string,c=l.split(","),u=0;u<c.length;u++){var h=c[u].split("=");if(h.length===2){var d=h[1].trim();switch(h[0].trim()){case"alt":o=d;break;case"width":r=p3(d);break;case"height":s=p3(d);break;case"totalheight":a=p3(d);break;default:throw new Ot("Invalid key: '"+h[0]+"' in \\includegraphics.")}}}var f=hi(e[0],"url").url;return o===""&&(o=f,o=o.replace(/^.*[\\/]/,""),o=o.substring(0,o.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:f})?{type:"includegraphics",mode:n.mode,alt:o,width:r,height:s,totalheight:a,src:f}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(i,e)=>{var t=ds(i.height,e),n=0;i.totalheight.number>0&&(n=ds(i.totalheight,e)-t);var r=0;i.width.number>0&&(r=ds(i.width,e));var s={height:Gt(t+n)};r>0&&(s.width=Gt(r)),n>0&&(s.verticalAlign=Gt(-n));var a=new $ut(i.src,i.alt,s);return a.height=t,a.depth=n,a},mathmlBuilder:(i,e)=>{var t=new Dt.MathNode("mglyph",[]);t.setAttribute("alt",i.alt);var n=ds(i.height,e),r=0;if(i.totalheight.number>0&&(r=ds(i.totalheight,e)-n,t.setAttribute("valign",Gt(-r))),t.setAttribute("height",Gt(n+r)),i.width.number>0){var s=ds(i.width,e);t.setAttribute("width",Gt(s))}return t.setAttribute("src",i.src),t}});Zt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(i,e){var{parser:t,funcName:n}=i,r=hi(e[0],"size");if(t.settings.strict){var s=n[1]==="m",a=r.value.unit==="mu";s?(a||t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+r.value.unit+" units")),t.mode!=="math"&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):a&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:t.mode,dimension:r.value}},htmlBuilder(i,e){return Xe.makeGlue(i.dimension,e)},mathmlBuilder(i,e){var t=ds(i.dimension,e);return new Dt.SpaceNode(t)}});Zt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=e[0];return{type:"lap",mode:t.mode,alignment:n.slice(5),body:r}},htmlBuilder:(i,e)=>{var t;i.alignment==="clap"?(t=Xe.makeSpan([],[Xi(i.body,e)]),t=Xe.makeSpan(["inner"],[t],e)):t=Xe.makeSpan(["inner"],[Xi(i.body,e)]);var n=Xe.makeSpan(["fix"],[]),r=Xe.makeSpan([i.alignment],[t,n],e),s=Xe.makeSpan(["strut"]);return s.style.height=Gt(r.height+r.depth),r.depth&&(s.style.verticalAlign=Gt(-r.depth)),r.children.unshift(s),r=Xe.makeSpan(["thinbox"],[r],e),Xe.makeSpan(["mord","vbox"],[r],e)},mathmlBuilder:(i,e)=>{var t=new Dt.MathNode("mpadded",[Dr(i.body,e)]);if(i.alignment!=="rlap"){var n=i.alignment==="llap"?"-1":"-0.5";t.setAttribute("lspace",n+"width")}return t.setAttribute("width","0px"),t}});Zt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(i,e){var{funcName:t,parser:n}=i,r=n.mode;n.switchMode("math");var s=t==="\\("?"\\)":"$",a=n.parseExpression(!1,s);return n.expect(s),n.switchMode(r),{type:"styling",mode:n.mode,style:"text",body:a}}});Zt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(i,e){throw new Ot("Mismatched "+i.funcName)}});var $7=(i,e)=>{switch(e.style.size){case kn.DISPLAY.size:return i.display;case kn.TEXT.size:return i.text;case kn.SCRIPT.size:return i.script;case kn.SCRIPTSCRIPT.size:return i.scriptscript;default:return i.text}};Zt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(i,e)=>{var{parser:t}=i;return{type:"mathchoice",mode:t.mode,display:Qs(e[0]),text:Qs(e[1]),script:Qs(e[2]),scriptscript:Qs(e[3])}},htmlBuilder:(i,e)=>{var t=$7(i,e),n=Ea(t,e,!1);return Xe.makeFragment(n)},mathmlBuilder:(i,e)=>{var t=$7(i,e);return Jf(t,e)}});var UH=(i,e,t,n,r,s,a)=>{i=Xe.makeSpan([],[i]);var o=t&&qn.isCharacterBox(t),l,c;if(e){var u=Xi(e,n.havingStyle(r.sup()),n);c={elem:u,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-u.depth)}}if(t){var h=Xi(t,n.havingStyle(r.sub()),n);l={elem:h,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-h.height)}}var d;if(c&&l){var f=n.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+i.depth+a;d=Xe.makeVList({positionType:"bottom",positionData:f,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Gt(-s)},{type:"kern",size:l.kern},{type:"elem",elem:i},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:Gt(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(l){var m=i.height-a;d=Xe.makeVList({positionType:"top",positionData:m,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Gt(-s)},{type:"kern",size:l.kern},{type:"elem",elem:i}]},n)}else if(c){var A=i.depth+a;d=Xe.makeVList({positionType:"bottom",positionData:A,children:[{type:"elem",elem:i},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:Gt(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return i;var _=[d];if(l&&s!==0&&!o){var v=Xe.makeSpan(["mspace"],[],n);v.style.marginRight=Gt(s),_.unshift(v)}return Xe.makeSpan(["mop","op-limits"],_,n)},VH=["\\smallint"],Pv=(i,e)=>{var t,n,r=!1,s;i.type==="supsub"?(t=i.sup,n=i.sub,s=hi(i.base,"op"),r=!0):s=hi(i,"op");var a=e.style,o=!1;a.size===kn.DISPLAY.size&&s.symbol&&!qn.contains(VH,s.name)&&(o=!0);var l;if(s.symbol){var c=o?"Size2-Regular":"Size1-Regular",u="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(u=s.name.slice(1),s.name=u==="oiint"?"\\iint":"\\iiint"),l=Xe.makeSymbol(s.name,c,"math",e,["mop","op-symbol",o?"large-op":"small-op"]),u.length>0){var h=l.italic,d=Xe.staticSvg(u+"Size"+(o?"2":"1"),e);l=Xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:d,shift:o?.08:0}]},e),s.name="\\"+u,l.classes.unshift("mop"),l.italic=h}}else if(s.body){var f=Ea(s.body,e,!0);f.length===1&&f[0]instanceof Lc?(l=f[0],l.classes[0]="mop"):l=Xe.makeSpan(["mop"],f,e)}else{for(var m=[],A=1;A<s.name.length;A++)m.push(Xe.mathsym(s.name[A],s.mode,e));l=Xe.makeSpan(["mop"],m,e)}var _=0,v=0;return(l instanceof Lc||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(_=(l.height-l.depth)/2-e.fontMetrics().axisHeight,v=l.italic),r?UH(l,t,n,e,a,v,_):(_&&(l.style.position="relative",l.style.top=Gt(_)),l)},bb=(i,e)=>{var t;if(i.symbol)t=new Ec("mo",[Oc(i.name,i.mode)]),qn.contains(VH,i.name)&&t.setAttribute("largeop","false");else if(i.body)t=new Ec("mo",xl(i.body,e));else{t=new Ec("mi",[new a1(i.name.slice(1))]);var n=new Ec("mo",[Oc("","text")]);i.parentIsSupSub?t=new Ec("mrow",[t,n]):t=mH([t,n])}return t},Xht={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};Zt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=n;return r.length===1&&(r=Xht[r]),{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:Pv,mathmlBuilder:bb});Zt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(i,e)=>{var{parser:t}=i,n=e[0];return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Qs(n)}},htmlBuilder:Pv,mathmlBuilder:bb});var Yht={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};Zt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(i){var{parser:e,funcName:t}=i;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:Pv,mathmlBuilder:bb});Zt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(i){var{parser:e,funcName:t}=i;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:Pv,mathmlBuilder:bb});Zt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(i){var{parser:e,funcName:t}=i,n=t;return n.length===1&&(n=Yht[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Pv,mathmlBuilder:bb});var HH=(i,e)=>{var t,n,r=!1,s;i.type==="supsub"?(t=i.sup,n=i.sub,s=hi(i.base,"operatorname"),r=!0):s=hi(i,"operatorname");var a;if(s.body.length>0){for(var o=s.body.map(h=>{var d=h.text;return typeof d=="string"?{type:"textord",mode:h.mode,text:d}:h}),l=Ea(o,e.withFont("mathrm"),!0),c=0;c<l.length;c++){var u=l[c];u instanceof Lc&&(u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}a=Xe.makeSpan(["mop"],l,e)}else a=Xe.makeSpan(["mop"],[],e);return r?UH(a,t,n,e,e.style,0,0):a},Kht=(i,e)=>{for(var t=xl(i.body,e.withFont("mathrm")),n=!0,r=0;r<t.length;r++){var s=t[r];if(!(s instanceof Dt.SpaceNode))if(s instanceof Dt.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var a=s.children[0];s.children.length===1&&a instanceof Dt.TextNode?a.text=a.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var o=t.map(u=>u.toText()).join("");t=[new Dt.TextNode(o)]}var l=new Dt.MathNode("mi",t);l.setAttribute("mathvariant","normal");var c=new Dt.MathNode("mo",[Oc("","text")]);return i.parentIsSupSub?new Dt.MathNode("mrow",[l,c]):Dt.newDocumentFragment([l,c])};Zt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=e[0];return{type:"operatorname",mode:t.mode,body:Qs(r),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:HH,mathmlBuilder:Kht});Z("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");am({type:"ordgroup",htmlBuilder(i,e){return i.semisimple?Xe.makeFragment(Ea(i.body,e,!1)):Xe.makeSpan(["mord"],Ea(i.body,e,!0),e)},mathmlBuilder(i,e){return Jf(i.body,e,!0)}});Zt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(i,e){var{parser:t}=i,n=e[0];return{type:"overline",mode:t.mode,body:n}},htmlBuilder(i,e){var t=Xi(i.body,e.havingCrampedStyle()),n=Xe.makeLineSpan("overline-line",e),r=e.fontMetrics().defaultRuleThickness,s=Xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t},{type:"kern",size:3*r},{type:"elem",elem:n},{type:"kern",size:r}]},e);return Xe.makeSpan(["mord","overline"],[s],e)},mathmlBuilder(i,e){var t=new Dt.MathNode("mo",[new Dt.TextNode("")]);t.setAttribute("stretchy","true");var n=new Dt.MathNode("mover",[Dr(i.body,e),t]);return n.setAttribute("accent","true"),n}});Zt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,n=e[0];return{type:"phantom",mode:t.mode,body:Qs(n)}},htmlBuilder:(i,e)=>{var t=Ea(i.body,e.withPhantom(),!1);return Xe.makeFragment(t)},mathmlBuilder:(i,e)=>{var t=xl(i.body,e);return new Dt.MathNode("mphantom",t)}});Zt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,n=e[0];return{type:"hphantom",mode:t.mode,body:n}},htmlBuilder:(i,e)=>{var t=Xe.makeSpan([],[Xi(i.body,e.withPhantom())]);if(t.height=0,t.depth=0,t.children)for(var n=0;n<t.children.length;n++)t.children[n].height=0,t.children[n].depth=0;return t=Xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e),Xe.makeSpan(["mord"],[t],e)},mathmlBuilder:(i,e)=>{var t=xl(Qs(i.body),e),n=new Dt.MathNode("mphantom",t),r=new Dt.MathNode("mpadded",[n]);return r.setAttribute("height","0px"),r.setAttribute("depth","0px"),r}});Zt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,n=e[0];return{type:"vphantom",mode:t.mode,body:n}},htmlBuilder:(i,e)=>{var t=Xe.makeSpan(["inner"],[Xi(i.body,e.withPhantom())]),n=Xe.makeSpan(["fix"],[]);return Xe.makeSpan(["mord","rlap"],[t,n],e)},mathmlBuilder:(i,e)=>{var t=xl(Qs(i.body),e),n=new Dt.MathNode("mphantom",t),r=new Dt.MathNode("mpadded",[n]);return r.setAttribute("width","0px"),r}});Zt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(i,e){var{parser:t}=i,n=hi(e[0],"size").value,r=e[1];return{type:"raisebox",mode:t.mode,dy:n,body:r}},htmlBuilder(i,e){var t=Xi(i.body,e),n=ds(i.dy,e);return Xe.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(i,e){var t=new Dt.MathNode("mpadded",[Dr(i.body,e)]),n=i.dy.number+i.dy.unit;return t.setAttribute("voffset",n),t}});Zt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(i){var{parser:e}=i;return{type:"internal",mode:e.mode}}});Zt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler(i,e,t){var{parser:n}=i,r=t[0],s=hi(e[0],"size"),a=hi(e[1],"size");return{type:"rule",mode:n.mode,shift:r&&hi(r,"size").value,width:s.value,height:a.value}},htmlBuilder(i,e){var t=Xe.makeSpan(["mord","rule"],[],e),n=ds(i.width,e),r=ds(i.height,e),s=i.shift?ds(i.shift,e):0;return t.style.borderRightWidth=Gt(n),t.style.borderTopWidth=Gt(r),t.style.bottom=Gt(s),t.width=n,t.height=r+s,t.depth=-s,t.maxFontSize=r*1.125*e.sizeMultiplier,t},mathmlBuilder(i,e){var t=ds(i.width,e),n=ds(i.height,e),r=i.shift?ds(i.shift,e):0,s=e.color&&e.getColor()||"black",a=new Dt.MathNode("mspace");a.setAttribute("mathbackground",s),a.setAttribute("width",Gt(t)),a.setAttribute("height",Gt(n));var o=new Dt.MathNode("mpadded",[a]);return r>=0?o.setAttribute("height",Gt(r)):(o.setAttribute("height",Gt(r)),o.setAttribute("depth",Gt(-r))),o.setAttribute("voffset",Gt(r)),o}});function GH(i,e,t){for(var n=Ea(i,e,!1),r=e.sizeMultiplier/t.sizeMultiplier,s=0;s<n.length;s++){var a=n[s].classes.indexOf("sizing");a<0?Array.prototype.push.apply(n[s].classes,e.sizingClasses(t)):n[s].classes[a+1]==="reset-size"+e.size&&(n[s].classes[a+1]="reset-size"+t.size),n[s].height*=r,n[s].depth*=r}return Xe.makeFragment(n)}var X7=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Jht=(i,e)=>{var t=e.havingSize(i.size);return GH(i.body,t,e)};Zt({type:"sizing",names:X7,props:{numArgs:0,allowedInText:!0},handler:(i,e)=>{var{breakOnTokenText:t,funcName:n,parser:r}=i,s=r.parseExpression(!1,t);return{type:"sizing",mode:r.mode,size:X7.indexOf(n)+1,body:s}},htmlBuilder:Jht,mathmlBuilder:(i,e)=>{var t=e.havingSize(i.size),n=xl(i.body,t),r=new Dt.MathNode("mstyle",n);return r.setAttribute("mathsize",Gt(t.sizeMultiplier)),r}});Zt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(i,e,t)=>{var{parser:n}=i,r=!1,s=!1,a=t[0]&&hi(t[0],"ordgroup");if(a)for(var o="",l=0;l<a.body.length;++l){var c=a.body[l];if(o=c.text,o==="t")r=!0;else if(o==="b")s=!0;else{r=!1,s=!1;break}}else r=!0,s=!0;var u=e[0];return{type:"smash",mode:n.mode,body:u,smashHeight:r,smashDepth:s}},htmlBuilder:(i,e)=>{var t=Xe.makeSpan([],[Xi(i.body,e)]);if(!i.smashHeight&&!i.smashDepth)return t;if(i.smashHeight&&(t.height=0,t.children))for(var n=0;n<t.children.length;n++)t.children[n].height=0;if(i.smashDepth&&(t.depth=0,t.children))for(var r=0;r<t.children.length;r++)t.children[r].depth=0;var s=Xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e);return Xe.makeSpan(["mord"],[s],e)},mathmlBuilder:(i,e)=>{var t=new Dt.MathNode("mpadded",[Dr(i.body,e)]);return i.smashHeight&&t.setAttribute("height","0px"),i.smashDepth&&t.setAttribute("depth","0px"),t}});Zt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(i,e,t){var{parser:n}=i,r=t[0],s=e[0];return{type:"sqrt",mode:n.mode,body:s,index:r}},htmlBuilder(i,e){var t=Xi(i.body,e.havingCrampedStyle());t.height===0&&(t.height=e.fontMetrics().xHeight),t=Xe.wrapFragment(t,e);var n=e.fontMetrics(),r=n.defaultRuleThickness,s=r;e.style.id<kn.TEXT.id&&(s=e.fontMetrics().xHeight);var a=r+s/4,o=t.height+t.depth+a+r,{span:l,ruleWidth:c,advanceWidth:u}=Ad.sqrtImage(o,e),h=l.height-c;h>t.height+t.depth+a&&(a=(a+h-t.height-t.depth)/2);var d=l.height-t.height-a-c;t.style.paddingLeft=Gt(u);var f=Xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t,wrapperClasses:["svg-align"]},{type:"kern",size:-(t.height+d)},{type:"elem",elem:l},{type:"kern",size:c}]},e);if(i.index){var m=e.havingStyle(kn.SCRIPTSCRIPT),A=Xi(i.index,m,e),_=.6*(f.height-f.depth),v=Xe.makeVList({positionType:"shift",positionData:-_,children:[{type:"elem",elem:A}]},e),w=Xe.makeSpan(["root"],[v]);return Xe.makeSpan(["mord","sqrt"],[w,f],e)}else return Xe.makeSpan(["mord","sqrt"],[f],e)},mathmlBuilder(i,e){var{body:t,index:n}=i;return n?new Dt.MathNode("mroot",[Dr(t,e),Dr(n,e)]):new Dt.MathNode("msqrt",[Dr(t,e)])}});var Y7={display:kn.DISPLAY,text:kn.TEXT,script:kn.SCRIPT,scriptscript:kn.SCRIPTSCRIPT};Zt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(i,e){var{breakOnTokenText:t,funcName:n,parser:r}=i,s=r.parseExpression(!0,t),a=n.slice(1,n.length-5);return{type:"styling",mode:r.mode,style:a,body:s}},htmlBuilder(i,e){var t=Y7[i.style],n=e.havingStyle(t).withFont("");return GH(i.body,n,e)},mathmlBuilder(i,e){var t=Y7[i.style],n=e.havingStyle(t),r=xl(i.body,n),s=new Dt.MathNode("mstyle",r),a={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},o=a[i.style];return s.setAttribute("scriptlevel",o[0]),s.setAttribute("displaystyle",o[1]),s}});var Zht=function(e,t){var n=e.base;if(n)if(n.type==="op"){var r=n.limits&&(t.style.size===kn.DISPLAY.size||n.alwaysHandleSupSub);return r?Pv:null}else if(n.type==="operatorname"){var s=n.alwaysHandleSupSub&&(t.style.size===kn.DISPLAY.size||n.limits);return s?HH:null}else{if(n.type==="accent")return qn.isCharacterBox(n.base)?hP:null;if(n.type==="horizBrace"){var a=!e.sub;return a===n.isOver?zH:null}else return null}else return null};am({type:"supsub",htmlBuilder(i,e){var t=Zht(i,e);if(t)return t(i,e);var{base:n,sup:r,sub:s}=i,a=Xi(n,e),o,l,c=e.fontMetrics(),u=0,h=0,d=n&&qn.isCharacterBox(n);if(r){var f=e.havingStyle(e.style.sup());o=Xi(r,f,e),d||(u=a.height-f.fontMetrics().supDrop*f.sizeMultiplier/e.sizeMultiplier)}if(s){var m=e.havingStyle(e.style.sub());l=Xi(s,m,e),d||(h=a.depth+m.fontMetrics().subDrop*m.sizeMultiplier/e.sizeMultiplier)}var A;e.style===kn.DISPLAY?A=c.sup1:e.style.cramped?A=c.sup3:A=c.sup2;var _=e.sizeMultiplier,v=Gt(.5/c.ptPerEm/_),w=null;if(l){var x=i.base&&i.base.type==="op"&&i.base.name&&(i.base.name==="\\oiint"||i.base.name==="\\oiiint");(a instanceof Lc||x)&&(w=Gt(-a.italic))}var C;if(o&&l){u=Math.max(u,A,o.depth+.25*c.xHeight),h=Math.max(h,c.sub2);var S=c.defaultRuleThickness,I=4*S;if(u-o.depth-(l.height-h)<I){h=I-(u-o.depth)+l.height;var P=.8*c.xHeight-(u-o.depth);P>0&&(u+=P,h-=P)}var k=[{type:"elem",elem:l,shift:h,marginRight:v,marginLeft:w},{type:"elem",elem:o,shift:-u,marginRight:v}];C=Xe.makeVList({positionType:"individualShift",children:k},e)}else if(l){h=Math.max(h,c.sub1,l.height-.8*c.xHeight);var M=[{type:"elem",elem:l,marginLeft:w,marginRight:v}];C=Xe.makeVList({positionType:"shift",positionData:h,children:M},e)}else if(o)u=Math.max(u,A,o.depth+.25*c.xHeight),C=Xe.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:o,marginRight:v}]},e);else throw new Error("supsub must have either sup or sub.");var R=lT(a,"right")||"mord";return Xe.makeSpan([R],[a,Xe.makeSpan(["msupsub"],[C])],e)},mathmlBuilder(i,e){var t=!1,n,r;i.base&&i.base.type==="horizBrace"&&(r=!!i.sup,r===i.base.isOver&&(t=!0,n=i.base.isOver)),i.base&&(i.base.type==="op"||i.base.type==="operatorname")&&(i.base.parentIsSupSub=!0);var s=[Dr(i.base,e)];i.sub&&s.push(Dr(i.sub,e)),i.sup&&s.push(Dr(i.sup,e));var a;if(t)a=n?"mover":"munder";else if(i.sub)if(i.sup){var c=i.base;c&&c.type==="op"&&c.limits&&e.style===kn.DISPLAY||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(e.style===kn.DISPLAY||c.limits)?a="munderover":a="msubsup"}else{var l=i.base;l&&l.type==="op"&&l.limits&&(e.style===kn.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===kn.DISPLAY)?a="munder":a="msub"}else{var o=i.base;o&&o.type==="op"&&o.limits&&(e.style===kn.DISPLAY||o.alwaysHandleSupSub)||o&&o.type==="operatorname"&&o.alwaysHandleSupSub&&(o.limits||e.style===kn.DISPLAY)?a="mover":a="msup"}return new Dt.MathNode(a,s)}});am({type:"atom",htmlBuilder(i,e){return Xe.mathsym(i.text,i.mode,e,["m"+i.family])},mathmlBuilder(i,e){var t=new Dt.MathNode("mo",[Oc(i.text,i.mode)]);if(i.family==="bin"){var n=cP(i,e);n==="bold-italic"&&t.setAttribute("mathvariant",n)}else i.family==="punct"?t.setAttribute("separator","true"):(i.family==="open"||i.family==="close")&&t.setAttribute("stretchy","false");return t}});var QH={mi:"italic",mn:"normal",mtext:"normal"};am({type:"mathord",htmlBuilder(i,e){return Xe.makeOrd(i,e,"mathord")},mathmlBuilder(i,e){var t=new Dt.MathNode("mi",[Oc(i.text,i.mode,e)]),n=cP(i,e)||"italic";return n!==QH[t.type]&&t.setAttribute("mathvariant",n),t}});am({type:"textord",htmlBuilder(i,e){return Xe.makeOrd(i,e,"textord")},mathmlBuilder(i,e){var t=Oc(i.text,i.mode,e),n=cP(i,e)||"normal",r;return i.mode==="text"?r=new Dt.MathNode("mtext",[t]):/[0-9]/.test(i.text)?r=new Dt.MathNode("mn",[t]):i.text==="\\prime"?r=new Dt.MathNode("mo",[t]):r=new Dt.MathNode("mi",[t]),n!==QH[r.type]&&r.setAttribute("mathvariant",n),r}});var m3={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},g3={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};am({type:"spacing",htmlBuilder(i,e){if(g3.hasOwnProperty(i.text)){var t=g3[i.text].className||"";if(i.mode==="text"){var n=Xe.makeOrd(i,e,"textord");return n.classes.push(t),n}else return Xe.makeSpan(["mspace",t],[Xe.mathsym(i.text,i.mode,e)],e)}else{if(m3.hasOwnProperty(i.text))return Xe.makeSpan(["mspace",m3[i.text]],[],e);throw new Ot('Unknown type of space "'+i.text+'"')}},mathmlBuilder(i,e){var t;if(g3.hasOwnProperty(i.text))t=new Dt.MathNode("mtext",[new Dt.TextNode("")]);else{if(m3.hasOwnProperty(i.text))return new Dt.MathNode("mspace");throw new Ot('Unknown type of space "'+i.text+'"')}return t}});var K7=()=>{var i=new Dt.MathNode("mtd",[]);return i.setAttribute("width","50%"),i};am({type:"tag",mathmlBuilder(i,e){var t=new Dt.MathNode("mtable",[new Dt.MathNode("mtr",[K7(),new Dt.MathNode("mtd",[Jf(i.body,e)]),K7(),new Dt.MathNode("mtd",[Jf(i.tag,e)])])]);return t.setAttribute("width","100%"),t}});var J7={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},Z7={"\\textbf":"textbf","\\textmd":"textmd"},edt={"\\textit":"textit","\\textup":"textup"},e9=(i,e)=>{var t=i.font;return t?J7[t]?e.withTextFontFamily(J7[t]):Z7[t]?e.withTextFontWeight(Z7[t]):e.withTextFontShape(edt[t]):e};Zt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(i,e){var{parser:t,funcName:n}=i,r=e[0];return{type:"text",mode:t.mode,body:Qs(r),font:n}},htmlBuilder(i,e){var t=e9(i,e),n=Ea(i.body,t,!0);return Xe.makeSpan(["mord","text"],n,t)},mathmlBuilder(i,e){var t=e9(i,e);return Jf(i.body,t)}});Zt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(i,e){var{parser:t}=i;return{type:"underline",mode:t.mode,body:e[0]}},htmlBuilder(i,e){var t=Xi(i.body,e),n=Xe.makeLineSpan("underline-line",e),r=e.fontMetrics().defaultRuleThickness,s=Xe.makeVList({positionType:"top",positionData:t.height,children:[{type:"kern",size:r},{type:"elem",elem:n},{type:"kern",size:3*r},{type:"elem",elem:t}]},e);return Xe.makeSpan(["mord","underline"],[s],e)},mathmlBuilder(i,e){var t=new Dt.MathNode("mo",[new Dt.TextNode("")]);t.setAttribute("stretchy","true");var n=new Dt.MathNode("munder",[Dr(i.body,e),t]);return n.setAttribute("accentunder","true"),n}});Zt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(i,e){var{parser:t}=i;return{type:"vcenter",mode:t.mode,body:e[0]}},htmlBuilder(i,e){var t=Xi(i.body,e),n=e.fontMetrics().axisHeight,r=.5*(t.height-n-(t.depth+n));return Xe.makeVList({positionType:"shift",positionData:r,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(i,e){return new Dt.MathNode("mpadded",[Dr(i.body,e)],["vcenter"])}});Zt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(i,e,t){throw new Ot("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(i,e){for(var t=t9(i),n=[],r=e.havingStyle(e.style.text()),s=0;s<t.length;s++){var a=t[s];a==="~"&&(a="\\textasciitilde"),n.push(Xe.makeSymbol(a,"Typewriter-Regular",i.mode,r,["mord","texttt"]))}return Xe.makeSpan(["mord","text"].concat(r.sizingClasses(e)),Xe.tryCombineChars(n),r)},mathmlBuilder(i,e){var t=new Dt.TextNode(t9(i)),n=new Dt.MathNode("mtext",[t]);return n.setAttribute("mathvariant","monospace"),n}});var t9=i=>i.body.replace(/ /g,i.star?"":""),Mf=fH,qH=`[ \r
	]`,tdt="\\\\[a-zA-Z@]+",ndt="\\\\[^\uD800-\uDFFF]",idt="("+tdt+")"+qH+"*",rdt=`\\\\(
|[ \r	]+
?)[ \r	]*`,dT="[-]",sdt=new RegExp(dT+"+$"),adt="("+qH+"+)|"+(rdt+"|")+"([!-\\[\\]---]"+(dT+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(dT+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+idt)+("|"+ndt+")");class n9{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(adt,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new uh("EOF",new Gl(this,t,t));var n=this.tokenRegex.exec(e);if(n===null||n.index!==t)throw new Ot("Unexpected character: '"+e[t]+"'",new uh(e[t],new Gl(this,t,t+1)));var r=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[r]===14){var s=e.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new uh(r,new Gl(this,t,this.tokenRegex.lastIndex))}}class odt{constructor(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new Ot("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(e[t]==null?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,n){if(n===void 0&&(n=!1),n){for(var r=0;r<this.undefStack.length;r++)delete this.undefStack[r][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(e)&&(s[e]=this.current[e])}t==null?delete this.current[e]:this.current[e]=t}}var ldt=DH;Z("\\noexpand",function(i){var e=i.popToken();return i.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});Z("\\expandafter",function(i){var e=i.popToken();return i.expandOnce(!0),{tokens:[e],numArgs:0}});Z("\\@firstoftwo",function(i){var e=i.consumeArgs(2);return{tokens:e[0],numArgs:0}});Z("\\@secondoftwo",function(i){var e=i.consumeArgs(2);return{tokens:e[1],numArgs:0}});Z("\\@ifnextchar",function(i){var e=i.consumeArgs(3);i.consumeSpaces();var t=i.future();return e[0].length===1&&e[0][0].text===t.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});Z("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");Z("\\TextOrMath",function(i){var e=i.consumeArgs(2);return i.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var i9={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Z("\\char",function(i){var e=i.popToken(),t,n="";if(e.text==="'")t=8,e=i.popToken();else if(e.text==='"')t=16,e=i.popToken();else if(e.text==="`")if(e=i.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new Ot("\\char` missing argument");n=e.text.charCodeAt(0)}else t=10;if(t){if(n=i9[e.text],n==null||n>=t)throw new Ot("Invalid base-"+t+" digit "+e.text);for(var r;(r=i9[i.future().text])!=null&&r<t;)n*=t,n+=r,i.popToken()}return"\\@char{"+n+"}"});var _P=(i,e,t)=>{var n=i.consumeArg().tokens;if(n.length!==1)throw new Ot("\\newcommand's first argument must be a macro name");var r=n[0].text,s=i.isDefined(r);if(s&&!e)throw new Ot("\\newcommand{"+r+"} attempting to redefine "+(r+"; use \\renewcommand"));if(!s&&!t)throw new Ot("\\renewcommand{"+r+"} when command "+r+" does not yet exist; use \\newcommand");var a=0;if(n=i.consumeArg().tokens,n.length===1&&n[0].text==="["){for(var o="",l=i.expandNextToken();l.text!=="]"&&l.text!=="EOF";)o+=l.text,l=i.expandNextToken();if(!o.match(/^\s*[0-9]+\s*$/))throw new Ot("Invalid number of arguments: "+o);a=parseInt(o),n=i.consumeArg().tokens}return i.macros.set(r,{tokens:n,numArgs:a}),""};Z("\\newcommand",i=>_P(i,!1,!0));Z("\\renewcommand",i=>_P(i,!0,!1));Z("\\providecommand",i=>_P(i,!0,!0));Z("\\message",i=>{var e=i.consumeArgs(1)[0];return console.log(e.reverse().map(t=>t.text).join("")),""});Z("\\errmessage",i=>{var e=i.consumeArgs(1)[0];return console.error(e.reverse().map(t=>t.text).join("")),""});Z("\\show",i=>{var e=i.popToken(),t=e.text;return console.log(e,i.macros.get(t),Mf[t],Ur.math[t],Ur.text[t]),""});Z("\\bgroup","{");Z("\\egroup","}");Z("~","\\nobreakspace");Z("\\lq","`");Z("\\rq","'");Z("\\aa","\\r a");Z("\\AA","\\r A");Z("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");Z("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");Z("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");Z("","\\mathscr{B}");Z("","\\mathscr{E}");Z("","\\mathscr{F}");Z("","\\mathscr{H}");Z("","\\mathscr{I}");Z("","\\mathscr{L}");Z("","\\mathscr{M}");Z("","\\mathscr{R}");Z("","\\mathfrak{C}");Z("","\\mathfrak{H}");Z("","\\mathfrak{Z}");Z("\\Bbbk","\\Bbb{k}");Z("","\\cdotp");Z("\\llap","\\mathllap{\\textrm{#1}}");Z("\\rlap","\\mathrlap{\\textrm{#1}}");Z("\\clap","\\mathclap{\\textrm{#1}}");Z("\\mathstrut","\\vphantom{(}");Z("\\underbar","\\underline{\\text{#1}}");Z("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');Z("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");Z("\\ne","\\neq");Z("","\\neq");Z("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");Z("","\\notin");Z("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");Z("","\\perp");Z("","\\mathclose{!\\mkern-0.8mu!}");Z("","\\notni");Z("","\\ulcorner");Z("","\\urcorner");Z("","\\llcorner");Z("","\\lrcorner");Z("","\\copyright");Z("","\\textregistered");Z("","\\textregistered");Z("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');Z("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');Z("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');Z("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');Z("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}");Z("","\\vdots");Z("\\varGamma","\\mathit{\\Gamma}");Z("\\varDelta","\\mathit{\\Delta}");Z("\\varTheta","\\mathit{\\Theta}");Z("\\varLambda","\\mathit{\\Lambda}");Z("\\varXi","\\mathit{\\Xi}");Z("\\varPi","\\mathit{\\Pi}");Z("\\varSigma","\\mathit{\\Sigma}");Z("\\varUpsilon","\\mathit{\\Upsilon}");Z("\\varPhi","\\mathit{\\Phi}");Z("\\varPsi","\\mathit{\\Psi}");Z("\\varOmega","\\mathit{\\Omega}");Z("\\substack","\\begin{subarray}{c}#1\\end{subarray}");Z("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");Z("\\boxed","\\fbox{$\\displaystyle{#1}$}");Z("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");Z("\\implies","\\DOTSB\\;\\Longrightarrow\\;");Z("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var r9={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Z("\\dots",function(i){var e="\\dotso",t=i.expandAfterFuture().text;return t in r9?e=r9[t]:(t.slice(0,4)==="\\not"||t in Ur.math&&qn.contains(["bin","rel"],Ur.math[t].group))&&(e="\\dotsb"),e});var bP={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Z("\\dotso",function(i){var e=i.future().text;return e in bP?"\\ldots\\,":"\\ldots"});Z("\\dotsc",function(i){var e=i.future().text;return e in bP&&e!==","?"\\ldots\\,":"\\ldots"});Z("\\cdots",function(i){var e=i.future().text;return e in bP?"\\@cdots\\,":"\\@cdots"});Z("\\dotsb","\\cdots");Z("\\dotsm","\\cdots");Z("\\dotsi","\\!\\cdots");Z("\\dotsx","\\ldots\\,");Z("\\DOTSI","\\relax");Z("\\DOTSB","\\relax");Z("\\DOTSX","\\relax");Z("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");Z("\\,","\\tmspace+{3mu}{.1667em}");Z("\\thinspace","\\,");Z("\\>","\\mskip{4mu}");Z("\\:","\\tmspace+{4mu}{.2222em}");Z("\\medspace","\\:");Z("\\;","\\tmspace+{5mu}{.2777em}");Z("\\thickspace","\\;");Z("\\!","\\tmspace-{3mu}{.1667em}");Z("\\negthinspace","\\!");Z("\\negmedspace","\\tmspace-{4mu}{.2222em}");Z("\\negthickspace","\\tmspace-{5mu}{.277em}");Z("\\enspace","\\kern.5em ");Z("\\enskip","\\hskip.5em\\relax");Z("\\quad","\\hskip1em\\relax");Z("\\qquad","\\hskip2em\\relax");Z("\\tag","\\@ifstar\\tag@literal\\tag@paren");Z("\\tag@paren","\\tag@literal{({#1})}");Z("\\tag@literal",i=>{if(i.macros.get("\\df@tag"))throw new Ot("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});Z("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");Z("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");Z("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");Z("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");Z("\\newline","\\\\\\relax");Z("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var jH=Gt(nh["Main-Regular"]["T".charCodeAt(0)][1]-.7*nh["Main-Regular"]["A".charCodeAt(0)][1]);Z("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+jH+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");Z("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+jH+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");Z("\\hspace","\\@ifstar\\@hspacer\\@hspace");Z("\\@hspace","\\hskip #1\\relax");Z("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");Z("\\ordinarycolon",":");Z("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");Z("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');Z("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');Z("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');Z("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');Z("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');Z("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');Z("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');Z("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');Z("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');Z("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');Z("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');Z("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');Z("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');Z("","\\dblcolon");Z("","\\eqcolon");Z("","\\coloneqq");Z("","\\eqqcolon");Z("","\\Coloneqq");Z("\\ratio","\\vcentcolon");Z("\\coloncolon","\\dblcolon");Z("\\colonequals","\\coloneqq");Z("\\coloncolonequals","\\Coloneqq");Z("\\equalscolon","\\eqqcolon");Z("\\equalscoloncolon","\\Eqqcolon");Z("\\colonminus","\\coloneq");Z("\\coloncolonminus","\\Coloneq");Z("\\minuscolon","\\eqcolon");Z("\\minuscoloncolon","\\Eqcolon");Z("\\coloncolonapprox","\\Colonapprox");Z("\\coloncolonsim","\\Colonsim");Z("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Z("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");Z("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Z("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");Z("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");Z("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");Z("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");Z("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");Z("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");Z("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");Z("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");Z("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");Z("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");Z("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");Z("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");Z("\\ngeqq","\\html@mathml{\\@ngeqq}{}");Z("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");Z("\\nleqq","\\html@mathml{\\@nleqq}{}");Z("\\nleqslant","\\html@mathml{\\@nleqslant}{}");Z("\\nshortmid","\\html@mathml{\\@nshortmid}{}");Z("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");Z("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");Z("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");Z("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");Z("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");Z("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");Z("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");Z("\\imath","\\html@mathml{\\@imath}{}");Z("\\jmath","\\html@mathml{\\@jmath}{}");Z("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");Z("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");Z("","\\llbracket");Z("","\\rrbracket");Z("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");Z("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");Z("","\\lBrace");Z("","\\rBrace");Z("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");Z("","\\minuso");Z("\\darr","\\downarrow");Z("\\dArr","\\Downarrow");Z("\\Darr","\\Downarrow");Z("\\lang","\\langle");Z("\\rang","\\rangle");Z("\\uarr","\\uparrow");Z("\\uArr","\\Uparrow");Z("\\Uarr","\\Uparrow");Z("\\N","\\mathbb{N}");Z("\\R","\\mathbb{R}");Z("\\Z","\\mathbb{Z}");Z("\\alef","\\aleph");Z("\\alefsym","\\aleph");Z("\\Alpha","\\mathrm{A}");Z("\\Beta","\\mathrm{B}");Z("\\bull","\\bullet");Z("\\Chi","\\mathrm{X}");Z("\\clubs","\\clubsuit");Z("\\cnums","\\mathbb{C}");Z("\\Complex","\\mathbb{C}");Z("\\Dagger","\\ddagger");Z("\\diamonds","\\diamondsuit");Z("\\empty","\\emptyset");Z("\\Epsilon","\\mathrm{E}");Z("\\Eta","\\mathrm{H}");Z("\\exist","\\exists");Z("\\harr","\\leftrightarrow");Z("\\hArr","\\Leftrightarrow");Z("\\Harr","\\Leftrightarrow");Z("\\hearts","\\heartsuit");Z("\\image","\\Im");Z("\\infin","\\infty");Z("\\Iota","\\mathrm{I}");Z("\\isin","\\in");Z("\\Kappa","\\mathrm{K}");Z("\\larr","\\leftarrow");Z("\\lArr","\\Leftarrow");Z("\\Larr","\\Leftarrow");Z("\\lrarr","\\leftrightarrow");Z("\\lrArr","\\Leftrightarrow");Z("\\Lrarr","\\Leftrightarrow");Z("\\Mu","\\mathrm{M}");Z("\\natnums","\\mathbb{N}");Z("\\Nu","\\mathrm{N}");Z("\\Omicron","\\mathrm{O}");Z("\\plusmn","\\pm");Z("\\rarr","\\rightarrow");Z("\\rArr","\\Rightarrow");Z("\\Rarr","\\Rightarrow");Z("\\real","\\Re");Z("\\reals","\\mathbb{R}");Z("\\Reals","\\mathbb{R}");Z("\\Rho","\\mathrm{P}");Z("\\sdot","\\cdot");Z("\\sect","\\S");Z("\\spades","\\spadesuit");Z("\\sub","\\subset");Z("\\sube","\\subseteq");Z("\\supe","\\supseteq");Z("\\Tau","\\mathrm{T}");Z("\\thetasym","\\vartheta");Z("\\weierp","\\wp");Z("\\Zeta","\\mathrm{Z}");Z("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");Z("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");Z("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");Z("\\bra","\\mathinner{\\langle{#1}|}");Z("\\ket","\\mathinner{|{#1}\\rangle}");Z("\\braket","\\mathinner{\\langle{#1}\\rangle}");Z("\\Bra","\\left\\langle#1\\right|");Z("\\Ket","\\left|#1\\right\\rangle");var WH=i=>e=>{var t=e.consumeArg().tokens,n=e.consumeArg().tokens,r=e.consumeArg().tokens,s=e.consumeArg().tokens,a=e.macros.get("|"),o=e.macros.get("\\|");e.macros.beginGroup();var l=h=>d=>{i&&(d.macros.set("|",a),r.length&&d.macros.set("\\|",o));var f=h;if(!h&&r.length){var m=d.future();m.text==="|"&&(d.popToken(),f=!0)}return{tokens:f?r:n,numArgs:0}};e.macros.set("|",l(!1)),r.length&&e.macros.set("\\|",l(!0));var c=e.consumeArg().tokens,u=e.expandTokens([...s,...c,...t]);return e.macros.endGroup(),{tokens:u.reverse(),numArgs:0}};Z("\\bra@ket",WH(!1));Z("\\bra@set",WH(!0));Z("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");Z("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");Z("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");Z("\\angln","{\\angl n}");Z("\\blue","\\textcolor{##6495ed}{#1}");Z("\\orange","\\textcolor{##ffa500}{#1}");Z("\\pink","\\textcolor{##ff00af}{#1}");Z("\\red","\\textcolor{##df0030}{#1}");Z("\\green","\\textcolor{##28ae7b}{#1}");Z("\\gray","\\textcolor{gray}{#1}");Z("\\purple","\\textcolor{##9d38bd}{#1}");Z("\\blueA","\\textcolor{##ccfaff}{#1}");Z("\\blueB","\\textcolor{##80f6ff}{#1}");Z("\\blueC","\\textcolor{##63d9ea}{#1}");Z("\\blueD","\\textcolor{##11accd}{#1}");Z("\\blueE","\\textcolor{##0c7f99}{#1}");Z("\\tealA","\\textcolor{##94fff5}{#1}");Z("\\tealB","\\textcolor{##26edd5}{#1}");Z("\\tealC","\\textcolor{##01d1c1}{#1}");Z("\\tealD","\\textcolor{##01a995}{#1}");Z("\\tealE","\\textcolor{##208170}{#1}");Z("\\greenA","\\textcolor{##b6ffb0}{#1}");Z("\\greenB","\\textcolor{##8af281}{#1}");Z("\\greenC","\\textcolor{##74cf70}{#1}");Z("\\greenD","\\textcolor{##1fab54}{#1}");Z("\\greenE","\\textcolor{##0d923f}{#1}");Z("\\goldA","\\textcolor{##ffd0a9}{#1}");Z("\\goldB","\\textcolor{##ffbb71}{#1}");Z("\\goldC","\\textcolor{##ff9c39}{#1}");Z("\\goldD","\\textcolor{##e07d10}{#1}");Z("\\goldE","\\textcolor{##a75a05}{#1}");Z("\\redA","\\textcolor{##fca9a9}{#1}");Z("\\redB","\\textcolor{##ff8482}{#1}");Z("\\redC","\\textcolor{##f9685d}{#1}");Z("\\redD","\\textcolor{##e84d39}{#1}");Z("\\redE","\\textcolor{##bc2612}{#1}");Z("\\maroonA","\\textcolor{##ffbde0}{#1}");Z("\\maroonB","\\textcolor{##ff92c6}{#1}");Z("\\maroonC","\\textcolor{##ed5fa6}{#1}");Z("\\maroonD","\\textcolor{##ca337c}{#1}");Z("\\maroonE","\\textcolor{##9e034e}{#1}");Z("\\purpleA","\\textcolor{##ddd7ff}{#1}");Z("\\purpleB","\\textcolor{##c6b9fc}{#1}");Z("\\purpleC","\\textcolor{##aa87ff}{#1}");Z("\\purpleD","\\textcolor{##7854ab}{#1}");Z("\\purpleE","\\textcolor{##543b78}{#1}");Z("\\mintA","\\textcolor{##f5f9e8}{#1}");Z("\\mintB","\\textcolor{##edf2df}{#1}");Z("\\mintC","\\textcolor{##e0e5cc}{#1}");Z("\\grayA","\\textcolor{##f6f7f7}{#1}");Z("\\grayB","\\textcolor{##f0f1f2}{#1}");Z("\\grayC","\\textcolor{##e3e5e6}{#1}");Z("\\grayD","\\textcolor{##d6d8da}{#1}");Z("\\grayE","\\textcolor{##babec2}{#1}");Z("\\grayF","\\textcolor{##888d93}{#1}");Z("\\grayG","\\textcolor{##626569}{#1}");Z("\\grayH","\\textcolor{##3b3e40}{#1}");Z("\\grayI","\\textcolor{##21242c}{#1}");Z("\\kaBlue","\\textcolor{##314453}{#1}");Z("\\kaGreen","\\textcolor{##71B307}{#1}");var $H={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class cdt{constructor(e,t,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new odt(ldt,t.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new n9(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,n,r;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;t=this.popToken(),{tokens:r,end:n}=this.consumeArg(["]"])}else({tokens:r,start:t,end:n}=this.consumeArg());return this.pushToken(new uh("EOF",n.loc)),this.pushTokens(r),t.range(n,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var t=[],n=e&&e.length>0;n||this.consumeSpaces();var r=this.future(),s,a=0,o=0;do{if(s=this.popToken(),t.push(s),s.text==="{")++a;else if(s.text==="}"){if(--a,a===-1)throw new Ot("Extra }",s)}else if(s.text==="EOF")throw new Ot("Unexpected end of input in a macro argument, expected '"+(e&&n?e[o]:"}")+"'",s);if(e&&n)if((a===0||a===1&&e[o]==="{")&&s.text===e[o]){if(++o,o===e.length){t.splice(-o,o);break}}else o=0}while(a!==0||n);return r.text==="{"&&t[t.length-1].text==="}"&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:r,end:s}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new Ot("The length of delimiters doesn't match the number of args!");for(var n=t[0],r=0;r<n.length;r++){var s=this.popToken();if(n[r]!==s.text)throw new Ot("Use of the macro doesn't match its definition",s)}}for(var a=[],o=0;o<e;o++)a.push(this.consumeArg(t&&t[o+1]).tokens);return a}expandOnce(e){var t=this.popToken(),n=t.text,r=t.noexpand?null:this._getExpansion(n);if(r==null||e&&r.unexpandable){if(e&&r==null&&n[0]==="\\"&&!this.isDefined(n))throw new Ot("Undefined control sequence: "+n);return this.pushToken(t),!1}if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new Ot("Too many expansions: infinite loop or need to increase maxExpand setting");var s=r.tokens,a=this.consumeArgs(r.numArgs,r.delimiters);if(r.numArgs){s=s.slice();for(var o=s.length-1;o>=0;--o){var l=s[o];if(l.text==="#"){if(o===0)throw new Ot("Incomplete placeholder at end of macro body",l);if(l=s[--o],l.text==="#")s.splice(o+1,1);else if(/^[1-9]$/.test(l.text))s.splice(o,2,...a[+l.text-1]);else throw new Ot("Not a valid argument number",l)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new uh(e)]):void 0}expandTokens(e){var t=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var r=this.stack.pop();r.treatAsRelax&&(r.noexpand=!1,r.treatAsRelax=!1),t.push(r)}return t}expandMacroAsText(e){var t=this.expandMacro(e);return t&&t.map(n=>n.text).join("")}_getExpansion(e){var t=this.macros.get(e);if(t==null)return t;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var r=typeof t=="function"?t(this):t;if(typeof r=="string"){var s=0;if(r.indexOf("#")!==-1)for(var a=r.replace(/##/g,"");a.indexOf("#"+(s+1))!==-1;)++s;for(var o=new n9(r,this.settings),l=[],c=o.lex();c.text!=="EOF";)l.push(c),c=o.lex();l.reverse();var u={tokens:l,numArgs:s};return u}return r}isDefined(e){return this.macros.has(e)||Mf.hasOwnProperty(e)||Ur.math.hasOwnProperty(e)||Ur.text.hasOwnProperty(e)||$H.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return t!=null?typeof t=="string"||typeof t=="function"||!t.unexpandable:Mf.hasOwnProperty(e)&&!Mf[e].primitive}}var s9=/^[]/,Mw=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),v3={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},a9={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class H1{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new cdt(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(t===void 0&&(t=!0),this.fetch().text!==e)throw new Ot("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new uh("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,n}parseExpression(e,t){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var r=this.fetch();if(H1.endOfExpression.indexOf(r.text)!==-1||t&&r.text===t||e&&Mf[r.text]&&Mf[r.text].infix)break;var s=this.parseAtom(t);if(s){if(s.type==="internal")continue}else break;n.push(s)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var t=-1,n,r=0;r<e.length;r++)if(e[r].type==="infix"){if(t!==-1)throw new Ot("only one infix operator per group",e[r].token);t=r,n=e[r].replaceWith}if(t!==-1&&n){var s,a,o=e.slice(0,t),l=e.slice(t+1);o.length===1&&o[0].type==="ordgroup"?s=o[0]:s={type:"ordgroup",mode:this.mode,body:o},l.length===1&&l[0].type==="ordgroup"?a=l[0]:a={type:"ordgroup",mode:this.mode,body:l};var c;return n==="\\\\abovefrac"?c=this.callFunction(n,[s,e[t],a],[]):c=this.callFunction(n,[s,a],[]),[c]}else return e}handleSupSubscript(e){var t=this.fetch(),n=t.text;this.consume(),this.consumeSpaces();var r=this.parseGroup(e);if(!r)throw new Ot("Expected group after '"+n+"'",t);return r}formatUnsupportedCmd(e){for(var t=[],n=0;n<e.length;n++)t.push({type:"textord",mode:"text",text:e[n]});var r={type:"text",mode:this.mode,body:t},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[r]};return s}parseAtom(e){var t=this.parseGroup("atom",e);if(this.mode==="text")return t;for(var n,r;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(t&&t.type==="op"){var a=s.text==="\\limits";t.limits=a,t.alwaysHandleSupSub=!0}else if(t&&t.type==="operatorname")t.alwaysHandleSupSub&&(t.limits=s.text==="\\limits");else throw new Ot("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(n)throw new Ot("Double superscript",s);n=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(r)throw new Ot("Double subscript",s);r=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(n)throw new Ot("Double superscript",s);var o={type:"textord",mode:this.mode,text:"\\prime"},l=[o];for(this.consume();this.fetch().text==="'";)l.push(o),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:l}}else if(Mw[s.text]){var c=Mw[s.text],u=s9.test(s.text);for(this.consume();;){var h=this.fetch().text;if(!Mw[h]||s9.test(h)!==u)break;this.consume(),c+=Mw[h]}var d=new H1(c,this.settings).parse();u?r={type:"ordgroup",mode:"math",body:d}:n={type:"ordgroup",mode:"math",body:d}}else break}return n||r?{type:"supsub",mode:this.mode,base:t,sup:n,sub:r}:t}parseFunction(e,t){var n=this.fetch(),r=n.text,s=Mf[r];if(!s)return null;if(this.consume(),t&&t!=="atom"&&!s.allowedInArgument)throw new Ot("Got function '"+r+"' with no arguments"+(t?" as "+t:""),n);if(this.mode==="text"&&!s.allowedInText)throw new Ot("Can't use function '"+r+"' in text mode",n);if(this.mode==="math"&&s.allowedInMath===!1)throw new Ot("Can't use function '"+r+"' in math mode",n);var{args:a,optArgs:o}=this.parseArguments(r,s);return this.callFunction(r,a,o,n,e)}callFunction(e,t,n,r,s){var a={funcName:e,parser:this,token:r,breakOnTokenText:s},o=Mf[e];if(o&&o.handler)return o.handler(a,t,n);throw new Ot("No function handler for "+e)}parseArguments(e,t){var n=t.numArgs+t.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var r=[],s=[],a=0;a<n;a++){var o=t.argTypes&&t.argTypes[a],l=a<t.numOptionalArgs;(t.primitive&&o==null||t.type==="sqrt"&&a===1&&s[0]==null)&&(o="primitive");var c=this.parseGroupOfType("argument to '"+e+"'",o,l);if(l)s.push(c);else if(c!=null)r.push(c);else throw new Ot("Null argument, please report this as a bug")}return{args:r,optArgs:s}}parseGroupOfType(e,t,n){switch(t){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,t);case"hbox":{var r=this.parseArgumentGroup(n,"text");return r!=null?{type:"styling",mode:r.mode,body:[r],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",n);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(n)throw new Ot("A primitive argument cannot be optional");var a=this.parseGroup(e);if(a==null)throw new Ot("Expected group as "+e,this.fetch());return a}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new Ot("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,t){var n=this.gullet.scanArgument(t);if(n==null)return null;for(var r="",s;(s=this.fetch()).text!=="EOF";)r+=s.text,this.consume();return this.consume(),n.text=r,n}parseRegexGroup(e,t){for(var n=this.fetch(),r=n,s="",a;(a=this.fetch()).text!=="EOF"&&e.test(s+a.text);)r=a,s+=r.text,this.consume();if(s==="")throw new Ot("Invalid "+t+": '"+n.text+"'",n);return n.range(r,s)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(t==null)return null;var n=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!n)throw new Ot("Invalid color: '"+t.text+"'",t);var r=n[0];return/^[0-9a-f]{6}$/i.test(r)&&(r="#"+r),{type:"color-token",mode:this.mode,color:r}}parseSizeGroup(e){var t,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?t=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):t=this.parseStringGroup("size",e),!t)return null;!e&&t.text.length===0&&(t.text="0pt",n=!0);var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!r)throw new Ot("Invalid size: '"+t.text+"'",t);var s={number:+(r[1]+r[2]),unit:r[3]};if(!rH(s))throw new Ot("Invalid unit: '"+s.unit+"'",t);return{type:"size",mode:this.mode,value:s,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),t==null)return null;var n=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,t){var n=this.gullet.scanArgument(e);if(n==null)return null;var r=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var a={type:"ordgroup",mode:this.mode,loc:n.loc,body:s};return t&&this.switchMode(r),a}parseGroup(e,t){var n=this.fetch(),r=n.text,s;if(r==="{"||r==="\\begingroup"){this.consume();var a=r==="{"?"}":"\\endgroup";this.gullet.beginGroup();var o=this.parseExpression(!1,a),l=this.fetch();this.expect(a),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:Gl.range(n,l),body:o,semisimple:r==="\\begingroup"||void 0}}else if(s=this.parseFunction(t,e)||this.parseSymbol(),s==null&&r[0]==="\\"&&!$H.hasOwnProperty(r)){if(this.settings.throwOnError)throw new Ot("Undefined control sequence: "+r,n);s=this.formatUnsupportedCmd(r),this.consume()}return s}formLigatures(e){for(var t=e.length-1,n=0;n<t;++n){var r=e[n],s=r.text;s==="-"&&e[n+1].text==="-"&&(n+1<t&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:Gl.range(r,e[n+2]),text:"---"}),t-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:Gl.range(r,e[n+1]),text:"--"}),t-=1)),(s==="'"||s==="`")&&e[n+1].text===s&&(e.splice(n,2,{type:"textord",mode:"text",loc:Gl.range(r,e[n+1]),text:s+s}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var n=t.slice(5),r=n.charAt(0)==="*";if(r&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new Ot(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:r}}a9.hasOwnProperty(t[0])&&!Ur[this.mode][t[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=a9[t[0]]+t.slice(1));var s=sdt.exec(t);s&&(t=t.substring(0,s.index),t==="i"?t="":t==="j"&&(t=""));var a;if(Ur[this.mode][t]){this.settings.strict&&this.mode==="math"&&oT.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var o=Ur[this.mode][t].group,l=Gl.range(e),c;if(Kut.hasOwnProperty(o)){var u=o;c={type:"atom",mode:this.mode,family:u,loc:l,text:t}}else c={type:o,mode:this.mode,loc:l,text:t};a=c}else if(t.charCodeAt(0)>=128)this.settings.strict&&(iH(t.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'"'+(" ("+t.charCodeAt(0)+")"),e)),a={type:"textord",mode:"text",loc:Gl.range(e),text:t};else return null;if(this.consume(),s)for(var h=0;h<s[0].length;h++){var d=s[0][h];if(!v3[d])throw new Ot("Unknown accent ' "+d+"'",e);var f=v3[d][this.mode]||v3[d].text;if(!f)throw new Ot("Accent "+d+" unsupported in "+this.mode+" mode",e);a={type:"accent",mode:this.mode,loc:Gl.range(e),label:f,isStretchy:!1,isShifty:!0,base:a}}return a}}H1.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var yP=function(e,t){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new H1(e,t);delete n.gullet.macros.current["\\df@tag"];var r=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new Ot("\\tag works only in display equations");r=[{type:"tag",mode:"text",body:r,tag:n.subparse([new uh("\\df@tag")])}]}return r},XH=function(e,t,n){t.textContent="";var r=wP(e,n).toNode();t.appendChild(r)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),XH=function(){throw new Ot("KaTeX doesn't work in quirks mode.")});var udt=function(e,t){var n=wP(e,t).toMarkup();return n},hdt=function(e,t){var n=new iP(t);return yP(e,n)},YH=function(e,t,n){if(n.throwOnError||!(e instanceof Ot))throw e;var r=Xe.makeSpan(["katex-error"],[new Lc(t)]);return r.setAttribute("title",e.toString()),r.setAttribute("style","color:"+n.errorColor),r},wP=function(e,t){var n=new iP(t);try{var r=yP(e,n);return bht(r,e,n)}catch(s){return YH(s,e,n)}},ddt=function(e,t){var n=new iP(t);try{var r=yP(e,n);return yht(r,e,n)}catch(s){return YH(s,e,n)}},G1={version:"0.16.8",render:XH,renderToString:udt,ParseError:Ot,SETTINGS_SCHEMA:nx,__parse:hdt,__renderToDomTree:wP,__renderToHTMLTree:ddt,__setFontMetrics:Qut,__defineSymbol:D,__defineFunction:Zt,__defineMacro:Z,__domTree:{Span:_b,Anchor:aP,SymbolNode:Lc,SvgNode:Cd,PathNode:Kf,LineNode:aT}};function l1(i){return i.toFixed(1).replace(/[.,]0$/,"")}function fdt(i){let e,t,n;return{c(){e=ft("span"),t=new i2(!1),this.h()},l(r){e=pt(r,"SPAN",{class:!0});var s=zt(e);t=r2(s,!1),s.forEach(ae),this.h()},h(){t.a=null,Je(e,"class",n=(i[1]?"text-xl":"text-2xl")+" bg-base-300/50 inline-block"),dl(e,"opacity",i[0])},m(r,s){Fe(r,e,s),t.m(i[4],e),i[13](e)},p(r,s){s&16&&t.p(r[4]),s&2&&n!==(n=(r[1]?"text-xl":"text-2xl")+" bg-base-300/50 inline-block")&&Je(e,"class",n),s&1&&dl(e,"opacity",r[0])},d(r){r&&ae(e),i[13](null)}}}function pdt(i){let e,t;return e=new pN({props:{position:i[3],center:!0,$$slots:{default:[fdt]},$$scope:{ctx:i}}}),{c(){ot(e.$$.fragment)},l(n){lt(e.$$.fragment,n)},m(n,r){ct(e,n,r),t=!0},p(n,[r]){const s={};r&8&&(s.position=n[3]),r&131095&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(we(e.$$.fragment,n),t=!0)},o(n){Me(e.$$.fragment,n),t=!1},d(n){ut(e,n)}}}function mdt(i,e,t){let n,r,s,a,o,l,c,u,h,{coords:d}=e,{opacity:f}=e,{dim3:m=!1}=e,A,_,v,w;Fc(()=>{t(2,w.parentElement.style.pointerEvents="none",w)});function x(C){Wa[C?"unshift":"push"](()=>{w=C,t(2,w)})}return i.$$set=C=>{"coords"in C&&t(5,d=C.coords),"opacity"in C&&t(0,f=C.opacity),"dim3"in C&&t(1,m=C.dim3)},i.$$.update=()=>{if(i.$$.dirty&32&&t(11,[n,r,s,a,o,l]=d,a,(t(10,o),t(5,d)),(t(9,l),t(5,d))),i.$$.dirty&3072&&t(12,c=Math.atan2(o,a)),i.$$.dirty&7682)if(m){const S=Math.sqrt(a*a+o*o+l*l),I=Math.acos(l/S);t(6,A=.4*Math.sin(I)*Math.cos(c)),t(7,_=.4*Math.sin(I)*Math.sin(c)),t(8,v=.4*Math.cos(I))}else t(6,A=.6*Math.cos(c)),t(7,_=.6*Math.sin(c)),t(8,v=0);i.$$.dirty&3586&&t(4,u=G1.renderToString(String.raw`\left[\begin{array}{r}
  ${l1(a)} \\
  ${l1(o)} \\
  ${m?`${l1(l)}`:""}
  \end{array}\right]`)),i.$$.dirty&4032&&t(3,h=[a+A,o+_,l+v])},[f,m,w,h,u,d,A,_,v,l,o,a,c,x]}class gdt extends Sn{constructor(e){super(),Mn(this,e,mdt,pdt,gn,{coords:5,opacity:0,dim3:1})}}function A3(i){const e=i.slice(),t=e[5]?[e[11]/2,e[10]/2,e[9]/2]:[e[11]/2+e[6],e[10]/2+e[7],e[9]/2];return e[23]=t,e}function o9(i){let e,t,n,r;e=new gdt({props:{coords:i[0],opacity:i[2],dim3:i[5]}});let s=i[3]&&l9(A3(i));return{c(){ot(e.$$.fragment),t=Ct(),s&&s.c(),n=ca()},l(a){lt(e.$$.fragment,a),t=Et(a),s&&s.l(a),n=ca()},m(a,o){ct(e,a,o),Fe(a,t,o),s&&s.m(a,o),Fe(a,n,o),r=!0},p(a,o){const l={};o&1&&(l.coords=a[0]),o&4&&(l.opacity=a[2]),o&32&&(l.dim3=a[5]),e.$set(l),a[3]?s?(s.p(A3(a),o),o&8&&we(s,1)):(s=l9(A3(a)),s.c(),we(s,1),s.m(n.parentNode,n)):s&&(Hs(),Me(s,1,1,()=>{s=null}),Gs())},i(a){r||(we(e.$$.fragment,a),we(s),r=!0)},o(a){Me(e.$$.fragment,a),Me(s),r=!1},d(a){a&&(ae(t),ae(n)),ut(e,a),s&&s.d(a)}}}function l9(i){let e,t;return e=new pN({props:{position:i[23],center:!0,$$slots:{default:[vdt]},$$scope:{ctx:i}}}),{c(){ot(e.$$.fragment)},l(n){lt(e.$$.fragment,n)},m(n,r){ct(e,n,r),t=!0},p(n,r){const s={};r&3808&&(s.position=n[23]),r&16777496&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(we(e.$$.fragment,n),t=!0)},o(n){Me(e.$$.fragment,n),t=!1},d(n){ut(e,n)}}}function vdt(i){let e,t,n=G1.renderToString(String.raw`\times ${l1(i[3])}`)+"";return{c(){e=ft("span"),t=new i2(!1),this.h()},l(r){e=pt(r,"SPAN",{class:!0});var s=zt(e);t=r2(s,!1),s.forEach(ae),this.h()},h(){t.a=null,Je(e,"class","text-xl whitespace-nowrap"),dl(e,"opacity",i[4])},m(r,s){Fe(r,e,s),t.m(n,e),i[16](e)},p(r,s){s&8&&n!==(n=G1.renderToString(String.raw`\times ${l1(r[3])}`)+"")&&t.p(n),s&16&&dl(e,"opacity",r[4])},d(r){r&&ae(e),i[16](null)}}}function Adt(i){let e,t,n=i[1]&&o9(i);return{c(){n&&n.c(),e=ca()},l(r){n&&n.l(r),e=ca()},m(r,s){n&&n.m(r,s),Fe(r,e,s),t=!0},p(r,[s]){r[1]?n?(n.p(r,s),s&2&&we(n,1)):(n=o9(r),n.c(),we(n,1),n.m(e.parentNode,e)):n&&(Hs(),Me(n,1,1,()=>{n=null}),Gs())},i(r){t||(we(n),t=!0)},o(r){Me(n),t=!1},d(r){r&&ae(e),n&&n.d(r)}}}const Tw=.4;function _dt(i,e,t){let n,r,s,a,o,l,{view:c}=e,{coords:u=[0,0,0,-1,2,0]}=e,{color:h="white"}=e,{tex:d=!0}=e,{texOpacity:f=1}=e,{scalar:m=!1}=e,{scalarOpacity:A=1}=e,{scalarAlign:_="center"}=e,{visible:v=!0}=e,{dim3:w=!1}=e;const x={end:!0,width:3,zBias:1e3,zIndex:3,width:3,color:h,visible:v},C=c.array({data:u,width:2,items:2,channels:3}),S=c.vector({...x});let I,P,k;Fc(()=>{k&&t(8,k.parentElement.style.pointerEvents="none",k)});function M(R){Wa[R?"unshift":"push"](()=>{k=R,t(8,k)})}return i.$$set=R=>{"view"in R&&t(12,c=R.view),"coords"in R&&t(0,u=R.coords),"color"in R&&t(13,h=R.color),"tex"in R&&t(1,d=R.tex),"texOpacity"in R&&t(2,f=R.texOpacity),"scalar"in R&&t(3,m=R.scalar),"scalarOpacity"in R&&t(4,A=R.scalarOpacity),"scalarAlign"in R&&t(14,_=R.scalarAlign),"visible"in R&&t(15,v=R.visible),"dim3"in R&&t(5,w=R.dim3)},i.$$.update=()=>{i.$$.dirty&1&&t(11,[n,r,s,a,o,l]=u,a,(t(10,o),t(0,u)),(t(9,l),t(0,u))),i.$$.dirty&1&&C.set("data",u),i.$$.dirty&32768&&S.set("visible",v),i.$$.dirty&16384&&(_=="center"?(t(6,I=0),t(7,P=0)):_=="left"?(t(6,I=Tw*1.5),t(7,P=0)):_=="top"?(t(6,I=0),t(7,P=-Tw)):_=="right"?(t(6,I=-Tw),t(7,P=0)):_=="bottom"&&(t(6,I=0),t(7,P=Tw)))},[u,d,f,m,A,w,I,P,k,l,o,a,c,h,_,v,M]}class ff extends Sn{constructor(e){super(),Mn(this,e,_dt,Adt,gn,{view:12,coords:0,color:13,tex:1,texOpacity:2,scalar:3,scalarOpacity:4,scalarAlign:14,visible:15,dim3:5})}}var fT={exports:{}};(function(i,e){(function(t,n){n(e)})(dt,function(t){function n(He,X){for(var xe=0;xe<X.length;xe++){var ie=X[xe];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(He,ie.key,ie)}}function r(He,X,xe){return X&&n(He.prototype,X),xe&&n(He,xe),He}/*!
 * Observer 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var s,a,o,l,c,u,h,d,f,m,A,_,v,w=function(){return s||typeof window<"u"&&(s=window.gsap)&&s.registerPlugin&&s},x=1,C=[],S=[],I=[],P=Date.now,k=function(X,xe){return xe},M=function(){var X=f.core,xe=X.bridge||{},ie=X._scrollers,re=X._proxies;ie.push.apply(ie,S),re.push.apply(re,I),S=ie,I=re,k=function(at,Ye){return xe[at](Ye)}},R=function(X,xe){return~I.indexOf(X)&&I[I.indexOf(X)+1][xe]},N=function(X){return!!~m.indexOf(X)},U=function(X,xe,ie,re,Oe){return X.addEventListener(xe,ie,{passive:!re,capture:!!Oe})},q=function(X,xe,ie,re){return X.removeEventListener(xe,ie,!!re)},W="scrollLeft",F="scrollTop",ue=function(){return A&&A.isPressed||S.cache++},J=function(X,xe){var ie=function re(Oe){if(Oe||Oe===0){x&&(o.history.scrollRestoration="manual");var at=A&&A.isPressed;Oe=re.v=Math.round(Oe)||(A&&A.iOS?1:0),X(Oe),re.cacheID=S.cache,at&&k("ss",Oe)}else(xe||S.cache!==re.cacheID||k("ref"))&&(re.cacheID=S.cache,re.v=X());return re.v+re.offset};return ie.offset=0,X&&ie},Y={s:W,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:J(function(He){return arguments.length?o.scrollTo(He,Pe.sc()):o.pageXOffset||l[W]||c[W]||u[W]||0})},Pe={s:F,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Y,sc:J(function(He){return arguments.length?o.scrollTo(Y.sc(),He):o.pageYOffset||l[F]||c[F]||u[F]||0})},Ie=function(X,xe){return(xe&&xe._ctx&&xe._ctx.selector||s.utils.toArray)(X)[0]||(typeof X=="string"&&s.config().nullTargetWarn!==!1?console.warn("Element not found:",X):null)},pe=function(X,xe){var ie=xe.s,re=xe.sc;N(X)&&(X=l.scrollingElement||c);var Oe=S.indexOf(X),at=re===Pe.sc?1:2;!~Oe&&(Oe=S.push(X)-1),S[Oe+at]||U(X,"scroll",ue);var Ye=S[Oe+at],qt=Ye||(S[Oe+at]=J(R(X,ie),!0)||(N(X)?re:J(function(Bn){return arguments.length?X[ie]=Bn:X[ie]})));return qt.target=X,Ye||(qt.smooth=s.getProperty(X,"scrollBehavior")==="smooth"),qt},Ce=function(X,xe,ie){var re=X,Oe=X,at=P(),Ye=at,qt=xe||50,Bn=Math.max(500,qt*3),ti=function(hn,Mi){var ar=P();Mi||ar-at>qt?(Oe=re,re=hn,Ye=at,at=ar):ie?re+=hn:re=Oe+(hn-Oe)/(ar-Ye)*(at-Ye)},an=function(){Oe=re=ie?0:re,Ye=at=0},on=function(hn){var Mi=Ye,ar=Oe,mr=P();return(hn||hn===0)&&hn!==re&&ti(hn),at===Ye||mr-Ye>Bn?0:(re+(ie?ar:-ar))/((ie?mr:at)-Mi)*1e3};return{update:ti,reset:an,getVelocity:on}},G=function(X,xe){return xe&&!X._gsapAllow&&X.preventDefault(),X.changedTouches?X.changedTouches[0]:X},oe=function(X){var xe=Math.max.apply(Math,X),ie=Math.min.apply(Math,X);return Math.abs(xe)>=Math.abs(ie)?xe:ie},je=function(){f=s.core.globals().ScrollTrigger,f&&f.core&&M()},Tt=function(X){return s=X||w(),s&&typeof document<"u"&&document.body&&(o=window,l=document,c=l.documentElement,u=l.body,m=[o,l,c,u],s.utils.clamp,v=s.core.context||function(){},d="onpointerenter"in u?"pointer":"mouse",h=rt.isTouch=o.matchMedia&&o.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in o||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,_=rt.eventTypes=("ontouchstart"in c?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in c?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return x=0},500),je(),a=1),a};Y.op=Pe,S.cache=0;var rt=function(){function He(xe){this.init(xe)}var X=He.prototype;return X.init=function(ie){a||Tt(s)||console.warn("Please gsap.registerPlugin(Observer)"),f||je();var re=ie.tolerance,Oe=ie.dragMinimum,at=ie.type,Ye=ie.target,qt=ie.lineHeight,Bn=ie.debounce,ti=ie.preventDefault,an=ie.onStop,on=ie.onStopDelay,vt=ie.ignore,hn=ie.wheelSpeed,Mi=ie.event,ar=ie.onDragStart,mr=ie.onDragEnd,gr=ie.onDrag,_s=ie.onPress,dn=ie.onRelease,$s=ie.onRight,nr=ie.onLeft,In=ie.onUp,Yr=ie.onDown,Os=ie.onChangeX,fn=ie.onChangeY,br=ie.onChange,On=ie.onToggleX,wo=ie.onToggleY,yr=ie.onHover,bs=ie.onHoverEnd,Kr=ie.onMove,bi=ie.ignoreCheck,wr=ie.isNormalizer,or=ie.onGestureStart,We=ie.onGestureEnd,as=ie.onWheel,Qc=ie.onEnable,Pa=ie.onDisable,Ns=ie.onClick,os=ie.scrollSpeed,Xs=ie.capture,Jr=ie.allowClicks,Ys=ie.lockAxis,Ks=ie.onLockAxis;this.target=Ye=Ie(Ye)||c,this.vars=ie,vt&&(vt=s.utils.toArray(vt)),re=re||1e-9,Oe=Oe||0,hn=hn||1,os=os||1,at=at||"wheel,touch,pointer",Bn=Bn!==!1,qt||(qt=parseFloat(o.getComputedStyle(u).lineHeight)||22);var cc,Zr,Js,Se,it,Ke,Ht,Ve=this,Wn=0,Vi=0,Jt=pe(Ye,Y),ji=pe(Ye,Pe),qc=Jt(),ys=ji(),Go=~at.indexOf("touch")&&!~at.indexOf("pointer")&&_[0]==="pointerdown",Tr=N(Ye),Ti=Ye.ownerDocument||l,ka=[0,0,0],vr=[0,0,0],gi=0,Qo=function(){return gi=P()},eo=function(An,xi){return(Ve.event=An)&&vt&&~vt.indexOf(An.target)||xi&&Go&&An.pointerType!=="touch"||bi&&bi(An,xi)},ws=function(){Ve._vx.reset(),Ve._vy.reset(),Zr.pause(),an&&an(Ve)},uc=function(){var An=Ve.deltaX=oe(ka),xi=Ve.deltaY=oe(vr),Ir=Math.abs(An)>=re,en=Math.abs(xi)>=re;br&&(Ir||en)&&br(Ve,An,xi,ka,vr),Ir&&($s&&Ve.deltaX>0&&$s(Ve),nr&&Ve.deltaX<0&&nr(Ve),Os&&Os(Ve),On&&Ve.deltaX<0!=Wn<0&&On(Ve),Wn=Ve.deltaX,ka[0]=ka[1]=ka[2]=0),en&&(Yr&&Ve.deltaY>0&&Yr(Ve),In&&Ve.deltaY<0&&In(Ve),fn&&fn(Ve),wo&&Ve.deltaY<0!=Vi<0&&wo(Ve),Vi=Ve.deltaY,vr[0]=vr[1]=vr[2]=0),(Se||Js)&&(Kr&&Kr(Ve),Js&&(gr(Ve),Js=!1),Se=!1),Ke&&!(Ke=!1)&&Ks&&Ks(Ve),it&&(as(Ve),it=!1),cc=0},jc=function(An,xi,Ir){ka[Ir]+=An,vr[Ir]+=xi,Ve._vx.update(An),Ve._vy.update(xi),Bn?cc||(cc=requestAnimationFrame(uc)):uc()},Wc=function(An,xi){Ys&&!Ht&&(Ve.axis=Ht=Math.abs(An)>Math.abs(xi)?"x":"y",Ke=!0),Ht!=="y"&&(ka[2]+=An,Ve._vx.update(An,!0)),Ht!=="x"&&(vr[2]+=xi,Ve._vy.update(xi,!0)),Bn?cc||(cc=requestAnimationFrame(uc)):uc()},xo=function(An){if(!eo(An,1)){An=G(An,ti);var xi=An.clientX,Ir=An.clientY,en=xi-Ve.x,ni=Ir-Ve.y,_n=Ve.isDragging;Ve.x=xi,Ve.y=Ir,(_n||Math.abs(Ve.startX-xi)>=Oe||Math.abs(Ve.startY-Ir)>=Oe)&&(gr&&(Js=!0),_n||(Ve.isDragging=!0),Wc(en,ni),_n||ar&&ar(Ve))}},Zs=Ve.onPress=function(Gn){eo(Gn,1)||Gn&&Gn.button||(Ve.axis=Ht=null,Zr.pause(),Ve.isPressed=!0,Gn=G(Gn),Wn=Vi=0,Ve.startX=Ve.x=Gn.clientX,Ve.startY=Ve.y=Gn.clientY,Ve._vx.reset(),Ve._vy.reset(),U(wr?Ye:Ti,_[1],xo,ti,!0),Ve.deltaX=Ve.deltaY=0,_s&&_s(Ve))},to=Ve.onRelease=function(Gn){if(!eo(Gn,1)){q(wr?Ye:Ti,_[1],xo,!0);var An=!isNaN(Ve.y-Ve.startY),xi=Ve.isDragging&&(Math.abs(Ve.x-Ve.startX)>3||Math.abs(Ve.y-Ve.startY)>3),Ir=G(Gn);!xi&&An&&(Ve._vx.reset(),Ve._vy.reset(),ti&&Jr&&s.delayedCall(.08,function(){if(P()-gi>300&&!Gn.defaultPrevented){if(Gn.target.click)Gn.target.click();else if(Ti.createEvent){var en=Ti.createEvent("MouseEvents");en.initMouseEvent("click",!0,!0,o,1,Ir.screenX,Ir.screenY,Ir.clientX,Ir.clientY,!1,!1,!1,!1,0,null),Gn.target.dispatchEvent(en)}}})),Ve.isDragging=Ve.isGesturing=Ve.isPressed=!1,an&&!wr&&Zr.restart(!0),mr&&xi&&mr(Ve),dn&&dn(Ve,xi)}},vi=function(An){return An.touches&&An.touches.length>1&&(Ve.isGesturing=!0)&&or(An,Ve.isDragging)},qo=function(){return(Ve.isGesturing=!1)||We(Ve)},Ga=function(An){if(!eo(An)){var xi=Jt(),Ir=ji();jc((xi-qc)*os,(Ir-ys)*os,1),qc=xi,ys=Ir,an&&Zr.restart(!0)}},no=function(An){if(!eo(An)){An=G(An,ti),as&&(it=!0);var xi=(An.deltaMode===1?qt:An.deltaMode===2?o.innerHeight:1)*hn;jc(An.deltaX*xi,An.deltaY*xi,0),an&&!wr&&Zr.restart(!0)}},ga=function(An){if(!eo(An)){var xi=An.clientX,Ir=An.clientY,en=xi-Ve.x,ni=Ir-Ve.y;Ve.x=xi,Ve.y=Ir,Se=!0,(en||ni)&&Wc(en,ni)}},kl=function(An){Ve.event=An,yr(Ve)},Co=function(An){Ve.event=An,bs(Ve)},ea=function(An){return eo(An)||G(An,ti)&&Ns(Ve)};Zr=Ve._dc=s.delayedCall(on||.25,ws).pause(),Ve.deltaX=Ve.deltaY=0,Ve._vx=Ce(0,50,!0),Ve._vy=Ce(0,50,!0),Ve.scrollX=Jt,Ve.scrollY=ji,Ve.isDragging=Ve.isGesturing=Ve.isPressed=!1,v(this),Ve.enable=function(Gn){return Ve.isEnabled||(U(Tr?Ti:Ye,"scroll",ue),at.indexOf("scroll")>=0&&U(Tr?Ti:Ye,"scroll",Ga,ti,Xs),at.indexOf("wheel")>=0&&U(Ye,"wheel",no,ti,Xs),(at.indexOf("touch")>=0&&h||at.indexOf("pointer")>=0)&&(U(Ye,_[0],Zs,ti,Xs),U(Ti,_[2],to),U(Ti,_[3],to),Jr&&U(Ye,"click",Qo,!1,!0),Ns&&U(Ye,"click",ea),or&&U(Ti,"gesturestart",vi),We&&U(Ti,"gestureend",qo),yr&&U(Ye,d+"enter",kl),bs&&U(Ye,d+"leave",Co),Kr&&U(Ye,d+"move",ga)),Ve.isEnabled=!0,Gn&&Gn.type&&Zs(Gn),Qc&&Qc(Ve)),Ve},Ve.disable=function(){Ve.isEnabled&&(C.filter(function(Gn){return Gn!==Ve&&N(Gn.target)}).length||q(Tr?Ti:Ye,"scroll",ue),Ve.isPressed&&(Ve._vx.reset(),Ve._vy.reset(),q(wr?Ye:Ti,_[1],xo,!0)),q(Tr?Ti:Ye,"scroll",Ga,Xs),q(Ye,"wheel",no,Xs),q(Ye,_[0],Zs,Xs),q(Ti,_[2],to),q(Ti,_[3],to),q(Ye,"click",Qo,!0),q(Ye,"click",ea),q(Ti,"gesturestart",vi),q(Ti,"gestureend",qo),q(Ye,d+"enter",kl),q(Ye,d+"leave",Co),q(Ye,d+"move",ga),Ve.isEnabled=Ve.isPressed=Ve.isDragging=!1,Pa&&Pa(Ve))},Ve.kill=Ve.revert=function(){Ve.disable();var Gn=C.indexOf(Ve);Gn>=0&&C.splice(Gn,1),A===Ve&&(A=0)},C.push(Ve),wr&&N(Ye)&&(A=Ve),Ve.enable(Mi)},r(He,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),He}();rt.version="3.12.2",rt.create=function(He){return new rt(He)},rt.register=Tt,rt.getAll=function(){return C.slice()},rt.getById=function(He){return C.filter(function(X){return X.vars.id===He})[0]},w()&&s.registerPlugin(rt);/*!
 * ScrollTrigger 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var De,xt,mt,et,st,ce,tt,he,be,Ne,nt,ze,me,fe,Be,V,$,ee,Te,te,Qe,Vt,ye,Ee,St,Rt,Bt,Qt,Nt,$t,Qn,de,It=1,$e=Date.now,Lt=$e(),Ft=0,Le=0,bn=function(X,xe,ie){var re=Ds(X)&&(X.substr(0,6)==="clamp("||X.indexOf("max")>-1);return ie["_"+xe+"Clamp"]=re,re?X.substr(6,X.length-7):X},_i=function(X,xe){return xe&&(!Ds(X)||X.substr(0,6)!=="clamp(")?"clamp("+X+")":X},gs=function He(){return Le&&requestAnimationFrame(He)},ei=function(){return fe=1},vs=function(){return fe=0},er=function(X){return X},fa=function(X){return Math.round(X*1e5)/1e5||0},El=function(){return typeof window<"u"},nc=function(){return De||El()&&(De=window.gsap)&&De.registerPlugin&&De},Ka=function(X){return!!~tt.indexOf(X)},Sl=function(X){return(X==="Height"?Qn:mt["inner"+X])||st["client"+X]||ce["client"+X]},Uc=function(X){return R(X,"getBoundingClientRect")||(Ka(X)?function(){return ma.width=mt.innerWidth,ma.height=Qn,ma}:function(){return hr(X)})},Mu=function(X,xe,ie){var re=ie.d,Oe=ie.d2,at=ie.a;return(at=R(X,"getBoundingClientRect"))?function(){return at()[re]}:function(){return(xe?Sl(Oe):X["client"+Oe])||0}},Nd=function(X,xe){return!xe||~I.indexOf(X)?Uc(X):function(){return ma}},_o=function(X,xe){var ie=xe.s,re=xe.d2,Oe=xe.d,at=xe.a;return Math.max(0,(ie="scroll"+re)&&(at=R(X,ie))?at()-Uc(X)()[Oe]:Ka(X)?(st[ie]||ce[ie])-Sl(re):X[ie]-X["offset"+re])},Tu=function(X,xe){for(var ie=0;ie<Te.length;ie+=3)(!xe||~xe.indexOf(Te[ie+1]))&&X(Te[ie],Te[ie+1],Te[ie+2])},Ds=function(X){return typeof X=="string"},se=function(X){return typeof X=="function"},Ze=function(X){return typeof X=="number"},ht=function(X){return typeof X=="object"},qe=function(X,xe,ie){return X&&X.progress(xe?0:1)&&ie&&X.pause()},gt=function(X,xe){if(X.enabled){var ie=xe(X);ie&&ie.totalTime&&(X.callbackAnimation=ie)}},Yt=Math.abs,un="left",sn="top",yn="right",Hn="bottom",vn="width",wn="height",tr="Right",Si="Left",rs="Top",js="Bottom",Xn="padding",Tn="margin",bo="Width",Mr="Height",ur="px",$r=function(X){return mt.getComputedStyle(X)},ic=function(X){var xe=$r(X).position;X.style.position=xe==="absolute"||xe==="fixed"?xe:"relative"},Ml=function(X,xe){for(var ie in xe)ie in X||(X[ie]=xe[ie]);return X},hr=function(X,xe){var ie=xe&&$r(X)[Be]!=="matrix(1, 0, 0, 1, 0, 0)"&&De.to(X,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),re=X.getBoundingClientRect();return ie&&ie.progress(0).kill(),re},Ja=function(X,xe){var ie=xe.d2;return X["offset"+ie]||X["client"+ie]||0},Tl=function(X){var xe=[],ie=X.labels,re=X.duration(),Oe;for(Oe in ie)xe.push(ie[Oe]/re);return xe},Ws=function(X){return function(xe){return De.utils.snap(Tl(X),xe)}},Vc=function(X){var xe=De.utils.snap(X),ie=Array.isArray(X)&&X.slice(0).sort(function(re,Oe){return re-Oe});return ie?function(re,Oe,at){at===void 0&&(at=.001);var Ye;if(!Oe)return xe(re);if(Oe>0){for(re-=at,Ye=0;Ye<ie.length;Ye++)if(ie[Ye]>=re)return ie[Ye];return ie[Ye-1]}else for(Ye=ie.length,re+=at;Ye--;)if(ie[Ye]<=re)return ie[Ye];return ie[0]}:function(re,Oe,at){at===void 0&&(at=.001);var Ye=xe(re);return!Oe||Math.abs(Ye-re)<at||Ye-re<0==Oe<0?Ye:xe(Oe<0?re-X:re+X)}},Sh=function(X){return function(xe,ie){return Vc(Tl(X))(xe,ie.direction)}},rc=function(X,xe,ie,re){return ie.split(",").forEach(function(Oe){return X(xe,Oe,re)})},Xr=function(X,xe,ie,re,Oe){return X.addEventListener(xe,ie,{passive:!re,capture:!!Oe})},As=function(X,xe,ie,re){return X.removeEventListener(xe,ie,!!re)},Mh=function(X,xe,ie){ie=ie&&ie.wheelHandler,ie&&(X(xe,"wheel",ie),X(xe,"touchmove",ie))},sc={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Sa={toggleActions:"play",anticipatePin:0},Ma={top:0,left:0,center:.5,bottom:1,right:1},Il=function(X,xe){if(Ds(X)){var ie=X.indexOf("="),re=~ie?+(X.charAt(ie-1)+1)*parseFloat(X.substr(ie+1)):0;~ie&&(X.indexOf("%")>ie&&(re*=xe/100),X=X.substr(0,ie-1)),X=re+(X in Ma?Ma[X]*xe:~X.indexOf("%")?parseFloat(X)*xe/100:parseFloat(X)||0)}return X},Iu=function(X,xe,ie,re,Oe,at,Ye,qt){var Bn=Oe.startColor,ti=Oe.endColor,an=Oe.fontSize,on=Oe.indent,vt=Oe.fontWeight,hn=et.createElement("div"),Mi=Ka(ie)||R(ie,"pinType")==="fixed",ar=X.indexOf("scroller")!==-1,mr=Mi?ce:ie,gr=X.indexOf("start")!==-1,_s=gr?Bn:ti,dn="border-color:"+_s+";font-size:"+an+";color:"+_s+";font-weight:"+vt+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return dn+="position:"+((ar||qt)&&Mi?"fixed;":"absolute;"),(ar||qt||!Mi)&&(dn+=(re===Pe?yn:Hn)+":"+(at+parseFloat(on))+"px;"),Ye&&(dn+="box-sizing:border-box;text-align:left;width:"+Ye.offsetWidth+"px;"),hn._isStart=gr,hn.setAttribute("class","gsap-marker-"+X+(xe?" marker-"+xe:"")),hn.style.cssText=dn,hn.innerText=xe||xe===0?X+"-"+xe:X,mr.children[0]?mr.insertBefore(hn,mr.children[0]):mr.appendChild(hn),hn._offset=hn["offset"+re.op.d2],Hc(hn,0,re,gr),hn},Hc=function(X,xe,ie,re){var Oe={display:"block"},at=ie[re?"os2":"p2"],Ye=ie[re?"p2":"os2"];X._isFlipped=re,Oe[ie.a+"Percent"]=re?-100:0,Oe[ie.a]=re?"1px":0,Oe["border"+at+bo]=1,Oe["border"+Ye+bo]=0,Oe[ie.p]=xe+"px",De.set(X,Oe)},Yn=[],Fd={},Ho,zd=function(){return $e()-Ft>34&&(Ho||(Ho=requestAnimationFrame(Pl)))},Pu=function(){(!ye||!ye.isPressed||ye.startX>ce.clientWidth)&&(S.cache++,ye?Ho||(Ho=requestAnimationFrame(Pl)):Pl(),Ft||oc("scrollStart"),Ft=$e())},Ud=function(){Rt=mt.innerWidth,St=mt.innerHeight},ku=function(){S.cache++,!me&&!Vt&&!et.fullscreenElement&&!et.webkitFullscreenElement&&(!Ee||Rt!==mt.innerWidth||Math.abs(mt.innerHeight-St)>mt.innerHeight*.25)&&he.restart(!0)},ac={},Vd=[],lm=function He(){return As(xn,"scrollEnd",He)||yo(!0)},oc=function(X){return ac[X]&&ac[X].map(function(xe){return xe()})||Vd},Ta=[],Hd=function(X){for(var xe=0;xe<Ta.length;xe+=5)(!X||Ta[xe+4]&&Ta[xe+4].query===X)&&(Ta[xe].style.cssText=Ta[xe+1],Ta[xe].getBBox&&Ta[xe].setAttribute("transform",Ta[xe+2]||""),Ta[xe+3].uncache=1)},mp=function(X,xe){var ie;for(V=0;V<Yn.length;V++)ie=Yn[V],ie&&(!xe||ie._ctx===xe)&&(X?ie.kill(1):ie.revert(!0,!0));xe&&Hd(xe),xe||oc("revert")},cm=function(X,xe){S.cache++,(xe||!pa)&&S.forEach(function(ie){return se(ie)&&ie.cacheID++&&(ie.rec=0)}),Ds(X)&&(mt.history.scrollRestoration=Nt=X)},pa,Gc=0,Gd,qi=function(){if(Gd!==Gc){var X=Gd=Gc;requestAnimationFrame(function(){return X===Gc&&yo(!0)})}},sr=function(){ce.appendChild($t),Qn=$t.offsetHeight||mt.innerHeight,ce.removeChild($t)},yo=function(X,xe){if(Ft&&!X){Xr(xn,"scrollEnd",lm);return}sr(),pa=xn.isRefreshing=!0,S.forEach(function(re){return se(re)&&++re.cacheID&&(re.rec=re())});var ie=oc("refreshInit");te&&xn.sort(),xe||mp(),S.forEach(function(re){se(re)&&(re.smooth&&(re.target.style.scrollBehavior="auto"),re(0))}),Yn.slice(0).forEach(function(re){return re.refresh()}),Yn.forEach(function(re,Oe){if(re._subPinOffset&&re.pin){var at=re.vars.horizontal?"offsetWidth":"offsetHeight",Ye=re.pin[at];re.revert(!0,1),re.adjustPinSpacing(re.pin[at]-Ye),re.refresh()}}),Yn.forEach(function(re){var Oe=_o(re.scroller,re._dir);(re.vars.end==="max"||re._endClamp&&re.end>Oe)&&re.setPositions(re.start,Math.max(re.start+1,Oe),!0)}),ie.forEach(function(re){return re&&re.render&&re.render(-1)}),S.forEach(function(re){se(re)&&(re.smooth&&requestAnimationFrame(function(){return re.target.style.scrollBehavior="smooth"}),re.rec&&re(re.rec))}),cm(Nt,1),he.pause(),Gc++,pa=2,Pl(2),Yn.forEach(function(re){return se(re.vars.onRefresh)&&re.vars.onRefresh(re)}),pa=xn.isRefreshing=!1,oc("refresh")},gp=0,Bu=1,Ru,Pl=function(X){if(!pa||X===2){xn.isUpdating=!0,Ru&&Ru.update(0);var xe=Yn.length,ie=$e(),re=ie-Lt>=50,Oe=xe&&Yn[0].scroll();if(Bu=gp>Oe?-1:1,pa||(gp=Oe),re&&(Ft&&!fe&&ie-Ft>200&&(Ft=0,oc("scrollEnd")),nt=Lt,Lt=ie),Bu<0){for(V=xe;V-- >0;)Yn[V]&&Yn[V].update(0,re);Bu=1}else for(V=0;V<xe;V++)Yn[V]&&Yn[V].update(0,re);xn.isUpdating=!1}Ho=0},vp=[un,sn,Hn,yn,Tn+js,Tn+tr,Tn+rs,Tn+Si,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Th=vp.concat([vn,wn,"boxSizing","max"+bo,"max"+Mr,"position",Tn,Xn,Xn+rs,Xn+tr,Xn+js,Xn+Si]),Bv=function(X,xe,ie){Za(ie);var re=X._gsap;if(re.spacerIsNative)Za(re.spacerState);else if(X._gsap.swappedIn){var Oe=xe.parentNode;Oe&&(Oe.insertBefore(X,xe),Oe.removeChild(xe))}X._gsap.swappedIn=!1},ss=function(X,xe,ie,re){if(!X._gsap.swappedIn){for(var Oe=vp.length,at=xe.style,Ye=X.style,qt;Oe--;)qt=vp[Oe],at[qt]=ie[qt];at.position=ie.position==="absolute"?"absolute":"relative",ie.display==="inline"&&(at.display="inline-block"),Ye[Hn]=Ye[yn]="auto",at.flexBasis=ie.flexBasis||"auto",at.overflow="visible",at.boxSizing="border-box",at[vn]=Ja(X,Y)+ur,at[wn]=Ja(X,Pe)+ur,at[Xn]=Ye[Tn]=Ye[sn]=Ye[un]="0",Za(re),Ye[vn]=Ye["max"+bo]=ie[vn],Ye[wn]=Ye["max"+Mr]=ie[wn],Ye[Xn]=ie[Xn],X.parentNode!==xe&&(X.parentNode.insertBefore(xe,X),xe.appendChild(X)),X._gsap.swappedIn=!0}},Ap=/([A-Z])/g,Za=function(X){if(X){var xe=X.t.style,ie=X.length,re=0,Oe,at;for((X.t._gsap||De.core.getCache(X.t)).uncache=1;re<ie;re+=2)at=X[re+1],Oe=X[re],at?xe[Oe]=at:xe[Oe]&&xe.removeProperty(Oe.replace(Ap,"-$1").toLowerCase())}},Ih=function(X){for(var xe=Th.length,ie=X.style,re=[],Oe=0;Oe<xe;Oe++)re.push(Th[Oe],ie[Th[Oe]]);return re.t=X,re},_p=function(X,xe,ie){for(var re=[],Oe=X.length,at=ie?8:0,Ye;at<Oe;at+=2)Ye=X[at],re.push(Ye,Ye in xe?xe[Ye]:X[at+1]);return re.t=X.t,re},ma={left:0,top:0},bp=function(X,xe,ie,re,Oe,at,Ye,qt,Bn,ti,an,on,vt,hn){se(X)&&(X=X(qt)),Ds(X)&&X.substr(0,3)==="max"&&(X=on+(X.charAt(4)==="="?Il("0"+X.substr(3),ie):0));var Mi=vt?vt.time():0,ar,mr,gr;if(vt&&vt.seek(0),isNaN(X)||(X=+X),Ze(X))vt&&(X=De.utils.mapRange(vt.scrollTrigger.start,vt.scrollTrigger.end,0,on,X)),Ye&&Hc(Ye,ie,re,!0);else{se(xe)&&(xe=xe(qt));var _s=(X||"0").split(" "),dn,$s,nr,In;gr=Ie(xe,qt)||ce,dn=hr(gr)||{},(!dn||!dn.left&&!dn.top)&&$r(gr).display==="none"&&(In=gr.style.display,gr.style.display="block",dn=hr(gr),In?gr.style.display=In:gr.style.removeProperty("display")),$s=Il(_s[0],dn[re.d]),nr=Il(_s[1]||"0",ie),X=dn[re.p]-Bn[re.p]-ti+$s+Oe-nr,Ye&&Hc(Ye,nr,re,ie-nr<20||Ye._isStart&&nr>20),ie-=ie-nr}if(hn&&(qt[hn]=X||-.001,X<0&&(X=0)),at){var Yr=X+ie,Os=at._isStart;ar="scroll"+re.d2,Hc(at,Yr,re,Os&&Yr>20||!Os&&(an?Math.max(ce[ar],st[ar]):at.parentNode[ar])<=Yr+1),an&&(Bn=hr(Ye),an&&(at.style[re.op.p]=Bn[re.op.p]-re.op.m-at._offset+ur))}return vt&&gr&&(ar=hr(gr),vt.seek(on),mr=hr(gr),vt._caScrollDist=ar[re.p]-mr[re.p],X=X/vt._caScrollDist*on),vt&&vt.seek(Mi),vt?X:Math.round(X)},um=/(webkit|moz|length|cssText|inset)/i,yp=function(X,xe,ie,re){if(X.parentNode!==xe){var Oe=X.style,at,Ye;if(xe===ce){X._stOrig=Oe.cssText,Ye=$r(X);for(at in Ye)!+at&&!um.test(at)&&Ye[at]&&typeof Oe[at]=="string"&&at!=="0"&&(Oe[at]=Ye[at]);Oe.top=ie,Oe.left=re}else Oe.cssText=X._stOrig;De.core.getCache(X).uncache=1,xe.appendChild(X)}},wp=function(X,xe,ie){var re=xe,Oe=re;return function(at){var Ye=Math.round(X());return Ye!==re&&Ye!==Oe&&Math.abs(Ye-re)>3&&Math.abs(Ye-Oe)>3&&(at=Ye,ie&&ie()),Oe=re,re=at,at}},Ph=function(X,xe,ie){var re={};re[xe.p]="+="+ie,De.set(X,re)},Qd=function(X,xe){var ie=pe(X,xe),re="_scroll"+xe.p2,Oe=function at(Ye,qt,Bn,ti,an){var on=at.tween,vt=qt.onComplete,hn={};Bn=Bn||ie();var Mi=wp(ie,Bn,function(){on.kill(),at.tween=0});return an=ti&&an||0,ti=ti||Ye-Bn,on&&on.kill(),qt[re]=Ye,qt.modifiers=hn,hn[re]=function(){return Mi(Bn+ti*on.ratio+an*on.ratio*on.ratio)},qt.onUpdate=function(){S.cache++,Pl()},qt.onComplete=function(){at.tween=0,vt&&vt.call(on)},on=at.tween=De.to(X,qt),on};return X[re]=ie,ie.wheelHandler=function(){return Oe.tween&&Oe.tween.kill()&&(Oe.tween=0)},Xr(X,"wheel",ie.wheelHandler),xn.isTouch&&Xr(X,"touchmove",ie.wheelHandler),Oe},xn=function(){function He(xe,ie){xt||He.register(De)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),Qt(this),this.init(xe,ie)}var X=He.prototype;return X.init=function(ie,re){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Le){this.update=this.refresh=this.kill=er;return}ie=Ml(Ds(ie)||Ze(ie)||ie.nodeType?{trigger:ie}:ie,Sa);var Oe=ie,at=Oe.onUpdate,Ye=Oe.toggleClass,qt=Oe.id,Bn=Oe.onToggle,ti=Oe.onRefresh,an=Oe.scrub,on=Oe.trigger,vt=Oe.pin,hn=Oe.pinSpacing,Mi=Oe.invalidateOnRefresh,ar=Oe.anticipatePin,mr=Oe.onScrubComplete,gr=Oe.onSnapComplete,_s=Oe.once,dn=Oe.snap,$s=Oe.pinReparent,nr=Oe.pinSpacer,In=Oe.containerAnimation,Yr=Oe.fastScrollEnd,Os=Oe.preventOverlaps,fn=ie.horizontal||ie.containerAnimation&&ie.horizontal!==!1?Y:Pe,br=!an&&an!==0,On=Ie(ie.scroller||mt),wo=De.core.getCache(On),yr=Ka(On),bs=("pinType"in ie?ie.pinType:R(On,"pinType")||yr&&"fixed")==="fixed",Kr=[ie.onEnter,ie.onLeave,ie.onEnterBack,ie.onLeaveBack],bi=br&&ie.toggleActions.split(" "),wr="markers"in ie?ie.markers:Sa.markers,or=yr?0:parseFloat($r(On)["border"+fn.p2+bo])||0,We=this,as=ie.onRefreshInit&&function(){return ie.onRefreshInit(We)},Qc=Mu(On,yr,fn),Pa=Nd(On,yr),Ns=0,os=0,Xs=0,Jr=pe(On,fn),Ys,Ks,cc,Zr,Js,Se,it,Ke,Ht,Ve,Wn,Vi,Jt,ji,qc,ys,Go,Tr,Ti,ka,vr,gi,Qo,eo,ws,uc,jc,Wc,xo,Zs,to,vi,qo,Ga,no,ga,kl,Co,ea;if(We._startClamp=We._endClamp=!1,We._dir=fn,ar*=45,We.scroller=On,We.scroll=In?In.time.bind(In):Jr,Zr=Jr(),We.vars=ie,re=re||ie.animation,"refreshPriority"in ie&&(te=1,ie.refreshPriority===-9999&&(Ru=We)),wo.tweenScroll=wo.tweenScroll||{top:Qd(On,Pe),left:Qd(On,Y)},We.tweenTo=Ys=wo.tweenScroll[fn.p],We.scrubDuration=function(en){qo=Ze(en)&&en,qo?vi?vi.duration(en):vi=De.to(re,{ease:"expo",totalProgress:"+=0",duration:qo,paused:!0,onComplete:function(){return mr&&mr(We)}}):(vi&&vi.progress(1).kill(),vi=0)},re&&(re.vars.lazy=!1,re._initted&&!We.isReverted||re.vars.immediateRender!==!1&&ie.immediateRender!==!1&&re.duration()&&re.render(0,!0,!0),We.animation=re.pause(),re.scrollTrigger=We,We.scrubDuration(an),Zs=0,qt||(qt=re.vars.id)),dn&&((!ht(dn)||dn.push)&&(dn={snapTo:dn}),"scrollBehavior"in ce.style&&De.set(yr?[ce,st]:On,{scrollBehavior:"auto"}),S.forEach(function(en){return se(en)&&en.target===(yr?et.scrollingElement||st:On)&&(en.smooth=!1)}),cc=se(dn.snapTo)?dn.snapTo:dn.snapTo==="labels"?Ws(re):dn.snapTo==="labelsDirectional"?Sh(re):dn.directional!==!1?function(en,ni){return Vc(dn.snapTo)(en,$e()-os<500?0:ni.direction)}:De.utils.snap(dn.snapTo),Ga=dn.duration||{min:.1,max:2},Ga=ht(Ga)?Ne(Ga.min,Ga.max):Ne(Ga,Ga),no=De.delayedCall(dn.delay||qo/2||.1,function(){var en=Jr(),ni=$e()-os<500,_n=Ys.tween;if((ni||Math.abs(We.getVelocity())<10)&&!_n&&!fe&&Ns!==en){var ri=(en-Se)/ji,Hr=re&&!br?re.totalProgress():ri,yi=ni?0:(Hr-to)/($e()-nt)*1e3||0,Gr=De.utils.clamp(-ri,1-ri,Yt(yi/2)*yi/.185),di=ri+(dn.inertia===!1?0:Gr),Ii=Ne(0,1,cc(di,We)),Pr=Math.round(Se+Ii*ji),lr=dn,Qa=lr.onStart,kr=lr.onInterrupt,ta=lr.onComplete;if(en<=it&&en>=Se&&Pr!==en){if(_n&&!_n._initted&&_n.data<=Yt(Pr-en))return;dn.inertia===!1&&(Gr=Ii-ri),Ys(Pr,{duration:Ga(Yt(Math.max(Yt(di-Hr),Yt(Ii-Hr))*.185/yi/.05||0)),ease:dn.ease||"power3",data:Yt(Pr-en),onInterrupt:function(){return no.restart(!0)&&kr&&kr(We)},onComplete:function(){We.update(),Ns=Jr(),Zs=to=re&&!br?re.totalProgress():We.progress,gr&&gr(We),ta&&ta(We)}},en,Gr*ji,Pr-en-Gr*ji),Qa&&Qa(We,Ys.tween)}}else We.isActive&&Ns!==en&&no.restart(!0)}).pause()),qt&&(Fd[qt]=We),on=We.trigger=Ie(on||vt!==!0&&vt),ea=on&&on._gsap&&on._gsap.stRevert,ea&&(ea=ea(We)),vt=vt===!0?on:Ie(vt),Ds(Ye)&&(Ye={targets:on,className:Ye}),vt&&(hn===!1||hn===Tn||(hn=!hn&&vt.parentNode&&vt.parentNode.style&&$r(vt.parentNode).display==="flex"?!1:Xn),We.pin=vt,Ks=De.core.getCache(vt),Ks.spacer?qc=Ks.pinState:(nr&&(nr=Ie(nr),nr&&!nr.nodeType&&(nr=nr.current||nr.nativeElement),Ks.spacerIsNative=!!nr,nr&&(Ks.spacerState=Ih(nr))),Ks.spacer=Tr=nr||et.createElement("div"),Tr.classList.add("pin-spacer"),qt&&Tr.classList.add("pin-spacer-"+qt),Ks.pinState=qc=Ih(vt)),ie.force3D!==!1&&De.set(vt,{force3D:!0}),We.spacer=Tr=Ks.spacer,xo=$r(vt),eo=xo[hn+fn.os2],ka=De.getProperty(vt),vr=De.quickSetter(vt,fn.a,ur),ss(vt,Tr,xo),Go=Ih(vt)),wr){Vi=ht(wr)?Ml(wr,sc):sc,Ve=Iu("scroller-start",qt,On,fn,Vi,0),Wn=Iu("scroller-end",qt,On,fn,Vi,0,Ve),Ti=Ve["offset"+fn.op.d2];var Gn=Ie(R(On,"content")||On);Ke=this.markerStart=Iu("start",qt,Gn,fn,Vi,Ti,0,In),Ht=this.markerEnd=Iu("end",qt,Gn,fn,Vi,Ti,0,In),In&&(Co=De.quickSetter([Ke,Ht],fn.a,ur)),!bs&&!(I.length&&R(On,"fixedMarkers")===!0)&&(ic(yr?ce:On),De.set([Ve,Wn],{force3D:!0}),uc=De.quickSetter(Ve,fn.a,ur),Wc=De.quickSetter(Wn,fn.a,ur))}if(In){var An=In.vars.onUpdate,xi=In.vars.onUpdateParams;In.eventCallback("onUpdate",function(){We.update(0,0,1),An&&An.apply(In,xi||[])})}if(We.previous=function(){return Yn[Yn.indexOf(We)-1]},We.next=function(){return Yn[Yn.indexOf(We)+1]},We.revert=function(en,ni){if(!ni)return We.kill(!0);var _n=en!==!1||!We.enabled,ri=me;_n!==We.isReverted&&(_n&&(ga=Math.max(Jr(),We.scroll.rec||0),Xs=We.progress,kl=re&&re.progress()),Ke&&[Ke,Ht,Ve,Wn].forEach(function(Hr){return Hr.style.display=_n?"none":"block"}),_n&&(me=We,We.update(_n)),vt&&(!$s||!We.isActive)&&(_n?Bv(vt,Tr,qc):ss(vt,Tr,$r(vt),ws)),_n||We.update(_n),me=ri,We.isReverted=_n)},We.refresh=function(en,ni,_n,ri){if(!((me||!We.enabled)&&!ni)){if(vt&&en&&Ft){Xr(He,"scrollEnd",lm);return}!pa&&as&&as(We),me=We,Ys.tween&&!_n&&(Ys.tween.kill(),Ys.tween=0),vi&&vi.pause(),Mi&&re&&re.revert({kill:!1}).invalidate(),We.isReverted||We.revert(!0,!0),We._subPinOffset=!1;var Hr=Qc(),yi=Pa(),Gr=In?In.duration():_o(On,fn),di=ji<=.01,Ii=0,Pr=ri||0,lr=ht(_n)?_n.end:ie.end,Qa=ie.endTrigger||on,kr=ht(_n)?_n.start:ie.start||(ie.start===0||!on?0:vt?"0 0":"0 100%"),ta=We.pinnedContainer=ie.pinnedContainer&&Ie(ie.pinnedContainer,We),Ba=on&&Math.max(0,Yn.indexOf(We))||0,va=Ba,xr,Cr,Eo,$c,dr,ls,jo,xp,fm,Xc,qa,So,Rh;for(wr&&ht(_n)&&(So=De.getProperty(Ve,fn.p),Rh=De.getProperty(Wn,fn.p));va--;)ls=Yn[va],ls.end||ls.refresh(0,1)||(me=We),jo=ls.pin,jo&&(jo===on||jo===vt||jo===ta)&&!ls.isReverted&&(Xc||(Xc=[]),Xc.unshift(ls),ls.revert(!0,!0)),ls!==Yn[va]&&(Ba--,va--);for(se(kr)&&(kr=kr(We)),kr=bn(kr,"start",We),Se=bp(kr,on,Hr,fn,Jr(),Ke,Ve,We,yi,or,bs,Gr,In,We._startClamp&&"_startClamp")||(vt?-.001:0),se(lr)&&(lr=lr(We)),Ds(lr)&&!lr.indexOf("+=")&&(~lr.indexOf(" ")?lr=(Ds(kr)?kr.split(" ")[0]:"")+lr:(Ii=Il(lr.substr(2),Hr),lr=Ds(kr)?kr:(In?De.utils.mapRange(0,In.duration(),In.scrollTrigger.start,In.scrollTrigger.end,Se):Se)+Ii,Qa=on)),lr=bn(lr,"end",We),it=Math.max(Se,bp(lr||(Qa?"100% 0":Gr),Qa,Hr,fn,Jr()+Ii,Ht,Wn,We,yi,or,bs,Gr,In,We._endClamp&&"_endClamp"))||-.001,Ii=0,va=Ba;va--;)ls=Yn[va],jo=ls.pin,jo&&ls.start-ls._pinPush<=Se&&!In&&ls.end>0&&(xr=ls.end-(We._startClamp?Math.max(0,ls.start):ls.start),(jo===on&&ls.start-ls._pinPush<Se||jo===ta)&&isNaN(kr)&&(Ii+=xr*(1-ls.progress)),jo===vt&&(Pr+=xr));if(Se+=Ii,it+=Ii,We._startClamp&&(We._startClamp+=Ii),We._endClamp&&!pa&&(We._endClamp=it||-.001,it=Math.min(it,_o(On,fn))),ji=it-Se||(Se-=.01)&&.001,di&&(Xs=De.utils.clamp(0,1,De.utils.normalize(Se,it,ga))),We._pinPush=Pr,Ke&&Ii&&(xr={},xr[fn.a]="+="+Ii,ta&&(xr[fn.p]="-="+Jr()),De.set([Ke,Ht],xr)),vt)xr=$r(vt),$c=fn===Pe,Eo=Jr(),gi=parseFloat(ka(fn.a))+Pr,!Gr&&it>1&&(qa=(yr?et.scrollingElement||st:On).style,qa={style:qa,value:qa["overflow"+fn.a.toUpperCase()]},yr&&$r(ce)["overflow"+fn.a.toUpperCase()]!=="scroll"&&(qa.style["overflow"+fn.a.toUpperCase()]="scroll")),ss(vt,Tr,xr),Go=Ih(vt),Cr=hr(vt,!0),xp=bs&&pe(On,$c?Y:Pe)(),hn&&(ws=[hn+fn.os2,ji+Pr+ur],ws.t=Tr,va=hn===Xn?Ja(vt,fn)+ji+Pr:0,va&&ws.push(fn.d,va+ur),Za(ws),ta&&Yn.forEach(function(K){K.pin===ta&&K.vars.pinSpacing!==!1&&(K._subPinOffset=!0)}),bs&&Jr(ga)),bs&&(dr={top:Cr.top+($c?Eo-Se:xp)+ur,left:Cr.left+($c?xp:Eo-Se)+ur,boxSizing:"border-box",position:"fixed"},dr[vn]=dr["max"+bo]=Math.ceil(Cr.width)+ur,dr[wn]=dr["max"+Mr]=Math.ceil(Cr.height)+ur,dr[Tn]=dr[Tn+rs]=dr[Tn+tr]=dr[Tn+js]=dr[Tn+Si]="0",dr[Xn]=xr[Xn],dr[Xn+rs]=xr[Xn+rs],dr[Xn+tr]=xr[Xn+tr],dr[Xn+js]=xr[Xn+js],dr[Xn+Si]=xr[Xn+Si],ys=_p(qc,dr,$s),pa&&Jr(0)),re?(fm=re._initted,Qe(1),re.render(re.duration(),!0,!0),Qo=ka(fn.a)-gi+ji+Pr,jc=Math.abs(ji-Qo)>1,bs&&jc&&ys.splice(ys.length-2,2),re.render(0,!0,!0),fm||re.invalidate(!0),re.parent||re.totalTime(re.totalTime()),Qe(0)):Qo=ji,qa&&(qa.value?qa.style["overflow"+fn.a.toUpperCase()]=qa.value:qa.style.removeProperty("overflow-"+fn.a));else if(on&&Jr()&&!In)for(Cr=on.parentNode;Cr&&Cr!==ce;)Cr._pinOffset&&(Se-=Cr._pinOffset,it-=Cr._pinOffset),Cr=Cr.parentNode;Xc&&Xc.forEach(function(K){return K.revert(!1,!0)}),We.start=Se,We.end=it,Zr=Js=pa?ga:Jr(),!In&&!pa&&(Zr<ga&&Jr(ga),We.scroll.rec=0),We.revert(!1,!0),os=$e(),no&&(Ns=-1,no.restart(!0)),me=0,re&&br&&(re._initted||kl)&&re.progress()!==kl&&re.progress(kl||0,!0).render(re.time(),!0,!0),(di||Xs!==We.progress||In)&&(re&&!br&&re.totalProgress(In&&Se<-.001&&!Xs?De.utils.normalize(Se,it,0):Xs,!0),We.progress=di||(Zr-Se)/ji===Xs?0:Xs),vt&&hn&&(Tr._pinOffset=Math.round(We.progress*Qo)),vi&&vi.invalidate(),isNaN(So)||(So-=De.getProperty(Ve,fn.p),Rh-=De.getProperty(Wn,fn.p),Ph(Ve,fn,So),Ph(Ke,fn,So-(ri||0)),Ph(Wn,fn,Rh),Ph(Ht,fn,Rh-(ri||0))),di&&!pa&&We.update(),ti&&!pa&&!Jt&&(Jt=!0,ti(We),Jt=!1)}},We.getVelocity=function(){return(Jr()-Js)/($e()-nt)*1e3||0},We.endAnimation=function(){qe(We.callbackAnimation),re&&(vi?vi.progress(1):re.paused()?br||qe(re,We.direction<0,1):qe(re,re.reversed()))},We.labelToScroll=function(en){return re&&re.labels&&(Se||We.refresh()||Se)+re.labels[en]/re.duration()*ji||0},We.getTrailing=function(en){var ni=Yn.indexOf(We),_n=We.direction>0?Yn.slice(0,ni).reverse():Yn.slice(ni+1);return(Ds(en)?_n.filter(function(ri){return ri.vars.preventOverlaps===en}):_n).filter(function(ri){return We.direction>0?ri.end<=Se:ri.start>=it})},We.update=function(en,ni,_n){if(!(In&&!_n&&!en)){var ri=pa===!0?ga:We.scroll(),Hr=en?0:(ri-Se)/ji,yi=Hr<0?0:Hr>1?1:Hr||0,Gr=We.progress,di,Ii,Pr,lr,Qa,kr,ta,Ba;if(ni&&(Js=Zr,Zr=In?Jr():ri,dn&&(to=Zs,Zs=re&&!br?re.totalProgress():yi)),ar&&!yi&&vt&&!me&&!It&&Ft&&Se<ri+(ri-Js)/($e()-nt)*ar&&(yi=1e-4),yi!==Gr&&We.enabled){if(di=We.isActive=!!yi&&yi<1,Ii=!!Gr&&Gr<1,kr=di!==Ii,Qa=kr||!!yi!=!!Gr,We.direction=yi>Gr?1:-1,We.progress=yi,Qa&&!me&&(Pr=yi&&!Gr?0:yi===1?1:Gr===1?2:3,br&&(lr=!kr&&bi[Pr+1]!=="none"&&bi[Pr+1]||bi[Pr],Ba=re&&(lr==="complete"||lr==="reset"||lr in re))),Os&&(kr||Ba)&&(Ba||an||!re)&&(se(Os)?Os(We):We.getTrailing(Os).forEach(function(Eo){return Eo.endAnimation()})),br||(vi&&!me&&!It?(vi._dp._time-vi._start!==vi._time&&vi.render(vi._dp._time-vi._start),vi.resetTo?vi.resetTo("totalProgress",yi,re._tTime/re._tDur):(vi.vars.totalProgress=yi,vi.invalidate().restart())):re&&re.totalProgress(yi,!!(me&&(os||en)))),vt){if(en&&hn&&(Tr.style[hn+fn.os2]=eo),!bs)vr(fa(gi+Qo*yi));else if(Qa){if(ta=!en&&yi>Gr&&it+1>ri&&ri+1>=_o(On,fn),$s)if(!en&&(di||ta)){var va=hr(vt,!0),xr=ri-Se;yp(vt,ce,va.top+(fn===Pe?xr:0)+ur,va.left+(fn===Pe?0:xr)+ur)}else yp(vt,Tr);Za(di||ta?ys:Go),jc&&yi<1&&di||vr(gi+(yi===1&&!ta?Qo:0))}}dn&&!Ys.tween&&!me&&!It&&no.restart(!0),Ye&&(kr||_s&&yi&&(yi<1||!de))&&be(Ye.targets).forEach(function(Eo){return Eo.classList[di||_s?"add":"remove"](Ye.className)}),at&&!br&&!en&&at(We),Qa&&!me?(br&&(Ba&&(lr==="complete"?re.pause().totalProgress(1):lr==="reset"?re.restart(!0).pause():lr==="restart"?re.restart(!0):re[lr]()),at&&at(We)),(kr||!de)&&(Bn&&kr&&gt(We,Bn),Kr[Pr]&&gt(We,Kr[Pr]),_s&&(yi===1?We.kill(!1,1):Kr[Pr]=0),kr||(Pr=yi===1?1:3,Kr[Pr]&&gt(We,Kr[Pr]))),Yr&&!di&&Math.abs(We.getVelocity())>(Ze(Yr)?Yr:2500)&&(qe(We.callbackAnimation),vi?vi.progress(1):qe(re,lr==="reverse"?1:!yi,1))):br&&at&&!me&&at(We)}if(Wc){var Cr=In?ri/In.duration()*(In._caScrollDist||0):ri;uc(Cr+(Ve._isFlipped?1:0)),Wc(Cr)}Co&&Co(-ri/In.duration()*(In._caScrollDist||0))}},We.enable=function(en,ni){We.enabled||(We.enabled=!0,Xr(On,"resize",ku),yr||Xr(On,"scroll",Pu),as&&Xr(He,"refreshInit",as),en!==!1&&(We.progress=Xs=0,Zr=Js=Ns=Jr()),ni!==!1&&We.refresh())},We.getTween=function(en){return en&&Ys?Ys.tween:vi},We.setPositions=function(en,ni,_n,ri){if(In){var Hr=In.scrollTrigger,yi=In.duration(),Gr=Hr.end-Hr.start;en=Hr.start+Gr*en/yi,ni=Hr.start+Gr*ni/yi}We.refresh(!1,!1,{start:_i(en,_n&&!!We._startClamp),end:_i(ni,_n&&!!We._endClamp)},ri),We.update()},We.adjustPinSpacing=function(en){if(ws&&en){var ni=ws.indexOf(fn.d)+1;ws[ni]=parseFloat(ws[ni])+en+ur,ws[1]=parseFloat(ws[1])+en+ur,Za(ws)}},We.disable=function(en,ni){if(We.enabled&&(en!==!1&&We.revert(!0,!0),We.enabled=We.isActive=!1,ni||vi&&vi.pause(),ga=0,Ks&&(Ks.uncache=1),as&&As(He,"refreshInit",as),no&&(no.pause(),Ys.tween&&Ys.tween.kill()&&(Ys.tween=0)),!yr)){for(var _n=Yn.length;_n--;)if(Yn[_n].scroller===On&&Yn[_n]!==We)return;As(On,"resize",ku),yr||As(On,"scroll",Pu)}},We.kill=function(en,ni){We.disable(en,ni),vi&&!ni&&vi.kill(),qt&&delete Fd[qt];var _n=Yn.indexOf(We);_n>=0&&Yn.splice(_n,1),_n===V&&Bu>0&&V--,_n=0,Yn.forEach(function(ri){return ri.scroller===We.scroller&&(_n=1)}),_n||pa||(We.scroll.rec=0),re&&(re.scrollTrigger=null,en&&re.revert({kill:!1}),ni||re.kill()),Ke&&[Ke,Ht,Ve,Wn].forEach(function(ri){return ri.parentNode&&ri.parentNode.removeChild(ri)}),Ru===We&&(Ru=0),vt&&(Ks&&(Ks.uncache=1),_n=0,Yn.forEach(function(ri){return ri.pin===vt&&_n++}),_n||(Ks.spacer=0)),ie.onKill&&ie.onKill(We)},Yn.push(We),We.enable(!1,!1),ea&&ea(We),re&&re.add&&!ji){var Ir=We.update;We.update=function(){We.update=Ir,Se||it||We.refresh()},De.delayedCall(.01,We.update),ji=.01,Se=it=0}else We.refresh();vt&&qi()},He.register=function(ie){return xt||(De=ie||nc(),El()&&window.document&&He.enable(),xt=Le),xt},He.defaults=function(ie){if(ie)for(var re in ie)Sa[re]=ie[re];return Sa},He.disable=function(ie,re){Le=0,Yn.forEach(function(at){return at[re?"kill":"disable"](ie)}),As(mt,"wheel",Pu),As(et,"scroll",Pu),clearInterval(ze),As(et,"touchcancel",er),As(ce,"touchstart",er),rc(As,et,"pointerdown,touchstart,mousedown",ei),rc(As,et,"pointerup,touchend,mouseup",vs),he.kill(),Tu(As);for(var Oe=0;Oe<S.length;Oe+=3)Mh(As,S[Oe],S[Oe+1]),Mh(As,S[Oe],S[Oe+2])},He.enable=function(){if(mt=window,et=document,st=et.documentElement,ce=et.body,De&&(be=De.utils.toArray,Ne=De.utils.clamp,Qt=De.core.context||er,Qe=De.core.suppressOverwrites||er,Nt=mt.history.scrollRestoration||"auto",gp=mt.pageYOffset,De.core.globals("ScrollTrigger",He),ce)){Le=1,$t=document.createElement("div"),$t.style.height="100vh",$t.style.position="absolute",sr(),gs(),rt.register(De),He.isTouch=rt.isTouch,Bt=rt.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),Xr(mt,"wheel",Pu),tt=[mt,et,st,ce],De.matchMedia?(He.matchMedia=function(qt){var Bn=De.matchMedia(),ti;for(ti in qt)Bn.add(ti,qt[ti]);return Bn},De.addEventListener("matchMediaInit",function(){return mp()}),De.addEventListener("matchMediaRevert",function(){return Hd()}),De.addEventListener("matchMedia",function(){yo(0,1),oc("matchMedia")}),De.matchMedia("(orientation: portrait)",function(){return Ud(),Ud})):console.warn("Requires GSAP 3.11.0 or later"),Ud(),Xr(et,"scroll",Pu);var ie=ce.style,re=ie.borderTopStyle,Oe=De.core.Animation.prototype,at,Ye;for(Oe.revert||Object.defineProperty(Oe,"revert",{value:function(){return this.time(-.01,!0)}}),ie.borderTopStyle="solid",at=hr(ce),Pe.m=Math.round(at.top+Pe.sc())||0,Y.m=Math.round(at.left+Y.sc())||0,re?ie.borderTopStyle=re:ie.removeProperty("border-top-style"),ze=setInterval(zd,250),De.delayedCall(.5,function(){return It=0}),Xr(et,"touchcancel",er),Xr(ce,"touchstart",er),rc(Xr,et,"pointerdown,touchstart,mousedown",ei),rc(Xr,et,"pointerup,touchend,mouseup",vs),Be=De.utils.checkPrefix("transform"),Th.push(Be),xt=$e(),he=De.delayedCall(.2,yo).pause(),Te=[et,"visibilitychange",function(){var qt=mt.innerWidth,Bn=mt.innerHeight;et.hidden?($=qt,ee=Bn):($!==qt||ee!==Bn)&&ku()},et,"DOMContentLoaded",yo,mt,"load",yo,mt,"resize",ku],Tu(Xr),Yn.forEach(function(qt){return qt.enable(0,1)}),Ye=0;Ye<S.length;Ye+=3)Mh(As,S[Ye],S[Ye+1]),Mh(As,S[Ye],S[Ye+2])}},He.config=function(ie){"limitCallbacks"in ie&&(de=!!ie.limitCallbacks);var re=ie.syncInterval;re&&clearInterval(ze)||(ze=re)&&setInterval(zd,re),"ignoreMobileResize"in ie&&(Ee=He.isTouch===1&&ie.ignoreMobileResize),"autoRefreshEvents"in ie&&(Tu(As)||Tu(Xr,ie.autoRefreshEvents||"none"),Vt=(ie.autoRefreshEvents+"").indexOf("resize")===-1)},He.scrollerProxy=function(ie,re){var Oe=Ie(ie),at=S.indexOf(Oe),Ye=Ka(Oe);~at&&S.splice(at,Ye?6:2),re&&(Ye?I.unshift(mt,re,ce,re,st,re):I.unshift(Oe,re))},He.clearMatchMedia=function(ie){Yn.forEach(function(re){return re._ctx&&re._ctx.query===ie&&re._ctx.kill(!0,!0)})},He.isInViewport=function(ie,re,Oe){var at=(Ds(ie)?Ie(ie):ie).getBoundingClientRect(),Ye=at[Oe?vn:wn]*re||0;return Oe?at.right-Ye>0&&at.left+Ye<mt.innerWidth:at.bottom-Ye>0&&at.top+Ye<mt.innerHeight},He.positionInViewport=function(ie,re,Oe){Ds(ie)&&(ie=Ie(ie));var at=ie.getBoundingClientRect(),Ye=at[Oe?vn:wn],qt=re==null?Ye/2:re in Ma?Ma[re]*Ye:~re.indexOf("%")?parseFloat(re)*Ye/100:parseFloat(re)||0;return Oe?(at.left+qt)/mt.innerWidth:(at.top+qt)/mt.innerHeight},He.killAll=function(ie){if(Yn.slice(0).forEach(function(Oe){return Oe.vars.id!=="ScrollSmoother"&&Oe.kill()}),ie!==!0){var re=ac.killAll||[];ac={},re.forEach(function(Oe){return Oe()})}},He}();xn.version="3.12.2",xn.saveStyles=function(He){return He?be(He).forEach(function(X){if(X&&X.style){var xe=Ta.indexOf(X);xe>=0&&Ta.splice(xe,5),Ta.push(X,X.style.cssText,X.getBBox&&X.getAttribute("transform"),De.core.getCache(X),Qt())}}):Ta},xn.revert=function(He,X){return mp(!He,X)},xn.create=function(He,X){return new xn(He,X)},xn.refresh=function(He){return He?ku():(xt||xn.register())&&yo(!0)},xn.update=function(He){return++S.cache&&Pl(He===!0?2:0)},xn.clearScrollMemory=cm,xn.maxScroll=function(He,X){return _o(He,X?Y:Pe)},xn.getScrollFunc=function(He,X){return pe(Ie(He),X?Y:Pe)},xn.getById=function(He){return Fd[He]},xn.getAll=function(){return Yn.filter(function(He){return He.vars.id!=="ScrollSmoother"})},xn.isScrolling=function(){return!!Ft},xn.snapDirectional=Vc,xn.addEventListener=function(He,X){var xe=ac[He]||(ac[He]=[]);~xe.indexOf(X)||xe.push(X)},xn.removeEventListener=function(He,X){var xe=ac[He],ie=xe&&xe.indexOf(X);ie>=0&&xe.splice(ie,1)},xn.batch=function(He,X){var xe=[],ie={},re=X.interval||.016,Oe=X.batchMax||1e9,at=function(Bn,ti){var an=[],on=[],vt=De.delayedCall(re,function(){ti(an,on),an=[],on=[]}).pause();return function(hn){an.length||vt.restart(!0),an.push(hn.trigger),on.push(hn),Oe<=an.length&&vt.progress(1)}},Ye;for(Ye in X)ie[Ye]=Ye.substr(0,2)==="on"&&se(X[Ye])&&Ye!=="onRefreshInit"?at(Ye,X[Ye]):X[Ye];return se(Oe)&&(Oe=Oe(),Xr(xn,"refresh",function(){return Oe=X.batchMax()})),be(He).forEach(function(qt){var Bn={};for(Ye in ie)Bn[Ye]=ie[Ye];Bn.trigger=qt,xe.push(xn.create(Bn))}),xe};var hm=function(X,xe,ie,re){return xe>re?X(re):xe<0&&X(0),ie>re?(re-xe)/(ie-xe):ie<0?xe/(xe-ie):1},Ia=function He(X,xe){xe===!0?X.style.removeProperty("touch-action"):X.style.touchAction=xe===!0?"auto":xe?"pan-"+xe+(rt.isTouch?" pinch-zoom":""):"none",X===st&&He(ce,xe)},kh={auto:1,scroll:1},dm=function(X){var xe=X.event,ie=X.target,re=X.axis,Oe=(xe.changedTouches?xe.changedTouches[0]:xe).target,at=Oe._gsap||De.core.getCache(Oe),Ye=$e(),qt;if(!at._isScrollT||Ye-at._isScrollT>2e3){for(;Oe&&Oe!==ce&&(Oe.scrollHeight<=Oe.clientHeight&&Oe.scrollWidth<=Oe.clientWidth||!(kh[(qt=$r(Oe)).overflowY]||kh[qt.overflowX]));)Oe=Oe.parentNode;at._isScroll=Oe&&Oe!==ie&&!Ka(Oe)&&(kh[(qt=$r(Oe)).overflowY]||kh[qt.overflowX]),at._isScrollT=Ye}(at._isScroll||re==="x")&&(xe.stopPropagation(),xe._gsapAllow=!0)},Ls=function(X,xe,ie,re){return rt.create({target:X,capture:!0,debounce:!1,lockAxis:!0,type:xe,onWheel:re=re&&dm,onPress:re,onDrag:re,onScroll:re,onEnable:function(){return ie&&Xr(et,rt.eventTypes[0],Kn,!1,!0)},onDisable:function(){return As(et,rt.eventTypes[0],Kn,!0)}})},Bh=/(input|label|select|textarea)/i,qd,Kn=function(X){var xe=Bh.test(X.target.tagName);(xe||qd)&&(X._gsapAllow=!0,qd=xe)},lc=function(X){ht(X)||(X={}),X.preventDefault=X.isNormalizer=X.allowClicks=!0,X.type||(X.type="wheel,touch"),X.debounce=!!X.debounce,X.id=X.id||"normalizer";var xe=X,ie=xe.normalizeScrollX,re=xe.momentum,Oe=xe.allowNestedScroll,at=xe.onRelease,Ye,qt,Bn=Ie(X.target)||st,ti=De.core.globals().ScrollSmoother,an=ti&&ti.get(),on=Bt&&(X.content&&Ie(X.content)||an&&X.content!==!1&&!an.smooth()&&an.content()),vt=pe(Bn,Pe),hn=pe(Bn,Y),Mi=1,ar=(rt.isTouch&&mt.visualViewport?mt.visualViewport.scale*mt.visualViewport.width:mt.outerWidth)/mt.innerWidth,mr=0,gr=se(re)?function(){return re(Ye)}:function(){return re||2.8},_s,dn,$s=Ls(Bn,X.type,!0,Oe),nr=function(){return dn=!1},In=er,Yr=er,Os=function(){qt=_o(Bn,Pe),Yr=Ne(Bt?1:0,qt),ie&&(In=Ne(0,_o(Bn,Y))),_s=Gc},fn=function(){on._gsap.y=fa(parseFloat(on._gsap.y)+vt.offset)+"px",on.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(on._gsap.y)+", 0, 1)",vt.offset=vt.cacheID=0},br=function(){if(dn){requestAnimationFrame(nr);var wr=fa(Ye.deltaY/2),or=Yr(vt.v-wr);if(on&&or!==vt.v+vt.offset){vt.offset=or-vt.v;var We=fa((parseFloat(on&&on._gsap.y)||0)-vt.offset);on.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+We+", 0, 1)",on._gsap.y=We+"px",vt.cacheID=S.cache,Pl()}return!0}vt.offset&&fn(),dn=!0},On,wo,yr,bs,Kr=function(){Os(),On.isActive()&&On.vars.scrollY>qt&&(vt()>qt?On.progress(1)&&vt(qt):On.resetTo("scrollY",qt))};return on&&De.set(on,{y:"+=0"}),X.ignoreCheck=function(bi){return Bt&&bi.type==="touchmove"&&br()||Mi>1.05&&bi.type!=="touchstart"||Ye.isGesturing||bi.touches&&bi.touches.length>1},X.onPress=function(){dn=!1;var bi=Mi;Mi=fa((mt.visualViewport&&mt.visualViewport.scale||1)/ar),On.pause(),bi!==Mi&&Ia(Bn,Mi>1.01?!0:ie?!1:"x"),wo=hn(),yr=vt(),Os(),_s=Gc},X.onRelease=X.onGestureStart=function(bi,wr){if(vt.offset&&fn(),!wr)bs.restart(!0);else{S.cache++;var or=gr(),We,as;ie&&(We=hn(),as=We+or*.05*-bi.velocityX/.227,or*=hm(hn,We,as,_o(Bn,Y)),On.vars.scrollX=In(as)),We=vt(),as=We+or*.05*-bi.velocityY/.227,or*=hm(vt,We,as,_o(Bn,Pe)),On.vars.scrollY=Yr(as),On.invalidate().duration(or).play(.01),(Bt&&On.vars.scrollY>=qt||We>=qt-1)&&De.to({},{onUpdate:Kr,duration:or})}at&&at(bi)},X.onWheel=function(){On._ts&&On.pause(),$e()-mr>1e3&&(_s=0,mr=$e())},X.onChange=function(bi,wr,or,We,as){if(Gc!==_s&&Os(),wr&&ie&&hn(In(We[2]===wr?wo+(bi.startX-bi.x):hn()+wr-We[1])),or){vt.offset&&fn();var Qc=as[2]===or,Pa=Qc?yr+bi.startY-bi.y:vt()+or-as[1],Ns=Yr(Pa);Qc&&Pa!==Ns&&(yr+=Ns-Pa),vt(Ns)}(or||wr)&&Pl()},X.onEnable=function(){Ia(Bn,ie?!1:"x"),xn.addEventListener("refresh",Kr),Xr(mt,"resize",Kr),vt.smooth&&(vt.target.style.scrollBehavior="auto",vt.smooth=hn.smooth=!1),$s.enable()},X.onDisable=function(){Ia(Bn,!0),As(mt,"resize",Kr),xn.removeEventListener("refresh",Kr),$s.kill()},X.lockAxis=X.lockAxis!==!1,Ye=new rt(X),Ye.iOS=Bt,Bt&&!vt()&&vt(1),Bt&&De.ticker.add(er),bs=Ye._dc,On=De.to(Ye,{ease:"power4",paused:!0,scrollX:ie?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:wp(vt,vt(),function(){return On.pause()})},onUpdate:Pl,onComplete:bs.vars.onComplete}),Ye};xn.sort=function(He){return Yn.sort(He||function(X,xe){return(X.vars.refreshPriority||0)*-1e6+X.start-(xe.start+(xe.vars.refreshPriority||0)*-1e6)})},xn.observe=function(He){return new rt(He)},xn.normalizeScroll=function(He){if(typeof He>"u")return ye;if(He===!0&&ye)return ye.enable();if(He===!1)return ye&&ye.kill();var X=He instanceof rt?He:lc(He);return ye&&ye.target===X.target&&ye.kill(),Ka(X.target)&&(ye=X),X},xn.core={_getVelocityProp:Ce,_inputObserver:Ls,_scrollers:S,_proxies:I,bridge:{ss:function(){Ft||oc("scrollStart"),Ft=$e()},ref:function(){return me}}},nc()&&De.registerPlugin(xn),t.ScrollTrigger=xn,t.default=xn,typeof window>"u"||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete window.default})})(fT,fT.exports);var bdt=fT.exports,pT={exports:{}};(function(i,e){(function(t,n){n(e)})(dt,function(t){/*!
 * ScrollToPlugin 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var n,r,s,a,o,l,c,u,h=function(){return typeof window<"u"},d=function(){return n||h()&&(n=window.gsap)&&n.registerPlugin&&n},f=function(P){return typeof P=="string"},m=function(P){return typeof P=="function"},A=function(P,k){var M=k==="x"?"Width":"Height",R="scroll"+M,N="client"+M;return P===s||P===a||P===o?Math.max(a[R],o[R])-(s["inner"+M]||a[N]||o[N]):P[R]-P["offset"+M]},_=function(P,k){var M="scroll"+(k==="x"?"Left":"Top");return P===s&&(P.pageXOffset!=null?M="page"+k.toUpperCase()+"Offset":P=a[M]!=null?a:o),function(){return P[M]}},v=function(P,k,M,R){if(m(P)&&(P=P(k,M,R)),typeof P!="object")return f(P)&&P!=="max"&&P.charAt(1)!=="="?{x:P,y:P}:{y:P};if(P.nodeType)return{y:P,x:P};var N={},U;for(U in P)N[U]=U!=="onAutoKill"&&m(P[U])?P[U](k,M,R):P[U];return N},w=function(P,k){if(P=l(P)[0],!P||!P.getBoundingClientRect)return console.warn("scrollTo target doesn't exist. Using 0")||{x:0,y:0};var M=P.getBoundingClientRect(),R=!k||k===s||k===o,N=R?{top:a.clientTop-(s.pageYOffset||a.scrollTop||o.scrollTop||0),left:a.clientLeft-(s.pageXOffset||a.scrollLeft||o.scrollLeft||0)}:k.getBoundingClientRect(),U={x:M.left-N.left,y:M.top-N.top};return!R&&k&&(U.x+=_(k,"x")(),U.y+=_(k,"y")()),U},x=function(P,k,M,R,N){return!isNaN(P)&&typeof P!="object"?parseFloat(P)-N:f(P)&&P.charAt(1)==="="?parseFloat(P.substr(2))*(P.charAt(0)==="-"?-1:1)+R-N:P==="max"?A(k,M)-N:Math.min(A(k,M),w(P,k)[M]-N)},C=function(){n=d(),h()&&n&&typeof document<"u"&&document.body&&(s=window,o=document.body,a=document.documentElement,l=n.utils.toArray,n.config({autoKillThreshold:7}),c=n.config(),r=1)},S={version:"3.12.2",name:"scrollTo",rawVars:1,register:function(P){n=P,C()},init:function(P,k,M,R,N){r||C();var U=this,q=n.getProperty(P,"scrollSnapType");U.isWin=P===s,U.target=P,U.tween=M,k=v(k,R,P,N),U.vars=k,U.autoKill=!!k.autoKill,U.getX=_(P,"x"),U.getY=_(P,"y"),U.x=U.xPrev=U.getX(),U.y=U.yPrev=U.getY(),u||(u=n.core.globals().ScrollTrigger),n.getProperty(P,"scrollBehavior")==="smooth"&&n.set(P,{scrollBehavior:"auto"}),q&&q!=="none"&&(U.snap=1,U.snapInline=P.style.scrollSnapType,P.style.scrollSnapType="none"),k.x!=null?(U.add(U,"x",U.x,x(k.x,P,"x",U.x,k.offsetX||0),R,N),U._props.push("scrollTo_x")):U.skipX=1,k.y!=null?(U.add(U,"y",U.y,x(k.y,P,"y",U.y,k.offsetY||0),R,N),U._props.push("scrollTo_y")):U.skipY=1},render:function(P,k){for(var M=k._pt,R=k.target,N=k.tween,U=k.autoKill,q=k.xPrev,W=k.yPrev,F=k.isWin,ue=k.snap,J=k.snapInline,Y,Pe,Ie,pe,Ce;M;)M.r(P,M.d),M=M._next;Y=F||!k.skipX?k.getX():q,Pe=F||!k.skipY?k.getY():W,Ie=Pe-W,pe=Y-q,Ce=c.autoKillThreshold,k.x<0&&(k.x=0),k.y<0&&(k.y=0),U&&(!k.skipX&&(pe>Ce||pe<-Ce)&&Y<A(R,"x")&&(k.skipX=1),!k.skipY&&(Ie>Ce||Ie<-Ce)&&Pe<A(R,"y")&&(k.skipY=1),k.skipX&&k.skipY&&(N.kill(),k.vars.onAutoKill&&k.vars.onAutoKill.apply(N,k.vars.onAutoKillParams||[]))),F?s.scrollTo(k.skipX?Y:k.x,k.skipY?Pe:k.y):(k.skipY||(R.scrollTop=k.y),k.skipX||(R.scrollLeft=k.x)),ue&&(P===1||P===0)&&(Pe=R.scrollTop,Y=R.scrollLeft,J?R.style.scrollSnapType=J:R.style.removeProperty("scroll-snap-type"),R.scrollTop=Pe+1,R.scrollLeft=Y+1,R.scrollTop=Pe,R.scrollLeft=Y),k.xPrev=k.x,k.yPrev=k.y,u&&u.update()},kill:function(P){var k=P==="scrollTo";(k||P==="scrollTo_x")&&(this.skipX=1),(k||P==="scrollTo_y")&&(this.skipY=1)}};S.max=A,S.getOffset=w,S.buildGetter=_,d()&&n.registerPlugin(S),t.ScrollToPlugin=S,t.default=S,Object.defineProperty(t,"__esModule",{value:!0})})})(pT,pT.exports);var ydt=pT.exports;function hd(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function KH(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}/*!
 * GSAP 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Zl={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Xg={duration:.5,overwrite:!1,delay:0},xP,fo,Is,Pc=1e8,Rr=1/Pc,mT=Math.PI*2,wdt=mT/4,xdt=0,JH=Math.sqrt,Cdt=Math.cos,Edt=Math.sin,Ha=function(e){return typeof e=="string"},ks=function(e){return typeof e=="function"},Md=function(e){return typeof e=="number"},CP=function(e){return typeof e>"u"},vh=function(e){return typeof e=="object"},pl=function(e){return e!==!1},EP=function(){return typeof window<"u"},Iw=function(e){return ks(e)||Ha(e)},ZH=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},po=Array.isArray,gT=/(?:-?\.?\d|\.)+/gi,eG=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ag=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,_3=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,tG=/[+-]=-?[.\d]+/,nG=/[^,'"\[\]\s]+/gi,Sdt=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,hs,yc,vT,SP,ec={},Wx={},iG,rG=function(e){return(Wx=z0(e,ec))&&bl},MP=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},$x=function(e,t){return!t&&console.warn(e)},sG=function(e,t){return e&&(ec[e]=t)&&Wx&&(Wx[e]=t)||ec},Q1=function(){return 0},Mdt={suppressEvents:!0,isStart:!0,kill:!1},rx={suppressEvents:!0,kill:!1},Tdt={suppressEvents:!0},TP={},Ff=[],AT={},aG,Ql={},b3={},c9=30,sx=[],IP="",PP=function(e){var t=e[0],n,r;if(vh(t)||ks(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(r=sx.length;r--&&!sx[r].targetTest(t););n=sx[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new PG(e[r],n)))||e.splice(r,1);return e},C0=function(e){return e._gsap||PP(kc(e))[0]._gsap},oG=function(e,t,n){return(n=e[t])&&ks(n)?e[t]():CP(n)&&e.getAttribute&&e.getAttribute(t)||n},ml=function(e,t){return(e=e.split(",")).forEach(t)||e},Vs=function(e){return Math.round(e*1e5)/1e5||0},ja=function(e){return Math.round(e*1e7)/1e7||0},Eg=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+r:n==="-"?e-r:n==="*"?e*r:e/r},Idt=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},Xx=function(){var e=Ff.length,t=Ff.slice(0),n,r;for(AT={},Ff.length=0,n=0;n<e;n++)r=t[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},lG=function(e,t,n,r){Ff.length&&!fo&&Xx(),e.render(t,n,r||fo&&t<0&&(e._initted||e._startAt)),Ff.length&&!fo&&Xx()},cG=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(nG).length<2?t:Ha(e)?e.trim():e},uG=function(e){return e},Nc=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Pdt=function(e){return function(t,n){for(var r in n)r in t||r==="duration"&&e||r==="ease"||(t[r]=n[r])}},z0=function(e,t){for(var n in t)e[n]=t[n];return e},u9=function i(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=vh(t[n])?i(e[n]||(e[n]={}),t[n]):t[n]);return e},Yx=function(e,t){var n={},r;for(r in e)r in t||(n[r]=e[r]);return n},c1=function(e){var t=e.parent||hs,n=e.keyframes?Pdt(po(e.keyframes)):Nc;if(pl(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},kdt=function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0},hG=function(e,t,n,r,s){n===void 0&&(n="_first"),r===void 0&&(r="_last");var a=e[r],o;if(s)for(o=t[s];a&&a[s]>o;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=a,t.parent=t._dp=e,t},mE=function(e,t,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var s=t._prev,a=t._next;s?s._next=a:e[n]===t&&(e[n]=a),a?a._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},Zf=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},E0=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},Bdt=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},_T=function(e,t,n,r){return e._startAt&&(fo?e._startAt.revert(rx):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},Rdt=function i(e){return!e||e._ts&&i(e.parent)},h9=function(e){return e._repeat?Yg(e._tTime,e=e.duration()+e._rDelay)*e:0},Yg=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},Kx=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},gE=function(e){return e._end=ja(e._start+(e._tDur/Math.abs(e._ts||e._rts||Rr)||0))},vE=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=ja(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),gE(e),n._dirty||E0(n,e)),e},dG=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=Kx(e.rawTime(),t),(!t._dur||yb(0,t.totalDuration(),n)-t._tTime>Rr)&&t.render(n,!0)),E0(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-Rr}},$u=function(e,t,n,r){return t.parent&&Zf(t),t._start=ja((Md(n)?n:n||e!==hs?_c(e,n,t):e._time)+t._delay),t._end=ja(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),hG(e,t,"_first","_last",e._sort?"_start":0),bT(t)||(e._recent=t),r||dG(e,t),e._ts<0&&vE(e,e._tTime),e},fG=function(e,t){return(ec.ScrollTrigger||MP("scrollTrigger",t))&&ec.ScrollTrigger.create(t,e)},pG=function(e,t,n,r,s){if(BP(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!fo&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&aG!==Xl.frame)return Ff.push(e),e._lazy=[s,r],1},Ddt=function i(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||i(t))},bT=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},Ldt=function(e,t,n,r){var s=e.ratio,a=t<0||!t&&(!e._start&&Ddt(e)&&!(!e._initted&&bT(e))||(e._ts<0||e._dp._ts<0)&&!bT(e))?0:1,o=e._rDelay,l=0,c,u,h;if(o&&e._repeat&&(l=yb(0,e._tDur,t),u=Yg(l,o),e._yoyo&&u&1&&(a=1-a),u!==Yg(e._tTime,o)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||fo||r||e._zTime===Rr||!t&&e._zTime){if(!e._initted&&pG(e,t,r,n,l))return;for(h=e._zTime,e._zTime=t||(n?Rr:0),n||(n=t&&!h),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=l,c=e._pt;c;)c.r(a,c.d),c=c._next;t<0&&_T(e,t,n,!0),e._onUpdate&&!n&&Bc(e,"onUpdate"),l&&e._repeat&&!n&&e.parent&&Bc(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&Zf(e,1),!n&&!fo&&(Bc(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Odt=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},Kg=function(e,t,n,r){var s=e._repeat,a=ja(t)||0,o=e._tTime/e._tDur;return o&&!r&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:ja(a*(s+1)+e._rDelay*s):a,o>0&&!r&&vE(e,e._tTime=e._tDur*o),e.parent&&gE(e),n||E0(e.parent,e),e},d9=function(e){return e instanceof cl?E0(e):Kg(e,e._dur)},Ndt={_start:0,endTime:Q1,totalDuration:Q1},_c=function i(e,t,n){var r=e.labels,s=e._recent||Ndt,a=e.duration()>=Pc?s.endTime(!1):e._dur,o,l,c;return Ha(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c=t.substr(-1)==="%",o=t.indexOf("="),l==="<"||l===">"?(o>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(o<0?s:n).totalDuration()/100:1)):o<0?(t in r||(r[t]=a),r[t]):(l=parseFloat(t.charAt(o-1)+t.substr(o+1)),c&&n&&(l=l/100*(po(n)?n[0]:n).totalDuration()),o>1?i(e,t.substr(0,o-1),n)+l:a+l)):t==null?a:+t},u1=function(e,t,n){var r=Md(t[1]),s=(r?2:1)+(e<2?0:1),a=t[s],o,l;if(r&&(a.duration=t[1]),a.parent=n,e){for(o=a,l=n;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=pl(l.vars.inherit)&&l.parent;a.immediateRender=pl(o.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new sa(t[0],a,t[s+1])},pp=function(e,t){return e||e===0?t(e):t},yb=function(e,t,n){return n<e?e:n>t?t:n},oo=function(e,t){return!Ha(e)||!(t=Sdt.exec(e))?"":t[1]},Fdt=function(e,t,n){return pp(n,function(r){return yb(e,t,r)})},yT=[].slice,mG=function(e,t){return e&&vh(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&vh(e[0]))&&!e.nodeType&&e!==yc},zdt=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(r){var s;return Ha(r)&&!t||mG(r,1)?(s=n).push.apply(s,kc(r)):n.push(r)})||n},kc=function(e,t,n){return Is&&!t&&Is.selector?Is.selector(e):Ha(e)&&!n&&(vT||!Jg())?yT.call((t||SP).querySelectorAll(e),0):po(e)?zdt(e,n):mG(e)?yT.call(e,0):e?[e]:[]},wT=function(e){return e=kc(e)[0]||$x("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return kc(t,n.querySelectorAll?n:n===e?$x("Invalid scope")||SP.createElement("div"):e)}},gG=function(e){return e.sort(function(){return .5-Math.random()})},vG=function(e){if(ks(e))return e;var t=vh(e)?e:{each:e},n=S0(t.ease),r=t.from||0,s=parseFloat(t.base)||0,a={},o=r>0&&r<1,l=isNaN(r)||o,c=t.axis,u=r,h=r;return Ha(r)?u=h={center:.5,edges:.5,end:1}[r]||0:!o&&l&&(u=r[0],h=r[1]),function(d,f,m){var A=(m||t).length,_=a[A],v,w,x,C,S,I,P,k,M;if(!_){if(M=t.grid==="auto"?0:(t.grid||[1,Pc])[1],!M){for(P=-Pc;P<(P=m[M++].getBoundingClientRect().left)&&M<A;);M--}for(_=a[A]=[],v=l?Math.min(M,A)*u-.5:r%M,w=M===Pc?0:l?A*h/M-.5:r/M|0,P=0,k=Pc,I=0;I<A;I++)x=I%M-v,C=w-(I/M|0),_[I]=S=c?Math.abs(c==="y"?C:x):JH(x*x+C*C),S>P&&(P=S),S<k&&(k=S);r==="random"&&gG(_),_.max=P-k,_.min=k,_.v=A=(parseFloat(t.amount)||parseFloat(t.each)*(M>A?A-1:c?c==="y"?A/M:M:Math.max(M,A/M))||0)*(r==="edges"?-1:1),_.b=A<0?s-A:s,_.u=oo(t.amount||t.each)||0,n=n&&A<0?MG(n):n}return A=(_[d]-_.min)/_.max||0,ja(_.b+(n?n(A):A)*_.v)+_.u}},xT=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=ja(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(Md(n)?0:oo(n))}},AG=function(e,t){var n=po(e),r,s;return!n&&vh(e)&&(r=n=e.radius||Pc,e.values?(e=kc(e.values),(s=!Md(e[0]))&&(r*=r)):e=xT(e.increment)),pp(t,n?ks(e)?function(a){return s=e(a),Math.abs(s-a)<=r?s:a}:function(a){for(var o=parseFloat(s?a.x:a),l=parseFloat(s?a.y:0),c=Pc,u=0,h=e.length,d,f;h--;)s?(d=e[h].x-o,f=e[h].y-l,d=d*d+f*f):d=Math.abs(e[h]-o),d<c&&(c=d,u=h);return u=!r||c<=r?e[u]:a,s||u===a||Md(a)?u:u+oo(a)}:xT(e))},_G=function(e,t,n,r){return pp(po(e)?!t:n===!0?!!(n=0):!r,function(){return po(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*r)/r})},Udt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduce(function(s,a){return a(s)},r)}},Vdt=function(e,t){return function(n){return e(parseFloat(n))+(t||oo(n))}},Hdt=function(e,t,n){return yG(e,t,0,1,n)},bG=function(e,t,n){return pp(n,function(r){return e[~~t(r)]})},Gdt=function i(e,t,n){var r=t-e;return po(e)?bG(e,i(0,e.length),t):pp(n,function(s){return(r+(s-e)%r)%r+e})},Qdt=function i(e,t,n){var r=t-e,s=r*2;return po(e)?bG(e,i(0,e.length-1),t):pp(n,function(a){return a=(s+(a-e)%s)%s||0,e+(a>r?s-a:a)})},q1=function(e){for(var t=0,n="",r,s,a,o;~(r=e.indexOf("random(",t));)a=e.indexOf(")",r),o=e.charAt(r+7)==="[",s=e.substr(r+7,a-r-7).match(o?nG:gT),n+=e.substr(t,r-t)+_G(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),t=a+1;return n+e.substr(t,e.length-t)},yG=function(e,t,n,r,s){var a=t-e,o=r-n;return pp(s,function(l){return n+((l-e)/a*o||0)})},qdt=function i(e,t,n,r){var s=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!s){var a=Ha(e),o={},l,c,u,h,d;if(n===!0&&(r=1)&&(n=null),a)e={p:e},t={p:t};else if(po(e)&&!po(t)){for(u=[],h=e.length,d=h-2,c=1;c<h;c++)u.push(i(e[c-1],e[c]));h--,s=function(m){m*=h;var A=Math.min(d,~~m);return u[A](m-A)},n=t}else r||(e=z0(po(e)?[]:{},e));if(!u){for(l in t)kP.call(o,e,l,"get",t[l]);s=function(m){return LP(m,o)||(a?e.p:e)}}}return pp(n,s)},f9=function(e,t,n){var r=e.labels,s=Pc,a,o,l;for(a in r)o=r[a]-t,o<0==!!n&&o&&s>(o=Math.abs(o))&&(l=a,s=o);return l},Bc=function(e,t,n){var r=e.vars,s=r[t],a=Is,o=e._ctx,l,c,u;if(s)return l=r[t+"Params"],c=r.callbackScope||e,n&&Ff.length&&Xx(),o&&(Is=o),u=l?s.apply(c,l):s.call(c),Is=a,u},XA=function(e){return Zf(e),e.scrollTrigger&&e.scrollTrigger.kill(!!fo),e.progress()<1&&Bc(e,"onInterrupt"),e},_g,wG=[],xG=function(e){if(EP()&&e){e=!e.name&&e.default||e;var t=e.name,n=ks(e),r=t&&!n&&e.init?function(){this._props=[]}:e,s={init:Q1,render:LP,add:kP,kill:oft,modifier:aft,rawVars:0},a={targetTest:0,get:0,getSetter:DP,aliases:{},register:0};if(Jg(),e!==r){if(Ql[t])return;Nc(r,Nc(Yx(e,s),a)),z0(r.prototype,z0(s,Yx(e,a))),Ql[r.prop=t]=r,e.targetTest&&(sx.push(r),TP[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}sG(t,r),e.register&&e.register(bl,r,gl)}else e&&wG.push(e)},Br=255,YA={aqua:[0,Br,Br],lime:[0,Br,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Br],navy:[0,0,128],white:[Br,Br,Br],olive:[128,128,0],yellow:[Br,Br,0],orange:[Br,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Br,0,0],pink:[Br,192,203],cyan:[0,Br,Br],transparent:[Br,Br,Br,0]},y3=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*Br+.5|0},CG=function(e,t,n){var r=e?Md(e)?[e>>16,e>>8&Br,e&Br]:0:YA.black,s,a,o,l,c,u,h,d,f,m;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),YA[e])r=YA[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),o=e.charAt(3),e="#"+s+s+a+a+o+o+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&Br,r&Br,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&Br,e&Br]}else if(e.substr(0,3)==="hsl"){if(r=m=e.match(gT),!t)l=+r[0]%360/360,c=+r[1]/100,u=+r[2]/100,a=u<=.5?u*(c+1):u+c-u*c,s=u*2-a,r.length>3&&(r[3]*=1),r[0]=y3(l+1/3,s,a),r[1]=y3(l,s,a),r[2]=y3(l-1/3,s,a);else if(~e.indexOf("="))return r=e.match(eG),n&&r.length<4&&(r[3]=1),r}else r=e.match(gT)||YA.transparent;r=r.map(Number)}return t&&!m&&(s=r[0]/Br,a=r[1]/Br,o=r[2]/Br,h=Math.max(s,a,o),d=Math.min(s,a,o),u=(h+d)/2,h===d?l=c=0:(f=h-d,c=u>.5?f/(2-h-d):f/(h+d),l=h===s?(a-o)/f+(a<o?6:0):h===a?(o-s)/f+2:(s-a)/f+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(u*100+.5)),n&&r.length<4&&(r[3]=1),r},EG=function(e){var t=[],n=[],r=-1;return e.split(zf).forEach(function(s){var a=s.match(Ag)||[];t.push.apply(t,a),n.push(r+=a.length+1)}),t.c=n,t},p9=function(e,t,n){var r="",s=(e+r).match(zf),a=t?"hsla(":"rgba(",o=0,l,c,u,h;if(!s)return e;if(s=s.map(function(d){return(d=CG(d,t,1))&&a+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),n&&(u=EG(e),l=n.c,l.join(r)!==u.c.join(r)))for(c=e.replace(zf,"1").split(Ag),h=c.length-1;o<h;o++)r+=c[o]+(~l.indexOf(o)?s.shift()||a+"0,0,0,0)":(u.length?u:s.length?s:n).shift());if(!c)for(c=e.split(zf),h=c.length-1;o<h;o++)r+=c[o]+s[o];return r+c[h]},zf=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in YA)i+="|"+e+"\\b";return new RegExp(i+")","gi")}(),jdt=/hsl[a]?\(/,SG=function(e){var t=e.join(" "),n;if(zf.lastIndex=0,zf.test(t))return n=jdt.test(t),e[1]=p9(e[1],n),e[0]=p9(e[0],n,EG(e[1])),!0},j1,Xl=function(){var i=Date.now,e=500,t=33,n=i(),r=n,s=1e3/240,a=s,o=[],l,c,u,h,d,f,m=function A(_){var v=i()-r,w=_===!0,x,C,S,I;if(v>e&&(n+=v-t),r+=v,S=r-n,x=S-a,(x>0||w)&&(I=++h.frame,d=S-h.time*1e3,h.time=S=S/1e3,a+=x+(x>=s?4:s-x),C=1),w||(l=c(A)),C)for(f=0;f<o.length;f++)o[f](S,d,I,_)};return h={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(_){return d/(1e3/(_||60))},wake:function(){iG&&(!vT&&EP()&&(yc=vT=window,SP=yc.document||{},ec.gsap=bl,(yc.gsapVersions||(yc.gsapVersions=[])).push(bl.version),rG(Wx||yc.GreenSockGlobals||!yc.gsap&&yc||{}),u=yc.requestAnimationFrame,wG.forEach(xG)),l&&h.sleep(),c=u||function(_){return setTimeout(_,a-h.time*1e3+1|0)},j1=1,m(2))},sleep:function(){(u?yc.cancelAnimationFrame:clearTimeout)(l),j1=0,c=Q1},lagSmoothing:function(_,v){e=_||1/0,t=Math.min(v||33,e)},fps:function(_){s=1e3/(_||240),a=h.time*1e3+s},add:function(_,v,w){var x=v?function(C,S,I,P){_(C,S,I,P),h.remove(x)}:_;return h.remove(_),o[w?"unshift":"push"](x),Jg(),x},remove:function(_,v){~(v=o.indexOf(_))&&o.splice(v,1)&&f>=v&&f--},_listeners:o},h}(),Jg=function(){return!j1&&Xl.wake()},Ui={},Wdt=/^[\d.\-M][\d.\-,\s]/,$dt=/["']/g,Xdt=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),r=n[0],s=1,a=n.length,o,l,c;s<a;s++)l=n[s],o=s!==a-1?l.lastIndexOf(","):l.length,c=l.substr(0,o),t[r]=isNaN(c)?c.replace($dt,"").trim():+c,r=l.substr(o+1).trim();return t},Ydt=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)},Kdt=function(e){var t=(e+"").split("("),n=Ui[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[Xdt(t[1])]:Ydt(e).split(",").map(cG)):Ui._CE&&Wdt.test(e)?Ui._CE("",e):n},MG=function(e){return function(t){return 1-e(1-t)}},TG=function i(e,t){for(var n=e._first,r;n;)n instanceof cl?i(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?i(n.timeline,t):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=t)),n=n._next},S0=function(e,t){return e&&(ks(e)?e:Ui[e]||Kdt(e))||t},om=function(e,t,n,r){n===void 0&&(n=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:r},a;return ml(e,function(o){Ui[o]=ec[o]=s,Ui[a=o.toLowerCase()]=n;for(var l in s)Ui[a+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Ui[o+"."+l]=s[l]}),s},IG=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},w3=function i(e,t,n){var r=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),a=s/mT*(Math.asin(1/r)||0),o=function(u){return u===1?1:r*Math.pow(2,-10*u)*Edt((u-a)*s)+1},l=e==="out"?o:e==="in"?function(c){return 1-o(1-c)}:IG(o);return s=mT/s,l.config=function(c,u){return i(e,c,u)},l},x3=function i(e,t){t===void 0&&(t=1.70158);var n=function(a){return a?--a*a*((t+1)*a+t)+1:0},r=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:IG(n);return r.config=function(s){return i(e,s)},r};ml("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,e){var t=e<5?e+1:e;om(i+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});Ui.Linear.easeNone=Ui.none=Ui.Linear.easeIn;om("Elastic",w3("in"),w3("out"),w3());(function(i,e){var t=1/e,n=2*t,r=2.5*t,s=function(o){return o<t?i*o*o:o<n?i*Math.pow(o-1.5/e,2)+.75:o<r?i*(o-=2.25/e)*o+.9375:i*Math.pow(o-2.625/e,2)+.984375};om("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);om("Expo",function(i){return i?Math.pow(2,10*(i-1)):0});om("Circ",function(i){return-(JH(1-i*i)-1)});om("Sine",function(i){return i===1?1:-Cdt(i*wdt)+1});om("Back",x3("in"),x3("out"),x3());Ui.SteppedEase=Ui.steps=ec.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,r=e+(t?0:1),s=t?1:0,a=1-Rr;return function(o){return((r*yb(0,a,o)|0)+s)*n}}};Xg.ease=Ui["quad.out"];ml("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return IP+=i+","+i+"Params,"});var PG=function(e,t){this.id=xdt++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:oG,this.set=t?t.getSetter:DP},W1=function(){function i(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Kg(this,+t.duration,1,1),this.data=t.data,Is&&(this._ctx=Is,Is.data.push(this)),j1||Xl.wake()}var e=i.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,Kg(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,r){if(Jg(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(vE(this,n),!s._dp||s.parent||dG(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&$u(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Rr||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),lG(this,n,r)),this},e.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+h9(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},e.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+h9(this),r):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?Yg(this._tTime,s)+1:1},e.timeScale=function(n){if(!arguments.length)return this._rts===-Rr?0:this._rts;if(this._rts===n)return this;var r=this.parent&&this._ts?Kx(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Rr?0:this._rts,this.totalTime(yb(-Math.abs(this._delay),this._tDur,r),!0),gE(this),Bdt(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Jg(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Rr&&(this._tTime-=Rr)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&$u(r,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(pl(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Kx(r.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=Tdt);var r=fo;return fo=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),fo=r,this},e.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(r._ts||1),r=r._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1/0:this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,d9(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,d9(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,r){return this.totalTime(_c(this,n),pl(r))},e.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,pl(r))},e.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},e.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Rr:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Rr,this},e.isActive=function(){var n=this.parent||this._dp,r=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-Rr)},e.eventCallback=function(n,r,s){var a=this.vars;return arguments.length>1?(r?(a[n]=r,s&&(a[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=r)):delete a[n],this):a[n]},e.then=function(n){var r=this;return new Promise(function(s){var a=ks(n)?n:uG,o=function(){var c=r.then;r.then=null,ks(a)&&(a=a(r))&&(a.then||a===r)&&(r.then=c),s(a),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?o():r._prom=o})},e.kill=function(){XA(this)},i}();Nc(W1.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Rr,_prom:0,_ps:!1,_rts:1});var cl=function(i){KH(e,i);function e(n,r){var s;return n===void 0&&(n={}),s=i.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=pl(n.sortChildren),hs&&$u(n.parent||hs,hd(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&fG(hd(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,a){return u1(0,arguments,this),this},t.from=function(r,s,a){return u1(1,arguments,this),this},t.fromTo=function(r,s,a,o){return u1(2,arguments,this),this},t.set=function(r,s,a){return s.duration=0,s.parent=this,c1(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new sa(r,s,_c(this,a),1),this},t.call=function(r,s,a){return $u(this,sa.delayedCall(0,r,s),a)},t.staggerTo=function(r,s,a,o,l,c,u){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=c,a.onCompleteParams=u,a.parent=this,new sa(r,a,_c(this,l)),this},t.staggerFrom=function(r,s,a,o,l,c,u){return a.runBackwards=1,c1(a).immediateRender=pl(a.immediateRender),this.staggerTo(r,s,a,o,l,c,u)},t.staggerFromTo=function(r,s,a,o,l,c,u,h){return o.startAt=a,c1(o).immediateRender=pl(o.immediateRender),this.staggerTo(r,s,o,l,c,u,h)},t.render=function(r,s,a){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=r<=0?0:ja(r),h=this._zTime<0!=r<0&&(this._initted||!c),d,f,m,A,_,v,w,x,C,S,I,P;if(this!==hs&&u>l&&r>=0&&(u=l),u!==this._tTime||a||h){if(o!==this._time&&c&&(u+=this._time-o,r+=this._time-o),d=u,C=this._start,x=this._ts,v=!x,h&&(c||(o=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(I=this._yoyo,_=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(_*100+r,s,a);if(d=ja(u%_),u===l?(A=this._repeat,d=c):(A=~~(u/_),A&&A===u/_&&(d=c,A--),d>c&&(d=c)),S=Yg(this._tTime,_),!o&&this._tTime&&S!==A&&this._tTime-S*_-this._dur<=0&&(S=A),I&&A&1&&(d=c-d,P=1),A!==S&&!this._lock){var k=I&&S&1,M=k===(I&&A&1);if(A<S&&(k=!k),o=k?0:u%c?c:u,this._lock=1,this.render(o||(P?0:ja(A*_)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&Bc(this,"onRepeat"),this.vars.repeatRefresh&&!P&&(this.invalidate()._lock=1),o&&o!==this._time||v!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,M&&(this._lock=2,o=k?c:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!P&&this.invalidate()),this._lock=0,!this._ts&&!v)return this;TG(this,P)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(w=Odt(this,ja(o),ja(d)),w&&(u-=d-(d=w._start))),this._tTime=u,this._time=d,this._act=!x,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,o=0),!o&&d&&!s&&!A&&(Bc(this,"onStart"),this._tTime!==u))return this;if(d>=o&&r>=0)for(f=this._first;f;){if(m=f._next,(f._act||d>=f._start)&&f._ts&&w!==f){if(f.parent!==this)return this.render(r,s,a);if(f.render(f._ts>0?(d-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(d-f._start)*f._ts,s,a),d!==this._time||!this._ts&&!v){w=0,m&&(u+=this._zTime=-Rr);break}}f=m}else{f=this._last;for(var R=r<0?r:d;f;){if(m=f._prev,(f._act||R<=f._end)&&f._ts&&w!==f){if(f.parent!==this)return this.render(r,s,a);if(f.render(f._ts>0?(R-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(R-f._start)*f._ts,s,a||fo&&(f._initted||f._startAt)),d!==this._time||!this._ts&&!v){w=0,m&&(u+=this._zTime=R?-Rr:Rr);break}}f=m}}if(w&&!s&&(this.pause(),w.render(d>=o?0:-Rr)._zTime=d>=o?1:-1,this._ts))return this._start=C,gE(this),this.render(r,s,a);this._onUpdate&&!s&&Bc(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&o)&&(C===this._start||Math.abs(x)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&Zf(this,1),!s&&!(r<0&&!o)&&(u||o||!l)&&(Bc(this,u===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var a=this;if(Md(s)||(s=_c(this,s,r)),!(r instanceof W1)){if(po(r))return r.forEach(function(o){return a.add(o,s)}),this;if(Ha(r))return this.addLabel(r,s);if(ks(r))r=sa.delayedCall(0,r);else return this}return this!==r?$u(this,r,s):this},t.getChildren=function(r,s,a,o){r===void 0&&(r=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=-Pc);for(var l=[],c=this._first;c;)c._start>=o&&(c instanceof sa?s&&l.push(c):(a&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,a)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===r)return s[a]},t.remove=function(r){return Ha(r)?this.removeLabel(r):ks(r)?this.killTweensOf(r):(mE(this,r),r===this._recent&&(this._recent=this._last),E0(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ja(Xl.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=_c(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,a){var o=sa.delayedCall(0,s||Q1,a);return o.data="isPause",this._hasPause=1,$u(this,o,_c(this,r))},t.removePause=function(r){var s=this._first;for(r=_c(this,r);s;)s._start===r&&s.data==="isPause"&&Zf(s),s=s._next},t.killTweensOf=function(r,s,a){for(var o=this.getTweensOf(r,a),l=o.length;l--;)Tf!==o[l]&&o[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var a=[],o=kc(r),l=this._first,c=Md(s),u;l;)l instanceof sa?Idt(l._targets,o)&&(c?(!Tf||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&a.push(l):(u=l.getTweensOf(o,s)).length&&a.push.apply(a,u),l=l._next;return a},t.tweenTo=function(r,s){s=s||{};var a=this,o=_c(a,r),l=s,c=l.startAt,u=l.onStart,h=l.onStartParams,d=l.immediateRender,f,m=sa.to(a,Nc({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(c&&"time"in c?c.time:a._time))/a.timeScale())||Rr,onStart:function(){if(a.pause(),!f){var _=s.duration||Math.abs((o-(c&&"time"in c?c.time:a._time))/a.timeScale());m._dur!==_&&Kg(m,_,0,1).render(m._time,!0,!0),f=1}u&&u.apply(m,h||[])}},s));return d?m.render(0):m},t.tweenFromTo=function(r,s,a){return this.tweenTo(s,Nc({startAt:{time:_c(this,r)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),f9(this,_c(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),f9(this,_c(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Rr)},t.shiftChildren=function(r,s,a){a===void 0&&(a=0);for(var o=this._first,l=this.labels,c;o;)o._start>=a&&(o._start+=r,o._end+=r),o=o._next;if(s)for(c in l)l[c]>=a&&(l[c]+=r);return E0(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return i.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),E0(this)},t.totalDuration=function(r){var s=0,a=this,o=a._last,l=Pc,c,u,h;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-r:r));if(a._dirty){for(h=a.parent;o;)c=o._prev,o._dirty&&o.totalDuration(),u=o._start,u>l&&a._sort&&o._ts&&!a._lock?(a._lock=1,$u(a,o,u-o._delay,1)._lock=0):l=u,u<0&&o._ts&&(s-=u,(!h&&!a._dp||h&&h.smoothChildTiming)&&(a._start+=u/a._ts,a._time-=u,a._tTime-=u),a.shiftChildren(-u,!1,-1/0),l=0),o._end>s&&o._ts&&(s=o._end),o=c;Kg(a,a===hs&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(r){if(hs._ts&&(lG(hs,Kx(r,hs)),aG=Xl.frame),Xl.frame>=c9){c9+=Zl.autoSleep||120;var s=hs._first;if((!s||!s._ts)&&Zl.autoSleep&&Xl._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Xl.sleep()}}},e}(W1);Nc(cl.prototype,{_lock:0,_hasPause:0,_forcing:0});var Jdt=function(e,t,n,r,s,a,o){var l=new gl(this._pt,e,t,0,1,OG,null,s),c=0,u=0,h,d,f,m,A,_,v,w;for(l.b=n,l.e=r,n+="",r+="",(v=~r.indexOf("random("))&&(r=q1(r)),a&&(w=[n,r],a(w,e,t),n=w[0],r=w[1]),d=n.match(_3)||[];h=_3.exec(r);)m=h[0],A=r.substring(c,h.index),f?f=(f+1)%5:A.substr(-5)==="rgba("&&(f=1),m!==d[u++]&&(_=parseFloat(d[u-1])||0,l._pt={_next:l._pt,p:A||u===1?A:",",s:_,c:m.charAt(1)==="="?Eg(_,m)-_:parseFloat(m)-_,m:f&&f<4?Math.round:0},c=_3.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=o,(tG.test(r)||v)&&(l.e=0),this._pt=l,l},kP=function(e,t,n,r,s,a,o,l,c,u){ks(r)&&(r=r(s||0,e,a));var h=e[t],d=n!=="get"?n:ks(h)?c?e[t.indexOf("set")||!ks(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():h,f=ks(h)?c?ift:DG:RP,m;if(Ha(r)&&(~r.indexOf("random(")&&(r=q1(r)),r.charAt(1)==="="&&(m=Eg(d,r)+(oo(d)||0),(m||m===0)&&(r=m))),!u||d!==r||CT)return!isNaN(d*r)&&r!==""?(m=new gl(this._pt,e,t,+d||0,r-(d||0),typeof h=="boolean"?sft:LG,0,f),c&&(m.fp=c),o&&m.modifier(o,this,e),this._pt=m):(!h&&!(t in e)&&MP(t,r),Jdt.call(this,e,t,d,r,f,l||Zl.stringFilter,c))},Zdt=function(e,t,n,r,s){if(ks(e)&&(e=h1(e,s,t,n,r)),!vh(e)||e.style&&e.nodeType||po(e)||ZH(e))return Ha(e)?h1(e,s,t,n,r):e;var a={},o;for(o in e)a[o]=h1(e[o],s,t,n,r);return a},kG=function(e,t,n,r,s,a){var o,l,c,u;if(Ql[e]&&(o=new Ql[e]).init(s,o.rawVars?t[e]:Zdt(t[e],r,s,a,n),n,r,a)!==!1&&(n._pt=l=new gl(n._pt,s,e,0,1,o.render,o,0,o.priority),n!==_g))for(c=n._ptLookup[n._targets.indexOf(s)],u=o._props.length;u--;)c[o._props[u]]=l;return o},Tf,CT,BP=function i(e,t,n){var r=e.vars,s=r.ease,a=r.startAt,o=r.immediateRender,l=r.lazy,c=r.onUpdate,u=r.onUpdateParams,h=r.callbackScope,d=r.runBackwards,f=r.yoyoEase,m=r.keyframes,A=r.autoRevert,_=e._dur,v=e._startAt,w=e._targets,x=e.parent,C=x&&x.data==="nested"?x.vars.targets:w,S=e._overwrite==="auto"&&!xP,I=e.timeline,P,k,M,R,N,U,q,W,F,ue,J,Y,Pe;if(I&&(!m||!s)&&(s="none"),e._ease=S0(s,Xg.ease),e._yEase=f?MG(S0(f===!0?s:f,Xg.ease)):0,f&&e._yoyo&&!e._repeat&&(f=e._yEase,e._yEase=e._ease,e._ease=f),e._from=!I&&!!r.runBackwards,!I||m&&!r.stagger){if(W=w[0]?C0(w[0]).harness:0,Y=W&&r[W.prop],P=Yx(r,TP),v&&(v._zTime<0&&v.progress(1),t<0&&d&&o&&!A?v.render(-1,!0):v.revert(d&&_?rx:Mdt),v._lazy=0),a){if(Zf(e._startAt=sa.set(w,Nc({data:"isStart",overwrite:!1,parent:x,immediateRender:!0,lazy:!v&&pl(l),startAt:null,delay:0,onUpdate:c,onUpdateParams:u,callbackScope:h,stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(fo||!o&&!A)&&e._startAt.revert(rx),o&&_&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(d&&_&&!v){if(t&&(o=!1),M=Nc({overwrite:!1,data:"isFromStart",lazy:o&&!v&&pl(l),immediateRender:o,stagger:0,parent:x},P),Y&&(M[W.prop]=Y),Zf(e._startAt=sa.set(w,M)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(fo?e._startAt.revert(rx):e._startAt.render(-1,!0)),e._zTime=t,!o)i(e._startAt,Rr,Rr);else if(!t)return}for(e._pt=e._ptCache=0,l=_&&pl(l)||l&&!_,k=0;k<w.length;k++){if(N=w[k],q=N._gsap||PP(w)[k]._gsap,e._ptLookup[k]=ue={},AT[q.id]&&Ff.length&&Xx(),J=C===w?k:C.indexOf(N),W&&(F=new W).init(N,Y||P,e,J,C)!==!1&&(e._pt=R=new gl(e._pt,N,F.name,0,1,F.render,F,0,F.priority),F._props.forEach(function(Ie){ue[Ie]=R}),F.priority&&(U=1)),!W||Y)for(M in P)Ql[M]&&(F=kG(M,P,e,J,N,C))?F.priority&&(U=1):ue[M]=R=kP.call(e,N,M,"get",P[M],J,C,0,r.stringFilter);e._op&&e._op[k]&&e.kill(N,e._op[k]),S&&e._pt&&(Tf=e,hs.killTweensOf(N,ue,e.globalTime(t)),Pe=!e.parent,Tf=0),e._pt&&l&&(AT[q.id]=1)}U&&NG(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!Pe,m&&t<=0&&I.render(Pc,!0,!0)},eft=function(e,t,n,r,s,a,o){var l=(e._pt&&e._ptCache||(e._ptCache={}))[t],c,u,h,d;if(!l)for(l=e._ptCache[t]=[],h=e._ptLookup,d=e._targets.length;d--;){if(c=h[d][t],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==t&&c.fp!==t;)c=c._next;if(!c)return CT=1,e.vars[t]="+=0",BP(e,o),CT=0,1;l.push(c)}for(d=l.length;d--;)u=l[d],c=u._pt||u,c.s=(r||r===0)&&!s?r:c.s+(r||0)+a*c.c,c.c=n-c.s,u.e&&(u.e=Vs(n)+oo(u.e)),u.b&&(u.b=c.s+oo(u.b))},tft=function(e,t){var n=e[0]?C0(e[0]).harness:0,r=n&&n.aliases,s,a,o,l;if(!r)return t;s=z0({},t);for(a in r)if(a in s)for(l=r[a].split(","),o=l.length;o--;)s[l[o]]=s[a];return s},nft=function(e,t,n,r){var s=t.ease||r||"power1.inOut",a,o;if(po(t))o=n[e]||(n[e]=[]),t.forEach(function(l,c){return o.push({t:c/(t.length-1)*100,v:l,e:s})});else for(a in t)o=n[a]||(n[a]=[]),a==="ease"||o.push({t:parseFloat(e),v:t[a],e:s})},h1=function(e,t,n,r,s){return ks(e)?e.call(t,n,r,s):Ha(e)&&~e.indexOf("random(")?q1(e):e},BG=IP+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",RG={};ml(BG+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return RG[i]=1});var sa=function(i){KH(e,i);function e(n,r,s,a){var o;typeof r=="number"&&(s.duration=r,r=s,s=null),o=i.call(this,a?r:c1(r))||this;var l=o.vars,c=l.duration,u=l.delay,h=l.immediateRender,d=l.stagger,f=l.overwrite,m=l.keyframes,A=l.defaults,_=l.scrollTrigger,v=l.yoyoEase,w=r.parent||hs,x=(po(n)||ZH(n)?Md(n[0]):"length"in r)?[n]:kc(n),C,S,I,P,k,M,R,N;if(o._targets=x.length?PP(x):$x("GSAP target "+n+" not found. https://greensock.com",!Zl.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=f,m||d||Iw(c)||Iw(u)){if(r=o.vars,C=o.timeline=new cl({data:"nested",defaults:A||{},targets:w&&w.data==="nested"?w.vars.targets:x}),C.kill(),C.parent=C._dp=hd(o),C._start=0,d||Iw(c)||Iw(u)){if(P=x.length,R=d&&vG(d),vh(d))for(k in d)~BG.indexOf(k)&&(N||(N={}),N[k]=d[k]);for(S=0;S<P;S++)I=Yx(r,RG),I.stagger=0,v&&(I.yoyoEase=v),N&&z0(I,N),M=x[S],I.duration=+h1(c,hd(o),S,M,x),I.delay=(+h1(u,hd(o),S,M,x)||0)-o._delay,!d&&P===1&&I.delay&&(o._delay=u=I.delay,o._start+=u,I.delay=0),C.to(M,I,R?R(S,M,x):0),C._ease=Ui.none;C.duration()?c=u=0:o.timeline=0}else if(m){c1(Nc(C.vars.defaults,{ease:"none"})),C._ease=S0(m.ease||r.ease||"none");var U=0,q,W,F;if(po(m))m.forEach(function(ue){return C.to(x,ue,">")}),C.duration();else{I={};for(k in m)k==="ease"||k==="easeEach"||nft(k,m[k],I,m.easeEach);for(k in I)for(q=I[k].sort(function(ue,J){return ue.t-J.t}),U=0,S=0;S<q.length;S++)W=q[S],F={ease:W.e,duration:(W.t-(S?q[S-1].t:0))/100*c},F[k]=W.v,C.to(x,F,U),U+=F.duration;C.duration()<c&&C.to({},{duration:c-C.duration()})}}c||o.duration(c=C.duration())}else o.timeline=0;return f===!0&&!xP&&(Tf=hd(o),hs.killTweensOf(x),Tf=0),$u(w,hd(o),s),r.reversed&&o.reverse(),r.paused&&o.paused(!0),(h||!c&&!m&&o._start===ja(w._time)&&pl(h)&&Rdt(hd(o))&&w.data!=="nested")&&(o._tTime=-Rr,o.render(Math.max(0,-u)||0)),_&&fG(hd(o),_),o}var t=e.prototype;return t.render=function(r,s,a){var o=this._time,l=this._tDur,c=this._dur,u=r<0,h=r>l-Rr&&!u?l:r<Rr?0:r,d,f,m,A,_,v,w,x,C;if(!c)Ldt(this,r,s,a);else if(h!==this._tTime||!r||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(d=h,x=this.timeline,this._repeat){if(A=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(A*100+r,s,a);if(d=ja(h%A),h===l?(m=this._repeat,d=c):(m=~~(h/A),m&&m===h/A&&(d=c,m--),d>c&&(d=c)),v=this._yoyo&&m&1,v&&(C=this._yEase,d=c-d),_=Yg(this._tTime,A),d===o&&!a&&this._initted)return this._tTime=h,this;m!==_&&(x&&this._yEase&&TG(x,v),this.vars.repeatRefresh&&!v&&!this._lock&&(this._lock=a=1,this.render(ja(A*m),!0).invalidate()._lock=0))}if(!this._initted){if(pG(this,u?r:d,a,s,h))return this._tTime=0,this;if(o!==this._time)return this;if(c!==this._dur)return this.render(r,s,a)}if(this._tTime=h,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=w=(C||this._ease)(d/c),this._from&&(this.ratio=w=1-w),d&&!o&&!s&&!m&&(Bc(this,"onStart"),this._tTime!==h))return this;for(f=this._pt;f;)f.r(w,f.d),f=f._next;x&&x.render(r<0?r:!d&&v?-Rr:x._dur*x._ease(d/this._dur),s,a)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&_T(this,r,s,a),Bc(this,"onUpdate")),this._repeat&&m!==_&&this.vars.onRepeat&&!s&&this.parent&&Bc(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(u&&!this._onUpdate&&_T(this,r,!0,!0),(r||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&Zf(this,1),!s&&!(u&&!o)&&(h||o||v)&&(Bc(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),i.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,a,o){j1||Xl.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||BP(this,l),c=this._ease(l/this._dur),eft(this,r,s,a,o,c,l)?this.resetTo(r,s,a,o):(vE(this,0),this.parent||hG(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?XA(this):this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,Tf&&Tf.vars.overwrite!==!0)._first||XA(this),this.parent&&a!==this.timeline.totalDuration()&&Kg(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,l=r?kc(r):o,c=this._ptLookup,u=this._pt,h,d,f,m,A,_,v;if((!s||s==="all")&&kdt(o,l))return s==="all"&&(this._pt=0),XA(this);for(h=this._op=this._op||[],s!=="all"&&(Ha(s)&&(A={},ml(s,function(w){return A[w]=1}),s=A),s=tft(o,s)),v=o.length;v--;)if(~l.indexOf(o[v])){d=c[v],s==="all"?(h[v]=s,m=d,f={}):(f=h[v]=h[v]||{},m=s);for(A in m)_=d&&d[A],_&&((!("kill"in _.d)||_.d.kill(A)===!0)&&mE(this,_,"_pt"),delete d[A]),f!=="all"&&(f[A]=1)}return this._initted&&!this._pt&&u&&XA(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return u1(1,arguments)},e.delayedCall=function(r,s,a,o){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},e.fromTo=function(r,s,a){return u1(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,a){return hs.killTweensOf(r,s,a)},e}(W1);Nc(sa.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ml("staggerTo,staggerFrom,staggerFromTo",function(i){sa[i]=function(){var e=new cl,t=yT.call(arguments,0);return t.splice(i==="staggerFromTo"?5:4,0,0),e[i].apply(e,t)}});var RP=function(e,t,n){return e[t]=n},DG=function(e,t,n){return e[t](n)},ift=function(e,t,n,r){return e[t](r.fp,n)},rft=function(e,t,n){return e.setAttribute(t,n)},DP=function(e,t){return ks(e[t])?DG:CP(e[t])&&e.setAttribute?rft:RP},LG=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},sft=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},OG=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},LP=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},aft=function(e,t,n,r){for(var s=this._pt,a;s;)a=s._next,s.p===r&&s.modifier(e,t,n),s=a},oft=function(e){for(var t=this._pt,n,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?mE(this,t,"_pt"):t.dep||(n=1),t=r;return!n},lft=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},NG=function(e){for(var t=e._pt,n,r,s,a;t;){for(n=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:a)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:a=t,t=n}e._pt=s},gl=function(){function i(t,n,r,s,a,o,l,c,u){this.t=n,this.s=s,this.c=a,this.p=r,this.r=o||LG,this.d=l||this,this.set=c||RP,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=i.prototype;return e.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=lft,this.m=n,this.mt=s,this.tween=r},i}();ml(IP+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return TP[i]=1});ec.TweenMax=ec.TweenLite=sa;ec.TimelineLite=ec.TimelineMax=cl;hs=new cl({sortChildren:!1,defaults:Xg,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Zl.stringFilter=SG;var M0=[],ax={},cft=[],m9=0,uft=0,C3=function(e){return(ax[e]||cft).map(function(t){return t()})},ET=function(){var e=Date.now(),t=[];e-m9>2&&(C3("matchMediaInit"),M0.forEach(function(n){var r=n.queries,s=n.conditions,a,o,l,c;for(o in r)a=yc.matchMedia(r[o]).matches,a&&(l=1),a!==s[o]&&(s[o]=a,c=1);c&&(n.revert(),l&&t.push(n))}),C3("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n)}),m9=e,C3("matchMedia"))},FG=function(){function i(t,n){this.selector=n&&wT(n),this.data=[],this._r=[],this.isReverted=!1,this.id=uft++,t&&this.add(t)}var e=i.prototype;return e.add=function(n,r,s){ks(n)&&(s=r,r=n,n=ks);var a=this,o=function(){var c=Is,u=a.selector,h;return c&&c!==a&&c.data.push(a),s&&(a.selector=wT(s)),Is=a,h=r.apply(a,arguments),ks(h)&&a._r.push(h),Is=c,a.selector=u,a.isReverted=!1,h};return a.last=o,n===ks?o(a):n?a[n]=o:o},e.ignore=function(n){var r=Is;Is=null,n(this),Is=r},e.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof sa&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,r){var s=this;if(n){var a=this.getTweens();this.data.forEach(function(l){l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(c){return a.splice(a.indexOf(c),1)}))}),a.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,c){return c.g-l.g||-1/0}).forEach(function(l){return l.t.revert(n)}),this.data.forEach(function(l){return!(l instanceof sa)&&l.revert&&l.revert(n)}),this._r.forEach(function(l){return l(n,s)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),r)for(var o=M0.length;o--;)M0[o].id===this.id&&M0.splice(o,1)},e.revert=function(n){this.kill(n||{})},i}(),hft=function(){function i(t){this.contexts=[],this.scope=t}var e=i.prototype;return e.add=function(n,r,s){vh(n)||(n={matches:n});var a=new FG(0,s||this.scope),o=a.conditions={},l,c,u;Is&&!a.selector&&(a.selector=Is.selector),this.contexts.push(a),r=a.add("onMatch",r),a.queries=n;for(c in n)c==="all"?u=1:(l=yc.matchMedia(n[c]),l&&(M0.indexOf(a)<0&&M0.push(a),(o[c]=l.matches)&&(u=1),l.addListener?l.addListener(ET):l.addEventListener("change",ET)));return u&&r(a),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i}(),Jx={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(r){return xG(r)})},timeline:function(e){return new cl(e)},getTweensOf:function(e,t){return hs.getTweensOf(e,t)},getProperty:function(e,t,n,r){Ha(e)&&(e=kc(e)[0]);var s=C0(e||{}).get,a=n?uG:cG;return n==="native"&&(n=""),e&&(t?a((Ql[t]&&Ql[t].get||s)(e,t,n,r)):function(o,l,c){return a((Ql[o]&&Ql[o].get||s)(e,o,l,c))})},quickSetter:function(e,t,n){if(e=kc(e),e.length>1){var r=e.map(function(u){return bl.quickSetter(u,t,n)}),s=r.length;return function(u){for(var h=s;h--;)r[h](u)}}e=e[0]||{};var a=Ql[t],o=C0(e),l=o.harness&&(o.harness.aliases||{})[t]||t,c=a?function(u){var h=new a;_g._pt=0,h.init(e,n?u+n:u,_g,0,[e]),h.render(1,h),_g._pt&&LP(1,_g)}:o.set(e,l);return a?c:function(u){return c(e,l,n?u+n:u,o,1)}},quickTo:function(e,t,n){var r,s=bl.to(e,z0((r={},r[t]="+=0.1",r.paused=!0,r),n||{})),a=function(l,c,u){return s.resetTo(t,l,c,u)};return a.tween=s,a},isTweening:function(e){return hs.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=S0(e.ease,Xg.ease)),u9(Xg,e||{})},config:function(e){return u9(Zl,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,s=e.defaults,a=e.extendTimeline;(r||"").split(",").forEach(function(o){return o&&!Ql[o]&&!ec[o]&&$x(t+" effect requires "+o+" plugin.")}),b3[t]=function(o,l,c){return n(kc(o),Nc(l||{},s),c)},a&&(cl.prototype[t]=function(o,l,c){return this.add(b3[t](o,vh(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){Ui[e]=S0(t)},parseEase:function(e,t){return arguments.length?S0(e,t):Ui},getById:function(e){return hs.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new cl(e),r,s;for(n.smoothChildTiming=pl(e.smoothChildTiming),hs.remove(n),n._dp=0,n._time=n._tTime=hs._time,r=hs._first;r;)s=r._next,(t||!(!r._dur&&r instanceof sa&&r.vars.onComplete===r._targets[0]))&&$u(n,r,r._start-r._delay),r=s;return $u(hs,n,0),n},context:function(e,t){return e?new FG(e,t):Is},matchMedia:function(e){return new hft(e)},matchMediaRefresh:function(){return M0.forEach(function(e){var t=e.conditions,n,r;for(r in t)t[r]&&(t[r]=!1,n=1);n&&e.revert()})||ET()},addEventListener:function(e,t){var n=ax[e]||(ax[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=ax[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:Gdt,wrapYoyo:Qdt,distribute:vG,random:_G,snap:AG,normalize:Hdt,getUnit:oo,clamp:Fdt,splitColor:CG,toArray:kc,selector:wT,mapRange:yG,pipe:Udt,unitize:Vdt,interpolate:qdt,shuffle:gG},install:rG,effects:b3,ticker:Xl,updateRoot:cl.updateRoot,plugins:Ql,globalTimeline:hs,core:{PropTween:gl,globals:sG,Tween:sa,Timeline:cl,Animation:W1,getCache:C0,_removeLinkedListItem:mE,reverting:function(){return fo},context:function(e){return e&&Is&&(Is.data.push(e),e._ctx=Is),Is},suppressOverwrites:function(e){return xP=e}}};ml("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return Jx[i]=sa[i]});Xl.add(cl.updateRoot);_g=Jx.to({},{duration:0});var dft=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},fft=function(e,t){var n=e._targets,r,s,a;for(r in t)for(s=n.length;s--;)a=e._ptLookup[s][r],a&&(a=a.d)&&(a._pt&&(a=dft(a,r)),a&&a.modifier&&a.modifier(t[r],e,n[s],r))},E3=function(e,t){return{name:e,rawVars:1,init:function(r,s,a){a._onInit=function(o){var l,c;if(Ha(s)&&(l={},ml(s,function(u){return l[u]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}fft(o,s)}}}},bl=Jx.registerPlugin({name:"attr",init:function(e,t,n,r,s){var a,o,l;this.tween=n;for(a in t)l=e.getAttribute(a)||"",o=this.add(e,"setAttribute",(l||0)+"",t[a],r,s,0,0,a),o.op=a,o.b=l,this._props.push(a)},render:function(e,t){for(var n=t._pt;n;)fo?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},E3("roundProps",xT),E3("modifiers"),E3("snap",AG))||Jx;sa.version=cl.version=bl.version="3.12.2";iG=1;EP()&&Jg();Ui.Power0;Ui.Power1;Ui.Power2;Ui.Power3;Ui.Power4;Ui.Linear;Ui.Quad;Ui.Cubic;Ui.Quart;Ui.Quint;Ui.Strong;Ui.Elastic;Ui.Back;Ui.SteppedEase;Ui.Bounce;Ui.Sine;Ui.Expo;Ui.Circ;/*!
 * CSSPlugin 3.12.2
 * https://greensock.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var g9,If,Sg,OP,g0,v9,NP,pft=function(){return typeof window<"u"},Td={},n0=180/Math.PI,Mg=Math.PI/180,Ym=Math.atan2,A9=1e8,FP=/([A-Z])/g,mft=/(left|right|width|margin|padding|x)/i,gft=/[\s,\(]\S/,ih={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ST=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},vft=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Aft=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},_ft=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},zG=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},UG=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},bft=function(e,t,n){return e.style[t]=n},yft=function(e,t,n){return e.style.setProperty(t,n)},wft=function(e,t,n){return e._gsap[t]=n},xft=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},Cft=function(e,t,n,r,s){var a=e._gsap;a.scaleX=a.scaleY=n,a.renderTransform(s,a)},Eft=function(e,t,n,r,s){var a=e._gsap;a[t]=n,a.renderTransform(s,a)},ms="transform",pu=ms+"Origin",Sft=function i(e,t){var n=this,r=this.target,s=r.style;if(e in Td&&s){if(this.tfm=this.tfm||{},e!=="transform")e=ih[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return n.tfm[a]=fd(r,a)}):this.tfm[e]=r._gsap.x?r._gsap[e]:fd(r,e);else return ih.transform.split(",").forEach(function(a){return i.call(n,a,t)});if(this.props.indexOf(ms)>=0)return;r._gsap.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(pu,t,"")),e=ms}(s||t)&&this.props.push(e,t,s[e])},VG=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Mft=function(){var e=this.props,t=this.target,n=t.style,r=t._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(FP,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)r[a]=this.tfm[a];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=NP(),(!s||!s.isStart)&&!n[ms]&&(VG(n),r.uncache=1)}},HG=function(e,t){var n={target:e,props:[],revert:Mft,save:Sft};return e._gsap||bl.core.getCache(e),t&&t.split(",").forEach(function(r){return n.save(r)}),n},GG,MT=function(e,t){var n=If.createElementNS?If.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):If.createElement(e);return n.style?n:If.createElement(e)},hh=function i(e,t,n){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(FP,"-$1").toLowerCase())||r.getPropertyValue(t)||!n&&i(e,Zg(t)||t,1)||""},_9="O,Moz,ms,Ms,Webkit".split(","),Zg=function(e,t,n){var r=t||g0,s=r.style,a=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(_9[a]+e in s););return a<0?null:(a===3?"ms":a>=0?_9[a]:"")+e},TT=function(){pft()&&window.document&&(g9=window,If=g9.document,Sg=If.documentElement,g0=MT("div")||{style:{}},MT("div"),ms=Zg(ms),pu=ms+"Origin",g0.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",GG=!!Zg("perspective"),NP=bl.core.reverting,OP=1)},S3=function i(e){var t=MT("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText,a;if(Sg.appendChild(t),t.appendChild(this),this.style.display="block",e)try{a=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch{}else this._gsapBBox&&(a=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),Sg.removeChild(t),this.style.cssText=s,a},b9=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},QG=function(e){var t;try{t=e.getBBox()}catch{t=S3.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===S3||(t=S3.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+b9(e,["x","cx","x1"])||0,y:+b9(e,["y","cy","y1"])||0,width:0,height:0}:t},qG=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&QG(e))},$1=function(e,t){if(t){var n=e.style;t in Td&&t!==pu&&(t=ms),n.removeProperty?((t.substr(0,2)==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(t.replace(FP,"-$1").toLowerCase())):n.removeAttribute(t)}},Pf=function(e,t,n,r,s,a){var o=new gl(e._pt,t,n,0,1,a?UG:zG);return e._pt=o,o.b=r,o.e=s,e._props.push(n),o},y9={deg:1,rad:1,turn:1},Tft={grid:1,flex:1},ep=function i(e,t,n,r){var s=parseFloat(n)||0,a=(n+"").trim().substr((s+"").length)||"px",o=g0.style,l=mft.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),h=100,d=r==="px",f=r==="%",m,A,_,v;return r===a||!s||y9[r]||y9[a]?s:(a!=="px"&&!d&&(s=i(e,t,n,"px")),v=e.getCTM&&qG(e),(f||a==="%")&&(Td[t]||~t.indexOf("adius"))?(m=v?e.getBBox()[l?"width":"height"]:e[u],Vs(f?s/m*h:s/100*m)):(o[l?"width":"height"]=h+(d?a:r),A=~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,v&&(A=(e.ownerSVGElement||{}).parentNode),(!A||A===If||!A.appendChild)&&(A=If.body),_=A._gsap,_&&f&&_.width&&l&&_.time===Xl.time&&!_.uncache?Vs(s/_.width*h):((f||a==="%")&&!Tft[hh(A,"display")]&&(o.position=hh(e,"position")),A===e&&(o.position="static"),A.appendChild(g0),m=g0[u],A.removeChild(g0),o.position="absolute",l&&f&&(_=C0(A),_.time=Xl.time,_.width=A[u]),Vs(d?m*s/h:m&&s?h/m*s:0))))},fd=function(e,t,n,r){var s;return OP||TT(),t in ih&&t!=="transform"&&(t=ih[t],~t.indexOf(",")&&(t=t.split(",")[0])),Td[t]&&t!=="transform"?(s=Y1(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:e2(hh(e,pu))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=Zx[t]&&Zx[t](e,t,n)||hh(e,t)||oG(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?ep(e,t,s,n)+n:s},Ift=function(e,t,n,r){if(!n||n==="none"){var s=Zg(t,e,1),a=s&&hh(e,s,1);a&&a!==n?(t=s,n=a):t==="borderColor"&&(n=hh(e,"borderTopColor"))}var o=new gl(this._pt,e.style,t,0,1,OG),l=0,c=0,u,h,d,f,m,A,_,v,w,x,C,S;if(o.b=n,o.e=r,n+="",r+="",r==="auto"&&(e.style[t]=r,r=hh(e,t)||r,e.style[t]=n),u=[n,r],SG(u),n=u[0],r=u[1],d=n.match(Ag)||[],S=r.match(Ag)||[],S.length){for(;h=Ag.exec(r);)_=h[0],w=r.substring(l,h.index),m?m=(m+1)%5:(w.substr(-5)==="rgba("||w.substr(-5)==="hsla(")&&(m=1),_!==(A=d[c++]||"")&&(f=parseFloat(A)||0,C=A.substr((f+"").length),_.charAt(1)==="="&&(_=Eg(f,_)+C),v=parseFloat(_),x=_.substr((v+"").length),l=Ag.lastIndex-x.length,x||(x=x||Zl.units[t]||C,l===r.length&&(r+=x,o.e+=x)),C!==x&&(f=ep(e,t,A,x)||0),o._pt={_next:o._pt,p:w||c===1?w:",",s:f,c:v-f,m:m&&m<4||t==="zIndex"?Math.round:0});o.c=l<r.length?r.substring(l,r.length):""}else o.r=t==="display"&&r==="none"?UG:zG;return tG.test(r)&&(o.e=0),this._pt=o,o},w9={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Pft=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(e=n,n=r,r=e),t[0]=w9[n]||n,t[1]=w9[r]||r,t.join(" ")},kft=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,r=n.style,s=t.u,a=n._gsap,o,l,c;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)o=s[c],Td[o]&&(l=1,o=o==="transformOrigin"?pu:ms),$1(n,o);l&&($1(n,ms),a&&(a.svg&&n.removeAttribute("transform"),Y1(n,1),a.uncache=1,VG(r)))}},Zx={clearProps:function(e,t,n,r,s){if(s.data!=="isFromStart"){var a=e._pt=new gl(e._pt,t,n,0,0,kft);return a.u=r,a.pr=-10,a.tween=s,e._props.push(n),1}}},X1=[1,0,0,1,0,0],jG={},WG=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},x9=function(e){var t=hh(e,ms);return WG(t)?X1:t.substr(7).match(eG).map(Vs)},zP=function(e,t){var n=e._gsap||C0(e),r=e.style,s=x9(e),a,o,l,c;return n.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?X1:s):(s===X1&&!e.offsetParent&&e!==Sg&&!n.svg&&(l=r.display,r.display="block",a=e.parentNode,(!a||!e.offsetParent)&&(c=1,o=e.nextElementSibling,Sg.appendChild(e)),s=x9(e),l?r.display=l:$1(e,"display"),c&&(o?a.insertBefore(e,o):a?a.appendChild(e):Sg.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},IT=function(e,t,n,r,s,a){var o=e._gsap,l=s||zP(e,!0),c=o.xOrigin||0,u=o.yOrigin||0,h=o.xOffset||0,d=o.yOffset||0,f=l[0],m=l[1],A=l[2],_=l[3],v=l[4],w=l[5],x=t.split(" "),C=parseFloat(x[0])||0,S=parseFloat(x[1])||0,I,P,k,M;n?l!==X1&&(P=f*_-m*A)&&(k=C*(_/P)+S*(-A/P)+(A*w-_*v)/P,M=C*(-m/P)+S*(f/P)-(f*w-m*v)/P,C=k,S=M):(I=QG(e),C=I.x+(~x[0].indexOf("%")?C/100*I.width:C),S=I.y+(~(x[1]||x[0]).indexOf("%")?S/100*I.height:S)),r||r!==!1&&o.smooth?(v=C-c,w=S-u,o.xOffset=h+(v*f+w*A)-v,o.yOffset=d+(v*m+w*_)-w):o.xOffset=o.yOffset=0,o.xOrigin=C,o.yOrigin=S,o.smooth=!!r,o.origin=t,o.originIsAbsolute=!!n,e.style[pu]="0px 0px",a&&(Pf(a,o,"xOrigin",c,C),Pf(a,o,"yOrigin",u,S),Pf(a,o,"xOffset",h,o.xOffset),Pf(a,o,"yOffset",d,o.yOffset)),e.setAttribute("data-svg-origin",C+" "+S)},Y1=function(e,t){var n=e._gsap||new PG(e);if("x"in n&&!t&&!n.uncache)return n;var r=e.style,s=n.scaleX<0,a="px",o="deg",l=getComputedStyle(e),c=hh(e,pu)||"0",u,h,d,f,m,A,_,v,w,x,C,S,I,P,k,M,R,N,U,q,W,F,ue,J,Y,Pe,Ie,pe,Ce,G,oe,je;return u=h=d=A=_=v=w=x=C=0,f=m=1,n.svg=!!(e.getCTM&&qG(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[ms]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[ms]!=="none"?l[ms]:"")),r.scale=r.rotate=r.translate="none"),P=zP(e,n.svg),n.svg&&(n.uncache?(Y=e.getBBox(),c=n.xOrigin-Y.x+"px "+(n.yOrigin-Y.y)+"px",J=""):J=!t&&e.getAttribute("data-svg-origin"),IT(e,J||c,!!J||n.originIsAbsolute,n.smooth!==!1,P)),S=n.xOrigin||0,I=n.yOrigin||0,P!==X1&&(N=P[0],U=P[1],q=P[2],W=P[3],u=F=P[4],h=ue=P[5],P.length===6?(f=Math.sqrt(N*N+U*U),m=Math.sqrt(W*W+q*q),A=N||U?Ym(U,N)*n0:0,w=q||W?Ym(q,W)*n0+A:0,w&&(m*=Math.abs(Math.cos(w*Mg))),n.svg&&(u-=S-(S*N+I*q),h-=I-(S*U+I*W))):(je=P[6],G=P[7],Ie=P[8],pe=P[9],Ce=P[10],oe=P[11],u=P[12],h=P[13],d=P[14],k=Ym(je,Ce),_=k*n0,k&&(M=Math.cos(-k),R=Math.sin(-k),J=F*M+Ie*R,Y=ue*M+pe*R,Pe=je*M+Ce*R,Ie=F*-R+Ie*M,pe=ue*-R+pe*M,Ce=je*-R+Ce*M,oe=G*-R+oe*M,F=J,ue=Y,je=Pe),k=Ym(-q,Ce),v=k*n0,k&&(M=Math.cos(-k),R=Math.sin(-k),J=N*M-Ie*R,Y=U*M-pe*R,Pe=q*M-Ce*R,oe=W*R+oe*M,N=J,U=Y,q=Pe),k=Ym(U,N),A=k*n0,k&&(M=Math.cos(k),R=Math.sin(k),J=N*M+U*R,Y=F*M+ue*R,U=U*M-N*R,ue=ue*M-F*R,N=J,F=Y),_&&Math.abs(_)+Math.abs(A)>359.9&&(_=A=0,v=180-v),f=Vs(Math.sqrt(N*N+U*U+q*q)),m=Vs(Math.sqrt(ue*ue+je*je)),k=Ym(F,ue),w=Math.abs(k)>2e-4?k*n0:0,C=oe?1/(oe<0?-oe:oe):0),n.svg&&(J=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!WG(hh(e,ms)),J&&e.setAttribute("transform",J))),Math.abs(w)>90&&Math.abs(w)<270&&(s?(f*=-1,w+=A<=0?180:-180,A+=A<=0?180:-180):(m*=-1,w+=w<=0?180:-180)),t=t||n.uncache,n.x=u-((n.xPercent=u&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+a,n.y=h-((n.yPercent=h&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+a,n.z=d+a,n.scaleX=Vs(f),n.scaleY=Vs(m),n.rotation=Vs(A)+o,n.rotationX=Vs(_)+o,n.rotationY=Vs(v)+o,n.skewX=w+o,n.skewY=x+o,n.transformPerspective=C+a,(n.zOrigin=parseFloat(c.split(" ")[2])||0)&&(r[pu]=e2(c)),n.xOffset=n.yOffset=0,n.force3D=Zl.force3D,n.renderTransform=n.svg?Rft:GG?$G:Bft,n.uncache=0,n},e2=function(e){return(e=e.split(" "))[0]+" "+e[1]},M3=function(e,t,n){var r=oo(t);return Vs(parseFloat(t)+parseFloat(ep(e,"x",n+"px",r)))+r},Bft=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,$G(e,t)},$p="0deg",LA="0px",Xp=") ",$G=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,a=n.x,o=n.y,l=n.z,c=n.rotation,u=n.rotationY,h=n.rotationX,d=n.skewX,f=n.skewY,m=n.scaleX,A=n.scaleY,_=n.transformPerspective,v=n.force3D,w=n.target,x=n.zOrigin,C="",S=v==="auto"&&e&&e!==1||v===!0;if(x&&(h!==$p||u!==$p)){var I=parseFloat(u)*Mg,P=Math.sin(I),k=Math.cos(I),M;I=parseFloat(h)*Mg,M=Math.cos(I),a=M3(w,a,P*M*-x),o=M3(w,o,-Math.sin(I)*-x),l=M3(w,l,k*M*-x+x)}_!==LA&&(C+="perspective("+_+Xp),(r||s)&&(C+="translate("+r+"%, "+s+"%) "),(S||a!==LA||o!==LA||l!==LA)&&(C+=l!==LA||S?"translate3d("+a+", "+o+", "+l+") ":"translate("+a+", "+o+Xp),c!==$p&&(C+="rotate("+c+Xp),u!==$p&&(C+="rotateY("+u+Xp),h!==$p&&(C+="rotateX("+h+Xp),(d!==$p||f!==$p)&&(C+="skew("+d+", "+f+Xp),(m!==1||A!==1)&&(C+="scale("+m+", "+A+Xp),w.style[ms]=C||"translate(0, 0)"},Rft=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,a=n.x,o=n.y,l=n.rotation,c=n.skewX,u=n.skewY,h=n.scaleX,d=n.scaleY,f=n.target,m=n.xOrigin,A=n.yOrigin,_=n.xOffset,v=n.yOffset,w=n.forceCSS,x=parseFloat(a),C=parseFloat(o),S,I,P,k,M;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=Mg,c*=Mg,S=Math.cos(l)*h,I=Math.sin(l)*h,P=Math.sin(l-c)*-d,k=Math.cos(l-c)*d,c&&(u*=Mg,M=Math.tan(c-u),M=Math.sqrt(1+M*M),P*=M,k*=M,u&&(M=Math.tan(u),M=Math.sqrt(1+M*M),S*=M,I*=M)),S=Vs(S),I=Vs(I),P=Vs(P),k=Vs(k)):(S=h,k=d,I=P=0),(x&&!~(a+"").indexOf("px")||C&&!~(o+"").indexOf("px"))&&(x=ep(f,"x",a,"px"),C=ep(f,"y",o,"px")),(m||A||_||v)&&(x=Vs(x+m-(m*S+A*P)+_),C=Vs(C+A-(m*I+A*k)+v)),(r||s)&&(M=f.getBBox(),x=Vs(x+r/100*M.width),C=Vs(C+s/100*M.height)),M="matrix("+S+","+I+","+P+","+k+","+x+","+C+")",f.setAttribute("transform",M),w&&(f.style[ms]=M)},Dft=function(e,t,n,r,s){var a=360,o=Ha(s),l=parseFloat(s)*(o&&~s.indexOf("rad")?n0:1),c=l-r,u=r+c+"deg",h,d;return o&&(h=s.split("_")[1],h==="short"&&(c%=a,c!==c%(a/2)&&(c+=c<0?a:-a)),h==="cw"&&c<0?c=(c+a*A9)%a-~~(c/a)*a:h==="ccw"&&c>0&&(c=(c-a*A9)%a-~~(c/a)*a)),e._pt=d=new gl(e._pt,t,n,r,c,vft),d.e=u,d.u="deg",e._props.push(n),d},C9=function(e,t){for(var n in t)e[n]=t[n];return e},Lft=function(e,t,n){var r=C9({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=n.style,o,l,c,u,h,d,f,m;r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),a[ms]=t,o=Y1(n,1),$1(n,ms),n.setAttribute("transform",c)):(c=getComputedStyle(n)[ms],a[ms]=t,o=Y1(n,1),a[ms]=c);for(l in Td)c=r[l],u=o[l],c!==u&&s.indexOf(l)<0&&(f=oo(c),m=oo(u),h=f!==m?ep(n,l,c,m):parseFloat(c),d=parseFloat(u),e._pt=new gl(e._pt,o,l,h,d-h,ST),e._pt.u=m||0,e._props.push(l));C9(o,r)};ml("padding,margin,Width,Radius",function(i,e){var t="Top",n="Right",r="Bottom",s="Left",a=(e<3?[t,n,r,s]:[t+s,t+n,r+n,r+s]).map(function(o){return e<2?i+o:"border"+o+i});Zx[e>1?"border"+i:i]=function(o,l,c,u,h){var d,f;if(arguments.length<4)return d=a.map(function(m){return fd(o,m,c)}),f=d.join(" "),f.split(d[0]).length===5?d[0]:f;d=(u+"").split(" "),f={},a.forEach(function(m,A){return f[m]=d[A]=d[A]||d[(A-1)/2|0]}),o.init(l,f,h)}});var XG={name:"css",register:TT,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,s){var a=this._props,o=e.style,l=n.vars.startAt,c,u,h,d,f,m,A,_,v,w,x,C,S,I,P,k;OP||TT(),this.styles=this.styles||HG(e),k=this.styles.props,this.tween=n;for(A in t)if(A!=="autoRound"&&(u=t[A],!(Ql[A]&&kG(A,t,n,r,e,s)))){if(f=typeof u,m=Zx[A],f==="function"&&(u=u.call(n,r,e,s),f=typeof u),f==="string"&&~u.indexOf("random(")&&(u=q1(u)),m)m(this,e,A,u,n)&&(P=1);else if(A.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(A)+"").trim(),u+="",zf.lastIndex=0,zf.test(c)||(_=oo(c),v=oo(u)),v?_!==v&&(c=ep(e,A,c,v)+v):_&&(u+=_),this.add(o,"setProperty",c,u,r,s,0,0,A),a.push(A),k.push(A,0,o[A]);else if(f!=="undefined"){if(l&&A in l?(c=typeof l[A]=="function"?l[A].call(n,r,e,s):l[A],Ha(c)&&~c.indexOf("random(")&&(c=q1(c)),oo(c+"")||(c+=Zl.units[A]||oo(fd(e,A))||""),(c+"").charAt(1)==="="&&(c=fd(e,A))):c=fd(e,A),d=parseFloat(c),w=f==="string"&&u.charAt(1)==="="&&u.substr(0,2),w&&(u=u.substr(2)),h=parseFloat(u),A in ih&&(A==="autoAlpha"&&(d===1&&fd(e,"visibility")==="hidden"&&h&&(d=0),k.push("visibility",0,o.visibility),Pf(this,o,"visibility",d?"inherit":"hidden",h?"inherit":"hidden",!h)),A!=="scale"&&A!=="transform"&&(A=ih[A],~A.indexOf(",")&&(A=A.split(",")[0]))),x=A in Td,x){if(this.styles.save(A),C||(S=e._gsap,S.renderTransform&&!t.parseTransform||Y1(e,t.parseTransform),I=t.smoothOrigin!==!1&&S.smooth,C=this._pt=new gl(this._pt,o,ms,0,1,S.renderTransform,S,0,-1),C.dep=1),A==="scale")this._pt=new gl(this._pt,S,"scaleY",S.scaleY,(w?Eg(S.scaleY,w+h):h)-S.scaleY||0,ST),this._pt.u=0,a.push("scaleY",A),A+="X";else if(A==="transformOrigin"){k.push(pu,0,o[pu]),u=Pft(u),S.svg?IT(e,u,0,I,0,this):(v=parseFloat(u.split(" ")[2])||0,v!==S.zOrigin&&Pf(this,S,"zOrigin",S.zOrigin,v),Pf(this,o,A,e2(c),e2(u)));continue}else if(A==="svgOrigin"){IT(e,u,1,I,0,this);continue}else if(A in jG){Dft(this,S,A,d,w?Eg(d,w+u):u);continue}else if(A==="smoothOrigin"){Pf(this,S,"smooth",S.smooth,u);continue}else if(A==="force3D"){S[A]=u;continue}else if(A==="transform"){Lft(this,u,e);continue}}else A in o||(A=Zg(A)||A);if(x||(h||h===0)&&(d||d===0)&&!gft.test(u)&&A in o)_=(c+"").substr((d+"").length),h||(h=0),v=oo(u)||(A in Zl.units?Zl.units[A]:_),_!==v&&(d=ep(e,A,c,v)),this._pt=new gl(this._pt,x?S:o,A,d,(w?Eg(d,w+h):h)-d,!x&&(v==="px"||A==="zIndex")&&t.autoRound!==!1?_ft:ST),this._pt.u=v||0,_!==v&&v!=="%"&&(this._pt.b=c,this._pt.r=Aft);else if(A in o)Ift.call(this,e,A,c,w?w+u:u);else if(A in e)this.add(e,A,c||e[A],w?w+u:u,r,s);else if(A!=="parseTransform"){MP(A,u);continue}x||(A in o?k.push(A,0,o[A]):k.push(A,1,c||e[A])),a.push(A)}}P&&NG(this)},render:function(e,t){if(t.tween._time||!NP())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:fd,aliases:ih,getSetter:function(e,t,n){var r=ih[t];return r&&r.indexOf(",")<0&&(t=r),t in Td&&t!==pu&&(e._gsap.x||fd(e,"x"))?n&&v9===n?t==="scale"?xft:wft:(v9=n||{})&&(t==="scale"?Cft:Eft):e.style&&!CP(e.style[t])?bft:~t.indexOf("-")?yft:DP(e,t)},core:{_removeProperty:$1,_getMatrix:zP}};bl.utils.checkPrefix=Zg;bl.core.getStyleSaver=HG;(function(i,e,t,n){var r=ml(i+","+e+","+t,function(s){Td[s]=1});ml(e,function(s){Zl.units[s]="deg",jG[s]=1}),ih[r[13]]=i+","+e,ml(n,function(s){var a=s.split(":");ih[a[1]]=r[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ml("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){Zl.units[i]="px"});bl.registerPlugin(XG);var Cn=bl.registerPlugin(XG)||bl;Cn.core.Tween;typeof window<"u"&&(Cn.registerPlugin(bdt.ScrollTrigger),Cn.registerPlugin(ydt.ScrollToPlugin));var YG={},KG={},UP={exports:{}},Qr=String,JG=function(){return{isColorSupported:!1,reset:Qr,bold:Qr,dim:Qr,italic:Qr,underline:Qr,inverse:Qr,hidden:Qr,strikethrough:Qr,black:Qr,red:Qr,green:Qr,yellow:Qr,blue:Qr,magenta:Qr,cyan:Qr,white:Qr,gray:Qr,bgBlack:Qr,bgRed:Qr,bgGreen:Qr,bgYellow:Qr,bgBlue:Qr,bgMagenta:Qr,bgCyan:Qr,bgWhite:Qr}};UP.exports=JG();UP.exports.createColors=JG;var Oft=UP.exports;(function(i){Object.defineProperty(i,"__esModule",{value:!0});function e(l,c){for(var u in c)Object.defineProperty(l,u,{enumerable:!0,get:c[u]})}e(i,{dim:function(){return a},default:function(){return o}});const t=n(Oft);function n(l){return l&&l.__esModule?l:{default:l}}let r=new Set;function s(l,c,u){typeof process<"u"&&{}.JEST_WORKER_ID||u&&r.has(u)||(u&&r.add(u),console.warn(""),c.forEach(h=>console.warn(l,"-",h)))}function a(l){return t.default.dim(l)}const o={info(l,c){s(t.default.bold(t.default.cyan("info")),...Array.isArray(l)?[l]:[c,l])},warn(l,c){s(t.default.bold(t.default.yellow("warn")),...Array.isArray(l)?[l]:[c,l])},risk(l,c){s(t.default.bold(t.default.magenta("risk")),...Array.isArray(l)?[l]:[c,l])}}})(KG);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"default",{enumerable:!0,get:function(){return r}});const e=t(KG);function t(s){return s&&s.__esModule?s:{default:s}}function n({version:s,from:a,to:o}){e.default.warn(`${a}-color-renamed`,[`As of Tailwind CSS ${s}, \`${a}\` has been renamed to \`${o}\`.`,"Update your configuration file to silence this warning."])}const r={inherit:"inherit",current:"currentColor",transparent:"transparent",black:"#000",white:"#fff",slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},get lightBlue(){return n({version:"v2.2",from:"lightBlue",to:"sky"}),this.sky},get warmGray(){return n({version:"v3.0",from:"warmGray",to:"stone"}),this.stone},get trueGray(){return n({version:"v3.0",from:"trueGray",to:"neutral"}),this.neutral},get coolGray(){return n({version:"v3.0",from:"coolGray",to:"gray"}),this.gray},get blueGray(){return n({version:"v3.0",from:"blueGray",to:"slate"}),this.slate}}})(YG);let T3=YG;var Nft=(T3.__esModule?T3:{default:T3}).default;const ev=U0(Nft);/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const $n={LEFT:1,RIGHT:2,MIDDLE:4},At=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),Km={NONE:0,IN:1,OUT:-1};function Yp(i){return i.isPerspectiveCamera}function vf(i){return i.isOrthographicCamera}const Jm=Math.PI*2,E9=Math.PI/2,ZG=1e-5,OA=Math.PI/180;function Gu(i,e,t){return Math.max(e,Math.min(t,i))}function Lr(i,e=ZG){return Math.abs(i)<e}function pr(i,e,t=ZG){return Lr(i-e,t)}function S9(i,e){return Math.round(i/e)*e}function NA(i){return isFinite(i)?i:i<0?-Number.MAX_VALUE:Number.MAX_VALUE}function FA(i){return Math.abs(i)<Number.MAX_VALUE?i:i*(1/0)}function Pw(i,e,t,n,r=1/0,s){n=Math.max(1e-4,n);const a=2/n,o=a*s,l=1/(1+o+.48*o*o+.235*o*o*o);let c=i-e;const u=e,h=r*n;c=Gu(c,-h,h),e=i-c;const d=(t.value+a*c)*s;t.value=(t.value-a*d)*l;let f=e+(c+d)*l;return u-i>0==f>u&&(f=u,t.value=(f-u)/s),f}function M9(i,e,t,n,r=1/0,s,a){n=Math.max(1e-4,n);const o=2/n,l=o*s,c=1/(1+l+.48*l*l+.235*l*l*l);let u=e.x,h=e.y,d=e.z,f=i.x-u,m=i.y-h,A=i.z-d;const _=u,v=h,w=d,x=r*n,C=x*x,S=f*f+m*m+A*A;if(S>C){const F=Math.sqrt(S);f=f/F*x,m=m/F*x,A=A/F*x}u=i.x-f,h=i.y-m,d=i.z-A;const I=(t.x+o*f)*s,P=(t.y+o*m)*s,k=(t.z+o*A)*s;t.x=(t.x-o*I)*c,t.y=(t.y-o*P)*c,t.z=(t.z-o*k)*c,a.x=u+(f+I)*c,a.y=h+(m+P)*c,a.z=d+(A+k)*c;const M=_-i.x,R=v-i.y,N=w-i.z,U=a.x-_,q=a.y-v,W=a.z-w;return M*U+R*q+N*W>0&&(a.x=_,a.y=v,a.z=w,t.x=(a.x-_)/s,t.y=(a.y-v)/s,t.z=(a.z-w)/s),a}function I3(i,e){e.set(0,0),i.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=i.length,e.y/=i.length}function P3(i,e){return vf(i)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class Fft{constructor(){this._listeners={}}addEventListener(e,t){const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e)}}}const zft="2.7.0",kw=1/8,eQ=typeof window<"u",Uft=eQ&&/Mac/.test(navigator.platform),Vft=!(eQ&&"PointerEvent"in window);let zn,T9,Bw,k3,tl,li,ir,Zm,zA,Vu,Hu,Kp,I9,P9,Ac,UA,eg,k9,B3,B9,R3,D3,Rw;class ul extends Fft{static install(e){zn=e.THREE,T9=Object.freeze(new zn.Vector3(0,0,0)),Bw=Object.freeze(new zn.Vector3(0,1,0)),k3=Object.freeze(new zn.Vector3(0,0,1)),tl=new zn.Vector2,li=new zn.Vector3,ir=new zn.Vector3,Zm=new zn.Vector3,zA=new zn.Vector3,Vu=new zn.Vector3,Hu=new zn.Vector3,Kp=new zn.Vector3,I9=new zn.Vector3,P9=new zn.Vector3,Ac=new zn.Spherical,UA=new zn.Spherical,eg=new zn.Box3,k9=new zn.Box3,B3=new zn.Sphere,B9=new zn.Quaternion,R3=new zn.Quaternion,D3=new zn.Matrix4,Rw=new zn.Raycaster}static get ACTION(){return At}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=At.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Km.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new zn.Vector3,this._focalOffsetVelocity=new zn.Vector3,this._zoomVelocity={value:0},this._truckInternal=(C,S,I)=>{let P,k;if(Yp(this._camera)){const M=li.copy(this._camera.position).sub(this._target),R=this._camera.getEffectiveFOV()*OA,N=M.length()*Math.tan(R*.5);P=this.truckSpeed*C*N/this._elementRect.height,k=this.truckSpeed*S*N/this._elementRect.height}else if(vf(this._camera)){const M=this._camera;P=C*(M.right-M.left)/M.zoom/this._elementRect.width,k=S*(M.top-M.bottom)/M.zoom/this._elementRect.height}else return;this.verticalDragToForward?(I?this.setFocalOffset(this._focalOffsetEnd.x+P,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(P,0,!0),this.forward(-k,!0)):I?this.setFocalOffset(this._focalOffsetEnd.x+P,this._focalOffsetEnd.y+k,this._focalOffsetEnd.z,!0):this.truck(P,k,!0)},this._rotateInternal=(C,S)=>{const I=Jm*this.azimuthRotateSpeed*C/this._elementRect.height,P=Jm*this.polarRotateSpeed*S/this._elementRect.height;this.rotate(I,P,!0)},this._dollyInternal=(C,S,I)=>{const P=Math.pow(.95,-C*this.dollySpeed),k=this._sphericalEnd.radius,M=this._sphericalEnd.radius*P,R=zn.MathUtils.clamp(M,this.minDistance,this.maxDistance),N=R-M;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(M,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(N,!0),this._dollyToNoClamp(R,!0)):this._dollyToNoClamp(R,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?M:R)-k,this._dollyControlCoord.set(S,I)),this._lastDollyDirection=Math.sign(-C)},this._zoomInternal=(C,S,I)=>{const P=Math.pow(.95,C*this.dollySpeed),k=this._zoom,M=this._zoom*P;this.zoomTo(M,!0),this.dollyToCursor&&(this._changedZoom+=M-k,this._dollyControlCoord.set(S,I))},typeof zn>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new zn.Quaternion().setFromUnitVectors(this._camera.up,Bw),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=At.NONE,this._target=new zn.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new zn.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new zn.Spherical().setFromVector3(li.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new zn.Vector3,new zn.Vector3,new zn.Vector3,new zn.Vector3],this._updateNearPlaneCorners(),this._boundary=new zn.Box3(new zn.Vector3(-1/0,-1/0,-1/0),new zn.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new zn.Vector2,this.mouseButtons={left:At.ROTATE,middle:At.DOLLY,right:At.TRUCK,wheel:Yp(this._camera)?At.DOLLY:vf(this._camera)?At.ZOOM:At.NONE},this.touches={one:At.TOUCH_ROTATE,two:Yp(this._camera)?At.TOUCH_DOLLY_TRUCK:vf(this._camera)?At.TOUCH_ZOOM_TRUCK:At.NONE,three:At.TOUCH_TRUCK};const n=new zn.Vector2,r=new zn.Vector2,s=new zn.Vector2,a=C=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const P=this._domElement.getBoundingClientRect(),k=C.clientX/P.width,M=C.clientY/P.height;if(k<this._interactiveArea.left||k>this._interactiveArea.right||M<this._interactiveArea.top||M>this._interactiveArea.bottom)return}const S=C.pointerType!=="mouse"?null:(C.buttons&$n.LEFT)===$n.LEFT?$n.LEFT:(C.buttons&$n.MIDDLE)===$n.MIDDLE?$n.MIDDLE:(C.buttons&$n.RIGHT)===$n.RIGHT?$n.RIGHT:null;if(S!==null){const P=this._findPointerByMouseButton(S);P&&this._disposePointer(P)}if((C.buttons&$n.LEFT)===$n.LEFT&&this._lockedPointer)return;const I={pointerId:C.pointerId,clientX:C.clientX,clientY:C.clientY,deltaX:0,deltaY:0,mouseButton:S};this._activePointers.push(I),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),this._isDragging=!0,A(C)},o=C=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const P=this._domElement.getBoundingClientRect(),k=C.clientX/P.width,M=C.clientY/P.height;if(k<this._interactiveArea.left||k>this._interactiveArea.right||M<this._interactiveArea.top||M>this._interactiveArea.bottom)return}const S=(C.buttons&$n.LEFT)===$n.LEFT?$n.LEFT:(C.buttons&$n.MIDDLE)===$n.MIDDLE?$n.MIDDLE:(C.buttons&$n.RIGHT)===$n.RIGHT?$n.RIGHT:null;if(S!==null){const P=this._findPointerByMouseButton(S);P&&this._disposePointer(P)}const I={pointerId:1,clientX:C.clientX,clientY:C.clientY,deltaX:0,deltaY:0,mouseButton:(C.buttons&$n.LEFT)===$n.LEFT?$n.LEFT:(C.buttons&$n.MIDDLE)===$n.LEFT?$n.MIDDLE:(C.buttons&$n.RIGHT)===$n.LEFT?$n.RIGHT:null};this._activePointers.push(I),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("mouseup",h),this._domElement.ownerDocument.addEventListener("mousemove",c),this._domElement.ownerDocument.addEventListener("mouseup",h),this._isDragging=!0,A(C)},l=C=>{C.cancelable&&C.preventDefault();const S=C.pointerId,I=this._lockedPointer||this._findPointerById(S);if(I){if(I.clientX=C.clientX,I.clientY=C.clientY,I.deltaX=C.movementX,I.deltaY=C.movementY,this._state=0,C.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(C.buttons&$n.LEFT)===$n.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(C.buttons&$n.MIDDLE)===$n.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(C.buttons&$n.RIGHT)===$n.RIGHT&&(this._state=this._state|this.mouseButtons.right);_()}},c=C=>{const S=this._lockedPointer||this._findPointerById(1);S&&(S.clientX=C.clientX,S.clientY=C.clientY,S.deltaX=C.movementX,S.deltaY=C.movementY,this._state=0,(this._lockedPointer||(C.buttons&$n.LEFT)===$n.LEFT)&&(this._state=this._state|this.mouseButtons.left),(C.buttons&$n.MIDDLE)===$n.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(C.buttons&$n.RIGHT)===$n.RIGHT&&(this._state=this._state|this.mouseButtons.right),_())},u=C=>{const S=this._findPointerById(C.pointerId);if(!(S&&S===this._lockedPointer)){if(S&&this._disposePointer(S),C.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=At.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=At.NONE;v()}},h=()=>{const C=this._findPointerById(1);C&&C===this._lockedPointer||(C&&this._disposePointer(C),this._state=At.NONE,v())};let d=-1;const f=C=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===At.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const M=this._domElement.getBoundingClientRect(),R=C.clientX/M.width,N=C.clientY/M.height;if(R<this._interactiveArea.left||R>this._interactiveArea.right||N<this._interactiveArea.top||N>this._interactiveArea.bottom)return}if(C.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===At.ROTATE||this.mouseButtons.wheel===At.TRUCK){const M=performance.now();d-M<1e3&&this._getClientRect(this._elementRect),d=M}const S=Uft?-1:-3,I=C.deltaMode===1?C.deltaY/S:C.deltaY/(S*10),P=this.dollyToCursor?(C.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,k=this.dollyToCursor?(C.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case At.ROTATE:{this._rotateInternal(C.deltaX,C.deltaY),this._isUserControllingRotate=!0;break}case At.TRUCK:{this._truckInternal(C.deltaX,C.deltaY,!1),this._isUserControllingTruck=!0;break}case At.OFFSET:{this._truckInternal(C.deltaX,C.deltaY,!0),this._isUserControllingOffset=!0;break}case At.DOLLY:{this._dollyInternal(-I,P,k),this._isUserControllingDolly=!0;break}case At.ZOOM:{this._zoomInternal(-I,P,k),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},m=C=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===ul.ACTION.NONE){const S=C instanceof PointerEvent?C.pointerId:(C instanceof MouseEvent,0),I=this._findPointerById(S);I&&this._disposePointer(I),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("mouseup",h);return}C.preventDefault()}},A=C=>{if(!this._enabled)return;if(I3(this._activePointers,tl),this._getClientRect(this._elementRect),n.copy(tl),r.copy(tl),this._activePointers.length>=2){const I=tl.x-this._activePointers[1].clientX,P=tl.y-this._activePointers[1].clientY,k=Math.sqrt(I*I+P*P);s.set(0,k);const M=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,R=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(M,R)}if(this._state=0,!C)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in C&&C.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(C.buttons&$n.LEFT)===$n.LEFT&&(this._state=this._state|this.mouseButtons.left),(C.buttons&$n.MIDDLE)===$n.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(C.buttons&$n.RIGHT)===$n.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&At.ROTATE)===At.ROTATE||(this._state&At.TOUCH_ROTATE)===At.TOUCH_ROTATE||(this._state&At.TOUCH_DOLLY_ROTATE)===At.TOUCH_DOLLY_ROTATE||(this._state&At.TOUCH_ZOOM_ROTATE)===At.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&At.TRUCK)===At.TRUCK||(this._state&At.TOUCH_TRUCK)===At.TOUCH_TRUCK||(this._state&At.TOUCH_DOLLY_TRUCK)===At.TOUCH_DOLLY_TRUCK||(this._state&At.TOUCH_ZOOM_TRUCK)===At.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&At.DOLLY)===At.DOLLY||(this._state&At.TOUCH_DOLLY)===At.TOUCH_DOLLY||(this._state&At.TOUCH_DOLLY_TRUCK)===At.TOUCH_DOLLY_TRUCK||(this._state&At.TOUCH_DOLLY_OFFSET)===At.TOUCH_DOLLY_OFFSET||(this._state&At.TOUCH_DOLLY_ROTATE)===At.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&At.ZOOM)===At.ZOOM||(this._state&At.TOUCH_ZOOM)===At.TOUCH_ZOOM||(this._state&At.TOUCH_ZOOM_TRUCK)===At.TOUCH_ZOOM_TRUCK||(this._state&At.TOUCH_ZOOM_OFFSET)===At.TOUCH_ZOOM_OFFSET||(this._state&At.TOUCH_ZOOM_ROTATE)===At.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&At.OFFSET)===At.OFFSET||(this._state&At.TOUCH_OFFSET)===At.TOUCH_OFFSET||(this._state&At.TOUCH_DOLLY_OFFSET)===At.TOUCH_DOLLY_OFFSET||(this._state&At.TOUCH_ZOOM_OFFSET)===At.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},_=()=>{if(!this._enabled)return;I3(this._activePointers,tl);const S=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,I=S?-S.deltaX:r.x-tl.x,P=S?-S.deltaY:r.y-tl.y;if(r.copy(tl),((this._state&At.ROTATE)===At.ROTATE||(this._state&At.TOUCH_ROTATE)===At.TOUCH_ROTATE||(this._state&At.TOUCH_DOLLY_ROTATE)===At.TOUCH_DOLLY_ROTATE||(this._state&At.TOUCH_ZOOM_ROTATE)===At.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(I,P),this._isUserControllingRotate=!0),(this._state&At.DOLLY)===At.DOLLY||(this._state&At.ZOOM)===At.ZOOM){const k=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,M=this.dollyToCursor?(n.y-this._elementRect.y)/this._elementRect.height*-2+1:0,R=this.dollyDragInverted?-1:1;(this._state&At.DOLLY)===At.DOLLY?(this._dollyInternal(R*P*kw,k,M),this._isUserControllingDolly=!0):(this._zoomInternal(R*P*kw,k,M),this._isUserControllingZoom=!0)}if((this._state&At.TOUCH_DOLLY)===At.TOUCH_DOLLY||(this._state&At.TOUCH_ZOOM)===At.TOUCH_ZOOM||(this._state&At.TOUCH_DOLLY_TRUCK)===At.TOUCH_DOLLY_TRUCK||(this._state&At.TOUCH_ZOOM_TRUCK)===At.TOUCH_ZOOM_TRUCK||(this._state&At.TOUCH_DOLLY_OFFSET)===At.TOUCH_DOLLY_OFFSET||(this._state&At.TOUCH_ZOOM_OFFSET)===At.TOUCH_ZOOM_OFFSET||(this._state&At.TOUCH_DOLLY_ROTATE)===At.TOUCH_DOLLY_ROTATE||(this._state&At.TOUCH_ZOOM_ROTATE)===At.TOUCH_ZOOM_ROTATE){const k=tl.x-this._activePointers[1].clientX,M=tl.y-this._activePointers[1].clientY,R=Math.sqrt(k*k+M*M),N=s.y-R;s.set(0,R);const U=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,q=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&At.TOUCH_DOLLY)===At.TOUCH_DOLLY||(this._state&At.TOUCH_DOLLY_ROTATE)===At.TOUCH_DOLLY_ROTATE||(this._state&At.TOUCH_DOLLY_TRUCK)===At.TOUCH_DOLLY_TRUCK||(this._state&At.TOUCH_DOLLY_OFFSET)===At.TOUCH_DOLLY_OFFSET?(this._dollyInternal(N*kw,U,q),this._isUserControllingDolly=!0):(this._zoomInternal(N*kw,U,q),this._isUserControllingZoom=!0)}((this._state&At.TRUCK)===At.TRUCK||(this._state&At.TOUCH_TRUCK)===At.TOUCH_TRUCK||(this._state&At.TOUCH_DOLLY_TRUCK)===At.TOUCH_DOLLY_TRUCK||(this._state&At.TOUCH_ZOOM_TRUCK)===At.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(I,P,!1),this._isUserControllingTruck=!0),((this._state&At.OFFSET)===At.OFFSET||(this._state&At.TOUCH_OFFSET)===At.TOUCH_OFFSET||(this._state&At.TOUCH_DOLLY_OFFSET)===At.TOUCH_DOLLY_OFFSET||(this._state&At.TOUCH_ZOOM_OFFSET)===At.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(I,P,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},v=()=>{I3(this._activePointers,tl),r.copy(tl),(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",h),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",w),this._domElement.ownerDocument.addEventListener("pointerlockerror",x),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),A())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",w),this._domElement.ownerDocument.removeEventListener("pointerlockerror",x))};const w=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},x=()=>{this.unlockPointer()};this._addAllEventListeners=C=>{this._domElement=C,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",a),Vft&&this._domElement.addEventListener("mousedown",o),this._domElement.addEventListener("pointercancel",u),this._domElement.addEventListener("wheel",f,{passive:!1}),this._domElement.addEventListener("contextmenu",m)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",a),this._domElement.removeEventListener("mousedown",o),this._domElement.removeEventListener("pointercancel",u),this._domElement.removeEventListener("wheel",f,{passive:!1}),this._domElement.removeEventListener("contextmenu",m),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",h),this._domElement.ownerDocument.removeEventListener("pointerlockchange",w),this._domElement.ownerDocument.removeEventListener("pointerlockerror",x))},this.cancel=()=>{this._state!==At.NONE&&(this._state=At.NONE,this._activePointers.length=0,v())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=Gu(e.width,0,1),this._interactiveArea.height=Gu(e.height,0,1),this._interactiveArea.x=Gu(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Gu(e.x,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,n=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,n)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,n=!1){this._isUserControllingRotate=!1;const r=Gu(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=Gu(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const a=!n||pr(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&pr(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(a)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Km.NONE,this._changedDolly=0,this._dollyToNoClamp(Gu(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const n=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const a=this._collisionTest(),o=pr(a,this._spherical.radius);if(!(n>e)&&o)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,a)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const s=!t||pr(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(zA).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const n=!t||pr(this._target.x,this._targetEnd.x,this.restThreshold)&&pr(this._target.y,this._targetEnd.y,this.restThreshold)&&pr(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(n)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=Gu(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const n=!t||pr(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(n)}pan(e,t,n=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,n)}truck(e,t,n=!1){this._camera.updateMatrix(),Vu.setFromMatrixColumn(this._camera.matrix,0),Hu.setFromMatrixColumn(this._camera.matrix,1),Vu.multiplyScalar(e),Hu.multiplyScalar(-t);const r=li.copy(Vu).add(Hu),s=ir.copy(this._targetEnd).add(r);return this.moveTo(s.x,s.y,s.z,n)}forward(e,t=!1){li.setFromMatrixColumn(this._camera.matrix,0),li.crossVectors(this._camera.up,li),li.multiplyScalar(e);const n=ir.copy(this._targetEnd).add(li);return this.moveTo(n.x,n.y,n.z,t)}elevate(e,t=!1){return li.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+li.x,this._targetEnd.y+li.y,this._targetEnd.z+li.z,t)}moveTo(e,t,n,r=!1){this._isUserControllingTruck=!1;const s=li.set(e,t,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const a=!r||pr(this._target.x,this._targetEnd.x,this.restThreshold)&&pr(this._target.y,this._targetEnd.y,this.restThreshold)&&pr(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(a)}lookInDirectionOf(e,t,n,r=!1){const o=li.set(e,t,n).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(o.x,o.y,o.z,r)}fitToBox(e,t,{cover:n=!1,paddingLeft:r=0,paddingRight:s=0,paddingBottom:a=0,paddingTop:o=0}={}){const l=[],c=e.isBox3?eg.copy(e):eg.setFromObject(e);c.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const u=S9(this._sphericalEnd.theta,E9),h=S9(this._sphericalEnd.phi,E9);l.push(this.rotateTo(u,h,t));const d=li.setFromSpherical(this._sphericalEnd).normalize(),f=B9.setFromUnitVectors(d,k3),m=pr(Math.abs(d.y),1);m&&f.multiply(R3.setFromAxisAngle(Bw,u)),f.multiply(this._yAxisUpSpaceInverse);const A=k9.makeEmpty();ir.copy(c.min).applyQuaternion(f),A.expandByPoint(ir),ir.copy(c.min).setX(c.max.x).applyQuaternion(f),A.expandByPoint(ir),ir.copy(c.min).setY(c.max.y).applyQuaternion(f),A.expandByPoint(ir),ir.copy(c.max).setZ(c.min.z).applyQuaternion(f),A.expandByPoint(ir),ir.copy(c.min).setZ(c.max.z).applyQuaternion(f),A.expandByPoint(ir),ir.copy(c.max).setY(c.min.y).applyQuaternion(f),A.expandByPoint(ir),ir.copy(c.max).setX(c.min.x).applyQuaternion(f),A.expandByPoint(ir),ir.copy(c.max).applyQuaternion(f),A.expandByPoint(ir),A.min.x-=r,A.min.y-=a,A.max.x+=s,A.max.y+=o,f.setFromUnitVectors(k3,d),m&&f.premultiply(R3.invert()),f.premultiply(this._yAxisUpSpace);const _=A.getSize(li),v=A.getCenter(ir).applyQuaternion(f);if(Yp(this._camera)){const w=this.getDistanceToFitBox(_.x,_.y,_.z,n);l.push(this.moveTo(v.x,v.y,v.z,t)),l.push(this.dollyTo(w,t)),l.push(this.setFocalOffset(0,0,0,t))}else if(vf(this._camera)){const w=this._camera,x=w.right-w.left,C=w.top-w.bottom,S=n?Math.max(x/_.x,C/_.y):Math.min(x/_.x,C/_.y);l.push(this.moveTo(v.x,v.y,v.z,t)),l.push(this.zoomTo(S,t)),l.push(this.setFocalOffset(0,0,0,t))}return Promise.all(l)}fitToSphere(e,t){const n=[],s=e instanceof zn.Sphere?B3.copy(e):ul.createBoundingSphere(e,B3);if(n.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),Yp(this._camera)){const a=this.getDistanceToFitSphere(s.radius);n.push(this.dollyTo(a,t))}else if(vf(this._camera)){const a=this._camera.right-this._camera.left,o=this._camera.top-this._camera.bottom,l=2*s.radius,c=Math.min(a/l,o/l);n.push(this.zoomTo(c,t))}return n.push(this.setFocalOffset(0,0,0,t)),Promise.all(n)}setLookAt(e,t,n,r,s,a,o=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Km.NONE,this._changedDolly=0;const l=ir.set(r,s,a),c=li.set(e,t,n);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(c.sub(l).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,o||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const u=!o||pr(this._target.x,this._targetEnd.x,this.restThreshold)&&pr(this._target.y,this._targetEnd.y,this.restThreshold)&&pr(this._target.z,this._targetEnd.z,this.restThreshold)&&pr(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&pr(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&pr(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(u)}lerpLookAt(e,t,n,r,s,a,o,l,c,u,h,d,f,m=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Km.NONE,this._changedDolly=0;const A=li.set(r,s,a),_=ir.set(e,t,n);Ac.setFromVector3(_.sub(A).applyQuaternion(this._yAxisUpSpace));const v=Zm.set(u,h,d),w=ir.set(o,l,c);UA.setFromVector3(w.sub(v).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(A.lerp(v,f));const x=UA.theta-Ac.theta,C=UA.phi-Ac.phi,S=UA.radius-Ac.radius;this._sphericalEnd.set(Ac.radius+S*f,Ac.phi+C*f,Ac.theta+x*f),this.normalizeRotations(),this._needsUpdate=!0,m||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const I=!m||pr(this._target.x,this._targetEnd.x,this.restThreshold)&&pr(this._target.y,this._targetEnd.y,this.restThreshold)&&pr(this._target.z,this._targetEnd.z,this.restThreshold)&&pr(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&pr(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&pr(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(I)}setPosition(e,t,n,r=!1){return this.setLookAt(e,t,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,n,r=!1){const s=this.getPosition(li),a=this.setLookAt(s.x,s.y,s.z,e,t,n,r);return this._sphericalEnd.phi=Gu(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),a}setFocalOffset(e,t,n,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,n),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const s=!r||pr(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&pr(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&pr(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,n){this._camera.updateMatrixWorld(),Vu.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Hu.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Kp.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=li.set(e,t,n),s=r.distanceTo(this._camera.position),a=r.sub(this._camera.position);Vu.multiplyScalar(a.x),Hu.multiplyScalar(a.y),Kp.multiplyScalar(a.z),li.copy(Vu).add(Hu).add(Kp),li.z=li.z+s,this.dollyTo(s,!1),this.setFocalOffset(-li.x,li.y,-li.z,!1),this.moveTo(e,t,n,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,n,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new zn.Vector4,typeof e=="number"?this._viewport.set(e,t,n,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,n,r=!1){if(P3(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=e/t,a=this._camera.getEffectiveFOV()*OA,o=this._camera.aspect;return((r?s>o:s<o)?t:e/o)*.5/Math.tan(a*.5)+n*.5}getDistanceToFitSphere(e){if(P3(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*OA,n=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?t:n;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new zn.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new zn.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e&&e instanceof zn.Spherical?e:new zn.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new zn.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Jm,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Jm),this._spherical.theta+=Jm*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Jm)}reset(e=!1){if(!pr(this._camera.up.x,this._cameraUp0.x)||!pr(this._camera.up.y,this._cameraUp0.y)||!pr(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const n=this.getPosition(li);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Bw),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=li.subVectors(this._target,this._camera.position).normalize(),t=ir.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e),this._camera.updateMatrixWorld();const n=this.getPosition(li);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,n=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,s=I9.subVectors(this._targetEnd,this._target),a=P9.subVectors(this._focalOffsetEnd,this._focalOffset),o=this._zoomEnd-this._zoom;if(Lr(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=Pw(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,h,1/0,e),this._needsUpdate=!0}if(Lr(n))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=Pw(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,h,1/0,e),this._needsUpdate=!0}if(Lr(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const h=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=Pw(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,h,this.maxSpeed,e),this._needsUpdate=!0}if(Lr(s.x)&&Lr(s.y)&&Lr(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const h=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;M9(this._target,this._targetEnd,this._targetVelocity,h,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Lr(a.x)&&Lr(a.y)&&Lr(a.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const h=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;M9(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,h,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Lr(o))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const h=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=Pw(this._zoom,this._zoomEnd,this._zoomVelocity,h,1/0,e)}if(this.dollyToCursor){if(Yp(this._camera)&&this._changedDolly!==0){const h=this._spherical.radius-this._lastDistance,d=this._camera,f=this._getCameraDirection(zA),m=li.copy(f).cross(d.up).normalize();m.lengthSq()===0&&(m.x=1);const A=ir.crossVectors(m,f),_=this._sphericalEnd.radius*Math.tan(d.getEffectiveFOV()*OA*.5),w=(this._sphericalEnd.radius-h-this._sphericalEnd.radius)/this._sphericalEnd.radius,x=Zm.copy(this._targetEnd).add(m.multiplyScalar(this._dollyControlCoord.x*_*d.aspect)).add(A.multiplyScalar(this._dollyControlCoord.y*_)),C=li.copy(this._targetEnd).lerp(x,w),S=this._lastDollyDirection===Km.IN&&this._spherical.radius<=this.minDistance,I=this._lastDollyDirection===Km.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(S||I)){this._sphericalEnd.radius-=h,this._spherical.radius-=h;const k=ir.copy(f).multiplyScalar(-h);C.add(k)}this._boundary.clampPoint(C,C);const P=ir.subVectors(C,this._targetEnd);this._targetEnd.copy(C),this._target.add(P),this._changedDolly-=h,Lr(this._changedDolly)&&(this._changedDolly=0)}else if(vf(this._camera)&&this._changedZoom!==0){const h=this._zoom-this._lastZoom,d=this._camera,f=li.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(d.near+d.far)/(d.near-d.far)).unproject(d),m=ir.set(0,0,-1).applyQuaternion(d.quaternion),A=Zm.copy(f).add(m.multiplyScalar(-f.dot(d.up))),v=-(this._zoom-h-this._zoom)/this._zoom,w=this._getCameraDirection(zA),x=this._targetEnd.dot(w),C=li.copy(this._targetEnd).lerp(A,v),S=C.dot(w),I=w.multiplyScalar(S-x);C.sub(I),this._boundary.clampPoint(C,C);const P=ir.subVectors(C,this._targetEnd);this._targetEnd.copy(C),this._target.add(P),this._changedZoom-=h,Lr(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Lr(this._focalOffset.x)||!Lr(this._focalOffset.y)||!Lr(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),Vu.setFromMatrixColumn(this._camera.matrix,0),Hu.setFromMatrixColumn(this._camera.matrix,1),Kp.setFromMatrixColumn(this._camera.matrix,2),Vu.multiplyScalar(this._focalOffset.x),Hu.multiplyScalar(-this._focalOffset.y),Kp.multiplyScalar(this._focalOffset.z),li.copy(Vu).add(Hu).add(Kp),this._camera.position.add(li)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),li.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const u=this._needsUpdate;return u&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):u?(this.dispatchEvent({type:"update"}),Lr(t,this.restThreshold)&&Lr(n,this.restThreshold)&&Lr(r,this.restThreshold)&&Lr(s.x,this.restThreshold)&&Lr(s.y,this.restThreshold)&&Lr(s.z,this.restThreshold)&&Lr(a.x,this.restThreshold)&&Lr(a.y,this.restThreshold)&&Lr(a.z,this.restThreshold)&&Lr(o,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!u&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=u,this._needsUpdate=!1,u}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:NA(this.maxDistance),minZoom:this.minZoom,maxZoom:NA(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:NA(this.maxPolarAngle),minAzimuthAngle:NA(this.minAzimuthAngle),maxAzimuthAngle:NA(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:li.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const n=JSON.parse(e);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=FA(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=FA(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=FA(n.maxPolarAngle),this.minAzimuthAngle=FA(n.minAzimuthAngle),this.maxAzimuthAngle=FA(n.maxAzimuthAngle),this.smoothTime=n.smoothTime,this.draggingSmoothTime=n.draggingSmoothTime,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],t),Ac.setFromVector3(li.fromArray(n.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Ac.theta,Ac.phi,t),this.dollyTo(Ac.radius,t),this.zoomTo(n.zoom,t),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",zft),this._addAllEventListeners(e)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,n){const r=t.lengthSq();if(r===0)return e;const s=ir.copy(t).add(e),o=this._boundary.clampPoint(s,Zm).sub(s),l=o.lengthSq();if(l===0)return e.add(t);if(l===r)return e;if(n===0)return e.add(t).add(o);{const c=1+n*l/t.dot(o);return e.add(ir.copy(t).multiplyScalar(c)).add(o.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(Yp(this._camera)){const e=this._camera,t=e.near,n=e.getEffectiveFOV()*OA,r=Math.tan(n*.5)*t,s=r*e.aspect;this._nearPlaneCorners[0].set(-s,-r,0),this._nearPlaneCorners[1].set(s,-r,0),this._nearPlaneCorners[2].set(s,r,0),this._nearPlaneCorners[3].set(-s,r,0)}else if(vf(this._camera)){const e=this._camera,t=1/e.zoom,n=e.left*t,r=e.right*t,s=e.top*t,a=e.bottom*t;this._nearPlaneCorners[0].set(n,s,0),this._nearPlaneCorners[1].set(r,s,0),this._nearPlaneCorners[2].set(r,a,0),this._nearPlaneCorners[3].set(n,a,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||P3(this._camera,"_collisionTest"))return e;const n=this._getTargetDirection(zA);D3.lookAt(T9,n,this._camera.up);for(let r=0;r<4;r++){const s=ir.copy(this._nearPlaneCorners[r]);s.applyMatrix4(D3);const a=Zm.addVectors(this._target,s);Rw.set(a,n),Rw.far=this._spherical.radius+1;const o=Rw.intersectObjects(this.colliderMeshes);o.length!==0&&o[0].distance<e&&(e=o[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const n=()=>{this.removeEventListener("rest",n),t()};this.addEventListener("rest",n)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new zn.Sphere){const n=t,r=n.center;eg.makeEmpty(),e.traverseVisible(a=>{a.isMesh&&eg.expandByObject(a)}),eg.getCenter(r);let s=0;return e.traverseVisible(a=>{if(!a.isMesh)return;const o=a,l=o.geometry.clone();l.applyMatrix4(o.matrixWorld);const u=l.attributes.position;for(let h=0,d=u.count;h<d;h++)li.fromBufferAttribute(u,h),s=Math.max(s,r.distanceToSquared(li))}),n.radius=Math.sqrt(s),n}}function Hft(i){let e,t;return Kl(i[8]),{c:pn,l:pn,m(n,r){e||(t=[Wi(window,"mousemove",i[7]),Wi(window,"resize",i[8])],e=!0)},p:pn,i:pn,o:pn,d(n){e=!1,tv(t)}}}function Gft(i,e,t){let n,r,s;Wt(i,F3,m=>t(9,n=m));const{camera:a}=Id();Wt(i,a,m=>t(4,s=m));const o=new le(1,0,0),l=z3([1,0,0]);Wt(i,l,m=>t(0,r=m)),l.damping=1.5;let c,u;function h(m){tn(F3,n=[m[0],0,0,0,m[1],1,0,0,0,0,1,0,0,0,0,1],n)}const d=m=>{o.set((m.clientX/c*2-1)*1,(-(m.clientY/u)*2+1)*1,0),o.unproject(s),tn(l,r=[o.x,o.y,o.z],r)};function f(){t(2,c=window.innerWidth),t(3,u=window.innerHeight)}return i.$$.update=()=>{i.$$.dirty&1&&h(r)},[r,l,c,u,s,a,o,d,f]}class Qft extends Sn{constructor(e){super(),Mn(this,e,Gft,Hft,gn,{})}}function R9(i){let e,t;return e=new Qft({}),{c(){ot(e.$$.fragment)},l(n){lt(e.$$.fragment,n)},m(n,r){ct(e,n,r),t=!0},i(n){t||(we(e.$$.fragment,n),t=!0)},o(n){Me(e.$$.fragment,n),t=!1},d(n){ut(e,n)}}}function qft(i){let e,t;const n=[i[2],{axes:"xyz"}];let r={};for(let s=0;s<n.length;s+=1)r=jt(r,n[s]);return e=new yx({props:r}),{c(){ot(e.$$.fragment)},l(s){lt(e.$$.fragment,s)},m(s,a){ct(e,s,a),t=!0},p(s,a){const o=a[0]&4?si(n,[Bs(s[2]),n[1]]):{};e.$set(o)},i(s){t||(we(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){ut(e,s)}}}function jft(i){let e,t;const n=[i[3],{axes:"xyz"}];let r={};for(let s=0;s<n.length;s+=1)r=jt(r,n[s]);return e=new yx({props:r}),{c(){ot(e.$$.fragment)},l(s){lt(e.$$.fragment,s)},m(s,a){ct(e,s,a),t=!0},p(s,a){const o=a[0]&8?si(n,[Bs(s[3]),n[1]]):{};e.$set(o)},i(s){t||(we(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){ut(e,s)}}}function Wft(i){let e,t,n,r;const s=[{axes:"xzy"},{"position.z":cd*0},{"position.y":cd},i[4]];let a={};for(let c=0;c<s.length;c+=1)a=jt(a,s[c]);e=new yx({props:a});const o=[{axes:"zyx"},{"position.z":cd*0},{"position.x":-cd},i[4]];let l={};for(let c=0;c<o.length;c+=1)l=jt(l,o[c]);return n=new yx({props:l}),{c(){ot(e.$$.fragment),t=Ct(),ot(n.$$.fragment)},l(c){lt(e.$$.fragment,c),t=Et(c),lt(n.$$.fragment,c)},m(c,u){ct(e,c,u),Fe(c,t,u),ct(n,c,u),r=!0},p(c,u){const h=u[0]&16?si(s,[s[0],u&0&&{"position.z":cd*0},u&0&&{"position.y":cd},u[0]&16&&Bs(c[4])]):{};e.$set(h);const d=u[0]&16?si(o,[o[0],u&0&&{"position.z":cd*0},u&0&&{"position.x":-cd},u[0]&16&&Bs(c[4])]):{};n.$set(d)},i(c){r||(we(e.$$.fragment,c),we(n.$$.fragment,c),r=!0)},o(c){Me(e.$$.fragment,c),Me(n.$$.fragment,c),r=!1},d(c){c&&ae(t),ut(e,c),ut(n,c)}}}function $ft(i){return{c:pn,l:pn,m:pn,p:pn,i:pn,o:pn,d:pn}}function Xft(i){let e,t;const n=[{is:i[23].scene},{"position.z":0},{rotation:[Math.PI/2,0,0]},i[14]];let r={};for(let s=0;s<n.length;s+=1)r=jt(r,n[s]);return e=new Oo({props:r}),{c(){ot(e.$$.fragment)},l(s){lt(e.$$.fragment,s)},m(s,a){ct(e,s,a),t=!0},p(s,a){const o=a[0]&16384?si(n,[n[0],n[1],a&0&&{rotation:[Math.PI/2,0,0]},a[0]&16384&&Bs(s[14])]):{};e.$set(o)},i(s){t||(we(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){ut(e,s)}}}function Yft(i){return{c:pn,l:pn,m:pn,p:pn,i:pn,o:pn,d:pn}}function Kft(i){return{c:pn,l:pn,m:pn,p:pn,i:pn,o:pn,d:pn}}function Jft(i){let e,t;return e=new Oo.MeshBasicMaterial({props:{map:i[73],$$slots:{default:[Zft]},$$scope:{ctx:i}}}),{c(){ot(e.$$.fragment)},l(n){lt(e.$$.fragment,n)},m(n,r){ct(e,n,r),t=!0},p(n,r){const s={};r[2]&4096&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(we(e.$$.fragment,n),t=!0)},o(n){Me(e.$$.fragment,n),t=!1},d(n){ut(e,n)}}}function Zft(i){let e,t;return e=new Oo.DoubleSide({props:{attach:"side"}}),{c(){ot(e.$$.fragment)},l(n){lt(e.$$.fragment,n)},m(n,r){ct(e,n,r),t=!0},p:pn,i(n){t||(we(e.$$.fragment,n),t=!0)},o(n){Me(e.$$.fragment,n),t=!1},d(n){ut(e,n)}}}function ept(i){return{c:pn,l:pn,m:pn,p:pn,i:pn,o:pn,d:pn}}function tpt(i){let e,t,n,r;e=new Oo.PlaneGeometry({props:{args:[6,6]}});let s={ctx:i,current:null,token:null,hasCatch:!1,pending:ept,then:Jft,catch:Kft,value:73,blocks:[,,,]};return oL(i[18],s),{c(){ot(e.$$.fragment),t=Ct(),n=ca(),s.block.c()},l(a){lt(e.$$.fragment,a),t=Et(a),n=ca(),s.block.l(a)},m(a,o){ct(e,a,o),Fe(a,t,o),Fe(a,n,o),s.block.m(a,s.anchor=o),s.mount=()=>n.parentNode,s.anchor=n,r=!0},p(a,o){i=a,lL(s,i,o)},i(a){r||(we(e.$$.fragment,a),we(s.block),r=!0)},o(a){Me(e.$$.fragment,a);for(let o=0;o<3;o+=1){const l=s.blocks[o];Me(l)}r=!1},d(a){a&&(ae(t),ae(n)),ut(e,a),s.block.d(a),s.token=null,s=null}}}function npt(i){let e,t,n,r={ctx:i,current:null,token:null,hasCatch:!1,pending:Yft,then:Xft,catch:$ft,value:23,blocks:[,,,]};oL(dN("/maxwell.glb"),r);const s=[i[15]];let a={$$slots:{default:[tpt]},$$scope:{ctx:i}};for(let o=0;o<s.length;o+=1)a=jt(a,s[o]);return t=new Oo.Mesh({props:a}),{c(){r.block.c(),e=Ct(),ot(t.$$.fragment)},l(o){r.block.l(o),e=Et(o),lt(t.$$.fragment,o)},m(o,l){r.block.m(o,r.anchor=l),r.mount=()=>e.parentNode,r.anchor=e,Fe(o,e,l),ct(t,o,l),n=!0},p(o,l){i=o,lL(r,i,l);const c=l[0]&32768?si(s,[Bs(i[15])]):{};l[2]&4096&&(c.$$scope={dirty:l,ctx:i}),t.$set(c)},i(o){n||(we(r.block),we(t.$$.fragment,o),n=!0)},o(o){for(let l=0;l<3;l+=1){const c=r.blocks[l];Me(c)}Me(t.$$.fragment,o),n=!1},d(o){o&&ae(e),r.block.d(o),r.token=null,r=null,ut(t,o)}}}function ipt(i){let e,t,n,r,s,a,o,l,c,u,h,d,f,m,A,_,v,w,x,C,S,I,P,k,M,R,N,U,q,W,F,ue,J,Y,Pe,Ie,pe,Ce=i[1]&&R9();return t=new ff({props:{view:i[19],coords:i[5],color:gu,texOpacity:i[9].vectorTexOpacity,visible:i[9].xVisible,dim3:i[9].vectorDim3}}),r=new ff({props:{view:i[20],coords:[0,0,0,...i[17]],color:gu,tex:!1,visible:i[16].vectorVisible}}),a=new ff({props:{view:i[19],coords:i[6],color:vu,texOpacity:i[9].xTexOpacity,scalar:i[9].xScalar,scalarOpacity:i[9].xScalarOpacity,scalarAlign:i[9].xScalarAlign,visible:i[9].xVisible,dim3:i[9].xDim3}}),l=new ff({props:{view:i[19],coords:i[7],color:Au,texOpacity:i[9].yTexOpacity,scalar:i[9].yScalar,scalarOpacity:i[9].yScalarOpacity,scalarAlign:i[9].yScalarAlign,visible:i[9].yVisible,dim3:i[9].yDim3}}),u=new ff({props:{view:i[19],coords:i[8],color:f1,texOpacity:i[9].zTexOpacity,scalar:i[9].zScalar,scalarOpacity:i[9].zScalarOpacity,scalarAlign:i[9].zScalarAlign,visible:i[9].zVisible,dim3:i[9].zDim3}}),d=new ff({props:{view:i[20],coords:[0,0,0,1,0,0],color:vu,tex:!1,visible:i[16].xVisible}}),m=new ff({props:{view:i[20],coords:[0,0,0,0,1,0],color:Au,tex:!1,visible:i[16].yVisible}}),_=new ff({props:{view:i[20],coords:[0,0,0,0,0,1],color:f1,tex:!1,visible:i[16].zVisible}}),w=new Oo.Group({props:{renderOrder:-3,$$slots:{default:[qft]},$$scope:{ctx:i}}}),C=new Oo.Group({props:{renderOrder:-2,matrix:i[0],matrixAutoUpdate:!1,$$slots:{default:[jft]},$$scope:{ctx:i}}}),I=new Oo.Group({props:{renderOrder:-4,matrix:i[0],matrixAutoUpdate:!1,$$slots:{default:[Wft]},$$scope:{ctx:i}}}),k=new Oo.Group({props:{renderOrder:-4,matrix:i[0],matrixAutoUpdate:!1,$$slots:{default:[npt]},$$scope:{ctx:i}}}),R=new E7({props:{view:i[20],t:i[11].t}}),U=new C7({props:{view:i[20],t:i[10].t}}),W=new E7({props:{view:i[20],t:i[13].t,dim3:!0}}),ue=new C7({props:{view:i[20],t:i[12].t,dim3:!0}}),Y=new S7({props:{view:i[20],dim:pf,position:[-pf/2,-pf/2,-pf/2],rotation:[0,-Math.PI/2,0],t:i[4].t}}),Ie=new S7({props:{view:i[20],dim:pf,position:[-pf/2,pf/2,pf/2],rotation:[-Math.PI/2,0,0],t:i[4].t}}),{c(){Ce&&Ce.c(),e=Ct(),ot(t.$$.fragment),n=Ct(),ot(r.$$.fragment),s=Ct(),ot(a.$$.fragment),o=Ct(),ot(l.$$.fragment),c=Ct(),ot(u.$$.fragment),h=Ct(),ot(d.$$.fragment),f=Ct(),ot(m.$$.fragment),A=Ct(),ot(_.$$.fragment),v=Ct(),ot(w.$$.fragment),x=Ct(),ot(C.$$.fragment),S=Ct(),ot(I.$$.fragment),P=Ct(),ot(k.$$.fragment),M=Ct(),ot(R.$$.fragment),N=Ct(),ot(U.$$.fragment),q=Ct(),ot(W.$$.fragment),F=Ct(),ot(ue.$$.fragment),J=Ct(),ot(Y.$$.fragment),Pe=Ct(),ot(Ie.$$.fragment)},l(G){Ce&&Ce.l(G),e=Et(G),lt(t.$$.fragment,G),n=Et(G),lt(r.$$.fragment,G),s=Et(G),lt(a.$$.fragment,G),o=Et(G),lt(l.$$.fragment,G),c=Et(G),lt(u.$$.fragment,G),h=Et(G),lt(d.$$.fragment,G),f=Et(G),lt(m.$$.fragment,G),A=Et(G),lt(_.$$.fragment,G),v=Et(G),lt(w.$$.fragment,G),x=Et(G),lt(C.$$.fragment,G),S=Et(G),lt(I.$$.fragment,G),P=Et(G),lt(k.$$.fragment,G),M=Et(G),lt(R.$$.fragment,G),N=Et(G),lt(U.$$.fragment,G),q=Et(G),lt(W.$$.fragment,G),F=Et(G),lt(ue.$$.fragment,G),J=Et(G),lt(Y.$$.fragment,G),Pe=Et(G),lt(Ie.$$.fragment,G)},m(G,oe){Ce&&Ce.m(G,oe),Fe(G,e,oe),ct(t,G,oe),Fe(G,n,oe),ct(r,G,oe),Fe(G,s,oe),ct(a,G,oe),Fe(G,o,oe),ct(l,G,oe),Fe(G,c,oe),ct(u,G,oe),Fe(G,h,oe),ct(d,G,oe),Fe(G,f,oe),ct(m,G,oe),Fe(G,A,oe),ct(_,G,oe),Fe(G,v,oe),ct(w,G,oe),Fe(G,x,oe),ct(C,G,oe),Fe(G,S,oe),ct(I,G,oe),Fe(G,P,oe),ct(k,G,oe),Fe(G,M,oe),ct(R,G,oe),Fe(G,N,oe),ct(U,G,oe),Fe(G,q,oe),ct(W,G,oe),Fe(G,F,oe),ct(ue,G,oe),Fe(G,J,oe),ct(Y,G,oe),Fe(G,Pe,oe),ct(Ie,G,oe),pe=!0},p(G,oe){G[1]?Ce?oe[0]&2&&we(Ce,1):(Ce=R9(),Ce.c(),we(Ce,1),Ce.m(e.parentNode,e)):Ce&&(Hs(),Me(Ce,1,1,()=>{Ce=null}),Gs());const je={};oe[0]&32&&(je.coords=G[5]),oe[0]&512&&(je.texOpacity=G[9].vectorTexOpacity),oe[0]&512&&(je.visible=G[9].xVisible),oe[0]&512&&(je.dim3=G[9].vectorDim3),t.$set(je);const Tt={};oe[0]&131072&&(Tt.coords=[0,0,0,...G[17]]),oe[0]&65536&&(Tt.visible=G[16].vectorVisible),r.$set(Tt);const rt={};oe[0]&64&&(rt.coords=G[6]),oe[0]&512&&(rt.texOpacity=G[9].xTexOpacity),oe[0]&512&&(rt.scalar=G[9].xScalar),oe[0]&512&&(rt.scalarOpacity=G[9].xScalarOpacity),oe[0]&512&&(rt.scalarAlign=G[9].xScalarAlign),oe[0]&512&&(rt.visible=G[9].xVisible),oe[0]&512&&(rt.dim3=G[9].xDim3),a.$set(rt);const De={};oe[0]&128&&(De.coords=G[7]),oe[0]&512&&(De.texOpacity=G[9].yTexOpacity),oe[0]&512&&(De.scalar=G[9].yScalar),oe[0]&512&&(De.scalarOpacity=G[9].yScalarOpacity),oe[0]&512&&(De.scalarAlign=G[9].yScalarAlign),oe[0]&512&&(De.visible=G[9].yVisible),oe[0]&512&&(De.dim3=G[9].yDim3),l.$set(De);const xt={};oe[0]&256&&(xt.coords=G[8]),oe[0]&512&&(xt.texOpacity=G[9].zTexOpacity),oe[0]&512&&(xt.scalar=G[9].zScalar),oe[0]&512&&(xt.scalarOpacity=G[9].zScalarOpacity),oe[0]&512&&(xt.scalarAlign=G[9].zScalarAlign),oe[0]&512&&(xt.visible=G[9].zVisible),oe[0]&512&&(xt.dim3=G[9].zDim3),u.$set(xt);const mt={};oe[0]&65536&&(mt.visible=G[16].xVisible),d.$set(mt);const et={};oe[0]&65536&&(et.visible=G[16].yVisible),m.$set(et);const st={};oe[0]&65536&&(st.visible=G[16].zVisible),_.$set(st);const ce={};oe[0]&4|oe[2]&4096&&(ce.$$scope={dirty:oe,ctx:G}),w.$set(ce);const tt={};oe[0]&1&&(tt.matrix=G[0]),oe[0]&8|oe[2]&4096&&(tt.$$scope={dirty:oe,ctx:G}),C.$set(tt);const he={};oe[0]&1&&(he.matrix=G[0]),oe[0]&16|oe[2]&4096&&(he.$$scope={dirty:oe,ctx:G}),I.$set(he);const be={};oe[0]&1&&(be.matrix=G[0]),oe[0]&49152|oe[2]&4096&&(be.$$scope={dirty:oe,ctx:G}),k.$set(be);const Ne={};oe[0]&2048&&(Ne.t=G[11].t),R.$set(Ne);const nt={};oe[0]&1024&&(nt.t=G[10].t),U.$set(nt);const ze={};oe[0]&8192&&(ze.t=G[13].t),W.$set(ze);const me={};oe[0]&4096&&(me.t=G[12].t),ue.$set(me);const fe={};oe[0]&16&&(fe.t=G[4].t),Y.$set(fe);const Be={};oe[0]&16&&(Be.t=G[4].t),Ie.$set(Be)},i(G){pe||(we(Ce),we(t.$$.fragment,G),we(r.$$.fragment,G),we(a.$$.fragment,G),we(l.$$.fragment,G),we(u.$$.fragment,G),we(d.$$.fragment,G),we(m.$$.fragment,G),we(_.$$.fragment,G),we(w.$$.fragment,G),we(C.$$.fragment,G),we(I.$$.fragment,G),we(k.$$.fragment,G),we(R.$$.fragment,G),we(U.$$.fragment,G),we(W.$$.fragment,G),we(ue.$$.fragment,G),we(Y.$$.fragment,G),we(Ie.$$.fragment,G),pe=!0)},o(G){Me(Ce),Me(t.$$.fragment,G),Me(r.$$.fragment,G),Me(a.$$.fragment,G),Me(l.$$.fragment,G),Me(u.$$.fragment,G),Me(d.$$.fragment,G),Me(m.$$.fragment,G),Me(_.$$.fragment,G),Me(w.$$.fragment,G),Me(C.$$.fragment,G),Me(I.$$.fragment,G),Me(k.$$.fragment,G),Me(R.$$.fragment,G),Me(U.$$.fragment,G),Me(W.$$.fragment,G),Me(ue.$$.fragment,G),Me(Y.$$.fragment,G),Me(Ie.$$.fragment,G),pe=!1},d(G){G&&(ae(e),ae(n),ae(s),ae(o),ae(c),ae(h),ae(f),ae(A),ae(v),ae(x),ae(S),ae(P),ae(M),ae(N),ae(q),ae(F),ae(J),ae(Pe)),Ce&&Ce.d(G),ut(t,G),ut(r,G),ut(a,G),ut(l,G),ut(u,G),ut(d,G),ut(m,G),ut(_,G),ut(w,G),ut(C,G),ut(I,G),ut(k,G),ut(R,G),ut(U,G),ut(W,G),ut(ue,G),ut(Y,G),ut(Ie,G)}}}const tg=1,pf=10,rpt=1,cd=5,Ul=.1,Er=.3,ad=1e3;function spt(i,e,t){let n,r,s,a,o,l,c,u,h,d,f,m,A,_,v,w,x,C,S,I,P,k,M,R,N,U,q;Wt(i,U3,de=>t(27,s=de)),Wt(i,ux,de=>t(28,a=de)),Wt(i,DT,de=>t(29,o=de)),Wt(i,V3,de=>t(45,l=de)),Wt(i,wf,de=>t(30,c=de)),Wt(i,H3,de=>t(46,u=de)),Wt(i,od,de=>t(31,h=de)),Wt(i,Jp,de=>t(32,d=de)),Wt(i,mf,de=>t(33,f=de)),Wt(i,gf,de=>t(47,m=de)),Wt(i,sg,de=>t(48,A=de)),Wt(i,VA,de=>t(49,_=de)),Wt(i,Uw,de=>t(34,v=de)),Wt(i,_f,de=>t(35,w=de)),Wt(i,Qu,de=>t(36,x=de)),Wt(i,v0,de=>t(37,C=de)),Wt(i,Vw,de=>t(50,S=de)),Wt(i,p1,de=>t(51,P=de)),Wt(i,F3,de=>t(38,M=de)),Wt(i,Hw,de=>t(1,R=de)),Wt(i,r0,de=>t(52,N=de)),Wt(i,hx,de=>t(53,U=de));let{mathbox:W}=e;const F=nse("/maxwell.jpg");Wt(i,F,de=>t(39,q=de));const ue=dN("/maxwell.glb");let J;W.set("focus",20);const Y=[[-tg,tg],[-tg,tg],[-tg,tg]],Pe=W.cartesian({range:Y}),Ie=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];let pe=[...Ie];const Ce=Pe.transform();tn(H3,u=Cn.to(pe,{ease:"linear",duration:2,paused:!0,endArray:c,onUpdate(){tn(hx,U=this.progress(),U),t(26,pe)},onComplete(){tn(r0,N=!0,N),this.pause()}}),u);let G=!0;function oe(de){pe.forEach(($e,Lt)=>{t(26,pe[Lt]=Ie[Lt],pe)}),u.invalidate();const It=G?1e-4:-1e-4;u.progress(u.progress()+It),G=!G,t(26,pe)}const je=z3(nk);Wt(i,je,de=>t(0,k=de));const Tt={cellSize:rpt,cellColor:ev.slate[700],cellThickness:1.5,sectionSize:cd,sectionColor:ev.slate[700],sectionThickness:3,infiniteGrid:!0};let rt={...Tt,...n},De={...Tt,cellColor:ik,sectionColor:rk,...r},xt={...Tt,infiniteGrid:!1,cellColor:ik,sectionColor:rk,gridSize:[10,10],t:0},mt={fadeDistance:rt.fadeDistance,transformedFadeDistance:0,fadeStrength:rt.fadeStrength,transformedFadeStrength:De.fadeStrength};function et(de){de?Cn.to(rt,{fadeDistance:n.fadeDistance,onUpdate(){t(2,rt)}}):Cn.to(rt,{fadeDistance:0,onUpdate(){t(2,rt)}})}function st(de){de?Cn.to(De,{fadeDistance:r.fadeDistance,onUpdate(){t(3,De)}}):Cn.to(De,{fadeDistance:0,onUpdate(){t(3,De)}})}function ce(de){de?Cn.to(xt,{t:1,cellThickness:Tt.cellThickness,sectionThickness:Tt.sectionThickness,onUpdate(){t(4,xt)}}):Cn.to(xt,{t:0,cellThickness:0,sectionThickness:0,onUpdate(){t(4,xt)}})}let tt;function he(de){tt=="points"?Cn.to($,{t:0,onUpdate(){t(10,$)}}):tt=="3d points"?Cn.to(Te,{t:0,onUpdate(){t(12,Te)}}):tt=="planes"?Cn.to(ee,{t:0,onUpdate(){t(11,ee)}}):tt=="3d planes"?Cn.to(te,{t:0,onUpdate(){t(13,te)}}):tt=="model"?Cn.to(Qe,{scale:0,onUpdate(){t(14,Qe)}}):tt=="image"&&Cn.to(Vt,{scale:0,onUpdate(){t(15,Vt)}}),de=="points"?Cn.to($,{t:1,onUpdate(){t(10,$)}}):de=="3d points"?Cn.to(Te,{t:1,onUpdate(){t(12,Te)}}):de=="planes"?Cn.to(ee,{t:1,onUpdate(){t(11,ee)}}):de=="3d planes"?Cn.to(te,{t:1,onUpdate(){t(13,te)}}):de=="model"?Cn.to(Qe,{scale:.25,onUpdate(){t(14,Qe)}}):de=="image"&&Cn.to(Vt,{scale:1,onUpdate(){t(15,Vt)}}),tt=de}function be(de){d&&Cn.to(rt,{duration:Er,fadeDistance:n.fadeDistance,fadeStrength:n.fadeStrength,onUpdate:()=>t(2,rt)}),h&&Cn.to(De,{duration:Er,fadeDistance:r.fadeDistance,fadeStrength:r.fadeStrength,onUpdate:()=>t(3,De)}),m&&(C?t(16,ye.zVisible=!0,ye):(tn(mf,f=void 0,f),he(void 0),tn(p1,P=!P,P),t(16,ye.zVisible=!1,ye),tn(Qu,x[2]=0,x)))}let Ne=[0,0,0,0,0,0],nt=[0,0,0,0,0,0],ze=[0,0,0,0,0,0],me=[0,0,0,0,0,0];const fe=z3([0,0,0]);Wt(i,fe,de=>t(17,I=de));function Be(de){de?tn(fe,I=x,I):tn(fe,I=[0,0,0],I)}let V={vectorTexOpacity:0,xTexOpacity:0,yTexOpacity:0,zTexOpacity:0,xScalar:1,yScalar:1,zScalar:1,xScalarOpacity:0,yScalarOpacity:0,zScalarOpacity:0,xScalarAlign:"top",yScalarAlign:"left",zScalarAlign:"bottom",vectorVisible:!1,xVisible:!0,yVisible:!0,zVisible:!0,xDim3:!1,yDim3:!1,zDim3:!1,vectorDim3:!1},$={t:0},ee={t:0},Te={t:0},te={t:0},Qe={scale:0},Vt={scale:0},ye={vectorVisible:!0,xVisible:!1,yVisible:!1,zVisible:!1};const Ee={fastScrollEnd:!0,pin:"#article",pinnedContainer:"#article",start:"center center",scrub:1,pinSpacing:!0,toggleClass:"active",onEnter(){$t()},onLeave(){Qn()},onEnterBack(){$t()},onLeaveBack(){Qn()}},St={start:"bottom center",pinnedContainer:"#article",toggleActions:"play none none reverse",fastScrollEnd:!0,end:200},Rt={onUpdate(){Nt(this.progress())}},Bt={ease:"power2.in"};function Qt(){Cn.timeline({...Rt,scrollTrigger:{...Ee,trigger:"#st-1",end:`+=${ad*1}`,onEnter:()=>{Ee.onEnter(),tn(Jp,d=!0,d),tn(od,h=!1,h),tn(Vw,S=!1,S)},onLeaveBack:()=>{Ee.onLeaveBack(),tn(Jp,d=!1,d),tn(od,h=!0,h),tn(Vw,S=!0,S)}}}).to(Ne,{endArray:[0,0,0,...Nr,0],onUpdate(){t(5,Ne)}}).to(V,{vectorTexOpacity:1,onUpdate(){t(9,V)}}).to({},{duration:Ul}),Cn.timeline({...Rt,scrollTrigger:{...Ee,trigger:"#st-2",end:`+=${ad*1}`}}).to(nt,{endArray:[0,0,0,1,0,0],onUpdate(){t(6,nt)},delay:Ul}).to(ze,{endArray:[0,0,0,0,1,0],onUpdate(){t(7,ze)}},"<").to(V,{xTexOpacity:1,onUpdate(){t(9,V)}}).to(V,{yTexOpacity:1,onUpdate(){t(9,V)}},"<").to({},{duration:Ul}),Cn.timeline({...Rt,scrollTrigger:{...Ee,trigger:"#st-3",end:`+=${ad*3}`,preventOverlaps:!0}}).to(V,{xTexOpacity:0,onUpdate(){t(9,V)}}).to(V,{yTexOpacity:0,onUpdate(){t(9,V)}},"<").add("step-2").to(V,{duration:.2,xScalarOpacity:1,onUpdate(){t(9,V)}},"step-2").to(V,{duration:.2,yScalarOpacity:1,onUpdate(){t(9,V)}},"step-2").to(nt,{endArray:[0,0,0,Nr[0],0,0],onUpdate(){t(6,nt)}},"step-2").to(ze,{endArray:[0,0,0,0,Nr[1],0],onUpdate(){t(7,ze)}},"step-2").to(V,{xScalar:Nr[0],onUpdate(){t(9,V)}},"step-2").to(V,{yScalar:Nr[1],onUpdate(){t(9,V)}},"step-2").to({},{duration:Ul}).add("step-3").to(V,{duration:.2,xScalarOpacity:0,onUpdate(){t(9,V)}},"step-3").to(V,{duration:.2,yScalarOpacity:0,onUpdate(){t(9,V)}},"step-3").to(ze,{endArray:[Nr[0],0,0,...Nr,0],onUpdate(){t(7,ze)}},"step-3").to({},{duration:Ul}),Cn.timeline({scrollTrigger:{...St,trigger:"#st-3"},timelinePropsAlt:Bt}).add("step-1").to(V,{duration:Er,xScalar:1,yScalar:1},"step-1").to(nt,{duration:Er,endArray:[0,0,0,1,0,0],onUpdate(){t(6,nt)}},"step-1").to(ze,{duration:Er,endArray:[0,0,0,0,1,0],onUpdate(){t(7,ze)}},"step-1").to(V,{duration:Er,xTexOpacity:1,onUpdate(){t(9,V)}}).to(V,{duration:Er,yTexOpacity:1,onUpdate(){t(9,V)}},"<"),Cn.timeline({...Rt,scrollTrigger:{...Ee,trigger:"#st-4",end:`+=${ad*1}`}}).to(nt,{endArray:[0,0,0,...Hl,0],onUpdate(){t(6,nt)}}).to(ze,{endArray:[0,0,0,...uu,0],onUpdate(){t(7,ze)}},"<").to(Ne,{endArray:[0,0,0,...Tg,0],onUpdate(){t(5,Ne)}},"<").to({},{duration:Ul}),Cn.timeline({...Rt,scrollTrigger:{...Ee,trigger:"#st-5",end:`+=${ad*3}`}}).add("step-1").to(V,{xScalarAlign:"left",yScalarAlign:"top"},"step-1").to(V,{xTexOpacity:0,onUpdate(){t(9,V)}},"step-1").to(V,{yTexOpacity:0,onUpdate(){t(9,V)}},"step-1").add("step-2").to(V,{duration:.2,xScalarOpacity:1,onUpdate(){t(9,V)}},"step-2").to(V,{duration:.2,yScalarOpacity:1,onUpdate(){t(9,V)}},"step-2").to(nt,{endArray:[0,0,0,Nr[0]*Hl[0],Nr[0]*Hl[1],0],onUpdate(){t(6,nt)}},"step-2").to(ze,{endArray:[0,0,0,Nr[1]*uu[0],Nr[1]*uu[1],0],onUpdate(){t(7,ze)}},"step-2").to(V,{xScalar:Nr[0],onUpdate(){t(9,V)}},"step-2").to(V,{yScalar:Nr[1],onUpdate(){t(9,V)}},"step-2").to({},{duration:Ul}).add("step-3").to(V,{duration:.2,xScalarOpacity:0,onUpdate(){t(9,V)}},"step-3").to(V,{duration:.2,yScalarOpacity:0,onUpdate(){t(9,V)}},"step-3").to(ze,{endArray:[Nr[0]*Hl[0],Nr[0]*Hl[1],0,...Tg,0],onUpdate(){t(7,ze)}},"step-3").to({},{duration:Ul}),Cn.timeline({scrollTrigger:{...St,trigger:"#st-5"},timelinePropsAlt:Bt}).add("step-1").to(V,{duration:Er,vectorTexOpacity:0,onUpdate(){t(9,V)}},"step-1").to(Ne,{duration:Er,endArray:[0,0,0,0,0,0],onUpdate(){t(5,Ne)}},"step-1").to(nt,{duration:Er,endArray:[0,0,0,1,0,0],onUpdate(){t(6,nt)}},"step-1").to(ze,{duration:Er,endArray:[0,0,0,0,1,0],onUpdate(){t(7,ze)}},"step-1").add("step-2").to(V,{duration:Er,xTexOpacity:1,onUpdate(){t(9,V)}},"step-2").to(V,{duration:Er,yTexOpacity:1,onUpdate(){t(9,V)}},"step-2"),Cn.timeline({...Rt,scrollTrigger:{...Ee,trigger:"#st-6",end:`+=${ad*1}`,onLeaveBack:()=>{Ee.onLeaveBack(),tn(mf,f=void 0,f),tn(od,h=!1,h)}}}).add("step-1").to($,{t:1,onUpdate(){t(10,$)}},"step-1").to(mt,{transformedFadeDistance:rt.fadeDistance,onUpdate(){mt=mt}},"step-1"),Cn.timeline({...Rt,scrollTrigger:{...Ee,trigger:"#st-7",end:`+=${ad*1}`,onToggle:It=>{tn(mf,f="points",f),tn(od,h=!0,h)}}}).to({},{duration:Ul}).add("step-1").to(u,{progress:1},"step-1").to(nt,{endArray:[0,0,0,...Hl,0],onUpdate(){t(6,nt)}},"step-1").to(ze,{endArray:[0,0,0,...uu,0],onUpdate(){t(7,ze)}},"step-1").to({},{duration:Ul}),Cn.timeline({scrollTrigger:{...St,trigger:"#st-8",start:"top center",onEnter:()=>{tn(gf,m=!0,m),tn(_f,w=!0,w)},onLeaveBack:()=>{tn(gf,m=!1,m),_.reset(!0),tn(mf,f="points",f),tn(Jp,d=!0,d),tn(od,h=!0,h),tn(_f,w=!1,w),u.progress(1),Cn.to(c,{endArray:vX,onUpdate:()=>{wf.set(c)},duration:Er})}},timelinePropsAlt:Bt}).add("step-1").to("#canvas-wrapper",{pointerEvents:"auto",duration:Er},"step-1").from("#inputs",{autoAlpha:0,x:-40,duration:Er},"step-1").fromTo(nt,{endArray:[0,0,0,...Hl,0]},{endArray:()=>[0,0,0,pe[0],pe[4],0],onUpdate:()=>{t(6,nt)},immediateRender:!1,duration:Er},"step-1").fromTo(ze,{endArray:[0,0,0,...uu,0]},{endArray:()=>[0,0,0,pe[1],pe[5],0],onUpdate:()=>{t(7,ze)},immediateRender:!1,duration:Er},"step-1").to(V,{duration:Er,xTexOpacity:0,yTexOpacity:0,onUpdate(){t(9,V)}},"step-1").to(ye,{duration:.001,xVisible:!0,yVisible:!0,onUpdate(){t(16,ye),t(29,o)}},"step-1").to(V,{duration:.001,xVisible:!1,yVisible:!1,onUpdate(){t(9,V)}},"step-1").add("step-2"),Cn.timeline({scrollTrigger:{...St,trigger:"#section-2",start:"top center",onEnter:()=>{tn(gf,m=!1,m),_.reset(!0),tn(mf,f=void 0,f),tn(Jp,d=!0,d),tn(od,h=!1,h),tn(_f,w=!1,w),u.progress(1),Cn.to(c,{endArray:nk,onUpdate:()=>{wf.set(c)},duration:Er})},onLeaveBack:()=>{tn(gf,m=!0,m)}},timelinePropsAlt:Bt}).add("step-1").to(mt,{duration:Er,fadeDistance:xt.fadeDistance,onUpdate:()=>{mt=mt}},"step-1").to("#canvas-wrapper",{pointerEvents:"none",duration:Er},"step-1").to("#inputs",{autoAlpha:0,x:-40,duration:Er},"step-1").to(nt,{endArray:()=>[0,0,0,1,0,0],onUpdate:()=>{t(6,nt)},duration:.001},"step-1").to(ze,{endArray:()=>[0,0,0,0,1,0],onUpdate:()=>{t(7,ze)},duration:.001},"step-1").add("step-2").to(ye,{duration:.001,xVisible:!1,yVisible:!1,onUpdate(){t(16,ye),t(29,o)}},"step-2").to(V,{duration:.001,xVisible:!0,yVisible:!0,onUpdate(){t(9,V)}},"step-2"),Cn.timeline({...Rt,scrollTrigger:{...Ee,trigger:"#st-9",end:`+=${ad*3}`,onEnter:()=>{Ee.onEnter(),tn(v0,C=!0,C),t(16,ye.zVisible=!1,ye),t(16,ye.vectorVisible=!1,ye),tn(_f,w=!0,w),tn(Qu,x[0]=u0[0],x),tn(Qu,x[1]=u0[1],x),tn(Qu,x[2]=u0[2],x)},onLeaveBack:()=>{Ee.onLeaveBack(),tn(v0,C=!1,C),tn(Uw,v=!1,v),console.log(Nr),tn(Qu,x[0]=Nr[0],x),tn(Qu,x[1]=Nr[1],x),tn(Qu,x[2]=0,x),tn(_f,w=!1,w)},onLeave:()=>{Ee.onLeave(),tn(sg,A=!0,A),tn(Uw,v=!0,v)},onEnterBack:()=>{Ee.onEnterBack(),tn(sg,A=!1,A),Cn.to(_,{azimuthAngle:Math.PI*.3})}}}).add("step-0").to(_.mouseButtons,{right:ul.ACTION.ROTATE,duration:.001},"step-0").to({},{duration:Ul},"step-0").add("step-1").to(_,{distance:15,polarAngle:Math.PI*.35,azimuthAngle:Math.PI*.3},"step-1").to(me,{endArray:[0,0,0,0,0,1],onUpdate(){t(8,me)}},"step-1").to(V,{xTexOpacity:1,yTexOpacity:1,xDim3:!0,yDim3:!0,zDim3:!0,vectorDim3:!0,onUpdate(){t(9,V)}},"step-1").to(Ne,{endArray:[0,0,0,...u0],onUpdate(){t(5,Ne)}},"step-1").add("step-2").to(u,{progress:0,duration:.001},"step-2").to(c,{endArray:sk,duration:.001,onUpdate(){wf.set(c)}},"step-2").to(V,{zTexOpacity:1,onUpdate(){t(9,V)}},"step-2").to(V,{vectorTexOpacity:1,onUpdate(){t(9,V)}},"step-2").to(xt,{cellThickness:Tt.cellThickness,sectionThickness:Tt.sectionThickness,onUpdate(){t(4,xt)}},"step-2").add("step-3").to(xt,{t:1,onUpdate(){t(4,xt)}},"step-3").to({},{duration:Ul}),Cn.timeline({...Rt,scrollTrigger:{...Ee,trigger:"#st-10",end:`+=${ad*1}`}}).add("step-1").to(u,{progress:1},"step-1").to(nt,{endArray:[0,0,0,...s2],onUpdate(){t(6,nt)}},"step-1").to(ze,{endArray:[0,0,0,...a2],onUpdate(){t(7,ze)}},"step-1").to(me,{endArray:[0,0,0,...o2],onUpdate(){t(8,me)}},"step-1").to(Ne,{endArray:[0,0,0,...l2],onUpdate(){t(5,Ne)}},"step-1").to({},{duration:Ul});const de=Cn.timeline({scrollTrigger:{...St,trigger:"#st-12",start:"top center",onEnter:()=>{tn(sg,A=!1,A),tn(gf,m=!0,m),t(16,ye.vectorVisible=!0,ye),t(9,V.vectorVisible=!0,V)},onLeaveBack:()=>{tn(sg,A=!0,A),tn(gf,m=!1,m),tn(mf,f=void 0,f),tn(Jp,d=!0,d),tn(od,h=!1,h),u.progress(1),Cn.to(c,{endArray:sk,onUpdate:()=>{wf.set(c)},duration:Er}),t(16,ye.vectorVisible=!1,ye),t(9,V.vectorVisible=!1,V)}},timelinePropsAlt:Bt}).add("step-1").to("#canvas-wrapper",{pointerEvents:"auto",duration:Er},"step-1").to("#inputs",{autoAlpha:1,x:0,duration:Er},"step-1").to(V,{duration:Er,xTexOpacity:0,yTexOpacity:0,zTexOpacity:0,vectorTexOpacity:0,xVisible:!1,yVisible:!1,zVisible:!1,onUpdate(){t(9,V)}},"step-1").to(ye,{duration:Er,xVisible:!0,yVisible:!0,zVisible:!0,onUpdate(){t(16,ye),t(29,o)}},"step-1");tn(V3,l=de.scrollTrigger,l)}function Nt(de){Cn.set("#st-progress",{scaleY:de})}function $t(){Cn.to("#st-progress",{opacity:1,duration:.5})}function Qn(){Cn.to("#st-progress",{opacity:0,duration:.5})}return Fc(()=>{t(25,J=!0)}),i.$$set=de=>{"mathbox"in de&&t(24,W=de.mathbox)},i.$$.update=()=>{i.$$.dirty[1]&32&&console.log(x),i.$$.dirty[1]&256&&q&&tn(F,q.encoding=sh,q),i.$$.dirty[0]&1073741824&&oe(),i.$$.dirty[0]&67108866|i.$$.dirty[1]&128&&(R?tn(je,k=M,k):tn(je,k=pe,k)),i.$$.dirty[0]&1&&Ce.set("matrix",k),i.$$.dirty[1]&64&&(n=C?{fadeDistance:150,fadeStrength:4}:{fadeDistance:50,fadeStrength:5}),i.$$.dirty[1]&64&&(r=C?{fadeDistance:150,fadeStrength:4}:{fadeDistance:50,fadeStrength:9}),i.$$.dirty[1]&2&&et(d),i.$$.dirty[1]&1&&st(h),i.$$.dirty[1]&8&&ce(v),i.$$.dirty[1]&4&&he(f),i.$$.dirty[1]&64&&be(),i.$$.dirty[1]&32&&tn(fe,I=x,I),i.$$.dirty[1]&16&&Be(w),i.$$.dirty[0]&536870912&&o&&(t(16,ye.xVisible=!0,ye),t(16,ye.yVisible=!0,ye),t(16,ye.zVisible=!0,ye)),i.$$.dirty[0]&973078528&&!o&&J&&a&&s&&Qt()},[k,R,rt,De,xt,Ne,nt,ze,me,V,$,ee,Te,te,Qe,Vt,ye,I,F,Pe,Ce,je,fe,ue,W,J,pe,s,a,o,c,h,d,f,v,w,x,C,M,q]}class apt extends Sn{constructor(e){super(),Mn(this,e,spt,ipt,gn,{mathbox:24},null,[-1,-1,-1])}}const opt={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class kv{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const lpt=new Ah(-1,1,1,-1,0,1),VP=new Zn;VP.setAttribute("position",new rn([-1,3,0,-1,-1,0,3,-1,0],3));VP.setAttribute("uv",new rn([0,2,0,0,2,0],2));class t2{constructor(e){this._mesh=new cr(VP,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,lpt)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class PT extends kv{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof $a?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=_0.clone(e.uniforms),this.material=new $a({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new t2(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class D9 extends kv{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let a,o;this.inverse?(a=0,o=1):(a=1,o=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,a,4294967295),s.buffers.stencil.setClear(o),s.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class cpt extends kv{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class upt{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const n=e.getSize(new _t);this._width=n.width,this._height=n.height,t=new Va(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:zo}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new PT(opt),this.copyPass.material.blending=rh,this.clock=new W2}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let r=0,s=this.passes.length;r<s;r++){const a=this.passes[r];if(a.enabled!==!1){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),a.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),a.needsSwap){if(n){const o=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}D9!==void 0&&(a instanceof D9?n=!0:a instanceof cpt&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new _t);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class hpt extends kv{constructor(e,t,n,r,s){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=s!==void 0?s:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Ut}render(e,t,n){const r=e.autoClear;e.autoClear=!1;let s,a;this.overrideMaterial!==void 0&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=a),e.autoClear=r}}const dpt={uniforms:{damp:{value:.96},tOld:{value:null},tNew:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float damp;

		uniform sampler2D tOld;
		uniform sampler2D tNew;

		varying vec2 vUv;

		vec4 when_gt( vec4 x, float y ) {

			return max( sign( x - y ), 0.0 );

		}

		void main() {

			vec4 texelOld = texture2D( tOld, vUv );
			vec4 texelNew = texture2D( tNew, vUv );

			texelOld *= damp * when_gt( texelOld, 0.1 );

			gl_FragColor = max(texelNew, texelOld);

		}`};class fpt extends kv{constructor(e=.96){super(),this.shader=dpt,this.uniforms=_0.clone(this.shader.uniforms),this.uniforms.damp.value=e,this.textureComp=new Va(window.innerWidth,window.innerHeight,{magFilter:ki,type:zo}),this.textureOld=new Va(window.innerWidth,window.innerHeight,{magFilter:ki,type:zo}),this.compFsMaterial=new $a({uniforms:this.uniforms,vertexShader:this.shader.vertexShader,fragmentShader:this.shader.fragmentShader}),this.compFsQuad=new t2(this.compFsMaterial),this.copyFsMaterial=new Lo,this.copyFsQuad=new t2(this.copyFsMaterial)}render(e,t,n){this.uniforms.tOld.value=this.textureOld.texture,this.uniforms.tNew.value=n.texture,e.setRenderTarget(this.textureComp),this.compFsQuad.render(e),this.copyFsQuad.material.map=this.textureComp.texture,this.renderToScreen?(e.setRenderTarget(null),this.copyFsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.copyFsQuad.render(e));const r=this.textureOld;this.textureOld=this.textureComp,this.textureComp=r}setSize(e,t){this.textureComp.setSize(e,t),this.textureOld.setSize(e,t)}dispose(){this.textureComp.dispose(),this.textureOld.dispose(),this.compFsMaterial.dispose(),this.copyFsMaterial.dispose(),this.compFsQuad.dispose(),this.copyFsQuad.dispose()}}const Dw={defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new _t(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];

		void SMAAEdgeDetectionVS( vec2 texcoord ) {
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 ); // WebGL port note: Changed sign in W component
		}

		void main() {

			vUv = uv;

			SMAAEdgeDetectionVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];

		vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {
			vec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );

			// Calculate color deltas:
			vec4 delta;
			vec3 C = texture2D( colorTex, texcoord ).rgb;

			vec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;
			vec3 t = abs( C - Cleft );
			delta.x = max( max( t.r, t.g ), t.b );

			vec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;
			t = abs( C - Ctop );
			delta.y = max( max( t.r, t.g ), t.b );

			// We do the usual threshold:
			vec2 edges = step( threshold, delta.xy );

			// Then discard if there is no edge:
			if ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )
				discard;

			// Calculate right and bottom deltas:
			vec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;
			t = abs( C - Cright );
			delta.z = max( max( t.r, t.g ), t.b );

			vec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;
			t = abs( C - Cbottom );
			delta.w = max( max( t.r, t.g ), t.b );

			// Calculate the maximum delta in the direct neighborhood:
			float maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );

			// Calculate left-left and top-top deltas:
			vec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;
			t = abs( C - Cleftleft );
			delta.z = max( max( t.r, t.g ), t.b );

			vec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;
			t = abs( C - Ctoptop );
			delta.w = max( max( t.r, t.g ), t.b );

			// Calculate the final maximum delta:
			maxDelta = max( max( maxDelta, delta.z ), delta.w );

			// Local contrast adaptation in action:
			edges.xy *= step( 0.5 * maxDelta, delta.xy );

			return vec4( edges, 0.0, 0.0 );
		}

		void main() {

			gl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );

		}`},Lw={defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new _t(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];
		varying vec2 vPixcoord;

		void SMAABlendingWeightCalculationVS( vec2 texcoord ) {
			vPixcoord = texcoord / resolution;

			// We will use these offsets for the searches later on (see @PSEUDO_GATHER4):
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 ); // WebGL port note: Changed sign in Y and W components
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 ); // WebGL port note: Changed sign in Y and W components

			// And these for the searches, they indicate the ends of the loops:
			vOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );

		}

		void main() {

			vUv = uv;

			SMAABlendingWeightCalculationVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )

		uniform sampler2D tDiffuse;
		uniform sampler2D tArea;
		uniform sampler2D tSearch;
		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[3];
		varying vec2 vPixcoord;

		#if "5.11.2" == 100
		vec2 round( vec2 x ) {
			return sign( x ) * floor( abs( x ) + 0.5 );
		}
		#endif

		float SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {
			// Not required if searchTex accesses are set to point:
			// float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);
			// e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +
			//     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;
			e.r = bias + e.r * scale;
			return 255.0 * texture2D( searchTex, e, 0.0 ).r;
		}

		float SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			/**
				* @PSEUDO_GATHER4
				* This texcoord has been offset by (-0.25, -0.125) in the vertex shader to
				* sample between edge, thus fetching four edges in a row.
				* Sampling with different offsets in each direction allows to disambiguate
				* which edges are active from the four fetched ones.
				*/
			vec2 e = vec2( 0.0, 1.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord -= vec2( 2.0, 0.0 ) * resolution;
				if ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;
			}

			// We correct the previous (-0.25, -0.125) offset we applied:
			texcoord.x += 0.25 * resolution.x;

			// The searches are bias by 1, so adjust the coords accordingly:
			texcoord.x += resolution.x;

			// Disambiguate the length added by the last step:
			texcoord.x += 2.0 * resolution.x; // Undo last step
			texcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);

			return texcoord.x;
		}

		float SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 0.0, 1.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord += vec2( 2.0, 0.0 ) * resolution;
				if ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;
			}

			texcoord.x -= 0.25 * resolution.x;
			texcoord.x -= resolution.x;
			texcoord.x -= 2.0 * resolution.x;
			texcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );

			return texcoord.x;
		}

		float SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 1.0, 0.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord += vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign
				if ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;
			}

			texcoord.y -= 0.25 * resolution.y; // WebGL port note: Changed sign
			texcoord.y -= resolution.y; // WebGL port note: Changed sign
			texcoord.y -= 2.0 * resolution.y; // WebGL port note: Changed sign
			texcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 ); // WebGL port note: Changed sign

			return texcoord.y;
		}

		float SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 1.0, 0.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord -= vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign
				if ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;
			}

			texcoord.y += 0.25 * resolution.y; // WebGL port note: Changed sign
			texcoord.y += resolution.y; // WebGL port note: Changed sign
			texcoord.y += 2.0 * resolution.y; // WebGL port note: Changed sign
			texcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 ); // WebGL port note: Changed sign

			return texcoord.y;
		}

		vec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {
			// Rounding prevents precision errors of bilinear filtering:
			vec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;

			// We do a scale and bias for mapping to texel space:
			texcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );

			// Move to proper place, according to the subpixel offset:
			texcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;

			return texture2D( areaTex, texcoord, 0.0 ).rg;
		}

		vec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {
			vec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );

			vec2 e = texture2D( edgesTex, texcoord ).rg;

			if ( e.g > 0.0 ) { // Edge at north
				vec2 d;

				// Find the distance to the left:
				vec2 coords;
				coords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );
				coords.y = offset[ 1 ].y; // offset[1].y = texcoord.y - 0.25 * resolution.y (@CROSSING_OFFSET)
				d.x = coords.x;

				// Now fetch the left crossing edges, two at a time using bilinear
				// filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to
				// discern what value each edge has:
				float e1 = texture2D( edgesTex, coords, 0.0 ).r;

				// Find the distance to the right:
				coords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );
				d.y = coords.x;

				// We want the distances to be in pixel units (doing this here allow to
				// better interleave arithmetic and memory accesses):
				d = d / resolution.x - pixcoord.x;

				// SMAAArea below needs a sqrt, as the areas texture is compressed
				// quadratically:
				vec2 sqrt_d = sqrt( abs( d ) );

				// Fetch the right crossing edges:
				coords.y -= 1.0 * resolution.y; // WebGL port note: Added
				float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;

				// Ok, we know how this pattern looks like, now it is time for getting
				// the actual area:
				weights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );
			}

			if ( e.r > 0.0 ) { // Edge at west
				vec2 d;

				// Find the distance to the top:
				vec2 coords;

				coords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );
				coords.x = offset[ 0 ].x; // offset[1].x = texcoord.x - 0.25 * resolution.x;
				d.x = coords.y;

				// Fetch the top crossing edges:
				float e1 = texture2D( edgesTex, coords, 0.0 ).g;

				// Find the distance to the bottom:
				coords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );
				d.y = coords.y;

				// We want the distances to be in pixel units:
				d = d / resolution.y - pixcoord.y;

				// SMAAArea below needs a sqrt, as the areas texture is compressed
				// quadratically:
				vec2 sqrt_d = sqrt( abs( d ) );

				// Fetch the bottom crossing edges:
				coords.y -= 1.0 * resolution.y; // WebGL port note: Added
				float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;

				// Get the area for this direction:
				weights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );
			}

			return weights;
		}

		void main() {

			gl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );

		}`},L3={uniforms:{tDiffuse:{value:null},tColor:{value:null},resolution:{value:new _t(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 2 ];

		void SMAANeighborhoodBlendingVS( vec2 texcoord ) {
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component
		}

		void main() {

			vUv = uv;

			SMAANeighborhoodBlendingVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform sampler2D tColor;
		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 2 ];

		vec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {
			// Fetch the blending weights for current pixel:
			vec4 a;
			a.xz = texture2D( blendTex, texcoord ).xz;
			a.y = texture2D( blendTex, offset[ 1 ].zw ).g;
			a.w = texture2D( blendTex, offset[ 1 ].xy ).a;

			// Is there any blending weight with a value greater than 0.0?
			if ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {
				return texture2D( colorTex, texcoord, 0.0 );
			} else {
				// Up to 4 lines can be crossing a pixel (one through each edge). We
				// favor blending by choosing the line with the maximum weight for each
				// direction:
				vec2 offset;
				offset.x = a.a > a.b ? a.a : -a.b; // left vs. right
				offset.y = a.g > a.r ? -a.g : a.r; // top vs. bottom // WebGL port note: Changed signs

				// Then we go in the direction that has the maximum weight:
				if ( abs( offset.x ) > abs( offset.y )) { // horizontal vs. vertical
					offset.y = 0.0;
				} else {
					offset.x = 0.0;
				}

				// Fetch the opposite color and lerp by hand:
				vec4 C = texture2D( colorTex, texcoord, 0.0 );
				texcoord += sign( offset ) * resolution;
				vec4 Cop = texture2D( colorTex, texcoord, 0.0 );
				float s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );

				// WebGL port note: Added gamma correction
				C.xyz = pow(C.xyz, vec3(2.2));
				Cop.xyz = pow(Cop.xyz, vec3(2.2));
				vec4 mixed = mix(C, Cop, s);
				mixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));

				return mixed;
			}
		}

		void main() {

			gl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );

		}`};class ppt extends kv{constructor(e,t){super(),this.edgesRT=new Va(e,t,{depthBuffer:!1,type:zo}),this.edgesRT.texture.name="SMAAPass.edges",this.weightsRT=new Va(e,t,{depthBuffer:!1,type:zo}),this.weightsRT.texture.name="SMAAPass.weights";const n=this,r=new Image;r.src=this.getAreaTexture(),r.onload=function(){n.areaTexture.needsUpdate=!0},this.areaTexture=new zr,this.areaTexture.name="SMAAPass.area",this.areaTexture.image=r,this.areaTexture.minFilter=Sr,this.areaTexture.generateMipmaps=!1,this.areaTexture.flipY=!1;const s=new Image;s.src=this.getSearchTexture(),s.onload=function(){n.searchTexture.needsUpdate=!0},this.searchTexture=new zr,this.searchTexture.name="SMAAPass.search",this.searchTexture.image=s,this.searchTexture.magFilter=ki,this.searchTexture.minFilter=ki,this.searchTexture.generateMipmaps=!1,this.searchTexture.flipY=!1,this.uniformsEdges=_0.clone(Dw.uniforms),this.uniformsEdges.resolution.value.set(1/e,1/t),this.materialEdges=new $a({defines:Object.assign({},Dw.defines),uniforms:this.uniformsEdges,vertexShader:Dw.vertexShader,fragmentShader:Dw.fragmentShader}),this.uniformsWeights=_0.clone(Lw.uniforms),this.uniformsWeights.resolution.value.set(1/e,1/t),this.uniformsWeights.tDiffuse.value=this.edgesRT.texture,this.uniformsWeights.tArea.value=this.areaTexture,this.uniformsWeights.tSearch.value=this.searchTexture,this.materialWeights=new $a({defines:Object.assign({},Lw.defines),uniforms:this.uniformsWeights,vertexShader:Lw.vertexShader,fragmentShader:Lw.fragmentShader}),this.uniformsBlend=_0.clone(L3.uniforms),this.uniformsBlend.resolution.value.set(1/e,1/t),this.uniformsBlend.tDiffuse.value=this.weightsRT.texture,this.materialBlend=new $a({uniforms:this.uniformsBlend,vertexShader:L3.vertexShader,fragmentShader:L3.fragmentShader}),this.needsSwap=!1,this.fsQuad=new t2(null)}render(e,t,n){this.uniformsEdges.tDiffuse.value=n.texture,this.fsQuad.material=this.materialEdges,e.setRenderTarget(this.edgesRT),this.clear&&e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialWeights,e.setRenderTarget(this.weightsRT),this.clear&&e.clear(),this.fsQuad.render(e),this.uniformsBlend.tColor.value=n.texture,this.fsQuad.material=this.materialBlend,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}setSize(e,t){this.edgesRT.setSize(e,t),this.weightsRT.setSize(e,t),this.materialEdges.uniforms.resolution.value.set(1/e,1/t),this.materialWeights.uniforms.resolution.value.set(1/e,1/t),this.materialBlend.uniforms.resolution.value.set(1/e,1/t)}getAreaTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAIAAACOVPcQAACBeklEQVR42u39W4xlWXrnh/3WWvuciIzMrKxrV8/0rWbY0+SQFKcb4owIkSIFCjY9AC1BT/LYBozRi+EX+cV+8IMsYAaCwRcBwjzMiw2jAWtgwC8WR5Q8mDFHZLNHTarZGrLJJllt1W2qKrsumZWZcTvn7L3W54e1vrXX3vuciLPPORFR1XE2EomorB0nVuz//r71re/y/1eMvb4Cb3N11xV/PP/2v4UBAwJG/7H8urx6/25/Gf8O5hypMQ0EEEQwAqLfoN/Z+97f/SW+/NvcgQk4sGBJK6H7N4PFVL+K+e0N11yNfkKvwUdwdlUAXPHHL38oa15f/i/46Ih6SuMSPmLAYAwyRKn7dfMGH97jaMFBYCJUgotIC2YAdu+LyW9vvubxAP8kAL8H/koAuOKP3+q6+xGnd5kdYCeECnGIJViwGJMAkQKfDvB3WZxjLKGh8VSCCzhwEWBpMc5/kBbjawT4HnwJfhr+pPBIu7uu+OOTo9vsmtQcniMBGkKFd4jDWMSCRUpLjJYNJkM+IRzQ+PQvIeAMTrBS2LEiaiR9b/5PuT6Ap/AcfAFO4Y3dA3DFH7/VS+M8k4baEAQfMI4QfbVDDGIRg7GKaIY52qAjTAgTvGBAPGIIghOCYAUrGFNgzA7Q3QhgCwfwAnwe5vDejgG44o/fbm1C5ZlYQvQDARPAIQGxCWBM+wWl37ZQESb4gImexGMDouhGLx1Cst0Saa4b4AqO4Hk4gxo+3DHAV/nx27p3JziPM2pVgoiia5MdEzCGULprIN7gEEeQ5IQxEBBBQnxhsDb5auGmAAYcHMA9eAAz8PBol8/xij9+C4Djlim4gJjWcwZBhCBgMIIYxGAVIkH3ZtcBuLdtRFMWsPGoY9rN+HoBji9VBYdwD2ZQg4cnO7OSq/z4rU5KKdwVbFAjNojCQzTlCLPFSxtamwh2jMUcEgg2Wm/6XgErIBhBckQtGN3CzbVacERgCnfgLswhnvqf7QyAq/z4rRZm1YglYE3affGITaZsdIe2FmMIpnOCap25I6jt2kCwCW0D1uAD9sZctNGXcQIHCkINDQgc78aCr+zjtw3BU/ijdpw3zhCwcaONwBvdeS2YZKkJNJsMPf2JKEvC28RXxxI0ASJyzQCjCEQrO4Q7sFArEzjZhaFc4cdv+/JFdKULM4px0DfUBI2hIsy06BqLhGTQEVdbfAIZXYMPesq6VoCHICzUyjwInO4Y411//LYLs6TDa9wvg2CC2rElgAnpTBziThxaL22MYhzfkghz6GAs2VHbbdM91VZu1MEEpupMMwKyVTb5ij9+u4VJG/5EgEMMmFF01cFai3isRbKbzb+YaU/MQbAm2XSMoUPAmvZzbuKYRIFApbtlrfFuUGd6vq2hXNnH78ZLh/iFhsQG3T4D1ib7k5CC6vY0DCbtrohgLEIClXiGtl10zc0CnEGIhhatLBva7NP58Tvw0qE8yWhARLQ8h4+AhQSP+I4F5xoU+VilGRJs6wnS7ruti/4KvAY/CfdgqjsMy4pf8fodQO8/gnuX3f/3xi3om1/h7THr+co3x93PP9+FBUfbNUjcjEmhcrkT+8K7ml7V10Jo05mpIEFy1NmCJWx9SIKKt+EjAL4Ez8EBVOB6havuT/rByPvHXK+9zUcfcbb254+9fydJknYnRr1oGfdaiAgpxu1Rx/Rek8KISftx3L+DfsLWAANn8Hvw0/AFeAGO9DFV3c6D+CcWbL8Dj9e7f+T1k8AZv/d7+PXWM/Z+VvdCrIvuAKO09RpEEQJM0Ci6+B4xhTWr4cZNOvhktabw0ta0rSJmqz3Yw5/AKXwenod7cAhTmBSPKf6JBdvH8IP17h95pXqw50/+BFnj88fev4NchyaK47OPhhtI8RFSvAfDSNh0Ck0p2gLxGkib5NJj/JWCr90EWQJvwBzO4AHcgztwAFN1evHPUVGwfXON+0debT1YeGON9Yy9/63X+OguiwmhIhQhD7l4sMqlG3D86Suc3qWZ4rWjI1X7u0Ytw6x3rIMeIOPDprfe2XzNgyj6PahhBjO4C3e6puDgXrdg+/5l948vF3bqwZetZ+z9Rx9zdIY5pInPK4Nk0t+l52xdK2B45Qd87nM8fsD5EfUhIcJcERw4RdqqH7Yde5V7m1vhNmtedkz6EDzUMF/2jJYWbC+4fzzA/Y+/8PPH3j9dcBAPIRP8JLXd5BpAu03aziOL3VVHZzz3CXWDPWd+SH2AnxIqQoTZpo9Ckc6HIrFbAbzNmlcg8Ag8NFDDAhbJvTBZXbC94P7t68EXfv6o+21gUtPETU7bbkLxvNKRFG2+KXzvtObonPP4rBvsgmaKj404DlshFole1Glfh02fE7bYR7dZ82oTewIBGn1Md6CG6YUF26X376oevOLzx95vhUmgblI6LBZwTCDY7vMq0op5WVXgsObOXJ+1x3qaBl9j1FeLxbhU9w1F+Wiba6s1X/TBz1LnUfuYDi4r2C69f1f14BWfP+p+W2GFKuC9phcELMYRRLur9DEZTUdEH+iEqWdaM7X4WOoPGI+ZYD2+wcQ+y+ioHUZ9dTDbArzxmi/bJI9BND0Ynd6lBdve/butBw8+f/T9D3ABa3AG8W3VPX4hBin+bj8dMMmSpp5pg7fJ6xrBFE2WQQEWnV8Qg3FbAWzYfM1rREEnmvkN2o1+acG2d/9u68GDzx91v3mAjb1zkpqT21OipPKO0b9TO5W0nTdOmAQm0TObts3aBKgwARtoPDiCT0gHgwnbArzxmtcLc08HgF1asN0C4Ms/fvD5I+7PhfqyXE/b7RbbrGyRQRT9ARZcwAUmgdoz0ehJ9Fn7QAhUjhDAQSw0bV3T3WbNa59jzmiP6GsWbGXDX2ytjy8+f9T97fiBPq9YeLdBmyuizZHaqXITnXiMUEEVcJ7K4j3BFPurtB4bixW8wTpweL8DC95szWMOqucFYGsWbGU7p3TxxxefP+r+oTVktxY0v5hbq3KiOKYnY8ddJVSBxuMMVffNbxwIOERShst73HZ78DZrHpmJmH3K6sGz0fe3UUj0eyRrSCGTTc+rjVNoGzNSv05srAxUBh8IhqChiQgVNIIBH3AVPnrsnXQZbLTm8ammv8eVXn/vWpaTem5IXRlt+U/LA21zhSb9cye6jcOfCnOwhIAYXAMVTUNV0QhVha9xjgA27ODJbLbmitt3tRN80lqG6N/khgot4ZVlOyO4WNg3OIMzhIZQpUEHieg2im6F91hB3I2tubql6BYNN9Hj5S7G0G2tahslBWKDnOiIvuAEDzakDQKDNFQT6gbn8E2y4BBubM230YIpBnDbMa+y3dx0n1S0BtuG62lCCXwcY0F72T1VRR3t2ONcsmDjbmzNt9RFs2LO2hQNyb022JisaI8rAWuw4HI3FuAIhZdOGIcdjLJvvObqlpqvWTJnnQbyi/1M9O8UxWhBs//H42I0q1Yb/XPGONzcmm+ri172mHKvZBpHkJaNJz6v9jxqiklDj3U4CA2ugpAaYMWqNXsdXbmJNd9egCnJEsphXNM+MnK3m0FCJ5S1kmJpa3DgPVbnQnPGWIDspW9ozbcO4K/9LkfaQO2KHuqlfFXSbdNzcEcwoqNEFE9zcIXu9/6n/ym/BC/C3aJLzEKPuYVlbFnfhZ8kcWxV3dbv4bKl28566wD+8C53aw49lTABp9PWbsB+knfc/Li3eVizf5vv/xmvnPKg5ihwKEwlrcHqucuVcVOxEv8aH37E3ZqpZypUulrHEtIWKUr+txHg+ojZDGlwnqmkGlzcVi1dLiNSJiHjfbRNOPwKpx9TVdTn3K05DBx4psIk4Ei8aCkJahRgffk4YnEXe07T4H2RR1u27E6wfQsBDofUgjFUFnwC2AiVtA+05J2zpiDK2Oa0c5fmAecN1iJzmpqFZxqYBCYhFTCsUNEmUnIcZ6aEA5rQVhEywG6w7HSW02XfOoBlQmjwulOFQAg66SvJblrTEX1YtJ3uG15T/BH1OfOQeuR8g/c0gdpT5fx2SKbs9EfHTKdM8A1GaJRHLVIwhcGyydZsbifAFVKl5EMKNU2Hryo+06BeTgqnxzYjThVySDikbtJPieco75lYfKAJOMEZBTjoITuWHXXZVhcUDIS2hpiXHV9Ku4u44bN5OYLDOkJo8w+xJSMbhBRHEdEs9JZUCkQrPMAvaHyLkxgkEHxiNkx/x2YB0mGsQ8EUWj/stW5YLhtS5SMu+/YBbNPDCkGTUybN8krRLBGPlZkVOA0j+a1+rkyQKWGaPHPLZOkJhioQYnVZ2hS3zVxMtgC46KuRwbJNd9nV2PHgb36F194ecf/Yeu2vAFe5nm/bRBFrnY4BauE8ERmZRFUn0k8hbftiVYSKMEme2dJCJSCGYAlNqh87bXOPdUkGy24P6d1ll21MBqqx48Fvv8ZHH8HZFY7j/uAq1xMJUFqCSUlJPmNbIiNsmwuMs/q9CMtsZsFO6SprzCS1Z7QL8xCQClEelpjTduDMsmWD8S1PT152BtvmIGvUeDA/yRn83u/x0/4qxoPHjx+PXY9pqX9bgMvh/Nz9kpP4pOe1/fYf3axUiMdHLlPpZCNjgtNFAhcHEDxTumNONhHrBduW+vOyY++70WWnPXj98eA4kOt/mj/5E05l9+O4o8ePx67HFqyC+qSSnyselqjZGaVK2TadbFLPWAQ4NBhHqDCCV7OTpo34AlSSylPtIdd2AJZlyzYQrDJ5lcWGNceD80CunPLGGzsfD+7wRb95NevJI5docQ3tgCyr5bGnyaPRlmwNsFELViOOx9loebGNq2moDOKpHLVP5al2cymWHbkfzGXL7kfRl44H9wZy33tvt+PB/Xnf93e+nh5ZlU18wCiRUa9m7kib9LYuOk+hudQNbxwm0AQqbfloimaB2lM5fChex+ylMwuTbfmXQtmWlenZljbdXTLuOxjI/fDDHY4Hjx8/Hrse0zXfPFxbUN1kKqSCCSk50m0Ajtx3ub9XHBKHXESb8iO6E+qGytF4nO0OG3SXzbJlhxBnKtKyl0NwybjvYCD30aMdjgePHz8eu56SVTBbgxJMliQ3Oauwg0QHxXE2Ez/EIReLdQj42Gzb4CLS0YJD9xUx7bsi0vJi5mUbW1QzL0h0PFk17rtiIPfJk52MB48fPx67npJJwyrBa2RCCQRTbGZSPCxTPOiND4G2pYyOQ4h4jINIJh5wFU1NFZt+IsZ59LSnDqBjZ2awbOku+yInunLcd8VA7rNnOxkPHj9+PGY9B0MWJJNozOJmlglvDMXDEozdhQWbgs/U6oBanGzLrdSNNnZFjOkmbi5bNt1lX7JLLhn3vXAg9/h4y/Hg8ePHI9dzQMEkWCgdRfYykYKnkP7D4rIujsujaKPBsB54vE2TS00ccvFY/Tth7JXeq1hz+qgVy04sAJawTsvOknHfCwdyT062HA8eP348Zj0vdoXF4pilKa2BROed+9fyw9rWRXeTFXESMOanvDZfJuJaSXouQdMdDJZtekZcLLvEeK04d8m474UDuaenW44Hjx8/Xns9YYqZpszGWB3AN/4VHw+k7WSFtJ3Qicuqb/NlVmgXWsxh570xg2UwxUw3WfO6B5nOuO8aA7lnZxuPB48fPx6znm1i4bsfcbaptF3zNT78eFPtwi1OaCNOqp1x3zUGcs/PN++AGD1+fMXrSVm2baTtPhPahbPhA71wIHd2bXzRa69nG+3CraTtPivahV/55tXWg8fyRY/9AdsY8VbSdp8V7cKrrgdfM//z6ILQFtJ2nxHtwmuoB4/kf74+gLeRtvvMaBdeSz34+vifx0YG20jbfTa0C6+tHrwe//NmOG0L8EbSdp8R7cLrrQe/996O+ai3ujQOskpTNULa7jOjXXj99eCd8lHvoFiwsbTdZ0a78PrrwTvlo966pLuRtB2fFe3Cm6oHP9kNH/W2FryxtN1nTLvwRurBO+Kj3pWXHidtx2dFu/Bm68Fb81HvykuPlrb7LGkX3mw9eGs+6h1Y8MbSdjegXcguQLjmevDpTQLMxtJ2N6NdyBZu9AbrwVvwUW+LbteULUpCdqm0HTelXbhNPe8G68Gb8lFvVfYfSNuxvrTdTWoXbozAzdaDZzfkorOj1oxVxlIMlpSIlpLrt8D4hrQL17z+c3h6hU/wv4Q/utps4+bm+6P/hIcf0JwQ5oQGPBL0eKPTYEXTW+eL/2DKn73J9BTXYANG57hz1cEMviVf/4tf5b/6C5pTQkMIWoAq7hTpOJjtAM4pxKu5vg5vXeUrtI09/Mo/5H+4z+Mp5xULh7cEm2QbRP2tFIKR7WM3fPf/jZ3SWCqLM2l4NxID5zB72HQXv3jj/8mLR5xXNA5v8EbFQEz7PpRfl1+MB/hlAN65qgDn3wTgH13hK7T59bmP+NIx1SHHU84nLOITt3iVz8mNO+lPrjGAnBFqmioNn1mTyk1ta47R6d4MrX7tjrnjYUpdUbv2rVr6YpVfsGG58AG8Ah9eyUN8CX4WfgV+G8LVWPDGb+Zd4cU584CtqSbMKxauxTg+dyn/LkVgA+IR8KHtejeFKRtTmLLpxN6mYVLjYxwXf5x2VofiZcp/lwKk4wGOpYDnoIZPdg/AAbwMfx0+ge9dgZvYjuqKe4HnGnykYo5TvJbG0Vj12JagRhwKa44H95ShkZa5RyLGGdfYvG7aw1TsF6iapPAS29mNS3NmsTQZCmgTzFwgL3upCTgtBTRwvGMAKrgLn4evwin8+afJRcff+8izUGUM63GOOuAs3tJkw7J4kyoNreqrpO6cYLQeFUd7TTpr5YOTLc9RUUogUOVJQ1GYJaFLAW0oTmKyYS46ZooP4S4EON3xQ5zC8/CX4CnM4c1PE8ApexpoYuzqlP3d4S3OJP8ZDK7cKWNaTlqmgDiiHwl1YsE41w1zT4iRTm3DBqxvOUsbMKKDa/EHxagtnta072ejc3DOIh5ojvh8l3tk1JF/AV6FU6jh3U8HwEazLgdCLYSQ+MYiAI2ltomkzttUb0gGHdSUUgsIYjTzLG3mObX4FBRaYtpDVNZrih9TgTeYOBxsEnN1gOCTM8Bsw/ieMc75w9kuAT6A+/AiHGvN/+Gn4KRkiuzpNNDYhDGFndWRpE6SVfm8U5bxnSgVV2jrg6JCKmneqey8VMFgq2+AM/i4L4RUbfSi27lNXZ7R7W9RTcq/q9fk4Xw3AMQd4I5ifAZz8FcVtm9SAom/dyN4lczJQW/kC42ZrHgcCoIf1oVMKkVItmMBi9cOeNHGLqOZk+QqQmrbc5YmYgxELUUN35z2iohstgfLIFmcMV7s4CFmI74L9+EFmGsi+tGnAOD4Yk9gIpo01Y4cA43BWGygMdr4YZekG3OBIUXXNukvJS8tqa06e+lSDCtnqqMFu6hWHXCF+WaYt64m9QBmNxi7Ioy7D+fa1yHw+FMAcPt7SysFLtoG4PXAk7JOA3aAxBRqUiAdU9Yp5lK3HLSRFtOim0sa8euEt08xvKjYjzeJ2GU7YawexrnKI9tmobInjFXCewpwriY9+RR4aaezFhMhGCppKwom0ChrgFlKzyPKkGlTW1YQrE9HJqu8hKGgMc6hVi5QRq0PZxNfrYNgE64utmRv6KKHRpxf6VDUaOvNP5jCEx5q185My/7RKz69UQu2im5k4/eownpxZxNLwiZ1AZTO2ZjWjkU9uaB2HFn6Q3u0JcsSx/qV9hTEApRzeBLDJQXxYmTnq7bdLa3+uqFrxLJ5w1TehnNHx5ECvCh2g2c3hHH5YsfdaSKddztfjQ6imKFGSyFwlLzxEGPp6r5IevVjk1AMx3wMqi1NxDVjLBiPs9tbsCkIY5we5/ML22zrCScFxnNtzsr9Wcc3CnD+pYO+4VXXiDE0oc/vQQ/fDK3oPESJMYXNmJa/DuloJZkcTpcYE8lIH8Dz8DJMiynNC86Mb2lNaaqP/+L7f2fcE/yP7/Lde8xfgSOdMxvOixZf/9p3+M4hT1+F+zApxg9XfUvYjc8qX2lfOOpK2gNRtB4flpFu9FTKCp2XJRgXnX6olp1zyYjTKJSkGmLE2NjUr1bxFM4AeAAHBUFIeSLqXR+NvH/M9fOnfHzOD2vCSyQJKzfgsCh+yi/Mmc35F2fUrw7miW33W9hBD1vpuUojFphIyvg7aTeoymDkIkeW3XLHmguMzbIAJejN6B5MDrhipE2y6SoFRO/AK/AcHHZHNIfiWrEe/C6cr3f/yOvrQKB+zMM55/GQdLDsR+ifr5Fiuu+/y+M78LzOE5dsNuXC3PYvYWd8NXvphLSkJIasrlD2/HOqQ+RjcRdjKTGWYhhVUm4yxlyiGPuMsZR7sMCHUBeTuNWA7if+ifXgc/hovftHXs/DV+Fvwe+f8shzMiMcweFgBly3//vwJfg5AN4450fn1Hd1Rm1aBLu22Dy3y3H2+OqMemkbGZ4jozcDjJf6596xOLpC0eMTHbKnxLxH27uZ/bMTGs2jOaMOY4m87CfQwF0dw53oa1k80JRuz/XgS+8fX3N9Af4qPIMfzKgCp4H5TDGe9GGeFPzSsZz80SlPTxXjgwJmC45njzgt2vbQ4b4OAdUK4/vWhO8d8v6EE8fMUsfakXbPpFJeLs2ubM/qdm/la3WP91uWhxXHjoWhyRUq2iJ/+5mA73zwIIo+LoZ/SgvIRjAd1IMvvn98PfgOvAJfhhm8scAKVWDuaRaK8aQ9f7vuPDH6Bj47ZXau7rqYJ66mTDwEDU6lLbCjCK0qTXyl5mnDoeNRxanj3FJbaksTk0faXxHxLrssgPkWB9LnA/MFleXcJozzjwsUvUG0X/QCve51qkMDXp9mtcyOy3rwBfdvVJK7D6/ACSzg3RoruIq5UDeESfEmVclDxnniU82vxMLtceD0hGZWzBNPMM/jSPne2OVatiTKUpY5vY7gc0LdUAWeWM5tH+O2I66AOWw9xT2BuyRVLGdoDHUsVRXOo/c+ZdRXvFfnxWyIV4upFLCl9eAL7h8Zv0QH8Ry8pA2cHzQpGesctVA37ZtklBTgHjyvdSeKY/RZw/kJMk0Y25cSNRWSigQtlULPTw+kzuJPeYEkXjQRpoGZobYsLF79pyd1dMRHInbgFTZqNLhDqiIsTNpoex2WLcy0/X6rHcdMMQvFSd5dWA++4P7xv89deACnmr36uGlL69bRCL6BSZsS6c0TU2TKK5gtWCzgAOOwQcurqk9j8whvziZSMLcq5hbuwBEsYjopUBkqw1yYBGpLA97SRElEmx5MCInBY5vgLk94iKqSWmhIGmkJ4Bi9m4L645J68LyY4wsFYBfUg5feP/6gWWm58IEmKQM89hq7KsZNaKtP5TxxrUZZVkNmMJtjbKrGxLNEbHPJxhqy7lAmbC32ZqeF6lTaknRWcYaFpfLUBh/rwaQycCCJmW15Kstv6jRHyJFry2C1ahkkIW0LO75s61+owxK1y3XqweX9m5YLM2DPFeOjn/iiqCKJ+yKXF8t5Yl/kNsqaSCryxPq5xWTFIaP8KSW0RYxqupaUf0RcTNSSdJZGcKYdYA6kdtrtmyBckfKXwqk0pHpUHlwWaffjNRBYFPUDWa8e3Lt/o0R0CdisKDM89cX0pvRHEfM8ca4t0s2Xx4kgo91MPQJ/0c9MQYq0co8MBh7bz1fio0UUHLR4aAIOvOmoYO6kwlEVODSSTliWtOtH6sPkrtctF9ZtJ9GIerBskvhdVS5cFNv9s1BU0AbdUgdK4FG+dRnjFmDTzniRMdZO1QhzMK355vigbdkpz9P6qjUGE5J2qAcXmwJ20cZUiAD0z+pGMx6xkzJkmEf40Hr4qZfVg2XzF9YOyoV5BjzVkUJngKf8lgNYwKECEHrCNDrWZzMlflS3yBhr/InyoUgBc/lKT4pxVrrC6g1YwcceK3BmNxZcAtz3j5EIpqguh9H6wc011YN75cKDLpFDxuwkrPQmUwW4KTbj9mZTwBwLq4aQMUZbHm1rylJ46dzR0dua2n3RYCWZsiHROeywyJGR7mXKlpryyCiouY56sFkBWEnkEB/raeh/Sw4162KeuAxMQpEkzy5alMY5wamMsWKKrtW2WpEWNnReZWONKWjrdsKZarpFjqCslq773PLmEhM448Pc3+FKr1+94vv/rfw4tEcu+lKTBe4kZSdijBrykwv9vbCMPcLQTygBjzVckSLPRVGslqdunwJ4oegtFOYb4SwxNgWLCmD7T9kVjTv5YDgpo0XBmN34Z/rEHp0sgyz7lngsrm4lvMm2Mr1zNOJYJ5cuxuQxwMGJq/TP5emlb8fsQBZviK4t8hFL+zbhtlpwaRSxQRWfeETjuauPsdGxsBVdO7nmP4xvzSoT29pRl7kGqz+k26B3Oy0YNV+SXbbQas1ctC/GarskRdFpKczVAF1ZXnLcpaMuzVe6lZ2g/1ndcvOVgRG3sdUAY1bKD6achijMPdMxV4muKVorSpiDHituH7rSTs7n/4y5DhRXo4FVBN4vO/zbAcxhENzGbHCzU/98Mcx5e7a31kWjw9FCe/zNeYyQjZsWb1uc7U33pN4Mji6hCLhivqfa9Ss6xLg031AgfesA/l99m9fgvnaF9JoE6bYKmkGNK3aPbHB96w3+DnxFm4hs0drLsk7U8kf/N/CvwQNtllna0rjq61sH8L80HAuvwH1tvBy2ChqWSCaYTaGN19sTvlfzFD6n+iKTbvtayfrfe9ueWh6GJFoxLdr7V72a5ZpvHcCPDzma0wTO4EgbLyedxstO81n57LYBOBzyfsOhUKsW1J1BB5vr/tz8RyqOFylQP9Tvst2JALsC5lsH8PyQ40DV4ANzYa4dedNiKNR1s+x2wwbR7q4/4cTxqEk4LWDebfisuo36JXLiWFjOtLrlNWh3K1rRS4xvHcDNlFnNmWBBAl5SWaL3oPOfnvbr5pdjVnEaeBJSYjuLEkyLLsWhKccadmOphZkOPgVdalj2QpSmfOsADhMWE2ZBu4+EEJI4wKTAuCoC4xwQbWXBltpxbjkXJtKxxabo9e7tyhlgb6gNlSbUpMh+l/FaqzVwewGu8BW1Zx7pTpQDJUjb8tsUTW6+GDXbMn3mLbXlXJiGdggxFAoUrtPS3wE4Nk02UZG2OOzlk7fRs7i95QCLo3E0jtrjnM7SR3uS1p4qtS2nJ5OwtQVHgOvArLBFijZUV9QtSl8dAY5d0E0hM0w3HS2DpIeB6m/A1+HfhJcGUq4sOxH+x3f5+VO+Ds9rYNI7zPXOYWPrtf8bYMx6fuOAX5jzNR0PdsuON+X1f7EERxMJJoU6GkTEWBvVolVlb5lh3tKCg6Wx1IbaMDdJ+9sUCc5KC46hKGCk3IVOS4TCqdBNfUs7Kd4iXf2RjnT/LLysJy3XDcHLh/vde3x8DoGvwgsa67vBk91G5Pe/HbOe7xwym0NXbtiuuDkGO2IJDh9oQvJ4cY4vdoqLDuoH9Zl2F/ofsekn8lkuhIlhQcffUtSjytFyp++p6NiE7Rqx/lodgKVoceEp/CP4FfjrquZaTtj2AvH5K/ywpn7M34K/SsoYDAdIN448I1/0/wveW289T1/lX5xBzc8N5IaHr0XMOQdHsIkDuJFifj20pBm5jzwUv9e2FhwRsvhAbalCIuIw3bhJihY3p6nTFFIZgiSYjfTf3aXuOjmeGn4bPoGvwl+CFzTRczBIuHBEeImHc37/lGfwZR0cXzVDOvaKfNHvwe+suZ771K/y/XcBlsoN996JpBhoE2toYxOznNEOS5TJc6Id5GEXLjrWo+LEWGNpPDU4WAwsIRROu+1vM+0oW37z/MBN9kqHnSArwPfgFJ7Cq/Ai3Ie7g7ncmI09v8sjzw9mzOAEXoIHxURueaAce5V80f/DOuuZwHM8vsMb5wBzOFWM7wymTXPAEvm4vcFpZ2ut0VZRjkiP2MlmLd6DIpbGSiHOjdnUHN90hRYmhTnmvhzp1iKDNj+b7t5hi79lWGwQ+HN9RsfFMy0FXbEwhfuczKgCbyxYwBmcFhhvo/7a44v+i3XWcwDP86PzpGQYdWh7csP5dBvZ1jNzdxC8pBGuxqSW5vw40nBpj5JhMwvOzN0RWqERHMr4Lv1kWX84xLR830G3j6yqZ1a8UstTlW+qJPOZ+sZ7xZPKTJLhiNOAFd6tk+jrTH31ncLOxid8+nzRb128HhUcru/y0Wn6iT254YPC6FtVSIMoW2sk727AhvTtrWKZTvgsmckfXYZWeNRXx/3YQ2OUxLDrbHtN11IwrgXT6c8dATDwLniYwxzO4RzuQqTKSC5gAofMZ1QBK3zQ4JWobFbcvJm87FK+6JXrKahLn54m3p+McXzzYtP8VF/QpJuh1OwieElEoI1pRxPS09FBrkq2tWCU59+HdhNtTIqKm8EBrw2RTOEDpG3IKo2Y7mFdLm3ZeVjYwVw11o/oznceMve4CgMfNym/utA/d/ILMR7gpXzRy9eDsgLcgbs8O2Va1L0zzIdwGGemTBuwROHeoMShkUc7P+ISY3KH5ZZeWqO8mFTxQYeXTNuzvvK5FGPdQfuu00DwYFY9dyhctEt+OJDdnucfpmyhzUJzfsJjr29l8S0bXBfwRS9ZT26tmMIdZucch5ZboMz3Nio3nIOsYHCGoDT4kUA9MiXEp9Xsui1S8th/kbWIrMBxDGLodWUQIWcvnXy+9M23xPiSMOiRPqM+YMXkUN3gXFrZJwXGzUaMpJfyRS9ZT0lPe8TpScuRlbMHeUmlaKDoNuy62iWNTWNFYjoxFzuJs8oR+RhRx7O4SVNSXpa0ZJQ0K1LAHDQ+D9IepkMXpcsq5EVCvClBUIzDhDoyKwDw1Lc59GbTeORivugw1IcuaEOaGWdNm+Ps5fQ7/tm0DjMegq3yM3vb5j12qUId5UZD2oxDSEWOZMSqFl/W+5oynWDa/aI04tJRQ2eTXusg86SQVu/nwSYwpW6wLjlqIzwLuxGIvoAvul0PS+ZNz0/akp/pniO/8JDnGyaCkzbhl6YcqmK/69prxPqtpx2+Km9al9sjL+rwMgHw4jE/C8/HQ3m1vBuL1fldbzd8mOueVJ92syqdEY4KJjSCde3mcRw2TA6szxedn+zwhZMps0XrqEsiUjnC1hw0TELC2Ek7uAAdzcheXv1BYLagspxpzSAoZZUsIzIq35MnFQ9DOrlNB30jq3L4pkhccKUAA8/ocvN1Rzx9QyOtERs4CVsJRK/DF71kPYrxYsGsm6RMh4cps5g1DOmM54Ly1ii0Hd3Y/BMk8VWFgBVmhqrkJCPBHAolwZaWzLR9Vb7bcWdX9NyUYE+uB2BKfuaeBUcjDljbYVY4DdtsVWvzRZdWnyUzDpjNl1Du3aloAjVJTNDpcIOVVhrHFF66lLfJL1zJr9PQ2nFJSBaKoDe+sAvLufZVHVzYh7W0h/c6AAZ+7Tvj6q9j68G/cTCS/3n1vLKHZwNi+P+pS0WkZNMBMUl+LDLuiE4omZy71r3UFMwNJV+VJ/GC5ixVUkBStsT4gGKh0Gm4Oy3qvq7Lbmq24nPdDuDR9deR11XzP4vFu3TYzfnIyiSVmgizUYGqkIXNdKTY9pgb9D2Ix5t0+NHkVzCdU03suWkkVZAoCONCn0T35gAeW38de43mf97sMOpSvj4aa1KYUm58USI7Wxxes03bAZdRzk6UtbzMaCQ6IxO0dy7X+XsjoD16hpsBeGz9dfzHj+R/Hp8nCxZRqkEDTaCKCSywjiaoMJ1TITE9eg7Jqnq8HL6gDwiZb0u0V0Rr/rmvqjxKuaLCX7ZWXTvAY+uvm3z8CP7nzVpngqrJpZKwWnCUjIviYVlirlGOzPLI3SMVyp/elvBUjjDkNhrtufFFErQ8pmdSlbK16toBHlt/HV8uHMX/vEGALkV3RJREiSlopxwdMXOZPLZ+ix+kAHpMKIk8UtE1ygtquttwxNhphrIZ1IBzjGF3IIGxGcBj6q8bHJBG8T9vdsoWrTFEuebEZuVxhhClH6P5Zo89OG9fwHNjtNQTpD0TG9PJLEYqvEY6Rlxy+ZZGfL0Aj62/bnQCXp//eeM4KzfQVJbgMQbUjlMFIm6TpcfWlZje7NBSV6IsEVmumWIbjiloUzQX9OzYdo8L1wjw2PrrpimONfmfNyzKklrgnEkSzT5QWYQW40YShyzqsRmMXbvVxKtGuYyMKaU1ugenLDm5Ily4iT14fP11Mx+xJv+zZ3MvnfdFqxU3a1W/FTB4m3Qfsyc1XUcdVhDeUDZXSFHHLQj/Y5jtC7ZqM0CXGwB4bP11i3LhOvzPGygYtiUBiwQV/4wFO0majijGsafHyRLu0yG6q35cL1rOpVxr2s5cM2jJYMCdc10Aj6q/blRpWJ//+dmm5psMl0KA2+AFRx9jMe2WbC4jQxnikd4DU8TwUjRVacgdlhmr3bpddzuJ9zXqr2xnxJfzP29RexdtjDVZqzkqa6PyvcojGrfkXiJ8SEtml/nYskicv0ivlxbqjemwUjMw5evdg8fUX9nOiC/lf94Q2i7MURk9nW1MSj5j8eAyV6y5CN2S6qbnw3vdA1Iwq+XOSCl663udN3IzLnrt+us25cI1+Z83SXQUldqQq0b5XOT17bGpLd6ssN1VMPf8c+jG8L3NeCnMdF+Ra3fRa9dft39/LuZ/3vwHoHrqGmQFafmiQw6eyzMxS05K4bL9uA+SKUQzCnSDkqOGokXyJvbgJ/BHI+qvY69//4rl20NsmK2ou2dTsyIALv/91/8n3P2Aao71WFGi8KKv1fRC5+J67Q/507/E/SOshqN5TsmYIjVt+kcjAx98iz/4SaojbIV1rexE7/C29HcYD/DX4a0rBOF5VTu7omsb11L/AWcVlcVZHSsqGuXLLp9ha8I//w3Mv+T4Ew7nTBsmgapoCrNFObIcN4pf/Ob/mrvHTGqqgAupL8qWjWPS9m/31jAe4DjA+4+uCoQoT/zOzlrNd3qd4SdphFxsUvYwGWbTWtISc3wNOWH+kHBMfc6kpmpwPgHWwqaSUG2ZWWheYOGQGaHB+eQ/kn6b3pOgLV+ODSn94wDvr8Bvb70/LLuiPPEr8OGVWfDmr45PZyccEmsVXZGe1pRNX9SU5+AVQkNTIVPCHF/jGmyDC9j4R9LfWcQvfiETmgMMUCMN1uNCakkweZsowdYobiMSlnKA93u7NzTXlSfe+SVbfnPQXmg9LpYAQxpwEtONyEyaueWM4FPjjyjG3uOaFmBTWDNgBXGEiQpsaWhnAqIijB07Dlsy3fUGeP989xbWkyf+FF2SNEtT1E0f4DYYVlxFlbaSMPIRMk/3iMU5pME2SIWJvjckciebkQuIRRyhUvkHg/iUljG5kzVog5hV7vIlCuBrmlhvgPfNHQM8lCf+FEGsYbMIBC0qC9a0uuy2wLXVbLBaP5kjHokCRxapkQyzI4QEcwgYHRZBp+XEFTqXFuNVzMtjXLJgX4gAid24Hjwc4N3dtVSe+NNiwTrzH4WVUOlDobUqr1FuAgYllc8pmzoVrELRHSIW8ViPxNy4xwjBpyR55I6J220qQTZYR4guvUICJiSpr9gFFle4RcF/OMB7BRiX8sSfhpNSO3lvEZCQfLUVTKT78Ek1LRLhWN+yLyTnp8qWUZ46b6vxdRGXfHVqx3eI75YaLa4iNNiK4NOW7wPW6lhbSOF9/M9qw8e/aoB3d156qTzxp8pXx5BKAsYSTOIIiPkp68GmTq7sZtvyzBQaRLNxIZ+paozHWoLFeExIhRBrWitHCAHrCF7/thhD8JhYz84wg93QRV88wLuLY8zF8sQ36qF1J455bOlgnELfshKVxYOXKVuKx0jaj22sczTQqPqtV/XDgpswmGTWWMSDw3ssyUunLLrVPGjYRsH5ggHeHSWiV8kT33ycFSfMgkoOK8apCye0J6VW6GOYvffgU9RWsukEi2kUV2nl4dOYUzRik9p7bcA4ggdJ53LxKcEe17B1R8eqAd7dOepV8sTXf5lhejoL85hUdhDdknPtKHFhljOT+bdq0hxbm35p2nc8+Ja1Iw+tJykgp0EWuAAZYwMVwac5KzYMslhvgHdHRrxKnvhTYcfKsxTxtTETkjHO7rr3zjoV25lAQHrqpV7bTiy2aXMmUhTBnKS91jhtR3GEoF0oLnWhWNnYgtcc4N0FxlcgT7yz3TgNIKkscx9jtV1ZKpWW+Ub1tc1eOv5ucdgpx+FJy9pgbLE7xDyXb/f+hLHVGeitHOi6A7ybo3sF8sS7w7cgdk0nJaOn3hLj3uyD0Zp5pazFIUXUpuTTU18d1EPkDoX8SkmWTnVIozEdbTcZjoqxhNHf1JrSS/AcvHjZ/SMHhL/7i5z+POsTUh/8BvNfYMTA8n+yU/MlTZxSJDRStqvEuLQKWwDctMTQogUDyQRoTQG5Kc6oQRE1yV1jCA7ri7jdZyK0sYTRjCR0Hnnd+y7nHxNgTULqw+8wj0mQKxpYvhjm9uSUxg+TTy7s2GtLUGcywhXSKZN275GsqlclX90J6bRI1aouxmgL7Q0Nen5ziM80SqMIo8cSOo+8XplT/5DHNWsSUr/6lLN/QQ3rDyzLruEW5enpf7KqZoShEduuSFOV7DLX7Ye+GmXb6/hnNNqKsVXuMDFpb9Y9eH3C6NGEzuOuI3gpMH/I6e+zDiH1fXi15t3vA1czsLws0TGEtmPEJdiiFPwlwKbgLHAFk4P6ZyPdymYYHGE0dutsChQBl2JcBFlrEkY/N5bQeXQ18gjunuMfMfsBlxJSx3niO485fwO4fGD5T/+3fPQqkneWVdwnw/3bMPkW9Wbqg+iC765Zk+xcT98ibKZc2EdgHcLoF8cSOo/Oc8fS+OyEULF4g4sJqXVcmfMfsc7A8v1/yfGXmL9I6Fn5pRwZhsPv0TxFNlAfZCvG+Oohi82UC5f/2IsJo0cTOm9YrDoKhFPEUr/LBYTUNht9zelHXDqwfPCIw4owp3mOcIQcLttWXFe3VZ/j5H3cIc0G6oPbCR+6Y2xF2EC5cGUm6wKC5tGEzhsWqw5hNidUiKX5gFWE1GXh4/Qplw4sVzOmx9QxU78g3EF6wnZlEN4FzJ1QPSLEZz1KfXC7vd8ssGdIbNUYpVx4UapyFUHzJoTOo1McSkeNn1M5MDQfs4qQuhhX5vQZFw8suwWTcyYTgioISk2YdmkhehG4PkE7w51inyAGGaU+uCXADabGzJR1fn3lwkty0asIo8cROm9Vy1g0yDxxtPvHDAmpu+PKnM8Ix1wwsGw91YJqhteaWgjYBmmQiebmSpwKKzE19hx7jkzSWOm66oPbzZ8Yj6kxVSpYjVAuvLzYMCRo3oTQecOOjjgi3NQ4l9K5/hOGhNTdcWVOTrlgYNkEXINbpCkBRyqhp+LdRB3g0OU6rMfW2HPCFFMV9nSp+uB2woepdbLBuJQyaw/ZFysXrlXwHxI0b0LovEkiOpXGA1Ijagf+KUNC6rKNa9bQnLFqYNkEnMc1uJrg2u64ELPBHpkgWbmwKpJoDhMwNbbGzAp7Yg31wS2T5rGtzit59PrKhesWG550CZpHEzpv2NGRaxlNjbMqpmEIzygJqQfjypycs2pg2cS2RY9r8HUqkqdEgKTWtWTKoRvOBPDYBltja2SO0RGjy9UHtxwRjA11ujbKF+ti5cIR9eCnxUg6owidtyoU5tK4NLji5Q3HCtiyF2IqLGYsHViOXTXOYxucDqG0HyttqYAKqYo3KTY1ekyDXRAm2AWh9JmsVh/ccg9WJ2E8YjG201sPq5ULxxX8n3XLXuMInbft2mk80rRGjCGctJ8/GFdmEQ9Ug4FlE1ll1Y7jtiraqm5Fe04VV8lvSVBL8hiPrfFVd8+7QH3Qbu2ipTVi8cvSGivc9cj8yvH11YMHdNSERtuOslM97feYFOPKzGcsI4zW0YGAbTAOaxCnxdfiYUmVWslxiIblCeAYr9VYR1gM7GmoPrilunSxxeT3DN/2eBQ9H11+nk1adn6VK71+5+Jfct4/el10/7KBZfNryUunWSCPxPECk1rdOv1WVSrQmpC+Tl46YD3ikQYcpunSQgzVB2VHFhxHVGKDgMEY5GLlQnP7FMDzw7IacAWnO6sBr12u+XanW2AO0wQ8pknnFhsL7KYIqhkEPmEXFkwaN5KQphbkUmG72wgw7WSm9RiL9QT925hkjiVIIhphFS9HKI6/8QAjlpXqg9W2C0apyaVDwKQwrwLY3j6ADR13ZyUNByQXHQu6RY09Hu6zMqXRaNZGS/KEJs0cJEe9VH1QdvBSJv9h09eiRmy0V2uJcqHcShcdvbSNg5fxkenkVprXM9rDVnX24/y9MVtncvbKY706anNl3ASll9a43UiacVquXGhvq4s2FP62NGKfQLIQYu9q1WmdMfmUrDGt8eDS0cXozH/fjmUH6Jruvm50hBDSaEU/2Ru2LEN/dl006TSc/g7tfJERxGMsgDUEr104pfWH9lQaN+M4KWQjwZbVc2rZVNHsyHal23wZtIs2JJqtIc/WLXXRFCpJkfE9jvWlfFbsNQ9pP5ZBS0zKh4R0aMFj1IjTcTnvi0Zz2rt7NdvQb2mgbju1plsH8MmbnEk7KbK0b+wC2iy3aX3szW8xeZvDwET6hWZYwqTXSSG+wMETKum0Dq/q+x62gt2ua2ppAo309TRk9TPazfV3qL9H8z7uhGqGqxNVg/FKx0HBl9OVUORn8Q8Jx9gFttGQUDr3tzcXX9xGgN0EpzN9mdZ3GATtPhL+CjxFDmkeEU6x56kqZRusLzALXVqkCN7zMEcqwjmywDQ6OhyUe0Xao1Qpyncrg6wKp9XfWDsaZplElvQ/b3sdweeghorwBDlHzgk1JmMc/wiERICVy2VJFdMjFuLQSp3S0W3+sngt2njwNgLssFGVQdJ0tu0KH4ky1LW4yrbkuaA6Iy9oz/qEMMXMMDWyIHhsAyFZc2peV9hc7kiKvfULxCl9iddfRK1f8kk9qvbdOoBtOg7ZkOZ5MsGrSHsokgLXUp9y88smniwWyuFSIRVmjplga3yD8Uij5QS1ZiM4U3Qw5QlSm2bXjFe6jzzBFtpg+/YBbLAWG7OPynNjlCw65fukGNdkJRf7yM1fOxVzbxOJVocFoYIaGwH22mIQkrvu1E2nGuebxIgW9U9TSiukPGU+Lt++c3DJPKhyhEEbXCQLUpae2exiKy6tMPe9mDRBFCEMTWrtwxN8qvuGnt6MoihKWS5NSyBhbH8StXoAz8PLOrRgLtOT/+4vcu+7vDLnqNvztOq7fmd8sMmY9Xzn1zj8Dq8+XVdu2Nv0IIySgEdQo3xVHps3Q5i3fLFsV4aiqzAiBhbgMDEd1uh8qZZ+lwhjkgokkOIv4xNJmyncdfUUzgB4oFMBtiu71Xumpz/P+cfUP+SlwFExwWW62r7b+LSPxqxn/gvMZ5z9C16t15UbNlq+jbGJtco7p8wbYlL4alSyfWdeuu0j7JA3JFNuVAwtst7F7FhWBbPFNKIUORndWtLraFLmMu7KFVDDOzqkeaiN33YAW/r76wR4XDN/yN1z7hejPau06EddkS/6XThfcz1fI/4K736fO48vlxt2PXJYFaeUkFS8U15XE3428xdtn2kc8GQlf1vkIaNRRnOMvLTWrZbElEHeLWi1o0dlKPAh1MVgbbVquPJ5+Cr8LU5/H/+I2QlHIU2ClXM9G8v7Rr7oc/hozfUUgsPnb3D+I+7WF8kNO92GY0SNvuxiE+2Bt8prVJTkzE64sfOstxuwfxUUoyk8VjcTlsqe2qITSFoSj6Epd4KsT6BZOWmtgE3hBfir8IzZDwgV4ZTZvD8VvPHERo8v+vL1DASHTz/i9OlKueHDjK5Rnx/JB1Vb1ioXdBra16dmt7dgik10yA/FwJSVY6XjA3oy4SqM2frqDPPSRMex9qs3XQtoWxMj7/Er8GWYsXgjaVz4OYumP2+9kbxvny/6kvWsEBw+fcb5bInc8APdhpOSs01tEqIkoiZjbAqKMruLbJYddHuHFRIyJcbdEdbl2sVLaySygunutBg96Y2/JjKRCdyHV+AEFtTvIpbKIXOamknYSiB6KV/0JetZITgcjjk5ZdaskBtWO86UF0ap6ozGXJk2WNiRUlCPFir66lzdm/SLSuK7EUdPz8f1z29Skq6F1fXg8+5UVR6bszncP4Tn4KUkkdJ8UFCY1zR1i8RmL/qQL3rlei4THG7OODlnKko4oI01kd3CaM08Ia18kC3GNoVaO9iDh+hWxSyTXFABXoau7Q6q9OxYg/OVEMw6jdbtSrJ9cBcewGmaZmg+bvkUnUUaGr+ZfnMH45Ivevl61hMcXsxYLFTu1hTm2zViCp7u0o5l+2PSUh9bDj6FgYypufBDhqK2+oXkiuHFHR3zfj+9PtA8oR0xnqX8qn+sx3bFODSbbF0X8EUvWQ8jBIcjo5bRmLOljDNtcqNtOe756h3l0VhKa9hDd2l1eqmsnh0MNMT/Cqnx6BInumhLT8luljzQ53RiJeA/0dxe5NK0o2fA1+GLXr6eNQWHNUOJssQaTRlGpLHKL9fD+IrQzTOMZS9fNQD4AnRNVxvTdjC+fJdcDDWQcyB00B0t9BDwTxXgaAfzDZ/DBXzRnfWMFRwuNqocOmX6OKNkY63h5n/fFcB28McVHqnXZVI27K0i4rDLNE9lDKV/rT+udVbD8dFFu2GGZ8mOt0kAXcoX3ZkIWVtw+MNf5NjR2FbivROHmhV1/pj2egv/fMGIOWTIWrV3Av8N9imV9IWml36H6cUjqEWNv9aNc+veb2sH46PRaHSuMBxvtW+twxctq0z+QsHhux8Q7rCY4Ct8lqsx7c6Sy0dl5T89rIeEuZKoVctIk1hNpfavER6yyH1Vvm3MbsUHy4ab4hWr/OZPcsRBphnaV65/ZcdYPNNwsjN/djlf9NqCw9U5ExCPcdhKxUgLSmfROpLp4WSUr8ojdwbncbvCf+a/YzRaEc6QOvXcGO256TXc5Lab9POvB+AWY7PigWYjzhifbovuunzRawsO24ZqQQAqguBtmpmPB7ysXJfyDDaV/aPGillgz1MdQg4u5MYaEtBNNHFjkRlSpd65lp4hd2AVPTfbV7FGpyIOfmNc/XVsPfg7vzaS/3nkvLL593ANLvMuRMGpQIhiF7kUEW9QDpAUbTWYBcbp4WpacHHY1aacqQyjGZS9HI3yCBT9kUZJhVOD+zUDvEH9ddR11fzPcTDQ5TlgB0KwqdXSavk9BC0pKp0WmcuowSw07VXmXC5guzSa4p0UvRw2lbDiYUx0ExJJRzWzi6Gm8cnEkfXXsdcG/M/jAJa0+bmCgdmQ9CYlNlSYZOKixmRsgiFxkrmW4l3KdFKv1DM8tk6WxPYJZhUUzcd8Kdtgrw/gkfXXDT7+avmfVak32qhtkg6NVdUS5wgkru1YzIkSduTW1FDwVWV3JQVJVuieTc0y4iDpFwc7/BvSalvKdQM8sv662cevz/+8sQVnjVAT0W2wLllw1JiMhJRxgDjCjLQsOzSFSgZqx7lAW1JW0e03yAD3asC+GD3NbQhbe+mN5GXH1F83KDOM4n/e5JIuH4NpdQARrFPBVptUNcjj4cVMcFSRTE2NpR1LEYbYMmfWpXgP9KejaPsLUhuvLCsVXznAG9dfx9SR1ud/3hZdCLHb1GMdPqRJgqDmm76mHbvOXDtiO2QPUcKo/TWkQ0i2JFXpBoo7vij1i1Lp3ADAo+qvG3V0rM//vFnnTE4hxd5Ka/Cor5YEdsLVJyKtDgVoHgtW11pWSjolPNMnrlrVj9Fv2Qn60twMwKPqr+N/wvr8z5tZcDsDrv06tkqyzESM85Ycv6XBWA2birlNCXrI6VbD2lx2L0vQO0QVTVVLH4SE67fgsfVXv8n7sz7/85Z7cMtbE6f088wSaR4kCkCm10s6pKbJhfqiUNGLq+0gLWC6eUAZFPnLjwqtKd8EwGvWX59t7iPW4X/eAN1svgRVSY990YZg06BD1ohLMtyFTI4pKTJsS9xREq9EOaPWiO2gpms7397x6nQJkbh+Fz2q/rqRROX6/M8bJrqlVW4l6JEptKeUFuMYUbtCQ7CIttpGc6MY93x1r1vgAnRXvY5cvwWPqb9uWQm+lP95QxdNMeWhOq1x0Db55C7GcUv2ZUuN6n8iKzsvOxibC//Yfs9Na8r2Rlz02vXXDT57FP/zJi66/EJSmsJKa8QxnoqW3VLQ+jZVUtJwJ8PNX1NQCwfNgdhhHD9on7PdRdrdGPF28rJr1F+3LBdeyv+8yYfLoMYet1vX4upNAjVvwOUWnlNXJXlkzk5Il6kqeoiL0C07qno+/CYBXq/+utlnsz7/Mzvy0tmI4zm4ag23PRN3t/CWryoUVJGm+5+K8RJ0V8Hc88/XHUX/HfiAq7t+BH+x6v8t438enWmdJwFA6ZINriLGKv/95f8lT9/FnyA1NMVEvQyaXuu+gz36f/DD73E4pwqpLcvm/o0Vle78n//+L/NPvoefp1pTJye6e4A/D082FERa5/opeH9zpvh13cNm19/4v/LDe5xMWTi8I0Ta0qKlK27AS/v3/r+/x/2GO9K2c7kVMonDpq7//jc5PKCxeNPpFVzaRr01wF8C4Pu76hXuX18H4LduTr79guuFD3n5BHfI+ZRFhY8w29TYhbbLi/bvBdqKE4fUgg1pBKnV3FEaCWOWyA+m3WpORZr/j+9TKJtW8yBTF2/ZEODI9/QavHkVdGFp/Pjn4Q+u5hXapsP5sOH+OXXA1LiKuqJxiMNbhTkbdJTCy4llEt6NnqRT4dhg1V3nbdrm6dYMecA1yTOL4PWTE9L5VzPFlLBCvlG58AhehnN4uHsAYinyJ+AZ/NkVvELbfOBUuOO5syBIEtiqHU1k9XeISX5bsimrkUUhnGDxourN8SgUsCZVtKyGbyGzHXdjOhsAvOAswSRyIBddRdEZWP6GZhNK/yjwew9ehBo+3jEADu7Ay2n8mDc+TS7awUHg0OMzR0LABhqLD4hJEh/BEGyBdGlSJoXYXtr+3HS4ijzVpgi0paWXtdruGTknXBz+11qT1Q2inxaTzQCO46P3lfLpyS4fou2PH/PupwZgCxNhGlj4IvUuWEsTkqMWm6i4xCSMc9N1RDQoCVcuGItJ/MRWefais+3synowi/dESgJjkilnWnBTGvRWmaw8oR15257t7CHmCf8HOn7cwI8+NQBXMBEmAa8PMRemrNCEhLGEhDQKcGZWS319BX9PFBEwGTbRBhLbDcaV3drFcDqk5kCTd2JF1Wp0HraqBx8U0wwBTnbpCadwBA/gTH/CDrcCs93LV8E0YlmmcyQRQnjBa8JESmGUfIjK/7fkaDJpmD2QptFNVJU1bbtIAjjWQizepOKptRjbzR9Kag6xZmMLLjHOtcLT3Tx9o/0EcTT1XN3E45u24AiwEypDJXihKjQxjLprEwcmRKclaDNZCVqr/V8mYWyFADbusiY5hvgFoU2vio49RgJLn5OsReRFN6tabeetiiy0V7KFHT3HyZLx491u95sn4K1QQSPKM9hNT0wMVvAWbzDSVdrKw4zRjZMyJIHkfq1VAVCDl/bUhNKlGq0zGr05+YAceXVPCttVk0oqjVwMPt+BBefx4yPtGVkUsqY3CHDPiCM5ngupUwCdbkpd8kbPrCWHhkmtIKLEetF2499eS1jZlIPGYnlcPXeM2KD9vLS0bW3ktYNqUllpKLn5ZrsxlIzxvDu5eHxzGLctkZLEY4PgSOg2IUVVcUONzUDBEpRaMoXNmUc0tFZrTZquiLyKxrSm3DvIW9Fil+AkhXu5PhEPx9mUNwqypDvZWdKlhIJQY7vn2OsnmBeOWnYZ0m1iwbbw1U60by5om47iHRV6fOgzjMf/DAZrlP40Z7syxpLK0lJ0gqaAK1c2KQKu7tabTXkLFz0sCftuwX++MyNeNn68k5Buq23YQhUh0SNTJa1ioQ0p4nUG2y0XilF1JqODqdImloPS4Bp111DEWT0jJjVv95uX9BBV7eB3bUWcu0acSVM23YZdd8R8UbQUxJ9wdu3oMuhdt929ME+mh6JXJ8di2RxbTi6TbrDquqV4aUKR2iwT6aZbyOwEXN3DUsWr8Hn4EhwNyHuXHh7/pdaUjtR7vnDh/d8c9xD/s5f501eQ1+CuDiCvGhk1AN/4Tf74RfxPwD3toLarR0zNtsnPzmS64KIRk861dMWCU8ArasG9T9H0ZBpsDGnjtAOM2+/LuIb2iIUGXNgl5ZmKD/Tw8TlaAuihaFP5yrw18v4x1898zIdP+DDAX1bM3GAMvPgRP/cJn3zCW013nrhHkrITyvYuwOUkcHuKlRSW5C6rzIdY4ppnF7J8aAJbQepgbJYBjCY9usGXDKQxq7RZfh9eg5d1UHMVATRaD/4BHK93/1iAgYZ/+jqPn8Dn4UExmWrpa3+ZOK6MvM3bjwfzxNWA2dhs8+51XHSPJiaAhGSpWevEs5xHLXcEGFXYiCONySH3fPWq93JIsBiSWvWyc3CAN+EcXoT7rCSANloPPoa31rt/5PUA/gp8Q/jDD3hyrjzlR8VkanfOvB1XPubt17vzxAfdSVbD1pzAnfgyF3ycadOTOTXhpEUoLC1HZyNGW3dtmjeXgr2r56JNmRwdNNWaQVBddd6rh4MhviEB9EFRD/7RGvePvCbwAL4Mx/D6M541hHO4D3e7g6PafdcZVw689z7NGTwo5om7A8sPhccT6qKcl9NJl9aM/9kX+e59Hh1yPqGuCCZxuITcsmNaJ5F7d0q6J3H48TO1/+M57085q2icdu2U+W36Ldllz9Agiv4YGljoEN908EzvDOrBF98/vtJwCC/BF2AG75xxEmjmMIcjxbjoaxqOK3/4hPOZzhMPBpYPG44CM0dTVm1LjLtUWWVz1Bcf8tEx0zs8O2A2YVHRxKYOiy/aOVoAaMu0i7ubu43njjmd4ibMHU1sIDHaQNKrZND/FZYdk54oCXetjq7E7IVl9eAL7t+oHnwXXtLx44czzoRFHBztYVwtH1d+NOMkupZ5MTM+gUmq90X+Bh9zjRlmaQ+m7YMqUL/veemcecAtOJ0yq1JnVlN27di2E0+Klp1tAJ4KRw1eMI7aJjsO3R8kPSI3fUFXnIOfdQe86sIIVtWDL7h//Ok6vj8vwDk08NEcI8zz7OhBy+WwalzZeZ4+0XniRfst9pAJqQHDGLzVQ2pheZnnv1OWhwO43/AgcvAEXEVVpa4db9sGvNK8wjaENHkfFQ4Ci5i7dqnQlPoLQrHXZDvO3BIXZbJOBrOaEbML6sFL798I4FhKihjHMsPjBUZYCMFr6nvaArxqXPn4lCa+cHfSa2cP27g3Z3ziYTRrcbQNGLQmGF3F3cBdzzzX7AILx0IB9rbwn9kx2G1FW3Inic+ZLIsVvKR8Zwfj0l1fkqo8LWY1M3IX14OX3r9RKTIO+d9XzAI8qRPGPn/4NC2n6o4rN8XJ82TOIvuVA8zLKUHRFgBCetlDZlqR1gLKjS39xoE7Bt8UvA6BxuEDjU3tFsEijgA+615tmZkXKqiEENrh41iLDDZNq4pKTWR3LZfnos81LOuNa15cD956vLMsJd1rqYp51gDUQqMYm2XsxnUhD2jg1DM7SeuJxxgrmpfISSXVIJIS5qJJSvJPEQ49DQTVIbYWJ9QWa/E2+c/oPK1drmC7WSfJRNKBO5Yjvcp7Gc3dmmI/Xh1kDTEuiSnWqQf37h+fTMhGnDf6dsS8SQfQWlqqwXXGlc/PEZ/SC5mtzIV0nAshlQdM/LvUtYutrEZ/Y+EAFtq1k28zQhOwLr1AIeANzhF8t9qzTdZf2qRKO6MWE9ohBYwibbOmrFtNmg3mcS+tB28xv2uKd/agYCvOP+GkSc+0lr7RXzyufL7QbkUpjLjEWFLqOIkAGu2B0tNlO9Eau2W1qcOUvVRgKzypKIQZ5KI3q0MLzqTNRYqiZOqmtqloIRlmkBHVpHmRYV6/HixbO6UC47KOFJnoMrVyr7wYz+SlW6GUaghYbY1I6kkxA2W1fSJokUdSh2LQ1GAimRGm0MT+uu57H5l7QgOWxERpO9moLRPgTtquWCfFlGlIjQaRly9odmzMOWY+IBO5tB4sW/0+VWGUh32qYk79EidWKrjWuiLpiVNGFWFRJVktyeXWmbgBBzVl8anPuXyNJlBJOlKLTgAbi/EYHVHxWiDaVR06GnHQNpJcWcK2jJtiCfG2sEHLzuI66sGrMK47nPIInPnu799935aOK2cvmvubrE38ZzZjrELCmXM2hM7UcpXD2oC3+ECVp7xtIuxptJ0jUr3sBmBS47TVxlvJ1Sqb/E0uLdvLj0lLr29ypdd/eMX3f6lrxGlKwKQxEGvw0qHbkbwrF3uHKwVENbIV2wZ13kNEF6zD+x24aLNMfDTCbDPnEikZFyTNttxWBXDaBuM8KtI2rmaMdUY7cXcUPstqTGvBGSrFWIpNMfbdea990bvAOC1YX0qbc6smDS1mPxSJoW4fwEXvjMmhlijDRq6qale6aJEuFGoppYDoBELQzLBuh/mZNx7jkinv0EtnUp50lO9hbNK57lZaMAWuWR5Yo9/kYwcYI0t4gWM47Umnl3YmpeBPqSyNp3K7s2DSAS/39KRuEN2bS4xvowV3dFRMx/VFcp2Yp8w2nTO9hCXtHG1kF1L4KlrJr2wKfyq77R7MKpFKzWlY9UkhYxyHWW6nBWPaudvEAl3CGcNpSXPZ6R9BbBtIl6cHL3gIBi+42CYXqCx1gfGWe7Ap0h3luyXdt1MKy4YUT9xSF01G16YEdWsouW9mgDHd3veyA97H+Ya47ZmEbqMY72oPztCGvK0onL44AvgC49saZKkWRz4veWljE1FHjbRJaWv6ZKKtl875h4CziFCZhG5rx7tefsl0aRT1bMHZjm8dwL/6u7wCRysaQblQoG5yAQN5zpatMNY/+yf8z+GLcH/Qn0iX2W2oEfXP4GvwQHuIL9AYGnaO3zqAX6946nkgqZNnUhx43DIdQtMFeOPrgy/y3Yd85HlJWwjLFkU3kFwq28xPnuPhMWeS+tDLV9Otllq7pQCf3uXJDN9wFDiUTgefHaiYbdfi3b3u8+iY6TnzhgehI1LTe8lcd7s1wJSzKbahCRxKKztTLXstGAiu3a6rPuQs5pk9TWAan5f0BZmGf7Ylxzzk/A7PAs4QPPPAHeFQ2hbFHszlgZuKZsJcUmbDC40sEU403cEjczstOEypa+YxevL4QBC8oRYqWdK6b7sK25tfE+oDZgtOQ2Jg8T41HGcBE6fTWHn4JtHcu9S7uYgU5KSCkl/mcnq+5/YBXOEr6lCUCwOTOM1taOI8mSxx1NsCXBEmLKbMAg5MkwbLmpBaFOPrNSlO2HnLiEqW3tHEwd8AeiQLmn+2gxjC3k6AxREqvKcJbTEzlpLiw4rNZK6oJdidbMMGX9FULKr0AkW+2qDEPBNNm5QAt2Ik2nftNWHetubosHLo2nG4vQA7GkcVCgVCgaDixHqo9UUn1A6OshapaNR/LPRYFV8siT1cCtJE0k/3WtaNSuUZYKPnsVIW0xXWnMUxq5+En4Kvw/MqQmVXnAXj9Z+9zM98zM/Agy7F/qqj2Nh67b8HjFnPP3iBn/tkpdzwEJX/whIcQUXOaikeliCRGUk7tiwF0rItwMEhjkZ309hikFoRAmLTpEXWuHS6y+am/KB/fM50aLEhGnSMwkpxzOov4H0AvgovwJ1iGzDLtJn/9BU+fAINfwUe6FHSLhu83viV/+/HrOePX+STT2B9uWGbrMHHLldRBlhS/CJQmcRxJFqZica01XixAZsYiH1uolZxLrR/SgxVIJjkpQP4PE9sE59LKLr7kltSBogS5tyszzH8Fvw8/AS8rNOg0xUS9fIaHwb+6et8Q/gyvKRjf5OusOzGx8evA/BP4IP11uN/grca5O0lcsPLJ5YjwI4QkJBOHa0WdMZYGxPbh2W2nR9v3WxEWqgp/G3+6VZbRLSAAZ3BhdhAaUL33VUSw9yjEsvbaQ9u4A/gGXwZXoEHOuU1GSj2chf+Mo+f8IcfcAxfIKVmyunRbYQVnoevwgfw3TXXcw++xNuP4fhyueEUNttEduRVaDttddoP0eSxLe2LENk6itYxlrxBNBYrNNKSQmeaLcm9c8UsaB5WyO6675yyQIAWSDpBVoA/gxmcwEvwoDv0m58UE7gHn+fJOa8/Ywan8EKRfjsopF83eCglX/Sfr7OeaRoQfvt1CGvIDccH5BCvw1sWIzRGC/66t0VTcLZQZtm6PlAasbOJ9iwWtUo7biktTSIPxnR24jxP1ZKaqq+2RcXM9OrBAm/AAs7hDJ5bNmGb+KIfwCs8a3jnjBrOFeMjHSCdbKr+2uOLfnOd9eiA8Hvvwwq54VbP2OqwkB48Ytc4YEOiH2vTXqodabfWEOzso4qxdbqD5L6tbtNPECqbhnA708DZH4QOJUXqScmUlks7Ot6FBuZw3n2mEbaUX7kDzxHOOQk8nKWMzAzu6ZZ8sOFw4RK+6PcuXo9tB4SbMz58ApfKDXf3szjNIIbGpD5TKTRxGkEMLjLl+K3wlWXBsCUxIDU+jbOiysESqAy1MGUJpXgwbTWzNOVEziIXZrJ+VIztl1PUBxTSo0dwn2bOmfDRPD3TRTGlfbCJvO9KvuhL1hMHhB9wPuPRLGHcdOWG2xc0U+5bQtAJT0nRTewXL1pgk2+rZAdeWmz3jxAqfNQQdzTlbF8uJ5ecEIWvTkevAHpwz7w78QujlD/Lr491bD8/1vhM2yrUQRrWXNQY4fGilfctMWYjL72UL/qS9eiA8EmN88nbNdour+PBbbAjOjIa4iBhfFg6rxeKdEGcL6p3EWR1Qq2Qkhs2DrnkRnmN9tG2EAqmgPw6hoL7Oza7B+3SCrR9tRftko+Lsf2F/mkTndN2LmzuMcKTuj/mX2+4Va3ki16+nnJY+S7MefpkidxwnV+4wkXH8TKnX0tsYzYp29DOOoSW1nf7nTh2akYiWmcJOuTidSaqESrTYpwjJJNVGQr+rLI7WsqerHW6Kp/oM2pKuV7T1QY9gjqlZp41/WfKpl56FV/0kvXQFRyeQ83xaTu5E8p5dNP3dUF34ihyI3GSpeCsywSh22ZJdWto9winhqifb7VRvgktxp13vyjrS0EjvrRfZ62uyqddSWaWYlwTPAtJZ2oZ3j/Sgi/mi+6vpzesfAcWNA0n8xVyw90GVFGuZjTXEQy+6GfLGLMLL523f5E0OmxVjDoOuRiH91RKU+vtoCtH7TgmvBLvtFXWLW15H9GTdVw8ow4IlRLeHECN9ym1e9K0I+Cbnhgv4Yu+aD2HaQJ80XDqOzSGAV4+4yCqBxrsJAX6ZTIoX36QnvzhhzzMfFW2dZVLOJfo0zbce5OvwXMFaZ81mOnlTVXpDZsQNuoYWveketKb5+6JOOsgX+NTm7H49fUTlx+WLuWL7qxnOFh4BxpmJx0p2gDzA/BUARuS6phR+pUsY7MMboAHx5xNsSVfVZcYSwqCKrqon7zM+8ecCkeS4nm3rINuaWvVNnMRI1IRpxTqx8PZUZ0Br/UEduo3B3hNvmgZfs9gQPj8vIOxd2kndir3awvJ6BLvoUuOfFWNYB0LR1OQJoUySKb9IlOBx74q1+ADC2G6rOdmFdJcD8BkfualA+BdjOOzP9uUhGUEX/TwhZsUduwRr8wNuXKurCixLBgpQI0mDbJr9dIqUuV+92ngkJZ7xduCk2yZKbfWrH1VBiTg9VdzsgRjW3CVXCvAwDd+c1z9dWw9+B+8MJL/eY15ZQ/HqvTwVdsZn5WQsgRRnMaWaecu3jFvMBEmgg+FJFZsnSl0zjB9OqPYaBD7qmoVyImFvzi41usesV0julaAR9dfR15Xzv9sEruRDyk1nb+QaLU67T885GTls6YgcY+UiMa25M/pwGrbCfzkvR3e0jjtuaFtnwuagHTSb5y7boBH119HXhvwP487jJLsLJ4XnUkHX5sLbS61dpiAXRoZSCrFJ+EjpeU3puVfitngYNo6PJrAigKktmwjyQdZpfq30mmtulaAx9Zfx15Xzv+cyeuiBFUs9zq8Kq+XB9a4PVvph3GV4E3y8HENJrN55H1X2p8VyqSKwVusJDKzXOZzplWdzBUFK9e+B4+uv468xvI/b5xtSAkBHQaPvtqWzllVvEOxPbuiE6+j2pvjcKsbvI7txnRErgfH7LdXqjq0IokKzga14GzQ23SSbCQvO6r+Or7SMIr/efOkkqSdMnj9mBx2DRsiY29Uj6+qK9ZrssCKaptR6HKURdwUYeUWA2kPzVKQO8ku2nU3Anhs/XWkBx3F/7wJtCTTTIKftthue1ty9xvNYLY/zo5KSbIuKbXpbEdSyeRyYdAIwKY2neyoc3+k1XUaufYga3T9daMUx/r8z1s10ITknIO0kuoMt+TB8jK0lpayqqjsJ2qtXAYwBU932zinimgmd6mTRDnQfr88q36NAI+tv24E8Pr8zxtasBqx0+xHH9HhlrwsxxNUfKOHQaZBITNf0uccj8GXiVmXAuPEAKSdN/4GLHhs/XWj92dN/uetNuBMnVR+XWDc25JLjo5Mg5IZIq226tmCsip2zZliL213YrTlL2hcFjpCduyim3M7/eB16q/blQsv5X/esDRbtJeabLIosWy3ycavwLhtxdWzbMmHiBTiVjJo6lCLjXZsi7p9PEPnsq6X6wd4bP11i0rD5fzPm/0A6brrIsllenZs0lCJlU4abakR59enZKrKe3BZihbTxlyZ2zl1+g0wvgmA166/bhwDrcn/7Ddz0eWZuJvfSESug6NzZsox3Z04FIxz0mUjMwVOOVTq1CQ0AhdbBGVdjG/CgsfUX7esJl3K/7ytWHRv683praW/8iDOCqWLLhpljDY1ZpzK75QiaZoOTpLKl60auHS/97oBXrv+umU9+FL+5+NtLFgjqVLCdbmj7pY5zPCPLOHNCwXGOcLquOhi8CmCWvbcuO73XmMUPab+ug3A6/A/78Bwe0bcS2+tgHn4J5pyS2WbOck0F51Vq3LcjhLvZ67p1ABbaL2H67bg78BfjKi/jr3+T/ABV3ilLmNXTI2SpvxWBtt6/Z//D0z/FXaGbSBgylzlsEGp+5//xrd4/ae4d8DUUjlslfIYS3t06HZpvfQtvv0N7AHWqtjP2pW08QD/FLy//da38vo8PNlKHf5y37Dxdfe/oj4kVIgFq3koLReSR76W/bx//n9k8jonZxzWTANVwEniDsg87sOSd/z7//PvMp3jQiptGVWFX2caezzAXwfgtzYUvbr0iozs32c3Uge7varH+CNE6cvEYmzbPZ9hMaYDdjK4V2iecf6EcEbdUDVUARda2KzO/JtCuDbNQB/iTeL0EG1JSO1jbXS+nLxtPMDPw1fh5+EPrgSEKE/8Gry5A73ui87AmxwdatyMEBCPNOCSKUeRZ2P6Myb5MRvgCHmA9ywsMifU+AYXcB6Xa5GibUC5TSyerxyh0j6QgLVpdyhfArRTTLqQjwe4HOD9s92D4Ap54odXAPBWLAwB02igG5Kkc+piN4lvODIFGAZgT+EO4Si1s7fjSR7vcQETUkRm9O+MXyo9OYhfe4xt9STQ2pcZRLayCV90b4D3jR0DYAfyxJ+eywg2IL7NTMXna7S/RpQ63JhWEM8U41ZyQGjwsVS0QBrEKLu8xwZsbi4wLcCT+OGidPIOCe1PiSc9Qt+go+vYqB7cG+B9d8cAD+WJPz0Am2gxXgU9IneOqDpAAXOsOltVuMzpdakJXrdPCzXiNVUpCeOos5cxnpQT39G+XVLhs1osQVvJKPZyNq8HDwd4d7pNDuWJPxVX7MSzqUDU6gfadKiNlUFTzLeFHHDlzO4kpa7aiKhBPGKwOqxsBAmYkOIpipyXcQSPlRTf+Tii0U3EJGaZsDER2qoB3h2hu0qe+NNwUooYU8y5mILbJe6OuX+2FTKy7bieTDAemaQyQ0CPthljSWO+xmFDIYiESjM5xKd6Ik5lvLq5GrQ3aCMLvmCA9wowLuWJb9xF59hVVP6O0CrBi3ZjZSNOvRy+I6klNVRJYRBaEzdN+imiUXQ8iVF8fsp+W4JXw7WISW7fDh7lptWkCwZ4d7QTXyBPfJMYK7SijjFppGnlIVJBJBYj7eUwtiP1IBXGI1XCsjNpbjENVpSAJ2hq2LTywEly3hUYazt31J8w2+aiLx3g3fohXixPfOMYm6zCGs9LVo9MoW3MCJE7R5u/WsOIjrqBoHUO0bJE9vxBpbhsd3+Nb4/vtPCZ4oZYCitNeYuC/8UDvDvy0qvkiW/cgqNqRyzqSZa/s0mqNGjtKOoTm14zZpUauiQgVfqtQiZjq7Q27JNaSK5ExRcrGCXO1FJYh6jR6CFqK7bZdQZ4t8g0rSlPfP1RdBtqaa9diqtzJkQ9duSryi2brQXbxDwbRUpFMBHjRj8+Nt7GDKgvph9okW7LX47gu0SpGnnFQ1S1lYldOsC7hYteR574ZuKs7Ei1lBsfdz7IZoxzzCVmmVqaSySzQbBVAWDek+N4jh9E/4VqZrJjPwiv9BC1XcvOWgO8275CVyBPvAtTVlDJfZkaZGU7NpqBogAj/xEHkeAuJihWYCxGN6e8+9JtSegFXF1TrhhLGP1fak3pebgPz192/8gB4d/6WT7+GdYnpH7hH/DJzzFiYPn/vjW0SgNpTNuPIZoAEZv8tlGw4+RLxy+ZjnKa5NdFoC7UaW0aduoYse6+bXg1DLg6UfRYwmhGEjqPvF75U558SANrElK/+MdpXvmqBpaXOa/MTZaa1DOcSiLaw9j0NNNst3c+63c7EKTpkvKHzu6bPbP0RkuHAVcbRY8ijP46MIbQeeT1mhA+5PV/inyDdQipf8LTvMXbwvoDy7IruDNVZKTfV4CTSRUYdybUCnGU7KUTDxLgCknqUm5aAW6/1p6eMsOYsphLzsHrE0Y/P5bQedx1F/4yPHnMB3/IOoTU9+BL8PhtjuFKBpZXnYNJxTuv+2XqolKR2UQgHhS5novuxVySJhBNRF3SoKK1XZbbXjVwWNyOjlqWJjrWJIy+P5bQedyldNScP+HZ61xKSK3jyrz+NiHG1hcOLL/+P+PDF2gOkekKGiNWKgJ+8Z/x8Iv4DdQHzcpZyF4v19I27w9/yPGDFQvmEpKtqv/TLiWMfn4sofMm9eAH8Ao0zzh7h4sJqYtxZd5/D7hkYPneDzl5idlzNHcIB0jVlQ+8ULzw/nc5/ojzl2juE0apD7LRnJxe04dMz2iOCFNtGFpTuXA5AhcTRo8mdN4kz30nVjEC4YTZQy4gpC7GlTlrePKhGsKKgeXpCYeO0MAd/GH7yKQUlXPLOasOH3FnSphjHuDvEu4gB8g66oNbtr6eMbFIA4fIBJkgayoXriw2XEDQPJrQeROAlY6aeYOcMf+IVYTU3XFlZufMHinGywaW3YLpObVBAsbjF4QJMsVUSayjk4voPsHJOQfPWDhCgDnmDl6XIRerD24HsGtw86RMHOLvVSHrKBdeVE26gKB5NKHzaIwLOmrqBWJYZDLhASG16c0Tn+CdRhWDgWXnqRZUTnPIHuMJTfLVpkoYy5CzylHVTGZMTwkGAo2HBlkQplrJX6U+uF1wZz2uwS1SQ12IqWaPuO4baZaEFBdukksJmkcTOm+YJSvoqPFzxFA/YUhIvWxcmSdPWTWwbAKVp6rxTtPFUZfKIwpzm4IoMfaYQLWgmlG5FME2gdBgm+J7J+rtS/XBbaVLsR7bpPQnpMFlo2doWaVceHk9+MkyguZNCJ1He+kuHTWyQAzNM5YSUg/GlTk9ZunAsg1qELVOhUSAK0LABIJHLKbqaEbHZLL1VA3VgqoiOKXYiS+HRyaEKgsfIqX64HYWbLRXy/qWoylIV9gudL1OWBNgBgTNmxA6b4txDT4gi3Ri7xFSLxtXpmmYnzAcWDZgY8d503LFogz5sbonDgkKcxGsWsE1OI+rcQtlgBBCSOKD1mtqYpIU8cTvBmAT0yZe+zUzeY92fYjTtGipXLhuR0ePoHk0ofNWBX+lo8Z7pAZDk8mEw5L7dVyZZoE/pTewbI6SNbiAL5xeygW4xPRuLCGbhcO4RIeTMFYHEJkYyEO9HmJfXMDEj/LaH781wHHZEtqSQ/69UnGpzH7LKIAZEDSPJnTesJTUa+rwTepI9dLJEawYV+ZkRn9g+QirD8vF8Mq0jFQ29js6kCS3E1+jZIhgPNanHdHFqFvPJLHqFwQqbIA4jhDxcNsOCCQLDomaL/dr5lyJaJU6FxPFjO3JOh3kVMcROo8u+C+jo05GjMF3P3/FuDLn5x2M04xXULPwaS6hBYki+MrMdZJSgPHlcB7nCR5bJ9Kr5ACUn9jk5kivdd8tk95SOGrtqu9lr2IhK65ZtEl7ZKrp7DrqwZfRUSN1el7+7NJxZbywOC8neNKTch5vsTEMNsoCCqHBCqIPRjIPkm0BjvFODGtto99rCl+d3wmHkW0FPdpZtC7MMcVtGFQjJLX5bdQ2+x9ypdc313uj8xlsrfuLgWXz1cRhZvJYX0iNVBRcVcmCXZs6aEf3RQF2WI/TcCbKmGU3IOoDJGDdDub0+hYckt6PlGu2BcxmhbTdj/klhccLGJMcqRjMJP1jW2ETqLSWJ/29MAoORluJ+6LPffBZbi5gqi5h6catQpmOT7/OFf5UorRpLzCqcMltBLhwd1are3kztrSzXO0LUbXRQcdLh/RdSZ+swRm819REDrtqzC4es6Gw4JCKlSnjYVpo0xeq33PrADbFLL3RuCmObVmPN+24kfa+AojDuM4umKe2QwCf6EN906HwjujaitDs5o0s1y+k3lgbT2W2i7FJdnwbLXhJUBq/9liTctSmFC/0OqUinb0QddTWamtjbHRFuWJJ6NpqZ8vO3fZJ37Db+2GkaPYLGHs7XTTdiFQJ68SkVJFVmY6McR5UycflNCsccHFaV9FNbR4NttLxw4pQ7wJd066Z0ohVbzihaxHVExd/ay04oxUKWt+AsdiQ9OUyZ2krzN19IZIwafSTFgIBnMV73ADj7V/K8u1MaY2sJp2HWm0f41tqwajEvdHWOJs510MaAqN4aoSiPCXtN2KSi46dUxHdaMquar82O1x5jqhDGvqmoE9LfxcY3zqA7/x3HA67r9ZG4O6Cuxu12/+TP+eLP+I+HErqDDCDVmBDO4larujNe7x8om2rMug0MX0rL1+IWwdwfR+p1TNTyNmVJ85ljWzbWuGv8/C7HD/izjkHNZNYlhZcUOKVzKFUxsxxN/kax+8zPWPSFKw80rJr9Tizyj3o1gEsdwgWGoxPezDdZ1TSENE1dLdNvuKL+I84nxKesZgxXVA1VA1OcL49dFlpFV5yJMhzyCmNQ+a4BqusPJ2bB+xo8V9u3x48VVIEPS/mc3DvAbXyoYr6VgDfh5do5hhHOCXMqBZUPhWYbWZECwVJljLgMUWOCB4MUuMaxGNUQDVI50TQ+S3kFgIcu2qKkNSHVoM0SHsgoZxP2d5HH8B9woOk4x5bPkKtAHucZsdykjxuIpbUrSILgrT8G7G5oCW+K0990o7E3T6AdW4TilH5kDjds+H64kS0mz24grtwlzDHBJqI8YJQExotPvoC4JBq0lEjjQkyBZ8oH2LnRsQ4Hu1QsgDTJbO8fQDnllitkxuVskoiKbRF9VwzMDvxHAdwB7mD9yCplhHFEyUWHx3WtwCbSMMTCUCcEmSGlg4gTXkHpZXWQ7kpznK3EmCHiXInqndkQjunG5kxTKEeGye7jWz9cyMR2mGiFQ15ENRBTbCp+Gh86vAyASdgmJq2MC6hoADQ3GosP0QHbnMHjyBQvQqfhy/BUbeHd5WY/G/9LK/8Ka8Jd7UFeNWEZvzPb458Dn8DGLOe3/wGL/4xP+HXlRt+M1PE2iLhR8t+lfgxsuh7AfO2AOf+owWhSZRYQbd622hbpKWKuU+XuvNzP0OseRDa+mObgDHJUSc/pKx31QdKffQ5OIJpt8GWjlgTwMc/w5MPCR/yl1XC2a2Yut54SvOtMev55Of45BOat9aWG27p2ZVORRvnEk1hqWMVUmqa7S2YtvlIpspuF1pt0syuZS2NV14mUidCSfzQzg+KqvIYCMljIx2YK2AO34fX4GWdu5xcIAb8MzTw+j/lyWM+Dw/gjs4GD6ehNgA48kX/AI7XXM/XAN4WHr+9ntywqoCakCqmKP0rmQrJJEErG2Upg1JObr01lKQy4jskWalKYfJ/EDLMpjNSHFEUAde2fltaDgmrNaWQ9+AAb8I5vKjz3L1n1LriB/BXkG/wwR9y/oRX4LlioHA4LzP2inzRx/DWmutRweFjeP3tNeSGlaE1Fde0OS11yOpmbIp2u/jF1n2RRZviJM0yBT3IZl2HWImKjQOxIyeU325b/qWyU9Moj1o07tS0G7qJDoGHg5m8yeCxMoEH8GU45tnrNM84D2l297DQ9t1YP7jki/7RmutRweEA77/HWXOh3HCxkRgldDQkAjNTMl2Iloc1qN5JfJeeTlyTRzxURTdn1Ixv2uKjs12AbdEWlBtmVdk2k7FFwj07PCZ9XAwW3dG+8xKzNFr4EnwBZpy9Qzhh3jDXebBpYcpuo4fQ44u+fD1dweEnHzI7v0xuuOALRUV8rXpFyfSTQYkhd7IHm07jpyhlkCmI0ALYqPTpUxXS+z4jgDj1Pflvmz5ecuItpIBxyTHpSTGWd9g1ApfD/bvwUhL4nT1EzqgX7cxfCcNmb3mPL/qi9SwTHJ49oj5ZLjccbTG3pRmlYi6JCG0mQrAt1+i2UXTZ2dv9IlQpN5naMYtviaXlTrFpoMsl3bOAFEa8sqPj2WCMrx3Yjx99qFwO59Aw/wgx+HlqNz8oZvA3exRDvuhL1jMQHPaOJ0+XyA3fp1OfM3qObEVdhxjvynxNMXQV4+GJyvOEFqeQBaIbbO7i63rpxCltdZShPFxkjM2FPVkn3TG+Rp9pO3l2RzFegGfxGDHIAh8SteR0C4HopXzRF61nheDw6TFN05Ebvq8M3VKKpGjjO6r7nhudTEGMtYM92HTDaR1FDMXJ1eThsbKfywyoWwrzRSXkc51flG3vIid62h29bIcFbTGhfV+faaB+ohj7dPN0C2e2lC96+XouFByen9AsunLDJZ9z7NExiUc0OuoYW6UZkIyx2YUR2z6/TiRjyKMx5GbbjLHvHuf7YmtKghf34LJfx63Yg8vrvN2zC7lY0x0tvKezo4HmGYDU+Gab6dFL+KI761lDcNifcjLrrr9LWZJctG1FfU1uwhoQE22ObjdfkSzY63CbU5hzs21WeTddH2BaL11Gi7lVdlxP1nkxqhnKhVY6knS3EPgVGg1JpN5cP/hivujOelhXcPj8HC/LyI6MkteVjlolBdMmF3a3DbsuAYhL44dxzthWSN065xxUd55Lmf0wRbOYOqH09/o9WbO2VtFdaMb4qBgtFJoT1SqoN8wPXMoXLb3p1PUEhxfnnLzGzBI0Ku7FxrKsNJj/8bn/H8fPIVOd3rfrklUB/DOeO+nkghgSPzrlPxluCMtOnDL4Yml6dK1r3vsgMxgtPOrMFUZbEUbTdIzii5beq72G4PD0DKnwjmBULUVFmy8t+k7fZ3pKc0Q4UC6jpVRqS9Umv8bxw35flZVOU1X7qkjnhZlsMbk24qQ6Hz7QcuL6sDC0iHHki96Uh2UdvmgZnjIvExy2TeJdMDZNSbdZyAHe/Yd1xsQhHiKzjh7GxQ4yqMPaywPkjMamvqrYpmO7Knad+ZQC5msCuAPWUoxrxVhrGv7a+KLXFhyONdTMrZ7ke23qiO40ZJUyzgYyX5XyL0mV7NiUzEs9mjtbMN0dERqwyAJpigad0B3/zRV7s4PIfXSu6YV/MK7+OrYe/JvfGMn/PHJe2fyUdtnFrKRNpXV0Y2559aWPt/G4BlvjTMtXlVIWCnNyA3YQBDmYIodFz41PvXPSa6rq9lWZawZ4dP115HXV/M/tnFkkrBOdzg6aP4pID+MZnTJ1SuuB6iZlyiox4HT2y3YBtkUKWooacBQUDTpjwaDt5poBHl1/HXltwP887lKKXxNUEyPqpGTyA699UqY/lt9yGdlUKra0fFWS+36iylVWrAyd7Uw0CZM0z7xKTOduznLIjG2Hx8cDPLb+OvK6Bv7n1DYci4CxUuRxrjBc0bb4vD3rN5Zz36ntLb83eVJIB8LiIzCmn6SMPjlX+yNlTjvIGjs+QzHPf60Aj62/jrzG8j9vYMFtm1VoRWCJdmw7z9N0t+c8cxZpPeK4aTRicS25QhrVtUp7U578chk4q04Wx4YoQSjFryUlpcQ1AbxZ/XVMknIU//OGl7Q6z9Zpxi0+3yFhSkjUDpnCIUhLWVX23KQ+L9vKvFKI0ZWFQgkDLvBoylrHNVmaw10zwCPrr5tlodfnf94EWnQ0lFRWy8pW9LbkLsyUVDc2NSTHGDtnD1uMtchjbCeb1mpxFP0YbcClhzdLu6lfO8Bj6q+bdT2sz/+8SZCV7VIxtt0DUn9L7r4cLYWDSXnseEpOGFuty0qbOVlS7NNzs5FOGJUqQpl2Q64/yBpZf90sxbE+//PGdZ02HSipCbmD6NItmQ4Lk5XUrGpDMkhbMm2ZVheNYV+VbUWTcv99+2NyX1VoafSuC+AN6q9bFIMv5X/eagNWXZxEa9JjlMwNWb00akGUkSoepp1/yRuuqHGbUn3UdBSTxBU6SEVklzWRUkPndVvw2PrrpjvxOvzPmwHc0hpmq82npi7GRro8dXp0KXnUQmhZbRL7NEVp1uuZmO45vuzKsHrktS3GLWXODVjw+vXXLYx4Hf7njRPd0i3aoAGX6W29GnaV5YdyDj9TFkakje7GHYzDoObfddHtOSpoi2SmzJHrB3hM/XUDDEbxP2/oosszcRlehWXUvzHv4TpBVktHqwenFo8uLVmy4DKLa5d3RtLrmrM3aMFr1183E4sewf+85VWeg1c5ag276NZrM9IJVNcmLEvDNaV62aq+14IAOGFsBt973Ra8Xv11YzXwNfmft7Jg2oS+XOyoC8/cwzi66Dhmgk38kUmP1CUiYWOX1bpD2zWXt2FCp7uq8703APAa9dfNdscR/M/bZLIyouVxqJfeWvG9Je+JVckHQ9+CI9NWxz+blX/KYYvO5n2tAP/vrlZ7+8/h9y+9qeB/Hnt967e5mevX10rALDWK//FaAT5MXdBXdP0C/BAes792c40H+AiAp1e1oH8HgH94g/Lttx1gp63op1eyoM/Bvw5/G/7xFbqJPcCXnmBiwDPb/YKO4FX4OjyCb289db2/Noqicw4i7N6TVtoz8tNwDH+8x/i6Ae7lmaQVENzJFb3Di/BFeAwz+Is9SjeQySpPqbLFlNmyz47z5a/AF+AYFvDmHqibSXTEzoT4Gc3OALaqAP4KPFUJ6n+1x+rGAM6Zd78bgJ0a8QN4GU614vxwD9e1Amy6CcskNrczLx1JIp6HE5UZD/DBHrFr2oNlgG4Odv226BodoryjGJ9q2T/AR3vQrsOCS0ctXZi3ruLlhpFDJYl4HmYtjQCP9rhdn4suySLKDt6wLcC52h8xPlcjju1fn+yhuw4LZsAGUuo2b4Fx2UwQu77uqRHXGtg92aN3tQCbFexc0uk93vhTXbct6y7MulLycoUljx8ngDMBg1tvJjAazpEmOtxlzclvj1vQf1Tx7QlPDpGpqgtdSKz/d9/hdy1vTfFHSmC9dGDZbLiezz7Ac801HirGZsWjydfZyPvHXL/Y8Mjzg8BxTZiuwKz4Eb8sBE9zznszmjvFwHKPIWUnwhqfVRcd4Ck0K6ate48m1oOfrX3/yOtvAsJ8zsPAM89sjnddmuLuDPjX9Bu/L7x7xpMzFk6nWtyQfPg278Gn4Aekz2ZgOmU9eJ37R14vwE/BL8G3aibCiWMWWDQ0ZtkPMnlcGeAu/Ag+8ZyecU5BPuy2ILD+sQqyZhAKmn7XZd+jIMTN9eBL7x95xVLSX4On8EcNlXDqmBlqS13jG4LpmGbkF/0CnOi3H8ETOIXzmnmtb0a16Tzxj1sUvQCBiXZGDtmB3KAefPH94xcUa/6vwRn80GOFyjEXFpba4A1e8KQfFF+259tx5XS4egYn8fQsLGrqGrHbztr+uByTahWuL1NUGbDpsnrwBfePPwHHIf9X4RnM4Z2ABWdxUBlqQ2PwhuDxoS0vvqB1JzS0P4h2nA/QgTrsJFn+Y3AOjs9JFC07CGWX1oNX3T/yHOzgDjwPn1PM3g9Jk9lZrMEpxnlPmBbjyo2+KFXRU52TJM/2ALcY57RUzjObbjqxVw++4P6RAOf58pcVsw9Daje3htriYrpDOonre3CudSe6bfkTEgHBHuDiyu5MCsc7BHhYDx7ePxLjqigXZsw+ijMHFhuwBmtoTPtOxOrTvYJDnC75dnUbhfwu/ZW9AgYd+peL68HD+0emKquiXHhWjJg/UrkJYzuiaL3E9aI/ytrCvAd4GcYZMCkSQxfUg3v3j8c4e90j5ZTPdvmJJGHnOCI2nHS8081X013pHuBlV1gB2MX1YNmWLHqqGN/TWmG0y6clJWthxNUl48q38Bi8vtMKyzzpFdSDhxZ5WBA5ZLt8Jv3895DduBlgbPYAj8C4B8hO68FDkoh5lydC4FiWvBOVqjYdqjiLv92t8yPDjrDaiHdUD15qkSURSGmXJwOMSxWAXYwr3zaAufJ66l+94vv3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/wHuD9tQd4f+0B3l97gPfXHuD9tQd4f+0B3l97gG8LwP8G/AL8O/A5OCq0Ys2KIdv/qOIXG/4mvFAMF16gZD+2Xvu/B8as5+8bfllWyg0zaNO5bfXj6vfhhwD86/Aq3NfRS9t9WPnhfnvCIw/CT8GLcFTMnpntdF/z9V+PWc/vWoIH+FL3Znv57PitcdGP4R/C34avw5fgRVUInCwbsn1yyA8C8zm/BH8NXoXnVE6wVPjdeCI38kX/3+Ct9dbz1pTmHFRu+Hm4O9Ch3clr99negxfwj+ER/DR8EV6B5+DuQOnTgUw5rnkY+FbNU3gNXh0o/JYTuWOvyBf9FvzX663HH/HejO8LwAl8Hl5YLTd8q7sqA3wbjuExfAFegQdwfyDoSkWY8swzEf6o4Qyewefg+cHNbqMQruSL/u/WWc+E5g7vnnEXgDmcDeSGb/F4cBcCgT+GGRzDU3hZYburAt9TEtHgbM6JoxJ+6NMzzTcf6c2bycv2+KK/f+l6LBzw5IwfqZJhA3M472pWT/ajKxnjv4AFnMEpnBTPND6s2J7qHbPAqcMK74T2mZ4VGB9uJA465It+/eL1WKhYOD7xHOkr1ajK7d0C4+ke4Hy9qXZwpgLr+Znm/uNFw8xQOSy8H9IzjUrd9+BIfenYaylf9FsXr8fBAadnPIEDna8IBcwlxnuA0/Wv6GAWPd7dDIKjMdSWueAsBj4M7TOd06qBbwDwKr7oleuxMOEcTuEZTHWvDYUO7aHqAe0Bbq+HEFRzOz7WVoTDQkVds7A4sIIxfCQdCefFRoIOF/NFL1mPab/nvOakSL/Q1aFtNpUb/nFOVX6gzyg/1nISyDfUhsokIzaBR9Kxm80s5mK+6P56il1jXic7nhQxsxSm3OwBHl4fFdLqi64nDQZvqE2at7cWAp/IVvrN6/BFL1mPhYrGMBfOi4PyjuSGf6wBBh7p/FZTghCNWGgMzlBbrNJoPJX2mW5mwZfyRffXo7OFi5pZcS4qZUrlViptrXtw+GQoyhDPS+ANjcGBNRiLCQDPZPMHuiZfdFpPSTcQwwKYdRNqpkjm7AFeeT0pJzALgo7g8YYGrMHS0iocy+YTm2vyRUvvpXCIpQ5pe666TJrcygnScUf/p0NDs/iAI/nqDHC8TmQT8x3NF91l76oDdQGwu61Z6E0ABv7uO1dbf/37Zlv+Zw/Pbh8f1s4Avur6657/+YYBvur6657/+YYBvur6657/+YYBvur6657/+aYBvuL6657/+VMA8FXWX/f8zzcN8BXXX/f8zzcNMFdbf93zP38KLPiK6697/uebtuArrr/u+Z9vGmCusP6653/+1FjwVdZf9/zPN7oHX339dc//fNMu+irrr3v+50+Bi+Zq6697/uebA/jz8Pudf9ht/fWv517J/XUzAP8C/BAeX9WCDrUpZ3/dEMBxgPcfbtTVvsYV5Yn32u03B3Ac4P3b8I+vxNBKeeL9dRMAlwO83959qGO78sT769oB7g3w/vGVYFzKE++v6wV4OMD7F7tckFkmT7y/rhHgpQO8b+4Y46XyxPvrugBeNcB7BRiX8sT767oAvmCA9woAHsoT76+rBJjLBnh3txOvkifeX1dswZcO8G6N7sXyxPvr6i340gHe3TnqVfLE++uKAb50gHcXLnrX8sR7gNdPRqwzwLu7Y/FO5Yn3AK9jXCMGeHdgxDuVJ75VAI8ljP7PAb3/RfjcZfePHBB+79dpfpH1CanN30d+mT1h9GqAxxJGM5LQeeQ1+Tb+EQJrElLb38VHQ94TRq900aMIo8cSOo+8Dp8QfsB8zpqE1NO3OI9Zrj1h9EV78PqE0WMJnUdeU6E+Jjyk/hbrEFIfeWbvId8H9oTRFwdZaxJGvziW0Hn0gqYB/wyZ0PwRlxJST+BOw9m77Amj14ii1yGM/txYQudN0qDzGe4EqfA/5GJCagsHcPaEPWH0esekSwmjRxM6b5JEcZ4ww50ilvAOFxBSx4yLW+A/YU8YvfY5+ALC6NGEzhtmyZoFZoarwBLeZxUhtY4rc3bKnjB6TKJjFUHzJoTOozF2YBpsjcyxDgzhQ1YRUse8+J4wenwmaylB82hC5w0zoRXUNXaRBmSMQUqiWSWkLsaVqc/ZE0aPTFUuJWgeTei8SfLZQeMxNaZSIzbII4aE1Nmr13P2hNHjc9E9guYNCZ032YlNwESMLcZiLQHkE4aE1BFg0yAR4z1h9AiAGRA0jyZ03tyIxWMajMPWBIsxYJCnlITU5ShiHYdZ94TR4wCmSxg9jtB5KyPGYzymAYexWEMwAPIsAdYdV6aObmNPGD0aYLoEzaMJnTc0Ygs+YDw0GAtqxBjkuP38bMRWCHn73xNGjz75P73WenCEJnhwyVe3AEe8TtKdJcYhBl97wuhNAObK66lvD/9J9NS75v17wuitAN5fe4D31x7g/bUHeH/tAd5fe4D3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/w/toDvAd4f/24ABzZ8o+KLsSLS+Pv/TqTb3P4hKlQrTGh+fbIBT0Axqznnb+L/V2mb3HkN5Mb/nEHeK7d4IcDld6lmDW/iH9E+AH1MdOw/Jlu2T1xNmY98sv4wHnD7D3uNHu54WUuOsBTbQuvBsPT/UfzNxGYzwkP8c+Yz3C+r/i6DcyRL/rZ+utRwWH5PmfvcvYEt9jLDS/bg0/B64DWKrQM8AL8FPwS9beQCe6EMKNZYJol37jBMy35otdaz0Bw2H/C2Smc7+WGB0HWDELBmOByA3r5QONo4V+DpzR/hFS4U8wMW1PXNB4TOqYz9urxRV++ntWCw/U59Ty9ebdWbrgfRS9AYKKN63ZokZVygr8GZ/gfIhZXIXPsAlNjPOLBby5c1eOLvmQ9lwkOy5x6QV1j5TYqpS05JtUgUHUp5toHGsVfn4NX4RnMCe+AxTpwmApTYxqMxwfCeJGjpXzRF61nbcHhUBPqWze9svwcHJ+S6NPscKrEjug78Dx8Lj3T8D4YxGIdxmJcwhi34fzZUr7olevZCw5vkOhoClq5zBPZAnygD/Tl9EzDh6kl3VhsHYcDEb+hCtJSvuiV69kLDm+WycrOTArHmB5/VYyP6jOVjwgGawk2zQOaTcc1L+aLXrKeveDwZqlKrw8U9Y1p66uK8dEzdYwBeUQAY7DbyYNezBfdWQ97weEtAKYQg2xJIkuveAT3dYeLGH+ShrWNwZgN0b2YL7qznr3g8JYAo5bQBziPjx7BPZ0d9RCQp4UZbnFdzBddor4XHN4KYMrB2qHFRIzzcLAHQZ5the5ovui94PCWAPefaYnxIdzRwdHCbuR4B+tbiy96Lzi8E4D7z7S0mEPd+eqO3cT53Z0Y8SV80XvB4Z0ADJi/f7X113f+7p7/+UYBvur6657/+YYBvur6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+VMA8FXWX/f8z58OgK+y/rrnf75RgLna+uue//lTA/CV1V/3/M837aKvvv6653++UQvmauuve/7nTwfAV1N/3fM/fzr24Cuuv+75nz8FFnxl9dc9//MOr/8/glixwRuUfM4AAAAASUVORK5CYII="}getSearchTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}dispose(){this.edgesRT.dispose(),this.weightsRT.dispose(),this.areaTexture.dispose(),this.searchTexture.dispose(),this.materialEdges.dispose(),this.materialWeights.dispose(),this.materialBlend.dispose(),this.fsQuad.dispose()}}const mpt={name:"GammaCorrectionShader",uniforms:{tDiffuse:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 tex = texture2D( tDiffuse, vUv );

			gl_FragColor = LinearTosRGB( tex );

		}`},gpt={name:"RGBShiftShader",uniforms:{tDiffuse:{value:null},amount:{value:.005},angle:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float amount;
		uniform float angle;

		varying vec2 vUv;

		void main() {

			vec2 offset = amount * vec2( cos(angle), sin(angle));
			vec4 cr = texture2D(tDiffuse, vUv + offset);
			vec4 cga = texture2D(tDiffuse, vUv);
			vec4 cb = texture2D(tDiffuse, vUv - offset);
			gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);

		}`};function vpt(i){let e,t,n;function r(a){i[16](a)}let s={args:[i[32],i[7].domElement],minDistance:5,maxDistance:100,"mouseButtons.left":ul.ACTION.TRUCK,"mouseButtons.right":i[1]?ul.ACTION.ROTATE:ul.ACTION.NONE};return i[0]!==void 0&&(s.ref=i[0]),e=new Oo.CameraControls({props:s}),Wa.push(()=>e_(e,"ref",r)),e.$on("controlstart",i[17]),e.$on("controlend",i[18]),e.$on("update",i[19]),{c(){ot(e.$$.fragment)},l(a){lt(e.$$.fragment,a)},m(a,o){ct(e,a,o),n=!0},p(a,o){const l={};o[1]&2&&(l.args=[a[32],a[7].domElement]),o[0]&2&&(l["mouseButtons.right"]=a[1]?ul.ACTION.ROTATE:ul.ACTION.NONE),!t&&o[0]&1&&(t=!0,l.ref=a[0],Z1(()=>t=!1)),e.$set(l)},i(a){n||(we(e.$$.fragment,a),n=!0)},o(a){Me(e.$$.fragment,a),n=!1},d(a){ut(e,a)}}}function Apt(i){let e,t,n,r,s,a;return e=new Oo.PerspectiveCamera({props:{makeDefault:!0,position:i[9],near:2,far:300,$$slots:{default:[vpt,({ref:o})=>({32:o}),({ref:o})=>[0,o?2:0]]},$$scope:{ctx:i}}}),n=new Oo.AmbientLight({props:{intensity:.8}}),s=new apt({props:{mathbox:i[8]}}),{c(){ot(e.$$.fragment),t=Ct(),ot(n.$$.fragment),r=Ct(),ot(s.$$.fragment)},l(o){lt(e.$$.fragment,o),t=Et(o),lt(n.$$.fragment,o),r=Et(o),lt(s.$$.fragment,o)},m(o,l){ct(e,o,l),Fe(o,t,l),ct(n,o,l),Fe(o,r,l),ct(s,o,l),a=!0},p(o,l){const c={};l[0]&3|l[1]&6&&(c.$$scope={dirty:l,ctx:o}),e.$set(c)},i(o){a||(we(e.$$.fragment,o),we(n.$$.fragment,o),we(s.$$.fragment,o),a=!0)},o(o){Me(e.$$.fragment,o),Me(n.$$.fragment,o),Me(s.$$.fragment,o),a=!1},d(o){o&&(ae(t),ae(r)),ut(e,o),ut(n,o),ut(s,o)}}}const ng=10;function _pt(i,e,t){let n,r,s,a,o,l,c,u,h,d;Wt(i,VA,Y=>t(0,n=Y)),Wt(i,v0,Y=>t(1,r=Y)),Wt(i,p1,Y=>t(11,s=Y)),Wt(i,DT,Y=>t(12,a=Y)),Wt(i,U3,Y=>t(24,o=Y)),Wt(i,ux,Y=>t(13,c=Y)),Wt(i,sg,Y=>t(26,u=Y)),Wt(i,Vw,Y=>t(15,d=Y));let f=!1;const m=new le(-ng,-ng,-ng),A=new le(ng,ng,ng),_=new le;ul.install({THREE:jO}),rre({CameraControls:ul});const{size:v,scene:w,camera:x,renderer:C}=Id();Wt(i,v,Y=>t(25,l=Y)),Wt(i,x,Y=>t(14,h=Y)),w.background=new Ut("hsl(231, 15%, 4%)");const S=new iV(C,w,h).init(),I=S.api,P=[0,0,30];let k;const M=new fpt,R=new PT(gpt);R.uniforms.amount.value=.0015;function N(Y){k=new upt(C),k.addPass(new hpt(w,Y)),k.addPass(M),k.addPass(R);const Pe=new PT(mpt);k.addPass(Pe);const Ie=new ppt;k.addPass(Ie)}ore((Y,Pe)=>{k.render(Pe)}),JO(({},Y)=>{u&&(tn(VA,n.azimuthAngle+=10*Y*l5.DEG2RAD,n),tn(VA,n.azimuthAngle=n.azimuthAngle%(2*Math.PI),n)),n.update(Y),S.frame()}),Fc(()=>{S.resize({viewWidth:l.width,viewHeight:l.height}),t(10,f=!0)});function U(){Cn.timeline({scrollTrigger:{trigger:"#section-1",start:"top bottom",end:"+=500",scrub:1}}).add("step-1").to(n,{distance:15,onComplete(){n.saveState()}},"step-1").to("#article",{translateX:"-65ch"},"step-1").to("#canvas-wrapper",{translateX:"-32.5ch"},"step-1").to(M.uniforms.damp,{value:0,duration:.001}),tn(U3,o=!0,o)}function q(Y){r?(n.rotateTo(Math.PI*.3,Math.PI*.35,!0),n.dollyTo(15,!0),n.moveTo(0,0,0,!0)):(n.rotateTo(0,0,!0),n.dollyTo(15,!0),n.moveTo(0,0,0,!0))}function W(Y){n=Y,VA.set(n)}const F=()=>{n.currentAction==ul.ACTION.ROTATE?C.domElement.classList.add("dragging"):n.currentAction==ul.ACTION.TRUCK?C.domElement.classList.add("moving"):n.currentAction==ul.ACTION.DOLLY&&C.domElement.classList.add("zoomIn")},ue=()=>{C.domElement.classList.remove("dragging","moving")},J=()=>{_.copy(n._target),n._target.clamp(m,A),_.sub(n._target),n._camera.position.sub(_)};return i.$$.update=()=>{i.$$.dirty[0]&32768&&(R.enabled=d),i.$$.dirty[0]&16384&&N(h),i.$$.dirty[0]&9216&&f&&c&&U(),i.$$.dirty[0]&4096&&a&&(M.uniforms.damp=0),i.$$.dirty[0]&2049&&n&&q()},[n,r,m,A,_,v,x,C,I,P,f,s,a,c,h,d,W,F,ue,J]}class bpt extends Sn{constructor(e){super(),Mn(this,e,_pt,Apt,gn,{},null,[-1,-1])}}function ypt(i){let e,t;return e=new bpt({}),{c(){ot(e.$$.fragment)},l(n){lt(e.$$.fragment,n)},m(n,r){ct(e,n,r),t=!0},i(n){t||(we(e.$$.fragment,n),t=!0)},o(n){Me(e.$$.fragment,n),t=!1},d(n){ut(e,n)}}}function wpt(i){let e,t;return e=new ire({props:{colorManagementEnabled:!0,rendererParameters:{webgl1:!0,logarithmicDepthBuffer:!1},$$slots:{default:[ypt]},$$scope:{ctx:i}}}),{c(){ot(e.$$.fragment)},l(n){lt(e.$$.fragment,n)},m(n,r){ct(e,n,r),t=!0},p(n,[r]){const s={};r&1&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(we(e.$$.fragment,n),t=!0)},o(n){Me(e.$$.fragment,n),t=!1},d(n){ut(e,n)}}}function xpt(i){return Bi.DEFAULT_UP.set(0,0,1),[]}class Cpt extends Sn{constructor(e){super(),Mn(this,e,xpt,wpt,gn,{})}}function Ept(i){let e,t,n,r,s,a,o,l;return{c(){e=ft("input"),n=Ct(),r=ft("input"),this.h()},l(c){e=pt(c,"INPUT",{type:!0,style:!0,class:!0,contenteditable:!0,tabindex:!0}),n=Et(c),r=pt(c,"INPUT",{style:!0,class:!0,type:!0,inputmode:!0}),this.h()},h(){Je(e,"type","text"),Je(e,"style",i[10]),Je(e,"class",t=iy(i[24].class)+" svelte-6cnb9y"),e.readOnly=!0,Je(e,"contenteditable",!1),Je(e,"tabindex","0"),mn(e,"default",!i[24].class),mn(e,"drag",!0),mn(e,"dragging",i[6]),mn(e,"fast",i[7]>1?"fast":""),mn(e,"slow",i[7]<1?"slow":""),mn(e,"focus",i[4]),mn(e,"inactive",i[8]),Je(r,"style",i[10]),Je(r,"class",s=iy(i[24].class)+" svelte-6cnb9y"),Je(r,"type","text"),Je(r,"inputmode",a=Ow(i[1])&&Ow(i[0])&&i[0]>=0?"numeric":"text"),mn(r,"default",!i[24].class),mn(r,"edit",!0),mn(r,"editing",i[8]),mn(r,"focus",i[5]),mn(r,"inactive",!i[8])},m(c,u){Fe(c,e,u),i[57](e),og(e,i[9]),Fe(c,n,u),Fe(c,r,u),i[59](r),og(r,i[9]),o||(l=[Wi(window,"mousemove",function(){ry(i[6]?i[14]:"")&&(i[6]?i[14]:"").apply(this,arguments)}),Wi(window,"touchmove",function(){ry(i[6]?i[13]:"")&&(i[6]?i[13]:"").apply(this,arguments)}),Wi(window,"mouseup",Bp(function(){ry(i[6]?i[16]:i[20])&&(i[6]?i[16]:i[20]).apply(this,arguments)})),Wi(window,"touchend",Bp(function(){ry(i[6]?i[15]:i[20])&&(i[6]?i[15]:i[20]).apply(this,arguments)})),Wi(window,"keydown",i[21]),Wi(window,"keyup",i[22]),Wi(e,"mousedown",Bp(i[12])),Wi(e,"touchstart",Bp(dX(i[11]))),Wi(e,"dblclick",Bp(Spt)),Wi(e,"focus",i[17]),Wi(e,"blur",i[18]),Wi(e,"keydown",i[54]),Wi(e,"keypress",i[55]),Wi(e,"keyup",i[56]),Wi(e,"input",i[58]),Wi(r,"mouseup",Bp(Mpt)),Wi(r,"touchend",Bp(Tpt)),Wi(r,"focus",i[19]),Wi(r,"blur",i[20]),Wi(r,"input",i[23]),Wi(r,"keydown",i[51]),Wi(r,"keypress",i[52]),Wi(r,"keyup",i[53]),Wi(r,"input",i[60])],o=!0)},p(c,u){i=c,u[0]&1024&&Je(e,"style",i[10]),u[0]&16777216&&t!==(t=iy(i[24].class)+" svelte-6cnb9y")&&Je(e,"class",t),u[0]&512&&e.value!==i[9]&&og(e,i[9]),u[0]&16777216&&mn(e,"default",!i[24].class),u[0]&16777216&&mn(e,"drag",!0),u[0]&16777280&&mn(e,"dragging",i[6]),u[0]&16777344&&mn(e,"fast",i[7]>1?"fast":""),u[0]&16777344&&mn(e,"slow",i[7]<1?"slow":""),u[0]&16777232&&mn(e,"focus",i[4]),u[0]&16777472&&mn(e,"inactive",i[8]),u[0]&1024&&Je(r,"style",i[10]),u[0]&16777216&&s!==(s=iy(i[24].class)+" svelte-6cnb9y")&&Je(r,"class",s),u[0]&3&&a!==(a=Ow(i[1])&&Ow(i[0])&&i[0]>=0?"numeric":"text")&&Je(r,"inputmode",a),u[0]&512&&r.value!==i[9]&&og(r,i[9]),u[0]&16777216&&mn(r,"default",!i[24].class),u[0]&16777216&&mn(r,"edit",!0),u[0]&16777472&&mn(r,"editing",i[8]),u[0]&16777248&&mn(r,"focus",i[5]),u[0]&16777472&&mn(r,"inactive",!i[8])},i:pn,o:pn,d(c){c&&(ae(e),ae(n),ae(r)),i[57](null),i[59](null),o=!1,tv(l)}}}function Spt(i){}function Ow(i){return i==Math.round(i)}const Mpt=i=>{},Tpt=i=>{};function Ipt(i,e,t){const n=fX();let{options:r={}}=e,{value:s=r.value??0}=e;s=parseFloat(s);let{min:a=r.min??-1e12}=e;a=parseFloat(a);let{max:o=r.max??1e12}=e;o=parseFloat(o);let{step:l=r.step??1}=e;l=parseFloat(l);let{precision:c=r.precision??l}=e;c=parseFloat(c);let{speed:u=r.speed??1}=e;u=parseFloat(u);let{keyStep:h=r.keyStep??l*10}=e;h=parseFloat(h);let{keyStepSlow:d=r.keyStepSlow??l}=e;d=parseFloat(d);let{keyStepFast:f=r.keyStepFast??l*100}=e;f=parseFloat(f);let{decimals:m=r.decimals??0}=e;m=parseFloat(m);let{format:A=r.format??void 0}=e,{parse:_=r.parse??void 0}=e,{horizontal:v=r.horizontal??!0}=e,{vertical:w=r.vertical??!1}=e,{circular:x=r.circular??!1}=e,{mainStyle:C=r.mainStyle??void 0}=e,{fastStyle:S=r.fastStyle??void 0}=e,{slowStyle:I=r.slowStyle??void 0}=e,{focusStyle:P=r.focusStyle??void 0}=e,{draggingStyle:k=r.draggingStyle??void 0}=e,{editingStyle:M=r.editingStyle??void 0}=e,{cursor:R=r.cursor??void 0}=e,N,U,q,W=!1,F,ue,J=!1,Y=!1,Pe=!1,Ie=!1,pe,Ce,G,oe,je=1,Tt=!1,rt=!1,De=!1,xt,mt=null,et=null,st;Fc(()=>(t(48,mt=document.querySelector("html")),t(49,et=mt.style.cursor),()=>{t(48,mt.style.cursor=et,mt)})),Ee(s);function ce(Le){n("consoleLog",Le.type),W=!0,tt(Le)}function tt(Le){n("consoleLog",Le.type),pe=document.activeElement===F,t(6,Ie=!0),F.focus(),Ce=!1,G=W?Le.touches[0].clientX:Le.clientX,oe=W?Le.touches[0].clientY:Le.clientY,t(6,Ie=!0),Ee(s)}function he(Le){W=!0,be(Le)}function be(Le){let bn=W?Le.touches[0].clientX:Le.clientX,_i=W?Le.touches[0].clientY:Le.clientY,gs=v?bn-G:0,ei=w?-(_i-oe):0,vs=Math.abs(gs)>Math.abs(ei)?gs:ei;vs!=0&&!Ce&&(Ce=!0,n("dragstart")),Vt(vs*je),G=bn,oe=_i}function Ne(Le){n("consoleLog",Le.type),nt(Le)}function nt(Le){n("consoleLog",Le.type),Ie&&Ce&&n("dragend"),t(6,Ie=!1),pe&&!Ce&&te()}function ze(Le){n("consoleLog",Le.type),t(4,J=!0),Te()}function me(Le){n("consoleLog",Le.type),t(4,J=!1),Te()}function fe(Le){n("consoleLog",Le.type),t(5,Y=!0),Te()}function Be(Le){n("consoleLog",Le.type),t(5,Y=!1),Te(),Qe()}function V(Le){Le.key=="Enter"&&(Le.target==F||Le.target==ue)&&Le.preventDefault(),(Le.target==F||Le.target==ue)&&(n("consoleLog",Le.type),Le.key.length==1&&(q=q?q+Le.key:Le.key)),Le.key=="Shift"&&t(47,rt=!0),Le.key=="Alt"&&t(46,Tt=!0)}function $(Le){if((Le.target==F||Le.target==ue)&&n("consoleLog",Le.type),Le.key=="Shift"&&t(47,rt=!1),Le.key=="Alt"&&t(46,Tt=!1),J&&!De){let bn=h;je<1&&(bn=d),je>1&&(bn=f),(Le.key=="ArrowUp"||Le.key=="ArrowRight")&&ye(bn),(Le.key=="ArrowDown"||Le.key=="ArrowLeft")&&ye(-bn),Le.key=="Enter"&&te(),Le.key.length==1&&te()}else Y&&De&&(Le.key=="Enter"||Le.key=="Escape")&&Qe()}function ee(Le){let bn=parseFloat(ue.value);isNaN(bn)||(N=bn,N=St(N),n("input",parseFloat(Rt(N))))}async function Te(){await N3(),document.activeElement==F||document.activeElement==ue?Pe||(Pe=!0,n("focus")):Pe&&(Pe=!1,n("blur"))}async function te(){t(8,De=!0),await N3(),ue.focus(),q?t(9,U=q):ue.select(),n("editstart")}function Qe(){if(De){if(t(8,De=!1),q=void 0,_)N=_(U),Ee(N);else{let Le=parseFloat(ue.value);isNaN(Le)||(N=parseFloat(U),Ee(N))}document.activeElement===ue&&setTimeout(()=>{F.focus()},0),n("editend")}}function Vt(Le){N=N??parseFloat(U),N+=Le*l*u,Ee(N)}function ye(Le){N=N??parseFloat(U),N+=Le,Ee(N)}function Ee(Le){N=parseFloat(Le),N=St(N),t(9,U=Math.round((N-a)/l)*l+a),A?t(9,U=A(U)):t(9,U=U.toFixed(m)),t(25,s=Rt(N)),n("input",parseFloat(s)),n("change",parseFloat(s))}function St(Le){if(t(0,a=parseFloat(a)),t(26,o=parseFloat(o)),x){let bn=o-a;if(bn===0)return a;let _i=Le<a?Math.ceil((a-Le)/bn):0;Le=(Le-a+bn*_i)%bn+a}else Le=Math.min(Math.max(Le,a),o);return Le}function Rt(Le){let bn;Le=Math.round((parseFloat(Le)-a)/c)*c+a;let _i=c<1?Math.ceil(-Math.log10(c)):0;return bn=l.toString().split(".")[1],bn&&(_i=Math.max(_i,bn.length)),bn=a.toString().split(".")[1],bn&&(_i=Math.max(_i,bn.length)),parseFloat(Le.toFixed(_i))}function Bt(Le){xm.call(this,i,Le)}function Qt(Le){xm.call(this,i,Le)}function Nt(Le){xm.call(this,i,Le)}function $t(Le){xm.call(this,i,Le)}function Qn(Le){xm.call(this,i,Le)}function de(Le){xm.call(this,i,Le)}function It(Le){Wa[Le?"unshift":"push"](()=>{F=Le,t(2,F)})}function $e(){U=this.value,t(9,U)}function Lt(Le){Wa[Le?"unshift":"push"](()=>{ue=Le,t(3,ue)})}function Ft(){U=this.value,t(9,U)}return i.$$set=Le=>{t(24,e=jt(jt({},e),Ri(Le))),"options"in Le&&t(33,r=Le.options),"value"in Le&&t(25,s=Le.value),"min"in Le&&t(0,a=Le.min),"max"in Le&&t(26,o=Le.max),"step"in Le&&t(1,l=Le.step),"precision"in Le&&t(27,c=Le.precision),"speed"in Le&&t(28,u=Le.speed),"keyStep"in Le&&t(29,h=Le.keyStep),"keyStepSlow"in Le&&t(30,d=Le.keyStepSlow),"keyStepFast"in Le&&t(31,f=Le.keyStepFast),"decimals"in Le&&t(32,m=Le.decimals),"format"in Le&&t(34,A=Le.format),"parse"in Le&&t(35,_=Le.parse),"horizontal"in Le&&t(36,v=Le.horizontal),"vertical"in Le&&t(37,w=Le.vertical),"circular"in Le&&t(38,x=Le.circular),"mainStyle"in Le&&t(39,C=Le.mainStyle),"fastStyle"in Le&&t(40,S=Le.fastStyle),"slowStyle"in Le&&t(41,I=Le.slowStyle),"focusStyle"in Le&&t(42,P=Le.focusStyle),"draggingStyle"in Le&&t(43,k=Le.draggingStyle),"editingStyle"in Le&&t(44,M=Le.editingStyle),"cursor"in Le&&t(45,R=Le.cursor)},i.$$.update=()=>{i.$$.dirty[0]&12&&F&&ue&&Te(),i.$$.dirty[0]&33554752&&!De&&!Ie&&Ee(s),i.$$.dirty[0]&272|i.$$.dirty[1]&98304&&(t(7,je=1),J&&!De&&(Tt&&rt?t(7,je=10):Tt&&t(7,je=.1))),i.$$.dirty[0]&64|i.$$.dirty[1]&933984&&(t(50,st=v?w?"move":"ew-resize":"ns-resize"),mt&&(Ie?t(48,mt.style.cursor=R??st,mt):t(48,mt.style.cursor=et,mt))),i.$$.dirty[0]&1520|i.$$.dirty[1]&556800&&(t(10,xt=C??""),t(10,xt+=(J||Y)&&P?";"+P:""),t(10,xt+=!De&&je>1&&S?";"+S:""),t(10,xt+=!De&&je<1&&I?";"+I:""),t(10,xt+=Ie&&k?";"+k:""),t(10,xt+=De&&M?";"+M:""),t(10,xt+=De?"":";cursor:"+(R??st)))},e=Ri(e),[a,l,F,ue,J,Y,Ie,je,De,U,xt,ce,tt,he,be,Ne,nt,ze,me,fe,Be,V,$,ee,e,s,o,c,u,h,d,f,m,r,A,_,v,w,x,C,S,I,P,k,M,R,Tt,rt,mt,et,st,Bt,Qt,Nt,$t,Qn,de,It,$e,Lt,Ft]}class HP extends Sn{constructor(e){super(),Mn(this,e,Ipt,Ept,gn,{options:33,value:25,min:0,max:26,step:1,precision:27,speed:28,keyStep:29,keyStepSlow:30,keyStepFast:31,decimals:32,format:34,parse:35,horizontal:36,vertical:37,circular:38,mainStyle:39,fastStyle:40,slowStyle:41,focusStyle:42,draggingStyle:43,editingStyle:44,cursor:45},null,[-1,-1,-1])}}function ao(i,{delay:e=0,duration:t=400,easing:n=yX,x:r=0,y:s=0,opacity:a=0}={}){const o=getComputedStyle(i),l=+o.opacity,c=o.transform==="none"?"":o.transform,u=l*(1-a),[h,d]=tk(r),[f,m]=tk(s);return{delay:e,duration:t,easing:n,css:(A,_)=>`
			transform: ${c} translate(${(1-A)*h}${d}, ${(1-A)*f}${m});
			opacity: ${l-u*_}`}}function L9(i,e,t){const n=i.slice();return n[14]=e[t],n[16]=t,n}function O9(i,e,t){const n=i.slice();n[17]=e[t],n[19]=e,n[16]=t;const r=n[8][n[16]%3];return n[18]=r,n}function N9(i,e,t){const n=i.slice();n[17]=e[t],n[21]=e,n[16]=t;const r=n[8][n[16]%2];return n[18]=r,n}function F9(i,e,t){const n=i.slice();n[17]=e[t],n[20]=e,n[16]=t;const r=n[8][n[16]%3];return n[18]=r,n}function Ppt(i){let e,t=[],n=new Map,r,s=lo(i[7]);const a=o=>o[16];for(let o=0;o<s.length;o+=1){let l=N9(i,s,o),c=a(l);n.set(c,t[o]=z9(c,l))}return{c(){e=ft("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=pt(o,"DIV",{class:!0});var l=zt(e);for(let c=0;c<t.length;c+=1)t[c].l(l);l.forEach(ae),this.h()},h(){Je(e,"class","container font-serif grid grid-cols-2 grid-rows-2 px-3 bg-base-200 svelte-956vgg")},m(o,l){Fe(o,e,l);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(o,l){l&898&&(s=lo(o[7]),Hs(),t=LT(t,l,a,1,o,s,n,e,cL,z9,null,N9),Gs())},i(o){if(!r){for(let l=0;l<s.length;l+=1)we(t[l]);r=!0}},o(o){for(let l=0;l<t.length;l+=1)Me(t[l]);r=!1},d(o){o&&ae(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function kpt(i){let e,t=[],n=new Map,r,s=lo(i[6]);const a=o=>o[16];for(let o=0;o<s.length;o+=1){let l=F9(i,s,o),c=a(l);n.set(c,t[o]=U9(c,l))}return{c(){e=ft("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=pt(o,"DIV",{class:!0});var l=zt(e);for(let c=0;c<t.length;c+=1)t[c].l(l);l.forEach(ae),this.h()},h(){Je(e,"class","container font-serif grid grid-cols-3 grid-rows-3 px-3 bg-base-200 svelte-956vgg")},m(o,l){Fe(o,e,l);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(o,l){l&834&&(s=lo(o[6]),Hs(),t=LT(t,l,a,1,o,s,n,e,cL,U9,null,F9),Gs())},i(o){if(!r){for(let l=0;l<s.length;l+=1)we(t[l]);r=!0}},o(o){for(let l=0;l<t.length;l+=1)Me(t[l]);r=!1},d(o){o&&ae(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function z9(i,e){let t,n,r,s,a,o;function l(u){e[11](u,e[17])}let c={step:.1,decimals:1,speed:.1,class:e[9],mainStyle:`color: hsl(var(--${e[18]}));`};return e[1][e[17]]!==void 0&&(c.value=e[1][e[17]]),n=new HP({props:c}),Wa.push(()=>e_(n,"value",l)),{key:i,first:null,c(){t=ft("div"),ot(n.$$.fragment),s=Ct(),this.h()},l(u){t=pt(u,"DIV",{});var h=zt(t);lt(n.$$.fragment,h),s=Et(h),h.forEach(ae),this.h()},h(){this.first=t},m(u,h){Fe(u,t,h),ct(n,t,null),bt(t,s),o=!0},p(u,h){e=u;const d={};!r&&h&130&&(r=!0,d.value=e[1][e[17]],Z1(()=>r=!1)),n.$set(d)},i(u){o||(we(n.$$.fragment,u),u&&(a||Kl(()=>{a=tp(t,ao,{x:-20}),a.start()})),o=!0)},o(u){Me(n.$$.fragment,u),o=!1},d(u){u&&ae(t),ut(n)}}}function U9(i,e){let t,n,r,s,a,o;function l(u){e[10](u,e[17])}let c={step:.1,decimals:1,speed:.1,class:e[9],mainStyle:`color: hsl(var(--${e[18]}));`};return e[1][e[17]]!==void 0&&(c.value=e[1][e[17]]),n=new HP({props:c}),Wa.push(()=>e_(n,"value",l)),{key:i,first:null,c(){t=ft("div"),ot(n.$$.fragment),s=Ct(),this.h()},l(u){t=pt(u,"DIV",{});var h=zt(t);lt(n.$$.fragment,h),s=Et(h),h.forEach(ae),this.h()},h(){this.first=t},m(u,h){Fe(u,t,h),ct(n,t,null),bt(t,s),o=!0},p(u,h){e=u;const d={};!r&&h&66&&(r=!0,d.value=e[1][e[17]],Z1(()=>r=!1)),n.$set(d)},i(u){o||(we(n.$$.fragment,u),u&&(a||Kl(()=>{a=tp(t,ao,{x:-20}),a.start()})),o=!0)},o(u){Me(n.$$.fragment,u),o=!1},d(u){u&&ae(t),ut(n)}}}function V9(i){let e,t,n=`inset 0px 0px 0px 3px ${gu}`,r,s,a,o="=",l,c,u,h,d=[],f=new Map,m,A,_=lo(i[2]?[3,4,5]:[3,4]),v=[];for(let S=0;S<_.length;S+=1)v[S]=H9(O9(i,_,S));const w=S=>Me(v[S],1,1,()=>{v[S]=null});let x=lo(i[3]);const C=S=>S[16];for(let S=0;S<x.length;S+=1){let I=L9(i,x,S),P=C(I);f.set(P,d[S]=G9(P,I))}return{c(){e=ft("div"),t=ft("div");for(let S=0;S<v.length;S+=1)v[S].c();s=Ct(),a=ft("div"),a.textContent=o,c=Ct(),u=ft("div"),h=ft("div");for(let S=0;S<d.length;S+=1)d[S].c();this.h()},l(S){e=pt(S,"DIV",{class:!0});var I=zt(e);t=pt(I,"DIV",{class:!0});var P=zt(t);for(let R=0;R<v.length;R+=1)v[R].l(P);P.forEach(ae),I.forEach(ae),s=Et(S),a=pt(S,"DIV",{class:!0,"data-svelte-h":!0}),aa(a)!=="svelte-1q7svd3"&&(a.textContent=o),c=Et(S),u=pt(S,"DIV",{});var k=zt(u);h=pt(k,"DIV",{class:!0});var M=zt(h);for(let R=0;R<d.length;R+=1)d[R].l(M);M.forEach(ae),k.forEach(ae),this.h()},h(){Je(t,"class","font-serif grid grid-cols-1 grid-rows-2 px-3 bg-base-200"),dl(t,"box-shadow",n),Je(e,"class","shadow-lg shadow-neutral-content/20"),Je(a,"class","font-serif text-2xl font-black"),Je(h,"class","container font-serif grid grid-cols-1 grid-rows-2 px-3 bg-base-200 svelte-956vgg")},m(S,I){Fe(S,e,I),bt(e,t);for(let P=0;P<v.length;P+=1)v[P]&&v[P].m(t,null);Fe(S,s,I),Fe(S,a,I),Fe(S,c,I),Fe(S,u,I),bt(u,h);for(let P=0;P<d.length;P+=1)d[P]&&d[P].m(h,null);A=!0},p(S,I){if(i=S,I&773){_=lo(i[2]?[3,4,5]:[3,4]);let P;for(P=0;P<_.length;P+=1){const k=O9(i,_,P);v[P]?(v[P].p(k,I),we(v[P],1)):(v[P]=H9(k),v[P].c(),we(v[P],1),v[P].m(t,null))}for(Hs(),P=_.length;P<v.length;P+=1)w(P);Gs()}I&8&&(x=lo(i[3]),d=LT(d,I,C,1,i,x,f,h,_X,G9,null,L9))},i(S){if(!A){for(let I=0;I<_.length;I+=1)we(v[I]);S&&Kl(()=>{A&&(r||(r=Af(e,ao,i[5],!0)),r.run(1))}),S&&Kl(()=>{A&&(l||(l=Af(a,ao,i[5],!0)),l.run(1))});for(let I=0;I<x.length;I+=1)we(d[I]);S&&Kl(()=>{A&&(m||(m=Af(u,ao,i[5],!0)),m.run(1))}),A=!0}},o(S){v=v.filter(Boolean);for(let I=0;I<v.length;I+=1)Me(v[I]);S&&(r||(r=Af(e,ao,i[5],!1)),r.run(0)),S&&(l||(l=Af(a,ao,i[5],!1)),l.run(0)),S&&(m||(m=Af(u,ao,i[5],!1)),m.run(0)),A=!1},d(S){S&&(ae(e),ae(s),ae(a),ae(c),ae(u)),d1(v,S),S&&r&&r.end(),S&&l&&l.end();for(let I=0;I<d.length;I+=1)d[I].d();S&&m&&m.end()}}}function H9(i){let e,t,n,r,s,a;function o(c){i[12](c,i[16])}let l={step:.1,decimals:1,speed:.1,class:i[9],mainStyle:`color: hsl(var(--${i[18]}));`};return i[0][i[16]]!==void 0&&(l.value=i[0][i[16]]),t=new HP({props:l}),Wa.push(()=>e_(t,"value",o)),{c(){e=ft("div"),ot(t.$$.fragment),r=Ct()},l(c){e=pt(c,"DIV",{});var u=zt(e);lt(t.$$.fragment,u),r=Et(u),u.forEach(ae)},m(c,u){Fe(c,e,u),ct(t,e,null),bt(e,r),a=!0},p(c,u){i=c;const h={};!n&&u&1&&(n=!0,h.value=i[0][i[16]],Z1(()=>n=!1)),t.$set(h)},i(c){a||(we(t.$$.fragment,c),c&&(s||Kl(()=>{s=tp(e,ao,{x:-20}),s.start()})),a=!0)},o(c){Me(t.$$.fragment,c),a=!1},d(c){c&&ae(e),ut(t)}}}function G9(i,e){let t,n=e[14].toFixed(1)+"",r,s,a;return{key:i,first:null,c(){t=ft("div"),r=Un(n),s=Ct(),this.h()},l(o){t=pt(o,"DIV",{class:!0});var l=zt(t);r=Vn(l,n),s=Et(l),l.forEach(ae),this.h()},h(){Je(t,"class","number svelte-956vgg"),dl(t,"color",gu),this.first=t},m(o,l){Fe(o,t,l),bt(t,r),bt(t,s)},p(o,l){e=o,l&8&&n!==(n=e[14].toFixed(1)+"")&&BT(r,n)},i(o){o&&(a||Kl(()=>{a=tp(t,ao,{x:-20}),a.start()}))},o:pn,d(o){o&&ae(t)}}}function Bpt(i){let e,t,n,r,s,a;const o=[kpt,Ppt],l=[];function c(h,d){return h[2]?0:1}n=c(i),r=l[n]=o[n](i);let u=i[4]&&V9(i);return{c(){e=ft("div"),t=ft("div"),r.c(),s=Ct(),u&&u.c(),this.h()},l(h){e=pt(h,"DIV",{class:!0});var d=zt(e);t=pt(d,"DIV",{class:!0});var f=zt(t);r.l(f),f.forEach(ae),s=Et(d),u&&u.l(d),d.forEach(ae),this.h()},h(){Je(t,"class","shadow-lg shadow-neutral-content/20"),Je(e,"class","flex gap-5 items-center pointer-events-auto")},m(h,d){Fe(h,e,d),bt(e,t),l[n].m(t,null),bt(e,s),u&&u.m(e,null),a=!0},p(h,[d]){let f=n;n=c(h),n===f?l[n].p(h,d):(Hs(),Me(l[f],1,1,()=>{l[f]=null}),Gs(),r=l[n],r?r.p(h,d):(r=l[n]=o[n](h),r.c()),we(r,1),r.m(t,null)),h[4]?u?(u.p(h,d),d&16&&we(u,1)):(u=V9(h),u.c(),we(u,1),u.m(e,null)):u&&(Hs(),Me(u,1,1,()=>{u=null}),Gs())},i(h){a||(we(r),we(u),a=!0)},o(h){Me(r),Me(u),a=!1},d(h){h&&ae(e),l[n].d(),u&&u.d()}}}function Rpt(i,e,t){let n,r,s,a;Wt(i,Qu,_=>t(0,n=_)),Wt(i,wf,_=>t(1,r=_)),Wt(i,v0,_=>t(2,s=_)),Wt(i,_f,_=>t(4,a=_));const o={duration:200,x:-30},l=[0,1,2,4,5,6,8,9,10],c=[0,1,4,5],u=["p","s","a"],h="number-spinner";let d;function f(_,v){i.$$.not_equal(r[v],_)&&(r[v]=_,wf.set(r))}function m(_,v){i.$$.not_equal(r[v],_)&&(r[v]=_,wf.set(r))}function A(_,v){i.$$.not_equal(n[v],_)&&(n[v]=_,Qu.set(n))}return i.$$.update=()=>{if(i.$$.dirty&4,i.$$.dirty&7)if(s){const _=new sy([[r[0],r[1],r[2]],[r[4],r[5],r[6]],[r[8],r[9],r[10]]]),v=new sy([n]).transpose(),w=_.mmul(v);t(3,d=[w.get(0,0),w.get(1,0),w.get(2,0)])}else{const _=new sy([[r[0],r[1]],[r[4],r[5]]]),v=new sy([[n[0],n[1]]]).transpose(),w=_.mmul(v);t(3,d=[w.get(0,0),w.get(1,0)])}},[n,r,s,d,a,o,l,c,u,h,f,m,A]}class Dpt extends Sn{constructor(e){super(),Mn(this,e,Rpt,Bpt,gn,{})}}const Q9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function q9(i,e,t){const n=i.slice();return n[10]=e[t][0],n[11]=e[t][1],n}function O3(i){let e,t=[i[11]],n={};for(let r=0;r<t.length;r+=1)n=jt(n,t[r]);return{c(){e=rL(i[10]),this.h()},l(r){e=sL(r,i[10],{}),zt(e).forEach(ae),this.h()},h(){cx(e,n)},m(r,s){Fe(r,e,s)},p(r,s){cx(e,n=si(t,[s&32&&r[11]]))},d(r){r&&ae(e)}}}function j9(i){let e=i[10],t,n=i[10]&&O3(i);return{c(){n&&n.c(),t=ca()},l(r){n&&n.l(r),t=ca()},m(r,s){n&&n.m(r,s),Fe(r,t,s)},p(r,s){r[10]?e?gn(e,r[10])?(n.d(1),n=O3(r),e=r[10],n.c(),n.m(t.parentNode,t)):n.p(r,s):(n=O3(r),e=r[10],n.c(),n.m(t.parentNode,t)):e&&(n.d(1),n=null,e=r[10])},d(r){r&&ae(t),n&&n.d(r)}}}function Lpt(i){let e,t,n,r,s,a=lo(i[5]),o=[];for(let d=0;d<a.length;d+=1)o[d]=j9(q9(i,a,d));const l=i[9].default,c=Yi(l,i,i[8],null);let u=[Q9,i[6],{width:i[2]},{height:i[2]},{stroke:i[1]},{"stroke-width":n=i[4]?Number(i[3])*24/Number(i[2]):i[3]},{class:r=`lucide-icon lucide lucide-${i[0]} ${i[7].class??""}`}],h={};for(let d=0;d<u.length;d+=1)h=jt(h,u[d]);return{c(){e=rL("svg");for(let d=0;d<o.length;d+=1)o[d].c();t=ca(),c&&c.c(),this.h()},l(d){e=sL(d,"svg",{width:!0,height:!0,stroke:!0,"stroke-width":!0,class:!0});var f=zt(e);for(let m=0;m<o.length;m+=1)o[m].l(f);t=ca(),c&&c.l(f),f.forEach(ae),this.h()},h(){cx(e,h)},m(d,f){Fe(d,e,f);for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(e,null);bt(e,t),c&&c.m(e,null),s=!0},p(d,[f]){if(f&32){a=lo(d[5]);let m;for(m=0;m<a.length;m+=1){const A=q9(d,a,m);o[m]?o[m].p(A,f):(o[m]=j9(A),o[m].c(),o[m].m(e,t))}for(;m<o.length;m+=1)o[m].d(1);o.length=a.length}c&&c.p&&(!s||f&256)&&Ki(c,l,d,d[8],s?Zi(l,d[8],f,null):Ji(d[8]),null),cx(e,h=si(u,[Q9,f&64&&d[6],(!s||f&4)&&{width:d[2]},(!s||f&4)&&{height:d[2]},(!s||f&2)&&{stroke:d[1]},(!s||f&28&&n!==(n=d[4]?Number(d[3])*24/Number(d[2]):d[3]))&&{"stroke-width":n},(!s||f&129&&r!==(r=`lucide-icon lucide lucide-${d[0]} ${d[7].class??""}`))&&{class:r}]))},i(d){s||(we(c,d),s=!0)},o(d){Me(c,d),s=!1},d(d){d&&ae(e),d1(o,d),c&&c.d(d)}}}function Opt(i,e,t){const n=["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"];let r=Uf(e,n),{$$slots:s={},$$scope:a}=e,{name:o}=e,{color:l="currentColor"}=e,{size:c=24}=e,{strokeWidth:u=2}=e,{absoluteStrokeWidth:h=!1}=e,{iconNode:d}=e;return i.$$set=f=>{t(7,e=jt(jt({},e),Ri(f))),t(6,r=Uf(e,n)),"name"in f&&t(0,o=f.name),"color"in f&&t(1,l=f.color),"size"in f&&t(2,c=f.size),"strokeWidth"in f&&t(3,u=f.strokeWidth),"absoluteStrokeWidth"in f&&t(4,h=f.absoluteStrokeWidth),"iconNode"in f&&t(5,d=f.iconNode),"$$scope"in f&&t(8,a=f.$$scope)},e=Ri(e),[o,l,c,u,h,d,r,e,a,s]}class Npt extends Sn{constructor(e){super(),Mn(this,e,Opt,Lpt,gn,{name:0,color:1,size:2,strokeWidth:3,absoluteStrokeWidth:4,iconNode:5})}}const Cl=Npt;function Fpt(i){let e;const t=i[2].default,n=Yi(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&Ki(n,t,r,r[3],e?Zi(t,r[3],s,null):Ji(r[3]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function zpt(i){let e,t;const n=[{name:"cat"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Fpt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=jt(r,n[s]);return e=new Cl({props:r}),{c(){ot(e.$$.fragment)},l(s){lt(e.$$.fragment,s)},m(s,a){ct(e,s,a),t=!0},p(s,[a]){const o=a&3?si(n,[n[0],a&2&&Bs(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(we(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){ut(e,s)}}}function Upt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z"}],["path",{d:"M8 14v.5"}],["path",{d:"M16 14v.5"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z"}]];return i.$$set=a=>{t(1,e=jt(jt({},e),Ri(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ri(e),[s,e,n,r]}class Vpt extends Sn{constructor(e){super(),Mn(this,e,Upt,zpt,gn,{})}}const Hpt=Vpt;function Gpt(i){let e;const t=i[2].default,n=Yi(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&Ki(n,t,r,r[3],e?Zi(t,r[3],s,null):Ji(r[3]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function Qpt(i){let e,t;const n=[{name:"chevron-right"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Gpt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=jt(r,n[s]);return e=new Cl({props:r}),{c(){ot(e.$$.fragment)},l(s){lt(e.$$.fragment,s)},m(s,a){ct(e,s,a),t=!0},p(s,[a]){const o=a&3?si(n,[n[0],a&2&&Bs(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(we(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){ut(e,s)}}}function qpt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"m9 18 6-6-6-6"}]];return i.$$set=a=>{t(1,e=jt(jt({},e),Ri(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ri(e),[s,e,n,r]}class jpt extends Sn{constructor(e){super(),Mn(this,e,qpt,Qpt,gn,{})}}const Wpt=jpt;function $pt(i){let e;const t=i[2].default,n=Yi(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&Ki(n,t,r,r[3],e?Zi(t,r[3],s,null):Ji(r[3]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function Xpt(i){let e,t;const n=[{name:"codesandbox"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[$pt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=jt(r,n[s]);return e=new Cl({props:r}),{c(){ot(e.$$.fragment)},l(s){lt(e.$$.fragment,s)},m(s,a){ct(e,s,a),t=!0},p(s,[a]){const o=a&3?si(n,[n[0],a&2&&Bs(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(we(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){ut(e,s)}}}function Ypt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}],["polyline",{points:"7.5 4.21 12 6.81 16.5 4.21"}],["polyline",{points:"7.5 19.79 7.5 14.6 3 12"}],["polyline",{points:"21 12 16.5 14.6 16.5 19.79"}],["polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}],["line",{x1:"12",x2:"12",y1:"22.08",y2:"12"}]];return i.$$set=a=>{t(1,e=jt(jt({},e),Ri(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ri(e),[s,e,n,r]}class Kpt extends Sn{constructor(e){super(),Mn(this,e,Ypt,Xpt,gn,{})}}const Jpt=Kpt;function Zpt(i){let e;const t=i[2].default,n=Yi(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&Ki(n,t,r,r[3],e?Zi(t,r[3],s,null):Ji(r[3]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function e0t(i){let e,t;const n=[{name:"eye"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Zpt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=jt(r,n[s]);return e=new Cl({props:r}),{c(){ot(e.$$.fragment)},l(s){lt(e.$$.fragment,s)},m(s,a){ct(e,s,a),t=!0},p(s,[a]){const o=a&3?si(n,[n[0],a&2&&Bs(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(we(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){ut(e,s)}}}function t0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}],["circle",{cx:"12",cy:"12",r:"3"}]];return i.$$set=a=>{t(1,e=jt(jt({},e),Ri(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ri(e),[s,e,n,r]}class n0t extends Sn{constructor(e){super(),Mn(this,e,t0t,e0t,gn,{})}}const i0t=n0t;function r0t(i){let e;const t=i[2].default,n=Yi(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&Ki(n,t,r,r[3],e?Zi(t,r[3],s,null):Ji(r[3]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function s0t(i){let e,t;const n=[{name:"grid-3x3"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[r0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=jt(r,n[s]);return e=new Cl({props:r}),{c(){ot(e.$$.fragment)},l(s){lt(e.$$.fragment,s)},m(s,a){ct(e,s,a),t=!0},p(s,[a]){const o=a&3?si(n,[n[0],a&2&&Bs(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(we(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){ut(e,s)}}}function a0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M3 9h18"}],["path",{d:"M3 15h18"}],["path",{d:"M9 3v18"}],["path",{d:"M15 3v18"}]];return i.$$set=a=>{t(1,e=jt(jt({},e),Ri(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ri(e),[s,e,n,r]}class o0t extends Sn{constructor(e){super(),Mn(this,e,a0t,s0t,gn,{})}}const W9=o0t;function l0t(i){let e;const t=i[2].default,n=Yi(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&Ki(n,t,r,r[3],e?Zi(t,r[3],s,null):Ji(r[3]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function c0t(i){let e,t;const n=[{name:"grip"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[l0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=jt(r,n[s]);return e=new Cl({props:r}),{c(){ot(e.$$.fragment)},l(s){lt(e.$$.fragment,s)},m(s,a){ct(e,s,a),t=!0},p(s,[a]){const o=a&3?si(n,[n[0],a&2&&Bs(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(we(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){ut(e,s)}}}function u0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["circle",{cx:"12",cy:"5",r:"1"}],["circle",{cx:"19",cy:"5",r:"1"}],["circle",{cx:"5",cy:"5",r:"1"}],["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"19",cy:"12",r:"1"}],["circle",{cx:"5",cy:"12",r:"1"}],["circle",{cx:"12",cy:"19",r:"1"}],["circle",{cx:"19",cy:"19",r:"1"}],["circle",{cx:"5",cy:"19",r:"1"}]];return i.$$set=a=>{t(1,e=jt(jt({},e),Ri(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ri(e),[s,e,n,r]}class h0t extends Sn{constructor(e){super(),Mn(this,e,u0t,c0t,gn,{})}}const d0t=h0t;function f0t(i){let e;const t=i[2].default,n=Yi(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&Ki(n,t,r,r[3],e?Zi(t,r[3],s,null):Ji(r[3]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function p0t(i){let e,t;const n=[{name:"image"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[f0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=jt(r,n[s]);return e=new Cl({props:r}),{c(){ot(e.$$.fragment)},l(s){lt(e.$$.fragment,s)},m(s,a){ct(e,s,a),t=!0},p(s,[a]){const o=a&3?si(n,[n[0],a&2&&Bs(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(we(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){ut(e,s)}}}function m0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]];return i.$$set=a=>{t(1,e=jt(jt({},e),Ri(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ri(e),[s,e,n,r]}let g0t=class extends Sn{constructor(e){super(),Mn(this,e,m0t,p0t,gn,{})}};const v0t=g0t;function A0t(i){let e;const t=i[2].default,n=Yi(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&Ki(n,t,r,r[3],e?Zi(t,r[3],s,null):Ji(r[3]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function _0t(i){let e,t;const n=[{name:"layers"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[A0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=jt(r,n[s]);return e=new Cl({props:r}),{c(){ot(e.$$.fragment)},l(s){lt(e.$$.fragment,s)},m(s,a){ct(e,s,a),t=!0},p(s,[a]){const o=a&3?si(n,[n[0],a&2&&Bs(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(we(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){ut(e,s)}}}function b0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["polygon",{points:"12 2 2 7 12 12 22 7 12 2"}],["polyline",{points:"2 17 12 22 22 17"}],["polyline",{points:"2 12 12 17 22 12"}]];return i.$$set=a=>{t(1,e=jt(jt({},e),Ri(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ri(e),[s,e,n,r]}class y0t extends Sn{constructor(e){super(),Mn(this,e,b0t,_0t,gn,{})}}const w0t=y0t;function x0t(i){let e;const t=i[2].default,n=Yi(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&Ki(n,t,r,r[3],e?Zi(t,r[3],s,null):Ji(r[3]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function C0t(i){let e,t;const n=[{name:"move-3d"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[x0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=jt(r,n[s]);return e=new Cl({props:r}),{c(){ot(e.$$.fragment)},l(s){lt(e.$$.fragment,s)},m(s,a){ct(e,s,a),t=!0},p(s,[a]){const o=a&3?si(n,[n[0],a&2&&Bs(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(we(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){ut(e,s)}}}function E0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M5 3v16h16"}],["path",{d:"m5 19 6-6"}],["path",{d:"m2 6 3-3 3 3"}],["path",{d:"m18 16 3 3-3 3"}]];return i.$$set=a=>{t(1,e=jt(jt({},e),Ri(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ri(e),[s,e,n,r]}class S0t extends Sn{constructor(e){super(),Mn(this,e,E0t,C0t,gn,{})}}const M0t=S0t;function T0t(i){let e;const t=i[2].default,n=Yi(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&Ki(n,t,r,r[3],e?Zi(t,r[3],s,null):Ji(r[3]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function I0t(i){let e,t;const n=[{name:"move-up-right"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[T0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=jt(r,n[s]);return e=new Cl({props:r}),{c(){ot(e.$$.fragment)},l(s){lt(e.$$.fragment,s)},m(s,a){ct(e,s,a),t=!0},p(s,[a]){const o=a&3?si(n,[n[0],a&2&&Bs(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(we(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){ut(e,s)}}}function P0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["path",{d:"M13 5H19V11"}],["path",{d:"M19 5L5 19"}]];return i.$$set=a=>{t(1,e=jt(jt({},e),Ri(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ri(e),[s,e,n,r]}class k0t extends Sn{constructor(e){super(),Mn(this,e,P0t,I0t,gn,{})}}const B0t=k0t;function R0t(i){let e;const t=i[2].default,n=Yi(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&Ki(n,t,r,r[3],e?Zi(t,r[3],s,null):Ji(r[3]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function D0t(i){let e,t;const n=[{name:"pause"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[R0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=jt(r,n[s]);return e=new Cl({props:r}),{c(){ot(e.$$.fragment)},l(s){lt(e.$$.fragment,s)},m(s,a){ct(e,s,a),t=!0},p(s,[a]){const o=a&3?si(n,[n[0],a&2&&Bs(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(we(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){ut(e,s)}}}function L0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["rect",{width:"4",height:"16",x:"6",y:"4"}],["rect",{width:"4",height:"16",x:"14",y:"4"}]];return i.$$set=a=>{t(1,e=jt(jt({},e),Ri(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ri(e),[s,e,n,r]}class O0t extends Sn{constructor(e){super(),Mn(this,e,L0t,D0t,gn,{})}}const N0t=O0t;function F0t(i){let e;const t=i[2].default,n=Yi(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&Ki(n,t,r,r[3],e?Zi(t,r[3],s,null):Ji(r[3]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function z0t(i){let e,t;const n=[{name:"play"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[F0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=jt(r,n[s]);return e=new Cl({props:r}),{c(){ot(e.$$.fragment)},l(s){lt(e.$$.fragment,s)},m(s,a){ct(e,s,a),t=!0},p(s,[a]){const o=a&3?si(n,[n[0],a&2&&Bs(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(we(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){ut(e,s)}}}function U0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["polygon",{points:"5 3 19 12 5 21 5 3"}]];return i.$$set=a=>{t(1,e=jt(jt({},e),Ri(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ri(e),[s,e,n,r]}class V0t extends Sn{constructor(e){super(),Mn(this,e,U0t,z0t,gn,{})}}const H0t=V0t;function G0t(i){let e;const t=i[2].default,n=Yi(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&Ki(n,t,r,r[3],e?Zi(t,r[3],s,null):Ji(r[3]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function Q0t(i){let e,t;const n=[{name:"scale-3d"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[G0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=jt(r,n[s]);return e=new Cl({props:r}),{c(){ot(e.$$.fragment)},l(s){lt(e.$$.fragment,s)},m(s,a){ct(e,s,a),t=!0},p(s,[a]){const o=a&3?si(n,[n[0],a&2&&Bs(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(we(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){ut(e,s)}}}function q0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["circle",{cx:"19",cy:"19",r:"2"}],["circle",{cx:"5",cy:"5",r:"2"}],["path",{d:"M5 7v12h12"}],["path",{d:"m5 19 6-6"}]];return i.$$set=a=>{t(1,e=jt(jt({},e),Ri(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ri(e),[s,e,n,r]}class j0t extends Sn{constructor(e){super(),Mn(this,e,q0t,Q0t,gn,{})}}const W0t=j0t;function $0t(i){let e;const t=i[2].default,n=Yi(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&Ki(n,t,r,r[3],e?Zi(t,r[3],s,null):Ji(r[3]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function X0t(i){let e,t;const n=[{name:"square"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[$0t]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=jt(r,n[s]);return e=new Cl({props:r}),{c(){ot(e.$$.fragment)},l(s){lt(e.$$.fragment,s)},m(s,a){ct(e,s,a),t=!0},p(s,[a]){const o=a&3?si(n,[n[0],a&2&&Bs(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){t||(we(e.$$.fragment,s),t=!0)},o(s){Me(e.$$.fragment,s),t=!1},d(s){ut(e,s)}}}function Y0t(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}]];return i.$$set=a=>{t(1,e=jt(jt({},e),Ri(a))),"$$scope"in a&&t(3,r=a.$$scope)},e=Ri(e),[s,e,n,r]}class K0t extends Sn{constructor(e){super(),Mn(this,e,Y0t,X0t,gn,{})}}const J0t=K0t;function Z0t(i){let e,t,n,r,s,a,o,l,c,u,h,d;return r=new H0t({props:{fill:"black"}}),o=new N0t({props:{fill:"black"}}),{c(){e=ft("div"),t=ft("label"),n=ft("div"),ot(r.$$.fragment),s=Ct(),a=ft("div"),ot(o.$$.fragment),l=Ct(),c=ft("input"),this.h()},l(f){e=pt(f,"DIV",{class:!0});var m=zt(e);t=pt(m,"LABEL",{class:!0});var A=zt(t);n=pt(A,"DIV",{class:!0});var _=zt(n);lt(r.$$.fragment,_),_.forEach(ae),s=Et(A),a=pt(A,"DIV",{class:!0});var v=zt(a);lt(o.$$.fragment,v),v.forEach(ae),A.forEach(ae),l=Et(m),c=pt(m,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),m.forEach(ae),this.h()},h(){Je(n,"class","swap-on"),Je(a,"class","swap-off"),Je(t,"class","swap swap-rotate"),mn(t,"swap-active",i[0]),Je(c,"type","range"),Je(c,"min",0),Je(c,"max",1),Je(c,"step",.001),Je(c,"class","range range-sm"),Je(e,"class","flex w-80 gap-3 pointer-events-auto")},m(f,m){Fe(f,e,m),bt(e,t),bt(t,n),ct(r,n,null),bt(t,s),bt(t,a),ct(o,a,null),bt(e,l),bt(e,c),og(c,i[2]),u=!0,h||(d=[Wi(t,"click",i[4]),Wi(c,"change",i[5]),Wi(c,"input",i[5]),Wi(c,"input",i[6]),Wi(c,"change",i[7])],h=!0)},p(f,[m]){(!u||m&1)&&mn(t,"swap-active",f[0]),m&4&&og(c,f[2])},i(f){u||(we(r.$$.fragment,f),we(o.$$.fragment,f),u=!0)},o(f){Me(r.$$.fragment,f),Me(o.$$.fragment,f),u=!1},d(f){f&&ae(e),ut(r),ut(o),h=!1,tv(d)}}}function emt(i,e,t){let n,r,s;Wt(i,r0,h=>t(0,n=h)),Wt(i,H3,h=>t(1,r=h)),Wt(i,hx,h=>t(2,s=h));function a(h){h.paused(!h.paused()),h.progress()==1?(tn(r0,n=!1,n),h.progress(0),h.pause(),setTimeout(()=>h.play(),500)):h.paused()?tn(r0,n=!0,n):tn(r0,n=!1,n)}const o=()=>{a(r)};function l(){s=pX(this.value),hx.set(s)}return[n,r,s,a,o,l,()=>{r.progress(s),r.pause()},()=>{tn(r0,n=!0,n)}]}class tmt extends Sn{constructor(e){super(),Mn(this,e,emt,Z0t,gn,{})}}const Nw=i=>new Proxy(i,{get(e,t,n){return Reflect.get(e,t,n)},ownKeys(e){return Reflect.ownKeys(e).filter(t=>t!=="action")}});function $9(i){function e(t){return t(i),()=>{}}return{subscribe:e}}const X9=i=>typeof i=="function";function i0(i,e){const{stores:t,action:n,returned:r}=e??{},s=(()=>{if(t&&r)return ou(t,o=>{const l=r(o);if(X9(l)){const c=(...u)=>Nw({...l(...u),[`data-melt-${i}`]:"",action:n??ig});return c.action=n??ig,c}return Nw({...l,[`data-melt-${i}`]:"",action:n??ig})});{const o=r,l=o==null?void 0:o();if(X9(l)){const c=(...u)=>Nw({...l(...u),[`data-melt-${i}`]:"",action:n??ig});return c.action=n??ig,$9(c)}return $9(Nw({...l,[`data-melt-${i}`]:"",action:n??ig}))}})(),a=n??(()=>{});return a.subscribe=s.subscribe,a}function tQ(i){const e=s=>s?`${i}-${s}`:i,t=s=>`data-melt-${i}${s?`-${s}`:""}`,n=s=>`[data-melt-${i}${s?`-${s}`:""}]`;return{name:e,attribute:t,selector:n,getEl:s=>document.querySelector(n(s))}}const nmt=typeof document<"u";function l0(i){return i instanceof HTMLElement}function nQ(...i){return(...e)=>{for(const t of i)typeof t=="function"&&t(...e)}}function ig(){}function iQ(i,e,t,n){const r=Array.isArray(e)?e:[e];return r.forEach(s=>i.addEventListener(s,t,n)),()=>{r.forEach(s=>i.removeEventListener(s,t,n))}}function bg(i,e,t,n){const r=Array.isArray(e)?e:[e];if(typeof t=="function"){const s=rmt(a=>t(a));return r.forEach(a=>i.addEventListener(a,s,n)),()=>{r.forEach(a=>i.removeEventListener(a,s,n))}}return()=>void 0}function imt(i){const e=i.currentTarget;if(!l0(e))return;const t=new CustomEvent(`m-${i.type}`,{detail:{cancel:()=>{i.preventDefault()},originalEvent:i}});e.dispatchEvent(t)}function rmt(i){return e=>{if(imt(e),!e.defaultPrevented)return i(e)}}function smt(i,...e){const t={};for(const n of Object.keys(i))e.includes(n)||(t[n]=i[n]);return t}const rQ=(i,e)=>{const t=(r,s)=>{i.update(a=>{const o=r(a);let l=o;return e&&(l=e({curr:a,next:o})),s==null||s(l),l})};return{...i,update:t,set:r=>{t(()=>r)}}};function amt(i){return new Promise(e=>setTimeout(e,i))}const au={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control"};function kT(i){const e={};return Object.keys(i).forEach(t=>{const n=t,r=i[n];e[n]=Ms(r)}),e}function rg(i){if(!nmt)return;const e=document.activeElement;l0(e)&&e!==i&&(e.tabIndex=-1,i.tabIndex=0,amt(1).then(()=>i.focus()))}RT(void 0,i=>{function e(n){i(n),i(void 0)}return iQ(document,"pointerdown",e,{passive:!1,capture:!0})});RT(void 0,i=>{function e(n){n&&n.key===au.ESCAPE&&i(n),i(void 0)}return iQ(document,"keydown",e,{passive:!1,capture:!0})});const omt={defaultPressed:!1,disabled:!1};function c0(i){const e={...omt,...i},t=kT(smt(e,"pressed")),{disabled:n}=t,r=e.pressed??Ms(e.defaultPressed),s=rQ(r,e==null?void 0:e.onPressedChange);function a(){ox(n)||s.update(c=>!c)}return{elements:{root:i0("toggle",{stores:[s,n],returned:([l,c])=>({"data-disabled":c?!0:void 0,disabled:c,"data-state":l?"on":"off","aria-pressed":l,type:"button"}),action:l=>({destroy:nQ(bg(l,"click",()=>{a()}),bg(l,"keydown",u=>{u.key!==au.ENTER&&u.key!==au.SPACE||(u.preventDefault(),a())}))})})},states:{pressed:s},options:t}}const lmt={loop:!0,orientation:"horizontal"},{name:Fw,selector:zw}=tQ("toolbar"),cmt=i=>{const e={...lmt,...i},t=kT(e),{loop:n,orientation:r}=t,s=i0(Fw(),{stores:r,returned:f=>({role:"toolbar","data-orientation":f})}),a=i0(Fw("button"),{returned:()=>({role:"button",type:"button",tabIndex:-1}),action:f=>({destroy:bg(f,"keydown",d)})}),o=i0(Fw("link"),{returned:()=>({role:"link","data-melt-toolbar-item":"",tabIndex:-1}),action:f=>({destroy:bg(f,"keydown",d)})}),l=i0(Fw("separator"),{stores:r,returned:f=>({role:"separator","data-orientation":f==="horizontal"?"vertical":"horizontal","aria-orientation":f==="horizontal"?"vertical":"horizontal"})}),c={type:"single",disabled:!1},u=f=>{const m={...c,...f},A=kT(m),{type:_,disabled:v}=A,w=m.defaultValue?m.defaultValue:m.type==="single"?void 0:[],x=m.value??Ms(w),C=rQ(x,m==null?void 0:m.onValueChange),{name:S}=tQ("toolbar-group"),I=i0(S(),{stores:r,returned:M=>({role:"group","data-orientation":M})}),P=i0(S("item"),{stores:[v,_,C,r],returned:([M,R,N,U])=>q=>{const W=typeof q=="string"?q:q.value,F=typeof q=="string"?!1:!!q.disabled,ue=M||F,J=Array.isArray(N)?N.includes(W):N===W;return{disabled:ue,pressed:J,"data-orientation":U,"data-disabled":ue?!0:void 0,"data-value":W,"data-state":J?"on":"off","aria-pressed":J,type:"button",role:R==="single"?"radio":void 0,"data-melt-toolbar-item":""}},action:M=>{function R(){const F=M.dataset.value,ue=M.dataset.disabled==="true";return{value:F,disabled:ue}}function N(){const{value:F,disabled:ue}=R();F===void 0||ue||C.update(J=>Array.isArray(J)?J.includes(F)?J.filter(Y=>Y!==F):(J.push(F),J):J===F?void 0:F)}const U=M.closest("[data-melt-toolbar]");return l0(U)?(h(U)[0]===M?M.tabIndex=0:M.tabIndex=-1,{destroy:nQ(bg(M,"click",()=>{N()}),bg(M,"keydown",F=>{if(F.key===au.ENTER||F.key===au.SPACE){F.preventDefault(),N();return}d(F)}))}):{}}}),k=ou(C,M=>R=>Array.isArray(M)?M.includes(R):M===R);return{elements:{group:I,item:P},states:{value:C},helpers:{isPressed:k},options:A}};function h(f){return Array.from(f.querySelectorAll(`${zw("item")}, ${zw("button")}`)).filter(m=>l0(m))}function d(f){const m=ox(r),A=ox(n),_={horizontal:au.ARROW_RIGHT,vertical:au.ARROW_DOWN}[m??"horizontal"],v={horizontal:au.ARROW_LEFT,vertical:au.ARROW_UP}[m??"horizontal"],w=f.currentTarget;if(!l0(w))return;const x=w.closest("[data-melt-toolbar]");if(!l0(x))return;const C=Array.from(x.querySelectorAll(`${zw("item")}, ${zw("button")}`)).filter(I=>l0(I)),S=C.indexOf(w);if(f.key===_){f.preventDefault();const I=S+1;I>=C.length&&A?rg(C[0]):rg(C[I])}else if(f.key===v){f.preventDefault();const I=S-1;I<0&&A?rg(C[C.length-1]):rg(C[I])}else f.key===au.HOME?(f.preventDefault(),rg(C[0])):f.key===au.END&&(f.preventDefault(),rg(C[C.length-1]))}return{elements:{root:s,button:a,separator:l,link:o},builders:{createToolbarGroup:u},options:t}};function umt(i){let e,t,n,r=G1.renderToString(i[0],{displayMode:i[1]})+"";return{c(){e=ft("span"),t=ft("span"),n=new i2(!1),this.h()},l(s){e=pt(s,"SPAN",{class:!0});var a=zt(e);t=pt(a,"SPAN",{});var o=zt(t);n=r2(o,!1),o.forEach(ae),a.forEach(ae),this.h()},h(){n.a=null,Je(e,"class",i[3])},m(s,a){Fe(s,e,a),bt(e,t),n.m(r,t),i[7](t)},p(s,[a]){a&3&&r!==(r=G1.renderToString(s[0],{displayMode:s[1]})+"")&&n.p(r),a&8&&Je(e,"class",s[3])},i:pn,o:pn,d(s){s&&ae(e),i[7](null)}}}function hmt(i,e,t){let n,{expr:r}=e,{display:s=!1}=e,{color:a=!1}=e,o,l="group relative";l=s?`${l} py-1 block my-5`:l,Fc(()=>{a&&Cn.utils.selector(o)});const{toggle:c,pressed:u}=c0({pressed:!0});Wt(i,u,d=>t(6,n=d));function h(d){Wa[d?"unshift":"push"](()=>{o=d,t(2,o)})}return i.$$set=d=>{"expr"in d&&t(0,r=d.expr),"display"in d&&t(1,s=d.display),"color"in d&&t(5,a=d.color)},i.$$.update=()=>{i.$$.dirty&96},[r,s,o,l,u,a,n,h]}class vl extends Sn{constructor(e){super(),Mn(this,e,hmt,umt,gn,{expr:0,display:1,color:5})}}ev.cyan[400];ev.green[400];ev.cyan[900];ev.green[900];function Ei(i,e){return`\\textcolor{${e}}{${i}}`}const sQ=String.raw`
\begin{aligned}
{\left[\begin{array}{ll}
a & b \\
c & d
\end{array}\right]\left[\begin{array}{l}
x \\
y
\end{array}\right] } & =x\left[\begin{array}{l}
a \\
c
\end{array}\right]+y\left[\begin{array}{l}
b \\
d
\end{array}\right] \\
& =\left[\begin{array}{l}
a x+b y \\
c x+d y
\end{array}\right]
\end{aligned}
`,dmt=String.raw`\left[\begin{array}{r}
  ${Hl[0]} & ${uu[0]} \\
  ${Hl[1]} & ${uu[1]}
  \end{array}\right]\left[\begin{array}{r}
  ${Nr[0]} \\
  ${Nr[1]}
  \end{array}\right]=\left[\begin{array}{l}
  ${Tg[0]} \\
  ${Tg[1]}
  \end{array}\right]`,fmt=Ei(Nr[0],c2),pmt=Ei(Nr[1],u2),aQ=Ei(String.raw`\left[\begin{array}{r}
  ${fmt} \\
  ${pmt}
  \end{array}\right]`,gu),mmt=String.raw`${aQ}=${Ei(Nr[0],c2)}\left[\begin{array}{l}
    ${Ei(1,vu)} \\
    ${Ei(0,vu)}
    \end{array}\right]
+${Ei(Nr[1],u2)}\left[\begin{array}{l}
      ${Ei(0,Au)} \\
      ${Ei(1,Au)}
      \end{array}\right]
`,gmt=Ei(Hl[0],vu),vmt=Ei(uu[0],Au),Amt=Ei(Hl[1],vu),_mt=Ei(uu[1],Au),bmt=String.raw`\left[\begin{array}{r}
${gmt} & ${vmt} \\
${Amt} & ${_mt}
\end{array}\right]`,ymt=String.raw`\left[\begin{array}{r}
  ${Ei(Hl[0],vu)} \\
  ${Ei(Hl[1],vu)}
  \end{array}\right]`,wmt=String.raw`\left[\begin{array}{r}
  ${Ei(uu[0],Au)} \\
  ${Ei(uu[1],Au)}
  \end{array}\right]`,xmt=String.raw`\left[\begin{array}{l}
  ${Ei(Tg[0],gu)} \\
  ${Ei(Tg[1],gu)}
  \end{array}\right]`,Cmt=String.raw`\begin{aligned}
{${bmt}
${aQ} } & =${Ei(Nr[0],c2)}${ymt}+${Ei(Nr[1],u2)} ${wmt} \\
& = ${xmt}
\end{aligned}
`,oQ=Ei(s2[0],vu),lQ=Ei(s2[1],vu),cQ=Ei(s2[2],vu),uQ=Ei(a2[0],Au),hQ=Ei(a2[1],Au),dQ=Ei(a2[2],Au),fQ=Ei(o2[0],f1),pQ=Ei(o2[1],f1),mQ=Ei(o2[2],f1),Emt=String.raw`\left[\begin{array}{r}
  ${oQ} & ${uQ} & ${fQ} \\
  ${lQ} & ${hQ} & ${pQ} \\
  ${cQ} & ${dQ} & ${mQ}
  \end{array}\right]`,gQ=Ei(u0[0],c2),vQ=Ei(u0[1],u2),AQ=Ei(u0[2],AX),Smt=Ei(String.raw`\left[\begin{array}{r}
  ${gQ} \\
  ${vQ} \\
  ${AQ}
  \end{array}\right]`,gu),Mmt=String.raw`\left[\begin{array}{r}
    ${oQ} \\
    ${lQ} \\
    ${cQ}
    \end{array}\right]`,Tmt=Ei(l2[0],gu),Imt=Ei(l2[1],gu),Pmt=Ei(l2[2],gu),kmt=String.raw`\begin{aligned}
& {${Emt}${Smt}} \\
& ${gQ}${Mmt}+${vQ}\left[\begin{array}{r}
${uQ} \\
${hQ} \\
${dQ}
\end{array}\right]${AQ}\left[\begin{array}{r}
${fQ} \\
${pQ} \\
${mQ}
\end{array}\right] \\
& =\left[\begin{array}{r}
${Tmt} \\
${Imt} \\
${Pmt}
\end{array}\right]
\end{aligned}`;function Bmt(i){let e,t;const n=i[1].default,r=Yi(n,i,i[0],null);return{c(){e=ft("b"),r&&r.c(),this.h()},l(s){e=pt(s,"B",{class:!0});var a=zt(e);r&&r.l(a),a.forEach(ae),this.h()},h(){Je(e,"class","text-base-content")},m(s,a){Fe(s,e,a),r&&r.m(e,null),t=!0},p(s,[a]){r&&r.p&&(!t||a&1)&&Ki(r,n,s,s[0],t?Zi(n,s[0],a,null):Ji(s[0]),null)},i(s){t||(we(r,s),t=!0)},o(s){Me(r,s),t=!1},d(s){s&&ae(e),r&&r.d(s)}}}function Rmt(i,e,t){let{$$slots:n={},$$scope:r}=e;return i.$$set=s=>{"$$scope"in s&&t(0,r=s.$$scope)},[r,n]}class GP extends Sn{constructor(e){super(),Mn(this,e,Rmt,Bmt,gn,{})}}function Dmt(i){let e,t,n=`hsl(var(--${i[0]}))`,r;const s=i[2].default,a=Yi(s,i,i[1],null);return{c(){e=ft("span"),a&&a.c(),this.h()},l(o){e=pt(o,"SPAN",{class:!0});var l=zt(e);a&&a.l(l),l.forEach(ae),this.h()},h(){Je(e,"class",t=`underline font-bold decoration-wavy decoration-2 underline-offset-4 decoration-${i[0]} text-base-content`),dl(e,"text-decoration-color",n)},m(o,l){Fe(o,e,l),a&&a.m(e,null),r=!0},p(o,[l]){a&&a.p&&(!r||l&2)&&Ki(a,s,o,o[1],r?Zi(s,o[1],l,null):Ji(o[1]),null),(!r||l&1&&t!==(t=`underline font-bold decoration-wavy decoration-2 underline-offset-4 decoration-${o[0]} text-base-content`))&&Je(e,"class",t),l&1&&n!==(n=`hsl(var(--${o[0]}))`)&&dl(e,"text-decoration-color",n)},i(o){r||(we(a,o),r=!0)},o(o){Me(a,o),r=!1},d(o){o&&ae(e),a&&a.d(o)}}}function Lmt(i,e,t){let{$$slots:n={},$$scope:r}=e,{color:s}=e;return i.$$set=a=>{"color"in a&&t(0,s=a.color),"$$scope"in a&&t(1,r=a.$$scope)},[s,r,n]}class n2 extends Sn{constructor(e){super(),Mn(this,e,Lmt,Dmt,gn,{color:0})}}function Omt(i){let e,t,n,r,s;const a=i[2].default,o=Yi(a,i,i[1],null);return{c(){e=ft("h3"),t=Un(i[0]),n=Ct(),r=ft("div"),o&&o.c(),this.h()},l(l){e=pt(l,"H3",{class:!0});var c=zt(e);t=Vn(c,i[0]),c.forEach(ae),n=Et(l),r=pt(l,"DIV",{class:!0});var u=zt(r);o&&o.l(u),u.forEach(ae),this.h()},h(){Je(e,"class","-mb-10 mt-0 font-sansAlt text-8xl text-neutral"),Je(r,"class","alert backdrop-blur-0 bg-transparent border-0 svelte-16x4qbx")},m(l,c){Fe(l,e,c),bt(e,t),Fe(l,n,c),Fe(l,r,c),o&&o.m(r,null),s=!0},p(l,[c]){(!s||c&1)&&BT(t,l[0]),o&&o.p&&(!s||c&2)&&Ki(o,a,l,l[1],s?Zi(a,l[1],c,null):Ji(l[1]),null)},i(l){s||(we(o,l),s=!0)},o(l){Me(o,l),s=!1},d(l){l&&(ae(e),ae(n),ae(r)),o&&o.d(l)}}}function Nmt(i,e,t){let{$$slots:n={},$$scope:r}=e,{title:s}=e;return i.$$set=a=>{"title"in a&&t(0,s=a.title),"$$scope"in a&&t(1,r=a.$$scope)},[s,r,n]}class _Q extends Sn{constructor(e){super(),Mn(this,e,Nmt,Omt,gn,{title:0})}}function Fmt(i){let e;const t=i[0].default,n=Yi(t,i,i[1],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&2)&&Ki(n,t,r,r[1],e?Zi(t,r[1],s,null):Ji(r[1]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function zmt(i){let e,t,n;return e=new _Q({props:{title:"Recap",$$slots:{default:[Fmt]},$$scope:{ctx:i}}}),{c(){t=ft("div"),ot(e.$$.fragment),this.h()},l(r){t=pt(r,"DIV",{style:!0});var s=zt(t);lt(e.$$.fragment,s),this.h()},h(){dl(t,"display","contents"),dl(t,"--start-color","#03e5b7"),dl(t,"--end-color","#037ade")},m(r,s){Fe(r,t,s),ct(e,t,null),n=!0},p(r,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(we(e.$$.fragment,r),n=!0)},o(r){Me(e.$$.fragment,r),n=!1},d(r){r&&e&&ae(t),ut(e,r)}}}function Umt(i,e,t){let{$$slots:n={},$$scope:r}=e;return i.$$set=s=>{"$$scope"in s&&t(1,r=s.$$scope)},[n,r]}class Vmt extends Sn{constructor(e){super(),Mn(this,e,Umt,zmt,gn,{})}}function Hmt(i){let e,t;const n=i[1].default,r=Yi(n,i,i[0],null);return{c(){e=ft("b"),r&&r.c(),this.h()},l(s){e=pt(s,"B",{class:!0});var a=zt(e);r&&r.l(a),a.forEach(ae),this.h()},h(){Je(e,"class","font-extrabold text-base-content")},m(s,a){Fe(s,e,a),r&&r.m(e,null),t=!0},p(s,[a]){r&&r.p&&(!t||a&1)&&Ki(r,n,s,s[0],t?Zi(n,s[0],a,null):Ji(s[0]),null)},i(s){t||(we(r,s),t=!0)},o(s){Me(r,s),t=!1},d(s){s&&ae(e),r&&r.d(s)}}}function Gmt(i,e,t){let{$$slots:n={},$$scope:r}=e;return i.$$set=s=>{"$$scope"in s&&t(0,r=s.$$scope)},[r,n]}class K1 extends Sn{constructor(e){super(),Mn(this,e,Gmt,Hmt,gn,{})}}function Qmt(i){let e;return{c(){e=ft("div"),this.h()},l(t){e=pt(t,"DIV",{class:!0}),zt(e).forEach(ae),this.h()},h(){Je(e,"class","h-16")},m(t,n){Fe(t,e,n)},p:pn,i:pn,o:pn,d(t){t&&ae(e)}}}class Ef extends Sn{constructor(e){super(),Mn(this,e,null,Qmt,gn,{})}}function qmt(i){let e;return{c(){e=Un("matrices")},l(t){e=Vn(t,"matrices")},m(t,n){Fe(t,e,n)},d(t){t&&ae(e)}}}function jmt(i){let e;return{c(){e=Un("visual")},l(t){e=Vn(t,"visual")},m(t,n){Fe(t,e,n)},d(t){t&&ae(e)}}}function Wmt(i){let e,t,n,r,s,a,o,l,c,u=`Why do we need a way to represent an array of rows and columns of numbers,
		and to execute computations and operations between them?`,h,d,f,m,A=`In school, you may recall reluctantly performing drill after drills of
		matrix-vector multiplications mechanically. You may even have been taught to
		memorize several inane formulas.`,_,v,w,x,C,S,I,P,k,M;return r=new K1({props:{$$slots:{default:[qmt]},$$scope:{ctx:i}}}),o=new Ef({}),d=new vl({props:{expr:dmt,display:!0}}),v=new vl({props:{expr:sQ,display:!0}}),x=new Ef({}),P=new K1({props:{$$slots:{default:[jmt]},$$scope:{ctx:i}}}),{c(){e=ft("section"),t=ft("p"),n=Un("What do "),ot(r.$$.fragment),s=Un(" mean to you?"),a=Ct(),ot(o.$$.fragment),l=Ct(),c=ft("p"),c.textContent=u,h=Ct(),ot(d.$$.fragment),f=Ct(),m=ft("p"),m.textContent=A,_=Ct(),ot(v.$$.fragment),w=Ct(),ot(x.$$.fragment),C=Ct(),S=ft("p"),I=Un("Let's explore a deeper, and a more "),ot(P.$$.fragment),k=Un(` intuition behind what matrices
		represent.`),this.h()},l(R){e=pt(R,"SECTION",{class:!0});var N=zt(e);t=pt(N,"P",{});var U=zt(t);n=Vn(U,"What do "),lt(r.$$.fragment,U),s=Vn(U," mean to you?"),U.forEach(ae),a=Et(N),lt(o.$$.fragment,N),l=Et(N),c=pt(N,"P",{"data-svelte-h":!0}),aa(c)!=="svelte-1jmwjc1"&&(c.textContent=u),h=Et(N),lt(d.$$.fragment,N),f=Et(N),m=pt(N,"P",{"data-svelte-h":!0}),aa(m)!=="svelte-bf7lvd"&&(m.textContent=A),_=Et(N),lt(v.$$.fragment,N),w=Et(N),lt(x.$$.fragment,N),C=Et(N),S=pt(N,"P",{});var q=zt(S);I=Vn(q,"Let's explore a deeper, and a more "),lt(P.$$.fragment,q),k=Vn(q,` intuition behind what matrices
		represent.`),q.forEach(ae),N.forEach(ae),this.h()},h(){Je(e,"class","prose prose-xl translate-x-[calc(-50vw-50%)] mt-[100vh] max-w-prose h-[120vh]")},m(R,N){Fe(R,e,N),bt(e,t),bt(t,n),ct(r,t,null),bt(t,s),bt(e,a),ct(o,e,null),bt(e,l),bt(e,c),bt(e,h),ct(d,e,null),bt(e,f),bt(e,m),bt(e,_),ct(v,e,null),bt(e,w),ct(x,e,null),bt(e,C),bt(e,S),bt(S,I),ct(P,S,null),bt(S,k),M=!0},p(R,[N]){const U={};N&1&&(U.$$scope={dirty:N,ctx:R}),r.$set(U);const q={};N&1&&(q.$$scope={dirty:N,ctx:R}),P.$set(q)},i(R){M||(we(r.$$.fragment,R),we(o.$$.fragment,R),we(d.$$.fragment,R),we(v.$$.fragment,R),we(x.$$.fragment,R),we(P.$$.fragment,R),M=!0)},o(R){Me(r.$$.fragment,R),Me(o.$$.fragment,R),Me(d.$$.fragment,R),Me(v.$$.fragment,R),Me(x.$$.fragment,R),Me(P.$$.fragment,R),M=!1},d(R){R&&ae(e),ut(r),ut(o),ut(d),ut(v),ut(x),ut(P)}}}class $mt extends Sn{constructor(e){super(),Mn(this,e,null,Wmt,gn,{})}}function Xmt(i){let e,t,n,r="The <br/> Matrix Arcade",s,a,o="A Visual Explorable <br/> of Matrix Transformations",l,c,u="Skip to Playground!",h,d;return{c(){e=ft("div"),t=ft("div"),n=ft("h1"),n.innerHTML=r,s=Ct(),a=ft("div"),a.innerHTML=o,l=Ct(),c=ft("button"),c.textContent=u,this.h()},l(f){e=pt(f,"DIV",{id:!0,class:!0});var m=zt(e);t=pt(m,"DIV",{class:!0});var A=zt(t);n=pt(A,"H1",{class:!0,"data-svelte-h":!0}),aa(n)!=="svelte-13u4ewn"&&(n.innerHTML=r),s=Et(A),a=pt(A,"DIV",{class:!0,"data-svelte-h":!0}),aa(a)!=="svelte-1u0glc"&&(a.innerHTML=o),l=Et(A),c=pt(A,"BUTTON",{class:!0,"data-svelte-h":!0}),aa(c)!=="svelte-c6cwxo"&&(c.textContent=u),A.forEach(ae),m.forEach(ae),this.h()},h(){Je(n,"class","text-9xl font-display drop-shadow-xl"),Je(a,"class","text-3xl font-displayAlt text-right"),Je(c,"class","playground-btn btn font-sansAlt text-xl backdrop-blur-sm bg-white/10 hover:bg-white/20 border-0 svelte-1hfnhu2"),Je(t,"class","flex flex-col gap-5 items-center"),Je(e,"id","title"),Je(e,"class","fixed top-0 left-0 right-0 z-10 grid place-content-center pt-16 px-10 max-w-5xl mx-auto")},m(f,m){Fe(f,e,m),bt(e,t),bt(t,n),bt(t,s),bt(t,a),bt(t,l),bt(t,c),h||(d=Wi(c,"click",i[2]),h=!0)},p:pn,i:pn,o:pn,d(f){f&&ae(e),h=!1,d()}}}function Ymt(i,e,t){let n,r,s;Wt(i,ux,c=>t(3,n=c)),Wt(i,Hw,c=>t(4,r=c)),Wt(i,V3,c=>t(0,s=c));let a=!1;Fc(()=>{t(1,a=!0)});function o(){Cn.timeline({scrollTrigger:{trigger:"#title",start:"top top",scrub:1,onLeave:()=>{tn(Hw,r=!1,r)},onEnterBack:()=>{tn(Hw,r=!0,r)}}}).to("#title",{autoAlpha:0}),tn(ux,n=!0,n)}const l=()=>{Cn.to(window,{scrollTo:s.end})};return i.$$.update=()=>{i.$$.dirty&2&&a&&o()},[s,a,l]}class Kmt extends Sn{constructor(e){super(),Mn(this,e,Ymt,Xmt,gn,{})}}function Jmt(i){let e,t;const n=i[2].default,r=Yi(n,i,i[1],null);return{c(){e=ft("p"),r&&r.c(),this.h()},l(s){e=pt(s,"P",{id:!0,class:!0});var a=zt(e);r&&r.l(a),a.forEach(ae),this.h()},h(){Je(e,"id",i[0]),Je(e,"class","transition-color duration-300")},m(s,a){Fe(s,e,a),r&&r.m(e,null),t=!0},p(s,[a]){r&&r.p&&(!t||a&2)&&Ki(r,n,s,s[1],t?Zi(n,s[1],a,null):Ji(s[1]),null),(!t||a&1)&&Je(e,"id",s[0])},i(s){t||(we(r,s),t=!0)},o(s){Me(r,s),t=!1},d(s){s&&ae(e),r&&r.d(s)}}}function Zmt(i,e,t){let{$$slots:n={},$$scope:r}=e,{id:s}=e;return i.$$set=a=>{"id"in a&&t(0,s=a.id),"$$scope"in a&&t(1,r=a.$$scope)},[s,r,n]}class wc extends Sn{constructor(e){super(),Mn(this,e,Zmt,Jmt,gn,{id:0})}}function egt(i){let e;const t=i[0].default,n=Yi(t,i,i[1],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&2)&&Ki(n,t,r,r[1],e?Zi(t,r[1],s,null):Ji(r[1]),null)},i(r){e||(we(n,r),e=!0)},o(r){Me(n,r),e=!1},d(r){n&&n.d(r)}}}function tgt(i){let e,t,n;return e=new _Q({props:{title:"Try it",$$slots:{default:[egt]},$$scope:{ctx:i}}}),{c(){t=ft("div"),ot(e.$$.fragment),this.h()},l(r){t=pt(r,"DIV",{style:!0});var s=zt(t);lt(e.$$.fragment,s),this.h()},h(){dl(t,"display","contents"),dl(t,"--start-color","#fefedf"),dl(t,"--end-color","#c493ff")},m(r,s){Fe(r,t,s),ct(e,t,null),n=!0},p(r,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(we(e.$$.fragment,r),n=!0)},o(r){Me(e.$$.fragment,r),n=!1},d(r){r&&e&&ae(t),ut(e,r)}}}function ngt(i,e,t){let{$$slots:n={},$$scope:r}=e;return i.$$set=s=>{"$$scope"in s&&t(1,r=s.$$scope)},[n,r]}class bQ extends Sn{constructor(e){super(),Mn(this,e,ngt,tgt,gn,{})}}function igt(i){let e,t;const n=i[2].default,r=Yi(n,i,i[1],null);return{c(){e=ft("section"),r&&r.c(),this.h()},l(s){e=pt(s,"SECTION",{id:!0,class:!0});var a=zt(e);r&&r.l(a),a.forEach(ae),this.h()},h(){Je(e,"id",i[0]),Je(e,"class","prose prose-xl [&>*]:px-10 mb-60 svelte-1b63hsf")},m(s,a){Fe(s,e,a),r&&r.m(e,null),t=!0},p(s,[a]){r&&r.p&&(!t||a&2)&&Ki(r,n,s,s[1],t?Zi(n,s[1],a,null):Ji(s[1]),null),(!t||a&1)&&Je(e,"id",s[0])},i(s){t||(we(r,s),t=!0)},o(s){Me(r,s),t=!1},d(s){s&&ae(e),r&&r.d(s)}}}function rgt(i,e,t){let{$$slots:n={},$$scope:r}=e,{id:s=null}=e;return i.$$set=a=>{"id"in a&&t(0,s=a.id),"$$scope"in a&&t(1,r=a.$$scope)},[s,r,n]}class Y9 extends Sn{constructor(e){super(),Mn(this,e,rgt,igt,gn,{id:0})}}function sgt(i){let e;return{c(){e=Un("transforms")},l(t){e=Vn(t,"transforms")},m(t,n){Fe(t,e,n)},d(t){t&&ae(e)}}}function agt(i){let e;return{c(){e=Un("vector")},l(t){e=Vn(t,"vector")},m(t,n){Fe(t,e,n)},d(t){t&&ae(e)}}}function ogt(i){let e,t,n,r;return t=new n2({props:{color:"in",$$slots:{default:[agt]},$$scope:{ctx:i}}}),{c(){e=Un("Let's first think about what the coordinates of a "),ot(t.$$.fragment),n=Un(" represent.")},l(s){e=Vn(s,"Let's first think about what the coordinates of a "),lt(t.$$.fragment,s),n=Vn(s," represent.")},m(s,a){Fe(s,e,a),ct(t,s,a),Fe(s,n,a),r=!0},p(s,a){const o={};a&1&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(we(t.$$.fragment,s),r=!0)},o(s){Me(t.$$.fragment,s),r=!1},d(s){s&&(ae(e),ae(n)),ut(t,s)}}}function lgt(i){let e,t,n;return e=new vl({props:{expr:"x"}}),{c(){ot(e.$$.fragment),t=Un("-direction")},l(r){lt(e.$$.fragment,r),t=Vn(r,"-direction")},m(r,s){ct(e,r,s),Fe(r,t,s),n=!0},p:pn,i(r){n||(we(e.$$.fragment,r),n=!0)},o(r){Me(e.$$.fragment,r),n=!1},d(r){r&&ae(t),ut(e,r)}}}function cgt(i){let e,t,n;return e=new vl({props:{expr:"y"}}),{c(){ot(e.$$.fragment),t=Un("-direction")},l(r){lt(e.$$.fragment,r),t=Vn(r,"-direction")},m(r,s){ct(e,r,s),Fe(r,t,s),n=!0},p:pn,i(r){n||(we(e.$$.fragment,r),n=!0)},o(r){Me(e.$$.fragment,r),n=!1},d(r){r&&ae(t),ut(e,r)}}}function ugt(i){let e,t,n,r,s,a,o,l,c;return t=new vl({props:{expr:"xy"}}),s=new n2({props:{color:"p",$$slots:{default:[lgt]},$$scope:{ctx:i}}}),o=new n2({props:{color:"s",$$slots:{default:[cgt]},$$scope:{ctx:i}}}),{c(){e=Un("In the "),ot(t.$$.fragment),n=Un(`-coordinate plane, any vector can be thought of
			as the sum of two scaled vectors: the unit vector in the
			`),r=ft("nobr"),ot(s.$$.fragment),a=Un(`,
			and the unit vector in the `),ot(o.$$.fragment),l=Un(".")},l(u){e=Vn(u,"In the "),lt(t.$$.fragment,u),n=Vn(u,`-coordinate plane, any vector can be thought of
			as the sum of two scaled vectors: the unit vector in the
			`),r=pt(u,"NOBR",{});var h=zt(r);lt(s.$$.fragment,h),h.forEach(ae),a=Vn(u,`,
			and the unit vector in the `),lt(o.$$.fragment,u),l=Vn(u,".")},m(u,h){Fe(u,e,h),ct(t,u,h),Fe(u,n,h),Fe(u,r,h),ct(s,r,null),Fe(u,a,h),ct(o,u,h),Fe(u,l,h),c=!0},p(u,h){const d={};h&1&&(d.$$scope={dirty:h,ctx:u}),s.$set(d);const f={};h&1&&(f.$$scope={dirty:h,ctx:u}),o.$set(f)},i(u){c||(we(t.$$.fragment,u),we(s.$$.fragment,u),we(o.$$.fragment,u),c=!0)},o(u){Me(t.$$.fragment,u),Me(s.$$.fragment,u),Me(o.$$.fragment,u),c=!1},d(u){u&&(ae(e),ae(n),ae(r),ae(a),ae(l)),ut(t,u),ut(s),ut(o,u)}}}function hgt(i){let e;return{c(){e=Un("standard basis vectors")},l(t){e=Vn(t,"standard basis vectors")},m(t,n){Fe(t,e,n)},d(t){t&&ae(e)}}}function dgt(i){let e,t,n,r,s;return e=new vl({props:{expr:mmt,display:!0,color:!0}}),n=new GP({props:{$$slots:{default:[hgt]},$$scope:{ctx:i}}}),{c(){ot(e.$$.fragment),t=Un(`
			These are also known as our `),ot(n.$$.fragment),r=Un(`. The
			vector's coordinates encode the amount to scale each individual basis
			vector, before adding them up.`)},l(a){lt(e.$$.fragment,a),t=Vn(a,`
			These are also known as our `),lt(n.$$.fragment,a),r=Vn(a,`. The
			vector's coordinates encode the amount to scale each individual basis
			vector, before adding them up.`)},m(a,o){ct(e,a,o),Fe(a,t,o),ct(n,a,o),Fe(a,r,o),s=!0},p(a,o){const l={};o&1&&(l.$$scope={dirty:o,ctx:a}),n.$set(l)},i(a){s||(we(e.$$.fragment,a),we(n.$$.fragment,a),s=!0)},o(a){Me(e.$$.fragment,a),Me(n.$$.fragment,a),s=!1},d(a){a&&(ae(t),ae(r)),ut(e,a),ut(n,a)}}}function fgt(i){let e;return{c(){e=Un("linear combination")},l(t){e=Vn(t,"linear combination")},m(t,n){Fe(t,e,n)},d(t){t&&ae(e)}}}function pgt(i){let e;return{c(){e=Un("transforming the original basis vectors")},l(t){e=Vn(t,"transforming the original basis vectors")},m(t,n){Fe(t,e,n)},d(t){t&&ae(e)}}}function mgt(i){let e,t,n,r;return t=new K1({props:{$$slots:{default:[pgt]},$$scope:{ctx:i}}}),{c(){e=Un(`In other words, a matrix can be viewed as a way of packaging information
			about our new basis vectors. This is the core insight: a matrix transforms
			a vector by `),ot(t.$$.fragment),n=Un(`; creating an
			entirely new coordinate system.`)},l(s){e=Vn(s,`In other words, a matrix can be viewed as a way of packaging information
			about our new basis vectors. This is the core insight: a matrix transforms
			a vector by `),lt(t.$$.fragment,s),n=Vn(s,`; creating an
			entirely new coordinate system.`)},m(s,a){Fe(s,e,a),ct(t,s,a),Fe(s,n,a),r=!0},p(s,a){const o={};a&1&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(we(t.$$.fragment,s),r=!0)},o(s){Me(t.$$.fragment,s),r=!1},d(s){s&&(ae(e),ae(n)),ut(t,s)}}}function ggt(i){let e;return{c(){e=Un(`Again, the transformed vector is a linear combination of the new basis
			vectors, which are scaled by the coordinates of the original vector.`)},l(t){e=Vn(t,`Again, the transformed vector is a linear combination of the new basis
			vectors, which are scaled by the coordinates of the original vector.`)},m(t,n){Fe(t,e,n)},d(t){t&&ae(e)}}}function vgt(i){let e;return{c(){e=Un(`In order to make the space less visually cluttered, we can represent each
			vector as a point in space instead. We'll transform the grid lines along
			too, overlaying on top a copy of the original.`)},l(t){e=Vn(t,`In order to make the space less visually cluttered, we can represent each
			vector as a point in space instead. We'll transform the grid lines along
			too, overlaying on top a copy of the original.`)},m(t,n){Fe(t,e,n)},d(t){t&&ae(e)}}}function Agt(i){let e;return{c(){e=Un(`The transformation appears to rotate and stretch the space, accordingly
			with where the new basis vectors land.`)},l(t){e=Vn(t,`The transformation appears to rotate and stretch the space, accordingly
			with where the new basis vectors land.`)},m(t,n){Fe(t,e,n)},d(t){t&&ae(e)}}}function _gt(i){let e;return{c(){e=Un("linear transformation")},l(t){e=Vn(t,"linear transformation")},m(t,n){Fe(t,e,n)},d(t){t&&ae(e)}}}function bgt(i){let e,t,n,r;return t=new GP({props:{$$slots:{default:[_gt]},$$scope:{ctx:i}}}),{c(){e=Un(`As we'll see when you have a chance to tinker around with different basis
			vectors, a matrix performs a particular kind of transformation, called a `),ot(t.$$.fragment),n=Un(". Visually, you'll notice that:")},l(s){e=Vn(s,`As we'll see when you have a chance to tinker around with different basis
			vectors, a matrix performs a particular kind of transformation, called a `),lt(t.$$.fragment,s),n=Vn(s,". Visually, you'll notice that:")},m(s,a){Fe(s,e,a),ct(t,s,a),Fe(s,n,a),r=!0},p(s,a){const o={};a&1&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(we(t.$$.fragment,s),r=!0)},o(s){Me(t.$$.fragment,s),r=!1},d(s){s&&(ae(e),ae(n)),ut(t,s)}}}function ygt(i){let e,t=`<li>Any vector can be expressed as the addition of scaled basis vectors;
						or a linear combination of basis vectors.</li> <li>A matrix can be viewed as a way to package information about a
						linear transformation. The columns of a matrix represent where the
						new basis vectors land after the transformation.</li> <li>Matrix-vector multiplication is a way to compute where a given
						vector lands after the transformation defined by a matrix.</li>`;return{c(){e=ft("ul"),e.innerHTML=t},l(n){e=pt(n,"UL",{"data-svelte-h":!0}),aa(e)!=="svelte-a8c66x"&&(e.innerHTML=t)},m(n,r){Fe(n,e,r)},p:pn,d(n){n&&ae(e)}}}function wgt(i){let e;return{c(){e=Un(`With our understanding so far, try to tinker about and figure out what
				kinds of transformations are possible with matrices! What basis vectors
				should you choose in order to scale space uniformly in all directions?
				How about a reflection, rotation or a shear?`)},l(t){e=Vn(t,`With our understanding so far, try to tinker about and figure out what
				kinds of transformations are possible with matrices! What basis vectors
				should you choose in order to scale space uniformly in all directions?
				How about a reflection, rotation or a shear?`)},m(t,n){Fe(t,e,n)},d(t){t&&ae(e)}}}function xgt(i){let e,t="<li>Toggle the numbers in the matrix...</li> <li>Drag the scrubber...</li> <li>Pan and zoom in / out the canvas</li>";return{c(){e=ft("ul"),e.innerHTML=t},l(n){e=pt(n,"UL",{"data-svelte-h":!0}),aa(e)!=="svelte-8jsych"&&(e.innerHTML=t)},m(n,r){Fe(n,e,r)},p:pn,d(n){n&&ae(e)}}}function Cgt(i){let e,t,n,r,s,a,o,l,c,u,h,d,f,m,A,_,v,w,x,C,S,I,P,k=`Did you notice anything similar with the expression for matrix-vector
			multiplication? A vector multiplied with a matrix can also be expressed as
			a linear combination; this time with the standard basis vectors replaced
			by the columns of the matrix.`,M,R,N,U,q,W,F,ue,J,Y,Pe=`In that vein, a matrix transformation appears to warp and transform space
			itself. In order to get a more visceral feel of this, let's visualize what
			happens to not just a single vector, but a sample of vectors in space,
			each multiplied by the same matrix.`,Ie,pe,Ce,G,oe,je,Tt,rt,De=`<li>All lines in the original space remain as lines, without getting curved,
				and</li> <li>Origin remains fixed in place.</li>`,xt,mt,et=`As an example, all grid lines stay parallel and evenly spaced after the
			transformation.`,st,ce,tt,he,be,Ne,nt,ze,me,fe,Be,V,$;return n=new K1({props:{$$slots:{default:[sgt]},$$scope:{ctx:i}}}),a=new Ef({}),l=new wc({props:{id:"st-1",$$slots:{default:[ogt]},$$scope:{ctx:i}}}),u=new wc({props:{id:"st-2",$$slots:{default:[ugt]},$$scope:{ctx:i}}}),d=new wc({props:{id:"st-3",$$slots:{default:[dgt]},$$scope:{ctx:i}}}),_=new GP({props:{$$slots:{default:[fgt]},$$scope:{ctx:i}}}),x=new Ef({}),S=new vl({props:{expr:sQ,display:!0}}),R=new vl({props:{expr:Cmt,display:!0,color:!0}}),U=new wc({props:{id:"st-4",$$slots:{default:[mgt]},$$scope:{ctx:i}}}),W=new wc({props:{id:"st-5",$$slots:{default:[ggt]},$$scope:{ctx:i}}}),ue=new Ef({}),pe=new wc({props:{id:"st-6",$$slots:{default:[vgt]},$$scope:{ctx:i}}}),G=new wc({props:{id:"st-7",$$slots:{default:[Agt]},$$scope:{ctx:i}}}),je=new wc({props:{$$slots:{default:[bgt]},$$scope:{ctx:i}}}),ce=new Ef({}),be=new Vmt({props:{$$slots:{default:[ygt]},$$scope:{ctx:i}}}),nt=new Ef({}),fe=new wc({props:{id:"st-8",$$slots:{default:[wgt]},$$scope:{ctx:i}}}),V=new bQ({props:{$$slots:{default:[xgt]},$$scope:{ctx:i}}}),{c(){e=ft("p"),t=Un("A vector multiplied by a matrix returns a new vector  it "),ot(n.$$.fragment),r=Un(" a vector into a new vector. Let's visualize this transformation with an example."),s=Ct(),ot(a.$$.fragment),o=Ct(),ot(l.$$.fragment),c=Ct(),ot(u.$$.fragment),h=Ct(),ot(d.$$.fragment),f=Ct(),m=ft("p"),A=Un("This scaling and addition of vectors is called a "),ot(_.$$.fragment),v=Un(`, and every vector can be expressed as a linear combination of basis
			vectors.`),w=Ct(),ot(x.$$.fragment),C=Ct(),ot(S.$$.fragment),I=Ct(),P=ft("p"),P.textContent=k,M=Ct(),ot(R.$$.fragment),N=Ct(),ot(U.$$.fragment),q=Ct(),ot(W.$$.fragment),F=Ct(),ot(ue.$$.fragment),J=Ct(),Y=ft("p"),Y.textContent=Pe,Ie=Ct(),ot(pe.$$.fragment),Ce=Ct(),ot(G.$$.fragment),oe=Ct(),ot(je.$$.fragment),Tt=Ct(),rt=ft("ul"),rt.innerHTML=De,xt=Ct(),mt=ft("p"),mt.textContent=et,st=Ct(),ot(ce.$$.fragment),tt=Ct(),he=ft("div"),ot(be.$$.fragment),Ne=Ct(),ot(nt.$$.fragment),ze=Ct(),me=ft("div"),ot(fe.$$.fragment),Be=Ct(),ot(V.$$.fragment),this.h()},l(ee){e=pt(ee,"P",{});var Te=zt(e);t=Vn(Te,"A vector multiplied by a matrix returns a new vector  it "),lt(n.$$.fragment,Te),r=Vn(Te," a vector into a new vector. Let's visualize this transformation with an example."),Te.forEach(ae),s=Et(ee),lt(a.$$.fragment,ee),o=Et(ee),lt(l.$$.fragment,ee),c=Et(ee),lt(u.$$.fragment,ee),h=Et(ee),lt(d.$$.fragment,ee),f=Et(ee),m=pt(ee,"P",{});var te=zt(m);A=Vn(te,"This scaling and addition of vectors is called a "),lt(_.$$.fragment,te),v=Vn(te,`, and every vector can be expressed as a linear combination of basis
			vectors.`),te.forEach(ae),w=Et(ee),lt(x.$$.fragment,ee),C=Et(ee),lt(S.$$.fragment,ee),I=Et(ee),P=pt(ee,"P",{"data-svelte-h":!0}),aa(P)!=="svelte-w4uap8"&&(P.textContent=k),M=Et(ee),lt(R.$$.fragment,ee),N=Et(ee),lt(U.$$.fragment,ee),q=Et(ee),lt(W.$$.fragment,ee),F=Et(ee),lt(ue.$$.fragment,ee),J=Et(ee),Y=pt(ee,"P",{"data-svelte-h":!0}),aa(Y)!=="svelte-1fecpql"&&(Y.textContent=Pe),Ie=Et(ee),lt(pe.$$.fragment,ee),Ce=Et(ee),lt(G.$$.fragment,ee),oe=Et(ee),lt(je.$$.fragment,ee),Tt=Et(ee),rt=pt(ee,"UL",{class:!0,"data-svelte-h":!0}),aa(rt)!=="svelte-y55y8j"&&(rt.innerHTML=De),xt=Et(ee),mt=pt(ee,"P",{"data-svelte-h":!0}),aa(mt)!=="svelte-1pjfjep"&&(mt.textContent=et),st=Et(ee),lt(ce.$$.fragment,ee),tt=Et(ee),he=pt(ee,"DIV",{});var Qe=zt(he);lt(be.$$.fragment,Qe),Qe.forEach(ae),Ne=Et(ee),lt(nt.$$.fragment,ee),ze=Et(ee),me=pt(ee,"DIV",{class:!0});var Vt=zt(me);lt(fe.$$.fragment,Vt),Be=Et(Vt),lt(V.$$.fragment,Vt),Vt.forEach(ae),this.h()},h(){Je(rt,"class","ml-4"),Je(me,"class","h-[80vh] grid place-content-center")},m(ee,Te){Fe(ee,e,Te),bt(e,t),ct(n,e,null),bt(e,r),Fe(ee,s,Te),ct(a,ee,Te),Fe(ee,o,Te),ct(l,ee,Te),Fe(ee,c,Te),ct(u,ee,Te),Fe(ee,h,Te),ct(d,ee,Te),Fe(ee,f,Te),Fe(ee,m,Te),bt(m,A),ct(_,m,null),bt(m,v),Fe(ee,w,Te),ct(x,ee,Te),Fe(ee,C,Te),ct(S,ee,Te),Fe(ee,I,Te),Fe(ee,P,Te),Fe(ee,M,Te),ct(R,ee,Te),Fe(ee,N,Te),ct(U,ee,Te),Fe(ee,q,Te),ct(W,ee,Te),Fe(ee,F,Te),ct(ue,ee,Te),Fe(ee,J,Te),Fe(ee,Y,Te),Fe(ee,Ie,Te),ct(pe,ee,Te),Fe(ee,Ce,Te),ct(G,ee,Te),Fe(ee,oe,Te),ct(je,ee,Te),Fe(ee,Tt,Te),Fe(ee,rt,Te),Fe(ee,xt,Te),Fe(ee,mt,Te),Fe(ee,st,Te),ct(ce,ee,Te),Fe(ee,tt,Te),Fe(ee,he,Te),ct(be,he,null),Fe(ee,Ne,Te),ct(nt,ee,Te),Fe(ee,ze,Te),Fe(ee,me,Te),ct(fe,me,null),bt(me,Be),ct(V,me,null),$=!0},p(ee,Te){const te={};Te&1&&(te.$$scope={dirty:Te,ctx:ee}),n.$set(te);const Qe={};Te&1&&(Qe.$$scope={dirty:Te,ctx:ee}),l.$set(Qe);const Vt={};Te&1&&(Vt.$$scope={dirty:Te,ctx:ee}),u.$set(Vt);const ye={};Te&1&&(ye.$$scope={dirty:Te,ctx:ee}),d.$set(ye);const Ee={};Te&1&&(Ee.$$scope={dirty:Te,ctx:ee}),_.$set(Ee);const St={};Te&1&&(St.$$scope={dirty:Te,ctx:ee}),U.$set(St);const Rt={};Te&1&&(Rt.$$scope={dirty:Te,ctx:ee}),W.$set(Rt);const Bt={};Te&1&&(Bt.$$scope={dirty:Te,ctx:ee}),pe.$set(Bt);const Qt={};Te&1&&(Qt.$$scope={dirty:Te,ctx:ee}),G.$set(Qt);const Nt={};Te&1&&(Nt.$$scope={dirty:Te,ctx:ee}),je.$set(Nt);const $t={};Te&1&&($t.$$scope={dirty:Te,ctx:ee}),be.$set($t);const Qn={};Te&1&&(Qn.$$scope={dirty:Te,ctx:ee}),fe.$set(Qn);const de={};Te&1&&(de.$$scope={dirty:Te,ctx:ee}),V.$set(de)},i(ee){$||(we(n.$$.fragment,ee),we(a.$$.fragment,ee),we(l.$$.fragment,ee),we(u.$$.fragment,ee),we(d.$$.fragment,ee),we(_.$$.fragment,ee),we(x.$$.fragment,ee),we(S.$$.fragment,ee),we(R.$$.fragment,ee),we(U.$$.fragment,ee),we(W.$$.fragment,ee),we(ue.$$.fragment,ee),we(pe.$$.fragment,ee),we(G.$$.fragment,ee),we(je.$$.fragment,ee),we(ce.$$.fragment,ee),we(be.$$.fragment,ee),we(nt.$$.fragment,ee),we(fe.$$.fragment,ee),we(V.$$.fragment,ee),$=!0)},o(ee){Me(n.$$.fragment,ee),Me(a.$$.fragment,ee),Me(l.$$.fragment,ee),Me(u.$$.fragment,ee),Me(d.$$.fragment,ee),Me(_.$$.fragment,ee),Me(x.$$.fragment,ee),Me(S.$$.fragment,ee),Me(R.$$.fragment,ee),Me(U.$$.fragment,ee),Me(W.$$.fragment,ee),Me(ue.$$.fragment,ee),Me(pe.$$.fragment,ee),Me(G.$$.fragment,ee),Me(je.$$.fragment,ee),Me(ce.$$.fragment,ee),Me(be.$$.fragment,ee),Me(nt.$$.fragment,ee),Me(fe.$$.fragment,ee),Me(V.$$.fragment,ee),$=!1},d(ee){ee&&(ae(e),ae(s),ae(o),ae(c),ae(h),ae(f),ae(m),ae(w),ae(C),ae(I),ae(P),ae(M),ae(N),ae(q),ae(F),ae(J),ae(Y),ae(Ie),ae(Ce),ae(oe),ae(Tt),ae(rt),ae(xt),ae(mt),ae(st),ae(tt),ae(he),ae(Ne),ae(ze),ae(me)),ut(n),ut(a,ee),ut(l,ee),ut(u,ee),ut(d,ee),ut(_),ut(x,ee),ut(S,ee),ut(R,ee),ut(U,ee),ut(W,ee),ut(ue,ee),ut(pe,ee),ut(G,ee),ut(je,ee),ut(ce,ee),ut(be),ut(nt,ee),ut(fe),ut(V)}}}function Egt(i){let e;return{c(){e=Un("higher dimensions")},l(t){e=Vn(t,"higher dimensions")},m(t,n){Fe(t,e,n)},d(t){t&&ae(e)}}}function Sgt(i){let e,t,n;return e=new vl({props:{expr:"z"}}),{c(){ot(e.$$.fragment),t=Un("-direction")},l(r){lt(e.$$.fragment,r),t=Vn(r,"-direction")},m(r,s){ct(e,r,s),Fe(r,t,s),n=!0},p:pn,i(r){n||(we(e.$$.fragment,r),n=!0)},o(r){Me(e.$$.fragment,r),n=!1},d(r){r&&ae(t),ut(e,r)}}}function Mgt(i){let e,t,n,r,s,a,o,l,c,u,h;return t=new n2({props:{color:"a",$$slots:{default:[Sgt]},$$scope:{ctx:i}}}),r=new vl({props:{expr:"3"}}),a=new vl({props:{expr:"xyz"}}),c=new vl({props:{expr:"3\\times3"}}),{c(){e=Un(`To make up three dimensions, we have yet another standard basis vector 
			the unit vector in the `),ot(t.$$.fragment),n=Un(". This also means we're now fiddling around with vectors of length "),ot(r.$$.fragment),s=Un("  representing the "),ot(a.$$.fragment),o=Un(` coordinates  and matrices of size
			`),l=ft("nobr"),ot(c.$$.fragment),u=Un(".")},l(d){e=Vn(d,`To make up three dimensions, we have yet another standard basis vector 
			the unit vector in the `),lt(t.$$.fragment,d),n=Vn(d,". This also means we're now fiddling around with vectors of length "),lt(r.$$.fragment,d),s=Vn(d,"  representing the "),lt(a.$$.fragment,d),o=Vn(d,` coordinates  and matrices of size
			`),l=pt(d,"NOBR",{});var f=zt(l);lt(c.$$.fragment,f),f.forEach(ae),u=Vn(d,".")},m(d,f){Fe(d,e,f),ct(t,d,f),Fe(d,n,f),ct(r,d,f),Fe(d,s,f),ct(a,d,f),Fe(d,o,f),Fe(d,l,f),ct(c,l,null),Fe(d,u,f),h=!0},p(d,f){const m={};f&1&&(m.$$scope={dirty:f,ctx:d}),t.$set(m)},i(d){h||(we(t.$$.fragment,d),we(r.$$.fragment,d),we(a.$$.fragment,d),we(c.$$.fragment,d),h=!0)},o(d){Me(t.$$.fragment,d),Me(r.$$.fragment,d),Me(a.$$.fragment,d),Me(c.$$.fragment,d),h=!1},d(d){d&&(ae(e),ae(n),ae(s),ae(o),ae(l),ae(u)),ut(t,d),ut(r,d),ut(a,d),ut(c)}}}function Tgt(i){let e;return{c(){e=Un(`The concept of matrix transformations in 3D is exactly the same. The three
			basis vectors are transformed to their new locations, warping space along
			with them. These locations are completely determined by the columns of the
			matrix.`)},l(t){e=Vn(t,`The concept of matrix transformations in 3D is exactly the same. The three
			basis vectors are transformed to their new locations, warping space along
			with them. These locations are completely determined by the columns of the
			matrix.`)},m(t,n){Fe(t,e,n)},d(t){t&&ae(e)}}}function Igt(i){let e;return{c(){e=Un(`Originally, any vector is composed of a linear combination of these three
			standard basis vectors. To figure out the where the vector lands after the
			transformation, it is a linear combination of the transformed basis
			vectors, each scaled by the respective coordinates in the starting vector.`)},l(t){e=Vn(t,`Originally, any vector is composed of a linear combination of these three
			standard basis vectors. To figure out the where the vector lands after the
			transformation, it is a linear combination of the transformed basis
			vectors, each scaled by the respective coordinates in the starting vector.`)},m(t,n){Fe(t,e,n)},d(t){t&&ae(e)}}}function Pgt(i){let e,t="<li>Right click and drag to rotate...</li>";return{c(){e=ft("ul"),e.innerHTML=t},l(n){e=pt(n,"UL",{"data-svelte-h":!0}),aa(e)!=="svelte-17hm5pj"&&(e.innerHTML=t)},m(n,r){Fe(n,e,r)},p:pn,d(n){n&&ae(e)}}}function kgt(i){let e,t="Transformations Beyond Two-Dimensions",n,r,s,a,o,l,c,u,h,d,f,m,A,_,v,w,x,C=`Talk about application in computer graphics... give a concrete example
			visually. Give other examples of applications of matrices...`,S,I,P,k,M=`Go forth and improve your intuition of matrix transformations in 3D! Now
			you have a whole additional dimension to fidget around with.`,R,N,U,q,W,F=`Lorem, ipsum dolor sit amet consectetur adipisicing elit. Id repellendus
			in incidunt impedit quos voluptatem itaque saepe ab alias, amet iste,
			recusandae ratione est veniam corrupti neque ea! Quasi, quaerat.`,ue,J,Y=`Lorem, ipsum dolor sit amet consectetur adipisicing elit. Id repellendus
			in incidunt impedit quos voluptatem itaque saepe ab alias, amet iste,
			recusandae ratione est veniam corrupti neque ea! Quasi, quaerat.`,Pe,Ie,pe=`Lorem, ipsum dolor sit amet consectetur adipisicing elit. Id repellendus
			in incidunt impedit quos voluptatem itaque saepe ab alias, amet iste,
			recusandae ratione est veniam corrupti neque ea! Quasi, quaerat.`,Ce;return a=new vl({props:{expr:"xy"}}),l=new K1({props:{$$slots:{default:[Egt]},$$scope:{ctx:i}}}),h=new wc({props:{id:"st-9",$$slots:{default:[Mgt]},$$scope:{ctx:i}}}),f=new wc({props:{id:"st-10",$$slots:{default:[Tgt]},$$scope:{ctx:i}}}),A=new vl({props:{expr:kmt,display:!0,color:!0}}),v=new wc({props:{id:"st-11",$$slots:{default:[Igt]},$$scope:{ctx:i}}}),I=new Ef({}),U=new bQ({props:{$$slots:{default:[Pgt]},$$scope:{ctx:i}}}),{c(){e=ft("h2"),e.textContent=t,n=Ct(),r=ft("p"),s=Un(`So far we've only been talking about matrix transformations in
			two-dimensions on the `),ot(a.$$.fragment),o=Un(`-plane. Do the same intuitions
			carry over to `),ot(l.$$.fragment),c=Un("?"),u=Ct(),ot(h.$$.fragment),d=Ct(),ot(f.$$.fragment),m=Ct(),ot(A.$$.fragment),_=Ct(),ot(v.$$.fragment),w=Ct(),x=ft("p"),x.textContent=C,S=Ct(),ot(I.$$.fragment),P=Ct(),k=ft("p"),k.textContent=M,R=Ct(),N=ft("div"),ot(U.$$.fragment),q=Ct(),W=ft("p"),W.textContent=F,ue=Ct(),J=ft("p"),J.textContent=Y,Pe=Ct(),Ie=ft("p"),Ie.textContent=pe,this.h()},l(G){e=pt(G,"H2",{id:!0,"data-svelte-h":!0}),aa(e)!=="svelte-pk4own"&&(e.textContent=t),n=Et(G),r=pt(G,"P",{});var oe=zt(r);s=Vn(oe,`So far we've only been talking about matrix transformations in
			two-dimensions on the `),lt(a.$$.fragment,oe),o=Vn(oe,`-plane. Do the same intuitions
			carry over to `),lt(l.$$.fragment,oe),c=Vn(oe,"?"),oe.forEach(ae),u=Et(G),lt(h.$$.fragment,G),d=Et(G),lt(f.$$.fragment,G),m=Et(G),lt(A.$$.fragment,G),_=Et(G),lt(v.$$.fragment,G),w=Et(G),x=pt(G,"P",{"data-svelte-h":!0}),aa(x)!=="svelte-aac63h"&&(x.textContent=C),S=Et(G),lt(I.$$.fragment,G),P=Et(G),k=pt(G,"P",{id:!0,"data-svelte-h":!0}),aa(k)!=="svelte-p22by3"&&(k.textContent=M),R=Et(G),N=pt(G,"DIV",{});var je=zt(N);lt(U.$$.fragment,je),je.forEach(ae),q=Et(G),W=pt(G,"P",{"data-svelte-h":!0}),aa(W)!=="svelte-cs27uc"&&(W.textContent=F),ue=Et(G),J=pt(G,"P",{"data-svelte-h":!0}),aa(J)!=="svelte-cs27uc"&&(J.textContent=Y),Pe=Et(G),Ie=pt(G,"P",{"data-svelte-h":!0}),aa(Ie)!=="svelte-cs27uc"&&(Ie.textContent=pe),this.h()},h(){Je(e,"id","test"),Je(k,"id","st-12")},m(G,oe){Fe(G,e,oe),Fe(G,n,oe),Fe(G,r,oe),bt(r,s),ct(a,r,null),bt(r,o),ct(l,r,null),bt(r,c),Fe(G,u,oe),ct(h,G,oe),Fe(G,d,oe),ct(f,G,oe),Fe(G,m,oe),ct(A,G,oe),Fe(G,_,oe),ct(v,G,oe),Fe(G,w,oe),Fe(G,x,oe),Fe(G,S,oe),ct(I,G,oe),Fe(G,P,oe),Fe(G,k,oe),Fe(G,R,oe),Fe(G,N,oe),ct(U,N,null),Fe(G,q,oe),Fe(G,W,oe),Fe(G,ue,oe),Fe(G,J,oe),Fe(G,Pe,oe),Fe(G,Ie,oe),Ce=!0},p(G,oe){const je={};oe&1&&(je.$$scope={dirty:oe,ctx:G}),l.$set(je);const Tt={};oe&1&&(Tt.$$scope={dirty:oe,ctx:G}),h.$set(Tt);const rt={};oe&1&&(rt.$$scope={dirty:oe,ctx:G}),f.$set(rt);const De={};oe&1&&(De.$$scope={dirty:oe,ctx:G}),v.$set(De);const xt={};oe&1&&(xt.$$scope={dirty:oe,ctx:G}),U.$set(xt)},i(G){Ce||(we(a.$$.fragment,G),we(l.$$.fragment,G),we(h.$$.fragment,G),we(f.$$.fragment,G),we(A.$$.fragment,G),we(v.$$.fragment,G),we(I.$$.fragment,G),we(U.$$.fragment,G),Ce=!0)},o(G){Me(a.$$.fragment,G),Me(l.$$.fragment,G),Me(h.$$.fragment,G),Me(f.$$.fragment,G),Me(A.$$.fragment,G),Me(v.$$.fragment,G),Me(I.$$.fragment,G),Me(U.$$.fragment,G),Ce=!1},d(G){G&&(ae(e),ae(n),ae(r),ae(u),ae(d),ae(m),ae(_),ae(w),ae(x),ae(S),ae(P),ae(k),ae(R),ae(N),ae(q),ae(W),ae(ue),ae(J),ae(Pe),ae(Ie)),ut(a),ut(l),ut(h,G),ut(f,G),ut(A,G),ut(v,G),ut(I,G),ut(U)}}}function Bgt(i){let e,t,n,r,s,a,o;return t=new $mt({}),r=new Y9({props:{id:"section-1",$$slots:{default:[Cgt]},$$scope:{ctx:i}}}),a=new Y9({props:{id:"section-2",$$slots:{default:[kgt]},$$scope:{ctx:i}}}),{c(){e=ft("div"),ot(t.$$.fragment),n=Ct(),ot(r.$$.fragment),s=Ct(),ot(a.$$.fragment),this.h()},l(l){e=pt(l,"DIV",{id:!0,class:!0});var c=zt(e);lt(t.$$.fragment,c),n=Et(c),lt(r.$$.fragment,c),s=Et(c),lt(a.$$.fragment,c),c.forEach(ae),this.h()},h(){Je(e,"id","article"),Je(e,"class","relative max-w-prose bg-gradient-to-l from-base-100 via-base-300 via-90% py-12")},m(l,c){Fe(l,e,c),ct(t,e,null),bt(e,n),ct(r,e,null),bt(e,s),ct(a,e,null),o=!0},p(l,[c]){const u={};c&1&&(u.$$scope={dirty:c,ctx:l}),r.$set(u);const h={};c&1&&(h.$$scope={dirty:c,ctx:l}),a.$set(h)},i(l){o||(we(t.$$.fragment,l),we(r.$$.fragment,l),we(a.$$.fragment,l),o=!0)},o(l){Me(t.$$.fragment,l),Me(r.$$.fragment,l),Me(a.$$.fragment,l),o=!1},d(l){l&&ae(e),ut(t),ut(r),ut(a)}}}class Rgt extends Sn{constructor(e){super(),Mn(this,e,null,Bgt,gn,{})}}function K9(i){let e,t,n,r,s,a;t=new Jpt({props:{size:Cc}});let o=[{class:"item"},{"data-tip":"Show 3D Grid"},i[14]],l={};for(let c=0;c<o.length;c+=1)l=jt(l,o[c]);return{c(){e=ft("button"),ot(t.$$.fragment),this.h()},l(c){e=pt(c,"BUTTON",{class:!0,"data-tip":!0});var u=zt(e);lt(t.$$.fragment,u),u.forEach(ae),this.h()},h(){rr(e,l),mn(e,"svelte-1u56zeq",!0)},m(c,u){Fe(c,e,u),ct(t,e,null),e.autofocus&&e.focus(),r=!0,s||(a=ra(i[14].action(e)),s=!0)},p(c,u){rr(e,l=si(o,[{class:"item"},{"data-tip":"Show 3D Grid"},u&16384&&c[14]])),mn(e,"svelte-1u56zeq",!0)},i(c){r||(we(t.$$.fragment,c),c&&(n||Kl(()=>{n=tp(e,ao,{x:-20}),n.start()})),r=!0)},o(c){Me(t.$$.fragment,c),r=!1},d(c){c&&ae(e),ut(t),s=!1,a()}}}function J9(i){let e,t,n,r,s,a;t=new W0t({props:{size:Cc}});let o=[{class:"item"},i[4],{"data-tip":"Show 3D Points"}],l={};for(let c=0;c<o.length;c+=1)l=jt(l,o[c]);return{c(){e=ft("button"),ot(t.$$.fragment),this.h()},l(c){e=pt(c,"BUTTON",{class:!0,"data-tip":!0});var u=zt(e);lt(t.$$.fragment,u),u.forEach(ae),this.h()},h(){rr(e,l),mn(e,"svelte-1u56zeq",!0)},m(c,u){Fe(c,e,u),ct(t,e,null),e.autofocus&&e.focus(),r=!0,s||(a=ra(i[4].action(e)),s=!0)},p(c,u){rr(e,l=si(o,[{class:"item"},u&16&&c[4],{"data-tip":"Show 3D Points"}])),mn(e,"svelte-1u56zeq",!0)},i(c){r||(we(t.$$.fragment,c),c&&(n||Kl(()=>{n=tp(e,ao,{x:-20}),n.start()})),r=!0)},o(c){Me(t.$$.fragment,c),r=!1},d(c){c&&ae(e),ut(t),s=!1,a()}}}function Z9(i){let e,t,n,r,s,a;t=new w0t({props:{size:Cc}});let o=[{class:"item"},i[2],{"data-tip":"Show 3D Planes"}],l={};for(let c=0;c<o.length;c+=1)l=jt(l,o[c]);return{c(){e=ft("button"),ot(t.$$.fragment),this.h()},l(c){e=pt(c,"BUTTON",{class:!0,"data-tip":!0});var u=zt(e);lt(t.$$.fragment,u),u.forEach(ae),this.h()},h(){rr(e,l),mn(e,"svelte-1u56zeq",!0)},m(c,u){Fe(c,e,u),ct(t,e,null),e.autofocus&&e.focus(),r=!0,s||(a=ra(i[2].action(e)),s=!0)},p(c,u){rr(e,l=si(o,[{class:"item"},u&4&&c[2],{"data-tip":"Show 3D Planes"}])),mn(e,"svelte-1u56zeq",!0)},i(c){r||(we(t.$$.fragment,c),c&&(n||Kl(()=>{n=tp(e,ao,{x:-20}),n.start()})),r=!0)},o(c){Me(t.$$.fragment,c),r=!1},d(c){c&&ae(e),ut(t),s=!1,a()}}}function eL(i){let e,t,n,r,s,a;t=new Hpt({props:{size:Cc}});let o=[{class:"item"},i[0],{"data-tip":"Show 3D Model"}],l={};for(let c=0;c<o.length;c+=1)l=jt(l,o[c]);return{c(){e=ft("button"),ot(t.$$.fragment),this.h()},l(c){e=pt(c,"BUTTON",{class:!0,"data-tip":!0});var u=zt(e);lt(t.$$.fragment,u),u.forEach(ae),this.h()},h(){rr(e,l),mn(e,"svelte-1u56zeq",!0)},m(c,u){Fe(c,e,u),ct(t,e,null),e.autofocus&&e.focus(),r=!0,s||(a=ra(i[0].action(e)),s=!0)},p(c,u){rr(e,l=si(o,[{class:"item"},u&1&&c[0],{"data-tip":"Show 3D Model"}])),mn(e,"svelte-1u56zeq",!0)},i(c){r||(we(t.$$.fragment,c),c&&(n||Kl(()=>{n=tp(e,ao,{x:-20}),n.start()})),r=!0)},o(c){Me(t.$$.fragment,c),r=!1},d(c){c&&ae(e),ut(t),s=!1,a()}}}function Dgt(i){let e,t,n,r,s,a,o,l,c,u,h,d,f,m,A,_,v,w,x,C,S,I,P,k,M,R,N,U,q,W,F,ue,J,Y,Pe,Ie;n=new i0t({props:{size:Cc}}),a=new M0t({props:{size:Cc}});let pe=[{class:"item"},{"data-tip":"3d View"},i[8]],Ce={};for(let te=0;te<pe.length;te+=1)Ce=jt(Ce,pe[te]);let G=[{class:"separator"},i[9]],oe={};for(let te=0;te<G.length;te+=1)oe=jt(oe,G[te]);h=new B0t({props:{size:Cc}});let je=[{class:"item"},{"data-tip":"Show Vector"},i[10]],Tt={};for(let te=0;te<je.length;te+=1)Tt=jt(Tt,je[te]);m=new W9({props:{size:Cc}});let rt=[{class:"item"},{"data-tip":"Show Grid"},i[11]],De={};for(let te=0;te<rt.length;te+=1)De=jt(De,rt[te]);v=new W9({props:{class:"-skew-x-12",size:Cc}});let xt=[{class:"item"},{"data-tip":"Show Transformed Grid"},i[12]],mt={};for(let te=0;te<xt.length;te+=1)mt=jt(mt,xt[te]);let et=i[13]&&K9(i),st=[{class:"separator"},i[9]],ce={};for(let te=0;te<st.length;te+=1)ce=jt(ce,st[te]);k=new d0t({props:{size:Cc}});let tt=[{class:"item"},i[5],{"data-tip":"Show Points"}],he={};for(let te=0;te<tt.length;te+=1)he=jt(he,tt[te]);let be=i[13]&&J9(i);U=new J0t({props:{size:Cc}});let Ne=[{class:"item"},i[3],{"data-tip":"Show Plane"}],nt={};for(let te=0;te<Ne.length;te+=1)nt=jt(nt,Ne[te]);let ze=i[13]&&Z9(i);ue=new v0t({props:{size:Cc}});let me=[{class:"item"},i[1],{"data-tip":"Show Image"}],fe={};for(let te=0;te<me.length;te+=1)fe=jt(fe,me[te]);let Be=i[13]&&eL(i),V=[{class:"flex items-center gap-1"},i[15]],$={};for(let te=0;te<V.length;te+=1)$=jt($,V[te]);let ee=[i[6],{class:"flex min-w-max items-center gap-4 rounded-md bg-base-200 px-3 py-3 shadow-lg shadow-neutral-content/20 pointer-events-auto"}],Te={};for(let te=0;te<ee.length;te+=1)Te=jt(Te,ee[te]);return{c(){e=ft("div"),t=ft("button"),ot(n.$$.fragment),r=Ct(),s=ft("button"),ot(a.$$.fragment),o=Ct(),l=ft("div"),c=Ct(),u=ft("button"),ot(h.$$.fragment),d=Ct(),f=ft("button"),ot(m.$$.fragment),A=Ct(),_=ft("button"),ot(v.$$.fragment),w=Ct(),et&&et.c(),x=Ct(),C=ft("div"),S=Ct(),I=ft("div"),P=ft("button"),ot(k.$$.fragment),M=Ct(),be&&be.c(),R=Ct(),N=ft("button"),ot(U.$$.fragment),q=Ct(),ze&&ze.c(),W=Ct(),F=ft("button"),ot(ue.$$.fragment),J=Ct(),Be&&Be.c(),this.h()},l(te){e=pt(te,"DIV",{class:!0});var Qe=zt(e);t=pt(Qe,"BUTTON",{class:!0,"data-tip":!0});var Vt=zt(t);lt(n.$$.fragment,Vt),Vt.forEach(ae),r=Et(Qe),s=pt(Qe,"BUTTON",{class:!0,"data-tip":!0});var ye=zt(s);lt(a.$$.fragment,ye),ye.forEach(ae),o=Et(Qe),l=pt(Qe,"DIV",{class:!0}),zt(l).forEach(ae),c=Et(Qe),u=pt(Qe,"BUTTON",{class:!0,"data-tip":!0});var Ee=zt(u);lt(h.$$.fragment,Ee),Ee.forEach(ae),d=Et(Qe),f=pt(Qe,"BUTTON",{class:!0,"data-tip":!0});var St=zt(f);lt(m.$$.fragment,St),St.forEach(ae),A=Et(Qe),_=pt(Qe,"BUTTON",{class:!0,"data-tip":!0});var Rt=zt(_);lt(v.$$.fragment,Rt),Rt.forEach(ae),w=Et(Qe),et&&et.l(Qe),x=Et(Qe),C=pt(Qe,"DIV",{class:!0}),zt(C).forEach(ae),S=Et(Qe),I=pt(Qe,"DIV",{class:!0});var Bt=zt(I);P=pt(Bt,"BUTTON",{class:!0,"data-tip":!0});var Qt=zt(P);lt(k.$$.fragment,Qt),Qt.forEach(ae),M=Et(Bt),be&&be.l(Bt),R=Et(Bt),N=pt(Bt,"BUTTON",{class:!0,"data-tip":!0});var Nt=zt(N);lt(U.$$.fragment,Nt),Nt.forEach(ae),q=Et(Bt),ze&&ze.l(Bt),W=Et(Bt),F=pt(Bt,"BUTTON",{class:!0,"data-tip":!0});var $t=zt(F);lt(ue.$$.fragment,$t),$t.forEach(ae),J=Et(Bt),Be&&Be.l(Bt),Bt.forEach(ae),Qe.forEach(ae),this.h()},h(){Je(t,"class","item svelte-1u56zeq"),Je(t,"data-tip","Reset View"),rr(s,Ce),mn(s,"svelte-1u56zeq",!0),rr(l,oe),mn(l,"svelte-1u56zeq",!0),rr(u,Tt),mn(u,"svelte-1u56zeq",!0),rr(f,De),mn(f,"svelte-1u56zeq",!0),rr(_,mt),mn(_,"svelte-1u56zeq",!0),rr(C,ce),mn(C,"svelte-1u56zeq",!0),rr(P,he),mn(P,"svelte-1u56zeq",!0),rr(N,nt),mn(N,"svelte-1u56zeq",!0),rr(F,fe),mn(F,"svelte-1u56zeq",!0),rr(I,$),mn(I,"svelte-1u56zeq",!0),rr(e,Te),mn(e,"svelte-1u56zeq",!0)},m(te,Qe){Fe(te,e,Qe),bt(e,t),ct(n,t,null),bt(e,r),bt(e,s),ct(a,s,null),s.autofocus&&s.focus(),bt(e,o),bt(e,l),bt(e,c),bt(e,u),ct(h,u,null),u.autofocus&&u.focus(),bt(e,d),bt(e,f),ct(m,f,null),f.autofocus&&f.focus(),bt(e,A),bt(e,_),ct(v,_,null),_.autofocus&&_.focus(),bt(e,w),et&&et.m(e,null),bt(e,x),bt(e,C),bt(e,S),bt(e,I),bt(I,P),ct(k,P,null),P.autofocus&&P.focus(),bt(I,M),be&&be.m(I,null),bt(I,R),bt(I,N),ct(U,N,null),N.autofocus&&N.focus(),bt(I,q),ze&&ze.m(I,null),bt(I,W),bt(I,F),ct(ue,F,null),F.autofocus&&F.focus(),bt(I,J),Be&&Be.m(I,null),Y=!0,Pe||(Ie=[Wi(t,"click",i[26]),ra(i[8].action(s)),ra(i[9].action(l)),ra(i[10].action(u)),ra(i[11].action(f)),ra(i[12].action(_)),ra(i[9].action(C)),ra(i[5].action(P)),ra(i[3].action(N)),ra(i[1].action(F)),ra(i[15].action(I)),ra(i[6].action(e))],Pe=!0)},p(te,[Qe]){rr(s,Ce=si(pe,[{class:"item"},{"data-tip":"3d View"},Qe&256&&te[8]])),mn(s,"svelte-1u56zeq",!0),rr(l,oe=si(G,[{class:"separator"},Qe&512&&te[9]])),mn(l,"svelte-1u56zeq",!0),rr(u,Tt=si(je,[{class:"item"},{"data-tip":"Show Vector"},Qe&1024&&te[10]])),mn(u,"svelte-1u56zeq",!0),rr(f,De=si(rt,[{class:"item"},{"data-tip":"Show Grid"},Qe&2048&&te[11]])),mn(f,"svelte-1u56zeq",!0),rr(_,mt=si(xt,[{class:"item"},{"data-tip":"Show Transformed Grid"},Qe&4096&&te[12]])),mn(_,"svelte-1u56zeq",!0),te[13]?et?(et.p(te,Qe),Qe&8192&&we(et,1)):(et=K9(te),et.c(),we(et,1),et.m(e,x)):et&&(Hs(),Me(et,1,1,()=>{et=null}),Gs()),rr(C,ce=si(st,[{class:"separator"},Qe&512&&te[9]])),mn(C,"svelte-1u56zeq",!0),rr(P,he=si(tt,[{class:"item"},Qe&32&&te[5],{"data-tip":"Show Points"}])),mn(P,"svelte-1u56zeq",!0),te[13]?be?(be.p(te,Qe),Qe&8192&&we(be,1)):(be=J9(te),be.c(),we(be,1),be.m(I,R)):be&&(Hs(),Me(be,1,1,()=>{be=null}),Gs()),rr(N,nt=si(Ne,[{class:"item"},Qe&8&&te[3],{"data-tip":"Show Plane"}])),mn(N,"svelte-1u56zeq",!0),te[13]?ze?(ze.p(te,Qe),Qe&8192&&we(ze,1)):(ze=Z9(te),ze.c(),we(ze,1),ze.m(I,W)):ze&&(Hs(),Me(ze,1,1,()=>{ze=null}),Gs()),rr(F,fe=si(me,[{class:"item"},Qe&2&&te[1],{"data-tip":"Show Image"}])),mn(F,"svelte-1u56zeq",!0),te[13]?Be?(Be.p(te,Qe),Qe&8192&&we(Be,1)):(Be=eL(te),Be.c(),we(Be,1),Be.m(I,null)):Be&&(Hs(),Me(Be,1,1,()=>{Be=null}),Gs()),rr(I,$=si(V,[{class:"flex items-center gap-1"},Qe&32768&&te[15]])),mn(I,"svelte-1u56zeq",!0),rr(e,Te=si(ee,[Qe&64&&te[6],{class:"flex min-w-max items-center gap-4 rounded-md bg-base-200 px-3 py-3 shadow-lg shadow-neutral-content/20 pointer-events-auto"}])),mn(e,"svelte-1u56zeq",!0)},i(te){Y||(we(n.$$.fragment,te),we(a.$$.fragment,te),we(h.$$.fragment,te),we(m.$$.fragment,te),we(v.$$.fragment,te),we(et),we(k.$$.fragment,te),we(be),we(U.$$.fragment,te),we(ze),we(ue.$$.fragment,te),we(Be),Y=!0)},o(te){Me(n.$$.fragment,te),Me(a.$$.fragment,te),Me(h.$$.fragment,te),Me(m.$$.fragment,te),Me(v.$$.fragment,te),Me(et),Me(k.$$.fragment,te),Me(be),Me(U.$$.fragment,te),Me(ze),Me(ue.$$.fragment,te),Me(Be),Y=!1},d(te){te&&ae(e),ut(n),ut(a),ut(h),ut(m),ut(v),et&&et.d(),ut(k),be&&be.d(),ut(U),ze&&ze.d(),ut(ue),Be&&Be.d(),Pe=!1,tv(Ie)}}}const Cc=30;function Lgt(i,e,t){let n,r,s,a,o,l,c,u,h,d,f,m,A,_,v,w,x;Wt(i,p1,J=>t(7,h=J)),Wt(i,v0,J=>t(13,v=J));const{elements:{root:C,button:S,link:I,separator:P},builders:{createToolbarGroup:k}}=cmt();Wt(i,C,J=>t(6,u=J)),Wt(i,P,J=>t(9,f=J));const{elements:{group:M,item:R}}=k({value:mf});Wt(i,M,J=>t(15,x=J)),Wt(i,R,J=>t(25,c=J));const{elements:{root:N}}=c0({pressed:v0});Wt(i,N,J=>t(8,d=J));const{elements:{root:U}}=c0({pressed:od});Wt(i,U,J=>t(12,_=J));const{elements:{root:q}}=c0({pressed:Jp});Wt(i,q,J=>t(11,A=J));const{elements:{root:W}}=c0({pressed:Uw});Wt(i,W,J=>t(14,w=J));const{elements:{root:F}}=c0({pressed:_f});Wt(i,F,J=>t(10,m=J));const ue=()=>tn(p1,h=!h,h);return i.$$.update=()=>{i.$$.dirty&33554432&&t(5,n=c("points")),i.$$.dirty&33554432&&t(4,r=c("3d points")),i.$$.dirty&33554432&&t(3,s=c("planes")),i.$$.dirty&33554432&&t(2,a=c("3d planes")),i.$$.dirty&33554432&&t(1,o=c("image")),i.$$.dirty&33554432&&t(0,l=c("model"))},[l,o,a,s,r,n,u,h,d,f,m,A,_,v,w,x,C,P,M,R,N,U,q,W,F,c,ue]}class Ogt extends Sn{constructor(e){super(),Mn(this,e,Lgt,Dgt,gn,{})}}function Ngt(i){let e,t,n,r,s,a,o,l;t=new Wpt({props:{size:36,strokeWidth:3,transform:"translate(2, 0)",class:'group-[&[data-state="on"]]:-scale-x-100 transition'}});let c=[i[1],{"data-tip":n=i[0]?"Show Article":"Expand Playground"},{class:r='group bg-base-200 hover:bg-base-100 h-14 w-14 grid place-items-center rounded-full shadow-lg shadow-neutral-content/20 focus:ring-2 focus:ring-info transition-all -translate-x-1/2 -translate-y-1/2 tooltip tooltip-left tooltip-info fixed top-1/2 right-[calc(60ch)] [&[data-state="on"]]:right-0 duration-300'}],u={};for(let h=0;h<c.length;h+=1)u=jt(u,c[h]);return{c(){e=ft("button"),ot(t.$$.fragment),this.h()},l(h){e=pt(h,"BUTTON",{"data-tip":!0,class:!0});var d=zt(e);lt(t.$$.fragment,d),d.forEach(ae),this.h()},h(){rr(e,u)},m(h,d){Fe(h,e,d),ct(t,e,null),e.autofocus&&e.focus(),a=!0,o||(l=ra(i[1].action(e)),o=!0)},p(h,[d]){rr(e,u=si(c,[d&2&&h[1],(!a||d&1&&n!==(n=h[0]?"Show Article":"Expand Playground"))&&{"data-tip":n},{class:r}]))},i(h){a||(we(t.$$.fragment,h),h&&Kl(()=>{a&&(s||(s=Af(e,ao,{x:-20,duration:200},!0)),s.run(1))}),a=!0)},o(h){Me(t.$$.fragment,h),h&&(s||(s=Af(e,ao,{x:-20,duration:200},!1)),s.run(0)),a=!1},d(h){h&&ae(e),ut(t),h&&s&&s.end(),o=!1,l()}}}function Fgt(i,e,t){let n,r;Wt(i,ak,u=>t(0,n=u));let s,a=!0;const o={duration:.3},{elements:{root:l}}=c0({pressed:ak});Wt(i,l,u=>t(1,r=u));function c(u){if(a){a=!1;return}u?(Cn.to("#article",{...o,translateX:"0"}),Cn.to("#canvas-wrapper",{...o,translateX:"0"})):(Cn.to("#article",{...o,translateX:"-65ch"}),Cn.to("#canvas-wrapper",{...o,translateX:"-32.5ch"}))}return Fc(()=>{t(3,s=!0)}),i.$$.update=()=>{i.$$.dirty&9&&s&&c(n)},[n,r,l,s]}class zgt extends Sn{constructor(e){super(),Mn(this,e,Fgt,Ngt,gn,{})}}function tL(i){let e,t;return e=new Kmt({}),{c(){ot(e.$$.fragment)},l(n){lt(e.$$.fragment,n)},m(n,r){ct(e,n,r),t=!0},i(n){t||(we(e.$$.fragment,n),t=!0)},o(n){Me(e.$$.fragment,n),t=!1},d(n){ut(e,n)}}}function nL(i){let e,t;return e=new zgt({}),{c(){ot(e.$$.fragment)},l(n){lt(e.$$.fragment,n)},m(n,r){ct(e,n,r),t=!0},i(n){t||(we(e.$$.fragment,n),t=!0)},o(n){Me(e.$$.fragment,n),t=!1},d(n){ut(e,n)}}}function Ugt(i){let e,t,n,r,s,a,o,l,c,u,h,d,f,m,A,_,v,w,x,C,S,I,P=!i[0]&&tL();r=new Cpt({}),o=new Rgt({});let k=i[1]&&nL();return h=new Ogt({}),f=new tmt({}),_=new Dpt({}),S=new MX({}),{c(){P&&P.c(),e=Ct(),t=ft("article"),n=ft("div"),ot(r.$$.fragment),a=Ct(),ot(o.$$.fragment),l=Ct(),k&&k.c(),c=Ct(),u=ft("div"),ot(h.$$.fragment),d=Ct(),ot(f.$$.fragment),m=Ct(),A=ft("div"),ot(_.$$.fragment),w=Ct(),x=ft("div"),C=Ct(),ot(S.$$.fragment),this.h()},l(M){P&&P.l(M),e=Et(M),t=pt(M,"ARTICLE",{class:!0});var R=zt(t);n=pt(R,"DIV",{id:!0,class:!0});var N=zt(n);lt(r.$$.fragment,N),N.forEach(ae),a=Et(R),lt(o.$$.fragment,R),R.forEach(ae),l=Et(M),k&&k.l(M),c=Et(M),u=pt(M,"DIV",{id:!0,class:!0});var U=zt(u);lt(h.$$.fragment,U),d=Et(U),lt(f.$$.fragment,U),m=Et(U),A=pt(U,"DIV",{});var q=zt(A);lt(_.$$.fragment,q),q.forEach(ae),U.forEach(ae),w=Et(M),x=pt(M,"DIV",{id:!0,class:!0}),zt(x).forEach(ae),C=Et(M),lt(S.$$.fragment,M),this.h()},h(){Je(n,"id","canvas-wrapper"),Je(n,"class",s="sticky top-0 flex-1 min-w-0 h-screen bg-base-300 "+(i[0]?"":"pointer-events-none")),Je(t,"class","relative flex bg-base-300 w-[calc(100%+65ch)]"),Je(u,"id","inputs"),Je(u,"class",v="fixed left-0 top-0 flex flex-col items-start px-8 py-8 gap-7 pointer-events-none "+(i[0]?"":"invisible")),Je(x,"id","st-progress"),Je(x,"class","fixed left-0 top-0 bottom-0 w-2 bg-neutral scale-y-0 rounded-full")},m(M,R){P&&P.m(M,R),Fe(M,e,R),Fe(M,t,R),bt(t,n),ct(r,n,null),bt(t,a),ct(o,t,null),Fe(M,l,R),k&&k.m(M,R),Fe(M,c,R),Fe(M,u,R),ct(h,u,null),bt(u,d),ct(f,u,null),bt(u,m),bt(u,A),ct(_,A,null),Fe(M,w,R),Fe(M,x,R),Fe(M,C,R),ct(S,M,R),I=!0},p(M,[R]){M[0]?P&&(Hs(),Me(P,1,1,()=>{P=null}),Gs()):P?R&1&&we(P,1):(P=tL(),P.c(),we(P,1),P.m(e.parentNode,e)),(!I||R&1&&s!==(s="sticky top-0 flex-1 min-w-0 h-screen bg-base-300 "+(M[0]?"":"pointer-events-none")))&&Je(n,"class",s),M[1]?k?R&2&&we(k,1):(k=nL(),k.c(),we(k,1),k.m(c.parentNode,c)):k&&(Hs(),Me(k,1,1,()=>{k=null}),Gs()),(!I||R&1&&v!==(v="fixed left-0 top-0 flex flex-col items-start px-8 py-8 gap-7 pointer-events-none "+(M[0]?"":"invisible")))&&Je(u,"class",v)},i(M){I||(we(P),we(r.$$.fragment,M),we(o.$$.fragment,M),we(k),we(h.$$.fragment,M),we(f.$$.fragment,M),we(_.$$.fragment,M),we(S.$$.fragment,M),I=!0)},o(M){Me(P),Me(r.$$.fragment,M),Me(o.$$.fragment,M),Me(k),Me(h.$$.fragment,M),Me(f.$$.fragment,M),Me(_.$$.fragment,M),Me(S.$$.fragment,M),I=!1},d(M){M&&(ae(e),ae(t),ae(l),ae(c),ae(u),ae(w),ae(x),ae(C)),P&&P.d(M),ut(r),ut(o),k&&k.d(M),ut(h),ut(f),ut(_),ut(S,M)}}}function Vgt(i,e,t){let n,r;return Wt(i,DT,s=>t(0,n=s)),Wt(i,gf,s=>t(1,r=s)),[n,r]}class Hgt extends Sn{constructor(e){super(),Mn(this,e,Vgt,Ugt,gn,{})}}const Ggt="Title TK",Qgt="Description tk.",iL={title:Ggt,description:Qgt};function qgt(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 5.11.2"),console.log("build: 2023-08-15-16:36"),console.log("--- --- --- --- --- ---")}function jgt(i){let e,t,n,r;return e=new CX({props:{title:i[1],description:i[2],url:i[3],preloadFont:i[0],keywords:i[4]}}),n=new Hgt({}),{c(){ot(e.$$.fragment),t=Ct(),ot(n.$$.fragment)},l(s){lt(e.$$.fragment,s),t=Et(s),lt(n.$$.fragment,s)},m(s,a){ct(e,s,a),Fe(s,t,a),ct(n,s,a),r=!0},p:pn,i(s){r||(we(e.$$.fragment,s),we(n.$$.fragment,s),r=!0)},o(s){Me(e.$$.fragment,s),Me(n.$$.fragment,s),r=!1},d(s){s&&ae(t),ut(e,s),ut(n,s)}}}function Wgt(i,e,t){let{data:n}=e;qgt();const r=["https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Regular.woff2","https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Bold.woff2","https://pudding.cool/assets/fonts/national/National2Web-Regular.woff2","https://pudding.cool/assets/fonts/national/National2Web-Bold.woff2"],{title:s,description:a,url:o,keywords:l}=iL;return fu("copy",iL),fu("data",n.data),i.$$set=c=>{"data"in c&&t(5,n=c.data)},[r,s,a,o,l,n]}class Hvt extends Sn{constructor(e){super(),Mn(this,e,Wgt,jgt,gn,{data:5})}}export{Hvt as component};

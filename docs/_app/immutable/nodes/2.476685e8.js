import{A as mr,s as Gn,f as bt,e as Zs,B as E$,g as yt,d as fe,j as $e,z as Ct,C as Xm,i as Ze,a as Nt,H as c2,h as Jt,c as Ut,D as u2,E as Ka,o as rd,l as In,m as Nn,F as HP,n as T$,G as Hu,r as is,u as rs,v as ss,w as os,x as Mn,I as Yc,J as ko,K as h2,L as cf,M as Jn,N as Oo,O as bw,t as IC,P as Pl,p as ja,Q as yw,R as p_,S as d2,k as Zd,T as A$,U as Ji,y as Xs,V as py,W as Hn,X as Em,Y as my,Z as ip,_ as P$,$ as k$,a0 as H0,a1 as Ym,a2 as Km,a3 as xw,a4 as R$,a5 as Eo}from"../chunks/scheduler.2214fc88.js";import{S as oi,i as ai,a as Ue,t as Ye,b as xt,d as wt,m as St,e as Mt,c as il,g as rl,f as f2}from"../chunks/index.3d58f305.js";import{w as Os,d as Gc,r as LT}from"../chunks/index.b4d2f8f5.js";import{c as it,g as s0,a as O$,h as NC,b as $p,d as Zc,e as Jc,f as p2,s as UC,t as FC,m as BC,i as r1,j as Bm,k as Kx,n as s1,o as wD,p as SD,q as Zx,r as Tm,u as ww,v as Jr,w as cc,x as Au,y as Zm,z as L$,A as D$,B as m2,C as g2,D as v2,E as _2,F as b2,G as MD,H as y2,I as x2,J as z$}from"../chunks/index.ec4287b1.js";function CD(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const s=Object.getOwnPropertyDescriptor(n,r);s&&Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}const ED=typeof window<"u";let qP=ED?()=>window.performance.now():()=>Date.now(),TD=ED?i=>requestAnimationFrame(i):mr;const Vm=new Set;function AD(i){Vm.forEach(e=>{e.c(i)||(Vm.delete(e),e.f())}),Vm.size!==0&&TD(AD)}function I$(i){let e;return Vm.size===0&&TD(AD),{promise:new Promise(t=>{Vm.add(e={c:i,f:t})}),abort(){Vm.delete(e)}}}function hc(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function _s(i,e){const t={},n={},r={$$scope:1};let s=i.length;for(;s--;){const o=i[s],a=e[s];if(a){for(const l in o)l in a||(n[l]=1);for(const l in a)r[l]||(t[l]=a[l],r[l]=1);i[s]=a}else for(const l in o)r[l]=1}for(const o in n)o in t||(t[o]=void 0);return t}function sd(i){return typeof i=="object"&&i!==null?i:{}}const N$='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192.6 50"><path class="st0" d="M150.1 9.5c1.5 0 2.8 1.3 2.8 2.8s-1.3 2.8-2.8 2.8-2.8-1.3-2.8-2.8 1.3-2.8 2.8-2.8zM147.2 17.3h5.6v18.2h-5.6V17.3zM77.1 9.5h-8.9v26h5.6v-8.1h3.3c4.9 0 8.9-4 8.9-8.9s-3.9-9-8.9-9zm0 12.3h-3.3v-6.6h3.3c1.8 0 3.3 1.5 3.3 3.3s-1.4 3.3-3.3 3.3zM105.7 17.6h-5.6v8.9c0 1.8-1.5 3.3-3.3 3.3s-3.3-1.5-3.3-3.3v-8.9h-5.6v8.9c0 4.9 4 8.9 8.9 8.9s8.9-4 8.9-8.9v-8.9zM164.1 17.6c-4.9 0-8.9 4-8.9 8.9v8.9h5.6v-8.9c0-1.8 1.5-3.3 3.3-3.3s3.3 1.5 3.3 3.3v8.9h5.6v-8.9c0-4.9-4-8.9-8.9-8.9zM119.7 16.2v1.4h-3.3c-4.9 0-8.9 4-8.9 8.9s4 8.9 8.9 8.9h8.9V9.5l-5.6 3.3v3.4zm.1 8.4V29.8h-3.3c-1.8 0-3.3-1.5-3.3-3.3s1.5-3.3 3.3-3.3h3.3v1.4zM139.3 16.2v1.4H136c-4.9 0-8.9 4-8.9 8.9s4 8.9 8.9 8.9h8.9V9.5l-5.6 3.3v3.4zm.1 8.4V29.8H136c-1.8 0-3.3-1.5-3.3-3.3s1.5-3.3 3.3-3.3h3.3v1.4h.1zM183.7 17.6c-4.9 0-8.9 4-8.9 8.9s4 8.9 8.9 8.9h3.3v5.1c0 1.8-1.5 3.3-3.3 3.3s-3.3-1.5-3.3-3.3V38l-5.6 3.3c.4 4.5 4.2 8.1 8.9 8.1 4.9 0 8.9-4 8.9-8.9V17.6h-8.9zm3.3 5.8V30h-3.3c-1.8 0-3.3-1.5-3.3-3.3s1.5-3.3 3.3-3.3h3.3zM28.6 17.6c-1.2 0-2.3.2-3.3.6V9.5l-5.6 3.3v22.6h5.6v-8.9c0-1.8 1.5-3.3 3.3-3.3s3.3 1.5 3.3 3.3v8.9h5.6v-8.9c0-4.9-4-8.9-8.9-8.9zM17.8 9.5H0v5.6h6.1v20.3h5.6V15.1h6.1V9.5zM48.3 30.2c-.4 0-1.2-.1-1.8-.4l5.2-2.1 5.6-2.3-1-2.3-.1-.2c-.1-.3-.3-.6-.5-1-.1-.1-.1-.2-.2-.3 0 0 0-.1-.1-.1l-.1-.1-.1-.1c-1.6-2.2-4-3.5-6.7-3.7h-.6c-4.9 0-8.9 4-8.9 8.9 0 .4 0 .9.1 1.4V28.2c0 .3.1.5.2.8v.2c.1.3.2.7.4 1v.2c.1.3.3.5.4.8 0 .1.1.1.1.2.1.2.3.4.4.6v.1s0 .1.1.1l.1.1c1.7 2.1 4.4 3.4 7.2 3.4h6.1v-5.2c.4-.3-3.5-.3-5.8-.3zm7.9-7.3zm-11.6 2.8l-.2.1c.2-1.9 1.8-3.5 3.7-3.5.9 0 1.8.4 2.4.9L46.2 25l-1.6.7z"/></svg>';function GP(i){return Object.prototype.toString.call(i)==="[object Date]"}function VC(i,e,t,n){if(typeof t=="number"||GP(t)){const r=n-t,s=(t-e)/(i.dt||1/60),o=i.opts.stiffness*r,a=i.opts.damping*s,l=(o-a)*i.inv_mass,c=(s+l)*i.dt;return Math.abs(c)<i.opts.precision&&Math.abs(r)<i.opts.precision?n:(i.settled=!1,GP(t)?new Date(t.getTime()+c):t+c)}else{if(Array.isArray(t))return t.map((r,s)=>VC(i,e[s],t[s],n[s]));if(typeof t=="object"){const r={};for(const s in t)r[s]=VC(i,e[s],t[s],n[s]);return r}else throw new Error(`Cannot spring ${typeof t} values`)}}function U$(i,e={}){const t=Os(i),{stiffness:n=.15,damping:r=.8,precision:s=.01}=e;let o,a,l,c=i,u=i,h=1,d=0,f=!1;function g(y,_={}){u=y;const S=l={};return i==null||_.hard||v.stiffness>=1&&v.damping>=1?(f=!0,o=qP(),c=y,t.set(i=u),Promise.resolve()):(_.soft&&(d=1/((_.soft===!0?.5:+_.soft)*60),h=0),a||(o=qP(),f=!1,a=I$(w=>{if(f)return f=!1,a=null,!1;h=Math.min(h+d,1);const C={inv_mass:h,opts:v,settled:!0,dt:(w-o)*60/1e3},E=VC(C,c,i,u);return o=w,c=i,t.set(i=E),C.settled&&(a=null),!C.settled})),new Promise(w=>{a.promise.then(()=>{S===l&&w()})}))}const v={set:g,update:(y,_)=>g(y(u,i),_),subscribe:t.subscribe,stiffness:n,damping:r,precision:s};return v}function WP(i,e,t){const n=i.slice();return n[5]=e[t],n}function jP(i){let e,t;return{c(){e=bt("link"),this.h()},l(n){e=yt(n,"LINK",{rel:!0,href:!0,as:!0,type:!0,crossorigin:!0}),this.h()},h(){$e(e,"rel","preload"),$e(e,"href",t=i[5]),$e(e,"as","font"),$e(e,"type","font/woff2"),$e(e,"crossorigin","")},m(n,r){Ze(n,e,r)},p(n,r){r&16&&t!==(t=n[5])&&$e(e,"href",t)},d(n){n&&fe(e)}}}function F$(i){let e,t,n,r,s,o,a,l,c,u,h,d,f,g,v,y,_,S,w,C,E,k,O,R,A,D;document.title=e=i[0];let I=hc(i[4]),q=[];for(let j=0;j<I.length;j+=1)q[j]=jP(WP(i,I,j));return{c(){t=bt("meta"),n=bt("meta"),r=bt("meta"),s=bt("meta"),o=bt("meta"),a=bt("meta"),l=bt("meta"),c=bt("meta"),u=bt("meta"),h=bt("meta"),f=bt("meta"),g=bt("meta"),v=bt("meta"),y=bt("meta"),_=bt("meta"),S=bt("meta"),w=bt("meta"),C=bt("meta"),E=bt("meta"),O=bt("meta"),R=bt("link");for(let j=0;j<q.length;j+=1)q[j].c();D=Zs(),this.h()},l(j){const Y=E$("svelte-1htu80s",document.head);t=yt(Y,"META",{name:!0,content:!0}),n=yt(Y,"META",{name:!0,content:!0}),r=yt(Y,"META",{name:!0,content:!0}),s=yt(Y,"META",{property:!0,content:!0}),o=yt(Y,"META",{property:!0,content:!0}),a=yt(Y,"META",{property:!0,content:!0}),l=yt(Y,"META",{property:!0,content:!0}),c=yt(Y,"META",{property:!0,content:!0}),u=yt(Y,"META",{property:!0,content:!0}),h=yt(Y,"META",{property:!0,content:!0}),f=yt(Y,"META",{property:!0,content:!0}),g=yt(Y,"META",{property:!0,content:!0}),v=yt(Y,"META",{property:!0,content:!0}),y=yt(Y,"META",{name:!0,content:!0}),_=yt(Y,"META",{name:!0,content:!0}),S=yt(Y,"META",{name:!0,content:!0}),w=yt(Y,"META",{name:!0,content:!0}),C=yt(Y,"META",{name:!0,content:!0}),E=yt(Y,"META",{name:!0,content:!0}),O=yt(Y,"META",{name:!0,content:!0}),R=yt(Y,"LINK",{rel:!0,href:!0});for(let F=0;F<q.length;F+=1)q[F].l(Y);D=Zs(),Y.forEach(fe),this.h()},h(){$e(t,"name","description"),$e(t,"content",i[1]),$e(n,"name","author"),$e(n,"content","The Pudding"),$e(r,"name","news_keywords"),$e(r,"content",i[3]),$e(s,"property","og:title"),$e(s,"content",i[0]),$e(o,"property","og:site_name"),$e(o,"content","The Pudding"),$e(a,"property","og:url"),$e(a,"content",i[2]),$e(l,"property","og:description"),$e(l,"content",i[1]),$e(c,"property","og:type"),$e(c,"content","article"),$e(u,"property","og:locale"),$e(u,"content","en_US"),$e(h,"property","og:image"),$e(h,"content",d=i[2]+"/assets/social-facebook.jpg"),$e(f,"property","og:image:type"),$e(f,"content","image/jpeg"),$e(g,"property","og:image:width"),$e(g,"content","1200"),$e(v,"property","og:image:height"),$e(v,"content","600"),$e(y,"name","twitter:card"),$e(y,"content","summary_large_image"),$e(_,"name","twitter:site"),$e(_,"content","https://pudding.cool"),$e(S,"name","twitter:creator"),$e(S,"content","@puddingviz"),$e(w,"name","twitter:title"),$e(w,"content",i[0]),$e(C,"name","twitter:description"),$e(C,"content",i[1]),$e(E,"name","twitter:image:src"),$e(E,"content",k=i[2]+"/assets/social-twitter.jpg"),$e(O,"name","robots"),$e(O,"content","max-image-preview:large"),$e(R,"rel","canonical"),$e(R,"href",A=i[2]+"/")},m(j,Y){Ct(document.head,t),Ct(document.head,n),Ct(document.head,r),Ct(document.head,s),Ct(document.head,o),Ct(document.head,a),Ct(document.head,l),Ct(document.head,c),Ct(document.head,u),Ct(document.head,h),Ct(document.head,f),Ct(document.head,g),Ct(document.head,v),Ct(document.head,y),Ct(document.head,_),Ct(document.head,S),Ct(document.head,w),Ct(document.head,C),Ct(document.head,E),Ct(document.head,O),Ct(document.head,R);for(let F=0;F<q.length;F+=1)q[F]&&q[F].m(document.head,null);Ct(document.head,D)},p(j,[Y]){if(Y&1&&e!==(e=j[0])&&(document.title=e),Y&2&&$e(t,"content",j[1]),Y&8&&$e(r,"content",j[3]),Y&1&&$e(s,"content",j[0]),Y&4&&$e(a,"content",j[2]),Y&2&&$e(l,"content",j[1]),Y&4&&d!==(d=j[2]+"/assets/social-facebook.jpg")&&$e(h,"content",d),Y&1&&$e(w,"content",j[0]),Y&2&&$e(C,"content",j[1]),Y&4&&k!==(k=j[2]+"/assets/social-twitter.jpg")&&$e(E,"content",k),Y&4&&A!==(A=j[2]+"/")&&$e(R,"href",A),Y&16){I=hc(j[4]);let F;for(F=0;F<I.length;F+=1){const re=WP(j,I,F);q[F]?q[F].p(re,Y):(q[F]=jP(re),q[F].c(),q[F].m(D.parentNode,D))}for(;F<q.length;F+=1)q[F].d(1);q.length=I.length}},i:mr,o:mr,d(j){fe(t),fe(n),fe(r),fe(s),fe(o),fe(a),fe(l),fe(c),fe(u),fe(h),fe(f),fe(g),fe(v),fe(y),fe(_),fe(S),fe(w),fe(C),fe(E),fe(O),fe(R),Xm(q,j),fe(D)}}}function B$(i,e,t){let{title:n="Title TK"}=e,{description:r="Description TK"}=e,{url:s="https://pudding.cool"}=e,{keywords:o=""}=e,{preloadFont:a=[]}=e;return i.$$set=l=>{"title"in l&&t(0,n=l.title),"description"in l&&t(1,r=l.description),"url"in l&&t(2,s=l.url),"keywords"in l&&t(3,o=l.keywords),"preloadFont"in l&&t(4,a=l.preloadFont)},[n,r,s,o,a]}class V$ extends oi{constructor(e){super(),ai(this,e,B$,F$,Gn,{title:0,description:1,url:2,keywords:3,preloadFont:4})}}function $P(i,e,t){const n=i.slice();return n[5]=e[t],n}function XP(i,e,t){const n=i.slice();n[8]=e[t].hed,n[2]=e[t].url,n[9]=e[t].image;const r=n[2].startsWith("http")?n[2]:`https://pudding.cool/${n[2]}`;return n[10]=r,n}function YP(i){let e,t,n,r,s,o,a=i[8]+"",l,c,u;return{c(){e=bt("div"),t=bt("a"),n=bt("img"),s=Nt(),o=bt("span"),l=In(a),u=Nt(),this.h()},l(h){e=yt(h,"DIV",{class:!0});var d=Jt(e);t=yt(d,"A",{href:!0,class:!0});var f=Jt(t);n=yt(f,"IMG",{src:!0,alt:!0}),s=Ut(f),o=yt(f,"SPAN",{class:!0});var g=Jt(o);l=Nn(g,a),g.forEach(fe),f.forEach(fe),u=Ut(d),d.forEach(fe),this.h()},h(){HP(n.src,r="https://pudding.cool/common/assets/thumbnails/640/"+i[9]+".jpg")||$e(n,"src",r),$e(n,"alt","thumbnail"),$e(o,"class","svelte-13ez18p"),$e(t,"href",c=i[10]),$e(t,"class","svelte-13ez18p"),$e(e,"class","story svelte-13ez18p")},m(h,d){Ze(h,e,d),Ct(e,t),Ct(t,n),Ct(t,s),Ct(t,o),Ct(o,l),Ct(e,u)},p(h,d){d&1&&!HP(n.src,r="https://pudding.cool/common/assets/thumbnails/640/"+h[9]+".jpg")&&$e(n,"src",r),d&1&&a!==(a=h[8]+"")&&T$(l,a),d&1&&c!==(c=h[10])&&$e(t,"href",c)},d(h){h&&fe(e)}}}function KP(i){let e,t,n,r=i[5].name.toUpperCase()+"",s,o;return{c(){e=bt("li"),t=bt("a"),n=bt("span"),s=In(r),o=Nt(),this.h()},l(a){e=yt(a,"LI",{class:!0});var l=Jt(e);t=yt(l,"A",{href:!0,target:!0,class:!0});var c=Jt(t);n=yt(c,"SPAN",{class:!0});var u=Jt(n);s=Nn(u,r),u.forEach(fe),c.forEach(fe),o=Ut(l),l.forEach(fe),this.h()},h(){$e(n,"class","svelte-13ez18p"),$e(t,"href",i[5].url),$e(t,"target","_self"),$e(t,"class","svelte-13ez18p"),$e(e,"class","svelte-13ez18p")},m(a,l){Ze(a,e,l),Ct(e,t),Ct(t,n),Ct(n,s),Ct(e,o)},p:mr,d(a){a&&fe(e)}}}function H$(i){let e,t,n,r,s,o,a,l,c=`<a href="https://pudding.cool" target="_self" class="svelte-13ez18p">The Pudding</a>
			is a digital publication that explains ideas debated in culture with visual
			essays.`,u,h,d,f=hc(i[0]),g=[];for(let _=0;_<f.length;_+=1)g[_]=YP(XP(i,f,_));let v=hc(i[1]),y=[];for(let _=0;_<v.length;_+=1)y[_]=KP($P(i,v,_));return{c(){e=bt("footer"),t=bt("section");for(let _=0;_<g.length;_+=1)g[_].c();n=Nt(),r=bt("section"),s=bt("div"),o=new c2(!1),a=Nt(),l=bt("p"),l.innerHTML=c,u=Nt(),h=bt("section"),d=bt("ul");for(let _=0;_<y.length;_+=1)y[_].c();this.h()},l(_){e=yt(_,"FOOTER",{class:!0});var S=Jt(e);t=yt(S,"SECTION",{class:!0});var w=Jt(t);for(let R=0;R<g.length;R+=1)g[R].l(w);w.forEach(fe),n=Ut(S),r=yt(S,"SECTION",{class:!0});var C=Jt(r);s=yt(C,"DIV",{class:!0});var E=Jt(s);o=u2(E,!1),E.forEach(fe),a=Ut(C),l=yt(C,"P",{"data-svelte-h":!0}),Ka(l)!=="svelte-qqs5dy"&&(l.innerHTML=c),C.forEach(fe),u=Ut(S),h=yt(S,"SECTION",{class:!0});var k=Jt(h);d=yt(k,"UL",{class:!0});var O=Jt(d);for(let R=0;R<y.length;R+=1)y[R].l(O);O.forEach(fe),k.forEach(fe),S.forEach(fe),this.h()},h(){$e(t,"class","stories svelte-13ez18p"),o.a=null,$e(s,"class","wordmark svelte-13ez18p"),$e(r,"class","about svelte-13ez18p"),$e(d,"class","svelte-13ez18p"),$e(h,"class","links svelte-13ez18p"),$e(e,"class","svelte-13ez18p")},m(_,S){Ze(_,e,S),Ct(e,t);for(let w=0;w<g.length;w+=1)g[w]&&g[w].m(t,null);Ct(e,n),Ct(e,r),Ct(r,s),o.m(N$,s),Ct(r,a),Ct(r,l),Ct(e,u),Ct(e,h),Ct(h,d);for(let w=0;w<y.length;w+=1)y[w]&&y[w].m(d,null)},p(_,[S]){if(S&1){f=hc(_[0]);let w;for(w=0;w<f.length;w+=1){const C=XP(_,f,w);g[w]?g[w].p(C,S):(g[w]=YP(C),g[w].c(),g[w].m(t,null))}for(;w<g.length;w+=1)g[w].d(1);g.length=f.length}if(S&2){v=hc(_[1]);let w;for(w=0;w<v.length;w+=1){const C=$P(_,v,w);y[w]?y[w].p(C,S):(y[w]=KP(C),y[w].c(),y[w].m(d,null))}for(;w<y.length;w+=1)y[w].d(1);y.length=v.length}},i:mr,o:mr,d(_){_&&fe(e),Xm(g,_),Xm(y,_)}}}function q$(i,e,t){let n,r=[];const o=`https://pudding.cool/assets/data/stories.json?v=${Date.now()}`,a=[{name:"about",url:"https://pudding.cool/about"},{name:"facebook",url:"https://facebook.com/pudding.viz/"},{name:"twitter",url:"https://twitter.com/puddingviz/"},{name:"instagram",url:"https://www.instagram.com/the.pudding"},{name:"patreon",url:"https://patreon.com/thepudding/"},{name:"privacy",url:"https://pudding.cool/privacy/"},{name:"newsletter",url:"https://thepuddingmail.substack.com"},{name:"rss",url:"https://pudding.cool/feed/index.xml"}];return rd(async()=>{n=window.location.href;const c=await(await fetch(o)).json();t(0,r=c.filter(u=>!n.includes(u.url)).slice(0,4))}),[r,a,o]}class G$ extends oi{constructor(e){super(),ai(this,e,q$,H$,Gn,{})}}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const w2="155dev",W$={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},j$={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},PD=0,HC=1,kD=2,$$=3,X$=0,DT=1,S2=2,Mu=3,Xh=0,wa=1,xs=2,Y$=2,Iu=0,Jd=1,qC=2,GC=3,WC=4,RD=5,Gd=100,zT=101,IT=102,jC=103,$C=104,NT=200,UT=201,FT=202,BT=203,M2=204,C2=205,VT=206,HT=207,qT=208,GT=209,WT=210,OD=0,LD=1,DD=2,Sw=3,zD=4,ID=5,ND=6,UD=7,m_=0,FD=1,BD=2,qh=0,VD=1,HD=2,qD=3,jT=4,GD=5,g_=300,Yh=301,uf=302,A1=303,P1=304,xg=306,Jm=1e3,lo=1001,Qm=1002,Oi=1003,Mw=1004,$T=1004,m1=1005,XT=1005,Hr=1006,YT=1007,KT=1007,hf=1008,ZT=1008,Sa=1009,v_=1010,__=1011,o0=1012,wg=1013,dc=1014,Ks=1015,Qc=1016,E2=1017,T2=1018,Qd=1020,JT=1021,Fo=1023,A2=1024,P2=1025,ef=1026,Xp=1027,WD=1028,QT=1029,jD=1030,eA=1031,tA=1033,Jx=33776,Qx=33777,ew=33778,tw=33779,XC=35840,YC=35841,KC=35842,ZC=35843,$D=36196,JC=37492,QC=37496,eE=37808,tE=37809,nE=37810,iE=37811,rE=37812,sE=37813,oE=37814,aE=37815,lE=37816,cE=37817,uE=37818,hE=37819,dE=37820,fE=37821,nw=36492,XD=36283,pE=36284,mE=36285,gE=36286,YD=2200,KD=2201,ZD=2202,k1=2300,R1=2301,iw=2302,Rp=2400,Op=2401,O1=2402,k2=2500,nA=2501,K$=0,Z$=1,J$=2,L1=3e3,Gh=3001,JD=3200,QD=3201,Ef=0,e9=1,tf="",Zn="srgb",eu="srgb-linear",iA="display-p3",Q$=0,rw=7680,eX=7681,tX=7682,nX=7683,iX=34055,rX=34056,sX=5386,oX=512,aX=513,lX=514,cX=515,uX=516,hX=517,dX=518,t9=519,n9=512,i9=513,r9=514,s9=515,o9=516,a9=517,l9=518,c9=519,D1=35044,fX=35048,pX=35040,mX=35045,gX=35049,vX=35041,_X=35046,bX=35050,yX=35042,xX="100",vE="300 es",Cw=1035,Pu=2e3,z1=2001;let bc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const Yo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let ZP=1234567;const Up=Math.PI/180,eg=180/Math.PI;function Ul(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Yo[i&255]+Yo[i>>8&255]+Yo[i>>16&255]+Yo[i>>24&255]+"-"+Yo[e&255]+Yo[e>>8&255]+"-"+Yo[e>>16&15|64]+Yo[e>>24&255]+"-"+Yo[t&63|128]+Yo[t>>8&255]+"-"+Yo[t>>16&255]+Yo[t>>24&255]+Yo[n&255]+Yo[n>>8&255]+Yo[n>>16&255]+Yo[n>>24&255]).toLowerCase()}function bs(i,e,t){return Math.max(e,Math.min(t,i))}function rA(i,e){return(i%e+e)%e}function wX(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function SX(i,e,t){return i!==e?(t-i)/(e-i):0}function g1(i,e,t){return(1-t)*i+t*e}function MX(i,e,t,n){return g1(i,e,1-Math.exp(-t*n))}function CX(i,e=1){return e-Math.abs(rA(i,e*2)-e)}function EX(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function TX(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function AX(i,e){return i+Math.floor(Math.random()*(e-i+1))}function PX(i,e){return i+Math.random()*(e-i)}function kX(i){return i*(.5-Math.random())}function RX(i){i!==void 0&&(ZP=i);let e=ZP+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function OX(i){return i*Up}function LX(i){return i*eg}function _E(i){return(i&i-1)===0&&i!==0}function u9(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Ew(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function DX(i,e,t,n,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+n)/2),u=o((e+n)/2),h=s((e-n)/2),d=o((e-n)/2),f=s((n-e)/2),g=o((n-e)/2);switch(r){case"XYX":i.set(a*u,l*h,l*d,a*c);break;case"YZY":i.set(l*d,a*u,l*h,a*c);break;case"ZXZ":i.set(l*h,l*d,a*u,a*c);break;case"XZX":i.set(a*u,l*g,l*f,a*c);break;case"YXY":i.set(l*f,a*u,l*g,a*c);break;case"ZYZ":i.set(l*g,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Nl(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function hi(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const h9={DEG2RAD:Up,RAD2DEG:eg,generateUUID:Ul,clamp:bs,euclideanModulo:rA,mapLinear:wX,inverseLerp:SX,lerp:g1,damp:MX,pingpong:CX,smoothstep:EX,smootherstep:TX,randInt:AX,randFloat:PX,randFloatSpread:kX,seededRandom:RX,degToRad:OX,radToDeg:LX,isPowerOfTwo:_E,ceilPowerOfTwo:u9,floorPowerOfTwo:Ew,setQuaternionFromProperEuler:DX,normalize:hi,denormalize:Nl};let ht=class d9{constructor(e=0,t=0){d9.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(bs(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},pi=class f9{constructor(e,t,n,r,s,o,a,l,c){f9.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,a,l,c)}set(e,t,n,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=n,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],u=n[4],h=n[7],d=n[2],f=n[5],g=n[8],v=r[0],y=r[3],_=r[6],S=r[1],w=r[4],C=r[7],E=r[2],k=r[5],O=r[8];return s[0]=o*v+a*S+l*E,s[3]=o*y+a*w+l*k,s[6]=o*_+a*C+l*O,s[1]=c*v+u*S+h*E,s[4]=c*y+u*w+h*k,s[7]=c*_+u*C+h*O,s[2]=d*v+f*S+g*E,s[5]=d*y+f*w+g*k,s[8]=d*_+f*C+g*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-n*s*u+n*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,d=a*l-u*s,f=c*s-o*l,g=t*h+n*d+r*f;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=h*v,e[1]=(r*c-u*n)*v,e[2]=(a*n-r*o)*v,e[3]=d*v,e[4]=(u*t-r*l)*v,e[5]=(r*s-a*t)*v,e[6]=f*v,e[7]=(n*l-c*t)*v,e[8]=(o*t-n*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(NS.makeScale(e,t)),this}rotate(e){return this.premultiply(NS.makeRotation(-e)),this}translate(e,t){return this.premultiply(NS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}};const NS=new pi;function p9(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const zX={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Am(i,e){return new zX[i](e)}function I1(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}const JP={};function v1(i){i in JP||(JP[i]=!0,console.warn(i))}function Hm(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function US(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}const IX=new pi().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),NX=new pi().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function UX(i){return i.convertSRGBToLinear().applyMatrix3(NX)}function FX(i){return i.applyMatrix3(IX).convertLinearToSRGB()}const BX={[eu]:i=>i,[Zn]:i=>i.convertSRGBToLinear(),[iA]:UX},VX={[eu]:i=>i,[Zn]:i=>i.convertLinearToSRGB(),[iA]:FX},Al={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(i){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!i},get workingColorSpace(){return eu},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,e,t){if(this.enabled===!1||e===t||!e||!t)return i;const n=BX[e],r=VX[t];if(n===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(n(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this.workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this.workingColorSpace)}};let q0;class sA{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{q0===void 0&&(q0=I1("canvas")),q0.width=e.width,q0.height=e.height;const n=q0.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=q0}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=I1("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Hm(s[o]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Hm(t[n]/255)*255):t[n]=Hm(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let HX=0,Lp=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:HX++}),this.uuid=Ul(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(FS(r[o].image)):s.push(FS(r[o]))}else s=FS(r);n.url=s}return t||(e.images[this.uuid]=n),n}};function FS(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?sA.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let qX=0;class qr extends bc{constructor(e=qr.DEFAULT_IMAGE,t=qr.DEFAULT_MAPPING,n=lo,r=lo,s=Hr,o=hf,a=Fo,l=Sa,c=qr.DEFAULT_ANISOTROPY,u=tf){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:qX++}),this.uuid=Ul(),this.name="",this.source=new Lp(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ht(0,0),this.repeat=new ht(1,1),this.center=new ht(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new pi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(v1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===Gh?Zn:tf),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==g_)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Jm:e.x=e.x-Math.floor(e.x);break;case lo:e.x=e.x<0?0:1;break;case Qm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Jm:e.y=e.y-Math.floor(e.y);break;case lo:e.y=e.y<0?0:1;break;case Qm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return v1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Zn?Gh:L1}set encoding(e){v1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Gh?Zn:tf}}qr.DEFAULT_IMAGE=null;qr.DEFAULT_MAPPING=g_;qr.DEFAULT_ANISOTROPY=1;let Li=class m9{constructor(e=0,t=0,n=0,r=1){m9.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,c=l[0],u=l[4],h=l[8],d=l[1],f=l[5],g=l[9],v=l[2],y=l[6],_=l[10];if(Math.abs(u-d)<.01&&Math.abs(h-v)<.01&&Math.abs(g-y)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+v)<.1&&Math.abs(g+y)<.1&&Math.abs(c+f+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(c+1)/2,C=(f+1)/2,E=(_+1)/2,k=(u+d)/4,O=(h+v)/4,R=(g+y)/4;return w>C&&w>E?w<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(w),r=k/n,s=O/n):C>E?C<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(C),n=k/r,s=R/r):E<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(E),n=O/s,r=R/s),this.set(n,r,s,t),this}let S=Math.sqrt((y-g)*(y-g)+(h-v)*(h-v)+(d-u)*(d-u));return Math.abs(S)<.001&&(S=1),this.x=(y-g)/S,this.y=(h-v)/S,this.z=(d-u)/S,this.w=Math.acos((c+f+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}};class Lo extends bc{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Li(0,0,e,t),this.scissorTest=!1,this.viewport=new Li(0,0,e,t);const r={width:e,height:t,depth:1};n.encoding!==void 0&&(v1("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Gh?Zn:tf),this.texture=new qr(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.internalFormat=n.internalFormat!==void 0?n.internalFormat:null,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Hr,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null,this.samples=n.samples!==void 0?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Lp(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class R2 extends qr{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Oi,this.minFilter=Oi,this.wrapR=lo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class GX extends Lo{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new R2(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class oA extends qr{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Oi,this.minFilter=Oi,this.wrapR=lo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WX extends Lo{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new oA(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class jX extends Lo{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<n;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}let Ro=class{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,a){let l=n[r+0],c=n[r+1],u=n[r+2],h=n[r+3];const d=s[o+0],f=s[o+1],g=s[o+2],v=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=d,e[t+1]=f,e[t+2]=g,e[t+3]=v;return}if(h!==v||l!==d||c!==f||u!==g){let y=1-a;const _=l*d+c*f+u*g+h*v,S=_>=0?1:-1,w=1-_*_;if(w>Number.EPSILON){const E=Math.sqrt(w),k=Math.atan2(E,_*S);y=Math.sin(y*k)/E,a=Math.sin(a*k)/E}const C=a*S;if(l=l*y+d*C,c=c*y+f*C,u=u*y+g*C,h=h*y+v*C,y===1-a){const E=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=E,c*=E,u*=E,h*=E}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,r,s,o){const a=n[r],l=n[r+1],c=n[r+2],u=n[r+3],h=s[o],d=s[o+1],f=s[o+2],g=s[o+3];return e[t]=a*g+u*h+l*f-c*d,e[t+1]=l*g+u*d+c*h-a*f,e[t+2]=c*g+u*f+a*d-l*h,e[t+3]=u*g-a*h-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(n/2),u=a(r/2),h=a(s/2),d=l(n/2),f=l(r/2),g=l(s/2);switch(o){case"XYZ":this._x=d*u*h+c*f*g,this._y=c*f*h-d*u*g,this._z=c*u*g+d*f*h,this._w=c*u*h-d*f*g;break;case"YXZ":this._x=d*u*h+c*f*g,this._y=c*f*h-d*u*g,this._z=c*u*g-d*f*h,this._w=c*u*h+d*f*g;break;case"ZXY":this._x=d*u*h-c*f*g,this._y=c*f*h+d*u*g,this._z=c*u*g+d*f*h,this._w=c*u*h-d*f*g;break;case"ZYX":this._x=d*u*h-c*f*g,this._y=c*f*h+d*u*g,this._z=c*u*g-d*f*h,this._w=c*u*h+d*f*g;break;case"YZX":this._x=d*u*h+c*f*g,this._y=c*f*h+d*u*g,this._z=c*u*g-d*f*h,this._w=c*u*h-d*f*g;break;case"XZY":this._x=d*u*h-c*f*g,this._y=c*f*h-d*u*g,this._z=c*u*g+d*f*h,this._w=c*u*h+d*f*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=n+a+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(n>a&&n>h){const f=2*Math.sqrt(1+n-a-h);this._w=(u-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>h){const f=2*Math.sqrt(1+a-n-h);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+h-n-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(bs(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=n*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-n*c,this._z=s*u+o*c+n*l-r*a,this._w=o*u-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*n+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(s),n*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},oe=class g9{constructor(e=0,t=0,n=0){g9.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(QP.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(QP.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*n,u=l*n+a*t-s*r,h=l*r+s*n-o*t,d=-s*t-o*n-a*r;return this.x=c*l+d*-s+u*-a-h*-o,this.y=u*l+d*-o+h*-s-c*-a,this.z=h*l+d*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return BS.copy(this).projectOnVector(e),this.sub(BS)}reflect(e){return this.sub(BS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(bs(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const BS=new oe,QP=new Ro;class Xu{constructor(e=new oe(1/0,1/0,1/0),t=new oe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Mh.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Mh.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Mh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),G0.copy(e.boundingBox),G0.applyMatrix4(e.matrixWorld),this.union(G0);else{const r=e.geometry;if(r!==void 0)if(t&&r.attributes!==void 0&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)Mh.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Mh)}else r.boundingBox===null&&r.computeBoundingBox(),G0.copy(r.boundingBox),G0.applyMatrix4(e.matrixWorld),this.union(G0)}const n=e.children;for(let r=0,s=n.length;r<s;r++)this.expandByObject(n[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Mh),Mh.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Mv),gy.subVectors(this.max,Mv),W0.subVectors(e.a,Mv),j0.subVectors(e.b,Mv),$0.subVectors(e.c,Mv),Rd.subVectors(j0,W0),Od.subVectors($0,j0),rp.subVectors(W0,$0);let t=[0,-Rd.z,Rd.y,0,-Od.z,Od.y,0,-rp.z,rp.y,Rd.z,0,-Rd.x,Od.z,0,-Od.x,rp.z,0,-rp.x,-Rd.y,Rd.x,0,-Od.y,Od.x,0,-rp.y,rp.x,0];return!VS(t,W0,j0,$0,gy)||(t=[1,0,0,0,1,0,0,0,1],!VS(t,W0,j0,$0,gy))?!1:(vy.crossVectors(Rd,Od),t=[vy.x,vy.y,vy.z],VS(t,W0,j0,$0,gy))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Mh).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Mh).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Sh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Sh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Sh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Sh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Sh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Sh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Sh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Sh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Sh),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Sh=[new oe,new oe,new oe,new oe,new oe,new oe,new oe,new oe],Mh=new oe,G0=new Xu,W0=new oe,j0=new oe,$0=new oe,Rd=new oe,Od=new oe,rp=new oe,Mv=new oe,gy=new oe,vy=new oe,sp=new oe;function VS(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){sp.fromArray(i,s);const a=r.x*Math.abs(sp.x)+r.y*Math.abs(sp.y)+r.z*Math.abs(sp.z),l=e.dot(sp),c=t.dot(sp),u=n.dot(sp);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const $X=new Xu,Cv=new oe,HS=new oe;class nu{constructor(e=new oe,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):$X.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Cv.subVectors(e,this.center);const t=Cv.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(Cv,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(HS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Cv.copy(e.center).add(HS)),this.expandByPoint(Cv.copy(e.center).sub(HS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ch=new oe,qS=new oe,_y=new oe,Ld=new oe,GS=new oe,by=new oe,WS=new oe;class Sg{constructor(e=new oe,t=new oe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ch)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ch.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ch.copy(this.origin).addScaledVector(this.direction,t),Ch.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){qS.copy(e).add(t).multiplyScalar(.5),_y.copy(t).sub(e).normalize(),Ld.copy(this.origin).sub(qS);const s=e.distanceTo(t)*.5,o=-this.direction.dot(_y),a=Ld.dot(this.direction),l=-Ld.dot(_y),c=Ld.lengthSq(),u=Math.abs(1-o*o);let h,d,f,g;if(u>0)if(h=o*l-a,d=o*a-l,g=s*u,h>=0)if(d>=-g)if(d<=g){const v=1/u;h*=v,d*=v,f=h*(h+o*d+2*a)+d*(o*h+d+2*l)+c}else d=s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d=-s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d<=-g?(h=Math.max(0,-(-o*s+a)),d=h>0?-s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c):d<=g?(h=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+c):(h=Math.max(0,-(o*s+a)),d=h>0?s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c);else d=o>0?-s:s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(qS).addScaledVector(_y,d),f}intersectSphere(e,t){Ch.subVectors(e.center,this.origin);const n=Ch.dot(this.direction),r=Ch.dot(Ch)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return c>=0?(n=(e.min.x-d.x)*c,r=(e.max.x-d.x)*c):(n=(e.max.x-d.x)*c,r=(e.min.x-d.x)*c),u>=0?(s=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),h>=0?(a=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(a=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),n>l||a>r)||((a>n||n!==n)&&(n=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,Ch)!==null}intersectTriangle(e,t,n,r,s){GS.subVectors(t,e),by.subVectors(n,e),WS.crossVectors(GS,by);let o=this.direction.dot(WS),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ld.subVectors(this.origin,e);const l=a*this.direction.dot(by.crossVectors(Ld,by));if(l<0)return null;const c=a*this.direction.dot(GS.cross(Ld));if(c<0||l+c>o)return null;const u=-a*Ld.dot(WS);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}let qn=class bE{constructor(e,t,n,r,s,o,a,l,c,u,h,d,f,g,v,y){bE.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,a,l,c,u,h,d,f,g,v,y)}set(e,t,n,r,s,o,a,l,c,u,h,d,f,g,v,y){const _=this.elements;return _[0]=e,_[4]=t,_[8]=n,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=c,_[6]=u,_[10]=h,_[14]=d,_[3]=f,_[7]=g,_[11]=v,_[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new bE().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/X0.setFromMatrixColumn(e,0).length(),s=1/X0.setFromMatrixColumn(e,1).length(),o=1/X0.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const d=o*u,f=o*h,g=a*u,v=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=f+g*c,t[5]=d-v*c,t[9]=-a*l,t[2]=v-d*c,t[6]=g+f*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*u,f=l*h,g=c*u,v=c*h;t[0]=d+v*a,t[4]=g*a-f,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=f*a-g,t[6]=v+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*u,f=l*h,g=c*u,v=c*h;t[0]=d-v*a,t[4]=-o*h,t[8]=g+f*a,t[1]=f+g*a,t[5]=o*u,t[9]=v-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*u,f=o*h,g=a*u,v=a*h;t[0]=l*u,t[4]=g*c-f,t[8]=d*c+v,t[1]=l*h,t[5]=v*c+d,t[9]=f*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,f=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=v-d*h,t[8]=g*h+f,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*h+g,t[10]=d-v*h}else if(e.order==="XZY"){const d=o*l,f=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+v,t[5]=o*u,t[9]=f*h-g,t[2]=g*h-f,t[6]=a*u,t[10]=v*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(XX,e,YX)}lookAt(e,t,n){const r=this.elements;return Ml.subVectors(e,t),Ml.lengthSq()===0&&(Ml.z=1),Ml.normalize(),Dd.crossVectors(n,Ml),Dd.lengthSq()===0&&(Math.abs(n.z)===1?Ml.x+=1e-4:Ml.z+=1e-4,Ml.normalize(),Dd.crossVectors(n,Ml)),Dd.normalize(),yy.crossVectors(Ml,Dd),r[0]=Dd.x,r[4]=yy.x,r[8]=Ml.x,r[1]=Dd.y,r[5]=yy.y,r[9]=Ml.y,r[2]=Dd.z,r[6]=yy.z,r[10]=Ml.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],u=n[1],h=n[5],d=n[9],f=n[13],g=n[2],v=n[6],y=n[10],_=n[14],S=n[3],w=n[7],C=n[11],E=n[15],k=r[0],O=r[4],R=r[8],A=r[12],D=r[1],I=r[5],q=r[9],j=r[13],Y=r[2],F=r[6],re=r[10],ee=r[14],J=r[3],Ee=r[7],le=r[11],ie=r[15];return s[0]=o*k+a*D+l*Y+c*J,s[4]=o*O+a*I+l*F+c*Ee,s[8]=o*R+a*q+l*re+c*le,s[12]=o*A+a*j+l*ee+c*ie,s[1]=u*k+h*D+d*Y+f*J,s[5]=u*O+h*I+d*F+f*Ee,s[9]=u*R+h*q+d*re+f*le,s[13]=u*A+h*j+d*ee+f*ie,s[2]=g*k+v*D+y*Y+_*J,s[6]=g*O+v*I+y*F+_*Ee,s[10]=g*R+v*q+y*re+_*le,s[14]=g*A+v*j+y*ee+_*ie,s[3]=S*k+w*D+C*Y+E*J,s[7]=S*O+w*I+C*F+E*Ee,s[11]=S*R+w*q+C*re+E*le,s[15]=S*A+w*j+C*ee+E*ie,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],f=e[14],g=e[3],v=e[7],y=e[11],_=e[15];return g*(+s*l*h-r*c*h-s*a*d+n*c*d+r*a*f-n*l*f)+v*(+t*l*f-t*c*d+s*o*d-r*o*f+r*c*u-s*l*u)+y*(+t*c*h-t*a*f-s*o*h+n*o*f+s*a*u-n*c*u)+_*(-r*a*u-t*l*h+t*a*d+r*o*h-n*o*d+n*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],g=e[12],v=e[13],y=e[14],_=e[15],S=h*y*c-v*d*c+v*l*f-a*y*f-h*l*_+a*d*_,w=g*d*c-u*y*c-g*l*f+o*y*f+u*l*_-o*d*_,C=u*v*c-g*h*c+g*a*f-o*v*f-u*a*_+o*h*_,E=g*h*l-u*v*l-g*a*d+o*v*d+u*a*y-o*h*y,k=t*S+n*w+r*C+s*E;if(k===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/k;return e[0]=S*O,e[1]=(v*d*s-h*y*s-v*r*f+n*y*f+h*r*_-n*d*_)*O,e[2]=(a*y*s-v*l*s+v*r*c-n*y*c-a*r*_+n*l*_)*O,e[3]=(h*l*s-a*d*s-h*r*c+n*d*c+a*r*f-n*l*f)*O,e[4]=w*O,e[5]=(u*y*s-g*d*s+g*r*f-t*y*f-u*r*_+t*d*_)*O,e[6]=(g*l*s-o*y*s-g*r*c+t*y*c+o*r*_-t*l*_)*O,e[7]=(o*d*s-u*l*s+u*r*c-t*d*c-o*r*f+t*l*f)*O,e[8]=C*O,e[9]=(g*h*s-u*v*s-g*n*f+t*v*f+u*n*_-t*h*_)*O,e[10]=(o*v*s-g*a*s+g*n*c-t*v*c-o*n*_+t*a*_)*O,e[11]=(u*a*s-o*h*s-u*n*c+t*h*c+o*n*f-t*a*f)*O,e[12]=E*O,e[13]=(u*v*r-g*h*r+g*n*d-t*v*d-u*n*y+t*h*y)*O,e[14]=(g*a*r-o*v*r-g*n*l+t*v*l+o*n*y-t*a*y)*O,e[15]=(o*h*r-u*a*r+u*n*l-t*h*l-o*n*d+t*a*d)*O,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+n,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,h=a+a,d=s*c,f=s*u,g=s*h,v=o*u,y=o*h,_=a*h,S=l*c,w=l*u,C=l*h,E=n.x,k=n.y,O=n.z;return r[0]=(1-(v+_))*E,r[1]=(f+C)*E,r[2]=(g-w)*E,r[3]=0,r[4]=(f-C)*k,r[5]=(1-(d+_))*k,r[6]=(y+S)*k,r[7]=0,r[8]=(g+w)*O,r[9]=(y-S)*O,r[10]=(1-(d+v))*O,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=X0.set(r[0],r[1],r[2]).length();const o=X0.set(r[4],r[5],r[6]).length(),a=X0.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Nc.copy(this);const c=1/s,u=1/o,h=1/a;return Nc.elements[0]*=c,Nc.elements[1]*=c,Nc.elements[2]*=c,Nc.elements[4]*=u,Nc.elements[5]*=u,Nc.elements[6]*=u,Nc.elements[8]*=h,Nc.elements[9]*=h,Nc.elements[10]*=h,t.setFromRotationMatrix(Nc),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,r,s,o,a=Pu){const l=this.elements,c=2*s/(t-e),u=2*s/(n-r),h=(t+e)/(t-e),d=(n+r)/(n-r);let f,g;if(a===Pu)f=-(o+s)/(o-s),g=-2*o*s/(o-s);else if(a===z1)f=-o/(o-s),g=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,s,o,a=Pu){const l=this.elements,c=1/(t-e),u=1/(n-r),h=1/(o-s),d=(t+e)*c,f=(n+r)*u;let g,v;if(a===Pu)g=(o+s)*h,v=-2*h;else if(a===z1)g=s*h,v=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=v,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}};const X0=new oe,Nc=new qn,XX=new oe(0,0,0),YX=new oe(1,1,1),Dd=new oe,yy=new oe,Ml=new oe,e7=new qn,t7=new Ro;class a0{constructor(e=0,t=0,n=0,r=a0.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],h=r[2],d=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(bs(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-bs(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(bs(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-bs(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(bs(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-bs(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return e7.makeRotationFromQuaternion(e),this.setFromRotationMatrix(e7,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return t7.setFromEuler(this),this.setFromQuaternion(t7,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}a0.DEFAULT_ORDER="XYZ";let O2=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},KX=0;const n7=new oe,Y0=new Ro,Eh=new qn,xy=new oe,Ev=new oe,ZX=new oe,JX=new Ro,i7=new oe(1,0,0),r7=new oe(0,1,0),s7=new oe(0,0,1),QX={type:"added"},o7={type:"removed"};class Ni extends bc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:KX++}),this.uuid=Ul(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ni.DEFAULT_UP.clone();const e=new oe,t=new a0,n=new Ro,r=new oe(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new qn},normalMatrix:{value:new pi}}),this.matrix=new qn,this.matrixWorld=new qn,this.matrixAutoUpdate=Ni.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Ni.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new O2,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Y0.setFromAxisAngle(e,t),this.quaternion.multiply(Y0),this}rotateOnWorldAxis(e,t){return Y0.setFromAxisAngle(e,t),this.quaternion.premultiply(Y0),this}rotateX(e){return this.rotateOnAxis(i7,e)}rotateY(e){return this.rotateOnAxis(r7,e)}rotateZ(e){return this.rotateOnAxis(s7,e)}translateOnAxis(e,t){return n7.copy(e).applyQuaternion(this.quaternion),this.position.add(n7.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(i7,e)}translateY(e){return this.translateOnAxis(r7,e)}translateZ(e){return this.translateOnAxis(s7,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Eh.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?xy.copy(e):xy.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Ev.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Eh.lookAt(Ev,xy,this.up):Eh.lookAt(xy,Ev,this.up),this.quaternion.setFromRotationMatrix(Eh),r&&(Eh.extractRotation(r.matrixWorld),Y0.setFromRotationMatrix(Eh),this.quaternion.premultiply(Y0.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(QX)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(o7)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(o7)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Eh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Eh.multiply(e.parent.matrixWorld)),e.applyMatrix4(Eh),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectsByProperty(e,t);o.length>0&&(n=n.concat(o))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ev,e,ZX),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ev,JX,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const s=t[n];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),d=o(e.skeletons),f=o(e.animations),g=o(e.nodes);a.length>0&&(n.geometries=a),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),u.length>0&&(n.images=u),h.length>0&&(n.shapes=h),d.length>0&&(n.skeletons=d),f.length>0&&(n.animations=f),g.length>0&&(n.nodes=g)}return n.object=r,n;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}Ni.DEFAULT_UP=new oe(0,1,0);Ni.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ni.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Uc=new oe,Th=new oe,jS=new oe,Ah=new oe,K0=new oe,Z0=new oe,a7=new oe,$S=new oe,XS=new oe,YS=new oe;let wy=!1;class Ga{constructor(e=new oe,t=new oe,n=new oe){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Uc.subVectors(e,t),r.cross(Uc);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){Uc.subVectors(r,t),Th.subVectors(n,t),jS.subVectors(e,t);const o=Uc.dot(Uc),a=Uc.dot(Th),l=Uc.dot(jS),c=Th.dot(Th),u=Th.dot(jS),h=o*c-a*a;if(h===0)return s.set(-2,-1,-1);const d=1/h,f=(c*l-a*u)*d,g=(o*u-a*l)*d;return s.set(1-f-g,g,f)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Ah),Ah.x>=0&&Ah.y>=0&&Ah.x+Ah.y<=1}static getUV(e,t,n,r,s,o,a,l){return wy===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),wy=!0),this.getInterpolation(e,t,n,r,s,o,a,l)}static getInterpolation(e,t,n,r,s,o,a,l){return this.getBarycoord(e,t,n,r,Ah),l.setScalar(0),l.addScaledVector(s,Ah.x),l.addScaledVector(o,Ah.y),l.addScaledVector(a,Ah.z),l}static isFrontFacing(e,t,n,r){return Uc.subVectors(n,t),Th.subVectors(e,t),Uc.cross(Th).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Uc.subVectors(this.c,this.b),Th.subVectors(this.a,this.b),Uc.cross(Th).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ga.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ga.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,s){return wy===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),wy=!0),Ga.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}getInterpolation(e,t,n,r,s){return Ga.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return Ga.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ga.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,a;K0.subVectors(r,n),Z0.subVectors(s,n),$S.subVectors(e,n);const l=K0.dot($S),c=Z0.dot($S);if(l<=0&&c<=0)return t.copy(n);XS.subVectors(e,r);const u=K0.dot(XS),h=Z0.dot(XS);if(u>=0&&h<=u)return t.copy(r);const d=l*h-u*c;if(d<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(n).addScaledVector(K0,o);YS.subVectors(e,s);const f=K0.dot(YS),g=Z0.dot(YS);if(g>=0&&f<=g)return t.copy(s);const v=f*c-l*g;if(v<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(n).addScaledVector(Z0,a);const y=u*g-f*h;if(y<=0&&h-u>=0&&f-g>=0)return a7.subVectors(s,r),a=(h-u)/(h-u+(f-g)),t.copy(r).addScaledVector(a7,a);const _=1/(y+v+d);return o=v*_,a=d*_,t.copy(n).addScaledVector(K0,o).addScaledVector(Z0,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let eY=0,na=class extends bc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:eY++}),this.uuid=Ul(),this.name="",this.type="Material",this.blending=Jd,this.side=Xh,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=M2,this.blendDst=C2,this.blendEquation=Gd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Sw,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=t9,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=rw,this.stencilZFail=rw,this.stencilZPass=rw,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Jd&&(n.blending=this.blending),this.side!==Xh&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(n.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(n.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=this.flatShading),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}};const v9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fc={h:0,s:0,l:0},Sy={h:0,s:0,l:0};function KS(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}let qt=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Zn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Al.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Al.workingColorSpace){return this.r=e,this.g=t,this.b=n,Al.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Al.workingColorSpace){if(e=rA(e,1),t=bs(t,0,1),n=bs(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=KS(o,s,e+1/3),this.g=KS(o,s,e),this.b=KS(o,s,e-1/3)}return Al.toWorkingColorSpace(this,r),this}setStyle(e,t=Zn){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Zn){const n=v9[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Hm(e.r),this.g=Hm(e.g),this.b=Hm(e.b),this}copyLinearToSRGB(e){return this.r=US(e.r),this.g=US(e.g),this.b=US(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Zn){return Al.fromWorkingColorSpace(Ko.copy(this),e),Math.round(bs(Ko.r*255,0,255))*65536+Math.round(bs(Ko.g*255,0,255))*256+Math.round(bs(Ko.b*255,0,255))}getHexString(e=Zn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Al.workingColorSpace){Al.fromWorkingColorSpace(Ko.copy(this),t);const n=Ko.r,r=Ko.g,s=Ko.b,o=Math.max(n,r,s),a=Math.min(n,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case n:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-n)/h+2;break;case s:l=(n-r)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Al.workingColorSpace){return Al.fromWorkingColorSpace(Ko.copy(this),t),e.r=Ko.r,e.g=Ko.g,e.b=Ko.b,e}getStyle(e=Zn){Al.fromWorkingColorSpace(Ko.copy(this),e);const t=Ko.r,n=Ko.g,r=Ko.b;return e!==Zn?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(Fc),Fc.h+=e,Fc.s+=t,Fc.l+=n,this.setHSL(Fc.h,Fc.s,Fc.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Fc),e.getHSL(Sy);const n=g1(Fc.h,Sy.h,t),r=g1(Fc.s,Sy.s,t),s=g1(Fc.l,Sy.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Ko=new qt;qt.NAMES=v9;class Yu extends na{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new qt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=m_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Hh=tY();function tY(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(n[l]=0,n[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(n[l]=1024>>-c-14,n[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(n[l]=c+15<<10,n[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(n[l]=31744,n[l|256]=64512,r[l]=24,r[l|256]=24):(n[l]=31744,n[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function Va(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=bs(i,-65504,65504),Hh.floatView[0]=i;const e=Hh.uint32View[0],t=e>>23&511;return Hh.baseTable[t]+((e&8388607)>>Hh.shiftTable[t])}function o1(i){const e=i>>10;return Hh.uint32View[0]=Hh.mantissaTable[Hh.offsetTable[e]+(i&1023)]+Hh.exponentTable[e],Hh.floatView[0]}const nY={toHalfFloat:Va,fromHalfFloat:o1},Ws=new oe,My=new ht;class Un{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=D1,this.updateRange={offset:0,count:-1},this.gpuType=Ks,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)My.fromBufferAttribute(this,t),My.applyMatrix3(e),this.setXY(t,My.x,My.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Ws.fromBufferAttribute(this,t),Ws.applyMatrix3(e),this.setXYZ(t,Ws.x,Ws.y,Ws.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Ws.fromBufferAttribute(this,t),Ws.applyMatrix4(e),this.setXYZ(t,Ws.x,Ws.y,Ws.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ws.fromBufferAttribute(this,t),Ws.applyNormalMatrix(e),this.setXYZ(t,Ws.x,Ws.y,Ws.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ws.fromBufferAttribute(this,t),Ws.transformDirection(e),this.setXYZ(t,Ws.x,Ws.y,Ws.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Nl(t,this.array)),t}setX(e,t){return this.normalized&&(t=hi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Nl(t,this.array)),t}setY(e,t){return this.normalized&&(t=hi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Nl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=hi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Nl(t,this.array)),t}setW(e,t){return this.normalized&&(t=hi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=hi(t,this.array),n=hi(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=hi(t,this.array),n=hi(n,this.array),r=hi(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=hi(t,this.array),n=hi(n,this.array),r=hi(r,this.array),s=hi(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==D1&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class iY extends Un{constructor(e,t,n){super(new Int8Array(e),t,n)}}class rY extends Un{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class sY extends Un{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class oY extends Un{constructor(e,t,n){super(new Int16Array(e),t,n)}}class aA extends Un{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class aY extends Un{constructor(e,t,n){super(new Int32Array(e),t,n)}}class lA extends Un{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class lY extends Un{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=o1(this.array[e*this.itemSize]);return this.normalized&&(t=Nl(t,this.array)),t}setX(e,t){return this.normalized&&(t=hi(t,this.array)),this.array[e*this.itemSize]=Va(t),this}getY(e){let t=o1(this.array[e*this.itemSize+1]);return this.normalized&&(t=Nl(t,this.array)),t}setY(e,t){return this.normalized&&(t=hi(t,this.array)),this.array[e*this.itemSize+1]=Va(t),this}getZ(e){let t=o1(this.array[e*this.itemSize+2]);return this.normalized&&(t=Nl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=hi(t,this.array)),this.array[e*this.itemSize+2]=Va(t),this}getW(e){let t=o1(this.array[e*this.itemSize+3]);return this.normalized&&(t=Nl(t,this.array)),t}setW(e,t){return this.normalized&&(t=hi(t,this.array)),this.array[e*this.itemSize+3]=Va(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=hi(t,this.array),n=hi(n,this.array)),this.array[e+0]=Va(t),this.array[e+1]=Va(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=hi(t,this.array),n=hi(n,this.array),r=hi(r,this.array)),this.array[e+0]=Va(t),this.array[e+1]=Va(n),this.array[e+2]=Va(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=hi(t,this.array),n=hi(n,this.array),r=hi(r,this.array),s=hi(s,this.array)),this.array[e+0]=Va(t),this.array[e+1]=Va(n),this.array[e+2]=Va(r),this.array[e+3]=Va(s),this}}class en extends Un{constructor(e,t,n){super(new Float32Array(e),t,n)}}class cY extends Un{constructor(e,t,n){super(new Float64Array(e),t,n)}}let uY=0;const tc=new qn,ZS=new Ni,J0=new oe,Cl=new Xu,Tv=new Xu,Co=new oe;class Qn extends bc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:uY++}),this.uuid=Ul(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(p9(e)?lA:aA)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new pi().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return tc.makeRotationFromQuaternion(e),this.applyMatrix4(tc),this}rotateX(e){return tc.makeRotationX(e),this.applyMatrix4(tc),this}rotateY(e){return tc.makeRotationY(e),this.applyMatrix4(tc),this}rotateZ(e){return tc.makeRotationZ(e),this.applyMatrix4(tc),this}translate(e,t,n){return tc.makeTranslation(e,t,n),this.applyMatrix4(tc),this}scale(e,t,n){return tc.makeScale(e,t,n),this.applyMatrix4(tc),this}lookAt(e){return ZS.lookAt(e),ZS.updateMatrix(),this.applyMatrix4(ZS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(J0).negate(),this.translate(J0.x,J0.y,J0.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new en(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Xu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new oe(-1/0,-1/0,-1/0),new oe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];Cl.setFromBufferAttribute(s),this.morphTargetsRelative?(Co.addVectors(this.boundingBox.min,Cl.min),this.boundingBox.expandByPoint(Co),Co.addVectors(this.boundingBox.max,Cl.max),this.boundingBox.expandByPoint(Co)):(this.boundingBox.expandByPoint(Cl.min),this.boundingBox.expandByPoint(Cl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new nu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new oe,1/0);return}if(e){const n=this.boundingSphere.center;if(Cl.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Tv.setFromBufferAttribute(a),this.morphTargetsRelative?(Co.addVectors(Cl.min,Tv.min),Cl.expandByPoint(Co),Co.addVectors(Cl.max,Tv.max),Cl.expandByPoint(Co)):(Cl.expandByPoint(Tv.min),Cl.expandByPoint(Tv.max))}Cl.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)Co.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Co));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Co.fromBufferAttribute(a,c),l&&(J0.fromBufferAttribute(e,c),Co.add(J0)),r=Math.max(r,n.distanceToSquared(Co))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Un(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let D=0;D<a;D++)c[D]=new oe,u[D]=new oe;const h=new oe,d=new oe,f=new oe,g=new ht,v=new ht,y=new ht,_=new oe,S=new oe;function w(D,I,q){h.fromArray(r,D*3),d.fromArray(r,I*3),f.fromArray(r,q*3),g.fromArray(o,D*2),v.fromArray(o,I*2),y.fromArray(o,q*2),d.sub(h),f.sub(h),v.sub(g),y.sub(g);const j=1/(v.x*y.y-y.x*v.y);isFinite(j)&&(_.copy(d).multiplyScalar(y.y).addScaledVector(f,-v.y).multiplyScalar(j),S.copy(f).multiplyScalar(v.x).addScaledVector(d,-y.x).multiplyScalar(j),c[D].add(_),c[I].add(_),c[q].add(_),u[D].add(S),u[I].add(S),u[q].add(S))}let C=this.groups;C.length===0&&(C=[{start:0,count:n.length}]);for(let D=0,I=C.length;D<I;++D){const q=C[D],j=q.start,Y=q.count;for(let F=j,re=j+Y;F<re;F+=3)w(n[F+0],n[F+1],n[F+2])}const E=new oe,k=new oe,O=new oe,R=new oe;function A(D){O.fromArray(s,D*3),R.copy(O);const I=c[D];E.copy(I),E.sub(O.multiplyScalar(O.dot(I))).normalize(),k.crossVectors(R,I);const j=k.dot(u[D])<0?-1:1;l[D*4]=E.x,l[D*4+1]=E.y,l[D*4+2]=E.z,l[D*4+3]=j}for(let D=0,I=C.length;D<I;++D){const q=C[D],j=q.start,Y=q.count;for(let F=j,re=j+Y;F<re;F+=3)A(n[F+0]),A(n[F+1]),A(n[F+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Un(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let d=0,f=n.count;d<f;d++)n.setXYZ(d,0,0,0);const r=new oe,s=new oe,o=new oe,a=new oe,l=new oe,c=new oe,u=new oe,h=new oe;if(e)for(let d=0,f=e.count;d<f;d+=3){const g=e.getX(d+0),v=e.getX(d+1),y=e.getX(d+2);r.fromBufferAttribute(t,g),s.fromBufferAttribute(t,v),o.fromBufferAttribute(t,y),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),a.fromBufferAttribute(n,g),l.fromBufferAttribute(n,v),c.fromBufferAttribute(n,y),a.add(u),l.add(u),c.add(u),n.setXYZ(g,a.x,a.y,a.z),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(y,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)r.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),n.setXYZ(d+0,u.x,u.y,u.z),n.setXYZ(d+1,u.x,u.y,u.z),n.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Co.fromBufferAttribute(e,t),Co.normalize(),e.setXYZ(t,Co.x,Co.y,Co.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,d=new c.constructor(l.length*u);let f=0,g=0;for(let v=0,y=l.length;v<y;v++){a.isInterleavedBufferAttribute?f=l[v]*a.data.stride+a.offset:f=l[v]*u;for(let _=0;_<u;_++)d[g++]=c[f++]}return new Un(d,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Qn,n=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,n);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,h=c.length;u<h;u++){const d=c[u],f=e(d,n);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const c=n[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,d=c.length;h<d;h++){const f=c[h];u.push(f.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let d=0,f=h.length;d<f;d++)u.push(h[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const l7=new qn,op=new Sg,Cy=new nu,c7=new oe,Q0=new oe,em=new oe,tm=new oe,JS=new oe,Ey=new oe,Ty=new ht,Ay=new ht,Py=new ht,u7=new oe,h7=new oe,d7=new oe,ky=new oe,Ry=new oe;class rr extends Ni{constructor(e=new Qn,t=new Yu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){Ey.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],h=s[l];u!==0&&(JS.fromBufferAttribute(h,e),o?Ey.addScaledVector(JS,u):Ey.addScaledVector(JS.sub(t),u))}t.add(Ey)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Cy.copy(n.boundingSphere),Cy.applyMatrix4(s),op.copy(e.ray).recast(e.near),!(Cy.containsPoint(op.origin)===!1&&(op.intersectSphere(Cy,c7)===null||op.origin.distanceToSquared(c7)>(e.far-e.near)**2))&&(l7.copy(s).invert(),op.copy(e.ray).applyMatrix4(l7),!(n.boundingBox!==null&&op.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,op)))}_computeIntersections(e,t,n){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,d=s.groups,f=s.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,v=d.length;g<v;g++){const y=d[g],_=o[y.materialIndex],S=Math.max(y.start,f.start),w=Math.min(a.count,Math.min(y.start+y.count,f.start+f.count));for(let C=S,E=w;C<E;C+=3){const k=a.getX(C),O=a.getX(C+1),R=a.getX(C+2);r=Oy(this,_,e,n,c,u,h,k,O,R),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{const g=Math.max(0,f.start),v=Math.min(a.count,f.start+f.count);for(let y=g,_=v;y<_;y+=3){const S=a.getX(y),w=a.getX(y+1),C=a.getX(y+2);r=Oy(this,o,e,n,c,u,h,S,w,C),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let g=0,v=d.length;g<v;g++){const y=d[g],_=o[y.materialIndex],S=Math.max(y.start,f.start),w=Math.min(l.count,Math.min(y.start+y.count,f.start+f.count));for(let C=S,E=w;C<E;C+=3){const k=C,O=C+1,R=C+2;r=Oy(this,_,e,n,c,u,h,k,O,R),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=y.materialIndex,t.push(r))}}else{const g=Math.max(0,f.start),v=Math.min(l.count,f.start+f.count);for(let y=g,_=v;y<_;y+=3){const S=y,w=y+1,C=y+2;r=Oy(this,o,e,n,c,u,h,S,w,C),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}}}function hY(i,e,t,n,r,s,o,a){let l;if(e.side===wa?l=n.intersectTriangle(o,s,r,!0,a):l=n.intersectTriangle(r,s,o,e.side===Xh,a),l===null)return null;Ry.copy(a),Ry.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(Ry);return c<t.near||c>t.far?null:{distance:c,point:Ry.clone(),object:i}}function Oy(i,e,t,n,r,s,o,a,l,c){i.getVertexPosition(a,Q0),i.getVertexPosition(l,em),i.getVertexPosition(c,tm);const u=hY(i,e,t,n,Q0,em,tm,ky);if(u){r&&(Ty.fromBufferAttribute(r,a),Ay.fromBufferAttribute(r,l),Py.fromBufferAttribute(r,c),u.uv=Ga.getInterpolation(ky,Q0,em,tm,Ty,Ay,Py,new ht)),s&&(Ty.fromBufferAttribute(s,a),Ay.fromBufferAttribute(s,l),Py.fromBufferAttribute(s,c),u.uv1=Ga.getInterpolation(ky,Q0,em,tm,Ty,Ay,Py,new ht),u.uv2=u.uv1),o&&(u7.fromBufferAttribute(o,a),h7.fromBufferAttribute(o,l),d7.fromBufferAttribute(o,c),u.normal=Ga.getInterpolation(ky,Q0,em,tm,u7,h7,d7,new oe),u.normal.dot(n.direction)>0&&u.normal.multiplyScalar(-1));const h={a,b:l,c,normal:new oe,materialIndex:0};Ga.getNormal(Q0,em,tm,h.normal),u.face=h}return u}class l0 extends Qn{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],h=[];let d=0,f=0;g("z","y","x",-1,-1,n,t,e,o,s,0),g("z","y","x",1,-1,n,t,-e,o,s,1),g("x","z","y",1,1,e,n,t,r,o,2),g("x","z","y",1,-1,e,n,-t,r,o,3),g("x","y","z",1,-1,e,t,n,r,s,4),g("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new en(c,3)),this.setAttribute("normal",new en(u,3)),this.setAttribute("uv",new en(h,2));function g(v,y,_,S,w,C,E,k,O,R,A){const D=C/O,I=E/R,q=C/2,j=E/2,Y=k/2,F=O+1,re=R+1;let ee=0,J=0;const Ee=new oe;for(let le=0;le<re;le++){const ie=le*I-j;for(let be=0;be<F;be++){const Je=be*D-q;Ee[v]=Je*S,Ee[y]=ie*w,Ee[_]=Y,c.push(Ee.x,Ee.y,Ee.z),Ee[v]=0,Ee[y]=0,Ee[_]=k>0?1:-1,u.push(Ee.x,Ee.y,Ee.z),h.push(be/O),h.push(1-le/R),ee+=1}}for(let le=0;le<R;le++)for(let ie=0;ie<O;ie++){const be=d+ie+F*le,Je=d+ie+F*(le+1),Xe=d+(ie+1)+F*(le+1),Be=d+(ie+1)+F*le;l.push(be,Je,Be),l.push(Je,Xe,Be),J+=6}a.addGroup(f,J,A),f+=J,d+=ee}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new l0(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function tg(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function _a(i){const e={};for(let t=0;t<i.length;t++){const n=tg(i[t]);for(const r in n)e[r]=n[r]}return e}function dY(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function _9(i){return i.getRenderTarget()===null?i.outputColorSpace:eu}const Fp={clone:tg,merge:_a};var fY=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,pY=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Bo extends na{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=fY,this.fragmentShader=pY,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=tg(e.uniforms),this.uniformsGroups=dY(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}let b_=class extends Ni{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new qn,this.projectionMatrix=new qn,this.projectionMatrixInverse=new qn,this.coordinateSystem=Pu}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};class pr extends b_{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=eg*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Up*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return eg*2*Math.atan(Math.tan(Up*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Up*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*n/c,r*=o.width/l,n*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const nm=-90,im=1;class b9 extends Ni{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null;const r=new pr(nm,im,e,t);r.layers=this.layers,this.add(r);const s=new pr(nm,im,e,t);s.layers=this.layers,this.add(s);const o=new pr(nm,im,e,t);o.layers=this.layers,this.add(o);const a=new pr(nm,im,e,t);a.layers=this.layers,this.add(a);const l=new pr(nm,im,e,t);l.layers=this.layers,this.add(l);const c=new pr(nm,im,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Pu)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===z1)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const n=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,s,o,a,l,c]=this.children,u=e.getRenderTarget(),h=e.xr.enabled;e.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(u),e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class y_ extends qr{constructor(e,t,n,r,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Yh,super(e,t,n,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class y9 extends Lo{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];t.encoding!==void 0&&(v1("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Gh?Zn:tf),this.texture=new y_(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Hr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new l0(5,5,5),s=new Bo({name:"CubemapFromEquirect",uniforms:tg(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:wa,blending:Iu});s.uniforms.tEquirect.value=t;const o=new rr(r,s),a=t.minFilter;return t.minFilter===hf&&(t.minFilter=Hr),new b9(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}const QS=new oe,mY=new oe,gY=new pi;class qd{constructor(e=new oe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=QS.subVectors(n,t).cross(mY.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(QS),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||gY.getNormalMatrix(e),r=this.coplanarPoint(QS).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ap=new nu,Ly=new oe;class L2{constructor(e=new qd,t=new qd,n=new qd,r=new qd,s=new qd,o=new qd){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Pu){const n=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],h=r[6],d=r[7],f=r[8],g=r[9],v=r[10],y=r[11],_=r[12],S=r[13],w=r[14],C=r[15];if(n[0].setComponents(l-s,d-c,y-f,C-_).normalize(),n[1].setComponents(l+s,d+c,y+f,C+_).normalize(),n[2].setComponents(l+o,d+u,y+g,C+S).normalize(),n[3].setComponents(l-o,d-u,y-g,C-S).normalize(),n[4].setComponents(l-a,d-h,y-v,C-w).normalize(),t===Pu)n[5].setComponents(l+a,d+h,y+v,C+w).normalize();else if(t===z1)n[5].setComponents(a,h,v,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ap.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ap.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ap)}intersectsSprite(e){return ap.center.set(0,0,0),ap.radius=.7071067811865476,ap.applyMatrix4(e.matrixWorld),this.intersectsSphere(ap)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Ly.x=r.normal.x>0?e.max.x:e.min.x,Ly.y=r.normal.y>0?e.max.y:e.min.y,Ly.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Ly)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function x9(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function vY(i,e){const t=e.isWebGL2,n=new WeakMap;function r(c,u){const h=c.array,d=c.usage,f=i.createBuffer();i.bindBuffer(u,f),i.bufferData(u,h,d),c.onUploadCallback();let g;if(h instanceof Float32Array)g=i.FLOAT;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)g=i.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=i.UNSIGNED_SHORT;else if(h instanceof Int16Array)g=i.SHORT;else if(h instanceof Uint32Array)g=i.UNSIGNED_INT;else if(h instanceof Int32Array)g=i.INT;else if(h instanceof Int8Array)g=i.BYTE;else if(h instanceof Uint8Array)g=i.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)g=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:f,type:g,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,h){const d=u.array,f=u.updateRange;i.bindBuffer(h,c),f.count===-1?i.bufferSubData(h,0,d):(t?i.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):i.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),n.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=n.get(c);u&&(i.deleteBuffer(u.buffer),n.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const d=n.get(c);(!d||d.version<c.version)&&n.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const h=n.get(c);h===void 0?n.set(c,r(c,u)):h.version<c.version&&(s(h.buffer,c,u),h.version=c.version)}return{get:o,remove:a,update:l}}class Mg extends Qn{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(n),l=Math.floor(r),c=a+1,u=l+1,h=e/a,d=t/l,f=[],g=[],v=[],y=[];for(let _=0;_<u;_++){const S=_*d-o;for(let w=0;w<c;w++){const C=w*h-s;g.push(C,-S,0),v.push(0,0,1),y.push(w/a),y.push(1-_/l)}}for(let _=0;_<l;_++)for(let S=0;S<a;S++){const w=S+c*_,C=S+c*(_+1),E=S+1+c*(_+1),k=S+1+c*_;f.push(w,C,k),f.push(C,E,k)}this.setIndex(f),this.setAttribute("position",new en(g,3)),this.setAttribute("normal",new en(v,3)),this.setAttribute("uv",new en(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mg(e.width,e.height,e.widthSegments,e.heightSegments)}}var _Y=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,bY=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,yY=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,xY=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wY=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,SY=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,MY=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,CY=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,EY=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,TY=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,AY=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,PY=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,kY=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,RY=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,OY=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,LY=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,DY=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,zY=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,IY=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,NY=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,UY=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,FY=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,BY=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,VY=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,HY=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,qY=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,GY=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,WY=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,jY="gl_FragColor = linearToOutputTexel( gl_FragColor );",$Y=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,XY=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,YY=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,KY=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,ZY=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,JY=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,QY=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,eK=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,tK=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,nK=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,iK=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,rK=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,sK=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,oK=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,aK=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lK=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,cK=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,uK=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,hK=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,dK=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,fK=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,pK=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,mK=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,gK=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,vK=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,_K=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,bK=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,yK=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,xK=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,wK=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,SK=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,MK=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,CK=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,EK=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,TK=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,AK=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,PK=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,kK=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,RK=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,OK=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,LK=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,DK=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,zK=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,IK=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,NK=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,UK=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,FK=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,BK=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,VK=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,HK=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,qK=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,GK=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,WK=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,jK=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,$K=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,XK=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,YK=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,KK=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,ZK=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,JK=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,QK=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,eZ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,tZ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,nZ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,iZ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,rZ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,sZ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,oZ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,aZ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,lZ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,cZ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,uZ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,hZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,dZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,fZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,pZ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const mZ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,gZ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_Z=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,yZ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xZ=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,wZ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,SZ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,MZ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,CZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,EZ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,TZ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,AZ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,PZ=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,kZ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,RZ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,OZ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LZ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,DZ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zZ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,IZ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,NZ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,UZ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FZ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,BZ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VZ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,HZ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qZ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,GZ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,WZ=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jZ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,$Z=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,XZ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ii={alphahash_fragment:_Y,alphahash_pars_fragment:bY,alphamap_fragment:yY,alphamap_pars_fragment:xY,alphatest_fragment:wY,alphatest_pars_fragment:SY,aomap_fragment:MY,aomap_pars_fragment:CY,begin_vertex:EY,beginnormal_vertex:TY,bsdfs:AY,iridescence_fragment:PY,bumpmap_pars_fragment:kY,clipping_planes_fragment:RY,clipping_planes_pars_fragment:OY,clipping_planes_pars_vertex:LY,clipping_planes_vertex:DY,color_fragment:zY,color_pars_fragment:IY,color_pars_vertex:NY,color_vertex:UY,common:FY,cube_uv_reflection_fragment:BY,defaultnormal_vertex:VY,displacementmap_pars_vertex:HY,displacementmap_vertex:qY,emissivemap_fragment:GY,emissivemap_pars_fragment:WY,colorspace_fragment:jY,colorspace_pars_fragment:$Y,envmap_fragment:XY,envmap_common_pars_fragment:YY,envmap_pars_fragment:KY,envmap_pars_vertex:ZY,envmap_physical_pars_fragment:cK,envmap_vertex:JY,fog_vertex:QY,fog_pars_vertex:eK,fog_fragment:tK,fog_pars_fragment:nK,gradientmap_pars_fragment:iK,lightmap_fragment:rK,lightmap_pars_fragment:sK,lights_lambert_fragment:oK,lights_lambert_pars_fragment:aK,lights_pars_begin:lK,lights_toon_fragment:uK,lights_toon_pars_fragment:hK,lights_phong_fragment:dK,lights_phong_pars_fragment:fK,lights_physical_fragment:pK,lights_physical_pars_fragment:mK,lights_fragment_begin:gK,lights_fragment_maps:vK,lights_fragment_end:_K,logdepthbuf_fragment:bK,logdepthbuf_pars_fragment:yK,logdepthbuf_pars_vertex:xK,logdepthbuf_vertex:wK,map_fragment:SK,map_pars_fragment:MK,map_particle_fragment:CK,map_particle_pars_fragment:EK,metalnessmap_fragment:TK,metalnessmap_pars_fragment:AK,morphcolor_vertex:PK,morphnormal_vertex:kK,morphtarget_pars_vertex:RK,morphtarget_vertex:OK,normal_fragment_begin:LK,normal_fragment_maps:DK,normal_pars_fragment:zK,normal_pars_vertex:IK,normal_vertex:NK,normalmap_pars_fragment:UK,clearcoat_normal_fragment_begin:FK,clearcoat_normal_fragment_maps:BK,clearcoat_pars_fragment:VK,iridescence_pars_fragment:HK,opaque_fragment:qK,packing:GK,premultiplied_alpha_fragment:WK,project_vertex:jK,dithering_fragment:$K,dithering_pars_fragment:XK,roughnessmap_fragment:YK,roughnessmap_pars_fragment:KK,shadowmap_pars_fragment:ZK,shadowmap_pars_vertex:JK,shadowmap_vertex:QK,shadowmask_pars_fragment:eZ,skinbase_vertex:tZ,skinning_pars_vertex:nZ,skinning_vertex:iZ,skinnormal_vertex:rZ,specularmap_fragment:sZ,specularmap_pars_fragment:oZ,tonemapping_fragment:aZ,tonemapping_pars_fragment:lZ,transmission_fragment:cZ,transmission_pars_fragment:uZ,uv_pars_fragment:hZ,uv_pars_vertex:dZ,uv_vertex:fZ,worldpos_vertex:pZ,background_vert:mZ,background_frag:gZ,backgroundCube_vert:vZ,backgroundCube_frag:_Z,cube_vert:bZ,cube_frag:yZ,depth_vert:xZ,depth_frag:wZ,distanceRGBA_vert:SZ,distanceRGBA_frag:MZ,equirect_vert:CZ,equirect_frag:EZ,linedashed_vert:TZ,linedashed_frag:AZ,meshbasic_vert:PZ,meshbasic_frag:kZ,meshlambert_vert:RZ,meshlambert_frag:OZ,meshmatcap_vert:LZ,meshmatcap_frag:DZ,meshnormal_vert:zZ,meshnormal_frag:IZ,meshphong_vert:NZ,meshphong_frag:UZ,meshphysical_vert:FZ,meshphysical_frag:BZ,meshtoon_vert:VZ,meshtoon_frag:HZ,points_vert:qZ,points_frag:GZ,shadow_vert:WZ,shadow_frag:jZ,sprite_vert:$Z,sprite_frag:XZ},Ht={common:{diffuse:{value:new qt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new pi},alphaMap:{value:null},alphaMapTransform:{value:new pi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new pi}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new pi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new pi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new pi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new pi},normalScale:{value:new ht(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new pi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new pi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new pi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new pi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new qt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new pi},alphaTest:{value:0},uvTransform:{value:new pi}},sprite:{diffuse:{value:new qt(16777215)},opacity:{value:1},center:{value:new ht(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new pi},alphaMap:{value:null},alphaMapTransform:{value:new pi},alphaTest:{value:0}}},jc={basic:{uniforms:_a([Ht.common,Ht.specularmap,Ht.envmap,Ht.aomap,Ht.lightmap,Ht.fog]),vertexShader:ii.meshbasic_vert,fragmentShader:ii.meshbasic_frag},lambert:{uniforms:_a([Ht.common,Ht.specularmap,Ht.envmap,Ht.aomap,Ht.lightmap,Ht.emissivemap,Ht.bumpmap,Ht.normalmap,Ht.displacementmap,Ht.fog,Ht.lights,{emissive:{value:new qt(0)}}]),vertexShader:ii.meshlambert_vert,fragmentShader:ii.meshlambert_frag},phong:{uniforms:_a([Ht.common,Ht.specularmap,Ht.envmap,Ht.aomap,Ht.lightmap,Ht.emissivemap,Ht.bumpmap,Ht.normalmap,Ht.displacementmap,Ht.fog,Ht.lights,{emissive:{value:new qt(0)},specular:{value:new qt(1118481)},shininess:{value:30}}]),vertexShader:ii.meshphong_vert,fragmentShader:ii.meshphong_frag},standard:{uniforms:_a([Ht.common,Ht.envmap,Ht.aomap,Ht.lightmap,Ht.emissivemap,Ht.bumpmap,Ht.normalmap,Ht.displacementmap,Ht.roughnessmap,Ht.metalnessmap,Ht.fog,Ht.lights,{emissive:{value:new qt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ii.meshphysical_vert,fragmentShader:ii.meshphysical_frag},toon:{uniforms:_a([Ht.common,Ht.aomap,Ht.lightmap,Ht.emissivemap,Ht.bumpmap,Ht.normalmap,Ht.displacementmap,Ht.gradientmap,Ht.fog,Ht.lights,{emissive:{value:new qt(0)}}]),vertexShader:ii.meshtoon_vert,fragmentShader:ii.meshtoon_frag},matcap:{uniforms:_a([Ht.common,Ht.bumpmap,Ht.normalmap,Ht.displacementmap,Ht.fog,{matcap:{value:null}}]),vertexShader:ii.meshmatcap_vert,fragmentShader:ii.meshmatcap_frag},points:{uniforms:_a([Ht.points,Ht.fog]),vertexShader:ii.points_vert,fragmentShader:ii.points_frag},dashed:{uniforms:_a([Ht.common,Ht.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ii.linedashed_vert,fragmentShader:ii.linedashed_frag},depth:{uniforms:_a([Ht.common,Ht.displacementmap]),vertexShader:ii.depth_vert,fragmentShader:ii.depth_frag},normal:{uniforms:_a([Ht.common,Ht.bumpmap,Ht.normalmap,Ht.displacementmap,{opacity:{value:1}}]),vertexShader:ii.meshnormal_vert,fragmentShader:ii.meshnormal_frag},sprite:{uniforms:_a([Ht.sprite,Ht.fog]),vertexShader:ii.sprite_vert,fragmentShader:ii.sprite_frag},background:{uniforms:{uvTransform:{value:new pi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ii.background_vert,fragmentShader:ii.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ii.backgroundCube_vert,fragmentShader:ii.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ii.cube_vert,fragmentShader:ii.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ii.equirect_vert,fragmentShader:ii.equirect_frag},distanceRGBA:{uniforms:_a([Ht.common,Ht.displacementmap,{referencePosition:{value:new oe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ii.distanceRGBA_vert,fragmentShader:ii.distanceRGBA_frag},shadow:{uniforms:_a([Ht.lights,Ht.fog,{color:{value:new qt(0)},opacity:{value:1}}]),vertexShader:ii.shadow_vert,fragmentShader:ii.shadow_frag}};jc.physical={uniforms:_a([jc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new pi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new pi},clearcoatNormalScale:{value:new ht(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new pi},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new pi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new pi},sheen:{value:0},sheenColor:{value:new qt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new pi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new pi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new pi},transmissionSamplerSize:{value:new ht},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new pi},attenuationDistance:{value:0},attenuationColor:{value:new qt(0)},specularColor:{value:new qt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new pi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new pi},anisotropyVector:{value:new ht},anisotropyMap:{value:null},anisotropyMapTransform:{value:new pi}}]),vertexShader:ii.meshphysical_vert,fragmentShader:ii.meshphysical_frag};const Dy={r:0,b:0,g:0};function YZ(i,e,t,n,r,s,o){const a=new qt(0);let l=s===!0?0:1,c,u,h=null,d=0,f=null;function g(y,_){let S=!1,w=_.isScene===!0?_.background:null;switch(w&&w.isTexture&&(w=(_.backgroundBlurriness>0?t:e).get(w)),w===null?v(a,l):w&&w.isColor&&(v(w,1),S=!0),i.xr.getEnvironmentBlendMode()){case"opaque":S=!0;break;case"additive":n.buffers.color.setClear(0,0,0,1,o),S=!0;break;case"alpha-blend":n.buffers.color.setClear(0,0,0,0,o),S=!0;break}(i.autoClear||S)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),w&&(w.isCubeTexture||w.mapping===xg)?(u===void 0&&(u=new rr(new l0(1,1,1),new Bo({name:"BackgroundCubeMaterial",uniforms:tg(jc.backgroundCube.uniforms),vertexShader:jc.backgroundCube.vertexShader,fragmentShader:jc.backgroundCube.fragmentShader,side:wa,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(k,O,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=w,u.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,u.material.toneMapped=w.colorSpace!==Zn,(h!==w||d!==w.version||f!==i.toneMapping)&&(u.material.needsUpdate=!0,h=w,d=w.version,f=i.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null)):w&&w.isTexture&&(c===void 0&&(c=new rr(new Mg(2,2),new Bo({name:"BackgroundMaterial",uniforms:tg(jc.background.uniforms),vertexShader:jc.background.vertexShader,fragmentShader:jc.background.fragmentShader,side:Xh,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=w,c.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,c.material.toneMapped=w.colorSpace!==Zn,w.matrixAutoUpdate===!0&&w.updateMatrix(),c.material.uniforms.uvTransform.value.copy(w.matrix),(h!==w||d!==w.version||f!==i.toneMapping)&&(c.material.needsUpdate=!0,h=w,d=w.version,f=i.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}function v(y,_){y.getRGB(Dy,_9(i)),n.buffers.color.setClear(Dy.r,Dy.g,Dy.b,_,o)}return{getClearColor:function(){return a},setClearColor:function(y,_=1){a.set(y),l=_,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,v(a,l)},render:g}}function KZ(i,e,t,n){const r=i.getParameter(i.MAX_VERTEX_ATTRIBS),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||s!==null,a={},l=y(null);let c=l,u=!1;function h(Y,F,re,ee,J){let Ee=!1;if(o){const le=v(ee,re,F);c!==le&&(c=le,f(c.object)),Ee=_(Y,ee,re,J),Ee&&S(Y,ee,re,J)}else{const le=F.wireframe===!0;(c.geometry!==ee.id||c.program!==re.id||c.wireframe!==le)&&(c.geometry=ee.id,c.program=re.id,c.wireframe=le,Ee=!0)}J!==null&&t.update(J,i.ELEMENT_ARRAY_BUFFER),(Ee||u)&&(u=!1,R(Y,F,re,ee),J!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(J).buffer))}function d(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}function f(Y){return n.isWebGL2?i.bindVertexArray(Y):s.bindVertexArrayOES(Y)}function g(Y){return n.isWebGL2?i.deleteVertexArray(Y):s.deleteVertexArrayOES(Y)}function v(Y,F,re){const ee=re.wireframe===!0;let J=a[Y.id];J===void 0&&(J={},a[Y.id]=J);let Ee=J[F.id];Ee===void 0&&(Ee={},J[F.id]=Ee);let le=Ee[ee];return le===void 0&&(le=y(d()),Ee[ee]=le),le}function y(Y){const F=[],re=[],ee=[];for(let J=0;J<r;J++)F[J]=0,re[J]=0,ee[J]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:re,attributeDivisors:ee,object:Y,attributes:{},index:null}}function _(Y,F,re,ee){const J=c.attributes,Ee=F.attributes;let le=0;const ie=re.getAttributes();for(const be in ie)if(ie[be].location>=0){const Xe=J[be];let Be=Ee[be];if(Be===void 0&&(be==="instanceMatrix"&&Y.instanceMatrix&&(Be=Y.instanceMatrix),be==="instanceColor"&&Y.instanceColor&&(Be=Y.instanceColor)),Xe===void 0||Xe.attribute!==Be||Be&&Xe.data!==Be.data)return!0;le++}return c.attributesNum!==le||c.index!==ee}function S(Y,F,re,ee){const J={},Ee=F.attributes;let le=0;const ie=re.getAttributes();for(const be in ie)if(ie[be].location>=0){let Xe=Ee[be];Xe===void 0&&(be==="instanceMatrix"&&Y.instanceMatrix&&(Xe=Y.instanceMatrix),be==="instanceColor"&&Y.instanceColor&&(Xe=Y.instanceColor));const Be={};Be.attribute=Xe,Xe&&Xe.data&&(Be.data=Xe.data),J[be]=Be,le++}c.attributes=J,c.attributesNum=le,c.index=ee}function w(){const Y=c.newAttributes;for(let F=0,re=Y.length;F<re;F++)Y[F]=0}function C(Y){E(Y,0)}function E(Y,F){const re=c.newAttributes,ee=c.enabledAttributes,J=c.attributeDivisors;re[Y]=1,ee[Y]===0&&(i.enableVertexAttribArray(Y),ee[Y]=1),J[Y]!==F&&((n.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Y,F),J[Y]=F)}function k(){const Y=c.newAttributes,F=c.enabledAttributes;for(let re=0,ee=F.length;re<ee;re++)F[re]!==Y[re]&&(i.disableVertexAttribArray(re),F[re]=0)}function O(Y,F,re,ee,J,Ee,le){le===!0?i.vertexAttribIPointer(Y,F,re,J,Ee):i.vertexAttribPointer(Y,F,re,ee,J,Ee)}function R(Y,F,re,ee){if(n.isWebGL2===!1&&(Y.isInstancedMesh||ee.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;w();const J=ee.attributes,Ee=re.getAttributes(),le=F.defaultAttributeValues;for(const ie in Ee){const be=Ee[ie];if(be.location>=0){let Je=J[ie];if(Je===void 0&&(ie==="instanceMatrix"&&Y.instanceMatrix&&(Je=Y.instanceMatrix),ie==="instanceColor"&&Y.instanceColor&&(Je=Y.instanceColor)),Je!==void 0){const Xe=Je.normalized,Be=Je.itemSize,vt=t.get(Je);if(vt===void 0)continue;const at=vt.buffer,Le=vt.type,Ot=vt.bytesPerElement,ft=n.isWebGL2===!0&&(Le===i.INT||Le===i.UNSIGNED_INT||Je.gpuType===wg);if(Je.isInterleavedBufferAttribute){const rt=Je.data,tt=rt.stride,se=Je.offset;if(rt.isInstancedInterleavedBuffer){for(let ke=0;ke<be.locationSize;ke++)E(be.location+ke,rt.meshPerAttribute);Y.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=rt.meshPerAttribute*rt.count)}else for(let ke=0;ke<be.locationSize;ke++)C(be.location+ke);i.bindBuffer(i.ARRAY_BUFFER,at);for(let ke=0;ke<be.locationSize;ke++)O(be.location+ke,Be/be.locationSize,Le,Xe,tt*Ot,(se+Be/be.locationSize*ke)*Ot,ft)}else{if(Je.isInstancedBufferAttribute){for(let rt=0;rt<be.locationSize;rt++)E(be.location+rt,Je.meshPerAttribute);Y.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=Je.meshPerAttribute*Je.count)}else for(let rt=0;rt<be.locationSize;rt++)C(be.location+rt);i.bindBuffer(i.ARRAY_BUFFER,at);for(let rt=0;rt<be.locationSize;rt++)O(be.location+rt,Be/be.locationSize,Le,Xe,Be*Ot,Be/be.locationSize*rt*Ot,ft)}}else if(le!==void 0){const Xe=le[ie];if(Xe!==void 0)switch(Xe.length){case 2:i.vertexAttrib2fv(be.location,Xe);break;case 3:i.vertexAttrib3fv(be.location,Xe);break;case 4:i.vertexAttrib4fv(be.location,Xe);break;default:i.vertexAttrib1fv(be.location,Xe)}}}}k()}function A(){q();for(const Y in a){const F=a[Y];for(const re in F){const ee=F[re];for(const J in ee)g(ee[J].object),delete ee[J];delete F[re]}delete a[Y]}}function D(Y){if(a[Y.id]===void 0)return;const F=a[Y.id];for(const re in F){const ee=F[re];for(const J in ee)g(ee[J].object),delete ee[J];delete F[re]}delete a[Y.id]}function I(Y){for(const F in a){const re=a[F];if(re[Y.id]===void 0)continue;const ee=re[Y.id];for(const J in ee)g(ee[J].object),delete ee[J];delete re[Y.id]}}function q(){j(),u=!0,c!==l&&(c=l,f(c.object))}function j(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:q,resetDefaultState:j,dispose:A,releaseStatesOfGeometry:D,releaseStatesOfProgram:I,initAttributes:w,enableAttribute:C,disableUnusedAttributes:k}}function ZZ(i,e,t,n){const r=n.isWebGL2;let s;function o(c){s=c}function a(c,u){i.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,h){if(h===0)return;let d,f;if(r)d=i,f="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[f](s,c,u,h),t.update(u,s,h)}this.setMode=o,this.render=a,this.renderInstances=l}function JZ(i,e,t){let n;function r(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const O=e.get("EXT_texture_filter_anisotropic");n=i.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function s(O){if(O==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";O="mediump"}return O==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&i.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,h=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),d=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=i.getParameter(i.MAX_TEXTURE_SIZE),g=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),v=i.getParameter(i.MAX_VERTEX_ATTRIBS),y=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),_=i.getParameter(i.MAX_VARYING_VECTORS),S=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),w=d>0,C=o||e.has("OES_texture_float"),E=w&&C,k=o?i.getParameter(i.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:g,maxAttributes:v,maxVertexUniforms:y,maxVaryings:_,maxFragmentUniforms:S,vertexTextures:w,floatFragmentTextures:C,floatVertexTextures:E,maxSamples:k}}function QZ(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new qd,a=new pi,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const f=h.length!==0||d||n!==0||r;return r=d,n=h.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,d){t=u(h,d,0)},this.setState=function(h,d,f){const g=h.clippingPlanes,v=h.clipIntersection,y=h.clipShadows,_=i.get(h);if(!r||g===null||g.length===0||s&&!y)s?u(null):c();else{const S=s?0:n,w=S*4;let C=_.clippingState||null;l.value=C,C=u(g,d,w,f);for(let E=0;E!==w;++E)C[E]=t[E];_.clippingState=C,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=S}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(h,d,f,g){const v=h!==null?h.length:0;let y=null;if(v!==0){if(y=l.value,g!==!0||y===null){const _=f+v*4,S=d.matrixWorldInverse;a.getNormalMatrix(S),(y===null||y.length<_)&&(y=new Float32Array(_));for(let w=0,C=f;w!==v;++w,C+=4)o.copy(h[w]).applyMatrix4(S,a),o.normal.toArray(y,C),y[C+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,y}}function eJ(i){let e=new WeakMap;function t(o,a){return a===A1?o.mapping=Yh:a===P1&&(o.mapping=uf),o}function n(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===A1||a===P1)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new y9(l.height/2);return c.fromEquirectangularTexture(i,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}class od extends b_{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Pm=4,f7=[.125,.215,.35,.446,.526,.582],Tp=20,eM=new od,p7=new qt;let tM=null;const wp=(1+Math.sqrt(5))/2,rm=1/wp,m7=[new oe(1,1,1),new oe(-1,1,1),new oe(1,1,-1),new oe(-1,1,-1),new oe(0,wp,rm),new oe(0,wp,-rm),new oe(rm,0,wp),new oe(-rm,0,wp),new oe(wp,rm,0),new oe(-wp,rm,0)];class yE{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){tM=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_7(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=v7(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(tM),e.scissorTest=!1,zy(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Yh||e.mapping===uf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),tM=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Hr,minFilter:Hr,generateMipmaps:!1,type:Qc,format:Fo,colorSpace:eu,depthBuffer:!1},r=g7(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=g7(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=tJ(s)),this._blurMaterial=nJ(s,e,t)}return r}_compileMaterial(e){const t=new rr(this._lodPlanes[0],e);this._renderer.compile(t,eM)}_sceneToCubeUV(e,t,n,r){const a=new pr(90,1,t,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,d=u.toneMapping;u.getClearColor(p7),u.toneMapping=qh,u.autoClear=!1;const f=new Yu({name:"PMREM.Background",side:wa,depthWrite:!1,depthTest:!1}),g=new rr(new l0,f);let v=!1;const y=e.background;y?y.isColor&&(f.color.copy(y),e.background=null,v=!0):(f.color.copy(p7),v=!0);for(let _=0;_<6;_++){const S=_%3;S===0?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):S===1?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_]));const w=this._cubeSize;zy(r,S*w,_>2?w:0,w,w),u.setRenderTarget(r),v&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=d,u.autoClear=h,e.background=y}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===Yh||e.mapping===uf;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=_7()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=v7());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new rr(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;zy(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(o,eM)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=m7[(r-1)%m7.length];this._blur(e,r-1,r,s,o)}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new rr(this._lodPlanes[r],c),d=c.uniforms,f=this._sizeLods[n]-1,g=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*Tp-1),v=s/g,y=isFinite(s)?1+Math.floor(u*v):Tp;y>Tp&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${Tp}`);const _=[];let S=0;for(let O=0;O<Tp;++O){const R=O/v,A=Math.exp(-R*R/2);_.push(A),O===0?S+=A:O<y&&(S+=2*A)}for(let O=0;O<_.length;O++)_[O]=_[O]/S;d.envMap.value=e.texture,d.samples.value=y,d.weights.value=_,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:w}=this;d.dTheta.value=g,d.mipInt.value=w-n;const C=this._sizeLods[r],E=3*C*(r>w-Pm?r-w+Pm:0),k=4*(this._cubeSize-C);zy(t,E,k,3*C,2*C),l.setRenderTarget(t),l.render(h,eM)}}function tJ(i){const e=[],t=[],n=[];let r=i;const s=i-Pm+1+f7.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>i-Pm?l=f7[o-i+Pm-1]:o===0&&(l=0),n.push(l);const c=1/(a-2),u=-c,h=1+c,d=[u,u,h,u,h,h,u,u,h,h,u,h],f=6,g=6,v=3,y=2,_=1,S=new Float32Array(v*g*f),w=new Float32Array(y*g*f),C=new Float32Array(_*g*f);for(let k=0;k<f;k++){const O=k%3*2/3-1,R=k>2?0:-1,A=[O,R,0,O+2/3,R,0,O+2/3,R+1,0,O,R,0,O+2/3,R+1,0,O,R+1,0];S.set(A,v*g*k),w.set(d,y*g*k);const D=[k,k,k,k,k,k];C.set(D,_*g*k)}const E=new Qn;E.setAttribute("position",new Un(S,v)),E.setAttribute("uv",new Un(w,y)),E.setAttribute("faceIndex",new Un(C,_)),e.push(E),r>Pm&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function g7(i,e,t){const n=new Lo(i,e,t);return n.texture.mapping=xg,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function zy(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function nJ(i,e,t){const n=new Float32Array(Tp),r=new oe(0,1,0);return new Bo({name:"SphericalGaussianBlur",defines:{n:Tp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:cA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Iu,depthTest:!1,depthWrite:!1})}function v7(){return new Bo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:cA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Iu,depthTest:!1,depthWrite:!1})}function _7(){return new Bo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:cA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Iu,depthTest:!1,depthWrite:!1})}function cA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function iJ(i){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture){const l=a.mapping,c=l===A1||l===P1,u=l===Yh||l===uf;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return t===null&&(t=new yE(i)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(c&&h&&h.height>0||u&&h&&r(h)){t===null&&(t=new yE(i));const d=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function rJ(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const r=t(n);return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function sJ(i,e,t,n){const r={},s=new WeakMap;function o(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const g in d.attributes)e.remove(d.attributes[g]);for(const g in d.morphAttributes){const v=d.morphAttributes[g];for(let y=0,_=v.length;y<_;y++)e.remove(v[y])}d.removeEventListener("dispose",o),delete r[d.id];const f=s.get(d);f&&(e.remove(f),s.delete(d)),n.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(h,d){return r[d.id]===!0||(d.addEventListener("dispose",o),r[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const g in d)e.update(d[g],i.ARRAY_BUFFER);const f=h.morphAttributes;for(const g in f){const v=f[g];for(let y=0,_=v.length;y<_;y++)e.update(v[y],i.ARRAY_BUFFER)}}function c(h){const d=[],f=h.index,g=h.attributes.position;let v=0;if(f!==null){const S=f.array;v=f.version;for(let w=0,C=S.length;w<C;w+=3){const E=S[w+0],k=S[w+1],O=S[w+2];d.push(E,k,k,O,O,E)}}else{const S=g.array;v=g.version;for(let w=0,C=S.length/3-1;w<C;w+=3){const E=w+0,k=w+1,O=w+2;d.push(E,k,k,O,O,E)}}const y=new(p9(d)?lA:aA)(d,1);y.version=v;const _=s.get(h);_&&e.remove(_),s.set(h,y)}function u(h){const d=s.get(h);if(d){const f=h.index;f!==null&&d.version<f.version&&c(h)}else c(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:u}}function oJ(i,e,t,n){const r=n.isWebGL2;let s;function o(d){s=d}let a,l;function c(d){a=d.type,l=d.bytesPerElement}function u(d,f){i.drawElements(s,f,a,d*l),t.update(f,s,1)}function h(d,f,g){if(g===0)return;let v,y;if(r)v=i,y="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[y](s,f,a,d*l,g),t.update(f,s,g)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=h}function aJ(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,a){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=a*(s/3);break;case i.LINES:t.lines+=a*(s/2);break;case i.LINE_STRIP:t.lines+=a*(s-1);break;case i.LINE_LOOP:t.lines+=a*s;break;case i.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function lJ(i,e){return i[0]-e[0]}function cJ(i,e){return Math.abs(e[1])-Math.abs(i[1])}function uJ(i,e,t){const n={},r=new Float32Array(8),s=new WeakMap,o=new Li,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,h){const d=c.morphTargetInfluences;if(e.isWebGL2===!0){const f=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,g=f!==void 0?f.length:0;let v=s.get(u);if(v===void 0||v.count!==g){let Y=function(){q.dispose(),s.delete(u),u.removeEventListener("dispose",Y)};v!==void 0&&v.texture.dispose();const S=u.morphAttributes.position!==void 0,w=u.morphAttributes.normal!==void 0,C=u.morphAttributes.color!==void 0,E=u.morphAttributes.position||[],k=u.morphAttributes.normal||[],O=u.morphAttributes.color||[];let R=0;S===!0&&(R=1),w===!0&&(R=2),C===!0&&(R=3);let A=u.attributes.position.count*R,D=1;A>e.maxTextureSize&&(D=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const I=new Float32Array(A*D*4*g),q=new R2(I,A,D,g);q.type=Ks,q.needsUpdate=!0;const j=R*4;for(let F=0;F<g;F++){const re=E[F],ee=k[F],J=O[F],Ee=A*D*4*F;for(let le=0;le<re.count;le++){const ie=le*j;S===!0&&(o.fromBufferAttribute(re,le),I[Ee+ie+0]=o.x,I[Ee+ie+1]=o.y,I[Ee+ie+2]=o.z,I[Ee+ie+3]=0),w===!0&&(o.fromBufferAttribute(ee,le),I[Ee+ie+4]=o.x,I[Ee+ie+5]=o.y,I[Ee+ie+6]=o.z,I[Ee+ie+7]=0),C===!0&&(o.fromBufferAttribute(J,le),I[Ee+ie+8]=o.x,I[Ee+ie+9]=o.y,I[Ee+ie+10]=o.z,I[Ee+ie+11]=J.itemSize===4?o.w:1)}}v={count:g,texture:q,size:new ht(A,D)},s.set(u,v),u.addEventListener("dispose",Y)}let y=0;for(let S=0;S<d.length;S++)y+=d[S];const _=u.morphTargetsRelative?1:1-y;h.getUniforms().setValue(i,"morphTargetBaseInfluence",_),h.getUniforms().setValue(i,"morphTargetInfluences",d),h.getUniforms().setValue(i,"morphTargetsTexture",v.texture,t),h.getUniforms().setValue(i,"morphTargetsTextureSize",v.size)}else{const f=d===void 0?0:d.length;let g=n[u.id];if(g===void 0||g.length!==f){g=[];for(let w=0;w<f;w++)g[w]=[w,0];n[u.id]=g}for(let w=0;w<f;w++){const C=g[w];C[0]=w,C[1]=d[w]}g.sort(cJ);for(let w=0;w<8;w++)w<f&&g[w][1]?(a[w][0]=g[w][0],a[w][1]=g[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(lJ);const v=u.morphAttributes.position,y=u.morphAttributes.normal;let _=0;for(let w=0;w<8;w++){const C=a[w],E=C[0],k=C[1];E!==Number.MAX_SAFE_INTEGER&&k?(v&&u.getAttribute("morphTarget"+w)!==v[E]&&u.setAttribute("morphTarget"+w,v[E]),y&&u.getAttribute("morphNormal"+w)!==y[E]&&u.setAttribute("morphNormal"+w,y[E]),r[w]=k,_+=k):(v&&u.hasAttribute("morphTarget"+w)===!0&&u.deleteAttribute("morphTarget"+w),y&&u.hasAttribute("morphNormal"+w)===!0&&u.deleteAttribute("morphNormal"+w),r[w]=0)}const S=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(i,"morphTargetBaseInfluence",S),h.getUniforms().setValue(i,"morphTargetInfluences",r)}}return{update:l}}function hJ(i,e,t,n){let r=new WeakMap;function s(l){const c=n.render.frame,u=l.geometry,h=e.get(l,u);if(r.get(h)!==c&&(e.update(h),r.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,i.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,i.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const d=l.skeleton;r.get(d)!==c&&(d.update(),r.set(d,c))}return h}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const w9=new qr,S9=new R2,M9=new oA,C9=new y_,b7=[],y7=[],x7=new Float32Array(16),w7=new Float32Array(9),S7=new Float32Array(4);function Cg(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=b7[r];if(s===void 0&&(s=new Float32Array(r),b7[r]=s),e!==0){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(s,a)}return s}function uo(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function ho(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function D2(i,e){let t=y7[e];t===void 0&&(t=new Int32Array(e),y7[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function dJ(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function fJ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(uo(t,e))return;i.uniform2fv(this.addr,e),ho(t,e)}}function pJ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(uo(t,e))return;i.uniform3fv(this.addr,e),ho(t,e)}}function mJ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(uo(t,e))return;i.uniform4fv(this.addr,e),ho(t,e)}}function gJ(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(uo(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),ho(t,e)}else{if(uo(t,n))return;S7.set(n),i.uniformMatrix2fv(this.addr,!1,S7),ho(t,n)}}function vJ(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(uo(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),ho(t,e)}else{if(uo(t,n))return;w7.set(n),i.uniformMatrix3fv(this.addr,!1,w7),ho(t,n)}}function _J(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(uo(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),ho(t,e)}else{if(uo(t,n))return;x7.set(n),i.uniformMatrix4fv(this.addr,!1,x7),ho(t,n)}}function bJ(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function yJ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(uo(t,e))return;i.uniform2iv(this.addr,e),ho(t,e)}}function xJ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(uo(t,e))return;i.uniform3iv(this.addr,e),ho(t,e)}}function wJ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(uo(t,e))return;i.uniform4iv(this.addr,e),ho(t,e)}}function SJ(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function MJ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(uo(t,e))return;i.uniform2uiv(this.addr,e),ho(t,e)}}function CJ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(uo(t,e))return;i.uniform3uiv(this.addr,e),ho(t,e)}}function EJ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(uo(t,e))return;i.uniform4uiv(this.addr,e),ho(t,e)}}function TJ(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2D(e||w9,r)}function AJ(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||M9,r)}function PJ(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||C9,r)}function kJ(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||S9,r)}function RJ(i){switch(i){case 5126:return dJ;case 35664:return fJ;case 35665:return pJ;case 35666:return mJ;case 35674:return gJ;case 35675:return vJ;case 35676:return _J;case 5124:case 35670:return bJ;case 35667:case 35671:return yJ;case 35668:case 35672:return xJ;case 35669:case 35673:return wJ;case 5125:return SJ;case 36294:return MJ;case 36295:return CJ;case 36296:return EJ;case 35678:case 36198:case 36298:case 36306:case 35682:return TJ;case 35679:case 36299:case 36307:return AJ;case 35680:case 36300:case 36308:case 36293:return PJ;case 36289:case 36303:case 36311:case 36292:return kJ}}function OJ(i,e){i.uniform1fv(this.addr,e)}function LJ(i,e){const t=Cg(e,this.size,2);i.uniform2fv(this.addr,t)}function DJ(i,e){const t=Cg(e,this.size,3);i.uniform3fv(this.addr,t)}function zJ(i,e){const t=Cg(e,this.size,4);i.uniform4fv(this.addr,t)}function IJ(i,e){const t=Cg(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function NJ(i,e){const t=Cg(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function UJ(i,e){const t=Cg(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function FJ(i,e){i.uniform1iv(this.addr,e)}function BJ(i,e){i.uniform2iv(this.addr,e)}function VJ(i,e){i.uniform3iv(this.addr,e)}function HJ(i,e){i.uniform4iv(this.addr,e)}function qJ(i,e){i.uniform1uiv(this.addr,e)}function GJ(i,e){i.uniform2uiv(this.addr,e)}function WJ(i,e){i.uniform3uiv(this.addr,e)}function jJ(i,e){i.uniform4uiv(this.addr,e)}function $J(i,e,t){const n=this.cache,r=e.length,s=D2(t,r);uo(n,s)||(i.uniform1iv(this.addr,s),ho(n,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||w9,s[o])}function XJ(i,e,t){const n=this.cache,r=e.length,s=D2(t,r);uo(n,s)||(i.uniform1iv(this.addr,s),ho(n,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||M9,s[o])}function YJ(i,e,t){const n=this.cache,r=e.length,s=D2(t,r);uo(n,s)||(i.uniform1iv(this.addr,s),ho(n,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||C9,s[o])}function KJ(i,e,t){const n=this.cache,r=e.length,s=D2(t,r);uo(n,s)||(i.uniform1iv(this.addr,s),ho(n,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||S9,s[o])}function ZJ(i){switch(i){case 5126:return OJ;case 35664:return LJ;case 35665:return DJ;case 35666:return zJ;case 35674:return IJ;case 35675:return NJ;case 35676:return UJ;case 5124:case 35670:return FJ;case 35667:case 35671:return BJ;case 35668:case 35672:return VJ;case 35669:case 35673:return HJ;case 5125:return qJ;case 36294:return GJ;case 36295:return WJ;case 36296:return jJ;case 35678:case 36198:case 36298:case 36306:case 35682:return $J;case 35679:case 36299:case 36307:return XJ;case 35680:case 36300:case 36308:case 36293:return YJ;case 36289:case 36303:case 36311:case 36292:return KJ}}class JJ{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=RJ(t.type)}}class QJ{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=ZJ(t.type)}}class eQ{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],n)}}}const nM=/(\w+)(\])?(\[|\.)?/g;function M7(i,e){i.seq.push(e),i.map[e.id]=e}function tQ(i,e,t){const n=i.name,r=n.length;for(nM.lastIndex=0;;){const s=nM.exec(n),o=nM.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){M7(t,c===void 0?new JJ(a,i,e):new QJ(a,i,e));break}else{let h=t.map[a];h===void 0&&(h=new eQ(a),M7(t,h)),t=h}}}class sw{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);tQ(s,o,this)}}setValue(e,t,n,r){const s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=n[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&n.push(o)}return n}}function C7(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}let nQ=0;function iQ(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join(`
`)}function rQ(i){switch(i){case eu:return["Linear","( value )"];case Zn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),["Linear","( value )"]}}function E7(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+iQ(i.getShaderSource(e),o)}else return r}function sQ(i,e){const t=rQ(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function oQ(i,e){let t;switch(e){case VD:t="Linear";break;case HD:t="Reinhard";break;case qD:t="OptimizedCineon";break;case jT:t="ACESFilmic";break;case GD:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function aQ(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.normalMapTangentSpace||i.clearcoatNormalMap||i.flatShading||i.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(a1).join(`
`)}function lQ(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function cQ(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let a=1;s.type===i.FLOAT_MAT2&&(a=2),s.type===i.FLOAT_MAT3&&(a=3),s.type===i.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}function a1(i){return i!==""}function T7(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function A7(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const uQ=/^[ \t]*#include +<([\w\d./]+)>/gm;function xE(i){return i.replace(uQ,dQ)}const hQ=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function dQ(i,e){let t=ii[e];if(t===void 0){const n=hQ.get(e);if(n!==void 0)t=ii[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return xE(t)}const fQ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function P7(i){return i.replace(fQ,pQ)}function pQ(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function k7(i){let e="precision "+i.precision+` float;
precision `+i.precision+" int;";return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function mQ(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===DT?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===S2?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Mu&&(e="SHADOWMAP_TYPE_VSM"),e}function gQ(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Yh:case uf:e="ENVMAP_TYPE_CUBE";break;case xg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function vQ(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case uf:e="ENVMAP_MODE_REFRACTION";break}return e}function _Q(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case m_:e="ENVMAP_BLENDING_MULTIPLY";break;case FD:e="ENVMAP_BLENDING_MIX";break;case BD:e="ENVMAP_BLENDING_ADD";break}return e}function bQ(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function yQ(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=mQ(t),c=gQ(t),u=vQ(t),h=_Q(t),d=bQ(t),f=t.isWebGL2?"":aQ(t),g=lQ(s),v=r.createProgram();let y,_,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(a1).join(`
`),y.length>0&&(y+=`
`),_=[f,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(a1).join(`
`),_.length>0&&(_+=`
`)):(y=[k7(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(a1).join(`
`),_=[f,k7(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==qh?"#define TONE_MAPPING":"",t.toneMapping!==qh?ii.tonemapping_pars_fragment:"",t.toneMapping!==qh?oQ("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ii.colorspace_pars_fragment,sQ("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(a1).join(`
`)),o=xE(o),o=T7(o,t),o=A7(o,t),a=xE(a),a=T7(a,t),a=A7(a,t),o=P7(o),a=P7(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,_=["#define varying in",t.glslVersion===vE?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===vE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const w=S+y+o,C=S+_+a,E=C7(r,r.VERTEX_SHADER,w),k=C7(r,r.FRAGMENT_SHADER,C);if(r.attachShader(v,E),r.attachShader(v,k),t.index0AttributeName!==void 0?r.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),i.debug.checkShaderErrors){const A=r.getProgramInfoLog(v).trim(),D=r.getShaderInfoLog(E).trim(),I=r.getShaderInfoLog(k).trim();let q=!0,j=!0;if(r.getProgramParameter(v,r.LINK_STATUS)===!1)if(q=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,v,E,k);else{const Y=E7(r,E,"vertex"),F=E7(r,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,r.VALIDATE_STATUS)+`

Program Info Log: `+A+`
`+Y+`
`+F)}else A!==""?console.warn("THREE.WebGLProgram: Program Info Log:",A):(D===""||I==="")&&(j=!1);j&&(this.diagnostics={runnable:q,programLog:A,vertexShader:{log:D,prefix:y},fragmentShader:{log:I,prefix:_}})}r.deleteShader(E),r.deleteShader(k);let O;this.getUniforms=function(){return O===void 0&&(O=new sw(r,v)),O};let R;return this.getAttributes=function(){return R===void 0&&(R=cQ(r,v)),R},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=nQ++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=E,this.fragmentShader=k,this}let xQ=0;class wQ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new SQ(e),t.set(e,n)),n}}class SQ{constructor(e){this.id=xQ++,this.code=e,this.usedTimes=0}}function MQ(i,e,t,n,r,s,o){const a=new O2,l=new wQ,c=[],u=r.isWebGL2,h=r.logarithmicDepthBuffer,d=r.vertexTextures;let f=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(A){return A===0?"uv":`uv${A}`}function y(A,D,I,q,j){const Y=q.fog,F=j.geometry,re=A.isMeshStandardMaterial?q.environment:null,ee=(A.isMeshStandardMaterial?t:e).get(A.envMap||re),J=ee&&ee.mapping===xg?ee.image.height:null,Ee=g[A.type];A.precision!==null&&(f=r.getMaxPrecision(A.precision),f!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",f,"instead."));const le=F.morphAttributes.position||F.morphAttributes.normal||F.morphAttributes.color,ie=le!==void 0?le.length:0;let be=0;F.morphAttributes.position!==void 0&&(be=1),F.morphAttributes.normal!==void 0&&(be=2),F.morphAttributes.color!==void 0&&(be=3);let Je,Xe,Be,vt;if(Ee){const Wn=jc[Ee];Je=Wn.vertexShader,Xe=Wn.fragmentShader}else Je=A.vertexShader,Xe=A.fragmentShader,l.update(A),Be=l.getVertexShaderID(A),vt=l.getFragmentShaderID(A);const at=i.getRenderTarget(),Le=j.isInstancedMesh===!0,Ot=!!A.map,ft=!!A.matcap,rt=!!ee,tt=!!A.aoMap,se=!!A.lightMap,ke=!!A.bumpMap,ae=!!A.normalMap,xe=!!A.displacementMap,Ie=!!A.emissiveMap,dt=!!A.metalnessMap,nt=!!A.roughnessMap,me=A.anisotropy>0,ue=A.clearcoat>0,Pe=A.iridescence>0,U=A.sheen>0,V=A.transmission>0,Ve=me&&!!A.anisotropyMap,st=ue&&!!A.clearcoatMap,ve=ue&&!!A.clearcoatNormalMap,ut=ue&&!!A.clearcoatRoughnessMap,Zt=Pe&&!!A.iridescenceMap,we=Pe&&!!A.iridescenceThicknessMap,Se=U&&!!A.sheenColorMap,Tt=U&&!!A.sheenRoughnessMap,zt=!!A.specularMap,Vt=!!A.specularColorMap,Gt=!!A.specularIntensityMap,Dt=V&&!!A.transmissionMap,Yt=V&&!!A.thicknessMap,Yn=!!A.gradientMap,Me=!!A.alphaMap,At=A.alphaTest>0,qe=!!A.alphaHash,kt=!!A.extensions,Lt=!!F.attributes.uv1,Te=!!F.attributes.uv2,pn=!!F.attributes.uv3;let mi=qh;return A.toneMapped&&(at===null||at.isXRRenderTarget===!0)&&(mi=i.toneMapping),{isWebGL2:u,shaderID:Ee,shaderType:A.type,shaderName:A.name,vertexShader:Je,fragmentShader:Xe,defines:A.defines,customVertexShaderID:Be,customFragmentShaderID:vt,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:f,instancing:Le,instancingColor:Le&&j.instanceColor!==null,supportsVertexTextures:d,outputColorSpace:at===null?i.outputColorSpace:at.isXRRenderTarget===!0?at.texture.colorSpace:eu,map:Ot,matcap:ft,envMap:rt,envMapMode:rt&&ee.mapping,envMapCubeUVHeight:J,aoMap:tt,lightMap:se,bumpMap:ke,normalMap:ae,displacementMap:d&&xe,emissiveMap:Ie,normalMapObjectSpace:ae&&A.normalMapType===e9,normalMapTangentSpace:ae&&A.normalMapType===Ef,metalnessMap:dt,roughnessMap:nt,anisotropy:me,anisotropyMap:Ve,clearcoat:ue,clearcoatMap:st,clearcoatNormalMap:ve,clearcoatRoughnessMap:ut,iridescence:Pe,iridescenceMap:Zt,iridescenceThicknessMap:we,sheen:U,sheenColorMap:Se,sheenRoughnessMap:Tt,specularMap:zt,specularColorMap:Vt,specularIntensityMap:Gt,transmission:V,transmissionMap:Dt,thicknessMap:Yt,gradientMap:Yn,opaque:A.transparent===!1&&A.blending===Jd,alphaMap:Me,alphaTest:At,alphaHash:qe,combine:A.combine,mapUv:Ot&&v(A.map.channel),aoMapUv:tt&&v(A.aoMap.channel),lightMapUv:se&&v(A.lightMap.channel),bumpMapUv:ke&&v(A.bumpMap.channel),normalMapUv:ae&&v(A.normalMap.channel),displacementMapUv:xe&&v(A.displacementMap.channel),emissiveMapUv:Ie&&v(A.emissiveMap.channel),metalnessMapUv:dt&&v(A.metalnessMap.channel),roughnessMapUv:nt&&v(A.roughnessMap.channel),anisotropyMapUv:Ve&&v(A.anisotropyMap.channel),clearcoatMapUv:st&&v(A.clearcoatMap.channel),clearcoatNormalMapUv:ve&&v(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ut&&v(A.clearcoatRoughnessMap.channel),iridescenceMapUv:Zt&&v(A.iridescenceMap.channel),iridescenceThicknessMapUv:we&&v(A.iridescenceThicknessMap.channel),sheenColorMapUv:Se&&v(A.sheenColorMap.channel),sheenRoughnessMapUv:Tt&&v(A.sheenRoughnessMap.channel),specularMapUv:zt&&v(A.specularMap.channel),specularColorMapUv:Vt&&v(A.specularColorMap.channel),specularIntensityMapUv:Gt&&v(A.specularIntensityMap.channel),transmissionMapUv:Dt&&v(A.transmissionMap.channel),thicknessMapUv:Yt&&v(A.thicknessMap.channel),alphaMapUv:Me&&v(A.alphaMap.channel),vertexTangents:!!F.attributes.tangent&&(ae||me),vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!F.attributes.color&&F.attributes.color.itemSize===4,vertexUv1s:Lt,vertexUv2s:Te,vertexUv3s:pn,pointsUvs:j.isPoints===!0&&!!F.attributes.uv&&(Ot||Me),fog:!!Y,useFog:A.fog===!0,fogExp2:Y&&Y.isFogExp2,flatShading:A.flatShading===!0,sizeAttenuation:A.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:j.isSkinnedMesh===!0,morphTargets:F.morphAttributes.position!==void 0,morphNormals:F.morphAttributes.normal!==void 0,morphColors:F.morphAttributes.color!==void 0,morphTargetsCount:ie,morphTextureStride:be,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:A.dithering,shadowMapEnabled:i.shadowMap.enabled&&I.length>0,shadowMapType:i.shadowMap.type,toneMapping:mi,useLegacyLights:i._useLegacyLights,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===xs,flipSided:A.side===wa,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionDerivatives:kt&&A.extensions.derivatives===!0,extensionFragDepth:kt&&A.extensions.fragDepth===!0,extensionDrawBuffers:kt&&A.extensions.drawBuffers===!0,extensionShaderTextureLOD:kt&&A.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||n.has("EXT_shader_texture_lod"),customProgramCacheKey:A.customProgramCacheKey()}}function _(A){const D=[];if(A.shaderID?D.push(A.shaderID):(D.push(A.customVertexShaderID),D.push(A.customFragmentShaderID)),A.defines!==void 0)for(const I in A.defines)D.push(I),D.push(A.defines[I]);return A.isRawShaderMaterial===!1&&(S(D,A),w(D,A),D.push(i.outputColorSpace)),D.push(A.customProgramCacheKey),D.join()}function S(A,D){A.push(D.precision),A.push(D.outputColorSpace),A.push(D.envMapMode),A.push(D.envMapCubeUVHeight),A.push(D.mapUv),A.push(D.alphaMapUv),A.push(D.lightMapUv),A.push(D.aoMapUv),A.push(D.bumpMapUv),A.push(D.normalMapUv),A.push(D.displacementMapUv),A.push(D.emissiveMapUv),A.push(D.metalnessMapUv),A.push(D.roughnessMapUv),A.push(D.anisotropyMapUv),A.push(D.clearcoatMapUv),A.push(D.clearcoatNormalMapUv),A.push(D.clearcoatRoughnessMapUv),A.push(D.iridescenceMapUv),A.push(D.iridescenceThicknessMapUv),A.push(D.sheenColorMapUv),A.push(D.sheenRoughnessMapUv),A.push(D.specularMapUv),A.push(D.specularColorMapUv),A.push(D.specularIntensityMapUv),A.push(D.transmissionMapUv),A.push(D.thicknessMapUv),A.push(D.combine),A.push(D.fogExp2),A.push(D.sizeAttenuation),A.push(D.morphTargetsCount),A.push(D.morphAttributeCount),A.push(D.numDirLights),A.push(D.numPointLights),A.push(D.numSpotLights),A.push(D.numSpotLightMaps),A.push(D.numHemiLights),A.push(D.numRectAreaLights),A.push(D.numDirLightShadows),A.push(D.numPointLightShadows),A.push(D.numSpotLightShadows),A.push(D.numSpotLightShadowsWithMaps),A.push(D.shadowMapType),A.push(D.toneMapping),A.push(D.numClippingPlanes),A.push(D.numClipIntersection),A.push(D.depthPacking)}function w(A,D){a.disableAll(),D.isWebGL2&&a.enable(0),D.supportsVertexTextures&&a.enable(1),D.instancing&&a.enable(2),D.instancingColor&&a.enable(3),D.matcap&&a.enable(4),D.envMap&&a.enable(5),D.normalMapObjectSpace&&a.enable(6),D.normalMapTangentSpace&&a.enable(7),D.clearcoat&&a.enable(8),D.iridescence&&a.enable(9),D.alphaTest&&a.enable(10),D.vertexColors&&a.enable(11),D.vertexAlphas&&a.enable(12),D.vertexUv1s&&a.enable(13),D.vertexUv2s&&a.enable(14),D.vertexUv3s&&a.enable(15),D.vertexTangents&&a.enable(16),D.anisotropy&&a.enable(17),A.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.skinning&&a.enable(4),D.morphTargets&&a.enable(5),D.morphNormals&&a.enable(6),D.morphColors&&a.enable(7),D.premultipliedAlpha&&a.enable(8),D.shadowMapEnabled&&a.enable(9),D.useLegacyLights&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.transmission&&a.enable(15),D.sheen&&a.enable(16),D.opaque&&a.enable(17),D.pointsUvs&&a.enable(18),A.push(a.mask)}function C(A){const D=g[A.type];let I;if(D){const q=jc[D];I=Fp.clone(q.uniforms)}else I=A.uniforms;return I}function E(A,D){let I;for(let q=0,j=c.length;q<j;q++){const Y=c[q];if(Y.cacheKey===D){I=Y,++I.usedTimes;break}}return I===void 0&&(I=new yQ(i,D,A,s),c.push(I)),I}function k(A){if(--A.usedTimes===0){const D=c.indexOf(A);c[D]=c[c.length-1],c.pop(),A.destroy()}}function O(A){l.remove(A)}function R(){l.dispose()}return{getParameters:y,getProgramCacheKey:_,getUniforms:C,acquireProgram:E,releaseProgram:k,releaseShaderCache:O,programs:c,dispose:R}}function CQ(){let i=new WeakMap;function e(s){let o=i.get(s);return o===void 0&&(o={},i.set(s,o)),o}function t(s){i.delete(s)}function n(s,o,a){i.get(s)[o]=a}function r(){i=new WeakMap}return{get:e,remove:t,update:n,dispose:r}}function EQ(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function R7(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function O7(){const i=[];let e=0;const t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function o(h,d,f,g,v,y){let _=i[e];return _===void 0?(_={id:h.id,object:h,geometry:d,material:f,groupOrder:g,renderOrder:h.renderOrder,z:v,group:y},i[e]=_):(_.id=h.id,_.object=h,_.geometry=d,_.material=f,_.groupOrder=g,_.renderOrder=h.renderOrder,_.z=v,_.group=y),e++,_}function a(h,d,f,g,v,y){const _=o(h,d,f,g,v,y);f.transmission>0?n.push(_):f.transparent===!0?r.push(_):t.push(_)}function l(h,d,f,g,v,y){const _=o(h,d,f,g,v,y);f.transmission>0?n.unshift(_):f.transparent===!0?r.unshift(_):t.unshift(_)}function c(h,d){t.length>1&&t.sort(h||EQ),n.length>1&&n.sort(d||R7),r.length>1&&r.sort(d||R7)}function u(){for(let h=e,d=i.length;h<d;h++){const f=i[h];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function TQ(){let i=new WeakMap;function e(n,r){const s=i.get(n);let o;return s===void 0?(o=new O7,i.set(n,[o])):r>=s.length?(o=new O7,s.push(o)):o=s[r],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function AQ(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new oe,color:new qt};break;case"SpotLight":t={position:new oe,direction:new oe,color:new qt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new oe,color:new qt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new oe,skyColor:new qt,groundColor:new qt};break;case"RectAreaLight":t={color:new qt,position:new oe,halfWidth:new oe,halfHeight:new oe};break}return i[e.id]=t,t}}}function PQ(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ht};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ht};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ht,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let kQ=0;function RQ(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function OQ(i,e){const t=new AQ,n=PQ(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)r.probe.push(new oe);const s=new oe,o=new qn,a=new qn;function l(u,h){let d=0,f=0,g=0;for(let I=0;I<9;I++)r.probe[I].set(0,0,0);let v=0,y=0,_=0,S=0,w=0,C=0,E=0,k=0,O=0,R=0;u.sort(RQ);const A=h===!0?Math.PI:1;for(let I=0,q=u.length;I<q;I++){const j=u[I],Y=j.color,F=j.intensity,re=j.distance,ee=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)d+=Y.r*F*A,f+=Y.g*F*A,g+=Y.b*F*A;else if(j.isLightProbe)for(let J=0;J<9;J++)r.probe[J].addScaledVector(j.sh.coefficients[J],F);else if(j.isDirectionalLight){const J=t.get(j);if(J.color.copy(j.color).multiplyScalar(j.intensity*A),j.castShadow){const Ee=j.shadow,le=n.get(j);le.shadowBias=Ee.bias,le.shadowNormalBias=Ee.normalBias,le.shadowRadius=Ee.radius,le.shadowMapSize=Ee.mapSize,r.directionalShadow[v]=le,r.directionalShadowMap[v]=ee,r.directionalShadowMatrix[v]=j.shadow.matrix,C++}r.directional[v]=J,v++}else if(j.isSpotLight){const J=t.get(j);J.position.setFromMatrixPosition(j.matrixWorld),J.color.copy(Y).multiplyScalar(F*A),J.distance=re,J.coneCos=Math.cos(j.angle),J.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),J.decay=j.decay,r.spot[_]=J;const Ee=j.shadow;if(j.map&&(r.spotLightMap[O]=j.map,O++,Ee.updateMatrices(j),j.castShadow&&R++),r.spotLightMatrix[_]=Ee.matrix,j.castShadow){const le=n.get(j);le.shadowBias=Ee.bias,le.shadowNormalBias=Ee.normalBias,le.shadowRadius=Ee.radius,le.shadowMapSize=Ee.mapSize,r.spotShadow[_]=le,r.spotShadowMap[_]=ee,k++}_++}else if(j.isRectAreaLight){const J=t.get(j);J.color.copy(Y).multiplyScalar(F),J.halfWidth.set(j.width*.5,0,0),J.halfHeight.set(0,j.height*.5,0),r.rectArea[S]=J,S++}else if(j.isPointLight){const J=t.get(j);if(J.color.copy(j.color).multiplyScalar(j.intensity*A),J.distance=j.distance,J.decay=j.decay,j.castShadow){const Ee=j.shadow,le=n.get(j);le.shadowBias=Ee.bias,le.shadowNormalBias=Ee.normalBias,le.shadowRadius=Ee.radius,le.shadowMapSize=Ee.mapSize,le.shadowCameraNear=Ee.camera.near,le.shadowCameraFar=Ee.camera.far,r.pointShadow[y]=le,r.pointShadowMap[y]=ee,r.pointShadowMatrix[y]=j.shadow.matrix,E++}r.point[y]=J,y++}else if(j.isHemisphereLight){const J=t.get(j);J.skyColor.copy(j.color).multiplyScalar(F*A),J.groundColor.copy(j.groundColor).multiplyScalar(F*A),r.hemi[w]=J,w++}}S>0&&(e.isWebGL2||i.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ht.LTC_FLOAT_1,r.rectAreaLTC2=Ht.LTC_FLOAT_2):i.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Ht.LTC_HALF_1,r.rectAreaLTC2=Ht.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=d,r.ambient[1]=f,r.ambient[2]=g;const D=r.hash;(D.directionalLength!==v||D.pointLength!==y||D.spotLength!==_||D.rectAreaLength!==S||D.hemiLength!==w||D.numDirectionalShadows!==C||D.numPointShadows!==E||D.numSpotShadows!==k||D.numSpotMaps!==O)&&(r.directional.length=v,r.spot.length=_,r.rectArea.length=S,r.point.length=y,r.hemi.length=w,r.directionalShadow.length=C,r.directionalShadowMap.length=C,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=k,r.spotShadowMap.length=k,r.directionalShadowMatrix.length=C,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=k+O-R,r.spotLightMap.length=O,r.numSpotLightShadowsWithMaps=R,D.directionalLength=v,D.pointLength=y,D.spotLength=_,D.rectAreaLength=S,D.hemiLength=w,D.numDirectionalShadows=C,D.numPointShadows=E,D.numSpotShadows=k,D.numSpotMaps=O,r.version=kQ++)}function c(u,h){let d=0,f=0,g=0,v=0,y=0;const _=h.matrixWorldInverse;for(let S=0,w=u.length;S<w;S++){const C=u[S];if(C.isDirectionalLight){const E=r.directional[d];E.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(_),d++}else if(C.isSpotLight){const E=r.spot[g];E.position.setFromMatrixPosition(C.matrixWorld),E.position.applyMatrix4(_),E.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(_),g++}else if(C.isRectAreaLight){const E=r.rectArea[v];E.position.setFromMatrixPosition(C.matrixWorld),E.position.applyMatrix4(_),a.identity(),o.copy(C.matrixWorld),o.premultiply(_),a.extractRotation(o),E.halfWidth.set(C.width*.5,0,0),E.halfHeight.set(0,C.height*.5,0),E.halfWidth.applyMatrix4(a),E.halfHeight.applyMatrix4(a),v++}else if(C.isPointLight){const E=r.point[f];E.position.setFromMatrixPosition(C.matrixWorld),E.position.applyMatrix4(_),f++}else if(C.isHemisphereLight){const E=r.hemi[y];E.direction.setFromMatrixPosition(C.matrixWorld),E.direction.transformDirection(_),y++}}}return{setup:l,setupView:c,state:r}}function L7(i,e){const t=new OQ(i,e),n=[],r=[];function s(){n.length=0,r.length=0}function o(h){n.push(h)}function a(h){r.push(h)}function l(h){t.setup(n,h)}function c(h){t.setupView(n,h)}return{init:s,state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function LQ(i,e){let t=new WeakMap;function n(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new L7(i,e),t.set(s,[l])):o>=a.length?(l=new L7(i,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:n,dispose:r}}class uA extends na{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=JD,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class hA extends na{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const DQ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,zQ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function IQ(i,e,t){let n=new L2;const r=new ht,s=new ht,o=new Li,a=new uA({depthPacking:QD}),l=new hA,c={},u=t.maxTextureSize,h={[Xh]:wa,[wa]:Xh,[xs]:xs},d=new Bo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ht},radius:{value:4}},vertexShader:DQ,fragmentShader:zQ}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const g=new Qn;g.setAttribute("position",new Un(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new rr(g,d),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=DT;let _=this.type;this.render=function(E,k,O){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||E.length===0)return;const R=i.getRenderTarget(),A=i.getActiveCubeFace(),D=i.getActiveMipmapLevel(),I=i.state;I.setBlending(Iu),I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);const q=_!==Mu&&this.type===Mu,j=_===Mu&&this.type!==Mu;for(let Y=0,F=E.length;Y<F;Y++){const re=E[Y],ee=re.shadow;if(ee===void 0){console.warn("THREE.WebGLShadowMap:",re,"has no shadow.");continue}if(ee.autoUpdate===!1&&ee.needsUpdate===!1)continue;r.copy(ee.mapSize);const J=ee.getFrameExtents();if(r.multiply(J),s.copy(ee.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/J.x),r.x=s.x*J.x,ee.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/J.y),r.y=s.y*J.y,ee.mapSize.y=s.y)),ee.map===null||q===!0||j===!0){const le=this.type!==Mu?{minFilter:Oi,magFilter:Oi}:{};ee.map!==null&&ee.map.dispose(),ee.map=new Lo(r.x,r.y,le),ee.map.texture.name=re.name+".shadowMap",ee.camera.updateProjectionMatrix()}i.setRenderTarget(ee.map),i.clear();const Ee=ee.getViewportCount();for(let le=0;le<Ee;le++){const ie=ee.getViewport(le);o.set(s.x*ie.x,s.y*ie.y,s.x*ie.z,s.y*ie.w),I.viewport(o),ee.updateMatrices(re,le),n=ee.getFrustum(),C(k,O,ee.camera,re,this.type)}ee.isPointLightShadow!==!0&&this.type===Mu&&S(ee,O),ee.needsUpdate=!1}_=this.type,y.needsUpdate=!1,i.setRenderTarget(R,A,D)};function S(E,k){const O=e.update(v);d.defines.VSM_SAMPLES!==E.blurSamples&&(d.defines.VSM_SAMPLES=E.blurSamples,f.defines.VSM_SAMPLES=E.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),E.mapPass===null&&(E.mapPass=new Lo(r.x,r.y)),d.uniforms.shadow_pass.value=E.map.texture,d.uniforms.resolution.value=E.mapSize,d.uniforms.radius.value=E.radius,i.setRenderTarget(E.mapPass),i.clear(),i.renderBufferDirect(k,null,O,d,v,null),f.uniforms.shadow_pass.value=E.mapPass.texture,f.uniforms.resolution.value=E.mapSize,f.uniforms.radius.value=E.radius,i.setRenderTarget(E.map),i.clear(),i.renderBufferDirect(k,null,O,f,v,null)}function w(E,k,O,R){let A=null;const D=O.isPointLight===!0?E.customDistanceMaterial:E.customDepthMaterial;if(D!==void 0)A=D;else if(A=O.isPointLight===!0?l:a,i.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0){const I=A.uuid,q=k.uuid;let j=c[I];j===void 0&&(j={},c[I]=j);let Y=j[q];Y===void 0&&(Y=A.clone(),j[q]=Y),A=Y}if(A.visible=k.visible,A.wireframe=k.wireframe,R===Mu?A.side=k.shadowSide!==null?k.shadowSide:k.side:A.side=k.shadowSide!==null?k.shadowSide:h[k.side],A.alphaMap=k.alphaMap,A.alphaTest=k.alphaTest,A.map=k.map,A.clipShadows=k.clipShadows,A.clippingPlanes=k.clippingPlanes,A.clipIntersection=k.clipIntersection,A.displacementMap=k.displacementMap,A.displacementScale=k.displacementScale,A.displacementBias=k.displacementBias,A.wireframeLinewidth=k.wireframeLinewidth,A.linewidth=k.linewidth,O.isPointLight===!0&&A.isMeshDistanceMaterial===!0){const I=i.properties.get(A);I.light=O}return A}function C(E,k,O,R,A){if(E.visible===!1)return;if(E.layers.test(k.layers)&&(E.isMesh||E.isLine||E.isPoints)&&(E.castShadow||E.receiveShadow&&A===Mu)&&(!E.frustumCulled||n.intersectsObject(E))){E.modelViewMatrix.multiplyMatrices(O.matrixWorldInverse,E.matrixWorld);const q=e.update(E),j=E.material;if(Array.isArray(j)){const Y=q.groups;for(let F=0,re=Y.length;F<re;F++){const ee=Y[F],J=j[ee.materialIndex];if(J&&J.visible){const Ee=w(E,J,R,A);i.renderBufferDirect(O,null,q,Ee,E,ee)}}}else if(j.visible){const Y=w(E,j,R,A);i.renderBufferDirect(O,null,q,Y,E,null)}}const I=E.children;for(let q=0,j=I.length;q<j;q++)C(I[q],k,O,R,A)}}function NQ(i,e,t){const n=t.isWebGL2;function r(){let Me=!1;const At=new Li;let qe=null;const kt=new Li(0,0,0,0);return{setMask:function(Lt){qe!==Lt&&!Me&&(i.colorMask(Lt,Lt,Lt,Lt),qe=Lt)},setLocked:function(Lt){Me=Lt},setClear:function(Lt,Te,pn,mi,as){as===!0&&(Lt*=mi,Te*=mi,pn*=mi),At.set(Lt,Te,pn,mi),kt.equals(At)===!1&&(i.clearColor(Lt,Te,pn,mi),kt.copy(At))},reset:function(){Me=!1,qe=null,kt.set(-1,0,0,0)}}}function s(){let Me=!1,At=null,qe=null,kt=null;return{setTest:function(Lt){Lt?at(i.DEPTH_TEST):Le(i.DEPTH_TEST)},setMask:function(Lt){At!==Lt&&!Me&&(i.depthMask(Lt),At=Lt)},setFunc:function(Lt){if(qe!==Lt){switch(Lt){case OD:i.depthFunc(i.NEVER);break;case LD:i.depthFunc(i.ALWAYS);break;case DD:i.depthFunc(i.LESS);break;case Sw:i.depthFunc(i.LEQUAL);break;case zD:i.depthFunc(i.EQUAL);break;case ID:i.depthFunc(i.GEQUAL);break;case ND:i.depthFunc(i.GREATER);break;case UD:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}qe=Lt}},setLocked:function(Lt){Me=Lt},setClear:function(Lt){kt!==Lt&&(i.clearDepth(Lt),kt=Lt)},reset:function(){Me=!1,At=null,qe=null,kt=null}}}function o(){let Me=!1,At=null,qe=null,kt=null,Lt=null,Te=null,pn=null,mi=null,as=null;return{setTest:function(Wn){Me||(Wn?at(i.STENCIL_TEST):Le(i.STENCIL_TEST))},setMask:function(Wn){At!==Wn&&!Me&&(i.stencilMask(Wn),At=Wn)},setFunc:function(Wn,ls,Gi){(qe!==Wn||kt!==ls||Lt!==Gi)&&(i.stencilFunc(Wn,ls,Gi),qe=Wn,kt=ls,Lt=Gi)},setOp:function(Wn,ls,Gi){(Te!==Wn||pn!==ls||mi!==Gi)&&(i.stencilOp(Wn,ls,Gi),Te=Wn,pn=ls,mi=Gi)},setLocked:function(Wn){Me=Wn},setClear:function(Wn){as!==Wn&&(i.clearStencil(Wn),as=Wn)},reset:function(){Me=!1,At=null,qe=null,kt=null,Lt=null,Te=null,pn=null,mi=null,as=null}}}const a=new r,l=new s,c=new o,u=new WeakMap,h=new WeakMap;let d={},f={},g=new WeakMap,v=[],y=null,_=!1,S=null,w=null,C=null,E=null,k=null,O=null,R=null,A=!1,D=null,I=null,q=null,j=null,Y=null;const F=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let re=!1,ee=0;const J=i.getParameter(i.VERSION);J.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(J)[1]),re=ee>=1):J.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(J)[1]),re=ee>=2);let Ee=null,le={};const ie=i.getParameter(i.SCISSOR_BOX),be=i.getParameter(i.VIEWPORT),Je=new Li().fromArray(ie),Xe=new Li().fromArray(be);function Be(Me,At,qe,kt){const Lt=new Uint8Array(4),Te=i.createTexture();i.bindTexture(Me,Te),i.texParameteri(Me,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(Me,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let pn=0;pn<qe;pn++)n&&(Me===i.TEXTURE_3D||Me===i.TEXTURE_2D_ARRAY)?i.texImage3D(At,0,i.RGBA,1,1,kt,0,i.RGBA,i.UNSIGNED_BYTE,Lt):i.texImage2D(At+pn,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,Lt);return Te}const vt={};vt[i.TEXTURE_2D]=Be(i.TEXTURE_2D,i.TEXTURE_2D,1),vt[i.TEXTURE_CUBE_MAP]=Be(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(vt[i.TEXTURE_2D_ARRAY]=Be(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),vt[i.TEXTURE_3D]=Be(i.TEXTURE_3D,i.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),at(i.DEPTH_TEST),l.setFunc(Sw),xe(!1),Ie(HC),at(i.CULL_FACE),ke(Iu);function at(Me){d[Me]!==!0&&(i.enable(Me),d[Me]=!0)}function Le(Me){d[Me]!==!1&&(i.disable(Me),d[Me]=!1)}function Ot(Me,At){return f[Me]!==At?(i.bindFramebuffer(Me,At),f[Me]=At,n&&(Me===i.DRAW_FRAMEBUFFER&&(f[i.FRAMEBUFFER]=At),Me===i.FRAMEBUFFER&&(f[i.DRAW_FRAMEBUFFER]=At)),!0):!1}function ft(Me,At){let qe=v,kt=!1;if(Me)if(qe=g.get(At),qe===void 0&&(qe=[],g.set(At,qe)),Me.isWebGLMultipleRenderTargets){const Lt=Me.texture;if(qe.length!==Lt.length||qe[0]!==i.COLOR_ATTACHMENT0){for(let Te=0,pn=Lt.length;Te<pn;Te++)qe[Te]=i.COLOR_ATTACHMENT0+Te;qe.length=Lt.length,kt=!0}}else qe[0]!==i.COLOR_ATTACHMENT0&&(qe[0]=i.COLOR_ATTACHMENT0,kt=!0);else qe[0]!==i.BACK&&(qe[0]=i.BACK,kt=!0);kt&&(t.isWebGL2?i.drawBuffers(qe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(qe))}function rt(Me){return y!==Me?(i.useProgram(Me),y=Me,!0):!1}const tt={[Gd]:i.FUNC_ADD,[zT]:i.FUNC_SUBTRACT,[IT]:i.FUNC_REVERSE_SUBTRACT};if(n)tt[jC]=i.MIN,tt[$C]=i.MAX;else{const Me=e.get("EXT_blend_minmax");Me!==null&&(tt[jC]=Me.MIN_EXT,tt[$C]=Me.MAX_EXT)}const se={[NT]:i.ZERO,[UT]:i.ONE,[FT]:i.SRC_COLOR,[M2]:i.SRC_ALPHA,[WT]:i.SRC_ALPHA_SATURATE,[qT]:i.DST_COLOR,[VT]:i.DST_ALPHA,[BT]:i.ONE_MINUS_SRC_COLOR,[C2]:i.ONE_MINUS_SRC_ALPHA,[GT]:i.ONE_MINUS_DST_COLOR,[HT]:i.ONE_MINUS_DST_ALPHA};function ke(Me,At,qe,kt,Lt,Te,pn,mi){if(Me===Iu){_===!0&&(Le(i.BLEND),_=!1);return}if(_===!1&&(at(i.BLEND),_=!0),Me!==RD){if(Me!==S||mi!==A){if((w!==Gd||k!==Gd)&&(i.blendEquation(i.FUNC_ADD),w=Gd,k=Gd),mi)switch(Me){case Jd:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case qC:i.blendFunc(i.ONE,i.ONE);break;case GC:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case WC:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Me);break}else switch(Me){case Jd:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case qC:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case GC:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case WC:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Me);break}C=null,E=null,O=null,R=null,S=Me,A=mi}return}Lt=Lt||At,Te=Te||qe,pn=pn||kt,(At!==w||Lt!==k)&&(i.blendEquationSeparate(tt[At],tt[Lt]),w=At,k=Lt),(qe!==C||kt!==E||Te!==O||pn!==R)&&(i.blendFuncSeparate(se[qe],se[kt],se[Te],se[pn]),C=qe,E=kt,O=Te,R=pn),S=Me,A=!1}function ae(Me,At){Me.side===xs?Le(i.CULL_FACE):at(i.CULL_FACE);let qe=Me.side===wa;At&&(qe=!qe),xe(qe),Me.blending===Jd&&Me.transparent===!1?ke(Iu):ke(Me.blending,Me.blendEquation,Me.blendSrc,Me.blendDst,Me.blendEquationAlpha,Me.blendSrcAlpha,Me.blendDstAlpha,Me.premultipliedAlpha),l.setFunc(Me.depthFunc),l.setTest(Me.depthTest),l.setMask(Me.depthWrite),a.setMask(Me.colorWrite);const kt=Me.stencilWrite;c.setTest(kt),kt&&(c.setMask(Me.stencilWriteMask),c.setFunc(Me.stencilFunc,Me.stencilRef,Me.stencilFuncMask),c.setOp(Me.stencilFail,Me.stencilZFail,Me.stencilZPass)),nt(Me.polygonOffset,Me.polygonOffsetFactor,Me.polygonOffsetUnits),Me.alphaToCoverage===!0?at(i.SAMPLE_ALPHA_TO_COVERAGE):Le(i.SAMPLE_ALPHA_TO_COVERAGE)}function xe(Me){D!==Me&&(Me?i.frontFace(i.CW):i.frontFace(i.CCW),D=Me)}function Ie(Me){Me!==PD?(at(i.CULL_FACE),Me!==I&&(Me===HC?i.cullFace(i.BACK):Me===kD?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Le(i.CULL_FACE),I=Me}function dt(Me){Me!==q&&(re&&i.lineWidth(Me),q=Me)}function nt(Me,At,qe){Me?(at(i.POLYGON_OFFSET_FILL),(j!==At||Y!==qe)&&(i.polygonOffset(At,qe),j=At,Y=qe)):Le(i.POLYGON_OFFSET_FILL)}function me(Me){Me?at(i.SCISSOR_TEST):Le(i.SCISSOR_TEST)}function ue(Me){Me===void 0&&(Me=i.TEXTURE0+F-1),Ee!==Me&&(i.activeTexture(Me),Ee=Me)}function Pe(Me,At,qe){qe===void 0&&(Ee===null?qe=i.TEXTURE0+F-1:qe=Ee);let kt=le[qe];kt===void 0&&(kt={type:void 0,texture:void 0},le[qe]=kt),(kt.type!==Me||kt.texture!==At)&&(Ee!==qe&&(i.activeTexture(qe),Ee=qe),i.bindTexture(Me,At||vt[Me]),kt.type=Me,kt.texture=At)}function U(){const Me=le[Ee];Me!==void 0&&Me.type!==void 0&&(i.bindTexture(Me.type,null),Me.type=void 0,Me.texture=void 0)}function V(){try{i.compressedTexImage2D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Ve(){try{i.compressedTexImage3D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function st(){try{i.texSubImage2D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function ve(){try{i.texSubImage3D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function ut(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Zt(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function we(){try{i.texStorage2D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Se(){try{i.texStorage3D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Tt(){try{i.texImage2D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function zt(){try{i.texImage3D.apply(i,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Vt(Me){Je.equals(Me)===!1&&(i.scissor(Me.x,Me.y,Me.z,Me.w),Je.copy(Me))}function Gt(Me){Xe.equals(Me)===!1&&(i.viewport(Me.x,Me.y,Me.z,Me.w),Xe.copy(Me))}function Dt(Me,At){let qe=h.get(At);qe===void 0&&(qe=new WeakMap,h.set(At,qe));let kt=qe.get(Me);kt===void 0&&(kt=i.getUniformBlockIndex(At,Me.name),qe.set(Me,kt))}function Yt(Me,At){const kt=h.get(At).get(Me);u.get(At)!==kt&&(i.uniformBlockBinding(At,kt,Me.__bindingPointIndex),u.set(At,kt))}function Yn(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),n===!0&&(i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),d={},Ee=null,le={},f={},g=new WeakMap,v=[],y=null,_=!1,S=null,w=null,C=null,E=null,k=null,O=null,R=null,A=!1,D=null,I=null,q=null,j=null,Y=null,Je.set(0,0,i.canvas.width,i.canvas.height),Xe.set(0,0,i.canvas.width,i.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:at,disable:Le,bindFramebuffer:Ot,drawBuffers:ft,useProgram:rt,setBlending:ke,setMaterial:ae,setFlipSided:xe,setCullFace:Ie,setLineWidth:dt,setPolygonOffset:nt,setScissorTest:me,activeTexture:ue,bindTexture:Pe,unbindTexture:U,compressedTexImage2D:V,compressedTexImage3D:Ve,texImage2D:Tt,texImage3D:zt,updateUBOMapping:Dt,uniformBlockBinding:Yt,texStorage2D:we,texStorage3D:Se,texSubImage2D:st,texSubImage3D:ve,compressedTexSubImage2D:ut,compressedTexSubImage3D:Zt,scissor:Vt,viewport:Gt,reset:Yn}}function UQ(i,e,t,n,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let v;const y=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(U,V){return _?new OffscreenCanvas(U,V):I1("canvas")}function w(U,V,Ve,st){let ve=1;if((U.width>st||U.height>st)&&(ve=st/Math.max(U.width,U.height)),ve<1||V===!0)if(typeof HTMLImageElement<"u"&&U instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&U instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&U instanceof ImageBitmap){const ut=V?Ew:Math.floor,Zt=ut(ve*U.width),we=ut(ve*U.height);v===void 0&&(v=S(Zt,we));const Se=Ve?S(Zt,we):v;return Se.width=Zt,Se.height=we,Se.getContext("2d").drawImage(U,0,0,Zt,we),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+U.width+"x"+U.height+") to ("+Zt+"x"+we+")."),Se}else return"data"in U&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+U.width+"x"+U.height+")."),U;return U}function C(U){return _E(U.width)&&_E(U.height)}function E(U){return a?!1:U.wrapS!==lo||U.wrapT!==lo||U.minFilter!==Oi&&U.minFilter!==Hr}function k(U,V){return U.generateMipmaps&&V&&U.minFilter!==Oi&&U.minFilter!==Hr}function O(U){i.generateMipmap(U)}function R(U,V,Ve,st,ve=!1){if(a===!1)return V;if(U!==null){if(i[U]!==void 0)return i[U];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+U+"'")}let ut=V;return V===i.RED&&(Ve===i.FLOAT&&(ut=i.R32F),Ve===i.HALF_FLOAT&&(ut=i.R16F),Ve===i.UNSIGNED_BYTE&&(ut=i.R8)),V===i.RG&&(Ve===i.FLOAT&&(ut=i.RG32F),Ve===i.HALF_FLOAT&&(ut=i.RG16F),Ve===i.UNSIGNED_BYTE&&(ut=i.RG8)),V===i.RGBA&&(Ve===i.FLOAT&&(ut=i.RGBA32F),Ve===i.HALF_FLOAT&&(ut=i.RGBA16F),Ve===i.UNSIGNED_BYTE&&(ut=st===Zn&&ve===!1?i.SRGB8_ALPHA8:i.RGBA8),Ve===i.UNSIGNED_SHORT_4_4_4_4&&(ut=i.RGBA4),Ve===i.UNSIGNED_SHORT_5_5_5_1&&(ut=i.RGB5_A1)),(ut===i.R16F||ut===i.R32F||ut===i.RG16F||ut===i.RG32F||ut===i.RGBA16F||ut===i.RGBA32F)&&e.get("EXT_color_buffer_float"),ut}function A(U,V,Ve){return k(U,Ve)===!0||U.isFramebufferTexture&&U.minFilter!==Oi&&U.minFilter!==Hr?Math.log2(Math.max(V.width,V.height))+1:U.mipmaps!==void 0&&U.mipmaps.length>0?U.mipmaps.length:U.isCompressedTexture&&Array.isArray(U.image)?V.mipmaps.length:1}function D(U){return U===Oi||U===Mw||U===m1?i.NEAREST:i.LINEAR}function I(U){const V=U.target;V.removeEventListener("dispose",I),j(V),V.isVideoTexture&&g.delete(V)}function q(U){const V=U.target;V.removeEventListener("dispose",q),F(V)}function j(U){const V=n.get(U);if(V.__webglInit===void 0)return;const Ve=U.source,st=y.get(Ve);if(st){const ve=st[V.__cacheKey];ve.usedTimes--,ve.usedTimes===0&&Y(U),Object.keys(st).length===0&&y.delete(Ve)}n.remove(U)}function Y(U){const V=n.get(U);i.deleteTexture(V.__webglTexture);const Ve=U.source,st=y.get(Ve);delete st[V.__cacheKey],o.memory.textures--}function F(U){const V=U.texture,Ve=n.get(U),st=n.get(V);if(st.__webglTexture!==void 0&&(i.deleteTexture(st.__webglTexture),o.memory.textures--),U.depthTexture&&U.depthTexture.dispose(),U.isWebGLCubeRenderTarget)for(let ve=0;ve<6;ve++)i.deleteFramebuffer(Ve.__webglFramebuffer[ve]),Ve.__webglDepthbuffer&&i.deleteRenderbuffer(Ve.__webglDepthbuffer[ve]);else{if(i.deleteFramebuffer(Ve.__webglFramebuffer),Ve.__webglDepthbuffer&&i.deleteRenderbuffer(Ve.__webglDepthbuffer),Ve.__webglMultisampledFramebuffer&&i.deleteFramebuffer(Ve.__webglMultisampledFramebuffer),Ve.__webglColorRenderbuffer)for(let ve=0;ve<Ve.__webglColorRenderbuffer.length;ve++)Ve.__webglColorRenderbuffer[ve]&&i.deleteRenderbuffer(Ve.__webglColorRenderbuffer[ve]);Ve.__webglDepthRenderbuffer&&i.deleteRenderbuffer(Ve.__webglDepthRenderbuffer)}if(U.isWebGLMultipleRenderTargets)for(let ve=0,ut=V.length;ve<ut;ve++){const Zt=n.get(V[ve]);Zt.__webglTexture&&(i.deleteTexture(Zt.__webglTexture),o.memory.textures--),n.remove(V[ve])}n.remove(V),n.remove(U)}let re=0;function ee(){re=0}function J(){const U=re;return U>=l&&console.warn("THREE.WebGLTextures: Trying to use "+U+" texture units while this GPU supports only "+l),re+=1,U}function Ee(U){const V=[];return V.push(U.wrapS),V.push(U.wrapT),V.push(U.wrapR||0),V.push(U.magFilter),V.push(U.minFilter),V.push(U.anisotropy),V.push(U.internalFormat),V.push(U.format),V.push(U.type),V.push(U.generateMipmaps),V.push(U.premultiplyAlpha),V.push(U.flipY),V.push(U.unpackAlignment),V.push(U.colorSpace),V.join()}function le(U,V){const Ve=n.get(U);if(U.isVideoTexture&&ue(U),U.isRenderTargetTexture===!1&&U.version>0&&Ve.__version!==U.version){const st=U.image;if(st===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(st.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ot(Ve,U,V);return}}t.bindTexture(i.TEXTURE_2D,Ve.__webglTexture,i.TEXTURE0+V)}function ie(U,V){const Ve=n.get(U);if(U.version>0&&Ve.__version!==U.version){Ot(Ve,U,V);return}t.bindTexture(i.TEXTURE_2D_ARRAY,Ve.__webglTexture,i.TEXTURE0+V)}function be(U,V){const Ve=n.get(U);if(U.version>0&&Ve.__version!==U.version){Ot(Ve,U,V);return}t.bindTexture(i.TEXTURE_3D,Ve.__webglTexture,i.TEXTURE0+V)}function Je(U,V){const Ve=n.get(U);if(U.version>0&&Ve.__version!==U.version){ft(Ve,U,V);return}t.bindTexture(i.TEXTURE_CUBE_MAP,Ve.__webglTexture,i.TEXTURE0+V)}const Xe={[Jm]:i.REPEAT,[lo]:i.CLAMP_TO_EDGE,[Qm]:i.MIRRORED_REPEAT},Be={[Oi]:i.NEAREST,[Mw]:i.NEAREST_MIPMAP_NEAREST,[m1]:i.NEAREST_MIPMAP_LINEAR,[Hr]:i.LINEAR,[YT]:i.LINEAR_MIPMAP_NEAREST,[hf]:i.LINEAR_MIPMAP_LINEAR},vt={[n9]:i.NEVER,[c9]:i.ALWAYS,[i9]:i.LESS,[s9]:i.LEQUAL,[r9]:i.EQUAL,[l9]:i.GEQUAL,[o9]:i.GREATER,[a9]:i.NOTEQUAL};function at(U,V,Ve){if(Ve?(i.texParameteri(U,i.TEXTURE_WRAP_S,Xe[V.wrapS]),i.texParameteri(U,i.TEXTURE_WRAP_T,Xe[V.wrapT]),(U===i.TEXTURE_3D||U===i.TEXTURE_2D_ARRAY)&&i.texParameteri(U,i.TEXTURE_WRAP_R,Xe[V.wrapR]),i.texParameteri(U,i.TEXTURE_MAG_FILTER,Be[V.magFilter]),i.texParameteri(U,i.TEXTURE_MIN_FILTER,Be[V.minFilter])):(i.texParameteri(U,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(U,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(U===i.TEXTURE_3D||U===i.TEXTURE_2D_ARRAY)&&i.texParameteri(U,i.TEXTURE_WRAP_R,i.CLAMP_TO_EDGE),(V.wrapS!==lo||V.wrapT!==lo)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(U,i.TEXTURE_MAG_FILTER,D(V.magFilter)),i.texParameteri(U,i.TEXTURE_MIN_FILTER,D(V.minFilter)),V.minFilter!==Oi&&V.minFilter!==Hr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),V.compareFunction&&(i.texParameteri(U,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(U,i.TEXTURE_COMPARE_FUNC,vt[V.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const st=e.get("EXT_texture_filter_anisotropic");if(V.magFilter===Oi||V.minFilter!==m1&&V.minFilter!==hf||V.type===Ks&&e.has("OES_texture_float_linear")===!1||a===!1&&V.type===Qc&&e.has("OES_texture_half_float_linear")===!1)return;(V.anisotropy>1||n.get(V).__currentAnisotropy)&&(i.texParameterf(U,st.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,r.getMaxAnisotropy())),n.get(V).__currentAnisotropy=V.anisotropy)}}function Le(U,V){let Ve=!1;U.__webglInit===void 0&&(U.__webglInit=!0,V.addEventListener("dispose",I));const st=V.source;let ve=y.get(st);ve===void 0&&(ve={},y.set(st,ve));const ut=Ee(V);if(ut!==U.__cacheKey){ve[ut]===void 0&&(ve[ut]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,Ve=!0),ve[ut].usedTimes++;const Zt=ve[U.__cacheKey];Zt!==void 0&&(ve[U.__cacheKey].usedTimes--,Zt.usedTimes===0&&Y(V)),U.__cacheKey=ut,U.__webglTexture=ve[ut].texture}return Ve}function Ot(U,V,Ve){let st=i.TEXTURE_2D;(V.isDataArrayTexture||V.isCompressedArrayTexture)&&(st=i.TEXTURE_2D_ARRAY),V.isData3DTexture&&(st=i.TEXTURE_3D);const ve=Le(U,V),ut=V.source;t.bindTexture(st,U.__webglTexture,i.TEXTURE0+Ve);const Zt=n.get(ut);if(ut.version!==Zt.__version||ve===!0){t.activeTexture(i.TEXTURE0+Ve),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,V.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,V.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE);const we=E(V)&&C(V.image)===!1;let Se=w(V.image,we,!1,u);Se=Pe(V,Se);const Tt=C(Se)||a,zt=s.convert(V.format,V.colorSpace);let Vt=s.convert(V.type),Gt=R(V.internalFormat,zt,Vt,V.colorSpace);at(st,V,Tt);let Dt;const Yt=V.mipmaps,Yn=a&&V.isVideoTexture!==!0,Me=Zt.__version===void 0||ve===!0,At=A(V,Se,Tt);if(V.isDepthTexture)Gt=i.DEPTH_COMPONENT,a?V.type===Ks?Gt=i.DEPTH_COMPONENT32F:V.type===dc?Gt=i.DEPTH_COMPONENT24:V.type===Qd?Gt=i.DEPTH24_STENCIL8:Gt=i.DEPTH_COMPONENT16:V.type===Ks&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),V.format===ef&&Gt===i.DEPTH_COMPONENT&&V.type!==o0&&V.type!==dc&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),V.type=dc,Vt=s.convert(V.type)),V.format===Xp&&Gt===i.DEPTH_COMPONENT&&(Gt=i.DEPTH_STENCIL,V.type!==Qd&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),V.type=Qd,Vt=s.convert(V.type))),Me&&(Yn?t.texStorage2D(i.TEXTURE_2D,1,Gt,Se.width,Se.height):t.texImage2D(i.TEXTURE_2D,0,Gt,Se.width,Se.height,0,zt,Vt,null));else if(V.isDataTexture)if(Yt.length>0&&Tt){Yn&&Me&&t.texStorage2D(i.TEXTURE_2D,At,Gt,Yt[0].width,Yt[0].height);for(let qe=0,kt=Yt.length;qe<kt;qe++)Dt=Yt[qe],Yn?t.texSubImage2D(i.TEXTURE_2D,qe,0,0,Dt.width,Dt.height,zt,Vt,Dt.data):t.texImage2D(i.TEXTURE_2D,qe,Gt,Dt.width,Dt.height,0,zt,Vt,Dt.data);V.generateMipmaps=!1}else Yn?(Me&&t.texStorage2D(i.TEXTURE_2D,At,Gt,Se.width,Se.height),t.texSubImage2D(i.TEXTURE_2D,0,0,0,Se.width,Se.height,zt,Vt,Se.data)):t.texImage2D(i.TEXTURE_2D,0,Gt,Se.width,Se.height,0,zt,Vt,Se.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){Yn&&Me&&t.texStorage3D(i.TEXTURE_2D_ARRAY,At,Gt,Yt[0].width,Yt[0].height,Se.depth);for(let qe=0,kt=Yt.length;qe<kt;qe++)Dt=Yt[qe],V.format!==Fo?zt!==null?Yn?t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,qe,0,0,0,Dt.width,Dt.height,Se.depth,zt,Dt.data,0,0):t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,qe,Gt,Dt.width,Dt.height,Se.depth,0,Dt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Yn?t.texSubImage3D(i.TEXTURE_2D_ARRAY,qe,0,0,0,Dt.width,Dt.height,Se.depth,zt,Vt,Dt.data):t.texImage3D(i.TEXTURE_2D_ARRAY,qe,Gt,Dt.width,Dt.height,Se.depth,0,zt,Vt,Dt.data)}else{Yn&&Me&&t.texStorage2D(i.TEXTURE_2D,At,Gt,Yt[0].width,Yt[0].height);for(let qe=0,kt=Yt.length;qe<kt;qe++)Dt=Yt[qe],V.format!==Fo?zt!==null?Yn?t.compressedTexSubImage2D(i.TEXTURE_2D,qe,0,0,Dt.width,Dt.height,zt,Dt.data):t.compressedTexImage2D(i.TEXTURE_2D,qe,Gt,Dt.width,Dt.height,0,Dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Yn?t.texSubImage2D(i.TEXTURE_2D,qe,0,0,Dt.width,Dt.height,zt,Vt,Dt.data):t.texImage2D(i.TEXTURE_2D,qe,Gt,Dt.width,Dt.height,0,zt,Vt,Dt.data)}else if(V.isDataArrayTexture)Yn?(Me&&t.texStorage3D(i.TEXTURE_2D_ARRAY,At,Gt,Se.width,Se.height,Se.depth),t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Se.width,Se.height,Se.depth,zt,Vt,Se.data)):t.texImage3D(i.TEXTURE_2D_ARRAY,0,Gt,Se.width,Se.height,Se.depth,0,zt,Vt,Se.data);else if(V.isData3DTexture)Yn?(Me&&t.texStorage3D(i.TEXTURE_3D,At,Gt,Se.width,Se.height,Se.depth),t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Se.width,Se.height,Se.depth,zt,Vt,Se.data)):t.texImage3D(i.TEXTURE_3D,0,Gt,Se.width,Se.height,Se.depth,0,zt,Vt,Se.data);else if(V.isFramebufferTexture){if(Me)if(Yn)t.texStorage2D(i.TEXTURE_2D,At,Gt,Se.width,Se.height);else{let qe=Se.width,kt=Se.height;for(let Lt=0;Lt<At;Lt++)t.texImage2D(i.TEXTURE_2D,Lt,Gt,qe,kt,0,zt,Vt,null),qe>>=1,kt>>=1}}else if(Yt.length>0&&Tt){Yn&&Me&&t.texStorage2D(i.TEXTURE_2D,At,Gt,Yt[0].width,Yt[0].height);for(let qe=0,kt=Yt.length;qe<kt;qe++)Dt=Yt[qe],Yn?t.texSubImage2D(i.TEXTURE_2D,qe,0,0,zt,Vt,Dt):t.texImage2D(i.TEXTURE_2D,qe,Gt,zt,Vt,Dt);V.generateMipmaps=!1}else Yn?(Me&&t.texStorage2D(i.TEXTURE_2D,At,Gt,Se.width,Se.height),t.texSubImage2D(i.TEXTURE_2D,0,0,0,zt,Vt,Se)):t.texImage2D(i.TEXTURE_2D,0,Gt,zt,Vt,Se);k(V,Tt)&&O(st),Zt.__version=ut.version,V.onUpdate&&V.onUpdate(V)}U.__version=V.version}function ft(U,V,Ve){if(V.image.length!==6)return;const st=Le(U,V),ve=V.source;t.bindTexture(i.TEXTURE_CUBE_MAP,U.__webglTexture,i.TEXTURE0+Ve);const ut=n.get(ve);if(ve.version!==ut.__version||st===!0){t.activeTexture(i.TEXTURE0+Ve),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,V.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,V.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE);const Zt=V.isCompressedTexture||V.image[0].isCompressedTexture,we=V.image[0]&&V.image[0].isDataTexture,Se=[];for(let qe=0;qe<6;qe++)!Zt&&!we?Se[qe]=w(V.image[qe],!1,!0,c):Se[qe]=we?V.image[qe].image:V.image[qe],Se[qe]=Pe(V,Se[qe]);const Tt=Se[0],zt=C(Tt)||a,Vt=s.convert(V.format,V.colorSpace),Gt=s.convert(V.type),Dt=R(V.internalFormat,Vt,Gt,V.colorSpace),Yt=a&&V.isVideoTexture!==!0,Yn=ut.__version===void 0||st===!0;let Me=A(V,Tt,zt);at(i.TEXTURE_CUBE_MAP,V,zt);let At;if(Zt){Yt&&Yn&&t.texStorage2D(i.TEXTURE_CUBE_MAP,Me,Dt,Tt.width,Tt.height);for(let qe=0;qe<6;qe++){At=Se[qe].mipmaps;for(let kt=0;kt<At.length;kt++){const Lt=At[kt];V.format!==Fo?Vt!==null?Yt?t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,kt,0,0,Lt.width,Lt.height,Vt,Lt.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,kt,Dt,Lt.width,Lt.height,0,Lt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Yt?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,kt,0,0,Lt.width,Lt.height,Vt,Gt,Lt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,kt,Dt,Lt.width,Lt.height,0,Vt,Gt,Lt.data)}}}else{At=V.mipmaps,Yt&&Yn&&(At.length>0&&Me++,t.texStorage2D(i.TEXTURE_CUBE_MAP,Me,Dt,Se[0].width,Se[0].height));for(let qe=0;qe<6;qe++)if(we){Yt?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,0,0,Se[qe].width,Se[qe].height,Vt,Gt,Se[qe].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,Dt,Se[qe].width,Se[qe].height,0,Vt,Gt,Se[qe].data);for(let kt=0;kt<At.length;kt++){const Te=At[kt].image[qe].image;Yt?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,kt+1,0,0,Te.width,Te.height,Vt,Gt,Te.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,kt+1,Dt,Te.width,Te.height,0,Vt,Gt,Te.data)}}else{Yt?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,0,0,Vt,Gt,Se[qe]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,Dt,Vt,Gt,Se[qe]);for(let kt=0;kt<At.length;kt++){const Lt=At[kt];Yt?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,kt+1,0,0,Vt,Gt,Lt.image[qe]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+qe,kt+1,Dt,Vt,Gt,Lt.image[qe])}}}k(V,zt)&&O(i.TEXTURE_CUBE_MAP),ut.__version=ve.version,V.onUpdate&&V.onUpdate(V)}U.__version=V.version}function rt(U,V,Ve,st,ve){const ut=s.convert(Ve.format,Ve.colorSpace),Zt=s.convert(Ve.type),we=R(Ve.internalFormat,ut,Zt,Ve.colorSpace);n.get(V).__hasExternalTextures||(ve===i.TEXTURE_3D||ve===i.TEXTURE_2D_ARRAY?t.texImage3D(ve,0,we,V.width,V.height,V.depth,0,ut,Zt,null):t.texImage2D(ve,0,we,V.width,V.height,0,ut,Zt,null)),t.bindFramebuffer(i.FRAMEBUFFER,U),me(V)?d.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,st,ve,n.get(Ve).__webglTexture,0,nt(V)):(ve===i.TEXTURE_2D||ve>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&ve<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,st,ve,n.get(Ve).__webglTexture,0),t.bindFramebuffer(i.FRAMEBUFFER,null)}function tt(U,V,Ve){if(i.bindRenderbuffer(i.RENDERBUFFER,U),V.depthBuffer&&!V.stencilBuffer){let st=i.DEPTH_COMPONENT16;if(Ve||me(V)){const ve=V.depthTexture;ve&&ve.isDepthTexture&&(ve.type===Ks?st=i.DEPTH_COMPONENT32F:ve.type===dc&&(st=i.DEPTH_COMPONENT24));const ut=nt(V);me(V)?d.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ut,st,V.width,V.height):i.renderbufferStorageMultisample(i.RENDERBUFFER,ut,st,V.width,V.height)}else i.renderbufferStorage(i.RENDERBUFFER,st,V.width,V.height);i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,U)}else if(V.depthBuffer&&V.stencilBuffer){const st=nt(V);Ve&&me(V)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,st,i.DEPTH24_STENCIL8,V.width,V.height):me(V)?d.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,st,i.DEPTH24_STENCIL8,V.width,V.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,V.width,V.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,U)}else{const st=V.isWebGLMultipleRenderTargets===!0?V.texture:[V.texture];for(let ve=0;ve<st.length;ve++){const ut=st[ve],Zt=s.convert(ut.format,ut.colorSpace),we=s.convert(ut.type),Se=R(ut.internalFormat,Zt,we,ut.colorSpace),Tt=nt(V);Ve&&me(V)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Tt,Se,V.width,V.height):me(V)?d.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Tt,Se,V.width,V.height):i.renderbufferStorage(i.RENDERBUFFER,Se,V.width,V.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function se(U,V){if(V&&V.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,U),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(V.depthTexture).__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),le(V.depthTexture,0);const st=n.get(V.depthTexture).__webglTexture,ve=nt(V);if(V.depthTexture.format===ef)me(V)?d.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,st,0,ve):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,st,0);else if(V.depthTexture.format===Xp)me(V)?d.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,st,0,ve):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,st,0);else throw new Error("Unknown depthTexture format")}function ke(U){const V=n.get(U),Ve=U.isWebGLCubeRenderTarget===!0;if(U.depthTexture&&!V.__autoAllocateDepthBuffer){if(Ve)throw new Error("target.depthTexture not supported in Cube render targets");se(V.__webglFramebuffer,U)}else if(Ve){V.__webglDepthbuffer=[];for(let st=0;st<6;st++)t.bindFramebuffer(i.FRAMEBUFFER,V.__webglFramebuffer[st]),V.__webglDepthbuffer[st]=i.createRenderbuffer(),tt(V.__webglDepthbuffer[st],U,!1)}else t.bindFramebuffer(i.FRAMEBUFFER,V.__webglFramebuffer),V.__webglDepthbuffer=i.createRenderbuffer(),tt(V.__webglDepthbuffer,U,!1);t.bindFramebuffer(i.FRAMEBUFFER,null)}function ae(U,V,Ve){const st=n.get(U);V!==void 0&&rt(st.__webglFramebuffer,U,U.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D),Ve!==void 0&&ke(U)}function xe(U){const V=U.texture,Ve=n.get(U),st=n.get(V);U.addEventListener("dispose",q),U.isWebGLMultipleRenderTargets!==!0&&(st.__webglTexture===void 0&&(st.__webglTexture=i.createTexture()),st.__version=V.version,o.memory.textures++);const ve=U.isWebGLCubeRenderTarget===!0,ut=U.isWebGLMultipleRenderTargets===!0,Zt=C(U)||a;if(ve){Ve.__webglFramebuffer=[];for(let we=0;we<6;we++)Ve.__webglFramebuffer[we]=i.createFramebuffer()}else{if(Ve.__webglFramebuffer=i.createFramebuffer(),ut)if(r.drawBuffers){const we=U.texture;for(let Se=0,Tt=we.length;Se<Tt;Se++){const zt=n.get(we[Se]);zt.__webglTexture===void 0&&(zt.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&U.samples>0&&me(U)===!1){const we=ut?V:[V];Ve.__webglMultisampledFramebuffer=i.createFramebuffer(),Ve.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,Ve.__webglMultisampledFramebuffer);for(let Se=0;Se<we.length;Se++){const Tt=we[Se];Ve.__webglColorRenderbuffer[Se]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,Ve.__webglColorRenderbuffer[Se]);const zt=s.convert(Tt.format,Tt.colorSpace),Vt=s.convert(Tt.type),Gt=R(Tt.internalFormat,zt,Vt,Tt.colorSpace,U.isXRRenderTarget===!0),Dt=nt(U);i.renderbufferStorageMultisample(i.RENDERBUFFER,Dt,Gt,U.width,U.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Se,i.RENDERBUFFER,Ve.__webglColorRenderbuffer[Se])}i.bindRenderbuffer(i.RENDERBUFFER,null),U.depthBuffer&&(Ve.__webglDepthRenderbuffer=i.createRenderbuffer(),tt(Ve.__webglDepthRenderbuffer,U,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(ve){t.bindTexture(i.TEXTURE_CUBE_MAP,st.__webglTexture),at(i.TEXTURE_CUBE_MAP,V,Zt);for(let we=0;we<6;we++)rt(Ve.__webglFramebuffer[we],U,V,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+we);k(V,Zt)&&O(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ut){const we=U.texture;for(let Se=0,Tt=we.length;Se<Tt;Se++){const zt=we[Se],Vt=n.get(zt);t.bindTexture(i.TEXTURE_2D,Vt.__webglTexture),at(i.TEXTURE_2D,zt,Zt),rt(Ve.__webglFramebuffer,U,zt,i.COLOR_ATTACHMENT0+Se,i.TEXTURE_2D),k(zt,Zt)&&O(i.TEXTURE_2D)}t.unbindTexture()}else{let we=i.TEXTURE_2D;(U.isWebGL3DRenderTarget||U.isWebGLArrayRenderTarget)&&(a?we=U.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(we,st.__webglTexture),at(we,V,Zt),rt(Ve.__webglFramebuffer,U,V,i.COLOR_ATTACHMENT0,we),k(V,Zt)&&O(we),t.unbindTexture()}U.depthBuffer&&ke(U)}function Ie(U){const V=C(U)||a,Ve=U.isWebGLMultipleRenderTargets===!0?U.texture:[U.texture];for(let st=0,ve=Ve.length;st<ve;st++){const ut=Ve[st];if(k(ut,V)){const Zt=U.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,we=n.get(ut).__webglTexture;t.bindTexture(Zt,we),O(Zt),t.unbindTexture()}}}function dt(U){if(a&&U.samples>0&&me(U)===!1){const V=U.isWebGLMultipleRenderTargets?U.texture:[U.texture],Ve=U.width,st=U.height;let ve=i.COLOR_BUFFER_BIT;const ut=[],Zt=U.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,we=n.get(U),Se=U.isWebGLMultipleRenderTargets===!0;if(Se)for(let Tt=0;Tt<V.length;Tt++)t.bindFramebuffer(i.FRAMEBUFFER,we.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Tt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,we.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Tt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,we.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,we.__webglFramebuffer);for(let Tt=0;Tt<V.length;Tt++){ut.push(i.COLOR_ATTACHMENT0+Tt),U.depthBuffer&&ut.push(Zt);const zt=we.__ignoreDepthValues!==void 0?we.__ignoreDepthValues:!1;if(zt===!1&&(U.depthBuffer&&(ve|=i.DEPTH_BUFFER_BIT),U.stencilBuffer&&(ve|=i.STENCIL_BUFFER_BIT)),Se&&i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,we.__webglColorRenderbuffer[Tt]),zt===!0&&(i.invalidateFramebuffer(i.READ_FRAMEBUFFER,[Zt]),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[Zt])),Se){const Vt=n.get(V[Tt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Vt,0)}i.blitFramebuffer(0,0,Ve,st,0,0,Ve,st,ve,i.NEAREST),f&&i.invalidateFramebuffer(i.READ_FRAMEBUFFER,ut)}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Se)for(let Tt=0;Tt<V.length;Tt++){t.bindFramebuffer(i.FRAMEBUFFER,we.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Tt,i.RENDERBUFFER,we.__webglColorRenderbuffer[Tt]);const zt=n.get(V[Tt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,we.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Tt,i.TEXTURE_2D,zt,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,we.__webglMultisampledFramebuffer)}}function nt(U){return Math.min(h,U.samples)}function me(U){const V=n.get(U);return a&&U.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&V.__useRenderToTexture!==!1}function ue(U){const V=o.render.frame;g.get(U)!==V&&(g.set(U,V),U.update())}function Pe(U,V){const Ve=U.colorSpace,st=U.format,ve=U.type;return U.isCompressedTexture===!0||U.format===Cw||Ve!==eu&&Ve!==tf&&(Ve===Zn?a===!1?e.has("EXT_sRGB")===!0&&st===Fo?(U.format=Cw,U.minFilter=Hr,U.generateMipmaps=!1):V=sA.sRGBToLinear(V):(st!==Fo||ve!==Sa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ve)),V}this.allocateTextureUnit=J,this.resetTextureUnits=ee,this.setTexture2D=le,this.setTexture2DArray=ie,this.setTexture3D=be,this.setTextureCube=Je,this.rebindTextures=ae,this.setupRenderTarget=xe,this.updateRenderTargetMipmap=Ie,this.updateMultisampleRenderTarget=dt,this.setupDepthRenderbuffer=ke,this.setupFrameBufferTexture=rt,this.useMultisampledRTT=me}function E9(i,e,t){const n=t.isWebGL2;function r(s,o=tf){let a;if(s===Sa)return i.UNSIGNED_BYTE;if(s===E2)return i.UNSIGNED_SHORT_4_4_4_4;if(s===T2)return i.UNSIGNED_SHORT_5_5_5_1;if(s===v_)return i.BYTE;if(s===__)return i.SHORT;if(s===o0)return i.UNSIGNED_SHORT;if(s===wg)return i.INT;if(s===dc)return i.UNSIGNED_INT;if(s===Ks)return i.FLOAT;if(s===Qc)return n?i.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===JT)return i.ALPHA;if(s===Fo)return i.RGBA;if(s===A2)return i.LUMINANCE;if(s===P2)return i.LUMINANCE_ALPHA;if(s===ef)return i.DEPTH_COMPONENT;if(s===Xp)return i.DEPTH_STENCIL;if(s===Cw)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===WD)return i.RED;if(s===QT)return i.RED_INTEGER;if(s===jD)return i.RG;if(s===eA)return i.RG_INTEGER;if(s===tA)return i.RGBA_INTEGER;if(s===Jx||s===Qx||s===ew||s===tw)if(o===Zn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Jx)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Qx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===ew)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===tw)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Jx)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Qx)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===ew)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===tw)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===XC||s===YC||s===KC||s===ZC)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===XC)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===YC)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===KC)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===ZC)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===$D)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===JC||s===QC)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===JC)return o===Zn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===QC)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===eE||s===tE||s===nE||s===iE||s===rE||s===sE||s===oE||s===aE||s===lE||s===cE||s===uE||s===hE||s===dE||s===fE)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===eE)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===tE)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===nE)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===iE)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===rE)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===sE)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===oE)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===aE)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===lE)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===cE)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===uE)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===hE)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===dE)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===fE)return o===Zn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===nw)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===nw)return o===Zn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===XD||s===pE||s===mE||s===gE)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===nw)return a.COMPRESSED_RED_RGTC1_EXT;if(s===pE)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===mE)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===gE)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Qd?n?i.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):i[s]!==void 0?i[s]:null}return{convert:r}}class T9 extends pr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let Dp=class extends Ni{constructor(){super(),this.isGroup=!0,this.type="Group"}};const FQ={type:"move"};class iM{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Dp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Dp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new oe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new oe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Dp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new oe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new oe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const v of e.hand.values()){const y=t.getJointPose(v,n),_=this._getHandJoint(c,v);y!==null&&(_.matrix.fromArray(y.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=y.radius),_.visible=y!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],d=u.position.distanceTo(h.position),f=.02,g=.005;c.inputState.pinching&&d>f+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=f-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(FQ)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Dp;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class A9 extends qr{constructor(e,t,n,r,s,o,a,l,c,u){if(u=u!==void 0?u:ef,u!==ef&&u!==Xp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&u===ef&&(n=dc),n===void 0&&u===Xp&&(n=Qd),super(null,r,s,o,a,l,u,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Oi,this.minFilter=l!==void 0?l:Oi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class BQ extends bc{constructor(e,t){super();const n=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,h=null,d=null,f=null,g=null;const v=t.getContextAttributes();let y=null,_=null;const S=[],w=[],C=new pr;C.layers.enable(1),C.viewport=new Li;const E=new pr;E.layers.enable(2),E.viewport=new Li;const k=[C,E],O=new T9;O.layers.enable(1),O.layers.enable(2);let R=null,A=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ie){let be=S[ie];return be===void 0&&(be=new iM,S[ie]=be),be.getTargetRaySpace()},this.getControllerGrip=function(ie){let be=S[ie];return be===void 0&&(be=new iM,S[ie]=be),be.getGripSpace()},this.getHand=function(ie){let be=S[ie];return be===void 0&&(be=new iM,S[ie]=be),be.getHandSpace()};function D(ie){const be=w.indexOf(ie.inputSource);if(be===-1)return;const Je=S[be];Je!==void 0&&(Je.update(ie.inputSource,ie.frame,c||o),Je.dispatchEvent({type:ie.type,data:ie.inputSource}))}function I(){r.removeEventListener("select",D),r.removeEventListener("selectstart",D),r.removeEventListener("selectend",D),r.removeEventListener("squeeze",D),r.removeEventListener("squeezestart",D),r.removeEventListener("squeezeend",D),r.removeEventListener("end",I),r.removeEventListener("inputsourceschange",q);for(let ie=0;ie<S.length;ie++){const be=w[ie];be!==null&&(w[ie]=null,S[ie].disconnect(be))}R=null,A=null,e.setRenderTarget(y),f=null,d=null,h=null,r=null,_=null,le.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ie){s=ie,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ie){a=ie,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(ie){c=ie},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return h},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=async function(ie){if(r=ie,r!==null){if(y=e.getRenderTarget(),r.addEventListener("select",D),r.addEventListener("selectstart",D),r.addEventListener("selectend",D),r.addEventListener("squeeze",D),r.addEventListener("squeezestart",D),r.addEventListener("squeezeend",D),r.addEventListener("end",I),r.addEventListener("inputsourceschange",q),v.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const be={antialias:r.renderState.layers===void 0?v.antialias:!0,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(r,t,be),r.updateRenderState({baseLayer:f}),_=new Lo(f.framebufferWidth,f.framebufferHeight,{format:Fo,type:Sa,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let be=null,Je=null,Xe=null;v.depth&&(Xe=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,be=v.stencil?Xp:ef,Je=v.stencil?Qd:dc);const Be={colorFormat:t.RGBA8,depthFormat:Xe,scaleFactor:s};h=new XRWebGLBinding(r,t),d=h.createProjectionLayer(Be),r.updateRenderState({layers:[d]}),_=new Lo(d.textureWidth,d.textureHeight,{format:Fo,type:Sa,depthTexture:new A9(d.textureWidth,d.textureHeight,Je,void 0,void 0,void 0,void 0,void 0,void 0,be),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0});const vt=e.properties.get(_);vt.__ignoreDepthValues=d.ignoreDepthValues}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),le.setContext(r),le.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function q(ie){for(let be=0;be<ie.removed.length;be++){const Je=ie.removed[be],Xe=w.indexOf(Je);Xe>=0&&(w[Xe]=null,S[Xe].disconnect(Je))}for(let be=0;be<ie.added.length;be++){const Je=ie.added[be];let Xe=w.indexOf(Je);if(Xe===-1){for(let vt=0;vt<S.length;vt++)if(vt>=w.length){w.push(Je),Xe=vt;break}else if(w[vt]===null){w[vt]=Je,Xe=vt;break}if(Xe===-1)break}const Be=S[Xe];Be&&Be.connect(Je)}}const j=new oe,Y=new oe;function F(ie,be,Je){j.setFromMatrixPosition(be.matrixWorld),Y.setFromMatrixPosition(Je.matrixWorld);const Xe=j.distanceTo(Y),Be=be.projectionMatrix.elements,vt=Je.projectionMatrix.elements,at=Be[14]/(Be[10]-1),Le=Be[14]/(Be[10]+1),Ot=(Be[9]+1)/Be[5],ft=(Be[9]-1)/Be[5],rt=(Be[8]-1)/Be[0],tt=(vt[8]+1)/vt[0],se=at*rt,ke=at*tt,ae=Xe/(-rt+tt),xe=ae*-rt;be.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ie.translateX(xe),ie.translateZ(ae),ie.matrixWorld.compose(ie.position,ie.quaternion,ie.scale),ie.matrixWorldInverse.copy(ie.matrixWorld).invert();const Ie=at+ae,dt=Le+ae,nt=se-xe,me=ke+(Xe-xe),ue=Ot*Le/dt*Ie,Pe=ft*Le/dt*Ie;ie.projectionMatrix.makePerspective(nt,me,ue,Pe,Ie,dt),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert()}function re(ie,be){be===null?ie.matrixWorld.copy(ie.matrix):ie.matrixWorld.multiplyMatrices(be.matrixWorld,ie.matrix),ie.matrixWorldInverse.copy(ie.matrixWorld).invert()}this.updateCamera=function(ie){if(r===null)return;O.near=E.near=C.near=ie.near,O.far=E.far=C.far=ie.far,(R!==O.near||A!==O.far)&&(r.updateRenderState({depthNear:O.near,depthFar:O.far}),R=O.near,A=O.far);const be=ie.parent,Je=O.cameras;re(O,be);for(let Xe=0;Xe<Je.length;Xe++)re(Je[Xe],be);Je.length===2?F(O,C,E):O.projectionMatrix.copy(C.projectionMatrix),ee(ie,O,be)};function ee(ie,be,Je){Je===null?ie.matrix.copy(be.matrixWorld):(ie.matrix.copy(Je.matrixWorld),ie.matrix.invert(),ie.matrix.multiply(be.matrixWorld)),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.updateMatrixWorld(!0);const Xe=ie.children;for(let Be=0,vt=Xe.length;Be<vt;Be++)Xe[Be].updateMatrixWorld(!0);ie.projectionMatrix.copy(be.projectionMatrix),ie.projectionMatrixInverse.copy(be.projectionMatrixInverse),ie.isPerspectiveCamera&&(ie.fov=eg*2*Math.atan(1/ie.projectionMatrix.elements[5]),ie.zoom=1)}this.getCamera=function(){return O},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(ie){l=ie,d!==null&&(d.fixedFoveation=ie),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=ie)};let J=null;function Ee(ie,be){if(u=be.getViewerPose(c||o),g=be,u!==null){const Je=u.views;f!==null&&(e.setRenderTargetFramebuffer(_,f.framebuffer),e.setRenderTarget(_));let Xe=!1;Je.length!==O.cameras.length&&(O.cameras.length=0,Xe=!0);for(let Be=0;Be<Je.length;Be++){const vt=Je[Be];let at=null;if(f!==null)at=f.getViewport(vt);else{const Ot=h.getViewSubImage(d,vt);at=Ot.viewport,Be===0&&(e.setRenderTargetTextures(_,Ot.colorTexture,d.ignoreDepthValues?void 0:Ot.depthStencilTexture),e.setRenderTarget(_))}let Le=k[Be];Le===void 0&&(Le=new pr,Le.layers.enable(Be),Le.viewport=new Li,k[Be]=Le),Le.matrix.fromArray(vt.transform.matrix),Le.matrix.decompose(Le.position,Le.quaternion,Le.scale),Le.projectionMatrix.fromArray(vt.projectionMatrix),Le.projectionMatrixInverse.copy(Le.projectionMatrix).invert(),Le.viewport.set(at.x,at.y,at.width,at.height),Be===0&&(O.matrix.copy(Le.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale)),Xe===!0&&O.cameras.push(Le)}}for(let Je=0;Je<S.length;Je++){const Xe=w[Je],Be=S[Je];Xe!==null&&Be!==void 0&&Be.update(Xe,be,c||o)}J&&J(ie,be),be.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:be}),g=null}const le=new x9;le.setAnimationLoop(Ee),this.setAnimationLoop=function(ie){J=ie},this.dispose=function(){}}}function VQ(i,e){function t(y,_){y.matrixAutoUpdate===!0&&y.updateMatrix(),_.value.copy(y.matrix)}function n(y,_){_.color.getRGB(y.fogColor.value,_9(i)),_.isFog?(y.fogNear.value=_.near,y.fogFar.value=_.far):_.isFogExp2&&(y.fogDensity.value=_.density)}function r(y,_,S,w,C){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(y,_):_.isMeshToonMaterial?(s(y,_),h(y,_)):_.isMeshPhongMaterial?(s(y,_),u(y,_)):_.isMeshStandardMaterial?(s(y,_),d(y,_),_.isMeshPhysicalMaterial&&f(y,_,C)):_.isMeshMatcapMaterial?(s(y,_),g(y,_)):_.isMeshDepthMaterial?s(y,_):_.isMeshDistanceMaterial?(s(y,_),v(y,_)):_.isMeshNormalMaterial?s(y,_):_.isLineBasicMaterial?(o(y,_),_.isLineDashedMaterial&&a(y,_)):_.isPointsMaterial?l(y,_,S,w):_.isSpriteMaterial?c(y,_):_.isShadowMaterial?(y.color.value.copy(_.color),y.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function s(y,_){y.opacity.value=_.opacity,_.color&&y.diffuse.value.copy(_.color),_.emissive&&y.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(y.map.value=_.map,t(_.map,y.mapTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.bumpMap&&(y.bumpMap.value=_.bumpMap,t(_.bumpMap,y.bumpMapTransform),y.bumpScale.value=_.bumpScale,_.side===wa&&(y.bumpScale.value*=-1)),_.normalMap&&(y.normalMap.value=_.normalMap,t(_.normalMap,y.normalMapTransform),y.normalScale.value.copy(_.normalScale),_.side===wa&&y.normalScale.value.negate()),_.displacementMap&&(y.displacementMap.value=_.displacementMap,t(_.displacementMap,y.displacementMapTransform),y.displacementScale.value=_.displacementScale,y.displacementBias.value=_.displacementBias),_.emissiveMap&&(y.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,y.emissiveMapTransform)),_.specularMap&&(y.specularMap.value=_.specularMap,t(_.specularMap,y.specularMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest);const S=e.get(_).envMap;if(S&&(y.envMap.value=S,y.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=_.reflectivity,y.ior.value=_.ior,y.refractionRatio.value=_.refractionRatio),_.lightMap){y.lightMap.value=_.lightMap;const w=i._useLegacyLights===!0?Math.PI:1;y.lightMapIntensity.value=_.lightMapIntensity*w,t(_.lightMap,y.lightMapTransform)}_.aoMap&&(y.aoMap.value=_.aoMap,y.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,y.aoMapTransform))}function o(y,_){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,_.map&&(y.map.value=_.map,t(_.map,y.mapTransform))}function a(y,_){y.dashSize.value=_.dashSize,y.totalSize.value=_.dashSize+_.gapSize,y.scale.value=_.scale}function l(y,_,S,w){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,y.size.value=_.size*S,y.scale.value=w*.5,_.map&&(y.map.value=_.map,t(_.map,y.uvTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest)}function c(y,_){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,y.rotation.value=_.rotation,_.map&&(y.map.value=_.map,t(_.map,y.mapTransform)),_.alphaMap&&(y.alphaMap.value=_.alphaMap,t(_.alphaMap,y.alphaMapTransform)),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest)}function u(y,_){y.specular.value.copy(_.specular),y.shininess.value=Math.max(_.shininess,1e-4)}function h(y,_){_.gradientMap&&(y.gradientMap.value=_.gradientMap)}function d(y,_){y.metalness.value=_.metalness,_.metalnessMap&&(y.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,y.metalnessMapTransform)),y.roughness.value=_.roughness,_.roughnessMap&&(y.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,y.roughnessMapTransform)),e.get(_).envMap&&(y.envMapIntensity.value=_.envMapIntensity)}function f(y,_,S){y.ior.value=_.ior,_.sheen>0&&(y.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),y.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(y.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,y.sheenColorMapTransform)),_.sheenRoughnessMap&&(y.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,y.sheenRoughnessMapTransform))),_.clearcoat>0&&(y.clearcoat.value=_.clearcoat,y.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(y.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,y.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(y.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===wa&&y.clearcoatNormalScale.value.negate())),_.iridescence>0&&(y.iridescence.value=_.iridescence,y.iridescenceIOR.value=_.iridescenceIOR,y.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(y.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,y.iridescenceMapTransform)),_.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),_.transmission>0&&(y.transmission.value=_.transmission,y.transmissionSamplerMap.value=S.texture,y.transmissionSamplerSize.value.set(S.width,S.height),_.transmissionMap&&(y.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,y.transmissionMapTransform)),y.thickness.value=_.thickness,_.thicknessMap&&(y.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=_.attenuationDistance,y.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(y.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(y.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=_.specularIntensity,y.specularColor.value.copy(_.specularColor),_.specularColorMap&&(y.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,y.specularColorMapTransform)),_.specularIntensityMap&&(y.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,y.specularIntensityMapTransform))}function g(y,_){_.matcap&&(y.matcap.value=_.matcap)}function v(y,_){const S=e.get(_).light;y.referencePosition.value.setFromMatrixPosition(S.matrixWorld),y.nearDistance.value=S.shadow.camera.near,y.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function HQ(i,e,t,n){let r={},s={},o=[];const a=t.isWebGL2?i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(S,w){const C=w.program;n.uniformBlockBinding(S,C)}function c(S,w){let C=r[S.id];C===void 0&&(g(S),C=u(S),r[S.id]=C,S.addEventListener("dispose",y));const E=w.program;n.updateUBOMapping(S,E);const k=e.render.frame;s[S.id]!==k&&(d(S),s[S.id]=k)}function u(S){const w=h();S.__bindingPointIndex=w;const C=i.createBuffer(),E=S.__size,k=S.usage;return i.bindBuffer(i.UNIFORM_BUFFER,C),i.bufferData(i.UNIFORM_BUFFER,E,k),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,w,C),C}function h(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(S){const w=r[S.id],C=S.uniforms,E=S.__cache;i.bindBuffer(i.UNIFORM_BUFFER,w);for(let k=0,O=C.length;k<O;k++){const R=C[k];if(f(R,k,E)===!0){const A=R.__offset,D=Array.isArray(R.value)?R.value:[R.value];let I=0;for(let q=0;q<D.length;q++){const j=D[q],Y=v(j);typeof j=="number"?(R.__data[0]=j,i.bufferSubData(i.UNIFORM_BUFFER,A+I,R.__data)):j.isMatrix3?(R.__data[0]=j.elements[0],R.__data[1]=j.elements[1],R.__data[2]=j.elements[2],R.__data[3]=j.elements[0],R.__data[4]=j.elements[3],R.__data[5]=j.elements[4],R.__data[6]=j.elements[5],R.__data[7]=j.elements[0],R.__data[8]=j.elements[6],R.__data[9]=j.elements[7],R.__data[10]=j.elements[8],R.__data[11]=j.elements[0]):(j.toArray(R.__data,I),I+=Y.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,A,R.__data)}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function f(S,w,C){const E=S.value;if(C[w]===void 0){if(typeof E=="number")C[w]=E;else{const k=Array.isArray(E)?E:[E],O=[];for(let R=0;R<k.length;R++)O.push(k[R].clone());C[w]=O}return!0}else if(typeof E=="number"){if(C[w]!==E)return C[w]=E,!0}else{const k=Array.isArray(C[w])?C[w]:[C[w]],O=Array.isArray(E)?E:[E];for(let R=0;R<k.length;R++){const A=k[R];if(A.equals(O[R])===!1)return A.copy(O[R]),!0}}return!1}function g(S){const w=S.uniforms;let C=0;const E=16;let k=0;for(let O=0,R=w.length;O<R;O++){const A=w[O],D={boundary:0,storage:0},I=Array.isArray(A.value)?A.value:[A.value];for(let q=0,j=I.length;q<j;q++){const Y=I[q],F=v(Y);D.boundary+=F.boundary,D.storage+=F.storage}if(A.__data=new Float32Array(D.storage/Float32Array.BYTES_PER_ELEMENT),A.__offset=C,O>0){k=C%E;const q=E-k;k!==0&&q-D.boundary<0&&(C+=E-k,A.__offset=C)}C+=D.storage}return k=C%E,k>0&&(C+=E-k),S.__size=C,S.__cache={},this}function v(S){const w={boundary:0,storage:0};return typeof S=="number"?(w.boundary=4,w.storage=4):S.isVector2?(w.boundary=8,w.storage=8):S.isVector3||S.isColor?(w.boundary=16,w.storage=12):S.isVector4?(w.boundary=16,w.storage=16):S.isMatrix3?(w.boundary=48,w.storage=48):S.isMatrix4?(w.boundary=64,w.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),w}function y(S){const w=S.target;w.removeEventListener("dispose",y);const C=o.indexOf(w.__bindingPointIndex);o.splice(C,1),i.deleteBuffer(r[w.id]),delete r[w.id],delete s[w.id]}function _(){for(const S in r)i.deleteBuffer(r[S]);o=[],r={},s={}}return{bind:l,update:c,dispose:_}}function qQ(){const i=I1("canvas");return i.style.display="block",i}class dA{constructor(e={}){const{canvas:t=qQ(),context:n=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1,webgl1:d=!1}=e;this.isWebGLRenderer=!0,d&&(this.isWebGL1Renderer=!0);let f;n!==null?f=n.getContextAttributes().alpha:f=o;const g=new Uint32Array(4),v=new Int32Array(4);let y=null,_=null;const S=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Zn,this._useLegacyLights=!1,this.toneMapping=qh,this.toneMappingExposure=1;const C=this;let E=!1,k=0,O=0,R=null,A=-1,D=null;const I=new Li,q=new Li;let j=null;const Y=new qt(0);let F=0,re=t.width,ee=t.height,J=1,Ee=null,le=null;const ie=new Li(0,0,re,ee),be=new Li(0,0,re,ee);let Je=!1;const Xe=new L2;let Be=!1,vt=!1,at=null;const Le=new qn,Ot=new ht,ft=new oe,rt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function tt(){return R===null?J:1}let se=n;function ke(ne,je){for(let et=0;et<ne.length;et++){const Ne=ne[et],ot=t.getContext(Ne,je);if(ot!==null)return ot}return null}try{const ne={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${w2}`),t.addEventListener("webglcontextlost",qe,!1),t.addEventListener("webglcontextrestored",kt,!1),t.addEventListener("webglcontextcreationerror",Lt,!1),se===null){const je=["webgl2","webgl","experimental-webgl"];if(C.isWebGL1Renderer===!0&&je.shift(),se=ke(je,ne),se===null)throw ke(je)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&se instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),se.getShaderPrecisionFormat===void 0&&(se.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ne){throw console.error("THREE.WebGLRenderer: "+ne.message),ne}let ae,xe,Ie,dt,nt,me,ue,Pe,U,V,Ve,st,ve,ut,Zt,we,Se,Tt,zt,Vt,Gt,Dt,Yt,Yn;function Me(){ae=new rJ(se),xe=new JZ(se,ae,e),ae.init(xe),Dt=new E9(se,ae,xe),Ie=new NQ(se,ae,xe),dt=new aJ(se),nt=new CQ,me=new UQ(se,ae,Ie,nt,xe,Dt,dt),ue=new eJ(C),Pe=new iJ(C),U=new vY(se,xe),Yt=new KZ(se,ae,U,xe),V=new sJ(se,U,dt,Yt),Ve=new hJ(se,V,U,dt),zt=new uJ(se,xe,me),we=new QZ(nt),st=new MQ(C,ue,Pe,ae,xe,Yt,we),ve=new VQ(C,nt),ut=new TQ,Zt=new LQ(ae,xe),Tt=new YZ(C,ue,Pe,Ie,Ve,f,l),Se=new IQ(C,Ve,xe),Yn=new HQ(se,dt,xe,Ie),Vt=new ZZ(se,ae,dt,xe),Gt=new oJ(se,ae,dt,xe),dt.programs=st.programs,C.capabilities=xe,C.extensions=ae,C.properties=nt,C.renderLists=ut,C.shadowMap=Se,C.state=Ie,C.info=dt}Me();const At=new BQ(C,se);this.xr=At,this.getContext=function(){return se},this.getContextAttributes=function(){return se.getContextAttributes()},this.forceContextLoss=function(){const ne=ae.get("WEBGL_lose_context");ne&&ne.loseContext()},this.forceContextRestore=function(){const ne=ae.get("WEBGL_lose_context");ne&&ne.restoreContext()},this.getPixelRatio=function(){return J},this.setPixelRatio=function(ne){ne!==void 0&&(J=ne,this.setSize(re,ee,!1))},this.getSize=function(ne){return ne.set(re,ee)},this.setSize=function(ne,je,et=!0){if(At.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}re=ne,ee=je,t.width=Math.floor(ne*J),t.height=Math.floor(je*J),et===!0&&(t.style.width=ne+"px",t.style.height=je+"px"),this.setViewport(0,0,ne,je)},this.getDrawingBufferSize=function(ne){return ne.set(re*J,ee*J).floor()},this.setDrawingBufferSize=function(ne,je,et){re=ne,ee=je,J=et,t.width=Math.floor(ne*et),t.height=Math.floor(je*et),this.setViewport(0,0,ne,je)},this.getCurrentViewport=function(ne){return ne.copy(I)},this.getViewport=function(ne){return ne.copy(ie)},this.setViewport=function(ne,je,et,Ne){ne.isVector4?ie.set(ne.x,ne.y,ne.z,ne.w):ie.set(ne,je,et,Ne),Ie.viewport(I.copy(ie).multiplyScalar(J).floor())},this.getScissor=function(ne){return ne.copy(be)},this.setScissor=function(ne,je,et,Ne){ne.isVector4?be.set(ne.x,ne.y,ne.z,ne.w):be.set(ne,je,et,Ne),Ie.scissor(q.copy(be).multiplyScalar(J).floor())},this.getScissorTest=function(){return Je},this.setScissorTest=function(ne){Ie.setScissorTest(Je=ne)},this.setOpaqueSort=function(ne){Ee=ne},this.setTransparentSort=function(ne){le=ne},this.getClearColor=function(ne){return ne.copy(Tt.getClearColor())},this.setClearColor=function(){Tt.setClearColor.apply(Tt,arguments)},this.getClearAlpha=function(){return Tt.getClearAlpha()},this.setClearAlpha=function(){Tt.setClearAlpha.apply(Tt,arguments)},this.clear=function(ne=!0,je=!0,et=!0){let Ne=0;if(ne){let ot=!1;if(R!==null){const Wt=R.texture.format;ot=Wt===tA||Wt===eA||Wt===QT}if(ot){const Wt=R.texture.type,an=Wt===Sa||Wt===dc||Wt===o0||Wt===Qd||Wt===E2||Wt===T2,tn=Tt.getClearColor(),mn=Tt.getClearAlpha(),kn=tn.r,hn=tn.g,gn=tn.b;an?(g[0]=kn,g[1]=hn,g[2]=gn,g[3]=mn,se.clearBufferuiv(se.COLOR,0,g)):(v[0]=kn,v[1]=hn,v[2]=gn,v[3]=mn,se.clearBufferiv(se.COLOR,0,v))}else Ne|=se.COLOR_BUFFER_BIT}je&&(Ne|=se.DEPTH_BUFFER_BIT),et&&(Ne|=se.STENCIL_BUFFER_BIT),se.clear(Ne)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",qe,!1),t.removeEventListener("webglcontextrestored",kt,!1),t.removeEventListener("webglcontextcreationerror",Lt,!1),ut.dispose(),Zt.dispose(),nt.dispose(),ue.dispose(),Pe.dispose(),Ve.dispose(),Yt.dispose(),Yn.dispose(),st.dispose(),At.dispose(),At.removeEventListener("sessionstart",ls),At.removeEventListener("sessionend",Gi),at&&(at.dispose(),at=null),to.stop()};function qe(ne){ne.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function kt(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const ne=dt.autoReset,je=Se.enabled,et=Se.autoUpdate,Ne=Se.needsUpdate,ot=Se.type;Me(),dt.autoReset=ne,Se.enabled=je,Se.autoUpdate=et,Se.needsUpdate=Ne,Se.type=ot}function Lt(ne){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ne.statusMessage)}function Te(ne){const je=ne.target;je.removeEventListener("dispose",Te),pn(je)}function pn(ne){mi(ne),nt.remove(ne)}function mi(ne){const je=nt.get(ne).programs;je!==void 0&&(je.forEach(function(et){st.releaseProgram(et)}),ne.isShaderMaterial&&st.releaseShaderCache(ne))}this.renderBufferDirect=function(ne,je,et,Ne,ot,Wt){je===null&&(je=rt);const an=ot.isMesh&&ot.matrixWorld.determinant()<0,tn=oa(ne,je,et,Ne,ot);Ie.setMaterial(Ne,an);let mn=et.index,kn=1;Ne.wireframe===!0&&(mn=V.getWireframeAttribute(et),kn=2);const hn=et.drawRange,gn=et.attributes.position;let Wi=hn.start*kn,xi=(hn.start+hn.count)*kn;Wt!==null&&(Wi=Math.max(Wi,Wt.start*kn),xi=Math.min(xi,(Wt.start+Wt.count)*kn)),mn!==null?(Wi=Math.max(Wi,0),xi=Math.min(xi,mn.count)):gn!=null&&(Wi=Math.max(Wi,0),xi=Math.min(xi,gn.count));const Wr=xi-Wi;if(Wr<0||Wr===1/0)return;Yt.setup(ot,Ne,tn,et,mn);let zs,zn=Vt;if(mn!==null&&(zs=U.get(mn),zn=Gt,zn.setIndex(zs)),ot.isMesh)Ne.wireframe===!0?(Ie.setLineWidth(Ne.wireframeLinewidth*tt()),zn.setMode(se.LINES)):zn.setMode(se.TRIANGLES);else if(ot.isLine){let _n=Ne.linewidth;_n===void 0&&(_n=1),Ie.setLineWidth(_n*tt()),ot.isLineSegments?zn.setMode(se.LINES):ot.isLineLoop?zn.setMode(se.LINE_LOOP):zn.setMode(se.LINE_STRIP)}else ot.isPoints?zn.setMode(se.POINTS):ot.isSprite&&zn.setMode(se.TRIANGLES);if(ot.isInstancedMesh)zn.renderInstances(Wi,Wr,ot.count);else if(et.isInstancedBufferGeometry){const _n=et._maxInstanceCount!==void 0?et._maxInstanceCount:1/0,aa=Math.min(et.instanceCount,_n);zn.renderInstances(Wi,Wr,aa)}else zn.render(Wi,Wr)},this.compile=function(ne,je){function et(Ne,ot,Wt){Ne.transparent===!0&&Ne.side===xs&&Ne.forceSinglePass===!1?(Ne.side=wa,Ne.needsUpdate=!0,au(Ne,ot,Wt),Ne.side=Xh,Ne.needsUpdate=!0,au(Ne,ot,Wt),Ne.side=xs):au(Ne,ot,Wt)}_=Zt.get(ne),_.init(),w.push(_),ne.traverseVisible(function(Ne){Ne.isLight&&Ne.layers.test(je.layers)&&(_.pushLight(Ne),Ne.castShadow&&_.pushShadow(Ne))}),_.setupLights(C._useLegacyLights),ne.traverse(function(Ne){const ot=Ne.material;if(ot)if(Array.isArray(ot))for(let Wt=0;Wt<ot.length;Wt++){const an=ot[Wt];et(an,ne,Ne)}else et(ot,ne,Ne)}),w.pop(),_=null};let as=null;function Wn(ne){as&&as(ne)}function ls(){to.stop()}function Gi(){to.start()}const to=new x9;to.setAnimationLoop(Wn),typeof self<"u"&&to.setContext(self),this.setAnimationLoop=function(ne){as=ne,At.setAnimationLoop(ne),ne===null?to.stop():to.start()},At.addEventListener("sessionstart",ls),At.addEventListener("sessionend",Gi),this.render=function(ne,je){if(je!==void 0&&je.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),je.parent===null&&je.matrixWorldAutoUpdate===!0&&je.updateMatrixWorld(),At.enabled===!0&&At.isPresenting===!0&&(At.cameraAutoUpdate===!0&&At.updateCamera(je),je=At.getCamera()),ne.isScene===!0&&ne.onBeforeRender(C,ne,je,R),_=Zt.get(ne,w.length),_.init(),w.push(_),Le.multiplyMatrices(je.projectionMatrix,je.matrixWorldInverse),Xe.setFromProjectionMatrix(Le),vt=this.localClippingEnabled,Be=we.init(this.clippingPlanes,vt),y=ut.get(ne,S.length),y.init(),S.push(y),dl(ne,je,0,C.sortObjects),y.finish(),C.sortObjects===!0&&y.sort(Ee,le),this.info.render.frame++,Be===!0&&we.beginShadows();const et=_.state.shadowsArray;if(Se.render(et,ne,je),Be===!0&&we.endShadows(),this.info.autoReset===!0&&this.info.reset(),Tt.render(y,ne),_.setupLights(C._useLegacyLights),je.isArrayCamera){const Ne=je.cameras;for(let ot=0,Wt=Ne.length;ot<Wt;ot++){const an=Ne[ot];Hl(y,ne,an,an.viewport)}}else Hl(y,ne,je);R!==null&&(me.updateMultisampleRenderTarget(R),me.updateRenderTargetMipmap(R)),ne.isScene===!0&&ne.onAfterRender(C,ne,je),Yt.resetDefaultState(),A=-1,D=null,w.pop(),w.length>0?_=w[w.length-1]:_=null,S.pop(),S.length>0?y=S[S.length-1]:y=null};function dl(ne,je,et,Ne){if(ne.visible===!1)return;if(ne.layers.test(je.layers)){if(ne.isGroup)et=ne.renderOrder;else if(ne.isLOD)ne.autoUpdate===!0&&ne.update(je);else if(ne.isLight)_.pushLight(ne),ne.castShadow&&_.pushShadow(ne);else if(ne.isSprite){if(!ne.frustumCulled||Xe.intersectsSprite(ne)){Ne&&ft.setFromMatrixPosition(ne.matrixWorld).applyMatrix4(Le);const an=Ve.update(ne),tn=ne.material;tn.visible&&y.push(ne,an,tn,et,ft.z,null)}}else if((ne.isMesh||ne.isLine||ne.isPoints)&&(!ne.frustumCulled||Xe.intersectsObject(ne))){const an=Ve.update(ne),tn=ne.material;if(Ne&&(ne.boundingSphere!==void 0?(ne.boundingSphere===null&&ne.computeBoundingSphere(),ft.copy(ne.boundingSphere.center)):(an.boundingSphere===null&&an.computeBoundingSphere(),ft.copy(an.boundingSphere.center)),ft.applyMatrix4(ne.matrixWorld).applyMatrix4(Le)),Array.isArray(tn)){const mn=an.groups;for(let kn=0,hn=mn.length;kn<hn;kn++){const gn=mn[kn],Wi=tn[gn.materialIndex];Wi&&Wi.visible&&y.push(ne,an,Wi,et,ft.z,gn)}}else tn.visible&&y.push(ne,an,tn,et,ft.z,null)}}const Wt=ne.children;for(let an=0,tn=Wt.length;an<tn;an++)dl(Wt[an],je,et,Ne)}function Hl(ne,je,et,Ne){const ot=ne.opaque,Wt=ne.transmissive,an=ne.transparent;_.setupLightsView(et),Be===!0&&we.setGlobalState(C.clippingPlanes,et),Wt.length>0&&Ho(ot,Wt,je,et),Ne&&Ie.viewport(I.copy(Ne)),ot.length>0&&fl(ot,je,et),Wt.length>0&&fl(Wt,je,et),an.length>0&&fl(an,je,et),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function Ho(ne,je,et,Ne){const ot=xe.isWebGL2;at===null&&(at=new Lo(1,1,{generateMipmaps:!0,type:ae.has("EXT_color_buffer_half_float")?Qc:Sa,minFilter:hf,samples:ot?4:0})),C.getDrawingBufferSize(Ot),ot?at.setSize(Ot.x,Ot.y):at.setSize(Ew(Ot.x),Ew(Ot.y));const Wt=C.getRenderTarget();C.setRenderTarget(at),C.getClearColor(Y),F=C.getClearAlpha(),F<1&&C.setClearColor(16777215,.5),C.clear();const an=C.toneMapping;C.toneMapping=qh,fl(ne,et,Ne),me.updateMultisampleRenderTarget(at),me.updateRenderTargetMipmap(at);let tn=!1;for(let mn=0,kn=je.length;mn<kn;mn++){const hn=je[mn],gn=hn.object,Wi=hn.geometry,xi=hn.material,Wr=hn.group;if(xi.side===xs&&gn.layers.test(Ne.layers)){const zs=xi.side;xi.side=wa,xi.needsUpdate=!0,Sc(gn,et,Ne,Wi,xi,Wr),xi.side=zs,xi.needsUpdate=!0,tn=!0}}tn===!0&&(me.updateMultisampleRenderTarget(at),me.updateRenderTargetMipmap(at)),C.setRenderTarget(Wt),C.setClearColor(Y,F),C.toneMapping=an}function fl(ne,je,et){const Ne=je.isScene===!0?je.overrideMaterial:null;for(let ot=0,Wt=ne.length;ot<Wt;ot++){const an=ne[ot],tn=an.object,mn=an.geometry,kn=Ne===null?an.material:Ne,hn=an.group;tn.layers.test(et.layers)&&Sc(tn,je,et,mn,kn,hn)}}function Sc(ne,je,et,Ne,ot,Wt){ne.onBeforeRender(C,je,et,Ne,ot,Wt),ne.modelViewMatrix.multiplyMatrices(et.matrixWorldInverse,ne.matrixWorld),ne.normalMatrix.getNormalMatrix(ne.modelViewMatrix),ot.onBeforeRender(C,je,et,Ne,ne,Wt),ot.transparent===!0&&ot.side===xs&&ot.forceSinglePass===!1?(ot.side=wa,ot.needsUpdate=!0,C.renderBufferDirect(et,je,Ne,ot,ne,Wt),ot.side=Xh,ot.needsUpdate=!0,C.renderBufferDirect(et,je,Ne,ot,ne,Wt),ot.side=xs):C.renderBufferDirect(et,je,Ne,ot,ne,Wt),ne.onAfterRender(C,je,et,Ne,ot,Wt)}function au(ne,je,et){je.isScene!==!0&&(je=rt);const Ne=nt.get(ne),ot=_.state.lights,Wt=_.state.shadowsArray,an=ot.state.version,tn=st.getParameters(ne,ot.state,Wt,je,et),mn=st.getProgramCacheKey(tn);let kn=Ne.programs;Ne.environment=ne.isMeshStandardMaterial?je.environment:null,Ne.fog=je.fog,Ne.envMap=(ne.isMeshStandardMaterial?Pe:ue).get(ne.envMap||Ne.environment),kn===void 0&&(ne.addEventListener("dispose",Te),kn=new Map,Ne.programs=kn);let hn=kn.get(mn);if(hn!==void 0){if(Ne.currentProgram===hn&&Ne.lightsStateVersion===an)return pd(ne,tn),hn}else tn.uniforms=st.getUniforms(ne),ne.onBuild(et,tn,C),ne.onBeforeCompile(tn,C),hn=st.acquireProgram(tn,mn),kn.set(mn,hn),Ne.uniforms=tn.uniforms;const gn=Ne.uniforms;(!ne.isShaderMaterial&&!ne.isRawShaderMaterial||ne.clipping===!0)&&(gn.clippingPlanes=we.uniform),pd(ne,tn),Ne.needsLights=Ms(ne),Ne.lightsStateVersion=an,Ne.needsLights&&(gn.ambientLightColor.value=ot.state.ambient,gn.lightProbe.value=ot.state.probe,gn.directionalLights.value=ot.state.directional,gn.directionalLightShadows.value=ot.state.directionalShadow,gn.spotLights.value=ot.state.spot,gn.spotLightShadows.value=ot.state.spotShadow,gn.rectAreaLights.value=ot.state.rectArea,gn.ltc_1.value=ot.state.rectAreaLTC1,gn.ltc_2.value=ot.state.rectAreaLTC2,gn.pointLights.value=ot.state.point,gn.pointLightShadows.value=ot.state.pointShadow,gn.hemisphereLights.value=ot.state.hemi,gn.directionalShadowMap.value=ot.state.directionalShadowMap,gn.directionalShadowMatrix.value=ot.state.directionalShadowMatrix,gn.spotShadowMap.value=ot.state.spotShadowMap,gn.spotLightMatrix.value=ot.state.spotLightMatrix,gn.spotLightMap.value=ot.state.spotLightMap,gn.pointShadowMap.value=ot.state.pointShadowMap,gn.pointShadowMatrix.value=ot.state.pointShadowMatrix);const Wi=hn.getUniforms(),xi=sw.seqWithValue(Wi.seq,gn);return Ne.currentProgram=hn,Ne.uniformsList=xi,hn}function pd(ne,je){const et=nt.get(ne);et.outputColorSpace=je.outputColorSpace,et.instancing=je.instancing,et.skinning=je.skinning,et.morphTargets=je.morphTargets,et.morphNormals=je.morphNormals,et.morphColors=je.morphColors,et.morphTargetsCount=je.morphTargetsCount,et.numClippingPlanes=je.numClippingPlanes,et.numIntersection=je.numClipIntersection,et.vertexAlphas=je.vertexAlphas,et.vertexTangents=je.vertexTangents,et.toneMapping=je.toneMapping}function oa(ne,je,et,Ne,ot){je.isScene!==!0&&(je=rt),me.resetTextureUnits();const Wt=je.fog,an=Ne.isMeshStandardMaterial?je.environment:null,tn=R===null?C.outputColorSpace:R.isXRRenderTarget===!0?R.texture.colorSpace:eu,mn=(Ne.isMeshStandardMaterial?Pe:ue).get(Ne.envMap||an),kn=Ne.vertexColors===!0&&!!et.attributes.color&&et.attributes.color.itemSize===4,hn=!!et.attributes.tangent&&(!!Ne.normalMap||Ne.anisotropy>0),gn=!!et.morphAttributes.position,Wi=!!et.morphAttributes.normal,xi=!!et.morphAttributes.color;let Wr=qh;Ne.toneMapped&&(R===null||R.isXRRenderTarget===!0)&&(Wr=C.toneMapping);const zs=et.morphAttributes.position||et.morphAttributes.normal||et.morphAttributes.color,zn=zs!==void 0?zs.length:0,_n=nt.get(Ne),aa=_.state.lights;if(Be===!0&&(vt===!0||ne!==D)){const Is=ne===D&&Ne.id===A;we.setState(Ne,ne,Is)}let gr=!1;Ne.version===_n.__version?(_n.needsLights&&_n.lightsStateVersion!==aa.state.version||_n.outputColorSpace!==tn||ot.isInstancedMesh&&_n.instancing===!1||!ot.isInstancedMesh&&_n.instancing===!0||ot.isSkinnedMesh&&_n.skinning===!1||!ot.isSkinnedMesh&&_n.skinning===!0||_n.envMap!==mn||Ne.fog===!0&&_n.fog!==Wt||_n.numClippingPlanes!==void 0&&(_n.numClippingPlanes!==we.numPlanes||_n.numIntersection!==we.numIntersection)||_n.vertexAlphas!==kn||_n.vertexTangents!==hn||_n.morphTargets!==gn||_n.morphNormals!==Wi||_n.morphColors!==xi||_n.toneMapping!==Wr||xe.isWebGL2===!0&&_n.morphTargetsCount!==zn)&&(gr=!0):(gr=!0,_n.__version=Ne.version);let Qi=_n.currentProgram;gr===!0&&(Qi=au(Ne,je,ot));let zr=!1,ql=!1,pl=!1;const er=Qi.getUniforms(),qo=_n.uniforms;if(Ie.useProgram(Qi.program)&&(zr=!0,ql=!0,pl=!0),Ne.id!==A&&(A=Ne.id,ql=!0),zr||D!==ne){if(er.setValue(se,"projectionMatrix",ne.projectionMatrix),xe.logarithmicDepthBuffer&&er.setValue(se,"logDepthBufFC",2/(Math.log(ne.far+1)/Math.LN2)),D!==ne&&(D=ne,ql=!0,pl=!0),Ne.isShaderMaterial||Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshStandardMaterial||Ne.envMap){const Is=er.map.cameraPosition;Is!==void 0&&Is.setValue(se,ft.setFromMatrixPosition(ne.matrixWorld))}(Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshLambertMaterial||Ne.isMeshBasicMaterial||Ne.isMeshStandardMaterial||Ne.isShaderMaterial)&&er.setValue(se,"isOrthographic",ne.isOrthographicCamera===!0),(Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshLambertMaterial||Ne.isMeshBasicMaterial||Ne.isMeshStandardMaterial||Ne.isShaderMaterial||Ne.isShadowMaterial||ot.isSkinnedMesh)&&er.setValue(se,"viewMatrix",ne.matrixWorldInverse)}if(ot.isSkinnedMesh){er.setOptional(se,ot,"bindMatrix"),er.setOptional(se,ot,"bindMatrixInverse");const Is=ot.skeleton;Is&&(xe.floatVertexTextures?(Is.boneTexture===null&&Is.computeBoneTexture(),er.setValue(se,"boneTexture",Is.boneTexture,me),er.setValue(se,"boneTextureSize",Is.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const ml=et.morphAttributes;if((ml.position!==void 0||ml.normal!==void 0||ml.color!==void 0&&xe.isWebGL2===!0)&&zt.update(ot,et,Qi),(ql||_n.receiveShadow!==ot.receiveShadow)&&(_n.receiveShadow=ot.receiveShadow,er.setValue(se,"receiveShadow",ot.receiveShadow)),Ne.isMeshGouraudMaterial&&Ne.envMap!==null&&(qo.envMap.value=mn,qo.flipEnvMap.value=mn.isCubeTexture&&mn.isRenderTargetTexture===!1?-1:1),ql&&(er.setValue(se,"toneMappingExposure",C.toneMappingExposure),_n.needsLights&&lu(qo,pl),Wt&&Ne.fog===!0&&ve.refreshFogUniforms(qo,Wt),ve.refreshMaterialUniforms(qo,Ne,J,ee,at),sw.upload(se,_n.uniformsList,qo,me)),Ne.isShaderMaterial&&Ne.uniformsNeedUpdate===!0&&(sw.upload(se,_n.uniformsList,qo,me),Ne.uniformsNeedUpdate=!1),Ne.isSpriteMaterial&&er.setValue(se,"center",ot.center),er.setValue(se,"modelViewMatrix",ot.modelViewMatrix),er.setValue(se,"normalMatrix",ot.normalMatrix),er.setValue(se,"modelMatrix",ot.matrixWorld),Ne.isShaderMaterial||Ne.isRawShaderMaterial){const Is=Ne.uniformsGroups;for(let Mc=0,ih=Is.length;Mc<ih;Mc++)if(xe.isWebGL2){const Gl=Is[Mc];Yn.update(Gl,Qi),Yn.bind(Gl,Qi)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Qi}function lu(ne,je){ne.ambientLightColor.needsUpdate=je,ne.lightProbe.needsUpdate=je,ne.directionalLights.needsUpdate=je,ne.directionalLightShadows.needsUpdate=je,ne.pointLights.needsUpdate=je,ne.pointLightShadows.needsUpdate=je,ne.spotLights.needsUpdate=je,ne.spotLightShadows.needsUpdate=je,ne.rectAreaLights.needsUpdate=je,ne.hemisphereLights.needsUpdate=je}function Ms(ne){return ne.isMeshLambertMaterial||ne.isMeshToonMaterial||ne.isMeshPhongMaterial||ne.isMeshStandardMaterial||ne.isShadowMaterial||ne.isShaderMaterial&&ne.lights===!0}this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(ne,je,et){nt.get(ne.texture).__webglTexture=je,nt.get(ne.depthTexture).__webglTexture=et;const Ne=nt.get(ne);Ne.__hasExternalTextures=!0,Ne.__hasExternalTextures&&(Ne.__autoAllocateDepthBuffer=et===void 0,Ne.__autoAllocateDepthBuffer||ae.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ne.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ne,je){const et=nt.get(ne);et.__webglFramebuffer=je,et.__useDefaultFramebuffer=je===void 0},this.setRenderTarget=function(ne,je=0,et=0){R=ne,k=je,O=et;let Ne=!0,ot=null,Wt=!1,an=!1;if(ne){const mn=nt.get(ne);mn.__useDefaultFramebuffer!==void 0?(Ie.bindFramebuffer(se.FRAMEBUFFER,null),Ne=!1):mn.__webglFramebuffer===void 0?me.setupRenderTarget(ne):mn.__hasExternalTextures&&me.rebindTextures(ne,nt.get(ne.texture).__webglTexture,nt.get(ne.depthTexture).__webglTexture);const kn=ne.texture;(kn.isData3DTexture||kn.isDataArrayTexture||kn.isCompressedArrayTexture)&&(an=!0);const hn=nt.get(ne).__webglFramebuffer;ne.isWebGLCubeRenderTarget?(ot=hn[je],Wt=!0):xe.isWebGL2&&ne.samples>0&&me.useMultisampledRTT(ne)===!1?ot=nt.get(ne).__webglMultisampledFramebuffer:ot=hn,I.copy(ne.viewport),q.copy(ne.scissor),j=ne.scissorTest}else I.copy(ie).multiplyScalar(J).floor(),q.copy(be).multiplyScalar(J).floor(),j=Je;if(Ie.bindFramebuffer(se.FRAMEBUFFER,ot)&&xe.drawBuffers&&Ne&&Ie.drawBuffers(ne,ot),Ie.viewport(I),Ie.scissor(q),Ie.setScissorTest(j),Wt){const mn=nt.get(ne.texture);se.framebufferTexture2D(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_CUBE_MAP_POSITIVE_X+je,mn.__webglTexture,et)}else if(an){const mn=nt.get(ne.texture),kn=je||0;se.framebufferTextureLayer(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,mn.__webglTexture,et||0,kn)}A=-1},this.readRenderTargetPixels=function(ne,je,et,Ne,ot,Wt,an){if(!(ne&&ne.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let tn=nt.get(ne).__webglFramebuffer;if(ne.isWebGLCubeRenderTarget&&an!==void 0&&(tn=tn[an]),tn){Ie.bindFramebuffer(se.FRAMEBUFFER,tn);try{const mn=ne.texture,kn=mn.format,hn=mn.type;if(kn!==Fo&&Dt.convert(kn)!==se.getParameter(se.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const gn=hn===Qc&&(ae.has("EXT_color_buffer_half_float")||xe.isWebGL2&&ae.has("EXT_color_buffer_float"));if(hn!==Sa&&Dt.convert(hn)!==se.getParameter(se.IMPLEMENTATION_COLOR_READ_TYPE)&&!(hn===Ks&&(xe.isWebGL2||ae.has("OES_texture_float")||ae.has("WEBGL_color_buffer_float")))&&!gn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}je>=0&&je<=ne.width-Ne&&et>=0&&et<=ne.height-ot&&se.readPixels(je,et,Ne,ot,Dt.convert(kn),Dt.convert(hn),Wt)}finally{const mn=R!==null?nt.get(R).__webglFramebuffer:null;Ie.bindFramebuffer(se.FRAMEBUFFER,mn)}}},this.copyFramebufferToTexture=function(ne,je,et=0){const Ne=Math.pow(2,-et),ot=Math.floor(je.image.width*Ne),Wt=Math.floor(je.image.height*Ne);me.setTexture2D(je,0),se.copyTexSubImage2D(se.TEXTURE_2D,et,0,0,ne.x,ne.y,ot,Wt),Ie.unbindTexture()},this.copyTextureToTexture=function(ne,je,et,Ne=0){const ot=je.image.width,Wt=je.image.height,an=Dt.convert(et.format),tn=Dt.convert(et.type);me.setTexture2D(et,0),se.pixelStorei(se.UNPACK_FLIP_Y_WEBGL,et.flipY),se.pixelStorei(se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,et.premultiplyAlpha),se.pixelStorei(se.UNPACK_ALIGNMENT,et.unpackAlignment),je.isDataTexture?se.texSubImage2D(se.TEXTURE_2D,Ne,ne.x,ne.y,ot,Wt,an,tn,je.image.data):je.isCompressedTexture?se.compressedTexSubImage2D(se.TEXTURE_2D,Ne,ne.x,ne.y,je.mipmaps[0].width,je.mipmaps[0].height,an,je.mipmaps[0].data):se.texSubImage2D(se.TEXTURE_2D,Ne,ne.x,ne.y,an,tn,je.image),Ne===0&&et.generateMipmaps&&se.generateMipmap(se.TEXTURE_2D),Ie.unbindTexture()},this.copyTextureToTexture3D=function(ne,je,et,Ne,ot=0){if(C.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Wt=ne.max.x-ne.min.x+1,an=ne.max.y-ne.min.y+1,tn=ne.max.z-ne.min.z+1,mn=Dt.convert(Ne.format),kn=Dt.convert(Ne.type);let hn;if(Ne.isData3DTexture)me.setTexture3D(Ne,0),hn=se.TEXTURE_3D;else if(Ne.isDataArrayTexture)me.setTexture2DArray(Ne,0),hn=se.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}se.pixelStorei(se.UNPACK_FLIP_Y_WEBGL,Ne.flipY),se.pixelStorei(se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ne.premultiplyAlpha),se.pixelStorei(se.UNPACK_ALIGNMENT,Ne.unpackAlignment);const gn=se.getParameter(se.UNPACK_ROW_LENGTH),Wi=se.getParameter(se.UNPACK_IMAGE_HEIGHT),xi=se.getParameter(se.UNPACK_SKIP_PIXELS),Wr=se.getParameter(se.UNPACK_SKIP_ROWS),zs=se.getParameter(se.UNPACK_SKIP_IMAGES),zn=et.isCompressedTexture?et.mipmaps[0]:et.image;se.pixelStorei(se.UNPACK_ROW_LENGTH,zn.width),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,zn.height),se.pixelStorei(se.UNPACK_SKIP_PIXELS,ne.min.x),se.pixelStorei(se.UNPACK_SKIP_ROWS,ne.min.y),se.pixelStorei(se.UNPACK_SKIP_IMAGES,ne.min.z),et.isDataTexture||et.isData3DTexture?se.texSubImage3D(hn,ot,je.x,je.y,je.z,Wt,an,tn,mn,kn,zn.data):et.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),se.compressedTexSubImage3D(hn,ot,je.x,je.y,je.z,Wt,an,tn,mn,zn.data)):se.texSubImage3D(hn,ot,je.x,je.y,je.z,Wt,an,tn,mn,kn,zn),se.pixelStorei(se.UNPACK_ROW_LENGTH,gn),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,Wi),se.pixelStorei(se.UNPACK_SKIP_PIXELS,xi),se.pixelStorei(se.UNPACK_SKIP_ROWS,Wr),se.pixelStorei(se.UNPACK_SKIP_IMAGES,zs),ot===0&&Ne.generateMipmaps&&se.generateMipmap(hn),Ie.unbindTexture()},this.initTexture=function(ne){ne.isCubeTexture?me.setTextureCube(ne,0):ne.isData3DTexture?me.setTexture3D(ne,0):ne.isDataArrayTexture||ne.isCompressedArrayTexture?me.setTexture2DArray(ne,0):me.setTexture2D(ne,0),Ie.unbindTexture()},this.resetState=function(){k=0,O=0,R=null,Ie.reset(),Yt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Pu}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Zn?Gh:L1}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Gh?Zn:eu}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class fA extends dA{}fA.prototype.isWebGL1Renderer=!0;class z2{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new qt(e),this.density=t}clone(){return new z2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class I2{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new qt(e),this.near=t,this.far=n}clone(){return new I2(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}let Eg=class extends Ni{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}};class N2{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=D1,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ul()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ul()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ul()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ga=new oe;class Yp{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ga.fromBufferAttribute(this,t),ga.applyMatrix4(e),this.setXYZ(t,ga.x,ga.y,ga.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ga.fromBufferAttribute(this,t),ga.applyNormalMatrix(e),this.setXYZ(t,ga.x,ga.y,ga.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ga.fromBufferAttribute(this,t),ga.transformDirection(e),this.setXYZ(t,ga.x,ga.y,ga.z);return this}setX(e,t){return this.normalized&&(t=hi(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=hi(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=hi(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=hi(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Nl(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Nl(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Nl(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Nl(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=hi(t,this.array),n=hi(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=hi(t,this.array),n=hi(n,this.array),r=hi(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=hi(t,this.array),n=hi(n,this.array),r=hi(r,this.array),s=hi(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Un(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Yp(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class pA extends na{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new qt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let sm;const Av=new oe,om=new oe,am=new oe,lm=new ht,Pv=new ht,P9=new qn,Iy=new oe,kv=new oe,Ny=new oe,D7=new ht,rM=new ht,z7=new ht;let k9=class extends Ni{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",sm===void 0){sm=new Qn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new N2(t,5);sm.setIndex([0,1,2,0,2,3]),sm.setAttribute("position",new Yp(n,3,0,!1)),sm.setAttribute("uv",new Yp(n,2,3,!1))}this.geometry=sm,this.material=e!==void 0?e:new pA,this.center=new ht(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),om.setFromMatrixScale(this.matrixWorld),P9.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),am.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&om.multiplyScalar(-am.z);const n=this.material.rotation;let r,s;n!==0&&(s=Math.cos(n),r=Math.sin(n));const o=this.center;Uy(Iy.set(-.5,-.5,0),am,o,om,r,s),Uy(kv.set(.5,-.5,0),am,o,om,r,s),Uy(Ny.set(.5,.5,0),am,o,om,r,s),D7.set(0,0),rM.set(1,0),z7.set(1,1);let a=e.ray.intersectTriangle(Iy,kv,Ny,!1,Av);if(a===null&&(Uy(kv.set(-.5,.5,0),am,o,om,r,s),rM.set(0,1),a=e.ray.intersectTriangle(Iy,Ny,kv,!1,Av),a===null))return;const l=e.ray.origin.distanceTo(Av);l<e.near||l>e.far||t.push({distance:l,point:Av.clone(),uv:Ga.getInterpolation(Av,Iy,kv,Ny,D7,rM,z7,new ht),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};function Uy(i,e,t,n,r,s){lm.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(Pv.x=s*lm.x-r*lm.y,Pv.y=r*lm.x+s*lm.y):Pv.copy(lm),i.copy(e),i.x+=Pv.x,i.y+=Pv.y,i.applyMatrix4(P9)}const Fy=new oe,I7=new oe;class R9 extends Ni{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Fy.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Fy);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Fy.setFromMatrixPosition(e.matrixWorld),I7.setFromMatrixPosition(this.matrixWorld);const n=Fy.distanceTo(I7)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),n>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const N7=new oe,U7=new Li,F7=new Li,GQ=new oe,B7=new qn,cm=new oe,sM=new nu,V7=new qn,oM=new Sg;class O9 extends rr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new qn,this.bindMatrixInverse=new qn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Xu),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)cm.fromBufferAttribute(t,n),this.applyBoneTransform(n,cm),this.boundingBox.expandByPoint(cm)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new nu),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)cm.fromBufferAttribute(t,n),this.applyBoneTransform(n,cm),this.boundingSphere.expandByPoint(cm)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),sM.copy(this.boundingSphere),sM.applyMatrix4(r),e.ray.intersectsSphere(sM)!==!1&&(V7.copy(r).invert(),oM.copy(e.ray).applyMatrix4(V7),!(this.boundingBox!==null&&oM.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,oM)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Li,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;U7.fromBufferAttribute(r.attributes.skinIndex,e),F7.fromBufferAttribute(r.attributes.skinWeight,e),N7.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=F7.getComponent(s);if(o!==0){const a=U7.getComponent(s);B7.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(GQ.copy(N7).applyMatrix4(B7),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class mA extends Ni{constructor(){super(),this.isBone=!0,this.type="Bone"}}let qm=class extends qr{constructor(e=null,t=1,n=1,r,s,o,a,l,c=Oi,u=Oi,h,d){super(null,o,a,l,c,u,r,s,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};const H7=new qn,WQ=new qn;class U2{constructor(e=[],t=[]){this.uuid=Ul(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new qn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new qn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:WQ;H7.multiplyMatrices(a,t[s]),H7.toArray(n,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new U2(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=u9(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new qm(t,e,e,Fo,Ks);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new mA),this.bones.push(o),this.boneInverses.push(new qn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}class ng extends Un{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const um=new qn,q7=new qn,By=[],G7=new Xu,jQ=new qn,Rv=new rr,Ov=new nu;class L9 extends rr{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ng(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,jQ)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Xu),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,um),G7.copy(e.boundingBox).applyMatrix4(um),this.boundingBox.union(G7)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new nu),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,um),Ov.copy(e.boundingSphere).applyMatrix4(um),this.boundingSphere.union(Ov)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Rv.geometry=this.geometry,Rv.material=this.material,Rv.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ov.copy(this.boundingSphere),Ov.applyMatrix4(n),e.ray.intersectsSphere(Ov)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,um),q7.multiplyMatrices(n,um),Rv.matrixWorld=q7,Rv.raycast(e,By);for(let o=0,a=By.length;o<a;o++){const l=By[o];l.instanceId=s,l.object=this,t.push(l)}By.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ng(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ma extends na{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new qt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const W7=new oe,j7=new oe,$7=new qn,aM=new Sg,Vy=new nu;let df=class extends Ni{constructor(e=new Qn,t=new Ma){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)W7.fromBufferAttribute(t,r-1),j7.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=W7.distanceTo(j7);e.setAttribute("lineDistance",new en(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Vy.copy(n.boundingSphere),Vy.applyMatrix4(r),Vy.radius+=s,e.ray.intersectsSphere(Vy)===!1)return;$7.copy(r).invert(),aM.copy(e.ray).applyMatrix4($7);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new oe,u=new oe,h=new oe,d=new oe,f=this.isLineSegments?2:1,g=n.index,y=n.attributes.position;if(g!==null){const _=Math.max(0,o.start),S=Math.min(g.count,o.start+o.count);for(let w=_,C=S-1;w<C;w+=f){const E=g.getX(w),k=g.getX(w+1);if(c.fromBufferAttribute(y,E),u.fromBufferAttribute(y,k),aM.distanceSqToSegment(c,u,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const R=e.ray.origin.distanceTo(d);R<e.near||R>e.far||t.push({distance:R,point:h.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}else{const _=Math.max(0,o.start),S=Math.min(y.count,o.start+o.count);for(let w=_,C=S-1;w<C;w+=f){if(c.fromBufferAttribute(y,w),u.fromBufferAttribute(y,w+1),aM.distanceSqToSegment(c,u,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const k=e.ray.origin.distanceTo(d);k<e.near||k>e.far||t.push({distance:k,point:h.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};const X7=new oe,Y7=new oe;class Ku extends df{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)X7.fromBufferAttribute(t,r),Y7.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+X7.distanceTo(Y7);e.setAttribute("lineDistance",new en(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class D9 extends df{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class gA extends na{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new qt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const K7=new qn,wE=new Sg,Hy=new nu,qy=new oe;let z9=class extends Ni{constructor(e=new Qn,t=new gA){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Hy.copy(n.boundingSphere),Hy.applyMatrix4(r),Hy.radius+=s,e.ray.intersectsSphere(Hy)===!1)return;K7.copy(r).invert(),wE.copy(e.ray).applyMatrix4(K7);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=n.index,h=n.attributes.position;if(c!==null){const d=Math.max(0,o.start),f=Math.min(c.count,o.start+o.count);for(let g=d,v=f;g<v;g++){const y=c.getX(g);qy.fromBufferAttribute(h,y),Z7(qy,y,l,r,e,t,this)}}else{const d=Math.max(0,o.start),f=Math.min(h.count,o.start+o.count);for(let g=d,v=f;g<v;g++)qy.fromBufferAttribute(h,g),Z7(qy,g,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function Z7(i,e,t,n,r,s,o){const a=wE.distanceSqToPoint(i);if(a<t){const l=new oe;wE.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class $Q extends qr{constructor(e,t,n,r,s,o,a,l,c){super(e,t,n,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Hr,this.magFilter=s!==void 0?s:Hr,this.generateMipmaps=!1;const u=this;function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class XQ extends qr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Oi,this.minFilter=Oi,this.generateMipmaps=!1,this.needsUpdate=!0}}class F2 extends qr{constructor(e,t,n,r,s,o,a,l,c,u,h,d){super(null,o,a,l,c,u,r,s,h,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class YQ extends F2{constructor(e,t,n,r,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=lo}}class KQ extends F2{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Yh),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class ZQ extends qr{constructor(e,t,n,r,s,o,a,l,c){super(e,t,n,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class iu{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=n[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,n[r]===o)return r/(s-1);const u=n[r],d=n[r+1]-u,f=(o-u)/d;return(r+f)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new ht:new oe);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new oe,r=[],s=[],o=[],a=new oe,l=new qn;for(let f=0;f<=e;f++){const g=f/e;r[f]=this.getTangentAt(g,new oe)}s[0]=new oe,o[0]=new oe;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),h=Math.abs(r[0].y),d=Math.abs(r[0].z);u<=c&&(c=u,n.set(1,0,0)),h<=c&&(c=h,n.set(0,1,0)),d<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(bs(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,g))}o[f].crossVectors(r[f],s[f])}if(t===!0){let f=Math.acos(bs(s[0].dot(s[e]),-1,1));f/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(r[g],f*g)),o[g].crossVectors(r[g],s[g])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class B2 extends iu{constructor(e=0,t=0,n=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const n=t||new ht,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=l-this.aX,f=c-this.aY;l=d*u-f*h+this.aX,c=d*h+f*u+this.aY}return n.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class I9 extends B2{constructor(e,t,n,r,s,o){super(e,t,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function vA(){let i=0,e=0,t=0,n=0;function r(s,o,a,l){i=s,e=a,t=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,h){let d=(o-s)/c-(a-s)/(c+u)+(a-o)/u,f=(a-o)/u-(l-o)/(u+h)+(l-a)/h;d*=u,f*=u,r(o,a,d,f)},calc:function(s){const o=s*s,a=o*s;return i+e*s+t*o+n*a}}}const Gy=new oe,lM=new vA,cM=new vA,uM=new vA;class N9 extends iu{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new oe){const n=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(Gy.subVectors(r[0],r[1]).add(r[0]),c=Gy);const h=r[a%s],d=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(Gy.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=Gy),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(h),f),v=Math.pow(h.distanceToSquared(d),f),y=Math.pow(d.distanceToSquared(u),f);v<1e-4&&(v=1),g<1e-4&&(g=v),y<1e-4&&(y=v),lM.initNonuniformCatmullRom(c.x,h.x,d.x,u.x,g,v,y),cM.initNonuniformCatmullRom(c.y,h.y,d.y,u.y,g,v,y),uM.initNonuniformCatmullRom(c.z,h.z,d.z,u.z,g,v,y)}else this.curveType==="catmullrom"&&(lM.initCatmullRom(c.x,h.x,d.x,u.x,this.tension),cM.initCatmullRom(c.y,h.y,d.y,u.y,this.tension),uM.initCatmullRom(c.z,h.z,d.z,u.z,this.tension));return n.set(lM.calc(l),cM.calc(l),uM.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new oe().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function J7(i,e,t,n,r){const s=(n-e)*.5,o=(r-t)*.5,a=i*i,l=i*a;return(2*t-2*n+s+o)*l+(-3*t+3*n-2*s-o)*a+s*i+t}function JQ(i,e){const t=1-i;return t*t*e}function QQ(i,e){return 2*(1-i)*i*e}function eee(i,e){return i*i*e}function _1(i,e,t,n){return JQ(i,e)+QQ(i,t)+eee(i,n)}function tee(i,e){const t=1-i;return t*t*t*e}function nee(i,e){const t=1-i;return 3*t*t*i*e}function iee(i,e){return 3*(1-i)*i*i*e}function ree(i,e){return i*i*i*e}function b1(i,e,t,n,r){return tee(i,e)+nee(i,t)+iee(i,n)+ree(i,r)}class _A extends iu{constructor(e=new ht,t=new ht,n=new ht,r=new ht){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new ht){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(b1(e,r.x,s.x,o.x,a.x),b1(e,r.y,s.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class U9 extends iu{constructor(e=new oe,t=new oe,n=new oe,r=new oe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new oe){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(b1(e,r.x,s.x,o.x,a.x),b1(e,r.y,s.y,o.y,a.y),b1(e,r.z,s.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class V2 extends iu{constructor(e=new ht,t=new ht){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ht){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ht){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class F9 extends iu{constructor(e=new oe,t=new oe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new oe){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new oe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class bA extends iu{constructor(e=new ht,t=new ht,n=new ht){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ht){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(_1(e,r.x,s.x,o.x),_1(e,r.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class yA extends iu{constructor(e=new oe,t=new oe,n=new oe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new oe){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(_1(e,r.x,s.x,o.x),_1(e,r.y,s.y,o.y),_1(e,r.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class xA extends iu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ht){const n=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return n.set(J7(a,l.x,c.x,u.x,h.x),J7(a,l.y,c.y,u.y,h.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new ht().fromArray(r))}return this}}var wA=Object.freeze({__proto__:null,ArcCurve:I9,CatmullRomCurve3:N9,CubicBezierCurve:_A,CubicBezierCurve3:U9,EllipseCurve:B2,LineCurve:V2,LineCurve3:F9,QuadraticBezierCurve:bA,QuadraticBezierCurve3:yA,SplineCurve:xA});class B9 extends iu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new V2(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];n&&n.equals(u)||(t.push(u),n=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new wA[r.type]().fromJSON(r))}return this}}class N1 extends B9{constructor(e){super(),this.type="Path",this.currentPoint=new ht,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new V2(this.currentPoint.clone(),new ht(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new bA(this.currentPoint.clone(),new ht(e,t),new ht(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,o){const a=new _A(this.currentPoint.clone(),new ht(e,t),new ht(n,r),new ht(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new xA(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,n,r,s,o),this}absarc(e,t,n,r,s,o){return this.absellipse(e,t,n,n,r,s,o),this}ellipse(e,t,n,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,n,r,s,o,a,l),this}absellipse(e,t,n,r,s,o,a,l){const c=new B2(e,t,n,r,s,o,a,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class x_ extends Qn{constructor(e=[new ht(0,-.5),new ht(.5,0),new ht(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=bs(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,h=new oe,d=new ht,f=new oe,g=new oe,v=new oe;let y=0,_=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:y=e[S+1].x-e[S].x,_=e[S+1].y-e[S].y,f.x=_*1,f.y=-y,f.z=_*0,v.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:y=e[S+1].x-e[S].x,_=e[S+1].y-e[S].y,f.x=_*1,f.y=-y,f.z=_*0,g.copy(f),f.x+=v.x,f.y+=v.y,f.z+=v.z,f.normalize(),l.push(f.x,f.y,f.z),v.copy(g)}for(let S=0;S<=t;S++){const w=n+S*u*r,C=Math.sin(w),E=Math.cos(w);for(let k=0;k<=e.length-1;k++){h.x=e[k].x*C,h.y=e[k].y,h.z=e[k].x*E,o.push(h.x,h.y,h.z),d.x=S/t,d.y=k/(e.length-1),a.push(d.x,d.y);const O=l[3*k+0]*C,R=l[3*k+1],A=l[3*k+0]*E;c.push(O,R,A)}}for(let S=0;S<t;S++)for(let w=0;w<e.length-1;w++){const C=w+S*e.length,E=C,k=C+e.length,O=C+e.length+1,R=C+1;s.push(E,k,R),s.push(O,R,k)}this.setIndex(s),this.setAttribute("position",new en(o,3)),this.setAttribute("uv",new en(a,2)),this.setAttribute("normal",new en(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new x_(e.points,e.segments,e.phiStart,e.phiLength)}}class H2 extends x_{constructor(e=1,t=1,n=4,r=8){const s=new N1;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new H2(e.radius,e.length,e.capSegments,e.radialSegments)}}class q2 extends Qn{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new oe,u=new ht;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,d=3;h<=t;h++,d+=3){const f=n+h/t*r;c.x=e*Math.cos(f),c.y=e*Math.sin(f),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[d]/e+1)/2,u.y=(o[d+1]/e+1)/2,l.push(u.x,u.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new en(o,3)),this.setAttribute("normal",new en(a,3)),this.setAttribute("uv",new en(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new q2(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Tg extends Qn{constructor(e=1,t=1,n=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],h=[],d=[],f=[];let g=0;const v=[],y=n/2;let _=0;S(),o===!1&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(u),this.setAttribute("position",new en(h,3)),this.setAttribute("normal",new en(d,3)),this.setAttribute("uv",new en(f,2));function S(){const C=new oe,E=new oe;let k=0;const O=(t-e)/n;for(let R=0;R<=s;R++){const A=[],D=R/s,I=D*(t-e)+e;for(let q=0;q<=r;q++){const j=q/r,Y=j*l+a,F=Math.sin(Y),re=Math.cos(Y);E.x=I*F,E.y=-D*n+y,E.z=I*re,h.push(E.x,E.y,E.z),C.set(F,O,re).normalize(),d.push(C.x,C.y,C.z),f.push(j,1-D),A.push(g++)}v.push(A)}for(let R=0;R<r;R++)for(let A=0;A<s;A++){const D=v[A][R],I=v[A+1][R],q=v[A+1][R+1],j=v[A][R+1];u.push(D,I,j),u.push(I,q,j),k+=6}c.addGroup(_,k,0),_+=k}function w(C){const E=g,k=new ht,O=new oe;let R=0;const A=C===!0?e:t,D=C===!0?1:-1;for(let q=1;q<=r;q++)h.push(0,y*D,0),d.push(0,D,0),f.push(.5,.5),g++;const I=g;for(let q=0;q<=r;q++){const Y=q/r*l+a,F=Math.cos(Y),re=Math.sin(Y);O.x=A*re,O.y=y*D,O.z=A*F,h.push(O.x,O.y,O.z),d.push(0,D,0),k.x=F*.5+.5,k.y=re*.5*D+.5,f.push(k.x,k.y),g++}for(let q=0;q<r;q++){const j=E+q,Y=I+q;C===!0?u.push(Y,Y+1,j):u.push(Y+1,Y,j),R+=3}c.addGroup(_,R,C===!0?1:2),_+=R}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tg(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class G2 extends Tg{constructor(e=1,t=1,n=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,n,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new G2(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Tf extends Qn{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],o=[];a(r),c(n),u(),this.setAttribute("position",new en(s,3)),this.setAttribute("normal",new en(s.slice(),3)),this.setAttribute("uv",new en(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const w=new oe,C=new oe,E=new oe;for(let k=0;k<t.length;k+=3)f(t[k+0],w),f(t[k+1],C),f(t[k+2],E),l(w,C,E,S)}function l(S,w,C,E){const k=E+1,O=[];for(let R=0;R<=k;R++){O[R]=[];const A=S.clone().lerp(C,R/k),D=w.clone().lerp(C,R/k),I=k-R;for(let q=0;q<=I;q++)q===0&&R===k?O[R][q]=A:O[R][q]=A.clone().lerp(D,q/I)}for(let R=0;R<k;R++)for(let A=0;A<2*(k-R)-1;A++){const D=Math.floor(A/2);A%2===0?(d(O[R][D+1]),d(O[R+1][D]),d(O[R][D])):(d(O[R][D+1]),d(O[R+1][D+1]),d(O[R+1][D]))}}function c(S){const w=new oe;for(let C=0;C<s.length;C+=3)w.x=s[C+0],w.y=s[C+1],w.z=s[C+2],w.normalize().multiplyScalar(S),s[C+0]=w.x,s[C+1]=w.y,s[C+2]=w.z}function u(){const S=new oe;for(let w=0;w<s.length;w+=3){S.x=s[w+0],S.y=s[w+1],S.z=s[w+2];const C=y(S)/2/Math.PI+.5,E=_(S)/Math.PI+.5;o.push(C,1-E)}g(),h()}function h(){for(let S=0;S<o.length;S+=6){const w=o[S+0],C=o[S+2],E=o[S+4],k=Math.max(w,C,E),O=Math.min(w,C,E);k>.9&&O<.1&&(w<.2&&(o[S+0]+=1),C<.2&&(o[S+2]+=1),E<.2&&(o[S+4]+=1))}}function d(S){s.push(S.x,S.y,S.z)}function f(S,w){const C=S*3;w.x=e[C+0],w.y=e[C+1],w.z=e[C+2]}function g(){const S=new oe,w=new oe,C=new oe,E=new oe,k=new ht,O=new ht,R=new ht;for(let A=0,D=0;A<s.length;A+=9,D+=6){S.set(s[A+0],s[A+1],s[A+2]),w.set(s[A+3],s[A+4],s[A+5]),C.set(s[A+6],s[A+7],s[A+8]),k.set(o[D+0],o[D+1]),O.set(o[D+2],o[D+3]),R.set(o[D+4],o[D+5]),E.copy(S).add(w).add(C).divideScalar(3);const I=y(E);v(k,D+0,S,I),v(O,D+2,w,I),v(R,D+4,C,I)}}function v(S,w,C,E){E<0&&S.x===1&&(o[w]=S.x-1),C.x===0&&C.z===0&&(o[w]=E/2/Math.PI+.5)}function y(S){return Math.atan2(S.z,-S.x)}function _(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tf(e.vertices,e.indices,e.radius,e.details)}}class W2 extends Tf{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new W2(e.radius,e.detail)}}const Wy=new oe,jy=new oe,hM=new oe,$y=new Ga;class V9 extends Qn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Up*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],h=new Array(3),d={},f=[];for(let g=0;g<l;g+=3){o?(c[0]=o.getX(g),c[1]=o.getX(g+1),c[2]=o.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:v,b:y,c:_}=$y;if(v.fromBufferAttribute(a,c[0]),y.fromBufferAttribute(a,c[1]),_.fromBufferAttribute(a,c[2]),$y.getNormal(hM),h[0]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,h[1]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,h[2]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let S=0;S<3;S++){const w=(S+1)%3,C=h[S],E=h[w],k=$y[u[S]],O=$y[u[w]],R=`${C}_${E}`,A=`${E}_${C}`;A in d&&d[A]?(hM.dot(d[A].normal)<=s&&(f.push(k.x,k.y,k.z),f.push(O.x,O.y,O.z)),d[A]=null):R in d||(d[R]={index0:c[S],index1:c[w],normal:hM.clone()})}}for(const g in d)if(d[g]){const{index0:v,index1:y}=d[g];Wy.fromBufferAttribute(a,v),jy.fromBufferAttribute(a,y),f.push(Wy.x,Wy.y,Wy.z),f.push(jy.x,jy.y,jy.z)}this.setAttribute("position",new en(f,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Bp extends N1{constructor(e){super(e),this.uuid=Ul(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new N1().fromJSON(r))}return this}}const see={triangulate:function(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=H9(i,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,h,d,f;if(n&&(s=uee(i,e,s,t)),i.length>80*t){a=c=i[0],l=u=i[1];for(let g=t;g<r;g+=t)h=i[g],d=i[g+1],h<a&&(a=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);f=Math.max(c-a,u-l),f=f!==0?32767/f:0}return U1(s,o,t,a,l,f,0),o}};function H9(i,e,t,n,r){let s,o;if(r===xee(i,e,t,n)>0)for(s=e;s<t;s+=n)o=Q7(s,i[s],i[s+1],o);else for(s=t-n;s>=e;s-=n)o=Q7(s,i[s],i[s+1],o);return o&&j2(o,o.next)&&(B1(o),o=o.next),o}function Kp(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(j2(t,t.next)||ts(t.prev,t,t.next)===0)){if(B1(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function U1(i,e,t,n,r,s,o){if(!i)return;!o&&s&&mee(i,n,r,s);let a=i,l,c;for(;i.prev!==i.next;){if(l=i.prev,c=i.next,s?aee(i,n,r,s):oee(i)){e.push(l.i/t|0),e.push(i.i/t|0),e.push(c.i/t|0),B1(i),i=c.next,a=c.next;continue}if(i=c,i===a){o?o===1?(i=lee(Kp(i),e,t),U1(i,e,t,n,r,s,2)):o===2&&cee(i,e,t,n,r,s):U1(Kp(i),e,t,n,r,s,1);break}}}function oee(i){const e=i.prev,t=i,n=i.next;if(ts(e,t,n)>=0)return!1;const r=e.x,s=t.x,o=n.x,a=e.y,l=t.y,c=n.y,u=r<s?r<o?r:o:s<o?s:o,h=a<l?a<c?a:c:l<c?l:c,d=r>s?r>o?r:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c;let g=n.next;for(;g!==e;){if(g.x>=u&&g.x<=d&&g.y>=h&&g.y<=f&&km(r,a,s,l,o,c,g.x,g.y)&&ts(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function aee(i,e,t,n){const r=i.prev,s=i,o=i.next;if(ts(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,u=r.y,h=s.y,d=o.y,f=a<l?a<c?a:c:l<c?l:c,g=u<h?u<d?u:d:h<d?h:d,v=a>l?a>c?a:c:l>c?l:c,y=u>h?u>d?u:d:h>d?h:d,_=SE(f,g,e,t,n),S=SE(v,y,e,t,n);let w=i.prevZ,C=i.nextZ;for(;w&&w.z>=_&&C&&C.z<=S;){if(w.x>=f&&w.x<=v&&w.y>=g&&w.y<=y&&w!==r&&w!==o&&km(a,u,l,h,c,d,w.x,w.y)&&ts(w.prev,w,w.next)>=0||(w=w.prevZ,C.x>=f&&C.x<=v&&C.y>=g&&C.y<=y&&C!==r&&C!==o&&km(a,u,l,h,c,d,C.x,C.y)&&ts(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;w&&w.z>=_;){if(w.x>=f&&w.x<=v&&w.y>=g&&w.y<=y&&w!==r&&w!==o&&km(a,u,l,h,c,d,w.x,w.y)&&ts(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;C&&C.z<=S;){if(C.x>=f&&C.x<=v&&C.y>=g&&C.y<=y&&C!==r&&C!==o&&km(a,u,l,h,c,d,C.x,C.y)&&ts(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function lee(i,e,t){let n=i;do{const r=n.prev,s=n.next.next;!j2(r,s)&&q9(r,n,n.next,s)&&F1(r,s)&&F1(s,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),B1(n),B1(n.next),n=i=s),n=n.next}while(n!==i);return Kp(n)}function cee(i,e,t,n,r,s){let o=i;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&_ee(o,a)){let l=G9(o,a);o=Kp(o,o.next),l=Kp(l,l.next),U1(o,e,t,n,r,s,0),U1(l,e,t,n,r,s,0);return}a=a.next}o=o.next}while(o!==i)}function uee(i,e,t,n){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*n,l=s<o-1?e[s+1]*n:i.length,c=H9(i,a,l,n,!1),c===c.next&&(c.steiner=!0),r.push(vee(c));for(r.sort(hee),s=0;s<r.length;s++)t=dee(r[s],t);return t}function hee(i,e){return i.x-e.x}function dee(i,e){const t=fee(i,e);if(!t)return e;const n=G9(t,i);return Kp(n,n.next),Kp(t,t.next)}function fee(i,e){let t=e,n=-1/0,r;const s=i.x,o=i.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const d=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=s&&d>n&&(n=d,r=t.x<t.next.x?t:t.next,d===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let u=1/0,h;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&km(o<c?s:n,o,l,c,o<c?n:s,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(s-t.x),F1(t,i)&&(h<u||h===u&&(t.x>r.x||t.x===r.x&&pee(r,t)))&&(r=t,u=h)),t=t.next;while(t!==a);return r}function pee(i,e){return ts(i.prev,i,e.prev)<0&&ts(e.next,i,i.next)<0}function mee(i,e,t,n){let r=i;do r.z===0&&(r.z=SE(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,gee(r)}function gee(i){let e,t,n,r,s,o,a,l,c=1;do{for(t=i,i=null,s=null,o=0;t;){for(o++,n=t,a=0,e=0;e<c&&(a++,n=n.nextZ,!!n);e++);for(l=c;a>0||l>0&&n;)a!==0&&(l===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,a--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,c*=2}while(o>1);return i}function SE(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function vee(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function km(i,e,t,n,r,s,o,a){return(r-o)*(e-a)>=(i-o)*(s-a)&&(i-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(n-a)}function _ee(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!bee(i,e)&&(F1(i,e)&&F1(e,i)&&yee(i,e)&&(ts(i.prev,i,e.prev)||ts(i,e.prev,e))||j2(i,e)&&ts(i.prev,i,i.next)>0&&ts(e.prev,e,e.next)>0)}function ts(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function j2(i,e){return i.x===e.x&&i.y===e.y}function q9(i,e,t,n){const r=Yy(ts(i,e,t)),s=Yy(ts(i,e,n)),o=Yy(ts(t,n,i)),a=Yy(ts(t,n,e));return!!(r!==s&&o!==a||r===0&&Xy(i,t,e)||s===0&&Xy(i,n,e)||o===0&&Xy(t,i,n)||a===0&&Xy(t,e,n))}function Xy(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Yy(i){return i>0?1:i<0?-1:0}function bee(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&q9(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function F1(i,e){return ts(i.prev,i,i.next)<0?ts(i,e,i.next)>=0&&ts(i,i.prev,e)>=0:ts(i,e,i.prev)<0||ts(i,i.next,e)<0}function yee(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function G9(i,e){const t=new ME(i.i,i.x,i.y),n=new ME(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function Q7(i,e,t,n){const r=new ME(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function B1(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function ME(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function xee(i,e,t,n){let r=0;for(let s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}class Nu{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return Nu.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];e8(e),t8(n,e);let o=e.length;t.forEach(e8);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,t8(n,t[l]);const a=see.triangulate(n,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function e8(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function t8(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class $2 extends Qn{constructor(e=new Bp([new ht(.5,.5),new ht(-.5,.5),new ht(-.5,-.5),new ht(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new en(r,3)),this.setAttribute("uv",new en(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:f-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:wee;let w,C=!1,E,k,O,R;_&&(w=_.getSpacedPoints(u),C=!0,d=!1,E=_.computeFrenetFrames(u,!1),k=new oe,O=new oe,R=new oe),d||(y=0,f=0,g=0,v=0);const A=a.extractPoints(c);let D=A.shape;const I=A.holes;if(!Nu.isClockWise(D)){D=D.reverse();for(let tt=0,se=I.length;tt<se;tt++){const ke=I[tt];Nu.isClockWise(ke)&&(I[tt]=ke.reverse())}}const j=Nu.triangulateShape(D,I),Y=D;for(let tt=0,se=I.length;tt<se;tt++){const ke=I[tt];D=D.concat(ke)}function F(tt,se,ke){return se||console.error("THREE.ExtrudeGeometry: vec does not exist"),tt.clone().addScaledVector(se,ke)}const re=D.length,ee=j.length;function J(tt,se,ke){let ae,xe,Ie;const dt=tt.x-se.x,nt=tt.y-se.y,me=ke.x-tt.x,ue=ke.y-tt.y,Pe=dt*dt+nt*nt,U=dt*ue-nt*me;if(Math.abs(U)>Number.EPSILON){const V=Math.sqrt(Pe),Ve=Math.sqrt(me*me+ue*ue),st=se.x-nt/V,ve=se.y+dt/V,ut=ke.x-ue/Ve,Zt=ke.y+me/Ve,we=((ut-st)*ue-(Zt-ve)*me)/(dt*ue-nt*me);ae=st+dt*we-tt.x,xe=ve+nt*we-tt.y;const Se=ae*ae+xe*xe;if(Se<=2)return new ht(ae,xe);Ie=Math.sqrt(Se/2)}else{let V=!1;dt>Number.EPSILON?me>Number.EPSILON&&(V=!0):dt<-Number.EPSILON?me<-Number.EPSILON&&(V=!0):Math.sign(nt)===Math.sign(ue)&&(V=!0),V?(ae=-nt,xe=dt,Ie=Math.sqrt(Pe)):(ae=dt,xe=nt,Ie=Math.sqrt(Pe/2))}return new ht(ae/Ie,xe/Ie)}const Ee=[];for(let tt=0,se=Y.length,ke=se-1,ae=tt+1;tt<se;tt++,ke++,ae++)ke===se&&(ke=0),ae===se&&(ae=0),Ee[tt]=J(Y[tt],Y[ke],Y[ae]);const le=[];let ie,be=Ee.concat();for(let tt=0,se=I.length;tt<se;tt++){const ke=I[tt];ie=[];for(let ae=0,xe=ke.length,Ie=xe-1,dt=ae+1;ae<xe;ae++,Ie++,dt++)Ie===xe&&(Ie=0),dt===xe&&(dt=0),ie[ae]=J(ke[ae],ke[Ie],ke[dt]);le.push(ie),be=be.concat(ie)}for(let tt=0;tt<y;tt++){const se=tt/y,ke=f*Math.cos(se*Math.PI/2),ae=g*Math.sin(se*Math.PI/2)+v;for(let xe=0,Ie=Y.length;xe<Ie;xe++){const dt=F(Y[xe],Ee[xe],ae);at(dt.x,dt.y,-ke)}for(let xe=0,Ie=I.length;xe<Ie;xe++){const dt=I[xe];ie=le[xe];for(let nt=0,me=dt.length;nt<me;nt++){const ue=F(dt[nt],ie[nt],ae);at(ue.x,ue.y,-ke)}}}const Je=g+v;for(let tt=0;tt<re;tt++){const se=d?F(D[tt],be[tt],Je):D[tt];C?(O.copy(E.normals[0]).multiplyScalar(se.x),k.copy(E.binormals[0]).multiplyScalar(se.y),R.copy(w[0]).add(O).add(k),at(R.x,R.y,R.z)):at(se.x,se.y,0)}for(let tt=1;tt<=u;tt++)for(let se=0;se<re;se++){const ke=d?F(D[se],be[se],Je):D[se];C?(O.copy(E.normals[tt]).multiplyScalar(ke.x),k.copy(E.binormals[tt]).multiplyScalar(ke.y),R.copy(w[tt]).add(O).add(k),at(R.x,R.y,R.z)):at(ke.x,ke.y,h/u*tt)}for(let tt=y-1;tt>=0;tt--){const se=tt/y,ke=f*Math.cos(se*Math.PI/2),ae=g*Math.sin(se*Math.PI/2)+v;for(let xe=0,Ie=Y.length;xe<Ie;xe++){const dt=F(Y[xe],Ee[xe],ae);at(dt.x,dt.y,h+ke)}for(let xe=0,Ie=I.length;xe<Ie;xe++){const dt=I[xe];ie=le[xe];for(let nt=0,me=dt.length;nt<me;nt++){const ue=F(dt[nt],ie[nt],ae);C?at(ue.x,ue.y+w[u-1].y,w[u-1].x+ke):at(ue.x,ue.y,h+ke)}}}Xe(),Be();function Xe(){const tt=r.length/3;if(d){let se=0,ke=re*se;for(let ae=0;ae<ee;ae++){const xe=j[ae];Le(xe[2]+ke,xe[1]+ke,xe[0]+ke)}se=u+y*2,ke=re*se;for(let ae=0;ae<ee;ae++){const xe=j[ae];Le(xe[0]+ke,xe[1]+ke,xe[2]+ke)}}else{for(let se=0;se<ee;se++){const ke=j[se];Le(ke[2],ke[1],ke[0])}for(let se=0;se<ee;se++){const ke=j[se];Le(ke[0]+re*u,ke[1]+re*u,ke[2]+re*u)}}n.addGroup(tt,r.length/3-tt,0)}function Be(){const tt=r.length/3;let se=0;vt(Y,se),se+=Y.length;for(let ke=0,ae=I.length;ke<ae;ke++){const xe=I[ke];vt(xe,se),se+=xe.length}n.addGroup(tt,r.length/3-tt,1)}function vt(tt,se){let ke=tt.length;for(;--ke>=0;){const ae=ke;let xe=ke-1;xe<0&&(xe=tt.length-1);for(let Ie=0,dt=u+y*2;Ie<dt;Ie++){const nt=re*Ie,me=re*(Ie+1),ue=se+ae+nt,Pe=se+xe+nt,U=se+xe+me,V=se+ae+me;Ot(ue,Pe,U,V)}}}function at(tt,se,ke){l.push(tt),l.push(se),l.push(ke)}function Le(tt,se,ke){ft(tt),ft(se),ft(ke);const ae=r.length/3,xe=S.generateTopUV(n,r,ae-3,ae-2,ae-1);rt(xe[0]),rt(xe[1]),rt(xe[2])}function Ot(tt,se,ke,ae){ft(tt),ft(se),ft(ae),ft(se),ft(ke),ft(ae);const xe=r.length/3,Ie=S.generateSideWallUV(n,r,xe-6,xe-3,xe-2,xe-1);rt(Ie[0]),rt(Ie[1]),rt(Ie[3]),rt(Ie[1]),rt(Ie[2]),rt(Ie[3])}function ft(tt){r.push(l[tt*3+0]),r.push(l[tt*3+1]),r.push(l[tt*3+2])}function rt(tt){s.push(tt.x),s.push(tt.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return See(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];n.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new wA[r.type]().fromJSON(r)),new $2(n,e.options)}}const wee={generateTopUV:function(i,e,t,n,r){const s=e[t*3],o=e[t*3+1],a=e[n*3],l=e[n*3+1],c=e[r*3],u=e[r*3+1];return[new ht(s,o),new ht(a,l),new ht(c,u)]},generateSideWallUV:function(i,e,t,n,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[n*3],u=e[n*3+1],h=e[n*3+2],d=e[r*3],f=e[r*3+1],g=e[r*3+2],v=e[s*3],y=e[s*3+1],_=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new ht(o,1-l),new ht(c,1-h),new ht(d,1-g),new ht(v,1-_)]:[new ht(a,1-l),new ht(u,1-h),new ht(f,1-g),new ht(y,1-_)]}};function See(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class X2 extends Tf{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new X2(e.radius,e.detail)}}class w_ extends Tf{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new w_(e.radius,e.detail)}}class Y2 extends Qn{constructor(e=.5,t=1,n=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:o},n=Math.max(3,n),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let h=e;const d=(t-e)/r,f=new oe,g=new ht;for(let v=0;v<=r;v++){for(let y=0;y<=n;y++){const _=s+y/n*o;f.x=h*Math.cos(_),f.y=h*Math.sin(_),l.push(f.x,f.y,f.z),c.push(0,0,1),g.x=(f.x/t+1)/2,g.y=(f.y/t+1)/2,u.push(g.x,g.y)}h+=d}for(let v=0;v<r;v++){const y=v*(n+1);for(let _=0;_<n;_++){const S=_+y,w=S,C=S+n+1,E=S+n+2,k=S+1;a.push(w,C,k),a.push(C,E,k)}}this.setIndex(a),this.setAttribute("position",new en(l,3)),this.setAttribute("normal",new en(c,3)),this.setAttribute("uv",new en(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Y2(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class K2 extends Qn{constructor(e=new Bp([new ht(0,.5),new ht(-.5,-.5),new ht(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(n),this.setAttribute("position",new en(r,3)),this.setAttribute("normal",new en(s,3)),this.setAttribute("uv",new en(o,2));function c(u){const h=r.length/3,d=u.extractPoints(t);let f=d.shape;const g=d.holes;Nu.isClockWise(f)===!1&&(f=f.reverse());for(let y=0,_=g.length;y<_;y++){const S=g[y];Nu.isClockWise(S)===!0&&(g[y]=S.reverse())}const v=Nu.triangulateShape(f,g);for(let y=0,_=g.length;y<_;y++){const S=g[y];f=f.concat(S)}for(let y=0,_=f.length;y<_;y++){const S=f[y];r.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let y=0,_=v.length;y<_;y++){const S=v[y],w=S[0]+h,C=S[1]+h,E=S[2]+h;n.push(w,C,E),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Mee(t,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];n.push(o)}return new K2(n,e.curveSegments)}}function Mee(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}class S_ extends Qn{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let c=0;const u=[],h=new oe,d=new oe,f=[],g=[],v=[],y=[];for(let _=0;_<=n;_++){const S=[],w=_/n;let C=0;_===0&&o===0?C=.5/t:_===n&&l===Math.PI&&(C=-.5/t);for(let E=0;E<=t;E++){const k=E/t;h.x=-e*Math.cos(r+k*s)*Math.sin(o+w*a),h.y=e*Math.cos(o+w*a),h.z=e*Math.sin(r+k*s)*Math.sin(o+w*a),g.push(h.x,h.y,h.z),d.copy(h).normalize(),v.push(d.x,d.y,d.z),y.push(k+C,1-w),S.push(c++)}u.push(S)}for(let _=0;_<n;_++)for(let S=0;S<t;S++){const w=u[_][S+1],C=u[_][S],E=u[_+1][S],k=u[_+1][S+1];(_!==0||o>0)&&f.push(w,C,k),(_!==n-1||l<Math.PI)&&f.push(C,E,k)}this.setIndex(f),this.setAttribute("position",new en(g,3)),this.setAttribute("normal",new en(v,3)),this.setAttribute("uv",new en(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new S_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Z2 extends Tf{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Z2(e.radius,e.detail)}}class J2 extends Qn{constructor(e=1,t=.4,n=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new oe,h=new oe,d=new oe;for(let f=0;f<=n;f++)for(let g=0;g<=r;g++){const v=g/r*s,y=f/n*Math.PI*2;h.x=(e+t*Math.cos(y))*Math.cos(v),h.y=(e+t*Math.cos(y))*Math.sin(v),h.z=t*Math.sin(y),a.push(h.x,h.y,h.z),u.x=e*Math.cos(v),u.y=e*Math.sin(v),d.subVectors(h,u).normalize(),l.push(d.x,d.y,d.z),c.push(g/r),c.push(f/n)}for(let f=1;f<=n;f++)for(let g=1;g<=r;g++){const v=(r+1)*f+g-1,y=(r+1)*(f-1)+g-1,_=(r+1)*(f-1)+g,S=(r+1)*f+g;o.push(v,y,S),o.push(y,_,S)}this.setIndex(o),this.setAttribute("position",new en(a,3)),this.setAttribute("normal",new en(l,3)),this.setAttribute("uv",new en(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new J2(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Q2 extends Qn{constructor(e=1,t=.4,n=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],l=[],c=[],u=[],h=new oe,d=new oe,f=new oe,g=new oe,v=new oe,y=new oe,_=new oe;for(let w=0;w<=n;++w){const C=w/n*s*Math.PI*2;S(C,s,o,e,f),S(C+.01,s,o,e,g),y.subVectors(g,f),_.addVectors(g,f),v.crossVectors(y,_),_.crossVectors(v,y),v.normalize(),_.normalize();for(let E=0;E<=r;++E){const k=E/r*Math.PI*2,O=-t*Math.cos(k),R=t*Math.sin(k);h.x=f.x+(O*_.x+R*v.x),h.y=f.y+(O*_.y+R*v.y),h.z=f.z+(O*_.z+R*v.z),l.push(h.x,h.y,h.z),d.subVectors(h,f).normalize(),c.push(d.x,d.y,d.z),u.push(w/n),u.push(E/r)}}for(let w=1;w<=n;w++)for(let C=1;C<=r;C++){const E=(r+1)*(w-1)+(C-1),k=(r+1)*w+(C-1),O=(r+1)*w+C,R=(r+1)*(w-1)+C;a.push(E,k,R),a.push(k,O,R)}this.setIndex(a),this.setAttribute("position",new en(l,3)),this.setAttribute("normal",new en(c,3)),this.setAttribute("uv",new en(u,2));function S(w,C,E,k,O){const R=Math.cos(w),A=Math.sin(w),D=E/C*w,I=Math.cos(D);O.x=k*(2+I)*.5*R,O.y=k*(2+I)*A*.5,O.z=k*Math.sin(D)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Q2(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class e4 extends Qn{constructor(e=new yA(new oe(-1,-1,0),new oe(-1,1,0),new oe(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new oe,l=new oe,c=new ht;let u=new oe;const h=[],d=[],f=[],g=[];v(),this.setIndex(g),this.setAttribute("position",new en(h,3)),this.setAttribute("normal",new en(d,3)),this.setAttribute("uv",new en(f,2));function v(){for(let w=0;w<t;w++)y(w);y(s===!1?t:0),S(),_()}function y(w){u=e.getPointAt(w/t,u);const C=o.normals[w],E=o.binormals[w];for(let k=0;k<=r;k++){const O=k/r*Math.PI*2,R=Math.sin(O),A=-Math.cos(O);l.x=A*C.x+R*E.x,l.y=A*C.y+R*E.y,l.z=A*C.z+R*E.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=u.x+n*l.x,a.y=u.y+n*l.y,a.z=u.z+n*l.z,h.push(a.x,a.y,a.z)}}function _(){for(let w=1;w<=t;w++)for(let C=1;C<=r;C++){const E=(r+1)*(w-1)+(C-1),k=(r+1)*w+(C-1),O=(r+1)*w+C,R=(r+1)*(w-1)+C;g.push(E,k,R),g.push(k,O,R)}}function S(){for(let w=0;w<=t;w++)for(let C=0;C<=r;C++)c.x=w/t,c.y=C/r,f.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new e4(new wA[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class W9 extends Qn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new oe,s=new oe;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const h=l[c],d=h.start,f=h.count;for(let g=d,v=d+f;g<v;g+=3)for(let y=0;y<3;y++){const _=a.getX(g+y),S=a.getX(g+(y+1)%3);r.fromBufferAttribute(o,_),s.fromBufferAttribute(o,S),n8(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,h=3*a+(c+1)%3;r.fromBufferAttribute(o,u),s.fromBufferAttribute(o,h),n8(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new en(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function n8(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var i8=Object.freeze({__proto__:null,BoxGeometry:l0,CapsuleGeometry:H2,CircleGeometry:q2,ConeGeometry:G2,CylinderGeometry:Tg,DodecahedronGeometry:W2,EdgesGeometry:V9,ExtrudeGeometry:$2,IcosahedronGeometry:X2,LatheGeometry:x_,OctahedronGeometry:w_,PlaneGeometry:Mg,PolyhedronGeometry:Tf,RingGeometry:Y2,ShapeGeometry:K2,SphereGeometry:S_,TetrahedronGeometry:Z2,TorusGeometry:J2,TorusKnotGeometry:Q2,TubeGeometry:e4,WireframeGeometry:W9});class j9 extends na{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new qt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class SA extends Bo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MA extends na{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new qt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ef,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $9 extends MA{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ht(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return bs(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new qt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new qt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new qt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class X9 extends na{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new qt(16777215),this.specular=new qt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ef,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=m_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Y9 extends na{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new qt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ef,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class K9 extends na{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ef,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Z9 extends na{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new qt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ef,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=m_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class J9 extends na{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new qt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ef,this.normalScale=new ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Q9 extends Ma{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function lc(i,e,t){return CA(i)?new i.constructor(i.subarray(e,t!==void 0?t:i.length)):i.slice(e,t)}function zp(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function CA(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function ez(i){function e(r,s){return i[r]-i[s]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function CE(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=i[a+l]}return r}function EA(i,e,t,n){let r=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[r++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=i[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=i[r++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=i[r++];while(s!==void 0)}function Cee(i,e,t,n,r=30){const s=i.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),h=[],d=[];for(let f=0;f<c.times.length;++f){const g=c.times[f]*r;if(!(g<t||g>=n)){h.push(c.times[f]);for(let v=0;v<u;++v)d.push(c.values[f*u+v])}}h.length!==0&&(c.times=zp(h,c.times.constructor),c.values=zp(d,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Eee(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,s=e/n;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=i.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(c===void 0)continue;let u=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=h/3);let d=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);const g=a.times.length-1;let v;if(s<=a.times[0]){const _=u,S=h-u;v=lc(a.values,_,S)}else if(s>=a.times[g]){const _=g*h+u,S=_+h-u;v=lc(a.values,_,S)}else{const _=a.createInterpolant(),S=u,w=h-u;_.evaluate(s),v=lc(_.resultBuffer,S,w)}l==="quaternion"&&new Ro().fromArray(v).normalize().conjugate().toArray(v);const y=c.times.length;for(let _=0;_<y;++_){const S=_*f+d;if(l==="quaternion")Ro.multiplyQuaternionsFlat(c.values,S,v,0,c.values,S);else{const w=f-d*2;for(let C=0;C<w;++C)c.values[S+C]-=v[C]}}}return i.blendMode=nA,i}const Tee={arraySlice:lc,convertArray:zp,isTypedArray:CA,getKeyframeOrder:ez,sortedArray:CE,flattenJSON:EA,subclip:Cee,makeClipAdditive:Eee};class M_{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=n+2;;){if(r===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(n=2,s=a);for(let l=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class tz extends M_{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Rp,endingEnd:Rp}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Op:s=e,a=2*t-n;break;case O1:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=n}if(l===void 0)switch(this.getSettings_().endingEnd){case Op:o=e,l=2*n-t;break;case O1:o=1,l=n+r[1]-r[0];break;default:o=e-1,l=t}const c=(n-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-n),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,f=this._weightNext,g=(n-t)/(r-t),v=g*g,y=v*g,_=-d*y+2*d*v-d*g,S=(1+d)*y+(-1.5-2*d)*v+(-.5+d)*g+1,w=(-1-f)*y+(1.5+f)*v+.5*g,C=f*y-f*v;for(let E=0;E!==a;++E)s[E]=_*o[u+E]+S*o[c+E]+w*o[l+E]+C*o[h+E];return s}}class TA extends M_{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(n-t)/(r-t),h=1-u;for(let d=0;d!==a;++d)s[d]=o[c+d]*h+o[l+d]*u;return s}}class nz extends M_{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ru{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=zp(t,this.TimeBufferType),this.values=zp(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:zp(e.times,Array),values:zp(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new nz(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new TA(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new tz(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case k1:t=this.InterpolantFactoryMethodDiscrete;break;case R1:t=this.InterpolantFactoryMethodLinear;break;case iw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return k1;case this.InterpolantFactoryMethodLinear:return R1;case this.InterpolantFactoryMethodSmooth:return iw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=lc(n,s,o),this.values=lc(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&CA(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=lc(this.times),t=lc(this.values),n=this.getValueSize(),r=this.getInterpolation()===iw,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const h=a*n,d=h-n,f=h+n;for(let g=0;g!==n;++g){const v=t[h+g];if(v!==t[d+g]||v!==t[f+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*n,d=o*n;for(let f=0;f!==n;++f)t[d+f]=t[h+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*n,l=o*n,c=0;c!==n;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=lc(e,0,o),this.values=lc(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=lc(this.times,0),t=lc(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}ru.prototype.TimeBufferType=Float32Array;ru.prototype.ValueBufferType=Float32Array;ru.prototype.DefaultInterpolation=R1;class c0 extends ru{}c0.prototype.ValueTypeName="bool";c0.prototype.ValueBufferType=Array;c0.prototype.DefaultInterpolation=k1;c0.prototype.InterpolantFactoryMethodLinear=void 0;c0.prototype.InterpolantFactoryMethodSmooth=void 0;class AA extends ru{}AA.prototype.ValueTypeName="color";class V1 extends ru{}V1.prototype.ValueTypeName="number";class iz extends M_{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Ro.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Ag extends ru{InterpolantFactoryMethodLinear(e){return new iz(this.times,this.values,this.getValueSize(),e)}}Ag.prototype.ValueTypeName="quaternion";Ag.prototype.DefaultInterpolation=R1;Ag.prototype.InterpolantFactoryMethodSmooth=void 0;class u0 extends ru{}u0.prototype.ValueTypeName="string";u0.prototype.ValueBufferType=Array;u0.prototype.DefaultInterpolation=k1;u0.prototype.InterpolantFactoryMethodLinear=void 0;u0.prototype.InterpolantFactoryMethodSmooth=void 0;class H1 extends ru{}H1.prototype.ValueTypeName="vector";class q1{constructor(e,t=-1,n,r=k2){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Ul(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(Pee(n[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(ru.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=ez(l);l=CE(l,1,u),c=CE(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new V1(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const h=u[1];let d=r[h];d||(r[h]=d=[]),d.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(h,d,f,g,v){if(f.length!==0){const y=[],_=[];EA(f,y,_,g),y.length!==0&&v.push(new h(d,y,_))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const d=c[h].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const f={};let g;for(g=0;g<d.length;g++)if(d[g].morphTargets)for(let v=0;v<d[g].morphTargets.length;v++)f[d[g].morphTargets[v]]=-1;for(const v in f){const y=[],_=[];for(let S=0;S!==d[g].morphTargets.length;++S){const w=d[g];y.push(w.time),_.push(w.morphTarget===v?1:0)}r.push(new V1(".morphTargetInfluence["+v+"]",y,_))}l=f.length*o}else{const f=".bones["+t[h].name+"]";n(H1,f+".position",d,"pos",r),n(Ag,f+".quaternion",d,"rot",r),n(H1,f+".scale",d,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Aee(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return V1;case"vector":case"vector2":case"vector3":case"vector4":return H1;case"color":return AA;case"quaternion":return Ag;case"bool":case"boolean":return c0;case"string":return u0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function Pee(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Aee(i.type);if(i.times===void 0){const t=[],n=[];EA(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Zp={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class PA{constructor(e,t,n){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,d=c.length;h<d;h+=2){const f=c[h],g=c[h+1];if(f.global&&(f.lastIndex=0),f.test(u))return g}return null}}}const rz=new PA;class ll{constructor(e){this.manager=e!==void 0?e:rz,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ll.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ph={};class kee extends Error{constructor(e,t){super(e),this.response=t}}class Kh extends ll{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Zp.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ph[e]!==void 0){Ph[e].push({onLoad:t,onProgress:n,onError:r});return}Ph[e]=[],Ph[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Ph[e],h=c.body.getReader(),d=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),f=d?parseInt(d):0,g=f!==0;let v=0;const y=new ReadableStream({start(_){S();function S(){h.read().then(({done:w,value:C})=>{if(w)_.close();else{v+=C.byteLength;const E=new ProgressEvent("progress",{lengthComputable:g,loaded:v,total:f});for(let k=0,O=u.length;k<O;k++){const R=u[k];R.onProgress&&R.onProgress(E)}_.enqueue(C),S()}})}}});return new Response(y)}else throw new kee(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),d=h&&h[1]?h[1].toLowerCase():void 0,f=new TextDecoder(d);return c.arrayBuffer().then(g=>f.decode(g))}}}).then(c=>{Zp.add(e,c);const u=Ph[e];delete Ph[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=Ph[e];if(u===void 0)throw this.manager.itemError(e),c;delete Ph[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Ree extends ll{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Kh(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=q1.parse(e[n]);t.push(r)}return t}}class Oee extends ll{constructor(e){super(e)}load(e,t,n,r){const s=this,o=[],a=new F2,l=new Kh(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(h){l.load(e[h],function(d){const f=s.parse(d,!0);o[h]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},c+=1,c===6&&(f.mipmapCount===1&&(a.minFilter=Hr),a.image=o,a.format=f.format,a.needsUpdate=!0,t&&t(a))},n,r)}if(Array.isArray(e))for(let h=0,d=e.length;h<d;++h)u(h);else l.load(e,function(h){const d=s.parse(h,!0);if(d.isCubemap){const f=d.mipmaps.length/d.mipmapCount;for(let g=0;g<f;g++){o[g]={mipmaps:[]};for(let v=0;v<d.mipmapCount;v++)o[g].mipmaps.push(d.mipmaps[g*d.mipmapCount+v]),o[g].format=d.format,o[g].width=d.width,o[g].height=d.height}a.image=o}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=Hr),a.format=d.format,a.needsUpdate=!0,t&&t(a)},n,r);return a}}class G1 extends ll{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Zp.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=I1("img");function l(){u(),Zp.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){u(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Lee extends ll{constructor(e){super(e)}load(e,t,n,r){const s=new y_;s.colorSpace=Zn;const o=new G1(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class Dee extends ll{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new qm,a=new Kh(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:lo,o.wrapT=c.wrapT!==void 0?c.wrapT:lo,o.magFilter=c.magFilter!==void 0?c.magFilter:Hr,o.minFilter=c.minFilter!==void 0?c.minFilter:Hr,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=hf),c.mipmapCount===1&&(o.minFilter=Hr),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c))},n,r),o}}class zee extends ll{constructor(e){super(e)}load(e,t,n,r){const s=new qr,o=new G1(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}class Af extends Ni{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new qt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class sz extends Af{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ni.DEFAULT_UP),this.updateMatrix(),this.groundColor=new qt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const dM=new qn,r8=new oe,s8=new oe;class kA{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ht(512,512),this.map=null,this.mapPass=null,this.matrix=new qn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new L2,this._frameExtents=new ht(1,1),this._viewportCount=1,this._viewports=[new Li(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;r8.setFromMatrixPosition(e.matrixWorld),t.position.copy(r8),s8.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(s8),t.updateMatrixWorld(),dM.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dM),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(dM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Iee extends kA{constructor(){super(new pr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=eg*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class oz extends Af{constructor(e,t,n=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ni.DEFAULT_UP),this.updateMatrix(),this.target=new Ni,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Iee}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const o8=new qn,Lv=new oe,fM=new oe;class Nee extends kA{constructor(){super(new pr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ht(4,2),this._viewportCount=6,this._viewports=[new Li(2,1,1,1),new Li(0,1,1,1),new Li(3,1,1,1),new Li(1,1,1,1),new Li(3,0,1,1),new Li(1,0,1,1)],this._cubeDirections=[new oe(1,0,0),new oe(-1,0,0),new oe(0,0,1),new oe(0,0,-1),new oe(0,1,0),new oe(0,-1,0)],this._cubeUps=[new oe(0,1,0),new oe(0,1,0),new oe(0,1,0),new oe(0,1,0),new oe(0,0,1),new oe(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Lv.setFromMatrixPosition(e.matrixWorld),n.position.copy(Lv),fM.copy(n.position),fM.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(fM),n.updateMatrixWorld(),r.makeTranslation(-Lv.x,-Lv.y,-Lv.z),o8.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o8)}}class az extends Af{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Nee}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Uee extends kA{constructor(){super(new od(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class lz extends Af{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ni.DEFAULT_UP),this.updateMatrix(),this.target=new Ni,this.shadow=new Uee}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class cz extends Af{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class uz extends Af{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class hz{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new oe)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class t4 extends Af{constructor(e=new hz,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class n4 extends ll{constructor(e){super(e),this.textures={}}load(e,t,n,r){const s=this,o=new Kh(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=n4.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new qt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=n(o.value);break;case"c":r.uniforms[s].value=new qt().setHex(o.value);break;case"v2":r.uniforms[s].value=new ht().fromArray(o.value);break;case"v3":r.uniforms[s].value=new oe().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Li().fromArray(o.value);break;case"m3":r.uniforms[s].value=new pi().fromArray(o.value);break;case"m4":r.uniforms[s].value=new qn().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new ht().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ht().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:j9,SpriteMaterial:pA,RawShaderMaterial:SA,ShaderMaterial:Bo,PointsMaterial:gA,MeshPhysicalMaterial:$9,MeshStandardMaterial:MA,MeshPhongMaterial:X9,MeshToonMaterial:Y9,MeshNormalMaterial:K9,MeshLambertMaterial:Z9,MeshDepthMaterial:uA,MeshDistanceMaterial:hA,MeshBasicMaterial:Yu,MeshMatcapMaterial:J9,LineDashedMaterial:Q9,LineBasicMaterial:Ma,Material:na};return new t[e]}}class EE{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class dz extends Qn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class fz extends ll{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Kh(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(f,g){if(t[g]!==void 0)return t[g];const y=f.interleavedBuffers[g],_=s(f,y.buffer),S=Am(y.type,_),w=new N2(S,y.stride);return w.uuid=y.uuid,t[g]=w,w}function s(f,g){if(n[g]!==void 0)return n[g];const y=f.arrayBuffers[g],_=new Uint32Array(y).buffer;return n[g]=_,_}const o=e.isInstancedBufferGeometry?new dz:new Qn,a=e.data.index;if(a!==void 0){const f=Am(a.type,a.array);o.setIndex(new Un(f,1))}const l=e.data.attributes;for(const f in l){const g=l[f];let v;if(g.isInterleavedBufferAttribute){const y=r(e.data,g.data);v=new Yp(y,g.itemSize,g.offset,g.normalized)}else{const y=Am(g.type,g.array),_=g.isInstancedBufferAttribute?ng:Un;v=new _(y,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),g.usage!==void 0&&v.setUsage(g.usage),g.updateRange!==void 0&&(v.updateRange.offset=g.updateRange.offset,v.updateRange.count=g.updateRange.count),o.setAttribute(f,v)}const c=e.data.morphAttributes;if(c)for(const f in c){const g=c[f],v=[];for(let y=0,_=g.length;y<_;y++){const S=g[y];let w;if(S.isInterleavedBufferAttribute){const C=r(e.data,S.data);w=new Yp(C,S.itemSize,S.offset,S.normalized)}else{const C=Am(S.type,S.array);w=new Un(C,S.itemSize,S.normalized)}S.name!==void 0&&(w.name=S.name),v.push(w)}o.morphAttributes[f]=v}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let f=0,g=h.length;f!==g;++f){const v=h[f];o.addGroup(v.start,v.count,v.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const f=new oe;d.center!==void 0&&f.fromArray(d.center),o.boundingSphere=new nu(f,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Fee extends ll{constructor(e){super(e)}load(e,t,n,r){const s=this,o=this.path===""?EE.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Kh(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(h){r!==void 0&&r(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},n,r)}async loadAsync(e,t){const n=this,r=this.path===""?EE.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Kh(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(a)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,n),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let h=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const s=new Bp().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new U2().fromJSON(e[s],r);n[a.uuid]=a}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new fz;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in i8?a=i8[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),n[l.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const s=new n4;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];n[l.uuid]===void 0&&(n[l.uuid]=s.parse(l)),r[l.uuid]=n[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],s=q1.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const n=this,r={};let s;function o(l){return n.manager.itemStart(l),s.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:n.resourcePath+c;return o(u)}else return l.data?{data:Am(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new PA(t);s=new G1(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const h=e[c],d=h.url;if(Array.isArray(d)){const f=[];for(let g=0,v=d.length;g<v;g++){const y=d[g],_=a(y);_!==null&&(_ instanceof HTMLImageElement?f.push(_):f.push(new qm(_.data,_.width,_.height)))}r[h.uuid]=new Lp(f)}else{const f=a(h.url);r[h.uuid]=new Lp(f)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:Am(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new G1(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let h=0,d=c.length;h<d;h++){const f=c[h],g=await s(f);g!==null&&(g instanceof HTMLImageElement?u.push(g):u.push(new qm(g.data,g.width,g.height)))}n[l.uuid]=new Lp(u)}else{const u=await s(l.url);n[l.uuid]=new Lp(u)}}}return n}parseTextures(e,t){function n(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new y_,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new qm:u=new qr,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=n(a.mapping,Bee)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=n(a.wrap[0],a8),u.wrapT=n(a.wrap[1],a8)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=n(a.minFilter,l8)),a.magFilter!==void 0&&(u.magFilter=n(a.magFilter,l8)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,t,n,r,s){let o;function a(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const f=[];for(let g=0,v=d.length;g<v;g++){const y=d[g];n[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),f.push(n[y])}return f}return n[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),n[d]}}function c(d){return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),r[d]}let u,h;switch(e.type){case"Scene":o=new Eg,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new qt(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new I2(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new z2(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new pr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new od(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new cz(e.color,e.intensity);break;case"DirectionalLight":o=new lz(e.color,e.intensity);break;case"PointLight":o=new az(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new uz(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new oz(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new sz(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new t4().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),h=l(e.material),o=new O9(u,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),h=l(e.material),o=new rr(u,h);break;case"InstancedMesh":u=a(e.geometry),h=l(e.material);const d=e.count,f=e.instanceMatrix,g=e.instanceColor;o=new L9(u,h,d),o.instanceMatrix=new ng(new Float32Array(f.array),16),g!==void 0&&(o.instanceColor=new ng(new Float32Array(g.array),g.itemSize));break;case"LOD":o=new R9;break;case"Line":o=new df(a(e.geometry),l(e.material));break;case"LineLoop":o=new D9(a(e.geometry),l(e.material));break;case"LineSegments":o=new Ku(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new z9(a(e.geometry),l(e.material));break;case"Sprite":o=new k9(l(e.material));break;case"Group":o=new Dp;break;case"Bone":o=new mA;break;default:o=new Ni}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let f=0;f<d.length;f++)o.add(this.parseObject(d[f],t,n,r,s))}if(e.animations!==void 0){const d=e.animations;for(let f=0;f<d.length;f++){const g=d[f];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let f=0;f<d.length;f++){const g=d[f],v=o.getObjectByProperty("uuid",g.object);v!==void 0&&o.addLevel(v,g.distance,g.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}}const Bee={UVMapping:g_,CubeReflectionMapping:Yh,CubeRefractionMapping:uf,EquirectangularReflectionMapping:A1,EquirectangularRefractionMapping:P1,CubeUVReflectionMapping:xg},a8={RepeatWrapping:Jm,ClampToEdgeWrapping:lo,MirroredRepeatWrapping:Qm},l8={NearestFilter:Oi,NearestMipmapNearestFilter:Mw,NearestMipmapLinearFilter:m1,LinearFilter:Hr,LinearMipmapNearestFilter:YT,LinearMipmapLinearFilter:hf};class Vee extends ll{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Zp.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Zp.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Ky;class RA{static getContext(){return Ky===void 0&&(Ky=new(window.AudioContext||window.webkitAudioContext)),Ky}static setContext(e){Ky=e}}class Hee extends ll{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Kh(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);RA.getContext().decodeAudioData(c,function(h){t(h)},a)}catch(c){a(c)}},n,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}class qee extends t4{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const r=new qt().set(e),s=new qt().set(t),o=new oe(r.r,r.g,r.b),a=new oe(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}class Gee extends t4{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const n=new qt().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const c8=new qn,u8=new qn,lp=new qn;class Wee{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new pr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new pr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,lp.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Up*t.fov*.5)/t.zoom;let a,l;u8.elements[12]=-r,c8.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,lp.elements[0]=2*t.near/(l-a),lp.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(lp),a=-o*t.aspect-s,l=o*t.aspect-s,lp.elements[0]=2*t.near/(l-a),lp.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(lp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(u8),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(c8)}}let i4=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=h8(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=h8();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function h8(){return(typeof performance>"u"?Date:performance).now()}const cp=new oe,d8=new Ro,jee=new oe,up=new oe;class $ee extends Ni{constructor(){super(),this.type="AudioListener",this.context=RA.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new i4}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(cp,d8,jee),up.set(0,0,-1).applyQuaternion(d8),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(cp.x,r),t.positionY.linearRampToValueAtTime(cp.y,r),t.positionZ.linearRampToValueAtTime(cp.z,r),t.forwardX.linearRampToValueAtTime(up.x,r),t.forwardY.linearRampToValueAtTime(up.y,r),t.forwardZ.linearRampToValueAtTime(up.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(cp.x,cp.y,cp.z),t.setOrientation(up.x,up.y,up.z,n.x,n.y,n.z)}}class pz extends Ni{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const hp=new oe,f8=new Ro,Xee=new oe,dp=new oe;class Yee extends pz{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(hp,f8,Xee),dp.set(0,0,1).applyQuaternion(f8);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(hp.x,n),t.positionY.linearRampToValueAtTime(hp.y,n),t.positionZ.linearRampToValueAtTime(hp.z,n),t.orientationX.linearRampToValueAtTime(dp.x,n),t.orientationY.linearRampToValueAtTime(dp.y,n),t.orientationZ.linearRampToValueAtTime(dp.z,n)}else t.setPosition(hp.x,hp.y,hp.z),t.setOrientation(dp.x,dp.y,dp.z)}}class Kee{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class mz{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)n[s+a]=n[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(n,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(n,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(n[l]!==n[l+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,o=r;s!==o;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){Ro.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const o=this._workIndex*s;Ro.multiplyQuaternionsFlat(e,o,e,t,e,n),Ro.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[n+o]*r}}}const OA="\\[\\]\\.:\\/",Zee=new RegExp("["+OA+"]","g"),LA="[^"+OA+"]",Jee="[^"+OA.replace("\\.","")+"]",Qee=/((?:WC+[\/:])*)/.source.replace("WC",LA),ete=/(WCOD+)?/.source.replace("WCOD",Jee),tte=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",LA),nte=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",LA),ite=new RegExp("^"+Qee+ete+tte+nte+"$"),rte=["material","materials","bones","map"];class ste{constructor(e,t,n){const r=n||Vi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Vi{constructor(e,t,n){this.path=t,this.parsedPath=n||Vi.parseTrackName(t),this.node=Vi.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Vi.Composite(e,t,n):new Vi(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Zee,"")}static parseTrackName(e){const t=ite.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=n.nodeName.substring(r+1);rte.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=n(a.children);if(l)return l}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Vi.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let c=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Vi.Composite=ste;Vi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Vi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Vi.prototype.GetterByBindingType=[Vi.prototype._getValue_direct,Vi.prototype._getValue_array,Vi.prototype._getValue_arrayElement,Vi.prototype._getValue_toArray];Vi.prototype.SetterByBindingTypeAndVersioning=[[Vi.prototype._setValue_direct,Vi.prototype._setValue_direct_setNeedsUpdate,Vi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Vi.prototype._setValue_array,Vi.prototype._setValue_array_setNeedsUpdate,Vi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Vi.prototype._setValue_arrayElement,Vi.prototype._setValue_arrayElement_setNeedsUpdate,Vi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Vi.prototype._setValue_fromArray,Vi.prototype._setValue_fromArray_setNeedsUpdate,Vi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class ote{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ul(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,h=arguments.length;u!==h;++u){const d=arguments[u],f=d.uuid;let g=t[f];if(g===void 0){g=l++,t[f]=g,e.push(d);for(let v=0,y=o;v!==y;++v)s[v].push(new Vi(d,n[v],r[v]))}else if(g<c){a=e[g];const v=--c,y=e[v];t[y.uuid]=g,e[g]=y,t[f]=v,e[v]=d;for(let _=0,S=o;_!==S;++_){const w=s[_],C=w[v];let E=w[g];w[g]=C,E===void 0&&(E=new Vi(d,n[_],r[_])),w[v]=E}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const h=s++,d=e[h];t[d.uuid]=u,e[u]=d,t[c]=h,e[h]=l;for(let f=0,g=r;f!==g;++f){const v=n[f],y=v[h],_=v[u];v[u]=y,v[h]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,h=t[u];if(h!==void 0)if(delete t[u],h<s){const d=--s,f=e[d],g=--o,v=e[g];t[f.uuid]=h,e[h]=f,t[v.uuid]=d,e[d]=v,e.pop();for(let y=0,_=r;y!==_;++y){const S=n[y],w=S[d],C=S[g];S[h]=w,S[d]=C,S.pop()}}else{const d=--o,f=e[d];d>0&&(t[f.uuid]=h),e[h]=f,e.pop();for(let g=0,v=r;g!==v;++g){const y=n[g];y[h]=y[d],y.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,h=new Array(c);r=s.length,n[e]=r,o.push(e),a.push(t),s.push(h);for(let d=u,f=l.length;d!==f;++d){const g=l[d];h[d]=new Vi(g,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=n,o[n]=l,o.pop(),s[n]=s[a],s.pop(),r[n]=r[a],r.pop()}}}class gz{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Rp,endingEnd:Rp};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=KD,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+n,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case nA:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case k2:default:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const o=n===ZD;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(n===YD){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Op,r.endingEnd=Op):(e?r.endingStart=this.zeroSlopeAtStart?Op:Rp:r.endingStart=O1,t?r.endingEnd=this.zeroSlopeAtEnd?Op:Rp:r.endingEnd=O1)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=n,this}}const ate=new Float32Array(1);class lte extends bc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let h=0;h!==s;++h){const d=r[h],f=d.name;let g=u[f];if(g!==void 0)++g.referenceCount,o[h]=g;else{if(g=o[h],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,f));continue}const v=t&&t._propertyBindings[h].binding.parsedPath;g=new mz(Vi.create(n,f,v),d.ValueTypeName,d.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,f),o[h]=g}a[h].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete h[d],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new TA(new Float32Array(2),new Float32Array(2),1,ate),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?q1.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(n===void 0&&(o!==null?n=o.blendMode:n=k2),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===n)return h;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new gz(this,o,t,n);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const n=t||this._root,r=n.uuid,s=typeof e=="string"?q1.findByName(n,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==n;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=u,t[u]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const a=n[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class DA{constructor(e){this.value=e}clone(){return new DA(this.value.clone===void 0?this.value:this.value.clone())}}let cte=0;class ute extends bc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:cte++}),this.name="",this.usage=D1,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++)this.uniforms.push(t[n].clone());return this}clone(){return new this.constructor().copy(this)}}class hte extends N2{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class dte{constructor(e,t,n,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class vz{constructor(e,t,n=0,r=1/0){this.ray=new Sg(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new O2,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return TE(e,this,n,t),n.sort(p8),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)TE(e[r],this,n,t);return n.sort(p8),n}}function p8(i,e){return i.distance-e.distance}function TE(i,e,t,n){if(i.layers.test(e.layers)&&i.raycast(e,t),n===!0){const r=i.children;for(let s=0,o=r.length;s<o;s++)TE(r[s],e,t,!0)}}let fte=class{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(bs(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};class pte{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}const m8=new ht;class mte{constructor(e=new ht(1/0,1/0),t=new ht(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=m8.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,m8).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const g8=new oe,Zy=new oe;class gte{constructor(e=new oe,t=new oe){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){g8.subVectors(e,this.start),Zy.subVectors(this.end,this.start);const n=Zy.dot(Zy);let s=Zy.dot(g8)/n;return t&&(s=bs(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const v8=new oe;class vte extends Ni{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Qn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}n.setAttribute("position",new en(r,3));const s=new Ma({fog:!1,toneMapped:!1});this.cone=new Ku(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),v8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(v8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const zd=new oe,Jy=new qn,pM=new qn;class _te extends Ku{constructor(e){const t=_z(e),n=new Qn,r=[],s=[],o=new qt(0,0,1),a=new qt(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}n.setAttribute("position",new en(r,3)),n.setAttribute("color",new en(s,3));const l=new Ma({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");pM.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Jy.multiplyMatrices(pM,a.matrixWorld),zd.setFromMatrixPosition(Jy),r.setXYZ(o,zd.x,zd.y,zd.z),Jy.multiplyMatrices(pM,a.parent.matrixWorld),zd.setFromMatrixPosition(Jy),r.setXYZ(o+1,zd.x,zd.y,zd.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function _z(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,_z(i.children[t]));return e}class bte extends rr{constructor(e,t,n){const r=new S_(t,4,2),s=new Yu({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const yte=new oe,_8=new qt,b8=new qt;class xte extends Ni{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new w_(t);r.rotateY(Math.PI*.5),this.material=new Yu({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Un(o,3)),this.add(new rr(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");_8.copy(this.light.color),b8.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const s=n<r/2?_8:b8;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(yte.setFromMatrixPosition(this.light.matrixWorld).negate())}}class wte extends Ku{constructor(e=10,t=10,n=4473924,r=8947848){n=new qt(n),r=new qt(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let d=0,f=0,g=-a;d<=t;d++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const v=d===s?n:r;v.toArray(c,f),f+=3,v.toArray(c,f),f+=3,v.toArray(c,f),f+=3,v.toArray(c,f),f+=3}const u=new Qn;u.setAttribute("position",new en(l,3)),u.setAttribute("color",new en(c,3));const h=new Ma({vertexColors:!0,toneMapped:!1});super(u,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ste extends Ku{constructor(e=10,t=16,n=8,r=64,s=4473924,o=8947848){s=new qt(s),o=new qt(o);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const d=h/t*(Math.PI*2),f=Math.sin(d)*e,g=Math.cos(d)*e;a.push(0,0,0),a.push(f,0,g);const v=h&1?s:o;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let h=0;h<n;h++){const d=h&1?s:o,f=e-e/n*h;for(let g=0;g<r;g++){let v=g/r*(Math.PI*2),y=Math.sin(v)*f,_=Math.cos(v)*f;a.push(y,0,_),l.push(d.r,d.g,d.b),v=(g+1)/r*(Math.PI*2),y=Math.sin(v)*f,_=Math.cos(v)*f,a.push(y,0,_),l.push(d.r,d.g,d.b)}}const c=new Qn;c.setAttribute("position",new en(a,3)),c.setAttribute("color",new en(l,3));const u=new Ma({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const y8=new oe,Qy=new oe,x8=new oe;class Mte extends Ni{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Qn;r.setAttribute("position",new en([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Ma({fog:!1,toneMapped:!1});this.lightPlane=new df(r,s),this.add(this.lightPlane),r=new Qn,r.setAttribute("position",new en([0,0,0,0,0,1],3)),this.targetLine=new df(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),y8.setFromMatrixPosition(this.light.matrixWorld),Qy.setFromMatrixPosition(this.light.target.matrixWorld),x8.subVectors(Qy,y8),this.lightPlane.lookAt(Qy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Qy),this.targetLine.scale.z=x8.length()}}const ex=new oe,ms=new b_;class Cte extends Ku{constructor(e){const t=new Qn,n=new Ma({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,v){l(g),l(v)}function l(g){r.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(r.length/3-1)}t.setAttribute("position",new en(r,3)),t.setAttribute("color",new en(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new qt(16755200),u=new qt(16711680),h=new qt(43775),d=new qt(16777215),f=new qt(3355443);this.setColors(c,u,h,d,f)}setColors(e,t,n,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;ms.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ks("c",t,e,ms,0,0,-1),ks("t",t,e,ms,0,0,1),ks("n1",t,e,ms,-n,-r,-1),ks("n2",t,e,ms,n,-r,-1),ks("n3",t,e,ms,-n,r,-1),ks("n4",t,e,ms,n,r,-1),ks("f1",t,e,ms,-n,-r,1),ks("f2",t,e,ms,n,-r,1),ks("f3",t,e,ms,-n,r,1),ks("f4",t,e,ms,n,r,1),ks("u1",t,e,ms,n*.7,r*1.1,-1),ks("u2",t,e,ms,-n*.7,r*1.1,-1),ks("u3",t,e,ms,0,r*2,-1),ks("cf1",t,e,ms,-n,0,1),ks("cf2",t,e,ms,n,0,1),ks("cf3",t,e,ms,0,-r,1),ks("cf4",t,e,ms,0,r,1),ks("cn1",t,e,ms,-n,0,-1),ks("cn2",t,e,ms,n,0,-1),ks("cn3",t,e,ms,0,-r,-1),ks("cn4",t,e,ms,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ks(i,e,t,n,r,s,o){ex.set(r,s,o).unproject(n);const a=e[i];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],ex.x,ex.y,ex.z)}}const tx=new Xu;class Ete extends Ku{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Qn;s.setIndex(new Un(n,1)),s.setAttribute("position",new Un(r,3)),super(s,new Ma({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&tx.setFromObject(this.object),tx.isEmpty())return;const t=tx.min,n=tx.max,r=this.geometry.attributes.position,s=r.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Tte extends Ku{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Qn;s.setIndex(new Un(n,1)),s.setAttribute("position",new en(r,3)),super(s,new Ma({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ate extends df{constructor(e,t=1,n=16776960){const r=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Qn;o.setAttribute("position",new en(s,3)),o.computeBoundingSphere(),super(o,new Ma({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Qn;l.setAttribute("position",new en(a,3)),l.computeBoundingSphere(),this.add(new rr(l,new Yu({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const w8=new oe;let nx,mM;class Pte extends Ni{constructor(e=new oe(0,0,1),t=new oe(0,0,0),n=1,r=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",nx===void 0&&(nx=new Qn,nx.setAttribute("position",new en([0,0,0,0,1,0],3)),mM=new Tg(0,.5,1,5,1),mM.translate(0,-.5,0)),this.position.copy(t),this.line=new df(nx,new Ma({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new rr(mM,new Yu({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{w8.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(w8,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class kte extends Ku{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Qn;r.setAttribute("position",new en(t,3)),r.setAttribute("color",new en(n,3));const s=new Ma({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,n){const r=new qt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Rte{constructor(){this.type="ShapePath",this.color=new qt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new N1,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,o){return this.currentPath.bezierCurveTo(e,t,n,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const S=[];for(let w=0,C=_.length;w<C;w++){const E=_[w],k=new Bp;k.curves=E.curves,S.push(k)}return S}function n(_,S){const w=S.length;let C=!1;for(let E=w-1,k=0;k<w;E=k++){let O=S[E],R=S[k],A=R.x-O.x,D=R.y-O.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(O=S[k],A=-A,R=S[E],D=-D),_.y<O.y||_.y>R.y)continue;if(_.y===O.y){if(_.x===O.x)return!0}else{const I=D*(_.x-O.x)-A*(_.y-O.y);if(I===0)return!0;if(I<0)continue;C=!C}}else{if(_.y!==O.y)continue;if(R.x<=_.x&&_.x<=O.x||O.x<=_.x&&_.x<=R.x)return!0}}return C}const r=Nu.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Bp,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const h=[],d=[];let f=[],g=0,v;d[g]=void 0,f[g]=[];for(let _=0,S=s.length;_<S;_++)a=s[_],v=a.getPoints(),o=r(v),o=e?!o:o,o?(!u&&d[g]&&g++,d[g]={s:new Bp,p:v},d[g].s.curves=a.curves,u&&g++,f[g]=[]):f[g].push({h:a,p:v[0]});if(!d[0])return t(s);if(d.length>1){let _=!1,S=0;for(let w=0,C=d.length;w<C;w++)h[w]=[];for(let w=0,C=d.length;w<C;w++){const E=f[w];for(let k=0;k<E.length;k++){const O=E[k];let R=!0;for(let A=0;A<d.length;A++)n(O.p,d[A].p)&&(w!==A&&S++,R?(R=!1,h[A].push(O)):_=!0);R&&h[w].push(O)}}S>0&&_===!1&&(f=h)}let y;for(let _=0,S=d.length;_<S;_++){l=d[_].s,c.push(l),y=f[_];for(let w=0,C=y.length;w<C;w++)l.holes.push(y[w].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:w2}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=w2);const bz=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:jT,AddEquation:Gd,AddOperation:BD,AdditiveAnimationBlendMode:nA,AdditiveBlending:qC,AlphaFormat:JT,AlwaysCompare:c9,AlwaysDepth:LD,AlwaysStencilFunc:t9,AmbientLight:cz,AmbientLightProbe:Gee,AnimationAction:gz,AnimationClip:q1,AnimationLoader:Ree,AnimationMixer:lte,AnimationObjectGroup:ote,AnimationUtils:Tee,ArcCurve:I9,ArrayCamera:T9,ArrowHelper:Pte,Audio:pz,AudioAnalyser:Kee,AudioContext:RA,AudioListener:$ee,AudioLoader:Hee,AxesHelper:kte,BackSide:wa,BasicDepthPacking:JD,BasicShadowMap:X$,Bone:mA,BooleanKeyframeTrack:c0,Box2:mte,Box3:Xu,Box3Helper:Tte,BoxGeometry:l0,BoxHelper:Ete,BufferAttribute:Un,BufferGeometry:Qn,BufferGeometryLoader:fz,ByteType:v_,Cache:Zp,Camera:b_,CameraHelper:Cte,CanvasTexture:ZQ,CapsuleGeometry:H2,CatmullRomCurve3:N9,CineonToneMapping:qD,CircleGeometry:q2,ClampToEdgeWrapping:lo,Clock:i4,Color:qt,ColorKeyframeTrack:AA,ColorManagement:Al,CompressedArrayTexture:YQ,CompressedCubeTexture:KQ,CompressedTexture:F2,CompressedTextureLoader:Oee,ConeGeometry:G2,CubeCamera:b9,CubeReflectionMapping:Yh,CubeRefractionMapping:uf,CubeTexture:y_,CubeTextureLoader:Lee,CubeUVReflectionMapping:xg,CubicBezierCurve:_A,CubicBezierCurve3:U9,CubicInterpolant:tz,CullFaceBack:HC,CullFaceFront:kD,CullFaceFrontBack:$$,CullFaceNone:PD,Curve:iu,CurvePath:B9,CustomBlending:RD,CustomToneMapping:GD,CylinderGeometry:Tg,Cylindrical:pte,Data3DTexture:oA,DataArrayTexture:R2,DataTexture:qm,DataTextureLoader:Dee,DataUtils:nY,DecrementStencilOp:nX,DecrementWrapStencilOp:rX,DefaultLoadingManager:rz,DepthFormat:ef,DepthStencilFormat:Xp,DepthTexture:A9,DirectionalLight:lz,DirectionalLightHelper:Mte,DiscreteInterpolant:nz,DisplayP3ColorSpace:iA,DodecahedronGeometry:W2,DoubleSide:xs,DstAlphaFactor:VT,DstColorFactor:qT,DynamicCopyUsage:bX,DynamicDrawUsage:fX,DynamicReadUsage:gX,EdgesGeometry:V9,EllipseCurve:B2,EqualCompare:r9,EqualDepth:zD,EqualStencilFunc:lX,EquirectangularReflectionMapping:A1,EquirectangularRefractionMapping:P1,Euler:a0,EventDispatcher:bc,ExtrudeGeometry:$2,FileLoader:Kh,Float16BufferAttribute:lY,Float32BufferAttribute:en,Float64BufferAttribute:cY,FloatType:Ks,Fog:I2,FogExp2:z2,FramebufferTexture:XQ,FrontSide:Xh,Frustum:L2,GLBufferAttribute:dte,GLSL1:xX,GLSL3:vE,GreaterCompare:o9,GreaterDepth:ND,GreaterEqualCompare:l9,GreaterEqualDepth:ID,GreaterEqualStencilFunc:dX,GreaterStencilFunc:uX,GridHelper:wte,Group:Dp,HalfFloatType:Qc,HemisphereLight:sz,HemisphereLightHelper:xte,HemisphereLightProbe:qee,IcosahedronGeometry:X2,ImageBitmapLoader:Vee,ImageLoader:G1,ImageUtils:sA,IncrementStencilOp:tX,IncrementWrapStencilOp:iX,InstancedBufferAttribute:ng,InstancedBufferGeometry:dz,InstancedInterleavedBuffer:hte,InstancedMesh:L9,Int16BufferAttribute:oY,Int32BufferAttribute:aY,Int8BufferAttribute:iY,IntType:wg,InterleavedBuffer:N2,InterleavedBufferAttribute:Yp,Interpolant:M_,InterpolateDiscrete:k1,InterpolateLinear:R1,InterpolateSmooth:iw,InvertStencilOp:sX,KeepStencilOp:rw,KeyframeTrack:ru,LOD:R9,LatheGeometry:x_,Layers:O2,LessCompare:i9,LessDepth:DD,LessEqualCompare:s9,LessEqualDepth:Sw,LessEqualStencilFunc:cX,LessStencilFunc:aX,Light:Af,LightProbe:t4,Line:df,Line3:gte,LineBasicMaterial:Ma,LineCurve:V2,LineCurve3:F9,LineDashedMaterial:Q9,LineLoop:D9,LineSegments:Ku,LinearEncoding:L1,LinearFilter:Hr,LinearInterpolant:TA,LinearMipMapLinearFilter:ZT,LinearMipMapNearestFilter:KT,LinearMipmapLinearFilter:hf,LinearMipmapNearestFilter:YT,LinearSRGBColorSpace:eu,LinearToneMapping:VD,Loader:ll,LoaderUtils:EE,LoadingManager:PA,LoopOnce:YD,LoopPingPong:ZD,LoopRepeat:KD,LuminanceAlphaFormat:P2,LuminanceFormat:A2,MOUSE:W$,Material:na,MaterialLoader:n4,MathUtils:h9,Matrix3:pi,Matrix4:qn,MaxEquation:$C,Mesh:rr,MeshBasicMaterial:Yu,MeshDepthMaterial:uA,MeshDistanceMaterial:hA,MeshLambertMaterial:Z9,MeshMatcapMaterial:J9,MeshNormalMaterial:K9,MeshPhongMaterial:X9,MeshPhysicalMaterial:$9,MeshStandardMaterial:MA,MeshToonMaterial:Y9,MinEquation:jC,MirroredRepeatWrapping:Qm,MixOperation:FD,MultiplyBlending:WC,MultiplyOperation:m_,NearestFilter:Oi,NearestMipMapLinearFilter:XT,NearestMipMapNearestFilter:$T,NearestMipmapLinearFilter:m1,NearestMipmapNearestFilter:Mw,NeverCompare:n9,NeverDepth:OD,NeverStencilFunc:oX,NoBlending:Iu,NoColorSpace:tf,NoToneMapping:qh,NormalAnimationBlendMode:k2,NormalBlending:Jd,NotEqualCompare:a9,NotEqualDepth:UD,NotEqualStencilFunc:hX,NumberKeyframeTrack:V1,Object3D:Ni,ObjectLoader:Fee,ObjectSpaceNormalMap:e9,OctahedronGeometry:w_,OneFactor:UT,OneMinusDstAlphaFactor:HT,OneMinusDstColorFactor:GT,OneMinusSrcAlphaFactor:C2,OneMinusSrcColorFactor:BT,OrthographicCamera:od,PCFShadowMap:DT,PCFSoftShadowMap:S2,PMREMGenerator:yE,Path:N1,PerspectiveCamera:pr,Plane:qd,PlaneGeometry:Mg,PlaneHelper:Ate,PointLight:az,PointLightHelper:bte,Points:z9,PointsMaterial:gA,PolarGridHelper:Ste,PolyhedronGeometry:Tf,PositionalAudio:Yee,PropertyBinding:Vi,PropertyMixer:mz,QuadraticBezierCurve:bA,QuadraticBezierCurve3:yA,Quaternion:Ro,QuaternionKeyframeTrack:Ag,QuaternionLinearInterpolant:iz,RED_GREEN_RGTC2_Format:mE,RED_RGTC1_Format:XD,REVISION:w2,RGBADepthPacking:QD,RGBAFormat:Fo,RGBAIntegerFormat:tA,RGBA_ASTC_10x10_Format:hE,RGBA_ASTC_10x5_Format:lE,RGBA_ASTC_10x6_Format:cE,RGBA_ASTC_10x8_Format:uE,RGBA_ASTC_12x10_Format:dE,RGBA_ASTC_12x12_Format:fE,RGBA_ASTC_4x4_Format:eE,RGBA_ASTC_5x4_Format:tE,RGBA_ASTC_5x5_Format:nE,RGBA_ASTC_6x5_Format:iE,RGBA_ASTC_6x6_Format:rE,RGBA_ASTC_8x5_Format:sE,RGBA_ASTC_8x6_Format:oE,RGBA_ASTC_8x8_Format:aE,RGBA_BPTC_Format:nw,RGBA_ETC2_EAC_Format:QC,RGBA_PVRTC_2BPPV1_Format:ZC,RGBA_PVRTC_4BPPV1_Format:KC,RGBA_S3TC_DXT1_Format:Qx,RGBA_S3TC_DXT3_Format:ew,RGBA_S3TC_DXT5_Format:tw,RGB_ETC1_Format:$D,RGB_ETC2_Format:JC,RGB_PVRTC_2BPPV1_Format:YC,RGB_PVRTC_4BPPV1_Format:XC,RGB_S3TC_DXT1_Format:Jx,RGFormat:jD,RGIntegerFormat:eA,RawShaderMaterial:SA,Ray:Sg,Raycaster:vz,RectAreaLight:uz,RedFormat:WD,RedIntegerFormat:QT,ReinhardToneMapping:HD,RepeatWrapping:Jm,ReplaceStencilOp:eX,ReverseSubtractEquation:IT,RingGeometry:Y2,SIGNED_RED_GREEN_RGTC2_Format:gE,SIGNED_RED_RGTC1_Format:pE,SRGBColorSpace:Zn,Scene:Eg,ShaderChunk:ii,ShaderLib:jc,ShaderMaterial:Bo,ShadowMaterial:j9,Shape:Bp,ShapeGeometry:K2,ShapePath:Rte,ShapeUtils:Nu,ShortType:__,Skeleton:U2,SkeletonHelper:_te,SkinnedMesh:O9,Source:Lp,Sphere:nu,SphereGeometry:S_,Spherical:fte,SphericalHarmonics3:hz,SplineCurve:xA,SpotLight:oz,SpotLightHelper:vte,Sprite:k9,SpriteMaterial:pA,SrcAlphaFactor:M2,SrcAlphaSaturateFactor:WT,SrcColorFactor:FT,StaticCopyUsage:_X,StaticDrawUsage:D1,StaticReadUsage:mX,StereoCamera:Wee,StreamCopyUsage:yX,StreamDrawUsage:pX,StreamReadUsage:vX,StringKeyframeTrack:u0,SubtractEquation:zT,SubtractiveBlending:GC,TOUCH:j$,TangentSpaceNormalMap:Ef,TetrahedronGeometry:Z2,Texture:qr,TextureLoader:zee,TorusGeometry:J2,TorusKnotGeometry:Q2,Triangle:Ga,TriangleFanDrawMode:J$,TriangleStripDrawMode:Z$,TrianglesDrawMode:K$,TubeGeometry:e4,TwoPassDoubleSide:Y$,UVMapping:g_,Uint16BufferAttribute:aA,Uint32BufferAttribute:lA,Uint8BufferAttribute:rY,Uint8ClampedBufferAttribute:sY,Uniform:DA,UniformsGroup:ute,UniformsLib:Ht,UniformsUtils:Fp,UnsignedByteType:Sa,UnsignedInt248Type:Qd,UnsignedIntType:dc,UnsignedShort4444Type:E2,UnsignedShort5551Type:T2,UnsignedShortType:o0,VSMShadowMap:Mu,Vector2:ht,Vector3:oe,Vector4:Li,VectorKeyframeTrack:H1,VideoTexture:$Q,WebGL1Renderer:fA,WebGL3DRenderTarget:WX,WebGLArrayRenderTarget:GX,WebGLCoordinateSystem:Pu,WebGLCubeRenderTarget:y9,WebGLMultipleRenderTargets:jX,WebGLRenderTarget:Lo,WebGLRenderer:dA,WebGLUtils:E9,WebGPUCoordinateSystem:z1,WireframeGeometry:W9,WrapAroundEnding:O1,ZeroCurvatureEnding:Rp,ZeroFactor:NT,ZeroSlopeEnding:Op,ZeroStencilOp:Q$,_SRGBAFormat:Cw,sRGBEncoding:Gh},Symbol.toStringTag,{value:"Module"})),Ote=()=>Hu("threlte-internal-context");function Lte(i){let e;const t=i[9].default,n=is(t,i,i[8],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,[s]){n&&n.p&&(!e||s&256)&&rs(n,t,r,r[8],e?os(t,r[8],s,null):ss(r[8]),null)},i(r){e||(Ue(n,r),e=!0)},o(r){Ye(n,r),e=!1},d(r){n&&n.d(r)}}}const S8="threlte-disposable-object-context";function Dte(i,e,t){let n,r,{$$slots:s={},$$scope:o}=e;const{collectDisposableObjects:a,addDisposableObjects:l,removeDisposableObjects:c}=Ote();let{object:u=void 0}=e,h=u,{dispose:d=void 0}=e;const f=Hu(S8);Mn(i,f,y=>t(7,r=y));const g=Os(d??r??!0);Mn(i,g,y=>t(6,n=y)),Yc(S8,g);let v=n?a(u):[];return l(v),ko(()=>{c(v)}),i.$$set=y=>{"object"in y&&t(2,u=y.object),"dispose"in y&&t(3,d=y.dispose),"$$scope"in y&&t(8,o=y.$$scope)},i.$$.update=()=>{i.$$.dirty&136&&g.set(d??r??!0),i.$$.dirty&116&&u!==h&&(c(v),t(5,v=n?a(u):[]),l(v),t(4,h=u))},[f,g,u,d,h,v,n,r,o,s]}class zte extends oi{constructor(e){super(),ai(this,e,Dte,Lte,Gn,{object:2,dispose:3})}}function Ite(i,e){const t=Os(i);let n=i;const r=t.subscribe(a=>n=a);return ko(r),{...t,set:a=>{if((a==null?void 0:a.uuid)===(n==null?void 0:n.uuid))return;const l=n;t.set(a),e==null||e(a,l)},update:a=>{const l=a(n);if((l==null?void 0:l.uuid)===(n==null?void 0:n.uuid))return;const c=n;t.set(l),e==null||e(l,c)}}}const Pf=()=>Hu("threlte"),Nte=()=>Hu("threlte-hierarchical-parent-context");function Ute(i){let e;const t=i[8].default,n=is(t,i,i[7],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,[s]){n&&n.p&&(!e||s&128)&&rs(n,t,r,r[7],e?os(t,r[7],s,null):ss(r[7]),null)},i(r){e||(Ue(n,r),e=!0)},o(r){Ye(n,r),e=!1},d(r){n&&n.d(r)}}}const Fte=()=>({onChildMount:Hu("threlte-hierarchical-object-on-mount"),onChildDestroy:Hu("threlte-hierarchical-object-on-destroy")});function Bte(i,e,t){var _;let n,{$$slots:r={},$$scope:s}=e,{object:o=void 0}=e,{children:a=[]}=e,{onChildMount:l=void 0}=e;const c=S=>{a.push(S),t(1,a),l==null||l(S)};let{onChildDestroy:u=void 0}=e;const h=S=>{const w=a.findIndex(C=>C.uuid===S.uuid);w!==-1&&a.splice(w,1),t(1,a),u==null||u(S)},{invalidate:d}=Pf(),f=Nte();Mn(i,f,S=>t(6,n=S));let{parent:g=n}=e;const v=Fte();o&&((_=v.onChildMount)==null||_.call(v,o),d("HierarchicalObject: object added"));const y=Ite(o,(S,w)=>{var C,E;w&&((C=v.onChildDestroy)==null||C.call(v,w),d("HierarchicalObject: object added")),S&&((E=v.onChildMount)==null||E.call(v,S),d("HierarchicalObject: object removed"))});return ko(()=>{var S;o&&((S=v.onChildDestroy)==null||S.call(v,o),d("HierarchicalObject: object removed"))}),Yc("threlte-hierarchical-object-on-mount",c),Yc("threlte-hierarchical-object-on-destroy",h),Yc("threlte-hierarchical-parent-context",y),i.$$set=S=>{"object"in S&&t(3,o=S.object),"children"in S&&t(1,a=S.children),"onChildMount"in S&&t(4,l=S.onChildMount),"onChildDestroy"in S&&t(5,u=S.onChildDestroy),"parent"in S&&t(2,g=S.parent),"$$scope"in S&&t(7,s=S.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&t(2,g=n),i.$$.dirty&8&&y.set(o)},[f,a,g,o,l,u,n,s,r]}class Vte extends oi{constructor(e){super(),ai(this,e,Bte,Ute,Gn,{object:3,children:1,onChildMount:4,onChildDestroy:5,parent:2})}}function Hte(i){let e;const t=i[1].default,n=is(t,i,i[4],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&16)&&rs(n,t,r,r[4],e?os(t,r[4],s,null):ss(r[4]),null)},i(r){e||(Ue(n,r),e=!0)},o(r){Ye(n,r),e=!1},d(r){n&&n.d(r)}}}function qte(i){let e,t;return e=new Vte({props:{object:i[0],onChildMount:i[2],onChildDestroy:i[3],$$slots:{default:[Hte]},$$scope:{ctx:i}}}),{c(){xt(e.$$.fragment)},l(n){wt(e.$$.fragment,n)},m(n,r){St(e,n,r),t=!0},p(n,[r]){const s={};r&1&&(s.object=n[0]),r&1&&(s.onChildMount=n[2]),r&1&&(s.onChildDestroy=n[3]),r&16&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(Ue(e.$$.fragment,n),t=!0)},o(n){Ye(e.$$.fragment,n),t=!1},d(n){Mt(e,n)}}}function Gte(i,e,t){let{$$slots:n={},$$scope:r}=e,{object:s}=e;const o=l=>s.add(l),a=l=>s.remove(l);return i.$$set=l=>{"object"in l&&t(0,s=l.object),"$$scope"in l&&t(4,r=l.$$scope)},[s,n,o,a,r]}class Wte extends oi{constructor(e){super(),ai(this,e,Gte,qte,Gn,{object:0})}}const yz=(i,e)=>{if(e.includes(".")){const t=e.split("."),n=t.pop();for(let r=0;r<t.length;r+=1)i=i[t[r]];return{target:i,key:n}}else return{target:i,key:e}},gM=Symbol("initialValueBeforeAttach"),jte=()=>{const{invalidate:i}=Pf();let e=!1,t=gM,n,r,s;const o=(l,c,u)=>{if(a(),!u){const h=l;((h==null?void 0:h.isMaterial)||!1)&&(u="material"),((h==null?void 0:h.isBufferGeometry)||(h==null?void 0:h.isGeometry)||!1)&&(u="geometry")}if(u){if(typeof u=="function")n=u(c,l);else{const{target:h,key:d}=yz(c,u);t=h[d],h[d]=l,r=h,s=d}e=!0,i()}},a=()=>{e&&(n?(n(),n=void 0):r&&s&&t!==gM&&(r[s]=t,t=gM,r=void 0,s=void 0),e=!1,i())};return ko(()=>{a()}),{update:o}},$te=i=>i&&i.isCamera,xz=i=>i&&i.isOrthographicCamera,wz=i=>i&&i.isPerspectiveCamera,Xte=i=>wz(i)||xz(i),Yte=()=>{const{invalidate:i,size:e,camera:t}=Pf();let n,r;ko(()=>{r==null||r()});const s=l=>{n&&(xz(n)?(n.left=l.width/-2,n.right=l.width/2,n.top=l.height/2,n.bottom=l.height/-2,n.updateProjectionMatrix(),n.updateMatrixWorld(),i()):wz(n)&&(n.aspect=l.width/l.height,n.updateProjectionMatrix(),n.updateMatrixWorld(),i()))};return{update:(l,c)=>{if(r==null||r(),c||!Xte(l)){n=void 0;return}n=l,r=e.subscribe(s)},makeDefaultCamera:(l,c)=>{!$te(l)||!c||(t.set(l),i())}}},zA=()=>{const i=h2(),e=(n,r)=>{const s=i.$$.callbacks[n];s&&s.forEach(o=>{o(r)})};return Object.defineProperty(e,"hasEventListener",{value:n=>!!i.$$.callbacks[n],enumerable:!0}),e},Kte=()=>{const i=zA(),e=[];let t,n=!1;const r=()=>{e.forEach(a=>a()),e.length=0,i("create",{ref:t,cleanup:a=>{e.push(a)}})},s=o=>{t=o,n&&r()};return rd(()=>{r(),n=!0}),ko(()=>{e.forEach(o=>o())}),{updateRef:s}},M8=i=>!!(i!=null&&i.addEventListener),Zte=()=>{const i=zA(),e=h2(),t=d=>{d!=null&&d.type&&i(d.type,d)},n=(d,f)=>{M8(d)&&f.forEach(g=>{d.removeEventListener(g,t)})},r=(d,f)=>{M8(d)&&f.forEach(g=>{d.addEventListener(g,t)})};let s=[],o;const a=Os([]),l=a.subscribe(d=>{n(o,s),r(o,d),s=d});ko(l);const c=Os(),u=c.subscribe(d=>{n(o,s),r(d,s),o=d});return ko(u),ko(()=>{n(o,s)}),rd(()=>{a.set(Object.keys(e.$$.callbacks))}),{updateRef:d=>{c.set(d)}}},Jte=i=>{const t=Hu("threlte-plugin-context");if(!t)return;const n=Object.values(t).map(c=>c(i)).filter(Boolean),r=n.flatMap(c=>c.pluginProps??[]);let s=[];return ko(()=>{s.forEach(c=>c())}),{updateRef:c=>{s.forEach(u=>u()),s=[],n.forEach(u=>{var d;const h=(d=u.onRefChange)==null?void 0:d.call(u,c);h&&s.push(h)})},updateProps:c=>{n.forEach(u=>{var h;(h=u.onPropsChange)==null||h.call(u,c)})},updateRestProps:c=>{n.forEach(u=>{var h;(h=u.onRestPropsChange)==null||h.call(u,c)})},pluginsProps:r}},Qte=new Set(["$$scope","$$slots","type","args","attach","instance"]),ene=new Set(["fov","aspect","near","far","left","right","top","bottom","zoom"]),tne=i=>typeof i=="string"||typeof i=="number"||typeof i=="boolean"||typeof i>"u"||i===null,nne=()=>{const{invalidate:i}=Pf(),e=new Map,t=(r,s,o,a)=>{var u,h;if(tne(o)){const d=e.get(s);if(d&&d.instance===r&&d.value===o)return;e.set(s,{instance:r,value:o})}const{key:l,target:c}=yz(r,s);if(!Array.isArray(o)&&typeof o=="number"&&typeof((u=c[l])==null?void 0:u.setScalar)=="function")c[l].setScalar(o);else if(typeof((h=c[l])==null?void 0:h.set)=="function")Array.isArray(o)?c[l].set(...o):c[l].set(o);else{if(c[l]=o,a.manualCamera)return;ene.has(l)&&(c.isPerspectiveCamera||c.isOrthographicCamera)&&c.updateProjectionMatrix()}};return{updateProps:(r,s,o)=>{var a;for(const l in s)!Qte.has(l)&&!((a=o.pluginsProps)!=null&&a.includes(l))&&t(r,l,s[l],o),i()}}},ine=i=>({ref:i&2}),C8=i=>({ref:i[1]}),rne=i=>({ref:i&2}),E8=i=>({ref:i[1]});function T8(i){let e,t;return e=new zte({props:{object:i[1],dispose:i[0]}}),{c(){xt(e.$$.fragment)},l(n){wt(e.$$.fragment,n)},m(n,r){St(e,n,r),t=!0},p(n,r){const s={};r&2&&(s.object=n[1]),r&1&&(s.dispose=n[0]),e.$set(s)},i(n){t||(Ue(e.$$.fragment,n),t=!0)},o(n){Ye(e.$$.fragment,n),t=!1},d(n){Mt(e,n)}}}function sne(i){let e;const t=i[12].default,n=is(t,i,i[13],C8);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8194)&&rs(n,t,r,r[13],e?os(t,r[13],s,ine):ss(r[13]),C8)},i(r){e||(Ue(n,r),e=!0)},o(r){Ye(n,r),e=!1},d(r){n&&n.d(r)}}}function one(i){let e,t;return e=new Wte({props:{object:i[1],$$slots:{default:[ane]},$$scope:{ctx:i}}}),{c(){xt(e.$$.fragment)},l(n){wt(e.$$.fragment,n)},m(n,r){St(e,n,r),t=!0},p(n,r){const s={};r&2&&(s.object=n[1]),r&8194&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(Ue(e.$$.fragment,n),t=!0)},o(n){Ye(e.$$.fragment,n),t=!1},d(n){Mt(e,n)}}}function ane(i){let e;const t=i[12].default,n=is(t,i,i[13],E8);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8194)&&rs(n,t,r,r[13],e?os(t,r[13],s,rne):ss(r[13]),E8)},i(r){e||(Ue(n,r),e=!0)},o(r){Ye(n,r),e=!1},d(r){n&&n.d(r)}}}function lne(i){let e=i[4](i[1]),t,n,r,s,o,a,l=e&&T8(i);const c=[one,sne],u=[];function h(d,f){return f&2&&(n=null),n==null&&(n=!!d[3](d[1])),n?0:1}return r=h(i,-1),s=u[r]=c[r](i),{c(){l&&l.c(),t=Nt(),s.c(),o=Zs()},l(d){l&&l.l(d),t=Ut(d),s.l(d),o=Zs()},m(d,f){l&&l.m(d,f),Ze(d,t,f),u[r].m(d,f),Ze(d,o,f),a=!0},p(d,[f]){f&2&&(e=d[4](d[1])),e?l?(l.p(d,f),f&2&&Ue(l,1)):(l=T8(d),l.c(),Ue(l,1),l.m(t.parentNode,t)):l&&(rl(),Ye(l,1,1,()=>{l=null}),il());let g=r;r=h(d,f),r===g?u[r].p(d,f):(rl(),Ye(u[g],1,1,()=>{u[g]=null}),il(),s=u[r],s?s.p(d,f):(s=u[r]=c[r](d),s.c()),Ue(s,1),s.m(o.parentNode,o))},i(d){a||(Ue(l),Ue(s),a=!0)},o(d){Ye(l),Ye(s),a=!1},d(d){d&&(fe(t),fe(o)),l&&l.d(d),u[r].d(d)}}}function cne(i,e,t){const n=["is","args","attach","manual","makeDefault","dispose","ref"];let r=cf(e,n),s,{$$slots:o={},$$scope:a}=e,{is:l}=e,{args:c=void 0}=e,{attach:u=void 0}=e,{manual:h=void 0}=e,{makeDefault:d=void 0}=e,{dispose:f=void 0}=e;const g=Hu("threlte-hierarchical-parent-context");Mn(i,g,F=>t(11,s=F));const v=F=>typeof F=="function"&&/^\s*class\s+/.test(F.toString()),y=F=>Array.isArray(F),_=Kte();let S=v(l)&&y(c)?new l(...c):v(l)?new l:l;_.updateRef(S);let w=!1;const C=()=>{if(!w){w=!0;return}t(1,S=v(l)&&y(c)?new l(...c):v(l)?new l:l),_.updateRef(S)};let{ref:E=S}=e;const k=Os(S);Yc("threlte-hierarchical-parent-context",k);const O=Jte({ref:S,props:e}),R=(O==null?void 0:O.pluginsProps)??[],A=nne(),D=Yte(),I=jte(),q=Zte(),j=F=>!!F.isObject3D,Y=F=>F.dispose!==void 0;return i.$$set=F=>{t(27,e=Jn(Jn({},e),Oo(F))),t(26,r=cf(e,n)),"is"in F&&t(6,l=F.is),"args"in F&&t(7,c=F.args),"attach"in F&&t(8,u=F.attach),"manual"in F&&t(9,h=F.manual),"makeDefault"in F&&t(10,d=F.makeDefault),"dispose"in F&&t(0,f=F.dispose),"ref"in F&&t(5,E=F.ref),"$$scope"in F&&t(13,a=F.$$scope)},i.$$.update=()=>{i.$$.dirty&192&&C(),i.$$.dirty&2&&t(5,E=S),i.$$.dirty&2&&k.set(S),A.updateProps(S,r,{manualCamera:h,pluginsProps:R}),i.$$.dirty&514&&D.update(S,h),i.$$.dirty&1026&&D.makeDefaultCamera(S,d),i.$$.dirty&2306&&I.update(S,s,u),i.$$.dirty&2&&q.updateRef(S),i.$$.dirty&2&&(O==null||O.updateRef(S)),O==null||O.updateProps(e),O==null||O.updateRestProps(r)},e=Oo(e),[f,S,g,j,Y,E,l,c,u,h,d,s,o,a]}let IA=class extends oi{constructor(e){super(),ai(this,e,cne,lne,Gn,{is:6,args:7,attach:8,manual:9,makeDefault:10,dispose:0,ref:5})}};const r4=typeof window<"u",une=()=>{const i=Os({width:0,height:0});let e={width:0,height:0};const t=i.subscribe(o=>e=o);ko(t);let n;const r=()=>{const o=e;if(!n||!n.parentElement)return;const{clientWidth:a,clientHeight:l}=n.parentElement;(a!==o.width||l!==o.height)&&i.set({width:a,height:l})},s=o=>{n=o,r(),window.addEventListener("resize",r)};return r4?(ko(()=>{window.removeEventListener("resize",r)}),{parentSizeAction:s,parentSize:i}):{parentSize:i,parentSizeAction:s}},hne=()=>{Yc("threlte-cache",[])},Sz=i=>i.userData,dne=()=>{const i=new pr(75,0,.1,1e3);return Sz(i).threlteDefaultCamera=!0,i.position.z=5,i.lookAt(0,0,0),i},fne=i=>{NA(i.size,e=>{Sz(bw(i.camera)).threlteDefaultCamera&&i.camera.update(t=>{const n=t;return n.aspect=e.width/e.height,n.updateProjectionMatrix(),i.invalidate("Default camera: aspect ratio changed"),n})})},NA=(i,e)=>{const t=Gc(i,s=>s);let n;const r=t.subscribe(async s=>{n&&n();const o=await e(s);o&&(n=o)});ko(()=>{r(),n&&n()})},kh=i=>{const e=Os(i),t={set:n=>{t.current=n,e.set(n)},subscribe:e.subscribe,update:n=>{const r=n(t.current);t.current=r,e.set(r)},current:i};return t},pne=i=>{const e={debugFrameloop:i.debugFrameloop,frame:0,frameInvalidated:!0,invalidations:{},manualFrameHandlers:new Set,autoFrameHandlers:new Set,allFrameHandlers:new Set,allFrameHandlersNeedSortCheck:!1,renderHandlers:new Set,renderHandlersNeedSortCheck:!1,advance:!1,dispose:async(o=!1)=>{await IC(),!(!e.shouldDispose&&!o)&&(e.disposableObjects.forEach((a,l)=>{var c;(a===0||o)&&((c=l==null?void 0:l.dispose)==null||c.call(l),e.disposableObjects.delete(l))}),e.shouldDispose=!1)},collectDisposableObjects:(o,a)=>{const l=a??[];return o&&(o!=null&&o.dispose&&typeof o.dispose=="function"&&o.type!=="Scene"&&l.push(o),Object.entries(o).forEach(([c,u])=>{if(c==="parent"||c==="children"||typeof u!="object")return;const h=u;h!=null&&h.dispose&&e.collectDisposableObjects(h,l)})),l},addDisposableObjects:o=>{o.forEach(a=>{const l=e.disposableObjects.get(a);l?e.disposableObjects.set(a,l+1):e.disposableObjects.set(a,1)})},removeDisposableObjects:o=>{o.length!==0&&(o.forEach(a=>{const l=e.disposableObjects.get(a);l&&l>0&&e.disposableObjects.set(a,l-1)}),e.shouldDispose=!0)},disposableObjects:new Map,shouldDispose:!1},t={size:Gc([i.userSize,i.parentSize],([o,a])=>o||a),clock:new i4,camera:kh(dne()),scene:new Eg,renderer:void 0,invalidate:o=>{e.frameInvalidated=!0,e.debugFrameloop&&o&&(e.invalidations[o]=e.invalidations[o]?e.invalidations[o]+1:1)},advance:()=>{e.advance=!0},colorSpace:kh(i.colorSpace),toneMapping:kh(i.toneMapping),dpr:kh(i.dpr),useLegacyLights:kh(i.useLegacyLights),shadows:kh(i.shadows),colorManagementEnabled:kh(i.colorManagementEnabled),frameloop:kh(i.frameloop)},n=kh({});return Yc("threlte",t),Yc("threlte-internal-context",e),Yc("threlte-user-context",n),{ctx:t,internalCtx:e,getCtx:()=>t,getInternalCtx:()=>e}},mne=(i,e,t)=>{if(e.allFrameHandlers.size!==0){if(e.allFrameHandlersNeedSortCheck){const n=Array.from(e.allFrameHandlers);if(n.some(s=>s.order)){const s=n.sort((o,a)=>(o.order??0)>(a.order??0)?1:-1);e.allFrameHandlers.clear(),s.forEach(o=>e.allFrameHandlers.add(o))}e.allFrameHandlersNeedSortCheck=!1}if(e.debugFrameloop){let n=0;e.autoFrameHandlers.forEach(r=>{r.debugFrameloopMessage?e.invalidations[r.debugFrameloopMessage]=r.debugFrameloopMessage in e.invalidations?e.invalidations[r.debugFrameloopMessage]+1:1:++n}),n>0&&(e.invalidations.useFrame=e.autoFrameHandlers.size)}e.allFrameHandlers.forEach(n=>n.fn(i,t))}},gne=(i,e,t)=>{if(e.renderHandlers.size!==0){if(e.renderHandlersNeedSortCheck){const n=Array.from(e.renderHandlers);if(n.some(s=>s.order)){const s=n.sort((o,a)=>(o.order??0)>(a.order??0)?1:-1);e.renderHandlers.clear(),s.forEach(o=>e.renderHandlers.add(o))}e.renderHandlersNeedSortCheck=!1}e.renderHandlers.forEach(n=>n.fn(i,t))}},vne=i=>{i.debugFrameloop&&(i.frame+=1,console.log(`frame: ${i.frame}${Object.keys(i.invalidations).length>0?", requested by ":""}`),Object.keys(i.invalidations).length>0&&console.table(i.invalidations),i.invalidations={})},_ne=(i,e)=>i.frameloop.current==="always"||i.frameloop.current==="demand"&&(e.frameInvalidated||e.autoFrameHandlers.size>0)||i.frameloop.current==="never"&&e.advance,bne=(i,e)=>{var t;(t=i.renderer)==null||t.setAnimationLoop(()=>{e.dispose();const n=i.clock.getDelta();mne(i,e,n),_ne(i,e)&&(e.renderHandlers.size>0?gne(i,e,n):i.renderer&&i.camera.current&&i.renderer.render(i.scene,i.camera.current),vne(e),e.frameInvalidated=!1,e.advance=!1)})},yne={srgb:Gh,"srgb-linear":L1,"":L1},xne=i=>i.outputColorSpace!==void 0,wne=i=>{const e=Os(void 0),t=(n,r)=>{i.renderer=new dA({powerPreference:"high-performance",canvas:n,antialias:!0,alpha:!0,...r}),e.set(i.renderer)};return NA([e,i.size,i.toneMapping,i.colorSpace,i.dpr,i.shadows,i.colorManagementEnabled,i.useLegacyLights],([n,r,s,o,a,l,c,u])=>{if(!n)return;if(n.setSize(r.width,r.height),n.setPixelRatio(a),xne(n))n.outputColorSpace=o;else{const f=yne[o];f?n.outputEncoding=f:console.warn("No encoding found for colorSpace",o)}n.toneMapping=s,n.shadowMap.enabled=!!l,l&&l!==!0?n.shadowMap.type=l:l===!0&&(n.shadowMap.type=S2);const h=Al;h.enabled!==void 0?h.enabled=c:h.legacyMode!==void 0&&(h.legacyMode=!c);const d=n;u&&d.useLegacyLights!==void 0?d.useLegacyLights=u:d.physicallyCorrectLights!==void 0&&(d.physicallyCorrectLights=!u)}),ko(()=>{var n;(n=i.renderer)==null||n.dispose()}),{createRenderer:t}};function A8(i){let e,t;return e=new IA({props:{is:i[3].ctx.scene,$$slots:{default:[Sne]},$$scope:{ctx:i}}}),{c(){xt(e.$$.fragment)},l(n){wt(e.$$.fragment,n)},m(n,r){St(e,n,r),t=!0},p(n,r){const s={};r&131072&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(Ue(e.$$.fragment,n),t=!0)},o(n){Ye(e.$$.fragment,n),t=!1},d(n){Mt(e,n)}}}function Sne(i){let e;const t=i[15].default,n=is(t,i,i[17],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&131072)&&rs(n,t,r,r[17],e?os(t,r[17],s,null):ss(r[17]),null)},i(r){e||(Ue(n,r),e=!0)},o(r){Ye(n,r),e=!1},d(r){n&&n.d(r)}}}function Mne(i){let e,t,n,r,s=i[1]&&A8(i);return{c(){e=bt("canvas"),s&&s.c(),this.h()},l(o){e=yt(o,"CANVAS",{class:!0});var a=Jt(e);s&&s.l(a),a.forEach(fe),this.h()},h(){$e(e,"class","svelte-15bl8wt")},m(o,a){Ze(o,e,a),s&&s.m(e,null),i[16](e),t=!0,n||(r=Pl(i[2].call(null,e)),n=!0)},p(o,[a]){o[1]?s?(s.p(o,a),a&2&&Ue(s,1)):(s=A8(o),s.c(),Ue(s,1),s.m(e,null)):s&&(rl(),Ye(s,1,1,()=>{s=null}),il())},i(o){t||(Ue(s),t=!0)},o(o){Ye(s),t=!1},d(o){o&&fe(e),s&&s.d(),i[16](null),n=!1,r()}}}const P8=new Set;function Cne(i,e,t){let{$$slots:n={},$$scope:r}=e,{dpr:s=r4?window.devicePixelRatio:1}=e,{toneMapping:o=jT}=e,{colorSpace:a="srgb"}=e,{frameloop:l="demand"}=e,{debugFrameloop:c=!1}=e,{shadows:u=S2}=e,{size:h=void 0}=e,{rendererParameters:d=void 0}=e,{colorManagementEnabled:f=!0}=e,{useLegacyLights:g=!0}=e,v,y=!1;const _=Os(h),{parentSize:S,parentSizeAction:w}=une(),C=pne({colorSpace:a,toneMapping:o,dpr:s,userSize:_,parentSize:S,debugFrameloop:c,frameloop:l,shadows:u,colorManagementEnabled:f,useLegacyLights:g});hne();const E=C.ctx;fne(E),P8.add(E.invalidate),ko(()=>{P8.delete(E.invalidate)});const{createRenderer:k}=wne(E);rd(()=>{v&&(k(v,d),bne(C.ctx,C.internalCtx),t(1,y=!0))}),ko(()=>{var R;C.internalCtx.dispose(!0),(R=C.ctx.renderer)==null||R.setAnimationLoop(null)});function O(R){ja[R?"unshift":"push"](()=>{v=R,t(0,v)})}return i.$$set=R=>{"dpr"in R&&t(4,s=R.dpr),"toneMapping"in R&&t(5,o=R.toneMapping),"colorSpace"in R&&t(6,a=R.colorSpace),"frameloop"in R&&t(7,l=R.frameloop),"debugFrameloop"in R&&t(8,c=R.debugFrameloop),"shadows"in R&&t(9,u=R.shadows),"size"in R&&t(10,h=R.size),"rendererParameters"in R&&t(11,d=R.rendererParameters),"colorManagementEnabled"in R&&t(12,f=R.colorManagementEnabled),"useLegacyLights"in R&&t(13,g=R.useLegacyLights),"$$scope"in R&&t(17,r=R.$$scope)},i.$$.update=()=>{i.$$.dirty&1024&&_.set(h)},[v,y,w,C,s,o,a,l,c,u,h,d,f,g,E,n,O,r]}class Ene extends oi{constructor(e){super(),ai(this,e,Cne,Mne,Gn,{dpr:4,toneMapping:5,colorSpace:6,frameloop:7,debugFrameloop:8,shadows:9,size:10,rendererParameters:11,colorManagementEnabled:12,useLegacyLights:13,ctx:14})}get ctx(){return this.$$.ctx[14]}}const Mz={},Tne=i=>{Object.assign(Mz,i)},Ane=(i,e)=>{const t=Mz[e]||bz[e];if(!t)throw new Error(`No Three.js module found for ${e}. Did you forget to extend the catalogue?`);return{...i,props:{...i.props,is:t}}},Pne=i=>new Proxy(class{},{construct(e,[t]){const n=t;return new IA(Ane(n,i))}}),Jp=new Proxy(class{},{construct(i,[e]){const t=e;return new IA(t)},get(i,e){return Pne(e)}}),Cz=(i,e)=>{if(!r4)return{start:()=>{},stop:()=>{},started:LT(!1)};const t=(e==null?void 0:e.invalidate)??!0,n=Hu("threlte-internal-context"),r={fn:i,order:e==null?void 0:e.order,debugFrameloopMessage:e==null?void 0:e.debugFrameloopMessage,invalidate:t},s=Os(!1),o=()=>{t?n.autoFrameHandlers.delete(r):n.manualFrameHandlers.delete(r),n.allFrameHandlers.delete(r),s.set(!1)},a=()=>{t?n.autoFrameHandlers.add(r):n.manualFrameHandlers.add(r),n.allFrameHandlers.add(r),n.allFrameHandlersNeedSortCheck=!0,s.set(!0)};return((e==null?void 0:e.autostart)??!0)&&a(),ko(()=>{o()}),{start:a,stop:o,started:{subscribe:s.subscribe}}},kne=(i,e)=>{if(!r4)return;const t=Hu("threlte-internal-context"),n={fn:i,order:e==null?void 0:e.order};t.renderHandlers.add(n),t.renderHandlersNeedSortCheck=!0,ko(()=>{t.renderHandlers.delete(n)})},Ez=()=>{const i=h2(),e=Os(void 0);return NA(e,t=>{t&&Object.entries(i.$$.callbacks).forEach(n=>{const[r,s]=n;r in t.$$.callbacks&&Array.isArray(t.$$.callbacks[r])?t.$$.callbacks[r].push(...s):t.$$.callbacks[r]=s})}),e},Rne=()=>{const i=h2();return{hasEventListeners:t=>{const n=i.$$.callbacks;return t in n&&n[t].length>0}}},C_=new oe,UA=new oe,One=new oe,Lne=(i,e,t)=>{const n=C_.setFromMatrixPosition(i.matrixWorld);n.project(e);const r=t.width/2,s=t.height/2;return[n.x*r+r,-(n.y*s)+s]},Dne=(i,e)=>{const t=C_.setFromMatrixPosition(i.matrixWorld),n=UA.setFromMatrixPosition(e.matrixWorld),r=t.sub(n),s=e.getWorldDirection(One);return r.angleTo(s)>Math.PI/2},zne=(i,e,t,n)=>{const r=C_.setFromMatrixPosition(i.matrixWorld),s=r.clone();s.project(e),t.setFromCamera(s,e);const o=t.intersectObjects(n,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0},Ine=(i,e)=>{if(e instanceof od)return e.zoom;if(e instanceof pr){const t=C_.setFromMatrixPosition(i.matrixWorld),n=UA.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(n);return 1/(2*Math.tan(r/2)*s)}else return 1},Nne=(i,e,t)=>{if(e instanceof pr||e instanceof od){const n=C_.setFromMatrixPosition(i.matrixWorld),r=UA.setFromMatrixPosition(e.matrixWorld),s=n.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}},AE=i=>Math.abs(i)<1e-10?0:i,Tz=(i,e,t="")=>{let n="matrix3d(";for(let r=0;r!==16;r++)n+=AE(e[r]*i.elements[r])+(r!==15?",":")");return t+n},Une=(i=>e=>Tz(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Fne=(i=>(e,t)=>Tz(e,i(t),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]),Bne=i=>i.split(/(?=[A-Z])/).join("-").toLowerCase(),Cu=i=>Object.entries(i).filter(([e,t])=>!!t).map(([e,t])=>`${Bne(e)}: ${t}`).join("; "),nc=(i,e)=>{i.update(t=>({...t,...e}))},Vne=i=>({ref:i[0]&4}),k8=i=>({ref:i[2]});function Hne(i){let e;const t=i[40].threlte,n=is(t,i,i[46],k8);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s[0]&4|s[1]&32768)&&rs(n,t,r,r[46],e?os(t,r[46],s,Vne):ss(r[46]),k8)},i(r){e||(Ue(n,r),e=!0)},o(r){Ye(n,r),e=!1},d(r){n&&n.d(r)}}}function qne(i){let e=i[1],t,n,r=i[1]&&vM(i);return{c(){r&&r.c(),t=Zs()},l(s){r&&r.l(s),t=Zs()},m(s,o){r&&r.m(s,o),Ze(s,t,o),n=!0},p(s,o){s[1]?e?Gn(e,s[1])?(r.d(1),r=vM(s),e=s[1],r.c(),r.m(t.parentNode,t)):r.p(s,o):(r=vM(s),e=s[1],r.c(),r.m(t.parentNode,t)):e&&(r.d(1),r=null,e=s[1])},i(s){n||(Ue(r,s),n=!0)},o(s){Ye(r,s),n=!1},d(s){s&&fe(t),r&&r.d(s)}}}function Gne(i){let e=i[1],t,n,r=i[1]&&_M(i);return{c(){r&&r.c(),t=Zs()},l(s){r&&r.l(s),t=Zs()},m(s,o){r&&r.m(s,o),Ze(s,t,o),n=!0},p(s,o){s[1]?e?Gn(e,s[1])?(r.d(1),r=_M(s),e=s[1],r.c(),r.m(t.parentNode,t)):r.p(s,o):(r=_M(s),e=s[1],r.c(),r.m(t.parentNode,t)):e&&(r.d(1),r=null,e=s[1])},i(s){n||(Ue(r,s),n=!0)},o(s){Ye(r,s),n=!1},d(s){s&&fe(t),r&&r.d(s)}}}function R8(i){let e;const t=i[40].default,n=is(t,i,i[46],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s[1]&32768)&&rs(n,t,r,r[46],e?os(t,r[46],s,null):ss(r[46]),null)},i(r){e||(Ue(n,r),e=!0)},o(r){Ye(n,r),e=!1},d(r){n&&n.d(r)}}}function vM(i){let e,t,n,r,s,o,a,l=i[6]&&R8(i),c=[{style:r=Cu(i[11])}],u={};for(let h=0;h<c.length;h+=1)u=Jn(u,c[h]);return{c(){e=bt(i[1]),t=bt("div"),l&&l.c(),this.h()},l(h){e=yt(h,(i[1]||"null").toUpperCase(),{style:!0});var d=Jt(e);t=yt(d,"DIV",{style:!0});var f=Jt(t);l&&l.l(f),f.forEach(fe),d.forEach(fe),this.h()},h(){$e(t,"style",n=Cu(i[12])),yw(i[1])(e,u)},m(h,d){Ze(h,e,d),Ct(e,t),l&&l.m(t,null),i[45](e),s=!0,o||(a=[Pl(i[23].call(null,e)),Pl(i[22].call(null,e))],o=!0)},p(h,d){h[6]?l?(l.p(h,d),d[0]&64&&Ue(l,1)):(l=R8(h),l.c(),Ue(l,1),l.m(t,null)):l&&(rl(),Ye(l,1,1,()=>{l=null}),il()),(!s||d[0]&4096&&n!==(n=Cu(h[12])))&&$e(t,"style",n),yw(h[1])(e,u=_s(c,[(!s||d[0]&2048&&r!==(r=Cu(h[11])))&&{style:r}]))},i(h){s||(Ue(l),s=!0)},o(h){Ye(l),s=!1},d(h){h&&fe(e),l&&l.d(),i[45](null),o=!1,p_(a)}}}function O8(i){let e;const t=i[40].default,n=is(t,i,i[46],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s[1]&32768)&&rs(n,t,r,r[46],e?os(t,r[46],s,null):ss(r[46]),null)},i(r){e||(Ue(n,r),e=!0)},o(r){Ye(n,r),e=!1},d(r){n&&n.d(r)}}}function _M(i){let e,t,n,r,s,o,a,l,c,u=i[6]&&O8(i),h=[{style:o=Cu(i[8])}],d={};for(let f=0;f<h.length;f+=1)d=Jn(d,h[f]);return{c(){e=bt(i[1]),t=bt("div"),n=bt("div"),u&&u.c(),this.h()},l(f){e=yt(f,(i[1]||"null").toUpperCase(),{style:!0});var g=Jt(e);t=yt(g,"DIV",{style:!0});var v=Jt(t);n=yt(v,"DIV",{style:!0});var y=Jt(n);u&&u.l(y),y.forEach(fe),v.forEach(fe),g.forEach(fe),this.h()},h(){$e(n,"style",r=Cu(i[10])),$e(t,"style",s=Cu(i[9])),yw(i[1])(e,d)},m(f,g){Ze(f,e,g),Ct(e,t),Ct(t,n),u&&u.m(n,null),i[42](n),i[43](t),i[44](e),a=!0,l||(c=Pl(i[23].call(null,e)),l=!0)},p(f,g){f[6]?u?(u.p(f,g),g[0]&64&&Ue(u,1)):(u=O8(f),u.c(),Ue(u,1),u.m(n,null)):u&&(rl(),Ye(u,1,1,()=>{u=null}),il()),(!a||g[0]&1024&&r!==(r=Cu(f[10])))&&$e(n,"style",r),(!a||g[0]&512&&s!==(s=Cu(f[9])))&&$e(t,"style",s),yw(f[1])(e,d=_s(h,[(!a||g[0]&256&&o!==(o=Cu(f[8])))&&{style:o}]))},i(f){a||(Ue(u),a=!0)},o(f){Ye(u),a=!1},d(f){f&&fe(e),u&&u.d(),i[42](null),i[43](null),i[44](null),l=!1,c()}}}function Wne(i){let e,t,n,r,s,o;const a=[{is:i[2]},i[25]];let l={$$slots:{default:[Hne,({ref:d})=>({2:d}),({ref:d})=>[d?4:0]]},$$scope:{ctx:i}};for(let d=0;d<a.length;d+=1)l=Jn(l,a[d]);e=new Jp({props:l}),i[41](e);const c=[Gne,qne],u=[];function h(d,f){return d[0]?0:1}return n=h(i),r=u[n]=c[n](i),{c(){xt(e.$$.fragment),t=Nt(),r.c(),s=Zs()},l(d){wt(e.$$.fragment,d),t=Ut(d),r.l(d),s=Zs()},m(d,f){St(e,d,f),Ze(d,t,f),u[n].m(d,f),Ze(d,s,f),o=!0},p(d,f){const g=f[0]&33554436?_s(a,[f[0]&4&&{is:d[2]},f[0]&33554432&&sd(d[25])]):{};f[0]&4|f[1]&32768&&(g.$$scope={dirty:f,ctx:d}),e.$set(g);let v=n;n=h(d),n===v?u[n].p(d,f):(rl(),Ye(u[v],1,1,()=>{u[v]=null}),il(),r=u[n],r?r.p(d,f):(r=u[n]=c[n](d),r.c()),Ue(r,1),r.m(s.parentNode,s))},i(d){o||(Ue(e.$$.fragment,d),Ue(r),o=!0)},o(d){Ye(e.$$.fragment,d),Ye(r),o=!1},d(d){d&&(fe(t),fe(s)),i[41](null),Mt(e,d),u[n].d(d)}}}function jne(i,e,t){const n=["transform","calculatePosition","eps","occlude","zIndexRange","sprite","pointerEvents","center","fullscreen","distanceFactor","as","portal","ref","visible"];let r=cf(e,n),s,o,a,l,c,u,h,d,f,g,{$$slots:v={},$$scope:y}=e,{transform:_=!1}=e,{calculatePosition:S=Lne}=e,{eps:w=.001}=e,{occlude:C=!1}=e,{zIndexRange:E=[16777271,0]}=e,{sprite:k=!1}=e,{pointerEvents:O="auto"}=e,{center:R=!1}=e,{fullscreen:A=!1}=e,{distanceFactor:D=void 0}=e,{as:I="div"}=e,{portal:q=void 0}=e;const j=zA();let{ref:Y=new Dp}=e;const{renderer:F,camera:re,scene:ee,size:J}=Pf();Mn(i,re,ve=>t(50,o=ve)),Mn(i,J,ve=>t(37,s=ve));const Ee=()=>{if(!(o instanceof pr)&&!(o instanceof od))throw new Error("Only PerspectiveCamera or OrthographicCamera supported for component <HTML>");return o},le=new vz;let ie=[0,0],be=0,{visible:Je=!0}=e,Xe=document.createElement(I),Be,vt;const{hasEventListeners:at}=Rne();let Le=typeof C=="boolean"&&C===!0?[ee]:Array.isArray(C)?C:void 0;const Ot=Gc(J,ve=>ve.width/2);Mn(i,Ot,ve=>t(39,l=ve));const ft=Gc(J,ve=>ve.height/2);Mn(i,ft,ve=>t(38,a=ve));let rt={common:{el:Os({})},transform:{el:Os({position:"absolute",top:"0",left:"0",pointerEvents:"none",overflow:"hidden",display:"block",width:`${s.width}px`,height:`${s.height}px`}),outerRef:Os({position:"absolute",top:"0",left:"0",width:`${s.width}px`,height:`${s.height}px`,transformStyle:"preserve-3d",pointerEvents:"none"}),innerRef:Os({position:"absolute",pointerEvents:O})},noTransform:{el:Os({}),div:Os({position:"absolute",transform:R?"translate3d(-50%,-50%,0)":"none",top:A?`${-a}px`:void 0,left:A?`${-l}px`:void 0,width:A?`${s.width}px`:void 0,height:A?`${s.height}px`:void 0})}};const tt=Gc([rt.transform.el,rt.common.el],([ve,ut])=>({...ve,...ut}));Mn(i,tt,ve=>t(8,u=ve));const se=Gc(rt.transform.outerRef,ve=>ve);Mn(i,se,ve=>t(9,h=ve));const ke=Gc(rt.transform.innerRef,ve=>ve);Mn(i,ke,ve=>t(10,d=ve));const ae=Gc(rt.noTransform.el,ve=>ve);Mn(i,ae,ve=>t(11,f=ve));const xe=Gc(rt.noTransform.div,ve=>ve);Mn(i,xe,ve=>t(12,g=ve));const Ie=()=>{let ve=!0,ut=Y.parent;e:for(;ut;){if("visible"in ut&&!ut.visible){ve=!1;break e}ut=ut.parent}return ve};let dt=Ie();Cz(async()=>{t(6,dt=Ie());const ve=Ee();ve.updateMatrixWorld(),Y.updateWorldMatrix(!0,!1);const ut=_?ie:S(Y,ve,s);if(_||Math.abs(be-ve.zoom)>w||Math.abs(ie[0]-ut[0])>w||Math.abs(ie[1]-ut[1])>w){const Zt=Dne(Y,ve),we=Je;if(Le){const Se=zne(Y,ve,le,Le);t(26,Je=Se&&!Zt)}else t(26,Je=!Zt);if(we!==Je&&(at("visibilitychange")?j("visibilitychange",Je):nc(rt.common.el,{display:Je?"block":"none"})),nc(rt.common.el,{zIndex:`${Nne(Y,ve,E)}`}),_){const Se=ve.projectionMatrix.elements[5]*a,{isOrthographicCamera:Tt,top:zt,left:Vt,bottom:Gt,right:Dt}=ve;let Yt=Y.matrixWorld;if(k&&(Yt=ve.matrixWorldInverse.clone().transpose().copyPosition(Yt).scale(Y.scale),Yt.elements[3]=Yt.elements[7]=Yt.elements[11]=0,Yt.elements[15]=1),nc(rt.transform.el,{perspective:Tt?"":`${Se}px`}),Be&&vt){const Yn=Tt?`scale(${Se}) translate(${AE(-(Dt+Vt)/2)}px,${AE((zt+Gt)/2)}px)`:`translateZ(${Se}px)`,Me=Une(ve.matrixWorldInverse);nc(rt.transform.outerRef,{transform:`${Yn}${Me}translate(${l}px, ${a}px)`}),nc(rt.transform.innerRef,{transform:Fne(Yt,1/((D||10)/400))})}}else{const Se=D===void 0?1:Ine(Y,ve)*D;nc(rt.noTransform.el,{transform:`translate3d(${ut[0]}px, ${ut[1]}px, 0) scale(${Se})`})}ie=ut,be=ve.zoom}},{debugFrameloopMessage:"HTML: tracking parent"});const nt=ve=>{if(!Y||_)return;ee.updateMatrixWorld();const ut=S(Y,o,s);nc(rt.noTransform.el,{position:"absolute",top:"0",left:"0",transform:`translate3d(${ut[0]}px, ${ut[1]}px, 0)`,transformOrigin:"0 0"})},me=ve=>{if(!F){console.warn("HTML: renderer is undefined. Is this component a child to <Canvas>?");return}const ut=q??F.domElement.parentElement;if(!ut){console.warn("HTML: target is undefined.");return}return ut.appendChild(ve),{destroy:()=>{ve.parentNode&&ve.parentNode.removeChild(ve)}}},ue=Ez();Mn(i,ue,ve=>t(7,c=ve));function Pe(ve){ja[ve?"unshift":"push"](()=>{c=ve,ue.set(c)})}function U(ve){ja[ve?"unshift":"push"](()=>{vt=ve,t(5,vt)})}function V(ve){ja[ve?"unshift":"push"](()=>{Be=ve,t(4,Be)})}function Ve(ve){ja[ve?"unshift":"push"](()=>{Xe=ve,t(3,Xe)})}function st(ve){ja[ve?"unshift":"push"](()=>{Xe=ve,t(3,Xe)})}return i.$$set=ve=>{e=Jn(Jn({},e),Oo(ve)),t(25,r=cf(e,n)),"transform"in ve&&t(0,_=ve.transform),"calculatePosition"in ve&&t(27,S=ve.calculatePosition),"eps"in ve&&t(28,w=ve.eps),"occlude"in ve&&t(29,C=ve.occlude),"zIndexRange"in ve&&t(30,E=ve.zIndexRange),"sprite"in ve&&t(31,k=ve.sprite),"pointerEvents"in ve&&t(32,O=ve.pointerEvents),"center"in ve&&t(33,R=ve.center),"fullscreen"in ve&&t(34,A=ve.fullscreen),"distanceFactor"in ve&&t(35,D=ve.distanceFactor),"as"in ve&&t(1,I=ve.as),"portal"in ve&&t(36,q=ve.portal),"ref"in ve&&t(2,Y=ve.ref),"visible"in ve&&t(26,Je=ve.visible),"$$scope"in ve&&t(46,y=ve.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&536870912&&(Le=typeof C=="boolean"&&C===!0?[ee]:Array.isArray(C)?C:void 0),i.$$.dirty[1]&64&&nc(rt.transform.el,{width:`${s.width}px`,height:`${s.height}px`}),i.$$.dirty[1]&64&&nc(rt.transform.outerRef,{width:`${s.width}px`,height:`${s.height}px`}),i.$$.dirty[1]&2&&nc(rt.transform.innerRef,{pointerEvents:O}),i.$$.dirty[1]&4&&nc(rt.noTransform.div,{transform:R?"translate3d(-50%, -50%, 0)":"none"}),i.$$.dirty[1]&456&&nc(rt.noTransform.div,{top:A?`${-a}px`:void 0,left:A?`${-l}px`:void 0,width:A?`${s.width}px`:void 0,height:A?`${s.height}px`:void 0})},[_,I,Y,Xe,Be,vt,dt,c,u,h,d,f,g,re,J,Ot,ft,tt,se,ke,ae,xe,nt,me,ue,r,Je,S,w,C,E,k,O,R,A,D,q,s,a,l,v,Pe,U,V,Ve,st,y]}let Az=class extends oi{constructor(e){super(),ai(this,e,jne,Wne,Gn,{transform:0,calculatePosition:27,eps:28,occlude:29,zIndexRange:30,sprite:31,pointerEvents:32,center:33,fullscreen:34,distanceFactor:35,as:1,portal:36,ref:2,visible:26},null,[-1,-1])}};const $ne=i=>({ref:i&1}),L8=i=>({ref:i[0]});function Xne(i){let e,t,n;e=new Jp.PlaneGeometry({props:{args:typeof i[1]=="number"?[i[1],i[1]]:i[1]}});const r=i[17].default,s=is(r,i,i[20],L8);return{c(){xt(e.$$.fragment),t=Nt(),s&&s.c()},l(o){wt(e.$$.fragment,o),t=Ut(o),s&&s.l(o)},m(o,a){St(e,o,a),Ze(o,t,a),s&&s.m(o,a),n=!0},p(o,a){const l={};a&2&&(l.args=typeof o[1]=="number"?[o[1],o[1]]:o[1]),e.$set(l),s&&s.p&&(!n||a&1048577)&&rs(s,r,o,o[20],n?os(r,o[20],a,$ne):ss(o[20]),L8)},i(o){n||(Ue(e.$$.fragment,o),Ue(s,o),n=!0)},o(o){Ye(e.$$.fragment,o),Ye(s,o),n=!1},d(o){o&&fe(t),Mt(e,o),s&&s.d(o)}}}function Yne(i){let e,t,n;const r=[{material:i[2]},{frustumCulled:!1},i[5]];function s(a){i[19](a)}let o={$$slots:{default:[Xne,({ref:a})=>({0:a}),({ref:a})=>a?1:0]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)o=Jn(o,r[a]);return i[0]!==void 0&&(o.ref=i[0]),e=new Jp.Mesh({props:o}),i[18](e),ja.push(()=>f2(e,"ref",s)),{c(){xt(e.$$.fragment)},l(a){wt(e.$$.fragment,a)},m(a,l){St(e,a,l),n=!0},p(a,[l]){const c=l&36?_s(r,[l&4&&{material:a[2]},r[1],l&32&&sd(a[5])]):{};l&1048579&&(c.$$scope={dirty:l,ctx:a}),!t&&l&1&&(t=!0,c.ref=a[0],d2(()=>t=!1)),e.$set(c)},i(a){n||(Ue(e.$$.fragment,a),n=!0)},o(a){Ye(e.$$.fragment,a),n=!1},d(a){i[18](null),Mt(e,a)}}}function Kne(i,e,t){let n;const r=["cellColor","sectionColor","cellSize","sectionSize","axes","gridSize","followCamera","infiniteGrid","fadeDistance","fadeStrength","cellThickness","sectionThickness","ref"];let s=cf(e,r),o,{$$slots:a={},$$scope:l}=e,{cellColor:c="#000000"}=e,{sectionColor:u="#0000ee"}=e,{cellSize:h=1}=e,{sectionSize:d=10}=e,{axes:f="xzy"}=e,{gridSize:g=[20,20]}=e,{followCamera:v=!1}=e,{infiniteGrid:y=!1}=e,{fadeDistance:_=100}=e,{fadeStrength:S=1}=e,{cellThickness:w=1}=e,{sectionThickness:C=2}=e,{ref:E}=e;const{invalidate:k}=Pf(),O=I=>new Bo({side:xs,uniforms:{uSize1:{value:h},uSize2:{value:d},uColor1:{value:new qt(c)},uColor2:{value:new qt(u)},uFadeDistance:{value:_},uFadeStrength:{value:S},uThickness1:{value:1},uThickness2:{value:1},uInfiniteGrid:{value:y?1:0},uFollowCamera:{value:0}},transparent:!0,vertexShader:`
      varying vec3 worldPosition;
      uniform float uFadeDistance;
      uniform float uInfiniteGrid;
      uniform float uFollowCamera;

      void main() {

        vec3 pos = position.${I} * (1. + uFadeDistance * uInfiniteGrid);
        pos.${I.slice(0,2)} += (cameraPosition.${I.slice(0,2)} * uFollowCamera);

        worldPosition = pos;

        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);

      }`,fragmentShader:`
      varying vec3 worldPosition;
      uniform float uSize1;
      uniform float uSize2;
      uniform vec3 uColor1;
      uniform vec3 uColor2;
      uniform float uFadeDistance;
      uniform float uFadeStrength;
      uniform float uThickness1;
      uniform float uThickness2;
      uniform float uInfiniteGrid;

      float getGrid(float size, float thickness) {

        vec2 r = worldPosition.${I.slice(0,2)} / size;

        vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
        float line = min(grid.x, grid.y) + 1. - thickness;

        return 1.0 - min(line, 1.);
      }

      void main() {

        float g1 = getGrid(uSize1, uThickness1);
        float g2 = getGrid(uSize2, uThickness2);

        float d = 1.0 - min(distance(cameraPosition.${I.slice(0,2)}, worldPosition.${I.slice(0,2)}) / uFadeDistance, 1.);
        vec3 color = mix(uColor1, uColor2, min(1.,uThickness2*g2));

        gl_FragColor = vec4(color, (g1 + g2) * pow(d,uFadeStrength));
        gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);

        if(gl_FragColor.a <= 0.0)
          discard;
        #include <tonemapping_fragment>
        #include <encodings_fragment>
      }
       `,extensions:{derivatives:!0}}),R=Ez();Mn(i,R,I=>t(3,o=I));function A(I){ja[I?"unshift":"push"](()=>{o=I,R.set(o)})}function D(I){E=I,t(0,E)}return i.$$set=I=>{e=Jn(Jn({},e),Oo(I)),t(5,s=cf(e,r)),"cellColor"in I&&t(6,c=I.cellColor),"sectionColor"in I&&t(7,u=I.sectionColor),"cellSize"in I&&t(8,h=I.cellSize),"sectionSize"in I&&t(9,d=I.sectionSize),"axes"in I&&t(10,f=I.axes),"gridSize"in I&&t(1,g=I.gridSize),"followCamera"in I&&t(11,v=I.followCamera),"infiniteGrid"in I&&t(12,y=I.infiniteGrid),"fadeDistance"in I&&t(13,_=I.fadeDistance),"fadeStrength"in I&&t(14,S=I.fadeStrength),"cellThickness"in I&&t(15,w=I.cellThickness),"sectionThickness"in I&&t(16,C=I.sectionThickness),"ref"in I&&t(0,E=I.ref),"$$scope"in I&&t(20,l=I.$$scope)},i.$$.update=()=>{i.$$.dirty&1024&&t(2,n=O(f)),i.$$.dirty&131008&&(t(2,n.uniforms.uSize1={value:h},n),t(2,n.uniforms.uSize2={value:d},n),t(2,n.uniforms.uColor1={value:new qt(c)},n),t(2,n.uniforms.uColor2={value:new qt(u)},n),t(2,n.uniforms.uFadeDistance={value:_},n),t(2,n.uniforms.uFadeStrength={value:S},n),t(2,n.uniforms.uThickness1={value:w},n),t(2,n.uniforms.uThickness2={value:C},n),t(2,n.uniforms.uFollowCamera={value:v?1:0},n),t(2,n.uniforms.uInfiniteGrid={value:y?1:0},n),k("Grid uniforms changed")),i.$$.dirty&4&&n&&k("Grid axes changed")},[E,g,n,o,R,s,c,u,h,d,f,v,y,_,S,w,C,a,A,D,l]}let Pz=class extends oi{constructor(e){super(),ai(this,e,Kne,Yne,Gn,{cellColor:6,sectionColor:7,cellSize:8,sectionSize:9,axes:10,gridSize:1,followCamera:11,infiniteGrid:12,fadeDistance:13,fadeStrength:14,cellThickness:15,sectionThickness:16,ref:0})}};var Tw={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Tw.exports;(function(i,e){(function(){var t,n="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",h=1,d=2,f=4,g=1,v=2,y=1,_=2,S=4,w=8,C=16,E=32,k=64,O=128,R=256,A=512,D=30,I="...",q=800,j=16,Y=1,F=2,re=3,ee=1/0,J=9007199254740991,Ee=17976931348623157e292,le=0/0,ie=4294967295,be=ie-1,Je=ie>>>1,Xe=[["ary",O],["bind",y],["bindKey",_],["curry",w],["curryRight",C],["flip",A],["partial",E],["partialRight",k],["rearg",R]],Be="[object Arguments]",vt="[object Array]",at="[object AsyncFunction]",Le="[object Boolean]",Ot="[object Date]",ft="[object DOMException]",rt="[object Error]",tt="[object Function]",se="[object GeneratorFunction]",ke="[object Map]",ae="[object Number]",xe="[object Null]",Ie="[object Object]",dt="[object Promise]",nt="[object Proxy]",me="[object RegExp]",ue="[object Set]",Pe="[object String]",U="[object Symbol]",V="[object Undefined]",Ve="[object WeakMap]",st="[object WeakSet]",ve="[object ArrayBuffer]",ut="[object DataView]",Zt="[object Float32Array]",we="[object Float64Array]",Se="[object Int8Array]",Tt="[object Int16Array]",zt="[object Int32Array]",Vt="[object Uint8Array]",Gt="[object Uint8ClampedArray]",Dt="[object Uint16Array]",Yt="[object Uint32Array]",Yn=/\b__p \+= '';/g,Me=/\b(__p \+=) '' \+/g,At=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qe=/&(?:amp|lt|gt|quot|#39);/g,kt=/[&<>"']/g,Lt=RegExp(qe.source),Te=RegExp(kt.source),pn=/<%-([\s\S]+?)%>/g,mi=/<%([\s\S]+?)%>/g,as=/<%=([\s\S]+?)%>/g,Wn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ls=/^\w*$/,Gi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,to=/[\\^$.*+?()[\]{}|]/g,dl=RegExp(to.source),Hl=/^\s+/,Ho=/\s/,fl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Sc=/\{\n\/\* \[wrapped with (.+)\] \*/,au=/,? & /,pd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,oa=/[()=,{}\[\]\/\s]/,lu=/\\(\\)?/g,Ms=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ne=/\w*$/,je=/^[-+]0x[0-9a-f]+$/i,et=/^0b[01]+$/i,Ne=/^\[object .+?Constructor\]$/,ot=/^0o[0-7]+$/i,Wt=/^(?:0|[1-9]\d*)$/,an=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tn=/($^)/,mn=/['\n\r\u2028\u2029\\]/g,kn="\\ud800-\\udfff",hn="\\u0300-\\u036f",gn="\\ufe20-\\ufe2f",Wi="\\u20d0-\\u20ff",xi=hn+gn+Wi,Wr="\\u2700-\\u27bf",zs="a-z\\xdf-\\xf6\\xf8-\\xff",zn="\\xac\\xb1\\xd7\\xf7",_n="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",aa="\\u2000-\\u206f",gr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qi="A-Z\\xc0-\\xd6\\xd8-\\xde",zr="\\ufe0e\\ufe0f",ql=zn+_n+aa+gr,pl="[']",er="["+kn+"]",qo="["+ql+"]",ml="["+xi+"]",Is="\\d+",Mc="["+Wr+"]",ih="["+zs+"]",Gl="[^"+kn+ql+Is+Wr+zs+Qi+"]",Ir="\\ud83c[\\udffb-\\udfff]",cs="(?:"+ml+"|"+Ir+")",rh="[^"+kn+"]",Wl="(?:\\ud83c[\\udde6-\\uddff]){2}",mo="[\\ud800-\\udbff][\\udc00-\\udfff]",go="["+Qi+"]",gl="\\u200d",cu="(?:"+ih+"|"+Gl+")",Cc="(?:"+go+"|"+Gl+")",Fn="(?:"+pl+"(?:d|ll|m|re|s|t|ve))?",md="(?:"+pl+"(?:D|LL|M|RE|S|T|VE))?",Ta=cs+"?",gd="["+zr+"]?",uu="(?:"+gl+"(?:"+[rh,Wl,mo].join("|")+")"+gd+Ta+")*",vd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",hu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",jl=gd+Ta+uu,_d="(?:"+[Mc,Wl,mo].join("|")+")"+jl,T0="(?:"+[rh+ml+"?",ml,Wl,mo,er].join("|")+")",$l=RegExp(pl,"g"),vo=RegExp(ml,"g"),bd=RegExp(Ir+"(?="+Ir+")|"+T0+jl,"g"),Bf=RegExp([go+"?"+ih+"+"+Fn+"(?="+[qo,go,"$"].join("|")+")",Cc+"+"+md+"(?="+[qo,go+cu,"$"].join("|")+")",go+"?"+cu+"+"+Fn,go+"+"+md,hu,vd,Is,_d].join("|"),"g"),A0=RegExp("["+gl+kn+xi+zr+"]"),no=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ec=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yd=-1,Fi={};Fi[Zt]=Fi[we]=Fi[Se]=Fi[Tt]=Fi[zt]=Fi[Vt]=Fi[Gt]=Fi[Dt]=Fi[Yt]=!0,Fi[Be]=Fi[vt]=Fi[ve]=Fi[Le]=Fi[ut]=Fi[Ot]=Fi[rt]=Fi[tt]=Fi[ke]=Fi[ae]=Fi[Ie]=Fi[me]=Fi[ue]=Fi[Pe]=Fi[Ve]=!1;var Xi={};Xi[Be]=Xi[vt]=Xi[ve]=Xi[ut]=Xi[Le]=Xi[Ot]=Xi[Zt]=Xi[we]=Xi[Se]=Xi[Tt]=Xi[zt]=Xi[ke]=Xi[ae]=Xi[Ie]=Xi[me]=Xi[ue]=Xi[Pe]=Xi[U]=Xi[Vt]=Xi[Gt]=Xi[Dt]=Xi[Yt]=!0,Xi[rt]=Xi[tt]=Xi[Ve]=!1;var la={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Vf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},du={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},vl=parseFloat,Hf=parseInt,sh=typeof it=="object"&&it&&it.Object===Object&&it,Zg=typeof self=="object"&&self&&self.Object===Object&&self,jr=sh||Zg||Function("return this")(),qf=e&&!e.nodeType&&e,Go=qf&&!0&&i&&!i.nodeType&&i,oh=Go&&Go.exports===qf,Gf=oh&&sh.process,io=function(){try{var _e=Go&&Go.require&&Go.require("util").types;return _e||Gf&&Gf.binding&&Gf.binding("util")}catch{}}(),Wf=io&&io.isArrayBuffer,P0=io&&io.isDate,jf=io&&io.isMap,$f=io&&io.isRegExp,ah=io&&io.isSet,xd=io&&io.isTypedArray;function vn(_e,Ke,We){switch(We.length){case 0:return _e.call(Ke);case 1:return _e.call(Ke,We[0]);case 2:return _e.call(Ke,We[0],We[1]);case 3:return _e.call(Ke,We[0],We[1],We[2])}return _e.apply(Ke,We)}function k0(_e,Ke,We,It){for(var Oe=-1,Ln=_e==null?0:_e.length;++Oe<Ln;){var zi=_e[Oe];Ke(It,zi,We(zi),_e)}return It}function _o(_e,Ke){for(var We=-1,It=_e==null?0:_e.length;++We<It&&Ke(_e[We],We,_e)!==!1;);return _e}function lh(_e,Ke){for(var We=_e==null?0:_e.length;We--&&Ke(_e[We],We,_e)!==!1;);return _e}function R0(_e,Ke){for(var We=-1,It=_e==null?0:_e.length;++We<It;)if(!Ke(_e[We],We,_e))return!1;return!0}function Cs(_e,Ke){for(var We=-1,It=_e==null?0:_e.length,Oe=0,Ln=[];++We<It;){var zi=_e[We];Ke(zi,We,_e)&&(Ln[Oe++]=zi)}return Ln}function ch(_e,Ke){var We=_e==null?0:_e.length;return!!We&&Bt(_e,Ke,0)>-1}function wd(_e,Ke,We){for(var It=-1,Oe=_e==null?0:_e.length;++It<Oe;)if(We(Ke,_e[It]))return!0;return!1}function Bn(_e,Ke){for(var We=-1,It=_e==null?0:_e.length,Oe=Array(It);++We<It;)Oe[We]=Ke(_e[We],We,_e);return Oe}function Xl(_e,Ke){for(var We=-1,It=Ke.length,Oe=_e.length;++We<It;)_e[Oe+We]=Ke[We];return _e}function De(_e,Ke,We,It){var Oe=-1,Ln=_e==null?0:_e.length;for(It&&Ln&&(We=_e[++Oe]);++Oe<Ln;)We=Ke(We,_e[Oe],Oe,_e);return We}function $(_e,Ke,We,It){var Oe=_e==null?0:_e.length;for(It&&Oe&&(We=_e[--Oe]);Oe--;)We=Ke(We,_e[Oe],Oe,_e);return We}function ge(_e,Ke){for(var We=-1,It=_e==null?0:_e.length;++We<It;)if(Ke(_e[We],We,_e))return!0;return!1}var Q=rn("length");function te(_e){return _e.split("")}function Ae(_e){return _e.match(pd)||[]}function Qe(_e,Ke,We){var It;return We(_e,function(Oe,Ln,zi){if(Ke(Oe,Ln,zi))return It=Ln,!1}),It}function Ge(_e,Ke,We,It){for(var Oe=_e.length,Ln=We+(It?1:-1);It?Ln--:++Ln<Oe;)if(Ke(_e[Ln],Ln,_e))return Ln;return-1}function Bt(_e,Ke,We){return Ke===Ke?Tc(_e,Ke,We):Ge(_e,jn,We)}function wn(_e,Ke,We,It){for(var Oe=We-1,Ln=_e.length;++Oe<Ln;)if(It(_e[Oe],Ke))return Oe;return-1}function jn(_e){return _e!==_e}function nn(_e,Ke){var We=_e==null?0:_e.length;return We?Yi(_e,Ke)/We:le}function rn(_e){return function(Ke){return Ke==null?t:Ke[_e]}}function lt(_e){return function(Ke){return _e==null?t:_e[Ke]}}function ln(_e,Ke,We,It,Oe){return Oe(_e,function(Ln,zi,$t){We=It?(It=!1,Ln):Ke(We,Ln,zi,$t)}),We}function wi(_e,Ke){var We=_e.length;for(_e.sort(Ke);We--;)_e[We]=_e[We].value;return _e}function Yi(_e,Ke){for(var We,It=-1,Oe=_e.length;++It<Oe;){var Ln=Ke(_e[It]);Ln!==t&&(We=We===t?Ln:We+Ln)}return We}function sr(_e,Ke){for(var We=-1,It=Array(_e);++We<_e;)It[We]=Ke(We);return It}function or(_e,Ke){return Bn(Ke,function(We){return[We,_e[We]]})}function us(_e){return _e&&_e.slice(0,Us(_e)+1).replace(Hl,"")}function cn(_e){return function(Ke){return _e(Ke)}}function Ns(_e,Ke){return Bn(Ke,function(We){return _e[We]})}function ji(_e,Ke){return _e.has(Ke)}function bn(_e,Ke){for(var We=-1,It=_e.length;++We<It&&Bt(Ke,_e[We],0)>-1;);return We}function Nr(_e,Ke){for(var We=_e.length;We--&&Bt(Ke,_e[We],0)>-1;);return We}function Es(_e,Ke){for(var We=_e.length,It=0;We--;)_e[We]===Ke&&++It;return It}var un=lt(la),cr=lt(Vf);function En(_e){return"\\"+fu[_e]}function ca(_e,Ke){return _e==null?t:_e[Ke]}function ur(_e){return A0.test(_e)}function hs(_e){return no.test(_e)}function Ur(_e){for(var Ke,We=[];!(Ke=_e.next()).done;)We.push(Ke.value);return We}function gi(_e){var Ke=-1,We=Array(_e.size);return _e.forEach(function(It,Oe){We[++Ke]=[Oe,It]}),We}function hr(_e,Ke){return function(We){return _e(Ke(We))}}function Ki(_e,Ke){for(var We=-1,It=_e.length,Oe=0,Ln=[];++We<It;){var zi=_e[We];(zi===Ke||zi===u)&&(_e[We]=u,Ln[Oe++]=We)}return Ln}function Fe(_e){var Ke=-1,We=Array(_e.size);return _e.forEach(function(It){We[++Ke]=It}),We}function $r(_e){var Ke=-1,We=Array(_e.size);return _e.forEach(function(It){We[++Ke]=[It,It]}),We}function Tc(_e,Ke,We){for(var It=We-1,Oe=_e.length;++It<Oe;)if(_e[It]===Ke)return It;return-1}function bo(_e,Ke,We){for(var It=We+1;It--;)if(_e[It]===Ke)return It;return It}function Ts(_e){return ur(_e)?Fs(_e):Q(_e)}function Xr(_e){return ur(_e)?Bs(_e):te(_e)}function Us(_e){for(var Ke=_e.length;Ke--&&Ho.test(_e.charAt(Ke)););return Ke}var Fr=lt(du);function Fs(_e){for(var Ke=bd.lastIndex=0;bd.test(_e);)++Ke;return Ke}function Bs(_e){return _e.match(bd)||[]}function Yl(_e){return _e.match(Bf)||[]}var Br=function _e(Ke){Ke=Ke==null?jr:Vs.defaults(jr.Object(),Ke,Vs.pick(jr,Ec));var We=Ke.Array,It=Ke.Date,Oe=Ke.Error,Ln=Ke.Function,zi=Ke.Math,$t=Ke.Object,Bi=Ke.RegExp,Ac=Ke.String,ds=Ke.TypeError,Aa=We.prototype,vr=Ln.prototype,Si=$t.prototype,yo=Ke["__core-js_shared__"],ar=vr.toString,di=Si.hasOwnProperty,Pa=0,Wo=function(){var p=/[^.]+$/.exec(yo&&yo.keys&&yo.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),fs=Si.toString,Kl=ar.call($t),Pc=jr._,kc=Bi("^"+ar.call(di).replace(to,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ua=oh?Ke.Buffer:t,Hs=Ke.Symbol,jo=Ke.Uint8Array,fi=ua?ua.allocUnsafe:t,ka=hr($t.getPrototypeOf,$t),zo=$t.create,$o=Si.propertyIsEnumerable,ro=Aa.splice,_l=Hs?Hs.isConcatSpreadable:t,ha=Hs?Hs.iterator:t,qs=Hs?Hs.toStringTag:t,Rn=function(){try{var p=ep($t,"defineProperty");return p({},"",{}),p}catch{}}(),dn=Ke.clearTimeout!==jr.clearTimeout&&Ke.clearTimeout,bi=It&&It.now!==jr.Date.now&&It.now,_r=Ke.setTimeout!==jr.setTimeout&&Ke.setTimeout,Kt=zi.ceil,$n=zi.floor,fn=$t.getOwnPropertySymbols,Kn=ua?ua.isBuffer:t,Pr=Ke.isFinite,vi=Aa.join,kr=hr($t.keys,$t),li=zi.max,Mi=zi.min,br=It.now,Zi=Ke.parseInt,Io=zi.random,yr=Aa.reverse,Gs=ep(Ke,"DataView"),xo=ep(Ke,"Map"),so=ep(Ke,"Promise"),dr=ep(Ke,"Set"),fr=ep(Ke,"WeakMap"),da=ep($t,"create"),Rc=fr&&new fr,tr={},Yr=tp(Gs),Ra=tp(xo),Xf=tp(so),O0=tp(dr),Oc=tp(fr),No=Hs?Hs.prototype:t,fa=No?No.valueOf:t,uh=No?No.toString:t;function X(p){if(ps(p)&&!Xn(p)&&!(p instanceof _i)){if(p instanceof Oa)return p;if(di.call(p,"__wrapped__"))return aP(p)}return new Oa(p)}var pu=function(){function p(){}return function(b){if(!Kr(b))return{};if(zo)return zo(b);p.prototype=b;var T=new p;return p.prototype=t,T}}();function Yf(){}function Oa(p,b){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=t}X.templateSettings={escape:pn,evaluate:mi,interpolate:as,variable:"",imports:{_:X}},X.prototype=Yf.prototype,X.prototype.constructor=X,Oa.prototype=pu(Yf.prototype),Oa.prototype.constructor=Oa;function _i(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ie,this.__views__=[]}function A3(){var p=new _i(this.__wrapped__);return p.__actions__=za(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=za(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=za(this.__views__),p}function Jg(){if(this.__filtered__){var p=new _i(this);p.__dir__=-1,p.__filtered__=!0}else p=this.clone(),p.__dir__*=-1;return p}function P3(){var p=this.__wrapped__.value(),b=this.__dir__,T=Xn(p),z=b<0,H=T?p.length:0,Z=QH(0,H,this.__views__),de=Z.start,ye=Z.end,Re=ye-de,pt=z?ye:de-1,mt=this.__iteratees__,_t=mt.length,jt=0,on=Mi(Re,this.__takeCount__);if(!T||!z&&H==Re&&on==Re)return _u(p,this.__actions__);var Tn=[];e:for(;Re--&&jt<on;){pt+=b;for(var ci=-1,An=p[pt];++ci<_t;){var yi=mt[ci],Pi=yi.iteratee,wl=yi.type,ma=Pi(An);if(wl==F)An=ma;else if(!ma){if(wl==Y)continue e;break e}}Tn[jt++]=An}return Tn}_i.prototype=pu(Yf.prototype),_i.prototype.constructor=_i;function hh(p){var b=-1,T=p==null?0:p.length;for(this.clear();++b<T;){var z=p[b];this.set(z[0],z[1])}}function Qg(){this.__data__=da?da(null):{},this.size=0}function k3(p){var b=this.has(p)&&delete this.__data__[p];return this.size-=b?1:0,b}function R3(p){var b=this.__data__;if(da){var T=b[p];return T===l?t:T}return di.call(b,p)?b[p]:t}function O3(p){var b=this.__data__;return da?b[p]!==t:di.call(b,p)}function L3(p,b){var T=this.__data__;return this.size+=this.has(p)?0:1,T[p]=da&&b===t?l:b,this}hh.prototype.clear=Qg,hh.prototype.delete=k3,hh.prototype.get=R3,hh.prototype.has=O3,hh.prototype.set=L3;function Lc(p){var b=-1,T=p==null?0:p.length;for(this.clear();++b<T;){var z=p[b];this.set(z[0],z[1])}}function D3(){this.__data__=[],this.size=0}function z3(p){var b=this.__data__,T=yl(b,p);if(T<0)return!1;var z=b.length-1;return T==z?b.pop():ro.call(b,T,1),--this.size,!0}function I3(p){var b=this.__data__,T=yl(b,p);return T<0?t:b[T][1]}function N3(p){return yl(this.__data__,p)>-1}function U3(p,b){var T=this.__data__,z=yl(T,p);return z<0?(++this.size,T.push([p,b])):T[z][1]=b,this}Lc.prototype.clear=D3,Lc.prototype.delete=z3,Lc.prototype.get=I3,Lc.prototype.has=N3,Lc.prototype.set=U3;function Dc(p){var b=-1,T=p==null?0:p.length;for(this.clear();++b<T;){var z=p[b];this.set(z[0],z[1])}}function F3(){this.size=0,this.__data__={hash:new hh,map:new(xo||Lc),string:new hh}}function ev(p){var b=ry(this,p).delete(p);return this.size-=b?1:0,b}function B3(p){return ry(this,p).get(p)}function V3(p){return ry(this,p).has(p)}function H3(p,b){var T=ry(this,p),z=T.size;return T.set(p,b),this.size+=T.size==z?0:1,this}Dc.prototype.clear=F3,Dc.prototype.delete=ev,Dc.prototype.get=B3,Dc.prototype.has=V3,Dc.prototype.set=H3;function dh(p){var b=-1,T=p==null?0:p.length;for(this.__data__=new Dc;++b<T;)this.add(p[b])}function q3(p){return this.__data__.set(p,l),this}function G3(p){return this.__data__.has(p)}dh.prototype.add=dh.prototype.push=q3,dh.prototype.has=G3;function bl(p){var b=this.__data__=new Lc(p);this.size=b.size}function W3(){this.__data__=new Lc,this.size=0}function mu(p){var b=this.__data__,T=b.delete(p);return this.size=b.size,T}function Db(p){return this.__data__.get(p)}function j3(p){return this.__data__.has(p)}function $3(p,b){var T=this.__data__;if(T instanceof Lc){var z=T.__data__;if(!xo||z.length<r-1)return z.push([p,b]),this.size=++T.size,this;T=this.__data__=new Dc(z)}return T.set(p,b),this.size=T.size,this}bl.prototype.clear=W3,bl.prototype.delete=mu,bl.prototype.get=Db,bl.prototype.has=j3,bl.prototype.set=$3;function L0(p,b){var T=Xn(p),z=!T&&np(p),H=!T&&!z&&kd(p),Z=!T&&!z&&!H&&B0(p),de=T||z||H||Z,ye=de?sr(p.length,Ac):[],Re=ye.length;for(var pt in p)(b||di.call(p,pt))&&!(de&&(pt=="length"||H&&(pt=="offset"||pt=="parent")||Z&&(pt=="buffer"||pt=="byteLength"||pt=="byteOffset")||bh(pt,Re)))&&ye.push(pt);return ye}function tv(p){var b=p.length;return b?p[_v(0,b-1)]:t}function zb(p,b){return sy(za(p),gu(b,0,p.length))}function X3(p){return sy(za(p))}function nv(p,b,T){(T!==t&&!zc(p[b],T)||T===t&&!(b in p))&&wo(p,b,T)}function Kf(p,b,T){var z=p[b];(!(di.call(p,b)&&zc(z,T))||T===t&&!(b in p))&&wo(p,b,T)}function yl(p,b){for(var T=p.length;T--;)if(zc(p[T][0],b))return T;return-1}function Ib(p,b,T,z){return vu(p,function(H,Z,de){b(z,H,T(H),de)}),z}function fh(p,b){return p&&bu(b,Mo(b),p)}function Y3(p,b){return p&&bu(b,Na(b),p)}function wo(p,b,T){b=="__proto__"&&Rn?Rn(p,b,{configurable:!0,enumerable:!0,value:T,writable:!0}):p[b]=T}function iv(p,b){for(var T=-1,z=b.length,H=We(z),Z=p==null;++T<z;)H[T]=Z?t:AS(p,b[T]);return H}function gu(p,b,T){return p===p&&(T!==t&&(p=p<=T?p:T),b!==t&&(p=p>=b?p:b)),p}function La(p,b,T,z,H,Z){var de,ye=b&h,Re=b&d,pt=b&f;if(T&&(de=H?T(p,z,H,Z):T(p)),de!==t)return de;if(!Kr(p))return p;var mt=Xn(p);if(mt){if(de=tq(p),!ye)return za(p,de)}else{var _t=Xo(p),jt=_t==tt||_t==se;if(kd(p))return L6(p,ye);if(_t==Ie||_t==Be||jt&&!H){if(de=Re||jt?{}:J6(p),!ye)return Re?GH(p,Y3(de,p)):qH(p,fh(de,p))}else{if(!Xi[_t])return H?p:{};de=nq(p,_t,ye)}}Z||(Z=new bl);var on=Z.get(p);if(on)return on;Z.set(p,de),TP(p)?p.forEach(function(An){de.add(La(An,b,T,An,p,Z))}):CP(p)&&p.forEach(function(An,yi){de.set(yi,La(An,b,T,yi,p,Z))});var Tn=pt?Re?pS:fS:Re?Na:Mo,ci=mt?t:Tn(p);return _o(ci||p,function(An,yi){ci&&(yi=An,An=p[yi]),Kf(de,yi,La(An,b,T,yi,p,Z))}),de}function K3(p){var b=Mo(p);return function(T){return ph(T,p,b)}}function ph(p,b,T){var z=T.length;if(p==null)return!z;for(p=$t(p);z--;){var H=T[z],Z=b[H],de=p[H];if(de===t&&!(H in p)||!Z(de))return!1}return!0}function rv(p,b,T){if(typeof p!="function")throw new ds(o);return wv(function(){p.apply(t,T)},b)}function Zf(p,b,T,z){var H=-1,Z=ch,de=!0,ye=p.length,Re=[],pt=b.length;if(!ye)return Re;T&&(b=Bn(b,cn(T))),z?(Z=wd,de=!1):b.length>=r&&(Z=ji,de=!1,b=new dh(b));e:for(;++H<ye;){var mt=p[H],_t=T==null?mt:T(mt);if(mt=z||mt!==0?mt:0,de&&_t===_t){for(var jt=pt;jt--;)if(b[jt]===_t)continue e;Re.push(mt)}else Z(b,_t,z)||Re.push(mt)}return Re}var vu=U6(Zl),Nb=U6(lv,!0);function sv(p,b){var T=!0;return vu(p,function(z,H,Z){return T=!!b(z,H,Z),T}),T}function D0(p,b,T){for(var z=-1,H=p.length;++z<H;){var Z=p[z],de=b(Z);if(de!=null&&(ye===t?de===de&&!xl(de):T(de,ye)))var ye=de,Re=Z}return Re}function Sd(p,b,T,z){var H=p.length;for(T=ti(T),T<0&&(T=-T>H?0:H+T),z=z===t||z>H?H:ti(z),z<0&&(z+=H),z=T>z?0:PP(z);T<z;)p[T++]=b;return p}function ov(p,b){var T=[];return vu(p,function(z,H,Z){b(z,H,Z)&&T.push(z)}),T}function oo(p,b,T,z,H){var Z=-1,de=p.length;for(T||(T=rq),H||(H=[]);++Z<de;){var ye=p[Z];b>0&&T(ye)?b>1?oo(ye,b-1,T,z,H):Xl(H,ye):z||(H[H.length]=ye)}return H}var av=F6(),Ub=F6(!0);function Zl(p,b){return p&&av(p,b,Mo)}function lv(p,b){return p&&Ub(p,b,Mo)}function z0(p,b){return Cs(b,function(T){return yh(p[T])})}function mh(p,b){b=Ad(b,p);for(var T=0,z=b.length;p!=null&&T<z;)p=p[yu(b[T++])];return T&&T==z?p:t}function Md(p,b,T){var z=b(p);return Xn(p)?z:Xl(z,T(p))}function So(p){return p==null?p===t?V:xe:qs&&qs in $t(p)?JH(p):hq(p)}function cv(p,b){return p>b}function uv(p,b){return p!=null&&di.call(p,b)}function Fb(p,b){return p!=null&&b in $t(p)}function Z3(p,b,T){return p>=Mi(b,T)&&p<li(b,T)}function Jf(p,b,T){for(var z=T?wd:ch,H=p[0].length,Z=p.length,de=Z,ye=We(Z),Re=1/0,pt=[];de--;){var mt=p[de];de&&b&&(mt=Bn(mt,cn(b))),Re=Mi(mt.length,Re),ye[de]=!T&&(b||H>=120&&mt.length>=120)?new dh(de&&mt):t}mt=p[0];var _t=-1,jt=ye[0];e:for(;++_t<H&&pt.length<Re;){var on=mt[_t],Tn=b?b(on):on;if(on=T||on!==0?on:0,!(jt?ji(jt,Tn):z(pt,Tn,T))){for(de=Z;--de;){var ci=ye[de];if(!(ci?ji(ci,Tn):z(p[de],Tn,T)))continue e}jt&&jt.push(Tn),pt.push(on)}}return pt}function J3(p,b,T,z){return Zl(p,function(H,Z,de){b(z,T(H),Z,de)}),z}function Da(p,b,T){b=Ad(b,p),p=nP(p,b);var z=p==null?p:p[yu(Ql(b))];return z==null?t:vn(z,p,T)}function Bb(p){return ps(p)&&So(p)==Be}function Q3(p){return ps(p)&&So(p)==ve}function hv(p){return ps(p)&&So(p)==Ot}function Qf(p,b,T,z,H){return p===b?!0:p==null||b==null||!ps(p)&&!ps(b)?p!==p&&b!==b:eS(p,b,T,z,Qf,H)}function eS(p,b,T,z,H,Z){var de=Xn(p),ye=Xn(b),Re=de?vt:Xo(p),pt=ye?vt:Xo(b);Re=Re==Be?Ie:Re,pt=pt==Be?Ie:pt;var mt=Re==Ie,_t=pt==Ie,jt=Re==pt;if(jt&&kd(p)){if(!kd(b))return!1;de=!0,mt=!1}if(jt&&!mt)return Z||(Z=new bl),de||B0(p)?Y6(p,b,T,z,H,Z):KH(p,b,Re,T,z,H,Z);if(!(T&g)){var on=mt&&di.call(p,"__wrapped__"),Tn=_t&&di.call(b,"__wrapped__");if(on||Tn){var ci=on?p.value():p,An=Tn?b.value():b;return Z||(Z=new bl),H(ci,An,T,z,Z)}}return jt?(Z||(Z=new bl),ZH(p,b,T,z,H,Z)):!1}function Vb(p){return ps(p)&&Xo(p)==ke}function dv(p,b,T,z){var H=T.length,Z=H,de=!z;if(p==null)return!Z;for(p=$t(p);H--;){var ye=T[H];if(de&&ye[2]?ye[1]!==p[ye[0]]:!(ye[0]in p))return!1}for(;++H<Z;){ye=T[H];var Re=ye[0],pt=p[Re],mt=ye[1];if(de&&ye[2]){if(pt===t&&!(Re in p))return!1}else{var _t=new bl;if(z)var jt=z(pt,mt,Re,p,b,_t);if(!(jt===t?Qf(mt,pt,g|v,z,_t):jt))return!1}}return!0}function Hb(p){if(!Kr(p)||oq(p))return!1;var b=yh(p)?kc:Ne;return b.test(tp(p))}function tS(p){return ps(p)&&So(p)==me}function nS(p){return ps(p)&&Xo(p)==ue}function iS(p){return ps(p)&&hy(p.length)&&!!Fi[So(p)]}function qb(p){return typeof p=="function"?p:p==null?Ua:typeof p=="object"?Xn(p)?mv(p[0],p[1]):Gb(p):BP(p)}function fv(p){if(!xv(p))return kr(p);var b=[];for(var T in $t(p))di.call(p,T)&&T!="constructor"&&b.push(T);return b}function rS(p){if(!Kr(p))return uq(p);var b=xv(p),T=[];for(var z in p)z=="constructor"&&(b||!di.call(p,z))||T.push(z);return T}function pv(p,b){return p<b}function Jl(p,b){var T=-1,z=Ia(p)?We(p.length):[];return vu(p,function(H,Z,de){z[++T]=b(H,Z,de)}),z}function Gb(p){var b=gS(p);return b.length==1&&b[0][2]?eP(b[0][0],b[0][1]):function(T){return T===p||dv(T,p,b)}}function mv(p,b){return _S(p)&&Q6(b)?eP(yu(p),b):function(T){var z=AS(T,p);return z===t&&z===b?PS(T,p):Qf(b,z,g|v)}}function I0(p,b,T,z,H){p!==b&&av(b,function(Z,de){if(H||(H=new bl),Kr(Z))Wb(p,b,de,T,I0,z,H);else{var ye=z?z(yS(p,de),Z,de+"",p,b,H):t;ye===t&&(ye=Z),nv(p,de,ye)}},Na)}function Wb(p,b,T,z,H,Z,de){var ye=yS(p,T),Re=yS(b,T),pt=de.get(Re);if(pt){nv(p,T,pt);return}var mt=Z?Z(ye,Re,T+"",p,b,de):t,_t=mt===t;if(_t){var jt=Xn(Re),on=!jt&&kd(Re),Tn=!jt&&!on&&B0(Re);mt=Re,jt||on||Tn?Xn(ye)?mt=ye:As(ye)?mt=za(ye):on?(_t=!1,mt=L6(Re,!0)):Tn?(_t=!1,mt=D6(Re,!0)):mt=[]:Sv(Re)||np(Re)?(mt=ye,np(ye)?mt=kP(ye):(!Kr(ye)||yh(ye))&&(mt=J6(Re))):_t=!1}_t&&(de.set(Re,mt),H(mt,Re,z,Z,de),de.delete(Re)),nv(p,T,mt)}function jb(p,b){var T=p.length;if(T)return b+=b<0?T:0,bh(b,T)?p[b]:t}function $b(p,b,T){b.length?b=Bn(b,function(Z){return Xn(Z)?function(de){return mh(de,Z.length===1?Z[0]:Z)}:Z}):b=[Ua];var z=-1;b=Bn(b,cn(Sn()));var H=Jl(p,function(Z,de,ye){var Re=Bn(b,function(pt){return pt(Z)});return{criteria:Re,index:++z,value:Z}});return wi(H,function(Z,de){return HH(Z,de,T)})}function Xb(p,b){return gv(p,b,function(T,z){return PS(p,z)})}function gv(p,b,T){for(var z=-1,H=b.length,Z={};++z<H;){var de=b[z],ye=mh(p,de);T(ye,de)&&Cd(Z,Ad(de,p),ye)}return Z}function Yb(p){return function(b){return mh(b,p)}}function vv(p,b,T,z){var H=z?wn:Bt,Z=-1,de=b.length,ye=p;for(p===b&&(b=za(b)),T&&(ye=Bn(p,cn(T)));++Z<de;)for(var Re=0,pt=b[Z],mt=T?T(pt):pt;(Re=H(ye,mt,Re,z))>-1;)ye!==p&&ro.call(ye,Re,1),ro.call(p,Re,1);return p}function Kb(p,b){for(var T=p?b.length:0,z=T-1;T--;){var H=b[T];if(T==z||H!==Z){var Z=H;bh(H)?ro.call(p,H,1):yn(p,H)}}return p}function _v(p,b){return p+$n(Io()*(b-p+1))}function sS(p,b,T,z){for(var H=-1,Z=li(Kt((b-p)/(T||1)),0),de=We(Z);Z--;)de[z?Z:++H]=p,p+=T;return de}function bv(p,b){var T="";if(!p||b<1||b>J)return T;do b%2&&(T+=p),b=$n(b/2),b&&(p+=p);while(b);return T}function ei(p,b){return xS(tP(p,b,Ua),p+"")}function oS(p){return tv(V0(p))}function aS(p,b){var T=V0(p);return sy(T,gu(b,0,T.length))}function Cd(p,b,T,z){if(!Kr(p))return p;b=Ad(b,p);for(var H=-1,Z=b.length,de=Z-1,ye=p;ye!=null&&++H<Z;){var Re=yu(b[H]),pt=T;if(Re==="__proto__"||Re==="constructor"||Re==="prototype")return p;if(H!=de){var mt=ye[Re];pt=z?z(mt,Re,ye):t,pt===t&&(pt=Kr(mt)?mt:bh(b[H+1])?[]:{})}Kf(ye,Re,pt),ye=ye[Re]}return p}var Zb=Rc?function(p,b){return Rc.set(p,b),p}:Ua,lS=Rn?function(p,b){return Rn(p,"toString",{configurable:!0,enumerable:!1,value:RS(b),writable:!0})}:Ua;function M(p){return sy(V0(p))}function m(p,b,T){var z=-1,H=p.length;b<0&&(b=-b>H?0:H+b),T=T>H?H:T,T<0&&(T+=H),H=b>T?0:T-b>>>0,b>>>=0;for(var Z=We(H);++z<H;)Z[z]=p[z+b];return Z}function x(p,b){var T;return vu(p,function(z,H,Z){return T=b(z,H,Z),!T}),!!T}function P(p,b,T){var z=0,H=p==null?z:p.length;if(typeof b=="number"&&b===b&&H<=Je){for(;z<H;){var Z=z+H>>>1,de=p[Z];de!==null&&!xl(de)&&(T?de<=b:de<b)?z=Z+1:H=Z}return H}return B(p,b,Ua,T)}function B(p,b,T,z){var H=0,Z=p==null?0:p.length;if(Z===0)return 0;b=T(b);for(var de=b!==b,ye=b===null,Re=xl(b),pt=b===t;H<Z;){var mt=$n((H+Z)/2),_t=T(p[mt]),jt=_t!==t,on=_t===null,Tn=_t===_t,ci=xl(_t);if(de)var An=z||Tn;else pt?An=Tn&&(z||jt):ye?An=Tn&&jt&&(z||!on):Re?An=Tn&&jt&&!on&&(z||!ci):on||ci?An=!1:An=z?_t<=b:_t<b;An?H=mt+1:Z=mt}return Mi(Z,be)}function he(p,b){for(var T=-1,z=p.length,H=0,Z=[];++T<z;){var de=p[T],ye=b?b(de):de;if(!T||!zc(ye,Re)){var Re=ye;Z[H++]=de===0?0:de}}return Z}function ze(p){return typeof p=="number"?p:xl(p)?le:+p}function gt(p){if(typeof p=="string")return p;if(Xn(p))return Bn(p,gt)+"";if(xl(p))return uh?uh.call(p):"";var b=p+"";return b=="0"&&1/p==-ee?"-0":b}function sn(p,b,T){var z=-1,H=ch,Z=p.length,de=!0,ye=[],Re=ye;if(T)de=!1,H=wd;else if(Z>=r){var pt=b?null:XH(p);if(pt)return Fe(pt);de=!1,H=ji,Re=new dh}else Re=b?[]:ye;e:for(;++z<Z;){var mt=p[z],_t=b?b(mt):mt;if(mt=T||mt!==0?mt:0,de&&_t===_t){for(var jt=Re.length;jt--;)if(Re[jt]===_t)continue e;b&&Re.push(_t),ye.push(mt)}else H(Re,_t,T)||(Re!==ye&&Re.push(_t),ye.push(mt))}return ye}function yn(p,b){return b=Ad(b,p),p=nP(p,b),p==null||delete p[yu(Ql(b))]}function Ai(p,b,T,z){return Cd(p,b,T(mh(p,b)),z)}function Ci(p,b,T,z){for(var H=p.length,Z=z?H:-1;(z?Z--:++Z<H)&&b(p[Z],Z,p););return T?m(p,z?0:Z,z?Z+1:H):m(p,z?Z+1:0,z?H:Z)}function _u(p,b){var T=p;return T instanceof _i&&(T=T.value()),De(b,function(z,H){return H.func.apply(H.thisArg,Xl([z],H.args))},T)}function gh(p,b,T){var z=p.length;if(z<2)return z?sn(p[0]):[];for(var H=-1,Z=We(z);++H<z;)for(var de=p[H],ye=-1;++ye<z;)ye!=H&&(Z[H]=Zf(Z[H]||de,p[ye],b,T));return sn(oo(Z,1),b,T)}function Ed(p,b,T){for(var z=-1,H=p.length,Z=b.length,de={};++z<H;){var ye=z<Z?b[z]:t;T(de,p[z],ye)}return de}function Td(p){return As(p)?p:[]}function cS(p){return typeof p=="function"?p:Ua}function Ad(p,b){return Xn(p)?p:_S(p,b)?[p]:oP(nr(p))}var UH=ei;function Pd(p,b,T){var z=p.length;return T=T===t?z:T,!b&&T>=z?p:m(p,b,T)}var O6=dn||function(p){return jr.clearTimeout(p)};function L6(p,b){if(b)return p.slice();var T=p.length,z=fi?fi(T):new p.constructor(T);return p.copy(z),z}function uS(p){var b=new p.constructor(p.byteLength);return new jo(b).set(new jo(p)),b}function FH(p,b){var T=b?uS(p.buffer):p.buffer;return new p.constructor(T,p.byteOffset,p.byteLength)}function BH(p){var b=new p.constructor(p.source,ne.exec(p));return b.lastIndex=p.lastIndex,b}function VH(p){return fa?$t(fa.call(p)):{}}function D6(p,b){var T=b?uS(p.buffer):p.buffer;return new p.constructor(T,p.byteOffset,p.length)}function z6(p,b){if(p!==b){var T=p!==t,z=p===null,H=p===p,Z=xl(p),de=b!==t,ye=b===null,Re=b===b,pt=xl(b);if(!ye&&!pt&&!Z&&p>b||Z&&de&&Re&&!ye&&!pt||z&&de&&Re||!T&&Re||!H)return 1;if(!z&&!Z&&!pt&&p<b||pt&&T&&H&&!z&&!Z||ye&&T&&H||!de&&H||!Re)return-1}return 0}function HH(p,b,T){for(var z=-1,H=p.criteria,Z=b.criteria,de=H.length,ye=T.length;++z<de;){var Re=z6(H[z],Z[z]);if(Re){if(z>=ye)return Re;var pt=T[z];return Re*(pt=="desc"?-1:1)}}return p.index-b.index}function I6(p,b,T,z){for(var H=-1,Z=p.length,de=T.length,ye=-1,Re=b.length,pt=li(Z-de,0),mt=We(Re+pt),_t=!z;++ye<Re;)mt[ye]=b[ye];for(;++H<de;)(_t||H<Z)&&(mt[T[H]]=p[H]);for(;pt--;)mt[ye++]=p[H++];return mt}function N6(p,b,T,z){for(var H=-1,Z=p.length,de=-1,ye=T.length,Re=-1,pt=b.length,mt=li(Z-ye,0),_t=We(mt+pt),jt=!z;++H<mt;)_t[H]=p[H];for(var on=H;++Re<pt;)_t[on+Re]=b[Re];for(;++de<ye;)(jt||H<Z)&&(_t[on+T[de]]=p[H++]);return _t}function za(p,b){var T=-1,z=p.length;for(b||(b=We(z));++T<z;)b[T]=p[T];return b}function bu(p,b,T,z){var H=!T;T||(T={});for(var Z=-1,de=b.length;++Z<de;){var ye=b[Z],Re=z?z(T[ye],p[ye],ye,T,p):t;Re===t&&(Re=p[ye]),H?wo(T,ye,Re):Kf(T,ye,Re)}return T}function qH(p,b){return bu(p,vS(p),b)}function GH(p,b){return bu(p,K6(p),b)}function Jb(p,b){return function(T,z){var H=Xn(T)?k0:Ib,Z=b?b():{};return H(T,p,Sn(z,2),Z)}}function N0(p){return ei(function(b,T){var z=-1,H=T.length,Z=H>1?T[H-1]:t,de=H>2?T[2]:t;for(Z=p.length>3&&typeof Z=="function"?(H--,Z):t,de&&pa(T[0],T[1],de)&&(Z=H<3?t:Z,H=1),b=$t(b);++z<H;){var ye=T[z];ye&&p(b,ye,z,Z)}return b})}function U6(p,b){return function(T,z){if(T==null)return T;if(!Ia(T))return p(T,z);for(var H=T.length,Z=b?H:-1,de=$t(T);(b?Z--:++Z<H)&&z(de[Z],Z,de)!==!1;);return T}}function F6(p){return function(b,T,z){for(var H=-1,Z=$t(b),de=z(b),ye=de.length;ye--;){var Re=de[p?ye:++H];if(T(Z[Re],Re,Z)===!1)break}return b}}function WH(p,b,T){var z=b&y,H=yv(p);function Z(){var de=this&&this!==jr&&this instanceof Z?H:p;return de.apply(z?T:this,arguments)}return Z}function B6(p){return function(b){b=nr(b);var T=ur(b)?Xr(b):t,z=T?T[0]:b.charAt(0),H=T?Pd(T,1).join(""):b.slice(1);return z[p]()+H}}function U0(p){return function(b){return De(UP(NP(b).replace($l,"")),p,"")}}function yv(p){return function(){var b=arguments;switch(b.length){case 0:return new p;case 1:return new p(b[0]);case 2:return new p(b[0],b[1]);case 3:return new p(b[0],b[1],b[2]);case 4:return new p(b[0],b[1],b[2],b[3]);case 5:return new p(b[0],b[1],b[2],b[3],b[4]);case 6:return new p(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new p(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var T=pu(p.prototype),z=p.apply(T,b);return Kr(z)?z:T}}function jH(p,b,T){var z=yv(p);function H(){for(var Z=arguments.length,de=We(Z),ye=Z,Re=F0(H);ye--;)de[ye]=arguments[ye];var pt=Z<3&&de[0]!==Re&&de[Z-1]!==Re?[]:Ki(de,Re);if(Z-=pt.length,Z<T)return W6(p,b,Qb,H.placeholder,t,de,pt,t,t,T-Z);var mt=this&&this!==jr&&this instanceof H?z:p;return vn(mt,this,de)}return H}function V6(p){return function(b,T,z){var H=$t(b);if(!Ia(b)){var Z=Sn(T,3);b=Mo(b),T=function(ye){return Z(H[ye],ye,H)}}var de=p(b,T,z);return de>-1?H[Z?b[de]:de]:t}}function H6(p){return _h(function(b){var T=b.length,z=T,H=Oa.prototype.thru;for(p&&b.reverse();z--;){var Z=b[z];if(typeof Z!="function")throw new ds(o);if(H&&!de&&iy(Z)=="wrapper")var de=new Oa([],!0)}for(z=de?z:T;++z<T;){Z=b[z];var ye=iy(Z),Re=ye=="wrapper"?mS(Z):t;Re&&bS(Re[0])&&Re[1]==(O|w|E|R)&&!Re[4].length&&Re[9]==1?de=de[iy(Re[0])].apply(de,Re[3]):de=Z.length==1&&bS(Z)?de[ye]():de.thru(Z)}return function(){var pt=arguments,mt=pt[0];if(de&&pt.length==1&&Xn(mt))return de.plant(mt).value();for(var _t=0,jt=T?b[_t].apply(this,pt):mt;++_t<T;)jt=b[_t].call(this,jt);return jt}})}function Qb(p,b,T,z,H,Z,de,ye,Re,pt){var mt=b&O,_t=b&y,jt=b&_,on=b&(w|C),Tn=b&A,ci=jt?t:yv(p);function An(){for(var yi=arguments.length,Pi=We(yi),wl=yi;wl--;)Pi[wl]=arguments[wl];if(on)var ma=F0(An),Sl=Es(Pi,ma);if(z&&(Pi=I6(Pi,z,H,on)),Z&&(Pi=N6(Pi,Z,de,on)),yi-=Sl,on&&yi<pt){var Ps=Ki(Pi,ma);return W6(p,b,Qb,An.placeholder,T,Pi,Ps,ye,Re,pt-yi)}var Ic=_t?T:this,wh=jt?Ic[p]:p;return yi=Pi.length,ye?Pi=dq(Pi,ye):Tn&&yi>1&&Pi.reverse(),mt&&Re<yi&&(Pi.length=Re),this&&this!==jr&&this instanceof An&&(wh=ci||yv(wh)),wh.apply(Ic,Pi)}return An}function q6(p,b){return function(T,z){return J3(T,p,b(z),{})}}function ey(p,b){return function(T,z){var H;if(T===t&&z===t)return b;if(T!==t&&(H=T),z!==t){if(H===t)return z;typeof T=="string"||typeof z=="string"?(T=gt(T),z=gt(z)):(T=ze(T),z=ze(z)),H=p(T,z)}return H}}function hS(p){return _h(function(b){return b=Bn(b,cn(Sn())),ei(function(T){var z=this;return p(b,function(H){return vn(H,z,T)})})})}function ty(p,b){b=b===t?" ":gt(b);var T=b.length;if(T<2)return T?bv(b,p):b;var z=bv(b,Kt(p/Ts(b)));return ur(b)?Pd(Xr(z),0,p).join(""):z.slice(0,p)}function $H(p,b,T,z){var H=b&y,Z=yv(p);function de(){for(var ye=-1,Re=arguments.length,pt=-1,mt=z.length,_t=We(mt+Re),jt=this&&this!==jr&&this instanceof de?Z:p;++pt<mt;)_t[pt]=z[pt];for(;Re--;)_t[pt++]=arguments[++ye];return vn(jt,H?T:this,_t)}return de}function G6(p){return function(b,T,z){return z&&typeof z!="number"&&pa(b,T,z)&&(T=z=t),b=xh(b),T===t?(T=b,b=0):T=xh(T),z=z===t?b<T?1:-1:xh(z),sS(b,T,z,p)}}function ny(p){return function(b,T){return typeof b=="string"&&typeof T=="string"||(b=ec(b),T=ec(T)),p(b,T)}}function W6(p,b,T,z,H,Z,de,ye,Re,pt){var mt=b&w,_t=mt?de:t,jt=mt?t:de,on=mt?Z:t,Tn=mt?t:Z;b|=mt?E:k,b&=~(mt?k:E),b&S||(b&=~(y|_));var ci=[p,b,H,on,_t,Tn,jt,ye,Re,pt],An=T.apply(t,ci);return bS(p)&&iP(An,ci),An.placeholder=z,rP(An,p,b)}function dS(p){var b=zi[p];return function(T,z){if(T=ec(T),z=z==null?0:Mi(ti(z),292),z&&Pr(T)){var H=(nr(T)+"e").split("e"),Z=b(H[0]+"e"+(+H[1]+z));return H=(nr(Z)+"e").split("e"),+(H[0]+"e"+(+H[1]-z))}return b(T)}}var XH=dr&&1/Fe(new dr([,-0]))[1]==ee?function(p){return new dr(p)}:DS;function j6(p){return function(b){var T=Xo(b);return T==ke?gi(b):T==ue?$r(b):or(b,p(b))}}function vh(p,b,T,z,H,Z,de,ye){var Re=b&_;if(!Re&&typeof p!="function")throw new ds(o);var pt=z?z.length:0;if(pt||(b&=~(E|k),z=H=t),de=de===t?de:li(ti(de),0),ye=ye===t?ye:ti(ye),pt-=H?H.length:0,b&k){var mt=z,_t=H;z=H=t}var jt=Re?t:mS(p),on=[p,b,T,z,H,mt,_t,Z,de,ye];if(jt&&cq(on,jt),p=on[0],b=on[1],T=on[2],z=on[3],H=on[4],ye=on[9]=on[9]===t?Re?0:p.length:li(on[9]-pt,0),!ye&&b&(w|C)&&(b&=~(w|C)),!b||b==y)var Tn=WH(p,b,T);else b==w||b==C?Tn=jH(p,b,ye):(b==E||b==(y|E))&&!H.length?Tn=$H(p,b,T,z):Tn=Qb.apply(t,on);var ci=jt?Zb:iP;return rP(ci(Tn,on),p,b)}function $6(p,b,T,z){return p===t||zc(p,Si[T])&&!di.call(z,T)?b:p}function X6(p,b,T,z,H,Z){return Kr(p)&&Kr(b)&&(Z.set(b,p),I0(p,b,t,X6,Z),Z.delete(b)),p}function YH(p){return Sv(p)?t:p}function Y6(p,b,T,z,H,Z){var de=T&g,ye=p.length,Re=b.length;if(ye!=Re&&!(de&&Re>ye))return!1;var pt=Z.get(p),mt=Z.get(b);if(pt&&mt)return pt==b&&mt==p;var _t=-1,jt=!0,on=T&v?new dh:t;for(Z.set(p,b),Z.set(b,p);++_t<ye;){var Tn=p[_t],ci=b[_t];if(z)var An=de?z(ci,Tn,_t,b,p,Z):z(Tn,ci,_t,p,b,Z);if(An!==t){if(An)continue;jt=!1;break}if(on){if(!ge(b,function(yi,Pi){if(!ji(on,Pi)&&(Tn===yi||H(Tn,yi,T,z,Z)))return on.push(Pi)})){jt=!1;break}}else if(!(Tn===ci||H(Tn,ci,T,z,Z))){jt=!1;break}}return Z.delete(p),Z.delete(b),jt}function KH(p,b,T,z,H,Z,de){switch(T){case ut:if(p.byteLength!=b.byteLength||p.byteOffset!=b.byteOffset)return!1;p=p.buffer,b=b.buffer;case ve:return!(p.byteLength!=b.byteLength||!Z(new jo(p),new jo(b)));case Le:case Ot:case ae:return zc(+p,+b);case rt:return p.name==b.name&&p.message==b.message;case me:case Pe:return p==b+"";case ke:var ye=gi;case ue:var Re=z&g;if(ye||(ye=Fe),p.size!=b.size&&!Re)return!1;var pt=de.get(p);if(pt)return pt==b;z|=v,de.set(p,b);var mt=Y6(ye(p),ye(b),z,H,Z,de);return de.delete(p),mt;case U:if(fa)return fa.call(p)==fa.call(b)}return!1}function ZH(p,b,T,z,H,Z){var de=T&g,ye=fS(p),Re=ye.length,pt=fS(b),mt=pt.length;if(Re!=mt&&!de)return!1;for(var _t=Re;_t--;){var jt=ye[_t];if(!(de?jt in b:di.call(b,jt)))return!1}var on=Z.get(p),Tn=Z.get(b);if(on&&Tn)return on==b&&Tn==p;var ci=!0;Z.set(p,b),Z.set(b,p);for(var An=de;++_t<Re;){jt=ye[_t];var yi=p[jt],Pi=b[jt];if(z)var wl=de?z(Pi,yi,jt,b,p,Z):z(yi,Pi,jt,p,b,Z);if(!(wl===t?yi===Pi||H(yi,Pi,T,z,Z):wl)){ci=!1;break}An||(An=jt=="constructor")}if(ci&&!An){var ma=p.constructor,Sl=b.constructor;ma!=Sl&&"constructor"in p&&"constructor"in b&&!(typeof ma=="function"&&ma instanceof ma&&typeof Sl=="function"&&Sl instanceof Sl)&&(ci=!1)}return Z.delete(p),Z.delete(b),ci}function _h(p){return xS(tP(p,t,uP),p+"")}function fS(p){return Md(p,Mo,vS)}function pS(p){return Md(p,Na,K6)}var mS=Rc?function(p){return Rc.get(p)}:DS;function iy(p){for(var b=p.name+"",T=tr[b],z=di.call(tr,b)?T.length:0;z--;){var H=T[z],Z=H.func;if(Z==null||Z==p)return H.name}return b}function F0(p){var b=di.call(X,"placeholder")?X:p;return b.placeholder}function Sn(){var p=X.iteratee||OS;return p=p===OS?qb:p,arguments.length?p(arguments[0],arguments[1]):p}function ry(p,b){var T=p.__data__;return sq(b)?T[typeof b=="string"?"string":"hash"]:T.map}function gS(p){for(var b=Mo(p),T=b.length;T--;){var z=b[T],H=p[z];b[T]=[z,H,Q6(H)]}return b}function ep(p,b){var T=ca(p,b);return Hb(T)?T:t}function JH(p){var b=di.call(p,qs),T=p[qs];try{p[qs]=t;var z=!0}catch{}var H=fs.call(p);return z&&(b?p[qs]=T:delete p[qs]),H}var vS=fn?function(p){return p==null?[]:(p=$t(p),Cs(fn(p),function(b){return $o.call(p,b)}))}:zS,K6=fn?function(p){for(var b=[];p;)Xl(b,vS(p)),p=ka(p);return b}:zS,Xo=So;(Gs&&Xo(new Gs(new ArrayBuffer(1)))!=ut||xo&&Xo(new xo)!=ke||so&&Xo(so.resolve())!=dt||dr&&Xo(new dr)!=ue||fr&&Xo(new fr)!=Ve)&&(Xo=function(p){var b=So(p),T=b==Ie?p.constructor:t,z=T?tp(T):"";if(z)switch(z){case Yr:return ut;case Ra:return ke;case Xf:return dt;case O0:return ue;case Oc:return Ve}return b});function QH(p,b,T){for(var z=-1,H=T.length;++z<H;){var Z=T[z],de=Z.size;switch(Z.type){case"drop":p+=de;break;case"dropRight":b-=de;break;case"take":b=Mi(b,p+de);break;case"takeRight":p=li(p,b-de);break}}return{start:p,end:b}}function eq(p){var b=p.match(Sc);return b?b[1].split(au):[]}function Z6(p,b,T){b=Ad(b,p);for(var z=-1,H=b.length,Z=!1;++z<H;){var de=yu(b[z]);if(!(Z=p!=null&&T(p,de)))break;p=p[de]}return Z||++z!=H?Z:(H=p==null?0:p.length,!!H&&hy(H)&&bh(de,H)&&(Xn(p)||np(p)))}function tq(p){var b=p.length,T=new p.constructor(b);return b&&typeof p[0]=="string"&&di.call(p,"index")&&(T.index=p.index,T.input=p.input),T}function J6(p){return typeof p.constructor=="function"&&!xv(p)?pu(ka(p)):{}}function nq(p,b,T){var z=p.constructor;switch(b){case ve:return uS(p);case Le:case Ot:return new z(+p);case ut:return FH(p,T);case Zt:case we:case Se:case Tt:case zt:case Vt:case Gt:case Dt:case Yt:return D6(p,T);case ke:return new z;case ae:case Pe:return new z(p);case me:return BH(p);case ue:return new z;case U:return VH(p)}}function iq(p,b){var T=b.length;if(!T)return p;var z=T-1;return b[z]=(T>1?"& ":"")+b[z],b=b.join(T>2?", ":" "),p.replace(fl,`{
/* [wrapped with `+b+`] */
`)}function rq(p){return Xn(p)||np(p)||!!(_l&&p&&p[_l])}function bh(p,b){var T=typeof p;return b=b??J,!!b&&(T=="number"||T!="symbol"&&Wt.test(p))&&p>-1&&p%1==0&&p<b}function pa(p,b,T){if(!Kr(T))return!1;var z=typeof b;return(z=="number"?Ia(T)&&bh(b,T.length):z=="string"&&b in T)?zc(T[b],p):!1}function _S(p,b){if(Xn(p))return!1;var T=typeof p;return T=="number"||T=="symbol"||T=="boolean"||p==null||xl(p)?!0:ls.test(p)||!Wn.test(p)||b!=null&&p in $t(b)}function sq(p){var b=typeof p;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?p!=="__proto__":p===null}function bS(p){var b=iy(p),T=X[b];if(typeof T!="function"||!(b in _i.prototype))return!1;if(p===T)return!0;var z=mS(T);return!!z&&p===z[0]}function oq(p){return!!Wo&&Wo in p}var aq=yo?yh:IS;function xv(p){var b=p&&p.constructor,T=typeof b=="function"&&b.prototype||Si;return p===T}function Q6(p){return p===p&&!Kr(p)}function eP(p,b){return function(T){return T==null?!1:T[p]===b&&(b!==t||p in $t(T))}}function lq(p){var b=cy(p,function(z){return T.size===c&&T.clear(),z}),T=b.cache;return b}function cq(p,b){var T=p[1],z=b[1],H=T|z,Z=H<(y|_|O),de=z==O&&T==w||z==O&&T==R&&p[7].length<=b[8]||z==(O|R)&&b[7].length<=b[8]&&T==w;if(!(Z||de))return p;z&y&&(p[2]=b[2],H|=T&y?0:S);var ye=b[3];if(ye){var Re=p[3];p[3]=Re?I6(Re,ye,b[4]):ye,p[4]=Re?Ki(p[3],u):b[4]}return ye=b[5],ye&&(Re=p[5],p[5]=Re?N6(Re,ye,b[6]):ye,p[6]=Re?Ki(p[5],u):b[6]),ye=b[7],ye&&(p[7]=ye),z&O&&(p[8]=p[8]==null?b[8]:Mi(p[8],b[8])),p[9]==null&&(p[9]=b[9]),p[0]=b[0],p[1]=H,p}function uq(p){var b=[];if(p!=null)for(var T in $t(p))b.push(T);return b}function hq(p){return fs.call(p)}function tP(p,b,T){return b=li(b===t?p.length-1:b,0),function(){for(var z=arguments,H=-1,Z=li(z.length-b,0),de=We(Z);++H<Z;)de[H]=z[b+H];H=-1;for(var ye=We(b+1);++H<b;)ye[H]=z[H];return ye[b]=T(de),vn(p,this,ye)}}function nP(p,b){return b.length<2?p:mh(p,m(b,0,-1))}function dq(p,b){for(var T=p.length,z=Mi(b.length,T),H=za(p);z--;){var Z=b[z];p[z]=bh(Z,T)?H[Z]:t}return p}function yS(p,b){if(!(b==="constructor"&&typeof p[b]=="function")&&b!="__proto__")return p[b]}var iP=sP(Zb),wv=_r||function(p,b){return jr.setTimeout(p,b)},xS=sP(lS);function rP(p,b,T){var z=b+"";return xS(p,iq(z,fq(eq(z),T)))}function sP(p){var b=0,T=0;return function(){var z=br(),H=j-(z-T);if(T=z,H>0){if(++b>=q)return arguments[0]}else b=0;return p.apply(t,arguments)}}function sy(p,b){var T=-1,z=p.length,H=z-1;for(b=b===t?z:b;++T<b;){var Z=_v(T,H),de=p[Z];p[Z]=p[T],p[T]=de}return p.length=b,p}var oP=lq(function(p){var b=[];return p.charCodeAt(0)===46&&b.push(""),p.replace(Gi,function(T,z,H,Z){b.push(H?Z.replace(lu,"$1"):z||T)}),b});function yu(p){if(typeof p=="string"||xl(p))return p;var b=p+"";return b=="0"&&1/p==-ee?"-0":b}function tp(p){if(p!=null){try{return ar.call(p)}catch{}try{return p+""}catch{}}return""}function fq(p,b){return _o(Xe,function(T){var z="_."+T[0];b&T[1]&&!ch(p,z)&&p.push(z)}),p.sort()}function aP(p){if(p instanceof _i)return p.clone();var b=new Oa(p.__wrapped__,p.__chain__);return b.__actions__=za(p.__actions__),b.__index__=p.__index__,b.__values__=p.__values__,b}function pq(p,b,T){(T?pa(p,b,T):b===t)?b=1:b=li(ti(b),0);var z=p==null?0:p.length;if(!z||b<1)return[];for(var H=0,Z=0,de=We(Kt(z/b));H<z;)de[Z++]=m(p,H,H+=b);return de}function mq(p){for(var b=-1,T=p==null?0:p.length,z=0,H=[];++b<T;){var Z=p[b];Z&&(H[z++]=Z)}return H}function gq(){var p=arguments.length;if(!p)return[];for(var b=We(p-1),T=arguments[0],z=p;z--;)b[z-1]=arguments[z];return Xl(Xn(T)?za(T):[T],oo(b,1))}var vq=ei(function(p,b){return As(p)?Zf(p,oo(b,1,As,!0)):[]}),_q=ei(function(p,b){var T=Ql(b);return As(T)&&(T=t),As(p)?Zf(p,oo(b,1,As,!0),Sn(T,2)):[]}),bq=ei(function(p,b){var T=Ql(b);return As(T)&&(T=t),As(p)?Zf(p,oo(b,1,As,!0),t,T):[]});function yq(p,b,T){var z=p==null?0:p.length;return z?(b=T||b===t?1:ti(b),m(p,b<0?0:b,z)):[]}function xq(p,b,T){var z=p==null?0:p.length;return z?(b=T||b===t?1:ti(b),b=z-b,m(p,0,b<0?0:b)):[]}function wq(p,b){return p&&p.length?Ci(p,Sn(b,3),!0,!0):[]}function Sq(p,b){return p&&p.length?Ci(p,Sn(b,3),!0):[]}function Mq(p,b,T,z){var H=p==null?0:p.length;return H?(T&&typeof T!="number"&&pa(p,b,T)&&(T=0,z=H),Sd(p,b,T,z)):[]}function lP(p,b,T){var z=p==null?0:p.length;if(!z)return-1;var H=T==null?0:ti(T);return H<0&&(H=li(z+H,0)),Ge(p,Sn(b,3),H)}function cP(p,b,T){var z=p==null?0:p.length;if(!z)return-1;var H=z-1;return T!==t&&(H=ti(T),H=T<0?li(z+H,0):Mi(H,z-1)),Ge(p,Sn(b,3),H,!0)}function uP(p){var b=p==null?0:p.length;return b?oo(p,1):[]}function Cq(p){var b=p==null?0:p.length;return b?oo(p,ee):[]}function Eq(p,b){var T=p==null?0:p.length;return T?(b=b===t?1:ti(b),oo(p,b)):[]}function Tq(p){for(var b=-1,T=p==null?0:p.length,z={};++b<T;){var H=p[b];z[H[0]]=H[1]}return z}function hP(p){return p&&p.length?p[0]:t}function Aq(p,b,T){var z=p==null?0:p.length;if(!z)return-1;var H=T==null?0:ti(T);return H<0&&(H=li(z+H,0)),Bt(p,b,H)}function Pq(p){var b=p==null?0:p.length;return b?m(p,0,-1):[]}var kq=ei(function(p){var b=Bn(p,Td);return b.length&&b[0]===p[0]?Jf(b):[]}),Rq=ei(function(p){var b=Ql(p),T=Bn(p,Td);return b===Ql(T)?b=t:T.pop(),T.length&&T[0]===p[0]?Jf(T,Sn(b,2)):[]}),Oq=ei(function(p){var b=Ql(p),T=Bn(p,Td);return b=typeof b=="function"?b:t,b&&T.pop(),T.length&&T[0]===p[0]?Jf(T,t,b):[]});function Lq(p,b){return p==null?"":vi.call(p,b)}function Ql(p){var b=p==null?0:p.length;return b?p[b-1]:t}function Dq(p,b,T){var z=p==null?0:p.length;if(!z)return-1;var H=z;return T!==t&&(H=ti(T),H=H<0?li(z+H,0):Mi(H,z-1)),b===b?bo(p,b,H):Ge(p,jn,H,!0)}function zq(p,b){return p&&p.length?jb(p,ti(b)):t}var Iq=ei(dP);function dP(p,b){return p&&p.length&&b&&b.length?vv(p,b):p}function Nq(p,b,T){return p&&p.length&&b&&b.length?vv(p,b,Sn(T,2)):p}function Uq(p,b,T){return p&&p.length&&b&&b.length?vv(p,b,t,T):p}var Fq=_h(function(p,b){var T=p==null?0:p.length,z=iv(p,b);return Kb(p,Bn(b,function(H){return bh(H,T)?+H:H}).sort(z6)),z});function Bq(p,b){var T=[];if(!(p&&p.length))return T;var z=-1,H=[],Z=p.length;for(b=Sn(b,3);++z<Z;){var de=p[z];b(de,z,p)&&(T.push(de),H.push(z))}return Kb(p,H),T}function wS(p){return p==null?p:yr.call(p)}function Vq(p,b,T){var z=p==null?0:p.length;return z?(T&&typeof T!="number"&&pa(p,b,T)?(b=0,T=z):(b=b==null?0:ti(b),T=T===t?z:ti(T)),m(p,b,T)):[]}function Hq(p,b){return P(p,b)}function qq(p,b,T){return B(p,b,Sn(T,2))}function Gq(p,b){var T=p==null?0:p.length;if(T){var z=P(p,b);if(z<T&&zc(p[z],b))return z}return-1}function Wq(p,b){return P(p,b,!0)}function jq(p,b,T){return B(p,b,Sn(T,2),!0)}function $q(p,b){var T=p==null?0:p.length;if(T){var z=P(p,b,!0)-1;if(zc(p[z],b))return z}return-1}function Xq(p){return p&&p.length?he(p):[]}function Yq(p,b){return p&&p.length?he(p,Sn(b,2)):[]}function Kq(p){var b=p==null?0:p.length;return b?m(p,1,b):[]}function Zq(p,b,T){return p&&p.length?(b=T||b===t?1:ti(b),m(p,0,b<0?0:b)):[]}function Jq(p,b,T){var z=p==null?0:p.length;return z?(b=T||b===t?1:ti(b),b=z-b,m(p,b<0?0:b,z)):[]}function Qq(p,b){return p&&p.length?Ci(p,Sn(b,3),!1,!0):[]}function eG(p,b){return p&&p.length?Ci(p,Sn(b,3)):[]}var tG=ei(function(p){return sn(oo(p,1,As,!0))}),nG=ei(function(p){var b=Ql(p);return As(b)&&(b=t),sn(oo(p,1,As,!0),Sn(b,2))}),iG=ei(function(p){var b=Ql(p);return b=typeof b=="function"?b:t,sn(oo(p,1,As,!0),t,b)});function rG(p){return p&&p.length?sn(p):[]}function sG(p,b){return p&&p.length?sn(p,Sn(b,2)):[]}function oG(p,b){return b=typeof b=="function"?b:t,p&&p.length?sn(p,t,b):[]}function SS(p){if(!(p&&p.length))return[];var b=0;return p=Cs(p,function(T){if(As(T))return b=li(T.length,b),!0}),sr(b,function(T){return Bn(p,rn(T))})}function fP(p,b){if(!(p&&p.length))return[];var T=SS(p);return b==null?T:Bn(T,function(z){return vn(b,t,z)})}var aG=ei(function(p,b){return As(p)?Zf(p,b):[]}),lG=ei(function(p){return gh(Cs(p,As))}),cG=ei(function(p){var b=Ql(p);return As(b)&&(b=t),gh(Cs(p,As),Sn(b,2))}),uG=ei(function(p){var b=Ql(p);return b=typeof b=="function"?b:t,gh(Cs(p,As),t,b)}),hG=ei(SS);function dG(p,b){return Ed(p||[],b||[],Kf)}function fG(p,b){return Ed(p||[],b||[],Cd)}var pG=ei(function(p){var b=p.length,T=b>1?p[b-1]:t;return T=typeof T=="function"?(p.pop(),T):t,fP(p,T)});function pP(p){var b=X(p);return b.__chain__=!0,b}function mG(p,b){return b(p),p}function oy(p,b){return b(p)}var gG=_h(function(p){var b=p.length,T=b?p[0]:0,z=this.__wrapped__,H=function(Z){return iv(Z,p)};return b>1||this.__actions__.length||!(z instanceof _i)||!bh(T)?this.thru(H):(z=z.slice(T,+T+(b?1:0)),z.__actions__.push({func:oy,args:[H],thisArg:t}),new Oa(z,this.__chain__).thru(function(Z){return b&&!Z.length&&Z.push(t),Z}))});function vG(){return pP(this)}function _G(){return new Oa(this.value(),this.__chain__)}function bG(){this.__values__===t&&(this.__values__=AP(this.value()));var p=this.__index__>=this.__values__.length,b=p?t:this.__values__[this.__index__++];return{done:p,value:b}}function yG(){return this}function xG(p){for(var b,T=this;T instanceof Yf;){var z=aP(T);z.__index__=0,z.__values__=t,b?H.__wrapped__=z:b=z;var H=z;T=T.__wrapped__}return H.__wrapped__=p,b}function wG(){var p=this.__wrapped__;if(p instanceof _i){var b=p;return this.__actions__.length&&(b=new _i(this)),b=b.reverse(),b.__actions__.push({func:oy,args:[wS],thisArg:t}),new Oa(b,this.__chain__)}return this.thru(wS)}function SG(){return _u(this.__wrapped__,this.__actions__)}var MG=Jb(function(p,b,T){di.call(p,T)?++p[T]:wo(p,T,1)});function CG(p,b,T){var z=Xn(p)?R0:sv;return T&&pa(p,b,T)&&(b=t),z(p,Sn(b,3))}function EG(p,b){var T=Xn(p)?Cs:ov;return T(p,Sn(b,3))}var TG=V6(lP),AG=V6(cP);function PG(p,b){return oo(ay(p,b),1)}function kG(p,b){return oo(ay(p,b),ee)}function RG(p,b,T){return T=T===t?1:ti(T),oo(ay(p,b),T)}function mP(p,b){var T=Xn(p)?_o:vu;return T(p,Sn(b,3))}function gP(p,b){var T=Xn(p)?lh:Nb;return T(p,Sn(b,3))}var OG=Jb(function(p,b,T){di.call(p,T)?p[T].push(b):wo(p,T,[b])});function LG(p,b,T,z){p=Ia(p)?p:V0(p),T=T&&!z?ti(T):0;var H=p.length;return T<0&&(T=li(H+T,0)),dy(p)?T<=H&&p.indexOf(b,T)>-1:!!H&&Bt(p,b,T)>-1}var DG=ei(function(p,b,T){var z=-1,H=typeof b=="function",Z=Ia(p)?We(p.length):[];return vu(p,function(de){Z[++z]=H?vn(b,de,T):Da(de,b,T)}),Z}),zG=Jb(function(p,b,T){wo(p,T,b)});function ay(p,b){var T=Xn(p)?Bn:Jl;return T(p,Sn(b,3))}function IG(p,b,T,z){return p==null?[]:(Xn(b)||(b=b==null?[]:[b]),T=z?t:T,Xn(T)||(T=T==null?[]:[T]),$b(p,b,T))}var NG=Jb(function(p,b,T){p[T?0:1].push(b)},function(){return[[],[]]});function UG(p,b,T){var z=Xn(p)?De:ln,H=arguments.length<3;return z(p,Sn(b,4),T,H,vu)}function FG(p,b,T){var z=Xn(p)?$:ln,H=arguments.length<3;return z(p,Sn(b,4),T,H,Nb)}function BG(p,b){var T=Xn(p)?Cs:ov;return T(p,uy(Sn(b,3)))}function VG(p){var b=Xn(p)?tv:oS;return b(p)}function HG(p,b,T){(T?pa(p,b,T):b===t)?b=1:b=ti(b);var z=Xn(p)?zb:aS;return z(p,b)}function qG(p){var b=Xn(p)?X3:M;return b(p)}function GG(p){if(p==null)return 0;if(Ia(p))return dy(p)?Ts(p):p.length;var b=Xo(p);return b==ke||b==ue?p.size:fv(p).length}function WG(p,b,T){var z=Xn(p)?ge:x;return T&&pa(p,b,T)&&(b=t),z(p,Sn(b,3))}var jG=ei(function(p,b){if(p==null)return[];var T=b.length;return T>1&&pa(p,b[0],b[1])?b=[]:T>2&&pa(b[0],b[1],b[2])&&(b=[b[0]]),$b(p,oo(b,1),[])}),ly=bi||function(){return jr.Date.now()};function $G(p,b){if(typeof b!="function")throw new ds(o);return p=ti(p),function(){if(--p<1)return b.apply(this,arguments)}}function vP(p,b,T){return b=T?t:b,b=p&&b==null?p.length:b,vh(p,O,t,t,t,t,b)}function _P(p,b){var T;if(typeof b!="function")throw new ds(o);return p=ti(p),function(){return--p>0&&(T=b.apply(this,arguments)),p<=1&&(b=t),T}}var MS=ei(function(p,b,T){var z=y;if(T.length){var H=Ki(T,F0(MS));z|=E}return vh(p,z,b,T,H)}),bP=ei(function(p,b,T){var z=y|_;if(T.length){var H=Ki(T,F0(bP));z|=E}return vh(b,z,p,T,H)});function yP(p,b,T){b=T?t:b;var z=vh(p,w,t,t,t,t,t,b);return z.placeholder=yP.placeholder,z}function xP(p,b,T){b=T?t:b;var z=vh(p,C,t,t,t,t,t,b);return z.placeholder=xP.placeholder,z}function wP(p,b,T){var z,H,Z,de,ye,Re,pt=0,mt=!1,_t=!1,jt=!0;if(typeof p!="function")throw new ds(o);b=ec(b)||0,Kr(T)&&(mt=!!T.leading,_t="maxWait"in T,Z=_t?li(ec(T.maxWait)||0,b):Z,jt="trailing"in T?!!T.trailing:jt);function on(Ps){var Ic=z,wh=H;return z=H=t,pt=Ps,de=p.apply(wh,Ic),de}function Tn(Ps){return pt=Ps,ye=wv(yi,b),mt?on(Ps):de}function ci(Ps){var Ic=Ps-Re,wh=Ps-pt,VP=b-Ic;return _t?Mi(VP,Z-wh):VP}function An(Ps){var Ic=Ps-Re,wh=Ps-pt;return Re===t||Ic>=b||Ic<0||_t&&wh>=Z}function yi(){var Ps=ly();if(An(Ps))return Pi(Ps);ye=wv(yi,ci(Ps))}function Pi(Ps){return ye=t,jt&&z?on(Ps):(z=H=t,de)}function wl(){ye!==t&&O6(ye),pt=0,z=Re=H=ye=t}function ma(){return ye===t?de:Pi(ly())}function Sl(){var Ps=ly(),Ic=An(Ps);if(z=arguments,H=this,Re=Ps,Ic){if(ye===t)return Tn(Re);if(_t)return O6(ye),ye=wv(yi,b),on(Re)}return ye===t&&(ye=wv(yi,b)),de}return Sl.cancel=wl,Sl.flush=ma,Sl}var XG=ei(function(p,b){return rv(p,1,b)}),YG=ei(function(p,b,T){return rv(p,ec(b)||0,T)});function KG(p){return vh(p,A)}function cy(p,b){if(typeof p!="function"||b!=null&&typeof b!="function")throw new ds(o);var T=function(){var z=arguments,H=b?b.apply(this,z):z[0],Z=T.cache;if(Z.has(H))return Z.get(H);var de=p.apply(this,z);return T.cache=Z.set(H,de)||Z,de};return T.cache=new(cy.Cache||Dc),T}cy.Cache=Dc;function uy(p){if(typeof p!="function")throw new ds(o);return function(){var b=arguments;switch(b.length){case 0:return!p.call(this);case 1:return!p.call(this,b[0]);case 2:return!p.call(this,b[0],b[1]);case 3:return!p.call(this,b[0],b[1],b[2])}return!p.apply(this,b)}}function ZG(p){return _P(2,p)}var JG=UH(function(p,b){b=b.length==1&&Xn(b[0])?Bn(b[0],cn(Sn())):Bn(oo(b,1),cn(Sn()));var T=b.length;return ei(function(z){for(var H=-1,Z=Mi(z.length,T);++H<Z;)z[H]=b[H].call(this,z[H]);return vn(p,this,z)})}),CS=ei(function(p,b){var T=Ki(b,F0(CS));return vh(p,E,t,b,T)}),SP=ei(function(p,b){var T=Ki(b,F0(SP));return vh(p,k,t,b,T)}),QG=_h(function(p,b){return vh(p,R,t,t,t,b)});function eW(p,b){if(typeof p!="function")throw new ds(o);return b=b===t?b:ti(b),ei(p,b)}function tW(p,b){if(typeof p!="function")throw new ds(o);return b=b==null?0:li(ti(b),0),ei(function(T){var z=T[b],H=Pd(T,0,b);return z&&Xl(H,z),vn(p,this,H)})}function nW(p,b,T){var z=!0,H=!0;if(typeof p!="function")throw new ds(o);return Kr(T)&&(z="leading"in T?!!T.leading:z,H="trailing"in T?!!T.trailing:H),wP(p,b,{leading:z,maxWait:b,trailing:H})}function iW(p){return vP(p,1)}function rW(p,b){return CS(cS(b),p)}function sW(){if(!arguments.length)return[];var p=arguments[0];return Xn(p)?p:[p]}function oW(p){return La(p,f)}function aW(p,b){return b=typeof b=="function"?b:t,La(p,f,b)}function lW(p){return La(p,h|f)}function cW(p,b){return b=typeof b=="function"?b:t,La(p,h|f,b)}function uW(p,b){return b==null||ph(p,b,Mo(b))}function zc(p,b){return p===b||p!==p&&b!==b}var hW=ny(cv),dW=ny(function(p,b){return p>=b}),np=Bb(function(){return arguments}())?Bb:function(p){return ps(p)&&di.call(p,"callee")&&!$o.call(p,"callee")},Xn=We.isArray,fW=Wf?cn(Wf):Q3;function Ia(p){return p!=null&&hy(p.length)&&!yh(p)}function As(p){return ps(p)&&Ia(p)}function pW(p){return p===!0||p===!1||ps(p)&&So(p)==Le}var kd=Kn||IS,mW=P0?cn(P0):hv;function gW(p){return ps(p)&&p.nodeType===1&&!Sv(p)}function vW(p){if(p==null)return!0;if(Ia(p)&&(Xn(p)||typeof p=="string"||typeof p.splice=="function"||kd(p)||B0(p)||np(p)))return!p.length;var b=Xo(p);if(b==ke||b==ue)return!p.size;if(xv(p))return!fv(p).length;for(var T in p)if(di.call(p,T))return!1;return!0}function _W(p,b){return Qf(p,b)}function bW(p,b,T){T=typeof T=="function"?T:t;var z=T?T(p,b):t;return z===t?Qf(p,b,t,T):!!z}function ES(p){if(!ps(p))return!1;var b=So(p);return b==rt||b==ft||typeof p.message=="string"&&typeof p.name=="string"&&!Sv(p)}function yW(p){return typeof p=="number"&&Pr(p)}function yh(p){if(!Kr(p))return!1;var b=So(p);return b==tt||b==se||b==at||b==nt}function MP(p){return typeof p=="number"&&p==ti(p)}function hy(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=J}function Kr(p){var b=typeof p;return p!=null&&(b=="object"||b=="function")}function ps(p){return p!=null&&typeof p=="object"}var CP=jf?cn(jf):Vb;function xW(p,b){return p===b||dv(p,b,gS(b))}function wW(p,b,T){return T=typeof T=="function"?T:t,dv(p,b,gS(b),T)}function SW(p){return EP(p)&&p!=+p}function MW(p){if(aq(p))throw new Oe(s);return Hb(p)}function CW(p){return p===null}function EW(p){return p==null}function EP(p){return typeof p=="number"||ps(p)&&So(p)==ae}function Sv(p){if(!ps(p)||So(p)!=Ie)return!1;var b=ka(p);if(b===null)return!0;var T=di.call(b,"constructor")&&b.constructor;return typeof T=="function"&&T instanceof T&&ar.call(T)==Kl}var TS=$f?cn($f):tS;function TW(p){return MP(p)&&p>=-J&&p<=J}var TP=ah?cn(ah):nS;function dy(p){return typeof p=="string"||!Xn(p)&&ps(p)&&So(p)==Pe}function xl(p){return typeof p=="symbol"||ps(p)&&So(p)==U}var B0=xd?cn(xd):iS;function AW(p){return p===t}function PW(p){return ps(p)&&Xo(p)==Ve}function kW(p){return ps(p)&&So(p)==st}var RW=ny(pv),OW=ny(function(p,b){return p<=b});function AP(p){if(!p)return[];if(Ia(p))return dy(p)?Xr(p):za(p);if(ha&&p[ha])return Ur(p[ha]());var b=Xo(p),T=b==ke?gi:b==ue?Fe:V0;return T(p)}function xh(p){if(!p)return p===0?p:0;if(p=ec(p),p===ee||p===-ee){var b=p<0?-1:1;return b*Ee}return p===p?p:0}function ti(p){var b=xh(p),T=b%1;return b===b?T?b-T:b:0}function PP(p){return p?gu(ti(p),0,ie):0}function ec(p){if(typeof p=="number")return p;if(xl(p))return le;if(Kr(p)){var b=typeof p.valueOf=="function"?p.valueOf():p;p=Kr(b)?b+"":b}if(typeof p!="string")return p===0?p:+p;p=us(p);var T=et.test(p);return T||ot.test(p)?Hf(p.slice(2),T?2:8):je.test(p)?le:+p}function kP(p){return bu(p,Na(p))}function LW(p){return p?gu(ti(p),-J,J):p===0?p:0}function nr(p){return p==null?"":gt(p)}var DW=N0(function(p,b){if(xv(b)||Ia(b)){bu(b,Mo(b),p);return}for(var T in b)di.call(b,T)&&Kf(p,T,b[T])}),RP=N0(function(p,b){bu(b,Na(b),p)}),fy=N0(function(p,b,T,z){bu(b,Na(b),p,z)}),zW=N0(function(p,b,T,z){bu(b,Mo(b),p,z)}),IW=_h(iv);function NW(p,b){var T=pu(p);return b==null?T:fh(T,b)}var UW=ei(function(p,b){p=$t(p);var T=-1,z=b.length,H=z>2?b[2]:t;for(H&&pa(b[0],b[1],H)&&(z=1);++T<z;)for(var Z=b[T],de=Na(Z),ye=-1,Re=de.length;++ye<Re;){var pt=de[ye],mt=p[pt];(mt===t||zc(mt,Si[pt])&&!di.call(p,pt))&&(p[pt]=Z[pt])}return p}),FW=ei(function(p){return p.push(t,X6),vn(OP,t,p)});function BW(p,b){return Qe(p,Sn(b,3),Zl)}function VW(p,b){return Qe(p,Sn(b,3),lv)}function HW(p,b){return p==null?p:av(p,Sn(b,3),Na)}function qW(p,b){return p==null?p:Ub(p,Sn(b,3),Na)}function GW(p,b){return p&&Zl(p,Sn(b,3))}function WW(p,b){return p&&lv(p,Sn(b,3))}function jW(p){return p==null?[]:z0(p,Mo(p))}function $W(p){return p==null?[]:z0(p,Na(p))}function AS(p,b,T){var z=p==null?t:mh(p,b);return z===t?T:z}function XW(p,b){return p!=null&&Z6(p,b,uv)}function PS(p,b){return p!=null&&Z6(p,b,Fb)}var YW=q6(function(p,b,T){b!=null&&typeof b.toString!="function"&&(b=fs.call(b)),p[b]=T},RS(Ua)),KW=q6(function(p,b,T){b!=null&&typeof b.toString!="function"&&(b=fs.call(b)),di.call(p,b)?p[b].push(T):p[b]=[T]},Sn),ZW=ei(Da);function Mo(p){return Ia(p)?L0(p):fv(p)}function Na(p){return Ia(p)?L0(p,!0):rS(p)}function JW(p,b){var T={};return b=Sn(b,3),Zl(p,function(z,H,Z){wo(T,b(z,H,Z),z)}),T}function QW(p,b){var T={};return b=Sn(b,3),Zl(p,function(z,H,Z){wo(T,H,b(z,H,Z))}),T}var ej=N0(function(p,b,T){I0(p,b,T)}),OP=N0(function(p,b,T,z){I0(p,b,T,z)}),tj=_h(function(p,b){var T={};if(p==null)return T;var z=!1;b=Bn(b,function(Z){return Z=Ad(Z,p),z||(z=Z.length>1),Z}),bu(p,pS(p),T),z&&(T=La(T,h|d|f,YH));for(var H=b.length;H--;)yn(T,b[H]);return T});function nj(p,b){return LP(p,uy(Sn(b)))}var ij=_h(function(p,b){return p==null?{}:Xb(p,b)});function LP(p,b){if(p==null)return{};var T=Bn(pS(p),function(z){return[z]});return b=Sn(b),gv(p,T,function(z,H){return b(z,H[0])})}function rj(p,b,T){b=Ad(b,p);var z=-1,H=b.length;for(H||(H=1,p=t);++z<H;){var Z=p==null?t:p[yu(b[z])];Z===t&&(z=H,Z=T),p=yh(Z)?Z.call(p):Z}return p}function sj(p,b,T){return p==null?p:Cd(p,b,T)}function oj(p,b,T,z){return z=typeof z=="function"?z:t,p==null?p:Cd(p,b,T,z)}var DP=j6(Mo),zP=j6(Na);function aj(p,b,T){var z=Xn(p),H=z||kd(p)||B0(p);if(b=Sn(b,4),T==null){var Z=p&&p.constructor;H?T=z?new Z:[]:Kr(p)?T=yh(Z)?pu(ka(p)):{}:T={}}return(H?_o:Zl)(p,function(de,ye,Re){return b(T,de,ye,Re)}),T}function lj(p,b){return p==null?!0:yn(p,b)}function cj(p,b,T){return p==null?p:Ai(p,b,cS(T))}function uj(p,b,T,z){return z=typeof z=="function"?z:t,p==null?p:Ai(p,b,cS(T),z)}function V0(p){return p==null?[]:Ns(p,Mo(p))}function hj(p){return p==null?[]:Ns(p,Na(p))}function dj(p,b,T){return T===t&&(T=b,b=t),T!==t&&(T=ec(T),T=T===T?T:0),b!==t&&(b=ec(b),b=b===b?b:0),gu(ec(p),b,T)}function fj(p,b,T){return b=xh(b),T===t?(T=b,b=0):T=xh(T),p=ec(p),Z3(p,b,T)}function pj(p,b,T){if(T&&typeof T!="boolean"&&pa(p,b,T)&&(b=T=t),T===t&&(typeof b=="boolean"?(T=b,b=t):typeof p=="boolean"&&(T=p,p=t)),p===t&&b===t?(p=0,b=1):(p=xh(p),b===t?(b=p,p=0):b=xh(b)),p>b){var z=p;p=b,b=z}if(T||p%1||b%1){var H=Io();return Mi(p+H*(b-p+vl("1e-"+((H+"").length-1))),b)}return _v(p,b)}var mj=U0(function(p,b,T){return b=b.toLowerCase(),p+(T?IP(b):b)});function IP(p){return kS(nr(p).toLowerCase())}function NP(p){return p=nr(p),p&&p.replace(an,un).replace(vo,"")}function gj(p,b,T){p=nr(p),b=gt(b);var z=p.length;T=T===t?z:gu(ti(T),0,z);var H=T;return T-=b.length,T>=0&&p.slice(T,H)==b}function vj(p){return p=nr(p),p&&Te.test(p)?p.replace(kt,cr):p}function _j(p){return p=nr(p),p&&dl.test(p)?p.replace(to,"\\$&"):p}var bj=U0(function(p,b,T){return p+(T?"-":"")+b.toLowerCase()}),yj=U0(function(p,b,T){return p+(T?" ":"")+b.toLowerCase()}),xj=B6("toLowerCase");function wj(p,b,T){p=nr(p),b=ti(b);var z=b?Ts(p):0;if(!b||z>=b)return p;var H=(b-z)/2;return ty($n(H),T)+p+ty(Kt(H),T)}function Sj(p,b,T){p=nr(p),b=ti(b);var z=b?Ts(p):0;return b&&z<b?p+ty(b-z,T):p}function Mj(p,b,T){p=nr(p),b=ti(b);var z=b?Ts(p):0;return b&&z<b?ty(b-z,T)+p:p}function Cj(p,b,T){return T||b==null?b=0:b&&(b=+b),Zi(nr(p).replace(Hl,""),b||0)}function Ej(p,b,T){return(T?pa(p,b,T):b===t)?b=1:b=ti(b),bv(nr(p),b)}function Tj(){var p=arguments,b=nr(p[0]);return p.length<3?b:b.replace(p[1],p[2])}var Aj=U0(function(p,b,T){return p+(T?"_":"")+b.toLowerCase()});function Pj(p,b,T){return T&&typeof T!="number"&&pa(p,b,T)&&(b=T=t),T=T===t?ie:T>>>0,T?(p=nr(p),p&&(typeof b=="string"||b!=null&&!TS(b))&&(b=gt(b),!b&&ur(p))?Pd(Xr(p),0,T):p.split(b,T)):[]}var kj=U0(function(p,b,T){return p+(T?" ":"")+kS(b)});function Rj(p,b,T){return p=nr(p),T=T==null?0:gu(ti(T),0,p.length),b=gt(b),p.slice(T,T+b.length)==b}function Oj(p,b,T){var z=X.templateSettings;T&&pa(p,b,T)&&(b=t),p=nr(p),b=fy({},b,z,$6);var H=fy({},b.imports,z.imports,$6),Z=Mo(H),de=Ns(H,Z),ye,Re,pt=0,mt=b.interpolate||tn,_t="__p += '",jt=Bi((b.escape||tn).source+"|"+mt.source+"|"+(mt===as?Ms:tn).source+"|"+(b.evaluate||tn).source+"|$","g"),on="//# sourceURL="+(di.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yd+"]")+`
`;p.replace(jt,function(An,yi,Pi,wl,ma,Sl){return Pi||(Pi=wl),_t+=p.slice(pt,Sl).replace(mn,En),yi&&(ye=!0,_t+=`' +
__e(`+yi+`) +
'`),ma&&(Re=!0,_t+=`';
`+ma+`;
__p += '`),Pi&&(_t+=`' +
((__t = (`+Pi+`)) == null ? '' : __t) +
'`),pt=Sl+An.length,An}),_t+=`';
`;var Tn=di.call(b,"variable")&&b.variable;if(!Tn)_t=`with (obj) {
`+_t+`
}
`;else if(oa.test(Tn))throw new Oe(a);_t=(Re?_t.replace(Yn,""):_t).replace(Me,"$1").replace(At,"$1;"),_t="function("+(Tn||"obj")+`) {
`+(Tn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ye?", __e = _.escape":"")+(Re?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+_t+`return __p
}`;var ci=FP(function(){return Ln(Z,on+"return "+_t).apply(t,de)});if(ci.source=_t,ES(ci))throw ci;return ci}function Lj(p){return nr(p).toLowerCase()}function Dj(p){return nr(p).toUpperCase()}function zj(p,b,T){if(p=nr(p),p&&(T||b===t))return us(p);if(!p||!(b=gt(b)))return p;var z=Xr(p),H=Xr(b),Z=bn(z,H),de=Nr(z,H)+1;return Pd(z,Z,de).join("")}function Ij(p,b,T){if(p=nr(p),p&&(T||b===t))return p.slice(0,Us(p)+1);if(!p||!(b=gt(b)))return p;var z=Xr(p),H=Nr(z,Xr(b))+1;return Pd(z,0,H).join("")}function Nj(p,b,T){if(p=nr(p),p&&(T||b===t))return p.replace(Hl,"");if(!p||!(b=gt(b)))return p;var z=Xr(p),H=bn(z,Xr(b));return Pd(z,H).join("")}function Uj(p,b){var T=D,z=I;if(Kr(b)){var H="separator"in b?b.separator:H;T="length"in b?ti(b.length):T,z="omission"in b?gt(b.omission):z}p=nr(p);var Z=p.length;if(ur(p)){var de=Xr(p);Z=de.length}if(T>=Z)return p;var ye=T-Ts(z);if(ye<1)return z;var Re=de?Pd(de,0,ye).join(""):p.slice(0,ye);if(H===t)return Re+z;if(de&&(ye+=Re.length-ye),TS(H)){if(p.slice(ye).search(H)){var pt,mt=Re;for(H.global||(H=Bi(H.source,nr(ne.exec(H))+"g")),H.lastIndex=0;pt=H.exec(mt);)var _t=pt.index;Re=Re.slice(0,_t===t?ye:_t)}}else if(p.indexOf(gt(H),ye)!=ye){var jt=Re.lastIndexOf(H);jt>-1&&(Re=Re.slice(0,jt))}return Re+z}function Fj(p){return p=nr(p),p&&Lt.test(p)?p.replace(qe,Fr):p}var Bj=U0(function(p,b,T){return p+(T?" ":"")+b.toUpperCase()}),kS=B6("toUpperCase");function UP(p,b,T){return p=nr(p),b=T?t:b,b===t?hs(p)?Yl(p):Ae(p):p.match(b)||[]}var FP=ei(function(p,b){try{return vn(p,t,b)}catch(T){return ES(T)?T:new Oe(T)}}),Vj=_h(function(p,b){return _o(b,function(T){T=yu(T),wo(p,T,MS(p[T],p))}),p});function Hj(p){var b=p==null?0:p.length,T=Sn();return p=b?Bn(p,function(z){if(typeof z[1]!="function")throw new ds(o);return[T(z[0]),z[1]]}):[],ei(function(z){for(var H=-1;++H<b;){var Z=p[H];if(vn(Z[0],this,z))return vn(Z[1],this,z)}})}function qj(p){return K3(La(p,h))}function RS(p){return function(){return p}}function Gj(p,b){return p==null||p!==p?b:p}var Wj=H6(),jj=H6(!0);function Ua(p){return p}function OS(p){return qb(typeof p=="function"?p:La(p,h))}function $j(p){return Gb(La(p,h))}function Xj(p,b){return mv(p,La(b,h))}var Yj=ei(function(p,b){return function(T){return Da(T,p,b)}}),Kj=ei(function(p,b){return function(T){return Da(p,T,b)}});function LS(p,b,T){var z=Mo(b),H=z0(b,z);T==null&&!(Kr(b)&&(H.length||!z.length))&&(T=b,b=p,p=this,H=z0(b,Mo(b)));var Z=!(Kr(T)&&"chain"in T)||!!T.chain,de=yh(p);return _o(H,function(ye){var Re=b[ye];p[ye]=Re,de&&(p.prototype[ye]=function(){var pt=this.__chain__;if(Z||pt){var mt=p(this.__wrapped__),_t=mt.__actions__=za(this.__actions__);return _t.push({func:Re,args:arguments,thisArg:p}),mt.__chain__=pt,mt}return Re.apply(p,Xl([this.value()],arguments))})}),p}function Zj(){return jr._===this&&(jr._=Pc),this}function DS(){}function Jj(p){return p=ti(p),ei(function(b){return jb(b,p)})}var Qj=hS(Bn),e$=hS(R0),t$=hS(ge);function BP(p){return _S(p)?rn(yu(p)):Yb(p)}function n$(p){return function(b){return p==null?t:mh(p,b)}}var i$=G6(),r$=G6(!0);function zS(){return[]}function IS(){return!1}function s$(){return{}}function o$(){return""}function a$(){return!0}function l$(p,b){if(p=ti(p),p<1||p>J)return[];var T=ie,z=Mi(p,ie);b=Sn(b),p-=ie;for(var H=sr(z,b);++T<p;)b(T);return H}function c$(p){return Xn(p)?Bn(p,yu):xl(p)?[p]:za(oP(nr(p)))}function u$(p){var b=++Pa;return nr(p)+b}var h$=ey(function(p,b){return p+b},0),d$=dS("ceil"),f$=ey(function(p,b){return p/b},1),p$=dS("floor");function m$(p){return p&&p.length?D0(p,Ua,cv):t}function g$(p,b){return p&&p.length?D0(p,Sn(b,2),cv):t}function v$(p){return nn(p,Ua)}function _$(p,b){return nn(p,Sn(b,2))}function b$(p){return p&&p.length?D0(p,Ua,pv):t}function y$(p,b){return p&&p.length?D0(p,Sn(b,2),pv):t}var x$=ey(function(p,b){return p*b},1),w$=dS("round"),S$=ey(function(p,b){return p-b},0);function M$(p){return p&&p.length?Yi(p,Ua):0}function C$(p,b){return p&&p.length?Yi(p,Sn(b,2)):0}return X.after=$G,X.ary=vP,X.assign=DW,X.assignIn=RP,X.assignInWith=fy,X.assignWith=zW,X.at=IW,X.before=_P,X.bind=MS,X.bindAll=Vj,X.bindKey=bP,X.castArray=sW,X.chain=pP,X.chunk=pq,X.compact=mq,X.concat=gq,X.cond=Hj,X.conforms=qj,X.constant=RS,X.countBy=MG,X.create=NW,X.curry=yP,X.curryRight=xP,X.debounce=wP,X.defaults=UW,X.defaultsDeep=FW,X.defer=XG,X.delay=YG,X.difference=vq,X.differenceBy=_q,X.differenceWith=bq,X.drop=yq,X.dropRight=xq,X.dropRightWhile=wq,X.dropWhile=Sq,X.fill=Mq,X.filter=EG,X.flatMap=PG,X.flatMapDeep=kG,X.flatMapDepth=RG,X.flatten=uP,X.flattenDeep=Cq,X.flattenDepth=Eq,X.flip=KG,X.flow=Wj,X.flowRight=jj,X.fromPairs=Tq,X.functions=jW,X.functionsIn=$W,X.groupBy=OG,X.initial=Pq,X.intersection=kq,X.intersectionBy=Rq,X.intersectionWith=Oq,X.invert=YW,X.invertBy=KW,X.invokeMap=DG,X.iteratee=OS,X.keyBy=zG,X.keys=Mo,X.keysIn=Na,X.map=ay,X.mapKeys=JW,X.mapValues=QW,X.matches=$j,X.matchesProperty=Xj,X.memoize=cy,X.merge=ej,X.mergeWith=OP,X.method=Yj,X.methodOf=Kj,X.mixin=LS,X.negate=uy,X.nthArg=Jj,X.omit=tj,X.omitBy=nj,X.once=ZG,X.orderBy=IG,X.over=Qj,X.overArgs=JG,X.overEvery=e$,X.overSome=t$,X.partial=CS,X.partialRight=SP,X.partition=NG,X.pick=ij,X.pickBy=LP,X.property=BP,X.propertyOf=n$,X.pull=Iq,X.pullAll=dP,X.pullAllBy=Nq,X.pullAllWith=Uq,X.pullAt=Fq,X.range=i$,X.rangeRight=r$,X.rearg=QG,X.reject=BG,X.remove=Bq,X.rest=eW,X.reverse=wS,X.sampleSize=HG,X.set=sj,X.setWith=oj,X.shuffle=qG,X.slice=Vq,X.sortBy=jG,X.sortedUniq=Xq,X.sortedUniqBy=Yq,X.split=Pj,X.spread=tW,X.tail=Kq,X.take=Zq,X.takeRight=Jq,X.takeRightWhile=Qq,X.takeWhile=eG,X.tap=mG,X.throttle=nW,X.thru=oy,X.toArray=AP,X.toPairs=DP,X.toPairsIn=zP,X.toPath=c$,X.toPlainObject=kP,X.transform=aj,X.unary=iW,X.union=tG,X.unionBy=nG,X.unionWith=iG,X.uniq=rG,X.uniqBy=sG,X.uniqWith=oG,X.unset=lj,X.unzip=SS,X.unzipWith=fP,X.update=cj,X.updateWith=uj,X.values=V0,X.valuesIn=hj,X.without=aG,X.words=UP,X.wrap=rW,X.xor=lG,X.xorBy=cG,X.xorWith=uG,X.zip=hG,X.zipObject=dG,X.zipObjectDeep=fG,X.zipWith=pG,X.entries=DP,X.entriesIn=zP,X.extend=RP,X.extendWith=fy,LS(X,X),X.add=h$,X.attempt=FP,X.camelCase=mj,X.capitalize=IP,X.ceil=d$,X.clamp=dj,X.clone=oW,X.cloneDeep=lW,X.cloneDeepWith=cW,X.cloneWith=aW,X.conformsTo=uW,X.deburr=NP,X.defaultTo=Gj,X.divide=f$,X.endsWith=gj,X.eq=zc,X.escape=vj,X.escapeRegExp=_j,X.every=CG,X.find=TG,X.findIndex=lP,X.findKey=BW,X.findLast=AG,X.findLastIndex=cP,X.findLastKey=VW,X.floor=p$,X.forEach=mP,X.forEachRight=gP,X.forIn=HW,X.forInRight=qW,X.forOwn=GW,X.forOwnRight=WW,X.get=AS,X.gt=hW,X.gte=dW,X.has=XW,X.hasIn=PS,X.head=hP,X.identity=Ua,X.includes=LG,X.indexOf=Aq,X.inRange=fj,X.invoke=ZW,X.isArguments=np,X.isArray=Xn,X.isArrayBuffer=fW,X.isArrayLike=Ia,X.isArrayLikeObject=As,X.isBoolean=pW,X.isBuffer=kd,X.isDate=mW,X.isElement=gW,X.isEmpty=vW,X.isEqual=_W,X.isEqualWith=bW,X.isError=ES,X.isFinite=yW,X.isFunction=yh,X.isInteger=MP,X.isLength=hy,X.isMap=CP,X.isMatch=xW,X.isMatchWith=wW,X.isNaN=SW,X.isNative=MW,X.isNil=EW,X.isNull=CW,X.isNumber=EP,X.isObject=Kr,X.isObjectLike=ps,X.isPlainObject=Sv,X.isRegExp=TS,X.isSafeInteger=TW,X.isSet=TP,X.isString=dy,X.isSymbol=xl,X.isTypedArray=B0,X.isUndefined=AW,X.isWeakMap=PW,X.isWeakSet=kW,X.join=Lq,X.kebabCase=bj,X.last=Ql,X.lastIndexOf=Dq,X.lowerCase=yj,X.lowerFirst=xj,X.lt=RW,X.lte=OW,X.max=m$,X.maxBy=g$,X.mean=v$,X.meanBy=_$,X.min=b$,X.minBy=y$,X.stubArray=zS,X.stubFalse=IS,X.stubObject=s$,X.stubString=o$,X.stubTrue=a$,X.multiply=x$,X.nth=zq,X.noConflict=Zj,X.noop=DS,X.now=ly,X.pad=wj,X.padEnd=Sj,X.padStart=Mj,X.parseInt=Cj,X.random=pj,X.reduce=UG,X.reduceRight=FG,X.repeat=Ej,X.replace=Tj,X.result=rj,X.round=w$,X.runInContext=_e,X.sample=VG,X.size=GG,X.snakeCase=Aj,X.some=WG,X.sortedIndex=Hq,X.sortedIndexBy=qq,X.sortedIndexOf=Gq,X.sortedLastIndex=Wq,X.sortedLastIndexBy=jq,X.sortedLastIndexOf=$q,X.startCase=kj,X.startsWith=Rj,X.subtract=S$,X.sum=M$,X.sumBy=C$,X.template=Oj,X.times=l$,X.toFinite=xh,X.toInteger=ti,X.toLength=PP,X.toLower=Lj,X.toNumber=ec,X.toSafeInteger=LW,X.toString=nr,X.toUpper=Dj,X.trim=zj,X.trimEnd=Ij,X.trimStart=Nj,X.truncate=Uj,X.unescape=Fj,X.uniqueId=u$,X.upperCase=Bj,X.upperFirst=kS,X.each=mP,X.eachRight=gP,X.first=hP,LS(X,function(){var p={};return Zl(X,function(b,T){di.call(X.prototype,T)||(p[T]=b)}),p}(),{chain:!1}),X.VERSION=n,_o(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){X[p].placeholder=X}),_o(["drop","take"],function(p,b){_i.prototype[p]=function(T){T=T===t?1:li(ti(T),0);var z=this.__filtered__&&!b?new _i(this):this.clone();return z.__filtered__?z.__takeCount__=Mi(T,z.__takeCount__):z.__views__.push({size:Mi(T,ie),type:p+(z.__dir__<0?"Right":"")}),z},_i.prototype[p+"Right"]=function(T){return this.reverse()[p](T).reverse()}}),_o(["filter","map","takeWhile"],function(p,b){var T=b+1,z=T==Y||T==re;_i.prototype[p]=function(H){var Z=this.clone();return Z.__iteratees__.push({iteratee:Sn(H,3),type:T}),Z.__filtered__=Z.__filtered__||z,Z}}),_o(["head","last"],function(p,b){var T="take"+(b?"Right":"");_i.prototype[p]=function(){return this[T](1).value()[0]}}),_o(["initial","tail"],function(p,b){var T="drop"+(b?"":"Right");_i.prototype[p]=function(){return this.__filtered__?new _i(this):this[T](1)}}),_i.prototype.compact=function(){return this.filter(Ua)},_i.prototype.find=function(p){return this.filter(p).head()},_i.prototype.findLast=function(p){return this.reverse().find(p)},_i.prototype.invokeMap=ei(function(p,b){return typeof p=="function"?new _i(this):this.map(function(T){return Da(T,p,b)})}),_i.prototype.reject=function(p){return this.filter(uy(Sn(p)))},_i.prototype.slice=function(p,b){p=ti(p);var T=this;return T.__filtered__&&(p>0||b<0)?new _i(T):(p<0?T=T.takeRight(-p):p&&(T=T.drop(p)),b!==t&&(b=ti(b),T=b<0?T.dropRight(-b):T.take(b-p)),T)},_i.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},_i.prototype.toArray=function(){return this.take(ie)},Zl(_i.prototype,function(p,b){var T=/^(?:filter|find|map|reject)|While$/.test(b),z=/^(?:head|last)$/.test(b),H=X[z?"take"+(b=="last"?"Right":""):b],Z=z||/^find/.test(b);H&&(X.prototype[b]=function(){var de=this.__wrapped__,ye=z?[1]:arguments,Re=de instanceof _i,pt=ye[0],mt=Re||Xn(de),_t=function(yi){var Pi=H.apply(X,Xl([yi],ye));return z&&jt?Pi[0]:Pi};mt&&T&&typeof pt=="function"&&pt.length!=1&&(Re=mt=!1);var jt=this.__chain__,on=!!this.__actions__.length,Tn=Z&&!jt,ci=Re&&!on;if(!Z&&mt){de=ci?de:new _i(this);var An=p.apply(de,ye);return An.__actions__.push({func:oy,args:[_t],thisArg:t}),new Oa(An,jt)}return Tn&&ci?p.apply(this,ye):(An=this.thru(_t),Tn?z?An.value()[0]:An.value():An)})}),_o(["pop","push","shift","sort","splice","unshift"],function(p){var b=Aa[p],T=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",z=/^(?:pop|shift)$/.test(p);X.prototype[p]=function(){var H=arguments;if(z&&!this.__chain__){var Z=this.value();return b.apply(Xn(Z)?Z:[],H)}return this[T](function(de){return b.apply(Xn(de)?de:[],H)})}}),Zl(_i.prototype,function(p,b){var T=X[b];if(T){var z=T.name+"";di.call(tr,z)||(tr[z]=[]),tr[z].push({name:b,func:T})}}),tr[Qb(t,_).name]=[{name:"wrapper",func:t}],_i.prototype.clone=A3,_i.prototype.reverse=Jg,_i.prototype.value=P3,X.prototype.at=gG,X.prototype.chain=vG,X.prototype.commit=_G,X.prototype.next=bG,X.prototype.plant=xG,X.prototype.reverse=wG,X.prototype.toJSON=X.prototype.valueOf=X.prototype.value=SG,X.prototype.first=X.prototype.head,ha&&(X.prototype[ha]=yG),X},Vs=Br();Go?((Go.exports=Vs)._=Vs,qf._=Vs):jr._=Vs}).call(it)})(Tw,Tw.exports);Tw.exports;new qn;new qn;new rr;class Zne{static apply(e){e.set=function(t){const n=this.options||{},r=Object.entries(t).reduce(function(s,[o,a]){return n[o]!==a&&(s[o]=a),s},{});this.options=Object.assign(n,r),this.trigger({type:"change",options:t,changes:r})},e.get=function(){return this.options},e.api=function(t,n){return t||(t={}),n&&Object.entries(t).forEach(function([r,s]){typeof s=="function"&&(t[r]=(...o)=>s(...o,n))}),t.set=this.set.bind(this),t.get=this.get.bind(this),t}}}class Xc{static bind(e,t){return function(n,r){r.__binds||(r.__binds=[]);let s=e;Array.isArray(n)&&(s=n[0],n=n[1]);const o=/^([^.:]*(?:\.[^.:]+)*)?(?::(.*))?$/.exec(n),a=o[1].split(/\./g),l=a.pop(),c=o[2]||l,u=a.shift();let h={this:r}[u]||t[u]||e[u]||s;for(;h&&(n=a.shift());)h=h[n];if(h&&(h.on||h.addEventListener)){const d=function(g){r[c]&&r[c](g,e)};Xc._polyfill(h,["addEventListener","on"],function(g){h[g](l,d)});const f={target:h,name:l,callback:d};return r.__binds.push(f),d}else throw"Cannot bind '"+n+"' in "+this.__name}}static unbind(){return function(e){e.__binds&&(e.__binds.forEach((function(t){Xc._polyfill(t.target,["removeEventListener","off"],function(n){t.target[n](t.name,t.callback)})}).bind(this)),e.__binds=[])}}static apply(e){e.trigger=Xc._trigger,e.triggerOnce=Xc._triggerOnce,e.hasEventListener=bc.prototype.hasEventListener,e.addEventListener=bc.prototype.addEventListener,e.removeEventListener=bc.prototype.removeEventListener,e.on=e.addEventListener,e.off=e.removeEventListener,e.dispatchEvent=e.trigger}static _triggerOnce(e){this.trigger(e),this._listeners&&delete this._listeners[e.type]}static _trigger(e){if(this._listeners===void 0)return;const t=e.type;let n=this._listeners[t];if(n!==void 0){n=n.slice();const r=n.length;e.target=this;for(let s=0;s<r;s++)n[s].call(this,e,this)}}static _polyfill(e,t,n){t.map(function(r){return e.method}),t.length&&n(t[0])}}function D8(i){return i&&typeof i.valueOf()=="string"}const Jne=(i,e)=>{let t=0;for(const n of i){if(e(n,t,i)===!1)break;t++}};class Hi{static initClass(){this.Plugins={},this.Aliases={}}static registerPlugin(e,t){const n=function(r){Hi.Plugin.call(this,r),this.__name=e};n.prototype=Object.assign(new Hi.Plugin,t),this.Plugins[e]=n}static unregisterPlugin(e){delete this.Plugins[e]}static registerAlias(e,t){this.Aliases[e]=t}static unregisterAlias(e){delete this.Aliases[e]}constructor(e){if(e){let r=[].slice.apply(arguments);if(e={},r[0]instanceof Node){const s=r[0];r=r.slice(1),e.element=s}D8(r[0])?e.plugins=r:Array.isArray(r[0])?e.plugins=r[0]:r[0]&&(e=Object.assign({},r[0],e))}const t={init:!0,element:document.body,plugins:["core"],aliases:{},plugindb:Hi.Plugins||{},aliasdb:Hi.Aliases||{}};this.__options=Object.assign({},t,e||{}),this.__inited=!1,this.__destroyed=!1,this.__installed=[];let n=this.__options.element;n===""+n&&(n=document.querySelector(n)),this.plugins={},this.element=n,this.trigger=this.trigger.bind(this),this.frame=this.frame.bind(this),this.events=["pre","update","render","post"].map(function(r){return{type:r}}),this.__options.init&&this.init()}init(){this.__inited||(this.__inited=!0,this.install(this.__options.plugins))}destroy(){this.__inited&&(this.__destroyed||(this.__destroyed=!0,this.trigger({type:"destroy"}),this.uninstall()))}frame(){this.events.map(this.trigger)}resolve(e){e=Array.isArray(e)?e:[e];const t=this.__options,n=Object.assign({},t.aliasdb,t.aliases),r=function(o){const a=o.split(":");return a[1]?(n[a[0]]=[a[1]],!1):!0};e=e.filter(r),Object.entries(n).forEach(function([o,a]){n[o]=Array.isArray(a)?a:[a]});function s(o,a,l){if(l>=256)throw"Plug-in alias recursion detected.";return o=o.filter(r),o.forEach(function(c){const u=n[c];u?a=a.concat(s(u,[],l+1)):a.push(c)}),a}return s(e,[],0)}install(e){e=Array.isArray(e)?e:[e],e=this.resolve(e),Jne(e,t=>this.__install(t)),this.__ready()}uninstall(e){e&&(e=Array.isArray(e)?e:[e],e=this.resolve(e)),(e||this.__installed).reverse().forEach(t=>this.__uninstall(t))}__install(e){const t=this.__options.plugindb[e];if(!t)throw"[three.install] Cannot install. '"+e+"' is not registered.";if(this.plugins[e])return console.warn("[three.install] "+e+" is already installed.");const n=t,r=new n(this.__options[e]||{},e);this.plugins[e]=r;const s=r.install(this);return this.__installed.push(r),this.trigger({type:"install",plugin:r}),s}__uninstall(e){const t=D8(e)?this.plugins[e]:e;if(!t){console.warn("[three.uninstall] "+e+"' is not installed.");return}e=t.__name,t.uninstall(this),this.__installed=this.__installed.filter(n=>n!==t),delete this.plugins[e],this.trigger({type:"uninstall",plugin:t})}__ready(){this.triggerOnce({type:"ready"})}}Hi.initClass();Hi.Plugin=function(i){this.options=Object.assign({},this.defaults,i||{})};Hi.Plugin.prototype={listen:[],defaults:{},install:function(i){},uninstall:function(i){}};Xc.apply(Hi.prototype);Xc.apply(Hi.Plugin.prototype);Zne.apply(Hi.Plugin.prototype);Hi.registerPlugin("splash",{defaults:{color:"mono",fancy:!0},listen:["ready","mathbox/init:init","mathbox/progress:progress","mathbox/destroy:destroy"],uninstall(){return this.destroy()},ready(i,e){if(e.MathBox&&!this.div)return this.init(i,e)},init(i,e){let t;this.destroy();const{color:n}=this.options,r=`<div class="mathbox-loader mathbox-splash-${n}">
  <div class="mathbox-logo">
    <div> <div></div><div></div><div></div> </div>
    <div> <div></div><div></div><div></div> </div>
  </div>
  <div class="mathbox-progress"><div></div></div>
</div>`;this.div=t=document.createElement("div"),t.innerHTML=r,e.element.appendChild(t);const s=Math.random()*2-1,o=Math.random()*2-1,a=Math.random()*2-1,l=1/Math.sqrt(s*s+o*o+a*a);return this.loader=t.querySelector(".mathbox-loader"),this.bar=t.querySelector(".mathbox-progress > div"),this.gyro=t.querySelectorAll(".mathbox-logo > div"),this.transforms=["rotateZ(22deg) rotateX(24deg) rotateY(30deg)","rotateZ(11deg) rotateX(12deg) rotateY(15deg) scale3d(.6, .6, .6)"],this.random=[s*l,o*l,a*l],this.start=e.Time.now,this.timer=null},progress(i,e){if(!this.div)return;const{current:t,total:n}=i,r=t<n;clearTimeout(this.timer),r?(this.loader.classList.remove("mathbox-exit"),this.loader.style.display="block"):(this.loader.classList.add("mathbox-exit"),this.timer=setTimeout(()=>this.loader.style.display="none",150));const s=t<n?Math.round(1e3*t/n)*.1+"%":"100%";if(this.bar.style.width=s,this.options.fancy){const o=this.random,a=Math.max(0,Math.min(1,e.Time.now-this.start)),l=function(c,u){return u==null&&(u=0),c.replace(/(-?[0-9.e]+)deg/g,(h,d)=>+d+o[u++]*a*e.Time.step*60+"deg")};return(()=>{const c=[];for(let u=0;u<this.gyro.length;u++){let h;const d=this.gyro[u];this.transforms[u]=h=l(this.transforms[u]),c.push(d.style.transform=d.style.WebkitTransform=h)}return c})()}},destroy(){return this.div!=null&&this.div.remove(),this.div=null}});Hi.registerAlias("empty",["fallback","bind","renderer","size","fill","loop","time"]);Hi.registerAlias("core",["empty","scene","camera","render","warmup"]);Hi.registerAlias("VR",["core","cursor","fullscreen","render:vr"]);Hi.registerPlugin("bind",{install:function(i){const e={three:i,window};i.bind=Xc.bind(i,e),i.unbind=Xc.unbind(i),i.bind("install:bind",this),i.bind("uninstall:unbind",this)},uninstall:function(i){i.unbind(this),delete i.bind,delete i.unbind},bind:function(i,e){const t=i.plugin,n=t.listen;n&&n.forEach(function(r){e.bind(r,t)})},unbind:function(i,e){e.unbind(i.plugin)}});Hi.registerPlugin("camera",{defaults:{near:.01,far:1e4,type:"perspective",fov:60,aspect:null,left:-1,right:1,bottom:-1,top:1,klass:null,parameters:null},listen:["resize","this.change"],install:function(i){i.Camera=this.api(),i.camera=null,this.aspect=1,this.change({},i)},uninstall:function(i){delete i.Camera,delete i.camera},change:function(i,e){const t=this.options,n=e.camera;if(!e.camera||i.changes.type||i.changes.klass){const r=t.klass||{perspective:pr,orthographic:od}[t.type]||b_;e.camera=t.parameters?new r(t.parameters):new r}Object.entries(t).forEach((function([r]){Object.prototype.hasOwnProperty.call(e.camera,r)&&(e.camera[r]=t[r])}).bind(this)),this.update(e),n===e.camera||e.trigger({type:"camera",camera:e.camera})},resize:function(i,e){this.aspect=i.viewWidth/Math.max(1,i.viewHeight),this.update(e)},update:function(i){i.camera.aspect=this.options.aspect||this.aspect,i.camera.updateProjectionMatrix()}});Hi.registerPlugin("fallback",{defaults:{force:!1,fill:!0,begin:'<div class="threestrap-fallback" style="display: table; width: 100%; height: 100%;box-sizing: border-box; border: 1px dashed rgba(0, 0, 0, .25);"><div style="display: table-cell; padding: 10px; vertical-align: middle; text-align: center;">',end:"</div></div>",message:'<big><strong>This example requires WebGL</strong></big><br>Visit <a target="_blank" href="http://get.webgl.org/">get.webgl.org</a> for more info</a>'},install:function(i){let e,t;try{if(e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl"),!t||this.options.force)throw"WebGL unavailable.";i.fallback=!1}catch{const r=this.options.message,s=this.options.begin,o=this.options.end,a=this.options.fill,l=document.createElement("div");for(l.innerHTML=s+r+o,this.children=[];l.childNodes.length>0;)this.children.push(l.firstChild),i.element.appendChild(l.firstChild);return a&&i.install("fill"),this.div=l,i.fallback=!0,!1}},uninstall:function(i){this.children&&(this.children.forEach(function(e){e.parentNode.removeChild(e)}),this.children=null),delete i.fallback}});Hi.registerPlugin("fill",{defaults:{block:!0,body:!0,layout:!0},install:function(i){function e(n){const r=n.style.height;return r=="auto"||r==""}function t(n){return n.style.height="100%",n.style.margin=0,n.style.padding=0,n}this.options.body&&i.element==document.body&&(this.applied=[i.element,document.documentElement].filter(e).map(t)),this.options.block&&i.canvas&&(i.canvas.style.display="block",this.block=!0),this.options.layout&&i.element&&window.getComputedStyle(i.element).position=="static"&&(i.element.style.position="relative",this.layout=!0)},uninstall:function(i){if(this.applied){const e=function(t){return t.style.height="",t.style.margin="",t.style.padding="",t};this.applied.map(e),delete this.applied}this.block&&i.canvas&&(i.canvas.style.display="",delete this.block),this.layout&&i.element&&(i.element.style.position="",delete this.layout)},change:function(i){this.uninstall(i),this.install(i)}});Hi.registerPlugin("loop",{defaults:{start:!0,each:1},listen:["ready"],install:function(i){this.running=!1,this.lastRequestId=null,i.Loop=this.api({start:this.start.bind(this),stop:this.stop.bind(this),running:!1,window},i),this.events=["pre","update","render","post"].map(function(e){return{type:e}})},uninstall:function(i){this.stop(i)},ready:function(i,e){this.options.start&&this.start(e)},start:function(i){if(this.running)return;i.Loop.running=this.running=!0;const e=i.trigger.bind(i),t=(function(){this.running&&(this.lastRequestId=i.Loop.window.requestAnimationFrame(t),this.events.map(e))}).bind(this);this.lastRequestId=i.Loop.window.requestAnimationFrame(t),i.trigger({type:"start"})},stop:function(i){this.running&&(i.Loop.running=this.running=!1,i.Loop.window.cancelAnimationFrame(this.lastRequestId),this.lastRequestId=null,i.trigger({type:"stop"}))}});Hi.registerPlugin("render",{listen:["render"],render:function(i,e){e.scene&&e.camera&&e.renderer.render(e.scene,e.camera)}});Hi.registerPlugin("renderer",{defaults:{klass:fA,parameters:{depth:!0,stencil:!0,preserveDrawingBuffer:!0,antialias:!0}},listen:["resize"],install:function(i){const e=i.renderer=new this.options.klass(this.options.parameters);i.canvas=e.domElement,i.element.appendChild(e.domElement)},uninstall:function(i){i.element.removeChild(i.renderer.domElement),delete i.renderer,delete i.canvas},resize:function(i,e){const t=e.renderer,n=t.domElement;n&&n.tagName=="CANVAS"?t.setSize(i.renderWidth,i.renderHeight,!1):(t.setRenderSize&&t.setRenderSize(i.renderWidth,i.renderHeight),t.setSize(i.viewWidth,i.viewHeight,!1))}});Hi.registerPlugin("scene",{install:function(i){i.scene=new Eg},uninstall:function(i){delete i.scene}});Hi.registerPlugin("size",{defaults:{width:null,height:null,aspect:null,scale:1,maxRenderWidth:1/0,maxRenderHeight:1/0,devicePixelRatio:!0},listen:["window.resize:queue","element.resize:queue","this.change:queue","ready:resize","pre:pre"],install:function(i){i.Size=this.api({renderWidth:0,renderHeight:0,viewWidth:0,viewHeight:0}),this.resized=!1},uninstall:function(i){delete i.Size},queue:function(i,e){this.resized=!0},pre:function(i,e){this.resized&&(this.resized=!1,this.resize(i,e))},resize:function(i,e){const t=this.options,n=e.element,r=e.renderer;let s,o,a,l,c,u,h,d,f=0,g=0;s=a=t.width===void 0||t.width==null?n.offsetWidth||n.innerWidth||0:t.width,o=l=t.height===void 0||t.height==null?n.offsetHeight||n.innerHeight||0:t.height,h=s/o,t.aspect&&(t.aspect>h?(o=Math.round(s/t.aspect),g=Math.floor((l-o)/2)):(s=Math.round(o*t.aspect),f=Math.floor((a-s)/2)),h=s/o),d=1,t.devicePixelRatio&&typeof window<"u"&&(d=window.devicePixelRatio||1),c=Math.round(Math.min(s*d*t.scale,t.maxRenderWidth)),u=Math.round(Math.min(o*d*t.scale,t.maxRenderHeight)),c/u>h?c=Math.round(u*h):u=Math.round(c/h),d=u/o;const y=r.domElement.style;y.width=s+"px",y.height=o+"px",y.marginLeft=f+"px",y.marginTop=g+"px",Object.assign(e.Size,{renderWidth:c,renderHeight:u,viewWidth:s,viewHeight:o,aspect:h,pixelRatio:d}),e.trigger({type:"resize",renderWidth:c,renderHeight:u,viewWidth:s,viewHeight:o,aspect:h,pixelRatio:d})}});Hi.registerPlugin("time",{defaults:{speed:1,warmup:0,timeout:1},listen:["pre:tick","this.change"],now:function(){return+new Date/1e3},install:function(i){i.Time=this.api({now:this.now(),clock:0,step:1/60,frames:0,time:0,delta:1/60,average:0,fps:0}),this.last=0,this.time=0,this.clock=0,this.wait=this.options.warmup,this.clockStart=0,this.timeStart=0},tick:function(i,e){const t=this.options.speed,n=this.options.timeout,r=e.Time,s=r.now=this.now(),o=this.last;let a=this.time,l=this.clock;if(o){let c=r.delta=s-o;const u=r.average||c;c>n&&(c=0);const h=c*t;a+=c,l+=h,r.frames>0&&(r.average=u+(c-u)*.1,r.fps=1/u),r.step=h,r.clock=l-this.clockStart,r.time=a-this.timeStart,r.frames++,this.wait-- >0&&(this.clockStart=l,this.timeStart=a,r.clock=0,r.step=1e-100)}this.last=s,this.clock=l,this.time=a},uninstall:function(i){delete i.Time}});Hi.registerPlugin("warmup",{defaults:{delay:2},listen:["ready","post"],ready:function(i,e){e.renderer.domElement.style.visibility="hidden",this.frame=0,this.hidden=!0},post:function(i,e){this.hidden&&this.frame>=this.options.delay&&(e.renderer.domElement.style.visibility="visible",this.hidden=!1),this.frame++}});Hi.registerPlugin("controls",{listen:["update","resize","camera","this.change"],defaults:{klass:null,parameters:{}},install:function(i){if(!this.options.klass)throw"Must provide class for `controls.klass`";i.controls=null,this._camera=i.camera||new pr,this.change(null,i)},uninstall:function(i){delete i.controls},change:function(i,e){this.options.klass?((!i||i.changes.klass)&&(e.controls=new this.options.klass(this._camera,e.renderer.domElement)),Object.assign(e.controls,this.options.parameters)):e.controls=null},update:function(i,e){const t=e.Time&&e.Time.delta||.016666666666666666,n=e.VR&&e.VR.state;e.controls.vr&&e.controls.vr(n),e.controls.update(t)},camera:function(i,e){e.controls.object=this._camera=i.camera},resize:function(i,e){e.controls.handleResize&&e.controls.handleResize()}});Hi.registerPlugin("cursor",{listen:["update","this.change","install:change","uninstall:change","element.mousemove","vr"],defaults:{cursor:null,hide:!1,timeout:3},install:function(i){this.timeout=this.options.timeout,this.element=i.element,this.change(null,i)},uninstall:function(i){delete i.controls},change:function(i,e){this.applyCursor(e)},mousemove:function(i,e){this.options.hide&&(this.applyCursor(e),this.timeout=+this.options.timeout||0)},update:function(i,e){const t=e.Time&&e.Time.delta||.016666666666666666;this.options.hide&&(this.timeout-=t,this.timeout<0&&this.applyCursor(e,"none"))},vr:function(i,e){this.hide=i.active&&!i.hmd.fake,this.applyCursor(e)},applyCursor:function(i,e){const t=i.controls?"move":"";e=e||this.options.cursor||t,this.hide&&(e="none"),this.cursor!=e&&(this.element.style.cursor=e)}});Hi.registerPlugin("fullscreen",{defaults:{key:"f"},listen:["ready","update"],install:function(i){i.Fullscreen=this.api({active:!1,toggle:this.toggle.bind(this)},i)},uninstall:function(i){delete i.Fullscreen},ready:function(i,e){document.body.addEventListener("keypress",(function(n){this.options.key&&n.charCode==this.options.key.charCodeAt(0)&&this.toggle(e)}).bind(this));const t=(function(){const n=!!document.fullscreenElement||!!document.mozFullScreenElement||!!document.webkitFullscreenElement||!!document.msFullscreenElement;e.Fullscreen.active=this.active=n,e.trigger({type:"fullscreen",active:n})}).bind(this);document.addEventListener("fullscreenchange",t,!1),document.addEventListener("webkitfullscreenchange",t,!1),document.addEventListener("mozfullscreenchange",t,!1)},toggle:function(i){const e=i.canvas,t=i.VR&&i.VR.active?{vrDisplay:i.VR.hmd}:{};this.active?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen&&document.mozCancelFullScreen():e.requestFullScreen?e.requestFullScreen(t):e.msRequestFullScreen?e.msRequestFullscreen(t):e.webkitRequestFullscreen?e.webkitRequestFullscreen(t):e.mozRequestFullScreen&&e.mozRequestFullScreen(t)}});var kz={exports:{}};(function(i,e){(function(t,n){i.exports=n()})(it,function(){var t=function(){function n(f){return o.appendChild(f.dom),f}function r(f){for(var g=0;g<o.children.length;g++)o.children[g].style.display=g===f?"block":"none";s=f}var s=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(f){f.preventDefault(),r(++s%o.children.length)},!1);var a=(performance||Date).now(),l=a,c=0,u=n(new t.Panel("FPS","#0ff","#002")),h=n(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=n(new t.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:o,addPanel:n,showPanel:r,begin:function(){a=(performance||Date).now()},end:function(){c++;var f=(performance||Date).now();if(h.update(f-a,200),f>l+1e3&&(u.update(1e3*c/(f-l),100),l=f,c=0,d)){var g=performance.memory;d.update(g.usedJSHeapSize/1048576,g.jsHeapSizeLimit/1048576)}return f},update:function(){a=this.end()},domElement:o,setMode:r}};return t.Panel=function(n,r,s){var o=1/0,a=0,l=Math.round,c=l(window.devicePixelRatio||1),u=80*c,h=48*c,d=3*c,f=2*c,g=3*c,v=15*c,y=74*c,_=30*c,S=document.createElement("canvas");S.width=u,S.height=h,S.style.cssText="width:80px;height:48px";var w=S.getContext("2d");return w.font="bold "+9*c+"px Helvetica,Arial,sans-serif",w.textBaseline="top",w.fillStyle=s,w.fillRect(0,0,u,h),w.fillStyle=r,w.fillText(n,d,f),w.fillRect(g,v,y,_),w.fillStyle=s,w.globalAlpha=.9,w.fillRect(g,v,y,_),{dom:S,update:function(C,E){o=Math.min(o,C),a=Math.max(a,C),w.fillStyle=s,w.globalAlpha=1,w.fillRect(0,0,u,v),w.fillStyle=r,w.fillText(l(C)+" "+n+" ("+l(o)+"-"+l(a)+")",d,f),w.drawImage(S,g+c,v,y-c,_,g,v,y-c,_),w.fillRect(g+y-c,v,c,_),w.fillStyle=s,w.globalAlpha=.9,w.fillRect(g+y-c,v,c,l((1-C/E)*_))}}},t})})(kz);var Qne=kz.exports;const eie=s0(Qne);Hi.registerPlugin("stats",{listen:["pre","post"],install:function(i){const e=this.stats=new eie,t=e.domElement.style;t.position="absolute",t.top=t.left=0,i.element.appendChild(e.domElement),i.stats=e},uninstall:function(i){this.stats.domElement.remove(),delete i.stats},pre:function(i,e){this.stats.begin()},post:function(i,e){this.stats.end()}});Hi.registerPlugin("ui",{defaults:{theme:"white",style:".threestrap-ui { position: absolute; bottom: 5px; right: 5px; float: left; }.threestrap-ui button { border: 0; background: none;  vertical-align: middle; font-weight: bold; } .threestrap-ui .glyphicon { top: 2px; font-weight: bold; } @media (max-width: 640px) { .threestrap-ui button { font-size: 120% } }.threestrap-white button { color: #fff; text-shadow: 0 1px 1px rgba(0, 0, 0, 1), 0 1px 3px rgba(0, 0, 0, 1); }.threestrap-black button { color: #000; text-shadow: 0 0px 1px rgba(255, 255, 255, 1), 0 0px 2px rgba(255, 255, 255, 1), 0 0px 2px rgba(255, 255, 255, 1) }"},listen:["fullscreen"],markup:function(i,e,t){let n="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css";location.href.match(/^file:\/\//)&&(n="http://"+n);const r=[];return i.Fullscreen&&r.push('<button class="fullscreen" title="Full Screen"><span class="glyphicon glyphicon-fullscreen"></span></button>'),i.VR&&r.push('<button class="vr" title="VR Headset">VR</button>'),'<style type="text/css">@import url("'+n+'"); '+t+'</style><div class="threestrap-ui threestrap-'+e+'">'+r.join(`
`)+"</div>"},install:function(i){const e=this.ui=document.createElement("div");e.innerHTML=this.markup(i,this.options.theme,this.options.style),document.body.appendChild(e);const t=this.ui.fullscreen=e.querySelector("button.fullscreen");t&&i.bind([t,"click:goFullscreen"],this);const n=this.ui.vr=e.querySelector("button.vr");n&&i.VR&&(i.VR.set({mode:"2d"}),i.bind([n,"click:goVR"],this))},fullscreen:function(i,e){this.ui.style.display=i.active?"none":"block",i.active||e.VR&&e.VR.set({mode:"2d"})},goFullscreen:function(i,e){e.Fullscreen&&e.Fullscreen.toggle()},goVR:function(i,e){e.VR&&(e.VR.set({mode:"auto"}),e.Fullscreen.toggle())},uninstall:function(i){document.body.removeChild(this.ui)}});class z8{constructor(e,t){this.renderer=e,this.right=new oe,this.cameraLeft=new pr,this.cameraRight=new pr;const n=t.getEyeTranslation("left");this.halfIPD=new oe(n.x,n.y,n.z).length(),this.fovLeft=t.getRecommendedEyeFieldOfView("left"),this.fovRight=t.getRecommendedEyeFieldOfView("right")}FovToNDCScaleOffset(e){const t=2/(e.leftTan+e.rightTan),n=(e.leftTan-e.rightTan)*t*.5,r=2/(e.upTan+e.downTan),s=(e.upTan-e.downTan)*r*.5;return{scale:[t,r],offset:[n,s]}}FovPortToProjection(e,t,n,r,s){n=n===void 0?!0:n,r=r===void 0?.01:r,s=s===void 0?1e4:s;const o=n?-1:1,a=e.elements,l=this.FovToNDCScaleOffset(t);a[0*4+0]=l.scale[0],a[0*4+1]=0,a[0*4+2]=l.offset[0]*o,a[0*4+3]=0,a[1*4+0]=0,a[1*4+1]=l.scale[1],a[1*4+2]=-l.offset[1]*o,a[1*4+3]=0,a[2*4+0]=0,a[2*4+1]=0,a[2*4+2]=s/(r-s)*-o,a[2*4+3]=s*r/(r-s),a[3*4+0]=0,a[3*4+1]=0,a[3*4+2]=o,a[3*4+3]=0,e.transpose()}FovToProjection(e,t,n,r,s){const o={upTan:Math.tan(t.upDegrees*Math.PI/180),downTan:Math.tan(t.downDegrees*Math.PI/180),leftTan:Math.tan(t.leftDegrees*Math.PI/180),rightTan:Math.tan(t.rightDegrees*Math.PI/180)};return this.FovPortToProjection(e,o,n,r,s)}render(e,t){this.FovToProjection(this.cameraLeft.projectionMatrix,this.fovLeft,!0,t.near,t.far),this.FovToProjection(this.cameraRight.projectionMatrix,this.fovRight,!0,t.near,t.far),this.right.set(this.halfIPD,0,0),this.right.applyQuaternion(t.quaternion),this.cameraLeft.position.copy(t.position).sub(this.right),this.cameraRight.position.copy(t.position).add(this.right),this.cameraLeft.quaternion.copy(t.quaternion),this.cameraRight.quaternion.copy(t.quaternion);const n=this.renderer.devicePixelRatio||1,r=this.renderer.domElement.width/2/n,s=this.renderer.domElement.height/n;this.renderer.enableScissorTest(!0),this.renderer.setViewport(0,0,r,s),this.renderer.setScissor(0,0,r,s),this.renderer.render(e,this.cameraLeft),this.renderer.setViewport(r,0,r,s),this.renderer.setScissor(r,0,r,s),this.renderer.render(e,this.cameraRight)}}Hi.registerPlugin("vr",{defaults:{mode:"auto",device:null,fov:80},listen:["window.load","pre","render","resize","this.change"],install:function(i){i.VR=this.api({active:!1,devices:[],hmd:null,sensor:null,renderer:null,state:null},i)},uninstall:function(i){delete i.VR},mocks:function(i,e,t){return[{fake:!0,force:1,deviceId:"emu",deviceName:"Emulated",getEyeTranslation:function(a){return{left:{x:-.03,y:0,z:0},right:{x:.03,y:0,z:0}}[a]},getRecommendedEyeFieldOfView:function(a){const l=i.camera,c=l&&l.aspect||16/9,u=(e||l&&l.fov||t)/2,h=Math.atan(Math.tan(u*Math.PI/180)*c/2)*180/Math.PI,d=u;return{left:{rightDegrees:h,leftDegrees:h,downDegrees:d,upDegrees:d},right:{rightDegrees:h,leftDegrees:h,downDegrees:d,upDegrees:d}}[a]}},{force:2,getState:function(){return{}}}]},load:function(i,e){const t=(function(n){this.callback(n,e)}).bind(this);navigator.getVRDevices?navigator.getVRDevices().then(t):navigator.mozGetVRDevices?navigator.mozGetVRDevices(t):(console.warn("No native VR support detected."),t(this.mocks(e,this.options.fov,this.defaults.fov),e))},callback:function(i,e){let t,n;const r=window.HMDVRDevice||function(){},s=window.PositionSensorVRDevice||function(){};i=e.VR.devices=i||e.VR.devices;const o=this.options.device;let a;for(let l=0;l<i.length;++l)if(a=i[l],a.force==1||a instanceof r){if(o&&o!=a.deviceId)continue;t=a;break}if(t){let l;for(let c=0;c<i.length;++c)if(l=i[c],l.force==2||l instanceof s&&l.hardwareUnitId==t.hardwareUnitId){n=l;break}this.hookup(t,n,e)}},hookup:function(i,e,t){z8||console.log("VRRenderer not found");const n=z8||function(){};this.renderer=new n(t.renderer,i),this.hmd=i,this.sensor=e,t.VR.renderer=this.renderer,t.VR.hmd=i,t.VR.sensor=e,console.log("VRRenderer",i.deviceName)},change:function(i,e){i.changes.device&&this.callback(null,e),this.pre(i,e)},pre:function(i,e){const t=this.active,n=this.active=this.renderer&&this.options.mode!="2d";if(e.VR.active=n,n&&this.sensor){const r=this.sensor.getState();e.VR.state=r}else e.VR.state=null;t!=this.active&&e.trigger({type:"vr",active:n,hmd:this.hmd,sensor:this.sensor})},resize:function(i,e){this.active&&this.renderer.initialize()},render:function(i,e){if(e.scene&&e.camera){const t=this.active?this.renderer:e.renderer;if(this.last!=t&&t==e.renderer){const n=t.getPixelRatio(),r=t.domElement.width/n,s=t.domElement.height/n;t.setScissorTest(!1),t.setViewport(0,0,r,s)}this.last=t,t.render(e.scene,e.camera)}}});class Rz{constructor(e,t){this.context=t,this.traits=e.Traits,this.types=e.Types,this.pending=[],this.bound=[],this.last=null}make(e){return{enum:typeof e.enum=="function"?e.enum():void 0,type:typeof e.uniform=="function"?e.uniform():void 0,value:e.make()}}apply(e,t){return new tie(e,t,this)}bind(e){return this.bound.push(e)}unbind(e){return this.bound=Array.from(this.bound).filter(t=>t!==e)}queue(e,t,n,r){return this.lastObject=t,this.lastKey=n,this.lastValue=r,this.pending.push(e)}invoke(e){return e(this.context.time.clock,this.context.time.step)}compute(){if(this.bound.length)for(const e of Array.from(this.bound))this.invoke(e)}digest(){let e;if(!this.pending.length)return!1;[e,this.pending]=Array.from([this.pending,[]]);for(const t of Array.from(e))t();return!0}getTrait(e){return this.traits[e]}getLastTrigger(){return`${this.lastObject.toString()} - ${this.lastKey}=\`${this.lastValue}\``}}const ix=function(i){const e={};for(const t in i){const n=i[t];e[t]=n}return e};let tie=class{constructor(e,t,n){let r,s,o,a,l,c,u,{props:h}=t;const{traits:d,finals:f,freeform:g}=t,v=this;e.props!=null&&e.expr!=null&&e.orig!=null&&e.computed!=null&&e.attributes!=null&&(c=ix(e.props),a=ix(e.expr),l=e.orig(),o=e.computed(),e.attributes!=null&&e.attributes.dispose());const y={},_={},S={},w=ae=>S[ae]!=null?S[ae]:ae,C=function(ae,xe){if(S[xe])throw new Error(`${e.toString()} - Duplicate property \`${xe}\``);return S[xe]=ae},E=ae=>(v[ae]!=null?v[ae].value:void 0)!=null?v[ae]!=null?v[ae].value:void 0:nie(v[w(ae)],xe=>xe.value),k=function(ae,xe,Ie,dt){let nt;if(ae=w(ae),(nt=v[ae])==null){if(!g)throw new Error(`${e.toString()} - Setting unknown property \`${ae}={${xe}}\``);nt=v[ae]={short:ae,type:null,last:null,value:null},J[ae]=Pe=>Pe}if(!Ie){if(I[ae])throw new Error(`${e.toString()} - Can't set bound property \`${ae}={${xe}}\``);if(q[ae])throw new Error(`${e.toString()} - Can't set computed property \`${ae}={${xe}}\``);if(j[ae])throw new Error(`${e.toString()} - Can't set final property \`${ae}={${xe}}\``)}let me=!0;const ue=ie(ae,xe,nt.last,function(){return me=!1,null});if(me){[nt.value,nt.last]=Array.from([ue,nt.value]);const{short:Pe}=nt;y[Pe]=ue,Ie||(_[Pe]=xe),!dt&&!le(ae,nt.value,nt.last)&&Le(ae,xe)}return me},O=function(ae,xe,Ie){return ae=w(ae),k(ae,xe,!0,Ie),j[ae]=!0},R={},A={},D={},I={},q={},j={},Y=function(ae,xe,Ie){if(Ie==null&&(Ie=!1),ae=w(ae),typeof xe!="function")throw new Error(`${e.toString()} - Expression \`${ae}=>{${R}}\` is not a function`);if(I[ae])throw new Error(`${e.toString()} - Property \`${ae}=>{${R}}\` is already bound`);if(q[ae])throw new Error(`${e.toString()} - Property \`${ae}\` is computed`);if(j[ae])throw new Error(`${e.toString()} - Property \`${ae}\` is final`);const dt=Ie?q:I;dt[ae]=xe;const nt=v[ae]!=null?v[ae].short:ae;return Ie||(R[nt]=xe),D[ae]=xe,xe=xe.bind(e),A[ae]=function(me,ue){let Pe;return(Pe=e.clock!=null?e.clock.getTime():void 0)&&(me=Pe.clock,ue=Pe.step),e.set(ae,xe(me,ue),!0)},n.bind(A[ae])},F=function(ae,xe){xe==null&&(xe=!1),ae=w(ae);const Ie=xe?q:I;if(Ie[ae])return n.unbind(A[ae]),delete A[ae],delete Ie[ae],v[ae]!=null&&(ae=v[ae].short),delete R[ae]},re=function(ae,xe){let Ie;return ae=w(ae),(Ie=typeof D[ae]=="function"?D[ae](xe,0):void 0)!=null?Ie:v[ae].value};e.expr=R,e.props=y,e.evaluate=function(ae,xe){if(ae!=null)return re(ae,xe);{const Ie={};for(ae in h)Ie[ae]=re(ae,xe);return Ie}},e.get=function(ae){return ae!=null?E(ae):y},e.set=function(ae,xe,Ie,dt){if(typeof ae=="string")k(ae,xe,Ie,dt);else{dt=Ie,Ie=xe;const nt=ae;for(ae in nt)xe=nt[ae],k(ae,xe,Ie,dt)}},e.bind=function(ae,xe,Ie){if(typeof ae=="string")Y(ae,xe,Ie);else{Ie=xe;const dt=ae;for(ae in dt)xe=dt[ae],Y(ae,xe,Ie)}},e.unbind=function(ae,xe){if(typeof ae=="string")F(ae,xe);else{xe=R;const Ie=ae;for(ae in Ie)F(ae,xe)}},e.attribute=function(ae){return ae!=null?v[w(ae)]:v},e.orig=function(ae){return ae!=null?_[w(ae)]:ix(_)},e.computed=function(ae){return ae!=null?q[w(ae)]:ix(q)};const ee={},J={},Ee={},le=(ae,xe,Ie)=>Ee[ae](xe,Ie),ie=(ae,xe,Ie,dt)=>J[ae](xe,Ie,dt);e.validate=function(ae,xe){let Ie;ae=w(ae);const dt=ee[ae];return dt!=null&&(Ie=dt()),Ie=ie(ae,xe,Ie,function(){throw new Error(`${e.toString()} - Invalid value \`${ae}={${xe}}\``)})};let be=!1,Je={},Xe={},Be={},vt={};const at=ae=>ae.split(".")[0],Le=function(ae,xe){be||(be=!0,n.queue(ft,e,ae,xe));const Ie=at(ae);return Je[ae]=!0,Xe[Ie]=!0},Ot={type:"change",changed:null,touched:null},ft=function(){let ae;Ot.changed=Je,Ot.touched=Xe,Je=Be,Xe=vt,{changed:Be}=Ot,{touched:vt}=Ot,be=!1;for(ae in Je)Je[ae]=!1;for(ae in Xe)Xe[ae]=!1;return Ot.type="change",e.trigger(Ot),(()=>{const xe=[];for(const Ie in Ot.touched)Ot.type=`change:${Ie}`,xe.push(e.trigger(Ot));return xe})()},rt=function(ae){const xe=ae.split(/\./g),Ie=xe.pop();return xe.pop(),xe.unshift(Ie),xe.reduce((dt,nt)=>dt+nt.charAt(0).toUpperCase()+nt.substring(1))},tt=(ae,xe)=>(()=>{const Ie=[];for(let dt in xe){let nt;const me=xe[dt];dt=[ae,dt].join(".");const ue=rt(dt);v[dt]={T:me,ns:ae,short:ue,enum:typeof me.enum=="function"?me.enum():void 0,type:typeof me.uniform=="function"?me.uniform():void 0,last:me.make(),value:nt=me.make()},C(dt,ue),y[ue]=nt,ee[dt]=me.make,J[dt]=me.validate!=null?me.validate:Pe=>Pe,Ie.push(Ee[dt]=me.equals!=null?me.equals:(Pe,U)=>Pe===U)}return Ie})(),se=[];for(let ae of Array.from(d)){[ae,s]=Array.from(ae.split(":"));const xe=s?[s,ae].join("."):ae;u=n.getTrait(ae),se.push(ae),u!=null&&tt(xe,u)}if(h!=null)for(s in h)u=h[s],tt(s,u);const ke=se.filter((ae,xe)=>se.indexOf(ae)===xe);if(e.traits=ke,c!=null&&e.set(c,!0,!0),f!=null)for(r in f){const ae=f[r];O(r,ae,!0)}l!=null&&e.set(l,!1,!0),o!=null&&e.bind(o,!0),a!=null&&e.bind(a,!1),this.dispose=function(){for(r in q)F(r,!0);for(r in I)F(r,!1);return h={},delete e.attributes,delete e.get,delete e.set}}};function nie(i,e){return typeof i<"u"&&i!==null?e(i):void 0}const I8=5,iie=1e-4,rie=(i,e)=>Math.abs(i/e-Math.round(i/e))<iie,rx=i=>rie(i,1),sie=function(i,e,t,n){const r=Math.round(i/e);return r===1?`${t}`:r===-1?`-${t}`:t==="1"?`${r}`:n?`${r}${t}`:`${r}*${t}`},oie=function(i,e,t,n){let r=Math.round(i*e);return Math.abs(r)===1?(r=r<0?"-":"",r+=t):t!=="1"&&(r+=n?`${t}`:`*${t}`),`${r}/${e}`},N8=[{1:1},{1:1,:Math.PI*2},{1:1,:Math.PI},{1:1,:Math.PI*2,:Math.PI},{1:1,e:Math.E},{1:1,:Math.PI*2,e:Math.E},{1:1,:Math.PI,e:Math.E},{1:1,:Math.PI*2,:Math.PI,e:Math.E}],aie=[[2*2*3*5*7,[2,3,5,7]],[2*2*2*3*3*5*5*7*7,[2,3,5,7]],[2*2*3*5*7*11*13,[2,3,5,7,11,13]],[2*2*17*19*23*29,[2,17,19,23,29]],[256*256,[2]],[1e6,[2,5]]],Oz=function(i){let e,t,n,r,s;i&&({cache:e,compact:t,tau:s,pi:r,e:n}=i),t=+!!(t??!0),s=+!!(s??!0),r=+!!(r??!0),n=+!!(n??!0),e=+!!(e??!0);const o=s+r*2+n*4,a=e?{}:null;return function(l){if(a!=null){let d;if((d=a[l])!=null)return d;if(l===Math.round(l))return a[l]=`${l}`}let c=`${l}`,u=c.length+c.indexOf(".")+2;const h=function(d){const f=d.length;if(f<=u)return c=`${d}`,u=f};for(const d in N8[o]){const f=N8[o][d];if(rx(l/f))h(`${sie(l/f,1,d,t)}`);else for(let[g,v]of Array.from(aie)){let y=l/f*g;if(rx(y)){for(const _ of Array.from(v)){let S,w;for(;rx(w=y/_)&&rx(S=g/_);)y=w,g=S}h(`${oie(l/f,g,d,t)}`);break}}}return`${l}`.length>I8&&h(`${l.toPrecision(I8)}`),a!=null&&(a[l]=c),c}},FA=function(i,e){return e==null&&(e="info"),i=Lz(i),console[e].apply(console,i)},Lz=function(i){const e="color:rgb(128,0,128)",t="color:rgb(144,64,0)",n="color:rgb(0,0,192)",r="color:rgb(0,70,156)",s="color:inherit";let o=!1,a=0;const l=[];return i=i.replace(/(\\[<={}> "'])|(=>|[<={}> "'])/g,function(c,u,h){return u!=null&&u.length?u:o&&!['"',"'"].includes(h)||a&&!['"',"'","{","}"].includes(h)?h:(()=>{switch(h){case"<":return l.push(e),"%c<";case">":return l.push(e),l.push(s),"%c>%c";case" ":return l.push(t)," %c";case"=":case"=>":return l.push(e),`%c${h}`;case'"':case"'":return o=!o,o?(l.push(a?t:n),`${h}%c`):(l.push(a?r:e),`%c${h}`);case"{":return a++===0?(l.push(r),`%c${h}`):h;case"}":return--a===0?(l.push(e),`${h}%c`):h;default:return h}})()}),[i].concat(l)},lie=(i,e)=>Dz(i,e,"="),cie=(i,e)=>Dz(i,e,"=>"),Dz=function(){const i=Oz({compact:!1});return function(e,t,n){const r=function(a){return a===""+ +a||a.match(/^[A-Za-z_][A-Za-z0-9]*$/)?a:JSON.stringify(a)},s=function(a){return a.match(`
*"`)?a:`{${a}}`},o=function(a){if(a instanceof Array)return`[${a.map(o).join(", ")}]`;switch(typeof a){case"string":return a.match(`
`)?`"
${a}"
`:`"${a}"`;case"function":return a=`${a}`,a.match(`
`),a=a.replace(/^function (\([^)]*\))/,"$1 =>"),a=a.replace(/^(\([^)]*\)) =>\s*{\s*return\s*([^}]+)\s*;\s*}/,"$1 => $2");case"number":return i(a);default:return a!=null&&a!==!!a?a._up!=null?o(a.map(l=>l)):a.toMarkup?a.toString():"{"+(()=>{const l=[];for(const c in a){const u=a[c];Object.prototype.hasOwnProperty.call(a,c)&&l.push(`${r(c)}: ${o(u)}`)}return l})().join(", ")+"}":`${JSON.stringify(a)}`}};return[e,n,s(o(t))].join("")}}(),bM=function(i){return i=i.replace(/&/g,"&amp;"),i=i.replace(/</g,"&lt;"),i=i.replace(/"/g,"&quot;")},uie=function(i){const e=[].slice.call(arguments);e.shift();let t="<span>";i=bM(i);for(const n of Array.from(e))i=i.replace(/%([a-z])/,function(r,s){const o=e.shift();switch(s){case"c":return`</span><span style="${bM(o)}">`;default:return bM(o)}});return t+=i,t+="</span>"},PE={prop:lie,bind:cie},hie=Object.freeze(Object.defineProperty({__proto__:null,JSX:PE,format:uie,markup:Lz,number:Oz,print:FA},Symbol.toStringTag,{value:"Module"}));let die=0,W1=class{constructor(e,t,n,r,s,o){this.type=e,this._id=(++die).toString(),this.configure(s,o),this.parent=this.root=this.path=this.index=null,this.set(t,!0,!0),this.set(n,!1,!0),this.bind(r,!1)}configure(e,t){let{traits:n,props:r,finals:s,freeform:o}=e;return n==null&&(n=(this._config!=null?this._config.traits:void 0)!=null?this._config!=null?this._config.traits:void 0:[]),r==null&&(r=(this._config!=null?this._config.props:void 0)!=null?this._config!=null?this._config.props:void 0:{}),s==null&&(s=(this._config!=null?this._config.finals:void 0)!=null?this._config!=null?this._config.finals:void 0:{}),o==null&&(o=(this._config!=null?this._config.freeform:void 0)!=null?this._config!=null?this._config.freeform:void 0:!1),this._config={traits:n,props:r,finals:s,freeform:o},this.attributes=t.apply(this,this._config)}dispose(){return this.attributes.dispose(),this.attributes=null}_added(e){this.parent=e,this.root=e.root;const t={type:"add",node:this,parent:this.parent};return this.root&&this.root.trigger(t),t.type="added",this.trigger(t)}_removed(){const e={type:"remove",node:this};return this.root&&this.root.trigger(e),e.type="removed",this.trigger(e),this.root=this.parent=null}_index(e,t){let n;if(t==null&&({parent:t}=this),this.index=e,this.path=n=e!=null?((t!=null?t.path:void 0)!=null?t!=null?t.path:void 0:[]).concat([e]):null,this.order=n!=null?this._encode(n):1/0,this.root!=null)return this.trigger({type:"reindex"})}_encode(e){const n=a=>3/(a+3),r=a=>o+(s-o)*a;let s=1.3333333333333333,o=0;for(const a of Array.from(e)){const l=n(a+1),c=n(a+2);[s,o]=Array.from([r(l),r(c)])}return s}toString(){const e=this.id!=null?this.id:this._id,t=this.type!=null?this.type:"node";let n=t;if(n+=`#${e}`,this.classes!=null&&this.classes.length&&(n+=`.${this.classes.join(".")}`),this.children!=null){let r;return(r=this.children.length)?`<${n}>(${r})</${t}>`:`<${n}></${t}>`}else return`<${n} />`}toMarkup(e=null,t){let n,r;if(t==null&&(t=""),e&&typeof e!="function"){let f;e=(f=this.root!=null?this.root.model._matcher(e):void 0)!=null?f:()=>!0}const s=this.type!=null?this.type:"node";let{expr:o}=this;const a={id:this._id},l=typeof this.orig=="function"?this.orig():void 0;for(n in l)r=l[n],a[n]=r;const c=(()=>{const f=[];for(n in a)r=a[n],this.expr[n]||f.push(PE.prop(n,r));return f})();o=(()=>{const f=[];for(n in o)r=o[n],f.push(PE.bind(n,r));return f})();let u=[""];c.length&&(u=u.concat(c)),o.length&&(u=u.concat(o)),u=u.join(" ");let h=t;const d=()=>this.children!=null&&this.children.length?this.children.map(f=>f.toMarkup(e,h)).filter(f=>f!=null&&f.length).join(`
`):"";if(e&&!e(this))return d();if(this.children!=null){const f=`<${s}${u}>`,g=`</${s}>`;h=t+"  ";let v=d();return v.length&&(v=`
`+v+`
`+t),v==null&&(v=""),t+f+v+g}else return`${t}<${s}${u} />`}print(e,t){return FA(this.toMarkup(e),t)}};Xc.apply(W1.prototype);let zz=class extends W1{constructor(e,t,n,r,s,o){super(e,t,n,r,s,o),this.children=[],this.on("reindex",a=>Array.from(this.children).map(l=>l.trigger(a)))}add(e){return e.parent!=null&&e.parent.remove(e),e._index(this.children.length,this),this.children.push(e),e._added(this)}remove(e){e.children!=null&&e.children.length&&e.empty();const t=this.children.indexOf(e);if(t!==-1){this.children.splice(t,1),e._index(null),e._removed(this);for(let n=0;n<this.children.length;n++)e=this.children[n],n>=t&&e._index(n)}}empty(){const e=this.children.slice().reverse();for(const t of Array.from(e))this.remove(t)}};class Iz{constructor(e){e==null&&(e=10),this.limit=e}iterate(e){const{step:t,last:n}=e;let{limit:r}=this;for(;t();)if(!--r)throw console.warn("Last iteration",typeof n=="function"?n():void 0),new Error("Exceeded iteration limit.");return null}}var Aw={},Nz={},Ol={},h0={},E_={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Doctype=i.CDATA=i.Tag=i.Style=i.Script=i.Comment=i.Directive=i.Text=i.Root=i.isTag=i.ElementType=void 0;var e;(function(n){n.Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype"})(e=i.ElementType||(i.ElementType={}));function t(n){return n.type===e.Tag||n.type===e.Script||n.type===e.Style}i.isTag=t,i.Root=e.Root,i.Text=e.Text,i.Directive=e.Directive,i.Comment=e.Comment,i.Script=e.Script,i.Style=e.Style,i.Tag=e.Tag,i.CDATA=e.CDATA,i.Doctype=e.Doctype})(E_);var ki={},d0=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),y1=it&&it.__assign||function(){return y1=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},y1.apply(this,arguments)};Object.defineProperty(ki,"__esModule",{value:!0});ki.cloneNode=ki.hasChildren=ki.isDocument=ki.isDirective=ki.isComment=ki.isText=ki.isCDATA=ki.isTag=ki.Element=ki.Document=ki.NodeWithChildren=ki.ProcessingInstruction=ki.Comment=ki.Text=ki.DataNode=ki.Node=void 0;var gs=E_,fie=new Map([[gs.ElementType.Tag,1],[gs.ElementType.Script,1],[gs.ElementType.Style,1],[gs.ElementType.Directive,1],[gs.ElementType.Text,3],[gs.ElementType.CDATA,4],[gs.ElementType.Comment,8],[gs.ElementType.Root,9]]),BA=function(){function i(e){this.type=e,this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(i.prototype,"nodeType",{get:function(){var e;return(e=fie.get(this.type))!==null&&e!==void 0?e:1},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),i.prototype.cloneNode=function(e){return e===void 0&&(e=!1),VA(this,e)},i}();ki.Node=BA;var s4=function(i){d0(e,i);function e(t,n){var r=i.call(this,t)||this;return r.data=n,r}return Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.data},set:function(t){this.data=t},enumerable:!1,configurable:!0}),e}(BA);ki.DataNode=s4;var Uz=function(i){d0(e,i);function e(t){return i.call(this,gs.ElementType.Text,t)||this}return e}(s4);ki.Text=Uz;var Fz=function(i){d0(e,i);function e(t){return i.call(this,gs.ElementType.Comment,t)||this}return e}(s4);ki.Comment=Fz;var Bz=function(i){d0(e,i);function e(t,n){var r=i.call(this,gs.ElementType.Directive,n)||this;return r.name=t,r}return e}(s4);ki.ProcessingInstruction=Bz;var o4=function(i){d0(e,i);function e(t,n){var r=i.call(this,t)||this;return r.children=n,r}return Object.defineProperty(e.prototype,"firstChild",{get:function(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.children},set:function(t){this.children=t},enumerable:!1,configurable:!0}),e}(BA);ki.NodeWithChildren=o4;var Vz=function(i){d0(e,i);function e(t){return i.call(this,gs.ElementType.Root,t)||this}return e}(o4);ki.Document=Vz;var Hz=function(i){d0(e,i);function e(t,n,r,s){r===void 0&&(r=[]),s===void 0&&(s=t==="script"?gs.ElementType.Script:t==="style"?gs.ElementType.Style:gs.ElementType.Tag);var o=i.call(this,s,r)||this;return o.name=t,o.attribs=n,o}return Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name},set:function(t){this.name=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){var t=this;return Object.keys(this.attribs).map(function(n){var r,s;return{name:n,value:t.attribs[n],namespace:(r=t["x-attribsNamespace"])===null||r===void 0?void 0:r[n],prefix:(s=t["x-attribsPrefix"])===null||s===void 0?void 0:s[n]}})},enumerable:!1,configurable:!0}),e}(o4);ki.Element=Hz;function qz(i){return(0,gs.isTag)(i)}ki.isTag=qz;function Gz(i){return i.type===gs.ElementType.CDATA}ki.isCDATA=Gz;function Wz(i){return i.type===gs.ElementType.Text}ki.isText=Wz;function jz(i){return i.type===gs.ElementType.Comment}ki.isComment=jz;function $z(i){return i.type===gs.ElementType.Directive}ki.isDirective=$z;function Xz(i){return i.type===gs.ElementType.Root}ki.isDocument=Xz;function pie(i){return Object.prototype.hasOwnProperty.call(i,"children")}ki.hasChildren=pie;function VA(i,e){e===void 0&&(e=!1);var t;if(Wz(i))t=new Uz(i.data);else if(jz(i))t=new Fz(i.data);else if(qz(i)){var n=e?yM(i.children):[],r=new Hz(i.name,y1({},i.attribs),n);n.forEach(function(l){return l.parent=r}),i.namespace!=null&&(r.namespace=i.namespace),i["x-attribsNamespace"]&&(r["x-attribsNamespace"]=y1({},i["x-attribsNamespace"])),i["x-attribsPrefix"]&&(r["x-attribsPrefix"]=y1({},i["x-attribsPrefix"])),t=r}else if(Gz(i)){var n=e?yM(i.children):[],s=new o4(gs.ElementType.CDATA,n);n.forEach(function(c){return c.parent=s}),t=s}else if(Xz(i)){var n=e?yM(i.children):[],o=new Vz(n);n.forEach(function(c){return c.parent=o}),i["x-mode"]&&(o["x-mode"]=i["x-mode"]),t=o}else if($z(i)){var a=new Bz(i.name,i.data);i["x-name"]!=null&&(a["x-name"]=i["x-name"],a["x-publicId"]=i["x-publicId"],a["x-systemId"]=i["x-systemId"]),t=a}else throw new Error("Not implemented yet: ".concat(i.type));return t.startIndex=i.startIndex,t.endIndex=i.endIndex,i.sourceCodeLocation!=null&&(t.sourceCodeLocation=i.sourceCodeLocation),t}ki.cloneNode=VA;function yM(i){for(var e=i.map(function(n){return VA(n,!0)}),t=1;t<e.length;t++)e[t].prev=e[t-1],e[t-1].next=e[t];return e}(function(i){var e=it&&it.__createBinding||(Object.create?function(l,c,u,h){h===void 0&&(h=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(l,h,d)}:function(l,c,u,h){h===void 0&&(h=u),l[h]=c[u]}),t=it&&it.__exportStar||function(l,c){for(var u in l)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&e(c,l,u)};Object.defineProperty(i,"__esModule",{value:!0}),i.DomHandler=void 0;var n=E_,r=ki;t(ki,i);var s=/\s+/g,o={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1,xmlMode:!1},a=function(){function l(c,u,h){this.dom=[],this.root=new r.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(h=u,u=o),typeof c=="object"&&(u=c,c=void 0),this.callback=c??null,this.options=u??o,this.elementCB=h??null}return l.prototype.onparserinit=function(c){this.parser=c},l.prototype.onreset=function(){this.dom=[],this.root=new r.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},l.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},l.prototype.onerror=function(c){this.handleCallback(c)},l.prototype.onclosetag=function(){this.lastNode=null;var c=this.tagStack.pop();this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(c)},l.prototype.onopentag=function(c,u){var h=this.options.xmlMode?n.ElementType.Tag:void 0,d=new r.Element(c,u,void 0,h);this.addNode(d),this.tagStack.push(d)},l.prototype.ontext=function(c){var u=this.options.normalizeWhitespace,h=this.lastNode;if(h&&h.type===n.ElementType.Text)u?h.data=(h.data+c).replace(s," "):h.data+=c,this.options.withEndIndices&&(h.endIndex=this.parser.endIndex);else{u&&(c=c.replace(s," "));var d=new r.Text(c);this.addNode(d),this.lastNode=d}},l.prototype.oncomment=function(c){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=c;return}var u=new r.Comment(c);this.addNode(u),this.lastNode=u},l.prototype.oncommentend=function(){this.lastNode=null},l.prototype.oncdatastart=function(){var c=new r.Text(""),u=new r.NodeWithChildren(n.ElementType.CDATA,[c]);this.addNode(u),c.parent=u,this.lastNode=c},l.prototype.oncdataend=function(){this.lastNode=null},l.prototype.onprocessinginstruction=function(c,u){var h=new r.ProcessingInstruction(c,u);this.addNode(h)},l.prototype.handleCallback=function(c){if(typeof this.callback=="function")this.callback(c,this.dom);else if(c)throw c},l.prototype.addNode=function(c){var u=this.tagStack[this.tagStack.length-1],h=u.children[u.children.length-1];this.options.withStartIndices&&(c.startIndex=this.parser.startIndex),this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),u.children.push(c),h&&(c.prev=h,h.next=c),c.parent=u,this.lastNode=null},l}();i.DomHandler=a,i.default=a})(h0);var HA={},Yz={},Wh={};const mie="",gie="",vie="",_ie="",bie="",yie="",xie="",wie="",Sie="",Mie="",Cie="",Eie="",Tie="",Aie="",Pie="",kie="",Rie="",Oie="",Lie="",Die="",zie="",Iie="",Nie="",Uie="",Fie="",Bie="",Vie="&",Hie="&",qie="",Gie="",Wie="",jie="",$ie="",Xie="",Yie="",Kie="",Zie="",Jie="",Qie="",ere="",tre="",nre="",ire="",rre="",sre="",ore="",are="",lre="",cre="",ure="",hre="",dre="",fre="",pre="",mre="",gre="",vre="",_re="",bre="",yre="",xre="",wre="'",Sre="",Mre="",Cre="",Ere="",Tre="",Are="",Pre="",kre="",Rre="*",Ore="",Lre="",Dre="",zre="",Ire="",Nre="",Ure="",Fre="",Bre="",Vre="",Hre="",qre="",Gre="",Wre="",jre="",$re="",Xre="",Yre="",Kre="",Zre="",Jre="",Qre="",ese="",tse="",nse="",ise="",rse="",sse="",ose="",ase="",lse="",cse="",use="",hse="",dse="",fse="",pse="",mse="",gse="",vse="",_se="",bse="",yse="",xse="",wse="",Sse="",Mse="",Cse="",Ese="",Tse="",Ase="",Pse="",kse="",Rse="",Ose="",Lse="",Dse="",zse="",Ise="",Nse="",Use="",Fse="",Bse="",Vse="=",Hse="",qse="",Gse="",Wse="",jse="",$se="",Xse="",Yse="",Kse="",Zse="",Jse="",Qse="",eoe="",toe="",noe="",ioe="",roe="",soe="",ooe="",aoe="",loe="",coe="",uoe="",hoe="",doe="",foe="",poe="",moe="",goe="",voe="",_oe="",boe="",yoe="",xoe="",woe="",Soe="",Moe="",Coe="",Eoe="",Toe="",Aoe="",Poe="",koe="",Roe="",Ooe="",Loe="",Doe="",zoe="",Ioe="",Noe="",Uoe="",Foe="",Boe="",Voe="",Hoe="",qoe="",Goe="",Woe="",joe="",$oe="",Xoe="",Yoe="",Koe="\\",Zoe="",Joe="",Qoe="",eae="",tae="",nae="",iae="",rae="",sae="",oae="",aae="",lae="",cae="",uae="",hae="",dae="",fae="",pae="",mae="",gae="",vae="",_ae="",bae="",yae="",xae="",wae="",Sae="",Mae="",Cae="",Eae="",Tae="",Aae="",Pae="",kae="",Rae="",Oae="",Lae="",Dae="",zae="",Iae="",Nae="",Uae="",Fae="",Bae="",Vae="",Hae="",qae="",Gae="",Wae="",jae="",$ae="",Xae="",Yae="",Kae="",Zae="",Jae="",Qae="",ele="",tle="",nle="",ile="",rle="",sle="",ole="",ale="",lle="",cle="",ule="",hle="",dle="",fle="",ple="",mle=":",gle="",vle="",_le="",ble="",yle=",",xle="@",wle="",Sle="",Mle="",Cle="",Ele="",Tle="",Ale="",Ple="",kle="",Rle="",Ole="",Lle="",Dle="",zle="",Ile="",Nle="",Ule="",Fle="",Ble="",Vle="",Hle="",qle="",Gle="",Wle="",jle="",$le="",Xle="",Yle="",Kle="",Zle="",Jle="",Qle="",ece="",tce="",nce="",ice="",rce="",sce="",oce="",ace="",lce="",cce="",uce="",hce="",dce="",fce="",pce="",mce="",gce="",vce="",_ce="",bce="",yce="",xce="",wce="",Sce="",Mce="",Cce="",Ece="",Tce="",Ace="",Pce="",kce="",Rce="",Oce="",Lce="",Dce="",zce="",Ice="",Nce="",Uce="",Fce="",Bce="",Vce="",Hce="",qce="",Gce="",Wce="",jce="",$ce="",Xce="",Yce="",Kce="",Zce="",Jce="",Qce="",eue="",tue="",nue="",iue="",rue="",sue="",oue="`",aue="",lue="",cue="",uue="",hue="",due="",fue="",pue="",mue="",gue="",vue="",_ue="",bue="",yue="",xue="",wue="",Sue="",Mue="",Cue="$",Eue="",Tue="",Aue="",Pue="",kue="",Rue="",Oue="",Lue="",Due="",zue="",Iue="",Nue="",Uue="",Fue="",Bue="",Vue="",Hue="",que="",Gue="",Wue="",jue="",$ue="",Xue="",Yue="",Kue="",Zue="",Jue="",Que="",ehe="",the="",nhe="",ihe="",rhe="",she="",ohe="",ahe="",lhe="",che="",uhe="",hhe="",dhe="",fhe="",phe="",mhe="",ghe="",vhe="",_he="",bhe="",yhe="",xhe="",whe="",She="",Mhe="",Che="",Ehe="",The="",Ahe="",Phe="",khe="",Rhe="",Ohe="",Lhe="",Dhe="",zhe="",Ihe="",Nhe="",Uhe="",Fhe="",Bhe="",Vhe="",Hhe="",qhe="",Ghe="",Whe="",jhe="",$he="",Xhe="",Yhe="",Khe="",Zhe="",Jhe="",Qhe="",ede="",tde="",nde="",ide="",rde="",sde="",ode="",ade="",lde="",cde="",ude="",hde="",dde="",fde="",pde="",mde="",gde="",vde="",_de="",bde="",yde="",xde="",wde="",Sde="",Mde="",Cde="",Ede="",Tde="",Ade="",Pde="",kde="",Rde="",Ode="",Lde="",Dde="",zde="",Ide="",Nde="",Ude="",Fde="",Bde="",Vde="=",Hde="",qde="",Gde="",Wde="",jde="",$de="",Xde="",Yde="",Kde="",Zde="",Jde="",Qde="",efe="",tfe="",nfe="",ife="",rfe="",sfe="",ofe="",afe="",lfe="!",cfe="",ufe="",hfe="",dfe="",ffe="",pfe="",mfe="",gfe="",vfe="",_fe="",bfe="",yfe="",xfe="",wfe="",Sfe="",Mfe="",Cfe="",Efe="fj",Tfe="",Afe="",Pfe="",kfe="",Rfe="",Ofe="",Lfe="",Dfe="",zfe="",Ife="",Nfe="",Ufe="",Ffe="",Bfe="",Vfe="",Hfe="",qfe="",Gfe="",Wfe="",jfe="",$fe="",Xfe="",Yfe="",Kfe="",Zfe="",Jfe="",Qfe="",epe="",tpe="",npe="",ipe="",rpe="",spe="",ope="",ape="",lpe="",cpe="",upe="",hpe="",dpe="",fpe="",ppe="",mpe="",gpe="",vpe="",_pe="",bpe="",ype="",xpe="",wpe="",Spe="",Mpe="",Cpe="",Epe="",Tpe="",Ape="",Ppe="",kpe="",Rpe="",Ope="",Lpe="",Dpe="",zpe="",Ipe="",Npe="",Upe="",Fpe="",Bpe="",Vpe="",Hpe="",qpe="",Gpe="",Wpe="",jpe="",$pe="",Xpe="",Ype="",Kpe="",Zpe="",Jpe="",Qpe="",e0e="`",t0e="",n0e="",i0e="",r0e="",s0e="",o0e="",a0e="",l0e="",c0e="",u0e="",h0e="",d0e="",f0e="",p0e="",m0e=">",g0e=">",v0e="",_0e="",b0e="",y0e="",x0e="",w0e="",S0e="",M0e="",C0e="",E0e="",T0e="",A0e="",P0e="",k0e="",R0e="",O0e="",L0e="",D0e="",z0e="",I0e="",N0e="",U0e="",F0e="",B0e="^",V0e="",H0e="",q0e="",G0e="",W0e="",j0e="",$0e="",X0e="",Y0e="",K0e="",Z0e="",J0e="",Q0e="",eme="",tme="",nme="",ime="",rme="",sme="",ome="",ame="",lme="",cme="",ume="",hme="",dme="",fme="",pme="",mme="",gme="",vme="",_me="",bme="",yme="",xme="",wme="",Sme="",Mme="",Cme="",Eme="",Tme="",Ame="",Pme="",kme="",Rme="",Ome="",Lme="",Dme="",zme="",Ime="",Nme="",Ume="",Fme="",Bme="",Vme="",Hme="",qme="",Gme="",Wme="",jme="",$me="",Xme="",Yme="",Kme="",Zme="",Jme="",Qme="",ege="",tge="",nge="",ige="",rge="",sge="",oge="",age="",lge="",cge="",uge="",hge="",dge="",fge="",pge="",mge="",gge="",vge="",_ge="",bge="",yge="",xge="",wge="",Sge="",Mge="",Cge="",Ege="",Tge="",Age="",Pge="",kge="",Rge="",Oge="",Lge="",Dge="",zge="",Ige="",Nge="",Uge="",Fge="",Bge="",Vge="",Hge="",qge="",Gge="",Wge="",jge="",$ge="",Xge="",Yge="",Kge="",Zge="",Jge="",Qge="",eve="",tve="",nve="",ive="",rve="",sve="",ove="",ave="",lve="",cve="",uve="",hve="",dve="",fve="",pve="",mve="",gve="",vve="",_ve="",bve="",yve="",xve="",wve="",Sve="",Mve="",Cve="",Eve="",Tve="",Ave="",Pve="",kve="",Rve="",Ove="",Lve="",Dve="",zve="",Ive="",Nve="",Uve="",Fve="",Bve="",Vve="",Hve="",qve="",Gve="",Wve="",jve="",$ve="",Xve="{",Yve="[",Kve="",Zve="",Jve="",Qve="",e1e="",t1e="",n1e="",i1e="",r1e="{",s1e="",o1e="",a1e="",l1e="",c1e="",u1e="",h1e="",d1e="",f1e="",p1e="",m1e="",g1e="",v1e="",_1e="",b1e="",y1e="",x1e="",w1e="",S1e="",M1e="",C1e="",E1e="",T1e="",A1e="",P1e="",k1e="",R1e="",O1e="",L1e="",D1e="",z1e="",I1e="",N1e="",U1e="",F1e="",B1e="",V1e="",H1e="",q1e="",G1e="",W1e="",j1e="",$1e="",X1e="",Y1e="",K1e="",Z1e="",J1e="",Q1e="",e_e="",t_e="",n_e="",i_e="",r_e="",s_e="",o_e="",a_e="",l_e="",c_e="",u_e="",h_e="",d_e="",f_e="",p_e="",m_e="",g_e="",v_e="",__e="",b_e="",y_e="",x_e="",w_e="",S_e="",M_e="",C_e="",E_e="",T_e="",A_e="",P_e="",k_e="",R_e="",O_e="",L_e="",D_e="",z_e="",I_e="",N_e="",U_e="",F_e="",B_e="",V_e="",H_e="",q_e="",G_e="",W_e="",j_e="",$_e="",X_e="",Y_e="",K_e="",Z_e="",J_e="",Q_e="",ebe="",tbe="",nbe="",ibe="",rbe="",sbe="",obe="",abe="",lbe="",cbe="",ube="",hbe="",dbe="",fbe="",pbe="",mbe="",gbe="",vbe="",_be="",bbe="_",ybe="",xbe="",wbe="",Sbe="",Mbe="",Cbe="(",Ebe="",Tbe="",Abe="",Pbe="",kbe="",Rbe="",Obe="",Lbe="",Dbe="",zbe="",Ibe="",Nbe="",Ube="",Fbe="",Bbe="",Vbe="[",Hbe="",qbe="",Gbe="",Wbe="",jbe="",$be="",Xbe="<",Ybe="<",Kbe="",Zbe="",Jbe="",Qbe="",eye="",tye="",nye="",iye="",rye="",sye="",oye="",aye="",lye="",cye="",uye="",hye="",dye="",fye="",pye="",mye="",gye="",vye="",_ye="",bye="",yye="",xye="",wye="",Sye="",Mye="",Cye="",Eye="",Tye="",Aye="",Pye="",kye="",Rye="",Oye="*",Lye="",Dye="",zye="",Iye="",Nye="",Uye="",Fye="",Bye="",Vye="",Hye="",qye="",Gye="",Wye="",jye="",$ye="",Xye="",Yye="",Kye="",Zye="",Jye="",Qye="",exe="",txe="",nxe="",ixe="",rxe="",sxe="",oxe="",axe="",lxe="",cxe="",uxe="",hxe="",dxe="",fxe="",pxe="",mxe="",gxe="",vxe="",_xe="",bxe="",yxe="",xxe="",wxe="",Sxe="",Mxe="",Cxe="",Exe="",Txe="",Axe="",Pxe="",kxe="",Rxe="",Oxe="",Lxe="",Dxe="",zxe="",Ixe="",Nxe="",Uxe="",Fxe="",Bxe="",Vxe="",Hxe=`
`,qxe="",Gxe="",Wxe="",jxe="",$xe="",Xxe="",Yxe="",Kxe="",Zxe="",Jxe="",Qxe="",ewe="",twe="",nwe="",iwe="",rwe="",swe="",owe="",awe="",lwe="",cwe="",uwe="",hwe="",dwe="",fwe="",pwe="",mwe="",gwe="",vwe="",_we="",bwe="",ywe="",xwe="",wwe="",Swe="",Mwe="",Cwe="",Ewe="",Twe="",Awe="",Pwe="",kwe="",Rwe="",Owe="",Lwe="",Dwe="",zwe="",Iwe="",Nwe="",Uwe="",Fwe="",Bwe="",Vwe="",Hwe="",qwe="",Gwe="",Wwe="",jwe="",$we="",Xwe="",Ywe="",Kwe="",Zwe="",Jwe="",Qwe="",e2e="",t2e="",n2e="",i2e="",r2e="",s2e="",o2e="",a2e="",l2e="",c2e="",u2e="",h2e="",d2e="",f2e="",p2e="",m2e="",g2e="",v2e="",_2e="",b2e="",y2e="",x2e="",w2e="",S2e="",M2e="",C2e="",E2e="",T2e="",A2e="",P2e="",k2e="",R2e="",O2e="",L2e="",D2e="",z2e="",I2e="",N2e="",U2e="",F2e="",B2e="",V2e="",H2e="",q2e="",G2e="",W2e="",j2e="",$2e="",X2e="",Y2e="",K2e="",Z2e="",J2e="",Q2e="",e4e="",t4e="",n4e="",i4e="",r4e="",s4e="",o4e="",a4e="",l4e="",c4e="",u4e="",h4e="",d4e="",f4e="",p4e="",m4e="",g4e="",v4e="",_4e="",b4e="",y4e="",x4e="",w4e="",S4e="",M4e="",C4e="",E4e="",T4e="",A4e="",P4e="",k4e="",R4e="",O4e="",L4e="",D4e="",z4e="",I4e="",N4e="",U4e="",F4e="",B4e="",V4e="",H4e="",q4e="",G4e="",W4e="",j4e="",$4e="",X4e="",Y4e="",K4e="",Z4e="#",J4e="",Q4e="",e3e="",t3e="",n3e="",i3e="",r3e="",s3e="",o3e=">",a3e="",l3e="",c3e="",u3e="",h3e="<",d3e="",f3e="",p3e="",m3e="",g3e="",v3e="",_3e="",b3e="",y3e="",x3e="",w3e="",S3e="",M3e="",C3e="",E3e="",T3e="",A3e="",P3e="",k3e="",R3e="",O3e="",L3e="",D3e="",z3e="",I3e="",N3e="",U3e="",F3e="",B3e="",V3e="",H3e="",q3e="",G3e="",W3e="",j3e="",$3e="",X3e="",Y3e="",K3e="",Z3e="",J3e="",Q3e="",eSe="",tSe="",nSe="",iSe="",rSe="",sSe="",oSe="",aSe="",lSe="",cSe="",uSe="",hSe="",dSe="",fSe="",pSe="",mSe="",gSe="",vSe="",_Se="",bSe="",ySe="",xSe="",wSe="",SSe="",MSe="",CSe="",ESe="",TSe="",ASe="",PSe="",kSe="",RSe="",OSe="",LSe="",DSe="",zSe="",ISe="",NSe="",USe="",FSe="",BSe="",VSe="",HSe="",qSe="",GSe="",WSe="",jSe="",$Se="",XSe="",YSe="",KSe="",ZSe="",JSe="%",QSe=".",eMe="",tMe="",nMe="",iMe="",rMe="",sMe="",oMe="",aMe="",lMe="",cMe="",uMe="",hMe="",dMe="",fMe="",pMe="",mMe="",gMe="",vMe="",_Me="",bMe="",yMe="+",xMe="",wMe="",SMe="",MMe="",CMe="",EMe="",TMe="",AMe="",PMe="",kMe="",RMe="",OMe="",LMe="",DMe="",zMe="",IMe="",NMe="",UMe="",FMe="",BMe="",VMe="",HMe="",qMe="",GMe="",WMe="",jMe="",$Me="",XMe="",YMe="",KMe="",ZMe="",JMe="",QMe="",eCe="",tCe="",nCe="",iCe="",rCe="",sCe="",oCe="",aCe="",lCe="",cCe="",uCe="",hCe="",dCe="",fCe="",pCe="",mCe="",gCe="",vCe="",_Ce="",bCe="",yCe="",xCe="",wCe="",SCe="",MCe="",CCe="",ECe="",TCe="",ACe="",PCe="",kCe="?",RCe="",OCe='"',LCe='"',DCe="",zCe="",ICe="",NCe="",UCe="",FCe="",BCe="",VCe="",HCe="",qCe="",GCe="",WCe="",jCe="",$Ce="",XCe="",YCe="",KCe="",ZCe="",JCe="",QCe="",eEe="",tEe="",nEe="",iEe="",rEe="",sEe="",oEe="",aEe="",lEe="",cEe="",uEe="",hEe="",dEe="",fEe="",pEe="",mEe="}",gEe="]",vEe="",_Ee="",bEe="",yEe="",xEe="",wEe="",SEe="",MEe="",CEe="}",EEe="",TEe="",AEe="",PEe="",kEe="",REe="",OEe="",LEe="",DEe="",zEe="",IEe="",NEe="",UEe="",FEe="",BEe="",VEe="",HEe="",qEe="",GEe="",WEe="",jEe="",$Ee="",XEe="",YEe="",KEe="",ZEe="",JEe="",QEe="",eTe="",tTe="",nTe="",iTe="",rTe="",sTe="",oTe="",aTe="",lTe="",cTe="",uTe="",hTe="",dTe="",fTe="",pTe="",mTe="",gTe="",vTe="",_Te="",bTe="",yTe="",xTe="",wTe="",STe="",MTe="",CTe="",ETe="",TTe="",ATe="",PTe="",kTe="",RTe="",OTe="",LTe="",DTe="",zTe="",ITe="",NTe="",UTe="",FTe="",BTe="",VTe="",HTe="",qTe="",GTe="",WTe="",jTe="",$Te="",XTe="",YTe="",KTe=")",ZTe="",JTe="",QTe="",eAe="",tAe="",nAe="",iAe="",rAe="",sAe="",oAe="]",aAe="",lAe="",cAe="",uAe="",hAe="",dAe="",fAe="",pAe="",mAe="",gAe="",vAe="",_Ae="",bAe="",yAe="",xAe="",wAe="",SAe="",MAe="",CAe="",EAe="",TAe="",AAe="",PAe="",kAe="",RAe="",OAe="",LAe="",DAe="",zAe="",IAe="",NAe="",UAe="",FAe="",BAe="",VAe="",HAe="",qAe="",GAe="",WAe="",jAe="",$Ae="",XAe=";",YAe="",KAe="",ZAe="",JAe="",QAe="",e5e="",t5e="",n5e="",i5e="",r5e="",s5e="",o5e="",a5e="",l5e="",c5e="",u5e="",h5e="",d5e="",f5e="",p5e="",m5e="",g5e="",v5e="",_5e="",b5e="",y5e="",x5e="",w5e="",S5e="",M5e="",C5e="",E5e="",T5e="",A5e="",P5e="",k5e="",R5e="",O5e="",L5e="",D5e="",z5e="",I5e="",N5e="",U5e="",F5e="",B5e="",V5e="",H5e="",q5e="/",G5e="",W5e="",j5e="",$5e="",X5e="",Y5e="",K5e="",Z5e="",J5e="",Q5e="",e6e="",t6e="",n6e="",i6e="",r6e="",s6e="",o6e="",a6e="",l6e="",c6e="",u6e="",h6e="",d6e="",f6e="",p6e="",m6e="",g6e="",v6e="",_6e="",b6e="",y6e="",x6e="",w6e="",S6e="",M6e="",C6e="",E6e="",T6e="",A6e="",P6e="",k6e="",R6e="",O6e="",L6e="",D6e="",z6e="",I6e="",N6e="",U6e="",F6e="",B6e="",V6e="",H6e="",q6e="",G6e="",W6e="",j6e="",$6e="",X6e="",Y6e="",K6e="",Z6e="",J6e="",Q6e="",ePe="",tPe="",nPe="",iPe="",rPe="",sPe="",oPe="",aPe="",lPe="",cPe="",uPe="",hPe="",dPe="",fPe="",pPe="",mPe="",gPe="",vPe="",_Pe="",bPe="",yPe="",xPe="",wPe="",SPe="",MPe="",CPe="",EPe="",TPe="",APe="",PPe="",kPe="",RPe="",OPe="",LPe="",DPe="",zPe="",IPe="",NPe="",UPe="",FPe="",BPe="",VPe="",HPe="",qPe="",GPe="",WPe="",jPe="",$Pe="",XPe="	",YPe="",KPe="",ZPe="",JPe="",QPe="",e7e="",t7e="",n7e="",i7e="",r7e="",s7e="",o7e="",a7e="",l7e="",c7e="",u7e="",h7e="",d7e="",f7e="",p7e="",m7e="",g7e="",v7e="",_7e="",b7e="",y7e="",x7e="",w7e="",S7e="",M7e="",C7e="",E7e="",T7e="",A7e="",P7e="",k7e="",R7e="",O7e="",L7e="",D7e="",z7e="",I7e="",N7e="",U7e="",F7e="",B7e="",V7e="",H7e="",q7e="",G7e="",W7e="",j7e="",$7e="",X7e="",Y7e="",K7e="",Z7e="",J7e="",Q7e="",e8e="",t8e="",n8e="",i8e="",r8e="",s8e="",o8e="",a8e="",l8e="",c8e="",u8e="",h8e="",d8e="",f8e="",p8e="",m8e="",g8e="",v8e="",_8e="",b8e="",y8e="",x8e="",w8e="",S8e="",M8e="",C8e="",E8e="",T8e="",A8e="",P8e="",k8e="",R8e="",O8e="",L8e="",D8e="",z8e="",I8e="",N8e="",U8e="",F8e="",B8e="",V8e="",H8e="",q8e="",G8e="",W8e="",j8e="",$8e="",X8e="",Y8e="",K8e="",Z8e="",J8e="_",Q8e="",eke="",tke="",nke="",ike="",rke="",ske="",oke="",ake="",lke="",cke="",uke="",hke="",dke="",fke="",pke="",mke="",gke="",vke="",_ke="",bke="",yke="",xke="",wke="",Ske="",Mke="",Cke="",Eke="",Tke="",Ake="",Pke="",kke="",Rke="",Oke="",Lke="",Dke="",zke="",Ike="",Nke="",Uke="",Fke="",Bke="",Vke="",Hke="",qke="",Gke="",Wke="",jke="",$ke="",Xke="",Yke="",Kke="",Zke="",Jke="",Qke="",eRe="",tRe="",nRe="",iRe="",rRe="",sRe="",oRe="",aRe="",lRe="",cRe="",uRe="",hRe="",dRe="",fRe="",pRe="",mRe="",gRe="",vRe="",_Re="",bRe="",yRe="",xRe="",wRe="",SRe="",MRe="",CRe="",ERe="|",TRe="",ARe="|",PRe="",kRe="",RRe="|",ORe="",LRe="",DRe="",zRe="",IRe="",NRe="",URe="",FRe="",BRe="",VRe="",HRe="",qRe="",GRe="",WRe="",jRe="",$Re="",XRe="",YRe="",KRe="",ZRe="",JRe="",QRe="",eOe="",tOe="",nOe="",iOe="",rOe="",sOe="",oOe="",aOe="",lOe="",cOe="",uOe="",hOe="",dOe="",fOe="",pOe="",mOe="",gOe="",vOe="",_Oe="",bOe="",yOe="",xOe="",wOe="",SOe="",MOe="",COe="",EOe="",TOe="",AOe="",POe="",kOe="",ROe="",OOe="",LOe="",DOe="",zOe="",IOe="",NOe="",UOe="",FOe="",BOe="",VOe="",HOe="",qOe="",GOe="",WOe="",jOe="",$Oe="",XOe="",YOe="",KOe="",ZOe="",JOe="",QOe="",eLe="",tLe="",nLe="",iLe="",rLe="",sLe="",oLe="",aLe="",lLe="",cLe="",uLe="",hLe="",dLe="",fLe="",pLe="",mLe="",gLe="",vLe="",_Le="",bLe="",yLe="",xLe="",wLe="",SLe="",MLe="",CLe="",ELe="",TLe="",ALe="",PLe="",kLe="",RLe="",Kz={Aacute:mie,aacute:gie,Abreve:vie,abreve:_ie,ac:bie,acd:yie,acE:xie,Acirc:wie,acirc:Sie,acute:Mie,Acy:Cie,acy:Eie,AElig:Tie,aelig:Aie,af:Pie,Afr:kie,afr:Rie,Agrave:Oie,agrave:Lie,alefsym:Die,aleph:zie,Alpha:Iie,alpha:Nie,Amacr:Uie,amacr:Fie,amalg:Bie,amp:Vie,AMP:Hie,andand:qie,And:Gie,and:Wie,andd:jie,andslope:$ie,andv:Xie,ang:Yie,ange:Kie,angle:Zie,angmsdaa:Jie,angmsdab:Qie,angmsdac:ere,angmsdad:tre,angmsdae:nre,angmsdaf:ire,angmsdag:rre,angmsdah:sre,angmsd:ore,angrt:are,angrtvb:lre,angrtvbd:cre,angsph:ure,angst:hre,angzarr:dre,Aogon:fre,aogon:pre,Aopf:mre,aopf:gre,apacir:vre,ap:_re,apE:bre,ape:yre,apid:xre,apos:wre,ApplyFunction:Sre,approx:Mre,approxeq:Cre,Aring:Ere,aring:Tre,Ascr:Are,ascr:Pre,Assign:kre,ast:Rre,asymp:Ore,asympeq:Lre,Atilde:Dre,atilde:zre,Auml:Ire,auml:Nre,awconint:Ure,awint:Fre,backcong:Bre,backepsilon:Vre,backprime:Hre,backsim:qre,backsimeq:Gre,Backslash:Wre,Barv:jre,barvee:$re,barwed:Xre,Barwed:Yre,barwedge:Kre,bbrk:Zre,bbrktbrk:Jre,bcong:Qre,Bcy:ese,bcy:tse,bdquo:nse,becaus:ise,because:rse,Because:sse,bemptyv:ose,bepsi:ase,bernou:lse,Bernoullis:cse,Beta:use,beta:hse,beth:dse,between:fse,Bfr:pse,bfr:mse,bigcap:gse,bigcirc:vse,bigcup:_se,bigodot:bse,bigoplus:yse,bigotimes:xse,bigsqcup:wse,bigstar:Sse,bigtriangledown:Mse,bigtriangleup:Cse,biguplus:Ese,bigvee:Tse,bigwedge:Ase,bkarow:Pse,blacklozenge:kse,blacksquare:Rse,blacktriangle:Ose,blacktriangledown:Lse,blacktriangleleft:Dse,blacktriangleright:zse,blank:Ise,blk12:Nse,blk14:Use,blk34:Fse,block:Bse,bne:Vse,bnequiv:Hse,bNot:qse,bnot:Gse,Bopf:Wse,bopf:jse,bot:$se,bottom:Xse,bowtie:Yse,boxbox:Kse,boxdl:Zse,boxdL:Jse,boxDl:Qse,boxDL:eoe,boxdr:toe,boxdR:noe,boxDr:ioe,boxDR:roe,boxh:soe,boxH:ooe,boxhd:aoe,boxHd:loe,boxhD:coe,boxHD:uoe,boxhu:hoe,boxHu:doe,boxhU:foe,boxHU:poe,boxminus:moe,boxplus:goe,boxtimes:voe,boxul:_oe,boxuL:boe,boxUl:yoe,boxUL:xoe,boxur:woe,boxuR:Soe,boxUr:Moe,boxUR:Coe,boxv:Eoe,boxV:Toe,boxvh:Aoe,boxvH:Poe,boxVh:koe,boxVH:Roe,boxvl:Ooe,boxvL:Loe,boxVl:Doe,boxVL:zoe,boxvr:Ioe,boxvR:Noe,boxVr:Uoe,boxVR:Foe,bprime:Boe,breve:Voe,Breve:Hoe,brvbar:qoe,bscr:Goe,Bscr:Woe,bsemi:joe,bsim:$oe,bsime:Xoe,bsolb:Yoe,bsol:Koe,bsolhsub:Zoe,bull:Joe,bullet:Qoe,bump:eae,bumpE:tae,bumpe:nae,Bumpeq:iae,bumpeq:rae,Cacute:sae,cacute:oae,capand:aae,capbrcup:lae,capcap:cae,cap:uae,Cap:hae,capcup:dae,capdot:fae,CapitalDifferentialD:pae,caps:mae,caret:gae,caron:vae,Cayleys:_ae,ccaps:bae,Ccaron:yae,ccaron:xae,Ccedil:wae,ccedil:Sae,Ccirc:Mae,ccirc:Cae,Cconint:Eae,ccups:Tae,ccupssm:Aae,Cdot:Pae,cdot:kae,cedil:Rae,Cedilla:Oae,cemptyv:Lae,cent:Dae,centerdot:zae,CenterDot:Iae,cfr:Nae,Cfr:Uae,CHcy:Fae,chcy:Bae,check:Vae,checkmark:Hae,Chi:qae,chi:Gae,circ:Wae,circeq:jae,circlearrowleft:$ae,circlearrowright:Xae,circledast:Yae,circledcirc:Kae,circleddash:Zae,CircleDot:Jae,circledR:Qae,circledS:ele,CircleMinus:tle,CirclePlus:nle,CircleTimes:ile,cir:rle,cirE:sle,cire:ole,cirfnint:ale,cirmid:lle,cirscir:cle,ClockwiseContourIntegral:ule,CloseCurlyDoubleQuote:hle,CloseCurlyQuote:dle,clubs:fle,clubsuit:ple,colon:mle,Colon:gle,Colone:vle,colone:_le,coloneq:ble,comma:yle,commat:xle,comp:wle,compfn:Sle,complement:Mle,complexes:Cle,cong:Ele,congdot:Tle,Congruent:Ale,conint:Ple,Conint:kle,ContourIntegral:Rle,copf:Ole,Copf:Lle,coprod:Dle,Coproduct:zle,copy:Ile,COPY:Nle,copysr:Ule,CounterClockwiseContourIntegral:Fle,crarr:Ble,cross:Vle,Cross:Hle,Cscr:qle,cscr:Gle,csub:Wle,csube:jle,csup:$le,csupe:Xle,ctdot:Yle,cudarrl:Kle,cudarrr:Zle,cuepr:Jle,cuesc:Qle,cularr:ece,cularrp:tce,cupbrcap:nce,cupcap:ice,CupCap:rce,cup:sce,Cup:oce,cupcup:ace,cupdot:lce,cupor:cce,cups:uce,curarr:hce,curarrm:dce,curlyeqprec:fce,curlyeqsucc:pce,curlyvee:mce,curlywedge:gce,curren:vce,curvearrowleft:_ce,curvearrowright:bce,cuvee:yce,cuwed:xce,cwconint:wce,cwint:Sce,cylcty:Mce,dagger:Cce,Dagger:Ece,daleth:Tce,darr:Ace,Darr:Pce,dArr:kce,dash:Rce,Dashv:Oce,dashv:Lce,dbkarow:Dce,dblac:zce,Dcaron:Ice,dcaron:Nce,Dcy:Uce,dcy:Fce,ddagger:Bce,ddarr:Vce,DD:Hce,dd:qce,DDotrahd:Gce,ddotseq:Wce,deg:jce,Del:$ce,Delta:Xce,delta:Yce,demptyv:Kce,dfisht:Zce,Dfr:Jce,dfr:Qce,dHar:eue,dharl:tue,dharr:nue,DiacriticalAcute:iue,DiacriticalDot:rue,DiacriticalDoubleAcute:sue,DiacriticalGrave:oue,DiacriticalTilde:aue,diam:lue,diamond:cue,Diamond:uue,diamondsuit:hue,diams:due,die:fue,DifferentialD:pue,digamma:mue,disin:gue,div:vue,divide:_ue,divideontimes:bue,divonx:yue,DJcy:xue,djcy:wue,dlcorn:Sue,dlcrop:Mue,dollar:Cue,Dopf:Eue,dopf:Tue,Dot:Aue,dot:Pue,DotDot:kue,doteq:Rue,doteqdot:Oue,DotEqual:Lue,dotminus:Due,dotplus:zue,dotsquare:Iue,doublebarwedge:Nue,DoubleContourIntegral:Uue,DoubleDot:Fue,DoubleDownArrow:Bue,DoubleLeftArrow:Vue,DoubleLeftRightArrow:Hue,DoubleLeftTee:que,DoubleLongLeftArrow:Gue,DoubleLongLeftRightArrow:Wue,DoubleLongRightArrow:jue,DoubleRightArrow:$ue,DoubleRightTee:Xue,DoubleUpArrow:Yue,DoubleUpDownArrow:Kue,DoubleVerticalBar:Zue,DownArrowBar:Jue,downarrow:Que,DownArrow:ehe,Downarrow:the,DownArrowUpArrow:nhe,DownBreve:ihe,downdownarrows:rhe,downharpoonleft:she,downharpoonright:ohe,DownLeftRightVector:ahe,DownLeftTeeVector:lhe,DownLeftVectorBar:che,DownLeftVector:uhe,DownRightTeeVector:hhe,DownRightVectorBar:dhe,DownRightVector:fhe,DownTeeArrow:phe,DownTee:mhe,drbkarow:ghe,drcorn:vhe,drcrop:_he,Dscr:bhe,dscr:yhe,DScy:xhe,dscy:whe,dsol:She,Dstrok:Mhe,dstrok:Che,dtdot:Ehe,dtri:The,dtrif:Ahe,duarr:Phe,duhar:khe,dwangle:Rhe,DZcy:Ohe,dzcy:Lhe,dzigrarr:Dhe,Eacute:zhe,eacute:Ihe,easter:Nhe,Ecaron:Uhe,ecaron:Fhe,Ecirc:Bhe,ecirc:Vhe,ecir:Hhe,ecolon:qhe,Ecy:Ghe,ecy:Whe,eDDot:jhe,Edot:$he,edot:Xhe,eDot:Yhe,ee:Khe,efDot:Zhe,Efr:Jhe,efr:Qhe,eg:ede,Egrave:tde,egrave:nde,egs:ide,egsdot:rde,el:sde,Element:ode,elinters:ade,ell:lde,els:cde,elsdot:ude,Emacr:hde,emacr:dde,empty:fde,emptyset:pde,EmptySmallSquare:mde,emptyv:gde,EmptyVerySmallSquare:vde,emsp13:_de,emsp14:bde,emsp:yde,ENG:xde,eng:wde,ensp:Sde,Eogon:Mde,eogon:Cde,Eopf:Ede,eopf:Tde,epar:Ade,eparsl:Pde,eplus:kde,epsi:Rde,Epsilon:Ode,epsilon:Lde,epsiv:Dde,eqcirc:zde,eqcolon:Ide,eqsim:Nde,eqslantgtr:Ude,eqslantless:Fde,Equal:Bde,equals:Vde,EqualTilde:Hde,equest:qde,Equilibrium:Gde,equiv:Wde,equivDD:jde,eqvparsl:$de,erarr:Xde,erDot:Yde,escr:Kde,Escr:Zde,esdot:Jde,Esim:Qde,esim:efe,Eta:tfe,eta:nfe,ETH:ife,eth:rfe,Euml:sfe,euml:ofe,euro:afe,excl:lfe,exist:cfe,Exists:ufe,expectation:hfe,exponentiale:dfe,ExponentialE:ffe,fallingdotseq:pfe,Fcy:mfe,fcy:gfe,female:vfe,ffilig:_fe,fflig:bfe,ffllig:yfe,Ffr:xfe,ffr:wfe,filig:Sfe,FilledSmallSquare:Mfe,FilledVerySmallSquare:Cfe,fjlig:Efe,flat:Tfe,fllig:Afe,fltns:Pfe,fnof:kfe,Fopf:Rfe,fopf:Ofe,forall:Lfe,ForAll:Dfe,fork:zfe,forkv:Ife,Fouriertrf:Nfe,fpartint:Ufe,frac12:Ffe,frac13:Bfe,frac14:Vfe,frac15:Hfe,frac16:qfe,frac18:Gfe,frac23:Wfe,frac25:jfe,frac34:$fe,frac35:Xfe,frac38:Yfe,frac45:Kfe,frac56:Zfe,frac58:Jfe,frac78:Qfe,frasl:epe,frown:tpe,fscr:npe,Fscr:ipe,gacute:rpe,Gamma:spe,gamma:ope,Gammad:ape,gammad:lpe,gap:cpe,Gbreve:upe,gbreve:hpe,Gcedil:dpe,Gcirc:fpe,gcirc:ppe,Gcy:mpe,gcy:gpe,Gdot:vpe,gdot:_pe,ge:bpe,gE:ype,gEl:xpe,gel:wpe,geq:Spe,geqq:Mpe,geqslant:Cpe,gescc:Epe,ges:Tpe,gesdot:Ape,gesdoto:Ppe,gesdotol:kpe,gesl:Rpe,gesles:Ope,Gfr:Lpe,gfr:Dpe,gg:zpe,Gg:Ipe,ggg:Npe,gimel:Upe,GJcy:Fpe,gjcy:Bpe,gla:Vpe,gl:Hpe,glE:qpe,glj:Gpe,gnap:Wpe,gnapprox:jpe,gne:$pe,gnE:Xpe,gneq:Ype,gneqq:Kpe,gnsim:Zpe,Gopf:Jpe,gopf:Qpe,grave:e0e,GreaterEqual:t0e,GreaterEqualLess:n0e,GreaterFullEqual:i0e,GreaterGreater:r0e,GreaterLess:s0e,GreaterSlantEqual:o0e,GreaterTilde:a0e,Gscr:l0e,gscr:c0e,gsim:u0e,gsime:h0e,gsiml:d0e,gtcc:f0e,gtcir:p0e,gt:m0e,GT:g0e,Gt:v0e,gtdot:_0e,gtlPar:b0e,gtquest:y0e,gtrapprox:x0e,gtrarr:w0e,gtrdot:S0e,gtreqless:M0e,gtreqqless:C0e,gtrless:E0e,gtrsim:T0e,gvertneqq:A0e,gvnE:P0e,Hacek:k0e,hairsp:R0e,half:O0e,hamilt:L0e,HARDcy:D0e,hardcy:z0e,harrcir:I0e,harr:N0e,hArr:U0e,harrw:F0e,Hat:B0e,hbar:V0e,Hcirc:H0e,hcirc:q0e,hearts:G0e,heartsuit:W0e,hellip:j0e,hercon:$0e,hfr:X0e,Hfr:Y0e,HilbertSpace:K0e,hksearow:Z0e,hkswarow:J0e,hoarr:Q0e,homtht:eme,hookleftarrow:tme,hookrightarrow:nme,hopf:ime,Hopf:rme,horbar:sme,HorizontalLine:ome,hscr:ame,Hscr:lme,hslash:cme,Hstrok:ume,hstrok:hme,HumpDownHump:dme,HumpEqual:fme,hybull:pme,hyphen:mme,Iacute:gme,iacute:vme,ic:_me,Icirc:bme,icirc:yme,Icy:xme,icy:wme,Idot:Sme,IEcy:Mme,iecy:Cme,iexcl:Eme,iff:Tme,ifr:Ame,Ifr:Pme,Igrave:kme,igrave:Rme,ii:Ome,iiiint:Lme,iiint:Dme,iinfin:zme,iiota:Ime,IJlig:Nme,ijlig:Ume,Imacr:Fme,imacr:Bme,image:Vme,ImaginaryI:Hme,imagline:qme,imagpart:Gme,imath:Wme,Im:jme,imof:$me,imped:Xme,Implies:Yme,incare:Kme,in:"",infin:Zme,infintie:Jme,inodot:Qme,intcal:ege,int:tge,Int:nge,integers:ige,Integral:rge,intercal:sge,Intersection:oge,intlarhk:age,intprod:lge,InvisibleComma:cge,InvisibleTimes:uge,IOcy:hge,iocy:dge,Iogon:fge,iogon:pge,Iopf:mge,iopf:gge,Iota:vge,iota:_ge,iprod:bge,iquest:yge,iscr:xge,Iscr:wge,isin:Sge,isindot:Mge,isinE:Cge,isins:Ege,isinsv:Tge,isinv:Age,it:Pge,Itilde:kge,itilde:Rge,Iukcy:Oge,iukcy:Lge,Iuml:Dge,iuml:zge,Jcirc:Ige,jcirc:Nge,Jcy:Uge,jcy:Fge,Jfr:Bge,jfr:Vge,jmath:Hge,Jopf:qge,jopf:Gge,Jscr:Wge,jscr:jge,Jsercy:$ge,jsercy:Xge,Jukcy:Yge,jukcy:Kge,Kappa:Zge,kappa:Jge,kappav:Qge,Kcedil:eve,kcedil:tve,Kcy:nve,kcy:ive,Kfr:rve,kfr:sve,kgreen:ove,KHcy:ave,khcy:lve,KJcy:cve,kjcy:uve,Kopf:hve,kopf:dve,Kscr:fve,kscr:pve,lAarr:mve,Lacute:gve,lacute:vve,laemptyv:_ve,lagran:bve,Lambda:yve,lambda:xve,lang:wve,Lang:Sve,langd:Mve,langle:Cve,lap:Eve,Laplacetrf:Tve,laquo:Ave,larrb:Pve,larrbfs:kve,larr:Rve,Larr:Ove,lArr:Lve,larrfs:Dve,larrhk:zve,larrlp:Ive,larrpl:Nve,larrsim:Uve,larrtl:Fve,latail:Bve,lAtail:Vve,lat:Hve,late:qve,lates:Gve,lbarr:Wve,lBarr:jve,lbbrk:$ve,lbrace:Xve,lbrack:Yve,lbrke:Kve,lbrksld:Zve,lbrkslu:Jve,Lcaron:Qve,lcaron:e1e,Lcedil:t1e,lcedil:n1e,lceil:i1e,lcub:r1e,Lcy:s1e,lcy:o1e,ldca:a1e,ldquo:l1e,ldquor:c1e,ldrdhar:u1e,ldrushar:h1e,ldsh:d1e,le:f1e,lE:p1e,LeftAngleBracket:m1e,LeftArrowBar:g1e,leftarrow:v1e,LeftArrow:_1e,Leftarrow:b1e,LeftArrowRightArrow:y1e,leftarrowtail:x1e,LeftCeiling:w1e,LeftDoubleBracket:S1e,LeftDownTeeVector:M1e,LeftDownVectorBar:C1e,LeftDownVector:E1e,LeftFloor:T1e,leftharpoondown:A1e,leftharpoonup:P1e,leftleftarrows:k1e,leftrightarrow:R1e,LeftRightArrow:O1e,Leftrightarrow:L1e,leftrightarrows:D1e,leftrightharpoons:z1e,leftrightsquigarrow:I1e,LeftRightVector:N1e,LeftTeeArrow:U1e,LeftTee:F1e,LeftTeeVector:B1e,leftthreetimes:V1e,LeftTriangleBar:H1e,LeftTriangle:q1e,LeftTriangleEqual:G1e,LeftUpDownVector:W1e,LeftUpTeeVector:j1e,LeftUpVectorBar:$1e,LeftUpVector:X1e,LeftVectorBar:Y1e,LeftVector:K1e,lEg:Z1e,leg:J1e,leq:Q1e,leqq:e_e,leqslant:t_e,lescc:n_e,les:i_e,lesdot:r_e,lesdoto:s_e,lesdotor:o_e,lesg:a_e,lesges:l_e,lessapprox:c_e,lessdot:u_e,lesseqgtr:h_e,lesseqqgtr:d_e,LessEqualGreater:f_e,LessFullEqual:p_e,LessGreater:m_e,lessgtr:g_e,LessLess:v_e,lesssim:__e,LessSlantEqual:b_e,LessTilde:y_e,lfisht:x_e,lfloor:w_e,Lfr:S_e,lfr:M_e,lg:C_e,lgE:E_e,lHar:T_e,lhard:A_e,lharu:P_e,lharul:k_e,lhblk:R_e,LJcy:O_e,ljcy:L_e,llarr:D_e,ll:z_e,Ll:I_e,llcorner:N_e,Lleftarrow:U_e,llhard:F_e,lltri:B_e,Lmidot:V_e,lmidot:H_e,lmoustache:q_e,lmoust:G_e,lnap:W_e,lnapprox:j_e,lne:$_e,lnE:X_e,lneq:Y_e,lneqq:K_e,lnsim:Z_e,loang:J_e,loarr:Q_e,lobrk:ebe,longleftarrow:tbe,LongLeftArrow:nbe,Longleftarrow:ibe,longleftrightarrow:rbe,LongLeftRightArrow:sbe,Longleftrightarrow:obe,longmapsto:abe,longrightarrow:lbe,LongRightArrow:cbe,Longrightarrow:ube,looparrowleft:hbe,looparrowright:dbe,lopar:fbe,Lopf:pbe,lopf:mbe,loplus:gbe,lotimes:vbe,lowast:_be,lowbar:bbe,LowerLeftArrow:ybe,LowerRightArrow:xbe,loz:wbe,lozenge:Sbe,lozf:Mbe,lpar:Cbe,lparlt:Ebe,lrarr:Tbe,lrcorner:Abe,lrhar:Pbe,lrhard:kbe,lrm:Rbe,lrtri:Obe,lsaquo:Lbe,lscr:Dbe,Lscr:zbe,lsh:Ibe,Lsh:Nbe,lsim:Ube,lsime:Fbe,lsimg:Bbe,lsqb:Vbe,lsquo:Hbe,lsquor:qbe,Lstrok:Gbe,lstrok:Wbe,ltcc:jbe,ltcir:$be,lt:Xbe,LT:Ybe,Lt:Kbe,ltdot:Zbe,lthree:Jbe,ltimes:Qbe,ltlarr:eye,ltquest:tye,ltri:nye,ltrie:iye,ltrif:rye,ltrPar:sye,lurdshar:oye,luruhar:aye,lvertneqq:lye,lvnE:cye,macr:uye,male:hye,malt:dye,maltese:fye,Map:"",map:pye,mapsto:mye,mapstodown:gye,mapstoleft:vye,mapstoup:_ye,marker:bye,mcomma:yye,Mcy:xye,mcy:wye,mdash:Sye,mDDot:Mye,measuredangle:Cye,MediumSpace:Eye,Mellintrf:Tye,Mfr:Aye,mfr:Pye,mho:kye,micro:Rye,midast:Oye,midcir:Lye,mid:Dye,middot:zye,minusb:Iye,minus:Nye,minusd:Uye,minusdu:Fye,MinusPlus:Bye,mlcp:Vye,mldr:Hye,mnplus:qye,models:Gye,Mopf:Wye,mopf:jye,mp:$ye,mscr:Xye,Mscr:Yye,mstpos:Kye,Mu:Zye,mu:Jye,multimap:Qye,mumap:exe,nabla:txe,Nacute:nxe,nacute:ixe,nang:rxe,nap:sxe,napE:oxe,napid:axe,napos:lxe,napprox:cxe,natural:uxe,naturals:hxe,natur:dxe,nbsp:fxe,nbump:pxe,nbumpe:mxe,ncap:gxe,Ncaron:vxe,ncaron:_xe,Ncedil:bxe,ncedil:yxe,ncong:xxe,ncongdot:wxe,ncup:Sxe,Ncy:Mxe,ncy:Cxe,ndash:Exe,nearhk:Txe,nearr:Axe,neArr:Pxe,nearrow:kxe,ne:Rxe,nedot:Oxe,NegativeMediumSpace:Lxe,NegativeThickSpace:Dxe,NegativeThinSpace:zxe,NegativeVeryThinSpace:Ixe,nequiv:Nxe,nesear:Uxe,nesim:Fxe,NestedGreaterGreater:Bxe,NestedLessLess:Vxe,NewLine:Hxe,nexist:qxe,nexists:Gxe,Nfr:Wxe,nfr:jxe,ngE:$xe,nge:Xxe,ngeq:Yxe,ngeqq:Kxe,ngeqslant:Zxe,nges:Jxe,nGg:Qxe,ngsim:ewe,nGt:twe,ngt:nwe,ngtr:iwe,nGtv:rwe,nharr:swe,nhArr:owe,nhpar:awe,ni:lwe,nis:cwe,nisd:uwe,niv:hwe,NJcy:dwe,njcy:fwe,nlarr:pwe,nlArr:mwe,nldr:gwe,nlE:vwe,nle:_we,nleftarrow:bwe,nLeftarrow:ywe,nleftrightarrow:xwe,nLeftrightarrow:wwe,nleq:Swe,nleqq:Mwe,nleqslant:Cwe,nles:Ewe,nless:Twe,nLl:Awe,nlsim:Pwe,nLt:kwe,nlt:Rwe,nltri:Owe,nltrie:Lwe,nLtv:Dwe,nmid:zwe,NoBreak:Iwe,NonBreakingSpace:Nwe,nopf:Uwe,Nopf:Fwe,Not:Bwe,not:Vwe,NotCongruent:Hwe,NotCupCap:qwe,NotDoubleVerticalBar:Gwe,NotElement:Wwe,NotEqual:jwe,NotEqualTilde:$we,NotExists:Xwe,NotGreater:Ywe,NotGreaterEqual:Kwe,NotGreaterFullEqual:Zwe,NotGreaterGreater:Jwe,NotGreaterLess:Qwe,NotGreaterSlantEqual:e2e,NotGreaterTilde:t2e,NotHumpDownHump:n2e,NotHumpEqual:i2e,notin:r2e,notindot:s2e,notinE:o2e,notinva:a2e,notinvb:l2e,notinvc:c2e,NotLeftTriangleBar:u2e,NotLeftTriangle:h2e,NotLeftTriangleEqual:d2e,NotLess:f2e,NotLessEqual:p2e,NotLessGreater:m2e,NotLessLess:g2e,NotLessSlantEqual:v2e,NotLessTilde:_2e,NotNestedGreaterGreater:b2e,NotNestedLessLess:y2e,notni:x2e,notniva:w2e,notnivb:S2e,notnivc:M2e,NotPrecedes:C2e,NotPrecedesEqual:E2e,NotPrecedesSlantEqual:T2e,NotReverseElement:A2e,NotRightTriangleBar:P2e,NotRightTriangle:k2e,NotRightTriangleEqual:R2e,NotSquareSubset:O2e,NotSquareSubsetEqual:L2e,NotSquareSuperset:D2e,NotSquareSupersetEqual:z2e,NotSubset:I2e,NotSubsetEqual:N2e,NotSucceeds:U2e,NotSucceedsEqual:F2e,NotSucceedsSlantEqual:B2e,NotSucceedsTilde:V2e,NotSuperset:H2e,NotSupersetEqual:q2e,NotTilde:G2e,NotTildeEqual:W2e,NotTildeFullEqual:j2e,NotTildeTilde:$2e,NotVerticalBar:X2e,nparallel:Y2e,npar:K2e,nparsl:Z2e,npart:J2e,npolint:Q2e,npr:e4e,nprcue:t4e,nprec:n4e,npreceq:i4e,npre:r4e,nrarrc:s4e,nrarr:o4e,nrArr:a4e,nrarrw:l4e,nrightarrow:c4e,nRightarrow:u4e,nrtri:h4e,nrtrie:d4e,nsc:f4e,nsccue:p4e,nsce:m4e,Nscr:g4e,nscr:v4e,nshortmid:_4e,nshortparallel:b4e,nsim:y4e,nsime:x4e,nsimeq:w4e,nsmid:S4e,nspar:M4e,nsqsube:C4e,nsqsupe:E4e,nsub:T4e,nsubE:A4e,nsube:P4e,nsubset:k4e,nsubseteq:R4e,nsubseteqq:O4e,nsucc:L4e,nsucceq:D4e,nsup:z4e,nsupE:I4e,nsupe:N4e,nsupset:U4e,nsupseteq:F4e,nsupseteqq:B4e,ntgl:V4e,Ntilde:H4e,ntilde:q4e,ntlg:G4e,ntriangleleft:W4e,ntrianglelefteq:j4e,ntriangleright:$4e,ntrianglerighteq:X4e,Nu:Y4e,nu:K4e,num:Z4e,numero:J4e,numsp:Q4e,nvap:e3e,nvdash:t3e,nvDash:n3e,nVdash:i3e,nVDash:r3e,nvge:s3e,nvgt:o3e,nvHarr:a3e,nvinfin:l3e,nvlArr:c3e,nvle:u3e,nvlt:h3e,nvltrie:d3e,nvrArr:f3e,nvrtrie:p3e,nvsim:m3e,nwarhk:g3e,nwarr:v3e,nwArr:_3e,nwarrow:b3e,nwnear:y3e,Oacute:x3e,oacute:w3e,oast:S3e,Ocirc:M3e,ocirc:C3e,ocir:E3e,Ocy:T3e,ocy:A3e,odash:P3e,Odblac:k3e,odblac:R3e,odiv:O3e,odot:L3e,odsold:D3e,OElig:z3e,oelig:I3e,ofcir:N3e,Ofr:U3e,ofr:F3e,ogon:B3e,Ograve:V3e,ograve:H3e,ogt:q3e,ohbar:G3e,ohm:W3e,oint:j3e,olarr:$3e,olcir:X3e,olcross:Y3e,oline:K3e,olt:Z3e,Omacr:J3e,omacr:Q3e,Omega:eSe,omega:tSe,Omicron:nSe,omicron:iSe,omid:rSe,ominus:sSe,Oopf:oSe,oopf:aSe,opar:lSe,OpenCurlyDoubleQuote:cSe,OpenCurlyQuote:uSe,operp:hSe,oplus:dSe,orarr:fSe,Or:pSe,or:mSe,ord:gSe,order:vSe,orderof:_Se,ordf:bSe,ordm:ySe,origof:xSe,oror:wSe,orslope:SSe,orv:MSe,oS:CSe,Oscr:ESe,oscr:TSe,Oslash:ASe,oslash:PSe,osol:kSe,Otilde:RSe,otilde:OSe,otimesas:LSe,Otimes:DSe,otimes:zSe,Ouml:ISe,ouml:NSe,ovbar:USe,OverBar:FSe,OverBrace:BSe,OverBracket:VSe,OverParenthesis:HSe,para:qSe,parallel:GSe,par:WSe,parsim:jSe,parsl:$Se,part:XSe,PartialD:YSe,Pcy:KSe,pcy:ZSe,percnt:JSe,period:QSe,permil:eMe,perp:tMe,pertenk:nMe,Pfr:iMe,pfr:rMe,Phi:sMe,phi:oMe,phiv:aMe,phmmat:lMe,phone:cMe,Pi:uMe,pi:hMe,pitchfork:dMe,piv:fMe,planck:pMe,planckh:mMe,plankv:gMe,plusacir:vMe,plusb:_Me,pluscir:bMe,plus:yMe,plusdo:xMe,plusdu:wMe,pluse:SMe,PlusMinus:MMe,plusmn:CMe,plussim:EMe,plustwo:TMe,pm:AMe,Poincareplane:PMe,pointint:kMe,popf:RMe,Popf:OMe,pound:LMe,prap:DMe,Pr:zMe,pr:IMe,prcue:NMe,precapprox:UMe,prec:FMe,preccurlyeq:BMe,Precedes:VMe,PrecedesEqual:HMe,PrecedesSlantEqual:qMe,PrecedesTilde:GMe,preceq:WMe,precnapprox:jMe,precneqq:$Me,precnsim:XMe,pre:YMe,prE:KMe,precsim:ZMe,prime:JMe,Prime:QMe,primes:eCe,prnap:tCe,prnE:nCe,prnsim:iCe,prod:rCe,Product:sCe,profalar:oCe,profline:aCe,profsurf:lCe,prop:cCe,Proportional:uCe,Proportion:hCe,propto:dCe,prsim:fCe,prurel:pCe,Pscr:mCe,pscr:gCe,Psi:vCe,psi:_Ce,puncsp:bCe,Qfr:yCe,qfr:xCe,qint:wCe,qopf:SCe,Qopf:MCe,qprime:CCe,Qscr:ECe,qscr:TCe,quaternions:ACe,quatint:PCe,quest:kCe,questeq:RCe,quot:OCe,QUOT:LCe,rAarr:DCe,race:zCe,Racute:ICe,racute:NCe,radic:UCe,raemptyv:FCe,rang:BCe,Rang:VCe,rangd:HCe,range:qCe,rangle:GCe,raquo:WCe,rarrap:jCe,rarrb:$Ce,rarrbfs:XCe,rarrc:YCe,rarr:KCe,Rarr:ZCe,rArr:JCe,rarrfs:QCe,rarrhk:eEe,rarrlp:tEe,rarrpl:nEe,rarrsim:iEe,Rarrtl:rEe,rarrtl:sEe,rarrw:oEe,ratail:aEe,rAtail:lEe,ratio:cEe,rationals:uEe,rbarr:hEe,rBarr:dEe,RBarr:fEe,rbbrk:pEe,rbrace:mEe,rbrack:gEe,rbrke:vEe,rbrksld:_Ee,rbrkslu:bEe,Rcaron:yEe,rcaron:xEe,Rcedil:wEe,rcedil:SEe,rceil:MEe,rcub:CEe,Rcy:EEe,rcy:TEe,rdca:AEe,rdldhar:PEe,rdquo:kEe,rdquor:REe,rdsh:OEe,real:LEe,realine:DEe,realpart:zEe,reals:IEe,Re:NEe,rect:UEe,reg:FEe,REG:BEe,ReverseElement:VEe,ReverseEquilibrium:HEe,ReverseUpEquilibrium:qEe,rfisht:GEe,rfloor:WEe,rfr:jEe,Rfr:$Ee,rHar:XEe,rhard:YEe,rharu:KEe,rharul:ZEe,Rho:JEe,rho:QEe,rhov:eTe,RightAngleBracket:tTe,RightArrowBar:nTe,rightarrow:iTe,RightArrow:rTe,Rightarrow:sTe,RightArrowLeftArrow:oTe,rightarrowtail:aTe,RightCeiling:lTe,RightDoubleBracket:cTe,RightDownTeeVector:uTe,RightDownVectorBar:hTe,RightDownVector:dTe,RightFloor:fTe,rightharpoondown:pTe,rightharpoonup:mTe,rightleftarrows:gTe,rightleftharpoons:vTe,rightrightarrows:_Te,rightsquigarrow:bTe,RightTeeArrow:yTe,RightTee:xTe,RightTeeVector:wTe,rightthreetimes:STe,RightTriangleBar:MTe,RightTriangle:CTe,RightTriangleEqual:ETe,RightUpDownVector:TTe,RightUpTeeVector:ATe,RightUpVectorBar:PTe,RightUpVector:kTe,RightVectorBar:RTe,RightVector:OTe,ring:LTe,risingdotseq:DTe,rlarr:zTe,rlhar:ITe,rlm:NTe,rmoustache:UTe,rmoust:FTe,rnmid:BTe,roang:VTe,roarr:HTe,robrk:qTe,ropar:GTe,ropf:WTe,Ropf:jTe,roplus:$Te,rotimes:XTe,RoundImplies:YTe,rpar:KTe,rpargt:ZTe,rppolint:JTe,rrarr:QTe,Rrightarrow:eAe,rsaquo:tAe,rscr:nAe,Rscr:iAe,rsh:rAe,Rsh:sAe,rsqb:oAe,rsquo:aAe,rsquor:lAe,rthree:cAe,rtimes:uAe,rtri:hAe,rtrie:dAe,rtrif:fAe,rtriltri:pAe,RuleDelayed:mAe,ruluhar:gAe,rx:vAe,Sacute:_Ae,sacute:bAe,sbquo:yAe,scap:xAe,Scaron:wAe,scaron:SAe,Sc:MAe,sc:CAe,sccue:EAe,sce:TAe,scE:AAe,Scedil:PAe,scedil:kAe,Scirc:RAe,scirc:OAe,scnap:LAe,scnE:DAe,scnsim:zAe,scpolint:IAe,scsim:NAe,Scy:UAe,scy:FAe,sdotb:BAe,sdot:VAe,sdote:HAe,searhk:qAe,searr:GAe,seArr:WAe,searrow:jAe,sect:$Ae,semi:XAe,seswar:YAe,setminus:KAe,setmn:ZAe,sext:JAe,Sfr:QAe,sfr:e5e,sfrown:t5e,sharp:n5e,SHCHcy:i5e,shchcy:r5e,SHcy:s5e,shcy:o5e,ShortDownArrow:a5e,ShortLeftArrow:l5e,shortmid:c5e,shortparallel:u5e,ShortRightArrow:h5e,ShortUpArrow:d5e,shy:f5e,Sigma:p5e,sigma:m5e,sigmaf:g5e,sigmav:v5e,sim:_5e,simdot:b5e,sime:y5e,simeq:x5e,simg:w5e,simgE:S5e,siml:M5e,simlE:C5e,simne:E5e,simplus:T5e,simrarr:A5e,slarr:P5e,SmallCircle:k5e,smallsetminus:R5e,smashp:O5e,smeparsl:L5e,smid:D5e,smile:z5e,smt:I5e,smte:N5e,smtes:U5e,SOFTcy:F5e,softcy:B5e,solbar:V5e,solb:H5e,sol:q5e,Sopf:G5e,sopf:W5e,spades:j5e,spadesuit:$5e,spar:X5e,sqcap:Y5e,sqcaps:K5e,sqcup:Z5e,sqcups:J5e,Sqrt:Q5e,sqsub:e6e,sqsube:t6e,sqsubset:n6e,sqsubseteq:i6e,sqsup:r6e,sqsupe:s6e,sqsupset:o6e,sqsupseteq:a6e,square:l6e,Square:c6e,SquareIntersection:u6e,SquareSubset:h6e,SquareSubsetEqual:d6e,SquareSuperset:f6e,SquareSupersetEqual:p6e,SquareUnion:m6e,squarf:g6e,squ:v6e,squf:_6e,srarr:b6e,Sscr:y6e,sscr:x6e,ssetmn:w6e,ssmile:S6e,sstarf:M6e,Star:C6e,star:E6e,starf:T6e,straightepsilon:A6e,straightphi:P6e,strns:k6e,sub:R6e,Sub:O6e,subdot:L6e,subE:D6e,sube:z6e,subedot:I6e,submult:N6e,subnE:U6e,subne:F6e,subplus:B6e,subrarr:V6e,subset:H6e,Subset:q6e,subseteq:G6e,subseteqq:W6e,SubsetEqual:j6e,subsetneq:$6e,subsetneqq:X6e,subsim:Y6e,subsub:K6e,subsup:Z6e,succapprox:J6e,succ:Q6e,succcurlyeq:ePe,Succeeds:tPe,SucceedsEqual:nPe,SucceedsSlantEqual:iPe,SucceedsTilde:rPe,succeq:sPe,succnapprox:oPe,succneqq:aPe,succnsim:lPe,succsim:cPe,SuchThat:uPe,sum:hPe,Sum:dPe,sung:fPe,sup1:pPe,sup2:mPe,sup3:gPe,sup:vPe,Sup:_Pe,supdot:bPe,supdsub:yPe,supE:xPe,supe:wPe,supedot:SPe,Superset:MPe,SupersetEqual:CPe,suphsol:EPe,suphsub:TPe,suplarr:APe,supmult:PPe,supnE:kPe,supne:RPe,supplus:OPe,supset:LPe,Supset:DPe,supseteq:zPe,supseteqq:IPe,supsetneq:NPe,supsetneqq:UPe,supsim:FPe,supsub:BPe,supsup:VPe,swarhk:HPe,swarr:qPe,swArr:GPe,swarrow:WPe,swnwar:jPe,szlig:$Pe,Tab:XPe,target:YPe,Tau:KPe,tau:ZPe,tbrk:JPe,Tcaron:QPe,tcaron:e7e,Tcedil:t7e,tcedil:n7e,Tcy:i7e,tcy:r7e,tdot:s7e,telrec:o7e,Tfr:a7e,tfr:l7e,there4:c7e,therefore:u7e,Therefore:h7e,Theta:d7e,theta:f7e,thetasym:p7e,thetav:m7e,thickapprox:g7e,thicksim:v7e,ThickSpace:_7e,ThinSpace:b7e,thinsp:y7e,thkap:x7e,thksim:w7e,THORN:S7e,thorn:M7e,tilde:C7e,Tilde:E7e,TildeEqual:T7e,TildeFullEqual:A7e,TildeTilde:P7e,timesbar:k7e,timesb:R7e,times:O7e,timesd:L7e,tint:D7e,toea:z7e,topbot:I7e,topcir:N7e,top:U7e,Topf:F7e,topf:B7e,topfork:V7e,tosa:H7e,tprime:q7e,trade:G7e,TRADE:W7e,triangle:j7e,triangledown:$7e,triangleleft:X7e,trianglelefteq:Y7e,triangleq:K7e,triangleright:Z7e,trianglerighteq:J7e,tridot:Q7e,trie:e8e,triminus:t8e,TripleDot:n8e,triplus:i8e,trisb:r8e,tritime:s8e,trpezium:o8e,Tscr:a8e,tscr:l8e,TScy:c8e,tscy:u8e,TSHcy:h8e,tshcy:d8e,Tstrok:f8e,tstrok:p8e,twixt:m8e,twoheadleftarrow:g8e,twoheadrightarrow:v8e,Uacute:_8e,uacute:b8e,uarr:y8e,Uarr:x8e,uArr:w8e,Uarrocir:S8e,Ubrcy:M8e,ubrcy:C8e,Ubreve:E8e,ubreve:T8e,Ucirc:A8e,ucirc:P8e,Ucy:k8e,ucy:R8e,udarr:O8e,Udblac:L8e,udblac:D8e,udhar:z8e,ufisht:I8e,Ufr:N8e,ufr:U8e,Ugrave:F8e,ugrave:B8e,uHar:V8e,uharl:H8e,uharr:q8e,uhblk:G8e,ulcorn:W8e,ulcorner:j8e,ulcrop:$8e,ultri:X8e,Umacr:Y8e,umacr:K8e,uml:Z8e,UnderBar:J8e,UnderBrace:Q8e,UnderBracket:eke,UnderParenthesis:tke,Union:nke,UnionPlus:ike,Uogon:rke,uogon:ske,Uopf:oke,uopf:ake,UpArrowBar:lke,uparrow:cke,UpArrow:uke,Uparrow:hke,UpArrowDownArrow:dke,updownarrow:fke,UpDownArrow:pke,Updownarrow:mke,UpEquilibrium:gke,upharpoonleft:vke,upharpoonright:_ke,uplus:bke,UpperLeftArrow:yke,UpperRightArrow:xke,upsi:wke,Upsi:Ske,upsih:Mke,Upsilon:Cke,upsilon:Eke,UpTeeArrow:Tke,UpTee:Ake,upuparrows:Pke,urcorn:kke,urcorner:Rke,urcrop:Oke,Uring:Lke,uring:Dke,urtri:zke,Uscr:Ike,uscr:Nke,utdot:Uke,Utilde:Fke,utilde:Bke,utri:Vke,utrif:Hke,uuarr:qke,Uuml:Gke,uuml:Wke,uwangle:jke,vangrt:$ke,varepsilon:Xke,varkappa:Yke,varnothing:Kke,varphi:Zke,varpi:Jke,varpropto:Qke,varr:eRe,vArr:tRe,varrho:nRe,varsigma:iRe,varsubsetneq:rRe,varsubsetneqq:sRe,varsupsetneq:oRe,varsupsetneqq:aRe,vartheta:lRe,vartriangleleft:cRe,vartriangleright:uRe,vBar:hRe,Vbar:dRe,vBarv:fRe,Vcy:pRe,vcy:mRe,vdash:gRe,vDash:vRe,Vdash:_Re,VDash:bRe,Vdashl:yRe,veebar:xRe,vee:wRe,Vee:SRe,veeeq:MRe,vellip:CRe,verbar:ERe,Verbar:TRe,vert:ARe,Vert:PRe,VerticalBar:kRe,VerticalLine:RRe,VerticalSeparator:ORe,VerticalTilde:LRe,VeryThinSpace:DRe,Vfr:zRe,vfr:IRe,vltri:NRe,vnsub:URe,vnsup:FRe,Vopf:BRe,vopf:VRe,vprop:HRe,vrtri:qRe,Vscr:GRe,vscr:WRe,vsubnE:jRe,vsubne:$Re,vsupnE:XRe,vsupne:YRe,Vvdash:KRe,vzigzag:ZRe,Wcirc:JRe,wcirc:QRe,wedbar:eOe,wedge:tOe,Wedge:nOe,wedgeq:iOe,weierp:rOe,Wfr:sOe,wfr:oOe,Wopf:aOe,wopf:lOe,wp:cOe,wr:uOe,wreath:hOe,Wscr:dOe,wscr:fOe,xcap:pOe,xcirc:mOe,xcup:gOe,xdtri:vOe,Xfr:_Oe,xfr:bOe,xharr:yOe,xhArr:xOe,Xi:wOe,xi:SOe,xlarr:MOe,xlArr:COe,xmap:EOe,xnis:TOe,xodot:AOe,Xopf:POe,xopf:kOe,xoplus:ROe,xotime:OOe,xrarr:LOe,xrArr:DOe,Xscr:zOe,xscr:IOe,xsqcup:NOe,xuplus:UOe,xutri:FOe,xvee:BOe,xwedge:VOe,Yacute:HOe,yacute:qOe,YAcy:GOe,yacy:WOe,Ycirc:jOe,ycirc:$Oe,Ycy:XOe,ycy:YOe,yen:KOe,Yfr:ZOe,yfr:JOe,YIcy:QOe,yicy:eLe,Yopf:tLe,yopf:nLe,Yscr:iLe,yscr:rLe,YUcy:sLe,yucy:oLe,yuml:aLe,Yuml:lLe,Zacute:cLe,zacute:uLe,Zcaron:hLe,zcaron:dLe,Zcy:fLe,zcy:pLe,Zdot:mLe,zdot:gLe,zeetrf:vLe,ZeroWidthSpace:_Le,Zeta:bLe,zeta:yLe,zfr:xLe,Zfr:wLe,ZHcy:SLe,zhcy:MLe,zigrarr:CLe,zopf:ELe,Zopf:TLe,Zscr:ALe,zscr:PLe,zwj:kLe,zwnj:RLe},OLe="",LLe="",DLe="",zLe="",ILe="",NLe="",ULe="",FLe="",BLe="",VLe="&",HLe="&",qLe="",GLe="",WLe="",jLe="",$Le="",XLe="",YLe="",KLe="",ZLe="",JLe="",QLe="",eDe="",tDe="",nDe="",iDe="",rDe="",sDe="",oDe="",aDe="",lDe="",cDe="",uDe="",hDe="",dDe="",fDe="",pDe="",mDe="",gDe="",vDe="",_De=">",bDe=">",yDe="",xDe="",wDe="",SDe="",MDe="",CDe="",EDe="",TDe="",ADe="",PDe="",kDe="",RDe="<",ODe="<",LDe="",DDe="",zDe="",IDe="",NDe="",UDe="",FDe="",BDe="",VDe="",HDe="",qDe="",GDe="",WDe="",jDe="",$De="",XDe="",YDe="",KDe="",ZDe="",JDe="",QDe="",e9e="",t9e="",n9e="",i9e='"',r9e='"',s9e="",o9e="",a9e="",l9e="",c9e="",u9e="",h9e="",d9e="",f9e="",p9e="",m9e="",g9e="",v9e="",_9e="",b9e="",y9e="",x9e="",w9e="",S9e="",M9e="",C9e="",E9e="",T9e="",A9e="",P9e="",k9e={Aacute:OLe,aacute:LLe,Acirc:DLe,acirc:zLe,acute:ILe,AElig:NLe,aelig:ULe,Agrave:FLe,agrave:BLe,amp:VLe,AMP:HLe,Aring:qLe,aring:GLe,Atilde:WLe,atilde:jLe,Auml:$Le,auml:XLe,brvbar:YLe,Ccedil:KLe,ccedil:ZLe,cedil:JLe,cent:QLe,copy:eDe,COPY:tDe,curren:nDe,deg:iDe,divide:rDe,Eacute:sDe,eacute:oDe,Ecirc:aDe,ecirc:lDe,Egrave:cDe,egrave:uDe,ETH:hDe,eth:dDe,Euml:fDe,euml:pDe,frac12:mDe,frac14:gDe,frac34:vDe,gt:_De,GT:bDe,Iacute:yDe,iacute:xDe,Icirc:wDe,icirc:SDe,iexcl:MDe,Igrave:CDe,igrave:EDe,iquest:TDe,Iuml:ADe,iuml:PDe,laquo:kDe,lt:RDe,LT:ODe,macr:LDe,micro:DDe,middot:zDe,nbsp:IDe,not:NDe,Ntilde:UDe,ntilde:FDe,Oacute:BDe,oacute:VDe,Ocirc:HDe,ocirc:qDe,Ograve:GDe,ograve:WDe,ordf:jDe,ordm:$De,Oslash:XDe,oslash:YDe,Otilde:KDe,otilde:ZDe,Ouml:JDe,ouml:QDe,para:e9e,plusmn:t9e,pound:n9e,quot:i9e,QUOT:r9e,raquo:s9e,reg:o9e,REG:a9e,sect:l9e,shy:c9e,sup1:u9e,sup2:h9e,sup3:d9e,szlig:f9e,THORN:p9e,thorn:m9e,times:g9e,Uacute:v9e,uacute:_9e,Ucirc:b9e,ucirc:y9e,Ugrave:x9e,ugrave:w9e,uml:S9e,Uuml:M9e,uuml:C9e,Yacute:E9e,yacute:T9e,yen:A9e,yuml:P9e},R9e="&",O9e="'",L9e=">",D9e="<",z9e='"',Zz={amp:R9e,apos:O9e,gt:L9e,lt:D9e,quot:z9e};var qA={};const I9e={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376};var N9e=it&&it.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(qA,"__esModule",{value:!0});var U8=N9e(I9e),U9e=String.fromCodePoint||function(i){var e="";return i>65535&&(i-=65536,e+=String.fromCharCode(i>>>10&1023|55296),i=56320|i&1023),e+=String.fromCharCode(i),e};function F9e(i){return i>=55296&&i<=57343||i>1114111?"":(i in U8.default&&(i=U8.default[i]),U9e(i))}qA.default=F9e;var a4=it&&it.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Wh,"__esModule",{value:!0});Wh.decodeHTML=Wh.decodeHTMLStrict=Wh.decodeXML=void 0;var kE=a4(Kz),B9e=a4(k9e),V9e=a4(Zz),F8=a4(qA),H9e=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;Wh.decodeXML=Jz(V9e.default);Wh.decodeHTMLStrict=Jz(kE.default);function Jz(i){var e=Qz(i);return function(t){return String(t).replace(H9e,e)}}var B8=function(i,e){return i<e?1:-1};Wh.decodeHTML=function(){for(var i=Object.keys(B9e.default).sort(B8),e=Object.keys(kE.default).sort(B8),t=0,n=0;t<e.length;t++)i[n]===e[t]?(e[t]+=";?",n++):e[t]+=";";var r=new RegExp("&(?:"+e.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),s=Qz(kE.default);function o(a){return a.substr(-1)!==";"&&(a+=";"),s(a)}return function(a){return String(a).replace(r,o)}}();function Qz(i){return function(t){if(t.charAt(1)==="#"){var n=t.charAt(2);return n==="X"||n==="x"?F8.default(parseInt(t.substr(3),16)):F8.default(parseInt(t.substr(2),10))}return i[t.slice(1,-1)]||t}}var Ll={},eI=it&&it.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ll,"__esModule",{value:!0});Ll.escapeUTF8=Ll.escape=Ll.encodeNonAsciiHTML=Ll.encodeHTML=Ll.encodeXML=void 0;var q9e=eI(Zz),tI=iI(q9e.default),nI=rI(tI);Ll.encodeXML=aI(tI);var G9e=eI(Kz),GA=iI(G9e.default),W9e=rI(GA);Ll.encodeHTML=$9e(GA,W9e);Ll.encodeNonAsciiHTML=aI(GA);function iI(i){return Object.keys(i).sort().reduce(function(e,t){return e[i[t]]="&"+t+";",e},{})}function rI(i){for(var e=[],t=[],n=0,r=Object.keys(i);n<r.length;n++){var s=r[n];s.length===1?e.push("\\"+s):t.push(s)}e.sort();for(var o=0;o<e.length-1;o++){for(var a=o;a<e.length-1&&e[a].charCodeAt(1)+1===e[a+1].charCodeAt(1);)a+=1;var l=1+a-o;l<3||e.splice(o,l,e[o]+"-"+e[a])}return t.unshift("["+e.join("")+"]"),new RegExp(t.join("|"),"g")}var sI=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,j9e=String.prototype.codePointAt!=null?function(i){return i.codePointAt(0)}:function(i){return(i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536};function l4(i){return"&#x"+(i.length>1?j9e(i):i.charCodeAt(0)).toString(16).toUpperCase()+";"}function $9e(i,e){return function(t){return t.replace(e,function(n){return i[n]}).replace(sI,l4)}}var oI=new RegExp(nI.source+"|"+sI.source,"g");function X9e(i){return i.replace(oI,l4)}Ll.escape=X9e;function Y9e(i){return i.replace(nI,l4)}Ll.escapeUTF8=Y9e;function aI(i){return function(e){return e.replace(oI,function(t){return i[t]||l4(t)})}}(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.decodeXMLStrict=i.decodeHTML5Strict=i.decodeHTML4Strict=i.decodeHTML5=i.decodeHTML4=i.decodeHTMLStrict=i.decodeHTML=i.decodeXML=i.encodeHTML5=i.encodeHTML4=i.escapeUTF8=i.escape=i.encodeNonAsciiHTML=i.encodeHTML=i.encodeXML=i.encode=i.decodeStrict=i.decode=void 0;var e=Wh,t=Ll;function n(l,c){return(!c||c<=0?e.decodeXML:e.decodeHTML)(l)}i.decode=n;function r(l,c){return(!c||c<=0?e.decodeXML:e.decodeHTMLStrict)(l)}i.decodeStrict=r;function s(l,c){return(!c||c<=0?t.encodeXML:t.encodeHTML)(l)}i.encode=s;var o=Ll;Object.defineProperty(i,"encodeXML",{enumerable:!0,get:function(){return o.encodeXML}}),Object.defineProperty(i,"encodeHTML",{enumerable:!0,get:function(){return o.encodeHTML}}),Object.defineProperty(i,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return o.encodeNonAsciiHTML}}),Object.defineProperty(i,"escape",{enumerable:!0,get:function(){return o.escape}}),Object.defineProperty(i,"escapeUTF8",{enumerable:!0,get:function(){return o.escapeUTF8}}),Object.defineProperty(i,"encodeHTML4",{enumerable:!0,get:function(){return o.encodeHTML}}),Object.defineProperty(i,"encodeHTML5",{enumerable:!0,get:function(){return o.encodeHTML}});var a=Wh;Object.defineProperty(i,"decodeXML",{enumerable:!0,get:function(){return a.decodeXML}}),Object.defineProperty(i,"decodeHTML",{enumerable:!0,get:function(){return a.decodeHTML}}),Object.defineProperty(i,"decodeHTMLStrict",{enumerable:!0,get:function(){return a.decodeHTMLStrict}}),Object.defineProperty(i,"decodeHTML4",{enumerable:!0,get:function(){return a.decodeHTML}}),Object.defineProperty(i,"decodeHTML5",{enumerable:!0,get:function(){return a.decodeHTML}}),Object.defineProperty(i,"decodeHTML4Strict",{enumerable:!0,get:function(){return a.decodeHTMLStrict}}),Object.defineProperty(i,"decodeHTML5Strict",{enumerable:!0,get:function(){return a.decodeHTMLStrict}}),Object.defineProperty(i,"decodeXMLStrict",{enumerable:!0,get:function(){return a.decodeXML}})})(Yz);var ig={};Object.defineProperty(ig,"__esModule",{value:!0});ig.attributeNames=ig.elementNames=void 0;ig.elementNames=new Map([["altglyph","altGlyph"],["altglyphdef","altGlyphDef"],["altglyphitem","altGlyphItem"],["animatecolor","animateColor"],["animatemotion","animateMotion"],["animatetransform","animateTransform"],["clippath","clipPath"],["feblend","feBlend"],["fecolormatrix","feColorMatrix"],["fecomponenttransfer","feComponentTransfer"],["fecomposite","feComposite"],["feconvolvematrix","feConvolveMatrix"],["fediffuselighting","feDiffuseLighting"],["fedisplacementmap","feDisplacementMap"],["fedistantlight","feDistantLight"],["fedropshadow","feDropShadow"],["feflood","feFlood"],["fefunca","feFuncA"],["fefuncb","feFuncB"],["fefuncg","feFuncG"],["fefuncr","feFuncR"],["fegaussianblur","feGaussianBlur"],["feimage","feImage"],["femerge","feMerge"],["femergenode","feMergeNode"],["femorphology","feMorphology"],["feoffset","feOffset"],["fepointlight","fePointLight"],["fespecularlighting","feSpecularLighting"],["fespotlight","feSpotLight"],["fetile","feTile"],["feturbulence","feTurbulence"],["foreignobject","foreignObject"],["glyphref","glyphRef"],["lineargradient","linearGradient"],["radialgradient","radialGradient"],["textpath","textPath"]]);ig.attributeNames=new Map([["definitionurl","definitionURL"],["attributename","attributeName"],["attributetype","attributeType"],["basefrequency","baseFrequency"],["baseprofile","baseProfile"],["calcmode","calcMode"],["clippathunits","clipPathUnits"],["diffuseconstant","diffuseConstant"],["edgemode","edgeMode"],["filterunits","filterUnits"],["glyphref","glyphRef"],["gradienttransform","gradientTransform"],["gradientunits","gradientUnits"],["kernelmatrix","kernelMatrix"],["kernelunitlength","kernelUnitLength"],["keypoints","keyPoints"],["keysplines","keySplines"],["keytimes","keyTimes"],["lengthadjust","lengthAdjust"],["limitingconeangle","limitingConeAngle"],["markerheight","markerHeight"],["markerunits","markerUnits"],["markerwidth","markerWidth"],["maskcontentunits","maskContentUnits"],["maskunits","maskUnits"],["numoctaves","numOctaves"],["pathlength","pathLength"],["patterncontentunits","patternContentUnits"],["patterntransform","patternTransform"],["patternunits","patternUnits"],["pointsatx","pointsAtX"],["pointsaty","pointsAtY"],["pointsatz","pointsAtZ"],["preservealpha","preserveAlpha"],["preserveaspectratio","preserveAspectRatio"],["primitiveunits","primitiveUnits"],["refx","refX"],["refy","refY"],["repeatcount","repeatCount"],["repeatdur","repeatDur"],["requiredextensions","requiredExtensions"],["requiredfeatures","requiredFeatures"],["specularconstant","specularConstant"],["specularexponent","specularExponent"],["spreadmethod","spreadMethod"],["startoffset","startOffset"],["stddeviation","stdDeviation"],["stitchtiles","stitchTiles"],["surfacescale","surfaceScale"],["systemlanguage","systemLanguage"],["tablevalues","tableValues"],["targetx","targetX"],["targety","targetY"],["textlength","textLength"],["viewbox","viewBox"],["viewtarget","viewTarget"],["xchannelselector","xChannelSelector"],["ychannelselector","yChannelSelector"],["zoomandpan","zoomAndPan"]]);var Rm=it&&it.__assign||function(){return Rm=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},Rm.apply(this,arguments)},K9e=it&&it.__createBinding||(Object.create?function(i,e,t,n){n===void 0&&(n=t),Object.defineProperty(i,n,{enumerable:!0,get:function(){return e[t]}})}:function(i,e,t,n){n===void 0&&(n=t),i[n]=e[t]}),Z9e=it&&it.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),J9e=it&&it.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&K9e(e,i,t);return Z9e(e,i),e};Object.defineProperty(HA,"__esModule",{value:!0});var Rh=J9e(E_),lI=Yz,cI=ig,Q9e=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function eze(i,e){if(i)return Object.keys(i).map(function(t){var n,r,s=(n=i[t])!==null&&n!==void 0?n:"";return e.xmlMode==="foreign"&&(t=(r=cI.attributeNames.get(t))!==null&&r!==void 0?r:t),!e.emptyAttrs&&!e.xmlMode&&s===""?t:t+'="'+(e.decodeEntities!==!1?lI.encodeXML(s):s.replace(/"/g,"&quot;"))+'"'}).join(" ")}var V8=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function WA(i,e){e===void 0&&(e={});for(var t=("length"in i)?i:[i],n="",r=0;r<t.length;r++)n+=tze(t[r],e);return n}HA.default=WA;function tze(i,e){switch(i.type){case Rh.Root:return WA(i.children,e);case Rh.Directive:case Rh.Doctype:return sze(i);case Rh.Comment:return lze(i);case Rh.CDATA:return aze(i);case Rh.Script:case Rh.Style:case Rh.Tag:return rze(i,e);case Rh.Text:return oze(i,e)}}var nze=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),ize=new Set(["svg","math"]);function rze(i,e){var t;e.xmlMode==="foreign"&&(i.name=(t=cI.elementNames.get(i.name))!==null&&t!==void 0?t:i.name,i.parent&&nze.has(i.parent.name)&&(e=Rm(Rm({},e),{xmlMode:!1}))),!e.xmlMode&&ize.has(i.name)&&(e=Rm(Rm({},e),{xmlMode:"foreign"}));var n="<"+i.name,r=eze(i.attribs,e);return r&&(n+=" "+r),i.children.length===0&&(e.xmlMode?e.selfClosingTags!==!1:e.selfClosingTags&&V8.has(i.name))?(e.xmlMode||(n+=" "),n+="/>"):(n+=">",i.children.length>0&&(n+=WA(i.children,e)),(e.xmlMode||!V8.has(i.name))&&(n+="</"+i.name+">")),n}function sze(i){return"<"+i.data+">"}function oze(i,e){var t=i.data||"";return e.decodeEntities!==!1&&!(!e.xmlMode&&i.parent&&Q9e.has(i.parent.name))&&(t=lI.encodeXML(t)),t}function aze(i){return"<![CDATA["+i.children[0].data+"]]>"}function lze(i){return"<!--"+i.data+"-->"}var cze=it&&it.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ol,"__esModule",{value:!0});Ol.innerText=Ol.textContent=Ol.getText=Ol.getInnerHTML=Ol.getOuterHTML=void 0;var Uu=h0,uze=cze(HA),hze=E_;function uI(i,e){return(0,uze.default)(i,e)}Ol.getOuterHTML=uI;function dze(i,e){return(0,Uu.hasChildren)(i)?i.children.map(function(t){return uI(t,e)}).join(""):""}Ol.getInnerHTML=dze;function ow(i){return Array.isArray(i)?i.map(ow).join(""):(0,Uu.isTag)(i)?i.name==="br"?`
`:ow(i.children):(0,Uu.isCDATA)(i)?ow(i.children):(0,Uu.isText)(i)?i.data:""}Ol.getText=ow;function RE(i){return Array.isArray(i)?i.map(RE).join(""):(0,Uu.hasChildren)(i)&&!(0,Uu.isComment)(i)?RE(i.children):(0,Uu.isText)(i)?i.data:""}Ol.textContent=RE;function OE(i){return Array.isArray(i)?i.map(OE).join(""):(0,Uu.hasChildren)(i)&&(i.type===hze.ElementType.Tag||(0,Uu.isCDATA)(i))?OE(i.children):(0,Uu.isText)(i)?i.data:""}Ol.innerText=OE;var To={};Object.defineProperty(To,"__esModule",{value:!0});To.prevElementSibling=To.nextElementSibling=To.getName=To.hasAttrib=To.getAttributeValue=To.getSiblings=To.getParent=To.getChildren=void 0;var hI=h0,fze=[];function dI(i){var e;return(e=i.children)!==null&&e!==void 0?e:fze}To.getChildren=dI;function fI(i){return i.parent||null}To.getParent=fI;function pze(i){var e,t,n=fI(i);if(n!=null)return dI(n);for(var r=[i],s=i.prev,o=i.next;s!=null;)r.unshift(s),e=s,s=e.prev;for(;o!=null;)r.push(o),t=o,o=t.next;return r}To.getSiblings=pze;function mze(i,e){var t;return(t=i.attribs)===null||t===void 0?void 0:t[e]}To.getAttributeValue=mze;function gze(i,e){return i.attribs!=null&&Object.prototype.hasOwnProperty.call(i.attribs,e)&&i.attribs[e]!=null}To.hasAttrib=gze;function vze(i){return i.name}To.getName=vze;function _ze(i){for(var e,t=i.next;t!==null&&!(0,hI.isTag)(t);)e=t,t=e.next;return t}To.nextElementSibling=_ze;function bze(i){for(var e,t=i.prev;t!==null&&!(0,hI.isTag)(t);)e=t,t=e.prev;return t}To.prevElementSibling=bze;var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.prepend=Wa.prependChild=Wa.append=Wa.appendChild=Wa.replaceElement=Wa.removeElement=void 0;function T_(i){if(i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),i.parent){var e=i.parent.children;e.splice(e.lastIndexOf(i),1)}}Wa.removeElement=T_;function yze(i,e){var t=e.prev=i.prev;t&&(t.next=e);var n=e.next=i.next;n&&(n.prev=e);var r=e.parent=i.parent;if(r){var s=r.children;s[s.lastIndexOf(i)]=e}}Wa.replaceElement=yze;function xze(i,e){if(T_(e),e.next=null,e.parent=i,i.children.push(e)>1){var t=i.children[i.children.length-2];t.next=e,e.prev=t}else e.prev=null}Wa.appendChild=xze;function wze(i,e){T_(e);var t=i.parent,n=i.next;if(e.next=n,e.prev=i,i.next=e,e.parent=t,n){if(n.prev=e,t){var r=t.children;r.splice(r.lastIndexOf(n),0,e)}}else t&&t.children.push(e)}Wa.append=wze;function Sze(i,e){if(T_(e),e.parent=i,e.prev=null,i.children.unshift(e)!==1){var t=i.children[1];t.prev=e,e.next=t}else e.next=null}Wa.prependChild=Sze;function Mze(i,e){T_(e);var t=i.parent;if(t){var n=t.children;n.splice(n.indexOf(i),0,e)}i.prev&&(i.prev.next=e),e.parent=t,e.prev=i.prev,e.next=i,i.prev=e}Wa.prepend=Mze;var ba={};Object.defineProperty(ba,"__esModule",{value:!0});ba.findAll=ba.existsOne=ba.findOne=ba.findOneChild=ba.find=ba.filter=void 0;var j1=h0;function Cze(i,e,t,n){return t===void 0&&(t=!0),n===void 0&&(n=1/0),Array.isArray(e)||(e=[e]),jA(i,e,t,n)}ba.filter=Cze;function jA(i,e,t,n){for(var r=[],s=0,o=e;s<o.length;s++){var a=o[s];if(i(a)&&(r.push(a),--n<=0))break;if(t&&(0,j1.hasChildren)(a)&&a.children.length>0){var l=jA(i,a.children,t,n);if(r.push.apply(r,l),n-=l.length,n<=0)break}}return r}ba.find=jA;function Eze(i,e){return e.find(i)}ba.findOneChild=Eze;function pI(i,e,t){t===void 0&&(t=!0);for(var n=null,r=0;r<e.length&&!n;r++){var s=e[r];if((0,j1.isTag)(s))i(s)?n=s:t&&s.children.length>0&&(n=pI(i,s.children));else continue}return n}ba.findOne=pI;function mI(i,e){return e.some(function(t){return(0,j1.isTag)(t)&&(i(t)||t.children.length>0&&mI(i,t.children))})}ba.existsOne=mI;function Tze(i,e){for(var t,n=[],r=e.filter(j1.isTag),s;s=r.shift();){var o=(t=s.children)===null||t===void 0?void 0:t.filter(j1.isTag);o&&o.length>0&&r.unshift.apply(r,o),i(s)&&n.push(s)}return n}ba.findAll=Tze;var Dl={};Object.defineProperty(Dl,"__esModule",{value:!0});Dl.getElementsByTagType=Dl.getElementsByTagName=Dl.getElementById=Dl.getElements=Dl.testElement=void 0;var Ap=h0,c4=ba,Pw={tag_name:function(i){return typeof i=="function"?function(e){return(0,Ap.isTag)(e)&&i(e.name)}:i==="*"?Ap.isTag:function(e){return(0,Ap.isTag)(e)&&e.name===i}},tag_type:function(i){return typeof i=="function"?function(e){return i(e.type)}:function(e){return e.type===i}},tag_contains:function(i){return typeof i=="function"?function(e){return(0,Ap.isText)(e)&&i(e.data)}:function(e){return(0,Ap.isText)(e)&&e.data===i}}};function gI(i,e){return typeof e=="function"?function(t){return(0,Ap.isTag)(t)&&e(t.attribs[i])}:function(t){return(0,Ap.isTag)(t)&&t.attribs[i]===e}}function Aze(i,e){return function(t){return i(t)||e(t)}}function vI(i){var e=Object.keys(i).map(function(t){var n=i[t];return Object.prototype.hasOwnProperty.call(Pw,t)?Pw[t](n):gI(t,n)});return e.length===0?null:e.reduce(Aze)}function Pze(i,e){var t=vI(i);return t?t(e):!0}Dl.testElement=Pze;function kze(i,e,t,n){n===void 0&&(n=1/0);var r=vI(i);return r?(0,c4.filter)(r,e,t,n):[]}Dl.getElements=kze;function Rze(i,e,t){return t===void 0&&(t=!0),Array.isArray(e)||(e=[e]),(0,c4.findOne)(gI("id",i),e,t)}Dl.getElementById=Rze;function Oze(i,e,t,n){return t===void 0&&(t=!0),n===void 0&&(n=1/0),(0,c4.filter)(Pw.tag_name(i),e,t,n)}Dl.getElementsByTagName=Oze;function Lze(i,e,t,n){return t===void 0&&(t=!0),n===void 0&&(n=1/0),(0,c4.filter)(Pw.tag_type(i),e,t,n)}Dl.getElementsByTagType=Lze;var nf={};Object.defineProperty(nf,"__esModule",{value:!0});nf.uniqueSort=nf.compareDocumentPosition=nf.removeSubsets=void 0;var H8=h0;function Dze(i){for(var e=i.length;--e>=0;){var t=i[e];if(e>0&&i.lastIndexOf(t,e-1)>=0){i.splice(e,1);continue}for(var n=t.parent;n;n=n.parent)if(i.includes(n)){i.splice(e,1);break}}return i}nf.removeSubsets=Dze;function _I(i,e){var t=[],n=[];if(i===e)return 0;for(var r=(0,H8.hasChildren)(i)?i:i.parent;r;)t.unshift(r),r=r.parent;for(r=(0,H8.hasChildren)(e)?e:e.parent;r;)n.unshift(r),r=r.parent;for(var s=Math.min(t.length,n.length),o=0;o<s&&t[o]===n[o];)o++;if(o===0)return 1;var a=t[o-1],l=a.children,c=t[o],u=n[o];return l.indexOf(c)>l.indexOf(u)?a===e?20:4:a===i?10:2}nf.compareDocumentPosition=_I;function zze(i){return i=i.filter(function(e,t,n){return!n.includes(e,t+1)}),i.sort(function(e,t){var n=_I(e,t);return n&2?-1:n&4?1:0}),i}nf.uniqueSort=zze;var u4={};Object.defineProperty(u4,"__esModule",{value:!0});u4.getFeed=void 0;var Ize=Ol,A_=Dl;function Nze(i){var e=kw(Hze,i);return e?e.name==="feed"?Uze(e):Fze(e):null}u4.getFeed=Nze;function Uze(i){var e,t=i.children,n={type:"atom",items:(0,A_.getElementsByTagName)("entry",t).map(function(o){var a,l=o.children,c={media:bI(l)};qa(c,"id","id",l),qa(c,"title","title",l);var u=(a=kw("link",l))===null||a===void 0?void 0:a.attribs.href;u&&(c.link=u);var h=Ip("summary",l)||Ip("content",l);h&&(c.description=h);var d=Ip("updated",l);return d&&(c.pubDate=new Date(d)),c})};qa(n,"id","id",t),qa(n,"title","title",t);var r=(e=kw("link",t))===null||e===void 0?void 0:e.attribs.href;r&&(n.link=r),qa(n,"description","subtitle",t);var s=Ip("updated",t);return s&&(n.updated=new Date(s)),qa(n,"author","email",t,!0),n}function Fze(i){var e,t,n=(t=(e=kw("channel",i.children))===null||e===void 0?void 0:e.children)!==null&&t!==void 0?t:[],r={type:i.name.substr(0,3),id:"",items:(0,A_.getElementsByTagName)("item",i.children).map(function(o){var a=o.children,l={media:bI(a)};qa(l,"id","guid",a),qa(l,"title","title",a),qa(l,"link","link",a),qa(l,"description","description",a);var c=Ip("pubDate",a);return c&&(l.pubDate=new Date(c)),l})};qa(r,"title","title",n),qa(r,"link","link",n),qa(r,"description","description",n);var s=Ip("lastBuildDate",n);return s&&(r.updated=new Date(s)),qa(r,"author","managingEditor",n,!0),r}var Bze=["url","type","lang"],Vze=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function bI(i){return(0,A_.getElementsByTagName)("media:content",i).map(function(e){for(var t=e.attribs,n={medium:t.medium,isDefault:!!t.isDefault},r=0,s=Bze;r<s.length;r++){var o=s[r];t[o]&&(n[o]=t[o])}for(var a=0,l=Vze;a<l.length;a++){var o=l[a];t[o]&&(n[o]=parseInt(t[o],10))}return t.expression&&(n.expression=t.expression),n})}function kw(i,e){return(0,A_.getElementsByTagName)(i,e,!0,1)[0]}function Ip(i,e,t){return t===void 0&&(t=!1),(0,Ize.textContent)((0,A_.getElementsByTagName)(i,e,t,1)).trim()}function qa(i,e,t,n,r){r===void 0&&(r=!1);var s=Ip(t,n,r);s&&(i[e]=s)}function Hze(i){return i==="rss"||i==="feed"||i==="rdf:RDF"}(function(i){var e=it&&it.__createBinding||(Object.create?function(r,s,o,a){a===void 0&&(a=o),Object.defineProperty(r,a,{enumerable:!0,get:function(){return s[o]}})}:function(r,s,o,a){a===void 0&&(a=o),r[a]=s[o]}),t=it&&it.__exportStar||function(r,s){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,r,o)};Object.defineProperty(i,"__esModule",{value:!0}),i.hasChildren=i.isDocument=i.isComment=i.isText=i.isCDATA=i.isTag=void 0,t(Ol,i),t(To,i),t(Wa,i),t(ba,i),t(Dl,i),t(nf,i),t(u4,i);var n=h0;Object.defineProperty(i,"isTag",{enumerable:!0,get:function(){return n.isTag}}),Object.defineProperty(i,"isCDATA",{enumerable:!0,get:function(){return n.isCDATA}}),Object.defineProperty(i,"isText",{enumerable:!0,get:function(){return n.isText}}),Object.defineProperty(i,"isComment",{enumerable:!0,get:function(){return n.isComment}}),Object.defineProperty(i,"isDocument",{enumerable:!0,get:function(){return n.isDocument}}),Object.defineProperty(i,"hasChildren",{enumerable:!0,get:function(){return n.hasChildren}})})(Nz);var f0={trueFunc:function(){return!0},falseFunc:function(){return!1}},rf={},Ri;(function(i){i.Attribute="attribute",i.Pseudo="pseudo",i.PseudoElement="pseudo-element",i.Tag="tag",i.Universal="universal",i.Adjacent="adjacent",i.Child="child",i.Descendant="descendant",i.Parent="parent",i.Sibling="sibling",i.ColumnCombinator="column-combinator"})(Ri||(Ri={}));const qze={Unknown:null,QuirksMode:"quirks",IgnoreCase:!0,CaseSensitive:!1};var Vr;(function(i){i.Any="any",i.Element="element",i.End="end",i.Equals="equals",i.Exists="exists",i.Hyphen="hyphen",i.Not="not",i.Start="start"})(Vr||(Vr={}));const q8=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,Gze=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,Wze=new Map([[126,Vr.Element],[94,Vr.Start],[36,Vr.End],[42,Vr.Any],[33,Vr.Not],[124,Vr.Hyphen]]),jze=new Set(["has","not","matches","is","where","host","host-context"]);function yI(i){switch(i.type){case Ri.Adjacent:case Ri.Child:case Ri.Descendant:case Ri.Parent:case Ri.Sibling:case Ri.ColumnCombinator:return!0;default:return!1}}const $ze=new Set(["contains","icontains"]);function Xze(i,e,t){const n=parseInt(e,16)-65536;return n!==n||t?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)}function Dv(i){return i.replace(Gze,Xze)}function xM(i){return i===39||i===34}function G8(i){return i===32||i===9||i===10||i===12||i===13}function Yze(i){const e=[],t=xI(e,`${i}`,0);if(t<i.length)throw new Error(`Unmatched selector: ${i.slice(t)}`);return e}function xI(i,e,t){let n=[];function r(d){const f=e.slice(t+d).match(q8);if(!f)throw new Error(`Expected name, found ${e.slice(t)}`);const[g]=f;return t+=d+g.length,Dv(g)}function s(d){for(t+=d;t<e.length&&G8(e.charCodeAt(t));)t++}function o(){t+=1;const d=t;let f=1;for(;f>0&&t<e.length;t++)e.charCodeAt(t)===40&&!a(t)?f++:e.charCodeAt(t)===41&&!a(t)&&f--;if(f)throw new Error("Parenthesis not matched");return Dv(e.slice(d,t-1))}function a(d){let f=0;for(;e.charCodeAt(--d)===92;)f++;return(f&1)===1}function l(){if(n.length>0&&yI(n[n.length-1]))throw new Error("Did not expect successive traversals.")}function c(d){if(n.length>0&&n[n.length-1].type===Ri.Descendant){n[n.length-1].type=d;return}l(),n.push({type:d})}function u(d,f){n.push({type:Ri.Attribute,name:d,action:f,value:r(1),namespace:null,ignoreCase:"quirks"})}function h(){if(n.length&&n[n.length-1].type===Ri.Descendant&&n.pop(),n.length===0)throw new Error("Empty sub-selector");i.push(n)}if(s(0),e.length===t)return t;e:for(;t<e.length;){const d=e.charCodeAt(t);switch(d){case 32:case 9:case 10:case 12:case 13:{(n.length===0||n[0].type!==Ri.Descendant)&&(l(),n.push({type:Ri.Descendant})),s(1);break}case 62:{c(Ri.Child),s(1);break}case 60:{c(Ri.Parent),s(1);break}case 126:{c(Ri.Sibling),s(1);break}case 43:{c(Ri.Adjacent),s(1);break}case 46:{u("class",Vr.Element);break}case 35:{u("id",Vr.Equals);break}case 91:{s(1);let f,g=null;e.charCodeAt(t)===124?f=r(1):e.startsWith("*|",t)?(g="*",f=r(2)):(f=r(0),e.charCodeAt(t)===124&&e.charCodeAt(t+1)!==61&&(g=f,f=r(1))),s(0);let v=Vr.Exists;const y=Wze.get(e.charCodeAt(t));if(y){if(v=y,e.charCodeAt(t+1)!==61)throw new Error("Expected `=`");s(2)}else e.charCodeAt(t)===61&&(v=Vr.Equals,s(1));let _="",S=null;if(v!=="exists"){if(xM(e.charCodeAt(t))){const E=e.charCodeAt(t);let k=t+1;for(;k<e.length&&(e.charCodeAt(k)!==E||a(k));)k+=1;if(e.charCodeAt(k)!==E)throw new Error("Attribute value didn't end");_=Dv(e.slice(t+1,k)),t=k+1}else{const E=t;for(;t<e.length&&(!G8(e.charCodeAt(t))&&e.charCodeAt(t)!==93||a(t));)t+=1;_=Dv(e.slice(E,t))}s(0);const C=e.charCodeAt(t)|32;C===115?(S=!1,s(1)):C===105&&(S=!0,s(1))}if(e.charCodeAt(t)!==93)throw new Error("Attribute selector didn't terminate");t+=1;const w={type:Ri.Attribute,name:f,action:v,value:_,namespace:g,ignoreCase:S};n.push(w);break}case 58:{if(e.charCodeAt(t+1)===58){n.push({type:Ri.PseudoElement,name:r(2).toLowerCase(),data:e.charCodeAt(t)===40?o():null});continue}const f=r(1).toLowerCase();let g=null;if(e.charCodeAt(t)===40)if(jze.has(f)){if(xM(e.charCodeAt(t+1)))throw new Error(`Pseudo-selector ${f} cannot be quoted`);if(g=[],t=xI(g,e,t+1),e.charCodeAt(t)!==41)throw new Error(`Missing closing parenthesis in :${f} (${e})`);t+=1}else{if(g=o(),$ze.has(f)){const v=g.charCodeAt(0);v===g.charCodeAt(g.length-1)&&xM(v)&&(g=g.slice(1,-1))}g=Dv(g)}n.push({type:Ri.Pseudo,name:f,data:g});break}case 44:{h(),n=[],s(1);break}default:{if(e.startsWith("/*",t)){const v=e.indexOf("*/",t+2);if(v<0)throw new Error("Comment was not terminated");t=v+2,n.length===0&&s(0);break}let f=null,g;if(d===42)t+=1,g="*";else if(d===124){if(g="",e.charCodeAt(t+1)===124){c(Ri.ColumnCombinator),s(2);break}}else if(q8.test(e.slice(t)))g=r(0);else break e;e.charCodeAt(t)===124&&e.charCodeAt(t+1)!==124&&(f=g,e.charCodeAt(t+1)===42?(g="*",t+=2):g=r(1)),n.push(g==="*"?{type:Ri.Universal,namespace:f}:{type:Ri.Tag,name:g,namespace:f})}}}return h(),t}const wI=["\\",'"'],SI=[...wI,"(",")"],Kze=new Set(wI.map(i=>i.charCodeAt(0))),W8=new Set(SI.map(i=>i.charCodeAt(0))),Om=new Set([...SI,"~","^","$","*","+","!","|",":","[","]"," ","."].map(i=>i.charCodeAt(0)));function MI(i){return i.map(e=>e.map(Zze).join("")).join(", ")}function Zze(i,e,t){switch(i.type){case Ri.Child:return e===0?"> ":" > ";case Ri.Parent:return e===0?"< ":" < ";case Ri.Sibling:return e===0?"~ ":" ~ ";case Ri.Adjacent:return e===0?"+ ":" + ";case Ri.Descendant:return" ";case Ri.ColumnCombinator:return e===0?"|| ":" || ";case Ri.Universal:return i.namespace==="*"&&e+1<t.length&&"name"in t[e+1]?"":`${CI(i.namespace)}*`;case Ri.Tag:return j8(i);case Ri.PseudoElement:return`::${Uh(i.name,Om)}${i.data===null?"":`(${Uh(i.data,W8)})`}`;case Ri.Pseudo:return`:${Uh(i.name,Om)}${i.data===null?"":`(${typeof i.data=="string"?Uh(i.data,W8):MI(i.data)})`}`;case Ri.Attribute:{if(i.name==="id"&&i.action===Vr.Equals&&i.ignoreCase==="quirks"&&!i.namespace)return`#${Uh(i.value,Om)}`;if(i.name==="class"&&i.action===Vr.Element&&i.ignoreCase==="quirks"&&!i.namespace)return`.${Uh(i.value,Om)}`;const n=j8(i);return i.action===Vr.Exists?`[${n}]`:`[${n}${Jze(i.action)}="${Uh(i.value,Kze)}"${i.ignoreCase===null?"":i.ignoreCase?" i":" s"}]`}}}function Jze(i){switch(i){case Vr.Equals:return"";case Vr.Element:return"~";case Vr.Start:return"^";case Vr.End:return"$";case Vr.Any:return"*";case Vr.Not:return"!";case Vr.Hyphen:return"|";case Vr.Exists:throw new Error("Shouldn't be here")}}function j8(i){return`${CI(i.namespace)}${Uh(i.name,Om)}`}function CI(i){return i!==null?`${i==="*"?"*":Uh(i,Om)}|`:""}function Uh(i,e){let t=0,n="";for(let r=0;r<i.length;r++)e.has(i.charCodeAt(r))&&(n+=`${i.slice(t,r)}\\${i.charAt(r)}`,t=r+1);return n.length>0?n+i.slice(t):i}const Qze=Object.freeze(Object.defineProperty({__proto__:null,get AttributeAction(){return Vr},IgnoreCaseMode:qze,get SelectorType(){return Ri},isTraversal:yI,parse:Yze,stringify:MI},Symbol.toStringTag,{value:"Module"})),h4=O$(Qze);var $A={},d4={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.isTraversal=i.procedure=void 0,i.procedure={universal:50,tag:30,attribute:1,pseudo:0,"pseudo-element":0,"column-combinator":-1,descendant:-1,child:-1,parent:-1,sibling:-1,adjacent:-1,_flexibleDescendant:-1};function e(t){return i.procedure[t.type]<0}i.isTraversal=e})(d4);Object.defineProperty($A,"__esModule",{value:!0});var $8=h4,eIe=d4,X8={exists:10,equals:8,not:7,start:6,end:6,any:5,hyphen:4,element:4};function tIe(i){for(var e=i.map(EI),t=1;t<i.length;t++){var n=e[t];if(!(n<0))for(var r=t-1;r>=0&&n<e[r];r--){var s=i[r+1];i[r+1]=i[r],i[r]=s,e[r+1]=e[r],e[r]=n}}}$A.default=tIe;function EI(i){var e=eIe.procedure[i.type];if(i.type===$8.SelectorType.Attribute)e=X8[i.action],e===X8.equals&&i.name==="id"&&(e=9),i.ignoreCase&&(e>>=1);else if(i.type===$8.SelectorType.Pseudo)if(!i.data)e=3;else if(i.name==="has"||i.name==="contains")e=0;else if(Array.isArray(i.data)){e=0;for(var t=0;t<i.data.length;t++)if(i.data[t].length===1){var n=EI(i.data[t][0]);if(n===0){e=0;break}n>e&&(e=n)}i.data.length>1&&e>0&&(e-=1)}else e=1;return e}var f4={},p4={};Object.defineProperty(p4,"__esModule",{value:!0});p4.attributeRules=void 0;var sx=f0,nIe=/[-[\]{}()*+?.,\\^$|#\s]/g;function Y8(i){return i.replace(nIe,"\\$&")}var iIe=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function fp(i,e){return typeof i.ignoreCase=="boolean"?i.ignoreCase:i.ignoreCase==="quirks"?!!e.quirksMode:!e.xmlMode&&iIe.has(i.name)}p4.attributeRules={equals:function(i,e,t){var n=t.adapter,r=e.name,s=e.value;return fp(e,t)?(s=s.toLowerCase(),function(o){var a=n.getAttributeValue(o,r);return a!=null&&a.length===s.length&&a.toLowerCase()===s&&i(o)}):function(o){return n.getAttributeValue(o,r)===s&&i(o)}},hyphen:function(i,e,t){var n=t.adapter,r=e.name,s=e.value,o=s.length;return fp(e,t)?(s=s.toLowerCase(),function(l){var c=n.getAttributeValue(l,r);return c!=null&&(c.length===o||c.charAt(o)==="-")&&c.substr(0,o).toLowerCase()===s&&i(l)}):function(l){var c=n.getAttributeValue(l,r);return c!=null&&(c.length===o||c.charAt(o)==="-")&&c.substr(0,o)===s&&i(l)}},element:function(i,e,t){var n=t.adapter,r=e.name,s=e.value;if(/\s/.test(s))return sx.falseFunc;var o=new RegExp("(?:^|\\s)".concat(Y8(s),"(?:$|\\s)"),fp(e,t)?"i":"");return function(l){var c=n.getAttributeValue(l,r);return c!=null&&c.length>=s.length&&o.test(c)&&i(l)}},exists:function(i,e,t){var n=e.name,r=t.adapter;return function(s){return r.hasAttrib(s,n)&&i(s)}},start:function(i,e,t){var n=t.adapter,r=e.name,s=e.value,o=s.length;return o===0?sx.falseFunc:fp(e,t)?(s=s.toLowerCase(),function(a){var l=n.getAttributeValue(a,r);return l!=null&&l.length>=o&&l.substr(0,o).toLowerCase()===s&&i(a)}):function(a){var l;return!!(!((l=n.getAttributeValue(a,r))===null||l===void 0)&&l.startsWith(s))&&i(a)}},end:function(i,e,t){var n=t.adapter,r=e.name,s=e.value,o=-s.length;return o===0?sx.falseFunc:fp(e,t)?(s=s.toLowerCase(),function(a){var l;return((l=n.getAttributeValue(a,r))===null||l===void 0?void 0:l.substr(o).toLowerCase())===s&&i(a)}):function(a){var l;return!!(!((l=n.getAttributeValue(a,r))===null||l===void 0)&&l.endsWith(s))&&i(a)}},any:function(i,e,t){var n=t.adapter,r=e.name,s=e.value;if(s==="")return sx.falseFunc;if(fp(e,t)){var o=new RegExp(Y8(s),"i");return function(l){var c=n.getAttributeValue(l,r);return c!=null&&c.length>=s.length&&o.test(c)&&i(l)}}return function(a){var l;return!!(!((l=n.getAttributeValue(a,r))===null||l===void 0)&&l.includes(s))&&i(a)}},not:function(i,e,t){var n=t.adapter,r=e.name,s=e.value;return s===""?function(o){return!!n.getAttributeValue(o,r)&&i(o)}:fp(e,t)?(s=s.toLowerCase(),function(o){var a=n.getAttributeValue(o,r);return(a==null||a.length!==s.length||a.toLowerCase()!==s)&&i(o)}):function(o){return n.getAttributeValue(o,r)!==s&&i(o)}}};var XA={},TI={},AI={},m4={};Object.defineProperty(m4,"__esModule",{value:!0});m4.parse=void 0;var rIe=new Set([9,10,12,13,32]),K8="0".charCodeAt(0),sIe="9".charCodeAt(0);function oIe(i){if(i=i.trim().toLowerCase(),i==="even")return[2,0];if(i==="odd")return[2,1];var e=0,t=0,n=s(),r=o();if(e<i.length&&i.charAt(e)==="n"&&(e++,t=n*(r??1),a(),e<i.length?(n=s(),a(),r=o()):n=r=0),r===null||e<i.length)throw new Error("n-th rule couldn't be parsed ('".concat(i,"')"));return[t,n*r];function s(){return i.charAt(e)==="-"?(e++,-1):(i.charAt(e)==="+"&&e++,1)}function o(){for(var l=e,c=0;e<i.length&&i.charCodeAt(e)>=K8&&i.charCodeAt(e)<=sIe;)c=c*10+(i.charCodeAt(e)-K8),e++;return e===l?null:c}function a(){for(;e<i.length&&rIe.has(i.charCodeAt(e));)e++}}m4.parse=oIe;var rg={},aIe=it&&it.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(rg,"__esModule",{value:!0});rg.generate=rg.compile=void 0;var Z8=aIe(f0);function lIe(i){var e=i[0],t=i[1]-1;if(t<0&&e<=0)return Z8.default.falseFunc;if(e===-1)return function(s){return s<=t};if(e===0)return function(s){return s===t};if(e===1)return t<0?Z8.default.trueFunc:function(s){return s>=t};var n=Math.abs(e),r=(t%n+n)%n;return e>1?function(s){return s>=t&&s%n===r}:function(s){return s<=t&&s%n===r}}rg.compile=lIe;function cIe(i){var e=i[0],t=i[1]-1,n=0;if(e<0){var r=-e,s=(t%r+r)%r;return function(){var o=s+r*n++;return o>t?null:o}}return e===0?t<0?function(){return null}:function(){return n++===0?t:null}:(t<0&&(t+=e*Math.ceil(-t/e)),function(){return e*n+++t})}rg.generate=cIe;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.sequence=i.generate=i.compile=i.parse=void 0;var e=m4;Object.defineProperty(i,"parse",{enumerable:!0,get:function(){return e.parse}});var t=rg;Object.defineProperty(i,"compile",{enumerable:!0,get:function(){return t.compile}}),Object.defineProperty(i,"generate",{enumerable:!0,get:function(){return t.generate}});function n(s){return(0,t.compile)((0,e.parse)(s))}i.default=n;function r(s){return(0,t.generate)((0,e.parse)(s))}i.sequence=r})(AI);(function(i){var e=it&&it.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(i,"__esModule",{value:!0}),i.filters=void 0;var t=e(AI),n=f0;function r(o,a){return function(l){var c=a.getParent(l);return c!=null&&a.isTag(c)&&o(l)}}i.filters={contains:function(o,a,l){var c=l.adapter;return function(h){return o(h)&&c.getText(h).includes(a)}},icontains:function(o,a,l){var c=l.adapter,u=a.toLowerCase();return function(d){return o(d)&&c.getText(d).toLowerCase().includes(u)}},"nth-child":function(o,a,l){var c=l.adapter,u=l.equals,h=(0,t.default)(a);return h===n.falseFunc?n.falseFunc:h===n.trueFunc?r(o,c):function(f){for(var g=c.getSiblings(f),v=0,y=0;y<g.length&&!u(f,g[y]);y++)c.isTag(g[y])&&v++;return h(v)&&o(f)}},"nth-last-child":function(o,a,l){var c=l.adapter,u=l.equals,h=(0,t.default)(a);return h===n.falseFunc?n.falseFunc:h===n.trueFunc?r(o,c):function(f){for(var g=c.getSiblings(f),v=0,y=g.length-1;y>=0&&!u(f,g[y]);y--)c.isTag(g[y])&&v++;return h(v)&&o(f)}},"nth-of-type":function(o,a,l){var c=l.adapter,u=l.equals,h=(0,t.default)(a);return h===n.falseFunc?n.falseFunc:h===n.trueFunc?r(o,c):function(f){for(var g=c.getSiblings(f),v=0,y=0;y<g.length;y++){var _=g[y];if(u(f,_))break;c.isTag(_)&&c.getName(_)===c.getName(f)&&v++}return h(v)&&o(f)}},"nth-last-of-type":function(o,a,l){var c=l.adapter,u=l.equals,h=(0,t.default)(a);return h===n.falseFunc?n.falseFunc:h===n.trueFunc?r(o,c):function(f){for(var g=c.getSiblings(f),v=0,y=g.length-1;y>=0;y--){var _=g[y];if(u(f,_))break;c.isTag(_)&&c.getName(_)===c.getName(f)&&v++}return h(v)&&o(f)}},root:function(o,a,l){var c=l.adapter;return function(u){var h=c.getParent(u);return(h==null||!c.isTag(h))&&o(u)}},scope:function(o,a,l,c){var u=l.equals;return!c||c.length===0?i.filters.root(o,a,l):c.length===1?function(h){return u(c[0],h)&&o(h)}:function(h){return c.includes(h)&&o(h)}},hover:s("isHovered"),visited:s("isVisited"),active:s("isActive")};function s(o){return function(l,c,u){var h=u.adapter,d=h[o];return typeof d!="function"?n.falseFunc:function(g){return d(g)&&l(g)}}}})(TI);var sg={};Object.defineProperty(sg,"__esModule",{value:!0});sg.verifyPseudoArgs=sg.pseudos=void 0;sg.pseudos={empty:function(i,e){var t=e.adapter;return!t.getChildren(i).some(function(n){return t.isTag(n)||t.getText(n)!==""})},"first-child":function(i,e){var t=e.adapter,n=e.equals,r=t.getSiblings(i).find(function(s){return t.isTag(s)});return r!=null&&n(i,r)},"last-child":function(i,e){for(var t=e.adapter,n=e.equals,r=t.getSiblings(i),s=r.length-1;s>=0;s--){if(n(i,r[s]))return!0;if(t.isTag(r[s]))break}return!1},"first-of-type":function(i,e){for(var t=e.adapter,n=e.equals,r=t.getSiblings(i),s=t.getName(i),o=0;o<r.length;o++){var a=r[o];if(n(i,a))return!0;if(t.isTag(a)&&t.getName(a)===s)break}return!1},"last-of-type":function(i,e){for(var t=e.adapter,n=e.equals,r=t.getSiblings(i),s=t.getName(i),o=r.length-1;o>=0;o--){var a=r[o];if(n(i,a))return!0;if(t.isTag(a)&&t.getName(a)===s)break}return!1},"only-of-type":function(i,e){var t=e.adapter,n=e.equals,r=t.getName(i);return t.getSiblings(i).every(function(s){return n(i,s)||!t.isTag(s)||t.getName(s)!==r})},"only-child":function(i,e){var t=e.adapter,n=e.equals;return t.getSiblings(i).every(function(r){return n(i,r)||!t.isTag(r)})}};function uIe(i,e,t){if(t===null){if(i.length>2)throw new Error("pseudo-selector :".concat(e," requires an argument"))}else if(i.length===2)throw new Error("pseudo-selector :".concat(e," doesn't have any arguments"))}sg.verifyPseudoArgs=uIe;var g4={};Object.defineProperty(g4,"__esModule",{value:!0});g4.aliases=void 0;g4.aliases={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"};var v4={};(function(i){var e=it&&it.__spreadArray||function(a,l,c){if(c||arguments.length===2)for(var u=0,h=l.length,d;u<h;u++)(d||!(u in l))&&(d||(d=Array.prototype.slice.call(l,0,u)),d[u]=l[u]);return a.concat(d||Array.prototype.slice.call(l))};Object.defineProperty(i,"__esModule",{value:!0}),i.subselects=i.getNextSiblings=i.ensureIsTag=i.PLACEHOLDER_ELEMENT=void 0;var t=f0,n=d4;i.PLACEHOLDER_ELEMENT={};function r(a,l){return a===t.falseFunc?t.falseFunc:function(c){return l.isTag(c)&&a(c)}}i.ensureIsTag=r;function s(a,l){var c=l.getSiblings(a);if(c.length<=1)return[];var u=c.indexOf(a);return u<0||u===c.length-1?[]:c.slice(u+1).filter(l.isTag)}i.getNextSiblings=s;var o=function(a,l,c,u,h){var d={xmlMode:!!c.xmlMode,adapter:c.adapter,equals:c.equals},f=h(l,d,u);return function(g){return f(g)&&a(g)}};i.subselects={is:o,matches:o,where:o,not:function(a,l,c,u,h){var d={xmlMode:!!c.xmlMode,adapter:c.adapter,equals:c.equals},f=h(l,d,u);return f===t.falseFunc?a:f===t.trueFunc?t.falseFunc:function(v){return!f(v)&&a(v)}},has:function(a,l,c,u,h){var d=c.adapter,f={xmlMode:!!c.xmlMode,adapter:d,equals:c.equals},g=l.some(function(w){return w.some(n.isTraversal)})?[i.PLACEHOLDER_ELEMENT]:void 0,v=h(l,f,g);if(v===t.falseFunc)return t.falseFunc;if(v===t.trueFunc)return function(w){return d.getChildren(w).some(d.isTag)&&a(w)};var y=r(v,d),_=v.shouldTestNextSiblings,S=_===void 0?!1:_;return g?function(w){g[0]=w;var C=d.getChildren(w),E=S?e(e([],C,!0),s(w,d),!0):C;return a(w)&&d.existsOne(y,E)}:function(w){return a(w)&&d.existsOne(y,d.getChildren(w))}}}})(v4);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.compilePseudoSelector=i.aliases=i.pseudos=i.filters=void 0;var e=f0,t=h4,n=TI;Object.defineProperty(i,"filters",{enumerable:!0,get:function(){return n.filters}});var r=sg;Object.defineProperty(i,"pseudos",{enumerable:!0,get:function(){return r.pseudos}});var s=g4;Object.defineProperty(i,"aliases",{enumerable:!0,get:function(){return s.aliases}});var o=v4;function a(l,c,u,h,d){var f=c.name,g=c.data;if(Array.isArray(g))return o.subselects[f](l,g,u,h,d);if(f in s.aliases){if(g!=null)throw new Error("Pseudo ".concat(f," doesn't have any arguments"));var v=(0,t.parse)(s.aliases[f]);return o.subselects.is(l,v,u,h,d)}if(f in n.filters)return n.filters[f](l,g,u,h);if(f in r.pseudos){var y=r.pseudos[f];return(0,r.verifyPseudoArgs)(y,f,g),y===e.falseFunc?e.falseFunc:l===e.trueFunc?function(_){return y(_,u,g)}:function(_){return y(_,u,g)&&l(_)}}throw new Error("unmatched pseudo-class :".concat(f))}i.compilePseudoSelector=a})(XA);Object.defineProperty(f4,"__esModule",{value:!0});f4.compileGeneralSelector=void 0;var hIe=p4,dIe=XA,Bc=h4;function fIe(i,e,t,n,r){var s=t.adapter,o=t.equals;switch(e.type){case Bc.SelectorType.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case Bc.SelectorType.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case Bc.SelectorType.Attribute:{if(e.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!t.xmlMode||t.lowerCaseAttributeNames)&&(e.name=e.name.toLowerCase()),hIe.attributeRules[e.action](i,e,t)}case Bc.SelectorType.Pseudo:return(0,dIe.compilePseudoSelector)(i,e,t,n,r);case Bc.SelectorType.Tag:{if(e.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");var a=e.name;return(!t.xmlMode||t.lowerCaseTags)&&(a=a.toLowerCase()),function(u){return s.getName(u)===a&&i(u)}}case Bc.SelectorType.Descendant:{if(t.cacheResults===!1||typeof WeakSet>"u")return function(u){for(var h=u;h=s.getParent(h);)if(s.isTag(h)&&i(h))return!0;return!1};var l=new WeakSet;return function(u){for(var h=u;h=s.getParent(h);)if(!l.has(h)){if(s.isTag(h)&&i(h))return!0;l.add(h)}return!1}}case"_flexibleDescendant":return function(u){var h=u;do if(s.isTag(h)&&i(h))return!0;while(h=s.getParent(h));return!1};case Bc.SelectorType.Parent:return function(u){return s.getChildren(u).some(function(h){return s.isTag(h)&&i(h)})};case Bc.SelectorType.Child:return function(u){var h=s.getParent(u);return h!=null&&s.isTag(h)&&i(h)};case Bc.SelectorType.Sibling:return function(u){for(var h=s.getSiblings(u),d=0;d<h.length;d++){var f=h[d];if(o(u,f))break;if(s.isTag(f)&&i(f))return!0}return!1};case Bc.SelectorType.Adjacent:return s.prevElementSibling?function(u){var h=s.prevElementSibling(u);return h!=null&&i(h)}:function(u){for(var h=s.getSiblings(u),d,f=0;f<h.length;f++){var g=h[f];if(o(u,g))break;s.isTag(g)&&(d=g)}return!!d&&i(d)};case Bc.SelectorType.Universal:{if(e.namespace!=null&&e.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return i}}}f4.compileGeneralSelector=fIe;var pIe=it&&it.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(rf,"__esModule",{value:!0});rf.compileToken=rf.compileUnsafe=rf.compile=void 0;var YA=h4,jd=f0,mIe=pIe($A),gIe=d4,vIe=f4,PI=v4;function _Ie(i,e,t){var n=kI(i,e,t);return(0,PI.ensureIsTag)(n,e.adapter)}rf.compile=_Ie;function kI(i,e,t){var n=typeof i=="string"?(0,YA.parse)(i):i;return KA(n,e,t)}rf.compileUnsafe=kI;function RI(i){return i.type==="pseudo"&&(i.name==="scope"||Array.isArray(i.data)&&i.data.some(function(e){return e.some(RI)}))}var bIe={type:YA.SelectorType.Descendant},yIe={type:"_flexibleDescendant"},xIe={type:YA.SelectorType.Pseudo,name:"scope",data:null};function wIe(i,e,t){for(var n=e.adapter,r=!!(t!=null&&t.every(function(l){var c=n.isTag(l)&&n.getParent(l);return l===PI.PLACEHOLDER_ELEMENT||c&&n.isTag(c)})),s=0,o=i;s<o.length;s++){var a=o[s];if(!(a.length>0&&(0,gIe.isTraversal)(a[0])&&a[0].type!=="descendant"))if(r&&!a.some(RI))a.unshift(bIe);else continue;a.unshift(xIe)}}function KA(i,e,t){var n;i=i.filter(function(l){return l.length>0}),i.forEach(mIe.default),t=(n=e.context)!==null&&n!==void 0?n:t;var r=Array.isArray(t),s=t&&(Array.isArray(t)?t:[t]);wIe(i,e,s);var o=!1,a=i.map(function(l){if(l.length>=2){var c=l[0],u=l[1];c.type!=="pseudo"||c.name!=="scope"||(r&&u.type==="descendant"?l[1]=yIe:(u.type==="adjacent"||u.type==="sibling")&&(o=!0))}return SIe(l,e,s)}).reduce(MIe,jd.falseFunc);return a.shouldTestNextSiblings=o,a}rf.compileToken=KA;function SIe(i,e,t){var n;return i.reduce(function(r,s){return r===jd.falseFunc?jd.falseFunc:(0,vIe.compileGeneralSelector)(r,s,e,t,KA)},(n=e.rootFunc)!==null&&n!==void 0?n:jd.trueFunc)}function MIe(i,e){return e===jd.falseFunc||i===jd.trueFunc?i:i===jd.falseFunc||e===jd.trueFunc?e:function(n){return i(n)||e(n)}}(function(i){var e=it&&it.__createBinding||(Object.create?function(_,S,w,C){C===void 0&&(C=w);var E=Object.getOwnPropertyDescriptor(S,w);(!E||("get"in E?!S.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return S[w]}}),Object.defineProperty(_,C,E)}:function(_,S,w,C){C===void 0&&(C=w),_[C]=S[w]}),t=it&&it.__setModuleDefault||(Object.create?function(_,S){Object.defineProperty(_,"default",{enumerable:!0,value:S})}:function(_,S){_.default=S}),n=it&&it.__importStar||function(_){if(_&&_.__esModule)return _;var S={};if(_!=null)for(var w in _)w!=="default"&&Object.prototype.hasOwnProperty.call(_,w)&&e(S,_,w);return t(S,_),S};Object.defineProperty(i,"__esModule",{value:!0}),i.aliases=i.pseudos=i.filters=i.is=i.selectOne=i.selectAll=i.prepareContext=i._compileToken=i._compileUnsafe=i.compile=void 0;var r=n(Nz),s=f0,o=rf,a=v4,l=function(_,S){return _===S},c={adapter:r,equals:l};function u(_){var S,w,C,E,k=_??c;return(S=k.adapter)!==null&&S!==void 0||(k.adapter=r),(w=k.equals)!==null&&w!==void 0||(k.equals=(E=(C=k.adapter)===null||C===void 0?void 0:C.equals)!==null&&E!==void 0?E:l),k}function h(_){return function(w,C,E){var k=u(C);return _(w,k,E)}}i.compile=h(o.compile),i._compileUnsafe=h(o.compileUnsafe),i._compileToken=h(o.compileToken);function d(_){return function(w,C,E){var k=u(E);typeof w!="function"&&(w=(0,o.compileUnsafe)(w,k,C));var O=f(C,k.adapter,w.shouldTestNextSiblings);return _(w,O,k)}}function f(_,S,w){return w===void 0&&(w=!1),w&&(_=g(_,S)),Array.isArray(_)?S.removeSubsets(_):S.getChildren(_)}i.prepareContext=f;function g(_,S){for(var w=Array.isArray(_)?_.slice(0):[_],C=w.length,E=0;E<C;E++){var k=(0,a.getNextSiblings)(w[E],S);w.push.apply(w,k)}return w}i.selectAll=d(function(_,S,w){return _===s.falseFunc||!S||S.length===0?[]:w.adapter.findAll(_,S)}),i.selectOne=d(function(_,S,w){return _===s.falseFunc||!S||S.length===0?null:w.adapter.findOne(_,S)});function v(_,S,w){var C=u(w);return(typeof S=="function"?S:(0,o.compile)(S,C))(_)}i.is=v,i.default=i.selectAll;var y=XA;Object.defineProperty(i,"filters",{enumerable:!0,get:function(){return y.filters}}),Object.defineProperty(i,"pseudos",{enumerable:!0,get:function(){return y.pseudos}}),Object.defineProperty(i,"aliases",{enumerable:!0,get:function(){return y.aliases}})})(Aw);function CIe(i){return!0}function zv(i){return i.children||[]}function J8(i){return i.parent}function EIe(i){const e=new Set(i);return e.forEach(t=>{let n=t.parent;for(;n;){if(e.has(n)){e.delete(t);return}n=n.parent}}),Array.from(e)}const og={isTag:CIe,existsOne(i,e){return e.some(t=>i(t)||og.existsOne(i,zv(t)))},getSiblings(i){const e=J8(i);return e?zv(e):[i]},getChildren:zv,getParent:J8,getAttributeValue(i,e){return e==="class"?i.props.classes.join(" "):e==="id"?i.id:""},hasAttrib(i,e){return e==="id"?!!i.id:e==="class"?i.props.classes.length>0:i.traits.hash?Object.prototype.hasOwnProperty.call(i.traits.hash,e):!1},removeSubsets:EIe,getName(i){var e;return(e=i.type)!==null&&e!==void 0?e:""},findOne:function i(e,t){for(const n of t){if(e(n))return n;{const r=i(e,zv(n));if(r)return r}}return null},findAll:function i(e,t){const n=[];for(const r of t)e(r)&&n.push(r),n.push(...i(e,zv(r)));return n},getText:function(e){return""}},TIe=(i,e)=>{const t=[],n=Array.isArray(e)?e:[e],r=new Set(n);for(const s of Array.from(i)){let o=s;for(;o!=null;){if(r.has(o)){t.push(s);break}o=og.getParent(o)}}return t},AIe=i=>{let e=i;for(;og.getParent(e)!==null;)e=og.getParent(e);return e},PIe=(i,e)=>{try{Aw.compile(i)}catch{return[]}const t=Array.isArray(e);if(t&&e.length===0)return[];const n=AIe(t?e[0]:e),r=Aw.selectAll(i,n,{adapter:og});return e?TIe(r,e):r},kIe=i=>{try{return Aw.compile(i,{adapter:og})}catch{return()=>!1}},RIe=/^<([0-9]+|<*)$/;class OI{constructor(e){this.root=e,this.root.model=this,this.root.root=this.root,this.ids={},this.classes={},this.traits={},this.types={},this.nodes=[],this.watchers=[],this.fire=!1,this.lastNode=null,this.event={type:"update"};const t=R=>r(R.node),n=R=>s(R.node);this.root.on("add",t),this.root.on("remove",n);const r=R=>(S(R),C(R),k(R),R.on("change:node",c),c(null,R,!0),l(R)),s=R=>(w(R),E(R),O(R),v(R.id,R),_(R.classes,R),R.off("change:node",c),l(R)),o=R=>{for(const A of Array.from(this.watchers))A.match=A.matcher(R);return null},a=R=>{for(const A of Array.from(this.watchers)){const D=A.fire||(A.fire=A.match!==A.matcher(R));D&&(this.lastNode=R),this.fire||(this.fire=D)}return null},l=R=>{for(const A of Array.from(this.watchers)){const D=A.fire||(A.fire=A.matcher(R));D&&(this.lastNode=R),this.fire||(this.fire=D)}return null};this.digest=()=>{if(!this.fire)return!1;for(const R of Array.from(this.watchers.slice()))R.fire&&(R.fire=!1,R.handler());return this.fire=!1,!0};const c=(R,A,D)=>{const I=D||R.changed["node.id"],q=D||R.changed["node.classes"];let j=!1;if(I){const Y=A.get("node.id");Y!==A.id&&(D||o(A),j=!0,A.id!=null&&v(A.id,A),g(Y,A))}if(q){let Y,F=(Y=A.get("node.classes"))!=null?Y:[];const re=F.join(",");re!==(A.classes!=null?A.classes.klass:void 0)&&(F=F.slice(),!D&&!j&&o(A),j=!0,A.classes!=null&&_(A.classes,A),y(F,A),A.classes=F,A.classes.klass=re)}return!D&&j&&a(A),null},u=function(R,A,D){if(A!=null){for(const I of Array.from(A)){const q=R[I]!=null?R[I]:[];q.push(D),R[I]=q}return null}},h=function(R,A,D){if(A!=null){for(const I of Array.from(A)){const q=R[I],j=q.indexOf(D);j>=0&&q.splice(j,1),q.length===0&&delete R[I]}return null}},d=function(R){if(!(R.length>0))return;const A=R.hash={};return Array.from(R).map(D=>A[D]=!0)},f=R=>delete R.hash,g=(R,A)=>{if(this.ids[R])throw new Error(`Duplicate node id \`${R}\``);return R!=null&&(this.ids[R]=[A]),A.id=R??A._id},v=(R,A)=>(R!=null&&delete this.ids[R],A.id=A._id),y=(R,A)=>{if(u(this.classes,R,A),R!=null)return d(R)},_=(R,A)=>{if(h(this.classes,R,A),R!=null)return f(R)},S=R=>this.nodes.push(R),w=R=>this.nodes.splice(this.nodes.indexOf(R),1),C=R=>u(this.types,[R.type],R),E=R=>h(this.types,[R.type],R),k=R=>(u(this.traits,R.traits,R),d(R.traits)),O=R=>(h(this.traits,R.traits,R),f(R.traits));r(this.root),this.root.trigger({type:"added"})}select(e,t){return PIe(e,t||this.getRoot())}watch(e,t){let n;return t.unwatch=()=>this.unwatch(t),t.watcher=n={selector:e,handler:t,matcher:this._matcher(e),match:!1,fire:!1},this.watchers.push(n),this.select(e)}unwatch(e){const{watcher:t}=e;if(t!=null)return this.watchers.splice(this.watchers.indexOf(t),1),delete e.unwatch,delete e.watcher}_matcher(e){if(RIe.test(e))throw new Error("Auto-link matcher unsupported");return kIe(e)}getRoot(){return this.root}getLastTrigger(){return this.lastNode.toString()}}const OIe=Object.freeze(Object.defineProperty({__proto__:null,Attributes:Rz,Group:zz,Guard:Iz,Model:OI,Node:W1},Symbol.toStringTag,{value:"Module"}));class LI{constructor(e,t){this.classes=e,this.canvas=t;const n=document.createElement("div");n.classList.add("mathbox-overlays"),this.div=n}inject(){const e=this.canvas.parentNode;if(!e)throw new Error("Canvas not inserted into document.");return e.insertBefore(this.div,this.canvas)}unject(){return this.div.parentNode.removeChild(this.div)}getTypes(){return Object.keys(this.classes)}make(e,t){return new this.classes[e](this.div,t)}}const $1=[];let LIe=0;const Rw={},DI=()=>({id:LIe++,type:null,props:null,children:null,rendered:null,instance:null}),zI=function(i){return i*=2,i=Math.max(0,$1.length-i),NIe(0,i,!1).map(e=>$1.push(DI()))},X1=function(i,e,t){const n=$1.length?$1.pop():DI();return n.type=i??"div",n.props=e??null,n.children=t??null,n},ZA=function(i){if(!i.type)return;const{children:e}=i;if(i.type=i.props=i.children=i.instance=null,$1.push(i),e!=null)for(const t of Array.from(e))ZA(t)},Lm=function(i,e,t,n,r){if(i!=null){if(e==null)return Dm(i,n,r);{let s;if(i instanceof Node){if(s=i===e,s)return}else s=typeof i==typeof e&&e!==null&&i!==null&&i.type===e.type;if(s){let o,a,l;i.instance=e.instance;const c=i.type!=null&&i.type.isComponentClass?i.type:Rw[i.type],u=e!=null?e.props:void 0,h=i.props,d=(e!=null?e.children:void 0)!=null?e!=null?e.children:void 0:null,f=i.children;if(h!=null&&(h.children=f),c!=null){let g=t._COMPONENT_DIRTY;if(u!=null!=(h!=null)&&(g=!0),d!==f&&(g=!0),u!=null&&h!=null){if(!g)for(o in u)Object.prototype.hasOwnProperty.call(h,o)||(g=!0);if(!g)for(o in h)l=h[o],(a=u[o])!==l&&(g=!0)}if(g){let v;const y=e.instance;i.props==null&&(i.props={});for(const C in y.defaultProps){const E=y.defaultProps[C];i.props[C]==null&&(i.props[C]=E)}i.props.children=i.children,typeof y.willReceiveProps=="function"&&y.willReceiveProps(i.props);const _=t._COMPONENT_FORCE||((v=typeof y.shouldUpdate=="function"?y.shouldUpdate(i.props):void 0)!=null?v:!0);if(_){const C=y.getNextState();typeof y.willUpdate=="function"&&y.willUpdate(i.props,C)}const S=y.props,w=y.applyNextState();y.props=i.props,y.children=i.children,_&&(i=i.rendered=typeof y.render=="function"?y.render(X1,i.props,i.children):void 0,Lm(i,e.rendered,t,n,r),typeof y.didUpdate=="function"&&y.didUpdate(S,w))}return}else{if(u!=null)for(o in u)Object.prototype.hasOwnProperty.call(h,o)||zIe(t,o,u[o]);if(h!=null)for(o in h)l=h[o],(a=u[o])!==l&&o!=="children"&&II(t,o,l,a);if(f!=null)if(["string","number"].includes(typeof f))f!==d&&(t.textContent=f);else if(f.type!=null)Lm(f,d,t.childNodes[0],t,0);else{let g,v;const{childNodes:y}=t;if(d!=null)for(v=0;v<f.length;v++)g=f[v],Lm(g,d[v],y[v],t,v);else for(v=0;v<f.length;v++)g=f[v],Lm(g,null,y[v],t,v)}else d!=null&&(aw(null,t),t.innerHTML="")}return}else return aw(e.instance,t),t.remove(),Dm(i,n,r)}}if(e!=null)return aw(e.instance,t),e.node.remove()},Dm=function(i,e,t){let n;t==null&&(t=0);const r=i.type!=null&&i.type.isComponentClass?i.type:Rw[i.type];if(i instanceof Node)n=i;else{if(r!=null){let o;const a=i.type!=null&&i.type.isComponentClass?i.type:Rw[i.type];if(!a)return i=i.rendered=X1("noscript"),n=Dm(i,e,t),n;i.instance=o=new a(e),i.props==null&&(i.props={});for(const l in o.defaultProps){const c=o.defaultProps[l];i.props[l]==null&&(i.props[l]=c)}return i.props.children=i.children,o.props=i.props,o.children=i.children,o.setState(typeof o.getInitialState=="function"?o.getInitialState():void 0),typeof o.willMount=="function"&&o.willMount(),i=i.rendered=typeof o.render=="function"?o.render(X1,i.props,i.children):void 0,n=Dm(i,e,t),typeof o.didMount=="function"&&o.didMount(i),n._COMPONENT=o,n}else if(["string","number"].includes(typeof i))n=document.createTextNode(i);else{n=document.createElement(i.type);for(const o in i.props){const a=i.props[o];II(n,o,a)}}const{children:s}=i;if(s!=null)if(["string","number"].includes(typeof s))n.textContent=s;else if(s.type!=null)Dm(s,n,0);else for(let o=0;o<s.length;o++){const a=s[o];Dm(a,n,o)}}return e.insertBefore(n,e.childNodes[t]),n},aw=function(i,e){if(i){typeof i.willUnmount=="function"&&i.willUnmount();for(const t in i)delete i[t]}return(()=>{const t=[];for(const n of Array.from(e.childNodes))aw(n._COMPONENT,n),t.push(delete n._COMPONENT);return t})()},DIe=function(i){if(typeof document>"u")return!0;if(document.documentElement.style[i]!=null)return i;i=i[0].toUpperCase()+i.slice(1);const e=["webkit","moz","ms","o"];for(const t of Array.from(e))if(document.documentElement.style[t+i]!=null)return t+i},Y1={};for(const i of["transform"])Y1[i]=DIe(i);const II=function(i,e,t,n){if(e==="style"){for(const r in t){const s=t[r];(n!=null?n[r]:void 0)!==s&&(i.style[Y1[r]!=null?Y1[r]:r]=s)}return}if(i[e]!=null){try{i[e]=t}catch{console.log("failed setting "+e)}return}if(i instanceof Node){i.setAttribute(e,t);return}},zIe=function(i,e,t){if(e==="style"){for(const n in t)i.style[Y1[n]!=null?Y1[n]:n]="";return}if(i[e]!=null&&(i[e]=void 0),i instanceof Node){i.removeAttribute(e);return}},IIe=function(i){let e;const t={willMount:"componentWillMount",didMount:"componentDidMount",willReceiveProps:"componentWillReceiveProps",shouldUpdate:"shouldComponentUpdate",willUpdate:"componentWillUpdate",didUpdate:"componentDidUpdate",willUnmount:"componentWillUnmount"};for(const r in t){const s=t[r];i[r]==null&&(i[r]=i[s])}class n{constructor(s,o,a=null,l=null){let c,u;o==null&&(o={}),this.props=o,this.state=a,this.children=l;const h=function(f,g){return typeof f=="function"?f.bind(g):f};for(c in i)u=i[c],this[c]=h(u,this);let d=null;this.setState=function(f){d==null&&(d=f?d??{}:null);for(c in f)u=f[c],d[c]=u;s._COMPONENT_DIRTY=!0},this.forceUpdate=function(){s._COMPONENT_FORCE=s._COMPONENT_DIRTY=!0;let f=s;return(()=>{const g=[];for(;f=f.parentNode;)f._COMPONENT?g.push(f._COMPONENT_FORCE=!0):g.push(void 0);return g})()},this.getNextState=()=>d,this.applyNextState=function(){s._COMPONENT_FORCE=s._COMPONENT_DIRTY=!1;const f=this.state;return[d,this.state]=Array.from([null,d]),f}}}return n.isComponentClass=!0,n.prototype.defaultProps=(e=typeof i.getDefaultProps=="function"?i.getDefaultProps():void 0)!=null?e:{},n};function NIe(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let o=i;r?o<s:o>s;r?o++:o--)n.push(o);return n}const UIe=Object.freeze(Object.defineProperty({__proto__:null,Types:Rw,apply:Lm,createClass:IIe,element:X1,hint:zI,recycle:ZA},Symbol.toStringTag,{value:"Module"}));class NI{constructor(e,t){this.element=e,typeof this.init=="function"&&this.init(t)}dispose(){}}let UI=class extends NI{static initClass(){this.prototype.el=X1,this.prototype.hint=zI,this.prototype.apply=Lm,this.prototype.recycle=ZA}init(e){return this.last=null}dispose(){return this.unmount(),super.dispose()}mount(){const e=document.createElement("div");return e.classList.add("mathbox-overlay"),this.element.appendChild(e),this.overlay=e}unmount(e){return this.overlay&&this.overlay.parentNode&&this.element.removeChild(this.overlay),this.overlay=null}render(e){this.overlay||this.mount(),["string","number"].includes(typeof e)&&(e=this.el("div",null,e)),e instanceof Array&&(e=this.el("div",null,e)),e==null&&(e=this.el("div"));const t=e.type==="div";let{last:n}=this;const{overlay:r}=this,s=t?r:r.childNodes[0],o=t?r.parentNode:r;!n&&s&&(n=this.el("div")),this.apply(e,n,s,o,0),this.last=e,n!=null&&this.recycle(n)}};UI.initClass();const FI={dom:UI},FIe=Object.freeze(Object.defineProperty({__proto__:null,Classes:FI,Factory:LI,Overlay:NI},Symbol.toStringTag,{value:"Module"}));class Ss{static initClass(){this.Node=W1,this.Group=zz,this.model=this.Node,this.defaults=null,this.traits=null,this.props=null,this.finals=null,this.freeform=!1}constructor(e,t,n){this.node=e,this._context=t,this._renderables=this._context.renderables,this._attributes=this._context.attributes,this._shaders=this._context.shaders,this._overlays=this._context.overlays,this._animator=this._context.animator,this._types=this._attributes.types,this.node.controller=this,this.node.on("added",r=>this._added()),this.node.on("removed",r=>this._removed()),this.node.on("change",r=>{if(this._root)return this.change(r.changed,r.touched)}),this.reconfigure(),this._get=this.node.get.bind(this.node),this._helpers=n(this,this.node.traits),this._handlers={inherit:{},listen:[],watch:[],compute:[]},this._root=this._parent=null,this.init()}is(e){return this.traits.hash[e]}init(){}make(){}made(){}unmake(e){}unmade(){}change(e,t,n){}refresh(){return this.change({},{},!0)}rebuild(){if(this._root)return this._removed(!0),this._added()}reconfigure(e){return e!=null&&this.node.configure(e,this._attributes),this.traits=this.node.traits,this.props=this.node.props}_added(){let e,t;this._parent=this.node.parent!=null?this.node.parent.controller:void 0,this._root=this.node.root!=null?this.node.root.controller:void 0,this.node.clock=(t=this._inherit("clock"))!=null?t:this._root;try{try{return this.make(),this.refresh(),this.made()}catch(n){throw e=n,this.node.print("warn"),console.error(e),e}}catch(n){e=n;try{return this._removed()}catch{}}}_removed(e){return e==null&&(e=!1),this.unmake(e),this._unlisten(),this._unattach(),this._uncompute(),this._root=null,this._parent=null,this.unmade(e)}_listen(e,t,n,r){if(r==null&&(r=this),e instanceof Array)for(const s of Array.from(e))return this.__listen(s,t,n,r);return this.__listen(e,t,n,r)}__listen(e,t,n,r){if(r==null&&(r=this),typeof e=="string"&&(e=this._inherit(e)),e!=null){const s=n.bind(r);s.node=this.node,e.on(t,s),this._handlers.listen.push([e,t,s])}return e}_unlisten(){if(this._handlers.listen.length){for(const[e,t,n]of Array.from(this._handlers.listen))e.off(t,n);return this._handlers.listen=[]}}_inherit(e){const t=this._handlers.inherit[e];return t!==void 0?t:this._handlers.inherit[e]=this._parent!=null?this._parent._find(e??null):void 0}_find(e){return this.is(e)?this:this._parent!=null?this._parent._find(e):void 0}_uninherit(){return this._handlers.inherit={}}_attach(e,t,n,r,s,o,a){r==null&&(r=this),s==null&&(s=this),o==null&&(o=!1),a==null&&(a=!1);const l=function(f){if(f!=null&&Array.from(f.traits).includes(t))return f},c=f=>f!=null?f.controller:void 0,u=function(f){if(f==null)return f;let g=[];for(const v of Array.from(f))v instanceof Array?g=g.concat(v):g.push(v);return g},h=f=>{let g,v;if(typeof f=="object"){if(g=f,g!=null&&g._up)return f=a?g._targets:[g[0]],f;if(g instanceof Array)return f=a?u(g.map(h)):h(g[0]),f;if(g instanceof W1)return[g]}else if(typeof f=="string"&&f[0]==="<"){let y,_=0;(y=f.match(/^<([0-9])+$/))&&(_=+y[1]-1),f.match(/^<+$/)&&(_=+f.length-1),v=[];let S=s.node;for(;S;){const{parent:w}=S;if(!w)break;if(S=w.children[S.index-1],!S&&!v.length&&(S=w),g=null,l(S)&&(g=S),g!=null&&_--<=0&&v.push(g),!a&&v.length)return v}if(a&&v.length)return v}else if(typeof f=="string"){const y=n.bind(r);this._handlers.watch.push(y);const _=this._root.watch(f,y);if(a){if(v=_.filter(l),v.length)return v}else if(l(_[0])&&(g=_[0]),g!=null)return[g]}if(!o)throw console.warn(this.node.toMarkup()),new Error(`${this.node.toString()} - Could not find ${t} \`${f}\``);return a?[]:null},d=u(h(e));return a?d!=null?d.map(c):null:d!=null?c(d[0]):null}_unattach(){if(this._handlers.watch.length){for(const e of Array.from(this._handlers.watch))e!=null&&e.unwatch();return this._handlers.watch=[]}}_compute(e,t){return this._handlers.compute.push(e),this.node.bind(e,t,!0)}_uncompute(){if(this._handlers.compute.length){for(const e of Array.from(this._handlers.compute))this.node.unbind(e,!0);return this._handlers.compute=[]}}}Ss.initClass();Xc.apply(Ss.prototype);class cl extends Ss{static initClass(){this.model=Ss.Group,this.traits=["node"]}}cl.initClass();class BI extends cl{static initClass(){this.traits=["node","object","entity","visible","active"]}make(){return this._helpers.visible.make(),this._helpers.active.make()}unmake(){return this._helpers.visible.unmake(),this._helpers.active.unmake()}}BI.initClass();class VI extends cl{static initClass(){this.traits=["node","bind"]}make(){return this._helpers.bind.make([{to:"inherit.source",trait:"node"}])}unmake(){return this._helpers.bind.unmake()}_find(e){return this.bind.source&&Array.from(this.props.traits).includes(e)?this.bind.source._inherit(e):super._find()}}VI.initClass();class HI extends cl{static initClass(){this.traits=["node","root","clock","scene","vertex","unit"]}init(){return this.size=null,this.cameraEvent={type:"root.camera"},this.preEvent={type:"root.pre"},this.updateEvent={type:"root.update"},this.renderEvent={type:"root.render"},this.postEvent={type:"root.post"},this.clockEvent={type:"clock.tick"},this.camera=null}make(){return this._helpers.unit.make()}unmake(){return this._helpers.unit.unmake()}change(e,t,n){if(e["root.camera"]||n)return this._unattach(),this._attach(this.props.camera,"camera",this.setCamera,this,this,!0),this.setCamera()}adopt(e){return Array.from(e.renders).map(t=>this._context.scene.add(t))}unadopt(e){return Array.from(e.renders).map(t=>this._context.scene.remove(t))}select(e){return this.node.model.select(e)}watch(e,t){return this.node.model.watch(e,t)}unwatch(e){return this.node.model.unwatch(e)}resize(e){return this.size=e,this.trigger({type:"root.resize",size:e})}getSize(){return this.size}getSpeed(){return this.props.speed}getUnit(){return this._helpers.unit.get()}getUnitUniforms(){return this._helpers.unit.uniforms()}pre(){return this.getCamera().updateProjectionMatrix(),this.trigger(this.clockEvent),this.trigger(this.preEvent)}update(){return this.trigger(this.updateEvent)}render(){return this.trigger(this.renderEvent)}post(){return this.trigger(this.postEvent)}setCamera(){const e=BIe(this.select(this.props.camera)[0],t=>t.controller);if(this.camera!==e)return this.camera=e,this.trigger({type:"root.camera"})}getCamera(){let e;return(e=this.camera!=null?this.camera.getCamera():void 0)!=null?e:this._context.defaultCamera}getTime(){return this._context.time}vertex(e,t){return t===2?e.pipe("view.position"):t===3?e.pipe("root.position"):e}}HI.initClass();function BIe(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class qI extends cl{static initClass(){this.traits=["node","unit"]}make(){return this._helpers.unit.make()}unmake(){return this._helpers.unit.unmake()}getUnit(){return this._helpers.unit.get()}getUnitUniforms(){return this._helpers.unit.uniforms()}}qI.initClass();const lw=function(i,e){return e===Jm?i.REPEAT:e===lo?i.CLAMP_TO_EDGE:e===Qm?i.MIRRORED_REPEAT:e===Oi?i.NEAREST:e===$T?i.NEAREST_MIPMAP_NEAREST:e===XT?i.NEAREST_MIPMAP_LINEAR:e===Hr?i.LINEAR:e===KT?i.LINEAR_MIPMAP_NEAREST:e===ZT?i.LINEAR_MIPMAP_LINEAR:e===Sa?i.UNSIGNED_BYTE:e===E2?i.UNSIGNED_SHORT_4_4_4_4:e===T2?i.UNSIGNED_SHORT_5_5_5_1:e===v_?i.BYTE:e===__?i.SHORT:e===o0?i.UNSIGNED_SHORT:e===wg?i.INT:e===dc?i.UNSIGNED_INT:e===Ks?i.FLOAT:e===JT?i.ALPHA:e===Fo?i.RGBA:e===A2?i.LUMINANCE:e===P2?i.LUMINANCE_ALPHA:e===Gd?i.FUNC_ADD:e===zT?i.FUNC_SUBTRACT:e===IT?i.FUNC_REVERSE_SUBTRACT:e===NT?i.ZERO:e===UT?i.ONE:e===FT?i.SRC_COLOR:e===BT?i.ONE_MINUS_SRC_COLOR:e===M2?i.SRC_ALPHA:e===C2?i.ONE_MINUS_SRC_ALPHA:e===VT?i.DST_ALPHA:e===HT?i.ONE_MINUS_DST_ALPHA:e===qT?i.DST_COLOR:e===GT?i.ONE_MINUS_DST_COLOR:e===WT?i.SRC_ALPHA_SATURATE:0},GI=function(i){switch(i){case Sa:return Uint8Array;case v_:return Int8Array;case __:return Int16Array;case o0:return Uint16Array;case wg:return Int32Array;case dc:return Uint32Array;case Ks:return Float32Array}},JA=i=>i.map(e=>["","X","Y","Z"][e]).join(""),Pg=function(){const i=new a0,e=new Ro,t=new oe,n=new oe,r=new qn;return function(s,o,a,l,c,u){return u==null&&(u="XYZ"),o!=null?(u instanceof Array&&(u=JA(u)),i.setFromVector3(o,u),e.setFromEuler(i)):e.set(0,0,0,1),a!=null&&e.multiply(a),s!=null?t.copy(s):t.set(0,0,0),l!=null?n.copy(l):n.set(1,1,1),r.compose(t,e,n),c!=null&&r.multiplyMatrices(r,c),r}},VIe=Object.freeze(Object.defineProperty({__proto__:null,paramToArrayStorage:GI,paramToGL:lw,swizzleToEulerOrder:JA,transformComposer:Pg},Symbol.toStringTag,{value:"Module"}));class WI extends Ss{static initClass(){this.traits=["node","camera"]}init(){}make(){const e=this._context.defaultCamera;return this.camera=this.props.proxy?e:e.clone(),this.euler=new a0,this.quat=new Ro}unmake(){}getCamera(){return this.camera}change(e,t,n){if(e["camera.position"]||e["camera.quaternion"]||e["camera.rotation"]||e["camera.lookAt"]||e["camera.up"]||e["camera.fov"]||n){const{position:r,quaternion:s,rotation:o,lookAt:a,up:l,fov:c}=this.props;return r!=null&&this.camera.position.copy(r),(s!=null||o!=null||a!=null)&&(a!=null?this.camera.lookAt(a):this.camera.quaternion.set(0,0,0,1),o!=null&&(this.euler.setFromVector3(o,JA(this.props.eulerOrder)),this.quat.setFromEuler(this.euler),this.camera.quaternion.multiply(this.quat)),s!=null&&this.camera.quaternion.multiply(s)),c!=null&&this.camera.fov!=null&&(this.camera.fov=c),l!=null&&this.camera.up.copy(l),this.camera.updateMatrix()}}}WI.initClass();const Qp=function(i){const e=[];let t=i;for(;typeof t!="string"&&(t!=null?t.length:void 0)!=null;)e.push(t.length),t=t[0];return e},ff=function(i,e){let t;e==null&&(e={});const{items:n,channels:r,width:s,height:o,depth:a}=e,l={};if(!i||!i.length)return{items:n,channels:r,width:s??0,height:o??0,depth:a??0};const c=Qp(i),u=c.length;l.channels=r!==1&&c.length>1?c.pop():r,l.items=n!==1&&c.length>1?c.pop():n,l.width=s!==1&&c.length>1?c.pop():s,l.height=o!==1&&c.length>1?c.pop():o,l.depth=a!==1&&c.length>1?c.pop():a;let h=u;r===1&&h++,n===1&&h>1&&h++,s===1&&h>2&&h++,o===1&&h>3&&h++;let d=(t=c.pop())!=null?t:1;return h<=1&&(d/=l.channels!=null?l.channels:1),h<=2&&(d/=l.items!=null?l.items:1),h<=3&&(d/=l.width!=null?l.width:1),h<=4&&(d/=l.height!=null?l.height:1),d=Math.floor(d),l.width==null&&(l.width=d,d=1),l.height==null&&(l.height=d,d=1),l.depth==null&&(l.depth=d,d=1),l},P_=function(i,e){switch(e){case 0:return()=>!0;case 1:return()=>i();case 2:return function(){return i(),i()};case 3:return function(){return i(),i(),i(),i()};case 4:return function(){return i(),i(),i(),i()};case 6:return function(){return i(),i(),i(),i(),i(),i()};case 8:return function(){return i(),i(),i(),i(),i(),i()}}},jI=function(i,e,t){let n;const r=(()=>{switch(t){case 0:return()=>!0;case 1:return o=>o(i());case 2:return o=>o(i(),i());case 3:return o=>o(i(),i(),i());case 4:return o=>o(i(),i(),i(),i());case 6:return o=>o(i(),i(),i(),i(),i(),i());case 8:return o=>o(i(),i(),i(),i(),i(),i(),i(),i())}})();let s=null;for(;e>0;){const o=Math.min(e,8);n=(()=>{switch(o){case 1:return a=>r(a);case 2:return function(a){return r(a),r(a)};case 3:return function(a){return r(a),r(a),r(a)};case 4:return function(a){return r(a),r(a),r(a),r(a)};case 5:return function(a){return r(a),r(a),r(a),r(a),r(a)};case 6:return function(a){return r(a),r(a),r(a),r(a),r(a),r(a)};case 7:return function(a){return r(a),r(a),r(a),r(a),r(a),r(a),r(a)};case 8:return function(a){return r(a),r(a),r(a),r(a),r(a),r(a),r(a),r(a)}}})(),s!=null?s=((a,l)=>function(c){return a(c),l(c)})(n,s):s=n,e-=o}return n=s??(()=>!0),n.reset=i.reset,n.rebind=i.rebind,n},Ow=function(i){let e,t,n,r,s,o=Qp(i);const a=o.length;let l=o.pop(),c=o.pop(),u=o.pop();const h=o.pop();let d,f,g,v,y;switch(a){case 0:e=()=>0,e.reset=function(){};break;case 1:d=0,e=()=>i[d++],e.reset=()=>d=0;break;case 2:d=t=0,f=i[t]!=null?i[t]:[],e=function(){const _=f[d++];return d===l&&(d=0,t++,f=i[t]!=null?i[t]:[]),_},e.reset=function(){d=t=0,f=i[t]!=null?i[t]:[]};break;case 3:d=t=n=0,g=i[n]!=null?i[n]:[],f=g[t]!=null?g[t]:[],e=function(){const _=f[d++];return d===l&&(d=0,t++,t===c&&(t=0,n++,g=i[n]!=null?i[n]:[]),f=g[t]!=null?g[t]:[]),_},e.reset=function(){d=t=n=0,g=i[n]!=null?i[n]:[],f=g[t]!=null?g[t]:[]};break;case 4:d=t=n=r=0,v=i[r]!=null?i[r]:[],g=v[n]!=null?v[n]:[],f=g[t]!=null?g[t]:[],e=function(){const _=f[d++];return d===l&&(d=0,t++,t===c&&(t=0,n++,n===u&&(n=0,r++,v=i[r]!=null?i[r]:[]),g=v[n]!=null?v[n]:[]),f=g[t]!=null?g[t]:[]),_},e.reset=function(){d=t=n=r=0,v=i[r]!=null?i[r]:[],g=v[n]!=null?v[n]:[],f=g[t]!=null?g[t]:[]};break;case 5:d=t=n=r=s=0,y=i[s]!=null?i[s]:[],v=y[r]!=null?y[r]:[],g=v[n]!=null?v[n]:[],f=g[t]!=null?g[t]:[],e=function(){const _=f[d++];return d===l&&(d=0,t++,t===c&&(t=0,n++,n===u&&(n=0,r++,r===h&&(r=0,s++,y=i[s]!=null?i[s]:[]),v=y[r]!=null?y[r]:[]),g=v[n]!=null?v[n]:[]),f=g[t]!=null?g[t]:[]),_},e.reset=function(){d=t=n=r=s=0,y=i[s]!=null?i[s]:[],v=y[r]!=null?y[r]:[],g=v[n]!=null?v[n]:[],f=g[t]!=null?g[t]:[]};break}return e.rebind=function(_){if(i=_,o=Qp(i),o.length&&(l=o.pop()),o.length&&(c=o.pop()),o.length&&(u=o.pop()),o.length)return _=o.pop()},e},QA=function(i,e,t,n){let r,s,o=r=s=0;const a=function(){return o=e*t*n,r=s=0},l=()=>s,c=()=>o-r<=0,u=(()=>{switch(t){case 1:return function(f){r+=f,s+=f};case 2:return function(f){r+=f*2,s+=f};case 3:return function(f){r+=f*3,s+=f};case 4:return function(f){r+=f*4,s+=f}}})(),h=(()=>{switch(t){case 1:return function(f){f(i[r++]),++s};case 2:return function(f){f(i[r++],i[r++]),++s};case 3:return function(f){f(i[r++],i[r++],i[r++]),++s};case 4:return function(f){f(i[r++],i[r++],i[r++],i[r++]),++s}}})(),d=(()=>{switch(t){case 1:return function(f){i[r++]=f,++s};case 2:return function(f,g){i[r++]=f,i[r++]=g,++s};case 3:return function(f,g,v){i[r++]=f,i[r++]=g,i[r++]=v,++s};case 4:return function(f,g,v,y){i[r++]=f,i[r++]=g,i[r++]=v,i[r++]=y,++s}}})();return h.reset=a,d.reset=a,a(),{emit:d,consume:h,skip:u,count:l,done:c,reset:a}},$I=function(i,e){let t,n,r,s,o;const a=new Float32Array(4096);let l=n=.5,c=r=s=o=0;const u=function(f,g,v,y){return s++,a[c++]=f*l,a[c++]=g*l,a[c++]=v*l,a[c++]=y*l},h=function(f,g,v,y){return o++,a[r++]+=f*n,a[r++]+=g*n,a[r++]+=v*n,a[r++]+=y*n},d=Math.max(i.length,e.length);return d<=3?t=function(f,g,v){c=r=s=o=0,i(u,g,v),e(h,g,v);const y=Math.min(s,o);let _=0;return Q8(0,y,!1).map(S=>f(a[_++],a[_++],a[_++],a[_++]))}:d<=5?t=function(f,g,v,y,_){c=r=s=o=0,i(u,g,v,y,_),e(h,g,v,y,_);const S=Math.min(s,o);let w=0;return Q8(0,S,!1).map(C=>f(a[w++],a[w++],a[w++],a[w++]))}:d<=7?t=function(f,g,v,y,_,S,w){c=r=s=o=0,i(u,g,v,y,_,S,w),e(h,g,v,y,_,S,w);const C=Math.min(s,o);let E=0;return(()=>{let k,O;const R=[];for(w=0,O=C,k=0<=O;k?w<O:w>O;k?w++:w--)R.push(f(a[E++],a[E++],a[E++],a[E++]));return R})()}:d<=9?t=function(f,g,v,y,_,S,w,C,E){c=r=s=o=0,i(u,g,v,y,_,S,w,C,E),e(h,g,v,y,_,S,w,C,E);const k=Math.min(s,o);return E=0,(()=>{let O,R;const A=[];for(C=0,R=k,O=0<=R;O?C<R:C>R;O?C++:C--)A.push(f(a[E++],a[E++],a[E++],a[E++]));return A})()}:t=function(f,g,v,y,_,S,w,C,E,k,O){c=r=0,i(u,g,v,y,_,S,w,C,E,k,O),e(h,g,v,y,_,S,w,C,E,k,O);const R=Math.min(s,o);return E=0,(()=>{let A,D;const I=[];for(C=0,D=R,A=0<=D;A?C<D:C>D;A?C++:C--)I.push(f(a[E++],a[E++],a[E++],a[E++]));return I})()},t.lerp=function(f){let g;return[l,n]=Array.from(g=[1-f,f]),g},t},XI=function(i,e){const t=Qp(i).reduce((l,c)=>l*c),n=Qp(e).reduce((l,c)=>l*c),r=Math.min(t,n),s=Ow(i),o=Ow(e),a=new Float32Array(r);return a.lerp=function(l){s.reset(),o.reset();let c=0;return(()=>{const u=[];for(;c<r;){const h=s(),d=o();u.push(a[c++]=h+(d-h)*l)}return u})()},a};function Q8(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let o=i;r?o<s:o>s;r?o++:o--)n.push(o);return n}const HIe=Object.freeze(Object.defineProperty({__proto__:null,getDimensions:ff,getLerpEmitter:$I,getLerpThunk:XI,getSizes:Qp,getStreamer:QA,getThunk:Ow,makeEmitter:jI,repeatCall:P_},Symbol.toStringTag,{value:"Module"})),ek="xyzw".split(""),e5={0:-1,x:0,y:1,z:2,w:3},t5=function(i){return i===""+i&&(i=i.split("")),i===+i&&(i=[i]),i},ag=function(i){return i===+i&&(i="vec"+i),i==="vec1"&&(i="float"),i},YI=function(i){if(i=""+i,i.indexOf(".")<0)return i+=".0"},KI=function(i){i==null&&(i=4);const e=YI(i);return`vec4 float2ByteIndex(vec4 xyzw, out float channelIndex) {
  float relative = xyzw.w / ${e};
  float w = floor(relative);
  channelIndex = (relative - w) * ${e};
  return vec4(xyzw.xyz, w);
}`},ZI=function(i){const e=function(n,r){let s;if(n===r)s=`return texture2D(dataTextures[${n}], uv);`;else{const o=Math.ceil(n+(r-n)/2);s=`if (z < ${o-.5}) {
  ${e(n,o-1)}
}
else {
  ${e(o,r)}
}`}return s=s.replace(/\n/g,`
  `)},t=e(0,i-1);return`uniform sampler2D dataTextures[${i}];

vec4 sample2DArray(vec2 uv, float z) {
  ${t}
}`},zl=function(i,e,t){return i=ag(i),t!=null?`${i} binaryOperator(${i} a) {
  return a ${e} ${t};
}`:`${i} binaryOperator(${i} a, ${i} b) {
  return a ${e} b;
}`},e0=function(i,e,t){if(t==null&&(t=0),i>e)return pf(i,e);const n=e-i;i=ag(i),e=ag(e),t=YI(t);const s=qIe(0,n,!0).map(function(o){return o?t:"v"}).join(",");return`${e} extendVec(${i} v) { return ${e}(${s}); }`},pf=function(i,e){if(i<e)return e0(i,e);const t="."+"xyzw".substr(0,e);return i=ag(i),e=ag(e),`${e} truncateVec(${i} v) { return v${t}; }`},n5=function(i){const e=["0.0","0.0","0.0","0.0"];i=t5(i),i=i.map(function(r){return r===""+r?e5[r]:r});for(let r=0;r<i.length;r++){const s=i[r];e[s]=["a","b","c","d"][r]}const t=e.slice(0,4).join(", ");return`vec4 inject(${["float a","float b","float c","float d"].slice(0,i.length)}) {
  return vec4(${t});
}`},Za=function(i,e=null){const t=["0.0","xyzw.x","xyzw.y","xyzw.z","xyzw.w"];for(e==null&&(e=i.length),i=t5(i),i=i.map(function(r){return Array.from([0,1,2,3,4]).includes(+r)&&(r=+r),r===""+r&&(r=e5[r]+1),t[r]});i.length<e;)i.push("0.0");const n=i.join(", ");return`vec${e} swizzle(vec4 xyzw) {
  return vec${e}(${n});
}`.replace(/vec1/g,"float")},_4=function(i){const e=["0.0","0.0","0.0","0.0"];i=t5(i),i=i.map(function(n){return n===+n?ek[n-1]:n});for(let n=0;n<i.length;n++){const r=i[n],s=ek[n],o=e5[r];e[o]=`xyzw.${s}`}return`vec4 invertSwizzle(vec4 xyzw) {
  return vec4(${e.join(", ")});
}`},qu=function(i){let e=[].slice.call(arguments);return e.length>1?(e=e.map((t,n)=>["inout",t,String.fromCharCode(97+n)].join(" ")),e=e.join(", "),`void identity(${e}) { }`):`${i} identity(${i} x) {
  return x;
}`},LE=(i,e)=>`${i} constant() {
return ${e};
}`;function qIe(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let o=i;r?o<s:o>s;r?o++:o--)n.push(o);return n}const GIe=Object.freeze(Object.defineProperty({__proto__:null,binaryOperator:zl,constant:LE,extendVec:e0,identity:qu,injectVec4:n5,invertSwizzleVec4:_4,mapByte2FloatOffset:KI,sample2DArray:ZI,swizzleVec4:Za,toType:ag,truncateVec:pf},Symbol.toStringTag,{value:"Module"}));class b4 extends Ss{static initClass(){this.traits=["node","source","index"]}made(){return this.trigger({type:"source.rebuild"})}indexShader(e){return e.pipe(qu("vec4"))}sourceShader(e){return e.pipe(qu("vec4"))}getDimensions(){return{items:1,width:1,height:1,depth:1}}getActiveDimensions(){return this.getDimensions()}getIndexDimensions(){return this.getActiveDimensions()}getFutureDimensions(){return this.getActiveDimensions()}}b4.initClass();let JI=class extends b4{static initClass(){this.traits=["node","data","source","index","entity","active"]}init(){return this.dataEmitter=null,this.dataSizes=null}emitter(e,t){let n;const{data:r,bind:s,expr:o}=this.props;if(r!=null){const a=this.dataSizes,l=Qp(r);if(!a||a.length!==l.length){const c=Ow(r);this.dataEmitter=this.callback(jI(c,t,e)),this.dataSizes=l}n=this.dataEmitter}else o!=null?n=this.callback(o):n=this.callback(this.passthrough);return n}callback(e){return e??function(){}}update(){}make(){return this._helpers.active.make(),this.first=!0,this._listen("root","root.update",()=>((this.isActive||this.first)&&this.update(),this.first=!1))}unmake(){return this._helpers.active.unmake(),this.dataEmitter=null,this.dataSizes=null}};JI.initClass();let k_=class extends JI{static initClass(){this.traits=["node","buffer","active","data","source","index","texture"]}init(){this.bufferSlack=0,this.bufferFrames=0,this.bufferTime=0,this.bufferDelta=0,this.bufferClock=0,this.bufferStep=0,super.init()}make(){super.make(),this.clockParent=this._inherit("clock"),this.latchParent=this._inherit("latch")}unmake(){return super.unmake()}rawBuffer(){return this.buffer}emitter(){const{channels:e,items:t}=this.props;return super.emitter(e,t)}change(e,t,n){if(e["buffer.fps"]||n){const{fps:r}=this.props;return this.bufferSlack=r?.5/r:0}}syncBuffer(e){let t,n;if(!this.buffer)return;const{live:r,fps:s,hurry:o,limit:a,realtime:l,observe:c}=this.props,u=this.buffer.getFilled();if(u&&!r||this.latchParent&&!this.latchParent.isDirty)return;const h=this.clockParent.getTime();if(s!=null){const d=this.bufferSlack,f=h.step/h.delta;t=l?h.delta:h.step;const g=1/s;n=l&&c?f*g:g,Math.abs(h.time-this.bufferTime)>h.step*a&&(this.bufferTime=h.time,this.bufferClock=h.clock),this.bufferSlack=Math.min(a/s,d+t),this.bufferDelta=t,this.bufferStep=n;let v=Math.min(o,Math.floor(d*s));u||(v=Math.max(1,v));let y=!1;const _=()=>y=!0;return(()=>{const S=[];for(let w=0,C=v,E=0<=C;(E?w<C:w>C)&&(this.bufferTime+=t,this.bufferClock+=n,!y);E?w++:w--)e(_,this.bufferFrames++,w,v),S.push(this.bufferSlack-=g);return S})()}else return this.bufferTime=h.time,this.bufferDelta=h.delta,this.bufferClock=h.clock,this.bufferStep=h.step,e(function(){},this.bufferFrames++,0,1)}alignShader(e,t){const{minFilter:n,magFilter:r,aligned:s}=this.props,o=e.items>1&&e.width>1||e.height>1&&e.depth>1;return s||!o?void 0:(n===this.node.attributes["texture.minFilter"].enum.nearest&&r===this.node.attributes["texture.magFilter"].enum.nearest||console.warn(`${this.node.toString()} - Cannot use linear min/magFilter with 3D/4D sampling`),t.pipe("map.xyzw.align"))}};k_.initClass();class i5 extends k_{static initClass(){this.traits=["node","buffer","active","data","source","index","array","texture","raw"]}init(){return this.buffer=this.spec=null,this.space={width:0,history:0},this.used={width:0},this.storage="arrayBuffer",this.passthrough=(e,t)=>e(t,0,0,0),super.init()}sourceShader(e){const t=this.getDimensions();return this.alignShader(t,e),this.buffer.shader(e)}getDimensions(){return{items:this.items,width:this.space.width,height:this.space.history,depth:1}}getActiveDimensions(){return{items:this.items,width:this.used.width,height:this.buffer.getFilled(),depth:1}}getFutureDimensions(){return{items:this.items,width:this.used.width,height:this.space.history,depth:1}}getRawDimensions(){return{items:this.items,width:this.space.width,height:1,depth:1}}make(){super.make();const e=this.minFilter!=null?this.minFilter:this.props.minFilter,t=this.magFilter!=null?this.magFilter:this.props.magFilter,n=this.type!=null?this.type:this.props.type,{width:r}=this.props,{history:s}=this.props,o=this.props.bufferWidth,{channels:a}=this.props,{items:l}=this.props;let c=this.spec={channels:a,items:l,width:r};this.items=c.items,this.channels=c.channels;const{data:u}=this.props;c=ff(u,c);const{space:h}=this;return h.width=Math.max(o,c.width||1),h.history=s,this.buffer=this._renderables.make(this.storage,{width:h.width,history:h.history,channels:a,items:l,minFilter:e,magFilter:t,type:n})}unmake(){if(super.unmake(),this.buffer)return this.buffer.dispose(),this.buffer=this.spec=null}change(e,t,n){if(t.texture||e["history.history"]||e["buffer.channels"]||e["buffer.items"]||e["array.bufferWidth"])return this.rebuild();if(this.buffer){if(e["array.width"]){const{width:r,bufferWidth:s}=this.props;if(this.spec.width=r,r>s)return this.rebuild()}if(e["data.map"]||e["data.data"]||e["data.resolve"]||e["data.expr"]||n)return this.buffer.setCallback(this.emitter())}}callback(e){return e.length<=2?e:(t,n)=>e(t,n,this.bufferClock,this.bufferStep)}update(){if(!this.buffer)return;const{data:e}=this.props;let{width:t}=this.props;const{space:n,used:r}=this,s=r.width,o=this.buffer.getFilled();if(this.syncBuffer(a=>{if(e!=null){const l=ff(e,this.spec);return l.width>n.width?(a(),this.rebuild()):(r.width=l.width,this.buffer.setActive(r.width),typeof this.buffer.callback.rebind=="function"&&this.buffer.callback.rebind(e),this.buffer.update())}else return t=this.spec.width||1,this.buffer.setActive(t),t=this.buffer.update(),r.width=t}),r.width!==s||o!==this.buffer.getFilled())return this.trigger({type:"source.resize"})}}i5.initClass();class QI extends i5{static initClass(){this.traits=["node","buffer","active","data","source","index","texture","array","span","interval","sampler","raw"]}updateSpan(){let e;const t=this.props.axis;let{width:n}=this.props;const{centered:r}=this.props,s=this.props.padding,o=this._helpers.span.get("",t);n+=s*2,this.a=o.x;const a=o.y-o.x;return r?(e=1/Math.max(1,n),this.a+=a*e/2):e=1/Math.max(1,n-1),this.b=a*e,this.a+=s*this.b}callback(e){return this.updateSpan(),this.last===e?this._callback:(this.last=e,e.length<=3?this._callback=(t,n)=>{const r=this.a+this.b*n;return e(t,r,n)}:this._callback=(t,n)=>{const r=this.a+this.b*n;return e(t,r,n,this.bufferClock,this.bufferStep)})}make(){return super.make(),this._helpers.span.make(),this._listen(this,"span.range",this.updateSpan)}unmake(){return super.unmake(),this._helpers.span.unmake()}change(e,t,n){super.change(e,t,n),t.span&&this.updateSpan()}}QI.initClass();function WIe(){this.__data__=[],this.size=0}var jIe=WIe;function $Ie(i,e){return i===e||i!==i&&e!==e}var r5=$Ie,XIe=r5;function YIe(i,e){for(var t=i.length;t--;)if(XIe(i[t][0],e))return t;return-1}var y4=YIe,KIe=y4,ZIe=Array.prototype,JIe=ZIe.splice;function QIe(i){var e=this.__data__,t=KIe(e,i);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():JIe.call(e,t,1),--this.size,!0}var eNe=QIe,tNe=y4;function nNe(i){var e=this.__data__,t=tNe(e,i);return t<0?void 0:e[t][1]}var iNe=nNe,rNe=y4;function sNe(i){return rNe(this.__data__,i)>-1}var oNe=sNe,aNe=y4;function lNe(i,e){var t=this.__data__,n=aNe(t,i);return n<0?(++this.size,t.push([i,e])):t[n][1]=e,this}var cNe=lNe,uNe=jIe,hNe=eNe,dNe=iNe,fNe=oNe,pNe=cNe;function kg(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}kg.prototype.clear=uNe;kg.prototype.delete=hNe;kg.prototype.get=dNe;kg.prototype.has=fNe;kg.prototype.set=pNe;var x4=kg,mNe=x4;function gNe(){this.__data__=new mNe,this.size=0}var vNe=gNe;function _Ne(i){var e=this.__data__,t=e.delete(i);return this.size=e.size,t}var bNe=_Ne;function yNe(i){return this.__data__.get(i)}var xNe=yNe;function wNe(i){return this.__data__.has(i)}var SNe=wNe,MNe=typeof it=="object"&&it&&it.Object===Object&&it,eN=MNe,CNe=eN,ENe=typeof self=="object"&&self&&self.Object===Object&&self,TNe=CNe||ENe||Function("return this")(),Zu=TNe,ANe=Zu,PNe=ANe.Symbol,w4=PNe,tk=w4,tN=Object.prototype,kNe=tN.hasOwnProperty,RNe=tN.toString,Iv=tk?tk.toStringTag:void 0;function ONe(i){var e=kNe.call(i,Iv),t=i[Iv];try{i[Iv]=void 0;var n=!0}catch{}var r=RNe.call(i);return n&&(e?i[Iv]=t:delete i[Iv]),r}var LNe=ONe,DNe=Object.prototype,zNe=DNe.toString;function INe(i){return zNe.call(i)}var NNe=INe,nk=w4,UNe=LNe,FNe=NNe,BNe="[object Null]",VNe="[object Undefined]",ik=nk?nk.toStringTag:void 0;function HNe(i){return i==null?i===void 0?VNe:BNe:ik&&ik in Object(i)?UNe(i):FNe(i)}var S4=HNe;function qNe(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var R_=qNe,GNe=S4,WNe=R_,jNe="[object AsyncFunction]",$Ne="[object Function]",XNe="[object GeneratorFunction]",YNe="[object Proxy]";function KNe(i){if(!WNe(i))return!1;var e=GNe(i);return e==$Ne||e==XNe||e==jNe||e==YNe}var nN=KNe,ZNe=Zu,JNe=ZNe["__core-js_shared__"],QNe=JNe,wM=QNe,rk=function(){var i=/[^.]+$/.exec(wM&&wM.keys&&wM.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function eUe(i){return!!rk&&rk in i}var tUe=eUe,nUe=Function.prototype,iUe=nUe.toString;function rUe(i){if(i!=null){try{return iUe.call(i)}catch{}try{return i+""}catch{}}return""}var iN=rUe,sUe=nN,oUe=tUe,aUe=R_,lUe=iN,cUe=/[\\^$.*+?()[\]{}|]/g,uUe=/^\[object .+?Constructor\]$/,hUe=Function.prototype,dUe=Object.prototype,fUe=hUe.toString,pUe=dUe.hasOwnProperty,mUe=RegExp("^"+fUe.call(pUe).replace(cUe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gUe(i){if(!aUe(i)||oUe(i))return!1;var e=sUe(i)?mUe:uUe;return e.test(lUe(i))}var vUe=gUe;function _Ue(i,e){return i==null?void 0:i[e]}var bUe=_Ue,yUe=vUe,xUe=bUe;function wUe(i,e){var t=xUe(i,e);return yUe(t)?t:void 0}var p0=wUe,SUe=p0,MUe=Zu,CUe=SUe(MUe,"Map"),s5=CUe,EUe=p0,TUe=EUe(Object,"create"),M4=TUe,sk=M4;function AUe(){this.__data__=sk?sk(null):{},this.size=0}var PUe=AUe;function kUe(i){var e=this.has(i)&&delete this.__data__[i];return this.size-=e?1:0,e}var RUe=kUe,OUe=M4,LUe="__lodash_hash_undefined__",DUe=Object.prototype,zUe=DUe.hasOwnProperty;function IUe(i){var e=this.__data__;if(OUe){var t=e[i];return t===LUe?void 0:t}return zUe.call(e,i)?e[i]:void 0}var NUe=IUe,UUe=M4,FUe=Object.prototype,BUe=FUe.hasOwnProperty;function VUe(i){var e=this.__data__;return UUe?e[i]!==void 0:BUe.call(e,i)}var HUe=VUe,qUe=M4,GUe="__lodash_hash_undefined__";function WUe(i,e){var t=this.__data__;return this.size+=this.has(i)?0:1,t[i]=qUe&&e===void 0?GUe:e,this}var jUe=WUe,$Ue=PUe,XUe=RUe,YUe=NUe,KUe=HUe,ZUe=jUe;function Rg(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}Rg.prototype.clear=$Ue;Rg.prototype.delete=XUe;Rg.prototype.get=YUe;Rg.prototype.has=KUe;Rg.prototype.set=ZUe;var JUe=Rg,ok=JUe,QUe=x4,eFe=s5;function tFe(){this.size=0,this.__data__={hash:new ok,map:new(eFe||QUe),string:new ok}}var nFe=tFe;function iFe(i){var e=typeof i;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?i!=="__proto__":i===null}var rFe=iFe,sFe=rFe;function oFe(i,e){var t=i.__data__;return sFe(e)?t[typeof e=="string"?"string":"hash"]:t.map}var C4=oFe,aFe=C4;function lFe(i){var e=aFe(this,i).delete(i);return this.size-=e?1:0,e}var cFe=lFe,uFe=C4;function hFe(i){return uFe(this,i).get(i)}var dFe=hFe,fFe=C4;function pFe(i){return fFe(this,i).has(i)}var mFe=pFe,gFe=C4;function vFe(i,e){var t=gFe(this,i),n=t.size;return t.set(i,e),this.size+=t.size==n?0:1,this}var _Fe=vFe,bFe=nFe,yFe=cFe,xFe=dFe,wFe=mFe,SFe=_Fe;function Og(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}Og.prototype.clear=bFe;Og.prototype.delete=yFe;Og.prototype.get=xFe;Og.prototype.has=wFe;Og.prototype.set=SFe;var rN=Og,MFe=x4,CFe=s5,EFe=rN,TFe=200;function AFe(i,e){var t=this.__data__;if(t instanceof MFe){var n=t.__data__;if(!CFe||n.length<TFe-1)return n.push([i,e]),this.size=++t.size,this;t=this.__data__=new EFe(n)}return t.set(i,e),this.size=t.size,this}var PFe=AFe,kFe=x4,RFe=vNe,OFe=bNe,LFe=xNe,DFe=SNe,zFe=PFe;function Lg(i){var e=this.__data__=new kFe(i);this.size=e.size}Lg.prototype.clear=RFe;Lg.prototype.delete=OFe;Lg.prototype.get=LFe;Lg.prototype.has=DFe;Lg.prototype.set=zFe;var sN=Lg;function IFe(i,e){for(var t=-1,n=i==null?0:i.length;++t<n&&e(i[t],t,i)!==!1;);return i}var NFe=IFe,UFe=p0,FFe=function(){try{var i=UFe(Object,"defineProperty");return i({},"",{}),i}catch{}}(),BFe=FFe,ak=BFe;function VFe(i,e,t){e=="__proto__"&&ak?ak(i,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):i[e]=t}var oN=VFe,HFe=oN,qFe=r5,GFe=Object.prototype,WFe=GFe.hasOwnProperty;function jFe(i,e,t){var n=i[e];(!(WFe.call(i,e)&&qFe(n,t))||t===void 0&&!(e in i))&&HFe(i,e,t)}var aN=jFe,$Fe=aN,XFe=oN;function YFe(i,e,t,n){var r=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=n?n(t[a],i[a],a,t,i):void 0;l===void 0&&(l=i[a]),r?XFe(t,a,l):$Fe(t,a,l)}return t}var E4=YFe;function KFe(i,e){for(var t=-1,n=Array(i);++t<i;)n[t]=e(t);return n}var ZFe=KFe;function JFe(i){return i!=null&&typeof i=="object"}var Dg=JFe,QFe=S4,eBe=Dg,tBe="[object Arguments]";function nBe(i){return eBe(i)&&QFe(i)==tBe}var iBe=nBe,lk=iBe,rBe=Dg,lN=Object.prototype,sBe=lN.hasOwnProperty,oBe=lN.propertyIsEnumerable,aBe=lk(function(){return arguments}())?lk:function(i){return rBe(i)&&sBe.call(i,"callee")&&!oBe.call(i,"callee")},lBe=aBe,cBe=Array.isArray,T4=cBe,Lw={exports:{}};function uBe(){return!1}var hBe=uBe;Lw.exports;(function(i,e){var t=Zu,n=hBe,r=e&&!e.nodeType&&e,s=r&&!0&&i&&!i.nodeType&&i,o=s&&s.exports===r,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||n;i.exports=c})(Lw,Lw.exports);var o5=Lw.exports,dBe=9007199254740991,fBe=/^(?:0|[1-9]\d*)$/;function pBe(i,e){var t=typeof i;return e=e??dBe,!!e&&(t=="number"||t!="symbol"&&fBe.test(i))&&i>-1&&i%1==0&&i<e}var mBe=pBe,gBe=9007199254740991;function vBe(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=gBe}var cN=vBe,_Be=S4,bBe=cN,yBe=Dg,xBe="[object Arguments]",wBe="[object Array]",SBe="[object Boolean]",MBe="[object Date]",CBe="[object Error]",EBe="[object Function]",TBe="[object Map]",ABe="[object Number]",PBe="[object Object]",kBe="[object RegExp]",RBe="[object Set]",OBe="[object String]",LBe="[object WeakMap]",DBe="[object ArrayBuffer]",zBe="[object DataView]",IBe="[object Float32Array]",NBe="[object Float64Array]",UBe="[object Int8Array]",FBe="[object Int16Array]",BBe="[object Int32Array]",VBe="[object Uint8Array]",HBe="[object Uint8ClampedArray]",qBe="[object Uint16Array]",GBe="[object Uint32Array]",Or={};Or[IBe]=Or[NBe]=Or[UBe]=Or[FBe]=Or[BBe]=Or[VBe]=Or[HBe]=Or[qBe]=Or[GBe]=!0;Or[xBe]=Or[wBe]=Or[DBe]=Or[SBe]=Or[zBe]=Or[MBe]=Or[CBe]=Or[EBe]=Or[TBe]=Or[ABe]=Or[PBe]=Or[kBe]=Or[RBe]=Or[OBe]=Or[LBe]=!1;function WBe(i){return yBe(i)&&bBe(i.length)&&!!Or[_Be(i)]}var jBe=WBe;function $Be(i){return function(e){return i(e)}}var a5=$Be,Dw={exports:{}};Dw.exports;(function(i,e){var t=eN,n=e&&!e.nodeType&&e,r=n&&!0&&i&&!i.nodeType&&i,s=r&&r.exports===n,o=s&&t.process,a=function(){try{var l=r&&r.require&&r.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();i.exports=a})(Dw,Dw.exports);var l5=Dw.exports,XBe=jBe,YBe=a5,ck=l5,uk=ck&&ck.isTypedArray,KBe=uk?YBe(uk):XBe,uN=KBe,ZBe=ZFe,JBe=lBe,QBe=T4,eVe=o5,tVe=mBe,nVe=uN,iVe=Object.prototype,rVe=iVe.hasOwnProperty;function sVe(i,e){var t=QBe(i),n=!t&&JBe(i),r=!t&&!n&&eVe(i),s=!t&&!n&&!r&&nVe(i),o=t||n||r||s,a=o?ZBe(i.length,String):[],l=a.length;for(var c in i)(e||rVe.call(i,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||tVe(c,l)))&&a.push(c);return a}var hN=sVe,oVe=Object.prototype;function aVe(i){var e=i&&i.constructor,t=typeof e=="function"&&e.prototype||oVe;return i===t}var c5=aVe;function lVe(i,e){return function(t){return i(e(t))}}var dN=lVe,cVe=dN,uVe=cVe(Object.keys,Object),hVe=uVe,dVe=c5,fVe=hVe,pVe=Object.prototype,mVe=pVe.hasOwnProperty;function gVe(i){if(!dVe(i))return fVe(i);var e=[];for(var t in Object(i))mVe.call(i,t)&&t!="constructor"&&e.push(t);return e}var vVe=gVe,_Ve=nN,bVe=cN;function yVe(i){return i!=null&&bVe(i.length)&&!_Ve(i)}var fN=yVe,xVe=hN,wVe=vVe,SVe=fN;function MVe(i){return SVe(i)?xVe(i):wVe(i)}var u5=MVe,CVe=E4,EVe=u5;function TVe(i,e){return i&&CVe(e,EVe(e),i)}var AVe=TVe;function PVe(i){var e=[];if(i!=null)for(var t in Object(i))e.push(t);return e}var kVe=PVe,RVe=R_,OVe=c5,LVe=kVe,DVe=Object.prototype,zVe=DVe.hasOwnProperty;function IVe(i){if(!RVe(i))return LVe(i);var e=OVe(i),t=[];for(var n in i)n=="constructor"&&(e||!zVe.call(i,n))||t.push(n);return t}var NVe=IVe,UVe=hN,FVe=NVe,BVe=fN;function VVe(i){return BVe(i)?UVe(i,!0):FVe(i)}var h5=VVe,HVe=E4,qVe=h5;function GVe(i,e){return i&&HVe(e,qVe(e),i)}var WVe=GVe,zw={exports:{}};zw.exports;(function(i,e){var t=Zu,n=e&&!e.nodeType&&e,r=n&&!0&&i&&!i.nodeType&&i,s=r&&r.exports===n,o=s?t.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var h=c.length,d=a?a(h):new c.constructor(h);return c.copy(d),d}i.exports=l})(zw,zw.exports);var jVe=zw.exports;function $Ve(i,e){var t=-1,n=i.length;for(e||(e=Array(n));++t<n;)e[t]=i[t];return e}var XVe=$Ve;function YVe(i,e){for(var t=-1,n=i==null?0:i.length,r=0,s=[];++t<n;){var o=i[t];e(o,t,i)&&(s[r++]=o)}return s}var KVe=YVe;function ZVe(){return[]}var pN=ZVe,JVe=KVe,QVe=pN,eHe=Object.prototype,tHe=eHe.propertyIsEnumerable,hk=Object.getOwnPropertySymbols,nHe=hk?function(i){return i==null?[]:(i=Object(i),JVe(hk(i),function(e){return tHe.call(i,e)}))}:QVe,d5=nHe,iHe=E4,rHe=d5;function sHe(i,e){return iHe(i,rHe(i),e)}var oHe=sHe;function aHe(i,e){for(var t=-1,n=e.length,r=i.length;++t<n;)i[r+t]=e[t];return i}var mN=aHe,lHe=dN,cHe=lHe(Object.getPrototypeOf,Object),gN=cHe,uHe=mN,hHe=gN,dHe=d5,fHe=pN,pHe=Object.getOwnPropertySymbols,mHe=pHe?function(i){for(var e=[];i;)uHe(e,dHe(i)),i=hHe(i);return e}:fHe,vN=mHe,gHe=E4,vHe=vN;function _He(i,e){return gHe(i,vHe(i),e)}var bHe=_He,yHe=mN,xHe=T4;function wHe(i,e,t){var n=e(i);return xHe(i)?n:yHe(n,t(i))}var _N=wHe,SHe=_N,MHe=d5,CHe=u5;function EHe(i){return SHe(i,CHe,MHe)}var bN=EHe,THe=_N,AHe=vN,PHe=h5;function kHe(i){return THe(i,PHe,AHe)}var RHe=kHe,OHe=p0,LHe=Zu,DHe=OHe(LHe,"DataView"),zHe=DHe,IHe=p0,NHe=Zu,UHe=IHe(NHe,"Promise"),FHe=UHe,BHe=p0,VHe=Zu,HHe=BHe(VHe,"Set"),qHe=HHe,GHe=p0,WHe=Zu,jHe=GHe(WHe,"WeakMap"),$He=jHe,DE=zHe,zE=s5,IE=FHe,NE=qHe,UE=$He,yN=S4,zg=iN,dk="[object Map]",XHe="[object Object]",fk="[object Promise]",pk="[object Set]",mk="[object WeakMap]",gk="[object DataView]",YHe=zg(DE),KHe=zg(zE),ZHe=zg(IE),JHe=zg(NE),QHe=zg(UE),Sp=yN;(DE&&Sp(new DE(new ArrayBuffer(1)))!=gk||zE&&Sp(new zE)!=dk||IE&&Sp(IE.resolve())!=fk||NE&&Sp(new NE)!=pk||UE&&Sp(new UE)!=mk)&&(Sp=function(i){var e=yN(i),t=e==XHe?i.constructor:void 0,n=t?zg(t):"";if(n)switch(n){case YHe:return gk;case KHe:return dk;case ZHe:return fk;case JHe:return pk;case QHe:return mk}return e});var A4=Sp,eqe=Object.prototype,tqe=eqe.hasOwnProperty;function nqe(i){var e=i.length,t=new i.constructor(e);return e&&typeof i[0]=="string"&&tqe.call(i,"index")&&(t.index=i.index,t.input=i.input),t}var iqe=nqe,rqe=Zu,sqe=rqe.Uint8Array,xN=sqe,vk=xN;function oqe(i){var e=new i.constructor(i.byteLength);return new vk(e).set(new vk(i)),e}var f5=oqe,aqe=f5;function lqe(i,e){var t=e?aqe(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.byteLength)}var cqe=lqe,uqe=/\w*$/;function hqe(i){var e=new i.constructor(i.source,uqe.exec(i));return e.lastIndex=i.lastIndex,e}var dqe=hqe,_k=w4,bk=_k?_k.prototype:void 0,yk=bk?bk.valueOf:void 0;function fqe(i){return yk?Object(yk.call(i)):{}}var pqe=fqe,mqe=f5;function gqe(i,e){var t=e?mqe(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.length)}var vqe=gqe,_qe=f5,bqe=cqe,yqe=dqe,xqe=pqe,wqe=vqe,Sqe="[object Boolean]",Mqe="[object Date]",Cqe="[object Map]",Eqe="[object Number]",Tqe="[object RegExp]",Aqe="[object Set]",Pqe="[object String]",kqe="[object Symbol]",Rqe="[object ArrayBuffer]",Oqe="[object DataView]",Lqe="[object Float32Array]",Dqe="[object Float64Array]",zqe="[object Int8Array]",Iqe="[object Int16Array]",Nqe="[object Int32Array]",Uqe="[object Uint8Array]",Fqe="[object Uint8ClampedArray]",Bqe="[object Uint16Array]",Vqe="[object Uint32Array]";function Hqe(i,e,t){var n=i.constructor;switch(e){case Rqe:return _qe(i);case Sqe:case Mqe:return new n(+i);case Oqe:return bqe(i,t);case Lqe:case Dqe:case zqe:case Iqe:case Nqe:case Uqe:case Fqe:case Bqe:case Vqe:return wqe(i,t);case Cqe:return new n;case Eqe:case Pqe:return new n(i);case Tqe:return yqe(i);case Aqe:return new n;case kqe:return xqe(i)}}var qqe=Hqe,Gqe=R_,xk=Object.create,Wqe=function(){function i(){}return function(e){if(!Gqe(e))return{};if(xk)return xk(e);i.prototype=e;var t=new i;return i.prototype=void 0,t}}(),jqe=Wqe,$qe=jqe,Xqe=gN,Yqe=c5;function Kqe(i){return typeof i.constructor=="function"&&!Yqe(i)?$qe(Xqe(i)):{}}var Zqe=Kqe,Jqe=A4,Qqe=Dg,eGe="[object Map]";function tGe(i){return Qqe(i)&&Jqe(i)==eGe}var nGe=tGe,iGe=nGe,rGe=a5,wk=l5,Sk=wk&&wk.isMap,sGe=Sk?rGe(Sk):iGe,oGe=sGe,aGe=A4,lGe=Dg,cGe="[object Set]";function uGe(i){return lGe(i)&&aGe(i)==cGe}var hGe=uGe,dGe=hGe,fGe=a5,Mk=l5,Ck=Mk&&Mk.isSet,pGe=Ck?fGe(Ck):dGe,mGe=pGe,gGe=sN,vGe=NFe,_Ge=aN,bGe=AVe,yGe=WVe,xGe=jVe,wGe=XVe,SGe=oHe,MGe=bHe,CGe=bN,EGe=RHe,TGe=A4,AGe=iqe,PGe=qqe,kGe=Zqe,RGe=T4,OGe=o5,LGe=oGe,DGe=R_,zGe=mGe,IGe=u5,NGe=h5,UGe=1,FGe=2,BGe=4,wN="[object Arguments]",VGe="[object Array]",HGe="[object Boolean]",qGe="[object Date]",GGe="[object Error]",SN="[object Function]",WGe="[object GeneratorFunction]",jGe="[object Map]",$Ge="[object Number]",MN="[object Object]",XGe="[object RegExp]",YGe="[object Set]",KGe="[object String]",ZGe="[object Symbol]",JGe="[object WeakMap]",QGe="[object ArrayBuffer]",eWe="[object DataView]",tWe="[object Float32Array]",nWe="[object Float64Array]",iWe="[object Int8Array]",rWe="[object Int16Array]",sWe="[object Int32Array]",oWe="[object Uint8Array]",aWe="[object Uint8ClampedArray]",lWe="[object Uint16Array]",cWe="[object Uint32Array]",Cr={};Cr[wN]=Cr[VGe]=Cr[QGe]=Cr[eWe]=Cr[HGe]=Cr[qGe]=Cr[tWe]=Cr[nWe]=Cr[iWe]=Cr[rWe]=Cr[sWe]=Cr[jGe]=Cr[$Ge]=Cr[MN]=Cr[XGe]=Cr[YGe]=Cr[KGe]=Cr[ZGe]=Cr[oWe]=Cr[aWe]=Cr[lWe]=Cr[cWe]=!0;Cr[GGe]=Cr[SN]=Cr[JGe]=!1;function cw(i,e,t,n,r,s){var o,a=e&UGe,l=e&FGe,c=e&BGe;if(t&&(o=r?t(i,n,r,s):t(i)),o!==void 0)return o;if(!DGe(i))return i;var u=RGe(i);if(u){if(o=AGe(i),!a)return wGe(i,o)}else{var h=TGe(i),d=h==SN||h==WGe;if(OGe(i))return xGe(i,a);if(h==MN||h==wN||d&&!r){if(o=l||d?{}:kGe(i),!a)return l?MGe(i,yGe(o,i)):SGe(i,bGe(o,i))}else{if(!Cr[h])return r?i:{};o=PGe(i,h,a)}}s||(s=new gGe);var f=s.get(i);if(f)return f;s.set(i,o),zGe(i)?i.forEach(function(y){o.add(cw(y,e,t,y,i,s))}):LGe(i)&&i.forEach(function(y,_){o.set(_,cw(y,e,t,_,i,s))});var g=c?l?EGe:CGe:l?NGe:IGe,v=u?void 0:g(i);return vGe(v||i,function(y,_){v&&(_=y,y=i[_]),_Ge(o,_,cw(y,e,t,_,i,s))}),o}var uWe=cw,hWe=uWe,dWe=1,fWe=4;function pWe(i){return hWe(i,dWe|fWe)}var mWe=pWe;const gWe=s0(mWe);var vWe="__lodash_hash_undefined__";function _We(i){return this.__data__.set(i,vWe),this}var bWe=_We;function yWe(i){return this.__data__.has(i)}var xWe=yWe,wWe=rN,SWe=bWe,MWe=xWe;function Iw(i){var e=-1,t=i==null?0:i.length;for(this.__data__=new wWe;++e<t;)this.add(i[e])}Iw.prototype.add=Iw.prototype.push=SWe;Iw.prototype.has=MWe;var CWe=Iw;function EWe(i,e){for(var t=-1,n=i==null?0:i.length;++t<n;)if(e(i[t],t,i))return!0;return!1}var TWe=EWe;function AWe(i,e){return i.has(e)}var PWe=AWe,kWe=CWe,RWe=TWe,OWe=PWe,LWe=1,DWe=2;function zWe(i,e,t,n,r,s){var o=t&LWe,a=i.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(i),u=s.get(e);if(c&&u)return c==e&&u==i;var h=-1,d=!0,f=t&DWe?new kWe:void 0;for(s.set(i,e),s.set(e,i);++h<a;){var g=i[h],v=e[h];if(n)var y=o?n(v,g,h,e,i,s):n(g,v,h,i,e,s);if(y!==void 0){if(y)continue;d=!1;break}if(f){if(!RWe(e,function(_,S){if(!OWe(f,S)&&(g===_||r(g,_,t,n,s)))return f.push(S)})){d=!1;break}}else if(!(g===v||r(g,v,t,n,s))){d=!1;break}}return s.delete(i),s.delete(e),d}var CN=zWe;function IWe(i){var e=-1,t=Array(i.size);return i.forEach(function(n,r){t[++e]=[r,n]}),t}var NWe=IWe;function UWe(i){var e=-1,t=Array(i.size);return i.forEach(function(n){t[++e]=n}),t}var FWe=UWe,Ek=w4,Tk=xN,BWe=r5,VWe=CN,HWe=NWe,qWe=FWe,GWe=1,WWe=2,jWe="[object Boolean]",$We="[object Date]",XWe="[object Error]",YWe="[object Map]",KWe="[object Number]",ZWe="[object RegExp]",JWe="[object Set]",QWe="[object String]",eje="[object Symbol]",tje="[object ArrayBuffer]",nje="[object DataView]",Ak=Ek?Ek.prototype:void 0,SM=Ak?Ak.valueOf:void 0;function ije(i,e,t,n,r,s,o){switch(t){case nje:if(i.byteLength!=e.byteLength||i.byteOffset!=e.byteOffset)return!1;i=i.buffer,e=e.buffer;case tje:return!(i.byteLength!=e.byteLength||!s(new Tk(i),new Tk(e)));case jWe:case $We:case KWe:return BWe(+i,+e);case XWe:return i.name==e.name&&i.message==e.message;case ZWe:case QWe:return i==e+"";case YWe:var a=HWe;case JWe:var l=n&GWe;if(a||(a=qWe),i.size!=e.size&&!l)return!1;var c=o.get(i);if(c)return c==e;n|=WWe,o.set(i,e);var u=VWe(a(i),a(e),n,r,s,o);return o.delete(i),u;case eje:if(SM)return SM.call(i)==SM.call(e)}return!1}var rje=ije,Pk=bN,sje=1,oje=Object.prototype,aje=oje.hasOwnProperty;function lje(i,e,t,n,r,s){var o=t&sje,a=Pk(i),l=a.length,c=Pk(e),u=c.length;if(l!=u&&!o)return!1;for(var h=l;h--;){var d=a[h];if(!(o?d in e:aje.call(e,d)))return!1}var f=s.get(i),g=s.get(e);if(f&&g)return f==e&&g==i;var v=!0;s.set(i,e),s.set(e,i);for(var y=o;++h<l;){d=a[h];var _=i[d],S=e[d];if(n)var w=o?n(S,_,d,e,i,s):n(_,S,d,i,e,s);if(!(w===void 0?_===S||r(_,S,t,n,s):w)){v=!1;break}y||(y=d=="constructor")}if(v&&!y){var C=i.constructor,E=e.constructor;C!=E&&"constructor"in i&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof E=="function"&&E instanceof E)&&(v=!1)}return s.delete(i),s.delete(e),v}var cje=lje,MM=sN,uje=CN,hje=rje,dje=cje,kk=A4,Rk=T4,Ok=o5,fje=uN,pje=1,Lk="[object Arguments]",Dk="[object Array]",ox="[object Object]",mje=Object.prototype,zk=mje.hasOwnProperty;function gje(i,e,t,n,r,s){var o=Rk(i),a=Rk(e),l=o?Dk:kk(i),c=a?Dk:kk(e);l=l==Lk?ox:l,c=c==Lk?ox:c;var u=l==ox,h=c==ox,d=l==c;if(d&&Ok(i)){if(!Ok(e))return!1;o=!0,u=!1}if(d&&!u)return s||(s=new MM),o||fje(i)?uje(i,e,t,n,r,s):hje(i,e,l,t,n,r,s);if(!(t&pje)){var f=u&&zk.call(i,"__wrapped__"),g=h&&zk.call(e,"__wrapped__");if(f||g){var v=f?i.value():i,y=g?e.value():e;return s||(s=new MM),r(v,y,t,n,s)}}return d?(s||(s=new MM),dje(i,e,t,n,r,s)):!1}var vje=gje,_je=vje,Ik=Dg;function EN(i,e,t,n,r){return i===e?!0:i==null||e==null||!Ik(i)&&!Ik(e)?i!==i&&e!==e:_je(i,e,t,n,EN,r)}var bje=EN,yje=bje;function xje(i,e){return yje(i,e)}var wje=xje;const Sje=s0(wje);class TN extends cl{static initClass(){this.traits=["node","entity","active","latch"]}init(){this.data=void 0,this.isDirty=!0}make(){this._helpers.active.make(),this._listen("root","root.update",function(){this.isActive&&this.update()})}unmake(){this._helpers.active.unmake(),this.data=void 0}swap(){const{deep:e,data:t}=this.props;(e?!Sje(t,this.data):t!=this.data)&&(this.data=e?gWe(t):t)}update(){this.isDirty=this.swap()}}TN.initClass();class p5 extends k_{static initClass(){this.traits=["node","buffer","active","data","source","index","texture","matrix","raw"]}init(){return this.buffer=this.spec=null,this.space={width:0,height:0,history:0},this.used={width:0,height:0},this.storage="matrixBuffer",this.passthrough=(e,t,n)=>e(t,n,0,0),super.init()}sourceShader(e){const t=this.getDimensions();return this.alignShader(t,e),this.buffer.shader(e)}getDimensions(){return{items:this.items,width:this.space.width,height:this.space.height,depth:this.space.history}}getActiveDimensions(){return{items:this.items,width:this.used.width,height:this.used.height,depth:this.buffer.getFilled()}}getFutureDimensions(){return{items:this.items,width:this.used.width,height:this.used.height,depth:this.space.history}}getRawDimensions(){return{items:this.items,width:this.space.width,height:this.space.height,depth:1}}make(){super.make();const e=this.minFilter!=null?this.minFilter:this.props.minFilter,t=this.magFilter!=null?this.magFilter:this.props.magFilter,n=this.type!=null?this.type:this.props.type,{width:r}=this.props,{height:s}=this.props,{history:o}=this.props,a=this.props.bufferWidth,l=this.props.bufferHeight,{channels:c}=this.props,{items:u}=this.props;let h=this.spec={channels:c,items:u,width:r,height:s};this.items=h.items,this.channels=h.channels;const{data:d}=this.props;h=ff(d,h);const{space:f}=this;return f.width=Math.max(a,h.width||1),f.height=Math.max(l,h.height||1),f.history=o,this.buffer=this._renderables.make(this.storage,{width:f.width,height:f.height,history:f.history,channels:c,items:u,minFilter:e,magFilter:t,type:n})}unmake(){if(super.unmake(),this.buffer)return this.buffer.dispose(),this.buffer=this.spec=null}change(e,t,n){if(t.texture||e["matrix.history"]||e["buffer.channels"]||e["buffer.items"]||e["matrix.bufferWidth"]||e["matrix.bufferHeight"])return this.rebuild();if(this.buffer){if(e["matrix.width"]){const{width:r,bufferWidth:s}=this.props;if(this.spec.width=r,r>s)return this.rebuild()}if(e["matrix.height"]){const{height:r,bufferHeight:s}=this.props;if(this.spec.height=r,r>s)return this.rebuild()}if(e["data.map"]||e["data.data"]||e["data.resolve"]||e["data.expr"]||n)return this.buffer.setCallback(this.emitter())}}callback(e){return e.length<=3?e:(t,n,r)=>e(t,n,r,this.bufferClock,this.bufferStep)}update(){if(!this.buffer)return;const{data:e}=this.props,{space:t,used:n}=this,r=n.width,s=n.height,o=this.buffer.getFilled();if(this.syncBuffer(a=>{if(e!=null){const l=ff(e,this.spec);return l.width>t.width||l.height>t.height?(a(),this.rebuild()):(n.width=l.width,n.height=l.height,this.buffer.setActive(n.width,n.height),typeof this.buffer.callback.rebind=="function"&&this.buffer.callback.rebind(e),this.buffer.update())}else{let l;const c=this.spec.width||1,u=this.spec.height||1;this.buffer.setActive(c,u);const h=this.buffer.update();n.width=l=c,n.height=Math.min(u,Math.ceil(h/l)),n.height===1&&(n.width=Math.min(c,h))}}),n.width!==r||n.height!==s||o!==this.buffer.getFilled())return this.trigger({type:"source.resize"})}}p5.initClass();class AN extends p5{static initClass(){this.traits=["node","buffer","active","data","source","index","matrix","texture","raw","span:x","span:y","area","sampler:x","sampler:y"]}updateSpan(){let e,t;const n=this.props.axes;let{width:r}=this.props,{height:s}=this.props;const{centeredX:o}=this.props,{centeredY:a}=this.props,l=this.props.paddingX,c=this.props.paddingY,u=this._helpers.span.get("x.",n[0]),h=this._helpers.span.get("y.",n[1]);this.aX=u.x,this.aY=h.x;const d=u.y-u.x,f=h.y-h.x;return r+=l*2,s+=c*2,o?(e=1/Math.max(1,r),this.aX+=d*e/2):e=1/Math.max(1,r-1),a?(t=1/Math.max(1,s),this.aY+=f*t/2):t=1/Math.max(1,s-1),this.bX=d*e,this.bY=f*t,this.aX+=l*this.bX,this.aY+=c*this.bY}callback(e){return this.updateSpan(),this.last===e?this._callback:(this.last=e,e.length<=5?this._callback=(t,n,r)=>{const s=this.aX+this.bX*n,o=this.aY+this.bY*r;return e(t,s,o,n,r)}:this._callback=(t,n,r)=>{const s=this.aX+this.bX*n,o=this.aY+this.bY*r;return e(t,s,o,n,r,this.bufferClock,this.bufferStep)})}make(){return super.make(),this._helpers.span.make(),this._listen(this,"span.range",this.updateSpan)}unmake(){return super.unmake(),this._helpers.span.unmake()}change(e,t,n){super.change(e,t,n),(t.x||t.y)&&this.updateSpan()}}AN.initClass();class O_ extends k_{constructor(...e){super(...e),this.update=this.update.bind(this)}static initClass(){this.traits=["node","buffer","active","data","source","index","texture","voxel","raw"]}init(){this.buffer=this.spec=null,this.space={width:0,height:0,depth:0},this.used={width:0,height:0,depth:0},this.storage="voxelBuffer",this.passthrough=(e,t,n,r)=>e(t,n,r,0),super.init()}sourceShader(e){const t=this.getDimensions();return this.alignShader(t,e),this.buffer.shader(e)}getDimensions(){return{items:this.items,width:this.space.width,height:this.space.height,depth:this.space.depth}}getActiveDimensions(){return{items:this.items,width:this.used.width,height:this.used.height,depth:this.used.depth*this.buffer.getFilled()}}getRawDimensions(){return this.getDimensions()}make(){super.make();const e=this.minFilter!=null?this.minFilter:this.props.minFilter,t=this.magFilter!=null?this.magFilter:this.props.magFilter,n=this.type!=null?this.type:this.props.type,{width:r}=this.props,{height:s}=this.props,{depth:o}=this.props,a=this.props.bufferWidth,l=this.props.bufferHeight,c=this.props.bufferDepth,{channels:u}=this.props,{items:h}=this.props;let d=this.spec={channels:u,items:h,width:r,height:s,depth:o};this.items=d.items,this.channels=d.channels;const{data:f}=this.props;d=ff(f,d);const{space:g}=this;return g.width=Math.max(a,d.width||1),g.height=Math.max(l,d.height||1),g.depth=Math.max(c,d.depth||1),this.buffer=this._renderables.make(this.storage,{width:g.width,height:g.height,depth:g.depth,channels:u,items:h,minFilter:e,magFilter:t,type:n})}unmake(){if(super.unmake(),this.buffer)return this.buffer.dispose(),this.buffer=this.spec=null}change(e,t,n){if(t.texture||e["buffer.channels"]||e["buffer.items"]||e["voxel.bufferWidth"]||e["voxel.bufferHeight"]||e["voxel.bufferDepth"])return this.rebuild();if(this.buffer){if(e["voxel.width"]){const{width:r,bufferWidth:s}=this.props;if(this.spec.width=r,r>s)return this.rebuild()}if(e["voxel.height"]){const{height:r,bufferHeight:s}=this.props;if(this.spec.height=r,r>s)return this.rebuild()}if(e["voxel.depth"]){const{depth:r,bufferDepth:s}=this.props;if(this.spec.depth=r,r>s)return this.rebuild()}if(e["data.map"]||e["data.data"]||e["data.resolve"]||e["data.expr"]||n)return this.buffer.setCallback(this.emitter())}}callback(e){return e.length<=4?e:(t,n,r,s)=>e(t,n,r,s,this.bufferClock,this.bufferStep)}update(){if(!this.buffer)return;const{data:e}=this.props,{space:t,used:n}=this,r=n.width,s=n.height,o=n.depth,a=this.buffer.getFilled();if(this.syncBuffer(l=>{if(e!=null){const c=ff(e,this.spec);return c.width>t.width||c.height>t.height||c.depth>t.depth?(l(),this.rebuild()):(n.width=c.width,n.height=c.height,n.depth=c.depth,this.buffer.setActive(n.width,n.height,n.depth),typeof this.buffer.callback.rebind=="function"&&this.buffer.callback.rebind(e),this.buffer.update())}else{let c,u;const h=this.spec.width||1,d=this.spec.height||1,f=this.spec.depth||1;this.buffer.setActive(h,d,f);const g=this.buffer.update();n.width=u=h,n.height=c=d,n.depth=Math.min(f,Math.ceil(g/u/c)),n.depth===1&&(n.height=Math.min(d,Math.ceil(g/u)),n.height===1&&(n.width=Math.min(h,g)))}}),n.width!==r||n.height!==s||n.depth!==o||a!==this.buffer.getFilled())return this.trigger({type:"source.resize"})}}O_.initClass();class PN extends O_{static initClass(){this.traits=["node","buffer","active","data","source","index","texture","voxel","span:x","span:y","span:z","volume","sampler:x","sampler:y","sampler:z","raw"]}updateSpan(){let e,t,n;const r=this.props.axes;let{width:s}=this.props,{height:o}=this.props,{depth:a}=this.props;const{centeredX:l}=this.props,{centeredY:c}=this.props,{centeredZ:u}=this.props,h=this.props.paddingX,d=this.props.paddingY,f=this.props.paddingZ,g=this._helpers.span.get("x.",r[0]),v=this._helpers.span.get("y.",r[1]),y=this._helpers.span.get("z.",r[2]);this.aX=g.x,this.aY=v.x,this.aZ=y.x;const _=g.y-g.x,S=v.y-v.x,w=y.y-y.x;return s+=h*2,o+=d*2,a+=f*2,l?(e=1/Math.max(1,s),this.aX+=_*e/2):e=1/Math.max(1,s-1),c?(t=1/Math.max(1,o),this.aY+=S*t/2):t=1/Math.max(1,o-1),u?(n=1/Math.max(1,a),this.aZ+=w*n/2):n=1/Math.max(1,a-1),this.bX=_*e,this.bY=S*t,this.bZ=w*n,this.aX+=this.bX*h,this.aY+=this.bY*d,this.aZ+=this.bZ*d}callback(e){return this.updateSpan(),this.last===e?this._callback:(this.last=e,e.length<=7?this._callback=(t,n,r,s)=>{const o=this.aX+this.bX*n,a=this.aY+this.bY*r,l=this.aZ+this.bZ*s;return e(t,o,a,l,n,r,s)}:this._callback=(t,n,r,s)=>{const o=this.aX+this.bX*n,a=this.aY+this.bY*r,l=this.aZ+this.bZ*s;return e(t,o,a,l,n,r,s,this.bufferClock,this.bufferStep)})}make(){return super.make(),this._helpers.span.make(),this._listen(this,"span.range",this.updateSpan)}unmake(){return super.unmake(),this._helpers.span.unmake()}change(e,t,n){super.change(e,t,n),(t.x||t.y||t.z)&&this.updateSpan()}}PN.initClass();const m5=function(i,e,t){+e===e&&(e=[e]);const n=Array.from(e).includes(1)?0:t.x,r=Array.from(e).includes(2)?0:t.y,s=Array.from(e).includes(3)?0:t.z,o=Array.from(e).includes(4)?0:t.w;return i.set(n,r,s,o)},g5=function(){const i=new Li;return function(e,t,n){return m5(i,t,n),e.add(i)}}(),Vp=function(i,e){const t=e===1?1:0,n=e===2?1:0,r=e===3?1:0,s=e===4?1:0;return i.set(t,n,r,s)},Mje=function(i,e){const t=e===1?1:0,n=e===2?1:0,r=e===3?1:0,s=e===4?1:0;return i.set(n,r+t,s,0)},lg=function(){const i=[0,0];return function(e,t,n,r){if(r==null&&(r=0),n>0){const s=e,o=e+t,a=Math.max(Math.abs(s),Math.abs(o)),l=a*r,c=Math.min(s,o),u=Math.max(s,o);e=c+(-a+l-c)*n,t=u+(a+l-u)*n-e}return i[0]=e,i[1]=t,i}}(),Cje=Object.freeze(Object.defineProperty({__proto__:null,addOrigin:g5,recenterAxis:lg,setDimension:Vp,setDimensionNormal:Mje,setOrigin:m5},Symbol.toStringTag,{value:"Module"}));class kN extends b4{static initClass(){this.traits=["node","source","index","interval","span","scale","raw","origin"]}init(){return this.used=this.space=this.scaleAxis=this.sampler=null}rawBuffer(){return this.buffer}sourceShader(e){return e.pipe(this.sampler)}getDimensions(){return{items:1,width:this.space,height:1,depth:1}}getActiveDimensions(){return{items:1,width:this.used,height:this.buffer.getFilled(),depth:1}}getRawDimensions(){return this.getDimensions()}make(){let e;this.space=e=this._helpers.scale.divide(""),this.buffer=this._renderables.make("dataBuffer",{width:e,channels:1,items:1});const t={scaleAxis:this._attributes.make(this._types.vec4()),scaleOffset:this._attributes.make(this._types.vec4())};this.scaleAxis=t.scaleAxis.value,this.scaleOffset=t.scaleOffset.value;const n=this.sampler=this._shaders.shader();return n.require(this.buffer.shader(this._shaders.shader(),1)),n.pipe("scale.position",t),this._helpers.span.make(),this._listen(this,"span.range",this.updateRanges)}unmake(){return this.scaleAxis=null,this._helpers.span.unmake()}change(e,t,n){if(e["scale.divide"])return this.rebuild();if(t.view||t.interval||t.span||t.scale||t.origin||n)return this.updateRanges()}updateRanges(){const{used:e}=this,{axis:t,origin:n}=this.props,r=this._helpers.span.get("",t),s=r.x,o=r.y,a=this._helpers.scale.generate("",this.buffer,s,o);if(Vp(this.scaleAxis,t),m5(this.scaleOffset,t,n),this.used=a.length,this.used!==e)return this.trigger({type:"source.resize"})}}kN.initClass();const sl=function(){const i={};for(const e of Array.from(arguments))for(const t in e){const n=e[t];i[t]=n}return i},Eje=i=>JSON.parse(JSON.serialize(i)),RN=function(i){let e="";const t=o=>o=o.replace(/\\/g,""),n=function(o){return e.length&&s.push(t(e)),e=o??""};i=i.split(/(?=(?:\\.|["' ,]))/g);let r=!1;const s=[];for(const o of Array.from(i)){const a=o[0],l=o.slice(1);switch(a){case'"':case"'":if(r)r===a?(r=!1,n(l)):e+=o;else{if(e!=="")throw new Error(`ParseError: String \`${i}\` does not contain comma-separated quoted tokens.`);r=a,e+=l}break;case" ":case",":r?e+=o:n(l);break;default:e+=o}}return n(),s},Tje=Object.freeze(Object.defineProperty({__proto__:null,clone:Eje,merge:sl,parseQuoted:RN},Symbol.toStringTag,{value:"Module"}));let ON=class extends Ss{static initClass(){this.traits=["node","object","visible","style","line","axis","span","interval","arrow","position","origin","shade"],this.defaults={end:!0,zBias:-1}}constructor(e,t,n){super(e,t,n),this.axisPosition=this.axisStep=this.resolution=this.line=this.arrows=null}make(){const e={axisPosition:this._attributes.make(this._types.vec4()),axisStep:this._attributes.make(this._types.vec4())};this.axisPosition=e.axisPosition.value,this.axisStep=e.axisStep.value;let t=this._shaders.shader();t.pipe("axis.position",e),t=this._helpers.position.pipeline(t);const n=this._helpers.style.uniforms(),r=this._helpers.line.uniforms(),s=this._helpers.arrow.uniforms(),o=this._inherit("unit").getUnitUniforms(),{detail:a}=this.props,l=a+1;this.resolution=1/a;const{start:c,end:u}=this.props,{stroke:h,join:d}=this.props;let f=this._helpers.object.mask();const g=this._helpers.shade.pipeline()||!1,{crossed:v,axis:y}=this.props;if(!v&&f!=null&&y>1){const S=["x000","y000","z000","w000"][y];f=this._helpers.position.swizzle(f,S)}const _=sl(s,r,n,o);return this.line=this._renderables.make("line",{uniforms:_,samples:l,position:t,clip:c||u,stroke:h,join:d,mask:f,material:g}),this.arrows=[],c&&this.arrows.push(this._renderables.make("arrow",{uniforms:_,flip:!0,samples:l,position:t,mask:f,material:g})),u&&this.arrows.push(this._renderables.make("arrow",{uniforms:_,samples:l,position:t,mask:f,material:g})),this._helpers.visible.make(),this._helpers.object.make(this.arrows.concat([this.line])),this._helpers.span.make(),this._listen(this,"span.range",this.updateRanges)}unmake(){return this._helpers.visible.unmake(),this._helpers.object.unmake(),this._helpers.span.unmake()}change(e,t,n){if(e["axis.detail"]||e["line.stroke"]||e["line.join"]||e["axis.crossed"]||e["interval.axis"]&&this.props.crossed)return this.rebuild();if(t.interval||t.span||t.view||t.origin||n)return this.updateRanges()}updateRanges(){const{axis:e,origin:t}=this.props,n=this._helpers.span.get("",e),r=n.x,s=n.y;return Vp(this.axisPosition,e).multiplyScalar(r),Vp(this.axisStep,e).multiplyScalar((s-r)*this.resolution),g5(this.axisPosition,e,t)}};ON.initClass();let LN=class extends Ss{static initClass(){this.traits=["node","object","visible","style","line","mesh","face","geometry","position","bind","shade"]}constructor(e,t,n){super(e,t,n),this.face=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),{items:t,width:n,height:r,depth:s}=e;if(this.face&&this.face.geometry.clip(n,r,s,t),this.line&&this.line.geometry.clip(t,n,r,s),this.bind.map!=null){const o=this.bind.map.getActiveDimensions();if(this.face)return this.face.geometry.map(o.width,o.height,o.depth,o.items)}}make(){let e,t;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"mesh.map",trait:"source"}]),this.bind.points==null)return;let n=this.bind.points.sourceShader(this._shaders.shader());n=this._helpers.position.pipeline(n);const r=this._helpers.style.uniforms(),s=this._helpers.line.uniforms(),o=this._inherit("unit").getUnitUniforms(),a={};a.styleZBias=this._attributes.make(this._types.number()),this.wireZBias=a.styleZBias;const l=this.bind.points.getDimensions(),{items:c,width:u,height:h,depth:d}=l,{line:f,shaded:g,fill:v,stroke:y,join:_}=this.props;this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));const S=this._helpers.object.mask(),w=this._helpers.shade.map(this.bind.map!=null?this.bind.map.sourceShader(this._shaders.shader()):void 0),C=this._helpers.shade.pipeline(),E=C||g,k=C||!1,O=[];if(f){const R=this._shaders.shader();R.pipe(Za("yzwx")),R.pipe(n),t=sl(o,s,r,a),this.line=this._renderables.make("line",{uniforms:t,samples:c,strips:u,ribbons:h,layers:d,position:R,color:e,stroke:y,join:_,material:k,mask:S,closed:!0}),O.push(this.line)}return v&&(t=sl(o,r,{}),this.face=this._renderables.make("face",{uniforms:t,width:u,height:h,depth:d,items:c,position:n,color:e,material:E,mask:S,map:w}),O.push(this.face)),this._helpers.visible.make(),this._helpers.object.make(O)}made(){return this.resize()}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.face=this.line=null}change(e,t,n){if(e["geometry.points"]||t.mesh)return this.rebuild();if(e["style.zBias"]||e["mesh.lineBias"]||n){const{fill:r,zBias:s,lineBias:o}=this.props;return this.wireZBias.value=s+(r?o:0)}}};LN.initClass();let DN=class extends Ss{static initClass(){this.traits=["node","object","visible","style","line","grid","area","position","origin","shade","axis:x","axis:y","scale:x","scale:y","span:x","span:y"],this.defaults={width:1,zBias:-2}}constructor(e,t,n){super(e,t,n),this.axes=null}make(){let e,t=this._helpers.object.mask();const n=this._helpers.shade.pipeline()||!1;e=(d,f,g)=>{let v;const y=this._get(d+"axis.detail"),_=y+1,S=1/y,w=this._helpers.scale.divide(f),C=this._renderables.make("dataBuffer",{width:w,channels:1}),E={gridPosition:this._attributes.make(this._types.vec4()),gridStep:this._attributes.make(this._types.vec4()),gridAxis:this._attributes.make(this._types.vec4())},k={gridPosition:E.gridPosition.value,gridStep:E.gridStep.value,gridAxis:E.gridAxis.value},O=v=this._shaders.shader();g!=null&&t!=null&&(t=this._helpers.position.swizzle(t,g)),O.require(C.shader(this._shaders.shader(),2)),O.pipe("grid.position",E),v=this._helpers.position.pipeline(O);const R=this._helpers.style.uniforms(),A=this._helpers.line.uniforms(),D=this._inherit("unit").getUnitUniforms(),I=sl(A,R,D),q=this._renderables.make("line",{uniforms:I,samples:_,strips:w,position:v,stroke:c,join:u,mask:t,material:n});return{first:d,second:f,resolution:S,samples:_,line:q,buffer:C,values:k}};const{lineX:r,lineY:s,crossed:o,axes:a}=this.props,l=["0000","x000","y000","z000","w000"][a[1]],{stroke:c,join:u}=this.props;this.axes=[],r&&this.axes.push(e("x.","y.",null)),s&&this.axes.push(e("y.","x.",o?null:l));const h=(()=>{const d=[];for(e of this.axes)d.push(e.line);return d})();return this._helpers.visible.make(),this._helpers.object.make(h),this._helpers.span.make(),this._listen(this,"span.range",this.updateRanges)}unmake(){this._helpers.visible.unmake(),this._helpers.object.unmake(),this._helpers.span.unmake();for(const e of this.axes)e.buffer.dispose();this.axes=null}change(e,t,n){if(e["x.axis.detail"]||e["y.axis.detail"]||e["x.axis.factor"]||e["y.axis.factor"]||e["grid.lineX"]||e["grid.lineY"]||e["line.stroke"]||e["line.join"]||e["grid.crossed"]||e["grid.axes"]&&this.props.crossed)return this.rebuild();if(t.x||t.y||t.area||t.grid||t.view||t.origin||n)return this.updateRanges()}updateRanges(){const e=(l,c,u,h,d)=>{const{second:f,resolution:g,samples:v,line:y,buffer:_,values:S}=d;let w=u.x,C=u.y;Vp(S.gridPosition,l).multiplyScalar(w),Vp(S.gridStep,l).multiplyScalar((C-w)*g),g5(S.gridPosition,t,n),w=h.x,C=h.y;const E=this._helpers.scale.generate(f,_,w,C);Vp(S.gridAxis,c);const k=E.length;return y.geometry.clip(v,k,1,1)},{axes:t,origin:n}=this.props,r=this._helpers.span.get("x.",t[0]),s=this._helpers.span.get("y.",t[1]),{lineX:o,lineY:a}=this.props;o&&e(t[0],t[1],r,s,this.axes[0]),a&&e(t[1],t[0],s,r,this.axes[+o]),window.cake1=this.axes[0].buffer,window.cake2=this.axes[1].buffer,window.cake3=this.axes[0]}};DN.initClass();let zN=class extends Ss{static initClass(){this.traits=["node","object","visible","style","line","arrow","geometry","position","bind","shade"]}constructor(e,t,n){super(e,t,n),this.line=this.arrows=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),t=e.width,n=e.height,r=e.depth,s=e.items;return this.line.geometry.clip(t,n,r,s),Array.from(this.arrows).map(o=>o.geometry.clip(t,n,r,s))}make(){let e;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]),this.bind.points==null)return;let t=this._shaders.shader();t=this.bind.points.sourceShader(t),t=this._helpers.position.pipeline(t);const n=this._helpers.style.uniforms(),r=this._helpers.line.uniforms(),s=this._helpers.arrow.uniforms(),o=this._inherit("unit").getUnitUniforms(),{start:a,end:l}=this.props,{stroke:c,join:u,proximity:h,closed:d}=this.props;this.proximity=h;const f=this.bind.points.getDimensions(),g=f.width,v=f.height,y=f.depth,_=f.items;this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));const S=this._helpers.object.mask(),w=this._helpers.shade.pipeline()||!1,C=sl(s,r,n,o);return this.line=this._renderables.make("line",{uniforms:C,samples:g,strips:v,ribbons:y,layers:_,position:t,color:e,clip:a||l,stroke:c,join:u,proximity:h,closed:d,mask:S,material:w}),this.arrows=[],a&&this.arrows.push(this._renderables.make("arrow",{uniforms:C,flip:!0,samples:g,strips:v,ribbons:y,layers:_,position:t,color:e,closed:d,mask:S,material:w})),l&&this.arrows.push(this._renderables.make("arrow",{uniforms:C,samples:g,strips:v,ribbons:y,layers:_,position:t,color:e,closed:d,mask:S,material:w})),this._helpers.visible.make(),this._helpers.object.make(this.arrows.concat([this.line]))}made(){return this.resize()}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.line=this.arrows=null}change(e,t,n){if(e["geometry.points"]||e["line.stroke"]||e["line.join"]||e["arrow.start"]||e["arrow.end"])return this.rebuild();if(e["line.proximity"]&&this.proximity!=null!=(this.props.proximity!=null))return this.rebuild()}};zN.initClass();let IN=class extends Ss{static initClass(){this.traits=["node","object","visible","style","point","geometry","position","bind","shade"]}constructor(e,t,n){super(e,t,n),this.point=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),{items:t,width:n,height:r,depth:s}=e;return this.point.geometry.clip(n,r,s,t)}make(){let e,t;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"point.sizes",trait:"source"}]),this.bind.points==null)return;let n=this._shaders.shader();n=this.bind.points.sourceShader(n),n=this._helpers.position.pipeline(n);const r=this.bind.points.getDimensions(),{items:s,width:o,height:a,depth:l}=r,c=this._helpers.style.uniforms(),u=this._helpers.point.uniforms(),h=this._inherit("unit").getUnitUniforms();this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e)),this.bind.sizes&&(t=this._shaders.shader(),this.bind.sizes.sourceShader(t));const d=this._helpers.object.mask(),f=this._helpers.shade.pipeline()||!1,{shape:g}=this.props,{fill:v}=this.props,{optical:y}=this.props,_=sl(h,u,c);this.point=this._renderables.make("point",{uniforms:_,width:o,height:a,depth:l,items:s,position:n,color:e,size:t,shape:g,optical:y,fill:v,mask:d,material:f}),this._helpers.visible.make(),this._helpers.object.make([this.point])}made(){return this.resize()}unmake(){this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.point=null}change(e,t,n){if(e["geometry.points"]||e["point.shape"]||e["point.fill"])return this.rebuild()}};IN.initClass();let NN=class extends Ss{static initClass(){this.traits=["node","object","visible","style","line","mesh","strip","geometry","position","bind","shade"]}constructor(e,t,n){super(e,t,n),this.strip=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),{items:t,width:n,height:r,depth:s}=e;if(this.strip&&this.strip.geometry.clip(n,r,s,t),this.line&&this.line.geometry.clip(t,n,r,s),this.bind.map!=null){const o=this.bind.map.getActiveDimensions();if(this.strip)return this.strip.geometry.map(o.width,o.height,o.depth,o.items)}}make(){let e,t;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"mesh.map",trait:"source"}]),this.bind.points==null)return;let n=this._shaders.shader();n=this.bind.points.sourceShader(n),n=this._helpers.position.pipeline(n);const r=this._helpers.style.uniforms(),s=this._helpers.line.uniforms(),o=this._inherit("unit").getUnitUniforms(),{line:a,shaded:l,fill:c,stroke:u,join:h}=this.props,d={};d.styleZBias=this._attributes.make(this._types.number()),this.wireZBias=d.styleZBias;const f=this.bind.points.getDimensions(),{items:g,width:v,height:y,depth:_}=f;this.bind.colors&&(e=this._shaders.shader(),e=this.bind.colors.sourceShader(e));const S=this._helpers.object.mask();this._helpers.shade.map(this.bind.map!=null?this.bind.map.sourceShader(this._shaders.shader()):void 0);const w=this._helpers.shade.pipeline(),C=w||l,E=w||!1,k=[];if(a){const O=this._shaders.shader();O.pipe(Za("yzwx")),O.pipe(n),t=sl(o,s,r,d),this.line=this._renderables.make("line",{uniforms:t,samples:g,strips:v,ribbons:y,layers:_,position:O,color:e,stroke:u,join:h,mask:S,material:E}),k.push(this.line)}return c&&(t=sl(r,{}),this.strip=this._renderables.make("strip",{uniforms:t,width:v,height:y,depth:_,items:g,position:n,color:e,material:C}),k.push(this.strip)),this._helpers.visible.make(),this._helpers.object.make(k)}made(){return this.resize()}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.strip=null}change(e,t,n){if(e["geometry.points"]||t.mesh)return this.rebuild();if(e["style.zBias"]||e["mesh.lineBias"]||n){const{fill:r,zBias:s,lineBias:o}=this.props;return this.wireZBias.value=s+(r?o:0)}}};NN.initClass();let UN=class extends Ss{static initClass(){this.traits=["node","object","visible","style","line","mesh","geometry","surface","position","grid","bind","shade"],this.defaults={lineX:!1,lineY:!1}}constructor(e,t,n){super(e,t,n),this.lineX=this.lineY=this.surface=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),{width:t,height:n,depth:r,items:s}=e;if(this.surface&&this.surface.geometry.clip(t,n,r,s),this.lineX&&this.lineX.geometry.clip(t,n,r,s),this.lineY&&this.lineY.geometry.clip(n,t,r,s),this.bind.map!=null){const o=this.bind.map.getActiveDimensions();if(this.surface)return this.surface.geometry.map(o.width,o.height,o.depth,o.items)}}make(){let e,t;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"},{to:"mesh.normals",trait:"source"},{to:"mesh.map",trait:"source"}]),this.bind.points==null)return;let n=this._shaders.shader();n=this.bind.points.sourceShader(n),n=this._helpers.position.pipeline(n);const r=this._helpers.style.uniforms(),s=this._helpers.style.uniforms(),o=this._helpers.line.uniforms(),a=this._helpers.surface.uniforms(),l=this._inherit("unit").getUnitUniforms();s.styleColor=this._attributes.make(this._types.color()),s.styleZBias=this._attributes.make(this._types.number()),this.wireColor=s.styleColor.value,this.wireZBias=s.styleZBias,this.wireScratch=new qt;const c=this.bind.points.getDimensions(),{width:u,height:h,depth:d,items:f}=c,{shaded:g,fill:v,lineX:y,lineY:_,closedX:S,closedY:w,stroke:C,join:E,proximity:k,crossed:O}=this.props,R=[];this.proximity=k,this.bind.normals!=null&&(t=this._shaders.shader(),this.bind.normals.sourceShader(t),this._helpers.shade.normal(t)),this.bind.colors!=null&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));const A=this._helpers.object.mask(),D=this._helpers.shade.map(this.bind.map!=null?this.bind.map.sourceShader(this._shaders.shader()):void 0),I=this._helpers.shade.pipeline(),q=I||g,j=I||!1,{swizzle:Y,swizzle2:F}=this._helpers.position;let re=sl(l,o,r,s);const ee=y||_?-50:0;return y&&(this.lineX=this._renderables.make("line",{uniforms:re,samples:u,strips:h,ribbons:d,layers:f,position:n,color:e,normal:t,zUnits:-ee,stroke:C,join:E,mask:A,material:j,proximity:k,closed:S||closed}),R.push(this.lineX)),_&&(this.lineY=this._renderables.make("line",{uniforms:re,samples:h,strips:u,ribbons:d,layers:f,position:F(n,"yxzw","yxzw"),color:Y(e,"yxzw"),zUnits:-ee,stroke:C,join:E,mask:Y(A,O?"xyzw":"yxzw"),material:j,proximity:k,closed:w||closed}),R.push(this.lineY)),v&&(re=sl(l,a,r),this.surface=this._renderables.make("surface",{uniforms:re,width:u,height:h,surfaces:d,layers:f,position:n,color:e,zUnits:ee,stroke:C,material:q,mask:A,map:D,intUV:!0,closedX:S||closed,closedY:w||closed}),R.push(this.surface)),this._helpers.visible.make(),this._helpers.object.make(R)}made(){return this.resize()}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.lineX=this.lineY=this.surface=null}_convertGammaToLinear(e,t=2){return e.r=Math.pow(e.r,t),e.g=Math.pow(e.g,t),e.b=Math.pow(e.b,t),e}_convertLinearToGamma(e,t=2){const n=t>0?1/t:1;return e.r=Math.pow(e.r,n),e.g=Math.pow(e.g,n),e.b=Math.pow(e.b,n),e}change(e,t,n){if(e["geometry.points"]||e["mesh.shaded"]||e["mesh.fill"]||e["line.stroke"]||e["line.join"]||t.grid)return this.rebuild();if(e["style.color"]||e["style.zBias"]||e["mesh.fill"]||e["mesh.lineBias"]||n){const{fill:r,color:s,zBias:o,lineBias:a}=this.props;if(this.wireZBias.value=o+(r?a:0),this.wireColor.copy(s),r){const l=this.wireScratch;l.setRGB(s.r,s.g,s.b),this._convertLinearToGamma(this._convertGammaToLinear(l).multiplyScalar(.75)),this.wireColor.r=l.r,this.wireColor.g=l.g,this.wireColor.b=l.b}}if(e["line.proximity"]&&this.proximity!=null!=(this.props.proximity!=null))return this.rebuild()}};UN.initClass();let FN=class extends Ss{static initClass(){this.traits=["node","object","visible","style","line","ticks","geometry","position","bind","shade"]}init(){return this.tickStrip=this.line=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),t=+(e.items>0),n=e.width*t,r=e.height*t,s=e.depth*t;return this.line.geometry.clip(2,n,r,s),this.tickStrip.set(0,n-1)}make(){let e,t;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]),this.bind.points==null)return;const n=this._helpers.style.uniforms(),r=this._helpers.line.uniforms(),s=this._inherit("unit").getUnitUniforms(),o=sl(r,n,s),a={tickEpsilon:this.node.attributes["ticks.epsilon"],tickSize:this.node.attributes["ticks.size"],tickNormal:this.node.attributes["ticks.normal"],tickStrip:this._attributes.make(this._types.vec2(0,0)),worldUnit:o.worldUnit,focusDepth:o.focusDepth};this.tickStrip=a.tickStrip.value;const l=t=this._shaders.shader();l.require(this.bind.points.sourceShader(this._shaders.shader())),l.require(this._helpers.position.pipeline(this._shaders.shader())),l.pipe("ticks.position",a);const{stroke:c,join:u}=this.props,h=this.bind.points.getDimensions(),d=h.width,f=h.height,g=h.depth;this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));const v=this._helpers.object.mask(),y=this._helpers.shade.pipeline()||!1,{swizzle:_}=this._helpers.position;return this.line=this._renderables.make("line",{uniforms:o,samples:2,strips:d,ribbons:f,layers:g,position:t,color:e,stroke:c,join:u,mask:_(v,"yzwx"),material:y}),this._helpers.visible.make(),this._helpers.object.make([this.line])}made(){return this.resize()}unmake(){return this.line=null,this._helpers.visible.unmake(),this._helpers.object.unmake()}change(e,t,n){if(e["geometry.points"]||e["line.stroke"]||e["line.join"])return this.rebuild()}};FN.initClass();let BN=class extends Ss{static initClass(){this.traits=["node","object","visible","style","line","arrow","geometry","position","bind","shade"]}constructor(e,t,n){super(e,t,n),this.line=this.arrows=null}resize(){if(this.bind.points==null)return;const e=this.bind.points.getActiveDimensions(),t=e.items,n=e.width,r=e.height,s=e.depth;return this.line.geometry.clip(t,n,r,s),Array.from(this.arrows).map(o=>o.geometry.clip(t,n,r,s))}make(){let e;if(this._helpers.bind.make([{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]),this.bind.points==null)return;let t=this._shaders.shader();this.bind.points.sourceShader(t),this._helpers.position.pipeline(t);const n=this._helpers.style.uniforms(),r=this._helpers.line.uniforms(),s=this._helpers.arrow.uniforms(),o=this._inherit("unit").getUnitUniforms(),{start:a,end:l}=this.props,{stroke:c,join:u,proximity:h,closed:d}=this.props;this.proximity=h;const f=this.bind.points.getDimensions(),g=f.items,v=f.width,y=f.height,_=f.depth;this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));let S=this._helpers.object.mask(),w=this._helpers.shade.pipeline()||!1;const{swizzle:C,swizzle2:E}=this._helpers.position;t=E(t,"yzwx","yzwx"),e=C(e,"yzwx"),S=C(S,"yzwx"),w=C(w,"yzwx");const k=sl(s,r,n,o);return this.line=this._renderables.make("line",{uniforms:k,samples:g,ribbons:y,strips:v,layers:_,position:t,color:e,clip:a||l,stroke:c,join:u,proximity:h,closed:d,mask:S,material:w}),this.arrows=[],a&&this.arrows.push(this._renderables.make("arrow",{uniforms:k,flip:!0,samples:g,ribbons:y,strips:v,layers:_,position:t,color:e,closed:d,mask:S,material:w})),l&&this.arrows.push(this._renderables.make("arrow",{uniforms:k,samples:g,ribbons:y,strips:v,layers:_,position:t,color:e,closed:d,mask:S,material:w})),this._helpers.visible.make(),this._helpers.object.make(this.arrows.concat([this.line]))}made(){return this.resize()}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.line=this.arrows=null}change(e,t,n){if(e["geometry.points"]||e["line.stroke"]||e["line.join"]||e["arrow.start"]||e["arrow.end"])return this.rebuild();if(e["line.proximity"]&&this.proximity!=null!=(this.props.proximity!=null))return this.rebuild()}};BN.initClass();class VN extends O_{static initClass(){this.traits=["node","buffer","active","data","voxel","html"],this.finals={channels:1}}init(){super.init(),this.storage="pushBuffer"}make(){super.make();const{items:e,width:t,height:n,depth:r}=this.getDimensions();return this.dom=this._overlays.make("dom"),this.dom.hint(e*t*n*r)}unmake(){if(super.unmake(),this.dom!=null)return this.dom.dispose(),this.dom=null}update(){return super.update()}change(e,t,n){return t.html?this.rebuild():super.change(e,t,n)}nodes(){return this.buffer.read()}callback(e){const{el:t}=this.dom;return e.length<=6?(n,r,s,o,a)=>e(n,t,r,s,o,a):(n,r,s,o,a)=>e(n,t,r,s,o,a,this.bufferClock,this.bufferStep)}}VN.initClass();class HN extends Ss{static initClass(){this.traits=["node","bind","object","visible","overlay","dom","attach","position"]}init(){this.emitter=this.root=null,this.active={}}make(){if(super.make(),this._helpers.bind.make([{to:"dom.html",trait:"html"},{to:"dom.points",trait:"source"}]),this.bind.points==null||this.bind.html==null)return;this.root=this._inherit("root"),this._listen("root","root.update",this.update),this._listen("root","root.post",this.post);const e=this.bind.points.getDimensions(),t=this.bind.html.getDimensions(),n=Math.min(e.items,t.items),r=Math.min(e.width,t.width),s=Math.min(e.height,t.height),o=Math.min(e.depth,t.depth);let a=this.bind.points.sourceShader(this._shaders.shader());a=this._helpers.position.pipeline(a);const l=this._shaders.shader({globals:["projectionMatrix"]});l.pipe("project.readback"),a.pipe(l);const c=this._shaders.shader();this.readback=this._renderables.make("readback",{map:a,indexer:c,items:n,width:r,height:s,depth:o,channels:4,stpq:!0}),this.dom=this._overlays.make("dom"),this.dom.hint(n*r*s*o*2),this.emitter=this.callback(this.bind.html.nodes()),this.readback.setCallback(this.emitter),this._helpers.visible.make()}unmake(){this.readback!=null&&(this.readback.dispose(),this.dom.dispose(),this.readback=this.dom=null,this.root=null,this.emitter=null,this.active={}),this._helpers.bind.unmake(),this._helpers.visible.unmake()}update(){this.readback!=null&&this.props.visible&&(this.readback.update(this.root!=null?this.root.getCamera():void 0),this.readback.post(),this.readback.iterate())}post(){this.readback!=null&&this.dom.render(this.isVisible?this.emitter.nodes():null)}callback(e){let t,n;const r=this._inherit("unit").getUnitUniforms(),s=r.viewWidth,o=r.viewHeight,a=this.node.attributes["dom.attributes"],l=this.node.attributes["dom.size"],c=this.node.attributes["dom.zoom"],u=this.node.attributes["dom.color"],h=this.node.attributes["dom.outline"],d=this.node.attributes["dom.pointerEvents"],f=this.node.attributes["overlay.opacity"],g=this.node.attributes["overlay.zIndex"],v=this.node.attributes["attach.offset"],y=this.node.attributes["attach.depth"],_=this.node.attributes["attach.snap"],{el:S}=this.dom;let w=[],C=null,E=null,k=t=n=0,O="";const R=function(A,D,I,q,j,Y,F,re){let ee;const J=re+k*j+t*Y+n*F,Ee=e[J],le=q<0,be=1+(1/q-1)*y.value,Je=le?0:be,Xe=+v.value.x*Je,Be=+v.value.y*Je;let vt=(A+1)*s.value*.5+Xe,at=(D-1)*o.value*.5+Be;vt/=c.value,at/=c.value,_.value&&(vt=Math.round(vt),at=Math.round(at));const Le=Math.min(.999,le?0:f.value),Ot={className:E,style:{transform:`translate3d(${vt}px, ${-at}px, ${1-q}px) translate(-50%, -50%) scale(${Je},${Je})`,opacity:Le}};for(F in C)ee=C[F],Ot.style[F]=ee;const ft=a.value;if(ft!=null){const rt=ft.style;for(F in ft)ee=ft[F],["style","className"].includes(F)||(Ot[F]=ee);if(rt!=null)for(F in rt)ee=rt[F],Ot.style[F]=ee}return Ot.className+=" "+((ft!=null?ft.className:void 0)!=null?ft!=null?ft.className:void 0:"mathbox-label"),w.push(S("div",Ot,Ee))};return R.reset=()=>{w=[],[k,t,n]=Array.from([this.strideI,this.strideJ,this.strideK]);const A=u.value,D=I=>Math.floor(I*255);if(O=A?`rgb(${[D(A.x),D(A.y),D(A.z)]})`:"",E=`mathbox-outline-${Math.round(h.value)}`,C={},A&&(C.color=O),C.fontSize=`${l.value}px`,c.value!==1&&(C.zoom=c.value),g.value>0&&(C.zIndex=g.value),d.value)return C.pointerEvents="auto"},R.nodes=()=>w,R}resize(){let e,t;if(this.readback==null)return;const n=this.bind.points.getActiveDimensions(),r=this.bind.html.getActiveDimensions(),s=Math.min(n.items,r.items),o=Math.min(n.width,r.width),a=Math.min(n.height,r.height),l=Math.min(n.depth,r.depth);this.readback.setActive(s,o,a,l),this.strideI=e=r.items,this.strideJ=t=e*r.width,this.strideK=t*r.height}change(e,t,n){if(e["dom.html"]||e["dom.points"])return this.rebuild()}}HN.initClass();class qN extends O_{static initClass(){this.traits=["node","buffer","active","data","texture","voxel","text","font"],this.defaults={minFilter:"linear",magFilter:"linear"},this.finals={channels:1}}init(){return super.init(),this.atlas=null}textShader(e){return this.atlas.shader(e)}textIsSDF(){return this.props.sdf>0}textHeight(){return this.props.detail}make(){let{minFilter:e,magFilter:t,type:n}=this.props;const{font:r,style:s,variant:o,weight:a,detail:l,sdf:c}=this.props;this.atlas=this._renderables.make("textAtlas",{font:r,size:l,style:s,variant:o,weight:a,outline:c,minFilter:e,magFilter:t,type:n}),this.minFilter=Oi,this.magFilter=Oi,this.type=Ks,k_.prototype.make.call(this),e=this.minFilter!=null?this.minFilter:this.props.minFilter,t=this.magFilter!=null?this.magFilter:this.props.magFilter,n=this.type!=null?this.type:this.props.type;const{width:u}=this.props,{height:h}=this.props,{depth:d}=this.props,f=this.props.bufferWidth,g=this.props.bufferHeight,v=this.props.bufferDepth,{channels:y}=this.props,{items:_}=this.props;let S=this.spec={channels:y,items:_,width:u,height:h,depth:d};this.items=S.items,this.channels=S.channels;const{data:w}=this.props;S=ff(w,S);const{space:C}=this;C.width=Math.max(f,S.width||1),C.height=Math.max(g,S.height||1),C.depth=Math.max(v,S.depth||1),this.buffer=this._renderables.make(this.storage,{width:C.width,height:C.height,depth:C.depth,channels:4,items:_,minFilter:e,magFilter:t,type:n});const{atlas:E}=this,{emit:k}=this.buffer.streamer;return this.buffer.streamer.emit=O=>E.map(O,k)}unmake(){if(super.unmake(),this.atlas)return this.atlas.dispose(),this.atlas=null}update(){return this.atlas.begin(),super.update(),this.atlas.end()}change(e,t,n){return t.font?this.rebuild():super.change(e,t,n)}}qN.initClass();class ia extends b4{static initClass(){this.traits=["node","bind","operator","source","index"]}indexShader(e){return Nk(this.bind.source,"indexShader",t=>t.indexShader(e))}sourceShader(e){return Nk(this.bind.source,"sourceShader",t=>t.sourceShader(e))}getDimensions(){return this.bind.source.getDimensions()}getFutureDimensions(){return this.bind.source.getFutureDimensions()}getActiveDimensions(){return this.bind.source.getActiveDimensions()}getIndexDimensions(){return this.bind.source.getIndexDimensions()}init(){return this.sourceSpec=[{to:"operator.source",trait:"source",optional:!0}]}make(){return super.make(),this._helpers.bind.make(this.sourceSpec)}made(){return this.resize(),super.made()}unmake(){return this._helpers.bind.unmake()}resize(e){return this.trigger({type:"source.resize"})}}ia.initClass();function Nk(i,e,t){if(typeof i<"u"&&i!==null&&typeof i[e]=="function")return t(i,e)}class GN extends ia{static initClass(){this.traits=["node","bind","operator","texture","text","format","font"],this.defaults={minFilter:"linear",magFilter:"linear"}}init(){return super.init(),this.atlas=this.buffer=this.used=this.time=null,this.filled=!1}sourceShader(e){return this.buffer.shader(e)}textShader(e){return this.atlas.shader(e)}textIsSDF(){return this.props.sdf>0}textHeight(){return this.props.detail}make(){this._helpers.bind.make([{to:"operator.source",trait:"raw"}]);let{minFilter:e,magFilter:t,type:n}=this.props;const{font:r,style:s,variant:o,weight:a,detail:l,sdf:c}=this.props;this.atlas=this._renderables.make("textAtlas",{font:r,size:l,style:s,variant:o,weight:a,outline:c,minFilter:e,magFilter:t,type:n}),e=Oi,t=Oi,n=Ks;const u=this.bind.source.getDimensions(),{items:h,width:d,height:f,depth:g}=u;this.buffer=this._renderables.make("voxelBuffer",{width:d,height:f,depth:g,channels:4,items:h,minFilter:e,magFilter:t,type:n});const{atlas:v}=this,{emit:y}=this.buffer.streamer;return this.buffer.streamer.emit=_=>v.map(_,y),this.clockParent=this._inherit("clock"),this._listen("root","root.update",this.update)}made(){return super.made(),this.resize()}unmake(){if(super.unmake(),this.buffer&&(this.buffer.dispose(),this.buffer=null),this.atlas)return this.atlas.dispose(),this.atlas=null}update(){if(this.filled&&!this.props.live||!this.through)return;this.time=this.clockParent.getTime();const{used:e}=this;if(this.atlas.begin(),this.used=this.through(),this.buffer.write(this.used),this.atlas.end(),this.filled=!0,e!==this.used)return this.trigger({type:"source.resize"})}change(e,t,n){if(t.font)return this.rebuild();if(e["format.expr"]||e["format.digits"]||e["format.data"]||n){let r,{expr:s}=this.props;const{digits:o,data:a}=this.props;s==null&&(a!=null?s=(c,u,h,d,f)=>a[f]:s=c=>c);const{length:l}=s;return o!=null&&(s=(c=>(u,h,d,f,g,v,y,_,S,w)=>+c(u,h,d,f,g,v,y,_,S,w).toPrecision(o))(s)),l>8?r=(c,u,h,d,f,g,v,y,_,S,w)=>c(s(u,h,d,f,g,v,y,_,this.time.clock,this.time.step)):r=(c,u,h,d,f,g,v,y,_)=>c(s(u,h,d,f,g,v,y,_)),this.through=this.bind.source.rawBuffer().through(r,this.buffer)}}}GN.initClass();class WN extends Ss{static initClass(){this.traits=["node","bind","object","visible","style","label","attach","geometry","position"]}make(){let e;if(super.make(),this._helpers.bind.make([{to:"label.text",trait:"text"},{to:"geometry.points",trait:"source"},{to:"geometry.colors",trait:"source"}]),this.bind.points==null||this.bind.text==null)return;const t=this.bind.points.getDimensions(),n=this.bind.text.getDimensions(),r=this.bind.text.textIsSDF(),s=Math.min(t.items,n.items),o=Math.min(t.width,n.width),a=Math.min(t.height,n.height),l=Math.min(t.depth,n.depth);let c=this.bind.points.sourceShader(this._shaders.shader());c=this._helpers.position.pipeline(c);const u=this.bind.text.sourceShader(this._shaders.shader()),h=this._shaders.shader().pipe("label.map");h.pipe(this.bind.text.textShader(this._shaders.shader()));const d={spriteDepth:this.node.attributes["attach.depth"],spriteOffset:this.node.attributes["attach.offset"],spriteSnap:this.node.attributes["attach.snap"],spriteScale:this._attributes.make(this._types.number()),outlineStep:this._attributes.make(this._types.number()),outlineExpand:this._attributes.make(this._types.number()),outlineColor:this.node.attributes["label.background"]};this.spriteScale=d.spriteScale,this.outlineStep=d.outlineStep,this.outlineExpand=d.outlineExpand;const f=r?"label.outline":"label.alpha",g=this._shaders.shader().pipe(f,d);this.bind.colors&&(e=this._shaders.shader(),this.bind.colors.sourceShader(e));const v=this._helpers.object.mask(),y=this._helpers.style.uniforms(),_=this._inherit("unit").getUnitUniforms(),S=sl(_,y,d);return this.sprite=this._renderables.make("sprite",{uniforms:S,width:o,height:a,depth:l,items:s,position:c,sprite:u,map:h,combine:g,color:e,mask:v,linear:!0}),this._helpers.visible.make(),this._helpers.object.make([this.sprite])}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake(),this.sprite=null}resize(){const e=this.bind.points.getActiveDimensions(),t=this.bind.text.getActiveDimensions(),n=Math.min(e.items,t.items),r=Math.min(e.width,t.width),s=Math.min(e.height,t.height),o=Math.min(e.depth,t.depth);return this.sprite.geometry.clip(r,s,o,n)}change(e,t,n){if(t.geometry||e["label.text"])return this.rebuild();if(this.bind.points==null)return;const{size:r}=this.props,{outline:s}=this.props,{expand:o}=this.props,a=this.bind.text.textHeight(),l=r/a;return this.outlineExpand.value=o/l*16/255,this.outlineStep.value=s/l*16/255,this.spriteScale.value=l}}WN.initClass();class v5 extends ia{static initClass(){this.traits=["node","bind","operator","source","index","resample","sampler:x","sampler:y","sampler:z","sampler:w","include"]}indexShader(e){return e.pipe(this.indexer),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(e){const t=this.resampled,n=this.centered,r=this.padding;return this.relativeSize?(n.items||e.items--,n.width||e.width--,n.height||e.height--,n.depth||e.depth--,t.items!=null&&(e.items*=t.items),t.width!=null&&(e.width*=t.width),t.height!=null&&(e.height*=t.height),t.depth!=null&&(e.depth*=t.depth),n.items||e.items++,n.width||e.width++,n.height||e.height++,n.depth||e.depth++,e.items-=r.items*2,e.width-=r.width*2,e.height-=r.height*2,e.depth-=r.depth*2):(t.items!=null&&(e.items=t.items),t.width!=null&&(e.width=t.width),t.height!=null&&(e.height=t.height),t.depth!=null&&(e.depth=t.depth)),e.items=Math.max(0,Math.floor(e.items)),e.width=Math.max(0,Math.floor(e.width)),e.height=Math.max(0,Math.floor(e.height)),e.depth=Math.max(0,Math.floor(e.depth)),e}make(){if(super.make(),this.bind.source==null)return;this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}]);const{indices:e,channels:t}=this.props,{shader:n}=this.bind,{sample:r,size:s,items:o,width:a,height:l,depth:c}=this.props,u=r===this.node.attributes["resample.sample"].enum.relative,h=s===this.node.attributes["resample.size"].enum.relative;this.resampled={},o!=null&&(this.resampled.items=o),a!=null&&(this.resampled.width=a),l!=null&&(this.resampled.height=l),c!=null&&(this.resampled.depth=c),this.centered={},this.centered.items=this.props.centeredW,this.centered.width=this.props.centeredX,this.centered.height=this.props.centeredY,this.centered.depth=this.props.centeredZ,this.padding={},this.padding.items=this.props.paddingW,this.padding.width=this.props.paddingX,this.padding.height=this.props.paddingY,this.padding.depth=this.props.paddingZ;const d=this._shaders.shader(),f=this._shaders.shader(),g=[null,this._types.number,this._types.vec2,this._types.vec3,this._types.vec4][e],v={dataSize:this._attributes.make(g(0,0,0,0)),dataResolution:this._attributes.make(g(0,0,0,0)),targetSize:this._attributes.make(g(0,0,0,0)),targetResolution:this._attributes.make(g(0,0,0,0)),resampleFactor:this._attributes.make(this._types.vec4(0,0,0,0)),resampleBias:this._attributes.make(this._types.vec4(0,0,0,0))};this.dataResolution=v.dataResolution,this.dataSize=v.dataSize,this.targetResolution=v.targetResolution,this.targetSize=v.targetSize,this.resampleFactor=v.resampleFactor,this.resampleBias=v.resampleBias;const y=o!=null||a!=null||l!=null||c!=null;d.pipe("resample.padding",v);let _=[],S=!1;const w=["width","height","depth","items"];for(let C=0;C<w.length;C++){const E=w[C],k=this.centered[E];S||(S=k),_[C]=k?"0.5":"0.0"}return S&&(_=`vec4(${_})`,d.pipe(zl(4,"+",_)),y&&f.pipe(zl(4,"+",_))),u&&(y?(d.pipe("resample.relative",v),f.pipe("resample.relative",v)):f.pipe(qu("vec4"))),n!=null?(e!==4&&d.pipe(pf(4,e)),d.callback(),e!==4&&d.pipe(e0(e,4)),S&&d.pipe(zl(4,"-",_)),d.pipe(this.bind.source.sourceShader(this._shaders.shader())),t!==4&&d.pipe(pf(4,t)),d.join(),this.bind.shader!=null&&d.pipe(this.bind.shader.shaderBind(v)),t!==4&&d.pipe(e0(t,4))):(S&&d.pipe(zl(4,"-",_)),d.pipe(this.bind.source.sourceShader(this._shaders.shader()))),S&&y&&f.pipe(zl(4,"-",_)),this.operator=d,this.indexer=f,this.indices=e,this.relativeSample=u,this.relativeSize=h}unmake(){return super.unmake(),this.operator=null}resize(){if(this.bind.source==null)return;const e=this.bind.source.getActiveDimensions(),t=this.getActiveDimensions(),n=d=>{const f=this.centered[d],g=this.padding[d];return t[d]+=g*2,[f?e[d]/Math.max(1,t[d]):Math.max(1,e[d]-1)/Math.max(1,t[d]-1),g]},[r,s]=Array.from(n("width")),[o,a]=Array.from(n("height")),[l,c]=Array.from(n("depth")),[u,h]=Array.from(n("items"));return this.indices===1?(this.dataResolution.value=1/e.width,this.targetResolution.value=1/t.width,this.dataSize.value=e.width,this.targetSize.value=t.width):(this.dataResolution.value.set(1/e.width,1/e.height,1/e.depth,1/e.items),this.targetResolution.value.set(1/t.width,1/t.height,1/t.depth,1/t.items),this.dataSize.value.set(e.width,e.height,e.depth,e.items),this.targetSize.value.set(t.width,t.height,t.depth,t.items)),this.resampleFactor.value.set(r,o,l,u),this.resampleBias.value.set(s,a,c,h),super.resize()}change(e,t,n){if(t.operator||t.resample||t.sampler||t.include)return this.rebuild()}}v5.initClass();class jN extends v5{static initClass(){this.traits=["node","bind","operator","resample","sampler:x","sampler:y","sampler:z","sampler:w","include","text"]}init(){return this.sourceSpec=[{to:"operator.source",trait:"text"}]}textShader(e){return this.bind.source.textShader(e)}textIsSDF(){return(this.bind.source!=null?this.bind.source.props.sdf:void 0)>0}textHeight(){return this.bind.source!=null?this.bind.source.props.detail:void 0}}jN.initClass();class $N extends cl{static initClass(){this.traits=["node","clock","seek","play"]}init(){return this.skew=0,this.last=0,this.time={now:+new Date/1e3,time:0,delta:0,clock:0,step:0}}make(){return this._listen("clock","clock.tick",this.tick)}reset(){return this.skew=0}tick(e){const{from:t,to:n,speed:r,seek:s,pace:o,delay:a,realtime:l}=this.props,c=this._inherit("clock").getTime(),u=l?c.time:c.clock,h=l?c.delta:c.step,d=r/o;this.skew+=h*(d-1),this.last>u&&(this.skew=0),this.time.now=c.now+this.skew,this.time.time=c.time,this.time.delta=c.delta;const f=s??c.clock+this.skew;return this.time.clock=Math.min(n,t+Math.max(0,f-a*d)),this.time.step=h*d,this.last=u,this.trigger(e)}getTime(){return this.time}}$N.initClass();class XN extends cl{static initClass(){this.traits=["node","clock","now"]}init(){let e;return this.now=e=+new Date/1e3,this.skew=0,this.time={now:e,time:0,delta:0,clock:0,step:0}}make(){return this.clockParent=this._inherit("clock"),this._listen("clock","clock.tick",this.tick)}unmake(){return this.clockParent=null}change(e,t,n){if(e["date.now"])return this.skew=0}tick(e){const{seek:t,pace:n,speed:r}=this.props,s=this.clockParent.getTime();return this.skew+=s.step*n/r,t!=null&&(this.skew=t),this.time.now=this.time.time=this.time.clock=(this.props.now!=null?this.props.now:this.now)+this.skew,this.time.delta=this.time.step=s.delta,this.trigger(e)}getTime(){return this.time}}XN.initClass();class m0 extends cl{static initClass(){this.traits=["node","vertex","fragment"]}vertex(e,t){let n;return(n=Uk(this._inherit("vertex"),r=>r.vertex(e,t)))!=null?n:e}fragment(e,t){let n;return(n=Uk(this._inherit("fragment"),r=>r.fragment(e,t)))!=null?n:e}}m0.initClass();function Uk(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class YN extends m0{static initClass(){this.traits=["node","vertex","transform3"]}make(){return this.uniforms={transformMatrix:this._attributes.make(this._types.mat4())},this.composer=Pg()}unmake(){return delete this.uniforms}change(e,t,n){if(e["transform3.pass"])return this.rebuild();if(!t.transform3&&!n)return;const r=this.props.position,s=this.props.quaternion,o=this.props.rotation,a=this.props.scale,l=this.props.matrix,c=this.props.eulerOrder;return this.uniforms.transformMatrix.value=this.composer(r,o,s,a,l,c)}vertex(e,t){return t===this.props.pass&&e.pipe("transform3.position",this.uniforms),super.vertex(e,t)}}YN.initClass();class KN extends m0{static initClass(){this.traits=["node","vertex","transform4"]}make(){return this.uniforms={transformMatrix:this._attributes.make(this._types.mat4()),transformOffset:this.node.attributes["transform4.position"]},this.transformMatrix=this.uniforms.transformMatrix.value}unmake(){return delete this.uniforms}change(e,t,n){if(e["transform4.pass"])return this.rebuild();if(!t.transform4&&!n)return;const r=this.props.scale,s=this.props.matrix,o=this.transformMatrix;return o.copy(s),o.scale(r)}vertex(e,t){return t===this.props.pass&&e.pipe("transform4.position",this.uniforms),super.vertex(e,t)}}KN.initClass();class ZN extends m0{static initClass(){this.traits=["node","include","vertex","bind"]}make(){return this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}])}unmake(){return this._helpers.bind.unmake()}change(e,t,n){if(t.include)return this.rebuild()}vertex(e,t){return this.bind.shader!=null&&t===this.props.pass&&e.pipe(this.bind.shader.shaderBind()),super.vertex(e,t)}}ZN.initClass();class JN extends m0{static initClass(){this.traits=["node","include","fragment","bind"]}make(){return this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}])}unmake(){return this._helpers.bind.unmake()}change(e,t,n){if(t.include||e["fragment.gamma"])return this.rebuild()}fragment(e,t){return this.bind.shader!=null&&t===this.props.pass&&(this.props.gamma&&e.pipe("mesh.gamma.out"),e.pipe(this.bind.shader.shaderBind()),e.split(),this.props.gamma&&e.pipe("mesh.gamma.in"),e.pass()),super.fragment(e,t)}}JN.initClass();class QN extends m0{static initClass(){this.traits=["node","vertex","layer"]}make(){return this._listen("root","root.resize",this.update),this.uniforms={layerScale:this._attributes.make(this._types.vec4()),layerBias:this._attributes.make(this._types.vec4())}}update(){const e=this._inherit("root").getCamera(),t=e.aspect!=null?e.aspect:1,n=e.fov!=null?e.fov:1,r=Math.tan(n*Math.PI/360),s=this.node.attributes["layer.fit"].enum;let{fit:o}=this.props;const{depth:a}=this.props;switch(o){case s.contain:o=t>1?s.y:s.x;break;case s.cover:o=t>1?s.x:s.y;break}switch(o){case s.x:this.uniforms.layerScale.value.set(r*t,r*t,1,1);break;case s.y:this.uniforms.layerScale.value.set(r,r,1,1);break}return this.uniforms.layerBias.value.set(0,0,-a,0)}change(e,t,n){if(e["layer.fit"]||e["layer.depth"]||n)return this.update()}vertex(e,t){return t===2?e.pipe("layer.position",this.uniforms):t===3?e.pipe("root.position"):e}}QN.initClass();class eU extends cl{static initClass(){this.traits=["node","include","mask","bind"]}make(){return this._helpers.bind.make([{to:"include.shader",trait:"shader",optional:!0}])}unmake(){return this._helpers.bind.unmake()}change(e,t,n){if(t.include)return this.rebuild()}mask(e){let t,n;return this.bind.shader!=null?e?(n=this._shaders.shader(),n.pipe(qu("vec4")),n.fan(),n.pipe(e),n.next(),n.pipe(this.bind.shader.shaderBind()),n.end(),n.pipe("float combine(float a, float b) { return min(a, b); }")):(n=this._shaders.shader(),n.pipe(this.bind.shader.shaderBind())):n=e,(t=Aje(this._inherit("mask"),r=>r.mask(n)))!=null?t:n}}eU.initClass();function Aje(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class tU extends ia{static initClass(){this.traits=["node","bind","operator","source","index","clamp"]}indexShader(e){return e.pipe(this.operator),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator),super.sourceShader(e)}make(){if(super.make(),this.bind.source==null)return;const e={clampLimit:this._attributes.make(this._types.vec4())};this.clampLimit=e.clampLimit;const t=this._shaders.shader();return t.pipe("clamp.position",e),this.operator=t}unmake(){return super.unmake()}resize(){if(this.bind.source!=null){const e=this.bind.source.getActiveDimensions();this.clampLimit.value.set(e.width-1,e.height-1,e.depth-1,e.items-1)}return super.resize()}change(e,t,n){if(t.operator||t.clamp)return this.rebuild()}}tU.initClass();class nU extends ia{static initClass(){this.traits=["node","bind","operator","source","index","grow"]}sourceShader(e){return e.pipe(this.operator)}make(){if(super.make(),this.bind.source==null)return;const e={growScale:this.node.attributes["grow.scale"],growMask:this._attributes.make(this._types.vec4()),growAnchor:this._attributes.make(this._types.vec4())};this.growMask=e.growMask.value,this.growAnchor=e.growAnchor.value;const t=this._shaders.shader();return t.require(this.bind.source.sourceShader(this._shaders.shader())),t.pipe("grow.position",e),this.operator=t}unmake(){return super.unmake()}resize(){return this.update(),super.resize()}update(){const e=this.bind.source.getFutureDimensions(),t=["width","height","depth","items"],n=(r,s)=>((r||1)-1)*(.5-s*.5);return(()=>{const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=this.props[o];this.growMask.setComponent(s,+(a==null)),r.push(this.growAnchor.setComponent(s,a!=null?n(e[o],a):0))}return r})()}change(e,t,n){if(t.operator)return this.rebuild();if(t.grow)return this.update()}}nU.initClass();let iU=class extends ia{static initClass(){this.traits=["node","bind","operator","source","index","join"]}indexShader(e){return e.pipe(this.operator),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator),super.sourceShader(e)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(e){let t,n;const{order:r,axis:s,stride:o}=this,a=["width","height","depth","items"],l=r.map(f=>a[f-1]),c=r.indexOf(s);let u=(()=>{const f=[];for(n of Array.from(l))f.push(e[n]);return f})();const h=((t=u[c+1])!=null?t:1)*o;u.splice(c,2,h),u=u.slice(0,3),u.push(1);const d={};for(let f=0;f<l.length;f++)n=l[f],d[n]=u[f];return d}make(){if(super.make(),this.bind.source==null)return;const{order:e}=this.props;let{axis:t}=this.props,{overlap:n}=this.props;const r=e.join("");t==null&&(t=e[0]);const s=r.indexOf(t),o=r.replace(t,"00").substring(0,4),l=[null,"width","height","depth","items"][t],u=this.bind.source.getDimensions()[l];n=Math.min(u-1,n);const h=u-n,d={joinStride:this._attributes.make(this._types.number(h)),joinStrideInv:this._attributes.make(this._types.number(1/h))},f=this._shaders.shader();return f.require(Za(t,1)),f.require(Za(o,4)),f.require(n5([s,s+1])),f.pipe("join.position",d),f.pipe(_4(e)),this.operator=f,this.order=e,this.axis=t,this.overlap=n,this.length=u,this.stride=h}unmake(){return super.unmake()}change(e,t,n){if(t.join||t.operator)return this.rebuild()}};iU.initClass();class rU extends ia{static initClass(){this.traits=["node","bind","operator","source","index","lerp","sampler:x","sampler:y","sampler:z","sampler:w"]}indexShader(e){return e.pipe(this.indexer),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(e){const t=this.resampled,n=this.centered,r=this.padding;return this.relativeSize?(n.items||e.items--,n.width||e.width--,n.height||e.height--,n.depth||e.depth--,t.items!=null&&(e.items*=t.items),t.width!=null&&(e.width*=t.width),t.height!=null&&(e.height*=t.height),t.depth!=null&&(e.depth*=t.depth),n.items||e.items++,n.width||e.width++,n.height||e.height++,n.depth||e.depth++,e.items-=r.items*2,e.width-=r.width*2,e.height-=r.height*2,e.depth-=r.depth*2):(t.items!=null&&(e.items=t.items),t.width!=null&&(e.width=t.width),t.height!=null&&(e.height=t.height),t.depth!=null&&(e.depth=t.depth)),e.items=Math.max(0,Math.floor(e.items)),e.width=Math.max(0,Math.floor(e.width)),e.height=Math.max(0,Math.floor(e.height)),e.depth=Math.max(0,Math.floor(e.depth)),e}make(){let e,t;if(super.make(),this.bind.source==null)return;const{size:n,items:r,width:s,height:o,depth:a}=this.props,l=n===this.node.attributes["lerp.size"].enum.relative;this.resampled={},r!=null&&(this.resampled.items=r),s!=null&&(this.resampled.width=s),o!=null&&(this.resampled.height=o),a!=null&&(this.resampled.depth=a),this.centered={},this.centered.items=this.props.centeredW,this.centered.width=this.props.centeredX,this.centered.height=this.props.centeredY,this.centered.depth=this.props.centeredZ,this.padding={},this.padding.items=this.props.paddingW,this.padding.width=this.props.paddingX,this.padding.height=this.props.paddingY,this.padding.depth=this.props.paddingZ;const c=this._shaders.shader(),u=this._shaders.shader(),h={resampleFactor:this._attributes.make(this._types.vec4(0,0,0,0)),resampleBias:this._attributes.make(this._types.vec4(0,0,0,0))};this.resampleFactor=h.resampleFactor,this.resampleBias=h.resampleBias;const d=r!=null||s!=null||o!=null||a!=null;c.pipe("resample.padding",h);const f=[];let g=!1;const v=["width","height","depth","items"];for(e=0;e<v.length;e++){t=v[e];const w=this.centered[t];g||(g=w),f[e]=w?"0.5":"0.0"}let y;g&&d&&(y=`vec4(${f})`,c.pipe(zl(4,"+",y)),u.pipe(zl(4,"+",y))),d?(c.pipe("resample.relative",h),u.pipe("resample.relative",h)):(c.pipe(qu("vec4")),u.pipe(qu("vec4"))),g&&d&&(c.pipe(zl(4,"-",y)),u.pipe(zl(4,"-",y)));let _=this.bind.source.sourceShader(this._shaders.shader());const S=["width","height","depth","items"];for(e=0;e<S.length;e++){t=S[e];const w=`lerp.${t}`;this.props[t]!=null&&(_=this._shaders.shader().require(_),_.pipe(w,h))}return c.pipe(_),this.operator=c,this.indexer=u,this.relativeSize=l}unmake(){return super.unmake(),this.operator=null}resize(){if(this.bind.source==null)return;const e=this.bind.source.getActiveDimensions(),t=this.getActiveDimensions(),n=d=>{const f=this.centered[d],g=this.padding[d];return t[d]+=g*2,[f?e[d]/Math.max(1,t[d]):Math.max(1,e[d]-1)/Math.max(1,t[d]-1),g]},[r,s]=Array.from(n("width")),[o,a]=Array.from(n("height")),[l,c]=Array.from(n("depth")),[u,h]=Array.from(n("items"));return this.resampleFactor.value.set(r,o,l,u),this.resampleBias.value.set(s,a,c,h),super.resize()}change(e,t,n){if(t.operator||t.lerp||t.sampler)return this.rebuild()}}rU.initClass();let sU=class extends ia{static initClass(){this.traits=["node","bind","active","operator","source","index","texture","memo"]}sourceShader(e){return this.memo.shaderAbsolute(e,1)}make(){if(super.make(),this.bind.source==null)return;this._helpers.active.make(),this._listen("root","root.update",()=>{if(this.isActive)return this.update()});const{minFilter:e,magFilter:t,type:n}=this.props,r=this.bind.source.getDimensions(),{items:s,width:o,height:a,depth:l}=r;this.memo=this._renderables.make("memo",{items:s,width:o,height:a,depth:l,minFilter:e,magFilter:t,type:n});const c=this._shaders.shader();return this.bind.source.sourceShader(c),this.compose=this._renderables.make("memoScreen",{map:c,items:s,width:o,height:a,depth:l}),this.memo.adopt(this.compose),this.objects=[this.compose],this.renders=this.compose.renders}unmake(){this._helpers.active.unmake(),this.bind.source!=null&&(this.memo.unadopt(this.compose),this.memo.dispose(),this.memo=this.compose=null,super.unmake())}update(){return this.memo!=null?this.memo.render():void 0}resize(){if(this.bind.source==null)return;const e=this.bind.source.getActiveDimensions(),{width:t,height:n,depth:r}=e;return this.compose.cover(t,n,r),super.resize()}change(e,t,n){if(t.texture||t.operator)return this.rebuild()}};sU.initClass();let oU=class extends Ss{static initClass(){this.traits=["node","bind","operator","readback","entity","active"],this.finals={channels:4}}init(){return this.emitter=this.root=null,this.active={}}make(){if(super.make(),this._compute("readback.data",()=>this.readback!=null?this.readback.data:void 0),this._compute("readback.items",()=>this.readback!=null?this.readback.items:void 0),this._compute("readback.width",()=>this.readback!=null?this.readback.width:void 0),this._compute("readback.height",()=>this.readback!=null?this.readback.height:void 0),this._compute("readback.depth",()=>this.readback!=null?this.readback.depth:void 0),this._helpers.bind.make([{to:"operator.source",trait:"source"}]),this.bind.source==null)return;const{type:e,channels:t,expr:n}=this.props;this.root=this._inherit("root"),this._listen("root","root.update",this.update);const{items:r,width:s,height:o,depth:a}=this.bind.source.getDimensions(),l=this.bind.source.sourceShader(this._shaders.shader());this.readback=this._renderables.make("readback",{map:l,items:r,width:s,height:o,depth:a,channels:t,type:e}),n!=null&&this.readback.setCallback(n),this._helpers.active.make()}unmake(){return this.readback!=null&&(this.readback.dispose(),this.readback=null,this.root=null,this.emitter=null,this.active={}),this._helpers.active.unmake(),this._helpers.bind.unmake()}update(){this.readback!=null&&this.isActive&&(this.readback.update(this.root!=null?this.root.getCamera():void 0),this.readback.post(),this.props.expr!=null&&this.readback.iterate())}resize(){let e,t;if(this.readback==null)return;const{items:n,width:r,height:s,depth:o}=this.bind.source.getActiveDimensions();return this.readback.setActive(n,r,s,o),this.strideI=e=n,this.strideJ=t=e*r,this.strideK=t*s}change(e,t,n){if(e["readback.type"])return this.rebuild();if(e["readback.expr"]&&this.readback)return this.readback.setCallback(this.props.expr)}};oU.initClass();class aU extends ia{static initClass(){this.traits=["node","bind","operator","source","index","repeat"]}indexShader(e){return e.pipe(this.operator),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator),super.sourceShader(e)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(e){const t=this.resample;return{items:t.items*e.items,width:t.width*e.width,height:t.height*e.height,depth:t.depth*e.depth}}make(){if(super.make(),this.bind.source==null)return;this.resample={};const e={repeatModulus:this._attributes.make(this._types.vec4())};this.repeatModulus=e.repeatModulus;const t=this._shaders.shader();return t.pipe("repeat.position",e),this.operator=t}unmake(){return super.unmake()}resize(){if(this.bind.source!=null){const e=this.bind.source.getActiveDimensions();this.repeatModulus.value.set(e.width,e.height,e.depth,e.items)}return super.resize()}change(e,t,n){if(t.operator||t.repeat)return this.rebuild();if(n)return["items","width","height","depth"].map(r=>this.resample[r]=this.props[r])}}aU.initClass();class lU extends ia{static initClass(){this.traits=["node","bind","operator","source","index","reverse"]}getDimensions(){return this.bind.source.getDimensions()}getActiveDimensions(){return this.bind.source.getActiveDimensions()}getFutureDimensions(){return this.bind.source.getFutureDimensions()}getIndexDimensions(){return this.bind.source.getIndexDimensions()}sourceShader(e){return e.pipe("reverse.position",this.uniforms),this.bind.source.sourceShader(e)}_resolveScale(e,t){return this.props[e]?-1:1}_resolveOffset(e,t){const n=this.props[e],r=t[e];return n?r-1:0}make(){if(super.make(),this.bind.source!=null)return this.uniforms={reverseScale:this._attributes.make(this._types.vec4()),reverseOffset:this._attributes.make(this._types.vec4())}}unmake(){return super.unmake()}resize(){if(this.bind.source==null)return;const e=this.bind.source.getActiveDimensions();return this.uniforms.reverseScale.value.set(this._resolveScale("width",e),this._resolveScale("height",e),this._resolveScale("depth",e),this._resolveScale("items",e)),this.uniforms.reverseOffset.value.set(this._resolveOffset("width",e),this._resolveOffset("height",e),this._resolveOffset("depth",e),this._resolveOffset("items",e)),super.resize()}change(e,t,n){if(t.operator)return this.rebuild();if(t.reverse)return this.resize()}}lU.initClass();class cU extends ia{static initClass(){this.traits=["node","bind","operator","source","index","swizzle"]}sourceShader(e){return e=super.sourceShader(e),this.swizzler&&e.pipe(this.swizzler),e}make(){if(super.make(),this.bind.source==null)return;const{order:e}=this.props;if(e.join()!=="1234")return this.swizzler=Za(e,4)}unmake(){return super.unmake(),this.swizzler=null}change(e,t,n){if(t.swizzle||t.operator)return this.rebuild()}}cU.initClass();class uU extends ia{static initClass(){this.traits=["node","bind","operator","source","index","spread"]}sourceShader(e){return e.pipe(this.operator)}make(){if(super.make(),this.bind.source==null)return;const e={spreadMatrix:this._attributes.make(this._types.mat4()),spreadOffset:this._attributes.make(this._types.vec4())};this.spreadMatrix=e.spreadMatrix,this.spreadOffset=e.spreadOffset;const t=this._shaders.shader();return t.require(this.bind.source.sourceShader(this._shaders.shader())),t.pipe("spread.position",e),this.operator=t}unmake(){return super.unmake()}resize(){return this.update(),super.resize()}update(){let e,t,n,r;const s=this.bind.source.getFutureDimensions(),a=this.spreadMatrix.value.elements,l=["width","height","depth","items"],c=["alignWidth","alignHeight","alignDepth","alignItems"],{unit:u}=this.props,h=this.node.attributes["spread.unit"].enum,d=(()=>{switch(u){case h.relative:return(f,g,v,y)=>a[g*4+v]=y/Math.max(1,s[f]-1);case h.absolute:return(f,g,v,y)=>a[g*4+v]=y}})();return(()=>{const f=[];for(t=0;t<l.length;t++){let g;e=l[t];const v=this.props[e],y=this.props[c[t]];v!=null?g=-((s[e]!=null?s[e]:1)-1)*(.5-y*.5):g=0,this.spreadOffset.value.setComponent(t,g),f.push((()=>{const _=[];for(n=0;n<=3;n++){let S;r=(S=v!=null?v.getComponent(n):void 0)!=null?S:0,_.push(a[t*4+n]=d(e,t,n,r))}return _})())}return f})()}change(e,t,n){if(t.operator)return this.rebuild();if(t.spread)return this.update()}}uU.initClass();class hU extends ia{static initClass(){this.traits=["node","bind","operator","source","index","split"]}indexShader(e){return e.pipe(this.operator),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator),super.sourceShader(e)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(e){let t;const{order:n}=this,{axis:r}=this,{overlap:s}=this,{length:o}=this,{stride:a}=this,l=["width","height","depth","items"],c=n.map(g=>l[g-1]),u=n.indexOf(r);let h=(()=>{const g=[];for(t of Array.from(c))g.push(e[t]);return g})();const d=Math.floor((h[u]-s)/a);h.splice(u,1,o,d),h=h.slice(0,4);const f={};for(let g=0;g<c.length;g++)t=c[g],f[t]=h[g];return f}make(){let e;if(super.make(),this.bind.source==null)return;const{order:t}=this.props;let{axis:n}=this.props,{overlap:r}=this.props;const{length:s}=this.props,o=t.join("");n==null&&(n=t[0]);const a=o.indexOf(n),l=o[a]+((e=o[a+1])!=null?e:0),c=o.replace(l[1],"").replace(l[0],"0")+"0";r=Math.min(s-1,r);const u=s-r,h={splitStride:this._attributes.make(this._types.number(u))},d=this._shaders.shader();return d.require(Za(l,2)),d.require(Za(c,4)),d.require(n5(a)),d.pipe("split.position",h),d.pipe(_4(t)),this.operator=d,this.order=t,this.axis=n,this.overlap=r,this.length=s,this.stride=u}unmake(){return super.unmake()}change(e,t,n){if(e["split.axis"]||e["split.order"]||t.operator)return this.rebuild()}}hU.initClass();class dU extends ia{static initClass(){this.traits=["node","bind","operator","source","index","slice"]}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}sourceShader(e){return e.pipe("slice.position",this.uniforms),this.bind.source.sourceShader(e)}_resolve(e,t){const n=this.props[e],r=t[e];if(n==null)return[0,r];const s=function(l,c){return l<0?c+l:l},o=s(Math.round(n.x),r);let a=s(Math.round(n.y),r);return a=Math.max(o,a),[o,a-o]}_resample(e){return e.width=this._resolve("width",e)[1],e.height=this._resolve("height",e)[1],e.depth=this._resolve("depth",e)[1],e.items=this._resolve("items",e)[1],e}make(){if(super.make(),this.bind.source!=null)return this.uniforms={sliceOffset:this._attributes.make(this._types.vec4())}}unmake(){return super.unmake()}resize(){if(this.bind.source==null)return;const e=this.bind.source.getActiveDimensions();return this.uniforms.sliceOffset.value.set(this._resolve("width",e)[0],this._resolve("height",e)[0],this._resolve("depth",e)[0],this._resolve("items",e)[0]),super.resize()}change(e,t,n){if(t.operator)return this.rebuild();if(t.slice)return this.resize()}}dU.initClass();class fU extends ia{static initClass(){this.traits=["node","bind","operator","source","index","subdivide"]}indexShader(e){return e.pipe(this.indexer),super.indexShader(e)}sourceShader(e){return e.pipe(this.operator)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(e){const t=this.resampled;return e.items--,e.width--,e.height--,e.depth--,t.items!=null&&(e.items*=t.items),t.width!=null&&(e.width*=t.width),t.height!=null&&(e.height*=t.height),t.depth!=null&&(e.depth*=t.depth),e.items++,e.width++,e.height++,e.depth++,e}make(){if(super.make(),this.bind.source==null)return;let{lerp:e}=this.props;const{items:t,width:n,height:r,depth:s}=this.props;this.resampled={},t!=null&&(this.resampled.items=t),n!=null&&(this.resampled.width=n),r!=null&&(this.resampled.height=r),s!=null&&(this.resampled.depth=s);const o=this._shaders.shader(),a=this._shaders.shader(),l={resampleFactor:this._attributes.make(this._types.vec4(0,0,0,0)),subdivideBevel:this.node.attributes["subdivide.bevel"]};this.resampleFactor=l.resampleFactor,this.resampleBias=l.resampleBias,t!=null||n!=null||r!=null||s!=null?(o.pipe("resample.relative",l),a.pipe("resample.relative",l)):(o.pipe(qu("vec4")),a.pipe(qu("vec4")));let u=this.bind.source.sourceShader(this._shaders.shader());e=e?".lerp":"";const h=["width","height","depth","items"];for(let d=0;d<h.length;d++){const f=h[d],g=`subdivide.${f}${e}`;this.props[f]!=null&&(u=this._shaders.shader().require(u),u.pipe(g,l))}return o.pipe(u),this.operator=o,this.indexer=a}unmake(){return super.unmake(),this.operator=null}resize(){if(this.bind.source==null)return;const e=this.bind.source.getActiveDimensions(),t=this.getActiveDimensions(),n=l=>Math.max(1,e[l]-1)/Math.max(1,t[l]-1),r=n("width"),s=n("height"),o=n("depth"),a=n("items");return this.resampleFactor.value.set(r,s,o,a),super.resize()}change(e,t,n){if(t.operator||t.subdivide)return this.rebuild()}}fU.initClass();const Fk={1:"width",2:"height",3:"depth",4:"items"};class pU extends ia{static initClass(){this.traits=["node","bind","operator","source","index","transpose"]}indexShader(e){return this.swizzler&&e.pipe(this.swizzler),super.indexShader(e)}sourceShader(e){return this.swizzler&&e.pipe(this.swizzler),super.sourceShader(e)}getDimensions(){return this._remap(this.transpose,this.bind.source.getDimensions())}getActiveDimensions(){return this._remap(this.transpose,this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._remap(this.transpose,this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._remap(this.transpose,this.bind.source.getIndexDimensions())}_remap(e,t){const n={};for(let r=0;r<=3;r++){const s=Fk[r+1],o=Fk[e[r]];n[s]=t[o]!=null?t[o]:1}return n}make(){if(super.make(),this.bind.source==null)return;const{order:e}=this.props;return e.join()!=="1234"&&(this.swizzler=_4(e)),this.transpose=e,this.trigger({type:"source.rebuild"})}unmake(){return super.unmake(),this.swizzler=null}change(e,t,n){if(t.transpose||t.operator)return this.rebuild()}}pU.initClass();class _5 extends cl{static initClass(){this.traits=["node","transition","transform","mask","visible","active"]}init(){return this.animate=null,this.uniforms=null,this.state={isVisible:!0,isActive:!0,enter:1,exit:1},this.latched=null,this.locked=null}make(){this.uniforms={transitionFrom:this._attributes.make(this._types.vec4()),transitionTo:this._attributes.make(this._types.vec4()),transitionActive:this._attributes.make(this._types.bool()),transitionScale:this._attributes.make(this._types.vec4()),transitionBias:this._attributes.make(this._types.vec4()),transitionEnter:this._attributes.make(this._types.number()),transitionExit:this._attributes.make(this._types.number()),transitionSkew:this._attributes.make(this._types.number())};const e=this._inherit("slide"),t=this._inherit("visible"),n=this._inherit("active");return this._listen(e,"transition.latch",r=>this.latch(r.step)),this._listen(e,"transition.release",()=>this.release()),this._listen(t,"visible.change",()=>this.update(this.state.isVisible=t.isVisible)),this._listen(n,"active.change",()=>this.update(this.state.isActive=n.isActive)),this.animate=this._animator.make(this._types.vec2(1,1),{step:r=>(this.state.enter=r.x,this.state.exit=r.y,this.update()),complete:r=>this.complete(r)}),this.move=this.props.from!=null||this.props.to!=null}unmake(){return this.animate.dispose()}latch(e){let t;if(this.locked=null,this.latched=t={isVisible:this.state.isVisible,isActive:this.state.isActive,step:e},!this.isVisible){const r=t.step>=0,[s,o]=Array.from(r?[0,1]:[1,0]);return this.animate.set(s,o)}}release(){const{latched:e}=this,{state:t}=this;if(this.latched=null,e.isVisible!==t.isVisible){const n=e.step>=0,r=t.isVisible,[s,o]=Array.from(r?[1,1]:n?[1,0]:[0,1]);let{duration:a,durationEnter:l,durationExit:c}=this.props;l==null&&(l=a),c==null&&(c=a),a=r*l+!r*c;let{delay:u,delayEnter:h,delayExit:d}=this.props;h==null&&(h=u),d==null&&(d=u),u=r*h+!r*d,this.animate.immediate({x:s,y:o},{duration:a,delay:u,ease:"linear"}),this.locked={isVisible:!0,isActive:e.isActive||t.isActive}}return this.update()}complete(e){if(e)return this.locked=null,this.update()}update(){if(this.latched!=null)return;let{enter:e,exit:t}=this.props;e==null&&({enter:e}=this.state),t==null&&({exit:t}=this.state);const n=e*t;let r=n>0;const s=n<1;this.uniforms.transitionEnter.value=e,this.uniforms.transitionExit.value=t,this.uniforms.transitionActive.value=s,r&&(r=!!this.state.isVisible),this.locked!=null&&(r=this.locked.isVisible),this.isVisible!==r&&(this.isVisible=r,this.trigger({type:"visible.change"}));const o=!!(this.state.isActive||this.locked!=null&&this.locked.isActive);if(this.isActive!==o)return this.isActive=o,this.trigger({type:"active.change"})}change(e,t,n){if((e["transition.enter"]||e["transition.exit"]||n)&&this.update(),e["transition.stagger"]||n){const{stagger:r}=this.props,s=r.x<0,o=r.y<0,a=r.z<0,l=r.w<0,c=Math.abs(r.x),u=Math.abs(r.y),h=Math.abs(r.z),d=Math.abs(r.w);return this.uniforms.transitionSkew.value=c+u+h+d,this.uniforms.transitionScale.value.set((1-s*2)*c,(1-o*2)*u,(1-a*2)*h,(1-l*2)*d),this.uniforms.transitionBias.value.set(s*c,o*u,a*h,l*d)}}}_5.initClass();class mU extends _5{static initClass(){this.traits=["node","transition","vertex","move","visible","active"]}make(){super.make();const e={moveFrom:this.node.attributes["move.from"],moveTo:this.node.attributes["move.to"]};for(const t in e){const n=e[t];this.uniforms[t]=n}}vertex(e,t){let n;return t===this.props.pass&&e.pipe("move.position",this.uniforms),(n=Pje(this._inherit("vertex"),r=>r.vertex(e,t)))!=null?n:e}}mU.initClass();function Pje(i,e){return typeof i<"u"&&i!==null?e(i):void 0}function P4(i,e,t){return Math.max(e,Math.min(t,i))}function K1(i){return .5-.5*Math.cos(P4(i,0,1)*Math.PI)}function b5(i){return+(i>=.5)}function y5(i){return+(i>=1)}const kje=Object.freeze(Object.defineProperty({__proto__:null,binary:b5,clamp:P4,cosine:K1,hold:y5},Symbol.toStringTag,{value:"Module"})),l1=function(i){const e={};for(const t in i){const n=i[t];n instanceof Array?e[t]=n.slice():n!=null&&typeof n=="object"?e[t]=l1(n):e[t]=n}return e};class x5 extends Ss{static initClass(){this.traits=["node","track","seek","bind"]}init(){return this.handlers={},this.script=null,this.values=null,this.playhead=0,this.velocity=null,this.section=null,this.expr=null}make(){let e;this._helpers.bind.make([{to:"track.target",trait:"node",callback:null}]);const{script:t}=this.props,{node:n}=this.bind.target;return this.targetNode=n,[this.script,this.values,this.start,this.end]=Array.from(e=this._process(n,t)),e}unmake(){return this.unbindExpr(),this._helpers.bind.unmake(),this.script=this.values=this.start=this.end=this.section=this.expr=null,this.playhead=0}bindExpr(e){this.unbindExpr(),this.expr=e,this.targetNode.bind(e,!0);const{clock:t}=this.targetNode,n=this;return this._attributes.bind(this.measure=function(){let r=null;return()=>{const{step:s}=t.getTime();return r!=null&&(n.velocity=(n.playhead-r)/s),r=n.playhead}}())}unbindExpr(){return this.expr!=null&&this.targetNode.unbind(this.expr,!0),this.measure!=null&&this._attributes.unbind(this.measure),this.expr=this.measure=null}_process(e,t){let n,r,s,o,a,l,c;if(t instanceof Array){a={};for(let v=0;v<t.length;v++)l=t[v],a[v]=l;t=a}a=[];for(r in t)l=t[r],l==null&&(l=[]),l instanceof Array?l={key:+r,props:l[0]!=null?l1(l[0]):{},bind:l[1]!=null?l1(l[1]):{}}:(l.key==null&&!l.props&&!l.bind?l={props:l1(l)}:l=l1(l),l.key=l.key!=null?+l.key:+r,l.props==null&&(l.props={}),l.bind==null&&(l.bind={})),a.push(l);if(t=a,!t.length)return[[],{},0,0];t.sort((v,y)=>v.key-y.key);const u=t[0].key,h=t[t.length-1].key;for(r in t)l=t[r],s!=null&&(s.next=l),s=l;s.next=s,t=a;const d={},f={};for(r in t){l=t[r];for(n in l.props)c=l.props[n],d[n]=!0}for(r in t){l=t[r];for(n in l.bind)c=l.bind[n],d[n]=!0}for(n in d)d[n]=e.get(n);try{for(n in d)f[n]=[e.attribute(n).T.make(),e.attribute(n).T.make(),e.attribute(n).T.make()]}catch{throw console.warn(this.node.toMarkup()),o=`${this.node.toString()} - Target ${e} has no \`${n}\` property`,new Error(o)}const g=[];for(l of Array.from(t)){for(n in d)if(c=d[n],c=e.validate(n,l.props[n]!=null?l.props[n]:c),d[n]=l.props[n]=c,l.bind[n]!=null&&typeof l.bind[n]!="function")throw console.warn(this.node.toMarkup()),o=`${this.node.toString()} - Bind expression \`${l.bind[n]}\` on property \`${n}\` is not a function`,new Error(o);g.push(l)}return[g,f,u,h]}update(){let{playhead:e}=this;const{script:t}=this,{ease:n,seek:r}=this.props,s=this.targetNode;if(r!=null&&(e=r),t.length){let o;const a=function(){let w=t[0];for(let C=0;C<t.length;C++){const E=t[C];if(E.key>e)break;w=E}return w};let{section:l}=this;if((!l||e<l.key||e>l.next.key)&&(l=a()),l===this.section)return;this.section=l;const c=l,u=l.next,h=c.key,d=u.key,f=(()=>{switch(n){case"linear":case 0:return P4;case"cosine":case 1:return K1;case"binary":case 2:return b5;case"hold":case 3:return y5;default:return K1}})(),{clock:g}=s,v=w=>{if(this.velocity==null)return this.playhead;const C=g.getTime();return this.playhead+this.velocity*(w-C.time)},y=function(){const w=1/Math.max(1e-4,d-h);return C=>f((v(C)-h)*w,0,1)}(),_=w=>{const C=c.bind[w],E=u.bind[w],k=c.props[w],O=u.props[w],R=function(){throw console.warn(s.toMarkup()),new Error(`${this.node.toString()} - Invalid expression result on track \`${w}\``)},A=s.attribute(w),D=this.values[w],I=this._animator;return C&&E?((q,j,Y)=>function(F,re){let ee,J;return q[0]=ee=A.T.validate(C(F,re),q[0],R),q[1]=J=A.T.validate(E(F,re),q[1],R),q[2]=I.lerp(A.T,ee,J,y(F),q[2])})(D):C?((q,j,Y)=>function(F,re){let ee;return q[0]=ee=A.T.validate(C(F,re),q[0],R),q[1]=I.lerp(A.T,ee,O,y(F),q[1])})(D):E?((q,j,Y)=>function(F,re){let ee;return q[0]=ee=A.T.validate(E(F,re),q[0],R),q[1]=I.lerp(A.T,k,ee,y(F),q[1])})(D):((q,j,Y)=>(F,re)=>q[0]=I.lerp(A.T,k,O,y(F),q[0]))(D)},S={};for(o in c.bind)S[o]==null&&(S[o]=_(o));for(o in u.bind)S[o]==null&&(S[o]=_(o));for(o in c.props)S[o]==null&&(S[o]=_(o));for(o in u.props)S[o]==null&&(S[o]=_(o));return this.bindExpr(S)}}change(e,t,n){if(e["track.target"]||e["track.script"]||e["track.mode"])return this.rebuild();if(e["seek.seek"]||n)return this.update()}}x5.initClass();let gU=class extends x5{static initClass(){this.traits=["node","track","trigger","play","bind"]}init(){return super.init(),this.skew=null,this.start=null}reset(e){return e==null&&(e=!0),this.skew=e?0:null,this.start=null}make(){super.make(),this._listen("slide","slide.step",t=>{const{trigger:n}=this.props;if(n!=null&&t.index===n)return this.reset();if(n!=null&&t.index===0)return this.reset(!1)}),(!this.props.trigger||this._inherit("slide")==null)&&this.reset();const e=this._inherit("clock");return this._listen(e,"clock.tick",()=>{const{from:t,to:n,speed:r,pace:s,delay:o,realtime:a}=this.props,l=e.getTime();if(this.skew!=null){const c=a?l.time:l.clock,u=a?l.delta:l.step,h=r/s;this.start==null&&(this.start=c),this.skew+=u*(h-1);let d=Math.max(0,c-this.start+this.skew-o*h);this.props.loop&&(d=d%(n-t)),this.playhead=Math.min(n,t+d)}else this.playhead=0;return this.update()})}update(){return super.update()}change(e,t,n){return e["trigger.trigger"]||e["play.realtime"]?this.rebuild():super.change(e,t,n)}};gU.initClass();class vU extends cl{static initClass(){this.traits=["node","present"]}init(){}make(){return this.nodes=[],this.steps=[],this.length=0,this.last=[],this.index=0,this.dirty=[],this._listen("root","root.update",this.update),this._compute("present.length",()=>this.length)}adopt(e){const{node:t}=e;return this.nodes.indexOf(e)<0&&this.nodes.push(t),this.dirty.push(e)}unadopt(e){return this.nodes=this.nodes.filter(t=>t!==e),this.dirty.push(e)}update(){if(this.dirty.length){for(const e of Array.from(this.dirty))this.slideReset(e);return[this.steps,this.indices]=Array.from(this.process(this.nodes)),this.length=this.steps.length,this.index=null,this.go(this.props.index),this.dirty=[]}}slideLatch(e,t,n){return e.slideLatch(t,n)}slideStep(e,t,n){return e.slideStep(this.mapIndex(e,t),n)}slideRelease(e,t){return e.slideRelease()}slideReset(e){return e.slideReset()}mapIndex(e,t){return t-this.indices[e.node._id]}process(e){const t=f=>Array.from(f).map(g=>r(g).filter(s)),r=(f=>g=>(()=>{let v,y;const _=[];for(;g&&([g,v]=Array.from(y=[f(g),g]),y);)_.push(v);return _})())(function(f){return f.parent.traits.hash.present?null:f.parent}),s=f=>e.indexOf(f)>=0,o=f=>f.sort(function(g,v){const y=g.length,_=v.length;let S=Math.min(y,_);for(let w=1,C=S,E=1<=C;E?w<=C:w>=C;E?w++:w--){const k=g[y-w],O=v[_-w],R=k.props.order,A=O.props.order;if(R!=null||A!=null){if(R!=null&&A!=null&&(S=R-A)!==0)return S;if(R!=null)return-1;if(A!=null)return 1}if(O.order!==k.order)return O.order-k.order}return S=y-_,S!==0?S:0}),a=function(f){const g=[],v=[];for(const y of Array.from(f))(y[0].props.steps!=null?g:v).push(y);return[g,v]},l=function(f){let g;const[v,y]=Array.from(f),_=100,S={};let w=[];const C=function(k,O){let R;const{props:A}=R=k[0],D=k[1],I=D!=null?S[D._id]:0,q=O;let j=A.from!=null?I+A.from:q-A.early,Y=A.to!=null?I+A.to:q+A.steps+A.late;j=Math.max(0,j),Y=Math.min(_,Y),S[R._id]==null&&(S[R._id]=j);for(let F=j,re=Y,ee=j<=re;ee?F<re:F>re;ee?F++:F--)w[F]=(w[F]!=null?w[F]:w[F]=[]).concat(k);return A.steps};let E=0;for(g of Array.from(v))E+=C(g,E);for(g of Array.from(y))C(g,0);return w=(()=>{const k=[];for(g of Array.from(w))k.push(u(c(g)));return k})(),[w,S]},c=function(f){return f?(()=>{const g=[];for(let v=0;v<f.length;v++){const y=f[v];f.indexOf(y)===v&&g.push(y)}return g})():[]},u=f=>f.sort((g,v)=>g.order-v.order),h=t(e),d=o(h);return l(a(d))}go(e){let t,n;e=Math.max(0,Math.min(this.length+1,+e||0));const r=(t=this.steps[e-1])!=null?t:[],s=this.props.directed?e-this.index:1;this.index=e;const o=(()=>{const h=[];for(n of Array.from(r))this.last.indexOf(n)<0&&h.push(n);return h})(),a=(()=>{const h=[];for(n of Array.from(this.last))r.indexOf(n)<0&&h.push(n);return h})(),l=(()=>{const h=[];for(n of Array.from(r))o.indexOf(n)<0&&a.indexOf(n)<0&&h.push(n);return h})(),c=h=>h.sort((d,f)=>d.order-f.order),u=h=>h.sort((d,f)=>f.order-d.order);for(n of Array.from(c(o)))this.slideLatch(n.controller,!0,s);for(n of Array.from(c(l)))this.slideLatch(n.controller,null,s);for(n of Array.from(c(a)))this.slideLatch(n.controller,!1,s);for(n of Array.from(o))this.slideStep(n.controller,e,s);for(n of Array.from(l))this.slideStep(n.controller,e,s);for(n of Array.from(a))this.slideStep(n.controller,e,s);for(n of Array.from(u(o)))this.slideRelease(n.controller);for(n of Array.from(u(l)))this.slideRelease(n.controller);for(n of Array.from(u(a)))this.slideRelease(n.controller);this.last=r}change(e,t,n){if(e["present.index"]||n)return this.go(this.props.index)}}vU.initClass();class _U extends _5{static initClass(){this.traits=["node","transition","mask","visible","active"]}mask(e){let t,n;return e?(n=this._shaders.shader(),n.pipe(qu("vec4")),n.fan(),n.pipe(e,this.uniforms),n.next(),n.pipe("reveal.mask",this.uniforms),n.end(),n.pipe("float combine(float a, float b) { return min(a, b); }")):(n=this._shaders.shader(),n.pipe("reveal.mask",this.uniforms)),(t=Rje(this._inherit("mask"),r=>r.mask(n)))!=null?t:n}}_U.initClass();function Rje(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class bU extends cl{static initClass(){this.traits=["node","slide","visible","active"]}make(){if(this._helpers.visible.make(),this._helpers.active.make(),!this._inherit("present"))throw new Error(`${this.node.toString()} must be placed inside <present></present>`);return this._inherit("present").adopt(this)}unmake(){return this._helpers.visible.unmake(),this._helpers.active.unmake(),this._inherit("present").unadopt(this)}change(e,t,n){if(e["slide.early"]||e["slide.late"]||e["slide.steps"]||e["slide.from"]||e["slide.to"])return this.rebuild()}slideLatch(e,t){if(this.trigger({type:"transition.latch",step:t}),e!=null)return this._instant(e)}slideStep(e,t){return this.trigger({type:"slide.step",index:e,step:t})}slideRelease(){return this.trigger({type:"transition.release"})}slideReset(){return this._instant(!1),this.trigger({type:"slide.reset"})}_instant(e){return this.setVisible(e),this.setActive(e)}}bU.initClass();class yU extends x5{static initClass(){this.traits=["node","track","step","trigger","bind"]}make(){super.make();const e=this._inherit("clock");return this.actualIndex==null&&(this.actualIndex=null),this.animateIndex=this._animator.make(this._types.number(0),{clock:e,realtime:this.props.realtime,step:t=>this.actualIndex=t}),this.lastIndex==null&&(this.lastIndex=null),this.animateStep=this._animator.make(this._types.number(0),{clock:e,realtime:this.props.realtime,step:t=>(this.playhead=t,this.update())}),this.stops=this.props.stops!=null?this.props.stops:Oje(0,this.script.length,!1),this._listen("slide","slide.reset",t=>this.lastIndex=null),this._listen("slide","slide.step",t=>{let n,{duration:r}=this.props;const{delay:s,pace:o,speed:a,playback:l,rewind:c,skip:u,trigger:h}=this.props,d=Math.max(0,Math.min(this.stops.length-1,t.index-h)),f=this.playhead,g=this.stops[d];if(this.lastIndex==null&&h){this.lastIndex=d,this.animateStep.set(g),this.animateIndex.set(d);return}let v=(n=this.actualIndex!=null?this.actualIndex:this.lastIndex)!=null?n:0;const y=d-v,_=this.stops.slice(Math.min(v,d),Math.max(v,d));let S=0;v=_.shift();for(const C of Array.from(_))v===C&&S++,v=C;this.lastIndex=d;let w=a*(t.step>=0?1:c);if(w*=u?Math.max(1,Math.abs(y)-S):1,r+=Math.abs(g-f)*o/w,f!==g)return this.animateIndex.immediate(d,{delay:s,duration:r,ease:l}),this.animateStep.immediate(g,{delay:s,duration:r,ease:l})})}made(){return this.update()}unmake(){return this.animateIndex.dispose(),this.animateStep.dispose(),this.animateIndex=this.animateStep=null,super.unmake()}change(e,t,n){return e["step.stops"]||e["step.realtime"]?this.rebuild():super.change(e,t,n)}}yU.initClass();function Oje(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let o=i;r?o<s:o>s;r?o++:o--)n.push(o);return n}class xU extends cl{static initClass(){this.traits=["node","root","scene","vertex","texture","rtt","source","index","image"],this.defaults={minFilter:"linear",magFilter:"linear",type:"unsignedByte"}}init(){return this.rtt=this.scene=this.camera=this.width=this.height=this.history=this.rootSize=this.size=null}indexShader(e){return e}imageShader(e){return this.rtt.shaderRelative(e)}sourceShader(e){return this.rtt.shaderAbsolute(e,this.history)}getDimensions(){return{items:1,width:this.width,height:this.height,depth:this.history}}getActiveDimensions(){return this.getDimensions()}make(){let e;if(this.parentRoot=this._inherit("root"),this.rootSize=this.parentRoot.getSize(),this._listen(this.parentRoot,"root.pre",this.pre),this._listen(this.parentRoot,"root.update",this.update),this._listen(this.parentRoot,"root.render",this.render),this._listen(this.parentRoot,"root.post",this.post),this._listen(this.parentRoot,"root.camera",this.setCamera),this._listen(this.parentRoot,"root.resize",function(g){return this.resize(g.size)}),this.rootSize==null)return;const{minFilter:t,magFilter:n,type:r}=this.props,{width:s,height:o,history:a,size:l}=this.props,c=l===this.node.attributes["rtt.size"].enum.relative,u=c?this.rootSize.renderWidth:1,h=c?this.rootSize.renderHeight:1;this.width=Math.round(s!=null?s*u:this.rootSize.renderWidth),this.height=Math.round(o!=null?o*h:this.rootSize.renderHeight),this.history=a,this.aspect=e=this.width/this.height,this.scene==null&&(this.scene=this._renderables.make("scene")),this.rtt=this._renderables.make("renderToTexture",{scene:this.scene,camera:this._context.defaultCamera,width:this.width,height:this.height,frames:this.history,minFilter:t,magFilter:n,type:r}),e=s||o?e:this.rootSize.aspect;const d=s??this.rootSize.viewWidth,f=o??this.rootSize.viewHeight;return this.size={renderWidth:this.width,renderHeight:this.height,aspect:e,viewWidth:d,viewHeight:f,pixelRatio:this.height/f}}made(){if(this.trigger({type:"source.rebuild"}),this.size)return this.trigger({type:"root.resize",size:this.size})}unmake(e){if(this.rtt!=null)return this.rtt.dispose(),e||this.scene.dispose(),this.rtt=this.width=this.height=this.history=null}change(e,t,n){if(t.texture||e["rtt.width"]||e["rtt.height"])return this.rebuild();if(e["root.camera"]||n)return this._unattach(),this._attach(this.props.camera,"camera",this.setCamera,this,this,!0),this.setCamera()}adopt(e){return Array.from(e.renders).map(t=>this.scene.add(t))}unadopt(e){return Array.from(e.renders).map(t=>this.scene.remove(t))}resize(e){let t,n;this.rootSize=e,{width:n,height:t,size:e}=this.props;const r=e===this.node.attributes["rtt.size"].enum.relative;if(!this.rtt||n==null||t==null||r)return this.rebuild()}select(e){return this._root.node.model.select(e,[this.node])}watch(e,t){return this._root.node.model.watch(e,t)}unwatch(e){return this._root.node.model.unwatch(e)}pre(e){return this.trigger(e)}update(e){let t;return(t=this.getOwnCamera())!=null&&(t.aspect=this.aspect||1,t.updateProjectionMatrix()),this.trigger(e)}render(e){return this.trigger(e),this.rtt!=null?this.rtt.render(this.getCamera()):void 0}post(e){return this.trigger(e)}setCamera(){const e=Lje(this.select(this.props.camera)[0],t=>t.controller);if(this.camera!==e)return this.camera=e,this.rtt.camera=this.getCamera(),this.trigger({type:"root.camera"});if(!this.camera)return this.trigger({type:"root.camera"})}getOwnCamera(){return this.camera!=null?this.camera.getCamera():void 0}getCamera(){let e;return(e=this.getOwnCamera())!=null?e:this._inherit("root").getCamera()}vertex(e,t){return t===2?e.pipe("view.position"):t===3?e.pipe("root.position"):e}}xU.initClass();function Lje(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class wU extends Ss{static initClass(){this.traits=["node","bind","object","visible","operator","style","compose"],this.defaults={zWrite:!1,zTest:!1,color:"#ffffff"}}init(){return this.compose=null}resize(){if(!this.compose||!this.bind.source)return;const e=this.bind.source.getActiveDimensions(),{width:t}=e,{height:n}=e;return this.remapUVScale.set(t,n)}make(){if(this._helpers.bind.make([{to:"operator.source",trait:"source"}]),this.bind.source==null)return;const e={remapUVScale:this._attributes.make(this._types.vec2())};this.remapUVScale=e.remapUVScale.value;let t=this._shaders.shader();const{alpha:n}=this.props;this.bind.source.is("image")?(t.pipe("screen.pass.uv",e),t=this.bind.source.imageShader(t)):(t.pipe("screen.map.xy",e),t=this.bind.source.sourceShader(t)),n||t.pipe("color.opaque");const r=this._helpers.style.uniforms();return this.compose=this._renderables.make("screen",{map:t,uniforms:r,linear:!0}),this._helpers.visible.make(),this._helpers.object.make([this.compose])}made(){return this.resize()}unmake(){return this._helpers.bind.unmake(),this._helpers.visible.unmake(),this._helpers.object.unmake()}change(e,t,n){if(e["operator.source"]||e["compose.alpha"])return this.rebuild()}}wU.initClass();class kf extends m0{static initClass(){this.traits=["node","object","visible","view","vertex"]}make(){return this._helpers.visible.make()}unmake(){return this._helpers.visible.unmake()}axis(e){return this.props.range[e-1]}}kf.initClass();class SU extends kf{static initClass(){this.traits=["node","object","visible","view","view3","vertex"]}make(){super.make(),this.uniforms={viewMatrix:this._attributes.make(this._types.mat4())},this.viewMatrix=this.uniforms.viewMatrix.value,this.composer=Pg()}unmake(){super.unmake(),delete this.viewMatrix,delete this.objectMatrix,delete this.uniforms}change(e,t,n){if(!t.view&&!t.view3&&!n)return;const r=this.props.position,s=this.props.scale,o=this.props.quaternion,a=this.props.rotation,l=this.props.range,c=this.props.eulerOrder,{x:u}=l[0],h=l[1].x,d=l[2].x,f=l[0].y-u||1,g=l[1].y-h||1,v=l[2].y-d||1;this.viewMatrix.set(2/f,0,0,-(2*u+f)/f,0,2/g,0,-(2*h+g)/g,0,0,2/v,-(2*d+v)/v,0,0,0,1);const y=this.composer(r,a,o,s,null,c);this.viewMatrix.multiplyMatrices(y,this.viewMatrix),e["view.range"]&&this.trigger({type:"view.range"})}vertex(e,t){return t===1&&e.pipe("cartesian.position",this.uniforms),super.vertex(e,t)}}SU.initClass();class MU extends kf{static initClass(){this.traits=["node","object","visible","view","view4","vertex"]}make(){return super.make(),this.uniforms={basisOffset:this._attributes.make(this._types.vec4()),basisScale:this._attributes.make(this._types.vec4())},this.basisScale=this.uniforms.basisScale.value,this.basisOffset=this.uniforms.basisOffset.value}unmake(){return super.unmake(),delete this.basisScale,delete this.basisOffset,delete this.uniforms}change(e,t,n){if(!t.view&&!t.view4&&!n)return;const r=this.props.position,s=this.props.scale,o=this.props.range,{x:a}=o[0],l=o[1].x,c=o[2].x,u=o[3].x,h=o[0].y-a||1,d=o[1].y-l||1,f=o[2].y-c||1,g=o[3].y-u||1,v=function(y,_){return y.x*=_.x,y.y*=_.y,y.z*=_.z,y.w*=_.w};if(this.basisScale.set(2/h,2/d,2/f,2/g),this.basisOffset.set(-(2*a+h)/h,-(2*l+d)/d,-(2*c+f)/f,-(2*u+g)/g),v(this.basisScale,s),v(this.basisOffset,s),this.basisOffset.add(r),e["view.range"])return this.trigger({type:"view.range"})}vertex(e,t){return t===1&&e.pipe("cartesian4.position",this.uniforms),super.vertex(e,t)}}MU.initClass();class CU extends kf{static initClass(){this.traits=["node","object","visible","view","view3","polar","vertex"]}make(){super.make();const{types:e}=this._attributes;return this.uniforms={polarBend:this.node.attributes["polar.bend"],polarHelix:this.node.attributes["polar.helix"],polarFocus:this._attributes.make(e.number()),polarAspect:this._attributes.make(e.number()),viewMatrix:this._attributes.make(e.mat4())},this.viewMatrix=this.uniforms.viewMatrix.value,this.composer=Pg(),this.aspect=1}unmake(){return super.unmake(),delete this.viewMatrix,delete this.objectMatrix,delete this.aspect,delete this.uniforms}change(e,t,n){let r,s,o;if(!t.view&&!t.view3&&!t.polar&&!n)return;this.helix=this.props.helix,this.bend=s=this.props.bend,this.focus=o=s>0?1/s-1:0;const a=this.props.position,l=this.props.scale,c=this.props.quaternion,u=this.props.rotation,h=this.props.range,d=this.props.eulerOrder,{x:f}=h[0];let g=h[1].x;const v=h[2].x,y=h[0].y-f||1;let _=h[1].y-g||1;const S=h[2].y-v||1,w=l.x,C=l.y,E=y>0?1:-1;[g,_]=Array.from(lg(g,_,s));const k=Math.abs(_),O=y+(k*E-y)*s,R=O/w,A=_/C;this.aspect=r=Math.abs(R/A),this.uniforms.polarFocus.value=o,this.uniforms.polarAspect.value=r,this.viewMatrix.set(2/O,0,0,-(2*f+y)/y,0,2/_,0,-(2*g+_)/_,0,0,2/S,-(2*v+S)/S,0,0,0,1);const D=this.composer(a,u,c,l,null,d);this.viewMatrix.multiplyMatrices(D,this.viewMatrix),(e["view.range"]||t.polar)&&this.trigger({type:"view.range"})}vertex(e,t){return t===1&&e.pipe("polar.position",this.uniforms),super.vertex(e,t)}axis(e){const t=this.props.range[e-1];let n=t.x,r=t.y;return e===2&&this.bend>0&&(r=Math.max(Math.abs(r),Math.abs(n)),n=Math.max(-this.focus/this.aspect,n)),new ht(n,r)}}CU.initClass();class EU extends kf{static initClass(){this.traits=["node","object","visible","view","view3","spherical","vertex"]}make(){return super.make(),this.uniforms={sphericalBend:this.node.attributes["spherical.bend"],sphericalFocus:this._attributes.make(this._types.number()),sphericalAspectX:this._attributes.make(this._types.number()),sphericalAspectY:this._attributes.make(this._types.number()),sphericalScaleY:this._attributes.make(this._types.number()),viewMatrix:this._attributes.make(this._types.mat4())},this.viewMatrix=this.uniforms.viewMatrix.value,this.composer=Pg(),this.aspectX=1,this.aspectY=1}unmake(){return super.unmake(),delete this.viewMatrix,delete this.objectMatrix,delete this.aspectX,delete this.aspectY,delete this.uniforms}change(e,t,n){let r,s,o,a,l;if(!t.view&&!t.view3&&!t.spherical&&!n)return;this.bend=o=this.props.bend,this.focus=a=o>0?1/o-1:0;const c=this.props.position,u=this.props.scale,h=this.props.quaternion,d=this.props.rotation,f=this.props.range,g=this.props.eulerOrder,{x:v}=f[0];let y=f[1].x,_=f[2].x;const S=f[0].y-v||1;let w=f[1].y-y||1,C=f[2].y-_||1;const E=u.x,k=u.y,O=u.z;[y,w]=Array.from(lg(y,w,o)),[_,C]=Array.from(lg(_,C,o));const R=S>0?1:-1,A=w>0?1:-1,D=Math.abs(C),I=S+(D*R-S)*o,q=w+(D*A-w)*o,j=I/E,Y=q/k,F=C/O;this.aspectX=r=Math.abs(j/F),this.aspectY=s=Math.abs(Y/F/r);const re=w/S*E/k*2;this.scaleY=l=Math.min(s/o,1+(re-1)*o),this.uniforms.sphericalBend.value=o,this.uniforms.sphericalFocus.value=a,this.uniforms.sphericalAspectX.value=r,this.uniforms.sphericalAspectY.value=s,this.uniforms.sphericalScaleY.value=l,this.viewMatrix.set(2/I,0,0,-(2*v+S)/S,0,2/q,0,-(2*y+w)/w,0,0,2/C,-(2*_+C)/C,0,0,0,1);const ee=this.composer(c,d,h,u,null,g);if(this.viewMatrix.multiplyMatrices(ee,this.viewMatrix),e["view.range"]||t.spherical)return this.trigger({type:"view.range"})}vertex(e,t){return t===1&&e.pipe("spherical.position",this.uniforms),super.vertex(e,t)}axis(e){const t=this.props.range[e-1];let n=t.x,r=t.y;return e===3&&this.bend>0&&(r=Math.max(Math.abs(r),Math.abs(n)),n=Math.max(-this.focus/this.aspectX+.001,n)),new ht(n,r)}}EU.initClass();class TU extends kf{static initClass(){this.traits=["node","object","visible","view","view3","stereographic","vertex"]}make(){return super.make(),this.uniforms={stereoBend:this.node.attributes["stereographic.bend"],viewMatrix:this._attributes.make(this._types.mat4())},this.viewMatrix=this.uniforms.viewMatrix.value,this.composer=Pg()}unmake(){return super.unmake(),delete this.viewMatrix,delete this.rotationMatrix,delete this.uniforms}change(e,t,n){let r;if(!t.view&&!t.view3&&!t.stereographic&&!n)return;this.bend=r=this.props.bend;const s=this.props.position,o=this.props.scale,a=this.props.quaternion,l=this.props.rotation,c=this.props.range,u=this.props.eulerOrder,{x:h}=c[0],d=c[1].x;let f=c[2].x;const g=c[0].y-h||1,v=c[1].y-d||1;let y=c[2].y-f||1;[f,y]=Array.from(lg(f,y,r,1)),this.uniforms.stereoBend.value=r,this.viewMatrix.set(2/g,0,0,-(2*h+g)/g,0,2/v,0,-(2*d+v)/v,0,0,2/y,-(2*f+y)/y,0,0,0,1);const _=this.composer(s,l,a,o,null,u);if(this.viewMatrix.multiplyMatrices(_,this.viewMatrix),e["view.range"]||t.stereographic)return this.trigger({type:"view.range"})}vertex(e,t){return t===1&&e.pipe("stereographic.position",this.uniforms),super.vertex(e,t)}}TU.initClass();class AU extends kf{static initClass(){this.traits=["node","object","visible","view","view4","stereographic","vertex"]}make(){super.make(),this.uniforms={basisOffset:this._attributes.make(this._types.vec4()),basisScale:this._attributes.make(this._types.vec4()),stereoBend:this.node.attributes["stereographic.bend"]},this.basisScale=this.uniforms.basisScale.value,this.basisOffset=this.uniforms.basisOffset.value}unmake(){super.unmake(),delete this.basisScale,delete this.basisOffset,delete this.uniforms}change(e,t,n){let r;if(!t.view&&!t.view4&&!t.stereographic&&!n)return;this.bend=r=this.props.bend;const s=this.props.position,o=this.props.scale,a=this.props.range,{x:l}=a[0],c=a[1].x,u=a[2].x;let h=a[3].x;const d=a[0].y-l||1,f=a[1].y-c||1,g=a[2].y-u||1;let v=a[3].y-h||1;const y=function(_,S){_.x*=S.x,_.y*=S.y,_.z*=S.z,_.w*=S.w};[h,v]=Array.from(lg(h,v,r,1)),this.basisScale.set(2/d,2/f,2/g,2/v),this.basisOffset.set(-(2*l+d)/d,-(2*c+f)/f,-(2*u+g)/g,-(2*h+v)/v),y(this.basisScale,o),y(this.basisOffset,o),this.basisOffset.add(s),(e["view.range"]||t.stereographic)&&this.trigger({type:"view.range"})}vertex(e,t){return t===1&&e.pipe("stereographic4.position",this.uniforms),super.vertex(e,t)}}AU.initClass();class PU extends Ss{static initClass(){this.traits=["node","bind","shader"],this.freeform=!0}init(){return this.shader=null}make(){const{language:e,code:t}=this.props;if(e!=="glsl")throw new Error("GLSL required");this._helpers.bind.make([{to:"shader.sources",trait:"source",multiple:!0}]);const n=this._shaders.fetch(t),r=this._types,s={},o=a=>{let l;switch(a){case"i":return r.int();case"f":return r.number();case"v2":return r.vec2();case"v3":return r.vec3();case"v4":return r.vec4();case"m3":return r.mat3();case"m4":return r.mat4();case"t":return r.object();default:return l=a.split(""),l.pop()==="v"?r.array(o(l.join(""))):null}};for(const a of Array.from(n._signatures.uniform)){let l;(l=o(a.type))&&(s[a.name]=l)}return this.reconfigure({props:{uniform:s}})}made(){return this.trigger({type:"source.rebuild"})}unmake(){return this.shader=null}change(e,t,n){if(e["shader.uniforms"]||e["shader.code"]||e["shader.language"])return this.rebuild()}shaderBind(e){let t,n,r;e==null&&(e={});const{code:s,indices:o,channels:a}=this.props;for(t in this.node.attributes)r=this.node.attributes[t],r.type!=null&&r.short!=null&&r.ns==="uniform"&&e[r.short]==null&&(e[r.short]=r);if((n=this.props.uniforms)!=null)for(t in n)r=n[t],e[t]=r;const l=this._shaders.shader();if(this.bind.sources!=null)for(const c of Array.from(this.bind.sources))l.callback(),o!=4&&l.pipe(e0(o,4)),l.pipe(c.sourceShader(this._shaders.shader())),a!=4&&l.pipe(pf(4,a)),l.join();return l.pipe(s,e)}}PU.initClass();const Dje={axis:ON,face:LN,grid:DN,line:zN,point:IN,strip:NN,surface:UN,ticks:FN,vector:BN,view:kf,cartesian:SU,cartesian4:MU,polar:CU,spherical:EU,stereographic:TU,stereographic4:AU,transform:YN,transform4:KN,vertex:ZN,fragment:JN,layer:QN,mask:eU,array:i5,interval:QI,matrix:p5,area:AN,voxel:O_,volume:PN,scale:kN,latch:TN,html:VN,dom:HN,text:qN,format:GN,label:WN,retext:jN,clamp:tU,grow:nU,join:iU,lerp:rU,memo:sU,readback:oU,resample:v5,repeat:aU,reverse:lU,swizzle:cU,spread:uU,split:hU,slice:dU,subdivide:fU,transpose:pU,group:BI,inherit:VI,root:HI,unit:qI,shader:PU,camera:WI,rtt:xU,compose:wU,clock:$N,now:XN,move:mU,play:gU,present:vU,reveal:_U,slide:bU,step:yU},zje={array(i,e,t=null){const n=i.lerp?function(s,o,a,l){const c=Math.min(s.length,o.length);for(let u=0,h=c,d=0<=h;d?u<h:u>h;d?u++:u--)a[u]=i.lerp(s[u],o[u],a[u],l);return a}:void 0,r=i.op?function(s,o,a,l){const c=Math.min(s.length,o.length);for(let u=0,h=c,d=0<=h;d?u<h:u>h;d?u++:u--)a[u]=i.op(s[u],o[u],a[u],l);return a}:void 0;return t!=null&&!(t instanceof Array)&&(t=[t]),{uniform(){if(i.uniform)return i.uniform()+"v"},make(){return t!=null?t.slice():e?Nje(0,e,!1).map(s=>i.make()):[]},validate(s,o,a){s instanceof Array||(s=[s]);const l=o.length=e||s.length;for(let c=0,u=l,h=0<=u;h?c<u:c>u;h?c++:c--){const d=s[c]!=null?s[c]:i.make();o[c]=i.validate(d,o[c],a)}return o},equals(s,o){const a=s.length,l=o.length;if(a!==l)return!1;const c=Math.min(a,l);for(let u=0,h=c,d=0<=h;d?u<h:u>h;d?u++:u--)if(!(typeof i.equals=="function"&&i.equals(s[u],o[u])))return!1;return!0},lerp:n,op:r,clone(s){return Array.from(s).map(o=>i.clone(o))}}},letters(i,e,t=null){if(t!=null){t===""+t&&(t=t.split(""));for(let r=0;r<t.length;r++){const s=t[r];t[r]=i.validate(s,s)}}const n=Ii.array(i,e,t);return{uniform(){return n.uniform()},make(){return n.make()},validate(r,s,o){return r===""+r&&(r=r.split("")),n.validate(r,s,o)},equals(r,s){return n.equals(r,s)},clone:n.clone}},nullable(i,e){e==null&&(e=!1);let t=e?i.make():null;const n=i.emitter?function(o,a){return a==null?o:o==null?a:i.emitter(o,a)}:void 0,r=i.lerp?function(o,a,l,c){return o===null||a===null?c<.5?o:a:(l==null&&(l=i.make()),t=i.lerp(o,a,l,c),l)}:void 0,s=i.op?function(o,a,l,c){return o===null||a===null?null:(l==null&&(l=i.make()),t=i.op(o,a,l,c),t)}:void 0;return{make(){return t},validate(o,a,l){return o===null?o:(a===null&&(a=i.make()),i.validate(o,a,l))},uniform(){return typeof i.uniform=="function"?i.uniform():void 0},equals(o,a){let l;const c=o===null,u=a===null;return c&&u?!0:c^u?!1:(l=typeof i.equals=="function"?i.equals(o,a):void 0)!=null?l:o===a},lerp:r,op:s,emitter:n}},enum(i,e,t){let n;e==null&&(e=[]),t==null&&(t={});let r=0;const s={};for(n of Array.from(e))n!==+n&&t[n]==null&&(t[n]=r++);for(n of Array.from(e))n===+n&&(s[n]=n);for(n in t)r=t[n],s[r]=!0;return s[i]==null&&(i=t[i]),{enum(){return t},make(){return i},validate(o,a,l){const c=s[o]?o:t[o];return c??l()}}},enumber(i,e,t){t==null&&(t={});const n=Ii.enum(i,e,t);return{enum:n.enum,uniform(){return"f"},make(){let r;return(r=n.make())!=null?r:+i},validate(r,s,o){return r===+r?r:n.validate(r,s,o)},op(r,s,o,a){return a(r,s)}}},select(i){return i==null&&(i="<"),{make(){return i},validate(e,t,n){return typeof e=="string"||typeof e=="object"?e:n()}}},bool(i){return i=!!i,{uniform(){return"f"},make(){return i},validate(e,t,n){return!!e}}},int(i){return i==null&&(i=0),i=+Math.round(i),{uniform(){return"i"},make(){return i},validate(e,t,n){let r;return e!==(r=+e)?n():Math.round(r)||0},op(e,t,n,r){return r(e,t)}}},round(i){return i==null&&(i=0),i=+Math.round(i),{uniform(){return"f"},make(){return i},validate(e,t,n){let r;return e!==(r=+e)?n():Math.round(r)||0},op(e,t,n,r){return r(e,t)}}},number(i){return i==null&&(i=0),{uniform(){return"f"},make(){return+i},validate(e,t,n){let r;return e!==(r=+e)?n():r||0},op(e,t,n,r){return r(e,t)}}},positive(i,e){return e==null&&(e=!1),{uniform:i.uniform,make:i.make,validate(t,n,r){return t=i.validate(t,n,r),t<0||e&&t<=0?r():t},op(t,n,r,s){return s(t,n)}}},string(i){return i==null&&(i=""),{make(){return""+i},validate(e,t,n){let r;return e!==(r=""+e)?n():r}}},func(){return{make(){return function(){}},validate(i,e,t){return typeof i=="function"?i:t()}}},emitter(){return{make(){return i=>i(1,1,1,1)},validate(i,e,t){return typeof i=="function"?i:t()},emitter(i,e){return $I(i,e)}}},object(i){return{make(){return i??{}},validate(e,t,n){return typeof e=="object"?e:n()},clone(e){return JSON.parse(JSON.stringify(e))}}},timestamp(i=null){return typeof i=="string"&&(i=Date.parse(i)),{uniform(){return"f"},make(){return i??+new Date},validate(e,t,n){return e=Date.parse(e),e!==+e?n():e},op(e,t,n,r){return r(e,t)}}},vec2(i,e){i==null&&(i=0),e==null&&(e=0);const t=[i,e];return{uniform(){return"v2"},make(){return new ht(i,e)},validate(n,r,s){if(n===+n&&(n=[n]),n!=null&&n.isVector2)r.copy(n);else if(n instanceof Array)n=n.concat(t.slice(n.length)),r.set.apply(r,n);else if(n!=null){const o=n.x!=null?n.x:i,a=n.y!=null?n.y:e;r.set(o,a)}else return s();return r},equals(n,r){return n.x===r.x&&n.y===r.y},op(n,r,s,o){return s.x=o(n.x,r.x),s.y=o(n.y,r.y),s}}},ivec2(i,e){i==null&&(i=0),e==null&&(e=0);const t=Ii.vec2(i,e),{validate:n}=t;return t.validate=function(r,s,o){return n(r,s,o),s.x=Math.round(s.x),s.y=Math.round(s.y),s},t},vec3(i,e,t){i==null&&(i=0),e==null&&(e=0),t==null&&(t=0);const n=[i,e,t];return{uniform(){return"v3"},make(){return new oe(i,e,t)},validate(r,s,o){if(r===+r&&(r=[r]),r!=null&&r.isVector3)s.copy(r);else if(r instanceof Array)r=r.concat(n.slice(r.length)),s.set.apply(s,r);else if(r!=null){const a=r.x!=null?r.x:i,l=r.y!=null?r.y:e,c=r.z!=null?r.z:t;s.set(a,l,c)}else return o();return s},equals(r,s){return r.x===s.x&&r.y===s.y&&r.z===s.z},op(r,s,o,a){return o.x=a(r.x,s.x),o.y=a(r.y,s.y),o.z=a(r.z,s.z),o}}},ivec3(i,e,t){i==null&&(i=0),e==null&&(e=0),t==null&&(t=0);const n=Ii.vec3(i,e,t),{validate:r}=n;return n.validate=function(s,o,a){return r(s,o,a),o.x=Math.round(o.x),o.y=Math.round(o.y),o.z=Math.round(o.z),o},n},vec4(i,e,t,n){i==null&&(i=0),e==null&&(e=0),t==null&&(t=0),n==null&&(n=0);const r=[i,e,t,n];return{uniform(){return"v4"},make(){return new Li(i,e,t,n)},validate(s,o,a){if(s===+s&&(s=[s]),s!=null&&s.isVector4)o.copy(s);else if(s instanceof Array)s=s.concat(r.slice(s.length)),o.set.apply(o,s);else if(s!=null){const l=s.x!=null?s.x:i,c=s.y!=null?s.y:e,u=s.z!=null?s.z:t,h=s.w!=null?s.w:n;o.set(l,c,u,h)}else return a();return o},equals(s,o){return s.x===o.x&&s.y===o.y&&s.z===o.z&&s.w===o.w},op(s,o,a,l){return a.x=l(s.x,o.x),a.y=l(s.y,o.y),a.z=l(s.z,o.z),a.w=l(s.w,o.w),a}}},ivec4(i,e,t,n){i==null&&(i=0),e==null&&(e=0),t==null&&(t=0),n==null&&(n=0);const r=Ii.vec4(i,e,t,n),{validate:s}=r;return r.validate=function(o,a,l){return s(o,a,l),a.x=Math.round(a.x),a.y=Math.round(a.y),a.z=Math.round(a.z),a.w=Math.round(a.w),a},r},mat3(i,e,t,n,r,s,o,a,l){i==null&&(i=1),e==null&&(e=0),t==null&&(t=0),n==null&&(n=0),r==null&&(r=1),s==null&&(s=0),o==null&&(o=0),a==null&&(a=0),l==null&&(l=1);const c=[i,e,t,n,r,s,o,a,l];return{uniform(){return"m4"},make(){const u=new pi;return u.set(i,e,t,n,r,s,o,a,l),u},validate(u,h,d){if(u!=null&&u.isMatrix3)h.copy(u);else if(u instanceof Array)u=u.concat(c.slice(u.length)),h.set.apply(h,u);else return d();return h}}},mat4(i,e,t,n,r,s,o,a,l,c,u,h,d,f,g,v){i==null&&(i=1),e==null&&(e=0),t==null&&(t=0),n==null&&(n=0),r==null&&(r=0),s==null&&(s=1),o==null&&(o=0),a==null&&(a=0),l==null&&(l=0),c==null&&(c=0),u==null&&(u=1),h==null&&(h=0),d==null&&(d=0),f==null&&(f=0),g==null&&(g=0),v==null&&(v=1);const y=[i,e,t,n,r,s,o,a,l,c,u,h,d,f,g,v];return{uniform(){return"m4"},make(){const _=new qn;return _.set(i,e,t,n,r,s,o,a,l,c,u,h,d,f,g,v),_},validate(_,S,w){if(_!=null&&_.isMatrix4)S.copy(_);else if(_ instanceof Array)_=_.concat(y.slice(_.length)),S.set.apply(S,_);else return w();return S}}},quat(i,e,t,n){i==null&&(i=0),e==null&&(e=0),t==null&&(t=0),n==null&&(n=1);const r=Ii.vec4(i,e,t,n);return{uniform(){return"v4"},make(){return new Ro},validate(s,o,a){return s!=null&&s.isQuaternion?o.copy(s):o=r.validate(s,o,a),o.normalize(),o},equals(s,o){return s.x===o.x&&s.y===o.y&&s.z===o.z&&s.w===o.w},op(s,o,a,l){return a.x=l(s.x,o.x),a.y=l(s.y,o.y),a.z=l(s.z,o.z),a.w=l(s.w,o.w),a.normalize(),a},lerp(s,o,a,l){return a.slerpQuaternions?a.slerpQuaternions(s,o,l):Ro.slerp(s,o,a,l),a}}},color(i,e,t){i==null&&(i=.5),e==null&&(e=.5),t==null&&(t=.5);const n=[i,e,t];return{uniform(){return"c"},make(){return new qt(i,e,t)},validate(r,s,o){if(r===""+r?r=new qt().setStyle(r):r===+r&&(r=new qt(r)),r!=null&&r.isColor)s.copy(r);else if(r instanceof Array)r=r.concat(n.slice(r.length)),s.setRGB.apply(s,r);else if(r!=null){const a=r.r!=null?r.r:i,l=r.g!=null?r.g:e,c=r.b!=null?r.b:t;s.set(a,l,c)}else return o();return s},equals(r,s){return r.r===s.r&&r.g===s.g&&r.b===s.b},op(r,s,o,a){return o.r=a(r.r,s.r),o.g=a(r.g,s.g),o.b=a(r.b,s.b),o}}},axis(i,e){let t;i==null&&(i=1),e==null&&(e=!1);const n={x:1,y:2,z:3,w:4,W:1,H:2,D:3,I:4,zero:0,null:0,width:1,height:2,depth:3,items:4},r=e?[0,1,2,3,4]:[1,2,3,4];return(t=n[i])!=null&&(i=t),{make(){return i},validate(s,o,a){let l;return(t=n[s])!=null&&(s=t),s=(l=Math.round(s))!=null?l:0,Array.from(r).includes(s)?s:a()}}},transpose(i){i==null&&(i=[1,2,3,4]);const e=Ii.letters(Ii.axis(null,!1),0,i),t=Ii.letters(Ii.axis(null,!1),4,i);return{make(){return t.make()},validate(n,r,s){let o=[1,2,3,4];if(e.validate(n,o,s),o.length<4){const l=[1,2,3,4].filter(c=>o.indexOf(c)===-1);o=o.concat(l)}return Array.from(o).map((l,c)=>o.indexOf(l)===c).indexOf(!1)<0?t.validate(o,r,s):s()},equals:t.equals,clone:t.clone}},swizzle(i,e=null){i==null&&(i=[1,2,3,4]),e==null&&(e=i.length),i=i.slice(0,e);const t=Ii.letters(Ii.axis(null,!1),0,i),n=Ii.letters(Ii.axis(null,!0),e,i);return{make(){return n.make()},validate(r,s,o){let a=i.slice();return t.validate(r,a,o),a.length<e&&(a=a.concat([0,0,0,0]).slice(0,e)),n.validate(a,s,o)},equals:n.equals,clone:n.clone}},classes(){const i=Ii.array(Ii.string());return{make(){return i.make()},validate(e,t,n){return e===""+e&&(e=e.split(" ")),e=e.filter(r=>!!r.length),i.validate(e,t,n)},equals:i.equals,clone:i.clone}},blending(i){i==null&&(i="normal");const e=["no","normal","add","subtract","multiply","custom"];return Ii.enum(i,e)},filter(i){i==null&&(i="nearest");const e={nearest:Oi,nearestMipMapNearest:$T,nearestMipMapLinear:XT,linear:Hr,linearMipMapNearest:KT,linearMipmapLinear:ZT};return Ii.enum(i,[],e)},type(i){i==null&&(i="unsignedByte");const e={unsignedByte:Sa,byte:v_,short:__,unsignedShort:o0,int:wg,unsignedInt:dc,float:Ks};return Ii.enum(i,[],e)},scale(i){i==null&&(i="linear");const e=["linear","log"];return Ii.enum(i,e)},mapping(i){i==null&&(i="relative");const e=["relative","absolute"];return Ii.enum(i,e)},indexing(i){i==null&&(i="original");const e=["original","final"];return Ii.enum(i,e)},shape(i){i==null&&(i="circle");const e=["circle","square","diamond","up","down","left","right"];return Ii.enum(i,e)},join(i){i==null&&(i="miter");const e=["miter","round","bevel"];return Ii.enum(i,e)},stroke(i){i==null&&(i="solid");const e=["solid","dotted","dashed"];return Ii.enum(i,e)},vertexPass(i){i==null&&(i="view");const e=["data","view","world","eye"];return Ii.enum(i,e)},fragmentPass(i){i==null&&(i="light");const e=["color","light","rgba"];return Ii.enum(i,e)},ease(i){i==null&&(i="linear");const e=["linear","cosine","binary","hold"];return Ii.enum(i,e)},fit(i){i==null&&(i="contain");const e=["x","y","contain","cover"];return Ii.enum(i,e)},anchor(i){i==null&&(i="middle");const e={first:1,middle:0,last:-1};return Ii.enumber(i,[],e)},transitionState(i){i==null&&(i="enter");const e={enter:-1,visible:0,exit:1};return Ii.enumber(i,[],e)},font(i){i==null&&(i="sans-serif");const e=RN;i instanceof Array||(i=e(i));const t=Ii.array(Ii.string(),0,i);return{make(){return t.make()},validate(n,r,s){try{n instanceof Array||(n=e(n))}catch{return s()}return n=n.filter(o=>!!o.length),t.validate(n,r,s)},equals:t.equals,clone:t.clone}},data(i){return{make(){return[]},validate(e,t,n){return e instanceof Array||(e!=null?e.length:void 0)!=null?e:n()},emitter(e,t){return XI(e,t)}}}},Ije=function(i){for(const e in i){const t=i[e];i[e]=(n=>function(){const r=n.apply(n,arguments);return r.validate==null&&(r.validate=s=>s!=null),r.equals==null&&(r.equals=(s,o)=>s===o),r.clone==null&&(r.clone=function(s){let o;return(o=Uje(s,"clone",a=>a.clone()))!=null?o:s}),r})(t)}return i},Ii=Ije(zje);function Nje(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let o=i;r?o<s:o>s;r?o++:o--)n.push(o);return n}function Uje(i,e,t){if(typeof i<"u"&&i!==null&&typeof i[e]=="function")return t(i,e)}const W=Ii,Fje={node:{id:W.nullable(W.string()),classes:W.classes()},entity:{active:W.bool(!0)},object:{visible:W.bool(!0)},latch:{data:W.nullable(W.object()),deep:W.nullable(W.bool(!0))},unit:{scale:W.nullable(W.number()),fov:W.nullable(W.number()),focus:W.nullable(W.number(1),!0)},span:{range:W.nullable(W.vec2(-1,1))},view:{range:W.array(W.vec2(-1,1),4)},view3:{position:W.vec3(),quaternion:W.quat(),rotation:W.vec3(),scale:W.vec3(1,1,1),eulerOrder:W.swizzle("xyz")},view4:{position:W.vec4(),scale:W.vec4(1,1,1,1)},layer:{depth:W.number(1),fit:W.fit("y")},vertex:{pass:W.vertexPass()},fragment:{pass:W.fragmentPass(),gamma:W.bool(!1)},transform3:{position:W.vec3(),quaternion:W.quat(),rotation:W.vec3(),eulerOrder:W.swizzle("xyz"),scale:W.vec3(1,1,1),matrix:W.mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transform4:{position:W.vec4(),scale:W.vec4(1,1,1,1),matrix:W.mat4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},camera:{proxy:W.bool(!1),position:W.nullable(W.vec3()),quaternion:W.nullable(W.quat()),rotation:W.nullable(W.vec3()),lookAt:W.nullable(W.vec3()),up:W.nullable(W.vec3()),eulerOrder:W.swizzle("xyz"),fov:W.nullable(W.number(1))},polar:{bend:W.number(1),helix:W.number(0)},spherical:{bend:W.number(1)},stereographic:{bend:W.number(1)},interval:{axis:W.axis()},area:{axes:W.swizzle([1,2],2)},volume:{axes:W.swizzle([1,2,3],3)},origin:{origin:W.vec4()},scale:{divide:W.number(10),unit:W.number(1),base:W.number(10),mode:W.scale(),start:W.bool(!0),end:W.bool(!0),zero:W.bool(!0),factor:W.positive(W.number(1)),nice:W.bool(!0)},grid:{lineX:W.bool(!0),lineY:W.bool(!0),crossed:W.bool(!1),closedX:W.bool(!1),closedY:W.bool(!1)},axis:{detail:W.int(1),crossed:W.bool(!1)},data:{data:W.nullable(W.data()),expr:W.nullable(W.emitter()),bind:W.nullable(W.func()),live:W.bool(!0)},buffer:{channels:W.enum(4,[1,2,3,4]),items:W.int(1),fps:W.nullable(W.int(60)),hurry:W.int(5),limit:W.int(60),realtime:W.bool(!1),observe:W.bool(!1),aligned:W.bool(!1)},sampler:{centered:W.bool(!1),padding:W.number(0)},array:{width:W.nullable(W.positive(W.int(1),!0)),bufferWidth:W.int(1),history:W.int(1)},matrix:{width:W.nullable(W.positive(W.int(1),!0)),height:W.nullable(W.positive(W.int(1),!0)),history:W.int(1),bufferWidth:W.int(1),bufferHeight:W.int(1)},voxel:{width:W.nullable(W.positive(W.int(1),!0)),height:W.nullable(W.positive(W.int(1),!0)),depth:W.nullable(W.positive(W.int(1),!0)),bufferWidth:W.int(1),bufferHeight:W.int(1),bufferDepth:W.int(1)},resolve:{expr:W.nullable(W.func()),items:W.int(1)},style:{opacity:W.positive(W.number(1)),color:W.color(),blending:W.blending(),zWrite:W.bool(!0),zTest:W.bool(!0),zIndex:W.positive(W.round()),zBias:W.number(0),zOrder:W.nullable(W.int())},geometry:{points:W.select(),colors:W.nullable(W.select())},point:{size:W.positive(W.number(4)),sizes:W.nullable(W.select()),shape:W.shape(),optical:W.bool(!0),fill:W.bool(!0),depth:W.number(1)},line:{width:W.positive(W.number(2)),depth:W.positive(W.number(1)),join:W.join(),stroke:W.stroke(),proximity:W.nullable(W.number(1/0)),closed:W.bool(!1)},mesh:{fill:W.bool(!0),shaded:W.bool(!1),normals:W.nullable(W.select()),map:W.nullable(W.select()),lineBias:W.number(5)},strip:{line:W.bool(!1)},face:{line:W.bool(!1)},arrow:{size:W.number(3),start:W.bool(!1),end:W.bool(!1)},ticks:{normal:W.vec3(0,0,1),size:W.positive(W.number(10)),epsilon:W.positive(W.number(.001))},attach:{offset:W.vec2(0,-20),snap:W.bool(!1),depth:W.number(0)},format:{digits:W.nullable(W.positive(W.number(3))),data:W.nullable(W.data()),expr:W.nullable(W.func()),live:W.bool(!0)},font:{font:W.font("sans-serif"),style:W.string(),variant:W.string(),weight:W.string(),detail:W.number(24),sdf:W.number(5)},label:{text:W.select(),size:W.number(16),outline:W.number(2),expand:W.number(0),background:W.color(1,1,1)},overlay:{opacity:W.number(1),zIndex:W.positive(W.round(0))},dom:{points:W.select(),html:W.select(),size:W.number(16),outline:W.number(2),zoom:W.number(1),color:W.nullable(W.color()),attributes:W.nullable(W.object()),pointerEvents:W.bool(!1)},texture:{minFilter:W.filter("nearest"),magFilter:W.filter("nearest"),type:W.type("float")},shader:{sources:W.nullable(W.select()),indices:W.number(4),channels:W.number(4),language:W.string("glsl"),code:W.string(),uniforms:W.nullable(W.object())},include:{shader:W.select()},operator:{source:W.select()},spread:{unit:W.mapping(),items:W.nullable(W.vec4()),width:W.nullable(W.vec4()),height:W.nullable(W.vec4()),depth:W.nullable(W.vec4()),alignItems:W.anchor(),alignWidth:W.anchor(),alignHeight:W.anchor(),alignDepth:W.anchor()},grow:{scale:W.number(1),items:W.nullable(W.anchor()),width:W.nullable(W.anchor()),height:W.nullable(W.anchor()),depth:W.nullable(W.anchor())},split:{order:W.transpose("wxyz"),axis:W.nullable(W.axis()),length:W.int(1),overlap:W.int(0)},join:{order:W.transpose("wxyz"),axis:W.nullable(W.axis()),overlap:W.int(0)},swizzle:{order:W.swizzle()},transpose:{order:W.transpose()},repeat:{items:W.number(1),width:W.number(1),height:W.number(1),depth:W.number(1)},slice:{items:W.nullable(W.vec2()),width:W.nullable(W.vec2()),height:W.nullable(W.vec2()),depth:W.nullable(W.vec2())},reverse:{items:W.bool(!1),width:W.bool(!1),height:W.bool(!1),depth:W.bool(!1)},lerp:{size:W.mapping("absolute"),items:W.nullable(W.number()),width:W.nullable(W.number()),height:W.nullable(W.number()),depth:W.nullable(W.number())},subdivide:{items:W.nullable(W.positive(W.int(),!0)),width:W.nullable(W.positive(W.int(),!0)),height:W.nullable(W.positive(W.int(),!0)),depth:W.nullable(W.positive(W.int(),!0)),bevel:W.number(1),lerp:W.bool(!0)},resample:{indices:W.number(4),channels:W.number(4),sample:W.mapping(),size:W.mapping("absolute"),items:W.nullable(W.number()),width:W.nullable(W.number()),height:W.nullable(W.number()),depth:W.nullable(W.number())},readback:{type:W.type("float"),expr:W.nullable(W.func()),data:W.data(),channels:W.enum(4,[1,2,3,4]),items:W.nullable(W.int()),width:W.nullable(W.int()),height:W.nullable(W.int()),depth:W.nullable(W.int())},root:{speed:W.number(1),camera:W.select("[camera]")},inherit:{source:W.select(),traits:W.array(W.string())},rtt:{size:W.mapping("absolute"),width:W.nullable(W.number()),height:W.nullable(W.number()),history:W.int(1)},compose:{alpha:W.bool(!1)},present:{index:W.int(1),directed:W.bool(!0),length:W.number(0)},slide:{order:W.nullable(W.int(0)),steps:W.number(1),early:W.int(0),late:W.int(0),from:W.nullable(W.int(0)),to:W.nullable(W.int(1))},transition:{stagger:W.vec4(),enter:W.nullable(W.number(1)),exit:W.nullable(W.number(1)),delay:W.number(0),delayEnter:W.nullable(W.number(0)),delayExit:W.nullable(W.number(0)),duration:W.number(.3),durationEnter:W.nullable(W.number(0)),durationExit:W.nullable(W.number(0))},move:{from:W.vec4(),to:W.vec4()},seek:{seek:W.nullable(W.number(0))},track:{target:W.select(),script:W.object({}),ease:W.ease("cosine")},trigger:{trigger:W.nullable(W.int(1),!0)},step:{playback:W.ease("linear"),stops:W.nullable(W.array(W.number())),delay:W.number(0),duration:W.number(.3),pace:W.number(0),speed:W.number(1),rewind:W.number(2),skip:W.bool(!0),realtime:W.bool(!1)},play:{delay:W.number(0),pace:W.number(1),speed:W.number(1),from:W.number(0),to:W.number(1/0),realtime:W.bool(!1),loop:W.bool(!1)},now:{now:W.nullable(W.timestamp()),seek:W.nullable(W.number(0)),pace:W.number(1),speed:W.number(1)}},kU=function(i,e,t,n,r,s,o,a,l,c){let u,h,d;c==null&&(c=!0),t||(t=10),n||(n=1),r||(r=10),s||(s=1);const g=(e-i)/t;if(!c)return u=(()=>{let C,E;const k=[];for(h=0,E=t,C=0<=E;C?h<=E:h>=E;C?h++:h--)k.push(i+h*g);return k})(),o||u.shift(),a||u.pop(),l||(u=u.filter(C=>C!==0)),u;n||(n=1),r||(r=10);const v=n*Math.pow(r,Math.floor(Math.log(g/n)/Math.log(r))),y=r%2===0?[r/2,1,1/2]:r%3===0?[r/3,1,1/3]:[1],_=(()=>{const C=[];for(d of Array.from(y))C.push(v*d);return C})();let S=1/0,w=_.reduce(function(C,E){d=E/g;const k=Math.max(d,1/d);return k<S?(S=k,E):C},v);return w*=s,i=Math.ceil(i/w+ +!o)*w,e=(Math.floor(e/w)-+!a)*w,t=Math.ceil((e-i)/w),u=(()=>{let C,E;const k=[];for(h=0,E=t,C=0<=E;C?h<=E:h>=E;C?h++:h--)k.push(i+h*w);return k})(),l||(u=u.filter(C=>C!==0)),u},RU=function(i,e,t,n,r,s,o,a,l,c){throw new Error("Log ticks not yet implemented.")},Bje=0,Vje=1,OU=function(i,e,t,n,r,s,o,a,l,c,u){switch(i){case Bje:return kU(e,t,n,r,s,o,a,l,c,u);case Vje:return RU()}},Hje=Object.freeze(Object.defineProperty({__proto__:null,linear:kU,log:RU,make:OU},Symbol.toStringTag,{value:"Module"})),qje={bind:{make(i){this.bind==null&&(this.bind={}),this.bound==null&&(this.bound=[]);for(const e of Array.from(i)){let{callback:t}=e;const{to:n,trait:r,optional:s,unique:o,multiple:a}=e;t==null&&(t=this.rebuild);const l=n.split(/\./g).pop(),c=this._get(n);let u=null;if(c!=null){let h=this,d=!1;for(;!d;){h=u=this._attach(c,r,t,this,h,s,a);const f=o&&(u==null||this.bound.indexOf(u)<0);d=a||s||!o||f}}if(u!=null)if(this.resize!=null&&this._listen(u,"source.resize",this.resize),t&&this._listen(u,"source.rebuild",t),a)for(const h of Array.from(u))this.bound.push(h);else this.bound.push(u);this.bind[l]=u}return null},unmake(){if(this.bind)return delete this.bind,delete this.bound}},span:{make(){return this.spanView=this._inherit("view"),this._listen("view","view.range",()=>this.trigger({type:"span.range"}))},unmake(){return delete this.spanView},get:function(){const i=new ht(-1,1);return function(e,t){let n;const r=this._get(e+"span.range");return r??((n=this.spanView!=null?this.spanView.axis(t):void 0)!=null?n:i)}}()},scale:{divide(i){const e=this._get(i+"scale.divide"),t=this._get(i+"scale.factor");return Math.round(e*2.5/t)},generate(i,e,t,n){const r=this._get(i+"scale.mode"),s=this._get(i+"scale.divide"),o=this._get(i+"scale.unit"),a=this._get(i+"scale.base"),l=this._get(i+"scale.factor"),c=this._get(i+"scale.start"),u=this._get(i+"scale.end"),h=this._get(i+"scale.zero"),d=this._get(i+"scale.nice"),f=OU(r,t,n,s,o,a,l,c,u,h,d);return e.copy(f),f}},style:{uniforms(){return{styleColor:this.node.attributes["style.color"],styleOpacity:this.node.attributes["style.opacity"],styleZBias:this.node.attributes["style.zBias"],styleZIndex:this.node.attributes["style.zIndex"]}}},arrow:{uniforms(){const{start:i}=this.props,{end:e}=this.props,t=this._attributes.make(this._types.number(1.25/(i+e))),n=this._attributes.make(this._types.vec2(+i,+e)),r=this.node.attributes["arrow.size"];return{clipStyle:n,clipRange:r,clipSpace:t,arrowSpace:t,arrowSize:r}}},point:{uniforms(){return{pointSize:this.node.attributes["point.size"],pointDepth:this.node.attributes["point.depth"]}}},line:{uniforms(){return{lineWidth:this.node.attributes["line.width"],lineDepth:this.node.attributes["line.depth"],lineProximity:this.node.attributes["line.proximity"]}}},surface:{uniforms(){return{}}},shade:{pipeline(i){if(!this._inherit("fragment"))return i;i==null&&(i=this._shaders.shader());for(let e=0;e<=2;e++)i=Bk(this._inherit("fragment"),t=>t.fragment(i,e));return i.pipe("fragment.map.rgba"),i},normal(i){return i.pipe(Za("xyz")),i},map(i){return i&&(i=this._shaders.shader().pipe("mesh.map.uvwo").pipe(i))}},position:{pipeline(i){if(!this._inherit("vertex"))return i;i==null&&(i=this._shaders.shader());for(let e=0;e<=3;e++)i=Bk(this._inherit("vertex"),t=>t.vertex(i,e));return i},swizzle(i,e){if(i)return this._shaders.shader().pipe(Za(e)).pipe(i)},swizzle2(i,e,t){if(i)return this._shaders.shader().split().pipe(Za(e)).next().pipe(Za(t)).join().pipe(i)}},visible:{make(){const i={type:"visible.change"};let e=null;this.setVisible=function(r){return r!=null&&(e=r),t()};const t=()=>{let r;const s=this.isVisible;let o=(r=e??this._get("object.visible"))!=null?r:!0;if(n!=null&&o&&(o=n.isVisible),this.isVisible=o,s!==this.isVisible)return this.trigger(i)},n=this._inherit("visible");return n&&this._listen(n,"visible.change",t),this.is("object")&&this._listen(this.node,"change:object",t),t()},unmake(){return delete this.isVisible}},active:{make(){const i={type:"active.change"};let e=null;this.setActive=function(r){return r!=null&&(e=r),t()};const t=()=>{let r;const s=this.isActive;let o=(r=e??this._get("entity.active"))!=null?r:!0;if(n!=null&&o&&(o=n.isActive),this.isActive=o,s!==this.isActive)return this.trigger(i)},n=this._inherit("active");return n&&this._listen(n,"active.change",t),this.is("entity")&&this._listen(this.node,"change:entity",t),t()},unmake(){return delete this.isActive}},object:{make(i){let e,t;i==null&&(i=[]),this.objects=i,this.renders=this.objects.reduce((u,h)=>u.concat(h.renders),[]);const n=this._inherit("scene");let r=e=t=null;const s=Array.from(this.traits).includes("style");r=1,e=Jd;let o=!0,a=!0;s&&({opacity:r}=this.props,{blending:e}=this.props,{zOrder:t}=this.props,{zWrite:o}=this.props,{zTest:a}=this.props);const l=u=>{const{changed:h}=u;let d=null;if(h["style.opacity"]&&(d=r=this.props.opacity),h["style.blending"]&&(d=e=this.props.blending),h["style.zOrder"]&&(d=t=this.props.zOrder),h["style.zWrite"]&&(d=o=this.props.zWrite),h["style.zTest"]&&(d=a=this.props.zTest),d!=null)return c()},c=()=>{const u=t!=null?-t:this.node.order;return(this.isVisible!=null?this.isVisible:!0)&&r>0?s?(()=>{const d=[];for(const f of Array.from(this.objects))f.show(r<1,e,u),d.push(f.depth(o,a));return d})():(()=>{const d=[];for(const f of Array.from(this.objects))d.push(f.show(!0,e,u));return d})():(()=>{const d=[];for(const f of Array.from(this.objects))d.push(f.hide());return d})()};this._listen(this.node,"change:style",l),this._listen(this.node,"reindex",c),this._listen(this,"visible.change",c);for(const u of Array.from(this.objects))n.adopt(u);return c()},unmake(i){let e;if(i==null&&(i=!0),!this.objects)return;const t=this._inherit("scene");for(e of Array.from(this.objects))t.unadopt(e);if(i)return(()=>{const n=[];for(e of Array.from(this.objects))n.push(e.dispose());return n})()},mask(){let i,e;if(i=this._inherit("mask"))return e=i.mask(e)}},unit:{make(){let i,e,t,n,r,s,o,a,l,c,u,h,d=Math.PI;this.unitUniforms={renderScaleInv:a=this._attributes.make(this._types.number(1)),renderScale:o=this._attributes.make(this._types.number(1)),renderAspect:n=this._attributes.make(this._types.number(1)),renderWidth:l=this._attributes.make(this._types.number(0)),renderHeight:r=this._attributes.make(this._types.number(0)),viewWidth:u=this._attributes.make(this._types.number(0)),viewHeight:c=this._attributes.make(this._types.number(0)),pixelRatio:e=this._attributes.make(this._types.number(1)),pixelUnit:t=this._attributes.make(this._types.number(1)),worldUnit:h=this._attributes.make(this._types.number(1)),focusDepth:i=this._attributes.make(this._types.number(1)),renderOdd:s=this._attributes.make(this._types.vec2())};const f=new oe,g=new oe,v=()=>{let _,S;if((S=y!=null?y.getSize():void 0)==null)return;d=Math.PI;const{scale:w}=this.props,{fov:C}=this.props,E=this.props.focus!=null?this.props.focus:this.inherit("unit").props.focus,k=w===null;let O=1;if(_=y!=null?y.getCamera():void 0){const j=_.projectionMatrix;f.set(0,-.5,1).applyMatrix4(j),g.set(0,.5,1).applyMatrix4(j),f.sub(g),O=f.y}const R=S.renderHeight/S.viewHeight,A=C!=null?O*Math.tan(C*d/360):1,D=k?R:S.renderHeight/w*A,I=S.renderHeight*O/2,q=D/I;return u.value=S.viewWidth,c.value=S.viewHeight,l.value=S.renderWidth,r.value=S.renderHeight,n.value=S.aspect,o.value=I,a.value=1/I,e.value=R,t.value=D,h.value=q,i.value=E,s.value.set(S.renderWidth%2,S.renderHeight%2).multiplyScalar(.5)},y=this.is("root")?this:this._inherit("root");return this._listen(y,"root.update",v),v()},unmake(){return delete this.unitUniforms},get(){const i={};for(const e in this.unitUniforms){const t=this.unitUniforms[e];i[e]=t.value}return i},uniforms(){return this.unitUniforms}}},Gje=function(i,e){const t={};for(const n of Array.from(e)){let r;if(r=qje[n]){t[n]={};for(const s in r){const o=r[s];t[n][s]=o.bind(i)}}}return t};function Bk(i,e){return typeof i<"u"&&i!==null?e(i):void 0}const Wje=Object.freeze(Object.defineProperty({__proto__:null,Classes:Dje,Helpers:Gje,Traits:Fje,Types:W},Symbol.toStringTag,{value:"Module"}));class LU{constructor(e,t){this.context=t,this.classes=e.Classes,this.helpers=e.Helpers}getTypes(){return Object.keys(this.classes)}make(e,t,n=null){t==null&&(t={});const r=this.classes[e];if(r==null)throw new Error(`Unknown primitive class \`${e}\``);const s=new r.model(e,r.defaults,t,n,r,this.context.attributes);return new r(s,this.context,this.helpers),s}}const FE=Wje,jje=Object.freeze(Object.defineProperty({__proto__:null,Factory:LU,Primitive:Ss,Types:FE},Symbol.toStringTag,{value:"Module"}));class Ig{constructor(e,t){this.renderer=e,this.shaders=t,this.gl=this.renderer.getContext(),this.uniforms==null&&(this.uniforms={})}dispose(){this.uniforms=null}_adopt(e){for(const t in e){const n=e[t];this.uniforms[t]=n}}_set(e){for(const t in e){const n=e[t];this.uniforms[t]!=null&&(this.uniforms[t].value=n)}}}class $je extends Ni{constructor(){super(),this.rotationAutoUpdate=!1,this.frustumCulled=!1,this.matrixAutoUpdate=!1}}let DU=class extends Ig{constructor(e,t,n){super(e,t,n),this.root=new $je,(n!=null?n.scene:void 0)!=null&&(this.scene=n.scene),this.scene==null&&(this.scene=new Eg),this.pending=[],this.async=0,this.scratch=new Lo(1,1),this.camera=new pr}inject(e){return e!=null&&(this.scene=e),this.scene.add(this.root)}unject(){return this.scene!=null?this.scene.remove(this.root):void 0}add(e){return this.async?this.pending.push(e):this._add(e)}remove(e){if(this.pending=this.pending.filter(t=>t!==e),e.parent!=null)return this._remove(e)}_add(e){return this.root.add(e)}_remove(e){return this.root.remove(e)}dispose(){if(this.root.parent!=null)return this.unject()}warmup(e){return this.async=+e||0}render(){if(!this.pending.length)return;const{children:e}=this.root,t=[];for(let s=0,o=this.async,a=0<=o;a?s<o:s>o;a?s++:s--){const l=this.pending.shift();if(!l)break;this._add(l),t.push(t)}const n=e.map(function(s){return s.visible});e.map(s=>s.visible=!Array.from(t).includes(s));const r=this.renderer.getRenderTarget();return this.renderer.setRenderTarget(this.scratch),this.renderer.render(this.scene,this.camera),this.renderer.setRenderTarget(r),e.map((s,o)=>s.visible=n[o])}toJSON(){return this.root.toJSON()}};class zU{constructor(e,t,n){this.classes=e,this.renderer=t,this.shaders=n}getTypes(){return Object.keys(this.classes)}make(e,t){return new this.classes[e](this.renderer,this.shaders,t)}}class IU extends Ig{constructor(e,t,n){super(e,t),this.items==null&&(this.items=n.items||1),this.samples==null&&(this.samples=n.samples||1),this.channels==null&&(this.channels=n.channels||4),this.callback==null&&(this.callback=n.callback||function(){})}dispose(){return super.dispose()}update(){const e=this.fill();return this.write(e),e}setActive(e,t,n,r){}setCallback(e){this.callback=e}write(){}fill(){}generate(e){return QA(e,this.samples,this.channels,this.items)}}class w5{constructor(e,t,n,r,s){this.renderer=e,this.width=t,this.height=n,this.channels=r,this.n=this.width*this.height*this.channels;const o=this.renderer.getContext();this.gl=o;const a=(s!=null?s.minFilter:void 0)!=null?s!=null?s.minFilter:void 0:Oi,l=(s!=null?s.magFilter:void 0)!=null?s!=null?s.magFilter:void 0:Oi,c=(s!=null?s.type:void 0)!=null?s!=null?s.type:void 0:Ks;this.minFilter=lw(o,a),this.magFilter=lw(o,l),this.type=lw(o,c),this.ctor=GI(c),this.build(s)}build(e){const{gl:t}=this,n=this.renderer.state;this.texture=t.createTexture(),this.format=[null,t.LUMINANCE,t.LUMINANCE_ALPHA,t.RGB,t.RGBA][this.channels],this.format3=[null,A2,P2,void 0,Fo][this.channels],n.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.minFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this.magFilter),this.data=new this.ctor(this.n),t.pixelStorei(t.UNPACK_ALIGNMENT,1),t.texImage2D(t.TEXTURE_2D,0,this.format,this.width,this.height,0,this.format,this.type,this.data),this.textureObject=new qr(new Image,g_,lo,lo,e!=null?e.minFilter:void 0,e!=null?e.magFilter:void 0),this.textureProperties=this.renderer.properties.get(this.textureObject),this.textureProperties.__webglInit=!0,this.textureProperties.__webglTexture=this.texture,this.textureObject.format=this.format3,this.textureObject.type=Ks,this.textureObject.unpackAlignment=1,this.textureObject.flipY=!1,this.textureObject.generateMipmaps=!1,this.uniforms={dataResolution:{type:"v2",value:new ht(1/this.width,1/this.height)},dataTexture:{type:"t",value:this.textureObject}}}write(e,t,n,r,s){const{gl:o}=this;return this.renderer.state.bindTexture(o.TEXTURE_2D,this.texture),o.pixelStorei(o.UNPACK_ALIGNMENT,1),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,!1),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),o.texSubImage2D(o.TEXTURE_2D,0,t,n,r,s,this.format,this.type,e)}dispose(){return this.gl.deleteTexture(this.texture),this.textureProperties.__webglInit=!1,this.textureProperties.__webglTexture=null,this.textureProperties=null,this.textureObject=this.texture=null}}class k4 extends IU{constructor(e,t,n,r){r==null&&(r=!0);const s=n.width||1,o=n.height||1,a=n.depth||1,l=s*o*a;n.samples||(n.samples=l),super(e,t,n),this.width=s,this.height=o,this.depth=a,this.samples==null&&(this.samples=l),r&&this.build(n)}shader(e,t){t==null&&(t=4),this.items>1||this.depth>1?(t!==4&&e.pipe(e0(t,4)),e.pipe("map.xyzw.texture",this.uniforms)):t!==2&&e.pipe(pf(t,2));const n=this.wrap?".wrap":"";return e.pipe(`map.2d.data${n}`,this.uniforms),e.pipe("sample.2d",this.uniforms),this.channels<4&&e.pipe(Za(["0000","x000","xw00","xyz0"][this.channels])),e}build(e){this.data=new Float32Array(this.samples*this.channels*this.items),this.texture=new w5(this.renderer,this.items*this.width,this.height*this.depth,this.channels,e),this.filled=0,this.used=0,this._adopt(this.texture.uniforms),this._adopt({dataPointer:{type:"v2",value:new ht},textureItems:{type:"f",value:this.items},textureHeight:{type:"f",value:this.height}}),this.dataPointer=this.uniforms.dataPointer.value,this.streamer=this.generate(this.data)}dispose(){return this.data=null,this.texture.dispose(),super.dispose()}getFilled(){return this.filled}setCallback(e){return this.callback=e,this.filled=0}copy(e){const t=Math.min(e.length,this.samples*this.channels*this.items),n=this.data;for(let r=0,s=t,o=0<=s;o?r<s:r>s;o?r++:r--)n[r]=e[r];this.write(Math.ceil(t/this.channels/this.items))}write(e){e==null&&(e=this.samples);let t=e/this.width;e*=this.items;const n=t<1?e:this.items*this.width;t=Math.ceil(t),this.texture.write(this.data,0,0,n,t),this.dataPointer.set(.5,.5),this.filled=1,this.used=e}through(e,t){let n,r;const{consume:s,done:o}=r=this.streamer,{emit:a}=n=t.streamer;let l=0,c=()=>s((u,h,d,f)=>e(a,u,h,d,f,l));return c=P_(c,this.items),()=>{r.reset(),n.reset();const u=this.used;for(l=0;!o()&&l<u;)c(),l++;return r.count()}}}class Xje extends k4{constructor(e,t,n){const r=n.width||1,s=n.history||1;n.width=r,n.height=s,n.depth=1,super(e,t,n,!1),this.width=r,this.history=s,this.samples=r,this.wrap=s>1,this.build(n)}build(e){return super.build(),this.index=0,this.pad=0,this.streamer=this.generate(this.data)}setActive(e){return this.pad=Math.max(0,this.width-e)}fill(){const{callback:e}=this;typeof e.reset=="function"&&e.reset();const{emit:t,count:n,done:r,reset:s}=this.streamer;s();const o=this.samples-this.pad;let a=0;for(;!r()&&a<o&&e(t,a++)!==!1;);return Math.floor(n()/this.items)}write(e){return e==null&&(e=this.samples),e*=this.items,this.texture.write(this.data,0,this.index,e,1),this.dataPointer.set(.5,this.index+.5),this.index=(this.index+this.history-1)%this.history,this.filled=Math.min(this.history,this.filled+1)}through(e,t){let n,r;const{consume:s,done:o}=r=this.streamer,{emit:a}=n=t.streamer;let l=0,c=()=>s((u,h,d,f)=>e(a,u,h,d,f,l));return c=P_(c,this.items),()=>{r.reset(),n.reset();const u=this.samples-this.pad;for(l=0;!o()&&l<u;)c(),l++;return r.count()}}}class Yje extends Qn{constructor(){super(),new Qn(this),this.uniforms==null&&(this.uniforms={}),this.groups==null&&(this.groups=[])}_reduce(e,t){let n=!1;for(let r=0;r<e.length;r++){const s=e[r],o=t[r];n&&(e[r]=o),s>1&&(n=!0)}return e.reduce((r,s)=>r*s)}_emitter(e){const t=e=="index"?this.getIndex():this.getAttribute(e),n=t.itemSize,{array:r}=t;let s=0;return[null,function(u){r[s++]=u},function(u,h){r[s++]=u,r[s++]=h},function(u,h,d){r[s++]=u,r[s++]=h,r[s++]=d},function(u,h,d,f){r[s++]=u,r[s++]=h,r[s++]=d,r[s++]=f}][n]}_finalize(){}_offsets(e){this.groups=e}}class Ng extends Yje{_clipUniforms(){return this.geometryClip=new Li(1e10,1e10,1e10,1e10),this.geometryResolution=new Li,this.mapSize=new Li,this.uniforms==null&&(this.uniforms={}),this.uniforms.geometryClip={type:"v4",value:this.geometryClip},this.uniforms.geometryResolution={type:"v4",value:this.geometryResolution},this.uniforms.mapSize={type:"v4",value:this.mapSize}}_clipGeometry(e,t,n,r){const s=a=>Math.max(0,a-1),o=a=>1/Math.max(1,a-1);return this.geometryClip.set(s(e),s(t),s(n),s(r)),this.geometryResolution.set(o(e),o(t),o(n),o(r))}_clipMap(e,t,n,r){return this.mapSize.set(e,t,n,r)}_clipOffsets(e,t,n,r,s,o,a,l,c){const u=[r,n,t,s],h=[l,a,o,c],d=this._reduce(u,h);return this._offsets([{start:0,count:d*e,materialIndex:0}])}}class Kje extends Ng{constructor(e){let t,n,r,s,o,a,l,c,u,h,d;super(e),this._clipUniforms(),this.sides=c=+e.sides||12,this.samples=l=+e.samples||2,this.strips=u=+e.strips||1,this.ribbons=a=+e.ribbons||1,this.layers=o=+e.layers||1,this.flip=n=e.flip!=null?e.flip:!1,this.closed=r=e.closed!=null?e.closed:!1,this.anchor=t=e.anchor!=null?e.anchor:n||r?0:l-1;const f=u*a*o,g=(c+2)*f,v=c*2*f;this.setIndex(new Un(new Uint32Array(v*3),1)),this.setAttribute("position4",new Un(new Float32Array(g*4),4)),this.setAttribute("arrow",new Un(new Float32Array(g*3),3)),this.setAttribute("attach",new Un(new Float32Array(g*2),2));const y=this._emitter("index"),_=this._emitter("position4"),S=this._emitter("arrow"),w=this._emitter("attach"),C=[];for(s=0,d=c,h=0<=d;h?s<d:s>d;h?s++:s--){const A=s/c*2*Math.PI;C.push([Math.cos(A),Math.sin(A),1])}let E=0;for(let A=0,D=f,I=0<=D;I?A<D:A>D;I?A++:A--){let q,j;const Y=E++,F=Y+c+1;for(s=0,j=c,q=0<=j;q?s<j:s>j;q?s++:s--){const re=E+s%c,ee=E+(s+1)%c;y(Y),y(re),y(ee),y(ee),y(re),y(F)}E+=c+1}const k=n?1:r?l-1:-1,O=n&&!r?l-1:0,R=t;for(let A=0,D=o,I=0<=D;I?A<D:A>D;I?A++:A--)for(let q=0,j=a,Y=0<=j;Y?q<j:q>j;Y?q++:q--)for(let F=0,re=u,ee=0<=re;ee?F<re:F>re;ee?F++:F--){let J,Ee;for(_(R,F,q,A),S(0,0,0),w(k,O),s=0,Ee=c,J=0<=Ee;J?s<Ee:s>Ee;J?s++:s--){_(R,F,q,A);const le=C[s];S(le[0],le[1],le[2]),w(k,O)}_(R,F,q,A),S(0,0,1),w(k,O)}this._finalize(),this.clip()}clip(e,t,n,r){let s;if(e==null&&({samples:e}=this),t==null&&({strips:t}=this),n==null&&({ribbons:n}=this),r==null&&({layers:r}=this),this._clipGeometry(e,t,n,r),e>0){const o=[r,n,t],a=[this.layers,this.ribbons,this.strips];s=this.sides*this._reduce(o,a)}else s=0;return this._offsets([{start:0,count:s*6,materialIndex:0}])}}class ad extends Ig{constructor(e,t,n){super(e,t,n),this.zUnits=n.zUnits!=null?n.zUnits:0}raw(){for(const e of Array.from(this.renders))this._raw(e);return null}depth(e,t){for(const n of Array.from(this.renders))this._depth(n,e,t);return null}polygonOffset(e,t){for(const n of Array.from(this.renders))this._polygonOffset(n,e,t);return null}show(e,t,n){return Array.from(this.renders).map(r=>this._show(r,e,t,n))}hide(){for(const e of Array.from(this.renders))this._hide(e);return null}_injectPreamble(e,t){const n=e+`
`+t;return t.match(/#extension/)?this._hoist(n):n}_hoist(e){const t=e.split(`
`),n=[];for(const r of Array.from(t))r.match(/^\s*#extension/)?n.unshift(r):n.push(r);return n.join(`
`)}_material(e){const t=this.renderer.capabilities.precision,n=`    precision ${t} float;
    precision ${t} int;
uniform mat4 modelMatrix;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 cameraPosition;`,r=`    precision ${t} float;
    precision ${t} int;
uniform mat4 viewMatrix;
uniform vec3 cameraPosition;`,s={};Object.assign(s,e),delete s.attributes,delete s.varyings,delete s.inspect,delete s.vertexGraph,delete s.fragmentGraph;const o=new SA(s);return["vertexGraph","fragmentGraph","inspect"].forEach(a=>o[a]=e[a]),o.vertexShader=this._injectPreamble(n,o.vertexShader),o.fragmentShader=this._injectPreamble(r,o.fragmentShader),o}_raw(e){e.rotationAutoUpdate=!1,e.frustumCulled=!1,e.matrixAutoUpdate=!1,e.material.defaultAttributeValues=void 0}_depth(e,t,n){const r=e.material;return r.depthWrite=t,r.depthTest=n}_polygonOffset(e,t,n){n-=this.zUnits;const r=n!==0,s=e.material;if(s.polygonOffset=r,r)return s.polygonOffsetFactor=t,s.polygonOffsetUnits=n}_show(e,t,n,r){t=!0;const s=e.material;return e.renderOrder=-r,e.visible=!0,s.transparent=t,s.blending=n,null}_hide(e){return e.visible=!1}_vertexColor(e,t){if(!e&&!t)return;const n=this.shaders.shader();return e&&(n.require(e),n.pipe("mesh.vertex.color",this.uniforms)),t&&(n.require(t),n.pipe("mesh.vertex.mask",this.uniforms)),n}_vertexPosition(e,t,n,r,s){let o;const a=this.shaders.shader();return(n||t&&t!==!0)&&(o={},(r>0||s)&&(o.POSITION_MAP=""),r>0&&(o[["POSITION_U","POSITION_UV","POSITION_UVW","POSITION_UVWO"][r-1]]=""),s&&(o.POSITION_STPQ="")),a.require(e),a.pipe("mesh.vertex.position",this.uniforms,o)}_fragmentColor(e,t,n,r,s,o,a,l,c){const u=this.shaders.shader();let h=!1,d=!1;const f={};return o>0&&(f[["POSITION_U","POSITION_UV","POSITION_UVW","POSITION_UVWO"][o-1]]=""),a&&(f.POSITION_STPQ=""),e&&(u.pipe("style.color",this.uniforms),h=!0,(n||s||t)&&((!c||n)&&u.pipe("mesh.gamma.in"),d=!0)),n&&(u.isolate(),u.pipe("mesh.fragment.color",this.uniforms),(!c||h)&&u.pipe("mesh.gamma.in"),u.end(),h&&u.pipe(zl("vec4","*")),c&&h&&u.pipe("mesh.gamma.out"),h=!0,d=!0),s&&(!h&&l&&u.pipe(LE("vec4","vec4(1.0)")),u.isolate(),u.require(s),u.pipe("mesh.fragment.map",this.uniforms,f),c||u.pipe("mesh.gamma.in"),u.end(),l?u.pipe(l):h&&u.pipe(zl("vec4","*")),h=!0,d=!0),t&&(h||u.pipe(LE("vec4","vec4(1.0)")),t===!0?u.pipe("mesh.fragment.shaded",this.uniforms):(u.require(t),u.pipe("mesh.fragment.material",this.uniforms,f)),d=!0),d&&!c&&u.pipe("mesh.gamma.out"),r&&(u.pipe("mesh.fragment.mask",this.uniforms),h&&u.pipe(zl("vec4","*"))),u}}class Zje extends ad{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s}=n;const{material:o,position:a,color:l,mask:c,map:u,combine:h,stpq:d,linear:f}=n;s==null&&(s={});const g=s.styleColor!=null;this.geometry=new Kje({sides:n.sides,samples:n.samples,strips:n.strips,ribbons:n.ribbons,layers:n.layers,anchor:n.anchor,flip:n.flip,closed:n.closed}),this._adopt(s),this._adopt(this.geometry.uniforms);const v={};closed&&(v.ARROW_CLOSED="");const y=t.material(),_=y.vertex;_.pipe(this._vertexColor(l,c)),_.require(this._vertexPosition(a,o,u,1,d)),_.pipe("arrow.position",this.uniforms,v),_.pipe("project.position",this.uniforms),y.fragment=r=this._fragmentColor(g,o,l,c,u,1,d,h,f),r.pipe("fragment.color",this.uniforms);const S=y.link({side:xs});this.material=this._material(S);const w=new rr(this.geometry,this.material);w.frustumCulled=!1,w.matrixAutoUpdate=!1,w.userData=S,this._raw(w),this.renders=[w]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.renders=this.geometry=this.material=null,super.dispose()}}class Jje extends w5{constructor(e,t,n,r,s){super(e,t,n,r,s),this.data=new this.ctor(this.n)}resize(e,t){const n=this.data,r=this.width,s=this.height;this.width=e,this.height=t,this.n=e*t*this.channels,this.data=new this.ctor(this.n);const{gl:o}=this;return this.renderer.state.bindTexture(o.TEXTURE_2D,this.texture),o.pixelStorei(o.UNPACK_ALIGNMENT,1),o.texImage2D(o.TEXTURE_2D,0,this.format,e,t,0,this.format,this.type,this.data),this.uniforms.dataResolution.value.set(1/e,1/t),this.write(n,0,0,r,s)}write(e,t,n,r,s){let o;const{width:a}=this,l=this.data,{channels:c}=this;let u=0;if(a===r&&t===0){o=n*r*c;const h=r*s*c;for(;u<h;)l[o++]=e[u++]}else{const h=a*c,d=r*c,f=t*c;let g=n;const v=n+s;for(;g<v;){let y=0;for(o=f+g*h;y++<d;)l[o++]=e[u++];g++}}return super.write(e,t,n,r,s)}dispose(){return this.data=null,super.dispose()}}class NU extends Ig{constructor(e,t,n,r){r==null&&(r=!0),super(e,t),this.width==null&&(this.width=n.width||512),this.height==null&&(this.height=n.height||512),this.channels==null&&(this.channels=n.channels||4),this.backed==null&&(this.backed=n.backed||!1),this.samples=this.width*this.height,r&&this.build(n)}shader(e){return e.pipe("map.2d.data",this.uniforms),e.pipe("sample.2d",this.uniforms),this.channels<4&&e.pipe(Za(["0000","x000","xw00","xyz0"][this.channels])),e}build(e){let t;return this.klass=t=this.backed?Jje:w5,this.texture=new t(this.renderer,this.width,this.height,this.channels,e),this.uniforms={dataPointer:{type:"v2",value:new ht(0,0)}},this._adopt(this.texture.uniforms),this.reset()}reset(){return this.rows=[],this.bottom=0}resize(e,t){if(!this.backed)throw new Error("Cannot resize unbacked texture atlas");return e>2048&&t>2048?console.warn(`Giant text atlas ${e}x${t}.`):console.info(`Resizing text atlas ${e}x${t}.`),this.texture.resize(e,t),this.width=e,this.height=t,this.samples=e*t}collapse(e){let t;const{rows:n}=this;if(n.splice(n.indexOf(e),1),this.bottom=(t=Qje(n[n.length-1],r=>r.bottom))!=null?t:0,this.last===e)return this.last=null}allocate(e,t,n,r){const s=this.width,o=this.height,a=n*2;if(t>s)return this.resize(s*2,o*2),this.last=null,this.allocate(e,t,n,r);let l=this.last;if(l!=null&&l.height>=n&&l.height<a&&l.width+t<=s){l.append(e,t,n,r);return}let c=0,u=-1,h=0;for(let d=0;d<this.rows.length;d++)if(l=this.rows[d],l.top-c>=n&&u<0&&(u=d,h=c),{bottom:c}=l,l.height>=n&&l.height<a&&l.width+t<=s){l.append(e,t,n,r),this.last=l;return}if(u>=0)l=new Vk(h,n),this.rows.splice(u,0,l);else{if(h=c,c+=n,c>=o)return this.resize(s*2,o*2),this.last=null,this.allocate(e,t,n,r);l=new Vk(h,n),this.rows.push(l),this.bottom=c}l.append(e,t,n,r),this.last=l}read(){return this.texture.textureObject}write(e,t,n,r,s){return this.texture.write(e,t,n,r,s)}dispose(){return this.texture.dispose(),this.data=null,super.dispose()}}class Vk{constructor(e,t){this.top=e,this.bottom=e+t,this.width=0,this.height=t,this.alive=0,this.keys=[]}append(e,t,n,r){const s=this.width,o=this.top;return this.alive++,this.width+=t,this.keys.push(e),r(this,s,o)}}function Qje(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class e$e extends ad{constructor(e,t,n){super(e,t,n),this.geometry=new Mg(1,1),this.material=new Yu({map:n.map}),this.material.side=xs;const r=new rr(this.geometry,this.material);r.position.x+=n.x||0,r.position.y+=n.y||0,r.frustumCulled=!1,r.scale.set(2,2,2),r.__debug=!0,this.objects=[r]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.objects=this.geometry=this.material=null,super.dispose()}}class t$e extends Ng{constructor(e){let t,n,r,s,o;super(e),this._clipUniforms(),this.items=r=+e.items||2,this.width=o=+e.width||1,this.height=n=+e.height||1,this.depth=t=+e.depth||1,this.sides=s=Math.max(0,r-2);const a=o*n*t,l=r*a,c=s*a;this.setIndex(new Un(new Uint32Array(c*3),1)),this.setAttribute("position4",new Un(new Float32Array(l*4),4));const u=this._emitter("index"),h=this._emitter("position4");let d=0;for(let f=0,g=a,v=0<=g;v?f<g:f>g;v?f++:f--){for(let y=0,_=s,S=0<=_;S?y<_:y>_;S?y++:y--)u(d),u(d+y+1),u(d+y+2);d+=r}for(let f=0,g=t,v=0<=g;v?f<g:f>g;v?f++:f--)for(let y=0,_=n,S=0<=_;S?y<_:y>_;S?y++:y--)for(let w=0,C=o,E=0<=C;E?w<C:w>C;E?w++:w--)for(let k=0,O=r,R=0<=O;R?k<O:k>O;R?k++:k--)h(w,y,f,k);this._finalize(),this.clip()}clip(e,t,n,r){e==null&&({width:e}=this),t==null&&({height:t}=this),n==null&&({depth:n}=this),r==null&&({items:r}=this);const s=Math.max(0,r-2);return this._clipGeometry(e,t,n,r),this._clipOffsets(3,e,t,n,s,this.width,this.height,this.depth,this.sides)}}class n$e extends ad{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s,material:o}=n;const{position:a,color:l,mask:c,map:u,combine:h,stpq:d,linear:f}=n;s==null&&(s={}),o==null&&(o=!0);const g=s.styleColor!=null;this.geometry=new t$e({items:n.items,width:n.width,height:n.height,depth:n.depth}),this._adopt(s),this._adopt(this.geometry.uniforms);const v=t.material(),y=v.vertex;y.pipe(this._vertexColor(l,c)),y.require(this._vertexPosition(a,o,u,2,d)),o||y.pipe("face.position",this.uniforms),o&&y.pipe("face.position.normal",this.uniforms),y.pipe("project.position",this.uniforms),v.fragment=r=this._fragmentColor(g,o,l,c,u,2,d,h,f),r.pipe("fragment.color",this.uniforms);const _=v.link({side:xs});this.material=this._material(_);const S=new rr(this.geometry,this.material);S.userData=_,this._raw(S),this.renders=[S]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.renders=this.geometry=this.material=null,super.dispose()}}class i$e extends Ng{constructor(e){let t,n,r,s,o,a,l,c,u,h,d,f,g,v,y;super(e),this._clipUniforms(),this.closed=t=e.closed||!1,this.samples=u=(+e.samples||2)+(t?1:0),this.strips=d=+e.strips||1,this.ribbons=c=+e.ribbons||1,this.layers=l=+e.layers||1,this.detail=n=+e.detail||1;const _=u-1;this.joints=o=n-1,this.vertices=f=(_-(t?0:1))*o+u,this.segments=h=(_-(t?0:1))*o+_;const S=f*d*c*l*2,C=h*d*c*l*2;this.setIndex(new Un(new Uint32Array(C*3),1)),this.setAttribute("position4",new Un(new Float32Array(S*4),4)),this.setAttribute("line",new Un(new Float32Array(S*1),1)),n>1&&this.setAttribute("joint",new Un(new Float32Array(S),1));const E=this._emitter("index"),k=this._emitter("position4"),O=this._emitter("line");n>1&&(s=this._emitter("joint"));let R=0;for(let D=0,I=c*l,q=0<=I;q?D<I:D>I;q?D++:D--)for(let j=0,Y=d,F=0<=Y;F?j<Y:j>Y;F?j++:j--){for(let re=0,ee=h,J=0<=ee;J?re<ee:re>ee;J?re++:re--)E(R),E(R+1),E(R+2),E(R+2),E(R+1),E(R+3),R+=2;R+=2}const A=t?()=>0:function(D){return D===0?-1:D===u-1?1:0};if(n>1){let D,I;for(a=0,I=l,D=0<=I;D?a<I:a>I;D?a++:a--){let q,j;for(y=0,j=c,q=0<=j;q?y<j:y>j;q?y++:y--){let Y,F;for(v=0,F=d,Y=0<=F;Y?v<F:v>F;Y?v++:v--){let re,ee,J;for(J=0,g=J,ee=u,re=0<=ee;re?J<ee:J>ee;re?J++:J--,g=J)if(r=A(g),r!==0)k(g,v,y,a),k(g,v,y,a),O(1),O(-1),s(.5),s(.5);else for(let Ee=0,le=n,ie=0<=le;ie?Ee<le:Ee>le;ie?Ee++:Ee--)k(g,v,y,a),k(g,v,y,a),O(1),O(-1),s(Ee/o),s(Ee/o)}}}}else{let D,I;for(a=0,I=l,D=0<=I;D?a<I:a>I;D?a++:a--){let q,j;for(y=0,j=c,q=0<=j;q?y<j:y>j;q?y++:y--){let Y,F;for(v=0,F=d,Y=0<=F;Y?v<F:v>F;Y?v++:v--){let re,ee,J;for(J=0,g=J,ee=u,re=0<=ee;re?J<ee:J>ee;re?J++:J--,g=J)k(g,v,y,a),k(g,v,y,a),O(1),O(-1)}}}}this._finalize(),this.clip()}clip(e,t,n,r){e==null&&(e=this.samples-this.closed),t==null&&({strips:t}=this),n==null&&({ribbons:n}=this),r==null&&({layers:r}=this);const o=e+(e-(this.closed?0:2))*this.joints-(this.closed?0:1);return e+=this.closed,this._clipGeometry(e,t,n,r),this._clipOffsets(6,o,t,n,r,this.segments,this.strips,this.ribbons,this.layers)}}class r$e extends ad{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s,stroke:o,join:a}=n;const{material:l,position:c,color:u,mask:h,map:d,combine:f,stpq:g,linear:v,clip:y,proximity:_,closed:S}=n;s==null&&(s={}),o=[null,"dotted","dashed"][o];const w=s.styleColor!=null;a=(r=["miter","round","bevel"][a])!=null?r:"miter";const C={miter:1,round:4,bevel:2}[a];this.geometry=new i$e({samples:n.samples,strips:n.strips,ribbons:n.ribbons,layers:n.layers,anchor:n.anchor,closed:n.closed,detail:C}),this._adopt(s),this._adopt(this.geometry.uniforms);const E=t.material(),k={};o&&(k.LINE_STROKE=""),y&&(k.LINE_CLIP=""),_!=null&&(k.LINE_PROXIMITY=""),k["LINE_JOIN_"+a.toUpperCase()]="",C>1&&(k.LINE_JOIN_DETAIL=C),S&&(k.LINE_CLOSED="");const O=E.vertex;O.pipe(this._vertexColor(u,h)),O.require(this._vertexPosition(c,l,d,2,g)),O.pipe("line.position",this.uniforms,k),O.pipe("project.position",this.uniforms);const R=E.fragment;o&&R.pipe(`fragment.clip.${o}`,this.uniforms),y&&R.pipe("fragment.clip.ends",this.uniforms),_!=null&&R.pipe("fragment.clip.proximity",this.uniforms),R.pipe(this._fragmentColor(w,l,u,h,d,2,g,f,v)),R.pipe("fragment.color",this.uniforms);const A=E.link({side:xs});this.material=this._material(A);const D=new rr(this.geometry,this.material);D.userData=A,this._raw(D),this.renders=[D]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.renders=this.geometry=this.material=null,super.dispose()}}class s$e extends k4{constructor(e,t,n){const r=n.width||1,s=n.height||1,o=n.history||1;n.depth=o,super(e,t,n,!1),this.width=r,this.height=s,this.history=o,this.samples=r*s,this.wrap=o>1,this.build(n)}build(e){return super.build(),this.index=0,this.pad={x:0,y:0},this.streamer=this.generate(this.data)}getFilled(){return this.filled}setActive(e,t){let n;return[this.pad.x,this.pad.y]=Array.from(n=[Math.max(0,this.width-e),Math.max(0,this.height-t)]),n}fill(){let e,t,n;const{callback:r}=this;typeof r.reset=="function"&&r.reset();const{emit:s,skip:o,count:a,done:l,reset:c}=this.streamer;c();const u=this.width,h=this.pad.x,d=this.samples-this.pad.y*u;let f=e=t=0;if(h)for(;!l()&&t<d&&(t++,n=r(s,f,e),++f===u-h&&(o(h),t+=h,f=0,e++),n!==!1););else for(;!l()&&t<d&&(t++,n=r(s,f,e),++f===u&&(f=0,e++),n!==!1););return Math.floor(a()/this.items)}write(e){e==null&&(e=this.samples),e*=this.items;const t=this.width*this.items,n=Math.ceil(e/t);return this.texture.write(this.data,0,this.index*this.height,t,n),this.dataPointer.set(.5,this.index*this.height+.5),this.index=(this.index+this.history-1)%this.history,this.filled=Math.min(this.history,this.filled+1)}through(e,t){let n,r,s;const{consume:o,skip:a,done:l}=s=this.streamer,{emit:c}=n=t.streamer;let u=r=0,h=()=>o((d,f,g,v)=>e(c,d,f,g,v,u,r));return h=P_(h,this.items),()=>{let d;s.reset(),n.reset();const f=this.width,g=this.pad.x,v=this.samples-this.pad.y*f;if(u=r=d=0,g)for(;!l()&&d<v;)d++,h(),++u===f-g&&(a(g),u=0,r++);else for(;!l()&&d<v;)d++,h(),++u===f&&(u=0,r++);return s.count()}}}class o$e{constructor(e,t,n,r,s){this.gl=e,s==null&&(s={}),s.minFilter==null&&(s.minFilter=Oi),s.magFilter==null&&(s.magFilter=Oi),s.format==null&&(s.format=Fo),s.type==null&&(s.type=Sa),this.options=s,this.width=t||1,this.height=n||1,this.frames=r||1,this.buffers=this.frames+1,this.build()}build(){let e;const t=()=>new Lo(this.width,this.height,this.options);this.targets=(()=>{let r,s;const o=[];for(e=0,s=this.buffers,r=0<=s;r?e<s:e>s;r?e++:e--)o.push(t());return o})();const n=[];this.targets.forEach(r=>n.push(r.texture)),this.reads=n,this.write=this.targets[this.buffers-1],this.uniforms={dataResolution:{type:"v2",value:new ht(1/this.width,1/this.height)},dataTexture:{type:"t",value:this.reads[0]},dataTextures:{type:"tv",value:this.reads}}}cycle(){this.targets.unshift(this.targets.pop()),this.write=this.targets[this.buffers-1],this.reads.unshift(this.reads.pop()),this.uniforms.dataTexture.value=this.reads[0]}warmup(e){return(()=>{const t=[];for(let n=0,r=this.buffers,s=0<=r;s?n<r:n>r;s?n++:n--)e(this.write),t.push(this.cycle());return t})()}dispose(){for(const e of Array.from(this.targets))e.dispose();return this.targets=this.reads=this.write=null}}class UU extends Ig{constructor(e,t,n){super(e,t),this.scene=n.scene!=null?n.scene:new Eg,this.camera=n.camera,this.build(n)}shaderRelative(e){return e==null&&(e=this.shaders.shader()),e.pipe("sample.2d",this.uniforms)}shaderAbsolute(e,t,n){if(t==null&&(t=1),n==null&&(n=4),e==null&&(e=this.shaders.shader()),t<=1)return n>2&&e.pipe(pf(n,2)),e.pipe("map.2d.data",this.uniforms),e.pipe("sample.2d",this.uniforms);{const r=ZI(Math.min(t,this.target.frames));return n<4&&e.pipe(e0(n,4)),e.pipe("map.xyzw.2dv"),e.split(),e.pipe("map.2d.data",this.uniforms),e.pass(),e.pipe(r,this.uniforms)}}build(e){return this.camera||(this.camera=new pr,this.camera.position.set(0,0,3),this.camera.lookAt(new oe)),typeof this.scene.inject=="function"&&this.scene.inject(),this.target=new o$e(this.gl,e.width,e.height,e.frames,e),this.target.warmup(t=>this.renderer.setRenderTarget(t)),this.renderer.setRenderTarget(null),this._adopt(this.target.uniforms),this._adopt({dataPointer:{type:"v2",value:new ht(.5,.5)}}),this.filled=0}adopt(e){return Array.from(e.renders).map(t=>this.scene.add(t))}unadopt(e){return Array.from(e.renders).map(t=>this.scene.remove(t))}render(e){e==null&&({camera:e}=this);const t=this.renderer.getRenderTarget();if(this.renderer.setRenderTarget(this.target.write),this.renderer.render(this.scene.scene!=null?this.scene.scene:this.scene,e),this.renderer.setRenderTarget(t),this.target.cycle(),this.filled<this.target.frames)return this.filled++}read(e){return e==null&&(e=0),this.target.reads[Math.abs(e)]}getFrames(){return this.target.frames}getFilled(){return this.filled}dispose(){return typeof this.scene.unject=="function"&&this.scene.unject(),this.scene=this.camera=null,this.target.dispose(),super.dispose()}}class BE extends UU{constructor(e,t,n){let r,s;const o=n.items||1,a=n.channels||4,l=n.width||1,c=n.height||1,u=n.depth||1;n.format=Fo,n.width=s=o*l,n.height=r=c*u,n.frames=1,delete n.items,delete n.depth,delete n.channels,super(e,t,n),this.items==null&&(this.items=o),this.channels==null&&(this.channels=a),this.width==null&&(this.width=l),this._width=s,this.height==null&&(this.height=c),this._height=r,this.depth==null&&(this.depth=u),this._adopt({textureItems:{type:"f",value:this.items},textureHeight:{type:"f",value:this.height}})}shaderAbsolute(e){return e==null&&(e=this.shaders.shader()),e.pipe("map.xyzw.texture",this.uniforms),super.shaderAbsolute(e,1,2)}}class FU extends Ng{constructor(e,t){t==null&&(t=!0),super(),t&&this.construct(e)}construct(e){let t,n,r,s,o,a,l,c;this._clipUniforms(),this.closedX=t=e.closedX||!1,this.closedY=n=e.closedY||!1,this.width=c=(+e.width||2)+(t?1:0),this.height=r=(+e.height||2)+(n?1:0),this.surfaces=l=+e.surfaces||1,this.layers=s=+e.layers||1,this.segmentsX=o=Math.max(0,c-1),this.segmentsY=a=Math.max(0,r-1);const u=c*r*l*s,d=o*a*l*s*2;this.setIndex(new Un(new Uint32Array(d*3),1)),this.setAttribute("position4",new Un(new Float32Array(u*4),4)),this.setAttribute("surface",new Un(new Float32Array(u*2),2));const f=this._emitter("index"),g=this._emitter("position4");let v=0;for(let y=0,_=l*s,S=0<=_;S?y<_:y>_;S?y++:y--){for(let w=0,C=a,E=0<=C;E?w<C:w>C;E?w++:w--){for(let k=0,O=o,R=0<=O;R?k<O:k>O;R?k++:k--)f(v),f(v+1),f(v+c),f(v+c),f(v+1),f(v+c+1),v++;v++}v+=c}for(let y=0,_=s,S=0<=_;S?y<_:y>_;S?y++:y--)for(let w=0,C=l,E=0<=C;E?w<C:w>C;E?w++:w--)for(let k=0,O=k,R=r,A=0<=R;A?k<R:k>R;A?k++:k--,O=k)for(let D=0,I=D,q=c,j=0<=q;j?D<q:D>q;j?D++:D--,I=D)g(I,O,w,y);this._finalize(),this.clip()}clip(e,t,n,r){e==null&&(e=this.width-this.closedX),t==null&&(t=this.height-this.closedY),n==null&&({surfaces:n}=this),r==null&&({layers:r}=this),e+=this.closedX,t+=this.closedY;const s=Math.max(0,e-1),o=Math.max(0,t-1);return this._clipGeometry(e,t,n,r),this._clipOffsets(6,s,o,n,r,this.segmentsX,this.segmentsY,this.surfaces,this.layers)}map(e,t,n,r){return e==null&&({width:e}=this),t==null&&({height:t}=this),n==null&&({surfaces:n}=this),r==null&&({layers:r}=this),this._clipMap(e,t,n,r)}}class a$e extends FU{constructor(e){e.width=Math.max(2,+e.width!=null?+e.width:2),e.height=Math.max(2,+e.height!=null?+e.height:2),super(e,!1),this.uniforms==null&&(this.uniforms={}),this.uniforms.geometryScale={type:"v4",value:new Li},this.cover(),this.construct(e)}cover(e,t,n,r){e==null&&(e=1),this.scaleX=e,t==null&&(t=1),this.scaleY=t,n==null&&(n=1),this.scaleZ=n,r==null&&(r=1),this.scaleW=r}clip(e,t,n,r){e==null&&({width:e}=this),t==null&&({height:t}=this),n==null&&({surfaces:n}=this),r==null&&({layers:r}=this),super.clip(e,t,n,r);const s=o=>1/Math.max(1,o-1);return this.uniforms.geometryScale.value.set(s(e)*this.scaleX,s(t)*this.scaleY,s(n)*this.scaleZ,s(r)*this.scaleW)}}class BU extends ad{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s}=n;const{map:o,combine:a,stpq:l,linear:c}=n;s==null&&(s={});const u=s.styleColor!=null;this.geometry=new a$e({width:n.width,height:n.height}),this._adopt(s),this._adopt(this.geometry.uniforms);const h=t.material(),d=h.vertex;d.pipe("raw.position.scale",this.uniforms),d.fan(),d.pipe("stpq.xyzw.2d",this.uniforms),d.next(),d.pipe("screen.position",this.uniforms),d.join(),h.fragment=r=this._fragmentColor(u,!1,null,null,o,2,l,a,c),r.pipe("fragment.color",this.uniforms);const f=h.link({side:xs});this.material=this._material(f);const g=new rr(this.geometry,this.material);g.frustumCulled=!1,g.userData=f,this._raw(g),this.renders=[g]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.renders=this.geometry=this.material=null,super.dispose()}}class VE extends BU{constructor(e,t,n){const{items:r,width:s,height:o,depth:a,stpq:l}=n,c=f=>1/Math.max(1,f),u=f=>1/Math.max(1,f-1),h={remapUVScale:{type:"v2",value:new ht(r*s,o*a)},remapModulus:{type:"v2",value:new ht(r,o)},remapModulusInv:{type:"v2",value:new ht(c(r),c(o))},remapSTPQScale:{type:"v4",value:new Li(u(s),u(o),u(a),u(r))}},d=t.shader();d.pipe("screen.map.xyzw",h),n.map!=null&&(l&&d.pipe("screen.map.stpq",h),d.pipe(n.map)),super(e,t,{map:d,linear:!0}),this.memo=n,this.uniforms=h;for(const f of Array.from(this.renders))f.transparent=!1}cover(e,t,n,r){e==null&&({width:e}=this.memo),t==null&&({height:t}=this.memo),n==null&&({depth:n}=this.memo),r==null&&({items:r}=this.memo);const s=l=>1/Math.max(1,l-1);this.uniforms.remapSTPQScale.value.set(s(e),s(t),s(n),s(r));const o=e/this.memo.width;let a=n/this.memo.depth;return this.memo.depth===1&&(a=t/this.memo.height),this.geometry.cover(o,a)}}class VU extends Ng{constructor(e){let t,n,r,s;super(e),this._clipUniforms(),this.items=r=+e.items||2,this.width=s=+e.width||1,this.height=n=+e.height||1,this.depth=t=+e.depth||1;const o=r*s*n*t,a=o*4,l=o*2;this.setIndex(new Un(new Uint32Array(l*3),1)),this.setAttribute("position4",new Un(new Float32Array(a*4),4)),this.setAttribute("sprite",new Un(new Float32Array(a*2),2));const c=this._emitter("index"),u=this._emitter("position4"),h=this._emitter("sprite"),d=[[-1,-1],[-1,1],[1,-1],[1,1]];let f=0;for(let g=0,v=o,y=0<=v;y?g<v:g>v;y?g++:g--)c(f),c(f+1),c(f+2),c(f+1),c(f+2),c(f+3),f+=4;for(let g=0,v=t,y=0<=v;y?g<v:g>v;y?g++:g--)for(let _=0,S=n,w=0<=S;w?_<S:_>S;w?_++:_--)for(let C=0,E=s,k=0<=E;k?C<E:C>E;k?C++:C--)for(let O=0,R=r,A=0<=R;A?O<R:O>R;A?O++:O--)for(const D of Array.from(d))u(C,_,g,O),h(D[0],D[1]);this._finalize(),this.clip()}clip(e,t,n,r){return e==null&&({width:e}=this),t==null&&({height:t}=this),n==null&&({depth:n}=this),r==null&&({items:r}=this),this._clipGeometry(e,t,n,r),this._clipOffsets(6,e,t,n,r,this.width,this.height,this.depth,this.items)}}class l$e extends ad{constructor(e,t,n){let r,s;super(e,t,n);let{uniforms:o,shape:a,fill:l}=n;const{material:c,position:u,color:h,size:d,mask:f,map:g,combine:v,linear:y,optical:_,stpq:S}=n;o==null&&(o={}),a=+a!=null?+a:0,l==null&&(l=!0);const w=o.styleColor!=null,C=["circle","square","diamond","up","down","left","right"],E=["circle","generic","generic","generic","generic","generic","generic"],k=[1.2,1,1.414,1.16,1.16,1.16,1.16],O=E[a]!=null?E[a]:E[0],R=C[a]!=null?C[a]:C[0],A=(s=_&&k[a])!=null?s:1,D=l?O:`${O}.hollow`;this.geometry=new VU({items:n.items,width:n.width,height:n.height,depth:n.depth}),this._adopt(o),this._adopt(this.geometry.uniforms);const I={POINT_SHAPE_SCALE:+(A+1e-5)},q=t.material(),j=q.vertex;j.pipe(this._vertexColor(h,f)),d?(j.isolate(),j.require(d),j.require("point.size.varying",this.uniforms),j.end()):j.require("point.size.uniform",this.uniforms),j.require(this._vertexPosition(u,c,g,2,S)),j.pipe("point.position",this.uniforms,I),j.pipe("project.position",this.uniforms),q.fragment=r=this._fragmentColor(w,c,h,f,g,2,S,v,y);const Y=t.material();Y.vertex.pipe(j),r=Y.fragment.pipe(q.fragment),r.require(`point.mask.${R}`,this.uniforms),r.require(`point.alpha.${D}`,this.uniforms),r.pipe("point.edge",this.uniforms);const F=t.material();F.vertex.pipe(j),r=F.fragment.pipe(q.fragment),r.require(`point.mask.${R}`,this.uniforms),r.require(`point.alpha.${D}`,this.uniforms),r.pipe("point.fill",this.uniforms);const re=F.link({side:xs});this.fillMaterial=this._material(re);const ee=Y.link({side:xs});this.edgeMaterial=this._material(ee),this.fillObject=new rr(this.geometry,this.fillMaterial),this.edgeObject=new rr(this.geometry,this.edgeMaterial),this._raw(this.fillObject),this.fillObject.userData=re,this._raw(this.edgeObject),this.edgeObject.userData=ee,this.renders=[this.fillObject,this.edgeObject]}show(e,t,n,r){return this._show(this.edgeObject,!0,t,n,r),this._show(this.fillObject,e,t,n,r)}dispose(){return this.geometry.dispose(),this.edgeMaterial.dispose(),this.fillMaterial.dispose(),this.renders=this.edgeObject=this.fillObject=this.geometry=this.edgeMaterial=this.fillMaterial=null,super.dispose()}}class c$e extends IU{constructor(e,t,n){const r=n.width||1,s=n.height||1,o=n.depth||1,a=r*s*o;n.samples||(n.samples=a),super(e,t,n),this.width=r,this.height=s,this.depth=o,this.samples==null&&(this.samples=a),this.build(n)}build(e){return this.data=[],this.data.length=this.samples,this.filled=0,this.pad={x:0,y:0,z:0},this.streamer=this.generate(this.data)}dispose(){return this.data=null,super.dispose()}getFilled(){return this.filled}setActive(e,t,n){let r;return[this.pad.x,this.pad.y,this.pad.z]=Array.from(r=[this.width-e,this.height-t,this.depth-n]),r}read(){return this.data}copy(e){const t=Math.min(e.length,this.samples),n=this.data;return u$e(0,t,!1).map(r=>n[r]=e[r])}fill(){let e,t,n,r;const{callback:s}=this;typeof s.reset=="function"&&s.reset();const{emit:o,skip:a,count:l,done:c,reset:u}=this.streamer;u();const h=this.width,d=this.height,f=this.pad.x,g=this.pad.y,v=this.samples-this.pad.z*h*d;let y=e=t=n=0;if(f>0||g>0)for(;!c()&&n<v&&(n++,r=s(o,y,e,t),++y===h-f&&(a(f),y=0,++e===d-g&&(a(h*g),e=0,t++)),r!==!1););else for(;!c()&&n<v&&(n++,r=s(o,y,e,t),++y===h&&(y=0,++e===d&&(e=0,t++)),r!==!1););return this.filled=1,l()}}function u$e(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let o=i;r?o<s:o>s;r?o++:o--)n.push(o);return n}class h$e extends Ig{constructor(e,t,n){super(e,t),this.items==null&&(this.items=n.items||1),this.channels==null&&(this.channels=n.channels||4),this.width==null&&(this.width=n.width||1),this.height==null&&(this.height=n.height||1),this.depth==null&&(this.depth=n.depth||1),this.type==null&&(this.type=n.type||Ks),this.stpq==null&&(this.stpq=n.stpq||!1),this.isFloat=this.type===Ks,this.active=this.sampled=this.rect=this.pad=null,this.build(n)}build(e){let t,n,r;const{map:s}=e,{indexer:o}=e,a=o!=null&&!o.empty();let{stpq:l}=this;const{items:c,width:u,height:h,depth:d}=this;let f=s;a&&(this._adopt({indexModulus:{type:"v4",value:new Li(c,c*u,c*u*h,1)}}),f=this.shaders.shader(),f.require(s),f.require(o),f.pipe("float.index.pack",this.uniforms)),this.isFloat&&this.channels>1&&(this.floatMemo=new BE(this.renderer,this.shaders,{items:c,channels:4,width:u,height:h,depth:d,history:0,type:Ks}),this.floatCompose=new VE(this.renderer,this.shaders,{map:f,items:c,width:u,height:h,depth:d,stpq:l}),this.floatMemo.adopt(this.floatCompose),l=!1,f=this.shaders.shader(),this.floatMemo.shaderAbsolute(f)),this.isFloat?(r=this.channels,t=4):(r=1,t=this.channels),r>1?(n=this.shaders.shader(),n.pipe(KI(r)),n.require(f),n.pipe("float.stretch"),n.pipe("float.encode"),f=n):this.isFloat&&(n=this.shaders.shader(),n.pipe(f),n.pipe(pf(4,1)),n.pipe("float.encode"),f=n),this.byteMemo=new BE(this.renderer,this.shaders,{items:c*r,channels:t,width:u,height:h,depth:d,history:0,type:Sa}),this.byteCompose=new VE(this.renderer,this.shaders,{map:f,items:c*r,width:u,height:h,depth:d,stpq:l}),this.byteMemo.adopt(this.byteCompose);const g=c*u*r,v=h*d;return this.samples=this.width*this.height*this.depth,this.bytes=new Uint8Array(g*v*4),this.isFloat&&(this.floats=new Float32Array(this.bytes.buffer)),this.data=this.isFloat?this.floats:this.bytes,this.streamer=this.generate(this.data),this.active={items:0,width:0,height:0,depth:0},this.sampled={items:0,width:0,height:0,depth:0},this.rect={w:0,h:0},this.pad={x:0,y:0,z:0,w:0},this.stretch=r,this.isIndexed=a,this.setActive(c,u,h,d)}generate(e){return QA(e,this.samples,4,this.items)}setActive(e,t,n,r){let s;if(e===this.active.items&&t===this.active.width&&n===this.active.height&&r===this.active.depth)return;[this.active.items,this.active.width,this.active.height,this.active.depth]=Array.from([e,t,n,r]),this.floatCompose!=null&&this.floatCompose.cover(t,n,r),this.byteCompose!=null&&this.byteCompose.cover(t*this.stretch,n,r),{items:e}=this,{width:t}=this.active,n=this.depth===1?this.active.height:this.height,{depth:r}=this.active;const o=e*t*this.stretch,a=n*r;return[this.sampled.items,this.sampled.width,this.sampled.height,this.sampled.depth]=Array.from([e,t,n,r]),[this.rect.w,this.rect.h]=Array.from([o,a]),[this.pad.x,this.pad.y,this.pad.z,this.pad.w]=Array.from(s=[this.sampled.width-this.active.width,this.sampled.height-this.active.height,this.sampled.depth-this.active.depth,this.sampled.items-this.active.items]),s}update(e){return this.floatMemo!=null&&this.floatMemo.render(e),this.byteMemo!=null?this.byteMemo.render(e):void 0}post(){const e=this.renderer.getRenderTarget();this.renderer.setRenderTarget(this.byteMemo.target.targets[0]),this.gl.readPixels(0,0,this.rect.w,this.rect.h,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.bytes),this.renderer.setRenderTarget(e)}readFloat(e){return this.floatMemo!=null?this.floatMemo.read(e):void 0}readByte(e){return this.byteMemo!=null?this.byteMemo.read(e):void 0}setCallback(e){this.emitter=this.callback(e)}callback(e){if(!this.isIndexed)return e;const t=this.width,n=this.height,r=this.items,s=function(o,a,l,c){let u=c;const h=u%r;u=(u-h)/r;const d=u%t;u=(u-d)/t;const f=u%n;return u=(u-f)/n,e(o,a,l,c,d,f,u,h)};return s.reset=()=>typeof e.reset=="function"?e.reset():void 0,s}iterate(){let e,t,n,r=this.emitter;typeof r.reset=="function"&&r.reset();const{consume:s,skip:o,count:a,done:l,reset:c}=this.streamer;c();const u=this.sampled.width|0;let h=this.sampled.height|0;const d=this.sampled.depth|0,f=this.sampled.items|0,g=this.pad.x|0,v=this.pad.y|0,y=this.pad.z|0,_=this.pad.w|0,S=u*h*f*(d-y);if(!this.isIndexed){const C=r;r=(E,k,O,R)=>C(E,k,O,R,w,e,t,n)}let w=e=t=n=h=0;for(;!l()&&h<S;){h++;const C=s(r);if(++n===f-_&&(o(g),n=0,++w===u-g&&(o(f*g),w=0,++e===h-v&&(o(f*u*v),e=0,t++))),C===!1)break}return Math.floor(a()/f)}dispose(){return this.floatMemo!=null&&this.floatMemo.unadopt(this.floatCompose),this.floatMemo!=null&&this.floatMemo.dispose(),this.floatCompose!=null&&this.floatCompose.dispose(),this.byteMemo!=null&&this.byteMemo.unadopt(this.byteCompose),this.byteMemo!=null&&this.byteMemo.dispose(),this.byteCompose!=null&&this.byteCompose.dispose(),this.floatMemo=this.byteMemo=this.floatCompose=this.byteCompose=null}}class d$e extends ad{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s}=n;const{material:o,position:a,sprite:l,map:c,combine:u,linear:h,color:d,mask:f,stpq:g}=n;s==null&&(s={});const v=s.styleColor!=null;this.geometry=new VU({items:n.items,width:n.width,height:n.height,depth:n.depth}),this._adopt(s),this._adopt(this.geometry.uniforms);const y=t.material(),_=y.vertex;_.pipe(this._vertexColor(d,f)),_.require(this._vertexPosition(a,o,c,2,g)),_.require(l),_.pipe("sprite.position",this.uniforms),_.pipe("project.position",this.uniforms),y.fragment=r=this._fragmentColor(v,o,d,f,c,2,g,u,h);const S=t.material();S.vertex.pipe(_),S.fragment.pipe(r),S.fragment.pipe("fragment.transparent",this.uniforms);const w=t.material();w.vertex.pipe(_),w.fragment.pipe(r),w.fragment.pipe("fragment.solid",this.uniforms);const C=w.link({side:xs});this.fillMaterial=this._material(C);const E=S.link({side:xs});this.edgeMaterial=this._material(E),this.fillObject=new rr(this.geometry,this.fillMaterial),this.edgeObject=new rr(this.geometry,this.edgeMaterial),this._raw(this.fillObject),this.fillObject.userData=C,this._raw(this.edgeObject),this.edgeObject.userData=E,this.renders=[this.fillObject,this.edgeObject]}show(e,t,n,r){return this._show(this.edgeObject,!0,t,n,r),this._show(this.fillObject,e,t,n,r)}dispose(){return this.geometry.dispose(),this.edgeMaterial.dispose(),this.fillMaterial.dispose(),this.renders=this.geometry=this.edgeMaterial=this.fillMaterial=this.edgeObject=this.fillObject=null,super.dispose()}}class f$e extends Ng{constructor(e){let t,n,r,s,o;super(e),this._clipUniforms(),this.items=r=+e.items||2,this.width=o=+e.width||1,this.height=n=+e.height||1,this.depth=t=+e.depth||1,this.sides=s=Math.max(0,r-2);const a=o*n*t,l=r*a,c=s*a;this.setIndex(new Un(new Uint32Array(c*3),1)),this.setAttribute("position4",new Un(new Float32Array(l*4),4)),this.setAttribute("strip",new Un(new Float32Array(l*3),3));const u=this._emitter("index"),h=this._emitter("position4"),d=this._emitter("strip");let f=0;for(let v=0,y=a,_=0<=y;_?v<y:v>y;_?v++:v--){let S=f;for(let w=0,C=s,E=0<=C;E?w<C:w>C;E?w++:w--)w&1?(u(S+1),u(S),u(S+2)):(u(S),u(S+1),u(S+2)),S++;f+=r}const g=r-1;for(let v=0,y=t,_=0<=y;_?v<y:v>y;_?v++:v--)for(let S=0,w=n,C=0<=w;C?S<w:S>w;C?S++:S--)for(let E=0,k=o,O=0<=k;O?E<k:E>k;O?E++:E--){let R=1;h(E,S,v,0),d(1,2,R);for(let A=1,D=g,I=1<=D;I?A<D:A>D;I?A++:A--)h(E,S,v,A),d(A-1,A+1,R=-R);h(E,S,v,g),d(g-2,g-1,-R)}this._finalize(),this.clip()}clip(e,t,n,r){e==null&&({width:e}=this),t==null&&({height:t}=this),n==null&&({depth:n}=this),r==null&&({items:r}=this);const s=Math.max(0,r-2);return this._clipGeometry(e,t,n,r),this._clipOffsets(3,e,t,n,s,this.width,this.height,this.depth,this.sides)}}class p$e extends ad{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s,material:o}=n;const{position:a,color:l,mask:c,map:u,combine:h,linear:d,stpq:f}=n;s==null&&(s={}),o==null&&(o=!0);const g=s.styleColor!=null;this.geometry=new f$e({items:n.items,width:n.width,height:n.height,depth:n.depth}),this._adopt(s),this._adopt(this.geometry.uniforms);const v=t.material(),y=v.vertex;y.pipe(this._vertexColor(l,c)),y.require(this._vertexPosition(a,o,u,2,f)),o||y.pipe("mesh.position",this.uniforms),o&&y.pipe("strip.position.normal",this.uniforms),y.pipe("project.position",this.uniforms),v.fragment=r=this._fragmentColor(g,o,l,c,u,2,f,h,d),r.pipe("fragment.color",this.uniforms);const _=v.link({side:xs});this.material=this._material(_);const S=new rr(this.geometry,this.material);S.userData=_,this._raw(S),this.renders=[S]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.renders=this.geometry=this.material=null,super.dispose()}}class m$e extends ad{constructor(e,t,n){let r;super(e,t,n);let{uniforms:s,material:o}=n;const{position:a,color:l,normal:c,mask:u,map:h,combine:d,linear:f,stpq:g,intUV:v}=n;s==null&&(s={}),o==null&&(o=!0);const y=s.styleColor!=null;this.geometry=new FU({width:n.width,height:n.height,surfaces:n.surfaces,layers:n.layers,closedX:n.closedX,closedY:n.closedY}),this._adopt(s),this._adopt(this.geometry.uniforms);const _={};n.closedX&&(_.SURFACE_CLOSED_X=""),n.closedY&&(_.SURFACE_CLOSED_Y=""),v&&(_.POSITION_UV_INT="");const S=t.material(),w=S.vertex;w.pipe(this._vertexColor(l,u)),w.require(this._vertexPosition(a,o,h,2,g)),c?(w.require(c),w.pipe("surface.position.normal",this.uniforms,_)):(o||w.pipe("surface.position",this.uniforms,_),o&&w.pipe("surface.position.shaded",this.uniforms,_)),w.pipe("project.position",this.uniforms),S.fragment=r=this._fragmentColor(y,o,l,u,h,2,g,d,f),r.pipe("fragment.color",this.uniforms);const C=S.link({side:xs});this.material=this._material(C);const E=new rr(this.geometry,this.material);E.userData=C,this._raw(E),this.renders=[E]}dispose(){return this.geometry.dispose(),this.material.dispose(),this.renders=this.geometry=this.material=null,super.dispose()}}const g$e=512/16;class v$e extends NU{constructor(e,t,n){let r;if(n.width||(n.width=256),n.height||(n.height=256),n.type=Sa,n.channels=1,n.backed=!0,super(e,t,n,!1),this.font=n.font!=null?n.font:["sans-serif"],this.size=n.size||24,this.style=n.style!=null?n.style:"normal",this.variant=n.variant!=null?n.variant:"normal",this.weight=n.weight!=null?n.weight:"normal",this.outline=(r=+(n.outline!=null?n.outline:5))!=null?r:0,this.gamma=1,typeof navigator<"u"){const s=navigator.userAgent;s.match(/Chrome/)&&s.match(/OS X/)&&(this.gamma=.5)}this.scratchW=this.scratchH=0,this.build(n)}build(e){super.build(e);let t=16;t=this.size,t+=4+2*Math.min(1,this.outline);const n=g$e*t,r=document.createElement("canvas");r.width=n,r.height=t;const s=h=>`${h.replace(/(['"\\])/g,"\\$1")}`,o=this.font.map(s).join(", "),a=r.getContext("2d",{willReadFrequently:!0});a.font=`${this.style} ${this.variant} ${this.weight} ${this.size}px ${o}`,a.fillStyle="#FF0000",a.textAlign="left",a.textBaseline="bottom",a.lineJoin="round";const l=[],c=this.outline*3;for(let h=0,d=c,f=0<=d;f?h<d:h>d;f?h++:h--){const g=("00"+Math.max(0,-h*8+128-!h*8).toString(16)).slice(-2);l.push("#"+g+g+g)}const u=new Uint8Array(n*t*2);return this.canvas=r,this.context=a,this.lineHeight=t,this.maxWidth=n,this.colors=l,this.scratch=u,this._allocate=this.allocate.bind(this),this._write=this.write.bind(this)}reset(){return super.reset(),this.mapped={}}begin(){return Array.from(this.rows).map(e=>e.alive=0)}end(){const{mapped:e}=this;for(const t of Array.from(this.rows.slice()))if(t.alive===0){for(const n of Array.from(t.keys))delete e[n];this.collapse(t)}}map(e,t){const{mapped:n}=this,r=n[e];if(r!=null)return r.row.alive++,t(r.x,r.y,r.w,r.h);this.draw(e);const s=this.scratch,o=this.scratchW,a=this.scratchH,l=this._allocate,c=this._write;return l(e,o,a,function(u,h,d){return n[e]={x:h,y:d,w:o,h:a,row:u},c(s,h,d,o,a),t(h,d,o,a)})}draw(e){let t,n,r,s=this.width;const o=this.lineHeight,a=this.outline,l=this.context,c=this.scratch,u=this.maxWidth,{colors:h}=this,d=a+1,f=Math.round(o*1.05-1),g=l.measureText(e);if(s=Math.min(u,Math.ceil(g.width+2*d+1)),l.clearRect(0,0,s,o),this.outline===0){let v,y;for(l.fillText(e,d,f),{data:t}=l.getImageData(0,0,s,o),r=3,n=0,y=t.length/4,v=0<=y;v?n<y:n>y;v?n++:n--)c[n]=t[r],r+=4;return this.scratchW=s,this.scratchH=o}else{let v,y,_,S;for(l.globalCompositeOperation="source-over",y=a+1,n=y,v=y<=1;v?n<=1:n>=1;v?n++:n--)r=n>1?n*2-2:n,l.strokeStyle=h[r-1],l.lineWidth=r,l.strokeText(e,d,f);l.globalCompositeOperation="multiply",l.fillText(e,d,f),{data:t}=l.getImageData(0,0,s,o),r=0;const{gamma:w}=this;for(n=0,S=t.length/4,_=0<=S;_?n<S:n>S;_?n++:n--){const C=t[r];let E=C?t[r+1]/C:1;w===.5&&(E=Math.sqrt(E)),E=Math.min(1,Math.max(0,E));const k=256-C,O=k+(C-k)*E;c[n]=Math.max(0,Math.min(255,O+2)),r+=4}return this.scratchW=s,this.scratchH=o}}}class _$e extends k4{build(e){return super.build(),this.pad={x:0,y:0,z:0},this.streamer=this.generate(this.data)}setActive(e,t,n){let r;return[this.pad.x,this.pad.y,this.pad.z]=Array.from(r=[Math.max(0,this.width-e),Math.max(0,this.height-t),Math.max(0,this.depth-n)]),r}fill(){let e,t,n,r;const{callback:s}=this;typeof s.reset=="function"&&s.reset();const{emit:o,skip:a,count:l,done:c,reset:u}=this.streamer;u();const h=this.width,d=this.height,f=this.pad.x,g=this.pad.y,v=this.samples-this.pad.z*h*d;let y=e=t=n=0;if(f>0||g>0)for(;!c()&&n<v&&(n++,r=s(o,y,e,t),++y===h-f&&(a(f),n+=f,y=0,++e===d-g&&(a(h*g),n+=h*g,e=0,t++)),r!==!1););else for(;!c()&&n<v&&(n++,r=s(o,y,e,t),++y===h&&(y=0,++e===d&&(e=0,t++)),r!==!1););return Math.floor(l()/this.items)}through(e,t){let n,r,s,o;const{consume:a,done:l,skip:c}=o=this.streamer,{emit:u}=n=t.streamer;let h=r=s=0,d=()=>a((f,g,v,y)=>e(u,f,g,v,y,h,r,s));return d=P_(d,this.items),()=>{let f;o.reset(),n.reset();const g=this.width,v=this.height,y=this.pad.x,_=this.pad.y,S=this.samples-this.pad.z*g*v;if(h=r=s=f=0,y>0||_>0)for(;!l()&&f<S;)f++,d(),++h===g-y&&(c(y),h=0,++r===v-_&&(c(g*_),r=0,s++));else for(;!l()&&f<S;)f++,d(),++h===g&&(h=0,++r===v&&(r=0,s++));return o.count()}}}const HU={sprite:d$e,point:l$e,line:r$e,surface:m$e,face:n$e,strip:p$e,arrow:Zje,screen:BU,memoScreen:VE,debug:e$e,dataBuffer:k4,arrayBuffer:Xje,matrixBuffer:s$e,voxelBuffer:_$e,pushBuffer:c$e,renderToTexture:UU,memo:BE,readback:h$e,atlas:NU,textAtlas:v$e,scene:DU},b$e=Object.freeze(Object.defineProperty({__proto__:null,Classes:HU,Factory:zU,Scene:DU},Symbol.toStringTag,{value:"Module"})),y$e=`uniform float worldUnit;
uniform float lineDepth;
uniform float lineWidth;
uniform float focusDepth;

uniform vec4 geometryClip;
uniform float arrowSize;
uniform float arrowSpace;

attribute vec4 position4;
attribute vec3 arrow;
attribute vec2 attach;

// External
vec3 getPosition(vec4 xyzw, float canonical);

void getArrowGeometry(vec4 xyzw, float near, float mid, float far, out vec3 left, out vec3 right, out vec3 middle, out vec3 start) {
  right  = getPosition(xyzw, 1.0);
  left   = getPosition(vec4(near, xyzw.yzw), 0.0);
  middle = getPosition(vec4(mid,  xyzw.yzw), 0.0);
  start  = getPosition(vec4(far,  xyzw.yzw), 0.0);
}

mat4 getArrowMatrix(vec3 left, vec3 right, vec3 middle, vec3 start) {

  float depth = focusDepth;
  if (lineDepth < 1.0) {
    // Depth blending
    float z = max(0.00001, -right.z);
    depth = mix(z, focusDepth, lineDepth);
  }

  vec3 diff = left - right;
  float l = length(diff);
  if (l == 0.0) {
    return mat4(1.0, 0.0, 0.0, 0.0,
                0.0, 1.0, 0.0, 0.0,
                0.0, 0.0, 1.0, 0.0,
                0.0, 0.0, 0.0, 1.0);
  }

  // Construct TBN matrix around shaft
  vec3 t = normalize(diff);
  vec3 n = normalize(cross(t, t.yzx + vec3(.1, .2, .3)));
  vec3 b = cross(n, t);

  // Shrink arrows when vector gets too small
  // Approach linear scaling with cubic ease the smaller we get
  float size = arrowSize * lineWidth * worldUnit * depth * 1.25;
  l = max(length(right - middle), length(middle - start)) * 2.0 * arrowSpace;
  float mini = clamp(1.0 - l / size * .333, 0.0, 1.0);
  float scale = 1.0 - mini * mini * mini;
  float range = size * scale;

  // Size to 2.5:1 ratio
  float rangeNB = range / 2.5;

  // Anchor at end position
  return mat4(vec4(n * rangeNB,  0),
              vec4(b * rangeNB,  0),
              vec4(t * range, 0),
              vec4(right,  1.0));
}

vec3 getArrowPosition() {
  vec3 left, right, middle, start;

  // Clip arrow position and attachment anchors to data
  vec4 p = min(geometryClip, position4);
  vec3 a = vec3(min(geometryClip.x, p.x + attach.x), geometryClip.x / 2.0, min(geometryClip.x, attach.y));

  getArrowGeometry(p, a.x, a.y, a.z, left, right, middle, start);
  mat4 matrix = getArrowMatrix(left, right, middle, start);

  return (matrix * vec4(arrow.xyz, 1.0)).xyz;

}
`,x$e=`uniform vec4 axisStep;
uniform vec4 axisPosition;

vec4 getAxisPosition(vec4 xyzw, inout vec4 stpq) {
  return axisStep * xyzw.x + axisPosition;
}
`,w$e=`uniform vec4 basisScale;
uniform vec4 basisOffset;
uniform vec4 viewScale;
uniform vec4 viewOffset;

vec4 getCartesian4Position(vec4 position, inout vec4 stpq) {
  return position * basisScale + basisOffset;
}
`,S$e=`uniform mat4 viewMatrix;

vec4 getCartesianPosition(vec4 position, inout vec4 stpq) {
  return viewMatrix * vec4(position.xyz, 1.0);
}
`,M$e=`uniform vec4 clampLimit;

vec4 getClampXYZW(vec4 xyzw) {
  return clamp(xyzw, vec4(0.0), clampLimit);
}
`,C$e=`vec4 opaqueColor(vec4 color) {
  return vec4(color.rgb, 1.0);
}
`,E$e=`uniform vec4 geometryClip;
attribute vec4 position4;

// External
vec3 getPosition(vec4 xyzw, float canonical);

vec3 getFacePosition() {
  vec4 p = min(geometryClip, position4);
  return getPosition(p, 1.0);
}
`,T$e=`attribute vec4 position4;

// External
vec3 getPosition(vec4 xyzw, float canonical);

varying vec3 vNormal;
varying vec3 vLight;
varying vec3 vPosition;

void getFaceGeometry(vec4 xyzw, out vec3 pos, out vec3 normal) {
  vec3 a, b, c;

  a   = getPosition(vec4(xyzw.xyz, 0.0), 0.0);
  b   = getPosition(vec4(xyzw.xyz, 1.0), 0.0);
  c   = getPosition(vec4(xyzw.xyz, 2.0), 0.0);

  pos = getPosition(xyzw, 1.0);
  normal = normalize(cross(c - a, b - a));
}

vec3 getFacePositionNormal() {
  vec3 center, normal;

  getFaceGeometry(position4, center, normal);
  vNormal   = normal;
  vLight    = normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz);
  vPosition = -center;

  return center;
}
`,A$e=`/*
Float encoding technique by
Carlos Scheidegger
https://github.com/cscheid/lux/blob/master/src/shade/bits/encode_float.js

Conversion to GLSL by:
http://concord-consortium.github.io/lab/experiments/webgl-gpgpu/script.js
*/

float shift_right(float v, float amt) { 
  v = floor(v) + 0.5; 
  return floor(v / exp2(amt)); 
}

float shift_left(float v, float amt) { 
  return floor(v * exp2(amt) + 0.5); 
}

float mask_last(float v, float bits) { 
  return mod(v, shift_left(1.0, bits)); 
}

float extract_bits(float num, float from, float to) { 
  from = floor(from + 0.5); to = floor(to + 0.5); 
  return mask_last(shift_right(num, from), to - from); 
}

vec4 encode_float(float val) { 
  if (val == 0.0) return vec4(0, 0, 0, 0); 
  float valuesign = val > 0.0 ? 0.0 : 1.0; 
  val = abs(val); 
  float exponent = floor(log2(val)); 
  float biased_exponent = exponent + 127.0; 
  float fraction = ((val / exp2(exponent)) - 1.0) * 8388608.0; 
  float t = biased_exponent / 2.0; 
  float last_bit_of_biased_exponent = fract(t) * 2.0; 
  float remaining_bits_of_biased_exponent = floor(t); 
  float byte4 = extract_bits(fraction, 0.0, 8.0) / 255.0; 
  float byte3 = extract_bits(fraction, 8.0, 16.0) / 255.0; 
  float byte2 = (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0; 
  float byte1 = (valuesign * 128.0 + remaining_bits_of_biased_exponent) / 255.0; 
  return vec4(byte4, byte3, byte2, byte1); 
}
`,P$e=`uniform vec4 indexModulus;

vec4 getSample(vec4 xyzw);
vec4 getIndex(vec4 xyzw);

vec4 floatPackIndex(vec4 xyzw) {
  vec4 value = getSample(xyzw);
  vec4 index = getIndex(xyzw);

  vec4 offset = floor(index + .5) * indexModulus;
  vec2 sum2 = offset.xy + offset.zw;
  float sum = sum2.x + sum2.y;
  return vec4(value.xyz, sum);
}`,k$e=`vec4 getSample(vec4 xyzw);

float floatStretch(vec4 xyzw, float channelIndex) {
  vec4 sample = getSample(xyzw);
  vec2 xy = channelIndex > 1.5 ? sample.zw : sample.xy;
  return mod(channelIndex, 2.0) > .5 ? xy.y : xy.x;
}`,R$e=`varying float vClipStrokeWidth;
varying float vClipStrokeIndex;
varying vec3  vClipStrokeEven;
varying vec3  vClipStrokeOdd;
varying vec3  vClipStrokePosition;

void clipStrokeFragment() {
  bool odd = mod(vClipStrokeIndex, 2.0) >= 1.0;

  vec3 tangent;
  if (odd) {
    tangent = vClipStrokeOdd;
  }
  else {
    tangent = vClipStrokeEven;
  }

  float travel = dot(vClipStrokePosition, normalize(tangent)) / vClipStrokeWidth;
  if (mod(travel, 16.0) > 8.0) {
    discard;
  }
}
`,O$e=`varying float vClipStrokeWidth;
varying float vClipStrokeIndex;
varying vec3  vClipStrokeEven;
varying vec3  vClipStrokeOdd;
varying vec3  vClipStrokePosition;

void clipStrokeFragment() {
  bool odd = mod(vClipStrokeIndex, 2.0) >= 1.0;

  vec3 tangent;
  if (odd) {
    tangent = vClipStrokeOdd;
  }
  else {
    tangent = vClipStrokeEven;
  }

  float travel = dot(vClipStrokePosition, normalize(tangent)) / vClipStrokeWidth;
  if (mod(travel, 4.0) > 2.0) {
    discard;
  }
}
`,L$e=`varying vec2 vClipEnds;

void clipEndsFragment() {
  if (vClipEnds.x < 0.0 || vClipEnds.y < 0.0) discard;
}
`,D$e=`varying float vClipProximity;

void clipProximityFragment() {
  if (vClipProximity >= 0.5) discard;
}`,z$e=`void setFragmentColor(vec4 color) {
  gl_FragColor = color;
}`,I$e=`vec4 fragmentRGBA(vec4 rgba, vec4 stpq) {
  return rgba;
}`,N$e=`void setFragmentColor(vec4 color) {
  if (color.a < 1.0) discard;
  gl_FragColor = color;
}`,U$e=`void setFragmentColor(vec4 color) {
  if (color.a >= 1.0) discard;
  gl_FragColor = color;
}`,F$e=`uniform vec4 gridPosition;
uniform vec4 gridStep;
uniform vec4 gridAxis;

vec4 sampleData(vec2 xy);

vec4 getGridPosition(vec4 xyzw) {
  vec4 onAxis  = gridAxis * sampleData(vec2(xyzw.y, 0.0)).x;
  vec4 offAxis = gridStep * xyzw.x + gridPosition;
  return onAxis + offAxis;
}
`,B$e=`uniform float growScale;
uniform vec4  growMask;
uniform vec4  growAnchor;

vec4 getSample(vec4 xyzw);

vec4 getGrowSample(vec4 xyzw) {
  vec4 anchor = xyzw * growMask + growAnchor;

  vec4 position = getSample(xyzw);
  vec4 center = getSample(anchor);

  return mix(center, position, growScale);
}`,V$e=`uniform float joinStride;
uniform float joinStrideInv;

float getIndex(vec4 xyzw);
vec4 getRest(vec4 xyzw);
vec4 injectIndices(float a, float b);

vec4 getJoinXYZW(vec4 xyzw) {

  float a = getIndex(xyzw);
  float b = a * joinStrideInv;

  float integer  = floor(b);
  float fraction = b - integer;
  
  return injectIndices(fraction * joinStride, integer) + getRest(xyzw);
}
`,H$e=`varying float vPixelSize;

vec4 getLabelAlphaColor(vec4 color, vec4 sample) {
  float mask = clamp(sample.r * 1000.0, 0.0, 1.0);
  float alpha = (sample.r - .5) * vPixelSize + .5;
  float a = mask * alpha * color.a;
  if (a <= 0.0) discard;
  return vec4(color.xyz, a);
}
`,q$e=`vec2 mapUV(vec4 uvwo, vec4 stpq) {
  return uvwo.xy;
}
`,G$e=`uniform float outlineExpand;
uniform float outlineStep;
uniform vec3  outlineColor;

varying float vPixelSize;

const float PIXEL_STEP = 255.0 / 16.0;

vec4 getLabelOutlineColor(vec4 color, vec4 sample) {
  float ps = vPixelSize * PIXEL_STEP;
  float os = outlineStep;

  float sdf = sample.r - .5 + outlineExpand;
  vec2  sdfs = vec2(sdf, sdf + os);
  vec2  alpha = clamp(sdfs * ps + .5, 0.0, 1.0);

  if (alpha.y <= 0.0) {
    discard;
  }

  vec3 blend = color.xyz;
  if (alpha.y > alpha.x) {
    blend = sqrt(mix(outlineColor * outlineColor, blend * blend, alpha.x));
  }
  
  return vec4(blend, alpha.y * color.a);
}
`,W$e=`uniform vec4 layerScale;
uniform vec4 layerBias;

#define PROJECT_ORTHOGONAL

vec4 layerPosition(vec4 position, inout vec4 stpq) {
  return layerScale * position + layerBias;
}
`,j$e=`// External
vec4 sampleData(vec4 xyzw);

vec4 lerpDepth(vec4 xyzw) {
  float x = xyzw.z;
  float i = floor(x);
  float f = x - i;
    
  vec4 xyzw1 = vec4(xyzw.xy, i, xyzw.w);
  vec4 xyzw2 = vec4(xyzw.xy, i + 1.0, xyzw.w);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, f);
}
`,$$e=`// External
vec4 sampleData(vec4 xyzw);

vec4 lerpHeight(vec4 xyzw) {
  float x = xyzw.y;
  float i = floor(x);
  float f = x - i;
    
  vec4 xyzw1 = vec4(xyzw.x, i, xyzw.zw);
  vec4 xyzw2 = vec4(xyzw.x, i + 1.0, xyzw.zw);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, f);
}
`,X$e=`// External
vec4 sampleData(vec4 xyzw);

vec4 lerpItems(vec4 xyzw) {
  float x = xyzw.w;
  float i = floor(x);
  float f = x - i;
    
  vec4 xyzw1 = vec4(xyzw.xyz, i);
  vec4 xyzw2 = vec4(xyzw.xyz, i + 1.0);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, f);
}
`,Y$e=`// External
vec4 sampleData(vec4 xyzw);

vec4 lerpWidth(vec4 xyzw) {
  float x = xyzw.x;
  float i = floor(x);
  float f = x - i;
    
  vec4 xyzw1 = vec4(i, xyzw.yzw);
  vec4 xyzw2 = vec4(i + 1.0, xyzw.yzw);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, f);
}
`,K$e=`// Units and calibration
uniform float worldUnit;
uniform float lineWidth;
uniform float lineDepth;
uniform float focusDepth;

// General data index
uniform vec4 geometryClip;
attribute vec4 position4;

// (Top/bottom -1,1)
attribute float line;

// 0...1 for round or bevel joins
#ifdef LINE_JOIN_DETAIL
attribute float joint;
#else
const float joint = 0.0;
#endif

// Knock out excessively long line segments (e.g. for asymtpotes)
#ifdef LINE_PROXIMITY
uniform float lineProximity;
varying float vClipProximity;
#endif

// Ghetto line stroking (local only, not global)
#ifdef LINE_STROKE
varying float vClipStrokeWidth;
varying float vClipStrokeIndex;
varying vec3  vClipStrokeEven;
varying vec3  vClipStrokeOdd;
varying vec3  vClipStrokePosition;
#endif

// External
vec3 getPosition(vec4 xyzw, float canonical);

// Clip line ends for arrows / decoration
#ifdef LINE_CLIP
uniform float clipRange;
uniform vec2  clipStyle;
uniform float clipSpace;

attribute vec2 strip;

varying vec2 vClipEnds;

void clipEnds(vec4 xyzw, vec3 center, vec3 pos) {

  // Sample start of line strip
  vec4 xyzwS = vec4(0.0, xyzw.yzw);
  vec3 start = getPosition(xyzwS, 0.0);

  // Sample middle of line strip
  vec4 xyzwM = vec4(geometryClip.x / 2.0, xyzw.yzw);
  vec3 middle = getPosition(xyzwM, 0.0);

#ifdef LINE_CLOSED
  vec3 end = start;
#else
  // Sample other end of line strip
  vec4 xyzwE = vec4(geometryClip.x, xyzw.yzw);
  vec3 end   = getPosition(xyzwE, 0.0);
#endif

  // Measure length
  float l = max(length(end - middle), length(middle - start)) * clipSpace * 2.0;

  // Arrow length (=2.5x radius)
  float arrowSize = 1.25 * clipRange * lineWidth * worldUnit;

#ifdef LINE_CLOSED
  // Clip around start/end
  end = start;
#endif

  vClipEnds = vec2(1.0);

  if (clipStyle.y > 0.0) {
    // Depth blend end
    float depth = focusDepth;
    if (lineDepth < 1.0) {
      float z = max(0.00001, -end.z);
      depth = mix(z, focusDepth, lineDepth);
    }

    // Absolute arrow length
    float size = arrowSize * depth;

    // Adjust clip range
    // Approach linear scaling with cubic ease the smaller we get
    float mini = clamp(1.0 - l / size * .333, 0.0, 1.0);
    float scale = 1.0 - mini * mini * mini;
    float invrange = 1.0 / (size * scale);

    // Clip end
    vec3 diff = end - center;
    if(diff == vec3(0.0))
      vClipEnds.x = -1.0;
    else {
      diff = normalize(end - center);
      float d = dot(end - pos, diff);
      vClipEnds.x = d * invrange - 1.0;
    }
  }

  if (clipStyle.x > 0.0) {
    // Depth blend start
    float depth = focusDepth;
    if (lineDepth < 1.0) {
      float z = max(0.00001, -start.z);
      depth = mix(z, focusDepth, lineDepth);
    }

    // Absolute arrow length
    float size = arrowSize * depth;

    // Adjust clip range
    // Approach linear scaling with cubic ease the smaller we get
    float mini = clamp(1.0 - l / size * .333, 0.0, 1.0);
    float scale = 1.0 - mini * mini * mini;
    float invrange = 1.0 / (size * scale);

    // Clip start
    vec3 diff = center - start;
    if(diff == vec3(0.0))
      vClipEnds.y = -1.0;
    else {
      diff = normalize(center - start);
      float d = dot(pos - start, diff);
      vClipEnds.y = d * invrange - 1.0;
    }
  }
}
#endif

// Adjust left/center/right to be inside near/far z range
const float epsilon = 1e-5;
void fixCenter(inout vec3 left, inout vec3 center, inout vec3 right) {
  if (center.z >= 0.0) {
    if (left.z < 0.0) {
      float d = (center.z + epsilon) / (center.z - left.z);
      center = mix(center, left, d);
    }
    else if (right.z < 0.0) {
      float d = (center.z + epsilon) / (center.z - right.z);
      center = mix(center, right, d);
    }
  }

  if (left.z >= 0.0) {
    if (center.z < 0.0) {
      float d = (left.z + epsilon) / (left.z - center.z);
      left = mix(left, center, d);
    }
  }

  if (right.z >= 0.0) {
    if (center.z < 0.0) {
      float d = (right.z + epsilon) / (right.z - center.z);
      right = mix(right, center, d);
    }
  }
}

vec4 wrapAround(vec4 xyzw) {
#ifdef LINE_CLOSED
  float gx = geometryClip.x;
  if (xyzw.x < 0.0) xyzw.x += gx;
  if (xyzw.x >= gx) xyzw.x -= gx;
#endif
  return xyzw;
}

// Sample the source data in an edge-aware manner
void getLineGeometry(vec4 xyzw, float edge, out vec3 left, out vec3 center, out vec3 right) {
  vec4 delta = vec4(1.0, 0.0, 0.0, 0.0);

  center = getPosition(xyzw, 1.0);
  left   = (edge > -0.5) ? getPosition(wrapAround(xyzw - delta), 0.0) : center;
  right  = (edge < 0.5)  ? getPosition(wrapAround(xyzw + delta), 0.0) : center;
}

// Calculate the position for a vertex along the line, including joins
vec3 getLineJoin(float edge, bool odd, vec3 left, vec3 center, vec3 right, float width, float offset, float joint) {
  vec2 join = vec2(1.0, 0.0);

  fixCenter(left, center, right);

  vec4 a = vec4(left.xy, right.xy);
  vec4 b = a / vec4(left.zz, right.zz);

  vec2 l = b.xy;
  vec2 r = b.zw;
  vec2 c = center.xy / center.z;

  vec4 d = vec4(l, c) - vec4(c, r);
  float l1 = dot(d.xy, d.xy);
  float l2 = dot(d.zw, d.zw);

  if (l1 + l2 > 0.0) {

    if (edge > 0.5 || l2 == 0.0) {
      vec2 nl = normalize(d.xy);
      vec2 tl = vec2(nl.y, -nl.x);

#ifdef LINE_PROXIMITY
      vClipProximity = 1.0;
#endif

#ifdef LINE_STROKE
      vClipStrokeEven = vClipStrokeOdd = normalize(left - center);
#endif
      join = tl;
    }
    else if (edge < -0.5 || l1 == 0.0) {
      vec2 nr = normalize(d.zw);
      vec2 tr = vec2(nr.y, -nr.x);

#ifdef LINE_PROXIMITY
      vClipProximity = 1.0;
#endif

#ifdef LINE_STROKE
      vClipStrokeEven = vClipStrokeOdd = normalize(center - right);
#endif
      join = tr;
    }
    else {
      // Limit join stretch for tiny segments
      float lmin2 = min(l1, l2) / (width * width);

      // Hide line segment if ratio of leg lengths exceeds promixity threshold
#ifdef LINE_PROXIMITY
      float lr     = l1 / l2;
      float rl     = l2 / l1;
      float ratio  = max(lr, rl);
      float thresh = lineProximity + 1.0;
      vClipProximity = (ratio > thresh * thresh) ? 1.0 : 0.0;
#endif

      // Calculate normals/tangents
      vec2 nl = normalize(d.xy);
      vec2 nr = normalize(d.zw);

      // Calculate tangents
      vec2 tl = vec2(nl.y, -nl.x);
      vec2 tr = vec2(nr.y, -nr.x);

#ifdef LINE_PROXIMITY
      // Mix tangents according to leg lengths
      vec2 tc = normalize(mix(tl, tr, l1/(l1+l2)));
#else
      // Average tangent
      vec2 tc = normalize(tl + tr);
#endif

      // Miter join
      float cosA   = dot(nl, tc);
      float sinA   = max(0.1, abs(dot(tl, tc)));
      float factor = cosA / sinA;
      float scale  = sqrt(1.0 + min(lmin2, factor * factor));

      // Stroke normals
#ifdef LINE_STROKE
      vec3 stroke1 = normalize(left - center);
      vec3 stroke2 = normalize(center - right);

      if (odd) {
        vClipStrokeEven = stroke1;
        vClipStrokeOdd  = stroke2;
      }
      else {
        vClipStrokeEven = stroke2;
        vClipStrokeOdd  = stroke1;
      }
#endif

#ifdef LINE_JOIN_MITER
      // Apply straight up miter
      join = tc * scale;
#endif

#ifdef LINE_JOIN_ROUND
      // Slerp bevel join into circular arc
      float dotProduct = dot(nl, nr);
      float angle = acos(dotProduct);
      float sinT  = sin(angle);
      join = (sin((1.0 - joint) * angle) * tl + sin(joint * angle) * tr) / sinT;
#endif

#ifdef LINE_JOIN_BEVEL
      // Direct bevel join between two flat ends
      float dotProduct = dot(nl, nr);
      join = mix(tl, tr, joint);
#endif

#ifdef LINE_JOIN_DETAIL
      // Check if on inside or outside of joint
      float crossProduct = nl.x * nr.y - nl.y * nr.x;
      if (offset * crossProduct < 0.0) {
        // For near-180-degree bends, correct back to a miter to avoid discontinuities
        float ratio = clamp(-dotProduct * 2.0 - 1.0, 0.0, 1.0);
        // Otherwise collapse the inside vertices into one.
        join = mix(tc * scale, join, ratio * ratio * ratio);
      }
#endif

    }
    return vec3(join, 0.0);
  }
  else {
    return vec3(0.0);
  }

}

// Calculate final line position
vec3 getLinePosition() {
  vec3 left, center, right, join;

  // Up/down along segment
  float offset = line;

  // Clip data
  vec4 p = min(geometryClip, position4);

  // Left/center/right
  float edge = 0.0;
#ifdef LINE_CLOSED
  if (p.x == geometryClip.x) p.x = 0.0;
#else
  if (p.x == geometryClip.x) edge = 1.0;
  if (p.x == 0.0) edge = -1.0;
#endif

  // Get position + adjacent neighbours
  getLineGeometry(p, edge, left, center, right);

#ifdef LINE_STROKE
  // Set parameters for line stroke fragment shader
  vClipStrokePosition = center;
  vClipStrokeIndex = p.x;
  bool odd = mod(p.x, 2.0) >= 1.0;
#else
  bool odd = true;
#endif

  // Divide line width up/down
  float width = lineWidth * 0.5;

  float depth = focusDepth;
  if (lineDepth < 1.0) {
    // Depth blending
    float z = max(0.00001, -center.z);
    depth = mix(z, focusDepth, lineDepth);
  }
  width *= depth;

  // Convert to world units
  width *= worldUnit;

  // Calculate line join
#ifdef LINE_CLOSED
  join = getLineJoin(0.0, odd, left, center, right, width, offset, joint);
#else
  join = getLineJoin(edge, odd, left, center, right, width, offset, joint);
#endif
  vec3 pos = center + join * offset * width;

#ifdef LINE_STROKE
  vClipStrokeWidth = width;
#endif

#ifdef LINE_CLIP
  clipEnds(p, center, pos);
#endif

  return pos;
}
`,Z$e=`uniform vec2 dataResolution;
uniform vec2 dataPointer;

vec2 map2DData(vec2 xy) {
  return (xy + dataPointer) * dataResolution;
}
`,J$e=`uniform vec2 dataResolution;
uniform vec2 dataPointer;

vec2 map2DData(vec2 xy) {
  return fract((xy + dataPointer) * dataResolution);
}
`,Q$e=`void mapXyzw2DV(vec4 xyzw, out vec2 xy, out float z) {
  xy = xyzw.xy;
  z  = xyzw.z;
}

`,eXe=`vec4 alignXYZW(vec4 xyzw) {
  return floor(xyzw + .5);
}

`,tXe=`uniform float textureItems;
uniform float textureHeight;

vec2 mapXyzwTexture(vec4 xyzw) {
  
  float x = xyzw.x;
  float y = xyzw.y;
  float z = xyzw.z;
  float i = xyzw.w;
  
  return vec2(i, y) + vec2(x, z) * vec2(textureItems, textureHeight);
}

`,nXe=`varying vec4 vColor;

vec4 getColor() {
  if (vColor.a <= 0.0) discard;
  return vColor;
}
`,iXe=`#ifdef POSITION_STPQ
varying vec4 vSTPQ;
#endif
#ifdef POSITION_U
varying float vU;
#endif
#ifdef POSITION_UV
varying vec2 vUV;
#endif
#ifdef POSITION_UVW
varying vec3 vUVW;
#endif
#ifdef POSITION_UVWO
varying vec4 vUVWO;
#endif

vec4 getSample(vec4 uvwo, vec4 stpq);

vec4 getMapColor() {
  #ifdef POSITION_STPQ
  vec4 stpq = vSTPQ;
  #else
  vec4 stpq = vec4(0.0);
  #endif

  #ifdef POSITION_U
  vec4 uvwo = vec4(vU, 0.0, 0.0, 0.0);
  #endif
  #ifdef POSITION_UV
  vec4 uvwo = vec4(vUV, 0.0, 0.0);
  #endif
  #ifdef POSITION_UVW
  vec4 uvwo = vec4(vUVW, 0.0);
  #endif
  #ifdef POSITION_UVWO
  vec4 uvwo = vec4(vUVWO);
  #endif

  return getSample(uvwo, stpq);
}
`,rXe=`varying float vMask;

float ease(float t) {
  t = clamp(t, 0.0, 1.0);
  return t * t * (3.0 - 2.0 * t);
}

vec4 maskColor() {
  if (vMask <= 0.0) discard;
  return vec4(vec3(1.0), ease(vMask));
}
`,sXe=`#ifdef POSITION_STPQ
varying vec4 vSTPQ;
#endif
#ifdef POSITION_U
varying float vU;
#endif
#ifdef POSITION_UV
varying vec2 vUV;
#endif
#ifdef POSITION_UVW
varying vec3 vUVW;
#endif
#ifdef POSITION_UVWO
varying vec4 vUVWO;
#endif

vec4 getSample(vec4 rgba, vec4 stpq);

vec4 getMaterialColor(vec4 rgba) {
  vec4 stpq = vec4(0.0);

  #ifdef POSITION_U
  stpq.x = vU;
  #endif
  #ifdef POSITION_UV
  stpq.xy = vUV;
  #endif
  #ifdef POSITION_UVW
  stpq.xyz = vUVW;
  #endif
  #ifdef POSITION_UVWO
  stpq = vUVWO;
  #endif

  #ifdef POSITION_STPQ
  stpq = vSTPQ;
  #endif

  return getSample(rgba, stpq);
}
`,oXe=`
#extension GL_OES_standard_derivatives : enable
varying vec3 vNormal;
varying vec3 vLight;
varying vec3 vPosition;

vec3 offSpecular(vec3 color) {
  vec3 c = 1.0 - color;
  return 1.0 - c * c;
}

vec4 getShadedColor(vec4 rgba) {
  
  vec3 color = rgba.xyz;
  vec3 color2 = offSpecular(rgba.xyz);

  vec3 normal = normalize(vNormal);
  vec3 light = normalize(vLight);
  vec3 position = normalize(vPosition);
  
  // Workaround to avoid gl_FrontFacing. See https://github.com/unconed/mathbox/pull/26
  vec3 pdx = dFdx(vPosition);
  vec3 pdy = dFdy(vPosition);
  bool frontFacting = dot(vNormal, cross(pdx, pdy)) > 0.0;

  float side = frontFacting ? 1.0 : -1.0;
  float cosine  = side * dot(normal, light);
  float diffuse = mix(max(0.0, cosine), .5 + .5 * cosine, .1);
  
  vec3  halfLight = normalize(light + position);
	float cosineHalf = max(0.0, side * dot(normal, halfLight));
	float specular = pow(cosineHalf, 16.0);
	
	return vec4(color * (diffuse * .9 + .05) + .25 * color2 * specular, rgba.a);
}
`,aXe="",lXe=`vec4 getGammaInColor(vec4 rgba) {
  return vec4(rgba.rgb * rgba.rgb, rgba.a);
}
`,cXe=`vec4 getGammaOutColor(vec4 rgba) {
  return vec4(sqrt(rgba.rgb), rgba.a);
}
`,uXe=`vec4 mapUVWO(vec4 uvwo, vec4 stpq) {
  return uvwo;
}
`,hXe=`uniform vec4 geometryClip;
attribute vec4 position4;

// External
vec3 getPosition(vec4 xyzw, float canonical);

vec3 getMeshPosition() {
  vec4 p = min(geometryClip, position4);
  return getPosition(p, 1.0);
}
`,dXe=`attribute vec4 position4;
uniform vec4 geometryClip;
varying vec4 vColor;

// External
vec4 getSample(vec4 xyzw);

void vertexColor() {
  vec4 p = min(geometryClip, position4);
  vColor = getSample(p);
}
`,fXe=`attribute vec4 position4;
uniform vec4 geometryResolution;
uniform vec4 geometryClip;
varying float vMask;

// External
float getSample(vec4 xyzw);

void maskLevel() {
  vec4 p = min(geometryClip, position4);
  vMask = getSample(p * geometryResolution);
}
`,pXe=`uniform vec4 geometryResolution;

#ifdef POSITION_STPQ
varying vec4 vSTPQ;
#endif
#ifdef POSITION_U
varying float vU;
#endif
#ifdef POSITION_UV
varying vec2 vUV;
#endif
#ifdef POSITION_UVW
varying vec3 vUVW;
#endif
#ifdef POSITION_UVWO
varying vec4 vUVWO;
#endif

// External
vec3 getPosition(vec4 xyzw, in vec4 stpqIn, out vec4 stpqOut);

vec3 getMeshPosition(vec4 xyzw, float canonical) {
  vec4 stpqOut, stpqIn = xyzw * geometryResolution;
  vec3 xyz = getPosition(xyzw, stpqIn, stpqOut);

  #ifdef POSITION_MAP
  if (canonical > 0.5) {
    #ifdef POSITION_STPQ
    vSTPQ = stpqOut;
    #endif
    #ifdef POSITION_U
    vU = stpqOut.x;
    #endif
    #ifdef POSITION_UV
    vUV = stpqOut.xy;
    #endif
    #ifdef POSITION_UVW
    vUVW = stpqOut.xyz;
    #endif
    #ifdef POSITION_UVWO
    vUVWO = stpqOut;
    #endif
  }
  #endif
  return xyz;
}
`,mXe=`uniform float transitionEnter;
uniform float transitionExit;
uniform vec4  transitionScale;
uniform vec4  transitionBias;
uniform float transitionSkew;
uniform float transitionActive;

uniform vec4  moveFrom;
uniform vec4  moveTo;

float ease(float t) {
  t = clamp(t, 0.0, 1.0);
  return 1.0 - (2.0 - t) * t;
}

vec4 getTransitionPosition(vec4 xyzw, inout vec4 stpq) {
  if (transitionActive < 0.5) return xyzw;

  float enter   = transitionEnter;
  float exit    = transitionExit;
  float skew    = transitionSkew;
  vec4  scale   = transitionScale;
  vec4  bias    = transitionBias;

  float factor  = 1.0 + skew;
  float offset  = dot(vec4(1.0), stpq * scale + bias);

  float a1 = ease(enter * factor - offset);
  float a2 = ease(exit  * factor + offset - skew);

  return xyzw + a1 * moveFrom + a2 * moveTo;
}`,gXe=`vec4 getMask(vec4 xyzw) {
  return vec4(1.0);
}`,vXe=`varying float vPixelSize;

float getDiscAlpha(float mask) {
  // Approximation: 1 - x*x is approximately linear around x = 1 with slope 2
  return vPixelSize * (1.0 - mask);
  //  return vPixelSize * 2.0 * (1.0 - sqrt(mask));
}
`,_Xe=`varying float vPixelSize;

float getDiscHollowAlpha(float mask) {
  return vPixelSize * (0.5 - 2.0 * abs(sqrt(mask) - .75));
}
`,bXe=`varying float vPixelSize;

float getGenericAlpha(float mask) {
  return vPixelSize * 2.0 * (1.0 - mask);
}
`,yXe=`varying float vPixelSize;

float getGenericHollowAlpha(float mask) {
  return vPixelSize * (0.5 - 2.0 * abs(mask - .75));
}
`,xXe=`varying vec2 vSprite;

float getSpriteMask(vec2 xy);
float getSpriteAlpha(float mask);

void setFragmentColorFill(vec4 color) {
  float mask = getSpriteMask(vSprite);
  if (mask > 1.0) {
    discard;
  }
  float alpha = getSpriteAlpha(mask);
  if (alpha >= 1.0) {
    discard;
  }
  gl_FragColor = vec4(color.rgb, alpha * color.a);
}
`,wXe=`varying vec2 vSprite;

float getSpriteMask(vec2 xy);
float getSpriteAlpha(float mask);

void setFragmentColorFill(vec4 color) {
  float mask = getSpriteMask(vSprite);
  if (mask > 1.0) {
    discard;
  }
  float alpha = getSpriteAlpha(mask);
  if (alpha < 1.0) {
    discard;
  }
  gl_FragColor = color;
}

`,SXe=`varying float vPixelSize;

float getCircleMask(vec2 uv) {
  return dot(uv, uv);
}
`,MXe=`varying float vPixelSize;

float getDiamondMask(vec2 uv) {
  vec2 a = abs(uv);
  return a.x + a.y;
}
`,CXe=`varying float vPixelSize;

float getTriangleDownMask(vec2 uv) {
  uv.y += .25;
  return max(uv.y, abs(uv.x) * .866 - uv.y * .5 + .6);
}
`,EXe=`varying float vPixelSize;

float getTriangleLeftMask(vec2 uv) {
  uv.x += .25;
  return max(uv.x, abs(uv.y) * .866 - uv.x * .5 + .6);
}
`,TXe=`varying float vPixelSize;

float getTriangleRightMask(vec2 uv) {
  uv.x -= .25;
  return max(-uv.x, abs(uv.y) * .866 + uv.x * .5 + .6);
}
`,AXe=`varying float vPixelSize;

float getSquareMask(vec2 uv) {
  vec2 a = abs(uv);
  return max(a.x, a.y);
}
`,PXe=`varying float vPixelSize;

float getTriangleUpMask(vec2 uv) {
  uv.y -= .25;
  return max(-uv.y, abs(uv.x) * .866 + uv.y * .5 + .6);
}
`,kXe=`uniform float pointDepth;

uniform float pixelUnit;
uniform float renderScale;
uniform float renderScaleInv;
uniform float focusDepth;

uniform vec4 geometryClip;
attribute vec4 position4;
attribute vec2 sprite;

varying vec2 vSprite;
varying float vPixelSize;

const float pointScale = POINT_SHAPE_SCALE;

// External
float getPointSize(vec4 xyzw);
vec3 getPosition(vec4 xyzw, float canonical);

vec3 getPointPosition() {
  // Discard out-of-range points by generating degenerate face
  if (
    position4.x > geometryClip.x ||
    position4.y > geometryClip.y ||
    position4.z > geometryClip.z ||
    position4.w > geometryClip.w
  ) return vec3(0.0, 0.0, 0.0);
  vec4 p = position4;

  vec3 center = getPosition(p, 1.0);

  // Depth blending
  // TODO: orthographic camera
  // Workaround: set depth = 0
  float z = -center.z;
  float depth = mix(z, focusDepth, pointDepth);

  // Match device/unit mapping
  // Sprite goes from -1..1, width = 2.
  float pointSize = getPointSize(p);
  float size = pointScale * pointSize * pixelUnit * .5;
  float depthSize = depth * size;

  // Pad sprite by half a pixel to make the anti-aliasing straddle the pixel edge
  // Note: pixelsize measures radius
  float pixelSize = .5 * (pointDepth > 0.0 ? depthSize / z : size);
  float paddedSize = pixelSize + 0.5;
  float padFactor = paddedSize / pixelSize;

  vPixelSize = paddedSize;
  vSprite    = sprite;

  return center + vec3(sprite * depthSize * renderScaleInv * padFactor, 0.0);
}
`,RXe=`uniform float pointSize;

float getPointSize(vec4 xyzw) {
  return pointSize;
}`,OXe=`uniform float pointSize;

vec4 getSample(vec4 xyzw);

float getPointSize(vec4 xyzw) {
  return pointSize * getSample(xyzw).x;
}`,LXe=`uniform float polarBend;
uniform float polarFocus;
uniform float polarAspect;
uniform float polarHelix;

uniform mat4 viewMatrix;

vec4 getPolarPosition(vec4 position, inout vec4 stpq) {
  if (polarBend > 0.0) {

    if (polarBend < 0.001) {
      // Factor out large addition/subtraction of polarFocus
      // to avoid numerical error
      // sin(x) ~ x
      // cos(x) ~ 1 - x * x / 2
      vec2 pb = position.xy * polarBend;
      float ppbbx = pb.x * pb.x;
      return viewMatrix * vec4(
        position.x * (1.0 - polarBend + (pb.y * polarAspect)),
        position.y * (1.0 - .5 * ppbbx) - (.5 * ppbbx) * polarFocus / polarAspect,
        position.z + position.x * polarHelix * polarBend,
        1.0
      );
    }
    else {
      vec2 xy = position.xy * vec2(polarBend, polarAspect);
      float radius = polarFocus + xy.y;
      return viewMatrix * vec4(
        sin(xy.x) * radius,
        (cos(xy.x) * radius - polarFocus) / polarAspect,
        position.z + position.x * polarHelix * polarBend,
        1.0
      );
    }
  }
  else {
    return viewMatrix * vec4(position.xyz, 1.0);
  }
}`,DXe=`uniform float styleZBias;
uniform float styleZIndex;

void setPosition(vec3 position) {

  #ifdef PROJECT_ORTHOGONAL
  // Orthogonal projection with depth preservation around z = 1
  vec4 pos = projectionMatrix * vec4(position, 1.0);
  pos.xy *= -position.z;
  #else
  // Normal perspective projection
  vec4 pos = projectionMatrix * vec4(position, 1.0);
  #endif

  // Apply relative Z bias
  float bias  = (1.0 - styleZBias / 32768.0);
  pos.z *= bias;

  // Apply large scale Z index changes
  if (styleZIndex > 0.0) {
    float z = pos.z / pos.w;
    pos.z = ((z + 1.0) / (styleZIndex + 1.0) - 1.0) * pos.w;
  }

  gl_Position = pos;
}`,zXe=`// This is three.js' global uniform, missing from fragment shaders.
uniform mat4 projectionMatrix;

vec4 readbackPosition(vec3 position, vec4 stpq) {
  vec4 pos = projectionMatrix * vec4(position, 1.0);
  vec3 final = pos.xyz / pos.w;
  if (final.z < -1.0) {
    return vec4(0.0, 0.0, 0.0, -1.0);
  }
  else {
    return vec4(final, -position.z);
  }
}
`,IXe=`uniform vec4 geometryScale;
attribute vec4 position4;

vec4 getRawPositionScale() {
  return geometryScale * position4;
}
`,NXe=`uniform vec4 repeatModulus;

vec4 getRepeatXYZW(vec4 xyzw) {
  return mod(xyzw + .5, repeatModulus) - .5;
}
`,UXe=`uniform vec4 resampleBias;

vec4 resamplePadding(vec4 xyzw) {
  return xyzw + resampleBias;
}`,FXe=`uniform vec4 resampleFactor;

vec4 resampleRelative(vec4 xyzw) {
  return xyzw * resampleFactor;
}`,BXe=`uniform float transitionEnter;
uniform float transitionExit;
uniform vec4  transitionScale;
uniform vec4  transitionBias;
uniform float transitionSkew;
uniform float transitionActive;

float getTransitionSDFMask(vec4 stpq) {
  if (transitionActive < 0.5) return 1.0;

  float enter   = transitionEnter;
  float exit    = transitionExit;
  float skew    = transitionSkew;
  vec4  scale   = transitionScale;
  vec4  bias    = transitionBias;

  float factor  = 1.0 + skew;
  float offset  = dot(vec4(1.0), stpq * scale + bias);

  vec2 d = vec2(enter, exit) * factor + vec2(-offset, offset - skew);
  if (exit  == 1.0) return d.x;
  if (enter == 1.0) return d.y;
  return min(d.x, d.y);
}`,VXe=`uniform vec4 reverseScale;
uniform vec4 reverseOffset;

vec4 getReverseOffset(vec4 xyzw) {
  return xyzw * reverseScale + reverseOffset;
}`,HXe=`vec3 getRootPosition(vec4 position, in vec4 stpqIn, out vec4 stpqOut) {
  stpqOut = stpqIn; // avoid inout confusion
  return position.xyz;
}`,qXe=`uniform sampler2D dataTexture;

vec4 sample2D(vec2 uv) {
  return texture2D(dataTexture, uv);
}
`,GXe=`uniform vec4 scaleAxis;
uniform vec4 scaleOffset;

vec4 sampleData(float x);

vec4 getScalePosition(vec4 xyzw) {
  return scaleAxis * sampleData(xyzw.x).x + scaleOffset;
}
`,WXe=`uniform vec4 remapSTPQScale;

vec4 screenMapSTPQ(vec4 xyzw, out vec4 stpq) {
  stpq = xyzw * remapSTPQScale;
  return xyzw;
}
`,jXe=`uniform vec2 remapUVScale;

vec4 screenMapXY(vec4 uvwo, vec4 stpq) {
  return vec4(floor(remapUVScale * uvwo.xy), 0.0, 0.0);
}
`,$Xe=`uniform vec2 remapUVScale;
uniform vec2 remapModulus;
uniform vec2 remapModulusInv;

vec4 screenMapXYZW(vec4 uvwo, vec4 stpq) {
  vec2 st = floor(remapUVScale * uvwo.xy);
  vec2 xy = st * remapModulusInv;
  vec2 ixy = floor(xy);
  vec2 fxy = xy - ixy;
  vec2 zw = fxy * remapModulus;
  return vec4(ixy.x, zw.y, ixy.y, zw.x);
}
`,XXe=`vec2 screenPassUV(vec4 uvwo, vec4 stpq) {
  return uvwo.xy;
}
`,YXe=`void setScreenPosition(vec4 position) {
  gl_Position = vec4(position.xy * 2.0 - 1.0, 0.5, 1.0);
}
`,KXe=`uniform vec4 sliceOffset;

vec4 getSliceOffset(vec4 xyzw) {
  return xyzw + sliceOffset;
}
`,ZXe=`uniform float sphericalBend;
uniform float sphericalFocus;
uniform float sphericalAspectX;
uniform float sphericalAspectY;
uniform float sphericalScaleY;

uniform mat4 viewMatrix;

vec4 getSphericalPosition(vec4 position, inout vec4 stpq) {
  if (sphericalBend > 0.0001) {

    vec3 xyz = position.xyz * vec3(sphericalBend, sphericalBend / sphericalAspectY * sphericalScaleY, sphericalAspectX);
    float radius = sphericalFocus + xyz.z;
    float cosine = cos(xyz.y) * radius;

    return viewMatrix * vec4(
      sin(xyz.x) * cosine,
      sin(xyz.y) * radius * sphericalAspectY,
      (cos(xyz.x) * cosine - sphericalFocus) / sphericalAspectX,
      1.0
    );
  }
  else {
    return viewMatrix * vec4(position.xyz, 1.0);
  }
}`,JXe=`uniform float splitStride;

vec2 getIndices(vec4 xyzw);
vec4 getRest(vec4 xyzw);
vec4 injectIndex(float v);

vec4 getSplitXYZW(vec4 xyzw) {
  vec2 uv = getIndices(xyzw);
  float offset = uv.x + uv.y * splitStride;
  return injectIndex(offset) + getRest(xyzw);
}
`,QXe=`uniform vec4 spreadOffset;
uniform mat4 spreadMatrix;

// External
vec4 getSample(vec4 xyzw);

vec4 getSpreadSample(vec4 xyzw) {
  vec4 sample = getSample(xyzw);
  return sample + spreadMatrix * (spreadOffset + xyzw);
}
`,eYe=`varying vec2 vSprite;

vec4 getSample(vec2 xy);

vec4 getSpriteColor() {
  return getSample(vSprite);
}`,tYe=`uniform vec2 spriteOffset;
uniform float spriteScale;
uniform float spriteDepth;
uniform float spriteSnap;

uniform vec2 renderOdd;
uniform float renderScale;
uniform float renderScaleInv;
uniform float pixelUnit;
uniform float focusDepth;

uniform vec4 geometryClip;
attribute vec4 position4;
attribute vec2 sprite;

varying float vPixelSize;

// External
vec3 getPosition(vec4 xyzw, float canonical);
vec4 getSprite(vec4 xyzw);

vec3 getSpritePosition() {
  // Clip points
  vec4 p = min(geometryClip, position4);
  float diff = length(position4 - p);
  if (diff > 0.0) {
    return vec3(0.0, 0.0, 1000.0);
  }

  // Make sprites
  vec3 center = getPosition(p, 1.0);
  vec4 atlas = getSprite(p);

  // Sprite goes from -1..1, width = 2.
  // -1..1 -> -0.5..0.5
  vec2 halfSprite = sprite * .5;
  vec2 halfFlipSprite = vec2(halfSprite.x, -halfSprite.y);

#ifdef POSITION_UV
  // Assign UVs
  vUV = atlas.xy + atlas.zw * (halfFlipSprite + .5);
#endif

  // Depth blending
  // TODO: orthographic camera
  // Workaround: set depth = 0
  float depth = focusDepth, z;
  z = -center.z;
  if (spriteDepth < 1.0) {
    depth = mix(z, focusDepth, spriteDepth);
  }
  
  // Match device/unit mapping 
  float size = pixelUnit * spriteScale;
  float depthSize = depth * size;

  // Calculate pixelSize for anti-aliasing
  float pixelSize = (spriteDepth > 0.0 ? depthSize / z : size);
  vPixelSize = pixelSize;

  // Position sprite
  vec2 atlasOdd = fract(atlas.zw / 2.0);
  vec2 offset = (spriteOffset + halfSprite * atlas.zw) * depthSize;
  if (spriteSnap > 0.5) {
    // Snap to pixel (w/ epsilon shift to avoid jitter)
    return vec3(((floor(center.xy / center.z * renderScale + 0.001) + renderOdd + atlasOdd) * center.z + offset) * renderScaleInv, center.z);
  }
  else {
    // Place directly
    return center + vec3(offset * renderScaleInv, 0.0);
  }

}
`,nYe=`uniform float stereoBend;
uniform vec4 basisScale;
uniform vec4 basisOffset;
uniform mat4 viewMatrix;
uniform vec2 view4D;

vec4 getStereographic4Position(vec4 position, inout vec4 stpq) {
  
  vec4 transformed;
  if (stereoBend > 0.0001) {

    float r = length(position);
    float w = r + position.w;
    vec4 project = vec4(position.xyz / w, r);
    
    transformed = mix(position, project, stereoBend);
  }
  else {
    transformed = position;
  }

  vec4 pos4 = transformed * basisScale - basisOffset;
  vec3 xyz = (viewMatrix * vec4(pos4.xyz, 1.0)).xyz;
  return vec4(xyz, pos4.w * view4D.y + view4D.x);
}
`,iYe=`uniform float stereoBend;

uniform mat4 viewMatrix;

vec4 getStereoPosition(vec4 position, inout vec4 stpq) {
  if (stereoBend > 0.0001) {

    vec3 pos = position.xyz;
    float r = length(pos);
    float z = r + pos.z;
    vec3 project = vec3(pos.xy / z, r);
    
    vec3 lerped = mix(pos, project, stereoBend);

    return viewMatrix * vec4(lerped, 1.0);
  }
  else {
    return viewMatrix * vec4(position.xyz, 1.0);
  }
}`,rYe=`varying vec2 vST;

vec4 getSample(vec2 st);

vec4 getSTSample() {
  return getSample(vST);
}
`,sYe=`varying vec2 vUV;

void setRawUV(vec4 xyzw) {
  vUV = xyzw.xy;
}
`,oYe=`uniform vec4 geometryClip;
attribute vec4 position4;
attribute vec3 strip;

// External
vec3 getPosition(vec4 xyzw, float canonical);

varying vec3 vNormal;
varying vec3 vLight;
varying vec3 vPosition;

void getStripGeometry(vec4 xyzw, vec3 strip, out vec3 pos, out vec3 normal) {
  vec3 a, b, c;

  a   = getPosition(xyzw, 1.0);
  b   = getPosition(vec4(xyzw.xyz, strip.x), 0.0);
  c   = getPosition(vec4(xyzw.xyz, strip.y), 0.0);

  normal = normalize(cross(c - a, b - a)) * strip.z;
  
  pos = a;
}

vec3 getStripPositionNormal() {
  vec3 center, normal;

  vec4 p = min(geometryClip, position4);

  getStripGeometry(p, strip, center, normal);
  vNormal   = normal;
  vLight    = normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz);
  vPosition = -center;

  return center;
}
`,aYe=`uniform vec3 styleColor;
uniform float styleOpacity;

vec4 getStyleColor() {
  return vec4(styleColor, styleOpacity);
}
`,lYe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideDepth(vec4 xyzw) {
  float x = xyzw.z;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  return sampleData(vec4(xyzw.xy, i + g, xyzw.w));
}
`,cYe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideDepthLerp(vec4 xyzw) {
  float x = xyzw.z;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  vec4 xyzw1 = vec4(xyzw.xy, i, xyzw.w);
  vec4 xyzw2 = vec4(xyzw.xy, i + 1.0, xyzw.w);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, g);
}
`,uYe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideHeight(vec4 xyzw) {
  float x = xyzw.y;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  return sampleData(vec4(xyzw.x, i + g, xyzw.zw));
}
`,hYe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideHeightLerp(vec4 xyzw) {
  float x = xyzw.y;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  vec4 xyzw1 = vec4(xyzw.x, i, xyzw.zw);
  vec4 xyzw2 = vec4(xyzw.x, i + 1.0, xyzw.zw);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, g);
}
`,dYe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideItems(vec4 xyzw) {
  float x = xyzw.w;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  return sampleData(vec4(xyzw.xyz, i + g));
}
`,fYe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideItemsLerp(vec4 xyzw) {
  float x = xyzw.w;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  vec4 xyzw1 = vec4(xyzw.xyz, i);
  vec4 xyzw2 = vec4(xyzw.xyz, i + 1.0);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, g);
}
`,pYe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideWidth(vec4 xyzw) {
  float x = xyzw.x;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  return sampleData(vec4(i + g, xyzw.yzw));
}
`,mYe=`uniform float subdivideBevel;

// External
vec4 sampleData(vec4 xyzw);

vec4 subdivideWidthLerp(vec4 xyzw) {
  float x = xyzw.x;
  float i = floor(x);
  float f = x - i;

  float minf = subdivideBevel * min(f, 1.0 - f);
  float g = (f > 0.5) ? 1.0 - minf : (f < 0.5) ? minf : 0.5;

  vec4 xyzw1 = vec4(i, xyzw.yzw);
  vec4 xyzw2 = vec4(i + 1.0, xyzw.yzw);
  
  vec4 a = sampleData(xyzw1);
  vec4 b = sampleData(xyzw2);

  return mix(a, b, g);
}
`,gYe=`attribute vec4 position4;

float getSurfaceHollowMask(vec4 xyzw) {
  vec4 df = abs(fract(position4) - .5);
  vec2 df2 = min(df.xy, df.zw);
  float df3 = min(df2.x, df2.y);
  return df3;
}`,vYe=`uniform vec4 geometryClip;
uniform vec4 geometryResolution;
uniform vec4 mapSize;

attribute vec4 position4;

// External
vec3 getPosition(vec4 xyzw, float canonical);

vec3 getSurfacePosition() {
  vec4 p = min(geometryClip, position4);

#ifdef SURFACE_CLOSED_X
  if (p.x == geometryClip.x) p.x = 0.0;
#endif
#ifdef SURFACE_CLOSED_Y
  if (p.y == geometryClip.y) p.y = 0.0;
#endif

  vec3 xyz = getPosition(p, 1.0);

  // Overwrite UVs
#ifdef POSITION_UV
#ifdef POSITION_UV_INT
  vUV = -.5 + (position4.xy * geometryResolution.xy) * mapSize.xy;
#else
  vUV = position4.xy * geometryResolution.xy;
#endif
#endif

  return xyz;
}
`,_Ye=`uniform vec4 mapSize;
uniform vec4 geometryResolution;
uniform vec4 geometryClip;
attribute vec4 position4;

// External
vec3 getPosition(vec4 xyzw, float canonical);
vec3 getNormal(vec4 xyzw);

varying vec3 vNormal;
varying vec3 vLight;
varying vec3 vPosition;

vec3 getSurfacePositionNormal() {

  vec4 p = min(geometryClip, position4);
#ifdef SURFACE_CLOSED_X
  if (p.x == geometryClip.x) p.x = 0.0;
#endif
#ifdef SURFACE_CLOSED_Y
  if (p.y == geometryClip.y) p.y = 0.0;
#endif

  vec3 center = getPosition(p, 1.0);
  vNormal     = normalMatrix * normalize(getNormal(p));
  vLight      = normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz); // hardcoded directional light
  vPosition   = -center;

#ifdef POSITION_UV
#ifdef POSITION_UV_INT
  vUV = -.5 + (position4.xy * geometryResolution.xy) * mapSize.xy;
#else
  vUV = position4.xy * geometryResolution.xy;
#endif
#endif

  return center;
}
`,bYe=`uniform vec4 mapSize;
uniform vec4 geometryResolution;
uniform vec4 geometryClip;
attribute vec4 position4;

// External
vec3 getPosition(vec4 xyzw, float canonical);

vec4 wrapAround(vec4 xyzw) {
#ifdef SURFACE_CLOSED_X
  float gx = geometryClip.x;
  if (xyzw.x < 0.0) xyzw.x += gx;
  if (xyzw.x >= gx) xyzw.x -= gx;
#endif
#ifdef SURFACE_CLOSED_Y
  float gy = geometryClip.y;
  if (xyzw.y < 0.0) xyzw.y += gy;
  if (xyzw.y >= gy) xyzw.y -= gy;
#endif
  return xyzw;
}

void getSurfaceGeometry(vec4 xyzw, float edgeX, float edgeY, out vec3 left, out vec3 center, out vec3 right, out vec3 up, out vec3 down) {
  vec4 deltaX = vec4(1.0, 0.0, 0.0, 0.0);
  vec4 deltaY = vec4(0.0, 1.0, 0.0, 0.0);

  center =                  getPosition(xyzw, 1.0);
  left   =                  center;
  down   =                  center;
  right  = (edgeX < 0.5)  ? getPosition(wrapAround(xyzw + deltaX), 0.0) : (2.0 * center - getPosition(xyzw - deltaX, 0.0));
  up     = (edgeY < 0.5)  ? getPosition(wrapAround(xyzw + deltaY), 0.0) : (2.0 * center - getPosition(xyzw - deltaY, 0.0));
}

vec3 getSurfaceNormal(vec3 left, vec3 center, vec3 right, vec3 up, vec3 down) {
  vec3 dx = right - left;
  vec3 dy = up    - down;
  vec3 n = cross(dy, dx);
  if (length(n) > 0.0) {
    return normalize(n);
  }
  return vec3(0.0, 1.0, 0.0);
}

varying vec3 vNormal;
varying vec3 vLight;
varying vec3 vPosition;

vec3 getSurfacePositionShaded() {
  vec3 left, center, right, up, down;

  vec4 p = min(geometryClip, position4);
  vec2 surface = vec2(0.0);
#ifdef SURFACE_CLOSED_X
  if (p.x == geometryClip.x) p.x = 0.0;
#else
  if (p.x == geometryClip.x) surface.x = 1.0;
  //if (p.x == 0.0) surface.x = -1.0;
#endif
#ifdef SURFACE_CLOSED_Y
  if (p.y == geometryClip.y) p.y = 0.0;
#else
  if (p.y == geometryClip.y) surface.y = 1.0;
  //if (p.y == 0.0) surface.y = -1.0;
#endif

  getSurfaceGeometry(p, surface.x, surface.y, left, center, right, up, down);
  vNormal   = getSurfaceNormal(left, center, right, up, down);
  vLight    = normalize((viewMatrix * vec4(1.0, 2.0, 2.0, 0.0)).xyz); // hardcoded directional light
  vPosition = -center;

#ifdef POSITION_UV
#ifdef POSITION_UV_INT
  vUV = -.5 + (position4.xy * geometryResolution.xy) * mapSize.xy;
#else
  vUV = position4.xy * geometryResolution.xy;
#endif
#endif

  return center;
}
`,yYe=`uniform float worldUnit;
uniform float focusDepth;
uniform float tickSize;
uniform float tickEpsilon;
uniform vec3  tickNormal;
uniform vec2  tickStrip;

vec4 getSample(vec4 xyzw);

vec3 transformPosition(vec4 position, in vec4 stpqIn, out vec4 stpqOut);

vec3 getTickPosition(vec4 xyzw, in vec4 stpqIn, out vec4 stpqOut) {
  float epsilon = tickEpsilon;

  // determine tick direction
  float leftX  = max(tickStrip.x, xyzw.y - 1.0);
  float rightX = min(tickStrip.y, xyzw.y + 1.0);
  
  vec4 left    = getSample(vec4(leftX,  xyzw.zw, 0.0));
  vec4 right   = getSample(vec4(rightX, xyzw.zw, 0.0));
  vec4 diff    = right - left;

  vec3 normal  = cross(normalize(diff.xyz + vec3(diff.w)), tickNormal);
  float bias   = max(0.0, 1.0 - length(normal) * 2.0);
       normal  = mix(normal, tickNormal.yzx, bias * bias);
  
  // transform (point) and (point + delta)
  vec4 center  = getSample(vec4(xyzw.yzw, 0.0));
  vec4 delta   = vec4(normal, 0.0) * epsilon;

  vec4 a = center;
  vec4 b = center + delta;

  vec4 _;
  vec3 c = transformPosition(a, stpqIn, stpqOut);
  vec3 d = transformPosition(b, stpqIn, _);
  
  // sample on either side to create line
  float line = xyzw.x - .5;
  vec3  mid  = c;
  vec3  side = normalize(d - c);

  return mid + side * line * tickSize * worldUnit * focusDepth;
}
`,xYe=`uniform mat4 transformMatrix;

vec4 transformPosition(vec4 position, inout vec4 stpq) {
  return transformMatrix * vec4(position.xyz, 1.0);
}
`,wYe=`uniform mat4 transformMatrix;
uniform vec4 transformOffset;

vec4 transformPosition(vec4 position, inout vec4 stpq) {
  return transformMatrix * position + transformOffset;
}
`,SYe=`// Implicit three.js uniform
// uniform mat4 viewMatrix;

vec4 getViewPosition(vec4 position, inout vec4 stpq) {
  return (viewMatrix * vec4(position.xyz, 1.0));
}
`;let Jo=class HE{static initClass(){this.index=0,this.IN=0,this.OUT=1}static id(e){return++HE.index}constructor(e,t=null){this.parent=t,this.id=HE.id(),this.nodes=[],e&&this.add(e)}inputs(){const e=[];for(const t of Array.from(this.nodes))for(const n of Array.from(t.inputs))n.input===null&&e.push(n);return e}outputs(){const e=[];for(const t of Array.from(this.nodes))for(const n of Array.from(t.outputs))n.output.length===0&&e.push(n);return e}getIn(e){return Array.from(this.inputs()).filter(t=>t.name===e)[0]}getOut(e){return Array.from(this.outputs()).filter(t=>t.name===e)[0]}add(e,t){if(e.length){for(const n of Array.from(e))this.add(n);return}if(e.graph&&!t)throw new Error("Adding node to two graphs at once");e.graph=this,this.nodes.push(e)}remove(e,t){if(e.length){for(const n of Array.from(e))this.remove(n);return}if(e.graph!==this)throw new Error("Removing node from wrong graph.");t||e.disconnect(),this.nodes.splice(this.nodes.indexOf(e),1),e.graph=null}adopt(e){if(e.length){for(const t of Array.from(e))this.adopt(t);return}e.graph.remove(e,!0),this.add(e,!0)}};Jo.initClass();class $a{static initClass(){this.index=0}static make(e,t){t==null&&(t={});const n=t;if(e.meta!=null)for(const r in e.meta){const s=e.meta[r];n[r]=s}return new $a(e.inout,e.name,e.hint,e.type,n)}static id(e){return`_io_${++$a.index}_${e}`}static hint(e){return e=e.replace(/^_io_[0-9]+_/,""),e=e.replace(/_i_o$/,""),e=e.replace(/(In|Out|Inout|InOut)$/,"")}constructor(e,t,n,r,s,o){this.inout=e,this.name=t,this.hint=n,this.type=r,s==null&&(s={}),this.meta=s,this.id=o,this.hint==null&&(this.hint=$a.hint(this.name)),this.node=null,this.input=null,this.output=[],this.id==null&&(this.id=$a.id(this.hint))}morph(e){return this.inout=e.inout,this.name=e.name,this.hint=e.hint,this.type=e.type,this.meta=e.meta}dupe(e){e==null&&(e=this.id);const t=$a.make(this);return t.name=e,t}connect(e){if(this.inout===Jo.IN&&e.inout===Jo.OUT)return e.connect(this);if(this.inout!==Jo.OUT||e.inout!==Jo.IN)throw new Error("Can only connect out to in.");if(e.input!==this)return e.disconnect(),e.input=this,this.output.push(e)}disconnect(e){if(this.input&&this.input.disconnect(this),this.output.length)if(e){const t=this.output.indexOf(e);if(t>=0)return this.output.splice(t,1),e.input=null}else{for(e of Array.from(this.output))e.input=null;return this.output=[]}}}$a.initClass();let S5=class qE{static initClass(){this.index=0}static id(e){return++qE.index}constructor(e,t){this.owner=e,this.graph=null,this.inputs=[],this.outputs=[],this.all=[],this.outlets=null,this.id=qE.id(),this.setOutlets(t)}getIn(e){return Array.from(this.inputs).filter(t=>t.name===e)[0]}getOut(e){return Array.from(this.outputs).filter(t=>t.name===e)[0]}get(e){return this.getIn(e)||this.getOut(e)}setOutlets(e){if(e!=null){let t;if(this.outlets==null){this.outlets={};for(t of Array.from(e))t instanceof $a||(t=$a.make(t)),this._add(t);return}const n=s=>[s.name,s.inout,s.type].join("-"),r={};for(t of Array.from(e))r[n(t)]=!0;for(let s in this.outlets)t=this.outlets[s],s=n(t),r[s]?r[s]=t:this._remove(t);for(t of Array.from(e)){const s=r[n(t)];s instanceof $a?this._morph(s,t):(t instanceof $a||(t=$a.make(t)),this._add(t))}}return this.outlets}connect(e,t,n){let r,s,o,a,l;const c={},u={},h=f=>l+"/"+f.hint;for(r of Array.from(e.inputs)){let f;!n&&r.input||({type:l}=r,o=h(r),u[o]||(u[o]=r),c[l]=f=c[l]||[],f.push(r))}let d=this.outputs;d=d.filter(f=>!(t&&f.output.length));for(a of Array.from(d.slice()))({type:l}=a),o=h(a),s=c[l],(r=u[o])&&(a.connect(r),delete u[o],s.splice(s.indexOf(r),1),d.splice(d.indexOf(a),1));if(!d.length)return this;for(a of Array.from(d.slice()))({type:l}=a),s=c[l],s&&s.length&&a.connect(s.shift());return this}disconnect(e){let t;for(t of Array.from(this.inputs))t.disconnect();for(t of Array.from(this.outputs))t.disconnect();return this}_key(e){return[e.name,e.inout].join("-")}_add(e){const t=this._key(e);if(e.node)throw new Error("Adding outlet to two nodes at once.");if(this.outlets[t])throw new Error(`Adding two identical outlets to same node. (${t})`);return e.node=this,e.inout===Jo.IN&&this.inputs.push(e),e.inout===Jo.OUT&&this.outputs.push(e),this.all.push(e),this.outlets[t]=e}_morph(e,t){let n=this._key(t);return delete this.outlets[n],e.morph(t),n=this._key(t),this.outlets[n]=t}_remove(e){const t=this._key(e);if(e.node!==this)throw new Error("Removing outlet from wrong node.");return e.disconnect(),e.node=null,delete this.outlets[t],e.inout===Jo.IN&&this.inputs.splice(this.inputs.indexOf(e),1),e.inout===Jo.OUT&&this.outputs.splice(this.outputs.indexOf(e),1),this.all.splice(this.all.indexOf(e),1),this}};S5.initClass();const{IN:Z1,OUT:M5}=Jo,MYe=Object.freeze(Object.defineProperty({__proto__:null,Graph:Jo,IN:Z1,Node:S5,OUT:M5,Outlet:$a},Symbol.toStringTag,{value:"Module"}));let L_=class c1{static initClass(){this.index=0}static namespace(){return`_sn_${++c1.index}_`}static load(e,t,n){const r=e.parse(t,n),[s,o]=Array.from(e.compile(r));return new c1(e,s,o,t,n)}constructor(e,t,n,r,s){this.language=e,this._signatures=t,this._compiler=n,this._name=r,this._original=s,this.namespace=null,this.code=null,this.main=null,this.entry=null,this.uniforms=null,this.externals=null,this.symbols=null,this.attributes=null,this.varyings=null,this.language||delete this.language,this._signatures||delete this._signatures,this._compiler||delete this._compiler,this._original||delete this._original,this._name||(this._name=this._signatures!=null?this._signatures.main.name:void 0)}clone(){return new c1(this.language,this._signatures,this._compiler,this._name,this._original)}bind(e,t,n,r){let s,o,a;t===""+t?[n,t,r]=Array.from([t,n??{},r??{}]):n!==""+n&&([r,n]=Array.from([n??{},void 0])),this.main=this._signatures.main,this.namespace=(o=n??this.namespace)!=null?o:c1.namespace(),this.entry=this.namespace+this.main.name,this.uniforms={},this.varyings={},this.attributes={},this.externals={},this.symbols=[];const l={},c={},u=function(E){return c[E]=!0,E},h=E=>this.namespace+E;if(e.globals)for(const E of Array.from(e.globals))u(E);const d=e.globalUniforms?u:h,f=e.globalVaryings?u:h,g=e.globalAttributes?u:h,v=h,y=E=>l[E.name]=!0,_=(E,k)=>this.uniforms[d(k??E.name)]=E;a=E=>this.varyings[f(E.name)]=E;const S=E=>this.attributes[g(E.name)]=E,w=E=>{const k=v(E.name);return this.externals[k]=E,this.symbols.push(k)},C=E=>({type:E.type,name:E.name,value:E.value});for(s of Array.from(this._signatures.uniform))y(s);for(s of Array.from(this._signatures.uniform))_(C(s));for(s of Array.from(this._signatures.varying))a(C(s));for(s of Array.from(this._signatures.external))w(s);for(s of Array.from(this._signatures.attribute))S(C(s));for(const E in t)s=t[E],l[E]&&_(s,E);if(this.body=this.code=this._compiler(this.namespace,c,r),r){const E=(()=>{const k=[];for(const O in r)a=r[O],k.push(`#define ${O} ${a}`);return k})().join(`
`);E.length&&(this._original=[E,"//----------------------------------------",this._original].join(`
`))}return null}};L_.initClass();var ku={};(function(i){i.make=function(e){return e==null&&(e=[]),e instanceof Array||(e=[+e!=null?+e:0]),e},i.nest=(e,t)=>e.concat(t),i.compare=function(e,t){const n=Math.min(e.length,t.length);for(let r=0,s=n,o=0<=s;o?r<s:r>s;o?r++:r--){const a=e[r],l=t[r];if(a>l)return-1;if(a<l)return 1}return e=e.length,t=t.length,e>t?-1:e<t?1:0},i.max=function(e,t){return i.compare(e,t)>0?t:e}})(ku);const qU=function(i,e,t,n){const r=i,s={},o=[],a={},l={},c={},u={},h=function(){let S,w;for(w in n){const R=n[w];v(R.node,R.module)}[S,t]=Array.from(d(t)),e!=null&&(S.entry=e);const C=r.build(S,t),k=(()=>{const R=[];for(w in u){const A=u[w];R.push(A)}return R})().sort((R,A)=>ku.compare(R.priority,A.priority)).map(R=>R.code);k.push(C.code);const O=r.lines(k);return{namespace:C.name,library:u,body:C.code,code:O,main:C,entry:C.name,symbols:o,externals:s,uniforms:a,varyings:l,attributes:c}},d=S=>{let w;S=(()=>{const k=[];for(const O in S)w=S[O],k.push(w);return k})(),S.sort((k,O)=>O.priority-k.priority);const C=(k,O,R)=>{g(k,O,R);const{main:A}=O,{entry:D}=O,I=j=>_(k,j),q=j=>y(k,j);return r.call(I,q,D,A.signature,E)},E=r.body();for(w of Array.from(S))C(w.node,w.module,w.priority);return[E,S]},f=function(S,w,C){const E=u[S];return E!=null?E.priority=ku.max(E.priority,C):u[S]={code:w,priority:C}},g=function(S,w,C){let E,k;C=ku.make(C);for(const O in w.library){const R=w.library[O];f(O,R.code,ku.nest(C,R.priority))}f(w.namespace,w.body,C);for(k in w.uniforms)E=w.uniforms[k],a[k]=E;for(k in w.varyings)E=w.varyings[k],l[k]=E;for(k in w.attributes)E=w.attributes[k],c[k]=E;return v(S,w)},v=(S,w)=>(()=>{const C=[];for(const E of Array.from(w.symbols)){const k=w.externals[E];if(y(S,k.name)){const O={};for(const R in k){const A=k[R];O[R]=A}O.name=_(S,k.name),s[E]=O,C.push(o.push(E))}else C.push(void 0)}return C})(),y=function(S,w){const C=S.get(w);if(C.inout===Z1)return C.input===null;if(C.inout===M5)return C.output.length===0},_=function(S,w){let C=S.get(w);return C?(C.input&&(C=C.input),{name:w}=C,C.id):null};return h()};class sf{static initClass(){this.index=0}static entry(){return`_pg_${++sf.index}_`}constructor(e,t,n){this.language=e,this.namespace=t,this.graph=n,this.calls={},this.requires={}}call(e,t,n){let r;const s=t.namespace;return(r=this.calls[s])?r.priority=Math.max(r.priority,n):this.calls[s]={node:e,module:t,priority:n},this}require(e,t){const n=t.namespace;return this.requires[n]={node:e,module:t}}assemble(){const e=qU(this.language,this.namespace!=null?this.namespace:sf.entry,this.calls,this.requires),t=new L_;for(const n in e)t[n]=e[n];return t.graph=this.graph,t}}sf.initClass();const GU=function(i,e,t,n){const r=i;let s=[];const o=[],a={},l={},c={},u={},h={},d=function(){const y=r.links(e),_=[];y.defs!=null&&_.push(y.defs),y.bodies!=null&&_.push(y.bodies);for(const E of Array.from(t))g(E.node,E.module,E.priority);s=(()=>{const E=[];for(const k in h){const O=h[k];E.push(O)}return E})().sort((E,k)=>ku.compare(E.priority,k.priority)).map(E=>E.code);let w=r.lines(s);w=r.defuse(w),_.length&&(w=[r.lines(_),w].join(`
`)),w=r.hoist(w),w=r.dedupe(w);const C=n;return{namespace:C.main.name,code:w,main:C.main,entry:C.main.name,externals:a,uniforms:l,attributes:c,varyings:u}},f=function(y,_,S){const w=h[y];return w!=null?w.priority=ku.max(w.priority,S):h[y]={code:_,priority:S}},g=function(y,_,S){let w,C;S=ku.make(S);for(const E in _.library){const k=_.library[E];f(E,k.code,ku.nest(S,k.priority))}f(_.namespace,_.body,S);for(C in _.uniforms)w=_.uniforms[C],l[C]=w;for(C in _.varyings)w=_.varyings[C],u[C]=w;for(C in _.attributes)w=_.attributes[C],c[C]=w;return(()=>{const E=[];for(C of Array.from(_.symbols)){const k=_.externals[C];v(y,k.name)?(a[C]=k,E.push(o.push(C))):E.push(void 0)}return E})()},v=function(y,_){const S=y.get(_);if(!S){const w=(y.owner.snippet!=null?y.owner.snippet._name:void 0)!=null?y.owner.snippet!=null?y.owner.snippet._name:void 0:y.owner.namespace;throw new Error(`Unable to link program. Unlinked callback \`${_}\` on \`${w}\``)}if(S.inout===Z1)return S.input===null;if(S.inout===M5)return S.output.length===0};return d()};class WU{constructor(e,t){this.language=e,this.graph=t,this.links=[],this.includes=[],this.modules={},this.visits={}}callback(e,t,n,r,s){return this.links.push({node:e,module:t,priority:n,name:r,external:s})}include(e,t,n){let r;return(r=this.modules[t.namespace])!=null?r.priority=Math.max(n,r.priority):(this.modules[t.namespace]=!0,this.includes.push({node:e,module:t,priority:n}))}visit(e){return this.visits[e]?!1:this.visits[e]=!0}link(e){const t=GU(this.language,this.links,this.includes,e),n=new L_;for(const r in t)n[r]=t[r];return n.graph=this.graph,n}}const{load:CYe}=L_,jU=CD({__proto__:null,Layout:WU,Program:sf,Snippet:L_,assemble:qU,link:GU,load:CYe},[ku]);class Ru{static previous(e){return e.input!=null?e.input.node.owner:void 0}constructor(e){e==null&&(e=!1),e||this.construct()}construct(){let e;return this.namespace==null&&(this.namespace=sf.entry()),this.node=new S5(this,(e=typeof this.makeOutlets=="function"?this.makeOutlets():void 0)!=null?e:{})}refresh(){let e;return this.node.setOutlets((e=typeof this.makeOutlets=="function"?this.makeOutlets():void 0)!=null?e:{})}clone(){return new Ru}compile(e,t){const n=new sf(e,t??sf.entry(),this.node.graph);return this.call(n,0),n.assemble()}link(e,t){const n=this.compile(e,t),r=new WU(e,this.node.graph);return this._include(n,r,0),this.export(r,0),r.link(n)}call(e,t){}callback(e,t,n,r,s){}export(e,t){}_info(e){let t=(this.node.owner.snippet!=null?this.node.owner.snippet._name:void 0)!=null?this.node.owner.snippet!=null?this.node.owner.snippet._name:void 0:this.node.owner.namespace;if(e!=null)return t+="."+e}_outlet(e,t){const n=$a.make(e,t);return n.meta.def=e,n}_call(e,t,n){return t.call(this.node,e,n)}_require(e,t){return t.require(this.node,e)}_inputs(e,t,n){return(()=>{const r=[];for(const s of Array.from(e.main.signature)){const o=this.node.get(s.name);r.push(Hk(Ru.previous(o),a=>a.call(t,n+1)))}return r})()}_callback(e,t,n,r,s,o){return t.callback(this.node,e,n,r,s,o)}_include(e,t,n){return t.include(this.node,e,n)}_link(e,t,n){return(()=>{const r=[];for(const s of Array.from(e.symbols)){const o=e.externals[s];let a=this.node.get(o.name);if(!a)throw new GE(`External not found on ${this._info(o.name)}`);if(a.meta.child!=null)continue;let l=a,c;for(;!c&&l;)[l,a]=Array.from([a.meta.parent,l]);if(c=Ru.previous(a),!c)throw new GE(`Missing connection on ${this._info(o.name)}`);c.callback(t,n+1,s,o,a.input),r.push(c!=null?c.export(t,n+1):void 0)}return r})()}_trace(e,t,n){return(()=>{const r=[];for(const s of Array.from(e.main.signature)){const o=this.node.get(s.name);r.push(Hk(Ru.previous(o),a=>a.export(t,n+1)))}return r})()}}const GE=function(i){const e=new Error(i);return e.name="OutletError",e};GE.prototype=new Error;function Hk(i,e){return typeof i<"u"&&i!==null?e(i):void 0}class R4 extends Ru{constructor(e){super(!0),this.snippet=e,this.namespace=e.namespace,this.construct()}clone(){return new R4(this.snippet)}makeOutlets(){const e=this.snippet.main.signature,{externals:t}=this.snippet,{symbols:n}=this.snippet,r=Array.from(e).map(o=>this._outlet(o,{callback:!1})),s=Array.from(n).map(o=>this._outlet(t[o],{callback:!0}));return r.concat(s)}call(e,t){return this._call(this.snippet,e,t),this._inputs(this.snippet,e,t)}export(e,t){if(e.visit(this.namespace,t))return this._link(this.snippet,e,t),this._trace(this.snippet,e,t)}}class J1 extends Ru{constructor(e){super(!0),this.graph=e,this.construct()}refresh(){return super.refresh(),delete this.subroutine}clone(){return new J1(this.graph)}makeOutlets(){let e;this.make();const t=[];let n=[],r=[];const s=(a,l)=>{if(a.meta.callback){if(a.inout===Jo.IN){const c=a.dupe();return c.meta.child==null&&(c.meta.child=a),a.meta.parent=c,t.push(c)}}else return l.push(a.type)};for(e of Array.from(this.graph.inputs()))s(e,n);for(e of Array.from(this.graph.outputs()))s(e,r);n=n.join(","),r=r.join(",");const o=`(${n})(${r})`;return t.push({name:"callback",type:o,inout:Jo.OUT,meta:{callback:!0,def:this.subroutine.main}}),t}make(){return this.subroutine=this.graph.compile(this.namespace)}export(e,t){if(e.visit(this.namespace,t))return this._link(this.subroutine,e,t),this.graph.export(e,t)}call(e,t){return this._require(this.subroutine,e,t)}callback(e,t,n,r,s){return this._include(this.subroutine,e,t),this._callback(this.subroutine,e,t,n,r,s)}}class Q1 extends Ru{constructor(e){super(!0),this.graph=e,this.construct()}refresh(){return super.refresh(),delete this.subroutine}clone(){return new Q1(this.graph)}makeOutlets(){this.make();const e=[],t={},n={};for(const r of["inputs","outputs"])for(const s of Array.from(this.graph[r]())){let o;["return","callback"].includes(s.hint)&&s.inout===Jo.OUT&&(o=s.hint),t[o]!=null&&(o=void 0);const a=s.dupe(o);a.meta.child==null&&(a.meta.child=s),s.meta.parent=a,o!=null&&(t[o]=!0),n[s.name]=a,e.push(a)}return e}make(){return this.subroutine=this.graph.compile(this.namespace)}call(e,t){return this._call(this.subroutine,e,t),this._inputs(this.subroutine,e,t)}export(e,t){if(e.visit(this.namespace,t))return this._link(this.subroutine,e,t),this._trace(this.subroutine,e,t),this.graph.export(e,t)}callback(e,t,n,r,s){return s=s.meta.child,s.node.owner.callback(e,t,n,r,s)}}class O4 extends Ru{constructor(e){super(!0),this.nodes=e,this.construct()}clone(){return new O4(this.nodes)}makeOutlets(){return[]}call(e,t){return(()=>{const n=[];for(const r of Array.from(this.nodes)){const s=r.owner;n.push(s.call(e,t))}return n})()}export(e,t){return(()=>{const n=[];for(const r of Array.from(this.nodes)){const s=r.owner;n.push(s.export(e,t))}return n})()}}const uw=function(i){const e=[],t=[];for(const n of Array.from(i.nodes)){let r;const s={id:n.id,name:null,type:null,depth:null,graph:null,inputs:[],outputs:[]};e.push(s);const{inputs:o}=s,{outputs:a}=s,l=n.owner;l instanceof R4?(s.name=l.snippet._name,s.type="call",s.code=l.snippet._original):l instanceof J1?(s.name="Callback",s.type="callback",s.graph=uw(l.graph)):l instanceof Q1?(s.name="Isolate",s.type="isolate",s.graph=uw(l.graph)):l instanceof O4?(s.name="Join",s.type="join"):l!=null&&(s.name==null&&(s.name=l.name!=null?l.name:l.type),s.type==null&&(s.type=l.type),s.code==null&&(s.code=l.code),l.graph!=null&&(s.graph=uw(l.graph)));const c=function(u){return u=u.replace(")(",")("),u=u.replace("()","")};for(r of Array.from(n.inputs))o.push({id:r.id,name:r.name,type:c(r.type),open:r.input==null});for(r of Array.from(n.outputs)){a.push({id:r.id,name:r.name,type:c(r.type),open:!r.output.length});for(const u of Array.from(r.output))t.push({from:n.id,out:r.id,to:u.node.id,in:u.id,type:c(r.type)})}}return{nodes:e,links:t}},EYe=3432918353,TYe=461845907,AYe=3864292196,PYe=2246822507,kYe=3266489909;let Mm=function(i,e){const t=i>>>16&65535,n=i&65535,r=e>>>16&65535,s=e&65535;return n*s+(t*s+n*r<<16>>>0)|0};Math.imul!=null&&Math.imul(4294967295,5)===-5&&({imul:Mm}=Math);const C5=function(i){let e;const t=i.length;let n=Math.floor(t/2),r=e=0;const s=()=>i.charCodeAt(r++),o=function(a,l){let c=a|l<<16;return c^=c<<9,c=Mm(c,EYe),c=c<<15|c>>>17,c=Mm(c,TYe),e^=c,e=e<<13|e>>>19,e=Mm(e,5),e=e+AYe|0};for(;n--;)o(s(),s());return t&1&&o(s(),0),e^=t,e^=e>>>16,e=Mm(e,PYe),e^=e>>>13,e=Mm(e,kYe),e^=e>>>16},RYe=i=>(""+i).replace(/^\s+|\s+$/g,""),OYe=(i,e,t,n)=>"rgba("+[i,e,t,n].join(", ")+")",qk=function(i,e){e==null&&(e=1);const t=C5(i)^1193046;let n=t&255,r=t>>>8&255,s=t>>>16&255;const o=Math.max(n,r,s),a=140/o,l=Math.round(o/3);return n=Math.min(255,Math.round(a*Math.max(n,l))),r=Math.min(255,Math.round(a*Math.max(r,l))),s=Math.min(255,Math.round(a*Math.max(s,l))),OYe(n,r,s,e)},ax=function(i){return i=i??"",i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},LYe=function(i){const e=[],t=$U(i,e);return t.update=()=>NYe(t,e),DYe(t),t},DYe=function(i){const e=i.querySelectorAll(".shadergraph-code");return Array.from(e).map(t=>function(){const n=t;return n.parentNode.classList.add("shadergraph-has-code"),n.parentNode.addEventListener("click",r=>n.style.display={block:"none",none:"block"}[n.style.display||"none"])}())},zYe=function(i){let e,t;const n={},r={};for(t of Array.from(i.nodes))n[t.id]=t;for(e of Array.from(i.links))r[e.from]==null&&(r[e.from]=[]),r[e.from].push(e);const s=function(o,a){let l;if(a==null&&(a=0),o.depth=Math.max(o.depth!=null?o.depth:0,a),l=r[o.id])for(e of Array.from(l))s(n[e.to],a+1);return null};for(t of Array.from(i.nodes))t.depth==null&&s(t);return null},$U=function(i,e){let t;zYe(i);const n=document.createElement("div");n.classList.add("shadergraph-graph");const r=[],s={};for(const o of Array.from(i.nodes)){let a;const l=document.createElement("div");l.classList.add("shadergraph-node"),l.classList.add(`shadergraph-node-${o.type}`),l.innerHTML=`<div class="shadergraph-header">${ax(o.name)}</div>`;const c=function(u,h){const d=qk(u.type),f=document.createElement("div");return f.classList.add("shadergraph-outlet"),f.classList.add(`shadergraph-outlet-${h}`),f.innerHTML=`<div class="shadergraph-point" style="background: ${d}"></div>
<div class="shadergraph-type" style="color: ${d}">${ax(u.type)}</div>
<div class="shadergraph-name">${ax(u.name)}</div>`,l.appendChild(f),s[u.id]=f.querySelector(".shadergraph-point")};for(a of Array.from(o.inputs))c(a,"in");for(a of Array.from(o.outputs))c(a,"out");if(o.graph!=null)l.appendChild($U(o.graph,e));else{const u=document.createElement("div");u.classList.add("shadergraph-clear"),l.appendChild(u)}if(o.code!=null){const u=document.createElement("div");u.classList.add("shadergraph-code"),u.innerHTML=ax(RYe(o.code)),l.appendChild(u)}t=r[o.depth],t==null&&(t=document.createElement("div"),t.classList.add("shadergraph-column"),r[o.depth]=t),t.appendChild(l)}for(t of Array.from(r))t!=null&&n.appendChild(t);for(const o of Array.from(i.links)){const a=qk(o.type);e.push({color:a,out:s[o.out],in:s[o.in]})}return n},Gk=i=>i*i,IYe=function(i,e,t,n){let r;const s=t-i,o=n-e,a=Math.sqrt(Gk(s)+Gk(o));if(Math.abs(o)>Math.abs(s)){const c=(i+t)/2,u=(e+n)/2,h=o>0?.3:-.3;return r=Math.min(Math.abs(s)/2,20+a/8),["M",i,e,"C",i+r,e+",",c,u-a*h,c,u,"C",c,u+a*h,t-r,n+",",t,n].join(" ")}else return r=Math.min(Math.abs(s)/2.5,20+a/4),["M",i,e,"C",i+r,e+",",t-r,n+",",t,n].join(" ")},Wk=function(i){return i==null&&(i="svg"),document.createElementNS("http://www.w3.org/2000/svg",i)},NYe=function(i,e){let t;if(i.parentNode==null)return;const n=i.getBoundingClientRect();for(t of Array.from(e)){const o=t.out.getBoundingClientRect(),a=t.in.getBoundingClientRect();t.coords={x1:(o.left+o.right)/2-n.left,y1:(o.top+o.bottom)/2-n.top,x2:(a.left+a.right)/2-n.left,y2:(a.top+a.bottom)/2-n.top}}let r=i.querySelector("svg");r!=null&&i.removeChild(r);let s=i;for(;s.parentNode&&s.offsetHeight===0;)s=s.parentNode;r=Wk(),r.setAttribute("width",s.offsetWidth),r.setAttribute("height",s.offsetHeight);for(t of Array.from(e)){const o=t.coords,a=Wk("path");a.setAttribute("d",IYe(o.x1,o.y1,o.x2,o.y2)),a.setAttribute("stroke",t.color),a.setAttribute("stroke-width",3),a.setAttribute("fill","transparent"),r.appendChild(a)}return i.appendChild(r)},UYe=function(i){const e=document.createElement("div");e.setAttribute("class","shadergraph-overlay");const t=document.createElement("div");t.setAttribute("class","shadergraph-close"),t.innerHTML="&times;";const n=document.createElement("div");n.setAttribute("class","shadergraph-view");const r=document.createElement("div");return r.setAttribute("class","shadergraph-inside"),r.appendChild(i),n.appendChild(r),e.appendChild(n),e.appendChild(t),t.addEventListener("click",()=>e.parentNode.removeChild(e)),e},jk=function(i){if(i instanceof Node)return i;const e=document.createElement("span");return e.innerText=i??"",e},FYe=function(i){if(i.length!==1){let e;const t=document.createElement("div");for(e of Array.from(i))t.appendChild(jk(e));return t.update=()=>(()=>{const n=[];for(e of Array.from(i))n.push(typeof e.update=="function"?e.update():void 0);return n})(),t}else return jk(i[0])},BYe=Object.freeze(Object.defineProperty({__proto__:null,merge:FYe,overlay:UYe,process:LYe},Symbol.toStringTag,{value:"Module"})),E5=uw,L4=BYe,VYe=function(i){if(!i)return;if(!i.nodes)return i;const e=E5(i);return L4.process(e)},hw=function(i){return i==null?i:i instanceof Array?i.map(hw):i.vertex!=null&&i.fragment!=null?[hw(i.vertex,hw(i.fragment))]:i._graph!=null?i._graph:i.graph!=null?i.graph:i},XU=function(i){let e=[];for(const t of Array.from(i))t instanceof Array?e=e.concat(XU(t)):t!=null&&e.push(t);return e},YU=function(){const i=XU(hw([].slice.call(arguments)));return L4.merge(Array.from(i).filter(e=>e).map(e=>VYe(e)))},Wd=function(){const i=YU.apply(null,arguments),e=L4.overlay(i);for(const t of Array.from(document.querySelectorAll(".shadergraph-overlay")))t.remove();return document.body.appendChild(e),i.update(),e},KU=Object.freeze(Object.defineProperty({__proto__:null,inspect:Wd,markup:L4,serialize:E5,visualize:YU},Symbol.toStringTag,{value:"Module"}));let ZU=class WE{constructor(e,t,n){this.language=e,this.fetch=t,this.config=n,this.graph()}pipe(e,t,n,r){return e instanceof WE?this._concat(e):e!=null&&this._call(e,t,n,r),this}call(e,t,n,r){return this.pipe(e,t,n,r)}require(e,t,n,r){return e instanceof WE?this._import(e):e!=null&&(this.callback(),this._call(e,t,n,r),this.end()),this}import(e,t,n,r){return this.require(e,t,n,r)}split(){return this._group("_combine",!0),this}fan(){return this._group("_combine",!1),this}isolate(){return this._group("_isolate"),this}callback(){return this._group("_callback"),this}next(){return this._next(),this}pass(){const e=this._stack[2].end;return this.end(),this._state.end=this._state.end.concat(e),this}end(){const[e,t]=Array.from(this._exit()),{op:n}=e;return this[n]&&this[n](e,t),this}join(){return this.end()}graph(){for(;(this._stack!=null?this._stack.length:void 0)>1;)this.end();this._graph&&this._tail(this._state,this._graph);const e=this._graph;return this._graph=new Jo,this._state=new lx,this._stack=[this._state],e}compile(e){return e==null&&(e="main"),this.graph().compile(e)}link(e){return e==null&&(e="main"),this.graph().link(e)}serialize(){return E5(this._graph)}empty(){return this._graph.nodes.length===0}_concat(e){let t;if(e._state.nodes.length===0)return this;this._tail(e._state,e._graph);try{t=new Q1(e._graph)}catch(n){throw this.config.autoInspect&&Wd(n,this._graph,e),n}return this._auto(t),this}_import(e){let t;if(e._state.nodes.length===0)throw"Can't import empty callback";this._tail(e._state,e._graph);try{t=new J1(e._graph)}catch(n){throw this.config.autoInspect&&Wd(n,this._graph,e),n}return this._auto(t),this}_combine(e,t){for(const n of Array.from(e.start))for(const r of Array.from(t.end))r.connect(n,e.multi);return t.end=e.end,t.nodes=t.nodes.concat(e.nodes)}_isolate(e,t){if(e.nodes.length){let n;const r=this._subgraph(e);this._tail(e,r);try{n=new Q1(r)}catch(s){throw this.config.autoInspect&&Wd(s,this._graph,r),s}return this._auto(n)}}_callback(e,t){if(e.nodes.length){let n;const r=this._subgraph(e);this._tail(e,r);try{n=new J1(r)}catch(s){throw this.config.autoInspect&&Wd(s,this._graph,r),s}return this._auto(n)}}_call(e,t,n,r){const s=this.fetch(e);s.bind(this.config,t,n,r);const o=new R4(s);return this._auto(o)}_subgraph(e){const t=new Jo(null,this._graph);return t.adopt(e.nodes),t}_tail(e,t){let n=e.end.concat(e.tail);if(n=n.filter((r,s)=>n.indexOf(r)===s),n.length>1&&(n=new O4(n),n=[n.node],this._graph.add(n)),t.tail=n[0],e.end=n,e.tail=[],!t.tail)throw new Error("Cannot finalize empty graph");return t.compile=r=>{r==null&&(r="main");try{return t.tail.owner.compile(this.language,r)}catch(s){throw this.config.autoInspect&&t.inspect(s),s}},t.link=r=>{r==null&&(r="main");try{return t.tail.owner.link(this.language,r)}catch(s){throw this.config.autoInspect&&t.inspect(s),s}},t.export=(r,s)=>t.tail.owner.export(r,s),t.inspect=(r=null)=>Wd(r,t)}_group(e,t){return this._push(e,t),this._push(),this}_next(){const e=this._pop();return this._state.start=this._state.start.concat(e.start),this._state.end=this._state.end.concat(e.end),this._state.nodes=this._state.nodes.concat(e.nodes),this._state.tail=this._state.tail.concat(e.tail),this._push()}_exit(){return this._next(),this._pop(),[this._pop(),this._state]}_push(e,t){return this._stack.unshift(new lx(e,t)),this._state=this._stack[0]}_pop(){let e;return this._state=this._stack[1],this._state==null&&(this._state=new lx),(e=this._stack.shift())!=null?e:new lx}_auto(e){return e.node.inputs.length?this._append(e):this._insert(e)}_append(e){let t;const{node:n}=e;this._graph.add(n);for(t of Array.from(this._state.end))t.connect(n);this._state.start.length||(this._state.start=[n]),this._state.end=[n],this._state.nodes.push(n),n.outputs.length||this._state.tail.push(n)}_prepend(e){let t;const{node:n}=e;this._graph.add(n);for(t of Array.from(this._state.start))n.connect(t);this._state.end.length||(this._state.end=[n]),this._state.start=[n],this._state.nodes.push(n),n.outputs.length||this._state.tail.push(n)}_insert(e){const{node:t}=e;if(this._graph.add(t),this._state.start.push(t),this._state.end.push(t),this._state.nodes.push(t),!t.outputs.length)return this._state.tail.push(t)}};class lx{constructor(e=null,t,n,r,s,o){this.op=e,t==null&&(t=!1),this.multi=t,n==null&&(n=[]),this.start=n,r==null&&(r=[]),this.end=r,s==null&&(s=[]),this.nodes=s,o==null&&(o=[]),this.tail=o}}class JU{constructor(e,t){this.vertex=e,this.fragment=t}build(e){return this.link(e)}link(e){e==null&&(e={});const t={},n={},r={},s=this.vertex.link("main"),o=this.fragment.link("main");for(const a of[s,o]){for(const l in a.uniforms){const c=a.uniforms[l];t[l]=c}for(const l in a.varyings){const c=a.varyings[l];n[l]=c}for(const l in a.attributes){const c=a.attributes[l];r[l]=c}}return e.vertexShader=s.code,e.vertexGraph=s.graph,e.fragmentShader=o.code,e.fragmentGraph=o.graph,e.attributes=r,e.uniforms=t,e.varyings=n,e.inspect=()=>Wd("Vertex Shader",s,"Fragment Shader",o.graph),e}inspect(){return Wd("Vertex Shader",this.vertex,"Fragment Shader",this.fragment.graph)}}const HYe=function(i,e,t){let n=null,r={};e!=null&&(typeof e=="function"?n=a=>t(i,a,e(a)):typeof e=="object"&&(n=function(a){if(e[a]==null)throw new Error(`Unknown snippet \`${a}\``);return t(i,a,e[a])}));const s=a=>t(i,"",a);if(n==null)return s;const o=function(a){return a.match(/[{;]/)?s(a):(r[a]=!0,n(a))};return o.used=function(a){return a==null&&(a=r),r=a},o},QU=function(i){i==null&&(i=100);const e={};let t=null,n=null,r=0;const s=function(a){if(a.prev=null,a.next=t,t!=null&&(t.prev=a),t=a,n==null)return n=a},o=function(a){const{prev:l}=a,{next:c}=a;if(l!=null&&(l.next=c),c!=null&&(c.prev=l),t===a&&(t=c),n===a)return n=l};return function(a){let l,c;return(c=e[a])&&c!==t?(o(c),s(c)):(r===i?(l=n.key,o(n),delete e[l]):r++,c={next:t,prev:null,key:a},s(c),e[a]=c),l}},qYe=function(i){const e={},t=QU(100);return function(n){const r=n.length>32?"##"+C5(n).toString(16):n,s=t(r);return s!=null&&delete e[s],e[r]==null&&(e[r]=i(n)),e[r].clone()}},eF=Object.freeze(Object.defineProperty({__proto__:null,Factory:ZU,Material:JU,cache:qYe,hash:C5,library:HYe,queue:QU},Symbol.toStringTag,{value:"Module"})),GYe=function(i){const{code:e,signatures:t}=i,n=WYe(t),r=jYe(e,n);return[t,r]},WYe=function(i){const e={},t=n=>e[n.name]=!0;t(i.main);for(const n of["external","internal","varying","uniform","attribute"])for(const r of i[n])t(r);return e},jYe=function(i,e){let t;const n=new RegExp("\\b("+(()=>{const r=[];for(t in e)r.push(t);return r})().join("|")+")\\b","g");return i=i.replace(/\/\/[^\n]*/g,""),i=i.replace(/\/\*([^*]|\*[^/])*\*\//g,""),function(r,s,o){let a;r==null&&(r=""),s==null&&(s={}),o==null&&(o={});const l={};for(a in e)l[a]=s[a]!=null?a:r+a;const c=i.replace(n,h=>l[h]),u=(()=>{const h=[];for(a in o){const d=o[a];h.push(`#define ${a} ${d}`)}return h})();return u.length&&u.push(""),u.join(`
`)+c}};var tF=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"],$Ye=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"],nF=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],XYe=tF,YYe=XYe.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),jE=nF;jE=jE.slice().filter(function(i){return!/^(gl\_|texture)/.test(i)});var KYe=jE.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),ZYe=aKe,JYe=tF,$k=$Ye,QYe=nF,eKe=YYe,tKe=KYe,Vc=999,Xk=9999,CM=0,EM=1,Yk=2,Kk=3,Zk=4,Nv=5,nKe=6,iKe=7,rKe=8,Jk=9,sKe=10,Qk=11,oKe=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function aKe(i){var e=0,t=0,n=Vc,r,s,o=[],a=[],l=1,c=0,u=0,h=!1,d=!1,f="",g;i=i||{};var v=QYe,y=JYe;i.version==="300 es"&&(v=tKe,y=eKe);for(var _={},S={},e=0;e<v.length;e++)_[v[e]]=!0;for(var e=0;e<y.length;e++)S[y[e]]=!0;return function(ee){return a=[],ee!==null?C(ee):E()};function w(ee){ee.length&&a.push({type:oKe[n],data:ee,position:u,line:l,column:c})}function C(ee){e=0,ee.toString&&(ee=ee.toString()),f+=ee.replace(/\r\n/g,`
`),g=f.length;for(var J;r=f[e],e<g;){switch(J=e,n){case CM:e=D();break;case EM:e=A();break;case Yk:e=R();break;case Kk:e=I();break;case Zk:e=Y();break;case Qk:e=j();break;case Nv:e=F();break;case Xk:e=re();break;case Jk:e=O();break;case Vc:e=k();break}if(J!==e)switch(f[J]){case`
`:c=0,++l;break;default:++c;break}}return t+=e,f=f.slice(e),a}function E(ee){return o.length&&w(o.join("")),n=sKe,w("(eof)"),a}function k(){return o=o.length?[]:o,s==="/"&&r==="*"?(u=t+e-1,n=CM,s=r,e+1):s==="/"&&r==="/"?(u=t+e-1,n=EM,s=r,e+1):r==="#"?(n=Yk,u=t+e,e):/\s/.test(r)?(n=Jk,u=t+e,e):(h=/\d/.test(r),d=/[^\w_]/.test(r),u=t+e,n=h?Zk:d?Kk:Xk,e)}function O(){return/[^\s]/g.test(r)?(w(o.join("")),n=Vc,e):(o.push(r),s=r,e+1)}function R(){return(r==="\r"||r===`
`)&&s!=="\\"?(w(o.join("")),n=Vc,e):(o.push(r),s=r,e+1)}function A(){return R()}function D(){return r==="/"&&s==="*"?(o.push(r),w(o.join("")),n=Vc,e+1):(o.push(r),s=r,e+1)}function I(){if(s==="."&&/\d/.test(r))return n=Nv,e;if(s==="/"&&r==="*")return n=CM,e;if(s==="/"&&r==="/")return n=EM,e;if(r==="."&&o.length){for(;q(o););return n=Nv,e}if(r===";"||r===")"||r==="("){if(o.length)for(;q(o););return w(r),n=Vc,e+1}var ee=o.length===2&&r!=="=";if(/[\w_\d\s]/.test(r)||ee){for(;q(o););return n=Vc,e}return o.push(r),s=r,e+1}function q(ee){var J=0,Ee,le;do{if(Ee=$k.indexOf(ee.slice(0,ee.length+J).join("")),le=$k[Ee],Ee===-1){if(J--+ee.length>0)continue;le=ee.slice(0,1).join("")}return w(le),u+=le.length,o=o.slice(le.length),o.length}while(1)}function j(){return/[^a-fA-F0-9]/.test(r)?(w(o.join("")),n=Vc,e):(o.push(r),s=r,e+1)}function Y(){return r==="."||/[eE]/.test(r)?(o.push(r),n=Nv,s=r,e+1):r==="x"&&o.length===1&&o[0]==="0"?(n=Qk,o.push(r),s=r,e+1):/[^\d]/.test(r)?(w(o.join("")),n=Vc,e):(o.push(r),s=r,e+1)}function F(){return r==="f"&&(o.push(r),s=r,e+=1),/[eE]/.test(r)||(r==="-"||r==="+")&&/[eE]/.test(s)?(o.push(r),s=r,e+1):/[^\d]/.test(r)?(w(o.join("")),n=Vc,e):(o.push(r),s=r,e+1)}function re(){if(/[^\d\w_]/.test(r)){var ee=o.join("");return S[ee]?n=rKe:_[ee]?n=iKe:n=nKe,w(o.join("")),n=Vc,e}return o.push(r),s=r,e+1}}var lKe=ZYe,cKe=uKe;function uKe(i,e){var t=lKe(e),n=[];return n=n.concat(t(i)),n=n.concat(t(null)),n}const hKe=s0(cKe);let $c,fc,x1,Nw;const dKe={nud:function(){return this.children&&this.children.length?this:eR("unexpected")()},led:eR("missing operator")},Pp={};function D_(){return this}Ca("(ident)").nud=D_;Ca("(keyword)").nud=D_;Ca("(builtin)").nud=D_;Ca("(literal)").nud=D_;Ca("(end)");Ca(":");Ca(";");Ca(",");Ca(")");Ca("]");Ca("}");T5("&&",30);T5("||",30);Js("|",43);Js("^",44);Js("&",45);Js("==",46);Js("!=",46);Js("<",47);Js("<=",47);Js(">",47);Js(">=",47);Js(">>",48);Js("<<",48);Js("+",50);Js("-",50);Js("*",60);Js("/",60);Js("%",60);Js("?",20,function(i){return this.children=[i,Gu(0),(Zh(":"),Gu(0))],this.type="ternary",this});Js(".",80,function(i){return fc.type="literal",$c.fake(fc),this.children=[i,fc],Zh(),this});Js("[",80,function(i){return this.children=[i,Gu(0)],this.type="binary",Zh("]"),this});Js("(",80,function(i){if(this.children=[i],this.type="call",fc.data!==")")for(;this.children.push(Gu(0)),fc.data===",";)Zh(",");return Zh(")"),this});Rf("-");Rf("+");Rf("!");Rf("~");Rf("defined");Rf("(",function(){return this.type="group",this.children=[Gu(0)],Zh(")"),this});Rf("++");Rf("--");iF("++");iF("--");su("=");su("+=");su("-=");su("*=");su("/=");su("%=");su("&=");su("|=");su("^=");su(">>=");su("<<=");var fKe=function(i,e){$c=i,x1=e,Nw=0;let t;if(!x1.length)return;if(Zh(),t=Gu(0),t.parent=$c[0],n(t),Nw<x1.length)throw new Error("did not use all tokens");t.parent.children=[t];function n(r){$c.unshift(r,!1);for(let s=0,o=r.children.length;s<o;++s)n(r.children[s]);$c.shift()}};function Ca(i,e){let t=Pp[i];return e=e||0,t?e>t.lbp&&(t.lbp=e):(t=Object.create(dKe),t.id=i,t.lbp=e,Pp[i]=t),t}function Gu(i){let e,t=fc;for(Zh(),e=t.nud();i<fc.lbp;)t=fc,Zh(),e=t.led(e);return e}function Js(i,e,t){const n=Ca(i,e);n.led=t||function(r){return this.children=[r,Gu(e)],this.type="binary",this}}function T5(i,e,t){const n=Ca(i,e);return n.led=t||function(r){return this.children=[r,Gu(e-1)],this.type="binary",this},n}function Rf(i,e){const t=Ca(i);return t.nud=e||function(){return this.children=[Gu(70)],this.type="unary",this},t}function iF(i){const e=Ca(i,150);e.led=function(t){return this.children=[t],this.type="suffix",this}}function su(i){return T5(i,10,function(e){return this.children=[e,Gu(9)],this.assignment=!0,this.type="assign",this})}function Zh(i){let e,t,n,r;if(i&&fc.data!==i)return $c.unexpected("expected `"+i+"`, got `"+fc.data+"`");if(Nw>=x1.length){fc=Pp["(end)"];return}if(e=x1[Nw++],t=e.data,n=e.type,n==="ident")r=$c.scope.find(t)||$c.create_node(),n=r.type;else if(n==="builtin")r=Pp["(builtin)"];else if(n==="keyword")r=Pp["(keyword)"];else if(n==="operator"){if(r=Pp[t],!r)return $c.unexpected("unknown operator `"+t+"`")}else if(n==="float"||n==="integer")n="literal",r=Pp["(literal)"];else return $c.unexpected("unexpected token.");return r&&(r.nud||(r.nud=D_),r.children||(r.children=[])),r=Object.create(r),r.token=e,r.type=n,r.data||(r.data=t),fc=r}function eR(i){return function(){return $c.unexpected(i)}}var pKe=Uw;function Uw(i){if(this.constructor!==Uw)return new Uw(i);this.state=i,this.scopes=[],this.current=null}const mKe=Uw,D4=mKe.prototype;D4.enter=function(i){this.scopes.push(this.current=this.state[0].scope=i||{})};D4.exit=function(){this.scopes.pop(),this.current=this.scopes[this.scopes.length-1]};D4.define=function(i){this.current[i]=this.state[0]};D4.find=function(i,e){for(let t=this.scopes.length-1;t>-1;--t)if(this.scopes[t].hasOwnProperty(i))return this.scopes[t][i];return null};var gKe=RKe;const vKe=fKe,_Ke=pKe,ui=new Object;let Dr=0,Uv=Dr++,tR=Dr++,TM=Dr++,nR=Dr++,AM=Dr++,iR=Dr++,rR=Dr++,sR=Dr++,oR=Dr++,aR=Dr++,lR=Dr++,cR=Dr++,uR=Dr++,hR=Dr++,bKe=Dr++,PM=Dr++,yKe=Dr++,dR=Dr++,xKe=Dr++,wKe=Dr++,SKe=Dr++,fR=Dr++,cx=Dr++,pR=Dr++;const A5=1,$E=2,MKe=4,P5=8,rF=16,sF=32,oF=64,zm=255,CKe=zm&~(A5|$E|sF|P5|MKe),EKe=zm&~(A5|P5|rF|oF),TKe=!1,AKe=!1,PKe={"block-comment":hR,"line-comment":hR,preprocessor:bKe},kKe=Dr=["ident","stmt","stmtlist","struct","function","functionargs","decl","decllist","forloop","whileloop","if","expr","precision","comment","preprocessor","keyword","keyword_or_ident","return","break","continue","discard","do-while","placeholder","quantifier"];function RKe(){const i=se(TM),e=se(tR),t=se(sR),n=se(uR),r=se(Uv),s=se(AM),o=se(iR),a=se(oR),l=se(lR),c=se(aR),u=se(dR),h=se(fR),d=se(pR);let f,g,v,y,_,S,w,C,E,k,O=arguments.length?[].slice.call(arguments):[],R=!1,A=[],D=[],I=[],q=[],j=!1,Y,F,re;return A.shift=Je,A.unshift=be,A.fake=ie,A.unexpected=nt,A.scope=new _Ke(A),A.create_node=function(){const we=va(Uv,F);return we.parent=ee.program,we},Zt(),re=i(),re.expecting="(eof)",re.mode=TM,re.token={type:"(program)",data:"(program)"},Y=re,ee.program=Y,ee.scope=function(we){return arguments.length===1&&(A.scope=we),A.scope},A.unshift(re),ee;function ee(we){return we===null?(Ee(),Y):(D=[],J(we),D)}function J(we){if(we.type==="whitespace"||we.type==="line-comment"||we.type==="block-comment"){q.push(we);return}for(I.push(we),F=F||I[0],F&&q.length&&(F.preceding=F.preceding||[],F.preceding=F.preceding.concat(q),q=[]);le();)switch(A[0].mode){case tR:Be();break;case TM:Xe();break;case rR:at();break;case sR:Le();break;case cR:tt();break;case nR:f(!0,!0);break;case uR:g();break;case Uv:rt();break;case PM:ft();break;case yKe:Ot();break;case AM:E();break;case iR:k();break;case oR:y();break;case aR:w();break;case fR:C();break;case dR:S();break;case lR:_();break;case pR:v();break}}function Ee(we){if(arguments.length&&J(we),A.length>1){nt("unexpected EOF");return}}function le(){return j||!A.length?!1:F=I[0]}function ie(we){A.unshift(we),A.shift()}function be(we,Se){we.parent=A[0];const Tt=[].unshift.call(this,we);return Se=Se===void 0?!0:Se,Se&&re!==we&&re.children.push(we),re=we,Tt}function Je(){let we=[].shift.call(this),Se=O[this.length],Tt=!1;return O.length?typeof O[0]=="function"?Tt=O[0](we):Se!==void 0&&(Tt=Se.test?Se.test(we.type):Se===we.type):Tt=!0,Tt&&!j&&D.push(we),re=we.parent,we}function Xe(){return Pe(function(){return A.scope.enter(),ui},we)();function we(){if(F.data===A[0].expecting)return A.scope.exit(),A.shift();switch(F.type){case"preprocessor":A.fake(ke()),I.shift();return;default:A.unshift(e());return}}}function Be(){if(A[0].brace)return F.data!=="}"?nt("expected `}`, got "+F.data):(A[0].brace=!1,I.shift(),A.shift());switch(F.type){case"eof":return vt();case"keyword":switch(F.data){case"for":return A.unshift(a());case"if":return A.unshift(l());case"while":return A.unshift(c());case"do":return A.unshift(h());case"break":return A.fake(va(xKe,F)),I.shift();case"continue":return A.fake(va(wKe,F)),I.shift();case"discard":return A.fake(va(SKe,F)),I.shift();case"return":return A.unshift(u());case"precision":return A.unshift(n())}return A.unshift(ae(zm));case"ident":var we;if(we=A.scope.find(F.data))return we.parent.type==="struct"?A.unshift(ae(zm)):A.unshift(Ie(";"));case"operator":if(F.data==="{"){A[0].brace=!0;const Se=i();return Se.expecting="}",I.shift(),A.unshift(Se)}if(F.data===";")return I.shift(),A.shift();default:return A.unshift(Ie(";"))}}function vt(){return R&&(j=!0),R=!0,A.shift()}function at(){const we=A[0];return Pe(Se,Tt,zt,Vt,Gt,Dt,Yt,Yn,Me)();function Se(){return F.data==="invariant"?we.flags&P5?(A.unshift(dt()),ui):nt("`invariant` is not allowed here"):(A.fake(va(cx,{data:"",position:F.position})),ui)}function Tt(){return OKe(F)?we.flags&rF?(A.unshift(dt()),ui):nt("storage is not allowed here"):(A.fake(va(cx,{data:"",position:F.position})),ui)}function zt(){return LKe(F)?we.flags&sF?nt("parameter is not allowed here"):(A.unshift(dt()),ui):(A.fake(va(cx,{data:"",position:F.position})),ui)}function Vt(){return DKe(F)?(A.unshift(dt()),ui):(A.fake(va(cx,{data:"",position:F.position})),ui)}function Gt(){if(F.data==="struct")return we.flags&oF?(A.unshift(xe()),ui):nt("cannot nest structs");if(F.type==="keyword")return A.unshift(dt()),ui;const At=A.scope.find(F.data);return At?(A.fake(Object.create(At)),I.shift(),ui):nt("expected user defined type, struct or keyword, got "+F.data)}function Dt(){if(F.data===","&&!(we.flags&$E))return A.shift();if(F.data==="["){A.unshift(d());return}return F.data===")"?A.shift():F.data===";"?we.stage+3:F.type!=="ident"&&F.type!=="builtin"?nt("expected identifier, got "+F.data):(we.collected_name=I.shift(),ui)}function Yt(){return F.data==="("?(I.unshift(we.collected_name),delete we.collected_name,A.unshift(s()),we.stage+2):ui}function Yn(){return I.unshift(we.collected_name),delete we.collected_name,A.unshift(t()),ui}function Me(){return A.shift()}}function Le(){if(F.type==="ident"||F.type==="builtin"){const we=F.data;A.unshift(r()),A.scope.define(we);return}if(F.type==="operator"){if(F.data===",")return A[1].flags&$E?I.shift():A.shift();if(F.data==="="){if(!(A[1].flags&A5))return nt("`=` is not allowed here.");I.shift(),A.unshift(Ie(",",";"));return}else if(F.data==="["){A.unshift(d());return}}return A.shift()}function Ot(){if(F.type==="keyword"){A[0].type="keyword",A[0].mode=PM;return}if(F.type==="ident"){A[0].type="ident",A[0].mode=Uv;return}return nt("expected keyword or user-defined name, got "+F.data)}function ft(){return F.type!=="keyword"?nt("expected keyword, got "+F.data):(A.shift(),I.shift())}function rt(){return F.type!=="ident"&&F.type!=="builtin"?nt("expected user-defined name, got "+F.data):(A[0].data=F.data,A.shift(),I.shift())}function tt(){const we=A[0].expecting;if(A[0].tokens=A[0].tokens||[],A[0].parenlevel===void 0&&(A[0].parenlevel=0,A[0].bracelevel=0),A[0].parenlevel<1&&we.indexOf(F.data)>-1)return Se(A[0].tokens);switch(F.data==="("?++A[0].parenlevel:F.data===")"&&--A[0].parenlevel,F.data){case"{":++A[0].bracelevel;break;case"}":--A[0].bracelevel;break;case"(":++A[0].parenlevel;break;case")":--A[0].parenlevel;break}if(A[0].parenlevel<0)return nt("unexpected `)`");if(A[0].bracelevel<0)return nt("unexpected `}`");A[0].tokens.push(I.shift());return;function Se(Tt){try{vKe(A,Tt)}catch(zt){throw j=!0,zt}return A.shift()}}function se(we){return function(){return va(we,F)}}function ke(){return va(PKe[F.type],F)}function ae(we){const Se=va(rR,F);return Se.flags=we,Se}function xe(we,Se){const Tt=va(nR,F);return Tt.allow_assign=we===void 0?!0:we,Tt.allow_comma=Se===void 0?!0:Se,Tt}function Ie(){const we=va(cR,F);return we.expecting=[].slice.call(arguments),we}function dt(we){let Se=F;return we&&(Se={type:"(implied)",data:"(default)",position:Se.position}),va(PM,Se)}function nt(we){throw j=!0,new Error((we||"unexpected "+A)+" at line "+A[0].token.line)}function me(we,Se){return ue(we,F.type)&&ue(Se,F.data)}function ue(we,Se){switch(typeof we){case"string":return Se!==we&&nt("expected `"+we+"`, got "+Se+`
`+F.data),!j;case"object":return we&&we.indexOf(Se)===-1&&nt("expected one of `"+we.join("`, `")+"`, got "+Se),!j}return!0}function Pe(){let we=[].slice.call(arguments),Se,Tt;return function(){const zt=A[0];if(zt.stage||(zt.stage=0),Se=we[zt.stage],!Se)return nt("parser in undefined state!");if(Tt=Se(),Tt===ui)return++zt.stage;Tt!==void 0&&(zt.stage=Tt)}}function U(we,Se){return Se=Se||"operator",function(){if(!me(Se,we))return;const Tt=I.shift(),zt=A[0].children,Vt=zt[zt.length-1];return Vt&&Vt.token&&Tt.preceding&&(Vt.token.succeeding=Vt.token.succeeding||[],Vt.token.succeeding=Vt.token.succeeding.concat(Tt.preceding)),ui}}function V(we){return function(){return A.unshift(Ie(we)),ui}}function Ve(we){return we?function(){const Se=F.data;return me("ident")&&(A.unshift(r()),A.scope.define(Se),ui)}:function(){if(!me("ident"))return;const Se=Object.create(A.scope.find(F.data));return Se.token=F,I.shift(),ui}}function st(){return function(){const we=i();return we.expecting="}",A.unshift(we),ui}}function ve(we){return function(){const Se=A[0].stage;return F.data!=="{"?(A.unshift(e()),Se+we):(I.shift(),ui)}}function ut(){return function(){return A.shift(),A.shift()}}function Zt(){f=Pe(U("struct","keyword"),function(){return F.data==="{"?(A.fake(va(Uv,{data:"",position:F.position,type:"ident"})),ui):Ve(!0)()},function(){return A.scope.enter(),ui},U("{"),function(){if(F.type==="preprocessor"){A.fake(ke()),I.shift();return}if(F.data==="}")return A.scope.exit(),I.shift(),A.shift();if(F.data===";"){I.shift();return}A.unshift(ae(EKe))}),g=Pe(function(){return I.shift(),ui},function(){return me("keyword",["lowp","mediump","highp"])&&(A.unshift(dt()),ui)},function(){return A.unshift(dt()),ui},function(){return A.shift()}),v=Pe(U("["),V("]"),U("]"),function(){return A.shift()}),y=Pe(U("for","keyword"),U("("),function(){let we;if(F.type==="ident"){if((we=A.scope.find(F.data))||(we=A.create_node()),we.parent.type==="struct")return A.unshift(ae(zm)),ui}else if(F.type==="builtin"||F.type==="keyword")return A.unshift(ae(zm)),ui;return V(";")()},U(";"),V(";"),U(";"),V(")"),U(")"),ve(3),st(),U("}"),ut()),_=Pe(U("if","keyword"),U("("),V(")"),U(")"),ve(3),st(),U("}"),function(){return F.data==="else"?(I.shift(),A.unshift(e()),ui):ut()()},ut()),S=Pe(U("return","keyword"),function(){return F.data===";"||A.unshift(Ie(";")),ui},function(){I.shift(),ut()()}),w=Pe(U("while","keyword"),U("("),V(")"),U(")"),ve(3),st(),U("}"),ut()),C=Pe(U("do","keyword"),ve(3),st(),U("}"),U("while","keyword"),U("("),V(")"),U(")"),ut()),E=Pe(function(){for(let we=1,Se=A.length;we<Se;++we)if(A[we].mode===AM)return nt("function definition is not allowed within another function");return ui},function(){if(!me("ident"))return;const we=F.data,Se=A.scope.find(we);return A.unshift(r()),A.scope.define(we),A.scope.enter(Se?Se.scope:null),ui},U("("),function(){return A.unshift(o()),ui},U(")"),function(){return F.data===";"?(A.scope.exit(),A.shift(),A.shift()):ui},U("{"),st(),U("}"),function(){return A.scope.exit(),ui},function(){return A.shift(),A.shift(),A.shift()}),k=Pe(function(){if(F.data==="void")return A.fake(dt()),I.shift(),ui;if(F.data===")"){A.shift();return}return F.data==="struct"?(A.unshift(xe(TKe,AKe)),ui):(A.unshift(ae(CKe)),ui)},function(){if(F.data===",")return I.shift(),0;if(F.data===")"){A.shift();return}nt("expected one of `,` or `)`, got "+F.data)})}}function va(i,e){return{mode:i,token:e,children:[],type:kKe[i],id:(Math.random()*4294967295).toString(16)}}function OKe(i){return i.data==="const"||i.data==="attribute"||i.data==="uniform"||i.data==="varying"}function LKe(i){return i.data==="in"||i.data==="inout"||i.data==="out"}function DKe(i){return i.data==="highp"||i.data==="mediump"||i.data==="lowp"}var zKe=gKe,IKe=NKe;function NKe(i){for(var e=zKe(),t=0;t<i.length;t++)e(i[t]);return e(null)}const UKe=s0(IKe);function k5(i,e,t){return Math.max(e,Math.min(t,i))}class R5{constructor(e=0,t=0){R5.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(k5(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class FKe{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,a){let l=n[r+0],c=n[r+1],u=n[r+2],h=n[r+3];const d=s[o+0],f=s[o+1],g=s[o+2],v=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=d,e[t+1]=f,e[t+2]=g,e[t+3]=v;return}if(h!==v||l!==d||c!==f||u!==g){let y=1-a;const _=l*d+c*f+u*g+h*v,S=_>=0?1:-1,w=1-_*_;if(w>Number.EPSILON){const E=Math.sqrt(w),k=Math.atan2(E,_*S);y=Math.sin(y*k)/E,a=Math.sin(a*k)/E}const C=a*S;if(l=l*y+d*C,c=c*y+f*C,u=u*y+g*C,h=h*y+v*C,y===1-a){const E=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=E,c*=E,u*=E,h*=E}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,n,r,s,o){const a=n[r],l=n[r+1],c=n[r+2],u=n[r+3],h=s[o],d=s[o+1],f=s[o+2],g=s[o+3];return e[t]=a*g+u*h+l*f-c*d,e[t+1]=l*g+u*d+c*h-a*f,e[t+2]=c*g+u*f+a*d-l*h,e[t+3]=u*g-a*h-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(n/2),u=a(r/2),h=a(s/2),d=l(n/2),f=l(r/2),g=l(s/2);switch(o){case"XYZ":this._x=d*u*h+c*f*g,this._y=c*f*h-d*u*g,this._z=c*u*g+d*f*h,this._w=c*u*h-d*f*g;break;case"YXZ":this._x=d*u*h+c*f*g,this._y=c*f*h-d*u*g,this._z=c*u*g-d*f*h,this._w=c*u*h+d*f*g;break;case"ZXY":this._x=d*u*h-c*f*g,this._y=c*f*h+d*u*g,this._z=c*u*g+d*f*h,this._w=c*u*h-d*f*g;break;case"ZYX":this._x=d*u*h-c*f*g,this._y=c*f*h+d*u*g,this._z=c*u*g-d*f*h,this._w=c*u*h+d*f*g;break;case"YZX":this._x=d*u*h+c*f*g,this._y=c*f*h+d*u*g,this._z=c*u*g-d*f*h,this._w=c*u*h-d*f*g;break;case"XZY":this._x=d*u*h-c*f*g,this._y=c*f*h-d*u*g,this._z=c*u*g+d*f*h,this._w=c*u*h+d*f*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=n+a+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(n>a&&n>h){const f=2*Math.sqrt(1+n-a-h);this._w=(u-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>h){const f=2*Math.sqrt(1+a-n-h);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+h-n-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(k5(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=n*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-n*c,this._z=s*u+o*c+n*l-r*a,this._w=o*u-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*n+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(s),n*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ju{constructor(e=0,t=0,n=0){Ju.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(mR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(mR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*n,u=l*n+a*t-s*r,h=l*r+s*n-o*t,d=-s*t-o*n-a*r;return this.x=c*l+d*-s+u*-a-h*-o,this.y=u*l+d*-o+h*-s-c*-a,this.z=h*l+d*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return kM.copy(this).projectOnVector(e),this.sub(kM)}reflect(e){return this.sub(kM.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(k5(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const kM=new Ju,mR=new FKe;class O5{constructor(e=0,t=0,n=0,r=1){O5.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,c=l[0],u=l[4],h=l[8],d=l[1],f=l[5],g=l[9],v=l[2],y=l[6],_=l[10];if(Math.abs(u-d)<.01&&Math.abs(h-v)<.01&&Math.abs(g-y)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+v)<.1&&Math.abs(g+y)<.1&&Math.abs(c+f+_-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(c+1)/2,C=(f+1)/2,E=(_+1)/2,k=(u+d)/4,O=(h+v)/4,R=(g+y)/4;return w>C&&w>E?w<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(w),r=k/n,s=O/n):C>E?C<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(C),n=k/r,s=R/r):E<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(E),n=O/s,r=R/s),this.set(n,r,s,t),this}let S=Math.sqrt((y-g)*(y-g)+(h-v)*(h-v)+(d-u)*(d-u));return Math.abs(S)<.001&&(S=1),this.x=(y-g)/S,this.y=(h-v)/S,this.z=(d-u)/S,this.w=Math.acos((c+f+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class z4{constructor(e,t,n,r,s,o,a,l,c){z4.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,a,l,c)}set(e,t,n,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=n,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],u=n[4],h=n[7],d=n[2],f=n[5],g=n[8],v=r[0],y=r[3],_=r[6],S=r[1],w=r[4],C=r[7],E=r[2],k=r[5],O=r[8];return s[0]=o*v+a*S+l*E,s[3]=o*y+a*w+l*k,s[6]=o*_+a*C+l*O,s[1]=c*v+u*S+h*E,s[4]=c*y+u*w+h*k,s[7]=c*_+u*C+h*O,s[2]=d*v+f*S+g*E,s[5]=d*y+f*w+g*k,s[8]=d*_+f*C+g*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-n*s*u+n*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,d=a*l-u*s,f=c*s-o*l,g=t*h+n*d+r*f;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=h*v,e[1]=(r*c-u*n)*v,e[2]=(a*n-r*o)*v,e[3]=d*v,e[4]=(u*t-r*l)*v,e[5]=(r*s-a*t)*v,e[6]=f*v,e[7]=(n*l-c*t)*v,e[8]=(o*t-n*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(RM.makeScale(e,t)),this}rotate(e){return this.premultiply(RM.makeRotation(-e)),this}translate(e,t){return this.premultiply(RM.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const RM=new z4,ux=2e3,gR=2001;class e_{constructor(e,t,n,r,s,o,a,l,c,u,h,d,f,g,v,y){e_.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,a,l,c,u,h,d,f,g,v,y)}set(e,t,n,r,s,o,a,l,c,u,h,d,f,g,v,y){const _=this.elements;return _[0]=e,_[4]=t,_[8]=n,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=c,_[6]=u,_[10]=h,_[14]=d,_[3]=f,_[7]=g,_[11]=v,_[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new e_().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/hm.setFromMatrixColumn(e,0).length(),s=1/hm.setFromMatrixColumn(e,1).length(),o=1/hm.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const d=o*u,f=o*h,g=a*u,v=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=f+g*c,t[5]=d-v*c,t[9]=-a*l,t[2]=v-d*c,t[6]=g+f*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*u,f=l*h,g=c*u,v=c*h;t[0]=d+v*a,t[4]=g*a-f,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=f*a-g,t[6]=v+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*u,f=l*h,g=c*u,v=c*h;t[0]=d-v*a,t[4]=-o*h,t[8]=g+f*a,t[1]=f+g*a,t[5]=o*u,t[9]=v-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*u,f=o*h,g=a*u,v=a*h;t[0]=l*u,t[4]=g*c-f,t[8]=d*c+v,t[1]=l*h,t[5]=v*c+d,t[9]=f*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,f=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=v-d*h,t[8]=g*h+f,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*h+g,t[10]=d-v*h}else if(e.order==="XZY"){const d=o*l,f=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+v,t[5]=o*u,t[9]=f*h-g,t[2]=g*h-f,t[6]=a*u,t[10]=v*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(BKe,e,VKe)}lookAt(e,t,n){const r=this.elements;return El.subVectors(e,t),El.lengthSq()===0&&(El.z=1),El.normalize(),Id.crossVectors(n,El),Id.lengthSq()===0&&(Math.abs(n.z)===1?El.x+=1e-4:El.z+=1e-4,El.normalize(),Id.crossVectors(n,El)),Id.normalize(),hx.crossVectors(El,Id),r[0]=Id.x,r[4]=hx.x,r[8]=El.x,r[1]=Id.y,r[5]=hx.y,r[9]=El.y,r[2]=Id.z,r[6]=hx.z,r[10]=El.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],u=n[1],h=n[5],d=n[9],f=n[13],g=n[2],v=n[6],y=n[10],_=n[14],S=n[3],w=n[7],C=n[11],E=n[15],k=r[0],O=r[4],R=r[8],A=r[12],D=r[1],I=r[5],q=r[9],j=r[13],Y=r[2],F=r[6],re=r[10],ee=r[14],J=r[3],Ee=r[7],le=r[11],ie=r[15];return s[0]=o*k+a*D+l*Y+c*J,s[4]=o*O+a*I+l*F+c*Ee,s[8]=o*R+a*q+l*re+c*le,s[12]=o*A+a*j+l*ee+c*ie,s[1]=u*k+h*D+d*Y+f*J,s[5]=u*O+h*I+d*F+f*Ee,s[9]=u*R+h*q+d*re+f*le,s[13]=u*A+h*j+d*ee+f*ie,s[2]=g*k+v*D+y*Y+_*J,s[6]=g*O+v*I+y*F+_*Ee,s[10]=g*R+v*q+y*re+_*le,s[14]=g*A+v*j+y*ee+_*ie,s[3]=S*k+w*D+C*Y+E*J,s[7]=S*O+w*I+C*F+E*Ee,s[11]=S*R+w*q+C*re+E*le,s[15]=S*A+w*j+C*ee+E*ie,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],f=e[14],g=e[3],v=e[7],y=e[11],_=e[15];return g*(+s*l*h-r*c*h-s*a*d+n*c*d+r*a*f-n*l*f)+v*(+t*l*f-t*c*d+s*o*d-r*o*f+r*c*u-s*l*u)+y*(+t*c*h-t*a*f-s*o*h+n*o*f+s*a*u-n*c*u)+_*(-r*a*u-t*l*h+t*a*d+r*o*h-n*o*d+n*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],g=e[12],v=e[13],y=e[14],_=e[15],S=h*y*c-v*d*c+v*l*f-a*y*f-h*l*_+a*d*_,w=g*d*c-u*y*c-g*l*f+o*y*f+u*l*_-o*d*_,C=u*v*c-g*h*c+g*a*f-o*v*f-u*a*_+o*h*_,E=g*h*l-u*v*l-g*a*d+o*v*d+u*a*y-o*h*y,k=t*S+n*w+r*C+s*E;if(k===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/k;return e[0]=S*O,e[1]=(v*d*s-h*y*s-v*r*f+n*y*f+h*r*_-n*d*_)*O,e[2]=(a*y*s-v*l*s+v*r*c-n*y*c-a*r*_+n*l*_)*O,e[3]=(h*l*s-a*d*s-h*r*c+n*d*c+a*r*f-n*l*f)*O,e[4]=w*O,e[5]=(u*y*s-g*d*s+g*r*f-t*y*f-u*r*_+t*d*_)*O,e[6]=(g*l*s-o*y*s-g*r*c+t*y*c+o*r*_-t*l*_)*O,e[7]=(o*d*s-u*l*s+u*r*c-t*d*c-o*r*f+t*l*f)*O,e[8]=C*O,e[9]=(g*h*s-u*v*s-g*n*f+t*v*f+u*n*_-t*h*_)*O,e[10]=(o*v*s-g*a*s+g*n*c-t*v*c-o*n*_+t*a*_)*O,e[11]=(u*a*s-o*h*s-u*n*c+t*h*c+o*n*f-t*a*f)*O,e[12]=E*O,e[13]=(u*v*r-g*h*r+g*n*d-t*v*d-u*n*y+t*h*y)*O,e[14]=(g*a*r-o*v*r-g*n*l+t*v*l+o*n*y-t*a*y)*O,e[15]=(o*h*r-u*a*r+u*n*l-t*h*l-o*n*d+t*a*d)*O,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+n,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,h=a+a,d=s*c,f=s*u,g=s*h,v=o*u,y=o*h,_=a*h,S=l*c,w=l*u,C=l*h,E=n.x,k=n.y,O=n.z;return r[0]=(1-(v+_))*E,r[1]=(f+C)*E,r[2]=(g-w)*E,r[3]=0,r[4]=(f-C)*k,r[5]=(1-(d+_))*k,r[6]=(y+S)*k,r[7]=0,r[8]=(g+w)*O,r[9]=(y-S)*O,r[10]=(1-(d+v))*O,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=hm.set(r[0],r[1],r[2]).length();const o=hm.set(r[4],r[5],r[6]).length(),a=hm.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Hc.copy(this);const c=1/s,u=1/o,h=1/a;return Hc.elements[0]*=c,Hc.elements[1]*=c,Hc.elements[2]*=c,Hc.elements[4]*=u,Hc.elements[5]*=u,Hc.elements[6]*=u,Hc.elements[8]*=h,Hc.elements[9]*=h,Hc.elements[10]*=h,t.setFromRotationMatrix(Hc),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,r,s,o,a=ux){const l=this.elements,c=2*s/(t-e),u=2*s/(n-r),h=(t+e)/(t-e),d=(n+r)/(n-r);let f,g;if(a===ux)f=-(o+s)/(o-s),g=-2*o*s/(o-s);else if(a===gR)f=-o/(o-s),g=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,s,o,a=ux){const l=this.elements,c=1/(t-e),u=1/(n-r),h=1/(o-s),d=(t+e)*c,f=(n+r)*u;let g,v;if(a===ux)g=(o+s)*h,v=-2*h;else if(a===gR)g=s*h,v=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=v,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const hm=new Ju,Hc=new e_,BKe=new Ju(0,0,0),VKe=new Ju(1,1,1),Id=new Ju,hx=new Ju,El=new Ju,lr={};lr.in=0;lr.out=1;lr.inout=2;const Ou=i=>i.token.data;lr.node=function(i){if((i.children[5]!=null?i.children[5].type:void 0)==="function")return lr.function(i);if((i.token!=null?i.token.type:void 0)==="keyword")return lr.external(i)};lr.external=function(i){let e=i.children,t=Ou(e[1]);const n=Ou(e[4]),r=e[5];["attribute","uniform","varying"].includes(t)||(t="global");const s=[];for(let o=0;o<r.children.length;o++)if(e=r.children[o],e.type==="ident"){const a=Ou(e),l=r.children[o+1],c=(l!=null?l.type:void 0)==="quantifier";s.push({decl:"external",storage:t,type:n,ident:a,quant:!!c,count:c})}return s};lr.function=function(i){const e=i.children,t=Ou(e[1]),n=Ou(e[4]),r=e[5],s=Ou(r.children[0]),o=r.children[1],a=r.children[2],l=Array.from(o.children).map(c=>lr.argument(c));return[{decl:"function",storage:t,type:n,ident:s,body:!!a,args:l}]};lr.argument=function(i){const e=i.children,t=Ou(e[1]),n=Ou(e[2]),r=Ou(e[4]),s=e[5],o=Ou(s.children[0]),a=s.children[1],l=a?a.children[0].token.data:void 0;return{decl:"argument",storage:t,inout:n,type:r,ident:o,quant:!!a,count:l}};lr.param=function(i,e,t,n,r){let s=[];e!=null&&s.push(e),t!=null&&s.push(t),s.push(""),s=s.join(" ");const o=n?"["+r+"]":"";i!==""&&(i+=" ");const a=(l,c)=>(c?i:"")+`${s}${l}${o}`;return a.split=l=>lr.param(l,e,t,n,r),a};const HKe=typeof window<"u",Fv=HKe&&!!window.THREE,qKe={int:0,float:0,vec2:Fv?R5:null,vec3:Fv?Ju:null,vec4:Fv?O5:null,mat2:null,mat3:Fv?z4:null,mat4:Fv?e_:null,sampler2D:0,samplerCube:0},GKe={int:"i",float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat2:"m2",mat3:"m3",mat4:"m4",sampler2D:"t",samplerCube:"t"};lr.type=function(i,e,t,n,r,s){const o={in:lr.in,out:lr.out,inout:lr.inout},a={const:"const"};let l=GKe[e];t&&(l+="v");let c=qKe[e];c!=null&&c.call&&(c=new c),t&&(c=[c]);const u=o[r]!=null?o[r]:o.in;s=a[s];const h=lr.param(r,s,e,t,n);return new Fw(i,l,e,h,c,u)};class Fw{constructor(e,t,n,r,s,o,a){this.name=e,this.type=t,this.spec=n,this.param=r,this.value=s,this.inout=o,this.meta=a}split(){const e=this.meta.shadowed!=null,t=e?"in":"out",n=e?lr.in:lr.out,r=this.param.split(t);return new Fw(this.name,this.type,this.spec,r,this.value,n)}copy(e,t){return new Fw(e??this.name,this.type,this.spec,this.param,this.value,this.inout,t)}}const L5="_i_o",t0="return";let cg=!1;const WKe=function(i,e){const t=jKe(i,e);return $Ke(t,e)},jKe=function(i,e){let t,n,r=[];cg&&(n=aF());try{const o=hKe(e);t=UKe(o)}catch(o){r=[{message:o}]}cg&&n("GLSL Tokenize & Parse");const s=function(o){o=o.split(`
`);const a=(""+o.length).length,l=function(c){return(c=""+c).length<a?("       "+c).slice(-a):c};return o.map((c,u)=>`${l(u+1)}: ${c}`).join(`
`)};if(!t||r.length){i||(i="(inline code)"),console.warn(s(e));for(const o of r)console.error(`${i} -`,o.message);throw new Error("GLSL parse error")}return t},$Ke=function(i,e){let t;cg&&(t=aF());const n=[];D5(XKe,YKe(n),i,"");const[r,s,o]=Array.from(KKe(n)),a=ZKe(r,s,o);return cg&&t("GLSL AST"),{ast:i,code:e,signatures:a}},XKe=function(i,e){switch(i.type){case"decl":return e(lr.node(i)),!1}return!0},YKe=i=>function(e){e!=null&&Array.from(e).map(t=>i.push(t))},KKe=function(i){let e=null;const t=[];let n=[];const r={};let s=!1;for(const o of Array.from(i))o.body?(r[o.ident]&&(n=Array.from(n).filter(a=>a.ident!==o.ident),delete r[o.ident]),t.push(o),o.ident==="main"?(e=o,s=!0):s||(e=o)):o.storage==="global"?t.push(o):(n.push(o),r[o.ident]=!0);return[e,t,n]},ZKe=function(i,e,t){let n;const r={uniform:[],attribute:[],varying:[],external:[],internal:[],global:[],main:null},s=a=>lr.type(a.ident,a.type,a.quant,a.count,a.inout,a.storage),o=function(a,l){let c;const u=Array.from(a.args).map(g=>s(g));for(c of Array.from(u))if(c.inout===lr.inout){const g=c,v=c.copy();g.inout=lr.in,v.inout=lr.out,v.meta={shadow:g.name},v.name+=L5,g.meta={shadowed:v.name},u.push(v)}a.type!=="void"&&u.unshift(lr.type(t0,a.type,!1,"","out"));const h=(()=>{const g=[];for(c of Array.from(u))c.inout===lr.in&&g.push(c.type);return g})().join(","),d=(()=>{const g=[];for(c of Array.from(u))c.inout===lr.out&&g.push(c.type);return g})().join(","),f=`(${h})(${d})`;return{name:a.ident,type:f,signature:u,inout:l,spec:a.type}};r.main=o(i,lr.out);for(n of Array.from(e))r.internal.push({name:n.ident});for(n of Array.from(t)){let a;switch(n.decl){case"external":a=s(n),r[n.storage].push(a);break;case"function":a=o(n,lr.in),r.external.push(a);break}}return r};cg=!1;const D5=function(i,e,t,n){if(cg&&console.log(n,t.type,t.token!=null?t.token.data:void 0,t.token!=null?t.token.type:void 0),i(t,e))for(let s=0;s<t.children.length;s++){const o=t.children[s];D5(i,e,o,n+"  ")}return null},aF=function(){const i=+new Date;return function(e){const t=+new Date-i;return console.log(e,t+" ms"),t}};function JKe(i){const e=i.replace(L5,"");return e!==i?e:null}function lF(i){return i.join(`
`)}function z5(i){return i.join(", ")}function Bw(i){return i.join(`;
`)}function XE(i){return{entry:i,type:"void",params:[],signature:[],return:"",vars:{},calls:[],post:[],chain:{}}}function I5(i,e){return`#define ${i} ${e}`}function cF(i,e,t,n,r){return`${i} ${e}(${t}) {
${n}${r}}`}function uF(i,e,t){return i=i?`${i} = `:"",t=z5(t),`  ${i}${e}(${t})`}function N5(i,e){for(let t=0;t<i.length;t++){const n=i[t],r=e[t];if(!r||n.type!==r.type||n.name===t0!=(r.name===t0))return!1}return!0}function YE(i,e,t,n,r){const s=[];let o="";for(let a of Array.from(n)){let l,c;const{name:u}=a;let h=l=i(u),d=null,f=null,g=!1;const v=u===t0;if((c=a.meta!=null?a.meta.shadowed:void 0)&&(d=i(c),d&&(r.vars[d]="  "+a.param(d),r.calls.push(`  ${d} = ${l}`),e(c)?f={shadowed:d}:a=a.split())),(c=a.meta!=null?a.meta.shadow:void 0)&&(d=i(c),d))if(!e(c))a=a.split(),g=!0;else{f={shadow:d};continue}if(v?o=l:g||s.push(d??l),e(u)){let y="push";v?r.return===""?(y="unshift",h=u,r.type=a.spec,r.return=`  return ${l}`,r.vars[l]="  "+a.param(l)):(r.vars[l]="  "+a.param(l),r.params.push(a.param(l,!0))):r.params.push(a.param(l,!0)),a=a.copy(h,f),r.signature[y](a)}else r.vars[l]="  "+a.param(l)}return r.calls.push(uF(o,t,s))}function KE(i,e){const{entry:t}=i;let n=null;if(e&&e.length===1&&t!=="main"){const r=e[0].module;N5(i.signature,r.main.signature)&&(n=I5(t,r.entry))}if(n==null){let r=(()=>{const c=[];for(const u in i.vars){const h=i.vars[u];c.push(h)}return c})();({calls:e}=i);const{post:s}=i;let{params:o}=i;const{type:a}=i,l=i.return;e=e.concat(s),l!==""&&e.push(l),e.push(""),r.length?(r.push(""),r=Bw(r)+`
`):r="",e=Bw(e),o=z5(o),n=cF(a,t,o,r,e)}return{signature:i.signature,code:n,name:t}}function QKe(i){const e={defs:[],bodies:[]};for(const t of Array.from(i))hF(t,e);return e.defs=lF(e.defs),e.bodies=Bw(e.bodies),e.defs===""&&delete e.defs,e.bodies===""&&delete e.bodies,e}const hF=(i,e)=>{let t,n;const{module:r,name:s,external:o}=i,{main:a}=r,{entry:l}=r;if(N5(a.signature,o.signature))return e.defs.push(I5(s,l));const c=[],u=[];let h={};const d=[r.namespace,t0].join("");for(t of Array.from(o.signature))n=t.inout===Z1?c:u,n.push(t);for(t of Array.from(a.signature)){n=t.inout===Z1?c:u;let S=n.shift().name;S===t0&&(S=d),h[t.name]=S}let f=_=>h[_];const g=()=>!0,v=XE();YE(f,g,l,a.signature,v),v.entry=l,h={return:d},f=_=>h[_]!=null?h[_]:_;const y=XE();return YE(f,g,l,o.signature,y),y.calls=v.calls,y.entry=s,e.bodies.push(KE(v).code.split(" {")[0]),e.bodies.push(KE(y).code)};function eZe(i){const e=/([A-Za-z0-9_]+\s+)?[A-Za-z0-9_]+\s+[A-Za-z0-9_]+\s*\([^)]*\)\s*;\s*/gm,t=s=>s.replace(e,o=>""),n=i.split(/(?=[{}])/g);let r=0;for(let s=0;s<n.length;s++){const o=n[s];switch(o[0]){case"{":r++;break;case"}":r--;break}if(r===0){const a=o.split(/^[ \t]*#/m);for(let l=0;l<a.length;l++){let c=a[l];if(l>0){c=c.split(/\n/);const u=c.shift(),h=c.join(`
`);a[l]=[u,t(h)].join(`
`)}else a[l]=t(c)}n[s]=a.join("#")}}return i=n.join("")}function tZe(i){const e={},t=/((attribute|uniform|varying)\s+)[A-Za-z0-9_]+\s+([A-Za-z0-9_]+)\s*(\[[^\]]*\]\s*)?;\s*/gm;return i.replace(t,function(n,r,s,o,a){return e[o]?"":(e[o]=!0,n)})}function nZe(i){const e=function(n,r){const s=[],o=[];for(const a of Array.from(n))(a.match(r)?s:o).push(a);return s.concat(o)};let t=i.split(`
`);return t=e(t,/^#define ([^ ]+ _pg_[0-9]+_|_pg_[0-9]+_ [^ ]+)$/),t=e(t,/^#extension/),t.join(`
`)}const ZE=Object.freeze(Object.defineProperty({__proto__:null,RETURN_ARG:t0,SHADOW_ARG:L5,body:XE,build:KE,call:YE,compile:GYe,dedupe:tZe,define:I5,defuse:eZe,fn:cF,hoist:nZe,invoke:uF,lines:lF,link:hF,links:QKe,list:z5,parse:WKe,same:N5,statements:Bw,unshadow:JKe,walk:D5},Symbol.toStringTag,{value:"Module"})),{library:iZe,cache:rZe}=eF,{visualize:sZe,inspect:dF}=KU,{Snippet:oZe}=jU,vR=function(i,e={}){const t={};for(let n in i)t[n]=e[n]||i[n];return t};class Wu{constructor(e,t){const n={globalUniforms:!1,globalVaryings:!0,globalAttributes:!0,globals:[],autoInspect:!1};this.config=vR(n,t),this.fetch=rZe(iZe(ZE,e,oZe.load))}shader(e){e==null&&(e={});const t=vR(this.config,e);return new ZU(ZE,this.fetch,t)}material(e){return new JU(this.shader(e),this.shader(e))}inspect(e){return Wu.inspect(e)}visualize(e){return Wu.visualize(e)}static inspect(e){return dF(e)}static visualize(e){return sZe(e)}}Wu.Block=Ru;Wu.Factory=eF;Wu.GLSL=ZE;Wu.Graph=MYe;Wu.Linker=jU;Wu.Visualize=KU;function aZe(i,e={}){return new Wu(i,e)}const fF=function(i){function e(t){const n=i[t];if(n!=null)return n;const s=["#",".",":","["].includes(t[0])?t:`#${t}`,o=document.querySelector(s);if(o!=null&&o.tagName==="SCRIPT")return o.textContent||o.innerText;throw new Error(`Unknown shader \`${t}\``)}return aZe(e,{autoInspect:!0})},pF={"arrow.position":y$e,"axis.position":x$e,"cartesian.position":S$e,"cartesian4.position":w$e,"clamp.position":M$e,"color.opaque":C$e,"face.position":E$e,"face.position.normal":T$e,"float.encode":A$e,"float.index.pack":P$e,"float.stretch":k$e,"fragment.clip.dashed":R$e,"fragment.clip.dotted":O$e,"fragment.clip.ends":L$e,"fragment.clip.proximity":D$e,"fragment.color":z$e,"fragment.map.rgba":I$e,"fragment.solid":N$e,"fragment.transparent":U$e,"grid.position":F$e,"grow.position":B$e,"join.position":V$e,"label.alpha":H$e,"label.map":q$e,"label.outline":G$e,"layer.position":W$e,"lerp.depth":j$e,"lerp.height":$$e,"lerp.items":X$e,"lerp.width":Y$e,"line.position":K$e,"map.2d.data":Z$e,"map.2d.data.wrap":J$e,"map.xyzw.2dv":Q$e,"map.xyzw.align":eXe,"map.xyzw.texture":tXe,"mesh.fragment.color":nXe,"mesh.fragment.map":iXe,"mesh.fragment.mask":rXe,"mesh.fragment.material":sXe,"mesh.fragment.shaded":oXe,"mesh.fragment.texture":aXe,"mesh.gamma.in":lXe,"mesh.gamma.out":cXe,"mesh.map.uvwo":uXe,"mesh.position":hXe,"mesh.vertex.color":dXe,"mesh.vertex.mask":fXe,"mesh.vertex.position":pXe,"move.position":mXe,"object.mask.default":gXe,"point.alpha.circle":vXe,"point.alpha.circle.hollow":_Xe,"point.alpha.generic":bXe,"point.alpha.generic.hollow":yXe,"point.edge":xXe,"point.fill":wXe,"point.mask.circle":SXe,"point.mask.diamond":MXe,"point.mask.down":CXe,"point.mask.left":EXe,"point.mask.right":TXe,"point.mask.square":AXe,"point.mask.up":PXe,"point.position":kXe,"point.size.uniform":RXe,"point.size.varying":OXe,"polar.position":LXe,"project.position":DXe,"project.readback":zXe,"raw.position.scale":IXe,"repeat.position":NXe,"resample.padding":UXe,"resample.relative":FXe,"reveal.mask":BXe,"reverse.position":VXe,"root.position":HXe,"sample.2d":qXe,"scale.position":GXe,"screen.map.stpq":WXe,"screen.map.xy":jXe,"screen.map.xyzw":$Xe,"screen.pass.uv":XXe,"screen.position":YXe,"slice.position":KXe,"spherical.position":ZXe,"split.position":JXe,"spread.position":QXe,"sprite.fragment":eYe,"sprite.position":tYe,"stereographic.position":iYe,"stereographic4.position":nYe,"stpq.sample.2d":rYe,"stpq.xyzw.2d":sYe,"strip.position.normal":oYe,"style.color":aYe,"subdivide.depth":lYe,"subdivide.depth.lerp":cYe,"subdivide.height":uYe,"subdivide.height.lerp":hYe,"subdivide.items":dYe,"subdivide.items.lerp":fYe,"subdivide.width":pYe,"subdivide.width.lerp":mYe,"surface.mask.hollow":gYe,"surface.position":vYe,"surface.position.normal":_Ye,"surface.position.shaded":bYe,"ticks.position":yYe,"transform3.position":xYe,"transform4.position":wYe,"view.position":SYe},lZe=Object.freeze(Object.defineProperty({__proto__:null,Factory:fF,Snippets:pF},Symbol.toStringTag,{value:"Module"}));class mF{constructor(e){this.context=e,this.anims=[]}make(e,t){const n=new cZe(this,this.context.time,e,t);return this.anims.push(n),n}unmake(e){return this.anims=Array.from(this.anims).filter(t=>t!==e)}update(){const{time:e}=this.context;return this.anims=(()=>{const t=[];for(const n of Array.from(this.anims))n.update(e)!==!1&&t.push(n);return t})()}lerp(e,t,n,r,s){if(s==null&&(s=e.make()),e.lerp)s=e.lerp(t,n,s,r);else if(e.emitter){const o=t.emitterFrom,a=n.emitterTo;if(o!=null&&a!=null&&o===a)return o.lerp(r),o;{const l=e.emitter(t,n);return t.emitterFrom=l,n.emitterTo=l,l.lerp(r),l}}else if(e.op){const o=function(a,l){return a===+a&&l===+l?a+(l-a)*r:r>.5?l:a};s=e.op(t,n,s,o)}else s=r>.5?n:t;return s}}let cZe=class{constructor(e,t,n,r){this.animator=e,this.time=t,this.type=n,this.options=r,this.value=this.type.make(),this.target=this.type.make(),this.queue=[]}dispose(){return this.animator.unmake(this)}set(){let{target:e}=this,t=arguments.length>1?[].slice.call(arguments):arguments[0],n=!1;return t=this.type.validate(t,e,()=>n=!0),n||(e=t),this.cancel(),this.target=this.value,this.value=e,this.notify()}getTime(){const{clock:e}=this.options,t=e?e.getTime():this.time;return this.options.realtime?t.time:t.clock}cancel(e){let t;e==null&&(e=this.getTime());const{queue:n}=this,r=(()=>{const s=[];for(t of Array.from(n))t.end>=e&&s.push(t);return s})();this.queue=(()=>{const s=[];for(t of Array.from(n))t.end<e&&s.push(t);return s})();for(t of Array.from(r))typeof t.complete=="function"&&t.complete(!1);typeof this.options.complete=="function"&&this.options.complete(!1)}notify(){return typeof this.options.step=="function"?this.options.step(this.value):void 0}immediate(e,t){const{duration:n,delay:r,ease:s,step:o,complete:a}=t,c=this.getTime()+r,u=c+n;let h=!1,d=this.type.make();return e=this.type.validate(e,d,function(){return h=!0,null}),e!==void 0&&!h&&(d=e),this.cancel(c),this.queue.push({from:null,to:d,start:c,end:u,ease:s,step:o,complete:a})}update(e){if(this.time=e,this.queue.length===0)return!0;const t=this.getTime();let{value:n}=this;const{queue:r}=this;let s=!1;for(;!s;){const o=r[0];let{from:a}=o;const{to:l,start:c,end:u,step:h,complete:d,ease:f}=o;a==null&&(a=o.from=this.type.clone(this.value));let g=P4((t-c)/Math.max(1e-5,u-c)||0,0,1);if(g===0)return;const v=(()=>{switch(f){case"linear":case 0:return null;case"cosine":case 1:return K1;case"binary":case 2:return b5;case"hold":case 3:return y5;default:return K1}})();if(v!=null&&(g=v(g)),s=g<1,n=s?this.animator.lerp(this.type,a,l,g,n):l,typeof h=="function"&&h(n),!s&&(typeof d=="function"&&d(!0),typeof this.options.complete=="function"&&this.options.complete(!0),r.shift(),r.length===0))break}return this.value=n,this.notify()}};class I4{v2(){return this}constructor(e,t,n){this._context=e,this._up=t,this._targets=n;const r=this._context.controller.getRoot();this._targets==null&&(this._targets=[r]),this.isRoot=this._targets.length===1&&this._targets[0]===r,this.isLeaf=this._targets.length===1&&this._targets[0].children==null;for(let s=0;s<this._targets.length;s++){const o=this._targets[s];this[s]=o}this.length=this._targets.length;for(const s of Array.from(this._context.controller.getTypes()))["root"].includes(s)||(this[s]=(o,a)=>this.add(s,o,a))}select(e){const t=this._context.model.select(e,this.isRoot?null:this._targets);return this._push(t)}eq(e){return this._targets.length>e?this._push([this._targets[e]]):this._push([])}filter(e){if(typeof e=="string"){const t=this._context.model._matcher(e);e=n=>t(n)}return this._push(this._targets.filter(e))}map(e){return uZe(0,this.length,!1).map(t=>e(this[t],t,this))}each(e){for(let t=0,n=this.length,r=0<=n;r?t<n:t>n;r?t++:t--)e(this[t],t,this);return this}add(e,t,n){const{controller:r}=this._context;if(this.isLeaf)return this._pop().add(e,t,n);const s=[];for(const o of this._targets){const a=r.make(e,t,n);r.add(a,o),s.push(a)}return this._push(s)}remove(e){if(e)return this.select(e).remove();for(const t of Array.from(this._targets.slice().reverse()))this._context.controller.remove(t);return this._pop()}set(e,t){for(const n of Array.from(this._targets))this._context.controller.set(n,e,t);return this}getAll(e){return Array.from(this._targets).map(t=>this._context.controller.get(t,e))}get(e){return this._targets[0]!=null?this._targets[0].get(e):void 0}evaluate(e,t){return this._targets[0]!=null?this._targets[0].evaluate(e,t):void 0}bind(e,t){for(const n of Array.from(this._targets))this._context.controller.bind(n,e,t);return this}unbind(e){for(const t of Array.from(this._targets))this._context.controller.unbind(t,e);return this}end(){return(this.isLeaf?this._pop():this)._pop()}_push(e){return new I4(this._context,this,e)}_pop(){return this._up!=null?this._up:this}_reset(){let e;return(e=this._up!=null?this._up.reset():void 0)!=null?e:this}map(e){return this._targets.map(e)}on(){const e=arguments;return this._targets.map(t=>t.on.apply(t,e)),this}off(){const e=arguments;return this._targets.map(t=>t.off.apply(t,e)),this}toString(){const e=this._targets.map(t=>t.toString());return this._targets.length>1?`[${e.join(", ")}]`:e[0]}toMarkup(){return this._targets.map(t=>t.toMarkup()).join(`

`)}print(){return FA(this._targets.map(e=>e.toMarkup()).join(`

`)),this}debug(){const e=this.inspect();console.log("Renderables: ",e.renderables),console.log("Renders: ",e.renders),console.log("Shaders: ",e.shaders);const t=r=>r.constructor.name,n=[];for(const r of Array.from(e.shaders)){const s=t(r.owner);n.push(`${s} - Vertex`),n.push(r.vertex),n.push(`${s} - Fragment`),n.push(r.fragment)}return dF(n)}inspect(e,t,n){let r;typeof t=="boolean"&&(n=t,t=null),n==null&&(n=!0);const s=u=>(u.controller!=null?u.controller.objects:void 0)!=null?u.controller!=null?u.controller.objects:void 0:[],o=r=function(u,h){if(h==null&&(h=[]),(!t||u.traits.hash[t])&&h.push(s(u)),u.children!=null)for(const d of Array.from(u.children))r(d,h);return h},a=function(u){return u=u.reduce((h,d)=>h.concat(d),[]),u=u.filter((h,d)=>h!=null&&u.indexOf(h)===d)},l=function(u,h){const d={};return d.owner=u,d.geometry=h.geometry,d.material=h.material,d.vertex=h.userData.vertexGraph,d.fragment=h.userData.fragmentGraph,d},c={nodes:this._targets.slice(),renderables:[],renders:[],shaders:[]};for(const u of Array.from(this._targets)){let h;n&&u.print(e,"info");const d={renderables:h=a(o(u)),renders:a(h.map(f=>f.renders)),shaders:a(h.map(f=>f.renders!=null?f.renders.map(g=>l(f,g)):void 0))};for(const f in d)c[f]=c[f].concat(d[f])}return c}}function uZe(i,e,t){const n=[],r=i<e,s=t?r?e+1:e-1:e;for(let o=i;r?o<s:o>s;r?o++:o--)n.push(o);return n}class gF{constructor(e,t){this.model=e,this.primitives=t}getRoot(){return this.model.getRoot()}getTypes(){return this.primitives.getTypes()}make(e,t,n){return this.primitives.make(e,t,n)}get(e,t){return e.get(t)}set(e,t,n){try{return e.set(t,n)}catch(r){return e.print(null,"warn"),console.error(r)}}bind(e,t,n){try{return e.bind(t,n)}catch(r){return e.print(null,"warn"),console.error(r)}}unbind(e,t){try{return e.unbind(t)}catch(n){return e.print(null,"warn"),console.error(n)}}add(e,t){return t==null&&(t=this.model.getRoot()),t.add(e)}remove(e){const t=e.parent;if(t)return t.remove(e)}}const hZe=Object.freeze(Object.defineProperty({__proto__:null,API:I4,Animator:mF,Controller:gF},Symbol.toStringTag,{value:"Module"})),dZe=Cje,fZe=HIe,pZe=kje,mZe=GIe,gZe=Tje,vZe=hie,_Ze=VIe,bZe=Hje,vF=UIe,yZe=Object.freeze(Object.defineProperty({__proto__:null,Axis:dZe,Data:fZe,Ease:pZe,GLSL:mZe,JS:gZe,Pretty:vZe,Three:_Ze,Ticks:bZe,VDOM:vF},Symbol.toStringTag,{value:"Module"}));let U5=class{static initClass(){this.Namespace={Model:OIe,Overlay:FIe,Primitives:jje,Render:b$e,Shaders:lZe,Stage:hZe,Util:yZe,DOM:vF},this.Version="2.3.1"}constructor(e,t=null,n=null){let r;this.canvas=r=e.domElement,this.element=null,this.shaders=fF(pF),this.renderables=new zU(HU,e,this.shaders),this.overlays=new LI(FI,r),this.scene=this.renderables.make("scene",{scene:t}),this.camera=this.defaultCamera=n??new pr,this.attributes=new Rz(FE,this),this.primitives=new LU(FE,this),this.root=this.primitives.make("root"),this.model=new OI(this.root),this.guard=new Iz,this.controller=new gF(this.model,this.primitives),this.animator=new mF(this),this.api=new I4(this),this.speed=1,this.time={now:+new Date/1e3,time:0,delta:0,clock:0,step:0}}init(){return this.scene.inject(),this.overlays.inject(),this}destroy(){return this.scene.unject(),this.overlays.unject(),this}resize(e){return e==null&&(e={}),e.renderWidth==null&&(e.renderWidth=e.viewWidth!=null?e.viewWidth:e.viewWidth=1280),e.renderHeight==null&&(e.renderHeight=e.viewHeight!=null?e.viewHeight:e.viewHeight=720),e.pixelRatio==null&&(e.pixelRatio=e.renderWidth/Math.max(1e-6,e.viewWidth)),e.aspect==null&&(e.aspect=e.viewWidth/Math.max(1e-6,e.viewHeight)),this.root.controller.resize(e),this}frame(e){return this.pre(e),this.update(),this.render(),this.post(),this}pre(e){return e||(e={now:+new Date/1e3,time:0,delta:0,clock:0,step:0},e.delta=this.time.now!=null?e.now-this.time.now:0,e.delta>1&&(e.delta=1/60),e.step=e.delta*this.speed,e.time=this.time.time+e.delta,e.clock=this.time.clock+e.step),this.time=e,typeof this.root.controller.pre=="function"&&this.root.controller.pre(),this}update(){return this.animator.update(),this.attributes.compute(),this.guard.iterate({step:()=>{let e=this.attributes.digest();return e||(e=this.model.digest())},last(){return{attribute:this.attributes.getLastTrigger(),model:this.model.getLastTrigger()}}}),typeof this.root.controller.update=="function"&&this.root.controller.update(),this.camera=this.root.controller.getCamera(),this.speed=this.root.controller.getSpeed(),this}render(){return typeof this.root.controller.render=="function"&&this.root.controller.render(),this.scene.render(),this}post(){return typeof this.root.controller.post=="function"&&this.root.controller.post(),this}setWarmup(e){return this.scene.warmup(e),this}getPending(){return this.scene.pending.length}};U5.initClass();const _F=U5,_R=U5.Version;Hi.registerPlugin("mathbox",{defaults:{init:!0,warmup:2,inspect:!0,splash:!0},listen:["ready","pre","update","post","resize"],install(i){let e=!1;return this.first=!0,i.MathBox={init:t=>{if(e)return;e=!0;const n=(t!=null?t.scene:void 0)||this.options.scene||i.scene,r=(t!=null?t.camera:void 0)||this.options.camera||i.camera;this.context=new _F(i.renderer,n,r),this.context.api.three=i.three=i,this.context.api.mathbox=i.mathbox=this.context.api,this.context.api.start=()=>i.Loop.start(),this.context.api.stop=()=>i.Loop.stop(),this.context.init(),this.context.resize(i.Size),this.context.setWarmup(this.options.warmup),this.pending=0,this.warm=!this.options.warmup,console.log("MathBox",_R),i.trigger({type:"mathbox/init",version:_R,context:this.context})},destroy:()=>{e&&(e=!1,i.trigger({type:"mathbox/destroy",context:this.context}),this.context.destroy(),delete i.mathbox,delete this.context.api.three,delete this.context)},object:()=>this.context!=null?this.context.scene.root:void 0}},uninstall(i){i.MathBox.destroy(),delete i.MathBox},ready(i,e){if(this.options.init)return e.MathBox.init(),setTimeout(()=>{if(this.options.inspect&&e.MathBox)return this.inspect(e)})},inspect(i){if(this.context.api.inspect(),!this.options.warmup)return this.info(i)},info(i){const e=function(n){const r=[];for(;n>=1e3;)r.unshift(("000"+n%1e3).slice(-3)),n=Math.floor(n/1e3);return r.unshift(n),r.join(",")},t=i.renderer.info.render;console.log("Geometry  ",e(t.triangles)+" triangles  ",e(t.points)+" points  ",e(t.lines)+" lines  ",e(t.calls)+" draw calls  ")},resize(i,e){return this.context!=null?this.context.resize(e.Size):void 0},pre(i,e){return this.context!=null?this.context.pre(e.Time):void 0},update(i,e){let t;return this.context!=null&&this.context.update(),(t=this.context!=null?this.context.camera:void 0)&&t!==e.camera&&(e.camera=t),e.Time.set({speed:this.context.speed}),this.progress(this.context.getPending(),e),this.context!=null?this.context.render():void 0},post(i,e){return this.context!=null?this.context.post():void 0},progress(i,e){if(!i&&!this.pending)return;let t=Math.max(i+this.options.warmup,this.pending);const n=t-i,r=t;e.trigger({type:"mathbox/progress",current:t-i,total:t}),i===0&&(t=0),this.pending=t,n===r&&!this.warm&&(this.warm=!0,this.options.inspect&&this.info(e))}});var bR={exports:{}};/*! Tweakpane 3.1.10 (c) 2016 cocopon, licensed under the MIT license. */(function(i,e){(function(t,n){n(e)})(it,function(t){class n{constructor(m){const[x,P]=m.split("-"),B=x.split(".");this.major=parseInt(B[0],10),this.minor=parseInt(B[1],10),this.patch=parseInt(B[2],10),this.prerelease=P??null}toString(){const m=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[m,this.prerelease].join("-"):m}}class r{constructor(m){this.controller_=m}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(m){this.controller_.viewProps.set("disabled",m)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(m){this.controller_.viewProps.set("hidden",m)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class s{constructor(m){this.target=m}}class o extends s{constructor(m,x,P,B){super(m),this.value=x,this.presetKey=P,this.last=B??!0}}class a extends s{constructor(m,x,P){super(m),this.value=x,this.presetKey=P}}class l extends s{constructor(m,x){super(m),this.expanded=x}}class c extends s{constructor(m,x){super(m),this.index=x}}function u(M){return M}function h(M){return M==null}function d(M,m){if(M.length!==m.length)return!1;for(let x=0;x<M.length;x++)if(M[x]!==m[x])return!1;return!0}function f(M,m){let x=M;do{const P=Object.getOwnPropertyDescriptor(x,m);if(P&&(P.set!==void 0||P.writable===!0))return!0;x=Object.getPrototypeOf(x)}while(x!==null);return!1}const g={alreadydisposed:()=>"View has been already disposed",invalidparams:M=>`Invalid parameters for '${M.name}'`,nomatchingcontroller:M=>`No matching controller for '${M.key}'`,nomatchingview:M=>`No matching view for '${JSON.stringify(M.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:M=>`Property '${M.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class v{static alreadyDisposed(){return new v({type:"alreadydisposed"})}static notBindable(){return new v({type:"notbindable"})}static propertyNotFound(m){return new v({type:"propertynotfound",context:{name:m}})}static shouldNeverHappen(){return new v({type:"shouldneverhappen"})}constructor(m){var x;this.message=(x=g[m.type](m.context))!==null&&x!==void 0?x:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=m.type}}class y{constructor(m,x,P){this.obj_=m,this.key_=x,this.presetKey_=P??x}static isBindable(m){return!(m===null||typeof m!="object"&&typeof m!="function")}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(m){this.obj_[this.key_]=m}writeProperty(m,x){const P=this.read();if(!y.isBindable(P))throw v.notBindable();if(!(m in P))throw v.propertyNotFound(m);P[m]=x}}class _ extends r{get label(){return this.controller_.props.get("label")}set label(m){this.controller_.props.set("label",m)}get title(){var m;return(m=this.controller_.valueController.props.get("title"))!==null&&m!==void 0?m:""}set title(m){this.controller_.valueController.props.set("title",m)}on(m,x){const P=x.bind(this);return this.controller_.valueController.emitter.on(m,()=>{P(new s(this))}),this}}class S{constructor(){this.observers_={}}on(m,x){let P=this.observers_[m];return P||(P=this.observers_[m]=[]),P.push({handler:x}),this}off(m,x){const P=this.observers_[m];return P&&(this.observers_[m]=P.filter(B=>B.handler!==x)),this}emit(m,x){const P=this.observers_[m];P&&P.forEach(B=>{B.handler(x)})}}const w="tp";function C(M){return(x,P)=>[w,"-",M,"v",x?`_${x}`:"",P?`-${P}`:""].join("")}function E(M,m){return x=>m(M(x))}function k(M){return M.rawValue}function O(M,m){M.emitter.on("change",E(k,m)),m(M.rawValue)}function R(M,m,x){O(M.value(m),x)}function A(M,m,x){x?M.classList.add(m):M.classList.remove(m)}function D(M,m){return x=>{A(M,m,x)}}function I(M,m){O(M,x=>{m.textContent=x??""})}const q=C("btn");class j{constructor(m,x){this.element=m.createElement("div"),this.element.classList.add(q()),x.viewProps.bindClassModifiers(this.element);const P=m.createElement("button");P.classList.add(q("b")),x.viewProps.bindDisabled(P),this.element.appendChild(P),this.buttonElement=P;const B=m.createElement("div");B.classList.add(q("t")),I(x.props.value("title"),B),this.buttonElement.appendChild(B)}}class Y{constructor(m,x){this.emitter=new S,this.onClick_=this.onClick_.bind(this),this.props=x.props,this.viewProps=x.viewProps,this.view=new j(m,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class F{constructor(m,x){var P;this.constraint_=x==null?void 0:x.constraint,this.equals_=(P=x==null?void 0:x.equals)!==null&&P!==void 0?P:(B,he)=>B===he,this.emitter=new S,this.rawValue_=m}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(m){this.setRawValue(m,{forceEmit:!1,last:!0})}setRawValue(m,x){const P=x??{forceEmit:!1,last:!0},B=this.constraint_?this.constraint_.constrain(m):m,he=this.rawValue_;this.equals_(he,B)&&!P.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=B,this.emitter.emit("change",{options:P,previousRawValue:he,rawValue:B,sender:this}))}}class re{constructor(m){this.emitter=new S,this.value_=m}get rawValue(){return this.value_}set rawValue(m){this.setRawValue(m,{forceEmit:!1,last:!0})}setRawValue(m,x){const P=x??{forceEmit:!1,last:!0},B=this.value_;B===m&&!P.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=m,this.emitter.emit("change",{options:P,previousRawValue:B,rawValue:this.value_,sender:this}))}}function ee(M,m){const x=m==null?void 0:m.constraint,P=m==null?void 0:m.equals;return!x&&!P?new re(M):new F(M,m)}class J{constructor(m){this.emitter=new S,this.valMap_=m;for(const x in this.valMap_)this.valMap_[x].emitter.on("change",()=>{this.emitter.emit("change",{key:x,sender:this})})}static createCore(m){return Object.keys(m).reduce((P,B)=>Object.assign(P,{[B]:ee(m[B])}),{})}static fromObject(m){const x=this.createCore(m);return new J(x)}get(m){return this.valMap_[m].rawValue}set(m,x){this.valMap_[m].rawValue=x}value(m){return this.valMap_[m]}}function Ee(M,m){const P=Object.keys(m).reduce((B,he)=>{if(B===void 0)return;const ze=m[he],gt=ze(M[he]);return gt.succeeded?Object.assign(Object.assign({},B),{[he]:gt.value}):void 0},{});return P}function le(M,m){return M.reduce((x,P)=>{if(x===void 0)return;const B=m(P);if(!(!B.succeeded||B.value===void 0))return[...x,B.value]},[])}function ie(M){return M===null?!1:typeof M=="object"}function be(M){return m=>x=>{if(!m&&x===void 0)return{succeeded:!1,value:void 0};if(m&&x===void 0)return{succeeded:!0,value:void 0};const P=M(x);return P!==void 0?{succeeded:!0,value:P}:{succeeded:!1,value:void 0}}}function Je(M){return{custom:m=>be(m)(M),boolean:be(m=>typeof m=="boolean"?m:void 0)(M),number:be(m=>typeof m=="number"?m:void 0)(M),string:be(m=>typeof m=="string"?m:void 0)(M),function:be(m=>typeof m=="function"?m:void 0)(M),constant:m=>be(x=>x===m?m:void 0)(M),raw:be(m=>m)(M),object:m=>be(x=>{if(ie(x))return Ee(x,m)})(M),array:m=>be(x=>{if(Array.isArray(x))return le(x,m)})(M)}}const Xe={optional:Je(!0),required:Je(!1)};function Be(M,m){const x=Xe.required.object(m)(M);return x.succeeded?x.value:void 0}function vt(M){console.warn([`Missing '${M.key}' of ${M.target} in ${M.place}.`,"Please rebuild plugins with the latest core package."].join(" "))}function at(M){return M&&M.parentElement&&M.parentElement.removeChild(M),null}class Le{constructor(m){this.value_=m}static create(m){return[new Le(m),(x,P)=>{m.setRawValue(x,P)}]}get emitter(){return this.value_.emitter}get rawValue(){return this.value_.rawValue}}const Ot=C("");function ft(M,m){return D(M,Ot(void 0,m))}class rt extends J{constructor(m){var x;super(m),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Le.create(ee(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(x=this.get("parent"))===null||x===void 0||x.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(m){var x,P,B;const he=m??{};return new rt(J.createCore({disabled:(x=he.disabled)!==null&&x!==void 0?x:!1,disposed:!1,hidden:(P=he.hidden)!==null&&P!==void 0?P:!1,parent:(B=he.parent)!==null&&B!==void 0?B:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(m){O(this.globalDisabled_,ft(m,"disabled")),R(this,"hidden",ft(m,"hidden"))}bindDisabled(m){O(this.globalDisabled_,x=>{m.disabled=x})}bindTabIndex(m){O(this.globalDisabled_,x=>{m.tabIndex=x?-1:0})}handleDispose(m){this.value("disposed").emitter.on("change",x=>{x&&m()})}getGlobalDisabled_(){const m=this.get("parent");return(m?m.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(m){var x;const P=m.previousRawValue;P==null||P.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(x=this.get("parent"))===null||x===void 0||x.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}function tt(){return["veryfirst","first","last","verylast"]}const se=C(""),ke={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class ae{constructor(m){this.parent_=null,this.blade=m.blade,this.view=m.view,this.viewProps=m.viewProps;const x=this.view.element;this.blade.value("positions").emitter.on("change",()=>{tt().forEach(P=>{x.classList.remove(se(void 0,ke[P]))}),this.blade.get("positions").forEach(P=>{x.classList.add(se(void 0,ke[P]))})}),this.viewProps.handleDispose(()=>{at(x)})}get parent(){return this.parent_}set parent(m){if(this.parent_=m,!("parent"in this.viewProps.valMap_)){vt({key:"parent",target:rt.name,place:"BladeController.parent"});return}this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}}const xe="http://www.w3.org/2000/svg";function Ie(M){M.offsetHeight}function dt(M,m){const x=M.style.transition;M.style.transition="none",m(),M.style.transition=x}function nt(M){return M.ontouchstart!==void 0}function me(){return globalThis}function ue(){return me().document}function Pe(M){const m=M.ownerDocument.defaultView;return m&&"document"in m?M.getContext("2d",{willReadFrequently:!0}):null}const U={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function V(M,m){const x=M.createElementNS(xe,"svg");return x.innerHTML=U[m],x}function Ve(M,m,x){M.insertBefore(m,M.children[x])}function st(M){M.parentElement&&M.parentElement.removeChild(M)}function ve(M){for(;M.children.length>0;)M.removeChild(M.children[0])}function ut(M){for(;M.childNodes.length>0;)M.removeChild(M.childNodes[0])}function Zt(M){return M.relatedTarget?M.relatedTarget:"explicitOriginalTarget"in M?M.explicitOriginalTarget:null}const we=C("lbl");function Se(M,m){const x=M.createDocumentFragment();return m.split(`
`).map(B=>M.createTextNode(B)).forEach((B,he)=>{he>0&&x.appendChild(M.createElement("br")),x.appendChild(B)}),x}class Tt{constructor(m,x){this.element=m.createElement("div"),this.element.classList.add(we()),x.viewProps.bindClassModifiers(this.element);const P=m.createElement("div");P.classList.add(we("l")),R(x.props,"label",he=>{h(he)?this.element.classList.add(we(void 0,"nol")):(this.element.classList.remove(we(void 0,"nol")),ut(P),P.appendChild(Se(m,he)))}),this.element.appendChild(P),this.labelElement=P;const B=m.createElement("div");B.classList.add(we("v")),this.element.appendChild(B),this.valueElement=B}}class zt extends ae{constructor(m,x){const P=x.valueController.viewProps;super(Object.assign(Object.assign({},x),{view:new Tt(m,{props:x.props,viewProps:P}),viewProps:P})),this.props=x.props,this.valueController=x.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const Vt={id:"button",type:"blade",accept(M){const m=Xe,x=Be(M,{title:m.required.string,view:m.required.constant("button"),label:m.optional.string});return x?{params:x}:null},controller(M){return new zt(M.document,{blade:M.blade,props:J.fromObject({label:M.params.label}),valueController:new Y(M.document,{props:J.fromObject({title:M.params.title}),viewProps:M.viewProps})})},api(M){return!(M.controller instanceof zt)||!(M.controller.valueController instanceof Y)?null:new _(M.controller)}};class Gt extends ae{constructor(m){super(m),this.value=m.value}}function Dt(){return new J({positions:ee([],{equals:d})})}class Yt extends J{constructor(m){super(m)}static create(m){const x={completed:!0,expanded:m,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},P=J.createCore(x);return new Yt(P)}get styleExpanded(){var m;return(m=this.get("temporaryExpanded"))!==null&&m!==void 0?m:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const m=this.get("expandedHeight");return this.get("shouldFixHeight")&&!h(m)?`${m}px`:"auto"}bindExpandedClass(m,x){const P=()=>{this.styleExpanded?m.classList.add(x):m.classList.remove(x)};R(this,"expanded",P),R(this,"temporaryExpanded",P)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Yn(M,m){let x=0;return dt(m,()=>{M.set("expandedHeight",null),M.set("temporaryExpanded",!0),Ie(m),x=m.clientHeight,M.set("temporaryExpanded",null),Ie(m)}),x}function Me(M,m){m.style.height=M.styleHeight}function At(M,m){M.value("expanded").emitter.on("beforechange",()=>{if(M.set("completed",!1),h(M.get("expandedHeight"))){const x=Yn(M,m);x>0&&M.set("expandedHeight",x)}M.set("shouldFixHeight",!0),Ie(m)}),M.emitter.on("change",()=>{Me(M,m)}),Me(M,m),m.addEventListener("transitionend",x=>{x.propertyName==="height"&&M.cleanUpTransition()})}class qe extends r{constructor(m,x){super(m),this.rackApi_=x}}function kt(M,m){return M.addBlade(Object.assign(Object.assign({},m),{view:"button"}))}function Lt(M,m){return M.addBlade(Object.assign(Object.assign({},m),{view:"folder"}))}function Te(M,m){const x=m??{};return M.addBlade(Object.assign(Object.assign({},x),{view:"separator"}))}function pn(M,m){return M.addBlade(Object.assign(Object.assign({},m),{view:"tab"}))}class mi{constructor(m){this.emitter=new S,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=m}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(m){for(const x of this.allItems())if(m(x))return x;return null}includes(m){return this.cache_.has(m)}add(m,x){if(this.includes(m))throw v.shouldNeverHappen();const P=x!==void 0?x:this.items_.length;this.items_.splice(P,0,m),this.cache_.add(m);const B=this.extract_(m);B&&(B.emitter.on("add",this.onSubListAdd_),B.emitter.on("remove",this.onSubListRemove_),B.allItems().forEach(he=>{this.cache_.add(he)})),this.emitter.emit("add",{index:P,item:m,root:this,target:this})}remove(m){const x=this.items_.indexOf(m);if(x<0)return;this.items_.splice(x,1),this.cache_.delete(m);const P=this.extract_(m);P&&(P.emitter.off("add",this.onSubListAdd_),P.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:x,item:m,root:this,target:this})}onSubListAdd_(m){this.cache_.add(m.item),this.emitter.emit("add",{index:m.index,item:m.item,root:this,target:m.target})}onSubListRemove_(m){this.cache_.delete(m.item),this.emitter.emit("remove",{index:m.index,item:m.item,root:this,target:m.target})}}class as extends r{constructor(m){super(m),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new S,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(m){this.controller_.props.set("label",m)}on(m,x){const P=x.bind(this);return this.emitter_.on(m,B=>{P(B.event)}),this}refresh(){this.controller_.binding.read()}onBindingChange_(m){const x=m.sender.target.read();this.emitter_.emit("change",{event:new o(this,x,this.controller_.binding.target.presetKey,m.options.last)})}}class Wn extends zt{constructor(m,x){super(m,x),this.binding=x.binding}}class ls extends r{constructor(m){super(m),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new S,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(m){this.controller_.props.set("label",m)}on(m,x){const P=x.bind(this);return this.emitter_.on(m,B=>{P(B.event)}),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(m){const x=m.sender.target.read();this.emitter_.emit("update",{event:new a(this,x,this.controller_.binding.target.presetKey)})}}class Gi extends zt{constructor(m,x){super(m,x),this.binding=x.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose(()=>{this.binding.dispose()})}}function to(M){return M instanceof Ho?M.apiSet_:M instanceof qe?M.rackApi_.apiSet_:null}function dl(M,m){const x=M.find(P=>P.controller_===m);if(!x)throw v.shouldNeverHappen();return x}function Hl(M,m,x){if(!y.isBindable(M))throw v.notBindable();return new y(M,m,x)}class Ho extends r{constructor(m,x){super(m),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new S,this.apiSet_=new mi(to),this.pool_=x;const P=this.controller_.rack;P.emitter.on("add",this.onRackAdd_),P.emitter.on("remove",this.onRackRemove_),P.emitter.on("inputchange",this.onRackInputChange_),P.emitter.on("monitorupdate",this.onRackMonitorUpdate_),P.children.forEach(B=>{this.setUpApi_(B)})}get children(){return this.controller_.rack.children.map(m=>dl(this.apiSet_,m))}addInput(m,x,P){const B=P??{},he=this.controller_.view.element.ownerDocument,ze=this.pool_.createInput(he,Hl(m,x,B.presetKey),B),gt=new as(ze);return this.add(gt,B.index)}addMonitor(m,x,P){const B=P??{},he=this.controller_.view.element.ownerDocument,ze=this.pool_.createMonitor(he,Hl(m,x),B),gt=new ls(ze);return this.add(gt,B.index)}addFolder(m){return Lt(this,m)}addButton(m){return kt(this,m)}addSeparator(m){return Te(this,m)}addTab(m){return pn(this,m)}add(m,x){this.controller_.rack.add(m.controller_,x);const P=this.apiSet_.find(B=>B.controller_===m.controller_);return P&&this.apiSet_.remove(P),this.apiSet_.add(m),m}remove(m){this.controller_.rack.remove(m.controller_)}addBlade(m){const x=this.controller_.view.element.ownerDocument,P=this.pool_.createBlade(x,m),B=this.pool_.createBladeApi(P);return this.add(B,m.index)}on(m,x){const P=x.bind(this);return this.emitter_.on(m,B=>{P(B.event)}),this}setUpApi_(m){this.apiSet_.find(P=>P.controller_===m)||this.apiSet_.add(this.pool_.createBladeApi(m))}onRackAdd_(m){this.setUpApi_(m.bladeController)}onRackRemove_(m){if(m.isRoot){const x=dl(this.apiSet_,m.bladeController);this.apiSet_.remove(x)}}onRackInputChange_(m){const x=m.bladeController;if(x instanceof Wn){const P=dl(this.apiSet_,x),B=x.binding;this.emitter_.emit("change",{event:new o(P,B.target.read(),B.target.presetKey,m.options.last)})}else if(x instanceof Gt){const P=dl(this.apiSet_,x);this.emitter_.emit("change",{event:new o(P,x.value.rawValue,void 0,m.options.last)})}}onRackMonitorUpdate_(m){if(!(m.bladeController instanceof Gi))throw v.shouldNeverHappen();const x=dl(this.apiSet_,m.bladeController),P=m.bladeController.binding;this.emitter_.emit("update",{event:new a(x,P.target.read(),P.target.presetKey)})}}class fl extends qe{constructor(m,x){super(m,new Ho(m.rackController,x)),this.emitter_=new S,this.controller_.foldable.value("expanded").emitter.on("change",P=>{this.emitter_.emit("fold",{event:new l(this,P.sender.rawValue)})}),this.rackApi_.on("change",P=>{this.emitter_.emit("change",{event:P})}),this.rackApi_.on("update",P=>{this.emitter_.emit("update",{event:P})})}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(m){this.controller_.foldable.set("expanded",m)}get title(){return this.controller_.props.get("title")}set title(m){this.controller_.props.set("title",m)}get children(){return this.rackApi_.children}addInput(m,x,P){return this.rackApi_.addInput(m,x,P)}addMonitor(m,x,P){return this.rackApi_.addMonitor(m,x,P)}addFolder(m){return this.rackApi_.addFolder(m)}addButton(m){return this.rackApi_.addButton(m)}addSeparator(m){return this.rackApi_.addSeparator(m)}addTab(m){return this.rackApi_.addTab(m)}add(m,x){return this.rackApi_.add(m,x)}remove(m){this.rackApi_.remove(m)}addBlade(m){return this.rackApi_.addBlade(m)}on(m,x){const P=x.bind(this);return this.emitter_.on(m,B=>{P(B.event)}),this}}class Sc extends ae{constructor(m){super({blade:m.blade,view:m.view,viewProps:m.rackController.viewProps}),this.rackController=m.rackController}}class au{constructor(m,x){const P=C(x.viewName);this.element=m.createElement("div"),this.element.classList.add(P()),x.viewProps.bindClassModifiers(this.element)}}function pd(M,m){for(let x=0;x<M.length;x++){const P=M[x];if(P instanceof Wn&&P.binding===m)return P}return null}function oa(M,m){for(let x=0;x<M.length;x++){const P=M[x];if(P instanceof Gi&&P.binding===m)return P}return null}function lu(M,m){for(let x=0;x<M.length;x++){const P=M[x];if(P instanceof Gt&&P.value===m)return P}return null}function Ms(M){return M instanceof et?M.rack:M instanceof Sc?M.rackController.rack:null}function ne(M){const m=Ms(M);return m?m.bcSet_:null}class je{constructor(m){var x,P;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new S,this.blade_=(x=m.blade)!==null&&x!==void 0?x:null,(P=this.blade_)===null||P===void 0||P.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=m.viewProps,this.bcSet_=new mi(ne),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(m,x){var P;(P=m.parent)===null||P===void 0||P.remove(m),f(m,"parent")?m.parent=this:(m.parent_=this,vt({key:"parent",target:"BladeController",place:"BladeRack.add"})),this.bcSet_.add(m,x)}remove(m){f(m,"parent")?m.parent=null:(m.parent_=null,vt({key:"parent",target:"BladeController",place:"BladeRack.remove"})),this.bcSet_.remove(m)}find(m){return this.bcSet_.allItems().filter(x=>x instanceof m)}onSetAdd_(m){this.updatePositions_();const x=m.target===m.root;if(this.emitter.emit("add",{bladeController:m.item,index:m.index,isRoot:x,sender:this}),!x)return;const P=m.item;if(P.viewProps.emitter.on("change",this.onChildViewPropsChange_),P.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),P.viewProps.handleDispose(this.onChildDispose_),P instanceof Wn)P.binding.emitter.on("change",this.onChildInputChange_);else if(P instanceof Gi)P.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(P instanceof Gt)P.value.emitter.on("change",this.onChildValueChange_);else{const B=Ms(P);if(B){const he=B.emitter;he.on("layout",this.onDescendantLayout_),he.on("inputchange",this.onDescendantInputChange_),he.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(m){this.updatePositions_();const x=m.target===m.root;if(this.emitter.emit("remove",{bladeController:m.item,isRoot:x,sender:this}),!x)return;const P=m.item;if(P instanceof Wn)P.binding.emitter.off("change",this.onChildInputChange_);else if(P instanceof Gi)P.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(P instanceof Gt)P.value.emitter.off("change",this.onChildValueChange_);else{const B=Ms(P);if(B){const he=B.emitter;he.off("layout",this.onDescendantLayout_),he.off("inputchange",this.onDescendantInputChange_),he.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const m=this.bcSet_.items.filter(B=>!B.viewProps.get("hidden")),x=m[0],P=m[m.length-1];this.bcSet_.items.forEach(B=>{const he=[];B===x&&(he.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&he.push("veryfirst")),B===P&&(he.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&he.push("verylast")),B.blade.set("positions",he)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(m){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(x=>x.viewProps.get("disposed")).forEach(x=>{this.bcSet_.remove(x)})}onChildInputChange_(m){const x=pd(this.find(Wn),m.sender);if(!x)throw v.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:x,options:m.options,sender:this})}onChildMonitorUpdate_(m){const x=oa(this.find(Gi),m.sender);if(!x)throw v.alreadyDisposed();this.emitter.emit("monitorupdate",{bladeController:x,sender:this})}onChildValueChange_(m){const x=lu(this.find(Gt),m.sender);if(!x)throw v.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:x,options:m.options,sender:this})}onDescendantLayout_(m){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(m){this.emitter.emit("inputchange",{bladeController:m.bladeController,options:m.options,sender:this})}onDescendantMonitorUpdate_(m){this.emitter.emit("monitorupdate",{bladeController:m.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class et extends ae{constructor(m,x){super(Object.assign(Object.assign({},x),{view:new au(m,{viewName:"brk",viewProps:x.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const P=new je({blade:x.root?void 0:x.blade,viewProps:x.viewProps});P.emitter.on("add",this.onRackAdd_),P.emitter.on("remove",this.onRackRemove_),this.rack=P,this.viewProps.handleDispose(()=>{for(let B=this.rack.children.length-1;B>=0;B--)this.rack.children[B].viewProps.set("disposed",!0)})}onRackAdd_(m){m.isRoot&&Ve(this.view.element,m.bladeController.view.element,m.index)}onRackRemove_(m){m.isRoot&&st(m.bladeController.view.element)}}const Ne=C("cnt");class ot{constructor(m,x){var P;this.className_=C((P=x.viewName)!==null&&P!==void 0?P:"fld"),this.element=m.createElement("div"),this.element.classList.add(this.className_(),Ne()),x.viewProps.bindClassModifiers(this.element),this.foldable_=x.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),R(this.foldable_,"completed",D(this.element,this.className_(void 0,"cpl")));const B=m.createElement("button");B.classList.add(this.className_("b")),R(x.props,"title",yn=>{h(yn)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),x.viewProps.bindDisabled(B),this.element.appendChild(B),this.buttonElement=B;const he=m.createElement("div");he.classList.add(this.className_("i")),this.element.appendChild(he);const ze=m.createElement("div");ze.classList.add(this.className_("t")),I(x.props.value("title"),ze),this.buttonElement.appendChild(ze),this.titleElement=ze;const gt=m.createElement("div");gt.classList.add(this.className_("m")),this.buttonElement.appendChild(gt);const sn=x.containerElement;sn.classList.add(this.className_("c")),this.element.appendChild(sn),this.containerElement=sn}}class Wt extends Sc{constructor(m,x){var P;const B=Yt.create((P=x.expanded)!==null&&P!==void 0?P:!0),he=new et(m,{blade:x.blade,root:x.root,viewProps:x.viewProps});super(Object.assign(Object.assign({},x),{rackController:he,view:new ot(m,{containerElement:he.view.element,foldable:B,props:x.props,viewName:x.root?"rot":void 0,viewProps:x.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=x.props,this.foldable=B,At(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const an={id:"folder",type:"blade",accept(M){const m=Xe,x=Be(M,{title:m.required.string,view:m.required.constant("folder"),expanded:m.optional.boolean});return x?{params:x}:null},controller(M){return new Wt(M.document,{blade:M.blade,expanded:M.params.expanded,props:J.fromObject({title:M.params.title}),viewProps:M.viewProps})},api(M){return M.controller instanceof Wt?new fl(M.controller,M.pool):null}};class tn extends Gt{constructor(m,x){const P=x.valueController.viewProps;super(Object.assign(Object.assign({},x),{value:x.valueController.value,view:new Tt(m,{props:x.props,viewProps:P}),viewProps:P})),this.props=x.props,this.valueController=x.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class mn extends r{}const kn=C("spr");class hn{constructor(m,x){this.element=m.createElement("div"),this.element.classList.add(kn()),x.viewProps.bindClassModifiers(this.element);const P=m.createElement("hr");P.classList.add(kn("r")),this.element.appendChild(P)}}class gn extends ae{constructor(m,x){super(Object.assign(Object.assign({},x),{view:new hn(m,{viewProps:x.viewProps})}))}}const Wi={id:"separator",type:"blade",accept(M){const x=Be(M,{view:Xe.required.constant("separator")});return x?{params:x}:null},controller(M){return new gn(M.document,{blade:M.blade,viewProps:M.viewProps})},api(M){return M.controller instanceof gn?new mn(M.controller):null}},xi=C("tbi");class Wr{constructor(m,x){this.element=m.createElement("div"),this.element.classList.add(xi()),x.viewProps.bindClassModifiers(this.element),R(x.props,"selected",he=>{he?this.element.classList.add(xi(void 0,"sel")):this.element.classList.remove(xi(void 0,"sel"))});const P=m.createElement("button");P.classList.add(xi("b")),x.viewProps.bindDisabled(P),this.element.appendChild(P),this.buttonElement=P;const B=m.createElement("div");B.classList.add(xi("t")),I(x.props.value("title"),B),this.buttonElement.appendChild(B),this.titleElement=B}}class zs{constructor(m,x){this.emitter=new S,this.onClick_=this.onClick_.bind(this),this.props=x.props,this.viewProps=x.viewProps,this.view=new Wr(m,{props:x.props,viewProps:x.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class zn{constructor(m,x){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new zs(m,{props:x.itemProps,viewProps:rt.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new et(m,{blade:Dt(),viewProps:rt.create()}),this.props=x.props,R(this.props,"selected",P=>{this.itemController.props.set("selected",P),this.contentController.viewProps.set("hidden",!P)})}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class _n{constructor(m,x){this.controller_=m,this.rackApi_=x}get title(){var m;return(m=this.controller_.itemController.props.get("title"))!==null&&m!==void 0?m:""}set title(m){this.controller_.itemController.props.set("title",m)}get selected(){return this.controller_.props.get("selected")}set selected(m){this.controller_.props.set("selected",m)}get children(){return this.rackApi_.children}addButton(m){return this.rackApi_.addButton(m)}addFolder(m){return this.rackApi_.addFolder(m)}addSeparator(m){return this.rackApi_.addSeparator(m)}addTab(m){return this.rackApi_.addTab(m)}add(m,x){this.rackApi_.add(m,x)}remove(m){this.rackApi_.remove(m)}addInput(m,x,P){return this.rackApi_.addInput(m,x,P)}addMonitor(m,x,P){return this.rackApi_.addMonitor(m,x,P)}addBlade(m){return this.rackApi_.addBlade(m)}}class aa extends qe{constructor(m,x){super(m,new Ho(m.rackController,x)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new S,this.pageApiMap_=new Map,this.rackApi_.on("change",P=>{this.emitter_.emit("change",{event:P})}),this.rackApi_.on("update",P=>{this.emitter_.emit("update",{event:P})}),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach(P=>{this.setUpPageApi_(P)})}get pages(){return this.controller_.pageSet.items.map(m=>{const x=this.pageApiMap_.get(m);if(!x)throw v.shouldNeverHappen();return x})}addPage(m){const x=this.controller_.view.element.ownerDocument,P=new zn(x,{itemProps:J.fromObject({selected:!1,title:m.title}),props:J.fromObject({selected:!1})});this.controller_.add(P,m.index);const B=this.pageApiMap_.get(P);if(!B)throw v.shouldNeverHappen();return B}removePage(m){this.controller_.remove(m)}on(m,x){const P=x.bind(this);return this.emitter_.on(m,B=>{P(B.event)}),this}setUpPageApi_(m){const x=this.rackApi_.apiSet_.find(B=>B.controller_===m.contentController);if(!x)throw v.shouldNeverHappen();const P=new _n(m,x);this.pageApiMap_.set(m,P)}onPageAdd_(m){this.setUpPageApi_(m.item)}onPageRemove_(m){if(!this.pageApiMap_.get(m.item))throw v.shouldNeverHappen();this.pageApiMap_.delete(m.item)}onSelect_(m){this.emitter_.emit("select",{event:new c(this,m.rawValue)})}}const gr=-1;class Qi{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=ee(!0),this.selectedIndex=ee(gr),this.items_=[]}add(m,x){const P=x??this.items_.length;this.items_.splice(P,0,m),m.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(m){const x=this.items_.indexOf(m);x<0||(this.items_.splice(x,1),m.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=gr,this.empty.rawValue=!0;return}const m=this.items_.findIndex(x=>x.rawValue);m<0?(this.items_.forEach((x,P)=>{x.rawValue=P===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((x,P)=>{x.rawValue=P===m}),this.selectedIndex.rawValue=m),this.empty.rawValue=!1}onItemSelectedChange_(m){if(m.rawValue){const x=this.items_.findIndex(P=>P===m.sender);this.items_.forEach((P,B)=>{P.rawValue=B===x}),this.selectedIndex.rawValue=x}else this.keepSelection_()}}const zr=C("tab");class ql{constructor(m,x){this.element=m.createElement("div"),this.element.classList.add(zr(),Ne()),x.viewProps.bindClassModifiers(this.element),O(x.empty,D(this.element,zr(void 0,"nop")));const P=m.createElement("div");P.classList.add(zr("t")),this.element.appendChild(P),this.itemsElement=P;const B=m.createElement("div");B.classList.add(zr("i")),this.element.appendChild(B);const he=x.contentsElement;he.classList.add(zr("c")),this.element.appendChild(he),this.contentsElement=he}}class pl extends Sc{constructor(m,x){const P=new et(m,{blade:x.blade,viewProps:x.viewProps}),B=new Qi;super({blade:x.blade,rackController:P,view:new ql(m,{contentsElement:P.view.element,empty:B.empty,viewProps:x.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new mi(()=>null),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=B}get pageSet(){return this.pageSet_}add(m,x){this.pageSet_.add(m,x)}remove(m){this.pageSet_.remove(this.pageSet_.items[m])}onPageAdd_(m){const x=m.item;Ve(this.view.itemsElement,x.itemController.view.element,m.index),x.itemController.viewProps.set("parent",this.viewProps),this.rackController.rack.add(x.contentController,m.index),this.tab.add(x.props.value("selected"))}onPageRemove_(m){const x=m.item;st(x.itemController.view.element),x.itemController.viewProps.set("parent",null),this.rackController.rack.remove(x.contentController),this.tab.remove(x.props.value("selected"))}}const er={id:"tab",type:"blade",accept(M){const m=Xe,x=Be(M,{pages:m.required.array(m.required.object({title:m.required.string})),view:m.required.constant("tab")});return!x||x.pages.length===0?null:{params:x}},controller(M){const m=new pl(M.document,{blade:M.blade,viewProps:M.viewProps});return M.params.pages.forEach(x=>{const P=new zn(M.document,{itemProps:J.fromObject({selected:!1,title:x.title}),props:J.fromObject({selected:!1})});m.add(P)}),m},api(M){return M.controller instanceof pl?new aa(M.controller,M.pool):null}};function qo(M,m){const x=M.accept(m.params);if(!x)return null;const P=Xe.optional.boolean(m.params.disabled).value,B=Xe.optional.boolean(m.params.hidden).value;return M.controller({blade:Dt(),document:m.document,params:Object.assign(Object.assign({},x.params),{disabled:P,hidden:B}),viewProps:rt.create({disabled:P,hidden:B})})}class ml{constructor(){this.disabled=!1,this.emitter=new S}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class Is{constructor(m,x){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=m,this.emitter=new S,this.interval_=x,this.setTimer_()}get disabled(){return this.disabled_}set disabled(m){this.disabled_=m,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const m=this.doc_.defaultView;m&&m.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const m=this.doc_.defaultView;m&&(this.timerId_=m.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Mc{constructor(m){this.onValueChange_=this.onValueChange_.bind(this),this.reader=m.reader,this.writer=m.writer,this.emitter=new S,this.value=m.value,this.value.emitter.on("change",this.onValueChange_),this.target=m.target,this.read()}read(){const m=this.target.read();m!==void 0&&(this.value.rawValue=this.reader(m))}write_(m){this.writer(this.target,m)}onValueChange_(m){this.write_(m.rawValue),this.emitter.emit("change",{options:m.options,rawValue:m.rawValue,sender:this})}}function ih(M,m){for(;M.length<m;)M.push(void 0)}function Gl(M){const m=[];return ih(m,M),ee(m)}function Ir(M){const m=M.indexOf(void 0);return m<0?M:M.slice(0,m)}function cs(M,m){const x=[...Ir(M),m];return x.length>M.length?x.splice(0,x.length-M.length):ih(x,M.length),x}class rh{constructor(m){this.onTick_=this.onTick_.bind(this),this.reader_=m.reader,this.target=m.target,this.emitter=new S,this.value=m.value,this.ticker=m.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const m=this.target.read();if(m===void 0)return;const x=this.value.rawValue,P=this.reader_(m);this.value.rawValue=cs(x,P),this.emitter.emit("update",{rawValue:P,sender:this})}onTick_(m){this.read()}}class Wl{constructor(m){this.constraints=m}constrain(m){return this.constraints.reduce((x,P)=>P.constrain(x),m)}}function mo(M,m){if(M instanceof m)return M;if(M instanceof Wl){const x=M.constraints.reduce((P,B)=>P||(B instanceof m?B:null),null);if(x)return x}return null}class go{constructor(m){this.values=J.fromObject({max:m.max,min:m.min})}constrain(m){const x=this.values.get("max"),P=this.values.get("min");return Math.min(Math.max(m,P),x)}}class gl{constructor(m){this.values=J.fromObject({options:m})}get options(){return this.values.get("options")}constrain(m){const x=this.values.get("options");return x.length===0||x.filter(B=>B.value===m).length>0?m:x[0].value}}class cu{constructor(m){this.values=J.fromObject({max:m.max,min:m.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(m){const x=this.values.get("max"),P=this.values.get("min");let B=m;return h(P)||(B=Math.max(B,P)),h(x)||(B=Math.min(B,x)),B}}class Cc{constructor(m,x=0){this.step=m,this.origin=x}constrain(m){const x=this.origin%this.step,P=Math.round((m-x)/this.step);return x+P*this.step}}const Fn=C("lst");class md{constructor(m,x){this.onValueChange_=this.onValueChange_.bind(this),this.props_=x.props,this.element=m.createElement("div"),this.element.classList.add(Fn()),x.viewProps.bindClassModifiers(this.element);const P=m.createElement("select");P.classList.add(Fn("s")),x.viewProps.bindDisabled(P),this.element.appendChild(P),this.selectElement=P;const B=m.createElement("div");B.classList.add(Fn("m")),B.appendChild(V(m,"dropdown")),this.element.appendChild(B),x.value.emitter.on("change",this.onValueChange_),this.value_=x.value,R(this.props_,"options",he=>{ve(this.selectElement),he.forEach(ze=>{const gt=m.createElement("option");gt.textContent=ze.text,this.selectElement.appendChild(gt)}),this.update_()})}update_(){const m=this.props_.get("options").map(x=>x.value);this.selectElement.selectedIndex=m.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class Ta{constructor(m,x){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=x.props,this.value=x.value,this.viewProps=x.viewProps,this.view=new md(m,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(m){const x=m.currentTarget;this.value.rawValue=this.props.get("options")[x.selectedIndex].value}}const gd=C("pop");class uu{constructor(m,x){this.element=m.createElement("div"),this.element.classList.add(gd()),x.viewProps.bindClassModifiers(this.element),O(x.shows,D(this.element,gd(void 0,"v")))}}class vd{constructor(m,x){this.shows=ee(!1),this.viewProps=x.viewProps,this.view=new uu(m,{shows:this.shows,viewProps:this.viewProps})}}const hu=C("txt");class jl{constructor(m,x){this.onChange_=this.onChange_.bind(this),this.element=m.createElement("div"),this.element.classList.add(hu()),x.viewProps.bindClassModifiers(this.element),this.props_=x.props,this.props_.emitter.on("change",this.onChange_);const P=m.createElement("input");P.classList.add(hu("i")),P.type="text",x.viewProps.bindDisabled(P),this.element.appendChild(P),this.inputElement=P,x.value.emitter.on("change",this.onChange_),this.value_=x.value,this.refresh()}refresh(){const m=this.props_.get("formatter");this.inputElement.value=m(this.value_.rawValue)}onChange_(){this.refresh()}}class _d{constructor(m,x){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=x.parser,this.props=x.props,this.value=x.value,this.viewProps=x.viewProps,this.view=new jl(m,{props:x.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(m){const P=m.currentTarget.value,B=this.parser_(P);h(B)||(this.value.rawValue=B),this.view.refresh()}}function T0(M){return String(M)}function $l(M){return M==="false"?!1:!!M}function vo(M){return T0(M)}class bd{constructor(m){this.text=m}evaluate(){return Number(this.text)}toString(){return this.text}}const Bf={"**":(M,m)=>Math.pow(M,m),"*":(M,m)=>M*m,"/":(M,m)=>M/m,"%":(M,m)=>M%m,"+":(M,m)=>M+m,"-":(M,m)=>M-m,"<<":(M,m)=>M<<m,">>":(M,m)=>M>>m,">>>":(M,m)=>M>>>m,"&":(M,m)=>M&m,"^":(M,m)=>M^m,"|":(M,m)=>M|m};class A0{constructor(m,x,P){this.left=x,this.operator=m,this.right=P}evaluate(){const m=Bf[this.operator];if(!m)throw new Error(`unexpected binary operator: '${this.operator}`);return m(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const no={"+":M=>M,"-":M=>-M,"~":M=>~M};class Ec{constructor(m,x){this.operator=m,this.expression=x}evaluate(){const m=no[this.operator];if(!m)throw new Error(`unexpected unary operator: '${this.operator}`);return m(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function yd(M){return(m,x)=>{for(let P=0;P<M.length;P++){const B=M[P](m,x);if(B!=="")return B}return""}}function Fi(M,m){var x;const P=M.substr(m).match(/^\s+/);return(x=P&&P[0])!==null&&x!==void 0?x:""}function Xi(M,m){const x=M.substr(m,1);return x.match(/^[1-9]$/)?x:""}function la(M,m){var x;const P=M.substr(m).match(/^[0-9]+/);return(x=P&&P[0])!==null&&x!==void 0?x:""}function Vf(M,m){const x=la(M,m);if(x!=="")return x;const P=M.substr(m,1);if(m+=1,P!=="-"&&P!=="+")return"";const B=la(M,m);return B===""?"":P+B}function du(M,m){const x=M.substr(m,1);if(m+=1,x.toLowerCase()!=="e")return"";const P=Vf(M,m);return P===""?"":x+P}function fu(M,m){const x=M.substr(m,1);if(x==="0")return x;const P=Xi(M,m);return m+=P.length,P===""?"":P+la(M,m)}function vl(M,m){const x=fu(M,m);if(m+=x.length,x==="")return"";const P=M.substr(m,1);if(m+=P.length,P!==".")return"";const B=la(M,m);return m+=B.length,x+P+B+du(M,m)}function Hf(M,m){const x=M.substr(m,1);if(m+=x.length,x!==".")return"";const P=la(M,m);return m+=P.length,P===""?"":x+P+du(M,m)}function sh(M,m){const x=fu(M,m);return m+=x.length,x===""?"":x+du(M,m)}const Zg=yd([vl,Hf,sh]);function jr(M,m){var x;const P=M.substr(m).match(/^[01]+/);return(x=P&&P[0])!==null&&x!==void 0?x:""}function qf(M,m){const x=M.substr(m,2);if(m+=x.length,x.toLowerCase()!=="0b")return"";const P=jr(M,m);return P===""?"":x+P}function Go(M,m){var x;const P=M.substr(m).match(/^[0-7]+/);return(x=P&&P[0])!==null&&x!==void 0?x:""}function oh(M,m){const x=M.substr(m,2);if(m+=x.length,x.toLowerCase()!=="0o")return"";const P=Go(M,m);return P===""?"":x+P}function Gf(M,m){var x;const P=M.substr(m).match(/^[0-9a-f]+/i);return(x=P&&P[0])!==null&&x!==void 0?x:""}function io(M,m){const x=M.substr(m,2);if(m+=x.length,x.toLowerCase()!=="0x")return"";const P=Gf(M,m);return P===""?"":x+P}const Wf=yd([qf,oh,io]),P0=yd([Wf,Zg]);function jf(M,m){const x=P0(M,m);return m+=x.length,x===""?null:{evaluable:new bd(x),cursor:m}}function $f(M,m){const x=M.substr(m,1);if(m+=x.length,x!=="(")return null;const P=lh(M,m);if(!P)return null;m=P.cursor,m+=Fi(M,m).length;const B=M.substr(m,1);return m+=B.length,B!==")"?null:{evaluable:P.evaluable,cursor:m}}function ah(M,m){var x;return(x=jf(M,m))!==null&&x!==void 0?x:$f(M,m)}function xd(M,m){const x=ah(M,m);if(x)return x;const P=M.substr(m,1);if(m+=P.length,P!=="+"&&P!=="-"&&P!=="~")return null;const B=xd(M,m);return B?(m=B.cursor,{cursor:m,evaluable:new Ec(P,B.evaluable)}):null}function vn(M,m,x){x+=Fi(m,x).length;const P=M.filter(B=>m.startsWith(B,x))[0];return P?(x+=P.length,x+=Fi(m,x).length,{cursor:x,operator:P}):null}function k0(M,m){return(x,P)=>{const B=M(x,P);if(!B)return null;P=B.cursor;let he=B.evaluable;for(;;){const ze=vn(m,x,P);if(!ze)break;P=ze.cursor;const gt=M(x,P);if(!gt)return null;P=gt.cursor,he=new A0(ze.operator,he,gt.evaluable)}return he?{cursor:P,evaluable:he}:null}}const _o=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((M,m)=>k0(M,m),xd);function lh(M,m){return m+=Fi(M,m).length,_o(M,m)}function R0(M){const m=lh(M,0);return!m||m.cursor+Fi(M,m.cursor).length!==M.length?null:m.evaluable}function Cs(M){var m;const x=R0(M);return(m=x==null?void 0:x.evaluate())!==null&&m!==void 0?m:null}function ch(M){if(typeof M=="number")return M;if(typeof M=="string"){const m=Cs(M);if(!h(m))return m}return 0}function wd(M){return String(M)}function Bn(M){return m=>m.toFixed(Math.max(Math.min(M,20),0))}const Xl=Bn(0);function De(M){return Xl(M)+"%"}function $(M){return String(M)}function ge(M){return M}function Q({primary:M,secondary:m,forward:x,backward:P}){let B=!1;function he(ze){B||(B=!0,ze(),B=!1)}M.emitter.on("change",ze=>{he(()=>{m.setRawValue(x(M,m),ze.options)})}),m.emitter.on("change",ze=>{he(()=>{M.setRawValue(P(M,m),ze.options)}),he(()=>{m.setRawValue(x(M,m),ze.options)})}),he(()=>{m.setRawValue(x(M,m),{forceEmit:!1,last:!0})})}function te(M,m){const x=M*(m.altKey?.1:1)*(m.shiftKey?10:1);return m.upKey?+x:m.downKey?-x:0}function Ae(M){return{altKey:M.altKey,downKey:M.key==="ArrowDown",shiftKey:M.shiftKey,upKey:M.key==="ArrowUp"}}function Qe(M){return{altKey:M.altKey,downKey:M.key==="ArrowLeft",shiftKey:M.shiftKey,upKey:M.key==="ArrowRight"}}function Ge(M){return M==="ArrowUp"||M==="ArrowDown"}function Bt(M){return Ge(M)||M==="ArrowLeft"||M==="ArrowRight"}function wn(M,m){var x,P;const B=m.ownerDocument.defaultView,he=m.getBoundingClientRect();return{x:M.pageX-(((x=B&&B.scrollX)!==null&&x!==void 0?x:0)+he.left),y:M.pageY-(((P=B&&B.scrollY)!==null&&P!==void 0?P:0)+he.top)}}class jn{constructor(m){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=m,this.emitter=new S,m.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),m.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),m.addEventListener("touchend",this.onTouchEnd_),m.addEventListener("mousedown",this.onMouseDown_)}computePosition_(m){const x=this.elem_.getBoundingClientRect();return{bounds:{width:x.width,height:x.height},point:m?{x:m.x,y:m.y}:null}}onMouseDown_(m){var x;m.preventDefault(),(x=m.currentTarget)===null||x===void 0||x.focus();const P=this.elem_.ownerDocument;P.addEventListener("mousemove",this.onDocumentMouseMove_),P.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:m.altKey,data:this.computePosition_(wn(m,this.elem_)),sender:this,shiftKey:m.shiftKey})}onDocumentMouseMove_(m){this.emitter.emit("move",{altKey:m.altKey,data:this.computePosition_(wn(m,this.elem_)),sender:this,shiftKey:m.shiftKey})}onDocumentMouseUp_(m){const x=this.elem_.ownerDocument;x.removeEventListener("mousemove",this.onDocumentMouseMove_),x.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:m.altKey,data:this.computePosition_(wn(m,this.elem_)),sender:this,shiftKey:m.shiftKey})}onTouchStart_(m){m.preventDefault();const x=m.targetTouches.item(0),P=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:m.altKey,data:this.computePosition_(x?{x:x.clientX-P.left,y:x.clientY-P.top}:void 0),sender:this,shiftKey:m.shiftKey}),this.lastTouch_=x}onTouchMove_(m){const x=m.targetTouches.item(0),P=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:m.altKey,data:this.computePosition_(x?{x:x.clientX-P.left,y:x.clientY-P.top}:void 0),sender:this,shiftKey:m.shiftKey}),this.lastTouch_=x}onTouchEnd_(m){var x;const P=(x=m.targetTouches.item(0))!==null&&x!==void 0?x:this.lastTouch_,B=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:m.altKey,data:this.computePosition_(P?{x:P.clientX-B.left,y:P.clientY-B.top}:void 0),sender:this,shiftKey:m.shiftKey})}}function nn(M,m,x,P,B){const he=(M-m)/(x-m);return P+he*(B-P)}function rn(M){return String(M.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function lt(M,m,x){return Math.min(Math.max(M,m),x)}function ln(M,m){return(M%m+m)%m}const wi=C("txt");class Yi{constructor(m,x){this.onChange_=this.onChange_.bind(this),this.props_=x.props,this.props_.emitter.on("change",this.onChange_),this.element=m.createElement("div"),this.element.classList.add(wi(),wi(void 0,"num")),x.arrayPosition&&this.element.classList.add(wi(void 0,x.arrayPosition)),x.viewProps.bindClassModifiers(this.element);const P=m.createElement("input");P.classList.add(wi("i")),P.type="text",x.viewProps.bindDisabled(P),this.element.appendChild(P),this.inputElement=P,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=x.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(wi()),this.inputElement.classList.add(wi("i"));const B=m.createElement("div");B.classList.add(wi("k")),this.element.appendChild(B),this.knobElement=B;const he=m.createElementNS(xe,"svg");he.classList.add(wi("g")),this.knobElement.appendChild(he);const ze=m.createElementNS(xe,"path");ze.classList.add(wi("gb")),he.appendChild(ze),this.guideBodyElem_=ze;const gt=m.createElementNS(xe,"path");gt.classList.add(wi("gh")),he.appendChild(gt),this.guideHeadElem_=gt;const sn=m.createElement("div");sn.classList.add(C("tt")()),this.knobElement.appendChild(sn),this.tooltipElem_=sn,x.value.emitter.on("change",this.onChange_),this.value=x.value,this.refresh()}onDraggingChange_(m){if(m.rawValue===null){this.element.classList.remove(wi(void 0,"drg"));return}this.element.classList.add(wi(void 0,"drg"));const x=m.rawValue/this.props_.get("draggingScale"),P=x+(x>0?-1:x<0?1:0),B=lt(-P,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${P+B},0 L${P},4 L${P+B},8`,`M ${x},-1 L${x},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${x},4`);const he=this.props_.get("formatter");this.tooltipElem_.textContent=he(this.value.rawValue),this.tooltipElem_.style.left=`${x}px`}refresh(){const m=this.props_.get("formatter");this.inputElement.value=m(this.value.rawValue)}onChange_(){this.refresh()}}class sr{constructor(m,x){var P;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=x.baseStep,this.parser_=x.parser,this.props=x.props,this.sliderProps_=(P=x.sliderProps)!==null&&P!==void 0?P:null,this.value=x.value,this.viewProps=x.viewProps,this.dragging_=ee(null),this.view=new Yi(m,{arrayPosition:x.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const B=new jn(this.view.knobElement);B.emitter.on("down",this.onPointerDown_),B.emitter.on("move",this.onPointerMove_),B.emitter.on("up",this.onPointerUp_)}constrainValue_(m){var x,P;const B=(x=this.sliderProps_)===null||x===void 0?void 0:x.get("minValue"),he=(P=this.sliderProps_)===null||P===void 0?void 0:P.get("maxValue");let ze=m;return B!==void 0&&(ze=Math.max(ze,B)),he!==void 0&&(ze=Math.min(ze,he)),ze}onInputChange_(m){const P=m.currentTarget.value,B=this.parser_(P);h(B)||(this.value.rawValue=this.constrainValue_(B)),this.view.refresh()}onInputKeyDown_(m){const x=te(this.baseStep_,Ae(m));x!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+x),{forceEmit:!1,last:!1})}onInputKeyUp_(m){te(this.baseStep_,Ae(m))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(m){if(!m.point)return null;const x=m.point.x-m.bounds.width/2;return this.constrainValue_(this.originRawValue_+x*this.props.get("draggingScale"))}onPointerMove_(m){const x=this.computeDraggingValue_(m.data);x!==null&&(this.value.setRawValue(x,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(m){const x=this.computeDraggingValue_(m.data);x!==null&&(this.value.setRawValue(x,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const or=C("sld");class us{constructor(m,x){this.onChange_=this.onChange_.bind(this),this.props_=x.props,this.props_.emitter.on("change",this.onChange_),this.element=m.createElement("div"),this.element.classList.add(or()),x.viewProps.bindClassModifiers(this.element);const P=m.createElement("div");P.classList.add(or("t")),x.viewProps.bindTabIndex(P),this.element.appendChild(P),this.trackElement=P;const B=m.createElement("div");B.classList.add(or("k")),this.trackElement.appendChild(B),this.knobElement=B,x.value.emitter.on("change",this.onChange_),this.value=x.value,this.update_()}update_(){const m=lt(nn(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${m}%`}onChange_(){this.update_()}}class cn{constructor(m,x){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=x.baseStep,this.value=x.value,this.viewProps=x.viewProps,this.props=x.props,this.view=new us(m,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new jn(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(m,x){m.point&&this.value.setRawValue(nn(lt(m.point.x,0,m.bounds.width),0,m.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),x)}onPointerDownOrMove_(m){this.handlePointerEvent_(m.data,{forceEmit:!1,last:!1})}onPointerUp_(m){this.handlePointerEvent_(m.data,{forceEmit:!0,last:!0})}onKeyDown_(m){const x=te(this.baseStep_,Qe(m));x!==0&&this.value.setRawValue(this.value.rawValue+x,{forceEmit:!1,last:!1})}onKeyUp_(m){te(this.baseStep_,Qe(m))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ns=C("sldtxt");class ji{constructor(m,x){this.element=m.createElement("div"),this.element.classList.add(Ns());const P=m.createElement("div");P.classList.add(Ns("s")),this.sliderView_=x.sliderView,P.appendChild(this.sliderView_.element),this.element.appendChild(P);const B=m.createElement("div");B.classList.add(Ns("t")),this.textView_=x.textView,B.appendChild(this.textView_.element),this.element.appendChild(B)}}class bn{constructor(m,x){this.value=x.value,this.viewProps=x.viewProps,this.sliderC_=new cn(m,{baseStep:x.baseStep,props:x.sliderProps,value:x.value,viewProps:this.viewProps}),this.textC_=new sr(m,{baseStep:x.baseStep,parser:x.parser,props:x.textProps,sliderProps:x.sliderProps,value:x.value,viewProps:x.viewProps}),this.view=new ji(m,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function Nr(M,m){M.write(m)}function Es(M){const m=Xe;if(Array.isArray(M))return m.required.array(m.required.object({text:m.required.string,value:m.required.raw}))(M).value;if(typeof M=="object")return m.required.raw(M).value}function un(M){if(M==="inline"||M==="popup")return M}function cr(M){const m=Xe;return m.required.object({max:m.optional.number,min:m.optional.number,step:m.optional.number})(M).value}function En(M){if(Array.isArray(M))return M;const m=[];return Object.keys(M).forEach(x=>{m.push({text:x,value:M[x]})}),m}function ca(M){return h(M)?null:new gl(En(M))}function ur(M){const m=M?mo(M,Cc):null;return m?m.step:null}function hs(M,m){const x=M&&mo(M,Cc);return x?rn(x.step):Math.max(rn(m),2)}function Ur(M){const m=ur(M);return m??1}function gi(M,m){var x;const P=M&&mo(M,Cc),B=Math.abs((x=P==null?void 0:P.step)!==null&&x!==void 0?x:m);return B===0?.1:Math.pow(10,Math.floor(Math.log10(B))-1)}const hr=C("ckb");class Ki{constructor(m,x){this.onValueChange_=this.onValueChange_.bind(this),this.element=m.createElement("div"),this.element.classList.add(hr()),x.viewProps.bindClassModifiers(this.element);const P=m.createElement("label");P.classList.add(hr("l")),this.element.appendChild(P);const B=m.createElement("input");B.classList.add(hr("i")),B.type="checkbox",P.appendChild(B),this.inputElement=B,x.viewProps.bindDisabled(this.inputElement);const he=m.createElement("div");he.classList.add(hr("w")),P.appendChild(he);const ze=V(m,"check");he.appendChild(ze),x.value.emitter.on("change",this.onValueChange_),this.value=x.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class Fe{constructor(m,x){this.onInputChange_=this.onInputChange_.bind(this),this.value=x.value,this.viewProps=x.viewProps,this.view=new Ki(m,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(m){const x=m.currentTarget;this.value.rawValue=x.checked}}function $r(M){const m=[],x=ca(M.options);return x&&m.push(x),new Wl(m)}const Tc={id:"input-bool",type:"input",accept:(M,m)=>{if(typeof M!="boolean")return null;const P=Be(m,{options:Xe.optional.custom(Es)});return P?{initialValue:M,params:P}:null},binding:{reader:M=>$l,constraint:M=>$r(M.params),writer:M=>Nr},controller:M=>{const m=M.document,x=M.value,P=M.constraint,B=P&&mo(P,gl);return B?new Ta(m,{props:new J({options:B.values.value("options")}),value:x,viewProps:M.viewProps}):new Fe(m,{value:x,viewProps:M.viewProps})}},bo=C("col");class Ts{constructor(m,x){this.element=m.createElement("div"),this.element.classList.add(bo()),x.foldable.bindExpandedClass(this.element,bo(void 0,"expanded")),R(x.foldable,"completed",D(this.element,bo(void 0,"cpl")));const P=m.createElement("div");P.classList.add(bo("h")),this.element.appendChild(P);const B=m.createElement("div");B.classList.add(bo("s")),P.appendChild(B),this.swatchElement=B;const he=m.createElement("div");if(he.classList.add(bo("t")),P.appendChild(he),this.textElement=he,x.pickerLayout==="inline"){const ze=m.createElement("div");ze.classList.add(bo("p")),this.element.appendChild(ze),this.pickerElement=ze}else this.pickerElement=null}}function Xr(M,m,x){const P=lt(M/255,0,1),B=lt(m/255,0,1),he=lt(x/255,0,1),ze=Math.max(P,B,he),gt=Math.min(P,B,he),sn=ze-gt;let yn=0,Ai=0;const Ci=(gt+ze)/2;return sn!==0&&(Ai=sn/(1-Math.abs(ze+gt-1)),P===ze?yn=(B-he)/sn:B===ze?yn=2+(he-P)/sn:yn=4+(P-B)/sn,yn=yn/6+(yn<0?1:0)),[yn*360,Ai*100,Ci*100]}function Us(M,m,x){const P=(M%360+360)%360,B=lt(m/100,0,1),he=lt(x/100,0,1),ze=(1-Math.abs(2*he-1))*B,gt=ze*(1-Math.abs(P/60%2-1)),sn=he-ze/2;let yn,Ai,Ci;return P>=0&&P<60?[yn,Ai,Ci]=[ze,gt,0]:P>=60&&P<120?[yn,Ai,Ci]=[gt,ze,0]:P>=120&&P<180?[yn,Ai,Ci]=[0,ze,gt]:P>=180&&P<240?[yn,Ai,Ci]=[0,gt,ze]:P>=240&&P<300?[yn,Ai,Ci]=[gt,0,ze]:[yn,Ai,Ci]=[ze,0,gt],[(yn+sn)*255,(Ai+sn)*255,(Ci+sn)*255]}function Fr(M,m,x){const P=lt(M/255,0,1),B=lt(m/255,0,1),he=lt(x/255,0,1),ze=Math.max(P,B,he),gt=Math.min(P,B,he),sn=ze-gt;let yn;sn===0?yn=0:ze===P?yn=60*(((B-he)/sn%6+6)%6):ze===B?yn=60*((he-P)/sn+2):yn=60*((P-B)/sn+4);const Ai=ze===0?0:sn/ze,Ci=ze;return[yn,Ai*100,Ci*100]}function Fs(M,m,x){const P=ln(M,360),B=lt(m/100,0,1),he=lt(x/100,0,1),ze=he*B,gt=ze*(1-Math.abs(P/60%2-1)),sn=he-ze;let yn,Ai,Ci;return P>=0&&P<60?[yn,Ai,Ci]=[ze,gt,0]:P>=60&&P<120?[yn,Ai,Ci]=[gt,ze,0]:P>=120&&P<180?[yn,Ai,Ci]=[0,ze,gt]:P>=180&&P<240?[yn,Ai,Ci]=[0,gt,ze]:P>=240&&P<300?[yn,Ai,Ci]=[gt,0,ze]:[yn,Ai,Ci]=[ze,0,gt],[(yn+sn)*255,(Ai+sn)*255,(Ci+sn)*255]}function Bs(M,m,x){const P=x+m*(100-Math.abs(2*x-100))/200;return[M,P!==0?m*(100-Math.abs(2*x-100))/P:0,x+m*(100-Math.abs(2*x-100))/(2*100)]}function Yl(M,m,x){const P=100-Math.abs(x*(200-m)/100-100);return[M,P!==0?m*x/P:0,x*(200-m)/(2*100)]}function Br(M){return[M[0],M[1],M[2]]}function Vs(M,m){return[M[0],M[1],M[2],m]}const _e={hsl:{hsl:(M,m,x)=>[M,m,x],hsv:Bs,rgb:Us},hsv:{hsl:Yl,hsv:(M,m,x)=>[M,m,x],rgb:Fs},rgb:{hsl:Xr,hsv:Fr,rgb:(M,m,x)=>[M,m,x]}};function Ke(M,m){return[m==="float"?1:M==="rgb"?255:360,m==="float"?1:M==="rgb"?255:100,m==="float"?1:M==="rgb"?255:100]}function We(M,m){return M===m?m:ln(M,m)}function It(M,m,x){var P;const B=Ke(m,x);return[m==="rgb"?lt(M[0],0,B[0]):We(M[0],B[0]),lt(M[1],0,B[1]),lt(M[2],0,B[2]),lt((P=M[3])!==null&&P!==void 0?P:1,0,1)]}function Oe(M,m,x,P){const B=Ke(m,x),he=Ke(m,P);return M.map((ze,gt)=>ze/B[gt]*he[gt])}function Ln(M,m,x){const P=Oe(M,m.mode,m.type,"int"),B=_e[m.mode][x.mode](...P);return Oe(B,x.mode,"int",x.type)}function zi(M,m){return typeof M!="object"||h(M)?!1:m in M&&typeof M[m]=="number"}class $t{static black(m="int"){return new $t([0,0,0],"rgb",m)}static fromObject(m,x="int"){const P="a"in m?[m.r,m.g,m.b,m.a]:[m.r,m.g,m.b];return new $t(P,"rgb",x)}static toRgbaObject(m,x="int"){return m.toRgbaObject(x)}static isRgbColorObject(m){return zi(m,"r")&&zi(m,"g")&&zi(m,"b")}static isRgbaColorObject(m){return this.isRgbColorObject(m)&&zi(m,"a")}static isColorObject(m){return this.isRgbColorObject(m)}static equals(m,x){if(m.mode!==x.mode)return!1;const P=m.comps_,B=x.comps_;for(let he=0;he<P.length;he++)if(P[he]!==B[he])return!1;return!0}constructor(m,x,P="int"){this.mode=x,this.type=P,this.comps_=It(m,x,P)}getComponents(m,x="int"){return Vs(Ln(Br(this.comps_),{mode:this.mode,type:this.type},{mode:m??this.mode,type:x}),this.comps_[3])}toRgbaObject(m="int"){const x=this.getComponents("rgb",m);return{r:x[0],g:x[1],b:x[2],a:x[3]}}}const Bi=C("colp");class Ac{constructor(m,x){this.alphaViews_=null,this.element=m.createElement("div"),this.element.classList.add(Bi()),x.viewProps.bindClassModifiers(this.element);const P=m.createElement("div");P.classList.add(Bi("hsv"));const B=m.createElement("div");B.classList.add(Bi("sv")),this.svPaletteView_=x.svPaletteView,B.appendChild(this.svPaletteView_.element),P.appendChild(B);const he=m.createElement("div");he.classList.add(Bi("h")),this.hPaletteView_=x.hPaletteView,he.appendChild(this.hPaletteView_.element),P.appendChild(he),this.element.appendChild(P);const ze=m.createElement("div");if(ze.classList.add(Bi("rgb")),this.textView_=x.textView,ze.appendChild(this.textView_.element),this.element.appendChild(ze),x.alphaViews){this.alphaViews_={palette:x.alphaViews.palette,text:x.alphaViews.text};const gt=m.createElement("div");gt.classList.add(Bi("a"));const sn=m.createElement("div");sn.classList.add(Bi("ap")),sn.appendChild(this.alphaViews_.palette.element),gt.appendChild(sn);const yn=m.createElement("div");yn.classList.add(Bi("at")),yn.appendChild(this.alphaViews_.text.element),gt.appendChild(yn),this.element.appendChild(gt)}}get allFocusableElements(){const m=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(x=>x.inputElement)];return this.alphaViews_&&m.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),m}}function ds(M){return M==="int"?"int":M==="float"?"float":void 0}function Aa(M){const m=Xe;return Be(M,{alpha:m.optional.boolean,color:m.optional.object({alpha:m.optional.boolean,type:m.optional.custom(ds)}),expanded:m.optional.boolean,picker:m.optional.custom(un)})}function vr(M){return M?.1:1}function Si(M){var m;return(m=M.color)===null||m===void 0?void 0:m.type}function yo(M,m){return M.alpha===m.alpha&&M.mode===m.mode&&M.notation===m.notation&&M.type===m.type}function ar(M,m){const x=M.match(/^(.+)%$/);return Math.min(x?parseFloat(x[1])*.01*m:parseFloat(M),m)}const di={deg:M=>M,grad:M=>M*360/400,rad:M=>M*360/(2*Math.PI),turn:M=>M*360};function Pa(M){const m=M.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!m)return parseFloat(M);const x=parseFloat(m[1]),P=m[2];return di[P](x)}function Wo(M){const m=M.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!m)return null;const x=[ar(m[1],255),ar(m[2],255),ar(m[3],255)];return isNaN(x[0])||isNaN(x[1])||isNaN(x[2])?null:x}function fs(M){return m=>{const x=Wo(m);return x?new $t(x,"rgb",M):null}}function Kl(M){const m=M.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!m)return null;const x=[ar(m[1],255),ar(m[2],255),ar(m[3],255),ar(m[4],1)];return isNaN(x[0])||isNaN(x[1])||isNaN(x[2])||isNaN(x[3])?null:x}function Pc(M){return m=>{const x=Kl(m);return x?new $t(x,"rgb",M):null}}function kc(M){const m=M.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!m)return null;const x=[Pa(m[1]),ar(m[2],100),ar(m[3],100)];return isNaN(x[0])||isNaN(x[1])||isNaN(x[2])?null:x}function ua(M){return m=>{const x=kc(m);return x?new $t(x,"hsl",M):null}}function Hs(M){const m=M.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!m)return null;const x=[Pa(m[1]),ar(m[2],100),ar(m[3],100),ar(m[4],1)];return isNaN(x[0])||isNaN(x[1])||isNaN(x[2])||isNaN(x[3])?null:x}function jo(M){return m=>{const x=Hs(m);return x?new $t(x,"hsl",M):null}}function fi(M){const m=M.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(m)return[parseInt(m[1]+m[1],16),parseInt(m[2]+m[2],16),parseInt(m[3]+m[3],16)];const x=M.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return x?[parseInt(x[1],16),parseInt(x[2],16),parseInt(x[3],16)]:null}function ka(M){const m=fi(M);return m?new $t(m,"rgb","int"):null}function zo(M){const m=M.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(m)return[parseInt(m[1]+m[1],16),parseInt(m[2]+m[2],16),parseInt(m[3]+m[3],16),nn(parseInt(m[4]+m[4],16),0,255,0,1)];const x=M.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return x?[parseInt(x[1],16),parseInt(x[2],16),parseInt(x[3],16),nn(parseInt(x[4],16),0,255,0,1)]:null}function $o(M){const m=zo(M);return m?new $t(m,"rgb","int"):null}function ro(M){const m=M.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!m)return null;const x=[parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])];return isNaN(x[0])||isNaN(x[1])||isNaN(x[2])?null:x}function _l(M){return m=>{const x=ro(m);return x?new $t(x,"rgb",M):null}}function ha(M){const m=M.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!m)return null;const x=[parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]),parseFloat(m[4])];return isNaN(x[0])||isNaN(x[1])||isNaN(x[2])||isNaN(x[3])?null:x}function qs(M){return m=>{const x=ha(m);return x?new $t(x,"rgb",M):null}}const Rn=[{parser:fi,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:zo,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Wo,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Kl,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:kc,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Hs,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:ro,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:ha,result:{alpha:!0,mode:"rgb",notation:"object"}}];function dn(M){return Rn.reduce((m,{parser:x,result:P})=>m||(x(M)?P:null),null)}function bi(M,m="int"){const x=dn(M);return x?x.notation==="hex"&&m!=="float"?Object.assign(Object.assign({},x),{type:"int"}):x.notation==="func"?Object.assign(Object.assign({},x),{type:m}):null:null}const _r={int:[ka,$o,fs("int"),Pc("int"),ua("int"),jo("int"),_l("int"),qs("int")],float:[fs("float"),Pc("float"),ua("float"),jo("float"),_l("float"),qs("float")]};function Kt(M){const m=_r[M];return x=>{if(typeof x!="string")return $t.black(M);const P=m.reduce((B,he)=>B||he(x),null);return P??$t.black(M)}}function $n(M){const m=_r[M];return x=>m.reduce((P,B)=>P||B(x),null)}function fn(M){const m=lt(Math.floor(M),0,255).toString(16);return m.length===1?`0${m}`:m}function Kn(M,m="#"){const x=Br(M.getComponents("rgb")).map(fn).join("");return`${m}${x}`}function Pr(M,m="#"){const x=M.getComponents("rgb"),P=[x[0],x[1],x[2],x[3]*255].map(fn).join("");return`${m}${P}`}function vi(M,m){const x=Bn(m==="float"?2:0);return`rgb(${Br(M.getComponents("rgb",m)).map(B=>x(B)).join(", ")})`}function kr(M){return m=>vi(m,M)}function li(M,m){const x=Bn(2),P=Bn(m==="float"?2:0);return`rgba(${M.getComponents("rgb",m).map((he,ze)=>(ze===3?x:P)(he)).join(", ")})`}function Mi(M){return m=>li(m,M)}function br(M){const m=[Bn(0),De,De];return`hsl(${Br(M.getComponents("hsl")).map((P,B)=>m[B](P)).join(", ")})`}function Zi(M){const m=[Bn(0),De,De,Bn(2)];return`hsla(${M.getComponents("hsl").map((P,B)=>m[B](P)).join(", ")})`}function Io(M,m){const x=Bn(m==="float"?2:0),P=["r","g","b"];return`{${Br(M.getComponents("rgb",m)).map((he,ze)=>`${P[ze]}: ${x(he)}`).join(", ")}}`}function yr(M){return m=>Io(m,M)}function Gs(M,m){const x=Bn(2),P=Bn(m==="float"?2:0),B=["r","g","b","a"];return`{${M.getComponents("rgb",m).map((ze,gt)=>{const sn=gt===3?x:P;return`${B[gt]}: ${sn(ze)}`}).join(", ")}}`}function xo(M){return m=>Gs(m,M)}const so=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Kn},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Pr},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:br},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:Zi},...["int","float"].reduce((M,m)=>[...M,{format:{alpha:!1,mode:"rgb",notation:"func",type:m},stringifier:kr(m)},{format:{alpha:!0,mode:"rgb",notation:"func",type:m},stringifier:Mi(m)},{format:{alpha:!1,mode:"rgb",notation:"object",type:m},stringifier:yr(m)},{format:{alpha:!0,mode:"rgb",notation:"object",type:m},stringifier:xo(m)}],[])];function dr(M){return so.reduce((m,x)=>m||(yo(x.format,M)?x.stringifier:null),null)}const fr=C("apl");class da{constructor(m,x){this.onValueChange_=this.onValueChange_.bind(this),this.value=x.value,this.value.emitter.on("change",this.onValueChange_),this.element=m.createElement("div"),this.element.classList.add(fr()),x.viewProps.bindClassModifiers(this.element),x.viewProps.bindTabIndex(this.element);const P=m.createElement("div");P.classList.add(fr("b")),this.element.appendChild(P);const B=m.createElement("div");B.classList.add(fr("c")),P.appendChild(B),this.colorElem_=B;const he=m.createElement("div");he.classList.add(fr("m")),this.element.appendChild(he),this.markerElem_=he;const ze=m.createElement("div");ze.classList.add(fr("p")),this.markerElem_.appendChild(ze),this.previewElem_=ze,this.update_()}update_(){const m=this.value.rawValue,x=m.getComponents("rgb"),P=new $t([x[0],x[1],x[2],0],"rgb"),B=new $t([x[0],x[1],x[2],255],"rgb"),he=["to right",li(P),li(B)];this.colorElem_.style.background=`linear-gradient(${he.join(",")})`,this.previewElem_.style.backgroundColor=li(m);const ze=nn(x[3],0,1,0,100);this.markerElem_.style.left=`${ze}%`}onValueChange_(){this.update_()}}class Rc{constructor(m,x){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=x.value,this.viewProps=x.viewProps,this.view=new da(m,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new jn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(m,x){if(!m.point)return;const P=m.point.x/m.bounds.width,B=this.value.rawValue,[he,ze,gt]=B.getComponents("hsv");this.value.setRawValue(new $t([he,ze,gt,P],"hsv"),x)}onPointerDown_(m){this.handlePointerEvent_(m.data,{forceEmit:!1,last:!1})}onPointerMove_(m){this.handlePointerEvent_(m.data,{forceEmit:!1,last:!1})}onPointerUp_(m){this.handlePointerEvent_(m.data,{forceEmit:!0,last:!0})}onKeyDown_(m){const x=te(vr(!0),Qe(m));if(x===0)return;const P=this.value.rawValue,[B,he,ze,gt]=P.getComponents("hsv");this.value.setRawValue(new $t([B,he,ze,gt+x],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(m){te(vr(!0),Qe(m))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const tr=C("coltxt");function Yr(M){const m=M.createElement("select"),x=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return m.appendChild(x.reduce((P,B)=>{const he=M.createElement("option");return he.textContent=B.text,he.value=B.value,P.appendChild(he),P},M.createDocumentFragment())),m}class Ra{constructor(m,x){this.element=m.createElement("div"),this.element.classList.add(tr()),x.viewProps.bindClassModifiers(this.element);const P=m.createElement("div");P.classList.add(tr("m")),this.modeElem_=Yr(m),this.modeElem_.classList.add(tr("ms")),P.appendChild(this.modeSelectElement),x.viewProps.bindDisabled(this.modeElem_);const B=m.createElement("div");B.classList.add(tr("mm")),B.appendChild(V(m,"dropdown")),P.appendChild(B),this.element.appendChild(P);const he=m.createElement("div");he.classList.add(tr("w")),this.element.appendChild(he),this.textsElem_=he,this.textViews_=x.textViews,this.applyTextViews_(),O(x.colorMode,ze=>{this.modeElem_.value=ze})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(m){this.textViews_=m,this.applyTextViews_()}applyTextViews_(){ve(this.textsElem_);const m=this.element.ownerDocument;this.textViews_.forEach(x=>{const P=m.createElement("div");P.classList.add(tr("c")),P.appendChild(x.element),this.textsElem_.appendChild(P)})}}function Xf(M){return Bn(M==="float"?2:0)}function O0(M,m,x){const P=Ke(M,m)[x];return new go({min:0,max:P})}function Oc(M,m,x){return new sr(M,{arrayPosition:x===0?"fst":x===3-1?"lst":"mid",baseStep:vr(!1),parser:m.parser,props:J.fromObject({draggingScale:m.colorType==="float"?.01:1,formatter:Xf(m.colorType)}),value:ee(0,{constraint:O0(m.colorMode,m.colorType,x)}),viewProps:m.viewProps})}class No{constructor(m,x){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=x.colorType,this.parser_=x.parser,this.value=x.value,this.viewProps=x.viewProps,this.colorMode=ee(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(m),this.view=new Ra(m,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(m){const x={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},P=[Oc(m,x,0),Oc(m,x,1),Oc(m,x,2)];return P.forEach((B,he)=>{Q({primary:this.value,secondary:B.value,forward:ze=>ze.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[he],backward:(ze,gt)=>{const sn=this.colorMode.rawValue,yn=ze.rawValue.getComponents(sn,this.colorType_);return yn[he]=gt.rawValue,new $t(Vs(Br(yn),yn[3]),sn,this.colorType_)}})}),P}onModeSelectChange_(m){const x=m.currentTarget;this.colorMode.rawValue=x.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const fa=C("hpl");class uh{constructor(m,x){this.onValueChange_=this.onValueChange_.bind(this),this.value=x.value,this.value.emitter.on("change",this.onValueChange_),this.element=m.createElement("div"),this.element.classList.add(fa()),x.viewProps.bindClassModifiers(this.element),x.viewProps.bindTabIndex(this.element);const P=m.createElement("div");P.classList.add(fa("c")),this.element.appendChild(P);const B=m.createElement("div");B.classList.add(fa("m")),this.element.appendChild(B),this.markerElem_=B,this.update_()}update_(){const m=this.value.rawValue,[x]=m.getComponents("hsv");this.markerElem_.style.backgroundColor=vi(new $t([x,100,100],"hsv"));const P=nn(x,0,360,0,100);this.markerElem_.style.left=`${P}%`}onValueChange_(){this.update_()}}class X{constructor(m,x){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=x.value,this.viewProps=x.viewProps,this.view=new uh(m,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new jn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(m,x){if(!m.point)return;const P=nn(lt(m.point.x,0,m.bounds.width),0,m.bounds.width,0,360),B=this.value.rawValue,[,he,ze,gt]=B.getComponents("hsv");this.value.setRawValue(new $t([P,he,ze,gt],"hsv"),x)}onPointerDown_(m){this.handlePointerEvent_(m.data,{forceEmit:!1,last:!1})}onPointerMove_(m){this.handlePointerEvent_(m.data,{forceEmit:!1,last:!1})}onPointerUp_(m){this.handlePointerEvent_(m.data,{forceEmit:!0,last:!0})}onKeyDown_(m){const x=te(vr(!1),Qe(m));if(x===0)return;const P=this.value.rawValue,[B,he,ze,gt]=P.getComponents("hsv");this.value.setRawValue(new $t([B+x,he,ze,gt],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(m){te(vr(!1),Qe(m))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const pu=C("svp"),Yf=64;class Oa{constructor(m,x){this.onValueChange_=this.onValueChange_.bind(this),this.value=x.value,this.value.emitter.on("change",this.onValueChange_),this.element=m.createElement("div"),this.element.classList.add(pu()),x.viewProps.bindClassModifiers(this.element),x.viewProps.bindTabIndex(this.element);const P=m.createElement("canvas");P.height=Yf,P.width=Yf,P.classList.add(pu("c")),this.element.appendChild(P),this.canvasElement=P;const B=m.createElement("div");B.classList.add(pu("m")),this.element.appendChild(B),this.markerElem_=B,this.update_()}update_(){const m=Pe(this.canvasElement);if(!m)return;const P=this.value.rawValue.getComponents("hsv"),B=this.canvasElement.width,he=this.canvasElement.height,ze=m.getImageData(0,0,B,he),gt=ze.data;for(let Ai=0;Ai<he;Ai++)for(let Ci=0;Ci<B;Ci++){const _u=nn(Ci,0,B,0,100),gh=nn(Ai,0,he,100,0),Ed=Fs(P[0],_u,gh),Td=(Ai*B+Ci)*4;gt[Td]=Ed[0],gt[Td+1]=Ed[1],gt[Td+2]=Ed[2],gt[Td+3]=255}m.putImageData(ze,0,0);const sn=nn(P[1],0,100,0,100);this.markerElem_.style.left=`${sn}%`;const yn=nn(P[2],0,100,100,0);this.markerElem_.style.top=`${yn}%`}onValueChange_(){this.update_()}}class _i{constructor(m,x){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=x.value,this.viewProps=x.viewProps,this.view=new Oa(m,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new jn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(m,x){if(!m.point)return;const P=nn(m.point.x,0,m.bounds.width,0,100),B=nn(m.point.y,0,m.bounds.height,100,0),[he,,,ze]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new $t([he,P,B,ze],"hsv"),x)}onPointerDown_(m){this.handlePointerEvent_(m.data,{forceEmit:!1,last:!1})}onPointerMove_(m){this.handlePointerEvent_(m.data,{forceEmit:!1,last:!1})}onPointerUp_(m){this.handlePointerEvent_(m.data,{forceEmit:!0,last:!0})}onKeyDown_(m){Bt(m.key)&&m.preventDefault();const[x,P,B,he]=this.value.rawValue.getComponents("hsv"),ze=vr(!1),gt=te(ze,Qe(m)),sn=te(ze,Ae(m));gt===0&&sn===0||this.value.setRawValue(new $t([x,P+gt,B+sn,he],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(m){const x=vr(!1),P=te(x,Qe(m)),B=te(x,Ae(m));P===0&&B===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class A3{constructor(m,x){this.value=x.value,this.viewProps=x.viewProps,this.hPaletteC_=new X(m,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new _i(m,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=x.supportsAlpha?{palette:new Rc(m,{value:this.value,viewProps:this.viewProps}),text:new sr(m,{parser:Cs,baseStep:.1,props:J.fromObject({draggingScale:.01,formatter:Bn(2)}),value:ee(0,{constraint:new go({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Q({primary:this.value,secondary:this.alphaIcs_.text.value,forward:P=>P.rawValue.getComponents()[3],backward:(P,B)=>{const he=P.rawValue.getComponents();return he[3]=B.rawValue,new $t(he,P.rawValue.mode)}}),this.textC_=new No(m,{colorType:x.colorType,parser:Cs,value:this.value,viewProps:this.viewProps}),this.view=new Ac(m,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:x.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}get textController(){return this.textC_}}const Jg=C("colsw");class P3{constructor(m,x){this.onValueChange_=this.onValueChange_.bind(this),x.value.emitter.on("change",this.onValueChange_),this.value=x.value,this.element=m.createElement("div"),this.element.classList.add(Jg()),x.viewProps.bindClassModifiers(this.element);const P=m.createElement("div");P.classList.add(Jg("sw")),this.element.appendChild(P),this.swatchElem_=P;const B=m.createElement("button");B.classList.add(Jg("b")),x.viewProps.bindDisabled(B),this.element.appendChild(B),this.buttonElement=B,this.update_()}update_(){const m=this.value.rawValue;this.swatchElem_.style.backgroundColor=Pr(m)}onValueChange_(){this.update_()}}class hh{constructor(m,x){this.value=x.value,this.viewProps=x.viewProps,this.view=new P3(m,{value:this.value,viewProps:this.viewProps})}}class Qg{constructor(m,x){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=x.value,this.viewProps=x.viewProps,this.foldable_=Yt.create(x.expanded),this.swatchC_=new hh(m,{value:this.value,viewProps:this.viewProps});const P=this.swatchC_.view.buttonElement;P.addEventListener("blur",this.onButtonBlur_),P.addEventListener("click",this.onButtonClick_),this.textC_=new _d(m,{parser:x.parser,props:J.fromObject({formatter:x.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Ts(m,{foldable:this.foldable_,pickerLayout:x.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=x.pickerLayout==="popup"?new vd(m,{viewProps:this.viewProps}):null;const B=new A3(m,{colorType:x.colorType,supportsAlpha:x.supportsAlpha,value:this.value,viewProps:this.viewProps});B.view.allFocusableElements.forEach(he=>{he.addEventListener("blur",this.onPopupChildBlur_),he.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=B,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(B.view.element),Q({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:he=>he.rawValue,backward:(he,ze)=>ze.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),At(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(m){if(!this.popC_)return;const x=this.view.element,P=m.relatedTarget;(!P||!x.contains(P))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(m){if(!this.popC_)return;const x=this.popC_.view.element,P=Zt(m);P&&x.contains(P)||P&&P===this.swatchC_.view.buttonElement&&!nt(x.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(m){this.popC_?m.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&m.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function k3(M,m){return $t.isColorObject(M)?$t.fromObject(M,m):$t.black(m)}function R3(M){return Br(M.getComponents("rgb")).reduce((m,x)=>m<<8|Math.floor(x)&255,0)}function O3(M){return M.getComponents("rgb").reduce((m,x,P)=>{const B=Math.floor(P===3?x*255:x)&255;return m<<8|B},0)>>>0}function L3(M){return new $t([M>>16&255,M>>8&255,M&255],"rgb")}function Lc(M){return new $t([M>>24&255,M>>16&255,M>>8&255,nn(M&255,0,255,0,1)],"rgb")}function D3(M){return typeof M!="number"?$t.black():L3(M)}function z3(M){return typeof M!="number"?$t.black():Lc(M)}function I3(M){const m=dr(M);return m?(x,P)=>{Nr(x,m(P))}:null}function N3(M){const m=M?O3:R3;return(x,P)=>{Nr(x,m(P))}}function U3(M,m,x){const P=m.toRgbaObject(x);M.writeProperty("r",P.r),M.writeProperty("g",P.g),M.writeProperty("b",P.b),M.writeProperty("a",P.a)}function Dc(M,m,x){const P=m.toRgbaObject(x);M.writeProperty("r",P.r),M.writeProperty("g",P.g),M.writeProperty("b",P.b)}function F3(M,m){return(x,P)=>{M?U3(x,P,m):Dc(x,P,m)}}function ev(M){var m;return!!(M!=null&&M.alpha||!((m=M==null?void 0:M.color)===null||m===void 0)&&m.alpha)}function B3(M){return M?m=>Pr(m,"0x"):m=>Kn(m,"0x")}function V3(M){return"color"in M||"view"in M&&M.view==="color"}const H3={id:"input-color-number",type:"input",accept:(M,m)=>{if(typeof M!="number"||!V3(m))return null;const x=Aa(m);return x?{initialValue:M,params:x}:null},binding:{reader:M=>ev(M.params)?z3:D3,equals:$t.equals,writer:M=>N3(ev(M.params))},controller:M=>{const m=ev(M.params),x="expanded"in M.params?M.params.expanded:void 0,P="picker"in M.params?M.params.picker:void 0;return new Qg(M.document,{colorType:"int",expanded:x??!1,formatter:B3(m),parser:$n("int"),pickerLayout:P??"popup",supportsAlpha:m,value:M.value,viewProps:M.viewProps})}};function dh(M){return $t.isRgbaColorObject(M)}function q3(M){return m=>k3(m,M)}function G3(M,m){return x=>M?Gs(x,m):Io(x,m)}const bl={id:"input-color-object",type:"input",accept:(M,m)=>{if(!$t.isColorObject(M))return null;const x=Aa(m);return x?{initialValue:M,params:x}:null},binding:{reader:M=>q3(Si(M.params)),equals:$t.equals,writer:M=>F3(dh(M.initialValue),Si(M.params))},controller:M=>{var m;const x=$t.isRgbaColorObject(M.initialValue),P="expanded"in M.params?M.params.expanded:void 0,B="picker"in M.params?M.params.picker:void 0,he=(m=Si(M.params))!==null&&m!==void 0?m:"int";return new Qg(M.document,{colorType:he,expanded:P??!1,formatter:G3(x,he),parser:$n(he),pickerLayout:B??"popup",supportsAlpha:x,value:M.value,viewProps:M.viewProps})}},W3={id:"input-color-string",type:"input",accept:(M,m)=>{if(typeof M!="string"||"view"in m&&m.view==="text")return null;const x=bi(M,Si(m));if(!x||!dr(x))return null;const B=Aa(m);return B?{initialValue:M,params:B}:null},binding:{reader:M=>{var m;return Kt((m=Si(M.params))!==null&&m!==void 0?m:"int")},equals:$t.equals,writer:M=>{const m=bi(M.initialValue,Si(M.params));if(!m)throw v.shouldNeverHappen();const x=I3(m);if(!x)throw v.notBindable();return x}},controller:M=>{const m=bi(M.initialValue,Si(M.params));if(!m)throw v.shouldNeverHappen();const x=dr(m);if(!x)throw v.shouldNeverHappen();const P="expanded"in M.params?M.params.expanded:void 0,B="picker"in M.params?M.params.picker:void 0;return new Qg(M.document,{colorType:m.type,expanded:P??!1,formatter:x,parser:$n(m.type),pickerLayout:B??"popup",supportsAlpha:m.alpha,value:M.value,viewProps:M.viewProps})}};class mu{constructor(m){this.components=m.components,this.asm_=m.assembly}constrain(m){const x=this.asm_.toComponents(m).map((P,B)=>{var he,ze;return(ze=(he=this.components[B])===null||he===void 0?void 0:he.constrain(P))!==null&&ze!==void 0?ze:P});return this.asm_.fromComponents(x)}}const Db=C("pndtxt");class j3{constructor(m,x){this.textViews=x.textViews,this.element=m.createElement("div"),this.element.classList.add(Db()),this.textViews.forEach(P=>{const B=m.createElement("div");B.classList.add(Db("a")),B.appendChild(P.element),this.element.appendChild(B)})}}function $3(M,m,x){return new sr(M,{arrayPosition:x===0?"fst":x===m.axes.length-1?"lst":"mid",baseStep:m.axes[x].baseStep,parser:m.parser,props:m.axes[x].textProps,value:ee(0,{constraint:m.axes[x].constraint}),viewProps:m.viewProps})}class L0{constructor(m,x){this.value=x.value,this.viewProps=x.viewProps,this.acs_=x.axes.map((P,B)=>$3(m,x,B)),this.acs_.forEach((P,B)=>{Q({primary:this.value,secondary:P.value,forward:he=>x.assembly.toComponents(he.rawValue)[B],backward:(he,ze)=>{const gt=x.assembly.toComponents(he.rawValue);return gt[B]=ze.rawValue,x.assembly.fromComponents(gt)}})}),this.view=new j3(m,{textViews:this.acs_.map(P=>P.view)})}}function tv(M,m){return"step"in M&&!h(M.step)?new Cc(M.step,m):null}function zb(M){return!h(M.max)&&!h(M.min)?new go({max:M.max,min:M.min}):!h(M.max)||!h(M.min)?new cu({max:M.max,min:M.min}):null}function X3(M){const m=mo(M,go);if(m)return[m.values.get("min"),m.values.get("max")];const x=mo(M,cu);return x?[x.minValue,x.maxValue]:[void 0,void 0]}function nv(M,m){const x=[],P=tv(M,m);P&&x.push(P);const B=zb(M);B&&x.push(B);const he=ca(M.options);return he&&x.push(he),new Wl(x)}const Kf={id:"input-number",type:"input",accept:(M,m)=>{if(typeof M!="number")return null;const x=Xe,P=Be(m,{format:x.optional.function,max:x.optional.number,min:x.optional.number,options:x.optional.custom(Es),step:x.optional.number});return P?{initialValue:M,params:P}:null},binding:{reader:M=>ch,constraint:M=>nv(M.params,M.initialValue),writer:M=>Nr},controller:M=>{var m;const x=M.value,P=M.constraint,B=P&&mo(P,gl);if(B)return new Ta(M.document,{props:new J({options:B.values.value("options")}),value:x,viewProps:M.viewProps});const he=(m="format"in M.params?M.params.format:void 0)!==null&&m!==void 0?m:Bn(hs(P,x.rawValue)),ze=P&&mo(P,go);return ze?new bn(M.document,{baseStep:Ur(P),parser:Cs,sliderProps:new J({maxValue:ze.values.value("max"),minValue:ze.values.value("min")}),textProps:J.fromObject({draggingScale:gi(P,x.rawValue),formatter:he}),value:x,viewProps:M.viewProps}):new sr(M.document,{baseStep:Ur(P),parser:Cs,props:J.fromObject({draggingScale:gi(P,x.rawValue),formatter:he}),value:x,viewProps:M.viewProps})}};class yl{constructor(m=0,x=0){this.x=m,this.y=x}getComponents(){return[this.x,this.y]}static isObject(m){if(h(m))return!1;const x=m.x,P=m.y;return!(typeof x!="number"||typeof P!="number")}static equals(m,x){return m.x===x.x&&m.y===x.y}toObject(){return{x:this.x,y:this.y}}}const Ib={toComponents:M=>M.getComponents(),fromComponents:M=>new yl(...M)},fh=C("p2d");class Y3{constructor(m,x){this.element=m.createElement("div"),this.element.classList.add(fh()),x.viewProps.bindClassModifiers(this.element),O(x.expanded,D(this.element,fh(void 0,"expanded")));const P=m.createElement("div");P.classList.add(fh("h")),this.element.appendChild(P);const B=m.createElement("button");B.classList.add(fh("b")),B.appendChild(V(m,"p2dpad")),x.viewProps.bindDisabled(B),P.appendChild(B),this.buttonElement=B;const he=m.createElement("div");if(he.classList.add(fh("t")),P.appendChild(he),this.textElement=he,x.pickerLayout==="inline"){const ze=m.createElement("div");ze.classList.add(fh("p")),this.element.appendChild(ze),this.pickerElement=ze}else this.pickerElement=null}}const wo=C("p2dp");class iv{constructor(m,x){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=x.invertsY,this.maxValue_=x.maxValue,this.element=m.createElement("div"),this.element.classList.add(wo()),x.layout==="popup"&&this.element.classList.add(wo(void 0,"p")),x.viewProps.bindClassModifiers(this.element);const P=m.createElement("div");P.classList.add(wo("p")),x.viewProps.bindTabIndex(P),this.element.appendChild(P),this.padElement=P;const B=m.createElementNS(xe,"svg");B.classList.add(wo("g")),this.padElement.appendChild(B),this.svgElem_=B;const he=m.createElementNS(xe,"line");he.classList.add(wo("ax")),he.setAttributeNS(null,"x1","0"),he.setAttributeNS(null,"y1","50%"),he.setAttributeNS(null,"x2","100%"),he.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(he);const ze=m.createElementNS(xe,"line");ze.classList.add(wo("ax")),ze.setAttributeNS(null,"x1","50%"),ze.setAttributeNS(null,"y1","0"),ze.setAttributeNS(null,"x2","50%"),ze.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(ze);const gt=m.createElementNS(xe,"line");gt.classList.add(wo("l")),gt.setAttributeNS(null,"x1","50%"),gt.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(gt),this.lineElem_=gt;const sn=m.createElement("div");sn.classList.add(wo("m")),this.padElement.appendChild(sn),this.markerElem_=sn,x.value.emitter.on("change",this.onValueChange_),this.value=x.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[m,x]=this.value.rawValue.getComponents(),P=this.maxValue_,B=nn(m,-P,+P,0,100),he=nn(x,-P,+P,0,100),ze=this.invertsY_?100-he:he;this.lineElem_.setAttributeNS(null,"x2",`${B}%`),this.lineElem_.setAttributeNS(null,"y2",`${ze}%`),this.markerElem_.style.left=`${B}%`,this.markerElem_.style.top=`${ze}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function gu(M,m,x){return[te(m[0],Qe(M)),te(m[1],Ae(M))*(x?1:-1)]}class La{constructor(m,x){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=x.value,this.viewProps=x.viewProps,this.baseSteps_=x.baseSteps,this.maxValue_=x.maxValue,this.invertsY_=x.invertsY,this.view=new iv(m,{invertsY:this.invertsY_,layout:x.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new jn(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(m,x){if(!m.point)return;const P=this.maxValue_,B=nn(m.point.x,0,m.bounds.width,-P,+P),he=nn(this.invertsY_?m.bounds.height-m.point.y:m.point.y,0,m.bounds.height,-P,+P);this.value.setRawValue(new yl(B,he),x)}onPointerDown_(m){this.handlePointerEvent_(m.data,{forceEmit:!1,last:!1})}onPointerMove_(m){this.handlePointerEvent_(m.data,{forceEmit:!1,last:!1})}onPointerUp_(m){this.handlePointerEvent_(m.data,{forceEmit:!0,last:!0})}onPadKeyDown_(m){Bt(m.key)&&m.preventDefault();const[x,P]=gu(m,this.baseSteps_,this.invertsY_);x===0&&P===0||this.value.setRawValue(new yl(this.value.rawValue.x+x,this.value.rawValue.y+P),{forceEmit:!1,last:!1})}onPadKeyUp_(m){const[x,P]=gu(m,this.baseSteps_,this.invertsY_);x===0&&P===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class K3{constructor(m,x){var P,B;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=x.value,this.viewProps=x.viewProps,this.foldable_=Yt.create(x.expanded),this.popC_=x.pickerLayout==="popup"?new vd(m,{viewProps:this.viewProps}):null;const he=new La(m,{baseSteps:[x.axes[0].baseStep,x.axes[1].baseStep],invertsY:x.invertsY,layout:x.pickerLayout,maxValue:x.maxValue,value:this.value,viewProps:this.viewProps});he.view.allFocusableElements.forEach(ze=>{ze.addEventListener("blur",this.onPopupChildBlur_),ze.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=he,this.textC_=new L0(m,{assembly:Ib,axes:x.axes,parser:x.parser,value:this.value,viewProps:this.viewProps}),this.view=new Y3(m,{expanded:this.foldable_.value("expanded"),pickerLayout:x.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(P=this.view.buttonElement)===null||P===void 0||P.addEventListener("blur",this.onPadButtonBlur_),(B=this.view.buttonElement)===null||B===void 0||B.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Q({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:ze=>ze.rawValue,backward:(ze,gt)=>gt.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),At(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(m){if(!this.popC_)return;const x=this.view.element,P=m.relatedTarget;(!P||!x.contains(P))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(m){if(!this.popC_)return;const x=this.popC_.view.element,P=Zt(m);P&&x.contains(P)||P&&P===this.view.buttonElement&&!nt(x.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(m){this.popC_?m.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&m.key==="Escape"&&this.view.buttonElement.focus()}}class ph{constructor(m=0,x=0,P=0){this.x=m,this.y=x,this.z=P}getComponents(){return[this.x,this.y,this.z]}static isObject(m){if(h(m))return!1;const x=m.x,P=m.y,B=m.z;return!(typeof x!="number"||typeof P!="number"||typeof B!="number")}static equals(m,x){return m.x===x.x&&m.y===x.y&&m.z===x.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const rv={toComponents:M=>M.getComponents(),fromComponents:M=>new ph(...M)};function Zf(M){return ph.isObject(M)?new ph(M.x,M.y,M.z):new ph}function vu(M,m){M.writeProperty("x",m.x),M.writeProperty("y",m.y),M.writeProperty("z",m.z)}function Nb(M,m){return new mu({assembly:rv,components:[Jl("x"in M?M.x:void 0,m.x),Jl("y"in M?M.y:void 0,m.y),Jl("z"in M?M.z:void 0,m.z)]})}function sv(M,m){return{baseStep:Ur(m),constraint:m,textProps:J.fromObject({draggingScale:gi(m,M),formatter:Bn(hs(m,M))})}}const D0={id:"input-point3d",type:"input",accept:(M,m)=>{if(!ph.isObject(M))return null;const x=Xe,P=Be(m,{x:x.optional.custom(cr),y:x.optional.custom(cr),z:x.optional.custom(cr)});return P?{initialValue:M,params:P}:null},binding:{reader:M=>Zf,constraint:M=>Nb(M.params,M.initialValue),equals:ph.equals,writer:M=>vu},controller:M=>{const m=M.value,x=M.constraint;if(!(x instanceof mu))throw v.shouldNeverHappen();return new L0(M.document,{assembly:rv,axes:[sv(m.rawValue.x,x.components[0]),sv(m.rawValue.y,x.components[1]),sv(m.rawValue.z,x.components[2])],parser:Cs,value:m,viewProps:M.viewProps})}};class Sd{constructor(m=0,x=0,P=0,B=0){this.x=m,this.y=x,this.z=P,this.w=B}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(m){if(h(m))return!1;const x=m.x,P=m.y,B=m.z,he=m.w;return!(typeof x!="number"||typeof P!="number"||typeof B!="number"||typeof he!="number")}static equals(m,x){return m.x===x.x&&m.y===x.y&&m.z===x.z&&m.w===x.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const ov={toComponents:M=>M.getComponents(),fromComponents:M=>new Sd(...M)};function oo(M){return Sd.isObject(M)?new Sd(M.x,M.y,M.z,M.w):new Sd}function av(M,m){M.writeProperty("x",m.x),M.writeProperty("y",m.y),M.writeProperty("z",m.z),M.writeProperty("w",m.w)}function Ub(M,m){return new mu({assembly:ov,components:[Jl("x"in M?M.x:void 0,m.x),Jl("y"in M?M.y:void 0,m.y),Jl("z"in M?M.z:void 0,m.z),Jl("w"in M?M.w:void 0,m.w)]})}function Zl(M,m){return{baseStep:Ur(m),constraint:m,textProps:J.fromObject({draggingScale:gi(m,M),formatter:Bn(hs(m,M))})}}const lv={id:"input-point4d",type:"input",accept:(M,m)=>{if(!Sd.isObject(M))return null;const x=Xe,P=Be(m,{x:x.optional.custom(cr),y:x.optional.custom(cr),z:x.optional.custom(cr),w:x.optional.custom(cr)});return P?{initialValue:M,params:P}:null},binding:{reader:M=>oo,constraint:M=>Ub(M.params,M.initialValue),equals:Sd.equals,writer:M=>av},controller:M=>{const m=M.value,x=M.constraint;if(!(x instanceof mu))throw v.shouldNeverHappen();return new L0(M.document,{assembly:ov,axes:m.rawValue.getComponents().map((P,B)=>Zl(P,x.components[B])),parser:Cs,value:m,viewProps:M.viewProps})}};function z0(M){const m=[],x=ca(M.options);return x&&m.push(x),new Wl(m)}const mh={id:"input-string",type:"input",accept:(M,m)=>{if(typeof M!="string")return null;const P=Be(m,{options:Xe.optional.custom(Es)});return P?{initialValue:M,params:P}:null},binding:{reader:M=>$,constraint:M=>z0(M.params),writer:M=>Nr},controller:M=>{const m=M.document,x=M.value,P=M.constraint,B=P&&mo(P,gl);return B?new Ta(m,{props:new J({options:B.values.value("options")}),value:x,viewProps:M.viewProps}):new _d(m,{parser:he=>he,props:J.fromObject({formatter:ge}),value:x,viewProps:M.viewProps})}},Md={monitor:{defaultInterval:200,defaultLineCount:3}},So=C("mll");class cv{constructor(m,x){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=x.formatter,this.element=m.createElement("div"),this.element.classList.add(So()),x.viewProps.bindClassModifiers(this.element);const P=m.createElement("textarea");P.classList.add(So("i")),P.style.height=`calc(var(--bld-us) * ${x.lineCount})`,P.readOnly=!0,x.viewProps.bindDisabled(P),this.element.appendChild(P),this.textareaElem_=P,x.value.emitter.on("change",this.onValueUpdate_),this.value=x.value,this.update_()}update_(){const m=this.textareaElem_,x=m.scrollTop===m.scrollHeight-m.clientHeight,P=[];this.value.rawValue.forEach(B=>{B!==void 0&&P.push(this.formatter_(B))}),m.textContent=P.join(`
`),x&&(m.scrollTop=m.scrollHeight)}onValueUpdate_(){this.update_()}}class uv{constructor(m,x){this.value=x.value,this.viewProps=x.viewProps,this.view=new cv(m,{formatter:x.formatter,lineCount:x.lineCount,value:this.value,viewProps:this.viewProps})}}const Fb=C("sgl");class Z3{constructor(m,x){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=x.formatter,this.element=m.createElement("div"),this.element.classList.add(Fb()),x.viewProps.bindClassModifiers(this.element);const P=m.createElement("input");P.classList.add(Fb("i")),P.readOnly=!0,P.type="text",x.viewProps.bindDisabled(P),this.element.appendChild(P),this.inputElement=P,x.value.emitter.on("change",this.onValueUpdate_),this.value=x.value,this.update_()}update_(){const m=this.value.rawValue,x=m[m.length-1];this.inputElement.value=x!==void 0?this.formatter_(x):""}onValueUpdate_(){this.update_()}}class Jf{constructor(m,x){this.value=x.value,this.viewProps=x.viewProps,this.view=new Z3(m,{formatter:x.formatter,value:this.value,viewProps:this.viewProps})}}const J3={id:"monitor-bool",type:"monitor",accept:(M,m)=>{if(typeof M!="boolean")return null;const P=Be(m,{lineCount:Xe.optional.number});return P?{initialValue:M,params:P}:null},binding:{reader:M=>$l},controller:M=>{var m;return M.value.rawValue.length===1?new Jf(M.document,{formatter:vo,value:M.value,viewProps:M.viewProps}):new uv(M.document,{formatter:vo,lineCount:(m=M.params.lineCount)!==null&&m!==void 0?m:Md.monitor.defaultLineCount,value:M.value,viewProps:M.viewProps})}},Da=C("grl");class Bb{constructor(m,x){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=m.createElement("div"),this.element.classList.add(Da()),x.viewProps.bindClassModifiers(this.element),this.formatter_=x.formatter,this.props_=x.props,this.cursor_=x.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const P=m.createElementNS(xe,"svg");P.classList.add(Da("g")),P.style.height=`calc(var(--bld-us) * ${x.lineCount})`,this.element.appendChild(P),this.svgElem_=P;const B=m.createElementNS(xe,"polyline");this.svgElem_.appendChild(B),this.lineElem_=B;const he=m.createElement("div");he.classList.add(Da("t"),C("tt")()),this.element.appendChild(he),this.tooltipElem_=he,x.value.emitter.on("change",this.onValueUpdate_),this.value=x.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const m=this.svgElem_.getBoundingClientRect(),x=this.value.rawValue.length-1,P=this.props_.get("minValue"),B=this.props_.get("maxValue"),he=[];this.value.rawValue.forEach((Ai,Ci)=>{if(Ai===void 0)return;const _u=nn(Ci,0,x,0,m.width),gh=nn(Ai,P,B,m.height,0);he.push([_u,gh].join(","))}),this.lineElem_.setAttributeNS(null,"points",he.join(" "));const ze=this.tooltipElem_,gt=this.value.rawValue[this.cursor_.rawValue];if(gt===void 0){ze.classList.remove(Da("t","a"));return}const sn=nn(this.cursor_.rawValue,0,x,0,m.width),yn=nn(gt,P,B,m.height,0);ze.style.left=`${sn}px`,ze.style.top=`${yn}px`,ze.textContent=`${this.formatter_(gt)}`,ze.classList.contains(Da("t","a"))||(ze.classList.add(Da("t","a"),Da("t","in")),Ie(ze),ze.classList.remove(Da("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Q3{constructor(m,x){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=x.props,this.value=x.value,this.viewProps=x.viewProps,this.cursor_=ee(-1),this.view=new Bb(m,{cursor:this.cursor_,formatter:x.formatter,lineCount:x.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!nt(m))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const P=new jn(this.view.element);P.emitter.on("down",this.onGraphPointerDown_),P.emitter.on("move",this.onGraphPointerMove_),P.emitter.on("up",this.onGraphPointerUp_)}}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(m){const x=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(nn(m.offsetX,0,x.width,0,this.value.rawValue.length))}onGraphPointerDown_(m){this.onGraphPointerMove_(m)}onGraphPointerMove_(m){if(!m.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(nn(m.data.point.x,0,m.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function hv(M){return"format"in M&&!h(M.format)?M.format:Bn(2)}function Qf(M){var m;return M.value.rawValue.length===1?new Jf(M.document,{formatter:hv(M.params),value:M.value,viewProps:M.viewProps}):new uv(M.document,{formatter:hv(M.params),lineCount:(m=M.params.lineCount)!==null&&m!==void 0?m:Md.monitor.defaultLineCount,value:M.value,viewProps:M.viewProps})}function eS(M){var m,x,P;return new Q3(M.document,{formatter:hv(M.params),lineCount:(m=M.params.lineCount)!==null&&m!==void 0?m:Md.monitor.defaultLineCount,props:J.fromObject({maxValue:(x="max"in M.params?M.params.max:null)!==null&&x!==void 0?x:100,minValue:(P="min"in M.params?M.params.min:null)!==null&&P!==void 0?P:0}),value:M.value,viewProps:M.viewProps})}function Vb(M){return"view"in M&&M.view==="graph"}const dv={id:"monitor-number",type:"monitor",accept:(M,m)=>{if(typeof M!="number")return null;const x=Xe,P=Be(m,{format:x.optional.function,lineCount:x.optional.number,max:x.optional.number,min:x.optional.number,view:x.optional.string});return P?{initialValue:M,params:P}:null},binding:{defaultBufferSize:M=>Vb(M)?64:1,reader:M=>ch},controller:M=>Vb(M.params)?eS(M):Qf(M)},Hb={id:"monitor-string",type:"monitor",accept:(M,m)=>{if(typeof M!="string")return null;const x=Xe,P=Be(m,{lineCount:x.optional.number,multiline:x.optional.boolean});return P?{initialValue:M,params:P}:null},binding:{reader:M=>$},controller:M=>{var m;const x=M.value;return x.rawValue.length>1||"multiline"in M.params&&M.params.multiline?new uv(M.document,{formatter:ge,lineCount:(m=M.params.lineCount)!==null&&m!==void 0?m:Md.monitor.defaultLineCount,value:x,viewProps:M.viewProps}):new Jf(M.document,{formatter:ge,value:x,viewProps:M.viewProps})}};function tS(M,m){var x;const P=M.accept(m.target.read(),m.params);if(h(P))return null;const B=Xe,he={target:m.target,initialValue:P.initialValue,params:P.params},ze=M.binding.reader(he),gt=M.binding.constraint?M.binding.constraint(he):void 0,sn=ee(ze(P.initialValue),{constraint:gt,equals:M.binding.equals}),yn=new Mc({reader:ze,target:m.target,value:sn,writer:M.binding.writer(he)}),Ai=B.optional.boolean(m.params.disabled).value,Ci=B.optional.boolean(m.params.hidden).value,_u=M.controller({constraint:gt,document:m.document,initialValue:P.initialValue,params:P.params,value:yn.value,viewProps:rt.create({disabled:Ai,hidden:Ci})});return new Wn(m.document,{binding:yn,blade:Dt(),props:J.fromObject({label:"label"in m.params?(x=B.optional.string(m.params.label).value)!==null&&x!==void 0?x:null:m.target.key}),valueController:_u})}function nS(M,m){return m===0?new ml:new Is(M,m??Md.monitor.defaultInterval)}function iS(M,m){var x,P,B;const he=Xe,ze=M.accept(m.target.read(),m.params);if(h(ze))return null;const gt={target:m.target,initialValue:ze.initialValue,params:ze.params},sn=M.binding.reader(gt),yn=(P=(x=he.optional.number(m.params.bufferSize).value)!==null&&x!==void 0?x:M.binding.defaultBufferSize&&M.binding.defaultBufferSize(ze.params))!==null&&P!==void 0?P:1,Ai=he.optional.number(m.params.interval).value,Ci=new rh({reader:sn,target:m.target,ticker:nS(m.document,Ai),value:Gl(yn)}),_u=he.optional.boolean(m.params.disabled).value,gh=he.optional.boolean(m.params.hidden).value,Ed=M.controller({document:m.document,params:ze.params,value:Ci.value,viewProps:rt.create({disabled:_u,hidden:gh})});return new Gi(m.document,{binding:Ci,blade:Dt(),props:J.fromObject({label:"label"in m.params?(B=he.optional.string(m.params.label).value)!==null&&B!==void 0?B:null:m.target.key}),valueController:Ed})}class qb{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(m){m.type==="blade"?this.pluginsMap_.blades.unshift(m):m.type==="input"?this.pluginsMap_.inputs.unshift(m):m.type==="monitor"&&this.pluginsMap_.monitors.unshift(m)}createInput(m,x,P){const B=x.read();if(h(B))throw new v({context:{key:x.key},type:"nomatchingcontroller"});const he=this.pluginsMap_.inputs.reduce((ze,gt)=>ze??tS(gt,{document:m,target:x,params:P}),null);if(he)return he;throw new v({context:{key:x.key},type:"nomatchingcontroller"})}createMonitor(m,x,P){const B=this.pluginsMap_.monitors.reduce((he,ze)=>he??iS(ze,{document:m,params:P,target:x}),null);if(B)return B;throw new v({context:{key:x.key},type:"nomatchingcontroller"})}createBlade(m,x){const P=this.pluginsMap_.blades.reduce((B,he)=>B??qo(he,{document:m,params:x}),null);if(!P)throw new v({type:"nomatchingview",context:{params:x}});return P}createBladeApi(m){if(m instanceof Wn)return new as(m);if(m instanceof Gi)return new ls(m);if(m instanceof et)return new Ho(m,this);const x=this.pluginsMap_.blades.reduce((P,B)=>P??B.api({controller:m,pool:this}),null);if(!x)throw v.shouldNeverHappen();return x}}function fv(){const M=new qb;return[$b,D0,lv,mh,Kf,W3,bl,H3,Tc,J3,Hb,dv,Vt,an,Wi,er].forEach(m=>{M.register(m)}),M}function rS(M){return yl.isObject(M)?new yl(M.x,M.y):new yl}function pv(M,m){M.writeProperty("x",m.x),M.writeProperty("y",m.y)}function Jl(M,m){if(!M)return;const x=[],P=tv(M,m);P&&x.push(P);const B=zb(M);return B&&x.push(B),new Wl(x)}function Gb(M,m){return new mu({assembly:Ib,components:[Jl("x"in M?M.x:void 0,m.x),Jl("y"in M?M.y:void 0,m.y)]})}function mv(M,m){const[x,P]=M?X3(M):[];if(!h(x)||!h(P))return Math.max(Math.abs(x??0),Math.abs(P??0));const B=Ur(M);return Math.max(Math.abs(B)*10,Math.abs(m)*10)}function I0(M,m){const x=m instanceof mu?m.components[0]:void 0,P=m instanceof mu?m.components[1]:void 0,B=mv(x,M.x),he=mv(P,M.y);return Math.max(B,he)}function Wb(M,m){return{baseStep:Ur(m),constraint:m,textProps:J.fromObject({draggingScale:gi(m,M),formatter:Bn(hs(m,M))})}}function jb(M){if(!("y"in M))return!1;const m=M.y;return m&&"inverted"in m?!!m.inverted:!1}const $b={id:"input-point2d",type:"input",accept:(M,m)=>{if(!yl.isObject(M))return null;const x=Xe,P=Be(m,{expanded:x.optional.boolean,picker:x.optional.custom(un),x:x.optional.custom(cr),y:x.optional.object({inverted:x.optional.boolean,max:x.optional.number,min:x.optional.number,step:x.optional.number})});return P?{initialValue:M,params:P}:null},binding:{reader:M=>rS,constraint:M=>Gb(M.params,M.initialValue),equals:yl.equals,writer:M=>pv},controller:M=>{const m=M.document,x=M.value,P=M.constraint;if(!(P instanceof mu))throw v.shouldNeverHappen();const B="expanded"in M.params?M.params.expanded:void 0,he="picker"in M.params?M.params.picker:void 0;return new K3(m,{axes:[Wb(x.rawValue.x,P.components[0]),Wb(x.rawValue.y,P.components[1])],expanded:B??!1,invertsY:jb(M.params),maxValue:I0(x.rawValue,P),parser:Cs,pickerLayout:he??"popup",value:x,viewProps:M.viewProps})}};class Xb extends r{constructor(m){super(m),this.emitter_=new S,this.controller_.valueController.value.emitter.on("change",x=>{this.emitter_.emit("change",{event:new o(this,x.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(m){this.controller_.props.set("label",m)}get options(){return this.controller_.valueController.props.get("options")}set options(m){this.controller_.valueController.props.set("options",m)}get value(){return this.controller_.valueController.value.rawValue}set value(m){this.controller_.valueController.value.rawValue=m}on(m,x){const P=x.bind(this);return this.emitter_.on(m,B=>{P(B.event)}),this}}class gv extends r{constructor(m){super(m),this.emitter_=new S,this.controller_.valueController.value.emitter.on("change",x=>{this.emitter_.emit("change",{event:new o(this,x.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(m){this.controller_.props.set("label",m)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(m){this.controller_.valueController.sliderController.props.set("maxValue",m)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(m){this.controller_.valueController.sliderController.props.set("minValue",m)}get value(){return this.controller_.valueController.value.rawValue}set value(m){this.controller_.valueController.value.rawValue=m}on(m,x){const P=x.bind(this);return this.emitter_.on(m,B=>{P(B.event)}),this}}class Yb extends r{constructor(m){super(m),this.emitter_=new S,this.controller_.valueController.value.emitter.on("change",x=>{this.emitter_.emit("change",{event:new o(this,x.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(m){this.controller_.props.set("label",m)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(m){this.controller_.valueController.props.set("formatter",m)}get value(){return this.controller_.valueController.value.rawValue}set value(m){this.controller_.valueController.value.rawValue=m}on(m,x){const P=x.bind(this);return this.emitter_.on(m,B=>{P(B.event)}),this}}const vv=function(){return{id:"list",type:"blade",accept(M){const m=Xe,x=Be(M,{options:m.required.custom(Es),value:m.required.raw,view:m.required.constant("list"),label:m.optional.string});return x?{params:x}:null},controller(M){const m=new gl(En(M.params.options)),x=ee(M.params.value,{constraint:m}),P=new Ta(M.document,{props:new J({options:m.values.value("options")}),value:x,viewProps:M.viewProps});return new tn(M.document,{blade:M.blade,props:J.fromObject({label:M.params.label}),valueController:P})},api(M){return!(M.controller instanceof tn)||!(M.controller.valueController instanceof Ta)?null:new Xb(M.controller)}}}();function Kb(M){return M.reduce((m,x)=>Object.assign(m,{[x.presetKey]:x.read()}),{})}function _v(M,m){M.forEach(x=>{const P=m[x.target.presetKey];P!==void 0&&x.writer(x.target,x.reader(P))})}class sS extends fl{constructor(m,x){super(m,x)}get element(){return this.controller_.view.element}importPreset(m){const x=this.controller_.rackController.rack.find(Wn).map(P=>P.binding);_v(x,m),this.refresh()}exportPreset(){const m=this.controller_.rackController.rack.find(Wn).map(x=>x.binding.target);return Kb(m)}refresh(){this.controller_.rackController.rack.find(Wn).forEach(m=>{m.binding.read()}),this.controller_.rackController.rack.find(Gi).forEach(m=>{m.binding.read()})}}class bv extends Wt{constructor(m,x){super(m,{expanded:x.expanded,blade:x.blade,props:x.props,root:!0,viewProps:x.viewProps})}}const ei={id:"slider",type:"blade",accept(M){const m=Xe,x=Be(M,{max:m.required.number,min:m.required.number,view:m.required.constant("slider"),format:m.optional.function,label:m.optional.string,value:m.optional.number});return x?{params:x}:null},controller(M){var m,x;const P=(m=M.params.value)!==null&&m!==void 0?m:0,B=new go({max:M.params.max,min:M.params.min}),he=new bn(M.document,{baseStep:1,parser:Cs,sliderProps:new J({maxValue:B.values.value("max"),minValue:B.values.value("min")}),textProps:J.fromObject({draggingScale:gi(void 0,P),formatter:(x=M.params.format)!==null&&x!==void 0?x:wd}),value:ee(P,{constraint:B}),viewProps:M.viewProps});return new tn(M.document,{blade:M.blade,props:J.fromObject({label:M.params.label}),valueController:he})},api(M){return!(M.controller instanceof tn)||!(M.controller.valueController instanceof bn)?null:new gv(M.controller)}},oS=function(){return{id:"text",type:"blade",accept(M){const m=Xe,x=Be(M,{parse:m.required.function,value:m.required.raw,view:m.required.constant("text"),format:m.optional.function,label:m.optional.string});return x?{params:x}:null},controller(M){var m;const x=new _d(M.document,{parser:M.params.parse,props:J.fromObject({formatter:(m=M.params.format)!==null&&m!==void 0?m:P=>String(P)}),value:ee(M.params.value),viewProps:M.viewProps});return new tn(M.document,{blade:M.blade,props:J.fromObject({label:M.params.label}),valueController:x})},api(M){return!(M.controller instanceof tn)||!(M.controller.valueController instanceof _d)?null:new Yb(M.controller)}}}();function aS(M){const m=M.createElement("div");return m.classList.add(C("dfw")()),M.body&&M.body.appendChild(m),m}function Cd(M,m,x){if(M.querySelector(`style[data-tp-style=${m}]`))return;const P=M.createElement("style");P.dataset.tpStyle=m,P.textContent=x,M.head.appendChild(P)}class Zb extends sS{constructor(m){var x,P;const B=m??{},he=(x=B.document)!==null&&x!==void 0?x:ue(),ze=fv(),gt=new bv(he,{expanded:B.expanded,blade:Dt(),props:J.fromObject({title:B.title}),viewProps:rt.create()});super(gt,ze),this.pool_=ze,this.containerElem_=(P=B.container)!==null&&P!==void 0?P:aS(he),this.containerElem_.appendChild(this.element),this.doc_=he,this.usesDefaultWrapper_=!B.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw v.alreadyDisposed();return this.doc_}dispose(){const m=this.containerElem_;if(!m)throw v.alreadyDisposed();if(this.usesDefaultWrapper_){const x=m.parentElement;x&&x.removeChild(m)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(m){("plugin"in m?[m.plugin]:"plugins"in m?m.plugins:[]).forEach(P=>{this.pool_.register(P),this.embedPluginStyle_(P)})}embedPluginStyle_(m){m.css&&Cd(this.document,`plugin-${m.id}`,m.css)}setUpDefaultPlugins_(){Cd(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach(m=>{this.embedPluginStyle_(m)}),this.registerPlugin({plugins:[ei,vv,er,oS]})}}const lS=new n("3.1.10");t.BladeApi=r,t.ButtonApi=_,t.FolderApi=fl,t.InputBindingApi=as,t.ListApi=Xb,t.MonitorBindingApi=ls,t.Pane=Zb,t.SeparatorApi=mn,t.SliderApi=gv,t.TabApi=aa,t.TabPageApi=_n,t.TextApi=Yb,t.TpChangeEvent=o,t.VERSION=lS,Object.defineProperty(t,"__esModule",{value:!0})})})(bR,bR.exports);var OM={},Qu={};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.BladeApi=void 0;var xZe=function(){function i(e){this.controller_=e}return Object.defineProperty(i.prototype,"element",{get:function(){return this.controller_.view.element},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"disabled",{get:function(){return this.controller_.viewProps.get("disabled")},set:function(e){this.controller_.viewProps.set("disabled",e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hidden",{get:function(){return this.controller_.viewProps.get("hidden")},set:function(e){this.controller_.viewProps.set("hidden",e)},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this.controller_.viewProps.set("disposed",!0)},i}();Qu.BladeApi=xZe;var bF={};Object.defineProperty(bF,"__esModule",{value:!0});var yF={};Object.defineProperty(yF,"__esModule",{value:!0});var Ao={},N4=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ao,"__esModule",{value:!0});Ao.TpTabSelectEvent=Ao.TpFoldEvent=Ao.TpUpdateEvent=Ao.TpChangeEvent=Ao.TpEvent=void 0;var z_=function(){function i(e){this.target=e}return i}();Ao.TpEvent=z_;var wZe=function(i){N4(e,i);function e(t,n,r,s){var o=i.call(this,t)||this;return o.value=n,o.presetKey=r,o.last=s??!0,o}return e}(z_);Ao.TpChangeEvent=wZe;var SZe=function(i){N4(e,i);function e(t,n,r){var s=i.call(this,t)||this;return s.value=n,s.presetKey=r,s}return e}(z_);Ao.TpUpdateEvent=SZe;var MZe=function(i){N4(e,i);function e(t,n){var r=i.call(this,t)||this;return r.expanded=n,r}return e}(z_);Ao.TpFoldEvent=MZe;var CZe=function(i){N4(e,i);function e(t,n){var r=i.call(this,t)||this;return r.index=n,r}return e}(z_);Ao.TpTabSelectEvent=CZe;var I_={},ul={},ri={};Object.defineProperty(ri,"__esModule",{value:!0});ri.isPropertyWritable=ri.deepEqualsArray=ri.isEmpty=ri.forceCast=void 0;function EZe(i){return i}ri.forceCast=EZe;function TZe(i){return i==null}ri.isEmpty=TZe;function AZe(i,e){if(i.length!==e.length)return!1;for(var t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}ri.deepEqualsArray=AZe;function PZe(i,e){var t=i;do{var n=Object.getOwnPropertyDescriptor(t,e);if(n&&(n.set!==void 0||n.writable===!0))return!0;t=Object.getPrototypeOf(t)}while(t!==null);return!1}ri.isPropertyWritable=PZe;Object.defineProperty(ul,"__esModule",{value:!0});ul.TpError=void 0;var kZe=ri,RZe={alreadydisposed:function(){return"View has been already disposed"},invalidparams:function(i){return"Invalid parameters for '".concat(i.name,"'")},nomatchingcontroller:function(i){return"No matching controller for '".concat(i.key,"'")},nomatchingview:function(i){return"No matching view for '".concat(JSON.stringify(i.params),"'")},notbindable:function(){return"Value is not bindable"},propertynotfound:function(i){return"Property '".concat(i.name,"' not found")},shouldneverhappen:function(){return"This error should never happen"}},OZe=function(){function i(e){var t;this.message=(t=RZe[e.type]((0,kZe.forceCast)(e.context)))!==null&&t!==void 0?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}return i.alreadyDisposed=function(){return new i({type:"alreadydisposed"})},i.notBindable=function(){return new i({type:"notbindable"})},i.propertyNotFound=function(e){return new i({type:"propertynotfound",context:{name:e}})},i.shouldNeverHappen=function(){return new i({type:"shouldneverhappen"})},i}();ul.TpError=OZe;Object.defineProperty(I_,"__esModule",{value:!0});I_.BindingTarget=void 0;var yR=ul,LZe=function(){function i(e,t,n){this.obj_=e,this.key_=t,this.presetKey_=n??t}return i.isBindable=function(e){return!(e===null||typeof e!="object"&&typeof e!="function")},Object.defineProperty(i.prototype,"key",{get:function(){return this.key_},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"presetKey",{get:function(){return this.presetKey_},enumerable:!1,configurable:!0}),i.prototype.read=function(){return this.obj_[this.key_]},i.prototype.write=function(e){this.obj_[this.key_]=e},i.prototype.writeProperty=function(e,t){var n=this.read();if(!i.isBindable(n))throw yR.TpError.notBindable();if(!(e in n))throw yR.TpError.propertyNotFound(e);n[e]=t},i}();I_.BindingTarget=LZe;var N_={},DZe=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(N_,"__esModule",{value:!0});N_.ButtonApi=void 0;var zZe=Qu,IZe=Ao,NZe=function(i){DZe(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){var t;return(t=this.controller_.valueController.props.get("title"))!==null&&t!==void 0?t:""},set:function(t){this.controller_.valueController.props.set("title",t)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n){var r=this,s=n.bind(this),o=this.controller_.valueController.emitter;return o.on(t,function(){s(new IZe.TpEvent(r))}),this},e}(zZe.BladeApi);N_.ButtonApi=NZe;var U_={},Ds={};Object.defineProperty(Ds,"__esModule",{value:!0});Ds.Emitter=void 0;var UZe=function(){function i(){this.observers_={}}return i.prototype.on=function(e,t){var n=this.observers_[e];return n||(n=this.observers_[e]=[]),n.push({handler:t}),this},i.prototype.off=function(e,t){var n=this.observers_[e];return n&&(this.observers_[e]=n.filter(function(r){return r.handler!==t})),this},i.prototype.emit=function(e,t){var n=this.observers_[e];n&&n.forEach(function(r){r.handler(t)})},i}();Ds.Emitter=UZe;var F_={},Ui={};Object.defineProperty(Ui,"__esModule",{value:!0});Ui.ClassName=void 0;var FZe="tp";function BZe(i){var e=function(t,n){return[FZe,"-",i,"v",t?"_".concat(t):"",n?"-".concat(n):""].join("")};return e}Ui.ClassName=BZe;var ol={},fo={};Object.defineProperty(fo,"__esModule",{value:!0});fo.bindValueMap=fo.bindValue=void 0;function VZe(i,e){return function(t){return e(i(t))}}function HZe(i){return i.rawValue}function xF(i,e){i.emitter.on("change",VZe(HZe,e)),e(i.rawValue)}fo.bindValue=xF;function qZe(i,e,t){xF(i.value(e),t)}fo.bindValueMap=qZe;Object.defineProperty(ol,"__esModule",{value:!0});ol.bindValueToTextContent=ol.valueToClassName=void 0;var GZe=fo;function WZe(i,e,t){t?i.classList.add(e):i.classList.remove(e)}function jZe(i,e){return function(t){WZe(i,e,t)}}ol.valueToClassName=jZe;function $Ze(i,e){(0,GZe.bindValue)(i,function(t){e.textContent=t??""})}ol.bindValueToTextContent=$Ze;Object.defineProperty(F_,"__esModule",{value:!0});F_.ButtonView=void 0;var XZe=Ui,YZe=ol,LM=(0,XZe.ClassName)("btn"),KZe=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(LM()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("button");n.classList.add(LM("b")),t.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;var r=e.createElement("div");r.classList.add(LM("t")),(0,YZe.bindValueToTextContent)(t.props.value("title"),r),this.buttonElement.appendChild(r)}return i}();F_.ButtonView=KZe;Object.defineProperty(U_,"__esModule",{value:!0});U_.ButtonController=void 0;var ZZe=Ds,JZe=F_,QZe=function(){function i(e,t){this.emitter=new ZZe.Emitter,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new JZe.ButtonView(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return i.prototype.onClick_=function(){this.emitter.emit("click",{sender:this})},i}();U_.ButtonController=QZe;var B_={},Ar={},ra={},U4={};Object.defineProperty(U4,"__esModule",{value:!0});U4.BoundValue=void 0;var eJe=Ds,tJe=function(){function i(e,t){var n;this.constraint_=t==null?void 0:t.constraint,this.equals_=(n=t==null?void 0:t.equals)!==null&&n!==void 0?n:function(r,s){return r===s},this.emitter=new eJe.Emitter,this.rawValue_=e}return Object.defineProperty(i.prototype,"constraint",{get:function(){return this.constraint_},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rawValue",{get:function(){return this.rawValue_},set:function(e){this.setRawValue(e,{forceEmit:!1,last:!0})},enumerable:!1,configurable:!0}),i.prototype.setRawValue=function(e,t){var n=t??{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(e):e,s=this.rawValue_,o=!this.equals_(s,r);!o&&!n.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:n,previousRawValue:s,rawValue:r,sender:this}))},i}();U4.BoundValue=tJe;var F4={};Object.defineProperty(F4,"__esModule",{value:!0});F4.PrimitiveValue=void 0;var nJe=Ds,iJe=function(){function i(e){this.emitter=new nJe.Emitter,this.value_=e}return Object.defineProperty(i.prototype,"rawValue",{get:function(){return this.value_},set:function(e){this.setRawValue(e,{forceEmit:!1,last:!0})},enumerable:!1,configurable:!0}),i.prototype.setRawValue=function(e,t){var n=t??{forceEmit:!1,last:!0},r=this.value_;r===e&&!n.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:n,previousRawValue:r,rawValue:this.value_,sender:this}))},i}();F4.PrimitiveValue=iJe;Object.defineProperty(ra,"__esModule",{value:!0});ra.createValue=void 0;var rJe=U4,sJe=F4;function oJe(i,e){var t=e==null?void 0:e.constraint,n=e==null?void 0:e.equals;return!t&&!n?new sJe.PrimitiveValue(i):new rJe.BoundValue(i,e)}ra.createValue=oJe;Object.defineProperty(Ar,"__esModule",{value:!0});Ar.ValueMap=void 0;var aJe=Ds,lJe=ra,cJe=function(){function i(e){var t=this;this.emitter=new aJe.Emitter,this.valMap_=e;var n=function(o){var a=r.valMap_[o];a.emitter.on("change",function(){t.emitter.emit("change",{key:o,sender:t})})},r=this;for(var s in this.valMap_)n(s)}return i.createCore=function(e){var t=Object.keys(e);return t.reduce(function(n,r){var s;return Object.assign(n,(s={},s[r]=(0,lJe.createValue)(e[r]),s))},{})},i.fromObject=function(e){var t=this.createCore(e);return new i(t)},i.prototype.get=function(e){return this.valMap_[e].rawValue},i.prototype.set=function(e,t){this.valMap_[e].rawValue=t},i.prototype.value=function(e){return this.valMap_[e]},i}();Ar.ValueMap=cJe;var Qs={};(function(i){var e=it&&it.__assign||function(){return e=Object.assign||function(u){for(var h,d=1,f=arguments.length;d<f;d++){h=arguments[d];for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(u[g]=h[g])}return u},e.apply(this,arguments)},t=it&&it.__spreadArray||function(u,h,d){if(d||arguments.length===2)for(var f=0,g=h.length,v;f<g;f++)(v||!(f in h))&&(v||(v=Array.prototype.slice.call(h,0,f)),v[f]=h[f]);return u.concat(v||Array.prototype.slice.call(h))};Object.defineProperty(i,"__esModule",{value:!0}),i.parseParams=i.ParamsParsers=void 0;var n=ri;function r(u,h){var d=Object.keys(h),f=d.reduce(function(g,v){var y;if(g!==void 0){var _=h[v],S=_(u[v]);return S.succeeded?e(e({},g),(y={},y[v]=S.value,y)):void 0}},{});return(0,n.forceCast)(f)}function s(u,h){return u.reduce(function(d,f){if(d!==void 0){var g=h(f);if(!(!g.succeeded||g.value===void 0))return t(t([],d,!0),[g.value],!1)}},[])}function o(u){return u===null?!1:typeof u=="object"}function a(u){return function(h){return function(d){if(!h&&d===void 0)return{succeeded:!1,value:void 0};if(h&&d===void 0)return{succeeded:!0,value:void 0};var f=u(d);return f!==void 0?{succeeded:!0,value:f}:{succeeded:!1,value:void 0}}}}function l(u){return{custom:function(h){return a(h)(u)},boolean:a(function(h){return typeof h=="boolean"?h:void 0})(u),number:a(function(h){return typeof h=="number"?h:void 0})(u),string:a(function(h){return typeof h=="string"?h:void 0})(u),function:a(function(h){return typeof h=="function"?h:void 0})(u),constant:function(h){return a(function(d){return d===h?h:void 0})(u)},raw:a(function(h){return h})(u),object:function(h){return a(function(d){if(o(d))return r(d,h)})(u)},array:function(h){return a(function(d){if(Array.isArray(d))return s(d,h)})(u)}}}i.ParamsParsers={optional:l(!0),required:l(!1)};function c(u,h){var d=i.ParamsParsers.required.object(h)(u);return d.succeeded?d.value:void 0}i.parseParams=c})(Qs);var g0={},ld={},mf={};Object.defineProperty(mf,"__esModule",{value:!0});mf.warnMissing=mf.warnDeprecation=void 0;function uJe(i){var e;console.warn(["".concat(i.name," is deprecated."),i.alternative?"use ".concat(i.alternative," instead."):"",(e=i.postscript)!==null&&e!==void 0?e:""].join(" "))}mf.warnDeprecation=uJe;function hJe(i){console.warn(["Missing '".concat(i.key,"' of ").concat(i.target," in ").concat(i.place,"."),"Please rebuild plugins with the latest core package."].join(" "))}mf.warnMissing=hJe;var B4={};Object.defineProperty(B4,"__esModule",{value:!0});B4.disposeElement=void 0;function dJe(i){return i&&i.parentElement&&i.parentElement.removeChild(i),null}B4.disposeElement=dJe;var cd={},V4={};Object.defineProperty(V4,"__esModule",{value:!0});V4.ReadonlyValue=void 0;var fJe=function(){function i(e){this.value_=e}return i.create=function(e){return[new i(e),function(t,n){e.setRawValue(t,n)}]},Object.defineProperty(i.prototype,"emitter",{get:function(){return this.value_.emitter},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rawValue",{get:function(){return this.value_.rawValue},enumerable:!1,configurable:!0}),i}();V4.ReadonlyValue=fJe;var pJe=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(cd,"__esModule",{value:!0});cd.ViewProps=void 0;var mJe=Ui,gJe=ol,dx=fo,vJe=V4,xR=Ar,_Je=ra,bJe=(0,mJe.ClassName)("");function wR(i,e){return(0,gJe.valueToClassName)(i,bJe(void 0,e))}var yJe=function(i){pJe(e,i);function e(t){var n,r=this,s;return r=i.call(this,t)||this,r.onDisabledChange_=r.onDisabledChange_.bind(r),r.onParentChange_=r.onParentChange_.bind(r),r.onParentGlobalDisabledChange_=r.onParentGlobalDisabledChange_.bind(r),n=vJe.ReadonlyValue.create((0,_Je.createValue)(r.getGlobalDisabled_())),r.globalDisabled_=n[0],r.setGlobalDisabled_=n[1],r.value("disabled").emitter.on("change",r.onDisabledChange_),r.value("parent").emitter.on("change",r.onParentChange_),(s=r.get("parent"))===null||s===void 0||s.globalDisabled.emitter.on("change",r.onParentGlobalDisabledChange_),r}return e.create=function(t){var n,r,s,o=t??{};return new e(xR.ValueMap.createCore({disabled:(n=o.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=o.hidden)!==null&&r!==void 0?r:!1,parent:(s=o.parent)!==null&&s!==void 0?s:null}))},Object.defineProperty(e.prototype,"globalDisabled",{get:function(){return this.globalDisabled_},enumerable:!1,configurable:!0}),e.prototype.bindClassModifiers=function(t){(0,dx.bindValue)(this.globalDisabled_,wR(t,"disabled")),(0,dx.bindValueMap)(this,"hidden",wR(t,"hidden"))},e.prototype.bindDisabled=function(t){(0,dx.bindValue)(this.globalDisabled_,function(n){t.disabled=n})},e.prototype.bindTabIndex=function(t){(0,dx.bindValue)(this.globalDisabled_,function(n){t.tabIndex=n?-1:0})},e.prototype.handleDispose=function(t){this.value("disposed").emitter.on("change",function(n){n&&t()})},e.prototype.getGlobalDisabled_=function(){var t=this.get("parent"),n=t?t.globalDisabled.rawValue:!1;return n||this.get("disabled")},e.prototype.updateGlobalDisabled_=function(){this.setGlobalDisabled_(this.getGlobalDisabled_())},e.prototype.onDisabledChange_=function(){this.updateGlobalDisabled_()},e.prototype.onParentGlobalDisabledChange_=function(){this.updateGlobalDisabled_()},e.prototype.onParentChange_=function(t){var n,r=t.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()},e}(xR.ValueMap);cd.ViewProps=yJe;var V_={};Object.defineProperty(V_,"__esModule",{value:!0});V_.getAllBladePositions=void 0;function xJe(){return["veryfirst","first","last","verylast"]}V_.getAllBladePositions=xJe;Object.defineProperty(ld,"__esModule",{value:!0});ld.BladeController=void 0;var wJe=mf,SJe=B4,MJe=cd,CJe=Ui,EJe=V_,SR=(0,CJe.ClassName)(""),MR={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"},TJe=function(){function i(e){var t=this;this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;var n=this.view.element;this.blade.value("positions").emitter.on("change",function(){(0,EJe.getAllBladePositions)().forEach(function(r){n.classList.remove(SR(void 0,MR[r]))}),t.blade.get("positions").forEach(function(r){n.classList.add(SR(void 0,MR[r]))})}),this.viewProps.handleDispose(function(){(0,SJe.disposeElement)(n)})}return Object.defineProperty(i.prototype,"parent",{get:function(){return this.parent_},set:function(e){if(this.parent_=e,!("parent"in this.viewProps.valMap_)){(0,wJe.warnMissing)({key:"parent",target:MJe.ViewProps.name,place:"BladeController.parent"});return}this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)},enumerable:!1,configurable:!0}),i}();ld.BladeController=TJe;var Ug={},Vo={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.findNextTarget=i.indexOfChildElement=i.removeChildNodes=i.removeChildElements=i.removeElement=i.insertElementAt=i.createSvgIconElement=i.getCanvasContext=i.getWindowDocument=i.supportsTouch=i.disableTransitionTemporarily=i.forceReflow=i.SVG_NS=void 0;var e=ri;i.SVG_NS="http://www.w3.org/2000/svg";function t(y){y.offsetHeight}i.forceReflow=t;function n(y,_){var S=y.style.transition;y.style.transition="none",_(),y.style.transition=S}i.disableTransitionTemporarily=n;function r(y){return y.ontouchstart!==void 0}i.supportsTouch=r;function s(){return globalThis}function o(){var y=(0,e.forceCast)(s());return y.document}i.getWindowDocument=o;function a(y){var _=y.ownerDocument.defaultView;if(!_)return null;var S="document"in _;return S?y.getContext("2d",{willReadFrequently:!0}):null}i.getCanvasContext=a;var l={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function c(y,_){var S=y.createElementNS(i.SVG_NS,"svg");return S.innerHTML=l[_],S}i.createSvgIconElement=c;function u(y,_,S){y.insertBefore(_,y.children[S])}i.insertElementAt=u;function h(y){y.parentElement&&y.parentElement.removeChild(y)}i.removeElement=h;function d(y){for(;y.children.length>0;)y.removeChild(y.children[0])}i.removeChildElements=d;function f(y){for(;y.childNodes.length>0;)y.removeChild(y.childNodes[0])}i.removeChildNodes=f;function g(y){var _=y.parentElement;if(!_)return-1;var S=Array.prototype.slice.call(_.children);return S.indexOf(y)}i.indexOfChildElement=g;function v(y){return y.relatedTarget?(0,e.forceCast)(y.relatedTarget):"explicitOriginalTarget"in y?y.explicitOriginalTarget:null}i.findNextTarget=v})(Vo);Object.defineProperty(Ug,"__esModule",{value:!0});Ug.LabelView=void 0;var AJe=Vo,PJe=fo,kJe=Ui,RJe=ri,Bv=(0,kJe.ClassName)("lbl");function OJe(i,e){var t=i.createDocumentFragment(),n=e.split(`
`).map(function(r){return i.createTextNode(r)});return n.forEach(function(r,s){s>0&&t.appendChild(i.createElement("br")),t.appendChild(r)}),t}var LJe=function(){function i(e,t){var n=this;this.element=e.createElement("div"),this.element.classList.add(Bv()),t.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(Bv("l")),(0,PJe.bindValueMap)(t.props,"label",function(o){(0,RJe.isEmpty)(o)?n.element.classList.add(Bv(void 0,"nol")):(n.element.classList.remove(Bv(void 0,"nol")),(0,AJe.removeChildNodes)(r),r.appendChild(OJe(e,o)))}),this.element.appendChild(r),this.labelElement=r;var s=e.createElement("div");s.classList.add(Bv("v")),this.element.appendChild(s),this.valueElement=s}return i}();Ug.LabelView=LJe;var DJe=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vw=it&&it.__assign||function(){return Vw=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},Vw.apply(this,arguments)};Object.defineProperty(g0,"__esModule",{value:!0});g0.LabelController=void 0;var zJe=ld,IJe=Ug,NJe=function(i){DJe(e,i);function e(t,n){var r=this,s=n.valueController.viewProps;return r=i.call(this,Vw(Vw({},n),{view:new IJe.LabelView(t,{props:n.props,viewProps:s}),viewProps:s}))||this,r.props=n.props,r.valueController=n.valueController,r.view.valueElement.appendChild(r.valueController.view.element),r}return e}(zJe.BladeController);g0.LabelController=NJe;Object.defineProperty(B_,"__esModule",{value:!0});B_.ButtonBladePlugin=void 0;var CR=Ar,ER=Qs,TR=g0,UJe=N_,AR=U_;B_.ButtonBladePlugin={id:"button",type:"blade",accept:function(i){var e=ER.ParamsParsers,t=(0,ER.parseParams)(i,{title:e.required.string,view:e.required.constant("button"),label:e.optional.string});return t?{params:t}:null},controller:function(i){return new TR.LabelController(i.document,{blade:i.blade,props:CR.ValueMap.fromObject({label:i.params.label}),valueController:new AR.ButtonController(i.document,{props:CR.ValueMap.fromObject({title:i.params.title}),viewProps:i.viewProps})})},api:function(i){return!(i.controller instanceof TR.LabelController)||!(i.controller.valueController instanceof AR.ButtonController)?null:new UJe.ButtonApi(i.controller)}};var v0={},FJe=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(v0,"__esModule",{value:!0});v0.ValueBladeController=void 0;var BJe=ld,VJe=function(i){FJe(e,i);function e(t){var n=i.call(this,t)||this;return n.value=t.value,n}return e}(BJe.BladeController);v0.ValueBladeController=VJe;var Of={};Object.defineProperty(Of,"__esModule",{value:!0});Of.createBlade=void 0;var HJe=Ar,qJe=ra,GJe=ri;function WJe(){return new HJe.ValueMap({positions:(0,qJe.createValue)([],{equals:GJe.deepEqualsArray})})}Of.createBlade=WJe;var ya={},jJe=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ya,"__esModule",{value:!0});ya.bindFoldable=ya.getFoldableStyleHeight=ya.getFoldableStyleExpanded=ya.createFoldable=ya.Foldable=void 0;var dw=Vo,PR=fo,kR=Ar,wF=ri,SF=function(i){jJe(e,i);function e(t){return i.call(this,t)||this}return e.create=function(t){var n={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=kR.ValueMap.createCore(n);return new e(r)},Object.defineProperty(e.prototype,"styleExpanded",{get:function(){var t;return(t=this.get("temporaryExpanded"))!==null&&t!==void 0?t:this.get("expanded")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleHeight",{get:function(){if(!this.styleExpanded)return"0";var t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!(0,wF.isEmpty)(t)?"".concat(t,"px"):"auto"},enumerable:!1,configurable:!0}),e.prototype.bindExpandedClass=function(t,n){var r=this,s=function(){var o=r.styleExpanded;o?t.classList.add(n):t.classList.remove(n)};(0,PR.bindValueMap)(this,"expanded",s),(0,PR.bindValueMap)(this,"temporaryExpanded",s)},e.prototype.cleanUpTransition=function(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)},e}(kR.ValueMap);ya.Foldable=SF;function $Je(i){return SF.create(i)}ya.createFoldable=$Je;function XJe(i,e){var t=0;return(0,dw.disableTransitionTemporarily)(e,function(){i.set("expandedHeight",null),i.set("temporaryExpanded",!0),(0,dw.forceReflow)(e),t=e.clientHeight,i.set("temporaryExpanded",null),(0,dw.forceReflow)(e)}),t}function YJe(i){return i.styleExpanded}ya.getFoldableStyleExpanded=YJe;function KJe(i){return i.styleHeight}ya.getFoldableStyleHeight=KJe;function RR(i,e){e.style.height=i.styleHeight}function ZJe(i,e){i.value("expanded").emitter.on("beforechange",function(){if(i.set("completed",!1),(0,wF.isEmpty)(i.get("expandedHeight"))){var t=XJe(i,e);t>0&&i.set("expandedHeight",t)}i.set("shouldFixHeight",!0),(0,dw.forceReflow)(e)}),i.emitter.on("change",function(){RR(i,e)}),RR(i,e),e.addEventListener("transitionend",function(t){t.propertyName==="height"&&i.cleanUpTransition()})}ya.bindFoldable=ZJe;var H_={},Fg={},JJe=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Fg,"__esModule",{value:!0});Fg.RackLikeApi=void 0;var QJe=Qu,eQe=function(i){JJe(e,i);function e(t,n){var r=i.call(this,t)||this;return r.rackApi_=n,r}return e}(QJe.BladeApi);Fg.RackLikeApi=eQe;var gf={},Lu={},ju=it&&it.__assign||function(){return ju=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},ju.apply(this,arguments)};Object.defineProperty(Lu,"__esModule",{value:!0});Lu.addTabAsBlade=Lu.addSeparatorAsBlade=Lu.addFolderAsBlade=Lu.addButtonAsBlade=void 0;function tQe(i,e){return i.addBlade(ju(ju({},e),{view:"button"}))}Lu.addButtonAsBlade=tQe;function nQe(i,e){return i.addBlade(ju(ju({},e),{view:"folder"}))}Lu.addFolderAsBlade=nQe;function iQe(i,e){var t=e??{};return i.addBlade(ju(ju({},t),{view:"separator"}))}Lu.addSeparatorAsBlade=iQe;function rQe(i,e){return i.addBlade(ju(ju({},e),{view:"tab"}))}Lu.addTabAsBlade=rQe;var Bg={};Object.defineProperty(Bg,"__esModule",{value:!0});Bg.NestedOrderedSet=void 0;var sQe=Ds,oQe=ul,aQe=function(){function i(e){this.emitter=new sQe.Emitter,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}return Object.defineProperty(i.prototype,"items",{get:function(){return this.items_},enumerable:!1,configurable:!0}),i.prototype.allItems=function(){return Array.from(this.cache_)},i.prototype.find=function(e){for(var t=0,n=this.allItems();t<n.length;t++){var r=n[t];if(e(r))return r}return null},i.prototype.includes=function(e){return this.cache_.has(e)},i.prototype.add=function(e,t){var n=this;if(this.includes(e))throw oQe.TpError.shouldNeverHappen();var r=t!==void 0?t:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);var s=this.extract_(e);s&&(s.emitter.on("add",this.onSubListAdd_),s.emitter.on("remove",this.onSubListRemove_),s.allItems().forEach(function(o){n.cache_.add(o)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})},i.prototype.remove=function(e){var t=this.items_.indexOf(e);if(!(t<0)){this.items_.splice(t,1),this.cache_.delete(e);var n=this.extract_(e);n&&(n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}},i.prototype.onSubListAdd_=function(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})},i.prototype.onSubListRemove_=function(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})},i}();Bg.NestedOrderedSet=aQe;var Vg={},lQe=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Vg,"__esModule",{value:!0});Vg.InputBindingApi=void 0;var cQe=Ds,uQe=ri,hQe=Qu,dQe=Ao,fQe=function(i){lQe(e,i);function e(t){var n=i.call(this,t)||this;return n.onBindingChange_=n.onBindingChange_.bind(n),n.emitter_=new cQe.Emitter,n.controller_.binding.emitter.on("change",n.onBindingChange_),n}return Object.defineProperty(e.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n){var r=n.bind(this);return this.emitter_.on(t,function(s){r(s.event)}),this},e.prototype.refresh=function(){this.controller_.binding.read()},e.prototype.onBindingChange_=function(t){var n=t.sender.target.read();this.emitter_.emit("change",{event:new dQe.TpChangeEvent(this,(0,uQe.forceCast)(n),this.controller_.binding.target.presetKey,t.options.last)})},e}(hQe.BladeApi);Vg.InputBindingApi=fQe;var Lf={},pQe=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Lf,"__esModule",{value:!0});Lf.InputBindingController=void 0;var mQe=g0,gQe=function(i){pQe(e,i);function e(t,n){var r=i.call(this,t,n)||this;return r.binding=n.binding,r}return e}(mQe.LabelController);Lf.InputBindingController=gQe;var Hg={},vQe=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Hg,"__esModule",{value:!0});Hg.MonitorBindingApi=void 0;var _Qe=Ds,bQe=ri,yQe=Qu,xQe=Ao,wQe=function(i){vQe(e,i);function e(t){var n=i.call(this,t)||this;return n.onBindingUpdate_=n.onBindingUpdate_.bind(n),n.emitter_=new _Qe.Emitter,n.controller_.binding.emitter.on("update",n.onBindingUpdate_),n}return Object.defineProperty(e.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n){var r=n.bind(this);return this.emitter_.on(t,function(s){r(s.event)}),this},e.prototype.refresh=function(){this.controller_.binding.read()},e.prototype.onBindingUpdate_=function(t){var n=t.sender.target.read();this.emitter_.emit("update",{event:new xQe.TpUpdateEvent(this,(0,bQe.forceCast)(n),this.controller_.binding.target.presetKey)})},e}(yQe.BladeApi);Hg.MonitorBindingApi=wQe;var Df={},SQe=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Df,"__esModule",{value:!0});Df.MonitorBindingController=void 0;var MQe=g0,CQe=function(i){SQe(e,i);function e(t,n){var r=i.call(this,t,n)||this;return r.binding=n.binding,r.viewProps.bindDisabled(r.binding.ticker),r.viewProps.handleDispose(function(){r.binding.dispose()}),r}return e}(MQe.LabelController);Df.MonitorBindingController=CQe;var EQe=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(gf,"__esModule",{value:!0});gf.RackApi=gf.findSubBladeApiSet=void 0;var OR=I_,TQe=Ds,F5=ul,DM=ri,AQe=Qu,fx=Lu,PQe=Fg,zM=Ao,kQe=v0,RQe=Bg,OQe=Vg,LQe=Lf,DQe=Hg,zQe=Df;function MF(i){return i instanceof CF?i.apiSet_:i instanceof PQe.RackLikeApi?i.rackApi_.apiSet_:null}gf.findSubBladeApiSet=MF;function Vv(i,e){var t=i.find(function(n){return n.controller_===e});if(!t)throw F5.TpError.shouldNeverHappen();return t}function LR(i,e,t){if(!OR.BindingTarget.isBindable(i))throw F5.TpError.notBindable();return new OR.BindingTarget(i,e,t)}var CF=function(i){EQe(e,i);function e(t,n){var r=i.call(this,t)||this;r.onRackAdd_=r.onRackAdd_.bind(r),r.onRackRemove_=r.onRackRemove_.bind(r),r.onRackInputChange_=r.onRackInputChange_.bind(r),r.onRackMonitorUpdate_=r.onRackMonitorUpdate_.bind(r),r.emitter_=new TQe.Emitter,r.apiSet_=new RQe.NestedOrderedSet(MF),r.pool_=n;var s=r.controller_.rack;return s.emitter.on("add",r.onRackAdd_),s.emitter.on("remove",r.onRackRemove_),s.emitter.on("inputchange",r.onRackInputChange_),s.emitter.on("monitorupdate",r.onRackMonitorUpdate_),s.children.forEach(function(o){r.setUpApi_(o)}),r}return Object.defineProperty(e.prototype,"children",{get:function(){var t=this;return this.controller_.rack.children.map(function(n){return Vv(t.apiSet_,n)})},enumerable:!1,configurable:!0}),e.prototype.addInput=function(t,n,r){var s=r??{},o=this.controller_.view.element.ownerDocument,a=this.pool_.createInput(o,LR(t,n,s.presetKey),s),l=new OQe.InputBindingApi(a);return this.add(l,s.index)},e.prototype.addMonitor=function(t,n,r){var s=r??{},o=this.controller_.view.element.ownerDocument,a=this.pool_.createMonitor(o,LR(t,n),s),l=new DQe.MonitorBindingApi(a);return(0,DM.forceCast)(this.add(l,s.index))},e.prototype.addFolder=function(t){return(0,fx.addFolderAsBlade)(this,t)},e.prototype.addButton=function(t){return(0,fx.addButtonAsBlade)(this,t)},e.prototype.addSeparator=function(t){return(0,fx.addSeparatorAsBlade)(this,t)},e.prototype.addTab=function(t){return(0,fx.addTabAsBlade)(this,t)},e.prototype.add=function(t,n){this.controller_.rack.add(t.controller_,n);var r=this.apiSet_.find(function(s){return s.controller_===t.controller_});return r&&this.apiSet_.remove(r),this.apiSet_.add(t),t},e.prototype.remove=function(t){this.controller_.rack.remove(t.controller_)},e.prototype.addBlade=function(t){var n=this.controller_.view.element.ownerDocument,r=this.pool_.createBlade(n,t),s=this.pool_.createBladeApi(r);return this.add(s,t.index)},e.prototype.on=function(t,n){var r=n.bind(this);return this.emitter_.on(t,function(s){r(s.event)}),this},e.prototype.setUpApi_=function(t){var n=this.apiSet_.find(function(r){return r.controller_===t});n||this.apiSet_.add(this.pool_.createBladeApi(t))},e.prototype.onRackAdd_=function(t){this.setUpApi_(t.bladeController)},e.prototype.onRackRemove_=function(t){if(t.isRoot){var n=Vv(this.apiSet_,t.bladeController);this.apiSet_.remove(n)}},e.prototype.onRackInputChange_=function(t){var n=t.bladeController;if(n instanceof LQe.InputBindingController){var r=Vv(this.apiSet_,n),s=n.binding;this.emitter_.emit("change",{event:new zM.TpChangeEvent(r,(0,DM.forceCast)(s.target.read()),s.target.presetKey,t.options.last)})}else if(n instanceof kQe.ValueBladeController){var r=Vv(this.apiSet_,n);this.emitter_.emit("change",{event:new zM.TpChangeEvent(r,n.value.rawValue,void 0,t.options.last)})}},e.prototype.onRackMonitorUpdate_=function(t){if(!(t.bladeController instanceof zQe.MonitorBindingController))throw F5.TpError.shouldNeverHappen();var n=Vv(this.apiSet_,t.bladeController),r=t.bladeController.binding;this.emitter_.emit("update",{event:new zM.TpUpdateEvent(n,(0,DM.forceCast)(r.target.read()),r.target.presetKey)})},e}(AQe.BladeApi);gf.RackApi=CF;var IQe=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(H_,"__esModule",{value:!0});H_.FolderApi=void 0;var NQe=Ds,UQe=Fg,FQe=Ao,BQe=gf,VQe=function(i){IQe(e,i);function e(t,n){var r=i.call(this,t,new BQe.RackApi(t.rackController,n))||this;return r.emitter_=new NQe.Emitter,r.controller_.foldable.value("expanded").emitter.on("change",function(s){r.emitter_.emit("fold",{event:new FQe.TpFoldEvent(r,s.sender.rawValue)})}),r.rackApi_.on("change",function(s){r.emitter_.emit("change",{event:s})}),r.rackApi_.on("update",function(s){r.emitter_.emit("update",{event:s})}),r}return Object.defineProperty(e.prototype,"expanded",{get:function(){return this.controller_.foldable.get("expanded")},set:function(t){this.controller_.foldable.set("expanded",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.controller_.props.get("title")},set:function(t){this.controller_.props.set("title",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.rackApi_.children},enumerable:!1,configurable:!0}),e.prototype.addInput=function(t,n,r){return this.rackApi_.addInput(t,n,r)},e.prototype.addMonitor=function(t,n,r){return this.rackApi_.addMonitor(t,n,r)},e.prototype.addFolder=function(t){return this.rackApi_.addFolder(t)},e.prototype.addButton=function(t){return this.rackApi_.addButton(t)},e.prototype.addSeparator=function(t){return this.rackApi_.addSeparator(t)},e.prototype.addTab=function(t){return this.rackApi_.addTab(t)},e.prototype.add=function(t,n){return this.rackApi_.add(t,n)},e.prototype.remove=function(t){this.rackApi_.remove(t)},e.prototype.addBlade=function(t){return this.rackApi_.addBlade(t)},e.prototype.on=function(t,n){var r=n.bind(this);return this.emitter_.on(t,function(s){r(s.event)}),this},e}(UQe.RackLikeApi);H_.FolderApi=VQe;var q_={},qg={},HQe=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(qg,"__esModule",{value:!0});qg.RackLikeController=void 0;var qQe=ld,GQe=function(i){HQe(e,i);function e(t){var n=i.call(this,{blade:t.blade,view:t.view,viewProps:t.rackController.viewProps})||this;return n.rackController=t.rackController,n}return e}(qQe.BladeController);qg.RackLikeController=GQe;var Hv={},G_={};Object.defineProperty(G_,"__esModule",{value:!0});G_.PlainView=void 0;var WQe=Ui,jQe=function(){function i(e,t){var n=(0,WQe.ClassName)(t.viewName);this.element=e.createElement("div"),this.element.classList.add(n()),t.viewProps.bindClassModifiers(this.element)}return i}();G_.PlainView=jQe;var qv={},DR;function $Qe(){if(DR)return qv;DR=1,Object.defineProperty(qv,"__esModule",{value:!0}),qv.BladeRack=void 0;var i=mf,e=Ds,t=ul,n=ri,r=Lf,s=Df,o=W_(),a=qg,l=v0,c=Bg;function u(y,_){for(var S=0;S<y.length;S++){var w=y[S];if(w instanceof r.InputBindingController&&w.binding===_)return w}return null}function h(y,_){for(var S=0;S<y.length;S++){var w=y[S];if(w instanceof s.MonitorBindingController&&w.binding===_)return w}return null}function d(y,_){for(var S=0;S<y.length;S++){var w=y[S];if(w instanceof l.ValueBladeController&&w.value===_)return w}return null}function f(y){return y instanceof o.RackController?y.rack:y instanceof a.RackLikeController?y.rackController.rack:null}function g(y){var _=f(y);return _?_.bcSet_:null}var v=function(){function y(_){var S,w;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new e.Emitter,this.blade_=(S=_.blade)!==null&&S!==void 0?S:null,(w=this.blade_)===null||w===void 0||w.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=_.viewProps,this.bcSet_=new c.NestedOrderedSet(g),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}return Object.defineProperty(y.prototype,"children",{get:function(){return this.bcSet_.items},enumerable:!1,configurable:!0}),y.prototype.add=function(_,S){var w;(w=_.parent)===null||w===void 0||w.remove(_),(0,n.isPropertyWritable)(_,"parent")?_.parent=this:(_.parent_=this,(0,i.warnMissing)({key:"parent",target:"BladeController",place:"BladeRack.add"})),this.bcSet_.add(_,S)},y.prototype.remove=function(_){(0,n.isPropertyWritable)(_,"parent")?_.parent=null:(_.parent_=null,(0,i.warnMissing)({key:"parent",target:"BladeController",place:"BladeRack.remove"})),this.bcSet_.remove(_)},y.prototype.find=function(_){return(0,n.forceCast)(this.bcSet_.allItems().filter(function(S){return S instanceof _}))},y.prototype.onSetAdd_=function(_){this.updatePositions_();var S=_.target===_.root;if(this.emitter.emit("add",{bladeController:_.item,index:_.index,isRoot:S,sender:this}),!!S){var w=_.item;if(w.viewProps.emitter.on("change",this.onChildViewPropsChange_),w.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),w.viewProps.handleDispose(this.onChildDispose_),w instanceof r.InputBindingController)w.binding.emitter.on("change",this.onChildInputChange_);else if(w instanceof s.MonitorBindingController)w.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(w instanceof l.ValueBladeController)w.value.emitter.on("change",this.onChildValueChange_);else{var C=f(w);if(C){var E=C.emitter;E.on("layout",this.onDescendantLayout_),E.on("inputchange",this.onDescendantInputChange_),E.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}},y.prototype.onSetRemove_=function(_){this.updatePositions_();var S=_.target===_.root;if(this.emitter.emit("remove",{bladeController:_.item,isRoot:S,sender:this}),!!S){var w=_.item;if(w instanceof r.InputBindingController)w.binding.emitter.off("change",this.onChildInputChange_);else if(w instanceof s.MonitorBindingController)w.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(w instanceof l.ValueBladeController)w.value.emitter.off("change",this.onChildValueChange_);else{var C=f(w);if(C){var E=C.emitter;E.off("layout",this.onDescendantLayout_),E.off("inputchange",this.onDescendantInputChange_),E.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}},y.prototype.updatePositions_=function(){var _=this,S=this.bcSet_.items.filter(function(E){return!E.viewProps.get("hidden")}),w=S[0],C=S[S.length-1];this.bcSet_.items.forEach(function(E){var k=[];E===w&&(k.push("first"),(!_.blade_||_.blade_.get("positions").includes("veryfirst"))&&k.push("veryfirst")),E===C&&(k.push("last"),(!_.blade_||_.blade_.get("positions").includes("verylast"))&&k.push("verylast")),E.blade.set("positions",k)})},y.prototype.onChildPositionsChange_=function(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})},y.prototype.onChildViewPropsChange_=function(_){this.updatePositions_(),this.emitter.emit("layout",{sender:this})},y.prototype.onChildDispose_=function(){var _=this,S=this.bcSet_.items.filter(function(w){return w.viewProps.get("disposed")});S.forEach(function(w){_.bcSet_.remove(w)})},y.prototype.onChildInputChange_=function(_){var S=u(this.find(r.InputBindingController),_.sender);if(!S)throw t.TpError.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:S,options:_.options,sender:this})},y.prototype.onChildMonitorUpdate_=function(_){var S=h(this.find(s.MonitorBindingController),_.sender);if(!S)throw t.TpError.alreadyDisposed();this.emitter.emit("monitorupdate",{bladeController:S,sender:this})},y.prototype.onChildValueChange_=function(_){var S=d(this.find(l.ValueBladeController),_.sender);if(!S)throw t.TpError.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:S,options:_.options,sender:this})},y.prototype.onDescendantLayout_=function(_){this.updatePositions_(),this.emitter.emit("layout",{sender:this})},y.prototype.onDescendantInputChange_=function(_){this.emitter.emit("inputchange",{bladeController:_.bladeController,options:_.options,sender:this})},y.prototype.onDescendantMonitorUpdate_=function(_){this.emitter.emit("monitorupdate",{bladeController:_.bladeController,sender:this})},y.prototype.onBladePositionsChange_=function(){this.updatePositions_()},y}();return qv.BladeRack=v,qv}var zR;function W_(){if(zR)return Hv;zR=1;var i=it&&it.__extends||function(){var a=function(l,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(u[d]=h[d])},a(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(l,c);function u(){this.constructor=l}l.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}}(),e=it&&it.__assign||function(){return e=Object.assign||function(a){for(var l,c=1,u=arguments.length;c<u;c++){l=arguments[c];for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(a[h]=l[h])}return a},e.apply(this,arguments)};Object.defineProperty(Hv,"__esModule",{value:!0}),Hv.RackController=void 0;var t=Vo,n=G_,r=ld,s=$Qe(),o=function(a){i(l,a);function l(c,u){var h=a.call(this,e(e({},u),{view:new n.PlainView(c,{viewName:"brk",viewProps:u.viewProps})}))||this;h.onRackAdd_=h.onRackAdd_.bind(h),h.onRackRemove_=h.onRackRemove_.bind(h);var d=new s.BladeRack({blade:u.root?void 0:u.blade,viewProps:u.viewProps});return d.emitter.on("add",h.onRackAdd_),d.emitter.on("remove",h.onRackRemove_),h.rack=d,h.viewProps.handleDispose(function(){for(var f=h.rack.children.length-1;f>=0;f--){var g=h.rack.children[f];g.viewProps.set("disposed",!0)}}),h}return l.prototype.onRackAdd_=function(c){c.isRoot&&(0,t.insertElementAt)(this.view.element,c.bladeController.view.element,c.index)},l.prototype.onRackRemove_=function(c){c.isRoot&&(0,t.removeElement)(c.bladeController.view.element)},l}(r.BladeController);return Hv.RackController=o,Hv}var j_={},$_={};Object.defineProperty($_,"__esModule",{value:!0});$_.bladeContainerClassName=void 0;var XQe=Ui;$_.bladeContainerClassName=(0,XQe.ClassName)("cnt");Object.defineProperty(j_,"__esModule",{value:!0});j_.FolderView=void 0;var IR=fo,YQe=Ui,NR=ol,KQe=ri,ZQe=$_,JQe=function(){function i(e,t){var n=this,r;this.className_=(0,YQe.ClassName)((r=t.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),(0,ZQe.bladeContainerClassName)()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),(0,IR.bindValueMap)(this.foldable_,"completed",(0,NR.valueToClassName)(this.element,this.className_(void 0,"cpl")));var s=e.createElement("button");s.classList.add(this.className_("b")),(0,IR.bindValueMap)(t.props,"title",function(u){(0,KQe.isEmpty)(u)?n.element.classList.add(n.className_(void 0,"not")):n.element.classList.remove(n.className_(void 0,"not"))}),t.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;var o=e.createElement("div");o.classList.add(this.className_("i")),this.element.appendChild(o);var a=e.createElement("div");a.classList.add(this.className_("t")),(0,NR.bindValueToTextContent)(t.props.value("title"),a),this.buttonElement.appendChild(a),this.titleElement=a;var l=e.createElement("div");l.classList.add(this.className_("m")),this.buttonElement.appendChild(l);var c=t.containerElement;c.classList.add(this.className_("c")),this.element.appendChild(c),this.containerElement=c}return i}();j_.FolderView=JQe;var QQe=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hw=it&&it.__assign||function(){return Hw=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},Hw.apply(this,arguments)};Object.defineProperty(q_,"__esModule",{value:!0});q_.FolderController=void 0;var eet=qg,UR=ya,tet=W_(),net=j_,iet=function(i){QQe(e,i);function e(t,n){var r=this,s,o=UR.Foldable.create((s=n.expanded)!==null&&s!==void 0?s:!0),a=new tet.RackController(t,{blade:n.blade,root:n.root,viewProps:n.viewProps});return r=i.call(this,Hw(Hw({},n),{rackController:a,view:new net.FolderView(t,{containerElement:a.view.element,foldable:o,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps})}))||this,r.onTitleClick_=r.onTitleClick_.bind(r),r.props=n.props,r.foldable=o,(0,UR.bindFoldable)(r.foldable,r.view.containerElement),r.rackController.rack.emitter.on("add",function(){r.foldable.cleanUpTransition()}),r.rackController.rack.emitter.on("remove",function(){r.foldable.cleanUpTransition()}),r.view.buttonElement.addEventListener("click",r.onTitleClick_),r}return Object.defineProperty(e.prototype,"document",{get:function(){return this.view.element.ownerDocument},enumerable:!1,configurable:!0}),e.prototype.onTitleClick_=function(){this.foldable.set("expanded",!this.foldable.get("expanded"))},e}(eet.RackLikeController);q_.FolderController=iet;var X_={};Object.defineProperty(X_,"__esModule",{value:!0});X_.FolderBladePlugin=void 0;var ret=Ar,FR=Qs,set=H_,BR=q_;X_.FolderBladePlugin={id:"folder",type:"blade",accept:function(i){var e=FR.ParamsParsers,t=(0,FR.parseParams)(i,{title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean});return t?{params:t}:null},controller:function(i){return new BR.FolderController(i.document,{blade:i.blade,expanded:i.params.expanded,props:ret.ValueMap.fromObject({title:i.params.title}),viewProps:i.viewProps})},api:function(i){return i.controller instanceof BR.FolderController?new set.FolderApi(i.controller,i.pool):null}};var H4={},oet=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qw=it&&it.__assign||function(){return qw=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},qw.apply(this,arguments)};Object.defineProperty(H4,"__esModule",{value:!0});H4.LabeledValueController=void 0;var aet=v0,cet=Ug,uet=function(i){oet(e,i);function e(t,n){var r=this,s=n.valueController.viewProps;return r=i.call(this,qw(qw({},n),{value:n.valueController.value,view:new cet.LabelView(t,{props:n.props,viewProps:s}),viewProps:s}))||this,r.props=n.props,r.valueController=n.valueController,r.view.valueElement.appendChild(r.valueController.view.element),r}return e}(aet.ValueBladeController);H4.LabeledValueController=uet;var Y_={},het=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Y_,"__esModule",{value:!0});Y_.SeparatorApi=void 0;var det=Qu,fet=function(i){het(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e}(det.BladeApi);Y_.SeparatorApi=fet;var K_={},q4={};Object.defineProperty(q4,"__esModule",{value:!0});q4.SeparatorView=void 0;var pet=Ui,VR=(0,pet.ClassName)("spr"),met=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(VR()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("hr");n.classList.add(VR("r")),this.element.appendChild(n)}return i}();q4.SeparatorView=met;var get=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gw=it&&it.__assign||function(){return Gw=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},Gw.apply(this,arguments)};Object.defineProperty(K_,"__esModule",{value:!0});K_.SeparatorController=void 0;var vet=ld,_et=q4,bet=function(i){get(e,i);function e(t,n){return i.call(this,Gw(Gw({},n),{view:new _et.SeparatorView(t,{viewProps:n.viewProps})}))||this}return e}(vet.BladeController);K_.SeparatorController=bet;var Z_={};Object.defineProperty(Z_,"__esModule",{value:!0});Z_.SeparatorBladePlugin=void 0;var HR=Qs,yet=Y_,qR=K_;Z_.SeparatorBladePlugin={id:"separator",type:"blade",accept:function(i){var e=HR.ParamsParsers,t=(0,HR.parseParams)(i,{view:e.required.constant("separator")});return t?{params:t}:null},controller:function(i){return new qR.SeparatorController(i.document,{blade:i.blade,viewProps:i.viewProps})},api:function(i){return i.controller instanceof qR.SeparatorController?new yet.SeparatorApi(i.controller):null}};var J_={},Gg={},G4={},W4={};Object.defineProperty(W4,"__esModule",{value:!0});W4.TabItemView=void 0;var xet=fo,wet=Ui,Met=ol,Gv=(0,wet.ClassName)("tbi"),Cet=function(){function i(e,t){var n=this;this.element=e.createElement("div"),this.element.classList.add(Gv()),t.viewProps.bindClassModifiers(this.element),(0,xet.bindValueMap)(t.props,"selected",function(o){o?n.element.classList.add(Gv(void 0,"sel")):n.element.classList.remove(Gv(void 0,"sel"))});var r=e.createElement("button");r.classList.add(Gv("b")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;var s=e.createElement("div");s.classList.add(Gv("t")),(0,Met.bindValueToTextContent)(t.props.value("title"),s),this.buttonElement.appendChild(s),this.titleElement=s}return i}();W4.TabItemView=Cet;Object.defineProperty(G4,"__esModule",{value:!0});G4.TabItemController=void 0;var Eet=Ds,Tet=W4,Aet=function(){function i(e,t){this.emitter=new Eet.Emitter,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new Tet.TabItemView(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return i.prototype.onClick_=function(){this.emitter.emit("click",{sender:this})},i}();G4.TabItemController=Aet;Object.defineProperty(Gg,"__esModule",{value:!0});Gg.TabPageController=void 0;var Pet=fo,GR=cd,ket=Of,Ret=W_(),Oet=G4,Let=function(){function i(e,t){var n=this;this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Oet.TabItemController(e,{props:t.itemProps,viewProps:GR.ViewProps.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new Ret.RackController(e,{blade:(0,ket.createBlade)(),viewProps:GR.ViewProps.create()}),this.props=t.props,(0,Pet.bindValueMap)(this.props,"selected",function(r){n.itemController.props.set("selected",r),n.contentController.viewProps.set("hidden",!r)})}return Object.defineProperty(i.prototype,"itemController",{get:function(){return this.ic_},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"contentController",{get:function(){return this.cc_},enumerable:!1,configurable:!0}),i.prototype.onItemClick_=function(){this.props.set("selected",!0)},i}();Gg.TabPageController=Let;var Q_={};Object.defineProperty(Q_,"__esModule",{value:!0});Q_.TabPageApi=void 0;var Det=function(){function i(e,t){this.controller_=e,this.rackApi_=t}return Object.defineProperty(i.prototype,"title",{get:function(){var e;return(e=this.controller_.itemController.props.get("title"))!==null&&e!==void 0?e:""},set:function(e){this.controller_.itemController.props.set("title",e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this.controller_.props.get("selected")},set:function(e){this.controller_.props.set("selected",e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"children",{get:function(){return this.rackApi_.children},enumerable:!1,configurable:!0}),i.prototype.addButton=function(e){return this.rackApi_.addButton(e)},i.prototype.addFolder=function(e){return this.rackApi_.addFolder(e)},i.prototype.addSeparator=function(e){return this.rackApi_.addSeparator(e)},i.prototype.addTab=function(e){return this.rackApi_.addTab(e)},i.prototype.add=function(e,t){this.rackApi_.add(e,t)},i.prototype.remove=function(e){this.rackApi_.remove(e)},i.prototype.addInput=function(e,t,n){return this.rackApi_.addInput(e,t,n)},i.prototype.addMonitor=function(e,t,n){return this.rackApi_.addMonitor(e,t,n)},i.prototype.addBlade=function(e){return this.rackApi_.addBlade(e)},i}();Q_.TabPageApi=Det;var zet=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(J_,"__esModule",{value:!0});J_.TabApi=void 0;var Iet=Ds,WR=Ar,px=ul,Net=Fg,Uet=Ao,Fet=gf,Bet=Gg,Vet=Q_,Het=function(i){zet(e,i);function e(t,n){var r=i.call(this,t,new Fet.RackApi(t.rackController,n))||this;return r.onPageAdd_=r.onPageAdd_.bind(r),r.onPageRemove_=r.onPageRemove_.bind(r),r.onSelect_=r.onSelect_.bind(r),r.emitter_=new Iet.Emitter,r.pageApiMap_=new Map,r.rackApi_.on("change",function(s){r.emitter_.emit("change",{event:s})}),r.rackApi_.on("update",function(s){r.emitter_.emit("update",{event:s})}),r.controller_.tab.selectedIndex.emitter.on("change",r.onSelect_),r.controller_.pageSet.emitter.on("add",r.onPageAdd_),r.controller_.pageSet.emitter.on("remove",r.onPageRemove_),r.controller_.pageSet.items.forEach(function(s){r.setUpPageApi_(s)}),r}return Object.defineProperty(e.prototype,"pages",{get:function(){var t=this;return this.controller_.pageSet.items.map(function(n){var r=t.pageApiMap_.get(n);if(!r)throw px.TpError.shouldNeverHappen();return r})},enumerable:!1,configurable:!0}),e.prototype.addPage=function(t){var n=this.controller_.view.element.ownerDocument,r=new Bet.TabPageController(n,{itemProps:WR.ValueMap.fromObject({selected:!1,title:t.title}),props:WR.ValueMap.fromObject({selected:!1})});this.controller_.add(r,t.index);var s=this.pageApiMap_.get(r);if(!s)throw px.TpError.shouldNeverHappen();return s},e.prototype.removePage=function(t){this.controller_.remove(t)},e.prototype.on=function(t,n){var r=n.bind(this);return this.emitter_.on(t,function(s){r(s.event)}),this},e.prototype.setUpPageApi_=function(t){var n=this.rackApi_.apiSet_.find(function(s){return s.controller_===t.contentController});if(!n)throw px.TpError.shouldNeverHappen();var r=new Vet.TabPageApi(t,n);this.pageApiMap_.set(t,r)},e.prototype.onPageAdd_=function(t){this.setUpPageApi_(t.item)},e.prototype.onPageRemove_=function(t){var n=this.pageApiMap_.get(t.item);if(!n)throw px.TpError.shouldNeverHappen();this.pageApiMap_.delete(t.item)},e.prototype.onSelect_=function(t){this.emitter_.emit("select",{event:new Uet.TpTabSelectEvent(this,t.rawValue)})},e}(Net.RackLikeApi);J_.TabApi=Het;var eb={},j4={};Object.defineProperty(j4,"__esModule",{value:!0});j4.Tab=void 0;var jR=ra,$R=-1,qet=function(){function i(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=(0,jR.createValue)(!0),this.selectedIndex=(0,jR.createValue)($R),this.items_=[]}return i.prototype.add=function(e,t){var n=t??this.items_.length;this.items_.splice(n,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()},i.prototype.remove=function(e){var t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())},i.prototype.keepSelection_=function(){if(this.items_.length===0){this.selectedIndex.rawValue=$R,this.empty.rawValue=!0;return}var e=this.items_.findIndex(function(t){return t.rawValue});e<0?(this.items_.forEach(function(t,n){t.rawValue=n===0}),this.selectedIndex.rawValue=0):(this.items_.forEach(function(t,n){t.rawValue=n===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1},i.prototype.onItemSelectedChange_=function(e){if(e.rawValue){var t=this.items_.findIndex(function(n){return n===e.sender});this.items_.forEach(function(n,r){n.rawValue=r===t}),this.selectedIndex.rawValue=t}else this.keepSelection_()},i}();j4.Tab=qet;var $4={};Object.defineProperty($4,"__esModule",{value:!0});$4.TabView=void 0;var Get=fo,Wet=Ui,jet=ol,$et=$_,Wv=(0,Wet.ClassName)("tab"),Xet=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(Wv(),(0,$et.bladeContainerClassName)()),t.viewProps.bindClassModifiers(this.element),(0,Get.bindValue)(t.empty,(0,jet.valueToClassName)(this.element,Wv(void 0,"nop")));var n=e.createElement("div");n.classList.add(Wv("t")),this.element.appendChild(n),this.itemsElement=n;var r=e.createElement("div");r.classList.add(Wv("i")),this.element.appendChild(r);var s=t.contentsElement;s.classList.add(Wv("c")),this.element.appendChild(s),this.contentsElement=s}return i}();$4.TabView=Xet;var Yet=it&&it.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},i(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(eb,"__esModule",{value:!0});eb.TabController=void 0;var XR=Vo,Ket=qg,Zet=Bg,Jet=W_(),Qet=j4,ett=$4,ttt=function(i){Yet(e,i);function e(t,n){var r=this,s=new Jet.RackController(t,{blade:n.blade,viewProps:n.viewProps}),o=new Qet.Tab;return r=i.call(this,{blade:n.blade,rackController:s,view:new ett.TabView(t,{contentsElement:s.view.element,empty:o.empty,viewProps:n.viewProps})})||this,r.onPageAdd_=r.onPageAdd_.bind(r),r.onPageRemove_=r.onPageRemove_.bind(r),r.pageSet_=new Zet.NestedOrderedSet(function(){return null}),r.pageSet_.emitter.on("add",r.onPageAdd_),r.pageSet_.emitter.on("remove",r.onPageRemove_),r.tab=o,r}return Object.defineProperty(e.prototype,"pageSet",{get:function(){return this.pageSet_},enumerable:!1,configurable:!0}),e.prototype.add=function(t,n){this.pageSet_.add(t,n)},e.prototype.remove=function(t){this.pageSet_.remove(this.pageSet_.items[t])},e.prototype.onPageAdd_=function(t){var n=t.item;(0,XR.insertElementAt)(this.view.itemsElement,n.itemController.view.element,t.index),n.itemController.viewProps.set("parent",this.viewProps),this.rackController.rack.add(n.contentController,t.index),this.tab.add(n.props.value("selected"))},e.prototype.onPageRemove_=function(t){var n=t.item;(0,XR.removeElement)(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.rackController.rack.remove(n.contentController),this.tab.remove(n.props.value("selected"))},e}(Ket.RackLikeController);eb.TabController=ttt;var tb={};Object.defineProperty(tb,"__esModule",{value:!0});tb.TabBladePlugin=void 0;var YR=Ar,KR=Qs,ntt=J_,ZR=eb,itt=Gg;tb.TabBladePlugin={id:"tab",type:"blade",accept:function(i){var e=KR.ParamsParsers,t=(0,KR.parseParams)(i,{pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")});return!t||t.pages.length===0?null:{params:t}},controller:function(i){var e=new ZR.TabController(i.document,{blade:i.blade,viewProps:i.viewProps});return i.params.pages.forEach(function(t){var n=new itt.TabPageController(i.document,{itemProps:YR.ValueMap.fromObject({selected:!1,title:t.title}),props:YR.ValueMap.fromObject({selected:!1})});e.add(n)}),e},api:function(i){return i.controller instanceof ZR.TabController?new ntt.TabApi(i.controller,i.pool):null}};var nb={},Ww=it&&it.__assign||function(){return Ww=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},Ww.apply(this,arguments)};Object.defineProperty(nb,"__esModule",{value:!0});nb.createBladeController=void 0;var rtt=cd,JR=Qs,stt=ri,ott=Of;function att(i,e){var t=i.accept(e.params);if(!t)return null;var n=JR.ParamsParsers.optional.boolean(e.params.disabled).value,r=JR.ParamsParsers.optional.boolean(e.params.hidden).value;return i.controller({blade:(0,ott.createBlade)(),document:e.document,params:(0,stt.forceCast)(Ww(Ww({},t.params),{disabled:n,hidden:r})),viewProps:rtt.ViewProps.create({disabled:n,hidden:r})})}nb.createBladeController=att;var ib={};Object.defineProperty(ib,"__esModule",{value:!0});ib.ManualTicker=void 0;var ltt=Ds,ctt=function(){function i(){this.disabled=!1,this.emitter=new ltt.Emitter}return i.prototype.dispose=function(){},i.prototype.tick=function(){this.disabled||this.emitter.emit("tick",{sender:this})},i}();ib.ManualTicker=ctt;var rb={};Object.defineProperty(rb,"__esModule",{value:!0});rb.IntervalTicker=void 0;var utt=Ds,htt=function(){function i(e,t){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new utt.Emitter,this.interval_=t,this.setTimer_()}return Object.defineProperty(i.prototype,"disabled",{get:function(){return this.disabled_},set:function(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){this.clearTimer_()},i.prototype.clearTimer_=function(){if(this.timerId_!==null){var e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}},i.prototype.setTimer_=function(){if(this.clearTimer_(),!(this.interval_<=0)){var e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}},i.prototype.onTick_=function(){this.disabled_||this.emitter.emit("tick",{sender:this})},i}();rb.IntervalTicker=htt;var EF={};Object.defineProperty(EF,"__esModule",{value:!0});var sb={};Object.defineProperty(sb,"__esModule",{value:!0});sb.InputBinding=void 0;var dtt=Ds,ftt=function(){function i(e){this.onValueChange_=this.onValueChange_.bind(this),this.reader=e.reader,this.writer=e.writer,this.emitter=new dtt.Emitter,this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.target=e.target,this.read()}return i.prototype.read=function(){var e=this.target.read();e!==void 0&&(this.value.rawValue=this.reader(e))},i.prototype.write_=function(e){this.writer(this.target,e)},i.prototype.onValueChange_=function(e){this.write_(e.rawValue),this.emitter.emit("change",{options:e.options,rawValue:e.rawValue,sender:this})},i}();sb.InputBinding=ftt;var ob={},vf={},QR=it&&it.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(vf,"__esModule",{value:!0});vf.createPushedBuffer=vf.initializeBuffer=void 0;var ptt=ri,mtt=ra;function TF(i,e){for(;i.length<e;)i.push(void 0)}function gtt(i){var e=[];return TF(e,i),(0,mtt.createValue)(e)}vf.initializeBuffer=gtt;function vtt(i){var e=i.indexOf(void 0);return(0,ptt.forceCast)(e<0?i:i.slice(0,e))}function _tt(i,e){var t=QR(QR([],vtt(i),!0),[e],!1);return t.length>i.length?t.splice(0,t.length-i.length):TF(t,i.length),t}vf.createPushedBuffer=_tt;Object.defineProperty(ob,"__esModule",{value:!0});ob.MonitorBinding=void 0;var btt=vf,ytt=Ds,xtt=function(){function i(e){this.onTick_=this.onTick_.bind(this),this.reader_=e.reader,this.target=e.target,this.emitter=new ytt.Emitter,this.value=e.value,this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}return i.prototype.dispose=function(){this.ticker.dispose()},i.prototype.read=function(){var e=this.target.read();if(e!==void 0){var t=this.value.rawValue,n=this.reader_(e);this.value.rawValue=(0,btt.createPushedBuffer)(t,n),this.emitter.emit("update",{rawValue:n,sender:this})}},i.prototype.onTick_=function(e){this.read()},i}();ob.MonitorBinding=xtt;var tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.findConstraint=tu.CompositeConstraint=void 0;var AF=function(){function i(e){this.constraints=e}return i.prototype.constrain=function(e){return this.constraints.reduce(function(t,n){return n.constrain(t)},e)},i}();tu.CompositeConstraint=AF;function wtt(i,e){if(i instanceof e)return i;if(i instanceof AF){var t=i.constraints.reduce(function(n,r){return n||(r instanceof e?r:null)},null);if(t)return t}return null}tu.findConstraint=wtt;var PF={};Object.defineProperty(PF,"__esModule",{value:!0});var _0={};Object.defineProperty(_0,"__esModule",{value:!0});_0.DefiniteRangeConstraint=void 0;var Stt=Ar,Mtt=function(){function i(e){this.values=Stt.ValueMap.fromObject({max:e.max,min:e.min})}return i.prototype.constrain=function(e){var t=this.values.get("max"),n=this.values.get("min");return Math.min(Math.max(e,n),t)},i}();_0.DefiniteRangeConstraint=Mtt;var zf={};Object.defineProperty(zf,"__esModule",{value:!0});zf.ListConstraint=void 0;var Ctt=Ar,Ett=function(){function i(e){this.values=Ctt.ValueMap.fromObject({options:e})}return Object.defineProperty(i.prototype,"options",{get:function(){return this.values.get("options")},enumerable:!1,configurable:!0}),i.prototype.constrain=function(e){var t=this.values.get("options");if(t.length===0)return e;var n=t.filter(function(r){return r.value===e}).length>0;return n?e:t[0].value},i}();zf.ListConstraint=Ett;var ab={};Object.defineProperty(ab,"__esModule",{value:!0});ab.RangeConstraint=void 0;var eO=ri,Ttt=Ar,Att=function(){function i(e){this.values=Ttt.ValueMap.fromObject({max:e.max,min:e.min})}return Object.defineProperty(i.prototype,"maxValue",{get:function(){return this.values.get("max")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minValue",{get:function(){return this.values.get("min")},enumerable:!1,configurable:!0}),i.prototype.constrain=function(e){var t=this.values.get("max"),n=this.values.get("min"),r=e;return(0,eO.isEmpty)(n)||(r=Math.max(r,n)),(0,eO.isEmpty)(t)||(r=Math.min(r,t)),r},i}();ab.RangeConstraint=Att;var Wg={};Object.defineProperty(Wg,"__esModule",{value:!0});Wg.StepConstraint=void 0;var Ptt=function(){function i(e,t){t===void 0&&(t=0),this.step=e,this.origin=t}return i.prototype.constrain=function(e){var t=this.origin%this.step,n=Math.round((e-t)/this.step);return t+n*this.step},i}();Wg.StepConstraint=Ptt;var kF={};Object.defineProperty(kF,"__esModule",{value:!0});var b0={},lb={};Object.defineProperty(lb,"__esModule",{value:!0});lb.ListView=void 0;var tO=Vo,ktt=fo,Rtt=Ui,IM=(0,Rtt.ClassName)("lst"),Ott=function(){function i(e,t){var n=this;this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add(IM()),t.viewProps.bindClassModifiers(this.element);var r=e.createElement("select");r.classList.add(IM("s")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;var s=e.createElement("div");s.classList.add(IM("m")),s.appendChild((0,tO.createSvgIconElement)(e,"dropdown")),this.element.appendChild(s),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,(0,ktt.bindValueMap)(this.props_,"options",function(o){(0,tO.removeChildElements)(n.selectElement),o.forEach(function(a){var l=e.createElement("option");l.textContent=a.text,n.selectElement.appendChild(l)}),n.update_()})}return i.prototype.update_=function(){var e=this.props_.get("options").map(function(t){return t.value});this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)},i.prototype.onValueChange_=function(){this.update_()},i}();lb.ListView=Ott;Object.defineProperty(b0,"__esModule",{value:!0});b0.ListController=void 0;var Ltt=ri,Dtt=lb,ztt=function(){function i(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new Dtt.ListView(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}return i.prototype.onSelectChange_=function(e){var t=(0,Ltt.forceCast)(e.currentTarget);this.value.rawValue=this.props.get("options")[t.selectedIndex].value},i}();b0.ListController=ztt;var jg={},cb={};Object.defineProperty(cb,"__esModule",{value:!0});cb.PopupView=void 0;var Itt=fo,Ntt=Ui,Utt=ol,nO=(0,Ntt.ClassName)("pop"),Ftt=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(nO()),t.viewProps.bindClassModifiers(this.element),(0,Itt.bindValue)(t.shows,(0,Utt.valueToClassName)(this.element,nO(void 0,"v")))}return i}();cb.PopupView=Ftt;Object.defineProperty(jg,"__esModule",{value:!0});jg.PopupController=void 0;var Btt=ra,Vtt=cb,Htt=function(){function i(e,t){this.shows=(0,Btt.createValue)(!1),this.viewProps=t.viewProps,this.view=new Vtt.PopupView(e,{shows:this.shows,viewProps:this.viewProps})}return i}();jg.PopupController=Htt;var $g={},ub={};Object.defineProperty(ub,"__esModule",{value:!0});ub.TextView=void 0;var qtt=Ui,iO=(0,qtt.ClassName)("txt"),Gtt=function(){function i(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(iO()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);var n=e.createElement("input");n.classList.add(iO("i")),n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}return i.prototype.refresh=function(){var e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)},i.prototype.onChange_=function(){this.refresh()},i}();ub.TextView=Gtt;Object.defineProperty($g,"__esModule",{value:!0});$g.TextController=void 0;var rO=ri,Wtt=ub,jtt=function(){function i(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new Wtt.TextView(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return i.prototype.onInputChange_=function(e){var t=(0,rO.forceCast)(e.currentTarget),n=t.value,r=this.parser_(n);(0,rO.isEmpty)(r)||(this.value.rawValue=r),this.view.refresh()},i}();$g.TextController=jtt;var RF={};Object.defineProperty(RF,"__esModule",{value:!0});var Fu={};Object.defineProperty(Fu,"__esModule",{value:!0});Fu.BooleanFormatter=Fu.boolFromUnknown=Fu.boolToString=void 0;function OF(i){return String(i)}Fu.boolToString=OF;function $tt(i){return i==="false"?!1:!!i}Fu.boolFromUnknown=$tt;function Xtt(i){return OF(i)}Fu.BooleanFormatter=Xtt;var LF={};Object.defineProperty(LF,"__esModule",{value:!0});var co={},X4={},of={};Object.defineProperty(of,"__esModule",{value:!0});of.UnaryOperationNode=of.BinaryOperationNode=of.NumberLiteralNode=void 0;var Ytt=function(){function i(e){this.text=e}return i.prototype.evaluate=function(){return Number(this.text)},i.prototype.toString=function(){return this.text},i}();of.NumberLiteralNode=Ytt;var Ktt={"**":function(i,e){return Math.pow(i,e)},"*":function(i,e){return i*e},"/":function(i,e){return i/e},"%":function(i,e){return i%e},"+":function(i,e){return i+e},"-":function(i,e){return i-e},"<<":function(i,e){return i<<e},">>":function(i,e){return i>>e},">>>":function(i,e){return i>>>e},"&":function(i,e){return i&e},"^":function(i,e){return i^e},"|":function(i,e){return i|e}},Ztt=function(){function i(e,t,n){this.left=t,this.operator=e,this.right=n}return i.prototype.evaluate=function(){var e=Ktt[this.operator];if(!e)throw new Error("unexpected binary operator: '".concat(this.operator));return e(this.left.evaluate(),this.right.evaluate())},i.prototype.toString=function(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")},i}();of.BinaryOperationNode=Ztt;var Jtt={"+":function(i){return i},"-":function(i){return-i},"~":function(i){return~i}},Qtt=function(){function i(e,t){this.operator=e,this.expression=t}return i.prototype.evaluate=function(){var e=Jtt[this.operator];if(!e)throw new Error("unexpected unary operator: '".concat(this.operator));return e(this.expression.evaluate())},i.prototype.toString=function(){return["u(",this.operator,this.expression.toString(),")"].join(" ")},i}();of.UnaryOperationNode=Qtt;var ug={};Object.defineProperty(ug,"__esModule",{value:!0});ug.readNumericLiteral=ug.readWhitespace=void 0;function B5(i){return function(e,t){for(var n=0;n<i.length;n++){var r=i[n](e,t);if(r!=="")return r}return""}}function ent(i,e){var t,n=i.substr(e).match(/^\s+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}ug.readWhitespace=ent;function tnt(i,e){var t=i.substr(e,1);return t.match(/^[1-9]$/)?t:""}function t_(i,e){var t,n=i.substr(e).match(/^[0-9]+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function nnt(i,e){var t=t_(i,e);if(t!=="")return t;var n=i.substr(e,1);if(e+=1,n!=="-"&&n!=="+")return"";var r=t_(i,e);return r===""?"":n+r}function V5(i,e){var t=i.substr(e,1);if(e+=1,t.toLowerCase()!=="e")return"";var n=nnt(i,e);return n===""?"":t+n}function DF(i,e){var t=i.substr(e,1);if(t==="0")return t;var n=tnt(i,e);return e+=n.length,n===""?"":n+t_(i,e)}function int(i,e){var t=DF(i,e);if(e+=t.length,t==="")return"";var n=i.substr(e,1);if(e+=n.length,n!==".")return"";var r=t_(i,e);return e+=r.length,t+n+r+V5(i,e)}function rnt(i,e){var t=i.substr(e,1);if(e+=t.length,t!==".")return"";var n=t_(i,e);return e+=n.length,n===""?"":t+n+V5(i,e)}function snt(i,e){var t=DF(i,e);return e+=t.length,t===""?"":t+V5(i,e)}var ont=B5([int,rnt,snt]);function ant(i,e){var t,n=i.substr(e).match(/^[01]+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function lnt(i,e){var t=i.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0b")return"";var n=ant(i,e);return n===""?"":t+n}function cnt(i,e){var t,n=i.substr(e).match(/^[0-7]+/);return(t=n&&n[0])!==null&&t!==void 0?t:""}function unt(i,e){var t=i.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0o")return"";var n=cnt(i,e);return n===""?"":t+n}function hnt(i,e){var t,n=i.substr(e).match(/^[0-9a-f]+/i);return(t=n&&n[0])!==null&&t!==void 0?t:""}function dnt(i,e){var t=i.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0x")return"";var n=hnt(i,e);return n===""?"":t+n}var fnt=B5([lnt,unt,dnt]);ug.readNumericLiteral=B5([fnt,ont]);Object.defineProperty(X4,"__esModule",{value:!0});X4.parseEcmaNumberExpression=void 0;var H5=of,hg=ug;function pnt(i,e){var t=(0,hg.readNumericLiteral)(i,e);return e+=t.length,t===""?null:{evaluable:new H5.NumberLiteralNode(t),cursor:e}}function mnt(i,e){var t=i.substr(e,1);if(e+=t.length,t!=="(")return null;var n=IF(i,e);if(!n)return null;e=n.cursor,e+=(0,hg.readWhitespace)(i,e).length;var r=i.substr(e,1);return e+=r.length,r!==")"?null:{evaluable:n.evaluable,cursor:e}}function gnt(i,e){var t;return(t=pnt(i,e))!==null&&t!==void 0?t:mnt(i,e)}function zF(i,e){var t=gnt(i,e);if(t)return t;var n=i.substr(e,1);if(e+=n.length,n!=="+"&&n!=="-"&&n!=="~")return null;var r=zF(i,e);return r?(e=r.cursor,{cursor:e,evaluable:new H5.UnaryOperationNode(n,r.evaluable)}):null}function vnt(i,e,t){t+=(0,hg.readWhitespace)(e,t).length;var n=i.filter(function(r){return e.startsWith(r,t)})[0];return n?(t+=n.length,t+=(0,hg.readWhitespace)(e,t).length,{cursor:t,operator:n}):null}function _nt(i,e){return function(t,n){var r=i(t,n);if(!r)return null;n=r.cursor;for(var s=r.evaluable;;){var o=vnt(e,t,n);if(!o)break;n=o.cursor;var a=i(t,n);if(!a)return null;n=a.cursor,s=new H5.BinaryOperationNode(o.operator,s,a.evaluable)}return s?{cursor:n,evaluable:s}:null}}var bnt=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(function(i,e){return _nt(i,e)},zF);function IF(i,e){return e+=(0,hg.readWhitespace)(i,e).length,bnt(i,e)}function ynt(i){var e=IF(i,0);if(!e)return null;var t=e.cursor+(0,hg.readWhitespace)(i,e.cursor).length;return t!==i.length?null:e.evaluable}X4.parseEcmaNumberExpression=ynt;Object.defineProperty(co,"__esModule",{value:!0});co.createNumberFormatter=co.numberToString=co.numberFromUnknown=co.parseNumber=void 0;var xnt=ri,wnt=X4;function NF(i){var e,t=(0,wnt.parseEcmaNumberExpression)(i);return(e=t==null?void 0:t.evaluate())!==null&&e!==void 0?e:null}co.parseNumber=NF;function Snt(i){if(typeof i=="number")return i;if(typeof i=="string"){var e=NF(i);if(!(0,xnt.isEmpty)(e))return e}return 0}co.numberFromUnknown=Snt;function Mnt(i){return String(i)}co.numberToString=Mnt;function Cnt(i){return function(e){return e.toFixed(Math.max(Math.min(i,20),0))}}co.createNumberFormatter=Cnt;var UF={};Object.defineProperty(UF,"__esModule",{value:!0});var hb={};Object.defineProperty(hb,"__esModule",{value:!0});hb.formatPercentage=void 0;var Ent=co,Tnt=(0,Ent.createNumberFormatter)(0);function Ant(i){return Tnt(i)+"%"}hb.formatPercentage=Ant;var _f={};Object.defineProperty(_f,"__esModule",{value:!0});_f.formatString=_f.stringFromUnknown=void 0;function Pnt(i){return String(i)}_f.stringFromUnknown=Pnt;function knt(i){return i}_f.formatString=knt;var FF={};Object.defineProperty(FF,"__esModule",{value:!0});var ud={};Object.defineProperty(ud,"__esModule",{value:!0});ud.connectValues=void 0;function Rnt(i){var e=i.primary,t=i.secondary,n=i.forward,r=i.backward,s=!1;function o(a){s||(s=!0,a(),s=!1)}e.emitter.on("change",function(a){o(function(){t.setRawValue(n(e,t),a.options)})}),t.emitter.on("change",function(a){o(function(){e.setRawValue(r(e,t),a.options)}),o(function(){t.setRawValue(n(e,t),a.options)})}),o(function(){t.setRawValue(n(e,t),{forceEmit:!1,last:!0})})}ud.connectValues=Rnt;var hd={},Po={};Object.defineProperty(Po,"__esModule",{value:!0});Po.isArrowKey=Po.isVerticalArrowKey=Po.getHorizontalStepKeys=Po.getVerticalStepKeys=Po.getStepForKey=void 0;function Ont(i,e){var t=i*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+t:e.downKey?-t:0}Po.getStepForKey=Ont;function Lnt(i){return{altKey:i.altKey,downKey:i.key==="ArrowDown",shiftKey:i.shiftKey,upKey:i.key==="ArrowUp"}}Po.getVerticalStepKeys=Lnt;function Dnt(i){return{altKey:i.altKey,downKey:i.key==="ArrowLeft",shiftKey:i.shiftKey,upKey:i.key==="ArrowRight"}}Po.getHorizontalStepKeys=Dnt;function BF(i){return i==="ArrowUp"||i==="ArrowDown"}Po.isVerticalArrowKey=BF;function znt(i){return BF(i)||i==="ArrowLeft"||i==="ArrowRight"}Po.isArrowKey=znt;var ou={};Object.defineProperty(ou,"__esModule",{value:!0});ou.PointerHandler=void 0;var Int=Ds;function NM(i,e){var t,n,r=e.ownerDocument.defaultView,s=e.getBoundingClientRect();return{x:i.pageX-(((t=r&&r.scrollX)!==null&&t!==void 0?t:0)+s.left),y:i.pageY-(((n=r&&r.scrollY)!==null&&n!==void 0?n:0)+s.top)}}var Nnt=function(){function i(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Int.Emitter,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}return i.prototype.computePosition_=function(e){var t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}},i.prototype.onMouseDown_=function(e){var t;e.preventDefault(),(t=e.currentTarget)===null||t===void 0||t.focus();var n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(NM(e,this.elem_)),sender:this,shiftKey:e.shiftKey})},i.prototype.onDocumentMouseMove_=function(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(NM(e,this.elem_)),sender:this,shiftKey:e.shiftKey})},i.prototype.onDocumentMouseUp_=function(e){var t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(NM(e,this.elem_)),sender:this,shiftKey:e.shiftKey})},i.prototype.onTouchStart_=function(e){e.preventDefault();var t=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-n.left,y:t.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t},i.prototype.onTouchMove_=function(e){var t=e.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-n.left,y:t.clientY-n.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t},i.prototype.onTouchEnd_=function(e){var t,n=(t=e.targetTouches.item(0))!==null&&t!==void 0?t:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey})},i}();ou.PointerHandler=Nnt;var db={},Er={};Object.defineProperty(Er,"__esModule",{value:!0});Er.loopRange=Er.constrainRange=Er.getDecimalDigits=Er.mapRange=void 0;function Unt(i,e,t,n,r){var s=(i-e)/(t-e);return n+s*(r-n)}Er.mapRange=Unt;function Fnt(i){var e=String(i.toFixed(10)),t=e.split(".")[1];return t.replace(/0+$/,"").length}Er.getDecimalDigits=Fnt;function Bnt(i,e,t){return Math.min(Math.max(i,e),t)}Er.constrainRange=Bnt;function Vnt(i,e){return(i%e+e)%e}Er.loopRange=Vnt;Object.defineProperty(db,"__esModule",{value:!0});db.NumberTextView=void 0;var UM=Vo,Hnt=Er,VF=Ui,ic=(0,VF.ClassName)("txt"),qnt=function(){function i(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(ic(),ic(void 0,"num")),t.arrayPosition&&this.element.classList.add(ic(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("input");n.classList.add(ic("i")),n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(ic()),this.inputElement.classList.add(ic("i"));var r=e.createElement("div");r.classList.add(ic("k")),this.element.appendChild(r),this.knobElement=r;var s=e.createElementNS(UM.SVG_NS,"svg");s.classList.add(ic("g")),this.knobElement.appendChild(s);var o=e.createElementNS(UM.SVG_NS,"path");o.classList.add(ic("gb")),s.appendChild(o),this.guideBodyElem_=o;var a=e.createElementNS(UM.SVG_NS,"path");a.classList.add(ic("gh")),s.appendChild(a),this.guideHeadElem_=a;var l=e.createElement("div");l.classList.add((0,VF.ClassName)("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}return i.prototype.onDraggingChange_=function(e){if(e.rawValue===null){this.element.classList.remove(ic(void 0,"drg"));return}this.element.classList.add(ic(void 0,"drg"));var t=e.rawValue/this.props_.get("draggingScale"),n=t+(t>0?-1:t<0?1:0),r=(0,Hnt.constrainRange)(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",["M ".concat(n+r,",0 L").concat(n,",4 L").concat(n+r,",8"),"M ".concat(t,",-1 L").concat(t,",9")].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d","M 0,4 L".concat(t,",4"));var s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left="".concat(t,"px")},i.prototype.refresh=function(){var e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)},i.prototype.onChange_=function(){this.refresh()},i}();db.NumberTextView=qnt;Object.defineProperty(hd,"__esModule",{value:!0});hd.NumberTextController=void 0;var sO=ri,Gnt=ra,mx=Po,Wnt=ou,jnt=db,$nt=function(){function i(e,t){var n;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=t.baseStep,this.parser_=t.parser,this.props=t.props,this.sliderProps_=(n=t.sliderProps)!==null&&n!==void 0?n:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=(0,Gnt.createValue)(null),this.view=new jnt.NumberTextView(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);var r=new Wnt.PointerHandler(this.view.knobElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}return i.prototype.constrainValue_=function(e){var t,n,r=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("minValue"),s=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("maxValue"),o=e;return r!==void 0&&(o=Math.max(o,r)),s!==void 0&&(o=Math.min(o,s)),o},i.prototype.onInputChange_=function(e){var t=(0,sO.forceCast)(e.currentTarget),n=t.value,r=this.parser_(n);(0,sO.isEmpty)(r)||(this.value.rawValue=this.constrainValue_(r)),this.view.refresh()},i.prototype.onInputKeyDown_=function(e){var t=(0,mx.getStepForKey)(this.baseStep_,(0,mx.getVerticalStepKeys)(e));t!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})},i.prototype.onInputKeyUp_=function(e){var t=(0,mx.getStepForKey)(this.baseStep_,(0,mx.getVerticalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},i.prototype.onPointerDown_=function(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0},i.prototype.computeDraggingValue_=function(e){if(!e.point)return null;var t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("draggingScale"))},i.prototype.onPointerMove_=function(e){var t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)},i.prototype.onPointerUp_=function(e){var t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)},i}();hd.NumberTextController=$nt;var fb={},pb={};Object.defineProperty(pb,"__esModule",{value:!0});pb.SliderView=void 0;var oO=Er,Xnt=Ui,FM=(0,Xnt.ClassName)("sld"),Ynt=function(){function i(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(FM()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("div");n.classList.add(FM("t")),t.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;var r=e.createElement("div");r.classList.add(FM("k")),this.trackElement.appendChild(r),this.knobElement=r,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}return i.prototype.update_=function(){var e=(0,oO.constrainRange)((0,oO.mapRange)(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width="".concat(e,"%")},i.prototype.onChange_=function(){this.update_()},i}();pb.SliderView=Ynt;Object.defineProperty(fb,"__esModule",{value:!0});fb.SliderController=void 0;var aO=Er,gx=Po,Knt=ou,Znt=pb,Jnt=function(){function i(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=t.baseStep,this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new Znt.SliderView(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Knt.PointerHandler(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}return i.prototype.handlePointerEvent_=function(e,t){e.point&&this.value.setRawValue((0,aO.mapRange)((0,aO.constrainRange)(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),t)},i.prototype.onPointerDownOrMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},i.prototype.onKeyDown_=function(e){var t=(0,gx.getStepForKey)(this.baseStep_,(0,gx.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})},i.prototype.onKeyUp_=function(e){var t=(0,gx.getStepForKey)(this.baseStep_,(0,gx.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},i}();fb.SliderController=Jnt;var mb={},gb={};Object.defineProperty(gb,"__esModule",{value:!0});gb.SliderTextView=void 0;var Qnt=Ui,BM=(0,Qnt.ClassName)("sldtxt"),eit=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(BM());var n=e.createElement("div");n.classList.add(BM("s")),this.sliderView_=t.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);var r=e.createElement("div");r.classList.add(BM("t")),this.textView_=t.textView,r.appendChild(this.textView_.element),this.element.appendChild(r)}return i}();gb.SliderTextView=eit;Object.defineProperty(mb,"__esModule",{value:!0});mb.SliderTextController=void 0;var tit=gb,nit=hd,iit=fb,rit=function(){function i(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new iit.SliderController(e,{baseStep:t.baseStep,props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new nit.NumberTextController(e,{baseStep:t.baseStep,parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new tit.SliderTextView(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}return Object.defineProperty(i.prototype,"sliderController",{get:function(){return this.sliderC_},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textController",{get:function(){return this.textC_},enumerable:!1,configurable:!0}),i}();mb.SliderTextController=rit;var HF={};Object.defineProperty(HF,"__esModule",{value:!0});var qF={};Object.defineProperty(qF,"__esModule",{value:!0});var If={};Object.defineProperty(If,"__esModule",{value:!0});If.writePrimitive=void 0;function sit(i,e){i.write(e)}If.writePrimitive=sit;var Lr={};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.getSuitableDraggingScale=Lr.getBaseStep=Lr.getSuitableDecimalDigits=Lr.createListConstraint=Lr.normalizeListOptions=Lr.parsePointDimensionParams=Lr.parsePickerLayout=Lr.parseListOptions=void 0;var lO=ri,q5=tu,oit=zf,G5=Wg,cO=Er,GF=Qs;function ait(i){var e=GF.ParamsParsers;if(Array.isArray(i))return e.required.array(e.required.object({text:e.required.string,value:e.required.raw}))(i).value;if(typeof i=="object")return e.required.raw(i).value}Lr.parseListOptions=ait;function lit(i){if(i==="inline"||i==="popup")return i}Lr.parsePickerLayout=lit;function cit(i){var e=GF.ParamsParsers;return e.required.object({max:e.optional.number,min:e.optional.number,step:e.optional.number})(i).value}Lr.parsePointDimensionParams=cit;function WF(i){if(Array.isArray(i))return i;var e=[];return Object.keys(i).forEach(function(t){e.push({text:t,value:i[t]})}),e}Lr.normalizeListOptions=WF;function uit(i){return(0,lO.isEmpty)(i)?null:new oit.ListConstraint(WF((0,lO.forceCast)(i)))}Lr.createListConstraint=uit;function hit(i){var e=i?(0,q5.findConstraint)(i,G5.StepConstraint):null;return e?e.step:null}function dit(i,e){var t=i&&(0,q5.findConstraint)(i,G5.StepConstraint);return t?(0,cO.getDecimalDigits)(t.step):Math.max((0,cO.getDecimalDigits)(e),2)}Lr.getSuitableDecimalDigits=dit;function fit(i){var e=hit(i);return e??1}Lr.getBaseStep=fit;function pit(i,e){var t,n=i&&(0,q5.findConstraint)(i,G5.StepConstraint),r=Math.abs((t=n==null?void 0:n.step)!==null&&t!==void 0?t:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}Lr.getSuitableDraggingScale=pit;var vb={},Y4={};Object.defineProperty(Y4,"__esModule",{value:!0});Y4.CheckboxView=void 0;var mit=Vo,git=Ui,vx=(0,git.ClassName)("ckb"),vit=function(){function i(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(vx()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("label");n.classList.add(vx("l")),this.element.appendChild(n);var r=e.createElement("input");r.classList.add(vx("i")),r.type="checkbox",n.appendChild(r),this.inputElement=r,t.viewProps.bindDisabled(this.inputElement);var s=e.createElement("div");s.classList.add(vx("w")),n.appendChild(s);var o=(0,mit.createSvgIconElement)(e,"check");s.appendChild(o),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}return i.prototype.update_=function(){this.inputElement.checked=this.value.rawValue},i.prototype.onValueChange_=function(){this.update_()},i}();Y4.CheckboxView=vit;Object.defineProperty(vb,"__esModule",{value:!0});vb.CheckboxController=void 0;var _it=ri,bit=Y4,yit=function(){function i(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new bit.CheckboxView(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return i.prototype.onInputChange_=function(e){var t=(0,_it.forceCast)(e.currentTarget);this.value.rawValue=t.checked},i}();vb.CheckboxController=yit;var _b={};Object.defineProperty(_b,"__esModule",{value:!0});_b.BooleanInputPlugin=void 0;var jF=tu,xit=zf,wit=b0,Sit=Fu,Mit=Ar,uO=Qs,Cit=If,$F=Lr,Eit=vb;function Tit(i){var e=[],t=(0,$F.createListConstraint)(i.options);return t&&e.push(t),new jF.CompositeConstraint(e)}_b.BooleanInputPlugin={id:"input-bool",type:"input",accept:function(i,e){if(typeof i!="boolean")return null;var t=uO.ParamsParsers,n=(0,uO.parseParams)(e,{options:t.optional.custom($F.parseListOptions)});return n?{initialValue:i,params:n}:null},binding:{reader:function(i){return Sit.boolFromUnknown},constraint:function(i){return Tit(i.params)},writer:function(i){return Cit.writePrimitive}},controller:function(i){var e=i.document,t=i.value,n=i.constraint,r=n&&(0,jF.findConstraint)(n,xit.ListConstraint);return r?new wit.ListController(e,{props:new Mit.ValueMap({options:r.values.value("options")}),value:t,viewProps:i.viewProps}):new Eit.CheckboxController(e,{value:t,viewProps:i.viewProps})}};var y0={},K4={};Object.defineProperty(K4,"__esModule",{value:!0});K4.ColorView=void 0;var Ait=fo,Pit=Ui,kit=ol,pp=(0,Pit.ClassName)("col"),Rit=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(pp()),t.foldable.bindExpandedClass(this.element,pp(void 0,"expanded")),(0,Ait.bindValueMap)(t.foldable,"completed",(0,kit.valueToClassName)(this.element,pp(void 0,"cpl")));var n=e.createElement("div");n.classList.add(pp("h")),this.element.appendChild(n);var r=e.createElement("div");r.classList.add(pp("s")),n.appendChild(r),this.swatchElement=r;var s=e.createElement("div");if(s.classList.add(pp("t")),n.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){var o=e.createElement("div");o.classList.add(pp("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}return i}();K4.ColorView=Rit;var Z4={},sa={},vs={};Object.defineProperty(vs,"__esModule",{value:!0});vs.convertColor=vs.constrainColorComponents=vs.getColorMaxComponents=vs.appendAlphaComponent=vs.removeAlphaComponent=vs.hsvToHslInt=vs.hslToHsvInt=vs.hsvToRgbInt=void 0;var Qo=Er;function Oit(i,e,t){var n=(0,Qo.constrainRange)(i/255,0,1),r=(0,Qo.constrainRange)(e/255,0,1),s=(0,Qo.constrainRange)(t/255,0,1),o=Math.max(n,r,s),a=Math.min(n,r,s),l=o-a,c=0,u=0,h=(a+o)/2;return l!==0&&(u=l/(1-Math.abs(o+a-1)),n===o?c=(r-s)/l:r===o?c=2+(s-n)/l:c=4+(n-r)/l,c=c/6+(c<0?1:0)),[c*360,u*100,h*100]}function Lit(i,e,t){var n,r,s,o,a,l,c=(i%360+360)%360,u=(0,Qo.constrainRange)(e/100,0,1),h=(0,Qo.constrainRange)(t/100,0,1),d=(1-Math.abs(2*h-1))*u,f=d*(1-Math.abs(c/60%2-1)),g=h-d/2,v,y,_;return c>=0&&c<60?(n=[d,f,0],v=n[0],y=n[1],_=n[2]):c>=60&&c<120?(r=[f,d,0],v=r[0],y=r[1],_=r[2]):c>=120&&c<180?(s=[0,d,f],v=s[0],y=s[1],_=s[2]):c>=180&&c<240?(o=[0,f,d],v=o[0],y=o[1],_=o[2]):c>=240&&c<300?(a=[f,0,d],v=a[0],y=a[1],_=a[2]):(l=[d,0,f],v=l[0],y=l[1],_=l[2]),[(v+g)*255,(y+g)*255,(_+g)*255]}function Dit(i,e,t){var n=(0,Qo.constrainRange)(i/255,0,1),r=(0,Qo.constrainRange)(e/255,0,1),s=(0,Qo.constrainRange)(t/255,0,1),o=Math.max(n,r,s),a=Math.min(n,r,s),l=o-a,c;l===0?c=0:o===n?c=60*(((r-s)/l%6+6)%6):o===r?c=60*((s-n)/l+2):c=60*((n-r)/l+4);var u=o===0?0:l/o,h=o;return[c,u*100,h*100]}function XF(i,e,t){var n,r,s,o,a,l,c=(0,Qo.loopRange)(i,360),u=(0,Qo.constrainRange)(e/100,0,1),h=(0,Qo.constrainRange)(t/100,0,1),d=h*u,f=d*(1-Math.abs(c/60%2-1)),g=h-d,v,y,_;return c>=0&&c<60?(n=[d,f,0],v=n[0],y=n[1],_=n[2]):c>=60&&c<120?(r=[f,d,0],v=r[0],y=r[1],_=r[2]):c>=120&&c<180?(s=[0,d,f],v=s[0],y=s[1],_=s[2]):c>=180&&c<240?(o=[0,f,d],v=o[0],y=o[1],_=o[2]):c>=240&&c<300?(a=[f,0,d],v=a[0],y=a[1],_=a[2]):(l=[d,0,f],v=l[0],y=l[1],_=l[2]),[(v+g)*255,(y+g)*255,(_+g)*255]}vs.hsvToRgbInt=XF;function YF(i,e,t){var n=t+e*(100-Math.abs(2*t-100))/200;return[i,n!==0?e*(100-Math.abs(2*t-100))/n:0,t+e*(100-Math.abs(2*t-100))/(2*100)]}vs.hslToHsvInt=YF;function KF(i,e,t){var n=100-Math.abs(t*(200-e)/100-100);return[i,n!==0?e*t/n:0,t*(200-e)/(2*100)]}vs.hsvToHslInt=KF;function zit(i){return[i[0],i[1],i[2]]}vs.removeAlphaComponent=zit;function Iit(i,e){return[i[0],i[1],i[2],e]}vs.appendAlphaComponent=Iit;var Nit={hsl:{hsl:function(i,e,t){return[i,e,t]},hsv:YF,rgb:Lit},hsv:{hsl:KF,hsv:function(i,e,t){return[i,e,t]},rgb:XF},rgb:{hsl:Oit,hsv:Dit,rgb:function(i,e,t){return[i,e,t]}}};function jw(i,e){return[e==="float"?1:i==="rgb"?255:360,e==="float"?1:i==="rgb"?255:100,e==="float"?1:i==="rgb"?255:100]}vs.getColorMaxComponents=jw;function Uit(i,e){return i===e?e:(0,Qo.loopRange)(i,e)}function Fit(i,e,t){var n,r=jw(e,t);return[e==="rgb"?(0,Qo.constrainRange)(i[0],0,r[0]):Uit(i[0],r[0]),(0,Qo.constrainRange)(i[1],0,r[1]),(0,Qo.constrainRange)(i[2],0,r[2]),(0,Qo.constrainRange)((n=i[3])!==null&&n!==void 0?n:1,0,1)]}vs.constrainColorComponents=Fit;function hO(i,e,t,n){var r=jw(e,t),s=jw(e,n);return i.map(function(o,a){return o/r[a]*s[a]})}function Bit(i,e,t){var n,r=hO(i,e.mode,e.type,"int"),s=(n=Nit[e.mode])[t.mode].apply(n,r);return hO(s,t.mode,"int",t.type)}vs.convertColor=Bit;Object.defineProperty(sa,"__esModule",{value:!0});sa.Color=void 0;var Vit=ri,_x=vs;function bx(i,e){return typeof i!="object"||(0,Vit.isEmpty)(i)?!1:e in i&&typeof i[e]=="number"}var Hit=function(){function i(e,t,n){n===void 0&&(n="int"),this.mode=t,this.type=n,this.comps_=(0,_x.constrainColorComponents)(e,t,n)}return i.black=function(e){return e===void 0&&(e="int"),new i([0,0,0],"rgb",e)},i.fromObject=function(e,t){t===void 0&&(t="int");var n="a"in e?[e.r,e.g,e.b,e.a]:[e.r,e.g,e.b];return new i(n,"rgb",t)},i.toRgbaObject=function(e,t){return t===void 0&&(t="int"),e.toRgbaObject(t)},i.isRgbColorObject=function(e){return bx(e,"r")&&bx(e,"g")&&bx(e,"b")},i.isRgbaColorObject=function(e){return this.isRgbColorObject(e)&&bx(e,"a")},i.isColorObject=function(e){return this.isRgbColorObject(e)},i.equals=function(e,t){if(e.mode!==t.mode)return!1;for(var n=e.comps_,r=t.comps_,s=0;s<n.length;s++)if(n[s]!==r[s])return!1;return!0},i.prototype.getComponents=function(e,t){return t===void 0&&(t="int"),(0,_x.appendAlphaComponent)((0,_x.convertColor)((0,_x.removeAlphaComponent)(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:t}),this.comps_[3])},i.prototype.toRgbaObject=function(e){e===void 0&&(e="int");var t=this.getComponents("rgb",e);return{r:t[0],g:t[1],b:t[2],a:t[3]}},i}();sa.Color=Hit;var J4={},qit=it&&it.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(J4,"__esModule",{value:!0});J4.ColorPickerView=void 0;var Git=Ui,Nd=(0,Git.ClassName)("colp"),Wit=function(){function i(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(Nd()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("div");n.classList.add(Nd("hsv"));var r=e.createElement("div");r.classList.add(Nd("sv")),this.svPaletteView_=t.svPaletteView,r.appendChild(this.svPaletteView_.element),n.appendChild(r);var s=e.createElement("div");s.classList.add(Nd("h")),this.hPaletteView_=t.hPaletteView,s.appendChild(this.hPaletteView_.element),n.appendChild(s),this.element.appendChild(n);var o=e.createElement("div");if(o.classList.add(Nd("rgb")),this.textView_=t.textView,o.appendChild(this.textView_.element),this.element.appendChild(o),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};var a=e.createElement("div");a.classList.add(Nd("a"));var l=e.createElement("div");l.classList.add(Nd("ap")),l.appendChild(this.alphaViews_.palette.element),a.appendChild(l);var c=e.createElement("div");c.classList.add(Nd("at")),c.appendChild(this.alphaViews_.text.element),a.appendChild(c),this.element.appendChild(a)}}return Object.defineProperty(i.prototype,"allFocusableElements",{get:function(){var e=qit([this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement],this.textView_.textViews.map(function(t){return t.inputElement}),!0);return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e},enumerable:!1,configurable:!0}),i}();J4.ColorPickerView=Wit;var Q4={},Ja={};Object.defineProperty(Ja,"__esModule",{value:!0});Ja.extractColorType=Ja.getBaseStepForColor=Ja.parseColorInputParams=void 0;var dO=Qs,jit=Lr;function $it(i){return i==="int"?"int":i==="float"?"float":void 0}function Xit(i){var e=dO.ParamsParsers;return(0,dO.parseParams)(i,{alpha:e.optional.boolean,color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom($it)}),expanded:e.optional.boolean,picker:e.optional.custom(jit.parsePickerLayout)})}Ja.parseColorInputParams=Xit;function Yit(i){return i?.1:1}Ja.getBaseStepForColor=Yit;function Kit(i){var e;return(e=i.color)===null||e===void 0?void 0:e.type}Ja.extractColorType=Kit;var e3={},dd={};(function(i){var e=it&&it.__assign||function(){return e=Object.assign||function(me){for(var ue,Pe=1,U=arguments.length;Pe<U;Pe++){ue=arguments[Pe];for(var V in ue)Object.prototype.hasOwnProperty.call(ue,V)&&(me[V]=ue[V])}return me},e.apply(this,arguments)},t=it&&it.__spreadArray||function(me,ue,Pe){if(Pe||arguments.length===2)for(var U=0,V=ue.length,Ve;U<V;U++)(Ve||!(U in ue))&&(Ve||(Ve=Array.prototype.slice.call(ue,0,U)),Ve[U]=ue[U]);return me.concat(Ve||Array.prototype.slice.call(ue))};Object.defineProperty(i,"__esModule",{value:!0}),i.findColorStringifier=i.getColorStringifier=i.colorToObjectRgbaString=i.colorToObjectRgbString=i.colorToFunctionalHslaString=i.colorToFunctionalHslString=i.colorToFunctionalRgbaString=i.colorToFunctionalRgbString=i.colorToHexRgbaString=i.colorToHexRgbString=i.colorFromString=i.hasAlphaComponent=i.createColorStringParser=i.createColorStringBindingReader=i.CompositeColorParser=i.detectStringColorFormat=i.getColorNotation=void 0;var n=co,r=hb,s=Er,o=sa,a=vs;function l(me,ue){return me.alpha===ue.alpha&&me.mode===ue.mode&&me.notation===ue.notation&&me.type===ue.type}function c(me,ue){var Pe=me.match(/^(.+)%$/);return Math.min(Pe?parseFloat(Pe[1])*.01*ue:parseFloat(me),ue)}var u={deg:function(me){return me},grad:function(me){return me*360/400},rad:function(me){return me*360/(2*Math.PI)},turn:function(me){return me*360}};function h(me){var ue=me.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!ue)return parseFloat(me);var Pe=parseFloat(ue[1]),U=ue[2];return u[U](Pe)}function d(me){var ue=me.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!ue)return null;var Pe=[c(ue[1],255),c(ue[2],255),c(ue[3],255)];return isNaN(Pe[0])||isNaN(Pe[1])||isNaN(Pe[2])?null:Pe}function f(me){return function(ue){var Pe=d(ue);return Pe?new o.Color(Pe,"rgb",me):null}}function g(me){var ue=me.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!ue)return null;var Pe=[c(ue[1],255),c(ue[2],255),c(ue[3],255),c(ue[4],1)];return isNaN(Pe[0])||isNaN(Pe[1])||isNaN(Pe[2])||isNaN(Pe[3])?null:Pe}function v(me){return function(ue){var Pe=g(ue);return Pe?new o.Color(Pe,"rgb",me):null}}function y(me){var ue=me.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!ue)return null;var Pe=[h(ue[1]),c(ue[2],100),c(ue[3],100)];return isNaN(Pe[0])||isNaN(Pe[1])||isNaN(Pe[2])?null:Pe}function _(me){return function(ue){var Pe=y(ue);return Pe?new o.Color(Pe,"hsl",me):null}}function S(me){var ue=me.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!ue)return null;var Pe=[h(ue[1]),c(ue[2],100),c(ue[3],100),c(ue[4],1)];return isNaN(Pe[0])||isNaN(Pe[1])||isNaN(Pe[2])||isNaN(Pe[3])?null:Pe}function w(me){return function(ue){var Pe=S(ue);return Pe?new o.Color(Pe,"hsl",me):null}}function C(me){var ue=me.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(ue)return[parseInt(ue[1]+ue[1],16),parseInt(ue[2]+ue[2],16),parseInt(ue[3]+ue[3],16)];var Pe=me.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return Pe?[parseInt(Pe[1],16),parseInt(Pe[2],16),parseInt(Pe[3],16)]:null}function E(me){var ue=C(me);return ue?new o.Color(ue,"rgb","int"):null}function k(me){var ue=me.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(ue)return[parseInt(ue[1]+ue[1],16),parseInt(ue[2]+ue[2],16),parseInt(ue[3]+ue[3],16),(0,s.mapRange)(parseInt(ue[4]+ue[4],16),0,255,0,1)];var Pe=me.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return Pe?[parseInt(Pe[1],16),parseInt(Pe[2],16),parseInt(Pe[3],16),(0,s.mapRange)(parseInt(Pe[4],16),0,255,0,1)]:null}function O(me){var ue=k(me);return ue?new o.Color(ue,"rgb","int"):null}function R(me){var ue=me.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!ue)return null;var Pe=[parseFloat(ue[1]),parseFloat(ue[2]),parseFloat(ue[3])];return isNaN(Pe[0])||isNaN(Pe[1])||isNaN(Pe[2])?null:Pe}function A(me){return function(ue){var Pe=R(ue);return Pe?new o.Color(Pe,"rgb",me):null}}function D(me){var ue=me.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!ue)return null;var Pe=[parseFloat(ue[1]),parseFloat(ue[2]),parseFloat(ue[3]),parseFloat(ue[4])];return isNaN(Pe[0])||isNaN(Pe[1])||isNaN(Pe[2])||isNaN(Pe[3])?null:Pe}function I(me){return function(ue){var Pe=D(ue);return Pe?new o.Color(Pe,"rgb",me):null}}var q={"func.rgb":f("int"),"func.rgba":v("int"),"func.hsl":_("int"),"func.hsla":w("int"),"hex.rgb":E,"hex.rgba":O};function j(me){var ue=Object.keys(q);return ue.reduce(function(Pe,U){if(Pe)return Pe;var V=q[U];return V(me)?U:null},null)}i.getColorNotation=j;var Y=[{parser:C,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:k,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:d,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:g,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:y,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:S,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:R,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:D,result:{alpha:!0,mode:"rgb",notation:"object"}}];function F(me){return Y.reduce(function(ue,Pe){var U=Pe.parser,V=Pe.result;return ue||(U(me)?V:null)},null)}function re(me,ue){ue===void 0&&(ue="int");var Pe=F(me);return Pe?Pe.notation==="hex"&&ue!=="float"?e(e({},Pe),{type:"int"}):Pe.notation==="func"?e(e({},Pe),{type:ue}):null:null}i.detectStringColorFormat=re;var ee=function(me){var ue=j(me);return ue?q[ue](me):null};i.CompositeColorParser=ee;var J={int:[E,O,f("int"),v("int"),_("int"),w("int"),A("int"),I("int")],float:[f("float"),v("float"),_("float"),w("float"),A("float"),I("float")]};function Ee(me){var ue=J[me];return function(Pe){if(typeof Pe!="string")return o.Color.black(me);var U=ue.reduce(function(V,Ve){return V||Ve(Pe)},null);return U??o.Color.black(me)}}i.createColorStringBindingReader=Ee;function le(me){var ue=J[me];return function(Pe){return ue.reduce(function(U,V){return U||V(Pe)},null)}}i.createColorStringParser=le;function ie(me){return me==="func.hsla"||me==="func.rgba"||me==="hex.rgba"}i.hasAlphaComponent=ie;function be(me){if(typeof me=="string"){var ue=(0,i.CompositeColorParser)(me);if(ue)return ue}return o.Color.black()}i.colorFromString=be;function Je(me){var ue=(0,s.constrainRange)(Math.floor(me),0,255).toString(16);return ue.length===1?"0".concat(ue):ue}function Xe(me,ue){ue===void 0&&(ue="#");var Pe=(0,a.removeAlphaComponent)(me.getComponents("rgb")).map(Je).join("");return"".concat(ue).concat(Pe)}i.colorToHexRgbString=Xe;function Be(me,ue){ue===void 0&&(ue="#");var Pe=me.getComponents("rgb"),U=[Pe[0],Pe[1],Pe[2],Pe[3]*255].map(Je).join("");return"".concat(ue).concat(U)}i.colorToHexRgbaString=Be;function vt(me,ue){var Pe=(0,n.createNumberFormatter)(ue==="float"?2:0),U=(0,a.removeAlphaComponent)(me.getComponents("rgb",ue)).map(function(V){return Pe(V)});return"rgb(".concat(U.join(", "),")")}i.colorToFunctionalRgbString=vt;function at(me){return function(ue){return vt(ue,me)}}function Le(me,ue){var Pe=(0,n.createNumberFormatter)(2),U=(0,n.createNumberFormatter)(ue==="float"?2:0),V=me.getComponents("rgb",ue).map(function(Ve,st){var ve=st===3?Pe:U;return ve(Ve)});return"rgba(".concat(V.join(", "),")")}i.colorToFunctionalRgbaString=Le;function Ot(me){return function(ue){return Le(ue,me)}}function ft(me){var ue=[(0,n.createNumberFormatter)(0),r.formatPercentage,r.formatPercentage],Pe=(0,a.removeAlphaComponent)(me.getComponents("hsl")).map(function(U,V){return ue[V](U)});return"hsl(".concat(Pe.join(", "),")")}i.colorToFunctionalHslString=ft;function rt(me){var ue=[(0,n.createNumberFormatter)(0),r.formatPercentage,r.formatPercentage,(0,n.createNumberFormatter)(2)],Pe=me.getComponents("hsl").map(function(U,V){return ue[V](U)});return"hsla(".concat(Pe.join(", "),")")}i.colorToFunctionalHslaString=rt;function tt(me,ue){var Pe=(0,n.createNumberFormatter)(ue==="float"?2:0),U=["r","g","b"],V=(0,a.removeAlphaComponent)(me.getComponents("rgb",ue)).map(function(Ve,st){return"".concat(U[st],": ").concat(Pe(Ve))});return"{".concat(V.join(", "),"}")}i.colorToObjectRgbString=tt;function se(me){return function(ue){return tt(ue,me)}}function ke(me,ue){var Pe=(0,n.createNumberFormatter)(2),U=(0,n.createNumberFormatter)(ue==="float"?2:0),V=["r","g","b","a"],Ve=me.getComponents("rgb",ue).map(function(st,ve){var ut=ve===3?Pe:U;return"".concat(V[ve],": ").concat(ut(st))});return"{".concat(Ve.join(", "),"}")}i.colorToObjectRgbaString=ke;function ae(me){return function(ue){return ke(ue,me)}}var xe={"func.hsl":ft,"func.hsla":rt,"func.rgb":vt,"func.rgba":Le,"hex.rgb":Xe,"hex.rgba":Be};function Ie(me){return xe[me]}i.getColorStringifier=Ie;var dt=t([{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Xe},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Be},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:ft},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:rt}],["int","float"].reduce(function(me,ue){return t(t([],me,!0),[{format:{alpha:!1,mode:"rgb",notation:"func",type:ue},stringifier:at(ue)},{format:{alpha:!0,mode:"rgb",notation:"func",type:ue},stringifier:Ot(ue)},{format:{alpha:!1,mode:"rgb",notation:"object",type:ue},stringifier:se(ue)},{format:{alpha:!0,mode:"rgb",notation:"object",type:ue},stringifier:ae(ue)}],!1)},[]),!0);function nt(me){return dt.reduce(function(ue,Pe){return ue||(l(Pe.format,me)?Pe.stringifier:null)},null)}i.findColorStringifier=nt})(dd);Object.defineProperty(e3,"__esModule",{value:!0});e3.APaletteView=void 0;var Zit=Er,Jit=Ui,VM=dd,fO=sa,jv=(0,Jit.ClassName)("apl"),Qit=function(){function i(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(jv()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);var n=e.createElement("div");n.classList.add(jv("b")),this.element.appendChild(n);var r=e.createElement("div");r.classList.add(jv("c")),n.appendChild(r),this.colorElem_=r;var s=e.createElement("div");s.classList.add(jv("m")),this.element.appendChild(s),this.markerElem_=s;var o=e.createElement("div");o.classList.add(jv("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}return i.prototype.update_=function(){var e=this.value.rawValue,t=e.getComponents("rgb"),n=new fO.Color([t[0],t[1],t[2],0],"rgb"),r=new fO.Color([t[0],t[1],t[2],255],"rgb"),s=["to right",(0,VM.colorToFunctionalRgbaString)(n),(0,VM.colorToFunctionalRgbaString)(r)];this.colorElem_.style.background="linear-gradient(".concat(s.join(","),")"),this.previewElem_.style.backgroundColor=(0,VM.colorToFunctionalRgbaString)(e);var o=(0,Zit.mapRange)(t[3],0,1,0,100);this.markerElem_.style.left="".concat(o,"%")},i.prototype.onValueChange_=function(){this.update_()},i}();e3.APaletteView=Qit;Object.defineProperty(Q4,"__esModule",{value:!0});Q4.APaletteController=void 0;var yx=Po,ert=ou,pO=sa,mO=Ja,trt=e3,nrt=function(){function i(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new trt.APaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ert.PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return i.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=e.point.x/e.bounds.width,r=this.value.rawValue,s=r.getComponents("hsv"),o=s[0],a=s[1],l=s[2];this.value.setRawValue(new pO.Color([o,a,l,n],"hsv"),t)}},i.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},i.prototype.onKeyDown_=function(e){var t=(0,yx.getStepForKey)((0,mO.getBaseStepForColor)(!0),(0,yx.getHorizontalStepKeys)(e));if(t!==0){var n=this.value.rawValue,r=n.getComponents("hsv"),s=r[0],o=r[1],a=r[2],l=r[3];this.value.setRawValue(new pO.Color([s,o,a,l+t],"hsv"),{forceEmit:!1,last:!1})}},i.prototype.onKeyUp_=function(e){var t=(0,yx.getStepForKey)((0,mO.getBaseStepForColor)(!0),(0,yx.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},i}();Q4.APaletteController=nrt;var t3={},n3={};Object.defineProperty(n3,"__esModule",{value:!0});n3.ColorTextView=void 0;var gO=Vo,irt=fo,rrt=Ui,dm=(0,rrt.ClassName)("coltxt");function srt(i){var e=i.createElement("select"),t=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return e.appendChild(t.reduce(function(n,r){var s=i.createElement("option");return s.textContent=r.text,s.value=r.value,n.appendChild(s),n},i.createDocumentFragment())),e}var ort=function(){function i(e,t){var n=this;this.element=e.createElement("div"),this.element.classList.add(dm()),t.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(dm("m")),this.modeElem_=srt(e),this.modeElem_.classList.add(dm("ms")),r.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);var s=e.createElement("div");s.classList.add(dm("mm")),s.appendChild((0,gO.createSvgIconElement)(e,"dropdown")),r.appendChild(s),this.element.appendChild(r);var o=e.createElement("div");o.classList.add(dm("w")),this.element.appendChild(o),this.textsElem_=o,this.textViews_=t.textViews,this.applyTextViews_(),(0,irt.bindValue)(t.colorMode,function(a){n.modeElem_.value=a})}return Object.defineProperty(i.prototype,"modeSelectElement",{get:function(){return this.modeElem_},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textViews",{get:function(){return this.textViews_},set:function(e){this.textViews_=e,this.applyTextViews_()},enumerable:!1,configurable:!0}),i.prototype.applyTextViews_=function(){var e=this;(0,gO.removeChildElements)(this.textsElem_);var t=this.element.ownerDocument;this.textViews_.forEach(function(n){var r=t.createElement("div");r.classList.add(dm("c")),r.appendChild(n.element),e.textsElem_.appendChild(r)})},i}();n3.ColorTextView=ort;Object.defineProperty(t3,"__esModule",{value:!0});t3.ColorTextController=void 0;var art=_0,lrt=co,crt=Ar,urt=ud,ZF=ra,hrt=hd,drt=sa,JE=vs,frt=Ja,prt=n3;function mrt(i){return(0,lrt.createNumberFormatter)(i==="float"?2:0)}function grt(i,e,t){var n=(0,JE.getColorMaxComponents)(i,e)[t];return new art.DefiniteRangeConstraint({min:0,max:n})}function HM(i,e,t){return new hrt.NumberTextController(i,{arrayPosition:t===0?"fst":t===3-1?"lst":"mid",baseStep:(0,frt.getBaseStepForColor)(!1),parser:e.parser,props:crt.ValueMap.fromObject({draggingScale:e.colorType==="float"?.01:1,formatter:mrt(e.colorType)}),value:(0,ZF.createValue)(0,{constraint:grt(e.colorMode,e.colorType,t)}),viewProps:e.viewProps})}var vrt=function(){function i(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.parser_=t.parser,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=(0,ZF.createValue)(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new prt.ColorTextView(e,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}return i.prototype.createComponentControllers_=function(e){var t=this,n={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},r=[HM(e,n,0),HM(e,n,1),HM(e,n,2)];return r.forEach(function(s,o){(0,urt.connectValues)({primary:t.value,secondary:s.value,forward:function(a){return a.rawValue.getComponents(t.colorMode.rawValue,t.colorType_)[o]},backward:function(a,l){var c=t.colorMode.rawValue,u=a.rawValue.getComponents(c,t.colorType_);return u[o]=l.rawValue,new drt.Color((0,JE.appendAlphaComponent)((0,JE.removeAlphaComponent)(u),u[3]),c,t.colorType_)}})}),r},i.prototype.onModeSelectChange_=function(e){var t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]},i}();t3.ColorTextController=vrt;var i3={},r3={};Object.defineProperty(r3,"__esModule",{value:!0});r3.HPaletteView=void 0;var _rt=Er,brt=Ui,yrt=dd,xrt=sa,qM=(0,brt.ClassName)("hpl"),wrt=function(){function i(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(qM()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);var n=e.createElement("div");n.classList.add(qM("c")),this.element.appendChild(n);var r=e.createElement("div");r.classList.add(qM("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}return i.prototype.update_=function(){var e=this.value.rawValue,t=e.getComponents("hsv")[0];this.markerElem_.style.backgroundColor=(0,yrt.colorToFunctionalRgbString)(new xrt.Color([t,100,100],"hsv"));var n=(0,_rt.mapRange)(t,0,360,0,100);this.markerElem_.style.left="".concat(n,"%")},i.prototype.onValueChange_=function(){this.update_()},i}();r3.HPaletteView=wrt;Object.defineProperty(i3,"__esModule",{value:!0});i3.HPaletteController=void 0;var vO=Er,xx=Po,Srt=ou,_O=sa,bO=Ja,Mrt=r3,Crt=function(){function i(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Mrt.HPaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Srt.PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return i.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=(0,vO.mapRange)((0,vO.constrainRange)(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),r=this.value.rawValue,s=r.getComponents("hsv"),o=s[1],a=s[2],l=s[3];this.value.setRawValue(new _O.Color([n,o,a,l],"hsv"),t)}},i.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},i.prototype.onKeyDown_=function(e){var t=(0,xx.getStepForKey)((0,bO.getBaseStepForColor)(!1),(0,xx.getHorizontalStepKeys)(e));if(t!==0){var n=this.value.rawValue,r=n.getComponents("hsv"),s=r[0],o=r[1],a=r[2],l=r[3];this.value.setRawValue(new _O.Color([s+t,o,a,l],"hsv"),{forceEmit:!1,last:!1})}},i.prototype.onKeyUp_=function(e){var t=(0,xx.getStepForKey)((0,bO.getBaseStepForColor)(!1),(0,xx.getHorizontalStepKeys)(e));t!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},i}();i3.HPaletteController=Crt;var s3={},o3={};Object.defineProperty(o3,"__esModule",{value:!0});o3.SvPaletteView=void 0;var Ert=Vo,wx=Er,Trt=Ui,Art=vs,GM=(0,Trt.ClassName)("svp"),yO=64,Prt=function(){function i(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(GM()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);var n=e.createElement("canvas");n.height=yO,n.width=yO,n.classList.add(GM("c")),this.element.appendChild(n),this.canvasElement=n;var r=e.createElement("div");r.classList.add(GM("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}return i.prototype.update_=function(){var e=(0,Ert.getCanvasContext)(this.canvasElement);if(e){for(var t=this.value.rawValue,n=t.getComponents("hsv"),r=this.canvasElement.width,s=this.canvasElement.height,o=e.getImageData(0,0,r,s),a=o.data,l=0;l<s;l++)for(var c=0;c<r;c++){var u=(0,wx.mapRange)(c,0,r,0,100),h=(0,wx.mapRange)(l,0,s,100,0),d=(0,Art.hsvToRgbInt)(n[0],u,h),f=(l*r+c)*4;a[f]=d[0],a[f+1]=d[1],a[f+2]=d[2],a[f+3]=255}e.putImageData(o,0,0);var g=(0,wx.mapRange)(n[1],0,100,0,100);this.markerElem_.style.left="".concat(g,"%");var v=(0,wx.mapRange)(n[2],0,100,100,0);this.markerElem_.style.top="".concat(v,"%")}},i.prototype.onValueChange_=function(){this.update_()},i}();o3.SvPaletteView=Prt;Object.defineProperty(s3,"__esModule",{value:!0});s3.SvPaletteController=void 0;var xO=Er,Oh=Po,krt=ou,wO=sa,SO=Ja,Rrt=o3,Ort=function(){function i(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Rrt.SvPaletteView(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new krt.PointerHandler(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return i.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=(0,xO.mapRange)(e.point.x,0,e.bounds.width,0,100),r=(0,xO.mapRange)(e.point.y,0,e.bounds.height,100,0),s=this.value.rawValue.getComponents("hsv"),o=s[0],a=s[3];this.value.setRawValue(new wO.Color([o,n,r,a],"hsv"),t)}},i.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},i.prototype.onKeyDown_=function(e){(0,Oh.isArrowKey)(e.key)&&e.preventDefault();var t=this.value.rawValue.getComponents("hsv"),n=t[0],r=t[1],s=t[2],o=t[3],a=(0,SO.getBaseStepForColor)(!1),l=(0,Oh.getStepForKey)(a,(0,Oh.getHorizontalStepKeys)(e)),c=(0,Oh.getStepForKey)(a,(0,Oh.getVerticalStepKeys)(e));l===0&&c===0||this.value.setRawValue(new wO.Color([n,r+l,s+c,o],"hsv"),{forceEmit:!1,last:!1})},i.prototype.onKeyUp_=function(e){var t=(0,SO.getBaseStepForColor)(!1),n=(0,Oh.getStepForKey)(t,(0,Oh.getHorizontalStepKeys)(e)),r=(0,Oh.getStepForKey)(t,(0,Oh.getVerticalStepKeys)(e));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},i}();s3.SvPaletteController=Ort;Object.defineProperty(Z4,"__esModule",{value:!0});Z4.ColorPickerController=void 0;var Lrt=_0,WM=co,Drt=Ar,zrt=ud,Irt=ra,Nrt=hd,Urt=sa,Frt=J4,Brt=Q4,Vrt=t3,Hrt=i3,qrt=s3,Grt=function(){function i(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new Hrt.HPaletteController(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new qrt.SvPaletteController(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new Brt.APaletteController(e,{value:this.value,viewProps:this.viewProps}),text:new Nrt.NumberTextController(e,{parser:WM.parseNumber,baseStep:.1,props:Drt.ValueMap.fromObject({draggingScale:.01,formatter:(0,WM.createNumberFormatter)(2)}),value:(0,Irt.createValue)(0,{constraint:new Lrt.DefiniteRangeConstraint({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&(0,zrt.connectValues)({primary:this.value,secondary:this.alphaIcs_.text.value,forward:function(n){return n.rawValue.getComponents()[3]},backward:function(n,r){var s=n.rawValue.getComponents();return s[3]=r.rawValue,new Urt.Color(s,n.rawValue.mode)}}),this.textC_=new Vrt.ColorTextController(e,{colorType:t.colorType,parser:WM.parseNumber,value:this.value,viewProps:this.viewProps}),this.view=new Frt.ColorPickerView(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}return Object.defineProperty(i.prototype,"textController",{get:function(){return this.textC_},enumerable:!1,configurable:!0}),i}();Z4.ColorPickerController=Grt;var a3={},l3={};Object.defineProperty(l3,"__esModule",{value:!0});l3.ColorSwatchView=void 0;var Wrt=Ui,jrt=dd,jM=(0,Wrt.ClassName)("colsw"),$rt=function(){function i(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(jM()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("div");n.classList.add(jM("sw")),this.element.appendChild(n),this.swatchElem_=n;var r=e.createElement("button");r.classList.add(jM("b")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r,this.update_()}return i.prototype.update_=function(){var e=this.value.rawValue;this.swatchElem_.style.backgroundColor=(0,jrt.colorToHexRgbaString)(e)},i.prototype.onValueChange_=function(){this.update_()},i}();l3.ColorSwatchView=$rt;Object.defineProperty(a3,"__esModule",{value:!0});a3.ColorSwatchController=void 0;var Xrt=l3,Yrt=function(){function i(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Xrt.ColorSwatchView(e,{value:this.value,viewProps:this.viewProps})}return i}();a3.ColorSwatchController=Yrt;Object.defineProperty(y0,"__esModule",{value:!0});y0.ColorController=void 0;var MO=ya,Krt=jg,Zrt=$g,CO=Vo,Jrt=Ar,Qrt=ud,est=ri,tst=K4,nst=Z4,ist=a3,rst=function(){function i(e,t){var n=this;this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=MO.Foldable.create(t.expanded),this.swatchC_=new ist.ColorSwatchController(e,{value:this.value,viewProps:this.viewProps});var r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new Zrt.TextController(e,{parser:t.parser,props:Jrt.ValueMap.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new tst.ColorView(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=t.pickerLayout==="popup"?new Krt.PopupController(e,{viewProps:this.viewProps}):null;var s=new nst.ColorPickerController(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(function(o){o.addEventListener("blur",n.onPopupChildBlur_),o.addEventListener("keydown",n.onPopupChildKeydown_)}),this.pickerC_=s,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(s.view.element),(0,Qrt.connectValues)({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(o){return o.rawValue},backward:function(o,a){return a.rawValue}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),(0,MO.bindFoldable)(this.foldable_,this.view.pickerElement))}return Object.defineProperty(i.prototype,"textController",{get:function(){return this.textC_},enumerable:!1,configurable:!0}),i.prototype.onButtonBlur_=function(e){if(this.popC_){var t=this.view.element,n=(0,est.forceCast)(e.relatedTarget);(!n||!t.contains(n))&&(this.popC_.shows.rawValue=!1)}},i.prototype.onButtonClick_=function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()},i.prototype.onPopupChildBlur_=function(e){if(this.popC_){var t=this.popC_.view.element,n=(0,CO.findNextTarget)(e);n&&t.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!(0,CO.supportsTouch)(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}},i.prototype.onPopupChildKeydown_=function(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()},i}();y0.ColorController=rst;var ao={};Object.defineProperty(ao,"__esModule",{value:!0});ao.colorFromRgbaNumber=ao.colorFromRgbNumber=ao.numberToRgbaColor=ao.numberToRgbColor=ao.colorToRgbaNumber=ao.colorToRgbNumber=ao.colorFromObject=void 0;var sst=Er,Hp=sa,ost=vs;function ast(i,e){return Hp.Color.isColorObject(i)?Hp.Color.fromObject(i,e):Hp.Color.black(e)}ao.colorFromObject=ast;function lst(i){return(0,ost.removeAlphaComponent)(i.getComponents("rgb")).reduce(function(e,t){return e<<8|Math.floor(t)&255},0)}ao.colorToRgbNumber=lst;function cst(i){return i.getComponents("rgb").reduce(function(e,t,n){var r=Math.floor(n===3?t*255:t)&255;return e<<8|r},0)>>>0}ao.colorToRgbaNumber=cst;function JF(i){return new Hp.Color([i>>16&255,i>>8&255,i&255],"rgb")}ao.numberToRgbColor=JF;function QF(i){return new Hp.Color([i>>24&255,i>>16&255,i>>8&255,(0,sst.mapRange)(i&255,0,255,0,1)],"rgb")}ao.numberToRgbaColor=QF;function ust(i){return typeof i!="number"?Hp.Color.black():JF(i)}ao.colorFromRgbNumber=ust;function hst(i){return typeof i!="number"?Hp.Color.black():QF(i)}ao.colorFromRgbaNumber=hst;var bb={},Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});Xa.createColorObjectWriter=Xa.writeRgbColorObject=Xa.writeRgbaColorObject=Xa.createColorNumberWriter=Xa.createColorStringWriter=void 0;var eB=If,EO=ao,dst=dd;function fst(i){var e=(0,dst.findColorStringifier)(i);return e?function(t,n){(0,eB.writePrimitive)(t,e(n))}:null}Xa.createColorStringWriter=fst;function pst(i){var e=i?EO.colorToRgbaNumber:EO.colorToRgbNumber;return function(t,n){(0,eB.writePrimitive)(t,e(n))}}Xa.createColorNumberWriter=pst;function tB(i,e,t){var n=e.toRgbaObject(t);i.writeProperty("r",n.r),i.writeProperty("g",n.g),i.writeProperty("b",n.b),i.writeProperty("a",n.a)}Xa.writeRgbaColorObject=tB;function nB(i,e,t){var n=e.toRgbaObject(t);i.writeProperty("r",n.r),i.writeProperty("g",n.g),i.writeProperty("b",n.b)}Xa.writeRgbColorObject=nB;function mst(i,e){return function(t,n){i?tB(t,n,e):nB(t,n,e)}}Xa.createColorObjectWriter=mst;Object.defineProperty(bb,"__esModule",{value:!0});bb.NumberColorInputPlugin=void 0;var gst=y0,TO=ao,QE=dd,vst=Xa,_st=sa,bst=Ja;function $M(i){var e;return!!(i!=null&&i.alpha||!((e=i==null?void 0:i.color)===null||e===void 0)&&e.alpha)}function yst(i){return i?function(e){return(0,QE.colorToHexRgbaString)(e,"0x")}:function(e){return(0,QE.colorToHexRgbString)(e,"0x")}}function xst(i){return"color"in i||"view"in i&&i.view==="color"}bb.NumberColorInputPlugin={id:"input-color-number",type:"input",accept:function(i,e){if(typeof i!="number"||!xst(e))return null;var t=(0,bst.parseColorInputParams)(e);return t?{initialValue:i,params:t}:null},binding:{reader:function(i){return $M(i.params)?TO.colorFromRgbaNumber:TO.colorFromRgbNumber},equals:_st.Color.equals,writer:function(i){return(0,vst.createColorNumberWriter)($M(i.params))}},controller:function(i){var e=$M(i.params),t="expanded"in i.params?i.params.expanded:void 0,n="picker"in i.params?i.params.picker:void 0;return new gst.ColorController(i.document,{colorType:"int",expanded:t??!1,formatter:yst(e),parser:(0,QE.createColorStringParser)("int"),pickerLayout:n??"popup",supportsAlpha:e,value:i.value,viewProps:i.viewProps})}};var yb={};Object.defineProperty(yb,"__esModule",{value:!0});yb.ObjectColorInputPlugin=void 0;var wst=y0,Sst=ao,eT=dd,Mst=Xa,fw=sa,Sx=Ja;function Cst(i){return fw.Color.isRgbaColorObject(i)}function Est(i){return function(e){return(0,Sst.colorFromObject)(e,i)}}function Tst(i,e){return function(t){return i?(0,eT.colorToObjectRgbaString)(t,e):(0,eT.colorToObjectRgbString)(t,e)}}yb.ObjectColorInputPlugin={id:"input-color-object",type:"input",accept:function(i,e){if(!fw.Color.isColorObject(i))return null;var t=(0,Sx.parseColorInputParams)(e);return t?{initialValue:i,params:t}:null},binding:{reader:function(i){return Est((0,Sx.extractColorType)(i.params))},equals:fw.Color.equals,writer:function(i){return(0,Mst.createColorObjectWriter)(Cst(i.initialValue),(0,Sx.extractColorType)(i.params))}},controller:function(i){var e,t=fw.Color.isRgbaColorObject(i.initialValue),n="expanded"in i.params?i.params.expanded:void 0,r="picker"in i.params?i.params.picker:void 0,s=(e=(0,Sx.extractColorType)(i.params))!==null&&e!==void 0?e:"int";return new wst.ColorController(i.document,{colorType:s,expanded:n??!1,formatter:Tst(t,s),parser:(0,eT.createColorStringParser)(s),pickerLayout:r??"popup",supportsAlpha:t,value:i.value,viewProps:i.viewProps})}};var xb={};Object.defineProperty(xb,"__esModule",{value:!0});xb.StringColorInputPlugin=void 0;var Mx=ul,Ast=y0,mp=dd,Pst=Xa,kst=sa,$v=Ja;xb.StringColorInputPlugin={id:"input-color-string",type:"input",accept:function(i,e){if(typeof i!="string"||"view"in e&&e.view==="text")return null;var t=(0,mp.detectStringColorFormat)(i,(0,$v.extractColorType)(e));if(!t)return null;var n=(0,mp.findColorStringifier)(t);if(!n)return null;var r=(0,$v.parseColorInputParams)(e);return r?{initialValue:i,params:r}:null},binding:{reader:function(i){var e;return(0,mp.createColorStringBindingReader)((e=(0,$v.extractColorType)(i.params))!==null&&e!==void 0?e:"int")},equals:kst.Color.equals,writer:function(i){var e=(0,mp.detectStringColorFormat)(i.initialValue,(0,$v.extractColorType)(i.params));if(!e)throw Mx.TpError.shouldNeverHappen();var t=(0,Pst.createColorStringWriter)(e);if(!t)throw Mx.TpError.notBindable();return t}},controller:function(i){var e=(0,mp.detectStringColorFormat)(i.initialValue,(0,$v.extractColorType)(i.params));if(!e)throw Mx.TpError.shouldNeverHappen();var t=(0,mp.findColorStringifier)(e);if(!t)throw Mx.TpError.shouldNeverHappen();var n="expanded"in i.params?i.params.expanded:void 0,r="picker"in i.params?i.params.picker:void 0;return new Ast.ColorController(i.document,{colorType:e.type,expanded:n??!1,formatter:t,parser:(0,mp.createColorStringParser)(e.type),pickerLayout:r??"popup",supportsAlpha:e.alpha,value:i.value,viewProps:i.viewProps})}};var x0={};Object.defineProperty(x0,"__esModule",{value:!0});x0.PointNdConstraint=void 0;var Rst=function(){function i(e){this.components=e.components,this.asm_=e.assembly}return i.prototype.constrain=function(e){var t=this,n=this.asm_.toComponents(e).map(function(r,s){var o,a;return(a=(o=t.components[s])===null||o===void 0?void 0:o.constrain(r))!==null&&a!==void 0?a:r});return this.asm_.fromComponents(n)},i}();x0.PointNdConstraint=Rst;var w0={},c3={};Object.defineProperty(c3,"__esModule",{value:!0});c3.PointNdTextView=void 0;var Ost=Ui,AO=(0,Ost.ClassName)("pndtxt"),Lst=function(){function i(e,t){var n=this;this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(AO()),this.textViews.forEach(function(r){var s=e.createElement("div");s.classList.add(AO("a")),s.appendChild(r.element),n.element.appendChild(s)})}return i}();c3.PointNdTextView=Lst;Object.defineProperty(w0,"__esModule",{value:!0});w0.PointNdTextController=void 0;var Dst=ud,zst=ra,Ist=hd,Nst=c3;function Ust(i,e,t){return new Ist.NumberTextController(i,{arrayPosition:t===0?"fst":t===e.axes.length-1?"lst":"mid",baseStep:e.axes[t].baseStep,parser:e.parser,props:e.axes[t].textProps,value:(0,zst.createValue)(0,{constraint:e.axes[t].constraint}),viewProps:e.viewProps})}var Fst=function(){function i(e,t){var n=this;this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map(function(r,s){return Ust(e,t,s)}),this.acs_.forEach(function(r,s){(0,Dst.connectValues)({primary:n.value,secondary:r.value,forward:function(o){return t.assembly.toComponents(o.rawValue)[s]},backward:function(o,a){var l=t.assembly.toComponents(o.rawValue);return l[s]=a.rawValue,t.assembly.fromComponents(l)}})}),this.view=new Nst.PointNdTextView(e,{textViews:this.acs_.map(function(r){return r.view})})}return i}();w0.PointNdTextController=Fst;var pc={};Object.defineProperty(pc,"__esModule",{value:!0});pc.NumberInputPlugin=pc.findNumberRange=pc.createRangeConstraint=pc.createStepConstraint=void 0;var n_=tu,W5=_0,Bst=zf,iB=ab,Vst=Wg,Hst=b0,Cx=co,Ex=Ar,qst=hd,Gst=mb,PO=Qs,Wst=If,Mp=Lr,u1=ri;function rB(i,e){return"step"in i&&!(0,u1.isEmpty)(i.step)?new Vst.StepConstraint(i.step,e):null}pc.createStepConstraint=rB;function sB(i){return!(0,u1.isEmpty)(i.max)&&!(0,u1.isEmpty)(i.min)?new W5.DefiniteRangeConstraint({max:i.max,min:i.min}):!(0,u1.isEmpty)(i.max)||!(0,u1.isEmpty)(i.min)?new iB.RangeConstraint({max:i.max,min:i.min}):null}pc.createRangeConstraint=sB;function jst(i){var e=(0,n_.findConstraint)(i,W5.DefiniteRangeConstraint);if(e)return[e.values.get("min"),e.values.get("max")];var t=(0,n_.findConstraint)(i,iB.RangeConstraint);return t?[t.minValue,t.maxValue]:[void 0,void 0]}pc.findNumberRange=jst;function $st(i,e){var t=[],n=rB(i,e);n&&t.push(n);var r=sB(i);r&&t.push(r);var s=(0,Mp.createListConstraint)(i.options);return s&&t.push(s),new n_.CompositeConstraint(t)}pc.NumberInputPlugin={id:"input-number",type:"input",accept:function(i,e){if(typeof i!="number")return null;var t=PO.ParamsParsers,n=(0,PO.parseParams)(e,{format:t.optional.function,max:t.optional.number,min:t.optional.number,options:t.optional.custom(Mp.parseListOptions),step:t.optional.number});return n?{initialValue:i,params:n}:null},binding:{reader:function(i){return Cx.numberFromUnknown},constraint:function(i){return $st(i.params,i.initialValue)},writer:function(i){return Wst.writePrimitive}},controller:function(i){var e,t=i.value,n=i.constraint,r=n&&(0,n_.findConstraint)(n,Bst.ListConstraint);if(r)return new Hst.ListController(i.document,{props:new Ex.ValueMap({options:r.values.value("options")}),value:t,viewProps:i.viewProps});var s=(e="format"in i.params?i.params.format:void 0)!==null&&e!==void 0?e:(0,Cx.createNumberFormatter)((0,Mp.getSuitableDecimalDigits)(n,t.rawValue)),o=n&&(0,n_.findConstraint)(n,W5.DefiniteRangeConstraint);return o?new Gst.SliderTextController(i.document,{baseStep:(0,Mp.getBaseStep)(n),parser:Cx.parseNumber,sliderProps:new Ex.ValueMap({maxValue:o.values.value("max"),minValue:o.values.value("min")}),textProps:Ex.ValueMap.fromObject({draggingScale:(0,Mp.getSuitableDraggingScale)(n,t.rawValue),formatter:s}),value:t,viewProps:i.viewProps}):new qst.NumberTextController(i.document,{baseStep:(0,Mp.getBaseStep)(n),parser:Cx.parseNumber,props:Ex.ValueMap.fromObject({draggingScale:(0,Mp.getSuitableDraggingScale)(n,t.rawValue),formatter:s}),value:t,viewProps:i.viewProps})}};var wb={},Jh={},Xst=it&&it.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(Jh,"__esModule",{value:!0});Jh.Point2dAssembly=Jh.Point2d=void 0;var Yst=ri,tT=function(){function i(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this.x=e,this.y=t}return i.prototype.getComponents=function(){return[this.x,this.y]},i.isObject=function(e){if((0,Yst.isEmpty)(e))return!1;var t=e.x,n=e.y;return!(typeof t!="number"||typeof n!="number")},i.equals=function(e,t){return e.x===t.x&&e.y===t.y},i.prototype.toObject=function(){return{x:this.x,y:this.y}},i}();Jh.Point2d=tT;Jh.Point2dAssembly={toComponents:function(i){return i.getComponents()},fromComponents:function(i){return new(tT.bind.apply(tT,Xst([void 0],i,!1)))}};var u3={};Object.defineProperty(u3,"__esModule",{value:!0});u3.Point2dView=void 0;var Kst=Vo,Zst=fo,Jst=Ui,Qst=ol,fm=(0,Jst.ClassName)("p2d"),eot=function(){function i(e,t){this.element=e.createElement("div"),this.element.classList.add(fm()),t.viewProps.bindClassModifiers(this.element),(0,Zst.bindValue)(t.expanded,(0,Qst.valueToClassName)(this.element,fm(void 0,"expanded")));var n=e.createElement("div");n.classList.add(fm("h")),this.element.appendChild(n);var r=e.createElement("button");r.classList.add(fm("b")),r.appendChild((0,Kst.createSvgIconElement)(e,"p2dpad")),t.viewProps.bindDisabled(r),n.appendChild(r),this.buttonElement=r;var s=e.createElement("div");if(s.classList.add(fm("t")),n.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){var o=e.createElement("div");o.classList.add(fm("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}return i}();u3.Point2dView=eot;var h3={},d3={};Object.defineProperty(d3,"__esModule",{value:!0});d3.Point2dPickerView=void 0;var Tx=Vo,kO=Er,tot=Ui,Ud=(0,tot.ClassName)("p2dp"),not=function(){function i(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=t.invertsY,this.maxValue_=t.maxValue,this.element=e.createElement("div"),this.element.classList.add(Ud()),t.layout==="popup"&&this.element.classList.add(Ud(void 0,"p")),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("div");n.classList.add(Ud("p")),t.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;var r=e.createElementNS(Tx.SVG_NS,"svg");r.classList.add(Ud("g")),this.padElement.appendChild(r),this.svgElem_=r;var s=e.createElementNS(Tx.SVG_NS,"line");s.classList.add(Ud("ax")),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","50%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(s);var o=e.createElementNS(Tx.SVG_NS,"line");o.classList.add(Ud("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);var a=e.createElementNS(Tx.SVG_NS,"line");a.classList.add(Ud("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;var l=e.createElement("div");l.classList.add(Ud("m")),this.padElement.appendChild(l),this.markerElem_=l,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}return Object.defineProperty(i.prototype,"allFocusableElements",{get:function(){return[this.padElement]},enumerable:!1,configurable:!0}),i.prototype.update_=function(){var e=this.value.rawValue.getComponents(),t=e[0],n=e[1],r=this.maxValue_,s=(0,kO.mapRange)(t,-r,+r,0,100),o=(0,kO.mapRange)(n,-r,+r,0,100),a=this.invertsY_?100-o:o;this.lineElem_.setAttributeNS(null,"x2","".concat(s,"%")),this.lineElem_.setAttributeNS(null,"y2","".concat(a,"%")),this.markerElem_.style.left="".concat(s,"%"),this.markerElem_.style.top="".concat(a,"%")},i.prototype.onValueChange_=function(){this.update_()},i.prototype.onFoldableChange_=function(){this.update_()},i}();d3.Point2dPickerView=not;Object.defineProperty(h3,"__esModule",{value:!0});h3.Point2dPickerController=void 0;var RO=Er,h1=Po,iot=ou,OO=Jh,rot=d3;function LO(i,e,t){return[(0,h1.getStepForKey)(e[0],(0,h1.getHorizontalStepKeys)(i)),(0,h1.getStepForKey)(e[1],(0,h1.getVerticalStepKeys)(i))*(t?1:-1)]}var sot=function(){function i(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.baseSteps_=t.baseSteps,this.maxValue_=t.maxValue,this.invertsY_=t.invertsY,this.view=new rot.Point2dPickerView(e,{invertsY:this.invertsY_,layout:t.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new iot.PointerHandler(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}return i.prototype.handlePointerEvent_=function(e,t){if(e.point){var n=this.maxValue_,r=(0,RO.mapRange)(e.point.x,0,e.bounds.width,-n,+n),s=(0,RO.mapRange)(this.invertsY_?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-n,+n);this.value.setRawValue(new OO.Point2d(r,s),t)}},i.prototype.onPointerDown_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerMove_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})},i.prototype.onPointerUp_=function(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})},i.prototype.onPadKeyDown_=function(e){(0,h1.isArrowKey)(e.key)&&e.preventDefault();var t=LO(e,this.baseSteps_,this.invertsY_),n=t[0],r=t[1];n===0&&r===0||this.value.setRawValue(new OO.Point2d(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})},i.prototype.onPadKeyUp_=function(e){var t=LO(e,this.baseSteps_,this.invertsY_),n=t[0],r=t[1];n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})},i}();h3.Point2dPickerController=sot;Object.defineProperty(wb,"__esModule",{value:!0});wb.Point2dController=void 0;var DO=ya,oot=jg,zO=Vo,aot=ud,lot=ri,cot=w0,uot=Jh,hot=u3,dot=h3,fot=function(){function i(e,t){var n=this,r,s;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=DO.Foldable.create(t.expanded),this.popC_=t.pickerLayout==="popup"?new oot.PopupController(e,{viewProps:this.viewProps}):null;var o=new dot.Point2dPickerController(e,{baseSteps:[t.axes[0].baseStep,t.axes[1].baseStep],invertsY:t.invertsY,layout:t.pickerLayout,maxValue:t.maxValue,value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(function(a){a.addEventListener("blur",n.onPopupChildBlur_),a.addEventListener("keydown",n.onPopupChildKeydown_)}),this.pickerC_=o,this.textC_=new cot.PointNdTextController(e,{assembly:uot.Point2dAssembly,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new hot.Point2dView(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(s=this.view.buttonElement)===null||s===void 0||s.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),(0,aot.connectValues)({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(a){return a.rawValue},backward:function(a,l){return l.rawValue}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),(0,DO.bindFoldable)(this.foldable_,this.view.pickerElement))}return i.prototype.onPadButtonBlur_=function(e){if(this.popC_){var t=this.view.element,n=(0,lot.forceCast)(e.relatedTarget);(!n||!t.contains(n))&&(this.popC_.shows.rawValue=!1)}},i.prototype.onPadButtonClick_=function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()},i.prototype.onPopupChildBlur_=function(e){if(this.popC_){var t=this.popC_.view.element,n=(0,zO.findNextTarget)(e);n&&t.contains(n)||n&&n===this.view.buttonElement&&!(0,zO.supportsTouch)(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}},i.prototype.onPopupChildKeydown_=function(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()},i}();wb.Point2dController=fot;var Lh={},dg={};Object.defineProperty(dg,"__esModule",{value:!0});dg.writePoint2d=dg.point2dFromUnknown=void 0;var XM=Jh;function pot(i){return XM.Point2d.isObject(i)?new XM.Point2d(i.x,i.y):new XM.Point2d}dg.point2dFromUnknown=pot;function mot(i,e){i.writeProperty("x",e.x),i.writeProperty("y",e.y)}dg.writePoint2d=mot;var IO;function f3(){if(IO)return Lh;IO=1,Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.Point2dInputPlugin=Lh.getSuitableMaxValue=Lh.createDimensionConstraint=void 0;var i=tu,e=co,t=Ar,n=Qs,r=ul,s=Lr,o=pB(),a=x0,l=pc,c=wb,u=dg,h=Jh;function d(S,w){if(S){var C=[],E=(0,l.createStepConstraint)(S,w);E&&C.push(E);var k=(0,l.createRangeConstraint)(S);return k&&C.push(k),new i.CompositeConstraint(C)}}Lh.createDimensionConstraint=d;function f(S,w){return new a.PointNdConstraint({assembly:h.Point2dAssembly,components:[d("x"in S?S.x:void 0,w.x),d("y"in S?S.y:void 0,w.y)]})}function g(S,w){var C=S?(0,l.findNumberRange)(S):[],E=C[0],k=C[1];if(!(0,o.isEmpty)(E)||!(0,o.isEmpty)(k))return Math.max(Math.abs(E??0),Math.abs(k??0));var O=(0,s.getBaseStep)(S);return Math.max(Math.abs(O)*10,Math.abs(w)*10)}function v(S,w){var C=w instanceof a.PointNdConstraint?w.components[0]:void 0,E=w instanceof a.PointNdConstraint?w.components[1]:void 0,k=g(C,S.x),O=g(E,S.y);return Math.max(k,O)}Lh.getSuitableMaxValue=v;function y(S,w){return{baseStep:(0,s.getBaseStep)(w),constraint:w,textProps:t.ValueMap.fromObject({draggingScale:(0,s.getSuitableDraggingScale)(w,S),formatter:(0,e.createNumberFormatter)((0,s.getSuitableDecimalDigits)(w,S))})}}function _(S){if(!("y"in S))return!1;var w=S.y;return w&&"inverted"in w?!!w.inverted:!1}return Lh.Point2dInputPlugin={id:"input-point2d",type:"input",accept:function(S,w){if(!h.Point2d.isObject(S))return null;var C=n.ParamsParsers,E=(0,n.parseParams)(w,{expanded:C.optional.boolean,picker:C.optional.custom(s.parsePickerLayout),x:C.optional.custom(s.parsePointDimensionParams),y:C.optional.object({inverted:C.optional.boolean,max:C.optional.number,min:C.optional.number,step:C.optional.number})});return E?{initialValue:S,params:E}:null},binding:{reader:function(S){return u.point2dFromUnknown},constraint:function(S){return f(S.params,S.initialValue)},equals:h.Point2d.equals,writer:function(S){return u.writePoint2d}},controller:function(S){var w=S.document,C=S.value,E=S.constraint;if(!(E instanceof a.PointNdConstraint))throw r.TpError.shouldNeverHappen();var k="expanded"in S.params?S.params.expanded:void 0,O="picker"in S.params?S.params.picker:void 0;return new c.Point2dController(w,{axes:[y(C.rawValue.x,E.components[0]),y(C.rawValue.y,E.components[1])],expanded:k??!1,invertsY:_(S.params),maxValue:v(C.rawValue,E),parser:e.parseNumber,pickerLayout:O??"popup",value:C,viewProps:S.viewProps})}},Lh}var Xv={},fg={},n0={},got=it&&it.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(n0,"__esModule",{value:!0});n0.Point3dAssembly=n0.Point3d=void 0;var vot=ri,nT=function(){function i(e,t,n){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),this.x=e,this.y=t,this.z=n}return i.prototype.getComponents=function(){return[this.x,this.y,this.z]},i.isObject=function(e){if((0,vot.isEmpty)(e))return!1;var t=e.x,n=e.y,r=e.z;return!(typeof t!="number"||typeof n!="number"||typeof r!="number")},i.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z},i.prototype.toObject=function(){return{x:this.x,y:this.y,z:this.z}},i}();n0.Point3d=nT;n0.Point3dAssembly={toComponents:function(i){return i.getComponents()},fromComponents:function(i){return new(nT.bind.apply(nT,got([void 0],i,!1)))}};Object.defineProperty(fg,"__esModule",{value:!0});fg.writePoint3d=fg.point3dFromUnknown=void 0;var YM=n0;function _ot(i){return YM.Point3d.isObject(i)?new YM.Point3d(i.x,i.y,i.z):new YM.Point3d}fg.point3dFromUnknown=_ot;function bot(i,e){i.writeProperty("x",e.x),i.writeProperty("y",e.y),i.writeProperty("z",e.z)}fg.writePoint3d=bot;var NO;function oB(){if(NO)return Xv;NO=1,Object.defineProperty(Xv,"__esModule",{value:!0}),Xv.Point3dInputPlugin=void 0;var i=co,e=Ar,t=Qs,n=ul,r=Lr,s=x0,o=w0,a=f3(),l=fg,c=n0;function u(d,f){return new s.PointNdConstraint({assembly:c.Point3dAssembly,components:[(0,a.createDimensionConstraint)("x"in d?d.x:void 0,f.x),(0,a.createDimensionConstraint)("y"in d?d.y:void 0,f.y),(0,a.createDimensionConstraint)("z"in d?d.z:void 0,f.z)]})}function h(d,f){return{baseStep:(0,r.getBaseStep)(f),constraint:f,textProps:e.ValueMap.fromObject({draggingScale:(0,r.getSuitableDraggingScale)(f,d),formatter:(0,i.createNumberFormatter)((0,r.getSuitableDecimalDigits)(f,d))})}}return Xv.Point3dInputPlugin={id:"input-point3d",type:"input",accept:function(d,f){if(!c.Point3d.isObject(d))return null;var g=t.ParamsParsers,v=(0,t.parseParams)(f,{x:g.optional.custom(r.parsePointDimensionParams),y:g.optional.custom(r.parsePointDimensionParams),z:g.optional.custom(r.parsePointDimensionParams)});return v?{initialValue:d,params:v}:null},binding:{reader:function(d){return l.point3dFromUnknown},constraint:function(d){return u(d.params,d.initialValue)},equals:c.Point3d.equals,writer:function(d){return l.writePoint3d}},controller:function(d){var f=d.value,g=d.constraint;if(!(g instanceof s.PointNdConstraint))throw n.TpError.shouldNeverHappen();return new o.PointNdTextController(d.document,{assembly:c.Point3dAssembly,axes:[h(f.rawValue.x,g.components[0]),h(f.rawValue.y,g.components[1]),h(f.rawValue.z,g.components[2])],parser:i.parseNumber,value:f,viewProps:d.viewProps})}},Xv}var Yv={},pg={},i0={},yot=it&&it.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(i0,"__esModule",{value:!0});i0.Point4dAssembly=i0.Point4d=void 0;var xot=ri,iT=function(){function i(e,t,n,r){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),r===void 0&&(r=0),this.x=e,this.y=t,this.z=n,this.w=r}return i.prototype.getComponents=function(){return[this.x,this.y,this.z,this.w]},i.isObject=function(e){if((0,xot.isEmpty)(e))return!1;var t=e.x,n=e.y,r=e.z,s=e.w;return!(typeof t!="number"||typeof n!="number"||typeof r!="number"||typeof s!="number")},i.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},i.prototype.toObject=function(){return{x:this.x,y:this.y,z:this.z,w:this.w}},i}();i0.Point4d=iT;i0.Point4dAssembly={toComponents:function(i){return i.getComponents()},fromComponents:function(i){return new(iT.bind.apply(iT,yot([void 0],i,!1)))}};Object.defineProperty(pg,"__esModule",{value:!0});pg.writePoint4d=pg.point4dFromUnknown=void 0;var KM=i0;function wot(i){return KM.Point4d.isObject(i)?new KM.Point4d(i.x,i.y,i.z,i.w):new KM.Point4d}pg.point4dFromUnknown=wot;function Sot(i,e){i.writeProperty("x",e.x),i.writeProperty("y",e.y),i.writeProperty("z",e.z),i.writeProperty("w",e.w)}pg.writePoint4d=Sot;var UO;function aB(){if(UO)return Yv;UO=1,Object.defineProperty(Yv,"__esModule",{value:!0}),Yv.Point4dInputPlugin=void 0;var i=co,e=Ar,t=Qs,n=ul,r=Lr,s=x0,o=w0,a=f3(),l=pg,c=i0;function u(d,f){return new s.PointNdConstraint({assembly:c.Point4dAssembly,components:[(0,a.createDimensionConstraint)("x"in d?d.x:void 0,f.x),(0,a.createDimensionConstraint)("y"in d?d.y:void 0,f.y),(0,a.createDimensionConstraint)("z"in d?d.z:void 0,f.z),(0,a.createDimensionConstraint)("w"in d?d.w:void 0,f.w)]})}function h(d,f){return{baseStep:(0,r.getBaseStep)(f),constraint:f,textProps:e.ValueMap.fromObject({draggingScale:(0,r.getSuitableDraggingScale)(f,d),formatter:(0,i.createNumberFormatter)((0,r.getSuitableDecimalDigits)(f,d))})}}return Yv.Point4dInputPlugin={id:"input-point4d",type:"input",accept:function(d,f){if(!c.Point4d.isObject(d))return null;var g=t.ParamsParsers,v=(0,t.parseParams)(f,{x:g.optional.custom(r.parsePointDimensionParams),y:g.optional.custom(r.parsePointDimensionParams),z:g.optional.custom(r.parsePointDimensionParams),w:g.optional.custom(r.parsePointDimensionParams)});return v?{initialValue:d,params:v}:null},binding:{reader:function(d){return l.point4dFromUnknown},constraint:function(d){return u(d.params,d.initialValue)},equals:c.Point4d.equals,writer:function(d){return l.writePoint4d}},controller:function(d){var f=d.value,g=d.constraint;if(!(g instanceof s.PointNdConstraint))throw n.TpError.shouldNeverHappen();return new o.PointNdTextController(d.document,{assembly:c.Point4dAssembly,axes:f.rawValue.getComponents().map(function(v,y){return h(v,g.components[y])}),parser:i.parseNumber,value:f,viewProps:d.viewProps})}},Yv}var Sb={};Object.defineProperty(Sb,"__esModule",{value:!0});Sb.StringInputPlugin=void 0;var lB=tu,Mot=zf,Cot=b0,Eot=$g,FO=_f,BO=Ar,VO=Qs,Tot=If,cB=Lr;function Aot(i){var e=[],t=(0,cB.createListConstraint)(i.options);return t&&e.push(t),new lB.CompositeConstraint(e)}Sb.StringInputPlugin={id:"input-string",type:"input",accept:function(i,e){if(typeof i!="string")return null;var t=VO.ParamsParsers,n=(0,VO.parseParams)(e,{options:t.optional.custom(cB.parseListOptions)});return n?{initialValue:i,params:n}:null},binding:{reader:function(i){return FO.stringFromUnknown},constraint:function(i){return Aot(i.params)},writer:function(i){return Tot.writePrimitive}},controller:function(i){var e=i.document,t=i.value,n=i.constraint,r=n&&(0,lB.findConstraint)(n,Mot.ListConstraint);return r?new Cot.ListController(e,{props:new BO.ValueMap({options:r.values.value("options")}),value:t,viewProps:i.viewProps}):new Eot.TextController(e,{parser:function(s){return s},props:BO.ValueMap.fromObject({formatter:FO.formatString}),value:t,viewProps:i.viewProps})}};var Nf={};Object.defineProperty(Nf,"__esModule",{value:!0});Nf.Constants=void 0;Nf.Constants={monitor:{defaultInterval:200,defaultLineCount:3}};var Mb={},S0={},p3={};Object.defineProperty(p3,"__esModule",{value:!0});p3.MultiLogView=void 0;var Pot=Ui,HO=(0,Pot.ClassName)("mll"),kot=function(){function i(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(HO()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("textarea");n.classList.add(HO("i")),n.style.height="calc(var(--bld-us) * ".concat(t.lineCount,")"),n.readOnly=!0,t.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}return i.prototype.update_=function(){var e=this,t=this.textareaElem_,n=t.scrollTop===t.scrollHeight-t.clientHeight,r=[];this.value.rawValue.forEach(function(s){s!==void 0&&r.push(e.formatter_(s))}),t.textContent=r.join(`
`),n&&(t.scrollTop=t.scrollHeight)},i.prototype.onValueUpdate_=function(){this.update_()},i}();p3.MultiLogView=kot;Object.defineProperty(S0,"__esModule",{value:!0});S0.MultiLogController=void 0;var Rot=p3,Oot=function(){function i(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Rot.MultiLogView(e,{formatter:t.formatter,lineCount:t.lineCount,value:this.value,viewProps:this.viewProps})}return i}();S0.MultiLogController=Oot;var M0={},m3={};Object.defineProperty(m3,"__esModule",{value:!0});m3.SingleLogView=void 0;var Lot=Ui,qO=(0,Lot.ClassName)("sgl"),Dot=function(){function i(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(qO()),t.viewProps.bindClassModifiers(this.element);var n=e.createElement("input");n.classList.add(qO("i")),n.readOnly=!0,n.type="text",t.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}return i.prototype.update_=function(){var e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=t!==void 0?this.formatter_(t):""},i.prototype.onValueUpdate_=function(){this.update_()},i}();m3.SingleLogView=Dot;Object.defineProperty(M0,"__esModule",{value:!0});M0.SingleLogController=void 0;var zot=m3,Iot=function(){function i(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new zot.SingleLogView(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}return i}();M0.SingleLogController=Iot;Object.defineProperty(Mb,"__esModule",{value:!0});Mb.BooleanMonitorPlugin=void 0;var ZM=Fu,GO=Qs,Not=Nf,Uot=S0,Fot=M0;Mb.BooleanMonitorPlugin={id:"monitor-bool",type:"monitor",accept:function(i,e){if(typeof i!="boolean")return null;var t=GO.ParamsParsers,n=(0,GO.parseParams)(e,{lineCount:t.optional.number});return n?{initialValue:i,params:n}:null},binding:{reader:function(i){return ZM.boolFromUnknown}},controller:function(i){var e;return i.value.rawValue.length===1?new Fot.SingleLogController(i.document,{formatter:ZM.BooleanFormatter,value:i.value,viewProps:i.viewProps}):new Uot.MultiLogController(i.document,{formatter:ZM.BooleanFormatter,lineCount:(e=i.params.lineCount)!==null&&e!==void 0?e:Not.Constants.monitor.defaultLineCount,value:i.value,viewProps:i.viewProps})}};var Cb={},g3={};Object.defineProperty(g3,"__esModule",{value:!0});g3.GraphLogView=void 0;var JM=Vo,Ax=Er,uB=Ui,Fd=(0,uB.ClassName)("grl"),Bot=function(){function i(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Fd()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);var n=e.createElementNS(JM.SVG_NS,"svg");n.classList.add(Fd("g")),n.style.height="calc(var(--bld-us) * ".concat(t.lineCount,")"),this.element.appendChild(n),this.svgElem_=n;var r=e.createElementNS(JM.SVG_NS,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;var s=e.createElement("div");s.classList.add(Fd("t"),(0,uB.ClassName)("tt")()),this.element.appendChild(s),this.tooltipElem_=s,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}return Object.defineProperty(i.prototype,"graphElement",{get:function(){return this.svgElem_},enumerable:!1,configurable:!0}),i.prototype.update_=function(){var e=this.svgElem_.getBoundingClientRect(),t=this.value.rawValue.length-1,n=this.props_.get("minValue"),r=this.props_.get("maxValue"),s=[];this.value.rawValue.forEach(function(u,h){if(u!==void 0){var d=(0,Ax.mapRange)(h,0,t,0,e.width),f=(0,Ax.mapRange)(u,n,r,e.height,0);s.push([d,f].join(","))}}),this.lineElem_.setAttributeNS(null,"points",s.join(" "));var o=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(a===void 0){o.classList.remove(Fd("t","a"));return}var l=(0,Ax.mapRange)(this.cursor_.rawValue,0,t,0,e.width),c=(0,Ax.mapRange)(a,n,r,e.height,0);o.style.left="".concat(l,"px"),o.style.top="".concat(c,"px"),o.textContent="".concat(this.formatter_(a)),o.classList.contains(Fd("t","a"))||(o.classList.add(Fd("t","a"),Fd("t","in")),(0,JM.forceReflow)(o),o.classList.remove(Fd("t","in")))},i.prototype.onValueUpdate_=function(){this.update_()},i.prototype.onCursorChange_=function(){this.update_()},i}();g3.GraphLogView=Bot;Object.defineProperty(Cb,"__esModule",{value:!0});Cb.GraphLogController=void 0;var Vot=Vo,Hot=ra,WO=Er,qot=ou,Got=g3,Wot=function(){function i(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=(0,Hot.createValue)(-1),this.view=new Got.GraphLogView(e,{cursor:this.cursor_,formatter:t.formatter,lineCount:t.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!(0,Vot.supportsTouch)(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{var n=new qot.PointerHandler(this.view.element);n.emitter.on("down",this.onGraphPointerDown_),n.emitter.on("move",this.onGraphPointerMove_),n.emitter.on("up",this.onGraphPointerUp_)}}return i.prototype.onGraphMouseLeave_=function(){this.cursor_.rawValue=-1},i.prototype.onGraphMouseMove_=function(e){var t=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor((0,WO.mapRange)(e.offsetX,0,t.width,0,this.value.rawValue.length))},i.prototype.onGraphPointerDown_=function(e){this.onGraphPointerMove_(e)},i.prototype.onGraphPointerMove_=function(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor((0,WO.mapRange)(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))},i.prototype.onGraphPointerUp_=function(){this.cursor_.rawValue=-1},i}();Cb.GraphLogController=Wot;var Eb={};Object.defineProperty(Eb,"__esModule",{value:!0});Eb.NumberMonitorPlugin=void 0;var hB=co,jot=Ar,jO=Qs,dB=Nf,$ot=ri,Xot=S0,Yot=M0,Kot=Cb;function rT(i){return"format"in i&&!(0,$ot.isEmpty)(i.format)?i.format:(0,hB.createNumberFormatter)(2)}function Zot(i){var e;return i.value.rawValue.length===1?new Yot.SingleLogController(i.document,{formatter:rT(i.params),value:i.value,viewProps:i.viewProps}):new Xot.MultiLogController(i.document,{formatter:rT(i.params),lineCount:(e=i.params.lineCount)!==null&&e!==void 0?e:dB.Constants.monitor.defaultLineCount,value:i.value,viewProps:i.viewProps})}function Jot(i){var e,t,n;return new Kot.GraphLogController(i.document,{formatter:rT(i.params),lineCount:(e=i.params.lineCount)!==null&&e!==void 0?e:dB.Constants.monitor.defaultLineCount,props:jot.ValueMap.fromObject({maxValue:(t="max"in i.params?i.params.max:null)!==null&&t!==void 0?t:100,minValue:(n="min"in i.params?i.params.min:null)!==null&&n!==void 0?n:0}),value:i.value,viewProps:i.viewProps})}function $O(i){return"view"in i&&i.view==="graph"}Eb.NumberMonitorPlugin={id:"monitor-number",type:"monitor",accept:function(i,e){if(typeof i!="number")return null;var t=jO.ParamsParsers,n=(0,jO.parseParams)(e,{format:t.optional.function,lineCount:t.optional.number,max:t.optional.number,min:t.optional.number,view:t.optional.string});return n?{initialValue:i,params:n}:null},binding:{defaultBufferSize:function(i){return $O(i)?64:1},reader:function(i){return hB.numberFromUnknown}},controller:function(i){return $O(i.params)?Jot(i):Zot(i)}};var Tb={};Object.defineProperty(Tb,"__esModule",{value:!0});Tb.StringMonitorPlugin=void 0;var QM=_f,XO=Qs,Qot=Nf,eat=S0,tat=M0;Tb.StringMonitorPlugin={id:"monitor-string",type:"monitor",accept:function(i,e){if(typeof i!="string")return null;var t=XO.ParamsParsers,n=(0,XO.parseParams)(e,{lineCount:t.optional.number,multiline:t.optional.boolean});return n?{initialValue:i,params:n}:null},binding:{reader:function(i){return QM.stringFromUnknown}},controller:function(i){var e,t=i.value,n=t.rawValue.length>1||"multiline"in i.params&&i.params.multiline;return n?new eat.MultiLogController(i.document,{formatter:QM.formatString,lineCount:(e=i.params.lineCount)!==null&&e!==void 0?e:Qot.Constants.monitor.defaultLineCount,value:t,viewProps:i.viewProps}):new tat.SingleLogController(i.document,{formatter:QM.formatString,value:t,viewProps:i.viewProps})}};var fB={};Object.defineProperty(fB,"__esModule",{value:!0});var Kv={},Ab={},v3={};Object.defineProperty(v3,"__esModule",{value:!0});v3.createInputBindingController=void 0;var nat=Of,iat=Lf,rat=sb,sat=Ar,oat=ra,aat=cd,lat=Qs,cat=ri;function uat(i,e){var t,n=i.accept(e.target.read(),e.params);if((0,cat.isEmpty)(n))return null;var r=lat.ParamsParsers,s={target:e.target,initialValue:n.initialValue,params:n.params},o=i.binding.reader(s),a=i.binding.constraint?i.binding.constraint(s):void 0,l=(0,oat.createValue)(o(n.initialValue),{constraint:a,equals:i.binding.equals}),c=new rat.InputBinding({reader:o,target:e.target,value:l,writer:i.binding.writer(s)}),u=r.optional.boolean(e.params.disabled).value,h=r.optional.boolean(e.params.hidden).value,d=i.controller({constraint:a,document:e.document,initialValue:n.initialValue,params:n.params,value:c.value,viewProps:aat.ViewProps.create({disabled:u,hidden:h})});return new iat.InputBindingController(e.document,{binding:c,blade:(0,nat.createBlade)(),props:sat.ValueMap.fromObject({label:"label"in e.params?(t=r.optional.string(e.params.label).value)!==null&&t!==void 0?t:null:e.target.key}),valueController:d})}v3.createInputBindingController=uat;var _3={};Object.defineProperty(_3,"__esModule",{value:!0});_3.createMonitorBindingController=void 0;var hat=Of,dat=Df,fat=ob,pat=rb,mat=ib,gat=vf,vat=Ar,_at=cd,bat=Qs,yat=Nf,xat=ri;function wat(i,e){return e===0?new mat.ManualTicker:new pat.IntervalTicker(i,e??yat.Constants.monitor.defaultInterval)}function Sat(i,e){var t,n,r,s=bat.ParamsParsers,o=i.accept(e.target.read(),e.params);if((0,xat.isEmpty)(o))return null;var a={target:e.target,initialValue:o.initialValue,params:o.params},l=i.binding.reader(a),c=(n=(t=s.optional.number(e.params.bufferSize).value)!==null&&t!==void 0?t:i.binding.defaultBufferSize&&i.binding.defaultBufferSize(o.params))!==null&&n!==void 0?n:1,u=s.optional.number(e.params.interval).value,h=new fat.MonitorBinding({reader:l,target:e.target,ticker:wat(e.document,u),value:(0,gat.initializeBuffer)(c)}),d=s.optional.boolean(e.params.disabled).value,f=s.optional.boolean(e.params.hidden).value,g=i.controller({document:e.document,params:o.params,value:h.value,viewProps:_at.ViewProps.create({disabled:d,hidden:f})});return new dat.MonitorBindingController(e.document,{binding:h,blade:(0,hat.createBlade)(),props:vat.ValueMap.fromObject({label:"label"in e.params?(r=s.optional.string(e.params.label).value)!==null&&r!==void 0?r:null:e.target.key}),valueController:g})}_3.createMonitorBindingController=Sat;var eC=it&&it.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(Ab,"__esModule",{value:!0});Ab.PluginPool=void 0;var Mat=Vg,Cat=Lf,Eat=Hg,Tat=Df,Aat=nb,Pat=gf,kat=W_(),Zv=ul,Rat=v3,Oat=ri,Lat=_3,Dat=function(){function i(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}return i.prototype.getAll=function(){return eC(eC(eC([],this.pluginsMap_.blades,!0),this.pluginsMap_.inputs,!0),this.pluginsMap_.monitors,!0)},i.prototype.register=function(e){e.type==="blade"?this.pluginsMap_.blades.unshift(e):e.type==="input"?this.pluginsMap_.inputs.unshift(e):e.type==="monitor"&&this.pluginsMap_.monitors.unshift(e)},i.prototype.createInput=function(e,t,n){var r=t.read();if((0,Oat.isEmpty)(r))throw new Zv.TpError({context:{key:t.key},type:"nomatchingcontroller"});var s=this.pluginsMap_.inputs.reduce(function(o,a){return o??(0,Rat.createInputBindingController)(a,{document:e,target:t,params:n})},null);if(s)return s;throw new Zv.TpError({context:{key:t.key},type:"nomatchingcontroller"})},i.prototype.createMonitor=function(e,t,n){var r=this.pluginsMap_.monitors.reduce(function(s,o){return s??(0,Lat.createMonitorBindingController)(o,{document:e,params:n,target:t})},null);if(r)return r;throw new Zv.TpError({context:{key:t.key},type:"nomatchingcontroller"})},i.prototype.createBlade=function(e,t){var n=this.pluginsMap_.blades.reduce(function(r,s){return r??(0,Aat.createBladeController)(s,{document:e,params:t})},null);if(!n)throw new Zv.TpError({type:"nomatchingview",context:{params:t}});return n},i.prototype.createBladeApi=function(e){var t=this;if(e instanceof Cat.InputBindingController)return new Mat.InputBindingApi(e);if(e instanceof Tat.MonitorBindingController)return new Eat.MonitorBindingApi(e);if(e instanceof kat.RackController)return new Pat.RackApi(e,this);var n=this.pluginsMap_.blades.reduce(function(r,s){return r??s.api({controller:e,pool:t})},null);if(!n)throw Zv.TpError.shouldNeverHappen();return n},i}();Ab.PluginPool=Dat;var YO;function zat(){if(YO)return Kv;YO=1,Object.defineProperty(Kv,"__esModule",{value:!0}),Kv.createDefaultPluginPool=void 0;var i=B_,e=X_,t=Z_,n=tb,r=_b,s=bb,o=yb,a=xb,l=pc,c=f3(),u=oB(),h=aB(),d=Sb,f=Mb,g=Eb,v=Tb,y=Ab;function _(){var S=new y.PluginPool;return[c.Point2dInputPlugin,u.Point3dInputPlugin,h.Point4dInputPlugin,d.StringInputPlugin,l.NumberInputPlugin,a.StringColorInputPlugin,o.ObjectColorInputPlugin,s.NumberColorInputPlugin,r.BooleanInputPlugin,f.BooleanMonitorPlugin,v.StringMonitorPlugin,g.NumberMonitorPlugin,i.ButtonBladePlugin,e.FolderBladePlugin,t.SeparatorBladePlugin,n.TabBladePlugin].forEach(function(w){S.register(w)}),S}return Kv.createDefaultPluginPool=_,Kv}var KO;function pB(){return KO||(KO=1,function(i){var e=it&&it.__createBinding||(Object.create?function(r,s,o,a){a===void 0&&(a=o);var l=Object.getOwnPropertyDescriptor(s,o);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(r,a,l)}:function(r,s,o,a){a===void 0&&(a=o),r[a]=s[o]}),t=it&&it.__exportStar||function(r,s){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,r,o)};Object.defineProperty(i,"__esModule",{value:!0}),i.createBladeController=void 0,t(Qu,i),t(bF,i),t(yF,i),t(Ao,i),t(I_,i),t(N_,i),t(U_,i),t(F_,i),t(B_,i),t(ld,i),t(v0,i),t(V_,i),t(Of,i),t(ya,i),t(H_,i),t(q_,i),t(j_,i),t(X_,i),t(Vg,i),t(Lf,i),t(g0,i),t(H4,i),t(Ug,i),t(Hg,i),t(Df,i),t(Y_,i),t(K_,i),t(Z_,i),t(J_,i),t(Q_,i),t(eb,i),t(Gg,i),t(tb,i);var n=nb;Object.defineProperty(i,"createBladeController",{enumerable:!0,get:function(){return n.createBladeController}}),t(ib,i),t(rb,i),t(EF,i),t(sb,i),t(ob,i),t(tu,i),t(PF,i),t(_0,i),t(zf,i),t(ab,i),t(Wg,i),t(kF,i),t(b0,i),t(jg,i),t($g,i),t(RF,i),t(Fu,i),t(LF,i),t(co,i),t(UF,i),t(hb,i),t(_f,i),t(vf,i),t(Ds,i),t(fo,i),t(FF,i),t(Ar,i),t(ud,i),t(ra,i),t(cd,i),t(hd,i),t(fb,i),t(mb,i),t(db,i),t(pb,i),t(gb,i),t(Ui,i),t(lb,i),t(G_,i),t(ou,i),t(cb,i),t(ol,i),t(ub,i),t(HF,i),t(mf,i),t(Vo,i),t(Er,i),t(Qs,i),t(qF,i),t(If,i),t(ul,i),t(Po,i),t(Lr,i),t(vb,i),t(_b,i),t(y0,i),t(ao,i),t(dd,i),t(sa,i),t(bb,i),t(yb,i),t(xb,i),t(x0,i),t(w0,i),t(pc,i),t(wb,i),t(f3(),i),t(oB(),i),t(aB(),i),t(Sb,i),t(Nf,i),t(ri,i),t(Mb,i),t(S0,i),t(M0,i),t(Cb,i),t(Eb,i),t(Tb,i),t(fB,i),t(zat(),i),t(Ab,i)}(OM)),OM}var mB=pB();const gB=s0(mB),Iat=CD({__proto__:null,default:gB},[mB]),sT=gB??Iat,ZO=sT.ClassName("ph");class Nat{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(ZO()),t.viewProps.bindClassModifiers(this.element);const n=e.createElement("div");n.classList.add(ZO("t")),n.textContent=t.text,this.element.appendChild(n)}}class Qpt extends sT.BladeController{constructor(e,t){super({blade:sT.createBlade(),view:new Nat(e,t),viewProps:t.viewProps})}}const Uat=100,tC=20,Dh=6;function Fat(i,e,t){let{view:n}=e,{t:r}=e,{dim3:s=!1}=e;const o=[0,1],a={rangeX:o,rangeY:o,rangeZ:o,width:tC,height:tC,depth:tC/4,items:1,channels:4,live:!1,expr:(u,h,d,f)=>{s?u(h,d,f,1):u(h,d,1,1)}};let l;s?l=[-Dh/2,-Dh/2,-Dh/2]:(a.depth=1,l=[-Dh/2,-Dh/2,-Dh]),n.volume(a);const c=n.reveal({stagger:[1,1,0,0]});return c.transform({scale:[Dh,Dh,Dh],position:l}).point({colors:"<",color:16777215,size:4,zBias:Uat}),i.$$set=u=>{"view"in u&&t(0,n=u.view),"t"in u&&t(1,r=u.t),"dim3"in u&&t(2,s=u.dim3)},i.$$.update=()=>{i.$$.dirty&2&&c.set({enter:r})},[n,r,s]}class JO extends oi{constructor(e){super(),ai(this,e,Fat,null,Gn,{view:0,t:1,dim3:2})}}const Bat=`
  // Enable STPQ mapping
  #define POSITION_STPQ
  void getPosition(inout vec4 xyzw, inout vec4 stpq) {
    // Store XYZ per vertex in STPQ
    stpq = xyzw;
  }
`,Vat=`
  // Enable STPQ mapping
  #define POSITION_STPQ
  vec4 getColor(vec4 rgba, inout vec4 stpq) {
    // Retrieve interpolated XYZ from vertices and use as RGB color.
    // Note: gamma correction is applied with .fragment({ gamma: true }).
    vec3 rgb = stpq.xyz;

    // Add spatial grid
    // vec3 d3 = abs(fract(stpq.xyz * 16.0) - .5);
    // float level = 1.0 - 2.0 * min(d3.x, min(d3.y, d3.z));
    // float grid = clamp(level * 32.0 - 24.0, 0.0, 1.0) * .5 + .5;

    // return vec4(rgb * grid, 1.0);

    return vec4(rgb, 1.0);
  }
`,nC=9,zh=6;function Hat(i,e,t){let{view:n}=e,{t:r}=e,{dim3:s=!1}=e;const o=[0,1],a={expr(h,d,f,g,v,y,_,S){s?h(d,f,g):h(d,f,1)},width:nC,height:nC,depth:nC,channels:3,rangeX:o,rangeY:o,rangeZ:o};let l;s?l=[-zh/2,-zh/2,-zh/2]:(a.depth=1,l=[-zh/2,-zh/2,-zh]),n.volume({...a});let c=n;c=c.shader({code:Bat}).vertex({pass:"data"}),c=c.shader({code:Vat}).fragment({gamma:!0});const u=c.reveal({stagger:[1,1,0,0]});return u.transform({position:l,scale:[zh,zh,zh]}).surface({fill:!0,lineX:!1,lineY:!1,width:2,zBias:1,color:16777215}),i.$$set=h=>{"view"in h&&t(0,n=h.view),"t"in h&&t(1,r=h.t),"dim3"in h&&t(2,s=h.dim3)},i.$$.update=()=>{i.$$.dirty&2&&u.set({enter:r})},[n,r,s]}class QO extends oi{constructor(e){super(),ai(this,e,Hat,null,Gn,{view:0,t:1,dim3:2})}}class kl{constructor(e,t,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=n}static range(e,t){return t?!e||!e.loc||!t.loc||e.loc.lexer!==t.loc.lexer?null:new kl(e.loc.lexer,e.loc.start,t.loc.end):e&&e.loc}}class Bu{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(e,t){return new Bu(t,kl.range(this,e))}}class Rt{constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,r,s,o=t&&t.loc;if(o&&o.start<=o.end){var a=o.lexer.input;r=o.start,s=o.end,r===a.length?n+=" at end of input: ":n+=" at position "+(r+1)+": ";var l=a.slice(r,s).replace(/[^]/g,"$&"),c;r>15?c=""+a.slice(r-15,r):c=a.slice(0,r);var u;s+15<a.length?u=a.slice(s,s+15)+"":u=a.slice(s),n+=c+l+u}var h=new Error(n);return h.name="ParseError",h.__proto__=Rt.prototype,h.position=r,r!=null&&s!=null&&(h.length=s-r),h.rawMessage=e,h}}Rt.prototype.__proto__=Error.prototype;var qat=function(e,t){return e.indexOf(t)!==-1},Gat=function(e,t){return e===void 0?t:e},Wat=/([A-Z])/g,jat=function(e){return e.replace(Wat,"-$1").toLowerCase()},$at={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Xat=/[&><"']/g;function Yat(i){return String(i).replace(Xat,e=>$at[e])}var vB=function i(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?i(e.body[0]):e:e.type==="font"?i(e.body):e},Kat=function(e){var t=vB(e);return t.type==="mathord"||t.type==="textord"||t.type==="atom"},Zat=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},Jat=function(e){var t=/^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(e);return t!=null?t[1]:"_relative"},On={contains:qat,deflt:Gat,escape:Yat,hyphenate:jat,getBaseElem:vB,isCharacterBox:Kat,protocolFromUrl:Jat},pw={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:i=>"#"+i},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(i,e)=>(e.push(i),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:i=>Math.max(0,i),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:i=>Math.max(0,i),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:i=>Math.max(0,i),cli:"-e, --max-expand <n>",cliProcessor:i=>i==="Infinity"?1/0:parseInt(i)},globalGroup:{type:"boolean",cli:!1}};function Qat(i){if(i.default)return i.default;var e=i.type,t=Array.isArray(e)?e[0]:e;if(typeof t!="string")return t.enum[0];switch(t){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class j5{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var t in pw)if(pw.hasOwnProperty(t)){var n=pw[t];this[t]=e[t]!==void 0?n.processor?n.processor(e[t]):e[t]:Qat(n)}}reportNonstrict(e,t,n){var r=this.strict;if(typeof r=="function"&&(r=r(e,t,n)),!(!r||r==="ignore")){if(r===!0||r==="error")throw new Rt("LaTeX-incompatible input and strict mode is set to 'error': "+(t+" ["+e+"]"),n);r==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+r+"': "+t+" ["+e+"]"))}}useStrictBehavior(e,t,n){var r=this.strict;if(typeof r=="function")try{r=r(e,t,n)}catch{r="error"}return!r||r==="ignore"?!1:r===!0||r==="error"?!0:r==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+r+"': "+t+" ["+e+"]")),!1)}isTrusted(e){e.url&&!e.protocol&&(e.protocol=On.protocolFromUrl(e.url));var t=typeof this.trust=="function"?this.trust(e):this.trust;return!!t}}class Bd{constructor(e,t,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=n}sup(){return Eu[elt[this.id]]}sub(){return Eu[tlt[this.id]]}fracNum(){return Eu[nlt[this.id]]}fracDen(){return Eu[ilt[this.id]]}cramp(){return Eu[rlt[this.id]]}text(){return Eu[slt[this.id]]}isTight(){return this.size>=2}}var $5=0,$w=1,Gm=2,jh=3,i_=4,mc=5,mg=6,xa=7,Eu=[new Bd($5,0,!1),new Bd($w,0,!0),new Bd(Gm,1,!1),new Bd(jh,1,!0),new Bd(i_,2,!1),new Bd(mc,2,!0),new Bd(mg,3,!1),new Bd(xa,3,!0)],elt=[i_,mc,i_,mc,mg,xa,mg,xa],tlt=[mc,mc,mc,mc,xa,xa,xa,xa],nlt=[Gm,jh,i_,mc,mg,xa,mg,xa],ilt=[jh,jh,mc,mc,xa,xa,xa,xa],rlt=[$w,$w,jh,jh,mc,mc,xa,xa],slt=[$5,$w,Gm,jh,Gm,jh,Gm,jh],xn={DISPLAY:Eu[$5],TEXT:Eu[Gm],SCRIPT:Eu[i_],SCRIPTSCRIPT:Eu[mg]},oT=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function olt(i){for(var e=0;e<oT.length;e++)for(var t=oT[e],n=0;n<t.blocks.length;n++){var r=t.blocks[n];if(i>=r[0]&&i<=r[1])return t.name}return null}var mw=[];oT.forEach(i=>i.blocks.forEach(e=>mw.push(...e)));function _B(i){for(var e=0;e<mw.length;e+=2)if(i>=mw[e]&&i<=mw[e+1])return!0;return!1}var pm=80,alt=function(e,t){return"M95,"+(622+e+t)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},llt=function(e,t){return"M263,"+(601+e+t)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},clt=function(e,t){return"M983 "+(10+e+t)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},ult=function(e,t){return"M424,"+(2398+e+t)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+t+`
h400000v`+(40+e)+"h-400000z"},hlt=function(e,t){return"M473,"+(2713+e+t)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+t+"h400000v"+(40+e)+"H1017.7z"},dlt=function(e){var t=e/2;return"M400000 "+e+" H0 L"+t+" 0 l65 45 L145 "+(e-80)+" H400000z"},flt=function(e,t,n){var r=n-54-t-e;return"M702 "+(e+t)+"H400000"+(40+e)+`
H742v`+r+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+t+"H400000v"+(40+e)+"H742z"},plt=function(e,t,n){t=1e3*t;var r="";switch(e){case"sqrtMain":r=alt(t,pm);break;case"sqrtSize1":r=llt(t,pm);break;case"sqrtSize2":r=clt(t,pm);break;case"sqrtSize3":r=ult(t,pm);break;case"sqrtSize4":r=hlt(t,pm);break;case"sqrtTall":r=flt(t,pm,n)}return r},mlt=function(e,t){switch(e){case"":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z"+("M367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z");case"":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257z"+("M478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z");default:return""}},eL={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},glt=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+` v585 h43z
M367 15 v585 v`+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v602 h84z
M403 1759 V0 H319 V1759 v`+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v602 h84z
M347 1759 V0 h-84 V1759 v`+t+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(t+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(t+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(t+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(t+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Pb{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return On.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){var e=t=>t.toText();return this.children.map(e).join("")}}var Du={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Px={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},tL={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function vlt(i,e){Du[i]=e}function X5(i,e,t){if(!Du[e])throw new Error("Font metrics not found for font: "+e+".");var n=i.charCodeAt(0),r=Du[e][n];if(!r&&i[0]in tL&&(n=tL[i[0]].charCodeAt(0),r=Du[e][n]),!r&&t==="text"&&_B(n)&&(r=Du[e][77]),r)return{depth:r[0],height:r[1],italic:r[2],skew:r[3],width:r[4]}}var iC={};function _lt(i){var e;if(i>=5?e=0:i>=3?e=1:e=2,!iC[e]){var t=iC[e]={cssEmPerMu:Px.quad[e]/18};for(var n in Px)Px.hasOwnProperty(n)&&(t[n]=Px[n][e])}return iC[e]}var blt=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],nL=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],iL=function(e,t){return t.size<2?e:blt[e-1][t.size-1]};class Bh{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Bh.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=nL[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return new Bh(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:iL(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:nL[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=iL(Bh.BASESIZE,e);return this.size===t&&this.textSize===Bh.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Bh.BASESIZE?["sizing","reset-size"+this.size,"size"+Bh.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=_lt(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Bh.BASESIZE=6;var aT={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},ylt={ex:!0,em:!0,mu:!0},bB=function(e){return typeof e!="string"&&(e=e.unit),e in aT||e in ylt||e==="ex"},es=function(e,t){var n;if(e.unit in aT)n=aT[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if(e.unit==="mu")n=t.fontMetrics().cssEmPerMu;else{var r;if(t.style.isTight()?r=t.havingStyle(t.style.text()):r=t,e.unit==="ex")n=r.fontMetrics().xHeight;else if(e.unit==="em")n=r.fontMetrics().quad;else throw new Rt("Invalid unit: '"+e.unit+"'");r!==t&&(n*=r.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*n,t.maxSize)},Ft=function(e){return+e.toFixed(4)+"em"},bf=function(e){return e.filter(t=>t).join(" ")},yB=function(e,t,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},t){t.style.isTight()&&this.classes.push("mtight");var r=t.getColor();r&&(this.style.color=r)}},xB=function(e){var t=document.createElement(e);t.className=bf(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(t.style[n]=this.style[n]);for(var r in this.attributes)this.attributes.hasOwnProperty(r)&&t.setAttribute(r,this.attributes[r]);for(var s=0;s<this.children.length;s++)t.appendChild(this.children[s].toNode());return t},wB=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+On.escape(bf(this.classes))+'"');var n="";for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=On.hyphenate(r)+":"+this.style[r]+";");n&&(t+=' style="'+On.escape(n)+'"');for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&(t+=" "+s+'="'+On.escape(this.attributes[s])+'"');t+=">";for(var o=0;o<this.children.length;o++)t+=this.children[o].toMarkup();return t+="</"+e+">",t};class kb{constructor(e,t,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,yB.call(this,e,n,r),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return On.contains(this.classes,e)}toNode(){return xB.call(this,"span")}toMarkup(){return wB.call(this,"span")}}class Y5{constructor(e,t,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,yB.call(this,t,r),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return On.contains(this.classes,e)}toNode(){return xB.call(this,"a")}toMarkup(){return wB.call(this,"a")}}class xlt{constructor(e,t,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return On.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var t in this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e="<img  src='"+this.src+" 'alt='"+this.alt+"' ",t="";for(var n in this.style)this.style.hasOwnProperty(n)&&(t+=On.hyphenate(n)+":"+this.style[n]+";");return t&&(e+=' style="'+On.escape(t)+'"'),e+="'/>",e}}var wlt={:"",:"",:"",:""};class yc{constructor(e,t,n,r,s,o,a,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=n||0,this.italic=r||0,this.skew=s||0,this.width=o||0,this.classes=a||[],this.style=l||{},this.maxFontSize=0;var c=olt(this.text.charCodeAt(0));c&&this.classes.push(c+"_fallback"),/[]/.test(this.text)&&(this.text=wlt[this.text])}hasClass(e){return On.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),t=null;this.italic>0&&(t=document.createElement("span"),t.style.marginRight=Ft(this.italic)),this.classes.length>0&&(t=t||document.createElement("span"),t.className=bf(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(t=t||document.createElement("span"),t.style[n]=this.style[n]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=On.escape(bf(this.classes)),t+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=On.hyphenate(r)+":"+this.style[r]+";");n&&(e=!0,t+=' style="'+On.escape(n)+'"');var s=On.escape(this.text);return e?(t+=">",t+=s,t+="</span>",t):s}}class Qh{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&t.setAttribute(n,this.attributes[n]);for(var r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+"='"+this.attributes[t]+"'");e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class yf{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",eL[this.pathName]),t}toMarkup(){return this.alternate?"<path d='"+this.alternate+"'/>":"<path d='"+eL[this.pathName]+"'/>"}}class lT{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&t.setAttribute(n,this.attributes[n]);return t}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+"='"+this.attributes[t]+"'");return e+="/>",e}}function rL(i){if(i instanceof yc)return i;throw new Error("Expected symbolNode but got "+String(i)+".")}function Slt(i){if(i instanceof kb)return i;throw new Error("Expected span<HtmlDomNode> but got "+String(i)+".")}var Mlt={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Clt={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Tr={math:{},text:{}};function L(i,e,t,n,r,s){Tr[i][r]={font:e,group:t,replace:n},s&&n&&(Tr[i][n]=Tr[i][r])}var N="math",Et="text",G="main",ce="ams",Gr="accent-token",Qt="bin",Ea="close",Xg="inner",Cn="mathord",eo="op-token",Vl="open",b3="punct",pe="rel",fd="spacing",Ce="textord";L(N,G,pe,"","\\equiv",!0);L(N,G,pe,"","\\prec",!0);L(N,G,pe,"","\\succ",!0);L(N,G,pe,"","\\sim",!0);L(N,G,pe,"","\\perp");L(N,G,pe,"","\\preceq",!0);L(N,G,pe,"","\\succeq",!0);L(N,G,pe,"","\\simeq",!0);L(N,G,pe,"","\\mid",!0);L(N,G,pe,"","\\ll",!0);L(N,G,pe,"","\\gg",!0);L(N,G,pe,"","\\asymp",!0);L(N,G,pe,"","\\parallel");L(N,G,pe,"","\\bowtie",!0);L(N,G,pe,"","\\smile",!0);L(N,G,pe,"","\\sqsubseteq",!0);L(N,G,pe,"","\\sqsupseteq",!0);L(N,G,pe,"","\\doteq",!0);L(N,G,pe,"","\\frown",!0);L(N,G,pe,"","\\ni",!0);L(N,G,pe,"","\\propto",!0);L(N,G,pe,"","\\vdash",!0);L(N,G,pe,"","\\dashv",!0);L(N,G,pe,"","\\owns");L(N,G,b3,".","\\ldotp");L(N,G,b3,"","\\cdotp");L(N,G,Ce,"#","\\#");L(Et,G,Ce,"#","\\#");L(N,G,Ce,"&","\\&");L(Et,G,Ce,"&","\\&");L(N,G,Ce,"","\\aleph",!0);L(N,G,Ce,"","\\forall",!0);L(N,G,Ce,"","\\hbar",!0);L(N,G,Ce,"","\\exists",!0);L(N,G,Ce,"","\\nabla",!0);L(N,G,Ce,"","\\flat",!0);L(N,G,Ce,"","\\ell",!0);L(N,G,Ce,"","\\natural",!0);L(N,G,Ce,"","\\clubsuit",!0);L(N,G,Ce,"","\\wp",!0);L(N,G,Ce,"","\\sharp",!0);L(N,G,Ce,"","\\diamondsuit",!0);L(N,G,Ce,"","\\Re",!0);L(N,G,Ce,"","\\heartsuit",!0);L(N,G,Ce,"","\\Im",!0);L(N,G,Ce,"","\\spadesuit",!0);L(N,G,Ce,"","\\S",!0);L(Et,G,Ce,"","\\S");L(N,G,Ce,"","\\P",!0);L(Et,G,Ce,"","\\P");L(N,G,Ce,"","\\dag");L(Et,G,Ce,"","\\dag");L(Et,G,Ce,"","\\textdagger");L(N,G,Ce,"","\\ddag");L(Et,G,Ce,"","\\ddag");L(Et,G,Ce,"","\\textdaggerdbl");L(N,G,Ea,"","\\rmoustache",!0);L(N,G,Vl,"","\\lmoustache",!0);L(N,G,Ea,"","\\rgroup",!0);L(N,G,Vl,"","\\lgroup",!0);L(N,G,Qt,"","\\mp",!0);L(N,G,Qt,"","\\ominus",!0);L(N,G,Qt,"","\\uplus",!0);L(N,G,Qt,"","\\sqcap",!0);L(N,G,Qt,"","\\ast");L(N,G,Qt,"","\\sqcup",!0);L(N,G,Qt,"","\\bigcirc",!0);L(N,G,Qt,"","\\bullet",!0);L(N,G,Qt,"","\\ddagger");L(N,G,Qt,"","\\wr",!0);L(N,G,Qt,"","\\amalg");L(N,G,Qt,"&","\\And");L(N,G,pe,"","\\longleftarrow",!0);L(N,G,pe,"","\\Leftarrow",!0);L(N,G,pe,"","\\Longleftarrow",!0);L(N,G,pe,"","\\longrightarrow",!0);L(N,G,pe,"","\\Rightarrow",!0);L(N,G,pe,"","\\Longrightarrow",!0);L(N,G,pe,"","\\leftrightarrow",!0);L(N,G,pe,"","\\longleftrightarrow",!0);L(N,G,pe,"","\\Leftrightarrow",!0);L(N,G,pe,"","\\Longleftrightarrow",!0);L(N,G,pe,"","\\mapsto",!0);L(N,G,pe,"","\\longmapsto",!0);L(N,G,pe,"","\\nearrow",!0);L(N,G,pe,"","\\hookleftarrow",!0);L(N,G,pe,"","\\hookrightarrow",!0);L(N,G,pe,"","\\searrow",!0);L(N,G,pe,"","\\leftharpoonup",!0);L(N,G,pe,"","\\rightharpoonup",!0);L(N,G,pe,"","\\swarrow",!0);L(N,G,pe,"","\\leftharpoondown",!0);L(N,G,pe,"","\\rightharpoondown",!0);L(N,G,pe,"","\\nwarrow",!0);L(N,G,pe,"","\\rightleftharpoons",!0);L(N,ce,pe,"","\\nless",!0);L(N,ce,pe,"","\\@nleqslant");L(N,ce,pe,"","\\@nleqq");L(N,ce,pe,"","\\lneq",!0);L(N,ce,pe,"","\\lneqq",!0);L(N,ce,pe,"","\\@lvertneqq");L(N,ce,pe,"","\\lnsim",!0);L(N,ce,pe,"","\\lnapprox",!0);L(N,ce,pe,"","\\nprec",!0);L(N,ce,pe,"","\\npreceq",!0);L(N,ce,pe,"","\\precnsim",!0);L(N,ce,pe,"","\\precnapprox",!0);L(N,ce,pe,"","\\nsim",!0);L(N,ce,pe,"","\\@nshortmid");L(N,ce,pe,"","\\nmid",!0);L(N,ce,pe,"","\\nvdash",!0);L(N,ce,pe,"","\\nvDash",!0);L(N,ce,pe,"","\\ntriangleleft");L(N,ce,pe,"","\\ntrianglelefteq",!0);L(N,ce,pe,"","\\subsetneq",!0);L(N,ce,pe,"","\\@varsubsetneq");L(N,ce,pe,"","\\subsetneqq",!0);L(N,ce,pe,"","\\@varsubsetneqq");L(N,ce,pe,"","\\ngtr",!0);L(N,ce,pe,"","\\@ngeqslant");L(N,ce,pe,"","\\@ngeqq");L(N,ce,pe,"","\\gneq",!0);L(N,ce,pe,"","\\gneqq",!0);L(N,ce,pe,"","\\@gvertneqq");L(N,ce,pe,"","\\gnsim",!0);L(N,ce,pe,"","\\gnapprox",!0);L(N,ce,pe,"","\\nsucc",!0);L(N,ce,pe,"","\\nsucceq",!0);L(N,ce,pe,"","\\succnsim",!0);L(N,ce,pe,"","\\succnapprox",!0);L(N,ce,pe,"","\\ncong",!0);L(N,ce,pe,"","\\@nshortparallel");L(N,ce,pe,"","\\nparallel",!0);L(N,ce,pe,"","\\nVDash",!0);L(N,ce,pe,"","\\ntriangleright");L(N,ce,pe,"","\\ntrianglerighteq",!0);L(N,ce,pe,"","\\@nsupseteqq");L(N,ce,pe,"","\\supsetneq",!0);L(N,ce,pe,"","\\@varsupsetneq");L(N,ce,pe,"","\\supsetneqq",!0);L(N,ce,pe,"","\\@varsupsetneqq");L(N,ce,pe,"","\\nVdash",!0);L(N,ce,pe,"","\\precneqq",!0);L(N,ce,pe,"","\\succneqq",!0);L(N,ce,pe,"","\\@nsubseteqq");L(N,ce,Qt,"","\\unlhd");L(N,ce,Qt,"","\\unrhd");L(N,ce,pe,"","\\nleftarrow",!0);L(N,ce,pe,"","\\nrightarrow",!0);L(N,ce,pe,"","\\nLeftarrow",!0);L(N,ce,pe,"","\\nRightarrow",!0);L(N,ce,pe,"","\\nleftrightarrow",!0);L(N,ce,pe,"","\\nLeftrightarrow",!0);L(N,ce,pe,"","\\vartriangle");L(N,ce,Ce,"","\\hslash");L(N,ce,Ce,"","\\triangledown");L(N,ce,Ce,"","\\lozenge");L(N,ce,Ce,"","\\circledS");L(N,ce,Ce,"","\\circledR");L(Et,ce,Ce,"","\\circledR");L(N,ce,Ce,"","\\measuredangle",!0);L(N,ce,Ce,"","\\nexists");L(N,ce,Ce,"","\\mho");L(N,ce,Ce,"","\\Finv",!0);L(N,ce,Ce,"","\\Game",!0);L(N,ce,Ce,"","\\backprime");L(N,ce,Ce,"","\\blacktriangle");L(N,ce,Ce,"","\\blacktriangledown");L(N,ce,Ce,"","\\blacksquare");L(N,ce,Ce,"","\\blacklozenge");L(N,ce,Ce,"","\\bigstar");L(N,ce,Ce,"","\\sphericalangle",!0);L(N,ce,Ce,"","\\complement",!0);L(N,ce,Ce,"","\\eth",!0);L(Et,G,Ce,"","");L(N,ce,Ce,"","\\diagup");L(N,ce,Ce,"","\\diagdown");L(N,ce,Ce,"","\\square");L(N,ce,Ce,"","\\Box");L(N,ce,Ce,"","\\Diamond");L(N,ce,Ce,"","\\yen",!0);L(Et,ce,Ce,"","\\yen",!0);L(N,ce,Ce,"","\\checkmark",!0);L(Et,ce,Ce,"","\\checkmark");L(N,ce,Ce,"","\\beth",!0);L(N,ce,Ce,"","\\daleth",!0);L(N,ce,Ce,"","\\gimel",!0);L(N,ce,Ce,"","\\digamma",!0);L(N,ce,Ce,"","\\varkappa");L(N,ce,Vl,"","\\@ulcorner",!0);L(N,ce,Ea,"","\\@urcorner",!0);L(N,ce,Vl,"","\\@llcorner",!0);L(N,ce,Ea,"","\\@lrcorner",!0);L(N,ce,pe,"","\\leqq",!0);L(N,ce,pe,"","\\leqslant",!0);L(N,ce,pe,"","\\eqslantless",!0);L(N,ce,pe,"","\\lesssim",!0);L(N,ce,pe,"","\\lessapprox",!0);L(N,ce,pe,"","\\approxeq",!0);L(N,ce,Qt,"","\\lessdot");L(N,ce,pe,"","\\lll",!0);L(N,ce,pe,"","\\lessgtr",!0);L(N,ce,pe,"","\\lesseqgtr",!0);L(N,ce,pe,"","\\lesseqqgtr",!0);L(N,ce,pe,"","\\doteqdot");L(N,ce,pe,"","\\risingdotseq",!0);L(N,ce,pe,"","\\fallingdotseq",!0);L(N,ce,pe,"","\\backsim",!0);L(N,ce,pe,"","\\backsimeq",!0);L(N,ce,pe,"","\\subseteqq",!0);L(N,ce,pe,"","\\Subset",!0);L(N,ce,pe,"","\\sqsubset",!0);L(N,ce,pe,"","\\preccurlyeq",!0);L(N,ce,pe,"","\\curlyeqprec",!0);L(N,ce,pe,"","\\precsim",!0);L(N,ce,pe,"","\\precapprox",!0);L(N,ce,pe,"","\\vartriangleleft");L(N,ce,pe,"","\\trianglelefteq");L(N,ce,pe,"","\\vDash",!0);L(N,ce,pe,"","\\Vvdash",!0);L(N,ce,pe,"","\\smallsmile");L(N,ce,pe,"","\\smallfrown");L(N,ce,pe,"","\\bumpeq",!0);L(N,ce,pe,"","\\Bumpeq",!0);L(N,ce,pe,"","\\geqq",!0);L(N,ce,pe,"","\\geqslant",!0);L(N,ce,pe,"","\\eqslantgtr",!0);L(N,ce,pe,"","\\gtrsim",!0);L(N,ce,pe,"","\\gtrapprox",!0);L(N,ce,Qt,"","\\gtrdot");L(N,ce,pe,"","\\ggg",!0);L(N,ce,pe,"","\\gtrless",!0);L(N,ce,pe,"","\\gtreqless",!0);L(N,ce,pe,"","\\gtreqqless",!0);L(N,ce,pe,"","\\eqcirc",!0);L(N,ce,pe,"","\\circeq",!0);L(N,ce,pe,"","\\triangleq",!0);L(N,ce,pe,"","\\thicksim");L(N,ce,pe,"","\\thickapprox");L(N,ce,pe,"","\\supseteqq",!0);L(N,ce,pe,"","\\Supset",!0);L(N,ce,pe,"","\\sqsupset",!0);L(N,ce,pe,"","\\succcurlyeq",!0);L(N,ce,pe,"","\\curlyeqsucc",!0);L(N,ce,pe,"","\\succsim",!0);L(N,ce,pe,"","\\succapprox",!0);L(N,ce,pe,"","\\vartriangleright");L(N,ce,pe,"","\\trianglerighteq");L(N,ce,pe,"","\\Vdash",!0);L(N,ce,pe,"","\\shortmid");L(N,ce,pe,"","\\shortparallel");L(N,ce,pe,"","\\between",!0);L(N,ce,pe,"","\\pitchfork",!0);L(N,ce,pe,"","\\varpropto");L(N,ce,pe,"","\\blacktriangleleft");L(N,ce,pe,"","\\therefore",!0);L(N,ce,pe,"","\\backepsilon");L(N,ce,pe,"","\\blacktriangleright");L(N,ce,pe,"","\\because",!0);L(N,ce,pe,"","\\llless");L(N,ce,pe,"","\\gggtr");L(N,ce,Qt,"","\\lhd");L(N,ce,Qt,"","\\rhd");L(N,ce,pe,"","\\eqsim",!0);L(N,G,pe,"","\\Join");L(N,ce,pe,"","\\Doteq",!0);L(N,ce,Qt,"","\\dotplus",!0);L(N,ce,Qt,"","\\smallsetminus");L(N,ce,Qt,"","\\Cap",!0);L(N,ce,Qt,"","\\Cup",!0);L(N,ce,Qt,"","\\doublebarwedge",!0);L(N,ce,Qt,"","\\boxminus",!0);L(N,ce,Qt,"","\\boxplus",!0);L(N,ce,Qt,"","\\divideontimes",!0);L(N,ce,Qt,"","\\ltimes",!0);L(N,ce,Qt,"","\\rtimes",!0);L(N,ce,Qt,"","\\leftthreetimes",!0);L(N,ce,Qt,"","\\rightthreetimes",!0);L(N,ce,Qt,"","\\curlywedge",!0);L(N,ce,Qt,"","\\curlyvee",!0);L(N,ce,Qt,"","\\circleddash",!0);L(N,ce,Qt,"","\\circledast",!0);L(N,ce,Qt,"","\\centerdot");L(N,ce,Qt,"","\\intercal",!0);L(N,ce,Qt,"","\\doublecap");L(N,ce,Qt,"","\\doublecup");L(N,ce,Qt,"","\\boxtimes",!0);L(N,ce,pe,"","\\dashrightarrow",!0);L(N,ce,pe,"","\\dashleftarrow",!0);L(N,ce,pe,"","\\leftleftarrows",!0);L(N,ce,pe,"","\\leftrightarrows",!0);L(N,ce,pe,"","\\Lleftarrow",!0);L(N,ce,pe,"","\\twoheadleftarrow",!0);L(N,ce,pe,"","\\leftarrowtail",!0);L(N,ce,pe,"","\\looparrowleft",!0);L(N,ce,pe,"","\\leftrightharpoons",!0);L(N,ce,pe,"","\\curvearrowleft",!0);L(N,ce,pe,"","\\circlearrowleft",!0);L(N,ce,pe,"","\\Lsh",!0);L(N,ce,pe,"","\\upuparrows",!0);L(N,ce,pe,"","\\upharpoonleft",!0);L(N,ce,pe,"","\\downharpoonleft",!0);L(N,G,pe,"","\\origof",!0);L(N,G,pe,"","\\imageof",!0);L(N,ce,pe,"","\\multimap",!0);L(N,ce,pe,"","\\leftrightsquigarrow",!0);L(N,ce,pe,"","\\rightrightarrows",!0);L(N,ce,pe,"","\\rightleftarrows",!0);L(N,ce,pe,"","\\twoheadrightarrow",!0);L(N,ce,pe,"","\\rightarrowtail",!0);L(N,ce,pe,"","\\looparrowright",!0);L(N,ce,pe,"","\\curvearrowright",!0);L(N,ce,pe,"","\\circlearrowright",!0);L(N,ce,pe,"","\\Rsh",!0);L(N,ce,pe,"","\\downdownarrows",!0);L(N,ce,pe,"","\\upharpoonright",!0);L(N,ce,pe,"","\\downharpoonright",!0);L(N,ce,pe,"","\\rightsquigarrow",!0);L(N,ce,pe,"","\\leadsto");L(N,ce,pe,"","\\Rrightarrow",!0);L(N,ce,pe,"","\\restriction");L(N,G,Ce,"","`");L(N,G,Ce,"$","\\$");L(Et,G,Ce,"$","\\$");L(Et,G,Ce,"$","\\textdollar");L(N,G,Ce,"%","\\%");L(Et,G,Ce,"%","\\%");L(N,G,Ce,"_","\\_");L(Et,G,Ce,"_","\\_");L(Et,G,Ce,"_","\\textunderscore");L(N,G,Ce,"","\\angle",!0);L(N,G,Ce,"","\\infty",!0);L(N,G,Ce,"","\\prime");L(N,G,Ce,"","\\triangle");L(N,G,Ce,"","\\Gamma",!0);L(N,G,Ce,"","\\Delta",!0);L(N,G,Ce,"","\\Theta",!0);L(N,G,Ce,"","\\Lambda",!0);L(N,G,Ce,"","\\Xi",!0);L(N,G,Ce,"","\\Pi",!0);L(N,G,Ce,"","\\Sigma",!0);L(N,G,Ce,"","\\Upsilon",!0);L(N,G,Ce,"","\\Phi",!0);L(N,G,Ce,"","\\Psi",!0);L(N,G,Ce,"","\\Omega",!0);L(N,G,Ce,"A","");L(N,G,Ce,"B","");L(N,G,Ce,"E","");L(N,G,Ce,"Z","");L(N,G,Ce,"H","");L(N,G,Ce,"I","");L(N,G,Ce,"K","");L(N,G,Ce,"M","");L(N,G,Ce,"N","");L(N,G,Ce,"O","");L(N,G,Ce,"P","");L(N,G,Ce,"T","");L(N,G,Ce,"X","");L(N,G,Ce,"","\\neg",!0);L(N,G,Ce,"","\\lnot");L(N,G,Ce,"","\\top");L(N,G,Ce,"","\\bot");L(N,G,Ce,"","\\emptyset");L(N,ce,Ce,"","\\varnothing");L(N,G,Cn,"","\\alpha",!0);L(N,G,Cn,"","\\beta",!0);L(N,G,Cn,"","\\gamma",!0);L(N,G,Cn,"","\\delta",!0);L(N,G,Cn,"","\\epsilon",!0);L(N,G,Cn,"","\\zeta",!0);L(N,G,Cn,"","\\eta",!0);L(N,G,Cn,"","\\theta",!0);L(N,G,Cn,"","\\iota",!0);L(N,G,Cn,"","\\kappa",!0);L(N,G,Cn,"","\\lambda",!0);L(N,G,Cn,"","\\mu",!0);L(N,G,Cn,"","\\nu",!0);L(N,G,Cn,"","\\xi",!0);L(N,G,Cn,"","\\omicron",!0);L(N,G,Cn,"","\\pi",!0);L(N,G,Cn,"","\\rho",!0);L(N,G,Cn,"","\\sigma",!0);L(N,G,Cn,"","\\tau",!0);L(N,G,Cn,"","\\upsilon",!0);L(N,G,Cn,"","\\phi",!0);L(N,G,Cn,"","\\chi",!0);L(N,G,Cn,"","\\psi",!0);L(N,G,Cn,"","\\omega",!0);L(N,G,Cn,"","\\varepsilon",!0);L(N,G,Cn,"","\\vartheta",!0);L(N,G,Cn,"","\\varpi",!0);L(N,G,Cn,"","\\varrho",!0);L(N,G,Cn,"","\\varsigma",!0);L(N,G,Cn,"","\\varphi",!0);L(N,G,Qt,"","*",!0);L(N,G,Qt,"+","+");L(N,G,Qt,"","-",!0);L(N,G,Qt,"","\\cdot",!0);L(N,G,Qt,"","\\circ",!0);L(N,G,Qt,"","\\div",!0);L(N,G,Qt,"","\\pm",!0);L(N,G,Qt,"","\\times",!0);L(N,G,Qt,"","\\cap",!0);L(N,G,Qt,"","\\cup",!0);L(N,G,Qt,"","\\setminus",!0);L(N,G,Qt,"","\\land");L(N,G,Qt,"","\\lor");L(N,G,Qt,"","\\wedge",!0);L(N,G,Qt,"","\\vee",!0);L(N,G,Ce,"","\\surd");L(N,G,Vl,"","\\langle",!0);L(N,G,Vl,"","\\lvert");L(N,G,Vl,"","\\lVert");L(N,G,Ea,"?","?");L(N,G,Ea,"!","!");L(N,G,Ea,"","\\rangle",!0);L(N,G,Ea,"","\\rvert");L(N,G,Ea,"","\\rVert");L(N,G,pe,"=","=");L(N,G,pe,":",":");L(N,G,pe,"","\\approx",!0);L(N,G,pe,"","\\cong",!0);L(N,G,pe,"","\\ge");L(N,G,pe,"","\\geq",!0);L(N,G,pe,"","\\gets");L(N,G,pe,">","\\gt",!0);L(N,G,pe,"","\\in",!0);L(N,G,pe,"","\\@not");L(N,G,pe,"","\\subset",!0);L(N,G,pe,"","\\supset",!0);L(N,G,pe,"","\\subseteq",!0);L(N,G,pe,"","\\supseteq",!0);L(N,ce,pe,"","\\nsubseteq",!0);L(N,ce,pe,"","\\nsupseteq",!0);L(N,G,pe,"","\\models");L(N,G,pe,"","\\leftarrow",!0);L(N,G,pe,"","\\le");L(N,G,pe,"","\\leq",!0);L(N,G,pe,"<","\\lt",!0);L(N,G,pe,"","\\rightarrow",!0);L(N,G,pe,"","\\to");L(N,ce,pe,"","\\ngeq",!0);L(N,ce,pe,"","\\nleq",!0);L(N,G,fd,"","\\ ");L(N,G,fd,"","\\space");L(N,G,fd,"","\\nobreakspace");L(Et,G,fd,"","\\ ");L(Et,G,fd,""," ");L(Et,G,fd,"","\\space");L(Et,G,fd,"","\\nobreakspace");L(N,G,fd,null,"\\nobreak");L(N,G,fd,null,"\\allowbreak");L(N,G,b3,",",",");L(N,G,b3,";",";");L(N,ce,Qt,"","\\barwedge",!0);L(N,ce,Qt,"","\\veebar",!0);L(N,G,Qt,"","\\odot",!0);L(N,G,Qt,"","\\oplus",!0);L(N,G,Qt,"","\\otimes",!0);L(N,G,Ce,"","\\partial",!0);L(N,G,Qt,"","\\oslash",!0);L(N,ce,Qt,"","\\circledcirc",!0);L(N,ce,Qt,"","\\boxdot",!0);L(N,G,Qt,"","\\bigtriangleup");L(N,G,Qt,"","\\bigtriangledown");L(N,G,Qt,"","\\dagger");L(N,G,Qt,"","\\diamond");L(N,G,Qt,"","\\star");L(N,G,Qt,"","\\triangleleft");L(N,G,Qt,"","\\triangleright");L(N,G,Vl,"{","\\{");L(Et,G,Ce,"{","\\{");L(Et,G,Ce,"{","\\textbraceleft");L(N,G,Ea,"}","\\}");L(Et,G,Ce,"}","\\}");L(Et,G,Ce,"}","\\textbraceright");L(N,G,Vl,"{","\\lbrace");L(N,G,Ea,"}","\\rbrace");L(N,G,Vl,"[","\\lbrack",!0);L(Et,G,Ce,"[","\\lbrack",!0);L(N,G,Ea,"]","\\rbrack",!0);L(Et,G,Ce,"]","\\rbrack",!0);L(N,G,Vl,"(","\\lparen",!0);L(N,G,Ea,")","\\rparen",!0);L(Et,G,Ce,"<","\\textless",!0);L(Et,G,Ce,">","\\textgreater",!0);L(N,G,Vl,"","\\lfloor",!0);L(N,G,Ea,"","\\rfloor",!0);L(N,G,Vl,"","\\lceil",!0);L(N,G,Ea,"","\\rceil",!0);L(N,G,Ce,"\\","\\backslash");L(N,G,Ce,"","|");L(N,G,Ce,"","\\vert");L(Et,G,Ce,"|","\\textbar",!0);L(N,G,Ce,"","\\|");L(N,G,Ce,"","\\Vert");L(Et,G,Ce,"","\\textbardbl");L(Et,G,Ce,"~","\\textasciitilde");L(Et,G,Ce,"\\","\\textbackslash");L(Et,G,Ce,"^","\\textasciicircum");L(N,G,pe,"","\\uparrow",!0);L(N,G,pe,"","\\Uparrow",!0);L(N,G,pe,"","\\downarrow",!0);L(N,G,pe,"","\\Downarrow",!0);L(N,G,pe,"","\\updownarrow",!0);L(N,G,pe,"","\\Updownarrow",!0);L(N,G,eo,"","\\coprod");L(N,G,eo,"","\\bigvee");L(N,G,eo,"","\\bigwedge");L(N,G,eo,"","\\biguplus");L(N,G,eo,"","\\bigcap");L(N,G,eo,"","\\bigcup");L(N,G,eo,"","\\int");L(N,G,eo,"","\\intop");L(N,G,eo,"","\\iint");L(N,G,eo,"","\\iiint");L(N,G,eo,"","\\prod");L(N,G,eo,"","\\sum");L(N,G,eo,"","\\bigotimes");L(N,G,eo,"","\\bigoplus");L(N,G,eo,"","\\bigodot");L(N,G,eo,"","\\oint");L(N,G,eo,"","\\oiint");L(N,G,eo,"","\\oiiint");L(N,G,eo,"","\\bigsqcup");L(N,G,eo,"","\\smallint");L(Et,G,Xg,"","\\textellipsis");L(N,G,Xg,"","\\mathellipsis");L(Et,G,Xg,"","\\ldots",!0);L(N,G,Xg,"","\\ldots",!0);L(N,G,Xg,"","\\@cdots",!0);L(N,G,Xg,"","\\ddots",!0);L(N,G,Ce,"","\\varvdots");L(N,G,Gr,"","\\acute");L(N,G,Gr,"","\\grave");L(N,G,Gr,"","\\ddot");L(N,G,Gr,"~","\\tilde");L(N,G,Gr,"","\\bar");L(N,G,Gr,"","\\breve");L(N,G,Gr,"","\\check");L(N,G,Gr,"^","\\hat");L(N,G,Gr,"","\\vec");L(N,G,Gr,"","\\dot");L(N,G,Gr,"","\\mathring");L(N,G,Cn,"","\\@imath");L(N,G,Cn,"","\\@jmath");L(N,G,Ce,"","");L(N,G,Ce,"","");L(Et,G,Ce,"","\\i",!0);L(Et,G,Ce,"","\\j",!0);L(Et,G,Ce,"","\\ss",!0);L(Et,G,Ce,"","\\ae",!0);L(Et,G,Ce,"","\\oe",!0);L(Et,G,Ce,"","\\o",!0);L(Et,G,Ce,"","\\AE",!0);L(Et,G,Ce,"","\\OE",!0);L(Et,G,Ce,"","\\O",!0);L(Et,G,Gr,"","\\'");L(Et,G,Gr,"","\\`");L(Et,G,Gr,"","\\^");L(Et,G,Gr,"","\\~");L(Et,G,Gr,"","\\=");L(Et,G,Gr,"","\\u");L(Et,G,Gr,"","\\.");L(Et,G,Gr,"","\\c");L(Et,G,Gr,"","\\r");L(Et,G,Gr,"","\\v");L(Et,G,Gr,"",'\\"');L(Et,G,Gr,"","\\H");L(Et,G,Gr,"","\\textcircled");var SB={"--":!0,"---":!0,"``":!0,"''":!0};L(Et,G,Ce,"","--",!0);L(Et,G,Ce,"","\\textendash");L(Et,G,Ce,"","---",!0);L(Et,G,Ce,"","\\textemdash");L(Et,G,Ce,"","`",!0);L(Et,G,Ce,"","\\textquoteleft");L(Et,G,Ce,"","'",!0);L(Et,G,Ce,"","\\textquoteright");L(Et,G,Ce,"","``",!0);L(Et,G,Ce,"","\\textquotedblleft");L(Et,G,Ce,"","''",!0);L(Et,G,Ce,"","\\textquotedblright");L(N,G,Ce,"","\\degree",!0);L(Et,G,Ce,"","\\degree");L(Et,G,Ce,"","\\textdegree",!0);L(N,G,Ce,"","\\pounds");L(N,G,Ce,"","\\mathsterling",!0);L(Et,G,Ce,"","\\pounds");L(Et,G,Ce,"","\\textsterling",!0);L(N,ce,Ce,"","\\maltese");L(Et,ce,Ce,"","\\maltese");var sL='0123456789/@."';for(var rC=0;rC<sL.length;rC++){var oL=sL.charAt(rC);L(N,G,Ce,oL,oL)}var aL='0123456789!@*()-=+";:?/.,';for(var sC=0;sC<aL.length;sC++){var lL=aL.charAt(sC);L(Et,G,Ce,lL,lL)}var Xw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var oC=0;oC<Xw.length;oC++){var kx=Xw.charAt(oC);L(N,G,Cn,kx,kx),L(Et,G,Ce,kx,kx)}L(N,ce,Ce,"C","");L(Et,ce,Ce,"C","");L(N,ce,Ce,"H","");L(Et,ce,Ce,"H","");L(N,ce,Ce,"N","");L(Et,ce,Ce,"N","");L(N,ce,Ce,"P","");L(Et,ce,Ce,"P","");L(N,ce,Ce,"Q","");L(Et,ce,Ce,"Q","");L(N,ce,Ce,"R","");L(Et,ce,Ce,"R","");L(N,ce,Ce,"Z","");L(Et,ce,Ce,"Z","");L(N,G,Cn,"h","");L(Et,G,Cn,"h","");var Vn="";for(var Fa=0;Fa<Xw.length;Fa++){var js=Xw.charAt(Fa);Vn=String.fromCharCode(55349,56320+Fa),L(N,G,Cn,js,Vn),L(Et,G,Ce,js,Vn),Vn=String.fromCharCode(55349,56372+Fa),L(N,G,Cn,js,Vn),L(Et,G,Ce,js,Vn),Vn=String.fromCharCode(55349,56424+Fa),L(N,G,Cn,js,Vn),L(Et,G,Ce,js,Vn),Vn=String.fromCharCode(55349,56580+Fa),L(N,G,Cn,js,Vn),L(Et,G,Ce,js,Vn),Vn=String.fromCharCode(55349,56736+Fa),L(N,G,Cn,js,Vn),L(Et,G,Ce,js,Vn),Vn=String.fromCharCode(55349,56788+Fa),L(N,G,Cn,js,Vn),L(Et,G,Ce,js,Vn),Vn=String.fromCharCode(55349,56840+Fa),L(N,G,Cn,js,Vn),L(Et,G,Ce,js,Vn),Vn=String.fromCharCode(55349,56944+Fa),L(N,G,Cn,js,Vn),L(Et,G,Ce,js,Vn),Fa<26&&(Vn=String.fromCharCode(55349,56632+Fa),L(N,G,Cn,js,Vn),L(Et,G,Ce,js,Vn),Vn=String.fromCharCode(55349,56476+Fa),L(N,G,Cn,js,Vn),L(Et,G,Ce,js,Vn))}Vn=String.fromCharCode(55349,56668);L(N,G,Cn,"k",Vn);L(Et,G,Ce,"k",Vn);for(var gp=0;gp<10;gp++){var Vd=gp.toString();Vn=String.fromCharCode(55349,57294+gp),L(N,G,Cn,Vd,Vn),L(Et,G,Ce,Vd,Vn),Vn=String.fromCharCode(55349,57314+gp),L(N,G,Cn,Vd,Vn),L(Et,G,Ce,Vd,Vn),Vn=String.fromCharCode(55349,57324+gp),L(N,G,Cn,Vd,Vn),L(Et,G,Ce,Vd,Vn),Vn=String.fromCharCode(55349,57334+gp),L(N,G,Cn,Vd,Vn),L(Et,G,Ce,Vd,Vn)}var cT="";for(var aC=0;aC<cT.length;aC++){var Rx=cT.charAt(aC);L(N,G,Cn,Rx,Rx),L(Et,G,Ce,Rx,Rx)}var Ox=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["","",""],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],cL=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Elt=function(e,t){var n=e.charCodeAt(0),r=e.charCodeAt(1),s=(n-55296)*1024+(r-56320)+65536,o=t==="math"?0:1;if(119808<=s&&s<120484){var a=Math.floor((s-119808)/26);return[Ox[a][2],Ox[a][o]]}else if(120782<=s&&s<=120831){var l=Math.floor((s-120782)/10);return[cL[l][2],cL[l][o]]}else{if(s===120485||s===120486)return[Ox[0][2],Ox[0][o]];if(120486<s&&s<120782)return["",""];throw new Rt("Unsupported character: "+e)}},y3=function(e,t,n){return Tr[n][e]&&Tr[n][e].replace&&(e=Tr[n][e].replace),{value:e,metrics:X5(e,t,n)}},Wc=function(e,t,n,r,s){var o=y3(e,t,n),a=o.metrics;e=o.value;var l;if(a){var c=a.italic;(n==="text"||r&&r.font==="mathit")&&(c=0),l=new yc(e,a.height,a.depth,c,a.skew,a.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+t+"' and mode '"+n+"'")),l=new yc(e,0,0,0,0,0,s);if(r){l.maxFontSize=r.sizeMultiplier,r.style.isTight()&&l.classes.push("mtight");var u=r.getColor();u&&(l.style.color=u)}return l},Tlt=function(e,t,n,r){return r===void 0&&(r=[]),n.font==="boldsymbol"&&y3(e,"Main-Bold",t).metrics?Wc(e,"Main-Bold",t,n,r.concat(["mathbf"])):e==="\\"||Tr[t][e].font==="main"?Wc(e,"Main-Regular",t,n,r):Wc(e,"AMS-Regular",t,n,r.concat(["amsrm"]))},Alt=function(e,t,n,r,s){return s!=="textord"&&y3(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Plt=function(e,t,n){var r=e.mode,s=e.text,o=["mord"],a=r==="math"||r==="text"&&t.font,l=a?t.font:t.fontFamily;if(s.charCodeAt(0)===55349){var[c,u]=Elt(s,r);return Wc(s,c,r,t,o.concat(u))}else if(l){var h,d;if(l==="boldsymbol"){var f=Alt(s,r,t,o,n);h=f.fontName,d=[f.fontClass]}else a?(h=EB[l].fontName,d=[l]):(h=Lx(l,t.fontWeight,t.fontShape),d=[l,t.fontWeight,t.fontShape]);if(y3(s,h,r).metrics)return Wc(s,h,r,t,o.concat(d));if(SB.hasOwnProperty(s)&&h.slice(0,10)==="Typewriter"){for(var g=[],v=0;v<s.length;v++)g.push(Wc(s[v],h,r,t,o.concat(d)));return CB(g)}}if(n==="mathord")return Wc(s,"Math-Italic",r,t,o.concat(["mathnormal"]));if(n==="textord"){var y=Tr[r][s]&&Tr[r][s].font;if(y==="ams"){var _=Lx("amsrm",t.fontWeight,t.fontShape);return Wc(s,_,r,t,o.concat("amsrm",t.fontWeight,t.fontShape))}else if(y==="main"||!y){var S=Lx("textrm",t.fontWeight,t.fontShape);return Wc(s,S,r,t,o.concat(t.fontWeight,t.fontShape))}else{var w=Lx(y,t.fontWeight,t.fontShape);return Wc(s,w,r,t,o.concat(w,t.fontWeight,t.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},klt=(i,e)=>{if(bf(i.classes)!==bf(e.classes)||i.skew!==e.skew||i.maxFontSize!==e.maxFontSize)return!1;if(i.classes.length===1){var t=i.classes[0];if(t==="mbin"||t==="mord")return!1}for(var n in i.style)if(i.style.hasOwnProperty(n)&&i.style[n]!==e.style[n])return!1;for(var r in e.style)if(e.style.hasOwnProperty(r)&&i.style[r]!==e.style[r])return!1;return!0},Rlt=i=>{for(var e=0;e<i.length-1;e++){var t=i[e],n=i[e+1];t instanceof yc&&n instanceof yc&&klt(t,n)&&(t.text+=n.text,t.height=Math.max(t.height,n.height),t.depth=Math.max(t.depth,n.depth),t.italic=n.italic,i.splice(e+1,1),e--)}return i},K5=function(e){for(var t=0,n=0,r=0,s=0;s<e.children.length;s++){var o=e.children[s];o.height>t&&(t=o.height),o.depth>n&&(n=o.depth),o.maxFontSize>r&&(r=o.maxFontSize)}e.height=t,e.depth=n,e.maxFontSize=r},Ha=function(e,t,n,r){var s=new kb(e,t,n,r);return K5(s),s},MB=(i,e,t,n)=>new kb(i,e,t,n),Olt=function(e,t,n){var r=Ha([e],[],t);return r.height=Math.max(n||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),r.style.borderBottomWidth=Ft(r.height),r.maxFontSize=1,r},Llt=function(e,t,n,r){var s=new Y5(e,t,n,r);return K5(s),s},CB=function(e){var t=new Pb(e);return K5(t),t},Dlt=function(e,t){return e instanceof Pb?Ha([],[e],t):e},zlt=function(e){if(e.positionType==="individualShift"){for(var t=e.children,n=[t[0]],r=-t[0].shift-t[0].elem.depth,s=r,o=1;o<t.length;o++){var a=-t[o].shift-s-t[o].elem.depth,l=a-(t[o-1].elem.height+t[o-1].elem.depth);s=s+a,n.push({type:"kern",size:l}),n.push(t[o])}return{children:n,depth:r}}var c;if(e.positionType==="top"){for(var u=e.positionData,h=0;h<e.children.length;h++){var d=e.children[h];u-=d.type==="kern"?d.size:d.elem.height+d.elem.depth}c=u}else if(e.positionType==="bottom")c=-e.positionData;else{var f=e.children[0];if(f.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")c=-f.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")c=-f.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:c}},Ilt=function(e,t){for(var{children:n,depth:r}=zlt(e),s=0,o=0;o<n.length;o++){var a=n[o];if(a.type==="elem"){var l=a.elem;s=Math.max(s,l.maxFontSize,l.height)}}s+=2;var c=Ha(["pstrut"],[]);c.style.height=Ft(s);for(var u=[],h=r,d=r,f=r,g=0;g<n.length;g++){var v=n[g];if(v.type==="kern")f+=v.size;else{var y=v.elem,_=v.wrapperClasses||[],S=v.wrapperStyle||{},w=Ha(_,[c,y],void 0,S);w.style.top=Ft(-s-f-y.depth),v.marginLeft&&(w.style.marginLeft=v.marginLeft),v.marginRight&&(w.style.marginRight=v.marginRight),u.push(w),f+=y.height+y.depth}h=Math.min(h,f),d=Math.max(d,f)}var C=Ha(["vlist"],u);C.style.height=Ft(d);var E;if(h<0){var k=Ha([],[]),O=Ha(["vlist"],[k]);O.style.height=Ft(-h);var R=Ha(["vlist-s"],[new yc("")]);E=[Ha(["vlist-r"],[C,R]),Ha(["vlist-r"],[O])]}else E=[Ha(["vlist-r"],[C])];var A=Ha(["vlist-t"],E);return E.length===2&&A.classes.push("vlist-t2"),A.height=d,A.depth=-h,A},Nlt=(i,e)=>{var t=Ha(["mspace"],[],e),n=es(i,e);return t.style.marginRight=Ft(n),t},Lx=function(e,t,n){var r="";switch(e){case"amsrm":r="AMS";break;case"textrm":r="Main";break;case"textsf":r="SansSerif";break;case"texttt":r="Typewriter";break;default:r=e}var s;return t==="textbf"&&n==="textit"?s="BoldItalic":t==="textbf"?s="Bold":t==="textit"?s="Italic":s="Regular",r+"-"+s},EB={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},TB={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Ult=function(e,t){var[n,r,s]=TB[e],o=new yf(n),a=new Qh([o],{width:Ft(r),height:Ft(s),style:"width:"+Ft(r),viewBox:"0 0 "+1e3*r+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),l=MB(["overlay"],[a],t);return l.height=s,l.style.height=Ft(s),l.style.width=Ft(r),l},He={fontMap:EB,makeSymbol:Wc,mathsym:Tlt,makeSpan:Ha,makeSvgSpan:MB,makeLineSpan:Olt,makeAnchor:Llt,makeFragment:CB,wrapFragment:Dlt,makeVList:Ilt,makeOrd:Plt,makeGlue:Nlt,staticSvg:Ult,svgData:TB,tryCombineChars:Rlt},Zr={number:3,unit:"mu"},vp={number:4,unit:"mu"},Ih={number:5,unit:"mu"},Flt={mord:{mop:Zr,mbin:vp,mrel:Ih,minner:Zr},mop:{mord:Zr,mop:Zr,mrel:Ih,minner:Zr},mbin:{mord:vp,mop:vp,mopen:vp,minner:vp},mrel:{mord:Ih,mop:Ih,mopen:Ih,minner:Ih},mopen:{},mclose:{mop:Zr,mbin:vp,mrel:Ih,minner:Zr},mpunct:{mord:Zr,mop:Zr,mrel:Ih,mopen:Zr,mclose:Zr,mpunct:Zr,minner:Zr},minner:{mord:Zr,mop:Zr,mbin:vp,mrel:Ih,mopen:Zr,mpunct:Zr,minner:Zr}},Blt={mord:{mop:Zr},mop:{mord:Zr,mop:Zr},mbin:{},mrel:{},mopen:{},mclose:{mop:Zr},mpunct:{},minner:{mop:Zr}},AB={},Yw={},Kw={};function Xt(i){for(var{type:e,names:t,props:n,handler:r,htmlBuilder:s,mathmlBuilder:o}=i,a={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:r},l=0;l<t.length;++l)AB[t[l]]=a;e&&(s&&(Yw[e]=s),o&&(Kw[e]=o))}function C0(i){var{type:e,htmlBuilder:t,mathmlBuilder:n}=i;Xt({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:t,mathmlBuilder:n})}var Zw=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},Ls=function(e){return e.type==="ordgroup"?e.body:[e]},ed=He.makeSpan,Vlt=["leftmost","mbin","mopen","mrel","mop","mpunct"],Hlt=["rightmost","mrel","mclose","mpunct"],qlt={display:xn.DISPLAY,text:xn.TEXT,script:xn.SCRIPT,scriptscript:xn.SCRIPTSCRIPT},Glt={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},po=function(e,t,n,r){r===void 0&&(r=[null,null]);for(var s=[],o=0;o<e.length;o++){var a=qi(e[o],t);if(a instanceof Pb){var l=a.children;s.push(...l)}else s.push(a)}if(He.tryCombineChars(s),!n)return s;var c=t;if(e.length===1){var u=e[0];u.type==="sizing"?c=t.havingSize(u.size):u.type==="styling"&&(c=t.havingStyle(qlt[u.style]))}var h=ed([r[0]||"leftmost"],[],t),d=ed([r[1]||"rightmost"],[],t),f=n==="root";return uL(s,(g,v)=>{var y=v.classes[0],_=g.classes[0];y==="mbin"&&On.contains(Hlt,_)?v.classes[0]="mord":_==="mbin"&&On.contains(Vlt,y)&&(g.classes[0]="mord")},{node:h},d,f),uL(s,(g,v)=>{var y=uT(v),_=uT(g),S=y&&_?g.hasClass("mtight")?Blt[y][_]:Flt[y][_]:null;if(S)return He.makeGlue(S,c)},{node:h},d,f),s},uL=function i(e,t,n,r,s){r&&e.push(r);for(var o=0;o<e.length;o++){var a=e[o],l=PB(a);if(l){i(l.children,t,n,null,s);continue}var c=!a.hasClass("mspace");if(c){var u=t(a,n.node);u&&(n.insertAfter?n.insertAfter(u):(e.unshift(u),o++))}c?n.node=a:s&&a.hasClass("newline")&&(n.node=ed(["leftmost"])),n.insertAfter=(h=>d=>{e.splice(h+1,0,d),o++})(o)}r&&e.pop()},PB=function(e){return e instanceof Pb||e instanceof Y5||e instanceof kb&&e.hasClass("enclosing")?e:null},Wlt=function i(e,t){var n=PB(e);if(n){var r=n.children;if(r.length){if(t==="right")return i(r[r.length-1],"right");if(t==="left")return i(r[0],"left")}}return e},uT=function(e,t){return e?(t&&(e=Wlt(e,t)),Glt[e.classes[0]]||null):null},r_=function(e,t){var n=["nulldelimiter"].concat(e.baseSizingClasses());return ed(t.concat(n))},qi=function(e,t,n){if(!e)return ed();if(Yw[e.type]){var r=Yw[e.type](e,t);if(n&&t.size!==n.size){r=ed(t.sizingClasses(n),[r],t);var s=t.sizeMultiplier/n.sizeMultiplier;r.height*=s,r.depth*=s}return r}else throw new Rt("Got group of unknown type: '"+e.type+"'")};function Dx(i,e){var t=ed(["base"],i,e),n=ed(["strut"]);return n.style.height=Ft(t.height+t.depth),t.depth&&(n.style.verticalAlign=Ft(-t.depth)),t.children.unshift(n),t}function hT(i,e){var t=null;i.length===1&&i[0].type==="tag"&&(t=i[0].tag,i=i[0].body);var n=po(i,e,"root"),r;n.length===2&&n[1].hasClass("tag")&&(r=n.pop());for(var s=[],o=[],a=0;a<n.length;a++)if(o.push(n[a]),n[a].hasClass("mbin")||n[a].hasClass("mrel")||n[a].hasClass("allowbreak")){for(var l=!1;a<n.length-1&&n[a+1].hasClass("mspace")&&!n[a+1].hasClass("newline");)a++,o.push(n[a]),n[a].hasClass("nobreak")&&(l=!0);l||(s.push(Dx(o,e)),o=[])}else n[a].hasClass("newline")&&(o.pop(),o.length>0&&(s.push(Dx(o,e)),o=[]),s.push(n[a]));o.length>0&&s.push(Dx(o,e));var c;t?(c=Dx(po(t,e,!0)),c.classes=["tag"],s.push(c)):r&&s.push(r);var u=ed(["katex-html"],s);if(u.setAttribute("aria-hidden","true"),c){var h=c.children[0];h.style.height=Ft(u.height+u.depth),u.depth&&(h.style.verticalAlign=Ft(-u.depth))}return u}function kB(i){return new Pb(i)}class uc{constructor(e,t,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=n||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=bf(this.classes));for(var n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=On.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+On.escape(bf(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class w1{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return On.escape(this.toText())}toText(){return this.text}}class jlt{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",Ft(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Ft(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Pt={MathNode:uc,TextNode:w1,SpaceNode:jlt,newDocumentFragment:kB},xc=function(e,t,n){return Tr[t][e]&&Tr[t][e].replace&&e.charCodeAt(0)!==55349&&!(SB.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=Tr[t][e].replace),new Pt.TextNode(e)},Z5=function(e){return e.length===1?e[0]:new Pt.MathNode("mrow",e)},J5=function(e,t){if(t.fontFamily==="texttt")return"monospace";if(t.fontFamily==="textsf")return t.fontShape==="textit"&&t.fontWeight==="textbf"?"sans-serif-bold-italic":t.fontShape==="textit"?"sans-serif-italic":t.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(t.fontShape==="textit"&&t.fontWeight==="textbf")return"bold-italic";if(t.fontShape==="textit")return"italic";if(t.fontWeight==="textbf")return"bold";var n=t.font;if(!n||n==="mathnormal")return null;var r=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var s=e.text;if(On.contains(["\\imath","\\jmath"],s))return null;Tr[r][s]&&Tr[r][s].replace&&(s=Tr[r][s].replace);var o=He.fontMap[n].fontName;return X5(s,o,r)?He.fontMap[n].variant:null},hl=function(e,t,n){if(e.length===1){var r=Sr(e[0],t);return n&&r instanceof uc&&r.type==="mo"&&(r.setAttribute("lspace","0em"),r.setAttribute("rspace","0em")),[r]}for(var s=[],o,a=0;a<e.length;a++){var l=Sr(e[a],t);if(l instanceof uc&&o instanceof uc){if(l.type==="mtext"&&o.type==="mtext"&&l.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...l.children);continue}else if(l.type==="mn"&&o.type==="mn"){o.children.push(...l.children);continue}else if(l.type==="mi"&&l.children.length===1&&o.type==="mn"){var c=l.children[0];if(c instanceof w1&&c.text==="."){o.children.push(...l.children);continue}}else if(o.type==="mi"&&o.children.length===1){var u=o.children[0];if(u instanceof w1&&u.text===""&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var h=l.children[0];h instanceof w1&&h.text.length>0&&(h.text=h.text.slice(0,1)+""+h.text.slice(1),s.pop())}}}s.push(l),o=l}return s},xf=function(e,t,n){return Z5(hl(e,t,n))},Sr=function(e,t){if(!e)return new Pt.MathNode("mrow");if(Kw[e.type]){var n=Kw[e.type](e,t);return n}else throw new Rt("Got group of unknown type: '"+e.type+"'")};function hL(i,e,t,n,r){var s=hl(i,t),o;s.length===1&&s[0]instanceof uc&&On.contains(["mrow","mtable"],s[0].type)?o=s[0]:o=new Pt.MathNode("mrow",s);var a=new Pt.MathNode("annotation",[new Pt.TextNode(e)]);a.setAttribute("encoding","application/x-tex");var l=new Pt.MathNode("semantics",[o,a]),c=new Pt.MathNode("math",[l]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&c.setAttribute("display","block");var u=r?"katex":"katex-mathml";return He.makeSpan([u],[c])}var RB=function(e){return new Bh({style:e.displayMode?xn.DISPLAY:xn.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},OB=function(e,t){if(t.displayMode){var n=["katex-display"];t.leqno&&n.push("leqno"),t.fleqn&&n.push("fleqn"),e=He.makeSpan(n,[e])}return e},$lt=function(e,t,n){var r=RB(n),s;if(n.output==="mathml")return hL(e,t,r,n.displayMode,!0);if(n.output==="html"){var o=hT(e,r);s=He.makeSpan(["katex"],[o])}else{var a=hL(e,t,r,n.displayMode,!1),l=hT(e,r);s=He.makeSpan(["katex"],[a,l])}return OB(s,n)},Xlt=function(e,t,n){var r=RB(n),s=hT(e,r),o=He.makeSpan(["katex"],[s]);return OB(o,n)},Ylt={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Klt=function(e){var t=new Pt.MathNode("mo",[new Pt.TextNode(Ylt[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},Zlt={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Jlt=function(e){return e.type==="ordgroup"?e.body.length:1},Qlt=function(e,t){function n(){var a=4e5,l=e.label.slice(1);if(On.contains(["widehat","widecheck","widetilde","utilde"],l)){var c=e,u=Jlt(c.base),h,d,f;if(u>5)l==="widehat"||l==="widecheck"?(h=420,a=2364,f=.42,d=l+"4"):(h=312,a=2340,f=.34,d="tilde4");else{var g=[1,1,2,2,3,3][u];l==="widehat"||l==="widecheck"?(a=[0,1062,2364,2364,2364][g],h=[0,239,300,360,420][g],f=[0,.24,.3,.3,.36,.42][g],d=l+g):(a=[0,600,1033,2339,2340][g],h=[0,260,286,306,312][g],f=[0,.26,.286,.3,.306,.34][g],d="tilde"+g)}var v=new yf(d),y=new Qh([v],{width:"100%",height:Ft(f),viewBox:"0 0 "+a+" "+h,preserveAspectRatio:"none"});return{span:He.makeSvgSpan([],[y],t),minWidth:0,height:f}}else{var _=[],S=Zlt[l],[w,C,E]=S,k=E/1e3,O=w.length,R,A;if(O===1){var D=S[3];R=["hide-tail"],A=[D]}else if(O===2)R=["halfarrow-left","halfarrow-right"],A=["xMinYMin","xMaxYMin"];else if(O===3)R=["brace-left","brace-center","brace-right"],A=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+O+" children.");for(var I=0;I<O;I++){var q=new yf(w[I]),j=new Qh([q],{width:"400em",height:Ft(k),viewBox:"0 0 "+a+" "+E,preserveAspectRatio:A[I]+" slice"}),Y=He.makeSvgSpan([R[I]],[j],t);if(O===1)return{span:Y,minWidth:C,height:k};Y.style.height=Ft(k),_.push(Y)}return{span:He.makeSpan(["stretchy"],_,t),minWidth:C,height:k}}}var{span:r,minWidth:s,height:o}=n();return r.height=o,r.style.height=Ft(o),s>0&&(r.style.minWidth=Ft(s)),r},ect=function(e,t,n,r,s){var o,a=e.height+e.depth+n+r;if(/fbox|color|angl/.test(t)){if(o=He.makeSpan(["stretchy",t],[],s),t==="fbox"){var l=s.color&&s.getColor();l&&(o.style.borderColor=l)}}else{var c=[];/^[bx]cancel$/.test(t)&&c.push(new lT({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&c.push(new lT({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var u=new Qh(c,{width:"100%",height:Ft(a)});o=He.makeSvgSpan([],[u],s)}return o.height=a,o.style.height=Ft(a),o},td={encloseSpan:ect,mathMLnode:Klt,svgSpan:Qlt};function si(i,e){if(!i||i.type!==e)throw new Error("Expected node of type "+e+", but got "+(i?"node of type "+i.type:String(i)));return i}function Q5(i){var e=x3(i);if(!e)throw new Error("Expected node of symbol group type, but got "+(i?"node of type "+i.type:String(i)));return e}function x3(i){return i&&(i.type==="atom"||Clt.hasOwnProperty(i.type))?i:null}var e6=(i,e)=>{var t,n,r;i&&i.type==="supsub"?(n=si(i.base,"accent"),t=n.base,i.base=t,r=Slt(qi(i,e)),i.base=n):(n=si(i,"accent"),t=n.base);var s=qi(t,e.havingCrampedStyle()),o=n.isShifty&&On.isCharacterBox(t),a=0;if(o){var l=On.getBaseElem(t),c=qi(l,e.havingCrampedStyle());a=rL(c).skew}var u=n.label==="\\c",h=u?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight),d;if(n.isStretchy)d=td.svgSpan(n,e),d=He.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:d,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+Ft(2*a)+")",marginLeft:Ft(2*a)}:void 0}]},e);else{var f,g;n.label==="\\vec"?(f=He.staticSvg("vec",e),g=He.svgData.vec[1]):(f=He.makeOrd({mode:n.mode,text:n.label},e,"textord"),f=rL(f),f.italic=0,g=f.width,u&&(h+=f.depth)),d=He.makeSpan(["accent-body"],[f]);var v=n.label==="\\textcircled";v&&(d.classes.push("accent-full"),h=s.height);var y=a;v||(y-=g/2),d.style.left=Ft(y),n.label==="\\textcircled"&&(d.style.top=".2em"),d=He.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-h},{type:"elem",elem:d}]},e)}var _=He.makeSpan(["mord","accent"],[d],e);return r?(r.children[0]=_,r.height=Math.max(_.height,r.height),r.classes[0]="mord",r):_},LB=(i,e)=>{var t=i.isStretchy?td.mathMLnode(i.label):new Pt.MathNode("mo",[xc(i.label,i.mode)]),n=new Pt.MathNode("mover",[Sr(i.base,e),t]);return n.setAttribute("accent","true"),n},tct=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(i=>"\\"+i).join("|"));Xt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(i,e)=>{var t=Zw(e[0]),n=!tct.test(i.funcName),r=!n||i.funcName==="\\widehat"||i.funcName==="\\widetilde"||i.funcName==="\\widecheck";return{type:"accent",mode:i.parser.mode,label:i.funcName,isStretchy:n,isShifty:r,base:t}},htmlBuilder:e6,mathmlBuilder:LB});Xt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(i,e)=>{var t=e[0],n=i.parser.mode;return n==="math"&&(i.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+i.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:i.funcName,isStretchy:!1,isShifty:!0,base:t}},htmlBuilder:e6,mathmlBuilder:LB});Xt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=e[0];return{type:"accentUnder",mode:t.mode,label:n,base:r}},htmlBuilder:(i,e)=>{var t=qi(i.base,e),n=td.svgSpan(i,e),r=i.label==="\\utilde"?.12:0,s=He.makeVList({positionType:"top",positionData:t.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:r},{type:"elem",elem:t}]},e);return He.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:(i,e)=>{var t=td.mathMLnode(i.label),n=new Pt.MathNode("munder",[Sr(i.base,e),t]);return n.setAttribute("accentunder","true"),n}});var zx=i=>{var e=new Pt.MathNode("mpadded",i?[i]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};Xt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(i,e,t){var{parser:n,funcName:r}=i;return{type:"xArrow",mode:n.mode,label:r,body:e[0],below:t[0]}},htmlBuilder(i,e){var t=e.style,n=e.havingStyle(t.sup()),r=He.wrapFragment(qi(i.body,n,e),e),s=i.label.slice(0,2)==="\\x"?"x":"cd";r.classes.push(s+"-arrow-pad");var o;i.below&&(n=e.havingStyle(t.sub()),o=He.wrapFragment(qi(i.below,n,e),e),o.classes.push(s+"-arrow-pad"));var a=td.svgSpan(i,e),l=-e.fontMetrics().axisHeight+.5*a.height,c=-e.fontMetrics().axisHeight-.5*a.height-.111;(r.depth>.25||i.label==="\\xleftequilibrium")&&(c-=r.depth);var u;if(o){var h=-e.fontMetrics().axisHeight+o.height+.5*a.height+.111;u=He.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:c},{type:"elem",elem:a,shift:l},{type:"elem",elem:o,shift:h}]},e)}else u=He.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:c},{type:"elem",elem:a,shift:l}]},e);return u.children[0].children[0].children[1].classes.push("svg-align"),He.makeSpan(["mrel","x-arrow"],[u],e)},mathmlBuilder(i,e){var t=td.mathMLnode(i.label);t.setAttribute("minsize",i.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(i.body){var r=zx(Sr(i.body,e));if(i.below){var s=zx(Sr(i.below,e));n=new Pt.MathNode("munderover",[t,s,r])}else n=new Pt.MathNode("mover",[t,r])}else if(i.below){var o=zx(Sr(i.below,e));n=new Pt.MathNode("munder",[t,o])}else n=zx(),n=new Pt.MathNode("mover",[t,n]);return n}});var nct=He.makeSpan;function DB(i,e){var t=po(i.body,e,!0);return nct([i.mclass],t,e)}function zB(i,e){var t,n=hl(i.body,e);return i.mclass==="minner"?t=new Pt.MathNode("mpadded",n):i.mclass==="mord"?i.isCharacterBox?(t=n[0],t.type="mi"):t=new Pt.MathNode("mi",n):(i.isCharacterBox?(t=n[0],t.type="mo"):t=new Pt.MathNode("mo",n),i.mclass==="mbin"?(t.attributes.lspace="0.22em",t.attributes.rspace="0.22em"):i.mclass==="mpunct"?(t.attributes.lspace="0em",t.attributes.rspace="0.17em"):i.mclass==="mopen"||i.mclass==="mclose"?(t.attributes.lspace="0em",t.attributes.rspace="0em"):i.mclass==="minner"&&(t.attributes.lspace="0.0556em",t.attributes.width="+0.1111em")),t}Xt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(i,e){var{parser:t,funcName:n}=i,r=e[0];return{type:"mclass",mode:t.mode,mclass:"m"+n.slice(5),body:Ls(r),isCharacterBox:On.isCharacterBox(r)}},htmlBuilder:DB,mathmlBuilder:zB});var w3=i=>{var e=i.type==="ordgroup"&&i.body.length?i.body[0]:i;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};Xt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(i,e){var{parser:t}=i;return{type:"mclass",mode:t.mode,mclass:w3(e[0]),body:Ls(e[1]),isCharacterBox:On.isCharacterBox(e[1])}}});Xt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(i,e){var{parser:t,funcName:n}=i,r=e[1],s=e[0],o;n!=="\\stackrel"?o=w3(r):o="mrel";var a={type:"op",mode:r.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:Ls(r)},l={type:"supsub",mode:s.mode,base:a,sup:n==="\\underset"?null:s,sub:n==="\\underset"?s:null};return{type:"mclass",mode:t.mode,mclass:o,body:[l],isCharacterBox:On.isCharacterBox(l)}},htmlBuilder:DB,mathmlBuilder:zB});Xt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(i,e){var{parser:t}=i;return{type:"pmb",mode:t.mode,mclass:w3(e[0]),body:Ls(e[0])}},htmlBuilder(i,e){var t=po(i.body,e,!0),n=He.makeSpan([i.mclass],t,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(i,e){var t=hl(i.body,e),n=new Pt.MathNode("mstyle",t);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var ict={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},dL=()=>({type:"styling",body:[],mode:"math",style:"display"}),fL=i=>i.type==="textord"&&i.text==="@",rct=(i,e)=>(i.type==="mathord"||i.type==="atom")&&i.text===e;function sct(i,e,t){var n=ict[i];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return t.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var r=t.callFunction("\\\\cdleft",[e[0]],[]),s={type:"atom",text:n,mode:"math",family:"rel"},o=t.callFunction("\\Big",[s],[]),a=t.callFunction("\\\\cdright",[e[1]],[]),l={type:"ordgroup",mode:"math",body:[r,o,a]};return t.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return t.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var c={type:"textord",text:"\\Vert",mode:"math"};return t.callFunction("\\Big",[c],[])}default:return{type:"textord",text:" ",mode:"math"}}}function oct(i){var e=[];for(i.gullet.beginGroup(),i.gullet.macros.set("\\cr","\\\\\\relax"),i.gullet.beginGroup();;){e.push(i.parseExpression(!1,"\\\\")),i.gullet.endGroup(),i.gullet.beginGroup();var t=i.fetch().text;if(t==="&"||t==="\\\\")i.consume();else if(t==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new Rt("Expected \\\\ or \\cr or \\end",i.nextToken)}for(var n=[],r=[n],s=0;s<e.length;s++){for(var o=e[s],a=dL(),l=0;l<o.length;l++)if(!fL(o[l]))a.body.push(o[l]);else{n.push(a),l+=1;var c=Q5(o[l]).text,u=new Array(2);if(u[0]={type:"ordgroup",mode:"math",body:[]},u[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(c)>-1))if("<>AV".indexOf(c)>-1)for(var h=0;h<2;h++){for(var d=!0,f=l+1;f<o.length;f++){if(rct(o[f],c)){d=!1,l=f;break}if(fL(o[f]))throw new Rt("Missing a "+c+" character to complete a CD arrow.",o[f]);u[h].body.push(o[f])}if(d)throw new Rt("Missing a "+c+" character to complete a CD arrow.",o[l])}else throw new Rt('Expected one of "<>AV=|." after @',o[l]);var g=sct(c,u,i),v={type:"styling",body:[g],mode:"math",style:"display"};n.push(v),a=dL()}s%2===0?n.push(a):n.shift(),n=[],r.push(n)}i.gullet.endGroup(),i.gullet.endGroup();var y=new Array(r[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:r,arraystretch:1,addJot:!0,rowGaps:[null],cols:y,colSeparationType:"CD",hLinesBeforeRow:new Array(r.length+1).fill([])}}Xt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(i,e){var{parser:t,funcName:n}=i;return{type:"cdlabel",mode:t.mode,side:n.slice(4),label:e[0]}},htmlBuilder(i,e){var t=e.havingStyle(e.style.sup()),n=He.wrapFragment(qi(i.label,t,e),e);return n.classes.push("cd-label-"+i.side),n.style.bottom=Ft(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(i,e){var t=new Pt.MathNode("mrow",[Sr(i.label,e)]);return t=new Pt.MathNode("mpadded",[t]),t.setAttribute("width","0"),i.side==="left"&&t.setAttribute("lspace","-1width"),t.setAttribute("voffset","0.7em"),t=new Pt.MathNode("mstyle",[t]),t.setAttribute("displaystyle","false"),t.setAttribute("scriptlevel","1"),t}});Xt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(i,e){var{parser:t}=i;return{type:"cdlabelparent",mode:t.mode,fragment:e[0]}},htmlBuilder(i,e){var t=He.wrapFragment(qi(i.fragment,e),e);return t.classes.push("cd-vert-arrow"),t},mathmlBuilder(i,e){return new Pt.MathNode("mrow",[Sr(i.fragment,e)])}});Xt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(i,e){for(var{parser:t}=i,n=si(e[0],"ordgroup"),r=n.body,s="",o=0;o<r.length;o++){var a=si(r[o],"textord");s+=a.text}var l=parseInt(s),c;if(isNaN(l))throw new Rt("\\@char has non-numeric argument "+s);if(l<0||l>=1114111)throw new Rt("\\@char with invalid code point "+s);return l<=65535?c=String.fromCharCode(l):(l-=65536,c=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:t.mode,text:c}}});var IB=(i,e)=>{var t=po(i.body,e.withColor(i.color),!1);return He.makeFragment(t)},NB=(i,e)=>{var t=hl(i.body,e.withColor(i.color)),n=new Pt.MathNode("mstyle",t);return n.setAttribute("mathcolor",i.color),n};Xt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(i,e){var{parser:t}=i,n=si(e[0],"color-token").color,r=e[1];return{type:"color",mode:t.mode,color:n,body:Ls(r)}},htmlBuilder:IB,mathmlBuilder:NB});Xt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(i,e){var{parser:t,breakOnTokenText:n}=i,r=si(e[0],"color-token").color;t.gullet.macros.set("\\current@color",r);var s=t.parseExpression(!0,n);return{type:"color",mode:t.mode,color:r,body:s}},htmlBuilder:IB,mathmlBuilder:NB});Xt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(i,e,t){var{parser:n}=i,r=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,s=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:s,size:r&&si(r,"size").value}},htmlBuilder(i,e){var t=He.makeSpan(["mspace"],[],e);return i.newLine&&(t.classes.push("newline"),i.size&&(t.style.marginTop=Ft(es(i.size,e)))),t},mathmlBuilder(i,e){var t=new Pt.MathNode("mspace");return i.newLine&&(t.setAttribute("linebreak","newline"),i.size&&t.setAttribute("height",Ft(es(i.size,e)))),t}});var dT={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},UB=i=>{var e=i.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new Rt("Expected a control sequence",i);return e},act=i=>{var e=i.gullet.popToken();return e.text==="="&&(e=i.gullet.popToken(),e.text===" "&&(e=i.gullet.popToken())),e},FB=(i,e,t,n)=>{var r=i.gullet.macros.get(t.text);r==null&&(t.noexpand=!0,r={tokens:[t],numArgs:0,unexpandable:!i.gullet.isExpandable(t.text)}),i.gullet.macros.set(e,r,n)};Xt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(i){var{parser:e,funcName:t}=i;e.consumeSpaces();var n=e.fetch();if(dT[n.text])return(t==="\\global"||t==="\\\\globallong")&&(n.text=dT[n.text]),si(e.parseFunction(),"internal");throw new Rt("Invalid token after macro prefix",n)}});Xt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(i){var{parser:e,funcName:t}=i,n=e.gullet.popToken(),r=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(r))throw new Rt("Expected a control sequence",n);for(var s=0,o,a=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),a[s].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new Rt('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==s+1)throw new Rt('Argument number "'+n.text+'" out of order');s++,a.push([])}else{if(n.text==="EOF")throw new Rt("Expected a macro definition");a[s].push(n.text)}var{tokens:l}=e.gullet.consumeArg();return o&&l.unshift(o),(t==="\\edef"||t==="\\xdef")&&(l=e.gullet.expandTokens(l),l.reverse()),e.gullet.macros.set(r,{tokens:l,numArgs:s,delimiters:a},t===dT[t]),{type:"internal",mode:e.mode}}});Xt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(i){var{parser:e,funcName:t}=i,n=UB(e.gullet.popToken());e.gullet.consumeSpaces();var r=act(e);return FB(e,n,r,t==="\\\\globallet"),{type:"internal",mode:e.mode}}});Xt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(i){var{parser:e,funcName:t}=i,n=UB(e.gullet.popToken()),r=e.gullet.popToken(),s=e.gullet.popToken();return FB(e,n,s,t==="\\\\globalfuture"),e.gullet.pushToken(s),e.gullet.pushToken(r),{type:"internal",mode:e.mode}}});var d1=function(e,t,n){var r=Tr.math[e]&&Tr.math[e].replace,s=X5(r||e,t,n);if(!s)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return s},t6=function(e,t,n,r){var s=n.havingBaseStyle(t),o=He.makeSpan(r.concat(s.sizingClasses(n)),[e],n),a=s.sizeMultiplier/n.sizeMultiplier;return o.height*=a,o.depth*=a,o.maxFontSize=s.sizeMultiplier,o},BB=function(e,t,n){var r=t.havingBaseStyle(n),s=(1-t.sizeMultiplier/r.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=Ft(s),e.height-=s,e.depth+=s},lct=function(e,t,n,r,s,o){var a=He.makeSymbol(e,"Main-Regular",s,r),l=t6(a,t,r,o);return n&&BB(l,r,t),l},cct=function(e,t,n,r){return He.makeSymbol(e,"Size"+t+"-Regular",n,r)},VB=function(e,t,n,r,s,o){var a=cct(e,t,s,r),l=t6(He.makeSpan(["delimsizing","size"+t],[a],r),xn.TEXT,r,o);return n&&BB(l,r,xn.TEXT),l},lC=function(e,t,n){var r;t==="Size1-Regular"?r="delim-size1":r="delim-size4";var s=He.makeSpan(["delimsizinginner",r],[He.makeSpan([],[He.makeSymbol(e,t,n)])]);return{type:"elem",elem:s}},cC=function(e,t,n){var r=Du["Size4-Regular"][e.charCodeAt(0)]?Du["Size4-Regular"][e.charCodeAt(0)][4]:Du["Size1-Regular"][e.charCodeAt(0)][4],s=new yf("inner",mlt(e,Math.round(1e3*t))),o=new Qh([s],{width:Ft(r),height:Ft(t),style:"width:"+Ft(r),viewBox:"0 0 "+1e3*r+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),a=He.makeSvgSpan([],[o],n);return a.height=t,a.style.height=Ft(t),a.style.width=Ft(r),{type:"elem",elem:a}},fT=.008,Ix={type:"kern",size:-1*fT},uct=["|","\\lvert","\\rvert","\\vert"],hct=["\\|","\\lVert","\\rVert","\\Vert"],HB=function(e,t,n,r,s,o){var a,l,c,u,h="",d=0;a=c=u=e,l=null;var f="Size1-Regular";e==="\\uparrow"?c=u="":e==="\\Uparrow"?c=u="":e==="\\downarrow"?a=c="":e==="\\Downarrow"?a=c="":e==="\\updownarrow"?(a="\\uparrow",c="",u="\\downarrow"):e==="\\Updownarrow"?(a="\\Uparrow",c="",u="\\Downarrow"):On.contains(uct,e)?(c="",h="vert",d=333):On.contains(hct,e)?(c="",h="doublevert",d=556):e==="["||e==="\\lbrack"?(a="",c="",u="",f="Size4-Regular",h="lbrack",d=667):e==="]"||e==="\\rbrack"?(a="",c="",u="",f="Size4-Regular",h="rbrack",d=667):e==="\\lfloor"||e===""?(c=a="",u="",f="Size4-Regular",h="lfloor",d=667):e==="\\lceil"||e===""?(a="",c=u="",f="Size4-Regular",h="lceil",d=667):e==="\\rfloor"||e===""?(c=a="",u="",f="Size4-Regular",h="rfloor",d=667):e==="\\rceil"||e===""?(a="",c=u="",f="Size4-Regular",h="rceil",d=667):e==="("||e==="\\lparen"?(a="",c="",u="",f="Size4-Regular",h="lparen",d=875):e===")"||e==="\\rparen"?(a="",c="",u="",f="Size4-Regular",h="rparen",d=875):e==="\\{"||e==="\\lbrace"?(a="",l="",u="",c="",f="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(a="",l="",u="",c="",f="Size4-Regular"):e==="\\lgroup"||e===""?(a="",u="",c="",f="Size4-Regular"):e==="\\rgroup"||e===""?(a="",u="",c="",f="Size4-Regular"):e==="\\lmoustache"||e===""?(a="",u="",c="",f="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(a="",u="",c="",f="Size4-Regular");var g=d1(a,f,s),v=g.height+g.depth,y=d1(c,f,s),_=y.height+y.depth,S=d1(u,f,s),w=S.height+S.depth,C=0,E=1;if(l!==null){var k=d1(l,f,s);C=k.height+k.depth,E=2}var O=v+w+C,R=Math.max(0,Math.ceil((t-O)/(E*_))),A=O+R*E*_,D=r.fontMetrics().axisHeight;n&&(D*=r.sizeMultiplier);var I=A/2-D,q=[];if(h.length>0){var j=A-v-w,Y=Math.round(A*1e3),F=glt(h,Math.round(j*1e3)),re=new yf(h,F),ee=(d/1e3).toFixed(3)+"em",J=(Y/1e3).toFixed(3)+"em",Ee=new Qh([re],{width:ee,height:J,viewBox:"0 0 "+d+" "+Y}),le=He.makeSvgSpan([],[Ee],r);le.height=Y/1e3,le.style.width=ee,le.style.height=J,q.push({type:"elem",elem:le})}else{if(q.push(lC(u,f,s)),q.push(Ix),l===null){var ie=A-v-w+2*fT;q.push(cC(c,ie,r))}else{var be=(A-v-w-C)/2+2*fT;q.push(cC(c,be,r)),q.push(Ix),q.push(lC(l,f,s)),q.push(Ix),q.push(cC(c,be,r))}q.push(Ix),q.push(lC(a,f,s))}var Je=r.havingBaseStyle(xn.TEXT),Xe=He.makeVList({positionType:"bottom",positionData:I,children:q},Je);return t6(He.makeSpan(["delimsizing","mult"],[Xe],Je),xn.TEXT,r,o)},uC=80,hC=.08,dC=function(e,t,n,r,s){var o=plt(e,r,n),a=new yf(e,o),l=new Qh([a],{width:"400em",height:Ft(t),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return He.makeSvgSpan(["hide-tail"],[l],s)},dct=function(e,t){var n=t.havingBaseSizing(),r=jB("\\surd",e*n.sizeMultiplier,WB,n),s=n.sizeMultiplier,o=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),a,l=0,c=0,u=0,h;return r.type==="small"?(u=1e3+1e3*o+uC,e<1?s=1:e<1.4&&(s=.7),l=(1+o+hC)/s,c=(1+o)/s,a=dC("sqrtMain",l,u,o,t),a.style.minWidth="0.853em",h=.833/s):r.type==="large"?(u=(1e3+uC)*S1[r.size],c=(S1[r.size]+o)/s,l=(S1[r.size]+o+hC)/s,a=dC("sqrtSize"+r.size,l,u,o,t),a.style.minWidth="1.02em",h=1/s):(l=e+o+hC,c=e+o,u=Math.floor(1e3*e+o)+uC,a=dC("sqrtTall",l,u,o,t),a.style.minWidth="0.742em",h=1.056),a.height=c,a.style.height=Ft(l),{span:a,advanceWidth:h,ruleWidth:(t.fontMetrics().sqrtRuleThickness+o)*s}},qB=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],fct=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],GB=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],S1=[0,1.2,1.8,2.4,3],pct=function(e,t,n,r,s){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),On.contains(qB,e)||On.contains(GB,e))return VB(e,t,!1,n,r,s);if(On.contains(fct,e))return HB(e,S1[t],!1,n,r,s);throw new Rt("Illegal delimiter: '"+e+"'")},mct=[{type:"small",style:xn.SCRIPTSCRIPT},{type:"small",style:xn.SCRIPT},{type:"small",style:xn.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],gct=[{type:"small",style:xn.SCRIPTSCRIPT},{type:"small",style:xn.SCRIPT},{type:"small",style:xn.TEXT},{type:"stack"}],WB=[{type:"small",style:xn.SCRIPTSCRIPT},{type:"small",style:xn.SCRIPT},{type:"small",style:xn.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],vct=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},jB=function(e,t,n,r){for(var s=Math.min(2,3-r.style.size),o=s;o<n.length&&n[o].type!=="stack";o++){var a=d1(e,vct(n[o]),"math"),l=a.height+a.depth;if(n[o].type==="small"){var c=r.havingBaseStyle(n[o].style);l*=c.sizeMultiplier}if(l>t)return n[o]}return n[n.length-1]},$B=function(e,t,n,r,s,o){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var a;On.contains(GB,e)?a=mct:On.contains(qB,e)?a=WB:a=gct;var l=jB(e,t,a,r);return l.type==="small"?lct(e,l.style,n,r,s,o):l.type==="large"?VB(e,l.size,n,r,s,o):HB(e,t,n,r,s,o)},_ct=function(e,t,n,r,s,o){var a=r.fontMetrics().axisHeight*r.sizeMultiplier,l=901,c=5/r.fontMetrics().ptPerEm,u=Math.max(t-a,n+a),h=Math.max(u/500*l,2*u-c);return $B(e,h,!0,r,s,o)},$h={sqrtImage:dct,sizedDelim:pct,sizeToMaxHeight:S1,customSizedDelim:$B,leftRightDelim:_ct},pL={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},bct=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function S3(i,e){var t=x3(i);if(t&&On.contains(bct,t.text))return t;throw t?new Rt("Invalid delimiter '"+t.text+"' after '"+e.funcName+"'",i):new Rt("Invalid delimiter type '"+i.type+"'",i)}Xt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(i,e)=>{var t=S3(e[0],i);return{type:"delimsizing",mode:i.parser.mode,size:pL[i.funcName].size,mclass:pL[i.funcName].mclass,delim:t.text}},htmlBuilder:(i,e)=>i.delim==="."?He.makeSpan([i.mclass]):$h.sizedDelim(i.delim,i.size,e,i.mode,[i.mclass]),mathmlBuilder:i=>{var e=[];i.delim!=="."&&e.push(xc(i.delim,i.mode));var t=new Pt.MathNode("mo",e);i.mclass==="mopen"||i.mclass==="mclose"?t.setAttribute("fence","true"):t.setAttribute("fence","false"),t.setAttribute("stretchy","true");var n=Ft($h.sizeToMaxHeight[i.size]);return t.setAttribute("minsize",n),t.setAttribute("maxsize",n),t}});function mL(i){if(!i.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Xt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(i,e)=>{var t=i.parser.gullet.macros.get("\\current@color");if(t&&typeof t!="string")throw new Rt("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:i.parser.mode,delim:S3(e[0],i).text,color:t}}});Xt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(i,e)=>{var t=S3(e[0],i),n=i.parser;++n.leftrightDepth;var r=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var s=si(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:r,left:t.text,right:s.delim,rightColor:s.color}},htmlBuilder:(i,e)=>{mL(i);for(var t=po(i.body,e,!0,["mopen","mclose"]),n=0,r=0,s=!1,o=0;o<t.length;o++)t[o].isMiddle?s=!0:(n=Math.max(t[o].height,n),r=Math.max(t[o].depth,r));n*=e.sizeMultiplier,r*=e.sizeMultiplier;var a;if(i.left==="."?a=r_(e,["mopen"]):a=$h.leftRightDelim(i.left,n,r,e,i.mode,["mopen"]),t.unshift(a),s)for(var l=1;l<t.length;l++){var c=t[l],u=c.isMiddle;u&&(t[l]=$h.leftRightDelim(u.delim,n,r,u.options,i.mode,[]))}var h;if(i.right===".")h=r_(e,["mclose"]);else{var d=i.rightColor?e.withColor(i.rightColor):e;h=$h.leftRightDelim(i.right,n,r,d,i.mode,["mclose"])}return t.push(h),He.makeSpan(["minner"],t,e)},mathmlBuilder:(i,e)=>{mL(i);var t=hl(i.body,e);if(i.left!=="."){var n=new Pt.MathNode("mo",[xc(i.left,i.mode)]);n.setAttribute("fence","true"),t.unshift(n)}if(i.right!=="."){var r=new Pt.MathNode("mo",[xc(i.right,i.mode)]);r.setAttribute("fence","true"),i.rightColor&&r.setAttribute("mathcolor",i.rightColor),t.push(r)}return Z5(t)}});Xt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(i,e)=>{var t=S3(e[0],i);if(!i.parser.leftrightDepth)throw new Rt("\\middle without preceding \\left",t);return{type:"middle",mode:i.parser.mode,delim:t.text}},htmlBuilder:(i,e)=>{var t;if(i.delim===".")t=r_(e,[]);else{t=$h.sizedDelim(i.delim,1,e,i.mode,[]);var n={delim:i.delim,options:e};t.isMiddle=n}return t},mathmlBuilder:(i,e)=>{var t=i.delim==="\\vert"||i.delim==="|"?xc("|","text"):xc(i.delim,i.mode),n=new Pt.MathNode("mo",[t]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var n6=(i,e)=>{var t=He.wrapFragment(qi(i.body,e),e),n=i.label.slice(1),r=e.sizeMultiplier,s,o=0,a=On.isCharacterBox(i.body);if(n==="sout")s=He.makeSpan(["stretchy","sout"]),s.height=e.fontMetrics().defaultRuleThickness/r,o=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var l=es({number:.6,unit:"pt"},e),c=es({number:.35,unit:"ex"},e),u=e.havingBaseSizing();r=r/u.sizeMultiplier;var h=t.height+t.depth+l+c;t.style.paddingLeft=Ft(h/2+l);var d=Math.floor(1e3*h*r),f=dlt(d),g=new Qh([new yf("phase",f)],{width:"400em",height:Ft(d/1e3),viewBox:"0 0 400000 "+d,preserveAspectRatio:"xMinYMin slice"});s=He.makeSvgSpan(["hide-tail"],[g],e),s.style.height=Ft(h),o=t.depth+l+c}else{/cancel/.test(n)?a||t.classes.push("cancel-pad"):n==="angl"?t.classes.push("anglpad"):t.classes.push("boxpad");var v=0,y=0,_=0;/box/.test(n)?(_=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),v=e.fontMetrics().fboxsep+(n==="colorbox"?0:_),y=v):n==="angl"?(_=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),v=4*_,y=Math.max(0,.25-t.depth)):(v=a?.2:0,y=v),s=td.encloseSpan(t,n,v,y,e),/fbox|boxed|fcolorbox/.test(n)?(s.style.borderStyle="solid",s.style.borderWidth=Ft(_)):n==="angl"&&_!==.049&&(s.style.borderTopWidth=Ft(_),s.style.borderRightWidth=Ft(_)),o=t.depth+y,i.backgroundColor&&(s.style.backgroundColor=i.backgroundColor,i.borderColor&&(s.style.borderColor=i.borderColor))}var S;if(i.backgroundColor)S=He.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:o},{type:"elem",elem:t,shift:0}]},e);else{var w=/cancel|phase/.test(n)?["svg-align"]:[];S=He.makeVList({positionType:"individualShift",children:[{type:"elem",elem:t,shift:0},{type:"elem",elem:s,shift:o,wrapperClasses:w}]},e)}return/cancel/.test(n)&&(S.height=t.height,S.depth=t.depth),/cancel/.test(n)&&!a?He.makeSpan(["mord","cancel-lap"],[S],e):He.makeSpan(["mord"],[S],e)},i6=(i,e)=>{var t=0,n=new Pt.MathNode(i.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Sr(i.body,e)]);switch(i.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(t=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*t+"pt"),n.setAttribute("height","+"+2*t+"pt"),n.setAttribute("lspace",t+"pt"),n.setAttribute("voffset",t+"pt"),i.label==="\\fcolorbox"){var r=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+r+"em solid "+String(i.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return i.backgroundColor&&n.setAttribute("mathbackground",i.backgroundColor),n};Xt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(i,e,t){var{parser:n,funcName:r}=i,s=si(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:n.mode,label:r,backgroundColor:s,body:o}},htmlBuilder:n6,mathmlBuilder:i6});Xt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(i,e,t){var{parser:n,funcName:r}=i,s=si(e[0],"color-token").color,o=si(e[1],"color-token").color,a=e[2];return{type:"enclose",mode:n.mode,label:r,backgroundColor:o,borderColor:s,body:a}},htmlBuilder:n6,mathmlBuilder:i6});Xt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(i,e){var{parser:t}=i;return{type:"enclose",mode:t.mode,label:"\\fbox",body:e[0]}}});Xt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(i,e){var{parser:t,funcName:n}=i,r=e[0];return{type:"enclose",mode:t.mode,label:n,body:r}},htmlBuilder:n6,mathmlBuilder:i6});Xt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(i,e){var{parser:t}=i;return{type:"enclose",mode:t.mode,label:"\\angl",body:e[0]}}});var XB={};function eh(i){for(var{type:e,names:t,props:n,handler:r,htmlBuilder:s,mathmlBuilder:o}=i,a={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:r},l=0;l<t.length;++l)XB[t[l]]=a;s&&(Yw[e]=s),o&&(Kw[e]=o)}var YB={};function K(i,e){YB[i]=e}function gL(i){var e=[];i.consumeSpaces();var t=i.fetch().text;for(t==="\\relax"&&(i.consume(),i.consumeSpaces(),t=i.fetch().text);t==="\\hline"||t==="\\hdashline";)i.consume(),e.push(t==="\\hdashline"),i.consumeSpaces(),t=i.fetch().text;return e}var M3=i=>{var e=i.parser.settings;if(!e.displayMode)throw new Rt("{"+i.envName+"} can be used only in display mode.")};function r6(i){if(i.indexOf("ed")===-1)return i.indexOf("*")===-1}function Uf(i,e,t){var{hskipBeforeAndAfter:n,addJot:r,cols:s,arraystretch:o,colSeparationType:a,autoTag:l,singleRow:c,emptySingleRow:u,maxNumCols:h,leqno:d}=e;if(i.gullet.beginGroup(),c||i.gullet.macros.set("\\cr","\\\\\\relax"),!o){var f=i.gullet.expandMacroAsText("\\arraystretch");if(f==null)o=1;else if(o=parseFloat(f),!o||o<0)throw new Rt("Invalid \\arraystretch: "+f)}i.gullet.beginGroup();var g=[],v=[g],y=[],_=[],S=l!=null?[]:void 0;function w(){l&&i.gullet.macros.set("\\@eqnsw","1",!0)}function C(){S&&(i.gullet.macros.get("\\df@tag")?(S.push(i.subparse([new Bu("\\df@tag")])),i.gullet.macros.set("\\df@tag",void 0,!0)):S.push(!!l&&i.gullet.macros.get("\\@eqnsw")==="1"))}for(w(),_.push(gL(i));;){var E=i.parseExpression(!1,c?"\\end":"\\\\");i.gullet.endGroup(),i.gullet.beginGroup(),E={type:"ordgroup",mode:i.mode,body:E},t&&(E={type:"styling",mode:i.mode,style:t,body:[E]}),g.push(E);var k=i.fetch().text;if(k==="&"){if(h&&g.length===h){if(c||a)throw new Rt("Too many tab characters: &",i.nextToken);i.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}i.consume()}else if(k==="\\end"){C(),g.length===1&&E.type==="styling"&&E.body[0].body.length===0&&(v.length>1||!u)&&v.pop(),_.length<v.length+1&&_.push([]);break}else if(k==="\\\\"){i.consume();var O=void 0;i.gullet.future().text!==" "&&(O=i.parseSizeGroup(!0)),y.push(O?O.value:null),C(),_.push(gL(i)),g=[],v.push(g),w()}else throw new Rt("Expected & or \\\\ or \\cr or \\end",i.nextToken)}return i.gullet.endGroup(),i.gullet.endGroup(),{type:"array",mode:i.mode,addJot:r,arraystretch:o,body:v,cols:s,rowGaps:y,hskipBeforeAndAfter:n,hLinesBeforeRow:_,colSeparationType:a,tags:S,leqno:d}}function s6(i){return i.slice(0,1)==="d"?"display":"text"}var th=function(e,t){var n,r,s=e.body.length,o=e.hLinesBeforeRow,a=0,l=new Array(s),c=[],u=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),h=1/t.fontMetrics().ptPerEm,d=5*h;if(e.colSeparationType&&e.colSeparationType==="small"){var f=t.havingStyle(xn.SCRIPT).sizeMultiplier;d=.2778*(f/t.sizeMultiplier)}var g=e.colSeparationType==="CD"?es({number:3,unit:"ex"},t):12*h,v=3*h,y=e.arraystretch*g,_=.7*y,S=.3*y,w=0;function C(dt){for(var nt=0;nt<dt.length;++nt)nt>0&&(w+=.25),c.push({pos:w,isDashed:dt[nt]})}for(C(o[0]),n=0;n<e.body.length;++n){var E=e.body[n],k=_,O=S;a<E.length&&(a=E.length);var R=new Array(E.length);for(r=0;r<E.length;++r){var A=qi(E[r],t);O<A.depth&&(O=A.depth),k<A.height&&(k=A.height),R[r]=A}var D=e.rowGaps[n],I=0;D&&(I=es(D,t),I>0&&(I+=S,O<I&&(O=I),I=0)),e.addJot&&(O+=v),R.height=k,R.depth=O,w+=k,R.pos=w,w+=O+I,l[n]=R,C(o[n+1])}var q=w/2+t.fontMetrics().axisHeight,j=e.cols||[],Y=[],F,re,ee=[];if(e.tags&&e.tags.some(dt=>dt))for(n=0;n<s;++n){var J=l[n],Ee=J.pos-q,le=e.tags[n],ie=void 0;le===!0?ie=He.makeSpan(["eqn-num"],[],t):le===!1?ie=He.makeSpan([],[],t):ie=He.makeSpan([],po(le,t,!0),t),ie.depth=J.depth,ie.height=J.height,ee.push({type:"elem",elem:ie,shift:Ee})}for(r=0,re=0;r<a||re<j.length;++r,++re){for(var be=j[re]||{},Je=!0;be.type==="separator";){if(Je||(F=He.makeSpan(["arraycolsep"],[]),F.style.width=Ft(t.fontMetrics().doubleRuleSep),Y.push(F)),be.separator==="|"||be.separator===":"){var Xe=be.separator==="|"?"solid":"dashed",Be=He.makeSpan(["vertical-separator"],[],t);Be.style.height=Ft(w),Be.style.borderRightWidth=Ft(u),Be.style.borderRightStyle=Xe,Be.style.margin="0 "+Ft(-u/2);var vt=w-q;vt&&(Be.style.verticalAlign=Ft(-vt)),Y.push(Be)}else throw new Rt("Invalid separator type: "+be.separator);re++,be=j[re]||{},Je=!1}if(!(r>=a)){var at=void 0;(r>0||e.hskipBeforeAndAfter)&&(at=On.deflt(be.pregap,d),at!==0&&(F=He.makeSpan(["arraycolsep"],[]),F.style.width=Ft(at),Y.push(F)));var Le=[];for(n=0;n<s;++n){var Ot=l[n],ft=Ot[r];if(ft){var rt=Ot.pos-q;ft.depth=Ot.depth,ft.height=Ot.height,Le.push({type:"elem",elem:ft,shift:rt})}}Le=He.makeVList({positionType:"individualShift",children:Le},t),Le=He.makeSpan(["col-align-"+(be.align||"c")],[Le]),Y.push(Le),(r<a-1||e.hskipBeforeAndAfter)&&(at=On.deflt(be.postgap,d),at!==0&&(F=He.makeSpan(["arraycolsep"],[]),F.style.width=Ft(at),Y.push(F)))}}if(l=He.makeSpan(["mtable"],Y),c.length>0){for(var tt=He.makeLineSpan("hline",t,u),se=He.makeLineSpan("hdashline",t,u),ke=[{type:"elem",elem:l,shift:0}];c.length>0;){var ae=c.pop(),xe=ae.pos-q;ae.isDashed?ke.push({type:"elem",elem:se,shift:xe}):ke.push({type:"elem",elem:tt,shift:xe})}l=He.makeVList({positionType:"individualShift",children:ke},t)}if(ee.length===0)return He.makeSpan(["mord"],[l],t);var Ie=He.makeVList({positionType:"individualShift",children:ee},t);return Ie=He.makeSpan(["tag"],[Ie],t),He.makeFragment([l,Ie])},yct={c:"center ",l:"left ",r:"right "},nh=function(e,t){for(var n=[],r=new Pt.MathNode("mtd",[],["mtr-glue"]),s=new Pt.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var a=e.body[o],l=[],c=0;c<a.length;c++)l.push(new Pt.MathNode("mtd",[Sr(a[c],t)]));e.tags&&e.tags[o]&&(l.unshift(r),l.push(r),e.leqno?l.unshift(s):l.push(s)),n.push(new Pt.MathNode("mtr",l))}var u=new Pt.MathNode("mtable",n),h=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);u.setAttribute("rowspacing",Ft(h));var d="",f="";if(e.cols&&e.cols.length>0){var g=e.cols,v="",y=!1,_=0,S=g.length;g[0].type==="separator"&&(d+="top ",_=1),g[g.length-1].type==="separator"&&(d+="bottom ",S-=1);for(var w=_;w<S;w++)g[w].type==="align"?(f+=yct[g[w].align],y&&(v+="none "),y=!0):g[w].type==="separator"&&y&&(v+=g[w].separator==="|"?"solid ":"dashed ",y=!1);u.setAttribute("columnalign",f.trim()),/[sd]/.test(v)&&u.setAttribute("columnlines",v.trim())}if(e.colSeparationType==="align"){for(var C=e.cols||[],E="",k=1;k<C.length;k++)E+=k%2?"0em ":"1em ";u.setAttribute("columnspacing",E.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?u.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?u.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?u.setAttribute("columnspacing","0.5em"):u.setAttribute("columnspacing","1em");var O="",R=e.hLinesBeforeRow;d+=R[0].length>0?"left ":"",d+=R[R.length-1].length>0?"right ":"";for(var A=1;A<R.length-1;A++)O+=R[A].length===0?"none ":R[A][0]?"dashed ":"solid ";return/[sd]/.test(O)&&u.setAttribute("rowlines",O.trim()),d!==""&&(u=new Pt.MathNode("menclose",[u]),u.setAttribute("notation",d.trim())),e.arraystretch&&e.arraystretch<1&&(u=new Pt.MathNode("mstyle",[u]),u.setAttribute("scriptlevel","1")),u},KB=function(e,t){e.envName.indexOf("ed")===-1&&M3(e);var n=[],r=e.envName.indexOf("at")>-1?"alignat":"align",s=e.envName==="split",o=Uf(e.parser,{cols:n,addJot:!0,autoTag:s?void 0:r6(e.envName),emptySingleRow:!0,colSeparationType:r,maxNumCols:s?2:void 0,leqno:e.parser.settings.leqno},"display"),a,l=0,c={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&t[0].type==="ordgroup"){for(var u="",h=0;h<t[0].body.length;h++){var d=si(t[0].body[h],"textord");u+=d.text}a=Number(u),l=a*2}var f=!l;o.body.forEach(function(_){for(var S=1;S<_.length;S+=2){var w=si(_[S],"styling"),C=si(w.body[0],"ordgroup");C.body.unshift(c)}if(f)l<_.length&&(l=_.length);else{var E=_.length/2;if(a<E)throw new Rt("Too many math in a row: "+("expected "+a+", but got "+E),_[0])}});for(var g=0;g<l;++g){var v="r",y=0;g%2===1?v="l":g>0&&f&&(y=1),n[g]={type:"align",align:v,pregap:y,postgap:0}}return o.colSeparationType=f?"align":"alignat",o};eh({type:"array",names:["array","darray"],props:{numArgs:1},handler(i,e){var t=x3(e[0]),n=t?[e[0]]:si(e[0],"ordgroup").body,r=n.map(function(o){var a=Q5(o),l=a.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new Rt("Unknown column alignment: "+l,o)}),s={cols:r,hskipBeforeAndAfter:!0,maxNumCols:r.length};return Uf(i.parser,s,s6(i.envName))},htmlBuilder:th,mathmlBuilder:nh});eh({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(i){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[i.envName.replace("*","")],t="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:t}]};if(i.envName.charAt(i.envName.length-1)==="*"){var r=i.parser;if(r.consumeSpaces(),r.fetch().text==="["){if(r.consume(),r.consumeSpaces(),t=r.fetch().text,"lcr".indexOf(t)===-1)throw new Rt("Expected l or c or r",r.nextToken);r.consume(),r.consumeSpaces(),r.expect("]"),r.consume(),n.cols=[{type:"align",align:t}]}}var s=Uf(i.parser,n,s6(i.envName)),o=Math.max(0,...s.body.map(a=>a.length));return s.cols=new Array(o).fill({type:"align",align:t}),e?{type:"leftright",mode:i.mode,body:[s],left:e[0],right:e[1],rightColor:void 0}:s},htmlBuilder:th,mathmlBuilder:nh});eh({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(i){var e={arraystretch:.5},t=Uf(i.parser,e,"script");return t.colSeparationType="small",t},htmlBuilder:th,mathmlBuilder:nh});eh({type:"array",names:["subarray"],props:{numArgs:1},handler(i,e){var t=x3(e[0]),n=t?[e[0]]:si(e[0],"ordgroup").body,r=n.map(function(o){var a=Q5(o),l=a.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new Rt("Unknown column alignment: "+l,o)});if(r.length>1)throw new Rt("{subarray} can contain only one column");var s={cols:r,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=Uf(i.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new Rt("{subarray} can contain only one column");return s},htmlBuilder:th,mathmlBuilder:nh});eh({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(i){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},t=Uf(i.parser,e,s6(i.envName));return{type:"leftright",mode:i.mode,body:[t],left:i.envName.indexOf("r")>-1?".":"\\{",right:i.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:th,mathmlBuilder:nh});eh({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:KB,htmlBuilder:th,mathmlBuilder:nh});eh({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(i){On.contains(["gather","gather*"],i.envName)&&M3(i);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:r6(i.envName),emptySingleRow:!0,leqno:i.parser.settings.leqno};return Uf(i.parser,e,"display")},htmlBuilder:th,mathmlBuilder:nh});eh({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:KB,htmlBuilder:th,mathmlBuilder:nh});eh({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(i){M3(i);var e={autoTag:r6(i.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:i.parser.settings.leqno};return Uf(i.parser,e,"display")},htmlBuilder:th,mathmlBuilder:nh});eh({type:"array",names:["CD"],props:{numArgs:0},handler(i){return M3(i),oct(i.parser)},htmlBuilder:th,mathmlBuilder:nh});K("\\nonumber","\\gdef\\@eqnsw{0}");K("\\notag","\\nonumber");Xt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(i,e){throw new Rt(i.funcName+" valid only within array environment")}});var vL=XB;Xt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(i,e){var{parser:t,funcName:n}=i,r=e[0];if(r.type!=="ordgroup")throw new Rt("Invalid environment name",r);for(var s="",o=0;o<r.body.length;++o)s+=si(r.body[o],"textord").text;if(n==="\\begin"){if(!vL.hasOwnProperty(s))throw new Rt("No such environment: "+s,r);var a=vL[s],{args:l,optArgs:c}=t.parseArguments("\\begin{"+s+"}",a),u={mode:t.mode,envName:s,parser:t},h=a.handler(u,l,c);t.expect("\\end",!1);var d=t.nextToken,f=si(t.parseFunction(),"environment");if(f.name!==s)throw new Rt("Mismatch: \\begin{"+s+"} matched by \\end{"+f.name+"}",d);return h}return{type:"environment",mode:t.mode,name:s,nameGroup:r}}});var ZB=(i,e)=>{var t=i.font,n=e.withFont(t);return qi(i.body,n)},JB=(i,e)=>{var t=i.font,n=e.withFont(t);return Sr(i.body,n)},_L={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Xt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=Zw(e[0]),s=n;return s in _L&&(s=_L[s]),{type:"font",mode:t.mode,font:s.slice(1),body:r}},htmlBuilder:ZB,mathmlBuilder:JB});Xt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(i,e)=>{var{parser:t}=i,n=e[0],r=On.isCharacterBox(n);return{type:"mclass",mode:t.mode,mclass:w3(n),body:[{type:"font",mode:t.mode,font:"boldsymbol",body:n}],isCharacterBox:r}}});Xt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(i,e)=>{var{parser:t,funcName:n,breakOnTokenText:r}=i,{mode:s}=t,o=t.parseExpression(!0,r),a="math"+n.slice(1);return{type:"font",mode:s,font:a,body:{type:"ordgroup",mode:t.mode,body:o}}},htmlBuilder:ZB,mathmlBuilder:JB});var QB=(i,e)=>{var t=e;return i==="display"?t=t.id>=xn.SCRIPT.id?t.text():xn.DISPLAY:i==="text"&&t.size===xn.DISPLAY.size?t=xn.TEXT:i==="script"?t=xn.SCRIPT:i==="scriptscript"&&(t=xn.SCRIPTSCRIPT),t},o6=(i,e)=>{var t=QB(i.size,e.style),n=t.fracNum(),r=t.fracDen(),s;s=e.havingStyle(n);var o=qi(i.numer,s,e);if(i.continued){var a=8.5/e.fontMetrics().ptPerEm,l=3.5/e.fontMetrics().ptPerEm;o.height=o.height<a?a:o.height,o.depth=o.depth<l?l:o.depth}s=e.havingStyle(r);var c=qi(i.denom,s,e),u,h,d;i.hasBarLine?(i.barSize?(h=es(i.barSize,e),u=He.makeLineSpan("frac-line",e,h)):u=He.makeLineSpan("frac-line",e),h=u.height,d=u.height):(u=null,h=0,d=e.fontMetrics().defaultRuleThickness);var f,g,v;t.size===xn.DISPLAY.size||i.size==="display"?(f=e.fontMetrics().num1,h>0?g=3*d:g=7*d,v=e.fontMetrics().denom1):(h>0?(f=e.fontMetrics().num2,g=d):(f=e.fontMetrics().num3,g=3*d),v=e.fontMetrics().denom2);var y;if(u){var S=e.fontMetrics().axisHeight;f-o.depth-(S+.5*h)<g&&(f+=g-(f-o.depth-(S+.5*h))),S-.5*h-(c.height-v)<g&&(v+=g-(S-.5*h-(c.height-v)));var w=-(S-.5*h);y=He.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:v},{type:"elem",elem:u,shift:w},{type:"elem",elem:o,shift:-f}]},e)}else{var _=f-o.depth-(c.height-v);_<g&&(f+=.5*(g-_),v+=.5*(g-_)),y=He.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:v},{type:"elem",elem:o,shift:-f}]},e)}s=e.havingStyle(t),y.height*=s.sizeMultiplier/e.sizeMultiplier,y.depth*=s.sizeMultiplier/e.sizeMultiplier;var C;t.size===xn.DISPLAY.size?C=e.fontMetrics().delim1:t.size===xn.SCRIPTSCRIPT.size?C=e.havingStyle(xn.SCRIPT).fontMetrics().delim2:C=e.fontMetrics().delim2;var E,k;return i.leftDelim==null?E=r_(e,["mopen"]):E=$h.customSizedDelim(i.leftDelim,C,!0,e.havingStyle(t),i.mode,["mopen"]),i.continued?k=He.makeSpan([]):i.rightDelim==null?k=r_(e,["mclose"]):k=$h.customSizedDelim(i.rightDelim,C,!0,e.havingStyle(t),i.mode,["mclose"]),He.makeSpan(["mord"].concat(s.sizingClasses(e)),[E,He.makeSpan(["mfrac"],[y]),k],e)},a6=(i,e)=>{var t=new Pt.MathNode("mfrac",[Sr(i.numer,e),Sr(i.denom,e)]);if(!i.hasBarLine)t.setAttribute("linethickness","0px");else if(i.barSize){var n=es(i.barSize,e);t.setAttribute("linethickness",Ft(n))}var r=QB(i.size,e.style);if(r.size!==e.style.size){t=new Pt.MathNode("mstyle",[t]);var s=r.size===xn.DISPLAY.size?"true":"false";t.setAttribute("displaystyle",s),t.setAttribute("scriptlevel","0")}if(i.leftDelim!=null||i.rightDelim!=null){var o=[];if(i.leftDelim!=null){var a=new Pt.MathNode("mo",[new Pt.TextNode(i.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),o.push(a)}if(o.push(t),i.rightDelim!=null){var l=new Pt.MathNode("mo",[new Pt.TextNode(i.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),o.push(l)}return Z5(o)}return t};Xt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=e[0],s=e[1],o,a=null,l=null,c="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,a="(",l=")";break;case"\\\\bracefrac":o=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":o=!1,a="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text";break}return{type:"genfrac",mode:t.mode,continued:!1,numer:r,denom:s,hasBarLine:o,leftDelim:a,rightDelim:l,size:c,barSize:null}},htmlBuilder:o6,mathmlBuilder:a6});Xt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=e[0],s=e[1];return{type:"genfrac",mode:t.mode,continued:!0,numer:r,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Xt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(i){var{parser:e,funcName:t,token:n}=i,r;switch(t){case"\\over":r="\\frac";break;case"\\choose":r="\\binom";break;case"\\atop":r="\\\\atopfrac";break;case"\\brace":r="\\\\bracefrac";break;case"\\brack":r="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:r,token:n}}});var bL=["display","text","script","scriptscript"],yL=function(e){var t=null;return e.length>0&&(t=e,t=t==="."?null:t),t};Xt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(i,e){var{parser:t}=i,n=e[4],r=e[5],s=Zw(e[0]),o=s.type==="atom"&&s.family==="open"?yL(s.text):null,a=Zw(e[1]),l=a.type==="atom"&&a.family==="close"?yL(a.text):null,c=si(e[2],"size"),u,h=null;c.isBlank?u=!0:(h=c.value,u=h.number>0);var d="auto",f=e[3];if(f.type==="ordgroup"){if(f.body.length>0){var g=si(f.body[0],"textord");d=bL[Number(g.text)]}}else f=si(f,"textord"),d=bL[Number(f.text)];return{type:"genfrac",mode:t.mode,numer:n,denom:r,continued:!1,hasBarLine:u,barSize:h,leftDelim:o,rightDelim:l,size:d}},htmlBuilder:o6,mathmlBuilder:a6});Xt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(i,e){var{parser:t,funcName:n,token:r}=i;return{type:"infix",mode:t.mode,replaceWith:"\\\\abovefrac",size:si(e[0],"size").value,token:r}}});Xt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=e[0],s=Zat(si(e[1],"infix").size),o=e[2],a=s.number>0;return{type:"genfrac",mode:t.mode,numer:r,denom:o,continued:!1,hasBarLine:a,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:o6,mathmlBuilder:a6});var eV=(i,e)=>{var t=e.style,n,r;i.type==="supsub"?(n=i.sup?qi(i.sup,e.havingStyle(t.sup()),e):qi(i.sub,e.havingStyle(t.sub()),e),r=si(i.base,"horizBrace")):r=si(i,"horizBrace");var s=qi(r.base,e.havingBaseStyle(xn.DISPLAY)),o=td.svgSpan(r,e),a;if(r.isOver?(a=He.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:o}]},e),a.children[0].children[0].children[1].classes.push("svg-align")):(a=He.makeVList({positionType:"bottom",positionData:s.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:s}]},e),a.children[0].children[0].children[0].classes.push("svg-align")),n){var l=He.makeSpan(["mord",r.isOver?"mover":"munder"],[a],e);r.isOver?a=He.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:n}]},e):a=He.makeVList({positionType:"bottom",positionData:l.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:l}]},e)}return He.makeSpan(["mord",r.isOver?"mover":"munder"],[a],e)},xct=(i,e)=>{var t=td.mathMLnode(i.label);return new Pt.MathNode(i.isOver?"mover":"munder",[Sr(i.base,e),t])};Xt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(i,e){var{parser:t,funcName:n}=i;return{type:"horizBrace",mode:t.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:eV,mathmlBuilder:xct});Xt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,n=e[1],r=si(e[0],"url").url;return t.settings.isTrusted({command:"\\href",url:r})?{type:"href",mode:t.mode,href:r,body:Ls(n)}:t.formatUnsupportedCmd("\\href")},htmlBuilder:(i,e)=>{var t=po(i.body,e,!1);return He.makeAnchor(i.href,[],t,e)},mathmlBuilder:(i,e)=>{var t=xf(i.body,e);return t instanceof uc||(t=new uc("mrow",[t])),t.setAttribute("href",i.href),t}});Xt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,n=si(e[0],"url").url;if(!t.settings.isTrusted({command:"\\url",url:n}))return t.formatUnsupportedCmd("\\url");for(var r=[],s=0;s<n.length;s++){var o=n[s];o==="~"&&(o="\\textasciitilde"),r.push({type:"textord",mode:"text",text:o})}var a={type:"text",mode:t.mode,font:"\\texttt",body:r};return{type:"href",mode:t.mode,href:n,body:Ls(a)}}});Xt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(i,e){var{parser:t}=i;return{type:"hbox",mode:t.mode,body:Ls(e[0])}},htmlBuilder(i,e){var t=po(i.body,e,!1);return He.makeFragment(t)},mathmlBuilder(i,e){return new Pt.MathNode("mrow",hl(i.body,e))}});Xt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(i,e)=>{var{parser:t,funcName:n,token:r}=i,s=si(e[0],"raw").string,o=e[1];t.settings.strict&&t.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var a,l={};switch(n){case"\\htmlClass":l.class=s,a={command:"\\htmlClass",class:s};break;case"\\htmlId":l.id=s,a={command:"\\htmlId",id:s};break;case"\\htmlStyle":l.style=s,a={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var c=s.split(","),u=0;u<c.length;u++){var h=c[u].split("=");if(h.length!==2)throw new Rt("Error parsing key-value for \\htmlData");l["data-"+h[0].trim()]=h[1].trim()}a={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return t.settings.isTrusted(a)?{type:"html",mode:t.mode,attributes:l,body:Ls(o)}:t.formatUnsupportedCmd(n)},htmlBuilder:(i,e)=>{var t=po(i.body,e,!1),n=["enclosing"];i.attributes.class&&n.push(...i.attributes.class.trim().split(/\s+/));var r=He.makeSpan(n,t,e);for(var s in i.attributes)s!=="class"&&i.attributes.hasOwnProperty(s)&&r.setAttribute(s,i.attributes[s]);return r},mathmlBuilder:(i,e)=>xf(i.body,e)});Xt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(i,e)=>{var{parser:t}=i;return{type:"htmlmathml",mode:t.mode,html:Ls(e[0]),mathml:Ls(e[1])}},htmlBuilder:(i,e)=>{var t=po(i.html,e,!1);return He.makeFragment(t)},mathmlBuilder:(i,e)=>xf(i.mathml,e)});var fC=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new Rt("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(t[1]+t[2]),unit:t[3]};if(!bB(n))throw new Rt("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};Xt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(i,e,t)=>{var{parser:n}=i,r={number:0,unit:"em"},s={number:.9,unit:"em"},o={number:0,unit:"em"},a="";if(t[0])for(var l=si(t[0],"raw").string,c=l.split(","),u=0;u<c.length;u++){var h=c[u].split("=");if(h.length===2){var d=h[1].trim();switch(h[0].trim()){case"alt":a=d;break;case"width":r=fC(d);break;case"height":s=fC(d);break;case"totalheight":o=fC(d);break;default:throw new Rt("Invalid key: '"+h[0]+"' in \\includegraphics.")}}}var f=si(e[0],"url").url;return a===""&&(a=f,a=a.replace(/^.*[\\/]/,""),a=a.substring(0,a.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:f})?{type:"includegraphics",mode:n.mode,alt:a,width:r,height:s,totalheight:o,src:f}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(i,e)=>{var t=es(i.height,e),n=0;i.totalheight.number>0&&(n=es(i.totalheight,e)-t);var r=0;i.width.number>0&&(r=es(i.width,e));var s={height:Ft(t+n)};r>0&&(s.width=Ft(r)),n>0&&(s.verticalAlign=Ft(-n));var o=new xlt(i.src,i.alt,s);return o.height=t,o.depth=n,o},mathmlBuilder:(i,e)=>{var t=new Pt.MathNode("mglyph",[]);t.setAttribute("alt",i.alt);var n=es(i.height,e),r=0;if(i.totalheight.number>0&&(r=es(i.totalheight,e)-n,t.setAttribute("valign",Ft(-r))),t.setAttribute("height",Ft(n+r)),i.width.number>0){var s=es(i.width,e);t.setAttribute("width",Ft(s))}return t.setAttribute("src",i.src),t}});Xt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(i,e){var{parser:t,funcName:n}=i,r=si(e[0],"size");if(t.settings.strict){var s=n[1]==="m",o=r.value.unit==="mu";s?(o||t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+r.value.unit+" units")),t.mode!=="math"&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):o&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:t.mode,dimension:r.value}},htmlBuilder(i,e){return He.makeGlue(i.dimension,e)},mathmlBuilder(i,e){var t=es(i.dimension,e);return new Pt.SpaceNode(t)}});Xt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=e[0];return{type:"lap",mode:t.mode,alignment:n.slice(5),body:r}},htmlBuilder:(i,e)=>{var t;i.alignment==="clap"?(t=He.makeSpan([],[qi(i.body,e)]),t=He.makeSpan(["inner"],[t],e)):t=He.makeSpan(["inner"],[qi(i.body,e)]);var n=He.makeSpan(["fix"],[]),r=He.makeSpan([i.alignment],[t,n],e),s=He.makeSpan(["strut"]);return s.style.height=Ft(r.height+r.depth),r.depth&&(s.style.verticalAlign=Ft(-r.depth)),r.children.unshift(s),r=He.makeSpan(["thinbox"],[r],e),He.makeSpan(["mord","vbox"],[r],e)},mathmlBuilder:(i,e)=>{var t=new Pt.MathNode("mpadded",[Sr(i.body,e)]);if(i.alignment!=="rlap"){var n=i.alignment==="llap"?"-1":"-0.5";t.setAttribute("lspace",n+"width")}return t.setAttribute("width","0px"),t}});Xt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(i,e){var{funcName:t,parser:n}=i,r=n.mode;n.switchMode("math");var s=t==="\\("?"\\)":"$",o=n.parseExpression(!1,s);return n.expect(s),n.switchMode(r),{type:"styling",mode:n.mode,style:"text",body:o}}});Xt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(i,e){throw new Rt("Mismatched "+i.funcName)}});var xL=(i,e)=>{switch(e.style.size){case xn.DISPLAY.size:return i.display;case xn.TEXT.size:return i.text;case xn.SCRIPT.size:return i.script;case xn.SCRIPTSCRIPT.size:return i.scriptscript;default:return i.text}};Xt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(i,e)=>{var{parser:t}=i;return{type:"mathchoice",mode:t.mode,display:Ls(e[0]),text:Ls(e[1]),script:Ls(e[2]),scriptscript:Ls(e[3])}},htmlBuilder:(i,e)=>{var t=xL(i,e),n=po(t,e,!1);return He.makeFragment(n)},mathmlBuilder:(i,e)=>{var t=xL(i,e);return xf(t,e)}});var tV=(i,e,t,n,r,s,o)=>{i=He.makeSpan([],[i]);var a=t&&On.isCharacterBox(t),l,c;if(e){var u=qi(e,n.havingStyle(r.sup()),n);c={elem:u,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-u.depth)}}if(t){var h=qi(t,n.havingStyle(r.sub()),n);l={elem:h,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-h.height)}}var d;if(c&&l){var f=n.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+i.depth+o;d=He.makeVList({positionType:"bottom",positionData:f,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Ft(-s)},{type:"kern",size:l.kern},{type:"elem",elem:i},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:Ft(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(l){var g=i.height-o;d=He.makeVList({positionType:"top",positionData:g,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Ft(-s)},{type:"kern",size:l.kern},{type:"elem",elem:i}]},n)}else if(c){var v=i.depth+o;d=He.makeVList({positionType:"bottom",positionData:v,children:[{type:"elem",elem:i},{type:"kern",size:c.kern},{type:"elem",elem:c.elem,marginLeft:Ft(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return i;var y=[d];if(l&&s!==0&&!a){var _=He.makeSpan(["mspace"],[],n);_.style.marginRight=Ft(s),y.unshift(_)}return He.makeSpan(["mop","op-limits"],y,n)},nV=["\\smallint"],Yg=(i,e)=>{var t,n,r=!1,s;i.type==="supsub"?(t=i.sup,n=i.sub,s=si(i.base,"op"),r=!0):s=si(i,"op");var o=e.style,a=!1;o.size===xn.DISPLAY.size&&s.symbol&&!On.contains(nV,s.name)&&(a=!0);var l;if(s.symbol){var c=a?"Size2-Regular":"Size1-Regular",u="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(u=s.name.slice(1),s.name=u==="oiint"?"\\iint":"\\iiint"),l=He.makeSymbol(s.name,c,"math",e,["mop","op-symbol",a?"large-op":"small-op"]),u.length>0){var h=l.italic,d=He.staticSvg(u+"Size"+(a?"2":"1"),e);l=He.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:d,shift:a?.08:0}]},e),s.name="\\"+u,l.classes.unshift("mop"),l.italic=h}}else if(s.body){var f=po(s.body,e,!0);f.length===1&&f[0]instanceof yc?(l=f[0],l.classes[0]="mop"):l=He.makeSpan(["mop"],f,e)}else{for(var g=[],v=1;v<s.name.length;v++)g.push(He.mathsym(s.name[v],s.mode,e));l=He.makeSpan(["mop"],g,e)}var y=0,_=0;return(l instanceof yc||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(y=(l.height-l.depth)/2-e.fontMetrics().axisHeight,_=l.italic),r?tV(l,t,n,e,o,_,y):(y&&(l.style.position="relative",l.style.top=Ft(y)),l)},Rb=(i,e)=>{var t;if(i.symbol)t=new uc("mo",[xc(i.name,i.mode)]),On.contains(nV,i.name)&&t.setAttribute("largeop","false");else if(i.body)t=new uc("mo",hl(i.body,e));else{t=new uc("mi",[new w1(i.name.slice(1))]);var n=new uc("mo",[xc("","text")]);i.parentIsSupSub?t=new uc("mrow",[t,n]):t=kB([t,n])}return t},wct={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};Xt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=n;return r.length===1&&(r=wct[r]),{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:Yg,mathmlBuilder:Rb});Xt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(i,e)=>{var{parser:t}=i,n=e[0];return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Ls(n)}},htmlBuilder:Yg,mathmlBuilder:Rb});var Sct={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};Xt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(i){var{parser:e,funcName:t}=i;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:Yg,mathmlBuilder:Rb});Xt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(i){var{parser:e,funcName:t}=i;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:Yg,mathmlBuilder:Rb});Xt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(i){var{parser:e,funcName:t}=i,n=t;return n.length===1&&(n=Sct[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Yg,mathmlBuilder:Rb});var iV=(i,e)=>{var t,n,r=!1,s;i.type==="supsub"?(t=i.sup,n=i.sub,s=si(i.base,"operatorname"),r=!0):s=si(i,"operatorname");var o;if(s.body.length>0){for(var a=s.body.map(h=>{var d=h.text;return typeof d=="string"?{type:"textord",mode:h.mode,text:d}:h}),l=po(a,e.withFont("mathrm"),!0),c=0;c<l.length;c++){var u=l[c];u instanceof yc&&(u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=He.makeSpan(["mop"],l,e)}else o=He.makeSpan(["mop"],[],e);return r?tV(o,t,n,e,e.style,0,0):o},Mct=(i,e)=>{for(var t=hl(i.body,e.withFont("mathrm")),n=!0,r=0;r<t.length;r++){var s=t[r];if(!(s instanceof Pt.SpaceNode))if(s instanceof Pt.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=s.children[0];s.children.length===1&&o instanceof Pt.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var a=t.map(u=>u.toText()).join("");t=[new Pt.TextNode(a)]}var l=new Pt.MathNode("mi",t);l.setAttribute("mathvariant","normal");var c=new Pt.MathNode("mo",[xc("","text")]);return i.parentIsSupSub?new Pt.MathNode("mrow",[l,c]):Pt.newDocumentFragment([l,c])};Xt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(i,e)=>{var{parser:t,funcName:n}=i,r=e[0];return{type:"operatorname",mode:t.mode,body:Ls(r),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:iV,mathmlBuilder:Mct});K("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");C0({type:"ordgroup",htmlBuilder(i,e){return i.semisimple?He.makeFragment(po(i.body,e,!1)):He.makeSpan(["mord"],po(i.body,e,!0),e)},mathmlBuilder(i,e){return xf(i.body,e,!0)}});Xt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(i,e){var{parser:t}=i,n=e[0];return{type:"overline",mode:t.mode,body:n}},htmlBuilder(i,e){var t=qi(i.body,e.havingCrampedStyle()),n=He.makeLineSpan("overline-line",e),r=e.fontMetrics().defaultRuleThickness,s=He.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t},{type:"kern",size:3*r},{type:"elem",elem:n},{type:"kern",size:r}]},e);return He.makeSpan(["mord","overline"],[s],e)},mathmlBuilder(i,e){var t=new Pt.MathNode("mo",[new Pt.TextNode("")]);t.setAttribute("stretchy","true");var n=new Pt.MathNode("mover",[Sr(i.body,e),t]);return n.setAttribute("accent","true"),n}});Xt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,n=e[0];return{type:"phantom",mode:t.mode,body:Ls(n)}},htmlBuilder:(i,e)=>{var t=po(i.body,e.withPhantom(),!1);return He.makeFragment(t)},mathmlBuilder:(i,e)=>{var t=hl(i.body,e);return new Pt.MathNode("mphantom",t)}});Xt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,n=e[0];return{type:"hphantom",mode:t.mode,body:n}},htmlBuilder:(i,e)=>{var t=He.makeSpan([],[qi(i.body,e.withPhantom())]);if(t.height=0,t.depth=0,t.children)for(var n=0;n<t.children.length;n++)t.children[n].height=0,t.children[n].depth=0;return t=He.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e),He.makeSpan(["mord"],[t],e)},mathmlBuilder:(i,e)=>{var t=hl(Ls(i.body),e),n=new Pt.MathNode("mphantom",t),r=new Pt.MathNode("mpadded",[n]);return r.setAttribute("height","0px"),r.setAttribute("depth","0px"),r}});Xt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(i,e)=>{var{parser:t}=i,n=e[0];return{type:"vphantom",mode:t.mode,body:n}},htmlBuilder:(i,e)=>{var t=He.makeSpan(["inner"],[qi(i.body,e.withPhantom())]),n=He.makeSpan(["fix"],[]);return He.makeSpan(["mord","rlap"],[t,n],e)},mathmlBuilder:(i,e)=>{var t=hl(Ls(i.body),e),n=new Pt.MathNode("mphantom",t),r=new Pt.MathNode("mpadded",[n]);return r.setAttribute("width","0px"),r}});Xt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(i,e){var{parser:t}=i,n=si(e[0],"size").value,r=e[1];return{type:"raisebox",mode:t.mode,dy:n,body:r}},htmlBuilder(i,e){var t=qi(i.body,e),n=es(i.dy,e);return He.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(i,e){var t=new Pt.MathNode("mpadded",[Sr(i.body,e)]),n=i.dy.number+i.dy.unit;return t.setAttribute("voffset",n),t}});Xt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(i){var{parser:e}=i;return{type:"internal",mode:e.mode}}});Xt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler(i,e,t){var{parser:n}=i,r=t[0],s=si(e[0],"size"),o=si(e[1],"size");return{type:"rule",mode:n.mode,shift:r&&si(r,"size").value,width:s.value,height:o.value}},htmlBuilder(i,e){var t=He.makeSpan(["mord","rule"],[],e),n=es(i.width,e),r=es(i.height,e),s=i.shift?es(i.shift,e):0;return t.style.borderRightWidth=Ft(n),t.style.borderTopWidth=Ft(r),t.style.bottom=Ft(s),t.width=n,t.height=r+s,t.depth=-s,t.maxFontSize=r*1.125*e.sizeMultiplier,t},mathmlBuilder(i,e){var t=es(i.width,e),n=es(i.height,e),r=i.shift?es(i.shift,e):0,s=e.color&&e.getColor()||"black",o=new Pt.MathNode("mspace");o.setAttribute("mathbackground",s),o.setAttribute("width",Ft(t)),o.setAttribute("height",Ft(n));var a=new Pt.MathNode("mpadded",[o]);return r>=0?a.setAttribute("height",Ft(r)):(a.setAttribute("height",Ft(r)),a.setAttribute("depth",Ft(-r))),a.setAttribute("voffset",Ft(r)),a}});function rV(i,e,t){for(var n=po(i,e,!1),r=e.sizeMultiplier/t.sizeMultiplier,s=0;s<n.length;s++){var o=n[s].classes.indexOf("sizing");o<0?Array.prototype.push.apply(n[s].classes,e.sizingClasses(t)):n[s].classes[o+1]==="reset-size"+e.size&&(n[s].classes[o+1]="reset-size"+t.size),n[s].height*=r,n[s].depth*=r}return He.makeFragment(n)}var wL=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Cct=(i,e)=>{var t=e.havingSize(i.size);return rV(i.body,t,e)};Xt({type:"sizing",names:wL,props:{numArgs:0,allowedInText:!0},handler:(i,e)=>{var{breakOnTokenText:t,funcName:n,parser:r}=i,s=r.parseExpression(!1,t);return{type:"sizing",mode:r.mode,size:wL.indexOf(n)+1,body:s}},htmlBuilder:Cct,mathmlBuilder:(i,e)=>{var t=e.havingSize(i.size),n=hl(i.body,t),r=new Pt.MathNode("mstyle",n);return r.setAttribute("mathsize",Ft(t.sizeMultiplier)),r}});Xt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(i,e,t)=>{var{parser:n}=i,r=!1,s=!1,o=t[0]&&si(t[0],"ordgroup");if(o)for(var a="",l=0;l<o.body.length;++l){var c=o.body[l];if(a=c.text,a==="t")r=!0;else if(a==="b")s=!0;else{r=!1,s=!1;break}}else r=!0,s=!0;var u=e[0];return{type:"smash",mode:n.mode,body:u,smashHeight:r,smashDepth:s}},htmlBuilder:(i,e)=>{var t=He.makeSpan([],[qi(i.body,e)]);if(!i.smashHeight&&!i.smashDepth)return t;if(i.smashHeight&&(t.height=0,t.children))for(var n=0;n<t.children.length;n++)t.children[n].height=0;if(i.smashDepth&&(t.depth=0,t.children))for(var r=0;r<t.children.length;r++)t.children[r].depth=0;var s=He.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e);return He.makeSpan(["mord"],[s],e)},mathmlBuilder:(i,e)=>{var t=new Pt.MathNode("mpadded",[Sr(i.body,e)]);return i.smashHeight&&t.setAttribute("height","0px"),i.smashDepth&&t.setAttribute("depth","0px"),t}});Xt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(i,e,t){var{parser:n}=i,r=t[0],s=e[0];return{type:"sqrt",mode:n.mode,body:s,index:r}},htmlBuilder(i,e){var t=qi(i.body,e.havingCrampedStyle());t.height===0&&(t.height=e.fontMetrics().xHeight),t=He.wrapFragment(t,e);var n=e.fontMetrics(),r=n.defaultRuleThickness,s=r;e.style.id<xn.TEXT.id&&(s=e.fontMetrics().xHeight);var o=r+s/4,a=t.height+t.depth+o+r,{span:l,ruleWidth:c,advanceWidth:u}=$h.sqrtImage(a,e),h=l.height-c;h>t.height+t.depth+o&&(o=(o+h-t.height-t.depth)/2);var d=l.height-t.height-o-c;t.style.paddingLeft=Ft(u);var f=He.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t,wrapperClasses:["svg-align"]},{type:"kern",size:-(t.height+d)},{type:"elem",elem:l},{type:"kern",size:c}]},e);if(i.index){var g=e.havingStyle(xn.SCRIPTSCRIPT),v=qi(i.index,g,e),y=.6*(f.height-f.depth),_=He.makeVList({positionType:"shift",positionData:-y,children:[{type:"elem",elem:v}]},e),S=He.makeSpan(["root"],[_]);return He.makeSpan(["mord","sqrt"],[S,f],e)}else return He.makeSpan(["mord","sqrt"],[f],e)},mathmlBuilder(i,e){var{body:t,index:n}=i;return n?new Pt.MathNode("mroot",[Sr(t,e),Sr(n,e)]):new Pt.MathNode("msqrt",[Sr(t,e)])}});var SL={display:xn.DISPLAY,text:xn.TEXT,script:xn.SCRIPT,scriptscript:xn.SCRIPTSCRIPT};Xt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(i,e){var{breakOnTokenText:t,funcName:n,parser:r}=i,s=r.parseExpression(!0,t),o=n.slice(1,n.length-5);return{type:"styling",mode:r.mode,style:o,body:s}},htmlBuilder(i,e){var t=SL[i.style],n=e.havingStyle(t).withFont("");return rV(i.body,n,e)},mathmlBuilder(i,e){var t=SL[i.style],n=e.havingStyle(t),r=hl(i.body,n),s=new Pt.MathNode("mstyle",r),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},a=o[i.style];return s.setAttribute("scriptlevel",a[0]),s.setAttribute("displaystyle",a[1]),s}});var Ect=function(e,t){var n=e.base;if(n)if(n.type==="op"){var r=n.limits&&(t.style.size===xn.DISPLAY.size||n.alwaysHandleSupSub);return r?Yg:null}else if(n.type==="operatorname"){var s=n.alwaysHandleSupSub&&(t.style.size===xn.DISPLAY.size||n.limits);return s?iV:null}else{if(n.type==="accent")return On.isCharacterBox(n.base)?e6:null;if(n.type==="horizBrace"){var o=!e.sub;return o===n.isOver?eV:null}else return null}else return null};C0({type:"supsub",htmlBuilder(i,e){var t=Ect(i,e);if(t)return t(i,e);var{base:n,sup:r,sub:s}=i,o=qi(n,e),a,l,c=e.fontMetrics(),u=0,h=0,d=n&&On.isCharacterBox(n);if(r){var f=e.havingStyle(e.style.sup());a=qi(r,f,e),d||(u=o.height-f.fontMetrics().supDrop*f.sizeMultiplier/e.sizeMultiplier)}if(s){var g=e.havingStyle(e.style.sub());l=qi(s,g,e),d||(h=o.depth+g.fontMetrics().subDrop*g.sizeMultiplier/e.sizeMultiplier)}var v;e.style===xn.DISPLAY?v=c.sup1:e.style.cramped?v=c.sup3:v=c.sup2;var y=e.sizeMultiplier,_=Ft(.5/c.ptPerEm/y),S=null;if(l){var w=i.base&&i.base.type==="op"&&i.base.name&&(i.base.name==="\\oiint"||i.base.name==="\\oiiint");(o instanceof yc||w)&&(S=Ft(-o.italic))}var C;if(a&&l){u=Math.max(u,v,a.depth+.25*c.xHeight),h=Math.max(h,c.sub2);var E=c.defaultRuleThickness,k=4*E;if(u-a.depth-(l.height-h)<k){h=k-(u-a.depth)+l.height;var O=.8*c.xHeight-(u-a.depth);O>0&&(u+=O,h-=O)}var R=[{type:"elem",elem:l,shift:h,marginRight:_,marginLeft:S},{type:"elem",elem:a,shift:-u,marginRight:_}];C=He.makeVList({positionType:"individualShift",children:R},e)}else if(l){h=Math.max(h,c.sub1,l.height-.8*c.xHeight);var A=[{type:"elem",elem:l,marginLeft:S,marginRight:_}];C=He.makeVList({positionType:"shift",positionData:h,children:A},e)}else if(a)u=Math.max(u,v,a.depth+.25*c.xHeight),C=He.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:a,marginRight:_}]},e);else throw new Error("supsub must have either sup or sub.");var D=uT(o,"right")||"mord";return He.makeSpan([D],[o,He.makeSpan(["msupsub"],[C])],e)},mathmlBuilder(i,e){var t=!1,n,r;i.base&&i.base.type==="horizBrace"&&(r=!!i.sup,r===i.base.isOver&&(t=!0,n=i.base.isOver)),i.base&&(i.base.type==="op"||i.base.type==="operatorname")&&(i.base.parentIsSupSub=!0);var s=[Sr(i.base,e)];i.sub&&s.push(Sr(i.sub,e)),i.sup&&s.push(Sr(i.sup,e));var o;if(t)o=n?"mover":"munder";else if(i.sub)if(i.sup){var c=i.base;c&&c.type==="op"&&c.limits&&e.style===xn.DISPLAY||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(e.style===xn.DISPLAY||c.limits)?o="munderover":o="msubsup"}else{var l=i.base;l&&l.type==="op"&&l.limits&&(e.style===xn.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===xn.DISPLAY)?o="munder":o="msub"}else{var a=i.base;a&&a.type==="op"&&a.limits&&(e.style===xn.DISPLAY||a.alwaysHandleSupSub)||a&&a.type==="operatorname"&&a.alwaysHandleSupSub&&(a.limits||e.style===xn.DISPLAY)?o="mover":o="msup"}return new Pt.MathNode(o,s)}});C0({type:"atom",htmlBuilder(i,e){return He.mathsym(i.text,i.mode,e,["m"+i.family])},mathmlBuilder(i,e){var t=new Pt.MathNode("mo",[xc(i.text,i.mode)]);if(i.family==="bin"){var n=J5(i,e);n==="bold-italic"&&t.setAttribute("mathvariant",n)}else i.family==="punct"?t.setAttribute("separator","true"):(i.family==="open"||i.family==="close")&&t.setAttribute("stretchy","false");return t}});var sV={mi:"italic",mn:"normal",mtext:"normal"};C0({type:"mathord",htmlBuilder(i,e){return He.makeOrd(i,e,"mathord")},mathmlBuilder(i,e){var t=new Pt.MathNode("mi",[xc(i.text,i.mode,e)]),n=J5(i,e)||"italic";return n!==sV[t.type]&&t.setAttribute("mathvariant",n),t}});C0({type:"textord",htmlBuilder(i,e){return He.makeOrd(i,e,"textord")},mathmlBuilder(i,e){var t=xc(i.text,i.mode,e),n=J5(i,e)||"normal",r;return i.mode==="text"?r=new Pt.MathNode("mtext",[t]):/[0-9]/.test(i.text)?r=new Pt.MathNode("mn",[t]):i.text==="\\prime"?r=new Pt.MathNode("mo",[t]):r=new Pt.MathNode("mi",[t]),n!==sV[r.type]&&r.setAttribute("mathvariant",n),r}});var pC={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},mC={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};C0({type:"spacing",htmlBuilder(i,e){if(mC.hasOwnProperty(i.text)){var t=mC[i.text].className||"";if(i.mode==="text"){var n=He.makeOrd(i,e,"textord");return n.classes.push(t),n}else return He.makeSpan(["mspace",t],[He.mathsym(i.text,i.mode,e)],e)}else{if(pC.hasOwnProperty(i.text))return He.makeSpan(["mspace",pC[i.text]],[],e);throw new Rt('Unknown type of space "'+i.text+'"')}},mathmlBuilder(i,e){var t;if(mC.hasOwnProperty(i.text))t=new Pt.MathNode("mtext",[new Pt.TextNode("")]);else{if(pC.hasOwnProperty(i.text))return new Pt.MathNode("mspace");throw new Rt('Unknown type of space "'+i.text+'"')}return t}});var ML=()=>{var i=new Pt.MathNode("mtd",[]);return i.setAttribute("width","50%"),i};C0({type:"tag",mathmlBuilder(i,e){var t=new Pt.MathNode("mtable",[new Pt.MathNode("mtr",[ML(),new Pt.MathNode("mtd",[xf(i.body,e)]),ML(),new Pt.MathNode("mtd",[xf(i.tag,e)])])]);return t.setAttribute("width","100%"),t}});var CL={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},EL={"\\textbf":"textbf","\\textmd":"textmd"},Tct={"\\textit":"textit","\\textup":"textup"},TL=(i,e)=>{var t=i.font;return t?CL[t]?e.withTextFontFamily(CL[t]):EL[t]?e.withTextFontWeight(EL[t]):e.withTextFontShape(Tct[t]):e};Xt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(i,e){var{parser:t,funcName:n}=i,r=e[0];return{type:"text",mode:t.mode,body:Ls(r),font:n}},htmlBuilder(i,e){var t=TL(i,e),n=po(i.body,t,!0);return He.makeSpan(["mord","text"],n,t)},mathmlBuilder(i,e){var t=TL(i,e);return xf(i.body,t)}});Xt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(i,e){var{parser:t}=i;return{type:"underline",mode:t.mode,body:e[0]}},htmlBuilder(i,e){var t=qi(i.body,e),n=He.makeLineSpan("underline-line",e),r=e.fontMetrics().defaultRuleThickness,s=He.makeVList({positionType:"top",positionData:t.height,children:[{type:"kern",size:r},{type:"elem",elem:n},{type:"kern",size:3*r},{type:"elem",elem:t}]},e);return He.makeSpan(["mord","underline"],[s],e)},mathmlBuilder(i,e){var t=new Pt.MathNode("mo",[new Pt.TextNode("")]);t.setAttribute("stretchy","true");var n=new Pt.MathNode("munder",[Sr(i.body,e),t]);return n.setAttribute("accentunder","true"),n}});Xt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(i,e){var{parser:t}=i;return{type:"vcenter",mode:t.mode,body:e[0]}},htmlBuilder(i,e){var t=qi(i.body,e),n=e.fontMetrics().axisHeight,r=.5*(t.height-n-(t.depth+n));return He.makeVList({positionType:"shift",positionData:r,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(i,e){return new Pt.MathNode("mpadded",[Sr(i.body,e)],["vcenter"])}});Xt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(i,e,t){throw new Rt("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(i,e){for(var t=AL(i),n=[],r=e.havingStyle(e.style.text()),s=0;s<t.length;s++){var o=t[s];o==="~"&&(o="\\textasciitilde"),n.push(He.makeSymbol(o,"Typewriter-Regular",i.mode,r,["mord","texttt"]))}return He.makeSpan(["mord","text"].concat(r.sizingClasses(e)),He.tryCombineChars(n),r)},mathmlBuilder(i,e){var t=new Pt.TextNode(AL(i)),n=new Pt.MathNode("mtext",[t]);return n.setAttribute("mathvariant","monospace"),n}});var AL=i=>i.body.replace(/ /g,i.star?"":""),$d=AB,oV=`[ \r
	]`,Act="\\\\[a-zA-Z@]+",Pct="\\\\[^\uD800-\uDFFF]",kct="("+Act+")"+oV+"*",Rct=`\\\\(
|[ \r	]+
?)[ \r	]*`,pT="[-]",Oct=new RegExp(pT+"+$"),Lct="("+oV+"+)|"+(Rct+"|")+"([!-\\[\\]---]"+(pT+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(pT+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+kct)+("|"+Pct+")");class PL{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(Lct,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new Bu("EOF",new kl(this,t,t));var n=this.tokenRegex.exec(e);if(n===null||n.index!==t)throw new Rt("Unexpected character: '"+e[t]+"'",new Bu(e[t],new kl(this,t,t+1)));var r=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[r]===14){var s=e.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new Bu(r,new kl(this,t,this.tokenRegex.lastIndex))}}class Dct{constructor(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new Rt("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(e[t]==null?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,n){if(n===void 0&&(n=!1),n){for(var r=0;r<this.undefStack.length;r++)delete this.undefStack[r][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(e)&&(s[e]=this.current[e])}t==null?delete this.current[e]:this.current[e]=t}}var zct=YB;K("\\noexpand",function(i){var e=i.popToken();return i.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});K("\\expandafter",function(i){var e=i.popToken();return i.expandOnce(!0),{tokens:[e],numArgs:0}});K("\\@firstoftwo",function(i){var e=i.consumeArgs(2);return{tokens:e[0],numArgs:0}});K("\\@secondoftwo",function(i){var e=i.consumeArgs(2);return{tokens:e[1],numArgs:0}});K("\\@ifnextchar",function(i){var e=i.consumeArgs(3);i.consumeSpaces();var t=i.future();return e[0].length===1&&e[0][0].text===t.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});K("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");K("\\TextOrMath",function(i){var e=i.consumeArgs(2);return i.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var kL={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};K("\\char",function(i){var e=i.popToken(),t,n="";if(e.text==="'")t=8,e=i.popToken();else if(e.text==='"')t=16,e=i.popToken();else if(e.text==="`")if(e=i.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new Rt("\\char` missing argument");n=e.text.charCodeAt(0)}else t=10;if(t){if(n=kL[e.text],n==null||n>=t)throw new Rt("Invalid base-"+t+" digit "+e.text);for(var r;(r=kL[i.future().text])!=null&&r<t;)n*=t,n+=r,i.popToken()}return"\\@char{"+n+"}"});var l6=(i,e,t)=>{var n=i.consumeArg().tokens;if(n.length!==1)throw new Rt("\\newcommand's first argument must be a macro name");var r=n[0].text,s=i.isDefined(r);if(s&&!e)throw new Rt("\\newcommand{"+r+"} attempting to redefine "+(r+"; use \\renewcommand"));if(!s&&!t)throw new Rt("\\renewcommand{"+r+"} when command "+r+" does not yet exist; use \\newcommand");var o=0;if(n=i.consumeArg().tokens,n.length===1&&n[0].text==="["){for(var a="",l=i.expandNextToken();l.text!=="]"&&l.text!=="EOF";)a+=l.text,l=i.expandNextToken();if(!a.match(/^\s*[0-9]+\s*$/))throw new Rt("Invalid number of arguments: "+a);o=parseInt(a),n=i.consumeArg().tokens}return i.macros.set(r,{tokens:n,numArgs:o}),""};K("\\newcommand",i=>l6(i,!1,!0));K("\\renewcommand",i=>l6(i,!0,!1));K("\\providecommand",i=>l6(i,!0,!0));K("\\message",i=>{var e=i.consumeArgs(1)[0];return console.log(e.reverse().map(t=>t.text).join("")),""});K("\\errmessage",i=>{var e=i.consumeArgs(1)[0];return console.error(e.reverse().map(t=>t.text).join("")),""});K("\\show",i=>{var e=i.popToken(),t=e.text;return console.log(e,i.macros.get(t),$d[t],Tr.math[t],Tr.text[t]),""});K("\\bgroup","{");K("\\egroup","}");K("~","\\nobreakspace");K("\\lq","`");K("\\rq","'");K("\\aa","\\r a");K("\\AA","\\r A");K("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");K("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");K("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");K("","\\mathscr{B}");K("","\\mathscr{E}");K("","\\mathscr{F}");K("","\\mathscr{H}");K("","\\mathscr{I}");K("","\\mathscr{L}");K("","\\mathscr{M}");K("","\\mathscr{R}");K("","\\mathfrak{C}");K("","\\mathfrak{H}");K("","\\mathfrak{Z}");K("\\Bbbk","\\Bbb{k}");K("","\\cdotp");K("\\llap","\\mathllap{\\textrm{#1}}");K("\\rlap","\\mathrlap{\\textrm{#1}}");K("\\clap","\\mathclap{\\textrm{#1}}");K("\\mathstrut","\\vphantom{(}");K("\\underbar","\\underline{\\text{#1}}");K("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');K("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");K("\\ne","\\neq");K("","\\neq");K("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");K("","\\notin");K("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");K("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");K("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");K("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");K("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");K("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");K("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");K("","\\perp");K("","\\mathclose{!\\mkern-0.8mu!}");K("","\\notni");K("","\\ulcorner");K("","\\urcorner");K("","\\llcorner");K("","\\lrcorner");K("","\\copyright");K("","\\textregistered");K("","\\textregistered");K("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');K("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');K("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');K("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');K("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}");K("","\\vdots");K("\\varGamma","\\mathit{\\Gamma}");K("\\varDelta","\\mathit{\\Delta}");K("\\varTheta","\\mathit{\\Theta}");K("\\varLambda","\\mathit{\\Lambda}");K("\\varXi","\\mathit{\\Xi}");K("\\varPi","\\mathit{\\Pi}");K("\\varSigma","\\mathit{\\Sigma}");K("\\varUpsilon","\\mathit{\\Upsilon}");K("\\varPhi","\\mathit{\\Phi}");K("\\varPsi","\\mathit{\\Psi}");K("\\varOmega","\\mathit{\\Omega}");K("\\substack","\\begin{subarray}{c}#1\\end{subarray}");K("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");K("\\boxed","\\fbox{$\\displaystyle{#1}$}");K("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");K("\\implies","\\DOTSB\\;\\Longrightarrow\\;");K("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var RL={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};K("\\dots",function(i){var e="\\dotso",t=i.expandAfterFuture().text;return t in RL?e=RL[t]:(t.slice(0,4)==="\\not"||t in Tr.math&&On.contains(["bin","rel"],Tr.math[t].group))&&(e="\\dotsb"),e});var c6={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};K("\\dotso",function(i){var e=i.future().text;return e in c6?"\\ldots\\,":"\\ldots"});K("\\dotsc",function(i){var e=i.future().text;return e in c6&&e!==","?"\\ldots\\,":"\\ldots"});K("\\cdots",function(i){var e=i.future().text;return e in c6?"\\@cdots\\,":"\\@cdots"});K("\\dotsb","\\cdots");K("\\dotsm","\\cdots");K("\\dotsi","\\!\\cdots");K("\\dotsx","\\ldots\\,");K("\\DOTSI","\\relax");K("\\DOTSB","\\relax");K("\\DOTSX","\\relax");K("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");K("\\,","\\tmspace+{3mu}{.1667em}");K("\\thinspace","\\,");K("\\>","\\mskip{4mu}");K("\\:","\\tmspace+{4mu}{.2222em}");K("\\medspace","\\:");K("\\;","\\tmspace+{5mu}{.2777em}");K("\\thickspace","\\;");K("\\!","\\tmspace-{3mu}{.1667em}");K("\\negthinspace","\\!");K("\\negmedspace","\\tmspace-{4mu}{.2222em}");K("\\negthickspace","\\tmspace-{5mu}{.277em}");K("\\enspace","\\kern.5em ");K("\\enskip","\\hskip.5em\\relax");K("\\quad","\\hskip1em\\relax");K("\\qquad","\\hskip2em\\relax");K("\\tag","\\@ifstar\\tag@literal\\tag@paren");K("\\tag@paren","\\tag@literal{({#1})}");K("\\tag@literal",i=>{if(i.macros.get("\\df@tag"))throw new Rt("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});K("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");K("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");K("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");K("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");K("\\newline","\\\\\\relax");K("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var aV=Ft(Du["Main-Regular"]["T".charCodeAt(0)][1]-.7*Du["Main-Regular"]["A".charCodeAt(0)][1]);K("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+aV+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");K("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+aV+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");K("\\hspace","\\@ifstar\\@hspacer\\@hspace");K("\\@hspace","\\hskip #1\\relax");K("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");K("\\ordinarycolon",":");K("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");K("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');K("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');K("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');K("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');K("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');K("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');K("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');K("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');K("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');K("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');K("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');K("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');K("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');K("","\\dblcolon");K("","\\eqcolon");K("","\\coloneqq");K("","\\eqqcolon");K("","\\Coloneqq");K("\\ratio","\\vcentcolon");K("\\coloncolon","\\dblcolon");K("\\colonequals","\\coloneqq");K("\\coloncolonequals","\\Coloneqq");K("\\equalscolon","\\eqqcolon");K("\\equalscoloncolon","\\Eqqcolon");K("\\colonminus","\\coloneq");K("\\coloncolonminus","\\Coloneq");K("\\minuscolon","\\eqcolon");K("\\minuscoloncolon","\\Eqcolon");K("\\coloncolonapprox","\\Colonapprox");K("\\coloncolonsim","\\Colonsim");K("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");K("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");K("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");K("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");K("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");K("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");K("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");K("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");K("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");K("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");K("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");K("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");K("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");K("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");K("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");K("\\ngeqq","\\html@mathml{\\@ngeqq}{}");K("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");K("\\nleqq","\\html@mathml{\\@nleqq}{}");K("\\nleqslant","\\html@mathml{\\@nleqslant}{}");K("\\nshortmid","\\html@mathml{\\@nshortmid}{}");K("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");K("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");K("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");K("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");K("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");K("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");K("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");K("\\imath","\\html@mathml{\\@imath}{}");K("\\jmath","\\html@mathml{\\@jmath}{}");K("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");K("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");K("","\\llbracket");K("","\\rrbracket");K("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");K("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");K("","\\lBrace");K("","\\rBrace");K("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");K("","\\minuso");K("\\darr","\\downarrow");K("\\dArr","\\Downarrow");K("\\Darr","\\Downarrow");K("\\lang","\\langle");K("\\rang","\\rangle");K("\\uarr","\\uparrow");K("\\uArr","\\Uparrow");K("\\Uarr","\\Uparrow");K("\\N","\\mathbb{N}");K("\\R","\\mathbb{R}");K("\\Z","\\mathbb{Z}");K("\\alef","\\aleph");K("\\alefsym","\\aleph");K("\\Alpha","\\mathrm{A}");K("\\Beta","\\mathrm{B}");K("\\bull","\\bullet");K("\\Chi","\\mathrm{X}");K("\\clubs","\\clubsuit");K("\\cnums","\\mathbb{C}");K("\\Complex","\\mathbb{C}");K("\\Dagger","\\ddagger");K("\\diamonds","\\diamondsuit");K("\\empty","\\emptyset");K("\\Epsilon","\\mathrm{E}");K("\\Eta","\\mathrm{H}");K("\\exist","\\exists");K("\\harr","\\leftrightarrow");K("\\hArr","\\Leftrightarrow");K("\\Harr","\\Leftrightarrow");K("\\hearts","\\heartsuit");K("\\image","\\Im");K("\\infin","\\infty");K("\\Iota","\\mathrm{I}");K("\\isin","\\in");K("\\Kappa","\\mathrm{K}");K("\\larr","\\leftarrow");K("\\lArr","\\Leftarrow");K("\\Larr","\\Leftarrow");K("\\lrarr","\\leftrightarrow");K("\\lrArr","\\Leftrightarrow");K("\\Lrarr","\\Leftrightarrow");K("\\Mu","\\mathrm{M}");K("\\natnums","\\mathbb{N}");K("\\Nu","\\mathrm{N}");K("\\Omicron","\\mathrm{O}");K("\\plusmn","\\pm");K("\\rarr","\\rightarrow");K("\\rArr","\\Rightarrow");K("\\Rarr","\\Rightarrow");K("\\real","\\Re");K("\\reals","\\mathbb{R}");K("\\Reals","\\mathbb{R}");K("\\Rho","\\mathrm{P}");K("\\sdot","\\cdot");K("\\sect","\\S");K("\\spades","\\spadesuit");K("\\sub","\\subset");K("\\sube","\\subseteq");K("\\supe","\\supseteq");K("\\Tau","\\mathrm{T}");K("\\thetasym","\\vartheta");K("\\weierp","\\wp");K("\\Zeta","\\mathrm{Z}");K("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");K("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");K("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");K("\\bra","\\mathinner{\\langle{#1}|}");K("\\ket","\\mathinner{|{#1}\\rangle}");K("\\braket","\\mathinner{\\langle{#1}\\rangle}");K("\\Bra","\\left\\langle#1\\right|");K("\\Ket","\\left|#1\\right\\rangle");var lV=i=>e=>{var t=e.consumeArg().tokens,n=e.consumeArg().tokens,r=e.consumeArg().tokens,s=e.consumeArg().tokens,o=e.macros.get("|"),a=e.macros.get("\\|");e.macros.beginGroup();var l=h=>d=>{i&&(d.macros.set("|",o),r.length&&d.macros.set("\\|",a));var f=h;if(!h&&r.length){var g=d.future();g.text==="|"&&(d.popToken(),f=!0)}return{tokens:f?r:n,numArgs:0}};e.macros.set("|",l(!1)),r.length&&e.macros.set("\\|",l(!0));var c=e.consumeArg().tokens,u=e.expandTokens([...s,...c,...t]);return e.macros.endGroup(),{tokens:u.reverse(),numArgs:0}};K("\\bra@ket",lV(!1));K("\\bra@set",lV(!0));K("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");K("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");K("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");K("\\angln","{\\angl n}");K("\\blue","\\textcolor{##6495ed}{#1}");K("\\orange","\\textcolor{##ffa500}{#1}");K("\\pink","\\textcolor{##ff00af}{#1}");K("\\red","\\textcolor{##df0030}{#1}");K("\\green","\\textcolor{##28ae7b}{#1}");K("\\gray","\\textcolor{gray}{#1}");K("\\purple","\\textcolor{##9d38bd}{#1}");K("\\blueA","\\textcolor{##ccfaff}{#1}");K("\\blueB","\\textcolor{##80f6ff}{#1}");K("\\blueC","\\textcolor{##63d9ea}{#1}");K("\\blueD","\\textcolor{##11accd}{#1}");K("\\blueE","\\textcolor{##0c7f99}{#1}");K("\\tealA","\\textcolor{##94fff5}{#1}");K("\\tealB","\\textcolor{##26edd5}{#1}");K("\\tealC","\\textcolor{##01d1c1}{#1}");K("\\tealD","\\textcolor{##01a995}{#1}");K("\\tealE","\\textcolor{##208170}{#1}");K("\\greenA","\\textcolor{##b6ffb0}{#1}");K("\\greenB","\\textcolor{##8af281}{#1}");K("\\greenC","\\textcolor{##74cf70}{#1}");K("\\greenD","\\textcolor{##1fab54}{#1}");K("\\greenE","\\textcolor{##0d923f}{#1}");K("\\goldA","\\textcolor{##ffd0a9}{#1}");K("\\goldB","\\textcolor{##ffbb71}{#1}");K("\\goldC","\\textcolor{##ff9c39}{#1}");K("\\goldD","\\textcolor{##e07d10}{#1}");K("\\goldE","\\textcolor{##a75a05}{#1}");K("\\redA","\\textcolor{##fca9a9}{#1}");K("\\redB","\\textcolor{##ff8482}{#1}");K("\\redC","\\textcolor{##f9685d}{#1}");K("\\redD","\\textcolor{##e84d39}{#1}");K("\\redE","\\textcolor{##bc2612}{#1}");K("\\maroonA","\\textcolor{##ffbde0}{#1}");K("\\maroonB","\\textcolor{##ff92c6}{#1}");K("\\maroonC","\\textcolor{##ed5fa6}{#1}");K("\\maroonD","\\textcolor{##ca337c}{#1}");K("\\maroonE","\\textcolor{##9e034e}{#1}");K("\\purpleA","\\textcolor{##ddd7ff}{#1}");K("\\purpleB","\\textcolor{##c6b9fc}{#1}");K("\\purpleC","\\textcolor{##aa87ff}{#1}");K("\\purpleD","\\textcolor{##7854ab}{#1}");K("\\purpleE","\\textcolor{##543b78}{#1}");K("\\mintA","\\textcolor{##f5f9e8}{#1}");K("\\mintB","\\textcolor{##edf2df}{#1}");K("\\mintC","\\textcolor{##e0e5cc}{#1}");K("\\grayA","\\textcolor{##f6f7f7}{#1}");K("\\grayB","\\textcolor{##f0f1f2}{#1}");K("\\grayC","\\textcolor{##e3e5e6}{#1}");K("\\grayD","\\textcolor{##d6d8da}{#1}");K("\\grayE","\\textcolor{##babec2}{#1}");K("\\grayF","\\textcolor{##888d93}{#1}");K("\\grayG","\\textcolor{##626569}{#1}");K("\\grayH","\\textcolor{##3b3e40}{#1}");K("\\grayI","\\textcolor{##21242c}{#1}");K("\\kaBlue","\\textcolor{##314453}{#1}");K("\\kaGreen","\\textcolor{##71B307}{#1}");var cV={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Ict{constructor(e,t,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new Dct(zct,t.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new PL(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,n,r;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;t=this.popToken(),{tokens:r,end:n}=this.consumeArg(["]"])}else({tokens:r,start:t,end:n}=this.consumeArg());return this.pushToken(new Bu("EOF",n.loc)),this.pushTokens(r),t.range(n,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var t=[],n=e&&e.length>0;n||this.consumeSpaces();var r=this.future(),s,o=0,a=0;do{if(s=this.popToken(),t.push(s),s.text==="{")++o;else if(s.text==="}"){if(--o,o===-1)throw new Rt("Extra }",s)}else if(s.text==="EOF")throw new Rt("Unexpected end of input in a macro argument, expected '"+(e&&n?e[a]:"}")+"'",s);if(e&&n)if((o===0||o===1&&e[a]==="{")&&s.text===e[a]){if(++a,a===e.length){t.splice(-a,a);break}}else a=0}while(o!==0||n);return r.text==="{"&&t[t.length-1].text==="}"&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:r,end:s}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new Rt("The length of delimiters doesn't match the number of args!");for(var n=t[0],r=0;r<n.length;r++){var s=this.popToken();if(n[r]!==s.text)throw new Rt("Use of the macro doesn't match its definition",s)}}for(var o=[],a=0;a<e;a++)o.push(this.consumeArg(t&&t[a+1]).tokens);return o}expandOnce(e){var t=this.popToken(),n=t.text,r=t.noexpand?null:this._getExpansion(n);if(r==null||e&&r.unexpandable){if(e&&r==null&&n[0]==="\\"&&!this.isDefined(n))throw new Rt("Undefined control sequence: "+n);return this.pushToken(t),!1}if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new Rt("Too many expansions: infinite loop or need to increase maxExpand setting");var s=r.tokens,o=this.consumeArgs(r.numArgs,r.delimiters);if(r.numArgs){s=s.slice();for(var a=s.length-1;a>=0;--a){var l=s[a];if(l.text==="#"){if(a===0)throw new Rt("Incomplete placeholder at end of macro body",l);if(l=s[--a],l.text==="#")s.splice(a+1,1);else if(/^[1-9]$/.test(l.text))s.splice(a,2,...o[+l.text-1]);else throw new Rt("Not a valid argument number",l)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Bu(e)]):void 0}expandTokens(e){var t=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var r=this.stack.pop();r.treatAsRelax&&(r.noexpand=!1,r.treatAsRelax=!1),t.push(r)}return t}expandMacroAsText(e){var t=this.expandMacro(e);return t&&t.map(n=>n.text).join("")}_getExpansion(e){var t=this.macros.get(e);if(t==null)return t;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var r=typeof t=="function"?t(this):t;if(typeof r=="string"){var s=0;if(r.indexOf("#")!==-1)for(var o=r.replace(/##/g,"");o.indexOf("#"+(s+1))!==-1;)++s;for(var a=new PL(r,this.settings),l=[],c=a.lex();c.text!=="EOF";)l.push(c),c=a.lex();l.reverse();var u={tokens:l,numArgs:s};return u}return r}isDefined(e){return this.macros.has(e)||$d.hasOwnProperty(e)||Tr.math.hasOwnProperty(e)||Tr.text.hasOwnProperty(e)||cV.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return t!=null?typeof t=="string"||typeof t=="function"||!t.unexpandable:$d.hasOwnProperty(e)&&!$d[e].primitive}}var OL=/^[]/,Nx=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),gC={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},LL={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class s_{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Ict(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(t===void 0&&(t=!0),this.fetch().text!==e)throw new Rt("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new Bu("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,n}parseExpression(e,t){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var r=this.fetch();if(s_.endOfExpression.indexOf(r.text)!==-1||t&&r.text===t||e&&$d[r.text]&&$d[r.text].infix)break;var s=this.parseAtom(t);if(s){if(s.type==="internal")continue}else break;n.push(s)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var t=-1,n,r=0;r<e.length;r++)if(e[r].type==="infix"){if(t!==-1)throw new Rt("only one infix operator per group",e[r].token);t=r,n=e[r].replaceWith}if(t!==-1&&n){var s,o,a=e.slice(0,t),l=e.slice(t+1);a.length===1&&a[0].type==="ordgroup"?s=a[0]:s={type:"ordgroup",mode:this.mode,body:a},l.length===1&&l[0].type==="ordgroup"?o=l[0]:o={type:"ordgroup",mode:this.mode,body:l};var c;return n==="\\\\abovefrac"?c=this.callFunction(n,[s,e[t],o],[]):c=this.callFunction(n,[s,o],[]),[c]}else return e}handleSupSubscript(e){var t=this.fetch(),n=t.text;this.consume(),this.consumeSpaces();var r=this.parseGroup(e);if(!r)throw new Rt("Expected group after '"+n+"'",t);return r}formatUnsupportedCmd(e){for(var t=[],n=0;n<e.length;n++)t.push({type:"textord",mode:"text",text:e[n]});var r={type:"text",mode:this.mode,body:t},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[r]};return s}parseAtom(e){var t=this.parseGroup("atom",e);if(this.mode==="text")return t;for(var n,r;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(t&&t.type==="op"){var o=s.text==="\\limits";t.limits=o,t.alwaysHandleSupSub=!0}else if(t&&t.type==="operatorname")t.alwaysHandleSupSub&&(t.limits=s.text==="\\limits");else throw new Rt("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(n)throw new Rt("Double superscript",s);n=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(r)throw new Rt("Double subscript",s);r=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(n)throw new Rt("Double superscript",s);var a={type:"textord",mode:this.mode,text:"\\prime"},l=[a];for(this.consume();this.fetch().text==="'";)l.push(a),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:l}}else if(Nx[s.text]){var c=Nx[s.text],u=OL.test(s.text);for(this.consume();;){var h=this.fetch().text;if(!Nx[h]||OL.test(h)!==u)break;this.consume(),c+=Nx[h]}var d=new s_(c,this.settings).parse();u?r={type:"ordgroup",mode:"math",body:d}:n={type:"ordgroup",mode:"math",body:d}}else break}return n||r?{type:"supsub",mode:this.mode,base:t,sup:n,sub:r}:t}parseFunction(e,t){var n=this.fetch(),r=n.text,s=$d[r];if(!s)return null;if(this.consume(),t&&t!=="atom"&&!s.allowedInArgument)throw new Rt("Got function '"+r+"' with no arguments"+(t?" as "+t:""),n);if(this.mode==="text"&&!s.allowedInText)throw new Rt("Can't use function '"+r+"' in text mode",n);if(this.mode==="math"&&s.allowedInMath===!1)throw new Rt("Can't use function '"+r+"' in math mode",n);var{args:o,optArgs:a}=this.parseArguments(r,s);return this.callFunction(r,o,a,n,e)}callFunction(e,t,n,r,s){var o={funcName:e,parser:this,token:r,breakOnTokenText:s},a=$d[e];if(a&&a.handler)return a.handler(o,t,n);throw new Rt("No function handler for "+e)}parseArguments(e,t){var n=t.numArgs+t.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var r=[],s=[],o=0;o<n;o++){var a=t.argTypes&&t.argTypes[o],l=o<t.numOptionalArgs;(t.primitive&&a==null||t.type==="sqrt"&&o===1&&s[0]==null)&&(a="primitive");var c=this.parseGroupOfType("argument to '"+e+"'",a,l);if(l)s.push(c);else if(c!=null)r.push(c);else throw new Rt("Null argument, please report this as a bug")}return{args:r,optArgs:s}}parseGroupOfType(e,t,n){switch(t){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,t);case"hbox":{var r=this.parseArgumentGroup(n,"text");return r!=null?{type:"styling",mode:r.mode,body:[r],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",n);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(n)throw new Rt("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new Rt("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new Rt("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,t){var n=this.gullet.scanArgument(t);if(n==null)return null;for(var r="",s;(s=this.fetch()).text!=="EOF";)r+=s.text,this.consume();return this.consume(),n.text=r,n}parseRegexGroup(e,t){for(var n=this.fetch(),r=n,s="",o;(o=this.fetch()).text!=="EOF"&&e.test(s+o.text);)r=o,s+=r.text,this.consume();if(s==="")throw new Rt("Invalid "+t+": '"+n.text+"'",n);return n.range(r,s)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(t==null)return null;var n=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!n)throw new Rt("Invalid color: '"+t.text+"'",t);var r=n[0];return/^[0-9a-f]{6}$/i.test(r)&&(r="#"+r),{type:"color-token",mode:this.mode,color:r}}parseSizeGroup(e){var t,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?t=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):t=this.parseStringGroup("size",e),!t)return null;!e&&t.text.length===0&&(t.text="0pt",n=!0);var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!r)throw new Rt("Invalid size: '"+t.text+"'",t);var s={number:+(r[1]+r[2]),unit:r[3]};if(!bB(s))throw new Rt("Invalid unit: '"+s.unit+"'",t);return{type:"size",mode:this.mode,value:s,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),t==null)return null;var n=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,t){var n=this.gullet.scanArgument(e);if(n==null)return null;var r=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:n.loc,body:s};return t&&this.switchMode(r),o}parseGroup(e,t){var n=this.fetch(),r=n.text,s;if(r==="{"||r==="\\begingroup"){this.consume();var o=r==="{"?"}":"\\endgroup";this.gullet.beginGroup();var a=this.parseExpression(!1,o),l=this.fetch();this.expect(o),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:kl.range(n,l),body:a,semisimple:r==="\\begingroup"||void 0}}else if(s=this.parseFunction(t,e)||this.parseSymbol(),s==null&&r[0]==="\\"&&!cV.hasOwnProperty(r)){if(this.settings.throwOnError)throw new Rt("Undefined control sequence: "+r,n);s=this.formatUnsupportedCmd(r),this.consume()}return s}formLigatures(e){for(var t=e.length-1,n=0;n<t;++n){var r=e[n],s=r.text;s==="-"&&e[n+1].text==="-"&&(n+1<t&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:kl.range(r,e[n+2]),text:"---"}),t-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:kl.range(r,e[n+1]),text:"--"}),t-=1)),(s==="'"||s==="`")&&e[n+1].text===s&&(e.splice(n,2,{type:"textord",mode:"text",loc:kl.range(r,e[n+1]),text:s+s}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var n=t.slice(5),r=n.charAt(0)==="*";if(r&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new Rt(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:r}}LL.hasOwnProperty(t[0])&&!Tr[this.mode][t[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=LL[t[0]]+t.slice(1));var s=Oct.exec(t);s&&(t=t.substring(0,s.index),t==="i"?t="":t==="j"&&(t=""));var o;if(Tr[this.mode][t]){this.settings.strict&&this.mode==="math"&&cT.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var a=Tr[this.mode][t].group,l=kl.range(e),c;if(Mlt.hasOwnProperty(a)){var u=a;c={type:"atom",mode:this.mode,family:u,loc:l,text:t}}else c={type:a,mode:this.mode,loc:l,text:t};o=c}else if(t.charCodeAt(0)>=128)this.settings.strict&&(_B(t.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'"'+(" ("+t.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:kl.range(e),text:t};else return null;if(this.consume(),s)for(var h=0;h<s[0].length;h++){var d=s[0][h];if(!gC[d])throw new Rt("Unknown accent ' "+d+"'",e);var f=gC[d][this.mode]||gC[d].text;if(!f)throw new Rt("Accent "+d+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:kl.range(e),label:f,isStretchy:!1,isShifty:!0,base:o}}return o}}s_.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var u6=function(e,t){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new s_(e,t);delete n.gullet.macros.current["\\df@tag"];var r=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new Rt("\\tag works only in display equations");r=[{type:"tag",mode:"text",body:r,tag:n.subparse([new Bu("\\df@tag")])}]}return r},uV=function(e,t,n){t.textContent="";var r=h6(e,n).toNode();t.appendChild(r)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),uV=function(){throw new Rt("KaTeX doesn't work in quirks mode.")});var Nct=function(e,t){var n=h6(e,t).toMarkup();return n},Uct=function(e,t){var n=new j5(t);return u6(e,n)},hV=function(e,t,n){if(n.throwOnError||!(e instanceof Rt))throw e;var r=He.makeSpan(["katex-error"],[new yc(t)]);return r.setAttribute("title",e.toString()),r.setAttribute("style","color:"+n.errorColor),r},h6=function(e,t){var n=new j5(t);try{var r=u6(e,n);return $lt(r,e,n)}catch(s){return hV(s,e,n)}},Fct=function(e,t){var n=new j5(t);try{var r=u6(e,n);return Xlt(r,e,n)}catch(s){return hV(s,e,n)}},o_={version:"0.16.8",render:uV,renderToString:Nct,ParseError:Rt,SETTINGS_SCHEMA:pw,__parse:Uct,__renderToDomTree:h6,__renderToHTMLTree:Fct,__setFontMetrics:vlt,__defineSymbol:L,__defineFunction:Xt,__defineMacro:K,__domTree:{Span:kb,Anchor:Y5,SymbolNode:yc,SvgNode:Qh,PathNode:yf,LineNode:lT}};function M1(i){return i.toFixed(1).replace(/[.,]0$/,"")}function Bct(i){let e,t;return{c(){e=bt("span"),t=new c2(!1),this.h()},l(n){e=yt(n,"SPAN",{class:!0});var r=Jt(e);t=u2(r,!1),r.forEach(fe),this.h()},h(){t.a=null,$e(e,"class","text-2xl bg-base-300/50 inline-block"),Zd(e,"opacity",i[0]),Zd(e,"pointer-events","none")},m(n,r){Ze(n,e,r),t.m(i[2],e)},p(n,r){r&4&&t.p(n[2]),r&1&&Zd(e,"opacity",n[0])},d(n){n&&fe(e)}}}function Vct(i){let e,t;return e=new Az({props:{position:i[1],center:!0,pointerEvents:"none",$$slots:{default:[Bct]},$$scope:{ctx:i}}}),{c(){xt(e.$$.fragment)},l(n){wt(e.$$.fragment,n)},m(n,r){St(e,n,r),t=!0},p(n,[r]){const s={};r&2&&(s.position=n[1]),r&32773&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(Ue(e.$$.fragment,n),t=!0)},o(n){Ye(e.$$.fragment,n),t=!1},d(n){Mt(e,n)}}}function Hct(i,e,t){let n,r,s,o,a,l,c,u,h,{coords:d}=e,{opacity:f}=e,{dim3:g=!1}=e,v,y,_;return i.$$set=S=>{"coords"in S&&t(3,d=S.coords),"opacity"in S&&t(0,f=S.opacity),"dim3"in S&&t(4,g=S.dim3)},i.$$.update=()=>{if(i.$$.dirty&8&&t(10,[n,r,s,o,a,l]=d,o,(t(9,a),t(3,d)),(t(8,l),t(3,d))),i.$$.dirty&1536&&t(11,c=Math.atan2(a,o)),i.$$.dirty&3856)if(g){const w=Math.sqrt(o*o+a*a+l*l),C=Math.acos(l/w);t(5,v=.4*Math.sin(C)*Math.cos(c)),t(6,y=.4*Math.sin(C)*Math.sin(c)),t(7,_=.4*Math.cos(C))}else t(5,v=.6*Math.cos(c)),t(6,y=.6*Math.sin(c)),t(7,_=0);i.$$.dirty&1808&&t(2,u=o_.renderToString(String.raw`\left[\begin{array}{r}
  ${M1(o)} \\
  ${M1(a)} \\
  ${g?`${M1(l)}`:""}
  \end{array}\right]`)),i.$$.dirty&2016&&t(1,h=[o+v,a+y,l+_])},[f,h,u,d,g,v,y,_,l,a,o,c]}class qct extends oi{constructor(e){super(),ai(this,e,Hct,Vct,Gn,{coords:3,opacity:0,dim3:4})}}function vC(i){const e=i.slice(),t=e[5]?[e[10]/2,e[9]/2,e[8]/2]:[e[10]/2+e[6],e[9]/2+e[7],e[8]/2];return e[21]=t,e}function DL(i){let e,t,n,r;e=new qct({props:{coords:i[0],opacity:i[2],dim3:i[5]}});let s=i[3]&&zL(vC(i));return{c(){xt(e.$$.fragment),t=Nt(),s&&s.c(),n=Zs()},l(o){wt(e.$$.fragment,o),t=Ut(o),s&&s.l(o),n=Zs()},m(o,a){St(e,o,a),Ze(o,t,a),s&&s.m(o,a),Ze(o,n,a),r=!0},p(o,a){const l={};a&1&&(l.coords=o[0]),a&4&&(l.opacity=o[2]),a&32&&(l.dim3=o[5]),e.$set(l),o[3]?s?(s.p(vC(o),a),a&8&&Ue(s,1)):(s=zL(vC(o)),s.c(),Ue(s,1),s.m(n.parentNode,n)):s&&(rl(),Ye(s,1,1,()=>{s=null}),il())},i(o){r||(Ue(e.$$.fragment,o),Ue(s),r=!0)},o(o){Ye(e.$$.fragment,o),Ye(s),r=!1},d(o){o&&(fe(t),fe(n)),Mt(e,o),s&&s.d(o)}}}function zL(i){let e,t;return e=new Az({props:{position:i[21],center:!0,pointerEvents:"none",$$slots:{default:[Gct]},$$scope:{ctx:i}}}),{c(){xt(e.$$.fragment)},l(n){wt(e.$$.fragment,n)},m(n,r){St(e,n,r),t=!0},p(n,r){const s={};r&2016&&(s.position=n[21]),r&4194328&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(Ue(e.$$.fragment,n),t=!0)},o(n){Ye(e.$$.fragment,n),t=!1},d(n){Mt(e,n)}}}function Gct(i){let e,t,n=o_.renderToString(String.raw`\times ${M1(i[3])}`)+"";return{c(){e=bt("span"),t=new c2(!1),this.h()},l(r){e=yt(r,"SPAN",{class:!0});var s=Jt(e);t=u2(s,!1),s.forEach(fe),this.h()},h(){t.a=null,$e(e,"class","text-xl whitespace-nowrap"),Zd(e,"opacity",i[4]),Zd(e,"pointer-events","none")},m(r,s){Ze(r,e,s),t.m(n,e)},p(r,s){s&8&&n!==(n=o_.renderToString(String.raw`\times ${M1(r[3])}`)+"")&&t.p(n),s&16&&Zd(e,"opacity",r[4])},d(r){r&&fe(e)}}}function Wct(i){let e,t,n=i[1]&&DL(i);return{c(){n&&n.c(),e=Zs()},l(r){n&&n.l(r),e=Zs()},m(r,s){n&&n.m(r,s),Ze(r,e,s),t=!0},p(r,[s]){r[1]?n?(n.p(r,s),s&2&&Ue(n,1)):(n=DL(r),n.c(),Ue(n,1),n.m(e.parentNode,e)):n&&(rl(),Ye(n,1,1,()=>{n=null}),il())},i(r){t||(Ue(n),t=!0)},o(r){Ye(n),t=!1},d(r){r&&fe(e),n&&n.d(r)}}}const Ux=.4;function jct(i,e,t){let n,r,s,o,a,l,{view:c}=e,{coords:u=[0,0,0,-1,2,0]}=e,{color:h="white"}=e,{tex:d=!0}=e,{texOpacity:f=1}=e,{scalar:g=!1}=e,{scalarOpacity:v=1}=e,{scalarAlign:y="center"}=e,{visible:_=!0}=e,{dim3:S=!1}=e;const w={end:!0,width:3,zBias:1e3,width:3,color:h,visible:_},C=c.array({data:u,width:2,items:2,channels:3}),E=c.vector({...w});let k,O;return i.$$set=R=>{"view"in R&&t(11,c=R.view),"coords"in R&&t(0,u=R.coords),"color"in R&&t(12,h=R.color),"tex"in R&&t(1,d=R.tex),"texOpacity"in R&&t(2,f=R.texOpacity),"scalar"in R&&t(3,g=R.scalar),"scalarOpacity"in R&&t(4,v=R.scalarOpacity),"scalarAlign"in R&&t(13,y=R.scalarAlign),"visible"in R&&t(14,_=R.visible),"dim3"in R&&t(5,S=R.dim3)},i.$$.update=()=>{i.$$.dirty&1&&t(10,[n,r,s,o,a,l]=u,o,(t(9,a),t(0,u)),(t(8,l),t(0,u))),i.$$.dirty&1&&C.set("data",u),i.$$.dirty&16384&&E.set("visible",_),i.$$.dirty&8192&&(y=="center"?(t(6,k=0),t(7,O=0)):y=="left"?(t(6,k=Ux*1.5),t(7,O=0)):y=="top"?(t(6,k=0),t(7,O=-Ux)):y=="right"?(t(6,k=-Ux),t(7,O=0)):y=="bottom"&&(t(6,k=0),t(7,O=Ux)))},[u,d,f,g,v,S,k,O,l,a,o,c,h,y,_]}class mm extends oi{constructor(e){super(),ai(this,e,jct,Wct,Gn,{view:11,coords:0,color:12,tex:1,texOpacity:2,scalar:3,scalarOpacity:4,scalarAlign:13,visible:14,dim3:5})}}var mT={exports:{}};(function(i,e){(function(t,n){n(e)})(it,function(t){function n(De,$){for(var ge=0;ge<$.length;ge++){var Q=$[ge];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(De,Q.key,Q)}}function r(De,$,ge){return $&&n(De.prototype,$),ge&&n(De,ge),De}/*!
 * Observer 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var s,o,a,l,c,u,h,d,f,g,v,y,_,S=function(){return s||typeof window<"u"&&(s=window.gsap)&&s.registerPlugin&&s},w=1,C=[],E=[],k=[],O=Date.now,R=function($,ge){return ge},A=function(){var $=f.core,ge=$.bridge||{},Q=$._scrollers,te=$._proxies;Q.push.apply(Q,E),te.push.apply(te,k),E=Q,k=te,R=function(Qe,Ge){return ge[Qe](Ge)}},D=function($,ge){return~k.indexOf($)&&k[k.indexOf($)+1][ge]},I=function($){return!!~g.indexOf($)},q=function($,ge,Q,te,Ae){return $.addEventListener(ge,Q,{passive:!te,capture:!!Ae})},j=function($,ge,Q,te){return $.removeEventListener(ge,Q,!!te)},Y="scrollLeft",F="scrollTop",re=function(){return v&&v.isPressed||E.cache++},ee=function($,ge){var Q=function te(Ae){if(Ae||Ae===0){w&&(a.history.scrollRestoration="manual");var Qe=v&&v.isPressed;Ae=te.v=Math.round(Ae)||(v&&v.iOS?1:0),$(Ae),te.cacheID=E.cache,Qe&&R("ss",Ae)}else(ge||E.cache!==te.cacheID||R("ref"))&&(te.cacheID=E.cache,te.v=$());return te.v+te.offset};return Q.offset=0,$&&Q},J={s:Y,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:ee(function(De){return arguments.length?a.scrollTo(De,Ee.sc()):a.pageXOffset||l[Y]||c[Y]||u[Y]||0})},Ee={s:F,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:J,sc:ee(function(De){return arguments.length?a.scrollTo(J.sc(),De):a.pageYOffset||l[F]||c[F]||u[F]||0})},le=function($,ge){return(ge&&ge._ctx&&ge._ctx.selector||s.utils.toArray)($)[0]||(typeof $=="string"&&s.config().nullTargetWarn!==!1?console.warn("Element not found:",$):null)},ie=function($,ge){var Q=ge.s,te=ge.sc;I($)&&($=l.scrollingElement||c);var Ae=E.indexOf($),Qe=te===Ee.sc?1:2;!~Ae&&(Ae=E.push($)-1),E[Ae+Qe]||q($,"scroll",re);var Ge=E[Ae+Qe],Bt=Ge||(E[Ae+Qe]=ee(D($,Q),!0)||(I($)?te:ee(function(wn){return arguments.length?$[Q]=wn:$[Q]})));return Bt.target=$,Ge||(Bt.smooth=s.getProperty($,"scrollBehavior")==="smooth"),Bt},be=function($,ge,Q){var te=$,Ae=$,Qe=O(),Ge=Qe,Bt=ge||50,wn=Math.max(500,Bt*3),jn=function(ln,wi){var Yi=O();wi||Yi-Qe>Bt?(Ae=te,te=ln,Ge=Qe,Qe=Yi):Q?te+=ln:te=Ae+(ln-Ae)/(Yi-Ge)*(Qe-Ge)},nn=function(){Ae=te=Q?0:te,Ge=Qe=0},rn=function(ln){var wi=Ge,Yi=Ae,sr=O();return(ln||ln===0)&&ln!==te&&jn(ln),Qe===Ge||sr-Ge>wn?0:(te+(Q?Yi:-Yi))/((Q?sr:Qe)-wi)*1e3};return{update:jn,reset:nn,getVelocity:rn}},Je=function($,ge){return ge&&!$._gsapAllow&&$.preventDefault(),$.changedTouches?$.changedTouches[0]:$},Xe=function($){var ge=Math.max.apply(Math,$),Q=Math.min.apply(Math,$);return Math.abs(ge)>=Math.abs(Q)?ge:Q},Be=function(){f=s.core.globals().ScrollTrigger,f&&f.core&&A()},vt=function($){return s=$||S(),s&&typeof document<"u"&&document.body&&(a=window,l=document,c=l.documentElement,u=l.body,g=[a,l,c,u],s.utils.clamp,_=s.core.context||function(){},d="onpointerenter"in u?"pointer":"mouse",h=at.isTouch=a.matchMedia&&a.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in a||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,y=at.eventTypes=("ontouchstart"in c?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in c?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return w=0},500),Be(),o=1),o};J.op=Ee,E.cache=0;var at=function(){function De(ge){this.init(ge)}var $=De.prototype;return $.init=function(Q){o||vt(s)||console.warn("Please gsap.registerPlugin(Observer)"),f||Be();var te=Q.tolerance,Ae=Q.dragMinimum,Qe=Q.type,Ge=Q.target,Bt=Q.lineHeight,wn=Q.debounce,jn=Q.preventDefault,nn=Q.onStop,rn=Q.onStopDelay,lt=Q.ignore,ln=Q.wheelSpeed,wi=Q.event,Yi=Q.onDragStart,sr=Q.onDragEnd,or=Q.onDrag,us=Q.onPress,cn=Q.onRelease,Ns=Q.onRight,ji=Q.onLeft,bn=Q.onUp,Nr=Q.onDown,Es=Q.onChangeX,un=Q.onChangeY,cr=Q.onChange,En=Q.onToggleX,ca=Q.onToggleY,ur=Q.onHover,hs=Q.onHoverEnd,Ur=Q.onMove,gi=Q.ignoreCheck,hr=Q.isNormalizer,Ki=Q.onGestureStart,Fe=Q.onGestureEnd,$r=Q.onWheel,Tc=Q.onEnable,bo=Q.onDisable,Ts=Q.onClick,Xr=Q.scrollSpeed,Us=Q.capture,Fr=Q.allowClicks,Fs=Q.lockAxis,Bs=Q.onLockAxis;this.target=Ge=le(Ge)||c,this.vars=Q,lt&&(lt=s.utils.toArray(lt)),te=te||1e-9,Ae=Ae||0,ln=ln||1,Xr=Xr||1,Qe=Qe||"wheel,touch,pointer",wn=wn!==!1,Bt||(Bt=parseFloat(a.getComputedStyle(u).lineHeight)||22);var Yl,Br,Vs,_e,Ke,We,It,Oe=this,Ln=0,zi=0,$t=ie(Ge,J),Bi=ie(Ge,Ee),Ac=$t(),ds=Bi(),Aa=~Qe.indexOf("touch")&&!~Qe.indexOf("pointer")&&y[0]==="pointerdown",vr=I(Ge),Si=Ge.ownerDocument||l,yo=[0,0,0],ar=[0,0,0],di=0,Pa=function(){return di=O()},Wo=function(dn,bi){return(Oe.event=dn)&&lt&&~lt.indexOf(dn.target)||bi&&Aa&&dn.pointerType!=="touch"||gi&&gi(dn,bi)},fs=function(){Oe._vx.reset(),Oe._vy.reset(),Br.pause(),nn&&nn(Oe)},Kl=function(){var dn=Oe.deltaX=Xe(yo),bi=Oe.deltaY=Xe(ar),_r=Math.abs(dn)>=te,Kt=Math.abs(bi)>=te;cr&&(_r||Kt)&&cr(Oe,dn,bi,yo,ar),_r&&(Ns&&Oe.deltaX>0&&Ns(Oe),ji&&Oe.deltaX<0&&ji(Oe),Es&&Es(Oe),En&&Oe.deltaX<0!=Ln<0&&En(Oe),Ln=Oe.deltaX,yo[0]=yo[1]=yo[2]=0),Kt&&(Nr&&Oe.deltaY>0&&Nr(Oe),bn&&Oe.deltaY<0&&bn(Oe),un&&un(Oe),ca&&Oe.deltaY<0!=zi<0&&ca(Oe),zi=Oe.deltaY,ar[0]=ar[1]=ar[2]=0),(_e||Vs)&&(Ur&&Ur(Oe),Vs&&(or(Oe),Vs=!1),_e=!1),We&&!(We=!1)&&Bs&&Bs(Oe),Ke&&($r(Oe),Ke=!1),Yl=0},Pc=function(dn,bi,_r){yo[_r]+=dn,ar[_r]+=bi,Oe._vx.update(dn),Oe._vy.update(bi),wn?Yl||(Yl=requestAnimationFrame(Kl)):Kl()},kc=function(dn,bi){Fs&&!It&&(Oe.axis=It=Math.abs(dn)>Math.abs(bi)?"x":"y",We=!0),It!=="y"&&(yo[2]+=dn,Oe._vx.update(dn,!0)),It!=="x"&&(ar[2]+=bi,Oe._vy.update(bi,!0)),wn?Yl||(Yl=requestAnimationFrame(Kl)):Kl()},ua=function(dn){if(!Wo(dn,1)){dn=Je(dn,jn);var bi=dn.clientX,_r=dn.clientY,Kt=bi-Oe.x,$n=_r-Oe.y,fn=Oe.isDragging;Oe.x=bi,Oe.y=_r,(fn||Math.abs(Oe.startX-bi)>=Ae||Math.abs(Oe.startY-_r)>=Ae)&&(or&&(Vs=!0),fn||(Oe.isDragging=!0),kc(Kt,$n),fn||Yi&&Yi(Oe))}},Hs=Oe.onPress=function(Rn){Wo(Rn,1)||Rn&&Rn.button||(Oe.axis=It=null,Br.pause(),Oe.isPressed=!0,Rn=Je(Rn),Ln=zi=0,Oe.startX=Oe.x=Rn.clientX,Oe.startY=Oe.y=Rn.clientY,Oe._vx.reset(),Oe._vy.reset(),q(hr?Ge:Si,y[1],ua,jn,!0),Oe.deltaX=Oe.deltaY=0,us&&us(Oe))},jo=Oe.onRelease=function(Rn){if(!Wo(Rn,1)){j(hr?Ge:Si,y[1],ua,!0);var dn=!isNaN(Oe.y-Oe.startY),bi=Oe.isDragging&&(Math.abs(Oe.x-Oe.startX)>3||Math.abs(Oe.y-Oe.startY)>3),_r=Je(Rn);!bi&&dn&&(Oe._vx.reset(),Oe._vy.reset(),jn&&Fr&&s.delayedCall(.08,function(){if(O()-di>300&&!Rn.defaultPrevented){if(Rn.target.click)Rn.target.click();else if(Si.createEvent){var Kt=Si.createEvent("MouseEvents");Kt.initMouseEvent("click",!0,!0,a,1,_r.screenX,_r.screenY,_r.clientX,_r.clientY,!1,!1,!1,!1,0,null),Rn.target.dispatchEvent(Kt)}}})),Oe.isDragging=Oe.isGesturing=Oe.isPressed=!1,nn&&!hr&&Br.restart(!0),sr&&bi&&sr(Oe),cn&&cn(Oe,bi)}},fi=function(dn){return dn.touches&&dn.touches.length>1&&(Oe.isGesturing=!0)&&Ki(dn,Oe.isDragging)},ka=function(){return(Oe.isGesturing=!1)||Fe(Oe)},zo=function(dn){if(!Wo(dn)){var bi=$t(),_r=Bi();Pc((bi-Ac)*Xr,(_r-ds)*Xr,1),Ac=bi,ds=_r,nn&&Br.restart(!0)}},$o=function(dn){if(!Wo(dn)){dn=Je(dn,jn),$r&&(Ke=!0);var bi=(dn.deltaMode===1?Bt:dn.deltaMode===2?a.innerHeight:1)*ln;Pc(dn.deltaX*bi,dn.deltaY*bi,0),nn&&!hr&&Br.restart(!0)}},ro=function(dn){if(!Wo(dn)){var bi=dn.clientX,_r=dn.clientY,Kt=bi-Oe.x,$n=_r-Oe.y;Oe.x=bi,Oe.y=_r,_e=!0,(Kt||$n)&&kc(Kt,$n)}},_l=function(dn){Oe.event=dn,ur(Oe)},ha=function(dn){Oe.event=dn,hs(Oe)},qs=function(dn){return Wo(dn)||Je(dn,jn)&&Ts(Oe)};Br=Oe._dc=s.delayedCall(rn||.25,fs).pause(),Oe.deltaX=Oe.deltaY=0,Oe._vx=be(0,50,!0),Oe._vy=be(0,50,!0),Oe.scrollX=$t,Oe.scrollY=Bi,Oe.isDragging=Oe.isGesturing=Oe.isPressed=!1,_(this),Oe.enable=function(Rn){return Oe.isEnabled||(q(vr?Si:Ge,"scroll",re),Qe.indexOf("scroll")>=0&&q(vr?Si:Ge,"scroll",zo,jn,Us),Qe.indexOf("wheel")>=0&&q(Ge,"wheel",$o,jn,Us),(Qe.indexOf("touch")>=0&&h||Qe.indexOf("pointer")>=0)&&(q(Ge,y[0],Hs,jn,Us),q(Si,y[2],jo),q(Si,y[3],jo),Fr&&q(Ge,"click",Pa,!1,!0),Ts&&q(Ge,"click",qs),Ki&&q(Si,"gesturestart",fi),Fe&&q(Si,"gestureend",ka),ur&&q(Ge,d+"enter",_l),hs&&q(Ge,d+"leave",ha),Ur&&q(Ge,d+"move",ro)),Oe.isEnabled=!0,Rn&&Rn.type&&Hs(Rn),Tc&&Tc(Oe)),Oe},Oe.disable=function(){Oe.isEnabled&&(C.filter(function(Rn){return Rn!==Oe&&I(Rn.target)}).length||j(vr?Si:Ge,"scroll",re),Oe.isPressed&&(Oe._vx.reset(),Oe._vy.reset(),j(hr?Ge:Si,y[1],ua,!0)),j(vr?Si:Ge,"scroll",zo,Us),j(Ge,"wheel",$o,Us),j(Ge,y[0],Hs,Us),j(Si,y[2],jo),j(Si,y[3],jo),j(Ge,"click",Pa,!0),j(Ge,"click",qs),j(Si,"gesturestart",fi),j(Si,"gestureend",ka),j(Ge,d+"enter",_l),j(Ge,d+"leave",ha),j(Ge,d+"move",ro),Oe.isEnabled=Oe.isPressed=Oe.isDragging=!1,bo&&bo(Oe))},Oe.kill=Oe.revert=function(){Oe.disable();var Rn=C.indexOf(Oe);Rn>=0&&C.splice(Rn,1),v===Oe&&(v=0)},C.push(Oe),hr&&I(Ge)&&(v=Oe),Oe.enable(wi)},r(De,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),De}();at.version="3.12.2",at.create=function(De){return new at(De)},at.register=vt,at.getAll=function(){return C.slice()},at.getById=function(De){return C.filter(function($){return $.vars.id===De})[0]},S()&&s.registerPlugin(at);/*!
 * ScrollTrigger 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Le,Ot,ft,rt,tt,se,ke,ae,xe,Ie,dt,nt,me,ue,Pe,U,V,Ve,st,ve,ut,Zt,we,Se,Tt,zt,Vt,Gt,Dt,Yt,Yn,Me,At=1,qe=Date.now,kt=qe(),Lt=0,Te=0,pn=function($,ge,Q){var te=Ms($)&&($.substr(0,6)==="clamp("||$.indexOf("max")>-1);return Q["_"+ge+"Clamp"]=te,te?$.substr(6,$.length-7):$},mi=function($,ge){return ge&&(!Ms($)||$.substr(0,6)!=="clamp(")?"clamp("+$+")":$},as=function De(){return Te&&requestAnimationFrame(De)},Wn=function(){return ue=1},ls=function(){return ue=0},Gi=function($){return $},to=function($){return Math.round($*1e5)/1e5||0},dl=function(){return typeof window<"u"},Hl=function(){return Le||dl()&&(Le=window.gsap)&&Le.registerPlugin&&Le},Ho=function($){return!!~ke.indexOf($)},fl=function($){return($==="Height"?Yn:ft["inner"+$])||tt["client"+$]||se["client"+$]},Sc=function($){return D($,"getBoundingClientRect")||(Ho($)?function(){return io.width=ft.innerWidth,io.height=Yn,io}:function(){return er($)})},au=function($,ge,Q){var te=Q.d,Ae=Q.d2,Qe=Q.a;return(Qe=D($,"getBoundingClientRect"))?function(){return Qe()[te]}:function(){return(ge?fl(Ae):$["client"+Ae])||0}},pd=function($,ge){return!ge||~k.indexOf($)?Sc($):function(){return io}},oa=function($,ge){var Q=ge.s,te=ge.d2,Ae=ge.d,Qe=ge.a;return Math.max(0,(Q="scroll"+te)&&(Qe=D($,Q))?Qe()-Sc($)()[Ae]:Ho($)?(tt[Q]||se[Q])-fl(te):$[Q]-$["offset"+te])},lu=function($,ge){for(var Q=0;Q<st.length;Q+=3)(!ge||~ge.indexOf(st[Q+1]))&&$(st[Q],st[Q+1],st[Q+2])},Ms=function($){return typeof $=="string"},ne=function($){return typeof $=="function"},je=function($){return typeof $=="number"},et=function($){return typeof $=="object"},Ne=function($,ge,Q){return $&&$.progress(ge?0:1)&&Q&&$.pause()},ot=function($,ge){if($.enabled){var Q=ge($);Q&&Q.totalTime&&($.callbackAnimation=Q)}},Wt=Math.abs,an="left",tn="top",mn="right",kn="bottom",hn="width",gn="height",Wi="Right",xi="Left",Wr="Top",zs="Bottom",zn="padding",_n="margin",aa="Width",gr="Height",Qi="px",zr=function($){return ft.getComputedStyle($)},ql=function($){var ge=zr($).position;$.style.position=ge==="absolute"||ge==="fixed"?ge:"relative"},pl=function($,ge){for(var Q in ge)Q in $||($[Q]=ge[Q]);return $},er=function($,ge){var Q=ge&&zr($)[Pe]!=="matrix(1, 0, 0, 1, 0, 0)"&&Le.to($,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),te=$.getBoundingClientRect();return Q&&Q.progress(0).kill(),te},qo=function($,ge){var Q=ge.d2;return $["offset"+Q]||$["client"+Q]||0},ml=function($){var ge=[],Q=$.labels,te=$.duration(),Ae;for(Ae in Q)ge.push(Q[Ae]/te);return ge},Is=function($){return function(ge){return Le.utils.snap(ml($),ge)}},Mc=function($){var ge=Le.utils.snap($),Q=Array.isArray($)&&$.slice(0).sort(function(te,Ae){return te-Ae});return Q?function(te,Ae,Qe){Qe===void 0&&(Qe=.001);var Ge;if(!Ae)return ge(te);if(Ae>0){for(te-=Qe,Ge=0;Ge<Q.length;Ge++)if(Q[Ge]>=te)return Q[Ge];return Q[Ge-1]}else for(Ge=Q.length,te+=Qe;Ge--;)if(Q[Ge]<=te)return Q[Ge];return Q[0]}:function(te,Ae,Qe){Qe===void 0&&(Qe=.001);var Ge=ge(te);return!Ae||Math.abs(Ge-te)<Qe||Ge-te<0==Ae<0?Ge:ge(Ae<0?te-$:te+$)}},ih=function($){return function(ge,Q){return Mc(ml($))(ge,Q.direction)}},Gl=function($,ge,Q,te){return Q.split(",").forEach(function(Ae){return $(ge,Ae,te)})},Ir=function($,ge,Q,te,Ae){return $.addEventListener(ge,Q,{passive:!te,capture:!!Ae})},cs=function($,ge,Q,te){return $.removeEventListener(ge,Q,!!te)},rh=function($,ge,Q){Q=Q&&Q.wheelHandler,Q&&($(ge,"wheel",Q),$(ge,"touchmove",Q))},Wl={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},mo={toggleActions:"play",anticipatePin:0},go={top:0,left:0,center:.5,bottom:1,right:1},gl=function($,ge){if(Ms($)){var Q=$.indexOf("="),te=~Q?+($.charAt(Q-1)+1)*parseFloat($.substr(Q+1)):0;~Q&&($.indexOf("%")>Q&&(te*=ge/100),$=$.substr(0,Q-1)),$=te+($ in go?go[$]*ge:~$.indexOf("%")?parseFloat($)*ge/100:parseFloat($)||0)}return $},cu=function($,ge,Q,te,Ae,Qe,Ge,Bt){var wn=Ae.startColor,jn=Ae.endColor,nn=Ae.fontSize,rn=Ae.indent,lt=Ae.fontWeight,ln=rt.createElement("div"),wi=Ho(Q)||D(Q,"pinType")==="fixed",Yi=$.indexOf("scroller")!==-1,sr=wi?se:Q,or=$.indexOf("start")!==-1,us=or?wn:jn,cn="border-color:"+us+";font-size:"+nn+";color:"+us+";font-weight:"+lt+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return cn+="position:"+((Yi||Bt)&&wi?"fixed;":"absolute;"),(Yi||Bt||!wi)&&(cn+=(te===Ee?mn:kn)+":"+(Qe+parseFloat(rn))+"px;"),Ge&&(cn+="box-sizing:border-box;text-align:left;width:"+Ge.offsetWidth+"px;"),ln._isStart=or,ln.setAttribute("class","gsap-marker-"+$+(ge?" marker-"+ge:"")),ln.style.cssText=cn,ln.innerText=ge||ge===0?$+"-"+ge:$,sr.children[0]?sr.insertBefore(ln,sr.children[0]):sr.appendChild(ln),ln._offset=ln["offset"+te.op.d2],Cc(ln,0,te,or),ln},Cc=function($,ge,Q,te){var Ae={display:"block"},Qe=Q[te?"os2":"p2"],Ge=Q[te?"p2":"os2"];$._isFlipped=te,Ae[Q.a+"Percent"]=te?-100:0,Ae[Q.a]=te?"1px":0,Ae["border"+Qe+aa]=1,Ae["border"+Ge+aa]=0,Ae[Q.p]=ge+"px",Le.set($,Ae)},Fn=[],md={},Ta,gd=function(){return qe()-Lt>34&&(Ta||(Ta=requestAnimationFrame(vl)))},uu=function(){(!we||!we.isPressed||we.startX>se.clientWidth)&&(E.cache++,we?Ta||(Ta=requestAnimationFrame(vl)):vl(),Lt||$l("scrollStart"),Lt=qe())},vd=function(){zt=ft.innerWidth,Tt=ft.innerHeight},hu=function(){E.cache++,!me&&!Zt&&!rt.fullscreenElement&&!rt.webkitFullscreenElement&&(!Se||zt!==ft.innerWidth||Math.abs(ft.innerHeight-Tt)>ft.innerHeight*.25)&&ae.restart(!0)},jl={},_d=[],T0=function De(){return cs(vn,"scrollEnd",De)||la(!0)},$l=function($){return jl[$]&&jl[$].map(function(ge){return ge()})||_d},vo=[],bd=function($){for(var ge=0;ge<vo.length;ge+=5)(!$||vo[ge+4]&&vo[ge+4].query===$)&&(vo[ge].style.cssText=vo[ge+1],vo[ge].getBBox&&vo[ge].setAttribute("transform",vo[ge+2]||""),vo[ge+3].uncache=1)},Bf=function($,ge){var Q;for(U=0;U<Fn.length;U++)Q=Fn[U],Q&&(!ge||Q._ctx===ge)&&($?Q.kill(1):Q.revert(!0,!0));ge&&bd(ge),ge||$l("revert")},A0=function($,ge){E.cache++,(ge||!no)&&E.forEach(function(Q){return ne(Q)&&Q.cacheID++&&(Q.rec=0)}),Ms($)&&(ft.history.scrollRestoration=Dt=$)},no,Ec=0,yd,Fi=function(){if(yd!==Ec){var $=yd=Ec;requestAnimationFrame(function(){return $===Ec&&la(!0)})}},Xi=function(){se.appendChild(Yt),Yn=Yt.offsetHeight||ft.innerHeight,se.removeChild(Yt)},la=function($,ge){if(Lt&&!$){Ir(vn,"scrollEnd",T0);return}Xi(),no=vn.isRefreshing=!0,E.forEach(function(te){return ne(te)&&++te.cacheID&&(te.rec=te())});var Q=$l("refreshInit");ve&&vn.sort(),ge||Bf(),E.forEach(function(te){ne(te)&&(te.smooth&&(te.target.style.scrollBehavior="auto"),te(0))}),Fn.slice(0).forEach(function(te){return te.refresh()}),Fn.forEach(function(te,Ae){if(te._subPinOffset&&te.pin){var Qe=te.vars.horizontal?"offsetWidth":"offsetHeight",Ge=te.pin[Qe];te.revert(!0,1),te.adjustPinSpacing(te.pin[Qe]-Ge),te.refresh()}}),Fn.forEach(function(te){var Ae=oa(te.scroller,te._dir);(te.vars.end==="max"||te._endClamp&&te.end>Ae)&&te.setPositions(te.start,Math.max(te.start+1,Ae),!0)}),Q.forEach(function(te){return te&&te.render&&te.render(-1)}),E.forEach(function(te){ne(te)&&(te.smooth&&requestAnimationFrame(function(){return te.target.style.scrollBehavior="smooth"}),te.rec&&te(te.rec))}),A0(Dt,1),ae.pause(),Ec++,no=2,vl(2),Fn.forEach(function(te){return ne(te.vars.onRefresh)&&te.vars.onRefresh(te)}),no=vn.isRefreshing=!1,$l("refresh")},Vf=0,du=1,fu,vl=function($){if(!no||$===2){vn.isUpdating=!0,fu&&fu.update(0);var ge=Fn.length,Q=qe(),te=Q-kt>=50,Ae=ge&&Fn[0].scroll();if(du=Vf>Ae?-1:1,no||(Vf=Ae),te&&(Lt&&!ue&&Q-Lt>200&&(Lt=0,$l("scrollEnd")),dt=kt,kt=Q),du<0){for(U=ge;U-- >0;)Fn[U]&&Fn[U].update(0,te);du=1}else for(U=0;U<ge;U++)Fn[U]&&Fn[U].update(0,te);vn.isUpdating=!1}Ta=0},Hf=[an,tn,kn,mn,_n+zs,_n+Wi,_n+Wr,_n+xi,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],sh=Hf.concat([hn,gn,"boxSizing","max"+aa,"max"+gr,"position",_n,zn,zn+Wr,zn+Wi,zn+zs,zn+xi]),Zg=function($,ge,Q){Go(Q);var te=$._gsap;if(te.spacerIsNative)Go(te.spacerState);else if($._gsap.swappedIn){var Ae=ge.parentNode;Ae&&(Ae.insertBefore($,ge),Ae.removeChild(ge))}$._gsap.swappedIn=!1},jr=function($,ge,Q,te){if(!$._gsap.swappedIn){for(var Ae=Hf.length,Qe=ge.style,Ge=$.style,Bt;Ae--;)Bt=Hf[Ae],Qe[Bt]=Q[Bt];Qe.position=Q.position==="absolute"?"absolute":"relative",Q.display==="inline"&&(Qe.display="inline-block"),Ge[kn]=Ge[mn]="auto",Qe.flexBasis=Q.flexBasis||"auto",Qe.overflow="visible",Qe.boxSizing="border-box",Qe[hn]=qo($,J)+Qi,Qe[gn]=qo($,Ee)+Qi,Qe[zn]=Ge[_n]=Ge[tn]=Ge[an]="0",Go(te),Ge[hn]=Ge["max"+aa]=Q[hn],Ge[gn]=Ge["max"+gr]=Q[gn],Ge[zn]=Q[zn],$.parentNode!==ge&&($.parentNode.insertBefore(ge,$),ge.appendChild($)),$._gsap.swappedIn=!0}},qf=/([A-Z])/g,Go=function($){if($){var ge=$.t.style,Q=$.length,te=0,Ae,Qe;for(($.t._gsap||Le.core.getCache($.t)).uncache=1;te<Q;te+=2)Qe=$[te+1],Ae=$[te],Qe?ge[Ae]=Qe:ge[Ae]&&ge.removeProperty(Ae.replace(qf,"-$1").toLowerCase())}},oh=function($){for(var ge=sh.length,Q=$.style,te=[],Ae=0;Ae<ge;Ae++)te.push(sh[Ae],Q[sh[Ae]]);return te.t=$,te},Gf=function($,ge,Q){for(var te=[],Ae=$.length,Qe=Q?8:0,Ge;Qe<Ae;Qe+=2)Ge=$[Qe],te.push(Ge,Ge in ge?ge[Ge]:$[Qe+1]);return te.t=$.t,te},io={left:0,top:0},Wf=function($,ge,Q,te,Ae,Qe,Ge,Bt,wn,jn,nn,rn,lt,ln){ne($)&&($=$(Bt)),Ms($)&&$.substr(0,3)==="max"&&($=rn+($.charAt(4)==="="?gl("0"+$.substr(3),Q):0));var wi=lt?lt.time():0,Yi,sr,or;if(lt&&lt.seek(0),isNaN($)||($=+$),je($))lt&&($=Le.utils.mapRange(lt.scrollTrigger.start,lt.scrollTrigger.end,0,rn,$)),Ge&&Cc(Ge,Q,te,!0);else{ne(ge)&&(ge=ge(Bt));var us=($||"0").split(" "),cn,Ns,ji,bn;or=le(ge,Bt)||se,cn=er(or)||{},(!cn||!cn.left&&!cn.top)&&zr(or).display==="none"&&(bn=or.style.display,or.style.display="block",cn=er(or),bn?or.style.display=bn:or.style.removeProperty("display")),Ns=gl(us[0],cn[te.d]),ji=gl(us[1]||"0",Q),$=cn[te.p]-wn[te.p]-jn+Ns+Ae-ji,Ge&&Cc(Ge,ji,te,Q-ji<20||Ge._isStart&&ji>20),Q-=Q-ji}if(ln&&(Bt[ln]=$||-.001,$<0&&($=0)),Qe){var Nr=$+Q,Es=Qe._isStart;Yi="scroll"+te.d2,Cc(Qe,Nr,te,Es&&Nr>20||!Es&&(nn?Math.max(se[Yi],tt[Yi]):Qe.parentNode[Yi])<=Nr+1),nn&&(wn=er(Ge),nn&&(Qe.style[te.op.p]=wn[te.op.p]-te.op.m-Qe._offset+Qi))}return lt&&or&&(Yi=er(or),lt.seek(rn),sr=er(or),lt._caScrollDist=Yi[te.p]-sr[te.p],$=$/lt._caScrollDist*rn),lt&&lt.seek(wi),lt?$:Math.round($)},P0=/(webkit|moz|length|cssText|inset)/i,jf=function($,ge,Q,te){if($.parentNode!==ge){var Ae=$.style,Qe,Ge;if(ge===se){$._stOrig=Ae.cssText,Ge=zr($);for(Qe in Ge)!+Qe&&!P0.test(Qe)&&Ge[Qe]&&typeof Ae[Qe]=="string"&&Qe!=="0"&&(Ae[Qe]=Ge[Qe]);Ae.top=Q,Ae.left=te}else Ae.cssText=$._stOrig;Le.core.getCache($).uncache=1,ge.appendChild($)}},$f=function($,ge,Q){var te=ge,Ae=te;return function(Qe){var Ge=Math.round($());return Ge!==te&&Ge!==Ae&&Math.abs(Ge-te)>3&&Math.abs(Ge-Ae)>3&&(Qe=Ge,Q&&Q()),Ae=te,te=Qe,Qe}},ah=function($,ge,Q){var te={};te[ge.p]="+="+Q,Le.set($,te)},xd=function($,ge){var Q=ie($,ge),te="_scroll"+ge.p2,Ae=function Qe(Ge,Bt,wn,jn,nn){var rn=Qe.tween,lt=Bt.onComplete,ln={};wn=wn||Q();var wi=$f(Q,wn,function(){rn.kill(),Qe.tween=0});return nn=jn&&nn||0,jn=jn||Ge-wn,rn&&rn.kill(),Bt[te]=Ge,Bt.modifiers=ln,ln[te]=function(){return wi(wn+jn*rn.ratio+nn*rn.ratio*rn.ratio)},Bt.onUpdate=function(){E.cache++,vl()},Bt.onComplete=function(){Qe.tween=0,lt&&lt.call(rn)},rn=Qe.tween=Le.to($,Bt),rn};return $[te]=Q,Q.wheelHandler=function(){return Ae.tween&&Ae.tween.kill()&&(Ae.tween=0)},Ir($,"wheel",Q.wheelHandler),vn.isTouch&&Ir($,"touchmove",Q.wheelHandler),Ae},vn=function(){function De(ge,Q){Ot||De.register(Le)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),Gt(this),this.init(ge,Q)}var $=De.prototype;return $.init=function(Q,te){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Te){this.update=this.refresh=this.kill=Gi;return}Q=pl(Ms(Q)||je(Q)||Q.nodeType?{trigger:Q}:Q,mo);var Ae=Q,Qe=Ae.onUpdate,Ge=Ae.toggleClass,Bt=Ae.id,wn=Ae.onToggle,jn=Ae.onRefresh,nn=Ae.scrub,rn=Ae.trigger,lt=Ae.pin,ln=Ae.pinSpacing,wi=Ae.invalidateOnRefresh,Yi=Ae.anticipatePin,sr=Ae.onScrubComplete,or=Ae.onSnapComplete,us=Ae.once,cn=Ae.snap,Ns=Ae.pinReparent,ji=Ae.pinSpacer,bn=Ae.containerAnimation,Nr=Ae.fastScrollEnd,Es=Ae.preventOverlaps,un=Q.horizontal||Q.containerAnimation&&Q.horizontal!==!1?J:Ee,cr=!nn&&nn!==0,En=le(Q.scroller||ft),ca=Le.core.getCache(En),ur=Ho(En),hs=("pinType"in Q?Q.pinType:D(En,"pinType")||ur&&"fixed")==="fixed",Ur=[Q.onEnter,Q.onLeave,Q.onEnterBack,Q.onLeaveBack],gi=cr&&Q.toggleActions.split(" "),hr="markers"in Q?Q.markers:mo.markers,Ki=ur?0:parseFloat(zr(En)["border"+un.p2+aa])||0,Fe=this,$r=Q.onRefreshInit&&function(){return Q.onRefreshInit(Fe)},Tc=au(En,ur,un),bo=pd(En,ur),Ts=0,Xr=0,Us=0,Fr=ie(En,un),Fs,Bs,Yl,Br,Vs,_e,Ke,We,It,Oe,Ln,zi,$t,Bi,Ac,ds,Aa,vr,Si,yo,ar,di,Pa,Wo,fs,Kl,Pc,kc,ua,Hs,jo,fi,ka,zo,$o,ro,_l,ha,qs;if(Fe._startClamp=Fe._endClamp=!1,Fe._dir=un,Yi*=45,Fe.scroller=En,Fe.scroll=bn?bn.time.bind(bn):Fr,Br=Fr(),Fe.vars=Q,te=te||Q.animation,"refreshPriority"in Q&&(ve=1,Q.refreshPriority===-9999&&(fu=Fe)),ca.tweenScroll=ca.tweenScroll||{top:xd(En,Ee),left:xd(En,J)},Fe.tweenTo=Fs=ca.tweenScroll[un.p],Fe.scrubDuration=function(Kt){ka=je(Kt)&&Kt,ka?fi?fi.duration(Kt):fi=Le.to(te,{ease:"expo",totalProgress:"+=0",duration:ka,paused:!0,onComplete:function(){return sr&&sr(Fe)}}):(fi&&fi.progress(1).kill(),fi=0)},te&&(te.vars.lazy=!1,te._initted&&!Fe.isReverted||te.vars.immediateRender!==!1&&Q.immediateRender!==!1&&te.duration()&&te.render(0,!0,!0),Fe.animation=te.pause(),te.scrollTrigger=Fe,Fe.scrubDuration(nn),Hs=0,Bt||(Bt=te.vars.id)),cn&&((!et(cn)||cn.push)&&(cn={snapTo:cn}),"scrollBehavior"in se.style&&Le.set(ur?[se,tt]:En,{scrollBehavior:"auto"}),E.forEach(function(Kt){return ne(Kt)&&Kt.target===(ur?rt.scrollingElement||tt:En)&&(Kt.smooth=!1)}),Yl=ne(cn.snapTo)?cn.snapTo:cn.snapTo==="labels"?Is(te):cn.snapTo==="labelsDirectional"?ih(te):cn.directional!==!1?function(Kt,$n){return Mc(cn.snapTo)(Kt,qe()-Xr<500?0:$n.direction)}:Le.utils.snap(cn.snapTo),zo=cn.duration||{min:.1,max:2},zo=et(zo)?Ie(zo.min,zo.max):Ie(zo,zo),$o=Le.delayedCall(cn.delay||ka/2||.1,function(){var Kt=Fr(),$n=qe()-Xr<500,fn=Fs.tween;if(($n||Math.abs(Fe.getVelocity())<10)&&!fn&&!ue&&Ts!==Kt){var Kn=(Kt-_e)/Bi,Pr=te&&!cr?te.totalProgress():Kn,vi=$n?0:(Pr-jo)/(qe()-dt)*1e3||0,kr=Le.utils.clamp(-Kn,1-Kn,Wt(vi/2)*vi/.185),li=Kn+(cn.inertia===!1?0:kr),Mi=Ie(0,1,Yl(li,Fe)),br=Math.round(_e+Mi*Bi),Zi=cn,Io=Zi.onStart,yr=Zi.onInterrupt,Gs=Zi.onComplete;if(Kt<=Ke&&Kt>=_e&&br!==Kt){if(fn&&!fn._initted&&fn.data<=Wt(br-Kt))return;cn.inertia===!1&&(kr=Mi-Kn),Fs(br,{duration:zo(Wt(Math.max(Wt(li-Pr),Wt(Mi-Pr))*.185/vi/.05||0)),ease:cn.ease||"power3",data:Wt(br-Kt),onInterrupt:function(){return $o.restart(!0)&&yr&&yr(Fe)},onComplete:function(){Fe.update(),Ts=Fr(),Hs=jo=te&&!cr?te.totalProgress():Fe.progress,or&&or(Fe),Gs&&Gs(Fe)}},Kt,kr*Bi,br-Kt-kr*Bi),Io&&Io(Fe,Fs.tween)}}else Fe.isActive&&Ts!==Kt&&$o.restart(!0)}).pause()),Bt&&(md[Bt]=Fe),rn=Fe.trigger=le(rn||lt!==!0&&lt),qs=rn&&rn._gsap&&rn._gsap.stRevert,qs&&(qs=qs(Fe)),lt=lt===!0?rn:le(lt),Ms(Ge)&&(Ge={targets:rn,className:Ge}),lt&&(ln===!1||ln===_n||(ln=!ln&&lt.parentNode&&lt.parentNode.style&&zr(lt.parentNode).display==="flex"?!1:zn),Fe.pin=lt,Bs=Le.core.getCache(lt),Bs.spacer?Ac=Bs.pinState:(ji&&(ji=le(ji),ji&&!ji.nodeType&&(ji=ji.current||ji.nativeElement),Bs.spacerIsNative=!!ji,ji&&(Bs.spacerState=oh(ji))),Bs.spacer=vr=ji||rt.createElement("div"),vr.classList.add("pin-spacer"),Bt&&vr.classList.add("pin-spacer-"+Bt),Bs.pinState=Ac=oh(lt)),Q.force3D!==!1&&Le.set(lt,{force3D:!0}),Fe.spacer=vr=Bs.spacer,ua=zr(lt),Wo=ua[ln+un.os2],yo=Le.getProperty(lt),ar=Le.quickSetter(lt,un.a,Qi),jr(lt,vr,ua),Aa=oh(lt)),hr){zi=et(hr)?pl(hr,Wl):Wl,Oe=cu("scroller-start",Bt,En,un,zi,0),Ln=cu("scroller-end",Bt,En,un,zi,0,Oe),Si=Oe["offset"+un.op.d2];var Rn=le(D(En,"content")||En);We=this.markerStart=cu("start",Bt,Rn,un,zi,Si,0,bn),It=this.markerEnd=cu("end",Bt,Rn,un,zi,Si,0,bn),bn&&(ha=Le.quickSetter([We,It],un.a,Qi)),!hs&&!(k.length&&D(En,"fixedMarkers")===!0)&&(ql(ur?se:En),Le.set([Oe,Ln],{force3D:!0}),Kl=Le.quickSetter(Oe,un.a,Qi),kc=Le.quickSetter(Ln,un.a,Qi))}if(bn){var dn=bn.vars.onUpdate,bi=bn.vars.onUpdateParams;bn.eventCallback("onUpdate",function(){Fe.update(0,0,1),dn&&dn.apply(bn,bi||[])})}if(Fe.previous=function(){return Fn[Fn.indexOf(Fe)-1]},Fe.next=function(){return Fn[Fn.indexOf(Fe)+1]},Fe.revert=function(Kt,$n){if(!$n)return Fe.kill(!0);var fn=Kt!==!1||!Fe.enabled,Kn=me;fn!==Fe.isReverted&&(fn&&(ro=Math.max(Fr(),Fe.scroll.rec||0),Us=Fe.progress,_l=te&&te.progress()),We&&[We,It,Oe,Ln].forEach(function(Pr){return Pr.style.display=fn?"none":"block"}),fn&&(me=Fe,Fe.update(fn)),lt&&(!Ns||!Fe.isActive)&&(fn?Zg(lt,vr,Ac):jr(lt,vr,zr(lt),fs)),fn||Fe.update(fn),me=Kn,Fe.isReverted=fn)},Fe.refresh=function(Kt,$n,fn,Kn){if(!((me||!Fe.enabled)&&!$n)){if(lt&&Kt&&Lt){Ir(De,"scrollEnd",T0);return}!no&&$r&&$r(Fe),me=Fe,Fs.tween&&!fn&&(Fs.tween.kill(),Fs.tween=0),fi&&fi.pause(),wi&&te&&te.revert({kill:!1}).invalidate(),Fe.isReverted||Fe.revert(!0,!0),Fe._subPinOffset=!1;var Pr=Tc(),vi=bo(),kr=bn?bn.duration():oa(En,un),li=Bi<=.01,Mi=0,br=Kn||0,Zi=et(fn)?fn.end:Q.end,Io=Q.endTrigger||rn,yr=et(fn)?fn.start:Q.start||(Q.start===0||!rn?0:lt?"0 0":"0 100%"),Gs=Fe.pinnedContainer=Q.pinnedContainer&&le(Q.pinnedContainer,Fe),xo=rn&&Math.max(0,Fn.indexOf(Fe))||0,so=xo,dr,fr,da,Rc,tr,Yr,Ra,Xf,O0,Oc,No,fa,uh;for(hr&&et(fn)&&(fa=Le.getProperty(Oe,un.p),uh=Le.getProperty(Ln,un.p));so--;)Yr=Fn[so],Yr.end||Yr.refresh(0,1)||(me=Fe),Ra=Yr.pin,Ra&&(Ra===rn||Ra===lt||Ra===Gs)&&!Yr.isReverted&&(Oc||(Oc=[]),Oc.unshift(Yr),Yr.revert(!0,!0)),Yr!==Fn[so]&&(xo--,so--);for(ne(yr)&&(yr=yr(Fe)),yr=pn(yr,"start",Fe),_e=Wf(yr,rn,Pr,un,Fr(),We,Oe,Fe,vi,Ki,hs,kr,bn,Fe._startClamp&&"_startClamp")||(lt?-.001:0),ne(Zi)&&(Zi=Zi(Fe)),Ms(Zi)&&!Zi.indexOf("+=")&&(~Zi.indexOf(" ")?Zi=(Ms(yr)?yr.split(" ")[0]:"")+Zi:(Mi=gl(Zi.substr(2),Pr),Zi=Ms(yr)?yr:(bn?Le.utils.mapRange(0,bn.duration(),bn.scrollTrigger.start,bn.scrollTrigger.end,_e):_e)+Mi,Io=rn)),Zi=pn(Zi,"end",Fe),Ke=Math.max(_e,Wf(Zi||(Io?"100% 0":kr),Io,Pr,un,Fr()+Mi,It,Ln,Fe,vi,Ki,hs,kr,bn,Fe._endClamp&&"_endClamp"))||-.001,Mi=0,so=xo;so--;)Yr=Fn[so],Ra=Yr.pin,Ra&&Yr.start-Yr._pinPush<=_e&&!bn&&Yr.end>0&&(dr=Yr.end-(Fe._startClamp?Math.max(0,Yr.start):Yr.start),(Ra===rn&&Yr.start-Yr._pinPush<_e||Ra===Gs)&&isNaN(yr)&&(Mi+=dr*(1-Yr.progress)),Ra===lt&&(br+=dr));if(_e+=Mi,Ke+=Mi,Fe._startClamp&&(Fe._startClamp+=Mi),Fe._endClamp&&!no&&(Fe._endClamp=Ke||-.001,Ke=Math.min(Ke,oa(En,un))),Bi=Ke-_e||(_e-=.01)&&.001,li&&(Us=Le.utils.clamp(0,1,Le.utils.normalize(_e,Ke,ro))),Fe._pinPush=br,We&&Mi&&(dr={},dr[un.a]="+="+Mi,Gs&&(dr[un.p]="-="+Fr()),Le.set([We,It],dr)),lt)dr=zr(lt),Rc=un===Ee,da=Fr(),di=parseFloat(yo(un.a))+br,!kr&&Ke>1&&(No=(ur?rt.scrollingElement||tt:En).style,No={style:No,value:No["overflow"+un.a.toUpperCase()]},ur&&zr(se)["overflow"+un.a.toUpperCase()]!=="scroll"&&(No.style["overflow"+un.a.toUpperCase()]="scroll")),jr(lt,vr,dr),Aa=oh(lt),fr=er(lt,!0),Xf=hs&&ie(En,Rc?J:Ee)(),ln&&(fs=[ln+un.os2,Bi+br+Qi],fs.t=vr,so=ln===zn?qo(lt,un)+Bi+br:0,so&&fs.push(un.d,so+Qi),Go(fs),Gs&&Fn.forEach(function(X){X.pin===Gs&&X.vars.pinSpacing!==!1&&(X._subPinOffset=!0)}),hs&&Fr(ro)),hs&&(tr={top:fr.top+(Rc?da-_e:Xf)+Qi,left:fr.left+(Rc?Xf:da-_e)+Qi,boxSizing:"border-box",position:"fixed"},tr[hn]=tr["max"+aa]=Math.ceil(fr.width)+Qi,tr[gn]=tr["max"+gr]=Math.ceil(fr.height)+Qi,tr[_n]=tr[_n+Wr]=tr[_n+Wi]=tr[_n+zs]=tr[_n+xi]="0",tr[zn]=dr[zn],tr[zn+Wr]=dr[zn+Wr],tr[zn+Wi]=dr[zn+Wi],tr[zn+zs]=dr[zn+zs],tr[zn+xi]=dr[zn+xi],ds=Gf(Ac,tr,Ns),no&&Fr(0)),te?(O0=te._initted,ut(1),te.render(te.duration(),!0,!0),Pa=yo(un.a)-di+Bi+br,Pc=Math.abs(Bi-Pa)>1,hs&&Pc&&ds.splice(ds.length-2,2),te.render(0,!0,!0),O0||te.invalidate(!0),te.parent||te.totalTime(te.totalTime()),ut(0)):Pa=Bi,No&&(No.value?No.style["overflow"+un.a.toUpperCase()]=No.value:No.style.removeProperty("overflow-"+un.a));else if(rn&&Fr()&&!bn)for(fr=rn.parentNode;fr&&fr!==se;)fr._pinOffset&&(_e-=fr._pinOffset,Ke-=fr._pinOffset),fr=fr.parentNode;Oc&&Oc.forEach(function(X){return X.revert(!1,!0)}),Fe.start=_e,Fe.end=Ke,Br=Vs=no?ro:Fr(),!bn&&!no&&(Br<ro&&Fr(ro),Fe.scroll.rec=0),Fe.revert(!1,!0),Xr=qe(),$o&&(Ts=-1,$o.restart(!0)),me=0,te&&cr&&(te._initted||_l)&&te.progress()!==_l&&te.progress(_l||0,!0).render(te.time(),!0,!0),(li||Us!==Fe.progress||bn)&&(te&&!cr&&te.totalProgress(bn&&_e<-.001&&!Us?Le.utils.normalize(_e,Ke,0):Us,!0),Fe.progress=li||(Br-_e)/Bi===Us?0:Us),lt&&ln&&(vr._pinOffset=Math.round(Fe.progress*Pa)),fi&&fi.invalidate(),isNaN(fa)||(fa-=Le.getProperty(Oe,un.p),uh-=Le.getProperty(Ln,un.p),ah(Oe,un,fa),ah(We,un,fa-(Kn||0)),ah(Ln,un,uh),ah(It,un,uh-(Kn||0))),li&&!no&&Fe.update(),jn&&!no&&!$t&&($t=!0,jn(Fe),$t=!1)}},Fe.getVelocity=function(){return(Fr()-Vs)/(qe()-dt)*1e3||0},Fe.endAnimation=function(){Ne(Fe.callbackAnimation),te&&(fi?fi.progress(1):te.paused()?cr||Ne(te,Fe.direction<0,1):Ne(te,te.reversed()))},Fe.labelToScroll=function(Kt){return te&&te.labels&&(_e||Fe.refresh()||_e)+te.labels[Kt]/te.duration()*Bi||0},Fe.getTrailing=function(Kt){var $n=Fn.indexOf(Fe),fn=Fe.direction>0?Fn.slice(0,$n).reverse():Fn.slice($n+1);return(Ms(Kt)?fn.filter(function(Kn){return Kn.vars.preventOverlaps===Kt}):fn).filter(function(Kn){return Fe.direction>0?Kn.end<=_e:Kn.start>=Ke})},Fe.update=function(Kt,$n,fn){if(!(bn&&!fn&&!Kt)){var Kn=no===!0?ro:Fe.scroll(),Pr=Kt?0:(Kn-_e)/Bi,vi=Pr<0?0:Pr>1?1:Pr||0,kr=Fe.progress,li,Mi,br,Zi,Io,yr,Gs,xo;if($n&&(Vs=Br,Br=bn?Fr():Kn,cn&&(jo=Hs,Hs=te&&!cr?te.totalProgress():vi)),Yi&&!vi&&lt&&!me&&!At&&Lt&&_e<Kn+(Kn-Vs)/(qe()-dt)*Yi&&(vi=1e-4),vi!==kr&&Fe.enabled){if(li=Fe.isActive=!!vi&&vi<1,Mi=!!kr&&kr<1,yr=li!==Mi,Io=yr||!!vi!=!!kr,Fe.direction=vi>kr?1:-1,Fe.progress=vi,Io&&!me&&(br=vi&&!kr?0:vi===1?1:kr===1?2:3,cr&&(Zi=!yr&&gi[br+1]!=="none"&&gi[br+1]||gi[br],xo=te&&(Zi==="complete"||Zi==="reset"||Zi in te))),Es&&(yr||xo)&&(xo||nn||!te)&&(ne(Es)?Es(Fe):Fe.getTrailing(Es).forEach(function(da){return da.endAnimation()})),cr||(fi&&!me&&!At?(fi._dp._time-fi._start!==fi._time&&fi.render(fi._dp._time-fi._start),fi.resetTo?fi.resetTo("totalProgress",vi,te._tTime/te._tDur):(fi.vars.totalProgress=vi,fi.invalidate().restart())):te&&te.totalProgress(vi,!!(me&&(Xr||Kt)))),lt){if(Kt&&ln&&(vr.style[ln+un.os2]=Wo),!hs)ar(to(di+Pa*vi));else if(Io){if(Gs=!Kt&&vi>kr&&Ke+1>Kn&&Kn+1>=oa(En,un),Ns)if(!Kt&&(li||Gs)){var so=er(lt,!0),dr=Kn-_e;jf(lt,se,so.top+(un===Ee?dr:0)+Qi,so.left+(un===Ee?0:dr)+Qi)}else jf(lt,vr);Go(li||Gs?ds:Aa),Pc&&vi<1&&li||ar(di+(vi===1&&!Gs?Pa:0))}}cn&&!Fs.tween&&!me&&!At&&$o.restart(!0),Ge&&(yr||us&&vi&&(vi<1||!Me))&&xe(Ge.targets).forEach(function(da){return da.classList[li||us?"add":"remove"](Ge.className)}),Qe&&!cr&&!Kt&&Qe(Fe),Io&&!me?(cr&&(xo&&(Zi==="complete"?te.pause().totalProgress(1):Zi==="reset"?te.restart(!0).pause():Zi==="restart"?te.restart(!0):te[Zi]()),Qe&&Qe(Fe)),(yr||!Me)&&(wn&&yr&&ot(Fe,wn),Ur[br]&&ot(Fe,Ur[br]),us&&(vi===1?Fe.kill(!1,1):Ur[br]=0),yr||(br=vi===1?1:3,Ur[br]&&ot(Fe,Ur[br]))),Nr&&!li&&Math.abs(Fe.getVelocity())>(je(Nr)?Nr:2500)&&(Ne(Fe.callbackAnimation),fi?fi.progress(1):Ne(te,Zi==="reverse"?1:!vi,1))):cr&&Qe&&!me&&Qe(Fe)}if(kc){var fr=bn?Kn/bn.duration()*(bn._caScrollDist||0):Kn;Kl(fr+(Oe._isFlipped?1:0)),kc(fr)}ha&&ha(-Kn/bn.duration()*(bn._caScrollDist||0))}},Fe.enable=function(Kt,$n){Fe.enabled||(Fe.enabled=!0,Ir(En,"resize",hu),ur||Ir(En,"scroll",uu),$r&&Ir(De,"refreshInit",$r),Kt!==!1&&(Fe.progress=Us=0,Br=Vs=Ts=Fr()),$n!==!1&&Fe.refresh())},Fe.getTween=function(Kt){return Kt&&Fs?Fs.tween:fi},Fe.setPositions=function(Kt,$n,fn,Kn){if(bn){var Pr=bn.scrollTrigger,vi=bn.duration(),kr=Pr.end-Pr.start;Kt=Pr.start+kr*Kt/vi,$n=Pr.start+kr*$n/vi}Fe.refresh(!1,!1,{start:mi(Kt,fn&&!!Fe._startClamp),end:mi($n,fn&&!!Fe._endClamp)},Kn),Fe.update()},Fe.adjustPinSpacing=function(Kt){if(fs&&Kt){var $n=fs.indexOf(un.d)+1;fs[$n]=parseFloat(fs[$n])+Kt+Qi,fs[1]=parseFloat(fs[1])+Kt+Qi,Go(fs)}},Fe.disable=function(Kt,$n){if(Fe.enabled&&(Kt!==!1&&Fe.revert(!0,!0),Fe.enabled=Fe.isActive=!1,$n||fi&&fi.pause(),ro=0,Bs&&(Bs.uncache=1),$r&&cs(De,"refreshInit",$r),$o&&($o.pause(),Fs.tween&&Fs.tween.kill()&&(Fs.tween=0)),!ur)){for(var fn=Fn.length;fn--;)if(Fn[fn].scroller===En&&Fn[fn]!==Fe)return;cs(En,"resize",hu),ur||cs(En,"scroll",uu)}},Fe.kill=function(Kt,$n){Fe.disable(Kt,$n),fi&&!$n&&fi.kill(),Bt&&delete md[Bt];var fn=Fn.indexOf(Fe);fn>=0&&Fn.splice(fn,1),fn===U&&du>0&&U--,fn=0,Fn.forEach(function(Kn){return Kn.scroller===Fe.scroller&&(fn=1)}),fn||no||(Fe.scroll.rec=0),te&&(te.scrollTrigger=null,Kt&&te.revert({kill:!1}),$n||te.kill()),We&&[We,It,Oe,Ln].forEach(function(Kn){return Kn.parentNode&&Kn.parentNode.removeChild(Kn)}),fu===Fe&&(fu=0),lt&&(Bs&&(Bs.uncache=1),fn=0,Fn.forEach(function(Kn){return Kn.pin===lt&&fn++}),fn||(Bs.spacer=0)),Q.onKill&&Q.onKill(Fe)},Fn.push(Fe),Fe.enable(!1,!1),qs&&qs(Fe),te&&te.add&&!Bi){var _r=Fe.update;Fe.update=function(){Fe.update=_r,_e||Ke||Fe.refresh()},Le.delayedCall(.01,Fe.update),Bi=.01,_e=Ke=0}else Fe.refresh();lt&&Fi()},De.register=function(Q){return Ot||(Le=Q||Hl(),dl()&&window.document&&De.enable(),Ot=Te),Ot},De.defaults=function(Q){if(Q)for(var te in Q)mo[te]=Q[te];return mo},De.disable=function(Q,te){Te=0,Fn.forEach(function(Qe){return Qe[te?"kill":"disable"](Q)}),cs(ft,"wheel",uu),cs(rt,"scroll",uu),clearInterval(nt),cs(rt,"touchcancel",Gi),cs(se,"touchstart",Gi),Gl(cs,rt,"pointerdown,touchstart,mousedown",Wn),Gl(cs,rt,"pointerup,touchend,mouseup",ls),ae.kill(),lu(cs);for(var Ae=0;Ae<E.length;Ae+=3)rh(cs,E[Ae],E[Ae+1]),rh(cs,E[Ae],E[Ae+2])},De.enable=function(){if(ft=window,rt=document,tt=rt.documentElement,se=rt.body,Le&&(xe=Le.utils.toArray,Ie=Le.utils.clamp,Gt=Le.core.context||Gi,ut=Le.core.suppressOverwrites||Gi,Dt=ft.history.scrollRestoration||"auto",Vf=ft.pageYOffset,Le.core.globals("ScrollTrigger",De),se)){Te=1,Yt=document.createElement("div"),Yt.style.height="100vh",Yt.style.position="absolute",Xi(),as(),at.register(Le),De.isTouch=at.isTouch,Vt=at.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),Ir(ft,"wheel",uu),ke=[ft,rt,tt,se],Le.matchMedia?(De.matchMedia=function(Bt){var wn=Le.matchMedia(),jn;for(jn in Bt)wn.add(jn,Bt[jn]);return wn},Le.addEventListener("matchMediaInit",function(){return Bf()}),Le.addEventListener("matchMediaRevert",function(){return bd()}),Le.addEventListener("matchMedia",function(){la(0,1),$l("matchMedia")}),Le.matchMedia("(orientation: portrait)",function(){return vd(),vd})):console.warn("Requires GSAP 3.11.0 or later"),vd(),Ir(rt,"scroll",uu);var Q=se.style,te=Q.borderTopStyle,Ae=Le.core.Animation.prototype,Qe,Ge;for(Ae.revert||Object.defineProperty(Ae,"revert",{value:function(){return this.time(-.01,!0)}}),Q.borderTopStyle="solid",Qe=er(se),Ee.m=Math.round(Qe.top+Ee.sc())||0,J.m=Math.round(Qe.left+J.sc())||0,te?Q.borderTopStyle=te:Q.removeProperty("border-top-style"),nt=setInterval(gd,250),Le.delayedCall(.5,function(){return At=0}),Ir(rt,"touchcancel",Gi),Ir(se,"touchstart",Gi),Gl(Ir,rt,"pointerdown,touchstart,mousedown",Wn),Gl(Ir,rt,"pointerup,touchend,mouseup",ls),Pe=Le.utils.checkPrefix("transform"),sh.push(Pe),Ot=qe(),ae=Le.delayedCall(.2,la).pause(),st=[rt,"visibilitychange",function(){var Bt=ft.innerWidth,wn=ft.innerHeight;rt.hidden?(V=Bt,Ve=wn):(V!==Bt||Ve!==wn)&&hu()},rt,"DOMContentLoaded",la,ft,"load",la,ft,"resize",hu],lu(Ir),Fn.forEach(function(Bt){return Bt.enable(0,1)}),Ge=0;Ge<E.length;Ge+=3)rh(cs,E[Ge],E[Ge+1]),rh(cs,E[Ge],E[Ge+2])}},De.config=function(Q){"limitCallbacks"in Q&&(Me=!!Q.limitCallbacks);var te=Q.syncInterval;te&&clearInterval(nt)||(nt=te)&&setInterval(gd,te),"ignoreMobileResize"in Q&&(Se=De.isTouch===1&&Q.ignoreMobileResize),"autoRefreshEvents"in Q&&(lu(cs)||lu(Ir,Q.autoRefreshEvents||"none"),Zt=(Q.autoRefreshEvents+"").indexOf("resize")===-1)},De.scrollerProxy=function(Q,te){var Ae=le(Q),Qe=E.indexOf(Ae),Ge=Ho(Ae);~Qe&&E.splice(Qe,Ge?6:2),te&&(Ge?k.unshift(ft,te,se,te,tt,te):k.unshift(Ae,te))},De.clearMatchMedia=function(Q){Fn.forEach(function(te){return te._ctx&&te._ctx.query===Q&&te._ctx.kill(!0,!0)})},De.isInViewport=function(Q,te,Ae){var Qe=(Ms(Q)?le(Q):Q).getBoundingClientRect(),Ge=Qe[Ae?hn:gn]*te||0;return Ae?Qe.right-Ge>0&&Qe.left+Ge<ft.innerWidth:Qe.bottom-Ge>0&&Qe.top+Ge<ft.innerHeight},De.positionInViewport=function(Q,te,Ae){Ms(Q)&&(Q=le(Q));var Qe=Q.getBoundingClientRect(),Ge=Qe[Ae?hn:gn],Bt=te==null?Ge/2:te in go?go[te]*Ge:~te.indexOf("%")?parseFloat(te)*Ge/100:parseFloat(te)||0;return Ae?(Qe.left+Bt)/ft.innerWidth:(Qe.top+Bt)/ft.innerHeight},De.killAll=function(Q){if(Fn.slice(0).forEach(function(Ae){return Ae.vars.id!=="ScrollSmoother"&&Ae.kill()}),Q!==!0){var te=jl.killAll||[];jl={},te.forEach(function(Ae){return Ae()})}},De}();vn.version="3.12.2",vn.saveStyles=function(De){return De?xe(De).forEach(function($){if($&&$.style){var ge=vo.indexOf($);ge>=0&&vo.splice(ge,5),vo.push($,$.style.cssText,$.getBBox&&$.getAttribute("transform"),Le.core.getCache($),Gt())}}):vo},vn.revert=function(De,$){return Bf(!De,$)},vn.create=function(De,$){return new vn(De,$)},vn.refresh=function(De){return De?hu():(Ot||vn.register())&&la(!0)},vn.update=function(De){return++E.cache&&vl(De===!0?2:0)},vn.clearScrollMemory=A0,vn.maxScroll=function(De,$){return oa(De,$?J:Ee)},vn.getScrollFunc=function(De,$){return ie(le(De),$?J:Ee)},vn.getById=function(De){return md[De]},vn.getAll=function(){return Fn.filter(function(De){return De.vars.id!=="ScrollSmoother"})},vn.isScrolling=function(){return!!Lt},vn.snapDirectional=Mc,vn.addEventListener=function(De,$){var ge=jl[De]||(jl[De]=[]);~ge.indexOf($)||ge.push($)},vn.removeEventListener=function(De,$){var ge=jl[De],Q=ge&&ge.indexOf($);Q>=0&&ge.splice(Q,1)},vn.batch=function(De,$){var ge=[],Q={},te=$.interval||.016,Ae=$.batchMax||1e9,Qe=function(wn,jn){var nn=[],rn=[],lt=Le.delayedCall(te,function(){jn(nn,rn),nn=[],rn=[]}).pause();return function(ln){nn.length||lt.restart(!0),nn.push(ln.trigger),rn.push(ln),Ae<=nn.length&&lt.progress(1)}},Ge;for(Ge in $)Q[Ge]=Ge.substr(0,2)==="on"&&ne($[Ge])&&Ge!=="onRefreshInit"?Qe(Ge,$[Ge]):$[Ge];return ne(Ae)&&(Ae=Ae(),Ir(vn,"refresh",function(){return Ae=$.batchMax()})),xe(De).forEach(function(Bt){var wn={};for(Ge in Q)wn[Ge]=Q[Ge];wn.trigger=Bt,ge.push(vn.create(wn))}),ge};var k0=function($,ge,Q,te){return ge>te?$(te):ge<0&&$(0),Q>te?(te-ge)/(Q-ge):Q<0?ge/(ge-Q):1},_o=function De($,ge){ge===!0?$.style.removeProperty("touch-action"):$.style.touchAction=ge===!0?"auto":ge?"pan-"+ge+(at.isTouch?" pinch-zoom":""):"none",$===tt&&De(se,ge)},lh={auto:1,scroll:1},R0=function($){var ge=$.event,Q=$.target,te=$.axis,Ae=(ge.changedTouches?ge.changedTouches[0]:ge).target,Qe=Ae._gsap||Le.core.getCache(Ae),Ge=qe(),Bt;if(!Qe._isScrollT||Ge-Qe._isScrollT>2e3){for(;Ae&&Ae!==se&&(Ae.scrollHeight<=Ae.clientHeight&&Ae.scrollWidth<=Ae.clientWidth||!(lh[(Bt=zr(Ae)).overflowY]||lh[Bt.overflowX]));)Ae=Ae.parentNode;Qe._isScroll=Ae&&Ae!==Q&&!Ho(Ae)&&(lh[(Bt=zr(Ae)).overflowY]||lh[Bt.overflowX]),Qe._isScrollT=Ge}(Qe._isScroll||te==="x")&&(ge.stopPropagation(),ge._gsapAllow=!0)},Cs=function($,ge,Q,te){return at.create({target:$,capture:!0,debounce:!1,lockAxis:!0,type:ge,onWheel:te=te&&R0,onPress:te,onDrag:te,onScroll:te,onEnable:function(){return Q&&Ir(rt,at.eventTypes[0],Bn,!1,!0)},onDisable:function(){return cs(rt,at.eventTypes[0],Bn,!0)}})},ch=/(input|label|select|textarea)/i,wd,Bn=function($){var ge=ch.test($.target.tagName);(ge||wd)&&($._gsapAllow=!0,wd=ge)},Xl=function($){et($)||($={}),$.preventDefault=$.isNormalizer=$.allowClicks=!0,$.type||($.type="wheel,touch"),$.debounce=!!$.debounce,$.id=$.id||"normalizer";var ge=$,Q=ge.normalizeScrollX,te=ge.momentum,Ae=ge.allowNestedScroll,Qe=ge.onRelease,Ge,Bt,wn=le($.target)||tt,jn=Le.core.globals().ScrollSmoother,nn=jn&&jn.get(),rn=Vt&&($.content&&le($.content)||nn&&$.content!==!1&&!nn.smooth()&&nn.content()),lt=ie(wn,Ee),ln=ie(wn,J),wi=1,Yi=(at.isTouch&&ft.visualViewport?ft.visualViewport.scale*ft.visualViewport.width:ft.outerWidth)/ft.innerWidth,sr=0,or=ne(te)?function(){return te(Ge)}:function(){return te||2.8},us,cn,Ns=Cs(wn,$.type,!0,Ae),ji=function(){return cn=!1},bn=Gi,Nr=Gi,Es=function(){Bt=oa(wn,Ee),Nr=Ie(Vt?1:0,Bt),Q&&(bn=Ie(0,oa(wn,J))),us=Ec},un=function(){rn._gsap.y=to(parseFloat(rn._gsap.y)+lt.offset)+"px",rn.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(rn._gsap.y)+", 0, 1)",lt.offset=lt.cacheID=0},cr=function(){if(cn){requestAnimationFrame(ji);var hr=to(Ge.deltaY/2),Ki=Nr(lt.v-hr);if(rn&&Ki!==lt.v+lt.offset){lt.offset=Ki-lt.v;var Fe=to((parseFloat(rn&&rn._gsap.y)||0)-lt.offset);rn.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+Fe+", 0, 1)",rn._gsap.y=Fe+"px",lt.cacheID=E.cache,vl()}return!0}lt.offset&&un(),cn=!0},En,ca,ur,hs,Ur=function(){Es(),En.isActive()&&En.vars.scrollY>Bt&&(lt()>Bt?En.progress(1)&&lt(Bt):En.resetTo("scrollY",Bt))};return rn&&Le.set(rn,{y:"+=0"}),$.ignoreCheck=function(gi){return Vt&&gi.type==="touchmove"&&cr()||wi>1.05&&gi.type!=="touchstart"||Ge.isGesturing||gi.touches&&gi.touches.length>1},$.onPress=function(){cn=!1;var gi=wi;wi=to((ft.visualViewport&&ft.visualViewport.scale||1)/Yi),En.pause(),gi!==wi&&_o(wn,wi>1.01?!0:Q?!1:"x"),ca=ln(),ur=lt(),Es(),us=Ec},$.onRelease=$.onGestureStart=function(gi,hr){if(lt.offset&&un(),!hr)hs.restart(!0);else{E.cache++;var Ki=or(),Fe,$r;Q&&(Fe=ln(),$r=Fe+Ki*.05*-gi.velocityX/.227,Ki*=k0(ln,Fe,$r,oa(wn,J)),En.vars.scrollX=bn($r)),Fe=lt(),$r=Fe+Ki*.05*-gi.velocityY/.227,Ki*=k0(lt,Fe,$r,oa(wn,Ee)),En.vars.scrollY=Nr($r),En.invalidate().duration(Ki).play(.01),(Vt&&En.vars.scrollY>=Bt||Fe>=Bt-1)&&Le.to({},{onUpdate:Ur,duration:Ki})}Qe&&Qe(gi)},$.onWheel=function(){En._ts&&En.pause(),qe()-sr>1e3&&(us=0,sr=qe())},$.onChange=function(gi,hr,Ki,Fe,$r){if(Ec!==us&&Es(),hr&&Q&&ln(bn(Fe[2]===hr?ca+(gi.startX-gi.x):ln()+hr-Fe[1])),Ki){lt.offset&&un();var Tc=$r[2]===Ki,bo=Tc?ur+gi.startY-gi.y:lt()+Ki-$r[1],Ts=Nr(bo);Tc&&bo!==Ts&&(ur+=Ts-bo),lt(Ts)}(Ki||hr)&&vl()},$.onEnable=function(){_o(wn,Q?!1:"x"),vn.addEventListener("refresh",Ur),Ir(ft,"resize",Ur),lt.smooth&&(lt.target.style.scrollBehavior="auto",lt.smooth=ln.smooth=!1),Ns.enable()},$.onDisable=function(){_o(wn,!0),cs(ft,"resize",Ur),vn.removeEventListener("refresh",Ur),Ns.kill()},$.lockAxis=$.lockAxis!==!1,Ge=new at($),Ge.iOS=Vt,Vt&&!lt()&&lt(1),Vt&&Le.ticker.add(Gi),hs=Ge._dc,En=Le.to(Ge,{ease:"power4",paused:!0,scrollX:Q?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:$f(lt,lt(),function(){return En.pause()})},onUpdate:vl,onComplete:hs.vars.onComplete}),Ge};vn.sort=function(De){return Fn.sort(De||function($,ge){return($.vars.refreshPriority||0)*-1e6+$.start-(ge.start+(ge.vars.refreshPriority||0)*-1e6)})},vn.observe=function(De){return new at(De)},vn.normalizeScroll=function(De){if(typeof De>"u")return we;if(De===!0&&we)return we.enable();if(De===!1)return we&&we.kill();var $=De instanceof at?De:Xl(De);return we&&we.target===$.target&&we.kill(),Ho($.target)&&(we=$),$},vn.core={_getVelocityProp:be,_inputObserver:Cs,_scrollers:E,_proxies:k,bridge:{ss:function(){Lt||$l("scrollStart"),Lt=qe()},ref:function(){return me}}},Hl()&&Le.registerPlugin(vn),t.ScrollTrigger=vn,t.default=vn,typeof window>"u"||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete window.default})})(mT,mT.exports);var $ct=mT.exports;function Fh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function dV(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}/*!
 * GSAP 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Fl={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},gg={duration:.5,overwrite:!1,delay:0},d6,ea,ys,gc=1e8,wr=1/gc,gT=Math.PI*2,Xct=gT/4,Yct=0,fV=Math.sqrt,Kct=Math.cos,Zct=Math.sin,Do=function(e){return typeof e=="string"},ws=function(e){return typeof e=="function"},nd=function(e){return typeof e=="number"},f6=function(e){return typeof e>"u"},$u=function(e){return typeof e=="object"},Qa=function(e){return e!==!1},p6=function(){return typeof window<"u"},Fx=function(e){return ws(e)||Do(e)},pV=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ta=Array.isArray,vT=/(?:-?\.?\d|\.)+/gi,mV=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Im=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,_C=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,gV=/[+-]=-?[.\d]+/,vV=/[^,'"\[\]\s]+/gi,Jct=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Qr,oc,_T,m6,Bl={},Jw={},_V,bV=function(e){return(Jw=r0(e,Bl))&&al},g6=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Qw=function(e,t){return!t&&console.warn(e)},yV=function(e,t){return e&&(Bl[e]=t)&&Jw&&(Jw[e]=t)||Bl},a_=function(){return 0},Qct={suppressEvents:!0,isStart:!0,kill:!1},gw={suppressEvents:!0,kill:!1},eut={suppressEvents:!0},v6={},af=[],bT={},xV,Rl={},bC={},IL=30,vw=[],_6="",b6=function(e){var t=e[0],n,r;if($u(t)||ws(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(r=vw.length;r--&&!vw[r].targetTest(t););n=vw[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new WV(e[r],n)))||e.splice(r,1);return e},qp=function(e){return e._gsap||b6(vc(e))[0]._gsap},wV=function(e,t,n){return(n=e[t])&&ws(n)?e[t]():f6(n)&&e.getAttribute&&e.getAttribute(t)||n},el=function(e,t){return(e=e.split(",")).forEach(t)||e},Rs=function(e){return Math.round(e*1e5)/1e5||0},Uo=function(e){return Math.round(e*1e7)/1e7||0},Wm=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+r:n==="-"?e-r:n==="*"?e*r:e/r},tut=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},e2=function(){var e=af.length,t=af.slice(0),n,r;for(bT={},af.length=0,n=0;n<e;n++)r=t[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},SV=function(e,t,n,r){af.length&&!ea&&e2(),e.render(t,n,r||ea&&t<0&&(e._initted||e._startAt)),af.length&&!ea&&e2()},MV=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(vV).length<2?t:Do(e)?e.trim():e},CV=function(e){return e},wc=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},nut=function(e){return function(t,n){for(var r in n)r in t||r==="duration"&&e||r==="ease"||(t[r]=n[r])}},r0=function(e,t){for(var n in t)e[n]=t[n];return e},NL=function i(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=$u(t[n])?i(e[n]||(e[n]={}),t[n]):t[n]);return e},t2=function(e,t){var n={},r;for(r in e)r in t||(n[r]=e[r]);return n},C1=function(e){var t=e.parent||Qr,n=e.keyframes?nut(ta(e.keyframes)):wc;if(Qa(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},iut=function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0},EV=function(e,t,n,r,s){n===void 0&&(n="_first"),r===void 0&&(r="_last");var o=e[r],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},C3=function(e,t,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[n]===t&&(e[n]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},wf=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Gp=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},rut=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},yT=function(e,t,n,r){return e._startAt&&(ea?e._startAt.revert(gw):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},sut=function i(e){return!e||e._ts&&i(e.parent)},UL=function(e){return e._repeat?vg(e._tTime,e=e.duration()+e._rDelay)*e:0},vg=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},n2=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},E3=function(e){return e._end=Uo(e._start+(e._tDur/Math.abs(e._ts||e._rts||wr)||0))},T3=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Uo(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),E3(e),n._dirty||Gp(n,e)),e},TV=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=n2(e.rawTime(),t),(!t._dur||Ob(0,t.totalDuration(),n)-t._tTime>wr)&&t.render(n,!0)),Gp(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-wr}},Tu=function(e,t,n,r){return t.parent&&wf(t),t._start=Uo((nd(n)?n:n||e!==Qr?sc(e,n,t):e._time)+t._delay),t._end=Uo(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),EV(e,t,"_first","_last",e._sort?"_start":0),xT(t)||(e._recent=t),r||TV(e,t),e._ts<0&&T3(e,e._tTime),e},AV=function(e,t){return(Bl.ScrollTrigger||g6("scrollTrigger",t))&&Bl.ScrollTrigger.create(t,e)},PV=function(e,t,n,r,s){if(x6(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!ea&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&xV!==Il.frame)return af.push(e),e._lazy=[s,r],1},out=function i(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||i(t))},xT=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},aut=function(e,t,n,r){var s=e.ratio,o=t<0||!t&&(!e._start&&out(e)&&!(!e._initted&&xT(e))||(e._ts<0||e._dp._ts<0)&&!xT(e))?0:1,a=e._rDelay,l=0,c,u,h;if(a&&e._repeat&&(l=Ob(0,e._tDur,t),u=vg(l,a),e._yoyo&&u&1&&(o=1-o),u!==vg(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||ea||r||e._zTime===wr||!t&&e._zTime){if(!e._initted&&PV(e,t,r,n,l))return;for(h=e._zTime,e._zTime=t||(n?wr:0),n||(n=t&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&yT(e,t,n,!0),e._onUpdate&&!n&&_c(e,"onUpdate"),l&&e._repeat&&!n&&e.parent&&_c(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&wf(e,1),!n&&!ea&&(_c(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},lut=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},_g=function(e,t,n,r){var s=e._repeat,o=Uo(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Uo(o*(s+1)+e._rDelay*s):o,a>0&&!r&&T3(e,e._tTime=e._tDur*a),e.parent&&E3(e),n||Gp(e.parent,e),e},FL=function(e){return e instanceof Ya?Gp(e):_g(e,e._dur)},cut={_start:0,endTime:a_,totalDuration:a_},sc=function i(e,t,n){var r=e.labels,s=e._recent||cut,o=e.duration()>=gc?s.endTime(!1):e._dur,a,l,c;return Do(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:n).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&n&&(l=l/100*(ta(n)?n[0]:n).totalDuration()),a>1?i(e,t.substr(0,a-1),n)+l:o+l)):t==null?o:+t},E1=function(e,t,n){var r=nd(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s],a,l;if(r&&(o.duration=t[1]),o.parent=n,e){for(a=o,l=n;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Qa(l.vars.inherit)&&l.parent;o.immediateRender=Qa(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Ys(t[0],o,t[s+1])},Ff=function(e,t){return e||e===0?t(e):t},Ob=function(e,t,n){return n<e?e:n>t?t:n},Zo=function(e,t){return!Do(e)||!(t=Jct.exec(e))?"":t[1]},uut=function(e,t,n){return Ff(n,function(r){return Ob(e,t,r)})},wT=[].slice,kV=function(e,t){return e&&$u(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&$u(e[0]))&&!e.nodeType&&e!==oc},hut=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(r){var s;return Do(r)&&!t||kV(r,1)?(s=n).push.apply(s,vc(r)):n.push(r)})||n},vc=function(e,t,n){return ys&&!t&&ys.selector?ys.selector(e):Do(e)&&!n&&(_T||!bg())?wT.call((t||m6).querySelectorAll(e),0):ta(e)?hut(e,n):kV(e)?wT.call(e,0):e?[e]:[]},ST=function(e){return e=vc(e)[0]||Qw("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return vc(t,n.querySelectorAll?n:n===e?Qw("Invalid scope")||m6.createElement("div"):e)}},RV=function(e){return e.sort(function(){return .5-Math.random()})},OV=function(e){if(ws(e))return e;var t=$u(e)?e:{each:e},n=Wp(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,c=t.axis,u=r,h=r;return Do(r)?u=h={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(u=r[0],h=r[1]),function(d,f,g){var v=(g||t).length,y=o[v],_,S,w,C,E,k,O,R,A;if(!y){if(A=t.grid==="auto"?0:(t.grid||[1,gc])[1],!A){for(O=-gc;O<(O=g[A++].getBoundingClientRect().left)&&A<v;);A--}for(y=o[v]=[],_=l?Math.min(A,v)*u-.5:r%A,S=A===gc?0:l?v*h/A-.5:r/A|0,O=0,R=gc,k=0;k<v;k++)w=k%A-_,C=S-(k/A|0),y[k]=E=c?Math.abs(c==="y"?C:w):fV(w*w+C*C),E>O&&(O=E),E<R&&(R=E);r==="random"&&RV(y),y.max=O-R,y.min=R,y.v=v=(parseFloat(t.amount)||parseFloat(t.each)*(A>v?v-1:c?c==="y"?v/A:A:Math.max(A,v/A))||0)*(r==="edges"?-1:1),y.b=v<0?s-v:s,y.u=Zo(t.amount||t.each)||0,n=n&&v<0?HV(n):n}return v=(y[d]-y.min)/y.max||0,Uo(y.b+(n?n(v):v)*y.v)+y.u}},MT=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=Uo(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(nd(n)?0:Zo(n))}},LV=function(e,t){var n=ta(e),r,s;return!n&&$u(e)&&(r=n=e.radius||gc,e.values?(e=vc(e.values),(s=!nd(e[0]))&&(r*=r)):e=MT(e.increment)),Ff(t,n?ws(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=gc,u=0,h=e.length,d,f;h--;)s?(d=e[h].x-a,f=e[h].y-l,d=d*d+f*f):d=Math.abs(e[h]-a),d<c&&(c=d,u=h);return u=!r||c<=r?e[u]:o,s||u===o||nd(o)?u:u+Zo(o)}:MT(e))},DV=function(e,t,n,r){return Ff(ta(e)?!t:n===!0?!!(n=0):!r,function(){return ta(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*r)/r})},dut=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduce(function(s,o){return o(s)},r)}},fut=function(e,t){return function(n){return e(parseFloat(n))+(t||Zo(n))}},put=function(e,t,n){return IV(e,t,0,1,n)},zV=function(e,t,n){return Ff(n,function(r){return e[~~t(r)]})},mut=function i(e,t,n){var r=t-e;return ta(e)?zV(e,i(0,e.length),t):Ff(n,function(s){return(r+(s-e)%r)%r+e})},gut=function i(e,t,n){var r=t-e,s=r*2;return ta(e)?zV(e,i(0,e.length-1),t):Ff(n,function(o){return o=(s+(o-e)%s)%s||0,e+(o>r?s-o:o)})},l_=function(e){for(var t=0,n="",r,s,o,a;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a=e.charAt(r+7)==="[",s=e.substr(r+7,o-r-7).match(a?vV:vT),n+=e.substr(t,r-t)+DV(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return n+e.substr(t,e.length-t)},IV=function(e,t,n,r,s){var o=t-e,a=r-n;return Ff(s,function(l){return n+((l-e)/o*a||0)})},vut=function i(e,t,n,r){var s=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!s){var o=Do(e),a={},l,c,u,h,d;if(n===!0&&(r=1)&&(n=null),o)e={p:e},t={p:t};else if(ta(e)&&!ta(t)){for(u=[],h=e.length,d=h-2,c=1;c<h;c++)u.push(i(e[c-1],e[c]));h--,s=function(g){g*=h;var v=Math.min(d,~~g);return u[v](g-v)},n=t}else r||(e=r0(ta(e)?[]:{},e));if(!u){for(l in t)y6.call(a,e,l,"get",t[l]);s=function(g){return M6(g,a)||(o?e.p:e)}}}return Ff(n,s)},BL=function(e,t,n){var r=e.labels,s=gc,o,a,l;for(o in r)a=r[o]-t,a<0==!!n&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},_c=function(e,t,n){var r=e.vars,s=r[t],o=ys,a=e._ctx,l,c,u;if(s)return l=r[t+"Params"],c=r.callbackScope||e,n&&af.length&&e2(),a&&(ys=a),u=l?s.apply(c,l):s.call(c),ys=o,u},f1=function(e){return wf(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ea),e.progress()<1&&_c(e,"onInterrupt"),e},Nm,NV=[],UV=function(e){if(p6()&&e){e=!e.name&&e.default||e;var t=e.name,n=ws(e),r=t&&!n&&e.init?function(){this._props=[]}:e,s={init:a_,render:M6,add:y6,kill:Lut,modifier:Out,rawVars:0},o={targetTest:0,get:0,getSetter:S6,aliases:{},register:0};if(bg(),e!==r){if(Rl[t])return;wc(r,wc(t2(e,s),o)),r0(r.prototype,r0(s,t2(e,o))),Rl[r.prop=t]=r,e.targetTest&&(vw.push(r),v6[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}yV(t,r),e.register&&e.register(al,r,tl)}else e&&NV.push(e)},xr=255,p1={aqua:[0,xr,xr],lime:[0,xr,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,xr],navy:[0,0,128],white:[xr,xr,xr],olive:[128,128,0],yellow:[xr,xr,0],orange:[xr,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[xr,0,0],pink:[xr,192,203],cyan:[0,xr,xr],transparent:[xr,xr,xr,0]},yC=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*xr+.5|0},FV=function(e,t,n){var r=e?nd(e)?[e>>16,e>>8&xr,e&xr]:0:p1.black,s,o,a,l,c,u,h,d,f,g;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),p1[e])r=p1[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&xr,r&xr,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&xr,e&xr]}else if(e.substr(0,3)==="hsl"){if(r=g=e.match(vT),!t)l=+r[0]%360/360,c=+r[1]/100,u=+r[2]/100,o=u<=.5?u*(c+1):u+c-u*c,s=u*2-o,r.length>3&&(r[3]*=1),r[0]=yC(l+1/3,s,o),r[1]=yC(l,s,o),r[2]=yC(l-1/3,s,o);else if(~e.indexOf("="))return r=e.match(mV),n&&r.length<4&&(r[3]=1),r}else r=e.match(vT)||p1.transparent;r=r.map(Number)}return t&&!g&&(s=r[0]/xr,o=r[1]/xr,a=r[2]/xr,h=Math.max(s,o,a),d=Math.min(s,o,a),u=(h+d)/2,h===d?l=c=0:(f=h-d,c=u>.5?f/(2-h-d):f/(h+d),l=h===s?(o-a)/f+(o<a?6:0):h===o?(a-s)/f+2:(s-o)/f+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(u*100+.5)),n&&r.length<4&&(r[3]=1),r},BV=function(e){var t=[],n=[],r=-1;return e.split(lf).forEach(function(s){var o=s.match(Im)||[];t.push.apply(t,o),n.push(r+=o.length+1)}),t.c=n,t},VL=function(e,t,n){var r="",s=(e+r).match(lf),o=t?"hsla(":"rgba(",a=0,l,c,u,h;if(!s)return e;if(s=s.map(function(d){return(d=FV(d,t,1))&&o+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),n&&(u=BV(e),l=n.c,l.join(r)!==u.c.join(r)))for(c=e.replace(lf,"1").split(Im),h=c.length-1;a<h;a++)r+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:n).shift());if(!c)for(c=e.split(lf),h=c.length-1;a<h;a++)r+=c[a]+s[a];return r+c[h]},lf=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in p1)i+="|"+e+"\\b";return new RegExp(i+")","gi")}(),_ut=/hsl[a]?\(/,VV=function(e){var t=e.join(" "),n;if(lf.lastIndex=0,lf.test(t))return n=_ut.test(t),e[1]=VL(e[1],n),e[0]=VL(e[0],n,BV(e[1])),!0},c_,Il=function(){var i=Date.now,e=500,t=33,n=i(),r=n,s=1e3/240,o=s,a=[],l,c,u,h,d,f,g=function v(y){var _=i()-r,S=y===!0,w,C,E,k;if(_>e&&(n+=_-t),r+=_,E=r-n,w=E-o,(w>0||S)&&(k=++h.frame,d=E-h.time*1e3,h.time=E=E/1e3,o+=w+(w>=s?4:s-w),C=1),S||(l=c(v)),C)for(f=0;f<a.length;f++)a[f](E,d,k,y)};return h={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(y){return d/(1e3/(y||60))},wake:function(){_V&&(!_T&&p6()&&(oc=_T=window,m6=oc.document||{},Bl.gsap=al,(oc.gsapVersions||(oc.gsapVersions=[])).push(al.version),bV(Jw||oc.GreenSockGlobals||!oc.gsap&&oc||{}),u=oc.requestAnimationFrame,NV.forEach(UV)),l&&h.sleep(),c=u||function(y){return setTimeout(y,o-h.time*1e3+1|0)},c_=1,g(2))},sleep:function(){(u?oc.cancelAnimationFrame:clearTimeout)(l),c_=0,c=a_},lagSmoothing:function(y,_){e=y||1/0,t=Math.min(_||33,e)},fps:function(y){s=1e3/(y||240),o=h.time*1e3+s},add:function(y,_,S){var w=_?function(C,E,k,O){y(C,E,k,O),h.remove(w)}:y;return h.remove(y),a[S?"unshift":"push"](w),bg(),w},remove:function(y,_){~(_=a.indexOf(y))&&a.splice(_,1)&&f>=_&&f--},_listeners:a},h}(),bg=function(){return!c_&&Il.wake()},Di={},but=/^[\d.\-M][\d.\-,\s]/,yut=/["']/g,xut=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),r=n[0],s=1,o=n.length,a,l,c;s<o;s++)l=n[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[r]=isNaN(c)?c.replace(yut,"").trim():+c,r=l.substr(a+1).trim();return t},wut=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)},Sut=function(e){var t=(e+"").split("("),n=Di[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[xut(t[1])]:wut(e).split(",").map(MV)):Di._CE&&but.test(e)?Di._CE("",e):n},HV=function(e){return function(t){return 1-e(1-t)}},qV=function i(e,t){for(var n=e._first,r;n;)n instanceof Ya?i(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?i(n.timeline,t):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=t)),n=n._next},Wp=function(e,t){return e&&(ws(e)?e:Di[e]||Sut(e))||t},E0=function(e,t,n,r){n===void 0&&(n=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:r},o;return el(e,function(a){Di[a]=Bl[a]=s,Di[o=a.toLowerCase()]=n;for(var l in s)Di[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Di[a+"."+l]=s[l]}),s},GV=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},xC=function i(e,t,n){var r=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),o=s/gT*(Math.asin(1/r)||0),a=function(u){return u===1?1:r*Math.pow(2,-10*u)*Zct((u-o)*s)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:GV(a);return s=gT/s,l.config=function(c,u){return i(e,c,u)},l},wC=function i(e,t){t===void 0&&(t=1.70158);var n=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:GV(n);return r.config=function(s){return i(e,s)},r};el("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,e){var t=e<5?e+1:e;E0(i+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});Di.Linear.easeNone=Di.none=Di.Linear.easeIn;E0("Elastic",xC("in"),xC("out"),xC());(function(i,e){var t=1/e,n=2*t,r=2.5*t,s=function(a){return a<t?i*a*a:a<n?i*Math.pow(a-1.5/e,2)+.75:a<r?i*(a-=2.25/e)*a+.9375:i*Math.pow(a-2.625/e,2)+.984375};E0("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);E0("Expo",function(i){return i?Math.pow(2,10*(i-1)):0});E0("Circ",function(i){return-(fV(1-i*i)-1)});E0("Sine",function(i){return i===1?1:-Kct(i*Xct)+1});E0("Back",wC("in"),wC("out"),wC());Di.SteppedEase=Di.steps=Bl.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,r=e+(t?0:1),s=t?1:0,o=1-wr;return function(a){return((r*Ob(0,o,a)|0)+s)*n}}};gg.ease=Di["quad.out"];el("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return _6+=i+","+i+"Params,"});var WV=function(e,t){this.id=Yct++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:wV,this.set=t?t.getSetter:S6},u_=function(){function i(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,_g(this,+t.duration,1,1),this.data=t.data,ys&&(this._ctx=ys,ys.data.push(this)),c_||Il.wake()}var e=i.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,_g(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,r){if(bg(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(T3(this,n),!s._dp||s.parent||TV(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Tu(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===wr||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),SV(this,n,r)),this},e.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+UL(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},e.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+UL(this),r):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?vg(this._tTime,s)+1:1},e.timeScale=function(n){if(!arguments.length)return this._rts===-wr?0:this._rts;if(this._rts===n)return this;var r=this.parent&&this._ts?n2(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-wr?0:this._rts,this.totalTime(Ob(-Math.abs(this._delay),this._tDur,r),!0),E3(this),rut(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(bg(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==wr&&(this._tTime-=wr)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Tu(r,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(Qa(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?n2(r.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=eut);var r=ea;return ea=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),ea=r,this},e.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(r._ts||1),r=r._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1/0:this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,FL(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,FL(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,r){return this.totalTime(sc(this,n),Qa(r))},e.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,Qa(r))},e.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},e.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-wr:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-wr,this},e.isActive=function(){var n=this.parent||this._dp,r=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-wr)},e.eventCallback=function(n,r,s){var o=this.vars;return arguments.length>1?(r?(o[n]=r,s&&(o[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=r)):delete o[n],this):o[n]},e.then=function(n){var r=this;return new Promise(function(s){var o=ws(n)?n:CV,a=function(){var c=r.then;r.then=null,ws(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){f1(this)},i}();wc(u_.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-wr,_prom:0,_ps:!1,_rts:1});var Ya=function(i){dV(e,i);function e(n,r){var s;return n===void 0&&(n={}),s=i.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=Qa(n.sortChildren),Qr&&Tu(n.parent||Qr,Fh(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&AV(Fh(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,o){return E1(0,arguments,this),this},t.from=function(r,s,o){return E1(1,arguments,this),this},t.fromTo=function(r,s,o,a){return E1(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,C1(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Ys(r,s,sc(this,o),1),this},t.call=function(r,s,o){return Tu(this,Ys.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,c,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new Ys(r,o,sc(this,l)),this},t.staggerFrom=function(r,s,o,a,l,c,u){return o.runBackwards=1,C1(o).immediateRender=Qa(o.immediateRender),this.staggerTo(r,s,o,a,l,c,u)},t.staggerFromTo=function(r,s,o,a,l,c,u,h){return a.startAt=o,C1(a).immediateRender=Qa(a.immediateRender),this.staggerTo(r,s,a,l,c,u,h)},t.render=function(r,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=r<=0?0:Uo(r),h=this._zTime<0!=r<0&&(this._initted||!c),d,f,g,v,y,_,S,w,C,E,k,O;if(this!==Qr&&u>l&&r>=0&&(u=l),u!==this._tTime||o||h){if(a!==this._time&&c&&(u+=this._time-a,r+=this._time-a),d=u,C=this._start,w=this._ts,_=!w,h&&(c||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(k=this._yoyo,y=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(y*100+r,s,o);if(d=Uo(u%y),u===l?(v=this._repeat,d=c):(v=~~(u/y),v&&v===u/y&&(d=c,v--),d>c&&(d=c)),E=vg(this._tTime,y),!a&&this._tTime&&E!==v&&this._tTime-E*y-this._dur<=0&&(E=v),k&&v&1&&(d=c-d,O=1),v!==E&&!this._lock){var R=k&&E&1,A=R===(k&&v&1);if(v<E&&(R=!R),a=R?0:u%c?c:u,this._lock=1,this.render(a||(O?0:Uo(v*y)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&_c(this,"onRepeat"),this.vars.repeatRefresh&&!O&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,A&&(this._lock=2,a=R?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!O&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;qV(this,O)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(S=lut(this,Uo(a),Uo(d)),S&&(u-=d-(d=S._start))),this._tTime=u,this._time=d,this._act=!w,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&d&&!s&&!v&&(_c(this,"onStart"),this._tTime!==u))return this;if(d>=a&&r>=0)for(f=this._first;f;){if(g=f._next,(f._act||d>=f._start)&&f._ts&&S!==f){if(f.parent!==this)return this.render(r,s,o);if(f.render(f._ts>0?(d-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(d-f._start)*f._ts,s,o),d!==this._time||!this._ts&&!_){S=0,g&&(u+=this._zTime=-wr);break}}f=g}else{f=this._last;for(var D=r<0?r:d;f;){if(g=f._prev,(f._act||D<=f._end)&&f._ts&&S!==f){if(f.parent!==this)return this.render(r,s,o);if(f.render(f._ts>0?(D-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(D-f._start)*f._ts,s,o||ea&&(f._initted||f._startAt)),d!==this._time||!this._ts&&!_){S=0,g&&(u+=this._zTime=D?-wr:wr);break}}f=g}}if(S&&!s&&(this.pause(),S.render(d>=a?0:-wr)._zTime=d>=a?1:-1,this._ts))return this._start=C,E3(this),this.render(r,s,o);this._onUpdate&&!s&&_c(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(C===this._start||Math.abs(w)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&wf(this,1),!s&&!(r<0&&!a)&&(u||a||!l)&&(_c(this,u===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(nd(s)||(s=sc(this,s,r)),!(r instanceof u_)){if(ta(r))return r.forEach(function(a){return o.add(a,s)}),this;if(Do(r))return this.addLabel(r,s);if(ws(r))r=Ys.delayedCall(0,r);else return this}return this!==r?Tu(this,r,s):this},t.getChildren=function(r,s,o,a){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-gc);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof Ys?s&&l.push(c):(o&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return Do(r)?this.removeLabel(r):ws(r)?this.killTweensOf(r):(C3(this,r),r===this._recent&&(this._recent=this._last),Gp(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Uo(Il.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=sc(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=Ys.delayedCall(0,s||a_,o);return a.data="isPause",this._hasPause=1,Tu(this,a,sc(this,r))},t.removePause=function(r){var s=this._first;for(r=sc(this,r);s;)s._start===r&&s.data==="isPause"&&wf(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)Xd!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var o=[],a=vc(r),l=this._first,c=nd(s),u;l;)l instanceof Ys?tut(l._targets,a)&&(c?(!Xd||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var o=this,a=sc(o,r),l=s,c=l.startAt,u=l.onStart,h=l.onStartParams,d=l.immediateRender,f,g=Ys.to(o,wc({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||wr,onStart:function(){if(o.pause(),!f){var y=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());g._dur!==y&&_g(g,y,0,1).render(g._time,!0,!0),f=1}u&&u.apply(g,h||[])}},s));return d?g.render(0):g},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,wc({startAt:{time:sc(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),BL(this,sc(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),BL(this,sc(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+wr)},t.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=r);return Gp(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return i.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Gp(this)},t.totalDuration=function(r){var s=0,o=this,a=o._last,l=gc,c,u,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(h=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Tu(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;_g(o,o===Qr&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(Qr._ts&&(SV(Qr,n2(r,Qr)),xV=Il.frame),Il.frame>=IL){IL+=Fl.autoSleep||120;var s=Qr._first;if((!s||!s._ts)&&Fl.autoSleep&&Il._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Il.sleep()}}},e}(u_);wc(Ya.prototype,{_lock:0,_hasPause:0,_forcing:0});var Mut=function(e,t,n,r,s,o,a){var l=new tl(this._pt,e,t,0,1,ZV,null,s),c=0,u=0,h,d,f,g,v,y,_,S;for(l.b=n,l.e=r,n+="",r+="",(_=~r.indexOf("random("))&&(r=l_(r)),o&&(S=[n,r],o(S,e,t),n=S[0],r=S[1]),d=n.match(_C)||[];h=_C.exec(r);)g=h[0],v=r.substring(c,h.index),f?f=(f+1)%5:v.substr(-5)==="rgba("&&(f=1),g!==d[u++]&&(y=parseFloat(d[u-1])||0,l._pt={_next:l._pt,p:v||u===1?v:",",s:y,c:g.charAt(1)==="="?Wm(y,g)-y:parseFloat(g)-y,m:f&&f<4?Math.round:0},c=_C.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=a,(gV.test(r)||_)&&(l.e=0),this._pt=l,l},y6=function(e,t,n,r,s,o,a,l,c,u){ws(r)&&(r=r(s||0,e,o));var h=e[t],d=n!=="get"?n:ws(h)?c?e[t.indexOf("set")||!ws(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():h,f=ws(h)?c?Put:YV:w6,g;if(Do(r)&&(~r.indexOf("random(")&&(r=l_(r)),r.charAt(1)==="="&&(g=Wm(d,r)+(Zo(d)||0),(g||g===0)&&(r=g))),!u||d!==r||CT)return!isNaN(d*r)&&r!==""?(g=new tl(this._pt,e,t,+d||0,r-(d||0),typeof h=="boolean"?Rut:KV,0,f),c&&(g.fp=c),a&&g.modifier(a,this,e),this._pt=g):(!h&&!(t in e)&&g6(t,r),Mut.call(this,e,t,d,r,f,l||Fl.stringFilter,c))},Cut=function(e,t,n,r,s){if(ws(e)&&(e=T1(e,s,t,n,r)),!$u(e)||e.style&&e.nodeType||ta(e)||pV(e))return Do(e)?T1(e,s,t,n,r):e;var o={},a;for(a in e)o[a]=T1(e[a],s,t,n,r);return o},jV=function(e,t,n,r,s,o){var a,l,c,u;if(Rl[e]&&(a=new Rl[e]).init(s,a.rawVars?t[e]:Cut(t[e],r,s,o,n),n,r,o)!==!1&&(n._pt=l=new tl(n._pt,s,e,0,1,a.render,a,0,a.priority),n!==Nm))for(c=n._ptLookup[n._targets.indexOf(s)],u=a._props.length;u--;)c[a._props[u]]=l;return a},Xd,CT,x6=function i(e,t,n){var r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,c=r.onUpdate,u=r.onUpdateParams,h=r.callbackScope,d=r.runBackwards,f=r.yoyoEase,g=r.keyframes,v=r.autoRevert,y=e._dur,_=e._startAt,S=e._targets,w=e.parent,C=w&&w.data==="nested"?w.vars.targets:S,E=e._overwrite==="auto"&&!d6,k=e.timeline,O,R,A,D,I,q,j,Y,F,re,ee,J,Ee;if(k&&(!g||!s)&&(s="none"),e._ease=Wp(s,gg.ease),e._yEase=f?HV(Wp(f===!0?s:f,gg.ease)):0,f&&e._yoyo&&!e._repeat&&(f=e._yEase,e._yEase=e._ease,e._ease=f),e._from=!k&&!!r.runBackwards,!k||g&&!r.stagger){if(Y=S[0]?qp(S[0]).harness:0,J=Y&&r[Y.prop],O=t2(r,v6),_&&(_._zTime<0&&_.progress(1),t<0&&d&&a&&!v?_.render(-1,!0):_.revert(d&&y?gw:Qct),_._lazy=0),o){if(wf(e._startAt=Ys.set(S,wc({data:"isStart",overwrite:!1,parent:w,immediateRender:!0,lazy:!_&&Qa(l),startAt:null,delay:0,onUpdate:c,onUpdateParams:u,callbackScope:h,stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ea||!a&&!v)&&e._startAt.revert(gw),a&&y&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(d&&y&&!_){if(t&&(a=!1),A=wc({overwrite:!1,data:"isFromStart",lazy:a&&!_&&Qa(l),immediateRender:a,stagger:0,parent:w},O),J&&(A[Y.prop]=J),wf(e._startAt=Ys.set(S,A)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ea?e._startAt.revert(gw):e._startAt.render(-1,!0)),e._zTime=t,!a)i(e._startAt,wr,wr);else if(!t)return}for(e._pt=e._ptCache=0,l=y&&Qa(l)||l&&!y,R=0;R<S.length;R++){if(I=S[R],j=I._gsap||b6(S)[R]._gsap,e._ptLookup[R]=re={},bT[j.id]&&af.length&&e2(),ee=C===S?R:C.indexOf(I),Y&&(F=new Y).init(I,J||O,e,ee,C)!==!1&&(e._pt=D=new tl(e._pt,I,F.name,0,1,F.render,F,0,F.priority),F._props.forEach(function(le){re[le]=D}),F.priority&&(q=1)),!Y||J)for(A in O)Rl[A]&&(F=jV(A,O,e,ee,I,C))?F.priority&&(q=1):re[A]=D=y6.call(e,I,A,"get",O[A],ee,C,0,r.stringFilter);e._op&&e._op[R]&&e.kill(I,e._op[R]),E&&e._pt&&(Xd=e,Qr.killTweensOf(I,re,e.globalTime(t)),Ee=!e.parent,Xd=0),e._pt&&l&&(bT[j.id]=1)}q&&JV(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!Ee,g&&t<=0&&k.render(gc,!0,!0)},Eut=function(e,t,n,r,s,o,a){var l=(e._pt&&e._ptCache||(e._ptCache={}))[t],c,u,h,d;if(!l)for(l=e._ptCache[t]=[],h=e._ptLookup,d=e._targets.length;d--;){if(c=h[d][t],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==t&&c.fp!==t;)c=c._next;if(!c)return CT=1,e.vars[t]="+=0",x6(e,a),CT=0,1;l.push(c)}for(d=l.length;d--;)u=l[d],c=u._pt||u,c.s=(r||r===0)&&!s?r:c.s+(r||0)+o*c.c,c.c=n-c.s,u.e&&(u.e=Rs(n)+Zo(u.e)),u.b&&(u.b=c.s+Zo(u.b))},Tut=function(e,t){var n=e[0]?qp(e[0]).harness:0,r=n&&n.aliases,s,o,a,l;if(!r)return t;s=r0({},t);for(o in r)if(o in s)for(l=r[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},Aut=function(e,t,n,r){var s=t.ease||r||"power1.inOut",o,a;if(ta(t))a=n[e]||(n[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=n[o]||(n[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},T1=function(e,t,n,r,s){return ws(e)?e.call(t,n,r,s):Do(e)&&~e.indexOf("random(")?l_(e):e},$V=_6+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",XV={};el($V+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return XV[i]=1});var Ys=function(i){dV(e,i);function e(n,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=i.call(this,o?r:C1(r))||this;var l=a.vars,c=l.duration,u=l.delay,h=l.immediateRender,d=l.stagger,f=l.overwrite,g=l.keyframes,v=l.defaults,y=l.scrollTrigger,_=l.yoyoEase,S=r.parent||Qr,w=(ta(n)||pV(n)?nd(n[0]):"length"in r)?[n]:vc(n),C,E,k,O,R,A,D,I;if(a._targets=w.length?b6(w):Qw("GSAP target "+n+" not found. https://greensock.com",!Fl.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,g||d||Fx(c)||Fx(u)){if(r=a.vars,C=a.timeline=new Ya({data:"nested",defaults:v||{},targets:S&&S.data==="nested"?S.vars.targets:w}),C.kill(),C.parent=C._dp=Fh(a),C._start=0,d||Fx(c)||Fx(u)){if(O=w.length,D=d&&OV(d),$u(d))for(R in d)~$V.indexOf(R)&&(I||(I={}),I[R]=d[R]);for(E=0;E<O;E++)k=t2(r,XV),k.stagger=0,_&&(k.yoyoEase=_),I&&r0(k,I),A=w[E],k.duration=+T1(c,Fh(a),E,A,w),k.delay=(+T1(u,Fh(a),E,A,w)||0)-a._delay,!d&&O===1&&k.delay&&(a._delay=u=k.delay,a._start+=u,k.delay=0),C.to(A,k,D?D(E,A,w):0),C._ease=Di.none;C.duration()?c=u=0:a.timeline=0}else if(g){C1(wc(C.vars.defaults,{ease:"none"})),C._ease=Wp(g.ease||r.ease||"none");var q=0,j,Y,F;if(ta(g))g.forEach(function(re){return C.to(w,re,">")}),C.duration();else{k={};for(R in g)R==="ease"||R==="easeEach"||Aut(R,g[R],k,g.easeEach);for(R in k)for(j=k[R].sort(function(re,ee){return re.t-ee.t}),q=0,E=0;E<j.length;E++)Y=j[E],F={ease:Y.e,duration:(Y.t-(E?j[E-1].t:0))/100*c},F[R]=Y.v,C.to(w,F,q),q+=F.duration;C.duration()<c&&C.to({},{duration:c-C.duration()})}}c||a.duration(c=C.duration())}else a.timeline=0;return f===!0&&!d6&&(Xd=Fh(a),Qr.killTweensOf(w),Xd=0),Tu(S,Fh(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(h||!c&&!g&&a._start===Uo(S._time)&&Qa(h)&&sut(Fh(a))&&S.data!=="nested")&&(a._tTime=-wr,a.render(Math.max(0,-u)||0)),y&&AV(Fh(a),y),a}var t=e.prototype;return t.render=function(r,s,o){var a=this._time,l=this._tDur,c=this._dur,u=r<0,h=r>l-wr&&!u?l:r<wr?0:r,d,f,g,v,y,_,S,w,C;if(!c)aut(this,r,s,o);else if(h!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(d=h,w=this.timeline,this._repeat){if(v=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(v*100+r,s,o);if(d=Uo(h%v),h===l?(g=this._repeat,d=c):(g=~~(h/v),g&&g===h/v&&(d=c,g--),d>c&&(d=c)),_=this._yoyo&&g&1,_&&(C=this._yEase,d=c-d),y=vg(this._tTime,v),d===a&&!o&&this._initted)return this._tTime=h,this;g!==y&&(w&&this._yEase&&qV(w,_),this.vars.repeatRefresh&&!_&&!this._lock&&(this._lock=o=1,this.render(Uo(v*g),!0).invalidate()._lock=0))}if(!this._initted){if(PV(this,u?r:d,o,s,h))return this._tTime=0,this;if(a!==this._time)return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=h,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=S=(C||this._ease)(d/c),this._from&&(this.ratio=S=1-S),d&&!a&&!s&&!g&&(_c(this,"onStart"),this._tTime!==h))return this;for(f=this._pt;f;)f.r(S,f.d),f=f._next;w&&w.render(r<0?r:!d&&_?-wr:w._dur*w._ease(d/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&yT(this,r,s,o),_c(this,"onUpdate")),this._repeat&&g!==y&&this.vars.onRepeat&&!s&&this.parent&&_c(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(u&&!this._onUpdate&&yT(this,r,!0,!0),(r||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&wf(this,1),!s&&!(u&&!a)&&(h||a||_)&&(_c(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),i.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a){c_||Il.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||x6(this,l),c=this._ease(l/this._dur),Eut(this,r,s,o,a,c,l)?this.resetTo(r,s,o,a):(T3(this,0),this.parent||EV(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?f1(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,Xd&&Xd.vars.overwrite!==!0)._first||f1(this),this.parent&&o!==this.timeline.totalDuration()&&_g(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=r?vc(r):a,c=this._ptLookup,u=this._pt,h,d,f,g,v,y,_;if((!s||s==="all")&&iut(a,l))return s==="all"&&(this._pt=0),f1(this);for(h=this._op=this._op||[],s!=="all"&&(Do(s)&&(v={},el(s,function(S){return v[S]=1}),s=v),s=Tut(a,s)),_=a.length;_--;)if(~l.indexOf(a[_])){d=c[_],s==="all"?(h[_]=s,g=d,f={}):(f=h[_]=h[_]||{},g=s);for(v in g)y=d&&d[v],y&&((!("kill"in y.d)||y.d.kill(v)===!0)&&C3(this,y,"_pt"),delete d[v]),f!=="all"&&(f[v]=1)}return this._initted&&!this._pt&&u&&f1(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return E1(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return E1(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return Qr.killTweensOf(r,s,o)},e}(u_);wc(Ys.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});el("staggerTo,staggerFrom,staggerFromTo",function(i){Ys[i]=function(){var e=new Ya,t=wT.call(arguments,0);return t.splice(i==="staggerFromTo"?5:4,0,0),e[i].apply(e,t)}});var w6=function(e,t,n){return e[t]=n},YV=function(e,t,n){return e[t](n)},Put=function(e,t,n,r){return e[t](r.fp,n)},kut=function(e,t,n){return e.setAttribute(t,n)},S6=function(e,t){return ws(e[t])?YV:f6(e[t])&&e.setAttribute?kut:w6},KV=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Rut=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},ZV=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},M6=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},Out=function(e,t,n,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(e,t,n),s=o},Lut=function(e){for(var t=this._pt,n,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?C3(this,t,"_pt"):t.dep||(n=1),t=r;return!n},Dut=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},JV=function(e){for(var t=e._pt,n,r,s,o;t;){for(n=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=n}e._pt=s},tl=function(){function i(t,n,r,s,o,a,l,c,u){this.t=n,this.s=s,this.c=o,this.p=r,this.r=a||KV,this.d=l||this,this.set=c||w6,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=i.prototype;return e.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=Dut,this.m=n,this.mt=s,this.tween=r},i}();el(_6+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return v6[i]=1});Bl.TweenMax=Bl.TweenLite=Ys;Bl.TimelineLite=Bl.TimelineMax=Ya;Qr=new Ya({sortChildren:!1,defaults:gg,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Fl.stringFilter=VV;var jp=[],_w={},zut=[],HL=0,Iut=0,SC=function(e){return(_w[e]||zut).map(function(t){return t()})},ET=function(){var e=Date.now(),t=[];e-HL>2&&(SC("matchMediaInit"),jp.forEach(function(n){var r=n.queries,s=n.conditions,o,a,l,c;for(a in r)o=oc.matchMedia(r[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(n.revert(),l&&t.push(n))}),SC("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n)}),HL=e,SC("matchMedia"))},QV=function(){function i(t,n){this.selector=n&&ST(n),this.data=[],this._r=[],this.isReverted=!1,this.id=Iut++,t&&this.add(t)}var e=i.prototype;return e.add=function(n,r,s){ws(n)&&(s=r,r=n,n=ws);var o=this,a=function(){var c=ys,u=o.selector,h;return c&&c!==o&&c.data.push(o),s&&(o.selector=ST(s)),ys=o,h=r.apply(o,arguments),ws(h)&&o._r.push(h),ys=c,o.selector=u,o.isReverted=!1,h};return o.last=a,n===ws?a(o):n?o[n]=a:a},e.ignore=function(n){var r=ys;ys=null,n(this),ys=r},e.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof Ys&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,r){var s=this;if(n){var o=this.getTweens();this.data.forEach(function(l){l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(c){return o.splice(o.indexOf(c),1)}))}),o.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,c){return c.g-l.g||-1/0}).forEach(function(l){return l.t.revert(n)}),this.data.forEach(function(l){return!(l instanceof Ys)&&l.revert&&l.revert(n)}),this._r.forEach(function(l){return l(n,s)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),r)for(var a=jp.length;a--;)jp[a].id===this.id&&jp.splice(a,1)},e.revert=function(n){this.kill(n||{})},i}(),Nut=function(){function i(t){this.contexts=[],this.scope=t}var e=i.prototype;return e.add=function(n,r,s){$u(n)||(n={matches:n});var o=new QV(0,s||this.scope),a=o.conditions={},l,c,u;ys&&!o.selector&&(o.selector=ys.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=n;for(c in n)c==="all"?u=1:(l=oc.matchMedia(n[c]),l&&(jp.indexOf(o)<0&&jp.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(ET):l.addEventListener("change",ET)));return u&&r(o),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i}(),i2={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(r){return UV(r)})},timeline:function(e){return new Ya(e)},getTweensOf:function(e,t){return Qr.getTweensOf(e,t)},getProperty:function(e,t,n,r){Do(e)&&(e=vc(e)[0]);var s=qp(e||{}).get,o=n?CV:MV;return n==="native"&&(n=""),e&&(t?o((Rl[t]&&Rl[t].get||s)(e,t,n,r)):function(a,l,c){return o((Rl[a]&&Rl[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,n){if(e=vc(e),e.length>1){var r=e.map(function(u){return al.quickSetter(u,t,n)}),s=r.length;return function(u){for(var h=s;h--;)r[h](u)}}e=e[0]||{};var o=Rl[t],a=qp(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var h=new o;Nm._pt=0,h.init(e,n?u+n:u,Nm,0,[e]),h.render(1,h),Nm._pt&&M6(1,Nm)}:a.set(e,l);return o?c:function(u){return c(e,l,n?u+n:u,a,1)}},quickTo:function(e,t,n){var r,s=al.to(e,r0((r={},r[t]="+=0.1",r.paused=!0,r),n||{})),o=function(l,c,u){return s.resetTo(t,l,c,u)};return o.tween=s,o},isTweening:function(e){return Qr.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Wp(e.ease,gg.ease)),NL(gg,e||{})},config:function(e){return NL(Fl,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,s=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!Rl[a]&&!Bl[a]&&Qw(t+" effect requires "+a+" plugin.")}),bC[t]=function(a,l,c){return n(vc(a),wc(l||{},s),c)},o&&(Ya.prototype[t]=function(a,l,c){return this.add(bC[t](a,$u(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){Di[e]=Wp(t)},parseEase:function(e,t){return arguments.length?Wp(e,t):Di},getById:function(e){return Qr.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new Ya(e),r,s;for(n.smoothChildTiming=Qa(e.smoothChildTiming),Qr.remove(n),n._dp=0,n._time=n._tTime=Qr._time,r=Qr._first;r;)s=r._next,(t||!(!r._dur&&r instanceof Ys&&r.vars.onComplete===r._targets[0]))&&Tu(n,r,r._start-r._delay),r=s;return Tu(Qr,n,0),n},context:function(e,t){return e?new QV(e,t):ys},matchMedia:function(e){return new Nut(e)},matchMediaRefresh:function(){return jp.forEach(function(e){var t=e.conditions,n,r;for(r in t)t[r]&&(t[r]=!1,n=1);n&&e.revert()})||ET()},addEventListener:function(e,t){var n=_w[e]||(_w[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=_w[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:mut,wrapYoyo:gut,distribute:OV,random:DV,snap:LV,normalize:put,getUnit:Zo,clamp:uut,splitColor:FV,toArray:vc,selector:ST,mapRange:IV,pipe:dut,unitize:fut,interpolate:vut,shuffle:RV},install:bV,effects:bC,ticker:Il,updateRoot:Ya.updateRoot,plugins:Rl,globalTimeline:Qr,core:{PropTween:tl,globals:yV,Tween:Ys,Timeline:Ya,Animation:u_,getCache:qp,_removeLinkedListItem:C3,reverting:function(){return ea},context:function(e){return e&&ys&&(ys.data.push(e),e._ctx=ys),ys},suppressOverwrites:function(e){return d6=e}}};el("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return i2[i]=Ys[i]});Il.add(Ya.updateRoot);Nm=i2.to({},{duration:0});var Uut=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},Fut=function(e,t){var n=e._targets,r,s,o;for(r in t)for(s=n.length;s--;)o=e._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=Uut(o,r)),o&&o.modifier&&o.modifier(t[r],e,n[s],r))},MC=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,c;if(Do(s)&&(l={},el(s,function(u){return l[u]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}Fut(a,s)}}}},al=i2.registerPlugin({name:"attr",init:function(e,t,n,r,s){var o,a,l;this.tween=n;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)ea?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},MC("roundProps",MT),MC("modifiers"),MC("snap",LV))||i2;Ys.version=Ya.version=al.version="3.12.2";_V=1;p6()&&bg();Di.Power0;Di.Power1;Di.Power2;Di.Power3;Di.Power4;Di.Linear;Di.Quad;Di.Cubic;Di.Quart;Di.Quint;Di.Strong;Di.Elastic;Di.Back;Di.SteppedEase;Di.Bounce;Di.Sine;Di.Expo;Di.Circ;/*!
 * CSSPlugin 3.12.2
 * https://greensock.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var qL,Yd,jm,C6,Np,GL,E6,But=function(){return typeof window<"u"},id={},Cp=180/Math.PI,$m=Math.PI/180,gm=Math.atan2,WL=1e8,T6=/([A-Z])/g,Vut=/(left|right|width|margin|padding|x)/i,Hut=/[\s,\(]\S/,zu={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},TT=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},qut=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Gut=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Wut=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},eH=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},tH=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},jut=function(e,t,n){return e.style[t]=n},$ut=function(e,t,n){return e.style.setProperty(t,n)},Xut=function(e,t,n){return e._gsap[t]=n},Yut=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},Kut=function(e,t,n,r,s){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},Zut=function(e,t,n,r,s){var o=e._gsap;o[t]=n,o.renderTransform(s,o)},ns="transform",Kc=ns+"Origin",Jut=function i(e,t){var n=this,r=this.target,s=r.style;if(e in id&&s){if(this.tfm=this.tfm||{},e!=="transform")e=zu[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return n.tfm[o]=Vh(r,o)}):this.tfm[e]=r._gsap.x?r._gsap[e]:Vh(r,e);else return zu.transform.split(",").forEach(function(o){return i.call(n,o,t)});if(this.props.indexOf(ns)>=0)return;r._gsap.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Kc,t,"")),e=ns}(s||t)&&this.props.push(e,t,s[e])},nH=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Qut=function(){var e=this.props,t=this.target,n=t.style,r=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(T6,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=E6(),(!s||!s.isStart)&&!n[ns]&&(nH(n),r.uncache=1)}},iH=function(e,t){var n={target:e,props:[],revert:Qut,save:Jut};return e._gsap||al.core.getCache(e),t&&t.split(",").forEach(function(r){return n.save(r)}),n},rH,AT=function(e,t){var n=Yd.createElementNS?Yd.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Yd.createElement(e);return n.style?n:Yd.createElement(e)},Vu=function i(e,t,n){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(T6,"-$1").toLowerCase())||r.getPropertyValue(t)||!n&&i(e,yg(t)||t,1)||""},jL="O,Moz,ms,Ms,Webkit".split(","),yg=function(e,t,n){var r=t||Np,s=r.style,o=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(jL[o]+e in s););return o<0?null:(o===3?"ms":o>=0?jL[o]:"")+e},PT=function(){But()&&window.document&&(qL=window,Yd=qL.document,jm=Yd.documentElement,Np=AT("div")||{style:{}},AT("div"),ns=yg(ns),Kc=ns+"Origin",Np.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",rH=!!yg("perspective"),E6=al.core.reverting,C6=1)},CC=function i(e){var t=AT("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(jm.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),jm.removeChild(t),this.style.cssText=s,o},$L=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},sH=function(e){var t;try{t=e.getBBox()}catch{t=CC.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===CC||(t=CC.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+$L(e,["x","cx","x1"])||0,y:+$L(e,["y","cy","y1"])||0,width:0,height:0}:t},oH=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&sH(e))},h_=function(e,t){if(t){var n=e.style;t in id&&t!==Kc&&(t=ns),n.removeProperty?((t.substr(0,2)==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(t.replace(T6,"-$1").toLowerCase())):n.removeAttribute(t)}},Kd=function(e,t,n,r,s,o){var a=new tl(e._pt,t,n,0,1,o?tH:eH);return e._pt=a,a.b=r,a.e=s,e._props.push(n),a},XL={deg:1,rad:1,turn:1},eht={grid:1,flex:1},Sf=function i(e,t,n,r){var s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",a=Np.style,l=Vut.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),h=100,d=r==="px",f=r==="%",g,v,y,_;return r===o||!s||XL[r]||XL[o]?s:(o!=="px"&&!d&&(s=i(e,t,n,"px")),_=e.getCTM&&oH(e),(f||o==="%")&&(id[t]||~t.indexOf("adius"))?(g=_?e.getBBox()[l?"width":"height"]:e[u],Rs(f?s/g*h:s/100*g)):(a[l?"width":"height"]=h+(d?o:r),v=~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,_&&(v=(e.ownerSVGElement||{}).parentNode),(!v||v===Yd||!v.appendChild)&&(v=Yd.body),y=v._gsap,y&&f&&y.width&&l&&y.time===Il.time&&!y.uncache?Rs(s/y.width*h):((f||o==="%")&&!eht[Vu(v,"display")]&&(a.position=Vu(e,"position")),v===e&&(a.position="static"),v.appendChild(Np),g=Np[u],v.removeChild(Np),a.position="absolute",l&&f&&(y=qp(v),y.time=Il.time,y.width=v[u]),Rs(d?g*s/h:g&&s?h/g*s:0))))},Vh=function(e,t,n,r){var s;return C6||PT(),t in zu&&t!=="transform"&&(t=zu[t],~t.indexOf(",")&&(t=t.split(",")[0])),id[t]&&t!=="transform"?(s=f_(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:s2(Vu(e,Kc))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=r2[t]&&r2[t](e,t,n)||Vu(e,t)||wV(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?Sf(e,t,s,n)+n:s},tht=function(e,t,n,r){if(!n||n==="none"){var s=yg(t,e,1),o=s&&Vu(e,s,1);o&&o!==n?(t=s,n=o):t==="borderColor"&&(n=Vu(e,"borderTopColor"))}var a=new tl(this._pt,e.style,t,0,1,ZV),l=0,c=0,u,h,d,f,g,v,y,_,S,w,C,E;if(a.b=n,a.e=r,n+="",r+="",r==="auto"&&(e.style[t]=r,r=Vu(e,t)||r,e.style[t]=n),u=[n,r],VV(u),n=u[0],r=u[1],d=n.match(Im)||[],E=r.match(Im)||[],E.length){for(;h=Im.exec(r);)y=h[0],S=r.substring(l,h.index),g?g=(g+1)%5:(S.substr(-5)==="rgba("||S.substr(-5)==="hsla(")&&(g=1),y!==(v=d[c++]||"")&&(f=parseFloat(v)||0,C=v.substr((f+"").length),y.charAt(1)==="="&&(y=Wm(f,y)+C),_=parseFloat(y),w=y.substr((_+"").length),l=Im.lastIndex-w.length,w||(w=w||Fl.units[t]||C,l===r.length&&(r+=w,a.e+=w)),C!==w&&(f=Sf(e,t,v,w)||0),a._pt={_next:a._pt,p:S||c===1?S:",",s:f,c:_-f,m:g&&g<4||t==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=t==="display"&&r==="none"?tH:eH;return gV.test(r)&&(a.e=0),this._pt=a,a},YL={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},nht=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(e=n,n=r,r=e),t[0]=YL[n]||n,t[1]=YL[r]||r,t.join(" ")},iht=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,r=n.style,s=t.u,o=n._gsap,a,l,c;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],id[a]&&(l=1,a=a==="transformOrigin"?Kc:ns),h_(n,a);l&&(h_(n,ns),o&&(o.svg&&n.removeAttribute("transform"),f_(n,1),o.uncache=1,nH(r)))}},r2={clearProps:function(e,t,n,r,s){if(s.data!=="isFromStart"){var o=e._pt=new tl(e._pt,t,n,0,0,iht);return o.u=r,o.pr=-10,o.tween=s,e._props.push(n),1}}},d_=[1,0,0,1,0,0],aH={},lH=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},KL=function(e){var t=Vu(e,ns);return lH(t)?d_:t.substr(7).match(mV).map(Rs)},A6=function(e,t){var n=e._gsap||qp(e),r=e.style,s=KL(e),o,a,l,c;return n.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?d_:s):(s===d_&&!e.offsetParent&&e!==jm&&!n.svg&&(l=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(c=1,a=e.nextElementSibling,jm.appendChild(e)),s=KL(e),l?r.display=l:h_(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):jm.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},kT=function(e,t,n,r,s,o){var a=e._gsap,l=s||A6(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,h=a.xOffset||0,d=a.yOffset||0,f=l[0],g=l[1],v=l[2],y=l[3],_=l[4],S=l[5],w=t.split(" "),C=parseFloat(w[0])||0,E=parseFloat(w[1])||0,k,O,R,A;n?l!==d_&&(O=f*y-g*v)&&(R=C*(y/O)+E*(-v/O)+(v*S-y*_)/O,A=C*(-g/O)+E*(f/O)-(f*S-g*_)/O,C=R,E=A):(k=sH(e),C=k.x+(~w[0].indexOf("%")?C/100*k.width:C),E=k.y+(~(w[1]||w[0]).indexOf("%")?E/100*k.height:E)),r||r!==!1&&a.smooth?(_=C-c,S=E-u,a.xOffset=h+(_*f+S*v)-_,a.yOffset=d+(_*g+S*y)-S):a.xOffset=a.yOffset=0,a.xOrigin=C,a.yOrigin=E,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!n,e.style[Kc]="0px 0px",o&&(Kd(o,a,"xOrigin",c,C),Kd(o,a,"yOrigin",u,E),Kd(o,a,"xOffset",h,a.xOffset),Kd(o,a,"yOffset",d,a.yOffset)),e.setAttribute("data-svg-origin",C+" "+E)},f_=function(e,t){var n=e._gsap||new WV(e);if("x"in n&&!t&&!n.uncache)return n;var r=e.style,s=n.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=Vu(e,Kc)||"0",u,h,d,f,g,v,y,_,S,w,C,E,k,O,R,A,D,I,q,j,Y,F,re,ee,J,Ee,le,ie,be,Je,Xe,Be;return u=h=d=v=y=_=S=w=C=0,f=g=1,n.svg=!!(e.getCTM&&oH(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[ns]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[ns]!=="none"?l[ns]:"")),r.scale=r.rotate=r.translate="none"),O=A6(e,n.svg),n.svg&&(n.uncache?(J=e.getBBox(),c=n.xOrigin-J.x+"px "+(n.yOrigin-J.y)+"px",ee=""):ee=!t&&e.getAttribute("data-svg-origin"),kT(e,ee||c,!!ee||n.originIsAbsolute,n.smooth!==!1,O)),E=n.xOrigin||0,k=n.yOrigin||0,O!==d_&&(I=O[0],q=O[1],j=O[2],Y=O[3],u=F=O[4],h=re=O[5],O.length===6?(f=Math.sqrt(I*I+q*q),g=Math.sqrt(Y*Y+j*j),v=I||q?gm(q,I)*Cp:0,S=j||Y?gm(j,Y)*Cp+v:0,S&&(g*=Math.abs(Math.cos(S*$m))),n.svg&&(u-=E-(E*I+k*j),h-=k-(E*q+k*Y))):(Be=O[6],Je=O[7],le=O[8],ie=O[9],be=O[10],Xe=O[11],u=O[12],h=O[13],d=O[14],R=gm(Be,be),y=R*Cp,R&&(A=Math.cos(-R),D=Math.sin(-R),ee=F*A+le*D,J=re*A+ie*D,Ee=Be*A+be*D,le=F*-D+le*A,ie=re*-D+ie*A,be=Be*-D+be*A,Xe=Je*-D+Xe*A,F=ee,re=J,Be=Ee),R=gm(-j,be),_=R*Cp,R&&(A=Math.cos(-R),D=Math.sin(-R),ee=I*A-le*D,J=q*A-ie*D,Ee=j*A-be*D,Xe=Y*D+Xe*A,I=ee,q=J,j=Ee),R=gm(q,I),v=R*Cp,R&&(A=Math.cos(R),D=Math.sin(R),ee=I*A+q*D,J=F*A+re*D,q=q*A-I*D,re=re*A-F*D,I=ee,F=J),y&&Math.abs(y)+Math.abs(v)>359.9&&(y=v=0,_=180-_),f=Rs(Math.sqrt(I*I+q*q+j*j)),g=Rs(Math.sqrt(re*re+Be*Be)),R=gm(F,re),S=Math.abs(R)>2e-4?R*Cp:0,C=Xe?1/(Xe<0?-Xe:Xe):0),n.svg&&(ee=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!lH(Vu(e,ns)),ee&&e.setAttribute("transform",ee))),Math.abs(S)>90&&Math.abs(S)<270&&(s?(f*=-1,S+=v<=0?180:-180,v+=v<=0?180:-180):(g*=-1,S+=S<=0?180:-180)),t=t||n.uncache,n.x=u-((n.xPercent=u&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+o,n.y=h-((n.yPercent=h&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+o,n.z=d+o,n.scaleX=Rs(f),n.scaleY=Rs(g),n.rotation=Rs(v)+a,n.rotationX=Rs(y)+a,n.rotationY=Rs(_)+a,n.skewX=S+a,n.skewY=w+a,n.transformPerspective=C+o,(n.zOrigin=parseFloat(c.split(" ")[2])||0)&&(r[Kc]=s2(c)),n.xOffset=n.yOffset=0,n.force3D=Fl.force3D,n.renderTransform=n.svg?sht:rH?cH:rht,n.uncache=0,n},s2=function(e){return(e=e.split(" "))[0]+" "+e[1]},EC=function(e,t,n){var r=Zo(t);return Rs(parseFloat(t)+parseFloat(Sf(e,"x",n+"px",r)))+r},rht=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,cH(e,t)},_p="0deg",Jv="0px",bp=") ",cH=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.z,c=n.rotation,u=n.rotationY,h=n.rotationX,d=n.skewX,f=n.skewY,g=n.scaleX,v=n.scaleY,y=n.transformPerspective,_=n.force3D,S=n.target,w=n.zOrigin,C="",E=_==="auto"&&e&&e!==1||_===!0;if(w&&(h!==_p||u!==_p)){var k=parseFloat(u)*$m,O=Math.sin(k),R=Math.cos(k),A;k=parseFloat(h)*$m,A=Math.cos(k),o=EC(S,o,O*A*-w),a=EC(S,a,-Math.sin(k)*-w),l=EC(S,l,R*A*-w+w)}y!==Jv&&(C+="perspective("+y+bp),(r||s)&&(C+="translate("+r+"%, "+s+"%) "),(E||o!==Jv||a!==Jv||l!==Jv)&&(C+=l!==Jv||E?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+bp),c!==_p&&(C+="rotate("+c+bp),u!==_p&&(C+="rotateY("+u+bp),h!==_p&&(C+="rotateX("+h+bp),(d!==_p||f!==_p)&&(C+="skew("+d+", "+f+bp),(g!==1||v!==1)&&(C+="scale("+g+", "+v+bp),S.style[ns]=C||"translate(0, 0)"},sht=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.rotation,c=n.skewX,u=n.skewY,h=n.scaleX,d=n.scaleY,f=n.target,g=n.xOrigin,v=n.yOrigin,y=n.xOffset,_=n.yOffset,S=n.forceCSS,w=parseFloat(o),C=parseFloat(a),E,k,O,R,A;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=$m,c*=$m,E=Math.cos(l)*h,k=Math.sin(l)*h,O=Math.sin(l-c)*-d,R=Math.cos(l-c)*d,c&&(u*=$m,A=Math.tan(c-u),A=Math.sqrt(1+A*A),O*=A,R*=A,u&&(A=Math.tan(u),A=Math.sqrt(1+A*A),E*=A,k*=A)),E=Rs(E),k=Rs(k),O=Rs(O),R=Rs(R)):(E=h,R=d,k=O=0),(w&&!~(o+"").indexOf("px")||C&&!~(a+"").indexOf("px"))&&(w=Sf(f,"x",o,"px"),C=Sf(f,"y",a,"px")),(g||v||y||_)&&(w=Rs(w+g-(g*E+v*O)+y),C=Rs(C+v-(g*k+v*R)+_)),(r||s)&&(A=f.getBBox(),w=Rs(w+r/100*A.width),C=Rs(C+s/100*A.height)),A="matrix("+E+","+k+","+O+","+R+","+w+","+C+")",f.setAttribute("transform",A),S&&(f.style[ns]=A)},oht=function(e,t,n,r,s){var o=360,a=Do(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Cp:1),c=l-r,u=r+c+"deg",h,d;return a&&(h=s.split("_")[1],h==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),h==="cw"&&c<0?c=(c+o*WL)%o-~~(c/o)*o:h==="ccw"&&c>0&&(c=(c-o*WL)%o-~~(c/o)*o)),e._pt=d=new tl(e._pt,t,n,r,c,qut),d.e=u,d.u="deg",e._props.push(n),d},ZL=function(e,t){for(var n in t)e[n]=t[n];return e},aht=function(e,t,n){var r=ZL({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=n.style,a,l,c,u,h,d,f,g;r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),o[ns]=t,a=f_(n,1),h_(n,ns),n.setAttribute("transform",c)):(c=getComputedStyle(n)[ns],o[ns]=t,a=f_(n,1),o[ns]=c);for(l in id)c=r[l],u=a[l],c!==u&&s.indexOf(l)<0&&(f=Zo(c),g=Zo(u),h=f!==g?Sf(n,l,c,g):parseFloat(c),d=parseFloat(u),e._pt=new tl(e._pt,a,l,h,d-h,TT),e._pt.u=g||0,e._props.push(l));ZL(a,r)};el("padding,margin,Width,Radius",function(i,e){var t="Top",n="Right",r="Bottom",s="Left",o=(e<3?[t,n,r,s]:[t+s,t+n,r+n,r+s]).map(function(a){return e<2?i+a:"border"+a+i});r2[e>1?"border"+i:i]=function(a,l,c,u,h){var d,f;if(arguments.length<4)return d=o.map(function(g){return Vh(a,g,c)}),f=d.join(" "),f.split(d[0]).length===5?d[0]:f;d=(u+"").split(" "),f={},o.forEach(function(g,v){return f[g]=d[v]=d[v]||d[(v-1)/2|0]}),a.init(l,f,h)}});var uH={name:"css",register:PT,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,s){var o=this._props,a=e.style,l=n.vars.startAt,c,u,h,d,f,g,v,y,_,S,w,C,E,k,O,R;C6||PT(),this.styles=this.styles||iH(e),R=this.styles.props,this.tween=n;for(v in t)if(v!=="autoRound"&&(u=t[v],!(Rl[v]&&jV(v,t,n,r,e,s)))){if(f=typeof u,g=r2[v],f==="function"&&(u=u.call(n,r,e,s),f=typeof u),f==="string"&&~u.indexOf("random(")&&(u=l_(u)),g)g(this,e,v,u,n)&&(O=1);else if(v.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(v)+"").trim(),u+="",lf.lastIndex=0,lf.test(c)||(y=Zo(c),_=Zo(u)),_?y!==_&&(c=Sf(e,v,c,_)+_):y&&(u+=y),this.add(a,"setProperty",c,u,r,s,0,0,v),o.push(v),R.push(v,0,a[v]);else if(f!=="undefined"){if(l&&v in l?(c=typeof l[v]=="function"?l[v].call(n,r,e,s):l[v],Do(c)&&~c.indexOf("random(")&&(c=l_(c)),Zo(c+"")||(c+=Fl.units[v]||Zo(Vh(e,v))||""),(c+"").charAt(1)==="="&&(c=Vh(e,v))):c=Vh(e,v),d=parseFloat(c),S=f==="string"&&u.charAt(1)==="="&&u.substr(0,2),S&&(u=u.substr(2)),h=parseFloat(u),v in zu&&(v==="autoAlpha"&&(d===1&&Vh(e,"visibility")==="hidden"&&h&&(d=0),R.push("visibility",0,a.visibility),Kd(this,a,"visibility",d?"inherit":"hidden",h?"inherit":"hidden",!h)),v!=="scale"&&v!=="transform"&&(v=zu[v],~v.indexOf(",")&&(v=v.split(",")[0]))),w=v in id,w){if(this.styles.save(v),C||(E=e._gsap,E.renderTransform&&!t.parseTransform||f_(e,t.parseTransform),k=t.smoothOrigin!==!1&&E.smooth,C=this._pt=new tl(this._pt,a,ns,0,1,E.renderTransform,E,0,-1),C.dep=1),v==="scale")this._pt=new tl(this._pt,E,"scaleY",E.scaleY,(S?Wm(E.scaleY,S+h):h)-E.scaleY||0,TT),this._pt.u=0,o.push("scaleY",v),v+="X";else if(v==="transformOrigin"){R.push(Kc,0,a[Kc]),u=nht(u),E.svg?kT(e,u,0,k,0,this):(_=parseFloat(u.split(" ")[2])||0,_!==E.zOrigin&&Kd(this,E,"zOrigin",E.zOrigin,_),Kd(this,a,v,s2(c),s2(u)));continue}else if(v==="svgOrigin"){kT(e,u,1,k,0,this);continue}else if(v in aH){oht(this,E,v,d,S?Wm(d,S+u):u);continue}else if(v==="smoothOrigin"){Kd(this,E,"smooth",E.smooth,u);continue}else if(v==="force3D"){E[v]=u;continue}else if(v==="transform"){aht(this,u,e);continue}}else v in a||(v=yg(v)||v);if(w||(h||h===0)&&(d||d===0)&&!Hut.test(u)&&v in a)y=(c+"").substr((d+"").length),h||(h=0),_=Zo(u)||(v in Fl.units?Fl.units[v]:y),y!==_&&(d=Sf(e,v,c,_)),this._pt=new tl(this._pt,w?E:a,v,d,(S?Wm(d,S+h):h)-d,!w&&(_==="px"||v==="zIndex")&&t.autoRound!==!1?Wut:TT),this._pt.u=_||0,y!==_&&_!=="%"&&(this._pt.b=c,this._pt.r=Gut);else if(v in a)tht.call(this,e,v,c,S?S+u:u);else if(v in e)this.add(e,v,c||e[v],S?S+u:u,r,s);else if(v!=="parseTransform"){g6(v,u);continue}w||(v in a?R.push(v,0,a[v]):R.push(v,1,c||e[v])),o.push(v)}}O&&JV(this)},render:function(e,t){if(t.tween._time||!E6())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:Vh,aliases:zu,getSetter:function(e,t,n){var r=zu[t];return r&&r.indexOf(",")<0&&(t=r),t in id&&t!==Kc&&(e._gsap.x||Vh(e,"x"))?n&&GL===n?t==="scale"?Yut:Xut:(GL=n||{})&&(t==="scale"?Kut:Zut):e.style&&!f6(e.style[t])?jut:~t.indexOf("-")?$ut:S6(e,t)},core:{_removeProperty:h_,_getMatrix:A6}};al.utils.checkPrefix=yg;al.core.getStyleSaver=iH;(function(i,e,t,n){var r=el(i+","+e+","+t,function(s){id[s]=1});el(e,function(s){Fl.units[s]="deg",aH[s]=1}),zu[r[13]]=i+","+e,el(n,function(s){var o=s.split(":");zu[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");el("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){Fl.units[i]="px"});al.registerPlugin(uH);var Ei=al.registerPlugin(uH)||al;Ei.core.Tween;typeof window<"u"&&Ei.registerPlugin($ct.ScrollTrigger);var hH={},dH={},P6={exports:{}},Rr=String,fH=function(){return{isColorSupported:!1,reset:Rr,bold:Rr,dim:Rr,italic:Rr,underline:Rr,inverse:Rr,hidden:Rr,strikethrough:Rr,black:Rr,red:Rr,green:Rr,yellow:Rr,blue:Rr,magenta:Rr,cyan:Rr,white:Rr,gray:Rr,bgBlack:Rr,bgRed:Rr,bgGreen:Rr,bgYellow:Rr,bgBlue:Rr,bgMagenta:Rr,bgCyan:Rr,bgWhite:Rr}};P6.exports=fH();P6.exports.createColors=fH;var lht=P6.exports;(function(i){Object.defineProperty(i,"__esModule",{value:!0});function e(l,c){for(var u in c)Object.defineProperty(l,u,{enumerable:!0,get:c[u]})}e(i,{dim:function(){return o},default:function(){return a}});const t=n(lht);function n(l){return l&&l.__esModule?l:{default:l}}let r=new Set;function s(l,c,u){typeof process<"u"&&{}.JEST_WORKER_ID||u&&r.has(u)||(u&&r.add(u),console.warn(""),c.forEach(h=>console.warn(l,"-",h)))}function o(l){return t.default.dim(l)}const a={info(l,c){s(t.default.bold(t.default.cyan("info")),...Array.isArray(l)?[l]:[c,l])},warn(l,c){s(t.default.bold(t.default.yellow("warn")),...Array.isArray(l)?[l]:[c,l])},risk(l,c){s(t.default.bold(t.default.magenta("risk")),...Array.isArray(l)?[l]:[c,l])}}})(dH);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"default",{enumerable:!0,get:function(){return r}});const e=t(dH);function t(s){return s&&s.__esModule?s:{default:s}}function n({version:s,from:o,to:a}){e.default.warn(`${o}-color-renamed`,[`As of Tailwind CSS ${s}, \`${o}\` has been renamed to \`${a}\`.`,"Update your configuration file to silence this warning."])}const r={inherit:"inherit",current:"currentColor",transparent:"transparent",black:"#000",white:"#fff",slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},get lightBlue(){return n({version:"v2.2",from:"lightBlue",to:"sky"}),this.sky},get warmGray(){return n({version:"v3.0",from:"warmGray",to:"stone"}),this.stone},get trueGray(){return n({version:"v3.0",from:"trueGray",to:"neutral"}),this.neutral},get coolGray(){return n({version:"v3.0",from:"coolGray",to:"gray"}),this.gray},get blueGray(){return n({version:"v3.0",from:"blueGray",to:"slate"}),this.slate}}})(hH);let TC=hH;var cht=(TC.__esModule?TC:{default:TC}).default;const Mf=s0(cht);/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const Dn={LEFT:1,RIGHT:2,MIDDLE:4},ct=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),vm={NONE:0,IN:1,OUT:-1};function yp(i){return i.isPerspectiveCamera}function Hd(i){return i.isOrthographicCamera}const _m=Math.PI*2,JL=Math.PI/2,pH=1e-5,Qv=Math.PI/180;function Su(i,e,t){return Math.max(e,Math.min(t,i))}function Mr(i,e=pH){return Math.abs(i)<e}function ir(i,e,t=pH){return Mr(i-e,t)}function QL(i,e){return Math.round(i/e)*e}function e1(i){return isFinite(i)?i:i<0?-Number.MAX_VALUE:Number.MAX_VALUE}function t1(i){return Math.abs(i)<Number.MAX_VALUE?i:i*(1/0)}function Bx(i,e,t,n,r=1/0,s){n=Math.max(1e-4,n);const o=2/n,a=o*s,l=1/(1+a+.48*a*a+.235*a*a*a);let c=i-e;const u=e,h=r*n;c=Su(c,-h,h),e=i-c;const d=(t.value+o*c)*s;t.value=(t.value-o*d)*l;let f=e+(c+d)*l;return u-i>0==f>u&&(f=u,t.value=(f-u)/s),f}function eD(i,e,t,n,r=1/0,s,o){n=Math.max(1e-4,n);const a=2/n,l=a*s,c=1/(1+l+.48*l*l+.235*l*l*l);let u=e.x,h=e.y,d=e.z,f=i.x-u,g=i.y-h,v=i.z-d;const y=u,_=h,S=d,w=r*n,C=w*w,E=f*f+g*g+v*v;if(E>C){const F=Math.sqrt(E);f=f/F*w,g=g/F*w,v=v/F*w}u=i.x-f,h=i.y-g,d=i.z-v;const k=(t.x+a*f)*s,O=(t.y+a*g)*s,R=(t.z+a*v)*s;t.x=(t.x-a*k)*c,t.y=(t.y-a*O)*c,t.z=(t.z-a*R)*c,o.x=u+(f+k)*c,o.y=h+(g+O)*c,o.z=d+(v+R)*c;const A=y-i.x,D=_-i.y,I=S-i.z,q=o.x-y,j=o.y-_,Y=o.z-S;return A*q+D*j+I*Y>0&&(o.x=y,o.y=_,o.z=S,t.x=(o.x-y)/s,t.y=(o.y-_)/s,t.z=(o.z-S)/s),o}function AC(i,e){e.set(0,0),i.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=i.length,e.y/=i.length}function PC(i,e){return Hd(i)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class uht{constructor(){this._listeners={}}addEventListener(e,t){const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e)}}}const hht="2.7.0",Vx=1/8,mH=typeof window<"u",dht=mH&&/Mac/.test(navigator.platform),fht=!(mH&&"PointerEvent"in window);let Pn,tD,Hx,kC,Ba,ni,$i,bm,n1,xu,wu,xp,nD,iD,rc,i1,ym,rD,RC,sD,OC,LC,qx;class Cf extends uht{static install(e){Pn=e.THREE,tD=Object.freeze(new Pn.Vector3(0,0,0)),Hx=Object.freeze(new Pn.Vector3(0,1,0)),kC=Object.freeze(new Pn.Vector3(0,0,1)),Ba=new Pn.Vector2,ni=new Pn.Vector3,$i=new Pn.Vector3,bm=new Pn.Vector3,n1=new Pn.Vector3,xu=new Pn.Vector3,wu=new Pn.Vector3,xp=new Pn.Vector3,nD=new Pn.Vector3,iD=new Pn.Vector3,rc=new Pn.Spherical,i1=new Pn.Spherical,ym=new Pn.Box3,rD=new Pn.Box3,RC=new Pn.Sphere,sD=new Pn.Quaternion,OC=new Pn.Quaternion,LC=new Pn.Matrix4,qx=new Pn.Raycaster}static get ACTION(){return ct}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=ct.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=vm.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new Pn.Vector3,this._focalOffsetVelocity=new Pn.Vector3,this._zoomVelocity={value:0},this._truckInternal=(C,E,k)=>{let O,R;if(yp(this._camera)){const A=ni.copy(this._camera.position).sub(this._target),D=this._camera.getEffectiveFOV()*Qv,I=A.length()*Math.tan(D*.5);O=this.truckSpeed*C*I/this._elementRect.height,R=this.truckSpeed*E*I/this._elementRect.height}else if(Hd(this._camera)){const A=this._camera;O=C*(A.right-A.left)/A.zoom/this._elementRect.width,R=E*(A.top-A.bottom)/A.zoom/this._elementRect.height}else return;this.verticalDragToForward?(k?this.setFocalOffset(this._focalOffsetEnd.x+O,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(O,0,!0),this.forward(-R,!0)):k?this.setFocalOffset(this._focalOffsetEnd.x+O,this._focalOffsetEnd.y+R,this._focalOffsetEnd.z,!0):this.truck(O,R,!0)},this._rotateInternal=(C,E)=>{const k=_m*this.azimuthRotateSpeed*C/this._elementRect.height,O=_m*this.polarRotateSpeed*E/this._elementRect.height;this.rotate(k,O,!0)},this._dollyInternal=(C,E,k)=>{const O=Math.pow(.95,-C*this.dollySpeed),R=this._sphericalEnd.radius,A=this._sphericalEnd.radius*O,D=Pn.MathUtils.clamp(A,this.minDistance,this.maxDistance),I=D-A;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(A,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(I,!0),this._dollyToNoClamp(D,!0)):this._dollyToNoClamp(D,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?A:D)-R,this._dollyControlCoord.set(E,k)),this._lastDollyDirection=Math.sign(-C)},this._zoomInternal=(C,E,k)=>{const O=Math.pow(.95,C*this.dollySpeed),R=this._zoom,A=this._zoom*O;this.zoomTo(A,!0),this.dollyToCursor&&(this._changedZoom+=A-R,this._dollyControlCoord.set(E,k))},typeof Pn>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new Pn.Quaternion().setFromUnitVectors(this._camera.up,Hx),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=ct.NONE,this._target=new Pn.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new Pn.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new Pn.Spherical().setFromVector3(ni.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new Pn.Vector3,new Pn.Vector3,new Pn.Vector3,new Pn.Vector3],this._updateNearPlaneCorners(),this._boundary=new Pn.Box3(new Pn.Vector3(-1/0,-1/0,-1/0),new Pn.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new Pn.Vector2,this.mouseButtons={left:ct.ROTATE,middle:ct.DOLLY,right:ct.TRUCK,wheel:yp(this._camera)?ct.DOLLY:Hd(this._camera)?ct.ZOOM:ct.NONE},this.touches={one:ct.TOUCH_ROTATE,two:yp(this._camera)?ct.TOUCH_DOLLY_TRUCK:Hd(this._camera)?ct.TOUCH_ZOOM_TRUCK:ct.NONE,three:ct.TOUCH_TRUCK};const n=new Pn.Vector2,r=new Pn.Vector2,s=new Pn.Vector2,o=C=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const O=this._domElement.getBoundingClientRect(),R=C.clientX/O.width,A=C.clientY/O.height;if(R<this._interactiveArea.left||R>this._interactiveArea.right||A<this._interactiveArea.top||A>this._interactiveArea.bottom)return}const E=C.pointerType!=="mouse"?null:(C.buttons&Dn.LEFT)===Dn.LEFT?Dn.LEFT:(C.buttons&Dn.MIDDLE)===Dn.MIDDLE?Dn.MIDDLE:(C.buttons&Dn.RIGHT)===Dn.RIGHT?Dn.RIGHT:null;if(E!==null){const O=this._findPointerByMouseButton(E);O&&this._disposePointer(O)}if((C.buttons&Dn.LEFT)===Dn.LEFT&&this._lockedPointer)return;const k={pointerId:C.pointerId,clientX:C.clientX,clientY:C.clientY,deltaX:0,deltaY:0,mouseButton:E};this._activePointers.push(k),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),this._isDragging=!0,v(C)},a=C=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const O=this._domElement.getBoundingClientRect(),R=C.clientX/O.width,A=C.clientY/O.height;if(R<this._interactiveArea.left||R>this._interactiveArea.right||A<this._interactiveArea.top||A>this._interactiveArea.bottom)return}const E=(C.buttons&Dn.LEFT)===Dn.LEFT?Dn.LEFT:(C.buttons&Dn.MIDDLE)===Dn.MIDDLE?Dn.MIDDLE:(C.buttons&Dn.RIGHT)===Dn.RIGHT?Dn.RIGHT:null;if(E!==null){const O=this._findPointerByMouseButton(E);O&&this._disposePointer(O)}const k={pointerId:1,clientX:C.clientX,clientY:C.clientY,deltaX:0,deltaY:0,mouseButton:(C.buttons&Dn.LEFT)===Dn.LEFT?Dn.LEFT:(C.buttons&Dn.MIDDLE)===Dn.LEFT?Dn.MIDDLE:(C.buttons&Dn.RIGHT)===Dn.LEFT?Dn.RIGHT:null};this._activePointers.push(k),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("mouseup",h),this._domElement.ownerDocument.addEventListener("mousemove",c),this._domElement.ownerDocument.addEventListener("mouseup",h),this._isDragging=!0,v(C)},l=C=>{C.cancelable&&C.preventDefault();const E=C.pointerId,k=this._lockedPointer||this._findPointerById(E);if(k){if(k.clientX=C.clientX,k.clientY=C.clientY,k.deltaX=C.movementX,k.deltaY=C.movementY,this._state=0,C.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(C.buttons&Dn.LEFT)===Dn.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(C.buttons&Dn.MIDDLE)===Dn.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(C.buttons&Dn.RIGHT)===Dn.RIGHT&&(this._state=this._state|this.mouseButtons.right);y()}},c=C=>{const E=this._lockedPointer||this._findPointerById(1);E&&(E.clientX=C.clientX,E.clientY=C.clientY,E.deltaX=C.movementX,E.deltaY=C.movementY,this._state=0,(this._lockedPointer||(C.buttons&Dn.LEFT)===Dn.LEFT)&&(this._state=this._state|this.mouseButtons.left),(C.buttons&Dn.MIDDLE)===Dn.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(C.buttons&Dn.RIGHT)===Dn.RIGHT&&(this._state=this._state|this.mouseButtons.right),y())},u=C=>{const E=this._findPointerById(C.pointerId);if(!(E&&E===this._lockedPointer)){if(E&&this._disposePointer(E),C.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=ct.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=ct.NONE;_()}},h=()=>{const C=this._findPointerById(1);C&&C===this._lockedPointer||(C&&this._disposePointer(C),this._state=ct.NONE,_())};let d=-1;const f=C=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===ct.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const A=this._domElement.getBoundingClientRect(),D=C.clientX/A.width,I=C.clientY/A.height;if(D<this._interactiveArea.left||D>this._interactiveArea.right||I<this._interactiveArea.top||I>this._interactiveArea.bottom)return}if(C.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===ct.ROTATE||this.mouseButtons.wheel===ct.TRUCK){const A=performance.now();d-A<1e3&&this._getClientRect(this._elementRect),d=A}const E=dht?-1:-3,k=C.deltaMode===1?C.deltaY/E:C.deltaY/(E*10),O=this.dollyToCursor?(C.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,R=this.dollyToCursor?(C.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case ct.ROTATE:{this._rotateInternal(C.deltaX,C.deltaY),this._isUserControllingRotate=!0;break}case ct.TRUCK:{this._truckInternal(C.deltaX,C.deltaY,!1),this._isUserControllingTruck=!0;break}case ct.OFFSET:{this._truckInternal(C.deltaX,C.deltaY,!0),this._isUserControllingOffset=!0;break}case ct.DOLLY:{this._dollyInternal(-k,O,R),this._isUserControllingDolly=!0;break}case ct.ZOOM:{this._zoomInternal(-k,O,R),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},g=C=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===Cf.ACTION.NONE){const E=C instanceof PointerEvent?C.pointerId:(C instanceof MouseEvent,0),k=this._findPointerById(E);k&&this._disposePointer(k),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("mouseup",h);return}C.preventDefault()}},v=C=>{if(!this._enabled)return;if(AC(this._activePointers,Ba),this._getClientRect(this._elementRect),n.copy(Ba),r.copy(Ba),this._activePointers.length>=2){const k=Ba.x-this._activePointers[1].clientX,O=Ba.y-this._activePointers[1].clientY,R=Math.sqrt(k*k+O*O);s.set(0,R);const A=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,D=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(A,D)}if(this._state=0,!C)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in C&&C.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(C.buttons&Dn.LEFT)===Dn.LEFT&&(this._state=this._state|this.mouseButtons.left),(C.buttons&Dn.MIDDLE)===Dn.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(C.buttons&Dn.RIGHT)===Dn.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&ct.ROTATE)===ct.ROTATE||(this._state&ct.TOUCH_ROTATE)===ct.TOUCH_ROTATE||(this._state&ct.TOUCH_DOLLY_ROTATE)===ct.TOUCH_DOLLY_ROTATE||(this._state&ct.TOUCH_ZOOM_ROTATE)===ct.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&ct.TRUCK)===ct.TRUCK||(this._state&ct.TOUCH_TRUCK)===ct.TOUCH_TRUCK||(this._state&ct.TOUCH_DOLLY_TRUCK)===ct.TOUCH_DOLLY_TRUCK||(this._state&ct.TOUCH_ZOOM_TRUCK)===ct.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&ct.DOLLY)===ct.DOLLY||(this._state&ct.TOUCH_DOLLY)===ct.TOUCH_DOLLY||(this._state&ct.TOUCH_DOLLY_TRUCK)===ct.TOUCH_DOLLY_TRUCK||(this._state&ct.TOUCH_DOLLY_OFFSET)===ct.TOUCH_DOLLY_OFFSET||(this._state&ct.TOUCH_DOLLY_ROTATE)===ct.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&ct.ZOOM)===ct.ZOOM||(this._state&ct.TOUCH_ZOOM)===ct.TOUCH_ZOOM||(this._state&ct.TOUCH_ZOOM_TRUCK)===ct.TOUCH_ZOOM_TRUCK||(this._state&ct.TOUCH_ZOOM_OFFSET)===ct.TOUCH_ZOOM_OFFSET||(this._state&ct.TOUCH_ZOOM_ROTATE)===ct.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&ct.OFFSET)===ct.OFFSET||(this._state&ct.TOUCH_OFFSET)===ct.TOUCH_OFFSET||(this._state&ct.TOUCH_DOLLY_OFFSET)===ct.TOUCH_DOLLY_OFFSET||(this._state&ct.TOUCH_ZOOM_OFFSET)===ct.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},y=()=>{if(!this._enabled)return;AC(this._activePointers,Ba);const E=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,k=E?-E.deltaX:r.x-Ba.x,O=E?-E.deltaY:r.y-Ba.y;if(r.copy(Ba),((this._state&ct.ROTATE)===ct.ROTATE||(this._state&ct.TOUCH_ROTATE)===ct.TOUCH_ROTATE||(this._state&ct.TOUCH_DOLLY_ROTATE)===ct.TOUCH_DOLLY_ROTATE||(this._state&ct.TOUCH_ZOOM_ROTATE)===ct.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(k,O),this._isUserControllingRotate=!0),(this._state&ct.DOLLY)===ct.DOLLY||(this._state&ct.ZOOM)===ct.ZOOM){const R=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,A=this.dollyToCursor?(n.y-this._elementRect.y)/this._elementRect.height*-2+1:0,D=this.dollyDragInverted?-1:1;(this._state&ct.DOLLY)===ct.DOLLY?(this._dollyInternal(D*O*Vx,R,A),this._isUserControllingDolly=!0):(this._zoomInternal(D*O*Vx,R,A),this._isUserControllingZoom=!0)}if((this._state&ct.TOUCH_DOLLY)===ct.TOUCH_DOLLY||(this._state&ct.TOUCH_ZOOM)===ct.TOUCH_ZOOM||(this._state&ct.TOUCH_DOLLY_TRUCK)===ct.TOUCH_DOLLY_TRUCK||(this._state&ct.TOUCH_ZOOM_TRUCK)===ct.TOUCH_ZOOM_TRUCK||(this._state&ct.TOUCH_DOLLY_OFFSET)===ct.TOUCH_DOLLY_OFFSET||(this._state&ct.TOUCH_ZOOM_OFFSET)===ct.TOUCH_ZOOM_OFFSET||(this._state&ct.TOUCH_DOLLY_ROTATE)===ct.TOUCH_DOLLY_ROTATE||(this._state&ct.TOUCH_ZOOM_ROTATE)===ct.TOUCH_ZOOM_ROTATE){const R=Ba.x-this._activePointers[1].clientX,A=Ba.y-this._activePointers[1].clientY,D=Math.sqrt(R*R+A*A),I=s.y-D;s.set(0,D);const q=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,j=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&ct.TOUCH_DOLLY)===ct.TOUCH_DOLLY||(this._state&ct.TOUCH_DOLLY_ROTATE)===ct.TOUCH_DOLLY_ROTATE||(this._state&ct.TOUCH_DOLLY_TRUCK)===ct.TOUCH_DOLLY_TRUCK||(this._state&ct.TOUCH_DOLLY_OFFSET)===ct.TOUCH_DOLLY_OFFSET?(this._dollyInternal(I*Vx,q,j),this._isUserControllingDolly=!0):(this._zoomInternal(I*Vx,q,j),this._isUserControllingZoom=!0)}((this._state&ct.TRUCK)===ct.TRUCK||(this._state&ct.TOUCH_TRUCK)===ct.TOUCH_TRUCK||(this._state&ct.TOUCH_DOLLY_TRUCK)===ct.TOUCH_DOLLY_TRUCK||(this._state&ct.TOUCH_ZOOM_TRUCK)===ct.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(k,O,!1),this._isUserControllingTruck=!0),((this._state&ct.OFFSET)===ct.OFFSET||(this._state&ct.TOUCH_OFFSET)===ct.TOUCH_OFFSET||(this._state&ct.TOUCH_DOLLY_OFFSET)===ct.TOUCH_DOLLY_OFFSET||(this._state&ct.TOUCH_ZOOM_OFFSET)===ct.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(k,O,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},_=()=>{AC(this._activePointers,Ba),r.copy(Ba),(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",h),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",S),this._domElement.ownerDocument.addEventListener("pointerlockerror",w),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),v())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",S),this._domElement.ownerDocument.removeEventListener("pointerlockerror",w))};const S=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},w=()=>{this.unlockPointer()};this._addAllEventListeners=C=>{this._domElement=C,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),fht&&this._domElement.addEventListener("mousedown",a),this._domElement.addEventListener("pointercancel",u),this._domElement.addEventListener("wheel",f,{passive:!1}),this._domElement.addEventListener("contextmenu",g)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("mousedown",a),this._domElement.removeEventListener("pointercancel",u),this._domElement.removeEventListener("wheel",f,{passive:!1}),this._domElement.removeEventListener("contextmenu",g),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",c),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("mouseup",h),this._domElement.ownerDocument.removeEventListener("pointerlockchange",S),this._domElement.ownerDocument.removeEventListener("pointerlockerror",w))},this.cancel=()=>{this._state!==ct.NONE&&(this._state=ct.NONE,this._activePointers.length=0,_())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=Su(e.width,0,1),this._interactiveArea.height=Su(e.height,0,1),this._interactiveArea.x=Su(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Su(e.x,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,n=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,n)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,n=!1){this._isUserControllingRotate=!1;const r=Su(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=Su(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!n||ir(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&ir(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=vm.NONE,this._changedDolly=0,this._dollyToNoClamp(Su(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const n=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),a=ir(o,this._spherical.radius);if(!(n>e)&&a)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const s=!t||ir(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(n1).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const n=!t||ir(this._target.x,this._targetEnd.x,this.restThreshold)&&ir(this._target.y,this._targetEnd.y,this.restThreshold)&&ir(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(n)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=Su(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const n=!t||ir(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(n)}pan(e,t,n=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,n)}truck(e,t,n=!1){this._camera.updateMatrix(),xu.setFromMatrixColumn(this._camera.matrix,0),wu.setFromMatrixColumn(this._camera.matrix,1),xu.multiplyScalar(e),wu.multiplyScalar(-t);const r=ni.copy(xu).add(wu),s=$i.copy(this._targetEnd).add(r);return this.moveTo(s.x,s.y,s.z,n)}forward(e,t=!1){ni.setFromMatrixColumn(this._camera.matrix,0),ni.crossVectors(this._camera.up,ni),ni.multiplyScalar(e);const n=$i.copy(this._targetEnd).add(ni);return this.moveTo(n.x,n.y,n.z,t)}elevate(e,t=!1){return ni.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+ni.x,this._targetEnd.y+ni.y,this._targetEnd.z+ni.z,t)}moveTo(e,t,n,r=!1){this._isUserControllingTruck=!1;const s=ni.set(e,t,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||ir(this._target.x,this._targetEnd.x,this.restThreshold)&&ir(this._target.y,this._targetEnd.y,this.restThreshold)&&ir(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,n,r=!1){const a=ni.set(e,t,n).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(a.x,a.y,a.z,r)}fitToBox(e,t,{cover:n=!1,paddingLeft:r=0,paddingRight:s=0,paddingBottom:o=0,paddingTop:a=0}={}){const l=[],c=e.isBox3?ym.copy(e):ym.setFromObject(e);c.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const u=QL(this._sphericalEnd.theta,JL),h=QL(this._sphericalEnd.phi,JL);l.push(this.rotateTo(u,h,t));const d=ni.setFromSpherical(this._sphericalEnd).normalize(),f=sD.setFromUnitVectors(d,kC),g=ir(Math.abs(d.y),1);g&&f.multiply(OC.setFromAxisAngle(Hx,u)),f.multiply(this._yAxisUpSpaceInverse);const v=rD.makeEmpty();$i.copy(c.min).applyQuaternion(f),v.expandByPoint($i),$i.copy(c.min).setX(c.max.x).applyQuaternion(f),v.expandByPoint($i),$i.copy(c.min).setY(c.max.y).applyQuaternion(f),v.expandByPoint($i),$i.copy(c.max).setZ(c.min.z).applyQuaternion(f),v.expandByPoint($i),$i.copy(c.min).setZ(c.max.z).applyQuaternion(f),v.expandByPoint($i),$i.copy(c.max).setY(c.min.y).applyQuaternion(f),v.expandByPoint($i),$i.copy(c.max).setX(c.min.x).applyQuaternion(f),v.expandByPoint($i),$i.copy(c.max).applyQuaternion(f),v.expandByPoint($i),v.min.x-=r,v.min.y-=o,v.max.x+=s,v.max.y+=a,f.setFromUnitVectors(kC,d),g&&f.premultiply(OC.invert()),f.premultiply(this._yAxisUpSpace);const y=v.getSize(ni),_=v.getCenter($i).applyQuaternion(f);if(yp(this._camera)){const S=this.getDistanceToFitBox(y.x,y.y,y.z,n);l.push(this.moveTo(_.x,_.y,_.z,t)),l.push(this.dollyTo(S,t)),l.push(this.setFocalOffset(0,0,0,t))}else if(Hd(this._camera)){const S=this._camera,w=S.right-S.left,C=S.top-S.bottom,E=n?Math.max(w/y.x,C/y.y):Math.min(w/y.x,C/y.y);l.push(this.moveTo(_.x,_.y,_.z,t)),l.push(this.zoomTo(E,t)),l.push(this.setFocalOffset(0,0,0,t))}return Promise.all(l)}fitToSphere(e,t){const n=[],s=e instanceof Pn.Sphere?RC.copy(e):Cf.createBoundingSphere(e,RC);if(n.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),yp(this._camera)){const o=this.getDistanceToFitSphere(s.radius);n.push(this.dollyTo(o,t))}else if(Hd(this._camera)){const o=this._camera.right-this._camera.left,a=this._camera.top-this._camera.bottom,l=2*s.radius,c=Math.min(o/l,a/l);n.push(this.zoomTo(c,t))}return n.push(this.setFocalOffset(0,0,0,t)),Promise.all(n)}setLookAt(e,t,n,r,s,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=vm.NONE,this._changedDolly=0;const l=$i.set(r,s,o),c=ni.set(e,t,n);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(c.sub(l).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const u=!a||ir(this._target.x,this._targetEnd.x,this.restThreshold)&&ir(this._target.y,this._targetEnd.y,this.restThreshold)&&ir(this._target.z,this._targetEnd.z,this.restThreshold)&&ir(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&ir(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&ir(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(u)}lerpLookAt(e,t,n,r,s,o,a,l,c,u,h,d,f,g=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=vm.NONE,this._changedDolly=0;const v=ni.set(r,s,o),y=$i.set(e,t,n);rc.setFromVector3(y.sub(v).applyQuaternion(this._yAxisUpSpace));const _=bm.set(u,h,d),S=$i.set(a,l,c);i1.setFromVector3(S.sub(_).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(v.lerp(_,f));const w=i1.theta-rc.theta,C=i1.phi-rc.phi,E=i1.radius-rc.radius;this._sphericalEnd.set(rc.radius+E*f,rc.phi+C*f,rc.theta+w*f),this.normalizeRotations(),this._needsUpdate=!0,g||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const k=!g||ir(this._target.x,this._targetEnd.x,this.restThreshold)&&ir(this._target.y,this._targetEnd.y,this.restThreshold)&&ir(this._target.z,this._targetEnd.z,this.restThreshold)&&ir(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&ir(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&ir(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(k)}setPosition(e,t,n,r=!1){return this.setLookAt(e,t,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,n,r=!1){const s=this.getPosition(ni),o=this.setLookAt(s.x,s.y,s.z,e,t,n,r);return this._sphericalEnd.phi=Su(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,n,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,n),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const s=!r||ir(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&ir(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&ir(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,n){this._camera.updateMatrixWorld(),xu.setFromMatrixColumn(this._camera.matrixWorldInverse,0),wu.setFromMatrixColumn(this._camera.matrixWorldInverse,1),xp.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=ni.set(e,t,n),s=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);xu.multiplyScalar(o.x),wu.multiplyScalar(o.y),xp.multiplyScalar(o.z),ni.copy(xu).add(wu).add(xp),ni.z=ni.z+s,this.dollyTo(s,!1),this.setFocalOffset(-ni.x,ni.y,-ni.z,!1),this.moveTo(e,t,n,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,n,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new Pn.Vector4,typeof e=="number"?this._viewport.set(e,t,n,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,n,r=!1){if(PC(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=e/t,o=this._camera.getEffectiveFOV()*Qv,a=this._camera.aspect;return((r?s>a:s<a)?t:e/a)*.5/Math.tan(o*.5)+n*.5}getDistanceToFitSphere(e){if(PC(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*Qv,n=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?t:n;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new Pn.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new Pn.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e&&e instanceof Pn.Spherical?e:new Pn.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new Pn.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%_m,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=_m),this._spherical.theta+=_m*Math.round((this._sphericalEnd.theta-this._spherical.theta)/_m)}reset(e=!1){if(!ir(this._camera.up.x,this._cameraUp0.x)||!ir(this._camera.up.y,this._cameraUp0.y)||!ir(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const n=this.getPosition(ni);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Hx),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=ni.subVectors(this._target,this._camera.position).normalize(),t=$i.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e),this._camera.updateMatrixWorld();const n=this.getPosition(ni);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,n=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,s=nD.subVectors(this._targetEnd,this._target),o=iD.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(Mr(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=Bx(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,h,1/0,e),this._needsUpdate=!0}if(Mr(n))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=Bx(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,h,1/0,e),this._needsUpdate=!0}if(Mr(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const h=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=Bx(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,h,this.maxSpeed,e),this._needsUpdate=!0}if(Mr(s.x)&&Mr(s.y)&&Mr(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const h=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;eD(this._target,this._targetEnd,this._targetVelocity,h,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Mr(o.x)&&Mr(o.y)&&Mr(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const h=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;eD(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,h,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Mr(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const h=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=Bx(this._zoom,this._zoomEnd,this._zoomVelocity,h,1/0,e)}if(this.dollyToCursor){if(yp(this._camera)&&this._changedDolly!==0){const h=this._spherical.radius-this._lastDistance,d=this._camera,f=this._getCameraDirection(n1),g=ni.copy(f).cross(d.up).normalize();g.lengthSq()===0&&(g.x=1);const v=$i.crossVectors(g,f),y=this._sphericalEnd.radius*Math.tan(d.getEffectiveFOV()*Qv*.5),S=(this._sphericalEnd.radius-h-this._sphericalEnd.radius)/this._sphericalEnd.radius,w=bm.copy(this._targetEnd).add(g.multiplyScalar(this._dollyControlCoord.x*y*d.aspect)).add(v.multiplyScalar(this._dollyControlCoord.y*y)),C=ni.copy(this._targetEnd).lerp(w,S),E=this._lastDollyDirection===vm.IN&&this._spherical.radius<=this.minDistance,k=this._lastDollyDirection===vm.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(E||k)){this._sphericalEnd.radius-=h,this._spherical.radius-=h;const R=$i.copy(f).multiplyScalar(-h);C.add(R)}this._boundary.clampPoint(C,C);const O=$i.subVectors(C,this._targetEnd);this._targetEnd.copy(C),this._target.add(O),this._changedDolly-=h,Mr(this._changedDolly)&&(this._changedDolly=0)}else if(Hd(this._camera)&&this._changedZoom!==0){const h=this._zoom-this._lastZoom,d=this._camera,f=ni.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(d.near+d.far)/(d.near-d.far)).unproject(d),g=$i.set(0,0,-1).applyQuaternion(d.quaternion),v=bm.copy(f).add(g.multiplyScalar(-f.dot(d.up))),_=-(this._zoom-h-this._zoom)/this._zoom,S=this._getCameraDirection(n1),w=this._targetEnd.dot(S),C=ni.copy(this._targetEnd).lerp(v,_),E=C.dot(S),k=S.multiplyScalar(E-w);C.sub(k),this._boundary.clampPoint(C,C);const O=$i.subVectors(C,this._targetEnd);this._targetEnd.copy(C),this._target.add(O),this._changedZoom-=h,Mr(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Mr(this._focalOffset.x)||!Mr(this._focalOffset.y)||!Mr(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),xu.setFromMatrixColumn(this._camera.matrix,0),wu.setFromMatrixColumn(this._camera.matrix,1),xp.setFromMatrixColumn(this._camera.matrix,2),xu.multiplyScalar(this._focalOffset.x),wu.multiplyScalar(-this._focalOffset.y),xp.multiplyScalar(this._focalOffset.z),ni.copy(xu).add(wu).add(xp),this._camera.position.add(ni)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),ni.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const u=this._needsUpdate;return u&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):u?(this.dispatchEvent({type:"update"}),Mr(t,this.restThreshold)&&Mr(n,this.restThreshold)&&Mr(r,this.restThreshold)&&Mr(s.x,this.restThreshold)&&Mr(s.y,this.restThreshold)&&Mr(s.z,this.restThreshold)&&Mr(o.x,this.restThreshold)&&Mr(o.y,this.restThreshold)&&Mr(o.z,this.restThreshold)&&Mr(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!u&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=u,this._needsUpdate=!1,u}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:e1(this.maxDistance),minZoom:this.minZoom,maxZoom:e1(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:e1(this.maxPolarAngle),minAzimuthAngle:e1(this.minAzimuthAngle),maxAzimuthAngle:e1(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:ni.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const n=JSON.parse(e);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=t1(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=t1(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=t1(n.maxPolarAngle),this.minAzimuthAngle=t1(n.minAzimuthAngle),this.maxAzimuthAngle=t1(n.maxAzimuthAngle),this.smoothTime=n.smoothTime,this.draggingSmoothTime=n.draggingSmoothTime,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],t),rc.setFromVector3(ni.fromArray(n.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(rc.theta,rc.phi,t),this.dollyTo(rc.radius,t),this.zoomTo(n.zoom,t),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",hht),this._addAllEventListeners(e)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,n){const r=t.lengthSq();if(r===0)return e;const s=$i.copy(t).add(e),a=this._boundary.clampPoint(s,bm).sub(s),l=a.lengthSq();if(l===0)return e.add(t);if(l===r)return e;if(n===0)return e.add(t).add(a);{const c=1+n*l/t.dot(a);return e.add($i.copy(t).multiplyScalar(c)).add(a.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(yp(this._camera)){const e=this._camera,t=e.near,n=e.getEffectiveFOV()*Qv,r=Math.tan(n*.5)*t,s=r*e.aspect;this._nearPlaneCorners[0].set(-s,-r,0),this._nearPlaneCorners[1].set(s,-r,0),this._nearPlaneCorners[2].set(s,r,0),this._nearPlaneCorners[3].set(-s,r,0)}else if(Hd(this._camera)){const e=this._camera,t=1/e.zoom,n=e.left*t,r=e.right*t,s=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(n,s,0),this._nearPlaneCorners[1].set(r,s,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(n,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||PC(this._camera,"_collisionTest"))return e;const n=this._getTargetDirection(n1);LC.lookAt(tD,n,this._camera.up);for(let r=0;r<4;r++){const s=$i.copy(this._nearPlaneCorners[r]);s.applyMatrix4(LC);const o=bm.addVectors(this._target,s);qx.set(o,n),qx.far=this._spherical.radius+1;const a=qx.intersectObjects(this.colliderMeshes);a.length!==0&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const n=()=>{this.removeEventListener("rest",n),t()};this.addEventListener("rest",n)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new Pn.Sphere){const n=t,r=n.center;ym.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&ym.expandByObject(o)}),ym.getCenter(r);let s=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const a=o,l=a.geometry.clone();l.applyMatrix4(a.matrixWorld);const u=l.attributes.position;for(let h=0,d=u.count;h<d;h++)ni.fromBufferAttribute(u,h),s=Math.max(s,r.distanceToSquared(ni))}),n.radius=Math.sqrt(s),n}}function pht(i){let e,t;return A$(i[8]),{c:mr,l:mr,m(n,r){e||(t=[Ji(window,"mousemove",i[7]),Ji(window,"resize",i[8])],e=!0)},p:mr,i:mr,o:mr,d(n){e=!1,p_(t)}}}function mht(i,e,t){let n,r,s;Mn(i,NC,g=>t(9,n=g));const{camera:o}=Pf();Mn(i,o,g=>t(4,s=g));const a=new oe(1,0,0),l=U$([1,0,0]);Mn(i,l,g=>t(0,r=g)),l.damping=1.5;let c,u;function h(g){Xs(NC,n=[g[0],0,0,0,g[1],1,0,0,0,0,1,0,0,0,0,1],n)}const d=g=>{a.set((g.clientX/c*2-1)*c,(-(g.clientY/u)*2+1)*u,0),a.unproject(s),Xs(l,r=[a.x,a.y,a.z],r)};function f(){t(2,c=window.innerWidth),t(3,u=window.innerHeight)}return i.$$.update=()=>{i.$$.dirty&1&&h(r)},[r,l,c,u,s,o,a,d,f]}class ght extends oi{constructor(e){super(),ai(this,e,mht,pht,Gn,{})}}function oD(i){let e,t;return e=new ght({}),{c(){xt(e.$$.fragment)},l(n){wt(e.$$.fragment,n)},m(n,r){St(e,n,r),t=!0},i(n){t||(Ue(e.$$.fragment,n),t=!0)},o(n){Ye(e.$$.fragment,n),t=!1},d(n){Mt(e,n)}}}function vht(i){let e,t;const n=[{axes:"xyz"},i[15],{cellColor:Mf.slate[700]},{sectionColor:Mf.slate[700]},{fadeDistance:i[1].fadeDistance}];let r={};for(let s=0;s<n.length;s+=1)r=Jn(r,n[s]);return e=new Pz({props:r}),{c(){xt(e.$$.fragment)},l(s){wt(e.$$.fragment,s)},m(s,o){St(e,s,o),t=!0},p(s,o){const a=o[0]&32770?_s(n,[n[0],o[0]&32768&&sd(s[15]),n[2],n[3],o[0]&2&&{fadeDistance:s[1].fadeDistance}]):{};e.$set(a)},i(s){t||(Ue(e.$$.fragment,s),t=!0)},o(s){Ye(e.$$.fragment,s),t=!1},d(s){Mt(e,s)}}}function _ht(i){let e,t;const n=[{axes:"xyz"},i[15],{fadeDistance:i[1].transformedFadeDistance}];let r={};for(let s=0;s<n.length;s+=1)r=Jn(r,n[s]);return e=new Pz({props:r}),{c(){xt(e.$$.fragment)},l(s){wt(e.$$.fragment,s)},m(s,o){St(e,s,o),t=!0},p(s,o){const a=o[0]&32770?_s(n,[n[0],o[0]&32768&&sd(s[15]),o[0]&2&&{fadeDistance:s[1].transformedFadeDistance}]):{};e.$set(a)},i(s){t||(Ue(e.$$.fragment,s),t=!0)},o(s){Ye(e.$$.fragment,s),t=!1},d(s){Mt(e,s)}}}function bht(i){let e,t,n,r,s,o,a,l,c,u,h,d,f,g,v,y,_,S,w,C,E,k,O,R,A,D=i[0]&&oD();return t=new mm({props:{view:i[13],coords:i[2],color:$p,texOpacity:i[6].vectorTexOpacity,dim3:i[6].vectorDim3}}),r=new mm({props:{view:i[13],coords:i[3],color:Zc,texOpacity:i[6].xTexOpacity,scalar:i[6].xScalar,scalarOpacity:i[6].xScalarOpacity,scalarAlign:i[6].xScalarAlign,visible:i[6].xVisible,dim3:i[6].xDim3}}),o=new mm({props:{view:i[13],coords:i[4],color:Jc,texOpacity:i[6].yTexOpacity,scalar:i[6].yScalar,scalarOpacity:i[6].yScalarOpacity,scalarAlign:i[6].yScalarAlign,visible:i[6].yVisible,dim3:i[6].yDim3}}),l=new mm({props:{view:i[13],coords:i[5],color:p2,texOpacity:i[6].zTexOpacity,scalar:i[6].zScalar,scalarOpacity:i[6].zScalarOpacity,scalarAlign:i[6].zScalarAlign,visible:i[6].zVisible,dim3:i[6].zDim3}}),u=new mm({props:{view:i[14],coords:[0,0,0,1,0,0],color:Zc,tex:!1,visible:i[11].xVisible}}),d=new mm({props:{view:i[14],coords:[0,0,0,0,1,0],color:Jc,tex:!1,visible:i[11].yVisible}}),g=new Jp.Group({props:{"position.z":-.01,$$slots:{default:[vht]},$$scope:{ctx:i}}}),y=new Jp.Group({props:{matrix:i[12],matrixAutoUpdate:!1,$$slots:{default:[_ht]},$$scope:{ctx:i}}}),S=new QO({props:{view:i[14],t:i[8].t}}),C=new JO({props:{view:i[14],t:i[7].t}}),k=new QO({props:{view:i[14],t:i[10].t,dim3:!0}}),R=new JO({props:{view:i[14],t:i[9].t,dim3:!0}}),{c(){D&&D.c(),e=Nt(),xt(t.$$.fragment),n=Nt(),xt(r.$$.fragment),s=Nt(),xt(o.$$.fragment),a=Nt(),xt(l.$$.fragment),c=Nt(),xt(u.$$.fragment),h=Nt(),xt(d.$$.fragment),f=Nt(),xt(g.$$.fragment),v=Nt(),xt(y.$$.fragment),_=Nt(),xt(S.$$.fragment),w=Nt(),xt(C.$$.fragment),E=Nt(),xt(k.$$.fragment),O=Nt(),xt(R.$$.fragment)},l(I){D&&D.l(I),e=Ut(I),wt(t.$$.fragment,I),n=Ut(I),wt(r.$$.fragment,I),s=Ut(I),wt(o.$$.fragment,I),a=Ut(I),wt(l.$$.fragment,I),c=Ut(I),wt(u.$$.fragment,I),h=Ut(I),wt(d.$$.fragment,I),f=Ut(I),wt(g.$$.fragment,I),v=Ut(I),wt(y.$$.fragment,I),_=Ut(I),wt(S.$$.fragment,I),w=Ut(I),wt(C.$$.fragment,I),E=Ut(I),wt(k.$$.fragment,I),O=Ut(I),wt(R.$$.fragment,I)},m(I,q){D&&D.m(I,q),Ze(I,e,q),St(t,I,q),Ze(I,n,q),St(r,I,q),Ze(I,s,q),St(o,I,q),Ze(I,a,q),St(l,I,q),Ze(I,c,q),St(u,I,q),Ze(I,h,q),St(d,I,q),Ze(I,f,q),St(g,I,q),Ze(I,v,q),St(y,I,q),Ze(I,_,q),St(S,I,q),Ze(I,w,q),St(C,I,q),Ze(I,E,q),St(k,I,q),Ze(I,O,q),St(R,I,q),A=!0},p(I,q){I[0]?D?q[0]&1&&Ue(D,1):(D=oD(),D.c(),Ue(D,1),D.m(e.parentNode,e)):D&&(rl(),Ye(D,1,1,()=>{D=null}),il());const j={};q[0]&4&&(j.coords=I[2]),q[0]&64&&(j.texOpacity=I[6].vectorTexOpacity),q[0]&64&&(j.dim3=I[6].vectorDim3),t.$set(j);const Y={};q[0]&8&&(Y.coords=I[3]),q[0]&64&&(Y.texOpacity=I[6].xTexOpacity),q[0]&64&&(Y.scalar=I[6].xScalar),q[0]&64&&(Y.scalarOpacity=I[6].xScalarOpacity),q[0]&64&&(Y.scalarAlign=I[6].xScalarAlign),q[0]&64&&(Y.visible=I[6].xVisible),q[0]&64&&(Y.dim3=I[6].xDim3),r.$set(Y);const F={};q[0]&16&&(F.coords=I[4]),q[0]&64&&(F.texOpacity=I[6].yTexOpacity),q[0]&64&&(F.scalar=I[6].yScalar),q[0]&64&&(F.scalarOpacity=I[6].yScalarOpacity),q[0]&64&&(F.scalarAlign=I[6].yScalarAlign),q[0]&64&&(F.visible=I[6].yVisible),q[0]&64&&(F.dim3=I[6].yDim3),o.$set(F);const re={};q[0]&32&&(re.coords=I[5]),q[0]&64&&(re.texOpacity=I[6].zTexOpacity),q[0]&64&&(re.scalar=I[6].zScalar),q[0]&64&&(re.scalarOpacity=I[6].zScalarOpacity),q[0]&64&&(re.scalarAlign=I[6].zScalarAlign),q[0]&64&&(re.visible=I[6].zVisible),q[0]&64&&(re.dim3=I[6].zDim3),l.$set(re);const ee={};q[0]&2048&&(ee.visible=I[11].xVisible),u.$set(ee);const J={};q[0]&2048&&(J.visible=I[11].yVisible),d.$set(J);const Ee={};q[0]&2|q[1]&65536&&(Ee.$$scope={dirty:q,ctx:I}),g.$set(Ee);const le={};q[0]&4096&&(le.matrix=I[12]),q[0]&2|q[1]&65536&&(le.$$scope={dirty:q,ctx:I}),y.$set(le);const ie={};q[0]&256&&(ie.t=I[8].t),S.$set(ie);const be={};q[0]&128&&(be.t=I[7].t),C.$set(be);const Je={};q[0]&1024&&(Je.t=I[10].t),k.$set(Je);const Xe={};q[0]&512&&(Xe.t=I[9].t),R.$set(Xe)},i(I){A||(Ue(D),Ue(t.$$.fragment,I),Ue(r.$$.fragment,I),Ue(o.$$.fragment,I),Ue(l.$$.fragment,I),Ue(u.$$.fragment,I),Ue(d.$$.fragment,I),Ue(g.$$.fragment,I),Ue(y.$$.fragment,I),Ue(S.$$.fragment,I),Ue(C.$$.fragment,I),Ue(k.$$.fragment,I),Ue(R.$$.fragment,I),A=!0)},o(I){Ye(D),Ye(t.$$.fragment,I),Ye(r.$$.fragment,I),Ye(o.$$.fragment,I),Ye(l.$$.fragment,I),Ye(u.$$.fragment,I),Ye(d.$$.fragment,I),Ye(g.$$.fragment,I),Ye(y.$$.fragment,I),Ye(S.$$.fragment,I),Ye(C.$$.fragment,I),Ye(k.$$.fragment,I),Ye(R.$$.fragment,I),A=!1},d(I){I&&(fe(e),fe(n),fe(s),fe(a),fe(c),fe(h),fe(f),fe(v),fe(_),fe(w),fe(E),fe(O)),D&&D.d(I),Mt(t,I),Mt(r,I),Mt(o,I),Mt(l,I),Mt(u,I),Mt(d,I),Mt(g,I),Mt(y,I),Mt(S,I),Mt(C,I),Mt(k,I),Mt(R,I)}}}const xm=1,yht=1,xht=5,Tl=.1,$s=.3,Nh=1e3;function wht(i,e,t){let n,r,s,o,a,l,c,u,h,d,f,g,v,y;Mn(i,UC,ke=>t(19,r=ke)),Mn(i,FC,ke=>t(20,s=ke)),Mn(i,BC,ke=>t(28,o=ke)),Mn(i,r1,ke=>t(29,a=ke)),Mn(i,Bm,ke=>t(21,l=ke)),Mn(i,Kx,ke=>t(30,c=ke)),Mn(i,s1,ke=>t(22,u=ke)),Mn(i,wD,ke=>t(23,h=ke)),Mn(i,SD,ke=>t(24,d=ke)),Mn(i,NC,ke=>t(25,f=ke)),Mn(i,Zx,ke=>t(0,g=ke)),Mn(i,Tm,ke=>t(31,v=ke)),Mn(i,ww,ke=>t(32,y=ke));let{mathbox:_}=e,S;_.set("focus",15);const w=[[-xm,xm],[-xm,xm],[-xm,xm]],C=_.cartesian({range:w}),E=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];let k=[...E];const O=C.transform({},{matrix:()=>k});Xs(BC,o=Ei.to(k,{ease:"linear",duration:2,paused:!0,endArray:l,onUpdate(){Xs(ww,y=this.progress(),y),t(18,k)},onComplete(){Xs(Tm,v=!0,v),this.pause()}}),o);let R=!0;function A(ke){k.forEach((xe,Ie)=>{t(18,k[Ie]=E[Ie],k)}),o.invalidate();const ae=R?1e-4:-1e-4;o.progress(o.progress()+ae),R=!R,t(18,k)}const D={cellSize:yht,cellColor:Mf.slate[600],cellThickness:1.5,sectionSize:xht,sectionColor:Mf.slate[600],sectionThickness:3,infiniteGrid:!0,fadeDistance:30,fadeStrength:4};let I={fadeDistance:D.fadeDistance,transformedFadeDistance:D.fadeDistance};function q(ke){ke?Ei.to(I,{fadeDistance:D.fadeDistance,onUpdate(){t(1,I)}}):Ei.to(I,{fadeDistance:0,onUpdate(){t(1,I)}})}function j(ke){ke?Ei.to(I,{transformedFadeDistance:D.fadeDistance,onUpdate(){t(1,I)}}):Ei.to(I,{transformedFadeDistance:0,onUpdate(){t(1,I)}})}let Y;function F(ke){Y=="points"?Ei.to(ie,{t:0,onUpdate(){t(7,ie)}}):Y=="3d points"?Ei.to(Je,{t:0,onUpdate(){t(9,Je)}}):Y=="planes"?Ei.to(be,{t:0,onUpdate(){t(8,be)}}):Y=="3d planes"&&Ei.to(Xe,{t:0,onUpdate(){t(10,Xe)}}),ke=="points"?Ei.to(ie,{t:1,onUpdate(){t(7,ie)}}):ke=="3d points"?Ei.to(Je,{t:1,onUpdate(){t(9,Je)}}):ke=="planes"?Ei.to(be,{t:1,onUpdate(){t(8,be)}}):ke=="3d planes"&&Ei.to(Xe,{t:1,onUpdate(){t(10,Xe)}}),Y=ke}let re=[0,0,0,0,0,0],ee=[0,0,0,0,0,0],J=[0,0,0,0,0,0],Ee=[0,0,0,0,0,0],le={vectorTexOpacity:0,xTexOpacity:0,yTexOpacity:0,zTexOpacity:0,xScalar:1,yScalar:1,zScalar:1,xScalarOpacity:0,yScalarOpacity:0,zScalarOpacity:0,xScalarAlign:"top",yScalarAlign:"left",zScalarAlign:"bottom",xVisible:!0,yVisible:!0,zVisible:!0,xDim3:!1,yDim3:!1,zDim3:!1,vectorDim3:!1},ie={t:0},be={t:0},Je={t:0},Xe={t:0},Be={xVisible:!1,yVisible:!1};const vt={fastScrollEnd:!0,pin:"#article",pinnedContainer:"#article",start:"center center",scrub:1,pinSpacing:!0,toggleClass:"active",onEnter(){tt()},onLeave(){se()},onEnterBack(){tt()},onLeaveBack(){se()}},at={start:"bottom center",pinnedContainer:"#article",toggleActions:"play none none reverse",fastScrollEnd:!0,end:200},Le={onUpdate(){rt(this.progress())}},Ot={ease:"power2.in"};function ft(){Ei.timeline({...Le,scrollTrigger:{...vt,trigger:"#st-1",end:`+=${Nh*1}`}}).to(re,{endArray:[0,0,0,...Jr,0],onUpdate(){t(2,re)}}).to(le,{vectorTexOpacity:1,onUpdate(){t(6,le)}}).to({},{duration:Tl}),Ei.timeline({...Le,scrollTrigger:{...vt,trigger:"#st-2",end:`+=${Nh*1}`}}).to(ee,{endArray:[0,0,0,1,0,0],onUpdate(){t(3,ee)},delay:Tl}).to(J,{endArray:[0,0,0,0,1,0],onUpdate(){t(4,J)}},"<").to(le,{xTexOpacity:1,onUpdate(){t(6,le)}}).to(le,{yTexOpacity:1,onUpdate(){t(6,le)}},"<").to({},{duration:Tl}),Ei.timeline({...Le,scrollTrigger:{...vt,trigger:"#st-3",end:`+=${Nh*3}`,preventOverlaps:!0}}).to(le,{xTexOpacity:0,onUpdate(){t(6,le)}}).to(le,{yTexOpacity:0,onUpdate(){t(6,le)}},"<").add("step-2").to(le,{duration:.2,xScalarOpacity:1,onUpdate(){t(6,le)}},"step-2").to(le,{duration:.2,yScalarOpacity:1,onUpdate(){t(6,le)}},"step-2").to(ee,{endArray:[0,0,0,Jr[0],0,0],onUpdate(){t(3,ee)}},"step-2").to(J,{endArray:[0,0,0,0,Jr[1],0],onUpdate(){t(4,J)}},"step-2").to(le,{xScalar:Jr[0],onUpdate(){t(6,le)}},"step-2").to(le,{yScalar:Jr[1],onUpdate(){t(6,le)}},"step-2").to({},{duration:Tl}).add("step-3").to(le,{duration:.2,xScalarOpacity:0,onUpdate(){t(6,le)}},"step-3").to(le,{duration:.2,yScalarOpacity:0,onUpdate(){t(6,le)}},"step-3").to(J,{endArray:[Jr[0],0,0,...Jr,0],onUpdate(){t(4,J)}},"step-3").to({},{duration:Tl}),Ei.timeline({scrollTrigger:{...at,trigger:"#st-3"},timelinePropsAlt:Ot}).add("step-1").to(le,{duration:$s,xScalar:1,yScalar:1},"step-1").to(ee,{duration:$s,endArray:[0,0,0,1,0,0],onUpdate(){t(3,ee)}},"step-1").to(J,{duration:$s,endArray:[0,0,0,0,1,0],onUpdate(){t(4,J)}},"step-1").to(le,{duration:$s,xTexOpacity:1,onUpdate(){t(6,le)}}).to(le,{duration:$s,yTexOpacity:1,onUpdate(){t(6,le)}},"<"),Ei.timeline({...Le,scrollTrigger:{...vt,trigger:"#st-4",end:`+=${Nh*1}`}}).to(ee,{endArray:[0,0,0,...cc,0],onUpdate(){t(3,ee)}}).to(J,{endArray:[0,0,0,...Au,0],onUpdate(){t(4,J)}},"<").to(re,{endArray:[0,0,0,...Zm,0],onUpdate(){t(2,re)}},"<").to({},{duration:Tl}),Ei.timeline({...Le,scrollTrigger:{...vt,trigger:"#st-5",end:`+=${Nh*3}`}}).add("step-1").to(le,{xScalarAlign:"left",yScalarAlign:"top"},"step-1").to(le,{xTexOpacity:0,onUpdate(){t(6,le)}},"step-1").to(le,{yTexOpacity:0,onUpdate(){t(6,le)}},"step-1").add("step-2").to(le,{duration:.2,xScalarOpacity:1,onUpdate(){t(6,le)}},"step-2").to(le,{duration:.2,yScalarOpacity:1,onUpdate(){t(6,le)}},"step-2").to(ee,{endArray:[0,0,0,Jr[0]*cc[0],Jr[0]*cc[1],0],onUpdate(){t(3,ee)}},"step-2").to(J,{endArray:[0,0,0,Jr[1]*Au[0],Jr[1]*Au[1],0],onUpdate(){t(4,J)}},"step-2").to(le,{xScalar:Jr[0],onUpdate(){t(6,le)}},"step-2").to(le,{yScalar:Jr[1],onUpdate(){t(6,le)}},"step-2").to({},{duration:Tl}).add("step-3").to(le,{duration:.2,xScalarOpacity:0,onUpdate(){t(6,le)}},"step-3").to(le,{duration:.2,yScalarOpacity:0,onUpdate(){t(6,le)}},"step-3").to(J,{endArray:[Jr[0]*cc[0],Jr[0]*cc[1],0,...Zm,0],onUpdate(){t(4,J)}},"step-3").to({},{duration:Tl}),Ei.timeline({scrollTrigger:{...at,trigger:"#st-5"},timelinePropsAlt:Ot}).add("step-1").to(le,{duration:$s,vectorTexOpacity:0,onUpdate(){t(6,le)}},"step-1").to(re,{duration:$s,endArray:[0,0,0,0,0,0],onUpdate(){t(2,re)}},"step-1").to(ee,{duration:$s,endArray:[0,0,0,1,0,0],onUpdate(){t(3,ee)}},"step-1").to(J,{duration:$s,endArray:[0,0,0,0,1,0],onUpdate(){t(4,J)}},"step-1").add("step-2").to(le,{duration:$s,xTexOpacity:1,onUpdate(){t(6,le)}},"step-2").to(le,{duration:$s,yTexOpacity:1,onUpdate(){t(6,le)}},"step-2"),Ei.timeline({...Le,scrollTrigger:{...vt,trigger:"#st-6",end:`+=${Nh*1}`}}).add("step-1").to(ie,{t:1,onUpdate(){t(7,ie)}},"step-1").to({},{duration:Tl}),Ei.timeline({...Le,scrollTrigger:{...vt,trigger:"#st-7",end:`+=${Nh*1}`,onToggle:ke=>{Xs(s1,u=ke.isActive?"points":void 0,u),Xs(s1,u="points",u)}}}).to({},{duration:Tl}).add("step-1").to(o,{progress:1},"step-1").to(ee,{endArray:[0,0,0,...cc,0],onUpdate(){t(3,ee)}},"step-1").to(J,{endArray:[0,0,0,...Au,0],onUpdate(){t(4,J)}},"step-1").to({},{duration:Tl}),Ei.timeline({scrollTrigger:{...at,trigger:"#st-8",start:"top center",onEnter:()=>{},onLeaveBack:()=>{a.reset(!0),Xs(Bm,l=L$,l),console.log(l)}},timelinePropsAlt:Ot}).add("step-1").to("#canvas-wrapper",{pointerEvents:"auto",cursor:"move",duration:$s},"step-1").from("#inputs",{autoAlpha:0,x:-40,duration:$s},"step-1").to(le,{duration:$s,xTexOpacity:0,yTexOpacity:0,xVisible:!1,yVisible:!1,onUpdate(){t(6,le)}},"step-1").to(Be,{duration:$s,xVisible:!0,yVisible:!0,onUpdate(){t(11,Be)}},"step-1").add("step-2").to(ee,{duration:$s,endArray:[0,0,0,1,0,0],onUpdate(){t(3,ee)}},"step-2").to(J,{duration:.001,endArray:[0,0,0,0,1,0],onUpdate(){t(4,J)}},"step-2"),Ei.timeline({scrollTrigger:{...at,trigger:"#section-2",start:"top center",onEnter:()=>{vt.onEnter(),a.reset(!0),Xs(s1,u=void 0,u)}},timelinePropsAlt:Ot}).add("step-1").to("#canvas-wrapper",{pointerEvents:"none",duration:$s},"step-1").to("#inputs",{autoAlpha:0,x:-40,duration:$s},"step-1").to(o,{duration:$s,progress:0},"step-1").to(Be,{duration:$s,xVisible:!1,yVisible:!1,onUpdate(){t(11,Be)}},"step-1").add("step-2").to(le,{duration:.001,xVisible:!0,yVisible:!0,onUpdate(){t(6,le)}},"step-2"),Ei.timeline({...Le,scrollTrigger:{...vt,trigger:"#st-9",end:`+=${Nh*2}`,onLeave:()=>{vt.onLeave(),Xs(Kx,c=!0,c)},onEnterBack:()=>{vt.onEnterBack(),Xs(Kx,c=!1,c),Ei.to(a,{azimuthAngle:Math.PI*.3})}}}).add("step-0").to(a.mouseButtons,{right:Cf.ACTION.ROTATE,duration:.001},"step-0").to(l,{endArray:D$,duration:.001,onUpdate(){Bm.set(l)}},"step-0").to({},{duration:Tl},"step-0").add("step-1").to(a,{distance:8.5,polarAngle:Math.PI*.35,azimuthAngle:Math.PI*.3},"step-1").to(Ee,{endArray:[0,0,0,0,0,1],onUpdate(){t(5,Ee)}},"step-1").to(le,{xTexOpacity:1,yTexOpacity:1,xDim3:!0,yDim3:!0,zDim3:!0,vectorDim3:!0,onUpdate(){t(6,le)}},"step-1").to(re,{endArray:[0,0,0,...m2],onUpdate(){t(2,re)}},"step-1").add("step-2").to(le,{zTexOpacity:1,onUpdate(){t(6,le)}},"step-2").to(le,{vectorTexOpacity:1,onUpdate(){t(6,le)}},"step-2"),Ei.timeline({...Le,scrollTrigger:{...vt,trigger:"#st-10",end:`+=${Nh*1}`}}).add("step-1").to(o,{progress:1},"step-1").to(ee,{endArray:[0,0,0,...g2],onUpdate(){t(3,ee)}},"step-1").to(J,{endArray:[0,0,0,...v2],onUpdate(){t(4,J)}},"step-1").to(Ee,{endArray:[0,0,0,..._2],onUpdate(){t(5,Ee)}},"step-1").to(re,{endArray:[0,0,0,...b2],onUpdate(){t(2,re)}},"step-1").to({},{duration:Tl})}function rt(ke){Ei.set("#st-progress",{scaleY:ke})}function tt(){Ei.to("#st-progress",{opacity:1,duration:.5})}function se(){Ei.to("#st-progress",{opacity:0,duration:.5})}return rd(()=>{t(17,S=!0)}),i.$$set=ke=>{"mathbox"in ke&&t(16,_=ke.mathbox)},i.$$.update=()=>{i.$$.dirty[0]&2097152&&A(),i.$$.dirty[0]&33816577&&t(12,n=g?f:k),i.$$.dirty[0]&16777216&&q(d),i.$$.dirty[0]&8388608&&j(h),i.$$.dirty[0]&4194304&&F(u),i.$$.dirty[0]&1703936&&S&&s&&r&&ft()},[g,I,re,ee,J,Ee,le,ie,be,Je,Xe,Be,n,C,O,D,_,S,k,r,s,l,u,h,d,f]}class Sht extends oi{constructor(e){super(),ai(this,e,wht,bht,Gn,{mathbox:16},null,[-1,-1])}}const Mht={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class Kg{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Cht=new od(-1,1,1,-1,0,1),k6=new Qn;k6.setAttribute("position",new en([-1,3,0,-1,-1,0,3,-1,0],3));k6.setAttribute("uv",new en([0,2,0,0,2,0],2));class o2{constructor(e){this._mesh=new rr(k6,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Cht)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class gH extends Kg{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof Bo?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Fp.clone(e.uniforms),this.material=new Bo({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new o2(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class aD extends Kg{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class Eht extends Kg{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Tht{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const n=e.getSize(new ht);this._width=n.width,this._height=n.height,t=new Lo(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Qc}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new gH(Mht),this.copyPass.material.blending=Iu,this.clock=new i4}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let r=0,s=this.passes.length;r<s;r++){const o=this.passes[r];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),o.needsSwap){if(n){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}aD!==void 0&&(o instanceof aD?n=!0:o instanceof Eht&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new ht);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Aht extends Kg{constructor(e,t,n,r,s){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=s!==void 0?s:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new qt}render(e,t,n){const r=e.autoClear;e.autoClear=!1;let s,o;this.overrideMaterial!==void 0&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=o),e.autoClear=r}}const Pht={uniforms:{damp:{value:.96},tOld:{value:null},tNew:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float damp;

		uniform sampler2D tOld;
		uniform sampler2D tNew;

		varying vec2 vUv;

		vec4 when_gt( vec4 x, float y ) {

			return max( sign( x - y ), 0.0 );

		}

		void main() {

			vec4 texelOld = texture2D( tOld, vUv );
			vec4 texelNew = texture2D( tNew, vUv );

			texelOld *= damp * when_gt( texelOld, 0.1 );

			gl_FragColor = max(texelNew, texelOld);

		}`};class kht extends Kg{constructor(e=.96){super(),this.shader=Pht,this.uniforms=Fp.clone(this.shader.uniforms),this.uniforms.damp.value=e,this.textureComp=new Lo(window.innerWidth,window.innerHeight,{magFilter:Oi,type:Qc}),this.textureOld=new Lo(window.innerWidth,window.innerHeight,{magFilter:Oi,type:Qc}),this.compFsMaterial=new Bo({uniforms:this.uniforms,vertexShader:this.shader.vertexShader,fragmentShader:this.shader.fragmentShader}),this.compFsQuad=new o2(this.compFsMaterial),this.copyFsMaterial=new Yu,this.copyFsQuad=new o2(this.copyFsMaterial)}render(e,t,n){this.uniforms.tOld.value=this.textureOld.texture,this.uniforms.tNew.value=n.texture,e.setRenderTarget(this.textureComp),this.compFsQuad.render(e),this.copyFsQuad.material.map=this.textureComp.texture,this.renderToScreen?(e.setRenderTarget(null),this.copyFsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.copyFsQuad.render(e));const r=this.textureOld;this.textureOld=this.textureComp,this.textureComp=r}setSize(e,t){this.textureComp.setSize(e,t),this.textureOld.setSize(e,t)}dispose(){this.textureComp.dispose(),this.textureOld.dispose(),this.compFsMaterial.dispose(),this.copyFsMaterial.dispose(),this.compFsQuad.dispose(),this.copyFsQuad.dispose()}}const Gx={defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new ht(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];

		void SMAAEdgeDetectionVS( vec2 texcoord ) {
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 ); // WebGL port note: Changed sign in W component
		}

		void main() {

			vUv = uv;

			SMAAEdgeDetectionVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];

		vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {
			vec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );

			// Calculate color deltas:
			vec4 delta;
			vec3 C = texture2D( colorTex, texcoord ).rgb;

			vec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;
			vec3 t = abs( C - Cleft );
			delta.x = max( max( t.r, t.g ), t.b );

			vec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;
			t = abs( C - Ctop );
			delta.y = max( max( t.r, t.g ), t.b );

			// We do the usual threshold:
			vec2 edges = step( threshold, delta.xy );

			// Then discard if there is no edge:
			if ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )
				discard;

			// Calculate right and bottom deltas:
			vec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;
			t = abs( C - Cright );
			delta.z = max( max( t.r, t.g ), t.b );

			vec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;
			t = abs( C - Cbottom );
			delta.w = max( max( t.r, t.g ), t.b );

			// Calculate the maximum delta in the direct neighborhood:
			float maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );

			// Calculate left-left and top-top deltas:
			vec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;
			t = abs( C - Cleftleft );
			delta.z = max( max( t.r, t.g ), t.b );

			vec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;
			t = abs( C - Ctoptop );
			delta.w = max( max( t.r, t.g ), t.b );

			// Calculate the final maximum delta:
			maxDelta = max( max( maxDelta, delta.z ), delta.w );

			// Local contrast adaptation in action:
			edges.xy *= step( 0.5 * maxDelta, delta.xy );

			return vec4( edges, 0.0, 0.0 );
		}

		void main() {

			gl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );

		}`},Wx={defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new ht(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];
		varying vec2 vPixcoord;

		void SMAABlendingWeightCalculationVS( vec2 texcoord ) {
			vPixcoord = texcoord / resolution;

			// We will use these offsets for the searches later on (see @PSEUDO_GATHER4):
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 ); // WebGL port note: Changed sign in Y and W components
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 ); // WebGL port note: Changed sign in Y and W components

			// And these for the searches, they indicate the ends of the loops:
			vOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );

		}

		void main() {

			vUv = uv;

			SMAABlendingWeightCalculationVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )

		uniform sampler2D tDiffuse;
		uniform sampler2D tArea;
		uniform sampler2D tSearch;
		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[3];
		varying vec2 vPixcoord;

		#if "5.11.2" == 100
		vec2 round( vec2 x ) {
			return sign( x ) * floor( abs( x ) + 0.5 );
		}
		#endif

		float SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {
			// Not required if searchTex accesses are set to point:
			// float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);
			// e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +
			//     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;
			e.r = bias + e.r * scale;
			return 255.0 * texture2D( searchTex, e, 0.0 ).r;
		}

		float SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			/**
				* @PSEUDO_GATHER4
				* This texcoord has been offset by (-0.25, -0.125) in the vertex shader to
				* sample between edge, thus fetching four edges in a row.
				* Sampling with different offsets in each direction allows to disambiguate
				* which edges are active from the four fetched ones.
				*/
			vec2 e = vec2( 0.0, 1.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord -= vec2( 2.0, 0.0 ) * resolution;
				if ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;
			}

			// We correct the previous (-0.25, -0.125) offset we applied:
			texcoord.x += 0.25 * resolution.x;

			// The searches are bias by 1, so adjust the coords accordingly:
			texcoord.x += resolution.x;

			// Disambiguate the length added by the last step:
			texcoord.x += 2.0 * resolution.x; // Undo last step
			texcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);

			return texcoord.x;
		}

		float SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 0.0, 1.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord += vec2( 2.0, 0.0 ) * resolution;
				if ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;
			}

			texcoord.x -= 0.25 * resolution.x;
			texcoord.x -= resolution.x;
			texcoord.x -= 2.0 * resolution.x;
			texcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );

			return texcoord.x;
		}

		float SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 1.0, 0.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord += vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign
				if ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;
			}

			texcoord.y -= 0.25 * resolution.y; // WebGL port note: Changed sign
			texcoord.y -= resolution.y; // WebGL port note: Changed sign
			texcoord.y -= 2.0 * resolution.y; // WebGL port note: Changed sign
			texcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 ); // WebGL port note: Changed sign

			return texcoord.y;
		}

		float SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 1.0, 0.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord -= vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign
				if ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;
			}

			texcoord.y += 0.25 * resolution.y; // WebGL port note: Changed sign
			texcoord.y += resolution.y; // WebGL port note: Changed sign
			texcoord.y += 2.0 * resolution.y; // WebGL port note: Changed sign
			texcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 ); // WebGL port note: Changed sign

			return texcoord.y;
		}

		vec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {
			// Rounding prevents precision errors of bilinear filtering:
			vec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;

			// We do a scale and bias for mapping to texel space:
			texcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );

			// Move to proper place, according to the subpixel offset:
			texcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;

			return texture2D( areaTex, texcoord, 0.0 ).rg;
		}

		vec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {
			vec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );

			vec2 e = texture2D( edgesTex, texcoord ).rg;

			if ( e.g > 0.0 ) { // Edge at north
				vec2 d;

				// Find the distance to the left:
				vec2 coords;
				coords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );
				coords.y = offset[ 1 ].y; // offset[1].y = texcoord.y - 0.25 * resolution.y (@CROSSING_OFFSET)
				d.x = coords.x;

				// Now fetch the left crossing edges, two at a time using bilinear
				// filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to
				// discern what value each edge has:
				float e1 = texture2D( edgesTex, coords, 0.0 ).r;

				// Find the distance to the right:
				coords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );
				d.y = coords.x;

				// We want the distances to be in pixel units (doing this here allow to
				// better interleave arithmetic and memory accesses):
				d = d / resolution.x - pixcoord.x;

				// SMAAArea below needs a sqrt, as the areas texture is compressed
				// quadratically:
				vec2 sqrt_d = sqrt( abs( d ) );

				// Fetch the right crossing edges:
				coords.y -= 1.0 * resolution.y; // WebGL port note: Added
				float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;

				// Ok, we know how this pattern looks like, now it is time for getting
				// the actual area:
				weights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );
			}

			if ( e.r > 0.0 ) { // Edge at west
				vec2 d;

				// Find the distance to the top:
				vec2 coords;

				coords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );
				coords.x = offset[ 0 ].x; // offset[1].x = texcoord.x - 0.25 * resolution.x;
				d.x = coords.y;

				// Fetch the top crossing edges:
				float e1 = texture2D( edgesTex, coords, 0.0 ).g;

				// Find the distance to the bottom:
				coords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );
				d.y = coords.y;

				// We want the distances to be in pixel units:
				d = d / resolution.y - pixcoord.y;

				// SMAAArea below needs a sqrt, as the areas texture is compressed
				// quadratically:
				vec2 sqrt_d = sqrt( abs( d ) );

				// Fetch the bottom crossing edges:
				coords.y -= 1.0 * resolution.y; // WebGL port note: Added
				float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;

				// Get the area for this direction:
				weights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );
			}

			return weights;
		}

		void main() {

			gl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );

		}`},DC={uniforms:{tDiffuse:{value:null},tColor:{value:null},resolution:{value:new ht(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 2 ];

		void SMAANeighborhoodBlendingVS( vec2 texcoord ) {
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component
		}

		void main() {

			vUv = uv;

			SMAANeighborhoodBlendingVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform sampler2D tColor;
		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 2 ];

		vec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {
			// Fetch the blending weights for current pixel:
			vec4 a;
			a.xz = texture2D( blendTex, texcoord ).xz;
			a.y = texture2D( blendTex, offset[ 1 ].zw ).g;
			a.w = texture2D( blendTex, offset[ 1 ].xy ).a;

			// Is there any blending weight with a value greater than 0.0?
			if ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {
				return texture2D( colorTex, texcoord, 0.0 );
			} else {
				// Up to 4 lines can be crossing a pixel (one through each edge). We
				// favor blending by choosing the line with the maximum weight for each
				// direction:
				vec2 offset;
				offset.x = a.a > a.b ? a.a : -a.b; // left vs. right
				offset.y = a.g > a.r ? -a.g : a.r; // top vs. bottom // WebGL port note: Changed signs

				// Then we go in the direction that has the maximum weight:
				if ( abs( offset.x ) > abs( offset.y )) { // horizontal vs. vertical
					offset.y = 0.0;
				} else {
					offset.x = 0.0;
				}

				// Fetch the opposite color and lerp by hand:
				vec4 C = texture2D( colorTex, texcoord, 0.0 );
				texcoord += sign( offset ) * resolution;
				vec4 Cop = texture2D( colorTex, texcoord, 0.0 );
				float s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );

				// WebGL port note: Added gamma correction
				C.xyz = pow(C.xyz, vec3(2.2));
				Cop.xyz = pow(Cop.xyz, vec3(2.2));
				vec4 mixed = mix(C, Cop, s);
				mixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));

				return mixed;
			}
		}

		void main() {

			gl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );

		}`};class Rht extends Kg{constructor(e,t){super(),this.edgesRT=new Lo(e,t,{depthBuffer:!1,type:Qc}),this.edgesRT.texture.name="SMAAPass.edges",this.weightsRT=new Lo(e,t,{depthBuffer:!1,type:Qc}),this.weightsRT.texture.name="SMAAPass.weights";const n=this,r=new Image;r.src=this.getAreaTexture(),r.onload=function(){n.areaTexture.needsUpdate=!0},this.areaTexture=new qr,this.areaTexture.name="SMAAPass.area",this.areaTexture.image=r,this.areaTexture.minFilter=Hr,this.areaTexture.generateMipmaps=!1,this.areaTexture.flipY=!1;const s=new Image;s.src=this.getSearchTexture(),s.onload=function(){n.searchTexture.needsUpdate=!0},this.searchTexture=new qr,this.searchTexture.name="SMAAPass.search",this.searchTexture.image=s,this.searchTexture.magFilter=Oi,this.searchTexture.minFilter=Oi,this.searchTexture.generateMipmaps=!1,this.searchTexture.flipY=!1,this.uniformsEdges=Fp.clone(Gx.uniforms),this.uniformsEdges.resolution.value.set(1/e,1/t),this.materialEdges=new Bo({defines:Object.assign({},Gx.defines),uniforms:this.uniformsEdges,vertexShader:Gx.vertexShader,fragmentShader:Gx.fragmentShader}),this.uniformsWeights=Fp.clone(Wx.uniforms),this.uniformsWeights.resolution.value.set(1/e,1/t),this.uniformsWeights.tDiffuse.value=this.edgesRT.texture,this.uniformsWeights.tArea.value=this.areaTexture,this.uniformsWeights.tSearch.value=this.searchTexture,this.materialWeights=new Bo({defines:Object.assign({},Wx.defines),uniforms:this.uniformsWeights,vertexShader:Wx.vertexShader,fragmentShader:Wx.fragmentShader}),this.uniformsBlend=Fp.clone(DC.uniforms),this.uniformsBlend.resolution.value.set(1/e,1/t),this.uniformsBlend.tDiffuse.value=this.weightsRT.texture,this.materialBlend=new Bo({uniforms:this.uniformsBlend,vertexShader:DC.vertexShader,fragmentShader:DC.fragmentShader}),this.needsSwap=!1,this.fsQuad=new o2(null)}render(e,t,n){this.uniformsEdges.tDiffuse.value=n.texture,this.fsQuad.material=this.materialEdges,e.setRenderTarget(this.edgesRT),this.clear&&e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialWeights,e.setRenderTarget(this.weightsRT),this.clear&&e.clear(),this.fsQuad.render(e),this.uniformsBlend.tColor.value=n.texture,this.fsQuad.material=this.materialBlend,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}setSize(e,t){this.edgesRT.setSize(e,t),this.weightsRT.setSize(e,t),this.materialEdges.uniforms.resolution.value.set(1/e,1/t),this.materialWeights.uniforms.resolution.value.set(1/e,1/t),this.materialBlend.uniforms.resolution.value.set(1/e,1/t)}getAreaTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAIAAACOVPcQAACBeklEQVR42u39W4xlWXrnh/3WWvuciIzMrKxrV8/0rWbY0+SQFKcb4owIkSIFCjY9AC1BT/LYBozRi+EX+cV+8IMsYAaCwRcBwjzMiw2jAWtgwC8WR5Q8mDFHZLNHTarZGrLJJllt1W2qKrsumZWZcTvn7L3W54e1vrXX3vuciLPPORFR1XE2EomorB0nVuz//r71re/y/1eMvb4Cb3N11xV/PP/2v4UBAwJG/7H8urx6/25/Gf8O5hypMQ0EEEQwAqLfoN/Z+97f/SW+/NvcgQk4sGBJK6H7N4PFVL+K+e0N11yNfkKvwUdwdlUAXPHHL38oa15f/i/46Ih6SuMSPmLAYAwyRKn7dfMGH97jaMFBYCJUgotIC2YAdu+LyW9vvubxAP8kAL8H/koAuOKP3+q6+xGnd5kdYCeECnGIJViwGJMAkQKfDvB3WZxjLKGh8VSCCzhwEWBpMc5/kBbjawT4HnwJfhr+pPBIu7uu+OOTo9vsmtQcniMBGkKFd4jDWMSCRUpLjJYNJkM+IRzQ+PQvIeAMTrBS2LEiaiR9b/5PuT6Ap/AcfAFO4Y3dA3DFH7/VS+M8k4baEAQfMI4QfbVDDGIRg7GKaIY52qAjTAgTvGBAPGIIghOCYAUrGFNgzA7Q3QhgCwfwAnwe5vDejgG44o/fbm1C5ZlYQvQDARPAIQGxCWBM+wWl37ZQESb4gImexGMDouhGLx1Cst0Saa4b4AqO4Hk4gxo+3DHAV/nx27p3JziPM2pVgoiia5MdEzCGULprIN7gEEeQ5IQxEBBBQnxhsDb5auGmAAYcHMA9eAAz8PBol8/xij9+C4Djlim4gJjWcwZBhCBgMIIYxGAVIkH3ZtcBuLdtRFMWsPGoY9rN+HoBji9VBYdwD2ZQg4cnO7OSq/z4rU5KKdwVbFAjNojCQzTlCLPFSxtamwh2jMUcEgg2Wm/6XgErIBhBckQtGN3CzbVacERgCnfgLswhnvqf7QyAq/z4rRZm1YglYE3affGITaZsdIe2FmMIpnOCap25I6jt2kCwCW0D1uAD9sZctNGXcQIHCkINDQgc78aCr+zjtw3BU/ijdpw3zhCwcaONwBvdeS2YZKkJNJsMPf2JKEvC28RXxxI0ASJyzQCjCEQrO4Q7sFArEzjZhaFc4cdv+/JFdKULM4px0DfUBI2hIsy06BqLhGTQEVdbfAIZXYMPesq6VoCHICzUyjwInO4Y411//LYLs6TDa9wvg2CC2rElgAnpTBziThxaL22MYhzfkghz6GAs2VHbbdM91VZu1MEEpupMMwKyVTb5ij9+u4VJG/5EgEMMmFF01cFai3isRbKbzb+YaU/MQbAm2XSMoUPAmvZzbuKYRIFApbtlrfFuUGd6vq2hXNnH78ZLh/iFhsQG3T4D1ib7k5CC6vY0DCbtrohgLEIClXiGtl10zc0CnEGIhhatLBva7NP58Tvw0qE8yWhARLQ8h4+AhQSP+I4F5xoU+VilGRJs6wnS7ruti/4KvAY/CfdgqjsMy4pf8fodQO8/gnuX3f/3xi3om1/h7THr+co3x93PP9+FBUfbNUjcjEmhcrkT+8K7ml7V10Jo05mpIEFy1NmCJWx9SIKKt+EjAL4Ez8EBVOB6havuT/rByPvHXK+9zUcfcbb254+9fydJknYnRr1oGfdaiAgpxu1Rx/Rek8KISftx3L+DfsLWAANn8Hvw0/AFeAGO9DFV3c6D+CcWbL8Dj9e7f+T1k8AZv/d7+PXWM/Z+VvdCrIvuAKO09RpEEQJM0Ci6+B4xhTWr4cZNOvhktabw0ta0rSJmqz3Yw5/AKXwenod7cAhTmBSPKf6JBdvH8IP17h95pXqw50/+BFnj88fev4NchyaK47OPhhtI8RFSvAfDSNh0Ck0p2gLxGkib5NJj/JWCr90EWQJvwBzO4AHcgztwAFN1evHPUVGwfXON+0debT1YeGON9Yy9/63X+OguiwmhIhQhD7l4sMqlG3D86Suc3qWZ4rWjI1X7u0Ytw6x3rIMeIOPDprfe2XzNgyj6PahhBjO4C3e6puDgXrdg+/5l948vF3bqwZetZ+z9Rx9zdIY5pInPK4Nk0t+l52xdK2B45Qd87nM8fsD5EfUhIcJcERw4RdqqH7Yde5V7m1vhNmtedkz6EDzUMF/2jJYWbC+4fzzA/Y+/8PPH3j9dcBAPIRP8JLXd5BpAu03aziOL3VVHZzz3CXWDPWd+SH2AnxIqQoTZpo9Ckc6HIrFbAbzNmlcg8Ag8NFDDAhbJvTBZXbC94P7t68EXfv6o+21gUtPETU7bbkLxvNKRFG2+KXzvtObonPP4rBvsgmaKj404DlshFole1Glfh02fE7bYR7dZ82oTewIBGn1Md6CG6YUF26X376oevOLzx95vhUmgblI6LBZwTCDY7vMq0op5WVXgsObOXJ+1x3qaBl9j1FeLxbhU9w1F+Wiba6s1X/TBz1LnUfuYDi4r2C69f1f14BWfP+p+W2GFKuC9phcELMYRRLur9DEZTUdEH+iEqWdaM7X4WOoPGI+ZYD2+wcQ+y+ioHUZ9dTDbArzxmi/bJI9BND0Ynd6lBdve/butBw8+f/T9D3ABa3AG8W3VPX4hBin+bj8dMMmSpp5pg7fJ6xrBFE2WQQEWnV8Qg3FbAWzYfM1rREEnmvkN2o1+acG2d/9u68GDzx91v3mAjb1zkpqT21OipPKO0b9TO5W0nTdOmAQm0TObts3aBKgwARtoPDiCT0gHgwnbArzxmtcLc08HgF1asN0C4Ms/fvD5I+7PhfqyXE/b7RbbrGyRQRT9ARZcwAUmgdoz0ehJ9Fn7QAhUjhDAQSw0bV3T3WbNa59jzmiP6GsWbGXDX2ytjy8+f9T97fiBPq9YeLdBmyuizZHaqXITnXiMUEEVcJ7K4j3BFPurtB4bixW8wTpweL8DC95szWMOqucFYGsWbGU7p3TxxxefP+r+oTVktxY0v5hbq3KiOKYnY8ddJVSBxuMMVffNbxwIOERShst73HZ78DZrHpmJmH3K6sGz0fe3UUj0eyRrSCGTTc+rjVNoGzNSv05srAxUBh8IhqChiQgVNIIBH3AVPnrsnXQZbLTm8ammv8eVXn/vWpaTem5IXRlt+U/LA21zhSb9cye6jcOfCnOwhIAYXAMVTUNV0QhVha9xjgA27ODJbLbmitt3tRN80lqG6N/khgot4ZVlOyO4WNg3OIMzhIZQpUEHieg2im6F91hB3I2tubql6BYNN9Hj5S7G0G2tahslBWKDnOiIvuAEDzakDQKDNFQT6gbn8E2y4BBubM230YIpBnDbMa+y3dx0n1S0BtuG62lCCXwcY0F72T1VRR3t2ONcsmDjbmzNt9RFs2LO2hQNyb022JisaI8rAWuw4HI3FuAIhZdOGIcdjLJvvObqlpqvWTJnnQbyi/1M9O8UxWhBs//H42I0q1Yb/XPGONzcmm+ri172mHKvZBpHkJaNJz6v9jxqiklDj3U4CA2ugpAaYMWqNXsdXbmJNd9egCnJEsphXNM+MnK3m0FCJ5S1kmJpa3DgPVbnQnPGWIDspW9ozbcO4K/9LkfaQO2KHuqlfFXSbdNzcEcwoqNEFE9zcIXu9/6n/ym/BC/C3aJLzEKPuYVlbFnfhZ8kcWxV3dbv4bKl28566wD+8C53aw49lTABp9PWbsB+knfc/Li3eVizf5vv/xmvnPKg5ihwKEwlrcHqucuVcVOxEv8aH37E3ZqpZypUulrHEtIWKUr+txHg+ojZDGlwnqmkGlzcVi1dLiNSJiHjfbRNOPwKpx9TVdTn3K05DBx4psIk4Ei8aCkJahRgffk4YnEXe07T4H2RR1u27E6wfQsBDofUgjFUFnwC2AiVtA+05J2zpiDK2Oa0c5fmAecN1iJzmpqFZxqYBCYhFTCsUNEmUnIcZ6aEA5rQVhEywG6w7HSW02XfOoBlQmjwulOFQAg66SvJblrTEX1YtJ3uG15T/BH1OfOQeuR8g/c0gdpT5fx2SKbs9EfHTKdM8A1GaJRHLVIwhcGyydZsbifAFVKl5EMKNU2Hryo+06BeTgqnxzYjThVySDikbtJPieco75lYfKAJOMEZBTjoITuWHXXZVhcUDIS2hpiXHV9Ku4u44bN5OYLDOkJo8w+xJSMbhBRHEdEs9JZUCkQrPMAvaHyLkxgkEHxiNkx/x2YB0mGsQ8EUWj/stW5YLhtS5SMu+/YBbNPDCkGTUybN8krRLBGPlZkVOA0j+a1+rkyQKWGaPHPLZOkJhioQYnVZ2hS3zVxMtgC46KuRwbJNd9nV2PHgb36F194ecf/Yeu2vAFe5nm/bRBFrnY4BauE8ERmZRFUn0k8hbftiVYSKMEme2dJCJSCGYAlNqh87bXOPdUkGy24P6d1ll21MBqqx48Fvv8ZHH8HZFY7j/uAq1xMJUFqCSUlJPmNbIiNsmwuMs/q9CMtsZsFO6SprzCS1Z7QL8xCQClEelpjTduDMsmWD8S1PT152BtvmIGvUeDA/yRn83u/x0/4qxoPHjx+PXY9pqX9bgMvh/Nz9kpP4pOe1/fYf3axUiMdHLlPpZCNjgtNFAhcHEDxTumNONhHrBduW+vOyY++70WWnPXj98eA4kOt/mj/5E05l9+O4o8ePx67HFqyC+qSSnyselqjZGaVK2TadbFLPWAQ4NBhHqDCCV7OTpo34AlSSylPtIdd2AJZlyzYQrDJ5lcWGNceD80CunPLGGzsfD+7wRb95NevJI5docQ3tgCyr5bGnyaPRlmwNsFELViOOx9loebGNq2moDOKpHLVP5al2cymWHbkfzGXL7kfRl44H9wZy33tvt+PB/Xnf93e+nh5ZlU18wCiRUa9m7kib9LYuOk+hudQNbxwm0AQqbfloimaB2lM5fChex+ylMwuTbfmXQtmWlenZljbdXTLuOxjI/fDDHY4Hjx8/Hrse0zXfPFxbUN1kKqSCCSk50m0Ajtx3ub9XHBKHXESb8iO6E+qGytF4nO0OG3SXzbJlhxBnKtKyl0NwybjvYCD30aMdjgePHz8eu56SVTBbgxJMliQ3Oauwg0QHxXE2Ez/EIReLdQj42Gzb4CLS0YJD9xUx7bsi0vJi5mUbW1QzL0h0PFk17rtiIPfJk52MB48fPx67npJJwyrBa2RCCQRTbGZSPCxTPOiND4G2pYyOQ4h4jINIJh5wFU1NFZt+IsZ59LSnDqBjZ2awbOku+yInunLcd8VA7rNnOxkPHj9+PGY9B0MWJJNozOJmlglvDMXDEozdhQWbgs/U6oBanGzLrdSNNnZFjOkmbi5bNt1lX7JLLhn3vXAg9/h4y/Hg8ePHI9dzQMEkWCgdRfYykYKnkP7D4rIujsujaKPBsB54vE2TS00ccvFY/Tth7JXeq1hz+qgVy04sAJawTsvOknHfCwdyT062HA8eP348Zj0vdoXF4pilKa2BROed+9fyw9rWRXeTFXESMOanvDZfJuJaSXouQdMdDJZtekZcLLvEeK04d8m474UDuaenW44Hjx8/Xns9YYqZpszGWB3AN/4VHw+k7WSFtJ3Qicuqb/NlVmgXWsxh570xg2UwxUw3WfO6B5nOuO8aA7lnZxuPB48fPx6znm1i4bsfcbaptF3zNT78eFPtwi1OaCNOqp1x3zUGcs/PN++AGD1+fMXrSVm2baTtPhPahbPhA71wIHd2bXzRa69nG+3CraTtPivahV/55tXWg8fyRY/9AdsY8VbSdp8V7cKrrgdfM//z6ILQFtJ2nxHtwmuoB4/kf74+gLeRtvvMaBdeSz34+vifx0YG20jbfTa0C6+tHrwe//NmOG0L8EbSdp8R7cLrrQe/996O+ai3ujQOskpTNULa7jOjXXj99eCd8lHvoFiwsbTdZ0a78PrrwTvlo966pLuRtB2fFe3Cm6oHP9kNH/W2FryxtN1nTLvwRurBO+Kj3pWXHidtx2dFu/Bm68Fb81HvykuPlrb7LGkX3mw9eGs+6h1Y8MbSdjegXcguQLjmevDpTQLMxtJ2N6NdyBZu9AbrwVvwUW+LbteULUpCdqm0HTelXbhNPe8G68Gb8lFvVfYfSNuxvrTdTWoXbozAzdaDZzfkorOj1oxVxlIMlpSIlpLrt8D4hrQL17z+c3h6hU/wv4Q/utps4+bm+6P/hIcf0JwQ5oQGPBL0eKPTYEXTW+eL/2DKn73J9BTXYANG57hz1cEMviVf/4tf5b/6C5pTQkMIWoAq7hTpOJjtAM4pxKu5vg5vXeUrtI09/Mo/5H+4z+Mp5xULh7cEm2QbRP2tFIKR7WM3fPf/jZ3SWCqLM2l4NxID5zB72HQXv3jj/8mLR5xXNA5v8EbFQEz7PpRfl1+MB/hlAN65qgDn3wTgH13hK7T59bmP+NIx1SHHU84nLOITt3iVz8mNO+lPrjGAnBFqmioNn1mTyk1ta47R6d4MrX7tjrnjYUpdUbv2rVr6YpVfsGG58AG8Ah9eyUN8CX4WfgV+G8LVWPDGb+Zd4cU584CtqSbMKxauxTg+dyn/LkVgA+IR8KHtejeFKRtTmLLpxN6mYVLjYxwXf5x2VofiZcp/lwKk4wGOpYDnoIZPdg/AAbwMfx0+ge9dgZvYjuqKe4HnGnykYo5TvJbG0Vj12JagRhwKa44H95ShkZa5RyLGGdfYvG7aw1TsF6iapPAS29mNS3NmsTQZCmgTzFwgL3upCTgtBTRwvGMAKrgLn4evwin8+afJRcff+8izUGUM63GOOuAs3tJkw7J4kyoNreqrpO6cYLQeFUd7TTpr5YOTLc9RUUogUOVJQ1GYJaFLAW0oTmKyYS46ZooP4S4EON3xQ5zC8/CX4CnM4c1PE8ApexpoYuzqlP3d4S3OJP8ZDK7cKWNaTlqmgDiiHwl1YsE41w1zT4iRTm3DBqxvOUsbMKKDa/EHxagtnta072ejc3DOIh5ojvh8l3tk1JF/AV6FU6jh3U8HwEazLgdCLYSQ+MYiAI2ltomkzttUb0gGHdSUUgsIYjTzLG3mObX4FBRaYtpDVNZrih9TgTeYOBxsEnN1gOCTM8Bsw/ieMc75w9kuAT6A+/AiHGvN/+Gn4KRkiuzpNNDYhDGFndWRpE6SVfm8U5bxnSgVV2jrg6JCKmneqey8VMFgq2+AM/i4L4RUbfSi27lNXZ7R7W9RTcq/q9fk4Xw3AMQd4I5ifAZz8FcVtm9SAom/dyN4lczJQW/kC42ZrHgcCoIf1oVMKkVItmMBi9cOeNHGLqOZk+QqQmrbc5YmYgxELUUN35z2iohstgfLIFmcMV7s4CFmI74L9+EFmGsi+tGnAOD4Yk9gIpo01Y4cA43BWGygMdr4YZekG3OBIUXXNukvJS8tqa06e+lSDCtnqqMFu6hWHXCF+WaYt64m9QBmNxi7Ioy7D+fa1yHw+FMAcPt7SysFLtoG4PXAk7JOA3aAxBRqUiAdU9Yp5lK3HLSRFtOim0sa8euEt08xvKjYjzeJ2GU7YawexrnKI9tmobInjFXCewpwriY9+RR4aaezFhMhGCppKwom0ChrgFlKzyPKkGlTW1YQrE9HJqu8hKGgMc6hVi5QRq0PZxNfrYNgE64utmRv6KKHRpxf6VDUaOvNP5jCEx5q185My/7RKz69UQu2im5k4/eownpxZxNLwiZ1AZTO2ZjWjkU9uaB2HFn6Q3u0JcsSx/qV9hTEApRzeBLDJQXxYmTnq7bdLa3+uqFrxLJ5w1TehnNHx5ECvCh2g2c3hHH5YsfdaSKddztfjQ6imKFGSyFwlLzxEGPp6r5IevVjk1AMx3wMqi1NxDVjLBiPs9tbsCkIY5we5/ML22zrCScFxnNtzsr9Wcc3CnD+pYO+4VXXiDE0oc/vQQ/fDK3oPESJMYXNmJa/DuloJZkcTpcYE8lIH8Dz8DJMiynNC86Mb2lNaaqP/+L7f2fcE/yP7/Lde8xfgSOdMxvOixZf/9p3+M4hT1+F+zApxg9XfUvYjc8qX2lfOOpK2gNRtB4flpFu9FTKCp2XJRgXnX6olp1zyYjTKJSkGmLE2NjUr1bxFM4AeAAHBUFIeSLqXR+NvH/M9fOnfHzOD2vCSyQJKzfgsCh+yi/Mmc35F2fUrw7miW33W9hBD1vpuUojFphIyvg7aTeoymDkIkeW3XLHmguMzbIAJejN6B5MDrhipE2y6SoFRO/AK/AcHHZHNIfiWrEe/C6cr3f/yOvrQKB+zMM55/GQdLDsR+ifr5Fiuu+/y+M78LzOE5dsNuXC3PYvYWd8NXvphLSkJIasrlD2/HOqQ+RjcRdjKTGWYhhVUm4yxlyiGPuMsZR7sMCHUBeTuNWA7if+ifXgc/hovftHXs/DV+Fvwe+f8shzMiMcweFgBly3//vwJfg5AN4450fn1Hd1Rm1aBLu22Dy3y3H2+OqMemkbGZ4jozcDjJf6596xOLpC0eMTHbKnxLxH27uZ/bMTGs2jOaMOY4m87CfQwF0dw53oa1k80JRuz/XgS+8fX3N9Af4qPIMfzKgCp4H5TDGe9GGeFPzSsZz80SlPTxXjgwJmC45njzgt2vbQ4b4OAdUK4/vWhO8d8v6EE8fMUsfakXbPpFJeLs2ubM/qdm/la3WP91uWhxXHjoWhyRUq2iJ/+5mA73zwIIo+LoZ/SgvIRjAd1IMvvn98PfgOvAJfhhm8scAKVWDuaRaK8aQ9f7vuPDH6Bj47ZXau7rqYJ66mTDwEDU6lLbCjCK0qTXyl5mnDoeNRxanj3FJbaksTk0faXxHxLrssgPkWB9LnA/MFleXcJozzjwsUvUG0X/QCve51qkMDXp9mtcyOy3rwBfdvVJK7D6/ACSzg3RoruIq5UDeESfEmVclDxnniU82vxMLtceD0hGZWzBNPMM/jSPne2OVatiTKUpY5vY7gc0LdUAWeWM5tH+O2I66AOWw9xT2BuyRVLGdoDHUsVRXOo/c+ZdRXvFfnxWyIV4upFLCl9eAL7h8Zv0QH8Ry8pA2cHzQpGesctVA37ZtklBTgHjyvdSeKY/RZw/kJMk0Y25cSNRWSigQtlULPTw+kzuJPeYEkXjQRpoGZobYsLF79pyd1dMRHInbgFTZqNLhDqiIsTNpoex2WLcy0/X6rHcdMMQvFSd5dWA++4P7xv89deACnmr36uGlL69bRCL6BSZsS6c0TU2TKK5gtWCzgAOOwQcurqk9j8whvziZSMLcq5hbuwBEsYjopUBkqw1yYBGpLA97SRElEmx5MCInBY5vgLk94iKqSWmhIGmkJ4Bi9m4L645J68LyY4wsFYBfUg5feP/6gWWm58IEmKQM89hq7KsZNaKtP5TxxrUZZVkNmMJtjbKrGxLNEbHPJxhqy7lAmbC32ZqeF6lTaknRWcYaFpfLUBh/rwaQycCCJmW15Kstv6jRHyJFry2C1ahkkIW0LO75s61+owxK1y3XqweX9m5YLM2DPFeOjn/iiqCKJ+yKXF8t5Yl/kNsqaSCryxPq5xWTFIaP8KSW0RYxqupaUf0RcTNSSdJZGcKYdYA6kdtrtmyBckfKXwqk0pHpUHlwWaffjNRBYFPUDWa8e3Lt/o0R0CdisKDM89cX0pvRHEfM8ca4t0s2Xx4kgo91MPQJ/0c9MQYq0co8MBh7bz1fio0UUHLR4aAIOvOmoYO6kwlEVODSSTliWtOtH6sPkrtctF9ZtJ9GIerBskvhdVS5cFNv9s1BU0AbdUgdK4FG+dRnjFmDTzniRMdZO1QhzMK355vigbdkpz9P6qjUGE5J2qAcXmwJ20cZUiAD0z+pGMx6xkzJkmEf40Hr4qZfVg2XzF9YOyoV5BjzVkUJngKf8lgNYwKECEHrCNDrWZzMlflS3yBhr/InyoUgBc/lKT4pxVrrC6g1YwcceK3BmNxZcAtz3j5EIpqguh9H6wc011YN75cKDLpFDxuwkrPQmUwW4KTbj9mZTwBwLq4aQMUZbHm1rylJ46dzR0dua2n3RYCWZsiHROeywyJGR7mXKlpryyCiouY56sFkBWEnkEB/raeh/Sw4162KeuAxMQpEkzy5alMY5wamMsWKKrtW2WpEWNnReZWONKWjrdsKZarpFjqCslq773PLmEhM448Pc3+FKr1+94vv/rfw4tEcu+lKTBe4kZSdijBrykwv9vbCMPcLQTygBjzVckSLPRVGslqdunwJ4oegtFOYb4SwxNgWLCmD7T9kVjTv5YDgpo0XBmN34Z/rEHp0sgyz7lngsrm4lvMm2Mr1zNOJYJ5cuxuQxwMGJq/TP5emlb8fsQBZviK4t8hFL+zbhtlpwaRSxQRWfeETjuauPsdGxsBVdO7nmP4xvzSoT29pRl7kGqz+k26B3Oy0YNV+SXbbQas1ctC/GarskRdFpKczVAF1ZXnLcpaMuzVe6lZ2g/1ndcvOVgRG3sdUAY1bKD6achijMPdMxV4muKVorSpiDHituH7rSTs7n/4y5DhRXo4FVBN4vO/zbAcxhENzGbHCzU/98Mcx5e7a31kWjw9FCe/zNeYyQjZsWb1uc7U33pN4Mji6hCLhivqfa9Ss6xLg031AgfesA/l99m9fgvnaF9JoE6bYKmkGNK3aPbHB96w3+DnxFm4hs0drLsk7U8kf/N/CvwQNtllna0rjq61sH8L80HAuvwH1tvBy2ChqWSCaYTaGN19sTvlfzFD6n+iKTbvtayfrfe9ueWh6GJFoxLdr7V72a5ZpvHcCPDzma0wTO4EgbLyedxstO81n57LYBOBzyfsOhUKsW1J1BB5vr/tz8RyqOFylQP9Tvst2JALsC5lsH8PyQ40DV4ANzYa4dedNiKNR1s+x2wwbR7q4/4cTxqEk4LWDebfisuo36JXLiWFjOtLrlNWh3K1rRS4xvHcDNlFnNmWBBAl5SWaL3oPOfnvbr5pdjVnEaeBJSYjuLEkyLLsWhKccadmOphZkOPgVdalj2QpSmfOsADhMWE2ZBu4+EEJI4wKTAuCoC4xwQbWXBltpxbjkXJtKxxabo9e7tyhlgb6gNlSbUpMh+l/FaqzVwewGu8BW1Zx7pTpQDJUjb8tsUTW6+GDXbMn3mLbXlXJiGdggxFAoUrtPS3wE4Nk02UZG2OOzlk7fRs7i95QCLo3E0jtrjnM7SR3uS1p4qtS2nJ5OwtQVHgOvArLBFijZUV9QtSl8dAY5d0E0hM0w3HS2DpIeB6m/A1+HfhJcGUq4sOxH+x3f5+VO+Ds9rYNI7zPXOYWPrtf8bYMx6fuOAX5jzNR0PdsuON+X1f7EERxMJJoU6GkTEWBvVolVlb5lh3tKCg6Wx1IbaMDdJ+9sUCc5KC46hKGCk3IVOS4TCqdBNfUs7Kd4iXf2RjnT/LLysJy3XDcHLh/vde3x8DoGvwgsa67vBk91G5Pe/HbOe7xwym0NXbtiuuDkGO2IJDh9oQvJ4cY4vdoqLDuoH9Zl2F/ofsekn8lkuhIlhQcffUtSjytFyp++p6NiE7Rqx/lodgKVoceEp/CP4FfjrquZaTtj2AvH5K/ywpn7M34K/SsoYDAdIN448I1/0/wveW289T1/lX5xBzc8N5IaHr0XMOQdHsIkDuJFifj20pBm5jzwUv9e2FhwRsvhAbalCIuIw3bhJihY3p6nTFFIZgiSYjfTf3aXuOjmeGn4bPoGvwl+CFzTRczBIuHBEeImHc37/lGfwZR0cXzVDOvaKfNHvwe+suZ771K/y/XcBlsoN996JpBhoE2toYxOznNEOS5TJc6Id5GEXLjrWo+LEWGNpPDU4WAwsIRROu+1vM+0oW37z/MBN9kqHnSArwPfgFJ7Cq/Ai3Ie7g7ncmI09v8sjzw9mzOAEXoIHxURueaAce5V80f/DOuuZwHM8vsMb5wBzOFWM7wymTXPAEvm4vcFpZ2ut0VZRjkiP2MlmLd6DIpbGSiHOjdnUHN90hRYmhTnmvhzp1iKDNj+b7t5hi79lWGwQ+HN9RsfFMy0FXbEwhfuczKgCbyxYwBmcFhhvo/7a44v+i3XWcwDP86PzpGQYdWh7csP5dBvZ1jNzdxC8pBGuxqSW5vw40nBpj5JhMwvOzN0RWqERHMr4Lv1kWX84xLR830G3j6yqZ1a8UstTlW+qJPOZ+sZ7xZPKTJLhiNOAFd6tk+jrTH31ncLOxid8+nzRb128HhUcru/y0Wn6iT254YPC6FtVSIMoW2sk727AhvTtrWKZTvgsmckfXYZWeNRXx/3YQ2OUxLDrbHtN11IwrgXT6c8dATDwLniYwxzO4RzuQqTKSC5gAofMZ1QBK3zQ4JWobFbcvJm87FK+6JXrKahLn54m3p+McXzzYtP8VF/QpJuh1OwieElEoI1pRxPS09FBrkq2tWCU59+HdhNtTIqKm8EBrw2RTOEDpG3IKo2Y7mFdLm3ZeVjYwVw11o/oznceMve4CgMfNym/utA/d/ILMR7gpXzRy9eDsgLcgbs8O2Va1L0zzIdwGGemTBuwROHeoMShkUc7P+ISY3KH5ZZeWqO8mFTxQYeXTNuzvvK5FGPdQfuu00DwYFY9dyhctEt+OJDdnucfpmyhzUJzfsJjr29l8S0bXBfwRS9ZT26tmMIdZucch5ZboMz3Nio3nIOsYHCGoDT4kUA9MiXEp9Xsui1S8th/kbWIrMBxDGLodWUQIWcvnXy+9M23xPiSMOiRPqM+YMXkUN3gXFrZJwXGzUaMpJfyRS9ZT0lPe8TpScuRlbMHeUmlaKDoNuy62iWNTWNFYjoxFzuJs8oR+RhRx7O4SVNSXpa0ZJQ0K1LAHDQ+D9IepkMXpcsq5EVCvClBUIzDhDoyKwDw1Lc59GbTeORivugw1IcuaEOaGWdNm+Ps5fQ7/tm0DjMegq3yM3vb5j12qUId5UZD2oxDSEWOZMSqFl/W+5oynWDa/aI04tJRQ2eTXusg86SQVu/nwSYwpW6wLjlqIzwLuxGIvoAvul0PS+ZNz0/akp/pniO/8JDnGyaCkzbhl6YcqmK/69prxPqtpx2+Km9al9sjL+rwMgHw4jE/C8/HQ3m1vBuL1fldbzd8mOueVJ92syqdEY4KJjSCde3mcRw2TA6szxedn+zwhZMps0XrqEsiUjnC1hw0TELC2Ek7uAAdzcheXv1BYLagspxpzSAoZZUsIzIq35MnFQ9DOrlNB30jq3L4pkhccKUAA8/ocvN1Rzx9QyOtERs4CVsJRK/DF71kPYrxYsGsm6RMh4cps5g1DOmM54Ly1ii0Hd3Y/BMk8VWFgBVmhqrkJCPBHAolwZaWzLR9Vb7bcWdX9NyUYE+uB2BKfuaeBUcjDljbYVY4DdtsVWvzRZdWnyUzDpjNl1Du3aloAjVJTNDpcIOVVhrHFF66lLfJL1zJr9PQ2nFJSBaKoDe+sAvLufZVHVzYh7W0h/c6AAZ+7Tvj6q9j68G/cTCS/3n1vLKHZwNi+P+pS0WkZNMBMUl+LDLuiE4omZy71r3UFMwNJV+VJ/GC5ixVUkBStsT4gGKh0Gm4Oy3qvq7Lbmq24nPdDuDR9deR11XzP4vFu3TYzfnIyiSVmgizUYGqkIXNdKTY9pgb9D2Ix5t0+NHkVzCdU03suWkkVZAoCONCn0T35gAeW38de43mf97sMOpSvj4aa1KYUm58USI7Wxxes03bAZdRzk6UtbzMaCQ6IxO0dy7X+XsjoD16hpsBeGz9dfzHj+R/Hp8nCxZRqkEDTaCKCSywjiaoMJ1TITE9eg7Jqnq8HL6gDwiZb0u0V0Rr/rmvqjxKuaLCX7ZWXTvAY+uvm3z8CP7nzVpngqrJpZKwWnCUjIviYVlirlGOzPLI3SMVyp/elvBUjjDkNhrtufFFErQ8pmdSlbK16toBHlt/HV8uHMX/vEGALkV3RJREiSlopxwdMXOZPLZ+ix+kAHpMKIk8UtE1ygtquttwxNhphrIZ1IBzjGF3IIGxGcBj6q8bHJBG8T9vdsoWrTFEuebEZuVxhhClH6P5Zo89OG9fwHNjtNQTpD0TG9PJLEYqvEY6Rlxy+ZZGfL0Aj62/bnQCXp//eeM4KzfQVJbgMQbUjlMFIm6TpcfWlZje7NBSV6IsEVmumWIbjiloUzQX9OzYdo8L1wjw2PrrpimONfmfNyzKklrgnEkSzT5QWYQW40YShyzqsRmMXbvVxKtGuYyMKaU1ugenLDm5Ily4iT14fP11Mx+xJv+zZ3MvnfdFqxU3a1W/FTB4m3Qfsyc1XUcdVhDeUDZXSFHHLQj/Y5jtC7ZqM0CXGwB4bP11i3LhOvzPGygYtiUBiwQV/4wFO0majijGsafHyRLu0yG6q35cL1rOpVxr2s5cM2jJYMCdc10Aj6q/blRpWJ//+dmm5psMl0KA2+AFRx9jMe2WbC4jQxnikd4DU8TwUjRVacgdlhmr3bpddzuJ9zXqr2xnxJfzP29RexdtjDVZqzkqa6PyvcojGrfkXiJ8SEtml/nYskicv0ivlxbqjemwUjMw5evdg8fUX9nOiC/lf94Q2i7MURk9nW1MSj5j8eAyV6y5CN2S6qbnw3vdA1Iwq+XOSCl663udN3IzLnrt+us25cI1+Z83SXQUldqQq0b5XOT17bGpLd6ssN1VMPf8c+jG8L3NeCnMdF+Ra3fRa9dft39/LuZ/3vwHoHrqGmQFafmiQw6eyzMxS05K4bL9uA+SKUQzCnSDkqOGokXyJvbgJ/BHI+qvY69//4rl20NsmK2ou2dTsyIALv/91/8n3P2Aao71WFGi8KKv1fRC5+J67Q/507/E/SOshqN5TsmYIjVt+kcjAx98iz/4SaojbIV1rexE7/C29HcYD/DX4a0rBOF5VTu7omsb11L/AWcVlcVZHSsqGuXLLp9ha8I//w3Mv+T4Ew7nTBsmgapoCrNFObIcN4pf/Ob/mrvHTGqqgAupL8qWjWPS9m/31jAe4DjA+4+uCoQoT/zOzlrNd3qd4SdphFxsUvYwGWbTWtISc3wNOWH+kHBMfc6kpmpwPgHWwqaSUG2ZWWheYOGQGaHB+eQ/kn6b3pOgLV+ODSn94wDvr8Bvb70/LLuiPPEr8OGVWfDmr45PZyccEmsVXZGe1pRNX9SU5+AVQkNTIVPCHF/jGmyDC9j4R9LfWcQvfiETmgMMUCMN1uNCakkweZsowdYobiMSlnKA93u7NzTXlSfe+SVbfnPQXmg9LpYAQxpwEtONyEyaueWM4FPjjyjG3uOaFmBTWDNgBXGEiQpsaWhnAqIijB07Dlsy3fUGeP989xbWkyf+FF2SNEtT1E0f4DYYVlxFlbaSMPIRMk/3iMU5pME2SIWJvjckciebkQuIRRyhUvkHg/iUljG5kzVog5hV7vIlCuBrmlhvgPfNHQM8lCf+FEGsYbMIBC0qC9a0uuy2wLXVbLBaP5kjHokCRxapkQyzI4QEcwgYHRZBp+XEFTqXFuNVzMtjXLJgX4gAid24Hjwc4N3dtVSe+NNiwTrzH4WVUOlDobUqr1FuAgYllc8pmzoVrELRHSIW8ViPxNy4xwjBpyR55I6J220qQTZYR4guvUICJiSpr9gFFle4RcF/OMB7BRiX8sSfhpNSO3lvEZCQfLUVTKT78Ek1LRLhWN+yLyTnp8qWUZ46b6vxdRGXfHVqx3eI75YaLa4iNNiK4NOW7wPW6lhbSOF9/M9qw8e/aoB3d156qTzxp8pXx5BKAsYSTOIIiPkp68GmTq7sZtvyzBQaRLNxIZ+paozHWoLFeExIhRBrWitHCAHrCF7/thhD8JhYz84wg93QRV88wLuLY8zF8sQ36qF1J455bOlgnELfshKVxYOXKVuKx0jaj22sczTQqPqtV/XDgpswmGTWWMSDw3ssyUunLLrVPGjYRsH5ggHeHSWiV8kT33ycFSfMgkoOK8apCye0J6VW6GOYvffgU9RWsukEi2kUV2nl4dOYUzRik9p7bcA4ggdJ53LxKcEe17B1R8eqAd7dOepV8sTXf5lhejoL85hUdhDdknPtKHFhljOT+bdq0hxbm35p2nc8+Ja1Iw+tJykgp0EWuAAZYwMVwac5KzYMslhvgHdHRrxKnvhTYcfKsxTxtTETkjHO7rr3zjoV25lAQHrqpV7bTiy2aXMmUhTBnKS91jhtR3GEoF0oLnWhWNnYgtcc4N0FxlcgT7yz3TgNIKkscx9jtV1ZKpWW+Ub1tc1eOv5ucdgpx+FJy9pgbLE7xDyXb/f+hLHVGeitHOi6A7ybo3sF8sS7w7cgdk0nJaOn3hLj3uyD0Zp5pazFIUXUpuTTU18d1EPkDoX8SkmWTnVIozEdbTcZjoqxhNHf1JrSS/AcvHjZ/SMHhL/7i5z+POsTUh/8BvNfYMTA8n+yU/MlTZxSJDRStqvEuLQKWwDctMTQogUDyQRoTQG5Kc6oQRE1yV1jCA7ri7jdZyK0sYTRjCR0Hnnd+y7nHxNgTULqw+8wj0mQKxpYvhjm9uSUxg+TTy7s2GtLUGcywhXSKZN275GsqlclX90J6bRI1aouxmgL7Q0Nen5ziM80SqMIo8cSOo+8XplT/5DHNWsSUr/6lLN/QQ3rDyzLruEW5enpf7KqZoShEduuSFOV7DLX7Ye+GmXb6/hnNNqKsVXuMDFpb9Y9eH3C6NGEzuOuI3gpMH/I6e+zDiH1fXi15t3vA1czsLws0TGEtmPEJdiiFPwlwKbgLHAFk4P6ZyPdymYYHGE0dutsChQBl2JcBFlrEkY/N5bQeXQ18gjunuMfMfsBlxJSx3niO485fwO4fGD5T/+3fPQqkneWVdwnw/3bMPkW9Wbqg+iC765Zk+xcT98ibKZc2EdgHcLoF8cSOo/Oc8fS+OyEULF4g4sJqXVcmfMfsc7A8v1/yfGXmL9I6Fn5pRwZhsPv0TxFNlAfZCvG+Oohi82UC5f/2IsJo0cTOm9YrDoKhFPEUr/LBYTUNht9zelHXDqwfPCIw4owp3mOcIQcLttWXFe3VZ/j5H3cIc0G6oPbCR+6Y2xF2EC5cGUm6wKC5tGEzhsWqw5hNidUiKX5gFWE1GXh4/Qplw4sVzOmx9QxU78g3EF6wnZlEN4FzJ1QPSLEZz1KfXC7vd8ssGdIbNUYpVx4UapyFUHzJoTOo1McSkeNn1M5MDQfs4qQuhhX5vQZFw8suwWTcyYTgioISk2YdmkhehG4PkE7w51inyAGGaU+uCXADabGzJR1fn3lwkty0asIo8cROm9Vy1g0yDxxtPvHDAmpu+PKnM8Ix1wwsGw91YJqhteaWgjYBmmQiebmSpwKKzE19hx7jkzSWOm66oPbzZ8Yj6kxVSpYjVAuvLzYMCRo3oTQecOOjjgi3NQ4l9K5/hOGhNTdcWVOTrlgYNkEXINbpCkBRyqhp+LdRB3g0OU6rMfW2HPCFFMV9nSp+uB2woepdbLBuJQyaw/ZFysXrlXwHxI0b0LovEkiOpXGA1Ijagf+KUNC6rKNa9bQnLFqYNkEnMc1uJrg2u64ELPBHpkgWbmwKpJoDhMwNbbGzAp7Yg31wS2T5rGtzit59PrKhesWG550CZpHEzpv2NGRaxlNjbMqpmEIzygJqQfjypycs2pg2cS2RY9r8HUqkqdEgKTWtWTKoRvOBPDYBltja2SO0RGjy9UHtxwRjA11ujbKF+ti5cIR9eCnxUg6owidtyoU5tK4NLji5Q3HCtiyF2IqLGYsHViOXTXOYxucDqG0HyttqYAKqYo3KTY1ekyDXRAm2AWh9JmsVh/ccg9WJ2E8YjG201sPq5ULxxX8n3XLXuMInbft2mk80rRGjCGctJ8/GFdmEQ9Ug4FlE1ll1Y7jtiraqm5Fe04VV8lvSVBL8hiPrfFVd8+7QH3Qbu2ipTVi8cvSGivc9cj8yvH11YMHdNSERtuOslM97feYFOPKzGcsI4zW0YGAbTAOaxCnxdfiYUmVWslxiIblCeAYr9VYR1gM7GmoPrilunSxxeT3DN/2eBQ9H11+nk1adn6VK71+5+Jfct4/el10/7KBZfNryUunWSCPxPECk1rdOv1WVSrQmpC+Tl46YD3ikQYcpunSQgzVB2VHFhxHVGKDgMEY5GLlQnP7FMDzw7IacAWnO6sBr12u+XanW2AO0wQ8pknnFhsL7KYIqhkEPmEXFkwaN5KQphbkUmG72wgw7WSm9RiL9QT925hkjiVIIhphFS9HKI6/8QAjlpXqg9W2C0apyaVDwKQwrwLY3j6ADR13ZyUNByQXHQu6RY09Hu6zMqXRaNZGS/KEJs0cJEe9VH1QdvBSJv9h09eiRmy0V2uJcqHcShcdvbSNg5fxkenkVprXM9rDVnX24/y9MVtncvbKY706anNl3ASll9a43UiacVquXGhvq4s2FP62NGKfQLIQYu9q1WmdMfmUrDGt8eDS0cXozH/fjmUH6Jruvm50hBDSaEU/2Ru2LEN/dl006TSc/g7tfJERxGMsgDUEr104pfWH9lQaN+M4KWQjwZbVc2rZVNHsyHal23wZtIs2JJqtIc/WLXXRFCpJkfE9jvWlfFbsNQ9pP5ZBS0zKh4R0aMFj1IjTcTnvi0Zz2rt7NdvQb2mgbju1plsH8MmbnEk7KbK0b+wC2iy3aX3szW8xeZvDwET6hWZYwqTXSSG+wMETKum0Dq/q+x62gt2ua2ppAo309TRk9TPazfV3qL9H8z7uhGqGqxNVg/FKx0HBl9OVUORn8Q8Jx9gFttGQUDr3tzcXX9xGgN0EpzN9mdZ3GATtPhL+CjxFDmkeEU6x56kqZRusLzALXVqkCN7zMEcqwjmywDQ6OhyUe0Xao1Qpyncrg6wKp9XfWDsaZplElvQ/b3sdweeghorwBDlHzgk1JmMc/wiERICVy2VJFdMjFuLQSp3S0W3+sngt2njwNgLssFGVQdJ0tu0KH4ky1LW4yrbkuaA6Iy9oz/qEMMXMMDWyIHhsAyFZc2peV9hc7kiKvfULxCl9iddfRK1f8kk9qvbdOoBtOg7ZkOZ5MsGrSHsokgLXUp9y88smniwWyuFSIRVmjplga3yD8Uij5QS1ZiM4U3Qw5QlSm2bXjFe6jzzBFtpg+/YBbLAWG7OPynNjlCw65fukGNdkJRf7yM1fOxVzbxOJVocFoYIaGwH22mIQkrvu1E2nGuebxIgW9U9TSiukPGU+Lt++c3DJPKhyhEEbXCQLUpae2exiKy6tMPe9mDRBFCEMTWrtwxN8qvuGnt6MoihKWS5NSyBhbH8StXoAz8PLOrRgLtOT/+4vcu+7vDLnqNvztOq7fmd8sMmY9Xzn1zj8Dq8+XVdu2Nv0IIySgEdQo3xVHps3Q5i3fLFsV4aiqzAiBhbgMDEd1uh8qZZ+lwhjkgokkOIv4xNJmyncdfUUzgB4oFMBtiu71Xumpz/P+cfUP+SlwFExwWW62r7b+LSPxqxn/gvMZ5z9C16t15UbNlq+jbGJtco7p8wbYlL4alSyfWdeuu0j7JA3JFNuVAwtst7F7FhWBbPFNKIUORndWtLraFLmMu7KFVDDOzqkeaiN33YAW/r76wR4XDN/yN1z7hejPau06EddkS/6XThfcz1fI/4K736fO48vlxt2PXJYFaeUkFS8U15XE3428xdtn2kc8GQlf1vkIaNRRnOMvLTWrZbElEHeLWi1o0dlKPAh1MVgbbVquPJ5+Cr8LU5/H/+I2QlHIU2ClXM9G8v7Rr7oc/hozfUUgsPnb3D+I+7WF8kNO92GY0SNvuxiE+2Bt8prVJTkzE64sfOstxuwfxUUoyk8VjcTlsqe2qITSFoSj6Epd4KsT6BZOWmtgE3hBfir8IzZDwgV4ZTZvD8VvPHERo8v+vL1DASHTz/i9OlKueHDjK5Rnx/JB1Vb1ioXdBra16dmt7dgik10yA/FwJSVY6XjA3oy4SqM2frqDPPSRMex9qs3XQtoWxMj7/Er8GWYsXgjaVz4OYumP2+9kbxvny/6kvWsEBw+fcb5bInc8APdhpOSs01tEqIkoiZjbAqKMruLbJYddHuHFRIyJcbdEdbl2sVLaySygunutBg96Y2/JjKRCdyHV+AEFtTvIpbKIXOamknYSiB6KV/0JetZITgcjjk5ZdaskBtWO86UF0ap6ozGXJk2WNiRUlCPFir66lzdm/SLSuK7EUdPz8f1z29Skq6F1fXg8+5UVR6bszncP4Tn4KUkkdJ8UFCY1zR1i8RmL/qQL3rlei4THG7OODlnKko4oI01kd3CaM08Ia18kC3GNoVaO9iDh+hWxSyTXFABXoau7Q6q9OxYg/OVEMw6jdbtSrJ9cBcewGmaZmg+bvkUnUUaGr+ZfnMH45Ivevl61hMcXsxYLFTu1hTm2zViCp7u0o5l+2PSUh9bDj6FgYypufBDhqK2+oXkiuHFHR3zfj+9PtA8oR0xnqX8qn+sx3bFODSbbF0X8EUvWQ8jBIcjo5bRmLOljDNtcqNtOe756h3l0VhKa9hDd2l1eqmsnh0MNMT/Cqnx6BInumhLT8luljzQ53RiJeA/0dxe5NK0o2fA1+GLXr6eNQWHNUOJssQaTRlGpLHKL9fD+IrQzTOMZS9fNQD4AnRNVxvTdjC+fJdcDDWQcyB00B0t9BDwTxXgaAfzDZ/DBXzRnfWMFRwuNqocOmX6OKNkY63h5n/fFcB28McVHqnXZVI27K0i4rDLNE9lDKV/rT+udVbD8dFFu2GGZ8mOt0kAXcoX3ZkIWVtw+MNf5NjR2FbivROHmhV1/pj2egv/fMGIOWTIWrV3Av8N9imV9IWml36H6cUjqEWNv9aNc+veb2sH46PRaHSuMBxvtW+twxctq0z+QsHhux8Q7rCY4Ct8lqsx7c6Sy0dl5T89rIeEuZKoVctIk1hNpfavER6yyH1Vvm3MbsUHy4ab4hWr/OZPcsRBphnaV65/ZcdYPNNwsjN/djlf9NqCw9U5ExCPcdhKxUgLSmfROpLp4WSUr8ojdwbncbvCf+a/YzRaEc6QOvXcGO256TXc5Lab9POvB+AWY7PigWYjzhifbovuunzRawsO24ZqQQAqguBtmpmPB7ysXJfyDDaV/aPGillgz1MdQg4u5MYaEtBNNHFjkRlSpd65lp4hd2AVPTfbV7FGpyIOfmNc/XVsPfg7vzaS/3nkvLL593ANLvMuRMGpQIhiF7kUEW9QDpAUbTWYBcbp4WpacHHY1aacqQyjGZS9HI3yCBT9kUZJhVOD+zUDvEH9ddR11fzPcTDQ5TlgB0KwqdXSavk9BC0pKp0WmcuowSw07VXmXC5guzSa4p0UvRw2lbDiYUx0ExJJRzWzi6Gm8cnEkfXXsdcG/M/jAJa0+bmCgdmQ9CYlNlSYZOKixmRsgiFxkrmW4l3KdFKv1DM8tk6WxPYJZhUUzcd8Kdtgrw/gkfXXDT7+avmfVak32qhtkg6NVdUS5wgkru1YzIkSduTW1FDwVWV3JQVJVuieTc0y4iDpFwc7/BvSalvKdQM8sv662cevz/+8sQVnjVAT0W2wLllw1JiMhJRxgDjCjLQsOzSFSgZqx7lAW1JW0e03yAD3asC+GD3NbQhbe+mN5GXH1F83KDOM4n/e5JIuH4NpdQARrFPBVptUNcjj4cVMcFSRTE2NpR1LEYbYMmfWpXgP9KejaPsLUhuvLCsVXznAG9dfx9SR1ud/3hZdCLHb1GMdPqRJgqDmm76mHbvOXDtiO2QPUcKo/TWkQ0i2JFXpBoo7vij1i1Lp3ADAo+qvG3V0rM//vFnnTE4hxd5Ka/Cor5YEdsLVJyKtDgVoHgtW11pWSjolPNMnrlrVj9Fv2Qn60twMwKPqr+N/wvr8z5tZcDsDrv06tkqyzESM85Ycv6XBWA2birlNCXrI6VbD2lx2L0vQO0QVTVVLH4SE67fgsfVXv8n7sz7/85Z7cMtbE6f088wSaR4kCkCm10s6pKbJhfqiUNGLq+0gLWC6eUAZFPnLjwqtKd8EwGvWX59t7iPW4X/eAN1svgRVSY990YZg06BD1ohLMtyFTI4pKTJsS9xREq9EOaPWiO2gpms7397x6nQJkbh+Fz2q/rqRROX6/M8bJrqlVW4l6JEptKeUFuMYUbtCQ7CIttpGc6MY93x1r1vgAnRXvY5cvwWPqb9uWQm+lP95QxdNMeWhOq1x0Db55C7GcUv2ZUuN6n8iKzsvOxibC//Yfs9Na8r2Rlz02vXXDT57FP/zJi66/EJSmsJKa8QxnoqW3VLQ+jZVUtJwJ8PNX1NQCwfNgdhhHD9on7PdRdrdGPF28rJr1F+3LBdeyv+8yYfLoMYet1vX4upNAjVvwOUWnlNXJXlkzk5Il6kqeoiL0C07qno+/CYBXq/+utlnsz7/Mzvy0tmI4zm4ag23PRN3t/CWryoUVJGm+5+K8RJ0V8Hc88/XHUX/HfiAq7t+BH+x6v8t438enWmdJwFA6ZINriLGKv/95f8lT9/FnyA1NMVEvQyaXuu+gz36f/DD73E4pwqpLcvm/o0Vle78n//+L/NPvoefp1pTJye6e4A/D082FERa5/opeH9zpvh13cNm19/4v/LDe5xMWTi8I0Ta0qKlK27AS/v3/r+/x/2GO9K2c7kVMonDpq7//jc5PKCxeNPpFVzaRr01wF8C4Pu76hXuX18H4LduTr79guuFD3n5BHfI+ZRFhY8w29TYhbbLi/bvBdqKE4fUgg1pBKnV3FEaCWOWyA+m3WpORZr/j+9TKJtW8yBTF2/ZEODI9/QavHkVdGFp/Pjn4Q+u5hXapsP5sOH+OXXA1LiKuqJxiMNbhTkbdJTCy4llEt6NnqRT4dhg1V3nbdrm6dYMecA1yTOL4PWTE9L5VzPFlLBCvlG58AhehnN4uHsAYinyJ+AZ/NkVvELbfOBUuOO5syBIEtiqHU1k9XeISX5bsimrkUUhnGDxourN8SgUsCZVtKyGbyGzHXdjOhsAvOAswSRyIBddRdEZWP6GZhNK/yjwew9ehBo+3jEADu7Ay2n8mDc+TS7awUHg0OMzR0LABhqLD4hJEh/BEGyBdGlSJoXYXtr+3HS4ijzVpgi0paWXtdruGTknXBz+11qT1Q2inxaTzQCO46P3lfLpyS4fou2PH/PupwZgCxNhGlj4IvUuWEsTkqMWm6i4xCSMc9N1RDQoCVcuGItJ/MRWefais+3synowi/dESgJjkilnWnBTGvRWmaw8oR15257t7CHmCf8HOn7cwI8+NQBXMBEmAa8PMRemrNCEhLGEhDQKcGZWS319BX9PFBEwGTbRBhLbDcaV3drFcDqk5kCTd2JF1Wp0HraqBx8U0wwBTnbpCadwBA/gTH/CDrcCs93LV8E0YlmmcyQRQnjBa8JESmGUfIjK/7fkaDJpmD2QptFNVJU1bbtIAjjWQizepOKptRjbzR9Kag6xZmMLLjHOtcLT3Tx9o/0EcTT1XN3E45u24AiwEypDJXihKjQxjLprEwcmRKclaDNZCVqr/V8mYWyFADbusiY5hvgFoU2vio49RgJLn5OsReRFN6tabeetiiy0V7KFHT3HyZLx491u95sn4K1QQSPKM9hNT0wMVvAWbzDSVdrKw4zRjZMyJIHkfq1VAVCDl/bUhNKlGq0zGr05+YAceXVPCttVk0oqjVwMPt+BBefx4yPtGVkUsqY3CHDPiCM5ngupUwCdbkpd8kbPrCWHhkmtIKLEetF2499eS1jZlIPGYnlcPXeM2KD9vLS0bW3ktYNqUllpKLn5ZrsxlIzxvDu5eHxzGLctkZLEY4PgSOg2IUVVcUONzUDBEpRaMoXNmUc0tFZrTZquiLyKxrSm3DvIW9Fil+AkhXu5PhEPx9mUNwqypDvZWdKlhIJQY7vn2OsnmBeOWnYZ0m1iwbbw1U60by5om47iHRV6fOgzjMf/DAZrlP40Z7syxpLK0lJ0gqaAK1c2KQKu7tabTXkLFz0sCftuwX++MyNeNn68k5Buq23YQhUh0SNTJa1ioQ0p4nUG2y0XilF1JqODqdImloPS4Bp111DEWT0jJjVv95uX9BBV7eB3bUWcu0acSVM23YZdd8R8UbQUxJ9wdu3oMuhdt929ME+mh6JXJ8di2RxbTi6TbrDquqV4aUKR2iwT6aZbyOwEXN3DUsWr8Hn4EhwNyHuXHh7/pdaUjtR7vnDh/d8c9xD/s5f501eQ1+CuDiCvGhk1AN/4Tf74RfxPwD3toLarR0zNtsnPzmS64KIRk861dMWCU8ArasG9T9H0ZBpsDGnjtAOM2+/LuIb2iIUGXNgl5ZmKD/Tw8TlaAuihaFP5yrw18v4x1898zIdP+DDAX1bM3GAMvPgRP/cJn3zCW013nrhHkrITyvYuwOUkcHuKlRSW5C6rzIdY4ppnF7J8aAJbQepgbJYBjCY9usGXDKQxq7RZfh9eg5d1UHMVATRaD/4BHK93/1iAgYZ/+jqPn8Dn4UExmWrpa3+ZOK6MvM3bjwfzxNWA2dhs8+51XHSPJiaAhGSpWevEs5xHLXcEGFXYiCONySH3fPWq93JIsBiSWvWyc3CAN+EcXoT7rCSANloPPoa31rt/5PUA/gp8Q/jDD3hyrjzlR8VkanfOvB1XPubt17vzxAfdSVbD1pzAnfgyF3ycadOTOTXhpEUoLC1HZyNGW3dtmjeXgr2r56JNmRwdNNWaQVBddd6rh4MhviEB9EFRD/7RGvePvCbwAL4Mx/D6M541hHO4D3e7g6PafdcZVw689z7NGTwo5om7A8sPhccT6qKcl9NJl9aM/9kX+e59Hh1yPqGuCCZxuITcsmNaJ5F7d0q6J3H48TO1/+M57085q2icdu2U+W36Ldllz9Agiv4YGljoEN908EzvDOrBF98/vtJwCC/BF2AG75xxEmjmMIcjxbjoaxqOK3/4hPOZzhMPBpYPG44CM0dTVm1LjLtUWWVz1Bcf8tEx0zs8O2A2YVHRxKYOiy/aOVoAaMu0i7ubu43njjmd4ibMHU1sIDHaQNKrZND/FZYdk54oCXetjq7E7IVl9eAL7t+oHnwXXtLx44czzoRFHBztYVwtH1d+NOMkupZ5MTM+gUmq90X+Bh9zjRlmaQ+m7YMqUL/veemcecAtOJ0yq1JnVlN27di2E0+Klp1tAJ4KRw1eMI7aJjsO3R8kPSI3fUFXnIOfdQe86sIIVtWDL7h//Ok6vj8vwDk08NEcI8zz7OhBy+WwalzZeZ4+0XniRfst9pAJqQHDGLzVQ2pheZnnv1OWhwO43/AgcvAEXEVVpa4db9sGvNK8wjaENHkfFQ4Ci5i7dqnQlPoLQrHXZDvO3BIXZbJOBrOaEbML6sFL798I4FhKihjHMsPjBUZYCMFr6nvaArxqXPn4lCa+cHfSa2cP27g3Z3ziYTRrcbQNGLQmGF3F3cBdzzzX7AILx0IB9rbwn9kx2G1FW3Inic+ZLIsVvKR8Zwfj0l1fkqo8LWY1M3IX14OX3r9RKTIO+d9XzAI8qRPGPn/4NC2n6o4rN8XJ82TOIvuVA8zLKUHRFgBCetlDZlqR1gLKjS39xoE7Bt8UvA6BxuEDjU3tFsEijgA+615tmZkXKqiEENrh41iLDDZNq4pKTWR3LZfnos81LOuNa15cD956vLMsJd1rqYp51gDUQqMYm2XsxnUhD2jg1DM7SeuJxxgrmpfISSXVIJIS5qJJSvJPEQ49DQTVIbYWJ9QWa/E2+c/oPK1drmC7WSfJRNKBO5Yjvcp7Gc3dmmI/Xh1kDTEuiSnWqQf37h+fTMhGnDf6dsS8SQfQWlqqwXXGlc/PEZ/SC5mtzIV0nAshlQdM/LvUtYutrEZ/Y+EAFtq1k28zQhOwLr1AIeANzhF8t9qzTdZf2qRKO6MWE9ohBYwibbOmrFtNmg3mcS+tB28xv2uKd/agYCvOP+GkSc+0lr7RXzyufL7QbkUpjLjEWFLqOIkAGu2B0tNlO9Eau2W1qcOUvVRgKzypKIQZ5KI3q0MLzqTNRYqiZOqmtqloIRlmkBHVpHmRYV6/HixbO6UC47KOFJnoMrVyr7wYz+SlW6GUaghYbY1I6kkxA2W1fSJokUdSh2LQ1GAimRGm0MT+uu57H5l7QgOWxERpO9moLRPgTtquWCfFlGlIjQaRly9odmzMOWY+IBO5tB4sW/0+VWGUh32qYk79EidWKrjWuiLpiVNGFWFRJVktyeXWmbgBBzVl8anPuXyNJlBJOlKLTgAbi/EYHVHxWiDaVR06GnHQNpJcWcK2jJtiCfG2sEHLzuI66sGrMK47nPIInPnu799935aOK2cvmvubrE38ZzZjrELCmXM2hM7UcpXD2oC3+ECVp7xtIuxptJ0jUr3sBmBS47TVxlvJ1Sqb/E0uLdvLj0lLr29ypdd/eMX3f6lrxGlKwKQxEGvw0qHbkbwrF3uHKwVENbIV2wZ13kNEF6zD+x24aLNMfDTCbDPnEikZFyTNttxWBXDaBuM8KtI2rmaMdUY7cXcUPstqTGvBGSrFWIpNMfbdea990bvAOC1YX0qbc6smDS1mPxSJoW4fwEXvjMmhlijDRq6qale6aJEuFGoppYDoBELQzLBuh/mZNx7jkinv0EtnUp50lO9hbNK57lZaMAWuWR5Yo9/kYwcYI0t4gWM47Umnl3YmpeBPqSyNp3K7s2DSAS/39KRuEN2bS4xvowV3dFRMx/VFcp2Yp8w2nTO9hCXtHG1kF1L4KlrJr2wKfyq77R7MKpFKzWlY9UkhYxyHWW6nBWPaudvEAl3CGcNpSXPZ6R9BbBtIl6cHL3gIBi+42CYXqCx1gfGWe7Ap0h3luyXdt1MKy4YUT9xSF01G16YEdWsouW9mgDHd3veyA97H+Ya47ZmEbqMY72oPztCGvK0onL44AvgC49saZKkWRz4veWljE1FHjbRJaWv6ZKKtl875h4CziFCZhG5rx7tefsl0aRT1bMHZjm8dwL/6u7wCRysaQblQoG5yAQN5zpatMNY/+yf8z+GLcH/Qn0iX2W2oEfXP4GvwQHuIL9AYGnaO3zqAX6946nkgqZNnUhx43DIdQtMFeOPrgy/y3Yd85HlJWwjLFkU3kFwq28xPnuPhMWeS+tDLV9Otllq7pQCf3uXJDN9wFDiUTgefHaiYbdfi3b3u8+iY6TnzhgehI1LTe8lcd7s1wJSzKbahCRxKKztTLXstGAiu3a6rPuQs5pk9TWAan5f0BZmGf7Ylxzzk/A7PAs4QPPPAHeFQ2hbFHszlgZuKZsJcUmbDC40sEU403cEjczstOEypa+YxevL4QBC8oRYqWdK6b7sK25tfE+oDZgtOQ2Jg8T41HGcBE6fTWHn4JtHcu9S7uYgU5KSCkl/mcnq+5/YBXOEr6lCUCwOTOM1taOI8mSxx1NsCXBEmLKbMAg5MkwbLmpBaFOPrNSlO2HnLiEqW3tHEwd8AeiQLmn+2gxjC3k6AxREqvKcJbTEzlpLiw4rNZK6oJdidbMMGX9FULKr0AkW+2qDEPBNNm5QAt2Ik2nftNWHetubosHLo2nG4vQA7GkcVCgVCgaDixHqo9UUn1A6OshapaNR/LPRYFV8siT1cCtJE0k/3WtaNSuUZYKPnsVIW0xXWnMUxq5+En4Kvw/MqQmVXnAXj9Z+9zM98zM/Agy7F/qqj2Nh67b8HjFnPP3iBn/tkpdzwEJX/whIcQUXOaikeliCRGUk7tiwF0rItwMEhjkZ309hikFoRAmLTpEXWuHS6y+am/KB/fM50aLEhGnSMwkpxzOov4H0AvgovwJ1iGzDLtJn/9BU+fAINfwUe6FHSLhu83viV/+/HrOePX+STT2B9uWGbrMHHLldRBlhS/CJQmcRxJFqZica01XixAZsYiH1uolZxLrR/SgxVIJjkpQP4PE9sE59LKLr7kltSBogS5tyszzH8Fvw8/AS8rNOg0xUS9fIaHwb+6et8Q/gyvKRjf5OusOzGx8evA/BP4IP11uN/grca5O0lcsPLJ5YjwI4QkJBOHa0WdMZYGxPbh2W2nR9v3WxEWqgp/G3+6VZbRLSAAZ3BhdhAaUL33VUSw9yjEsvbaQ9u4A/gGXwZXoEHOuU1GSj2chf+Mo+f8IcfcAxfIKVmyunRbYQVnoevwgfw3TXXcw++xNuP4fhyueEUNttEduRVaDttddoP0eSxLe2LENk6itYxlrxBNBYrNNKSQmeaLcm9c8UsaB5WyO6675yyQIAWSDpBVoA/gxmcwEvwoDv0m58UE7gHn+fJOa8/Ywan8EKRfjsopF83eCglX/Sfr7OeaRoQfvt1CGvIDccH5BCvw1sWIzRGC/66t0VTcLZQZtm6PlAasbOJ9iwWtUo7biktTSIPxnR24jxP1ZKaqq+2RcXM9OrBAm/AAs7hDJ5bNmGb+KIfwCs8a3jnjBrOFeMjHSCdbKr+2uOLfnOd9eiA8Hvvwwq54VbP2OqwkB48Ytc4YEOiH2vTXqodabfWEOzso4qxdbqD5L6tbtNPECqbhnA708DZH4QOJUXqScmUlks7Ot6FBuZw3n2mEbaUX7kDzxHOOQk8nKWMzAzu6ZZ8sOFw4RK+6PcuXo9tB4SbMz58ApfKDXf3szjNIIbGpD5TKTRxGkEMLjLl+K3wlWXBsCUxIDU+jbOiysESqAy1MGUJpXgwbTWzNOVEziIXZrJ+VIztl1PUBxTSo0dwn2bOmfDRPD3TRTGlfbCJvO9KvuhL1hMHhB9wPuPRLGHcdOWG2xc0U+5bQtAJT0nRTewXL1pgk2+rZAdeWmz3jxAqfNQQdzTlbF8uJ5ecEIWvTkevAHpwz7w78QujlD/Lr491bD8/1vhM2yrUQRrWXNQY4fGilfctMWYjL72UL/qS9eiA8EmN88nbNdour+PBbbAjOjIa4iBhfFg6rxeKdEGcL6p3EWR1Qq2Qkhs2DrnkRnmN9tG2EAqmgPw6hoL7Oza7B+3SCrR9tRftko+Lsf2F/mkTndN2LmzuMcKTuj/mX2+4Va3ki16+nnJY+S7MefpkidxwnV+4wkXH8TKnX0tsYzYp29DOOoSW1nf7nTh2akYiWmcJOuTidSaqESrTYpwjJJNVGQr+rLI7WsqerHW6Kp/oM2pKuV7T1QY9gjqlZp41/WfKpl56FV/0kvXQFRyeQ83xaTu5E8p5dNP3dUF34ihyI3GSpeCsywSh22ZJdWto9winhqifb7VRvgktxp13vyjrS0EjvrRfZ62uyqddSWaWYlwTPAtJZ2oZ3j/Sgi/mi+6vpzesfAcWNA0n8xVyw90GVFGuZjTXEQy+6GfLGLMLL523f5E0OmxVjDoOuRiH91RKU+vtoCtH7TgmvBLvtFXWLW15H9GTdVw8ow4IlRLeHECN9ym1e9K0I+Cbnhgv4Yu+aD2HaQJ80XDqOzSGAV4+4yCqBxrsJAX6ZTIoX36QnvzhhzzMfFW2dZVLOJfo0zbce5OvwXMFaZ81mOnlTVXpDZsQNuoYWveketKb5+6JOOsgX+NTm7H49fUTlx+WLuWL7qxnOFh4BxpmJx0p2gDzA/BUARuS6phR+pUsY7MMboAHx5xNsSVfVZcYSwqCKrqon7zM+8ecCkeS4nm3rINuaWvVNnMRI1IRpxTqx8PZUZ0Br/UEduo3B3hNvmgZfs9gQPj8vIOxd2kndir3awvJ6BLvoUuOfFWNYB0LR1OQJoUySKb9IlOBx74q1+ADC2G6rOdmFdJcD8BkfualA+BdjOOzP9uUhGUEX/TwhZsUduwRr8wNuXKurCixLBgpQI0mDbJr9dIqUuV+92ngkJZ7xduCk2yZKbfWrH1VBiTg9VdzsgRjW3CVXCvAwDd+c1z9dWw9+B+8MJL/eY15ZQ/HqvTwVdsZn5WQsgRRnMaWaecu3jFvMBEmgg+FJFZsnSl0zjB9OqPYaBD7qmoVyImFvzi41usesV0julaAR9dfR15Xzv9sEruRDyk1nb+QaLU67T885GTls6YgcY+UiMa25M/pwGrbCfzkvR3e0jjtuaFtnwuagHTSb5y7boBH119HXhvwP487jJLsLJ4XnUkHX5sLbS61dpiAXRoZSCrFJ+EjpeU3puVfitngYNo6PJrAigKktmwjyQdZpfq30mmtulaAx9Zfx15Xzv+cyeuiBFUs9zq8Kq+XB9a4PVvph3GV4E3y8HENJrN55H1X2p8VyqSKwVusJDKzXOZzplWdzBUFK9e+B4+uv468xvI/b5xtSAkBHQaPvtqWzllVvEOxPbuiE6+j2pvjcKsbvI7txnRErgfH7LdXqjq0IokKzga14GzQ23SSbCQvO6r+Or7SMIr/efOkkqSdMnj9mBx2DRsiY29Uj6+qK9ZrssCKaptR6HKURdwUYeUWA2kPzVKQO8ku2nU3Anhs/XWkBx3F/7wJtCTTTIKftthue1ty9xvNYLY/zo5KSbIuKbXpbEdSyeRyYdAIwKY2neyoc3+k1XUaufYga3T9daMUx/r8z1s10ITknIO0kuoMt+TB8jK0lpayqqjsJ2qtXAYwBU932zinimgmd6mTRDnQfr88q36NAI+tv24E8Pr8zxtasBqx0+xHH9HhlrwsxxNUfKOHQaZBITNf0uccj8GXiVmXAuPEAKSdN/4GLHhs/XWj92dN/uetNuBMnVR+XWDc25JLjo5Mg5IZIq226tmCsip2zZliL213YrTlL2hcFjpCduyim3M7/eB16q/blQsv5X/esDRbtJeabLIosWy3ycavwLhtxdWzbMmHiBTiVjJo6lCLjXZsi7p9PEPnsq6X6wd4bP11i0rD5fzPm/0A6brrIsllenZs0lCJlU4abakR59enZKrKe3BZihbTxlyZ2zl1+g0wvgmA166/bhwDrcn/7Ddz0eWZuJvfSESug6NzZsox3Z04FIxz0mUjMwVOOVTq1CQ0AhdbBGVdjG/CgsfUX7esJl3K/7ytWHRv683praW/8iDOCqWLLhpljDY1ZpzK75QiaZoOTpLKl60auHS/97oBXrv+umU9+FL+5+NtLFgjqVLCdbmj7pY5zPCPLOHNCwXGOcLquOhi8CmCWvbcuO73XmMUPab+ug3A6/A/78Bwe0bcS2+tgHn4J5pyS2WbOck0F51Vq3LcjhLvZ67p1ABbaL2H67bg78BfjKi/jr3+T/ABV3ilLmNXTI2SpvxWBtt6/Z//D0z/FXaGbSBgylzlsEGp+5//xrd4/ae4d8DUUjlslfIYS3t06HZpvfQtvv0N7AHWqtjP2pW08QD/FLy//da38vo8PNlKHf5y37Dxdfe/oj4kVIgFq3koLReSR76W/bx//n9k8jonZxzWTANVwEniDsg87sOSd/z7//PvMp3jQiptGVWFX2caezzAXwfgtzYUvbr0iozs32c3Uge7varH+CNE6cvEYmzbPZ9hMaYDdjK4V2iecf6EcEbdUDVUARda2KzO/JtCuDbNQB/iTeL0EG1JSO1jbXS+nLxtPMDPw1fh5+EPrgSEKE/8Gry5A73ui87AmxwdatyMEBCPNOCSKUeRZ2P6Myb5MRvgCHmA9ywsMifU+AYXcB6Xa5GibUC5TSyerxyh0j6QgLVpdyhfArRTTLqQjwe4HOD9s92D4Ap54odXAPBWLAwB02igG5Kkc+piN4lvODIFGAZgT+EO4Si1s7fjSR7vcQETUkRm9O+MXyo9OYhfe4xt9STQ2pcZRLayCV90b4D3jR0DYAfyxJ+eywg2IL7NTMXna7S/RpQ63JhWEM8U41ZyQGjwsVS0QBrEKLu8xwZsbi4wLcCT+OGidPIOCe1PiSc9Qt+go+vYqB7cG+B9d8cAD+WJPz0Am2gxXgU9IneOqDpAAXOsOltVuMzpdakJXrdPCzXiNVUpCeOos5cxnpQT39G+XVLhs1osQVvJKPZyNq8HDwd4d7pNDuWJPxVX7MSzqUDU6gfadKiNlUFTzLeFHHDlzO4kpa7aiKhBPGKwOqxsBAmYkOIpipyXcQSPlRTf+Tii0U3EJGaZsDER2qoB3h2hu0qe+NNwUooYU8y5mILbJe6OuX+2FTKy7bieTDAemaQyQ0CPthljSWO+xmFDIYiESjM5xKd6Ik5lvLq5GrQ3aCMLvmCA9wowLuWJb9xF59hVVP6O0CrBi3ZjZSNOvRy+I6klNVRJYRBaEzdN+imiUXQ8iVF8fsp+W4JXw7WISW7fDh7lptWkCwZ4d7QTXyBPfJMYK7SijjFppGnlIVJBJBYj7eUwtiP1IBXGI1XCsjNpbjENVpSAJ2hq2LTywEly3hUYazt31J8w2+aiLx3g3fohXixPfOMYm6zCGs9LVo9MoW3MCJE7R5u/WsOIjrqBoHUO0bJE9vxBpbhsd3+Nb4/vtPCZ4oZYCitNeYuC/8UDvDvy0qvkiW/cgqNqRyzqSZa/s0mqNGjtKOoTm14zZpUauiQgVfqtQiZjq7Q27JNaSK5ExRcrGCXO1FJYh6jR6CFqK7bZdQZ4t8g0rSlPfP1RdBtqaa9diqtzJkQ9duSryi2brQXbxDwbRUpFMBHjRj8+Nt7GDKgvph9okW7LX47gu0SpGnnFQ1S1lYldOsC7hYteR574ZuKs7Ei1lBsfdz7IZoxzzCVmmVqaSySzQbBVAWDek+N4jh9E/4VqZrJjPwiv9BC1XcvOWgO8275CVyBPvAtTVlDJfZkaZGU7NpqBogAj/xEHkeAuJihWYCxGN6e8+9JtSegFXF1TrhhLGP1fak3pebgPz192/8gB4d/6WT7+GdYnpH7hH/DJzzFiYPn/vjW0SgNpTNuPIZoAEZv8tlGw4+RLxy+ZjnKa5NdFoC7UaW0aduoYse6+bXg1DLg6UfRYwmhGEjqPvF75U558SANrElK/+MdpXvmqBpaXOa/MTZaa1DOcSiLaw9j0NNNst3c+63c7EKTpkvKHzu6bPbP0RkuHAVcbRY8ijP46MIbQeeT1mhA+5PV/inyDdQipf8LTvMXbwvoDy7IruDNVZKTfV4CTSRUYdybUCnGU7KUTDxLgCknqUm5aAW6/1p6eMsOYsphLzsHrE0Y/P5bQedx1F/4yPHnMB3/IOoTU9+BL8PhtjuFKBpZXnYNJxTuv+2XqolKR2UQgHhS5novuxVySJhBNRF3SoKK1XZbbXjVwWNyOjlqWJjrWJIy+P5bQedyldNScP+HZ61xKSK3jyrz+NiHG1hcOLL/+P+PDF2gOkekKGiNWKgJ+8Z/x8Iv4DdQHzcpZyF4v19I27w9/yPGDFQvmEpKtqv/TLiWMfn4sofMm9eAH8Ao0zzh7h4sJqYtxZd5/D7hkYPneDzl5idlzNHcIB0jVlQ+8ULzw/nc5/ojzl2juE0apD7LRnJxe04dMz2iOCFNtGFpTuXA5AhcTRo8mdN4kz30nVjEC4YTZQy4gpC7GlTlrePKhGsKKgeXpCYeO0MAd/GH7yKQUlXPLOasOH3FnSphjHuDvEu4gB8g66oNbtr6eMbFIA4fIBJkgayoXriw2XEDQPJrQeROAlY6aeYOcMf+IVYTU3XFlZufMHinGywaW3YLpObVBAsbjF4QJMsVUSayjk4voPsHJOQfPWDhCgDnmDl6XIRerD24HsGtw86RMHOLvVSHrKBdeVE26gKB5NKHzaIwLOmrqBWJYZDLhASG16c0Tn+CdRhWDgWXnqRZUTnPIHuMJTfLVpkoYy5CzylHVTGZMTwkGAo2HBlkQplrJX6U+uF1wZz2uwS1SQ12IqWaPuO4baZaEFBdukksJmkcTOm+YJSvoqPFzxFA/YUhIvWxcmSdPWTWwbAKVp6rxTtPFUZfKIwpzm4IoMfaYQLWgmlG5FME2gdBgm+J7J+rtS/XBbaVLsR7bpPQnpMFlo2doWaVceHk9+MkyguZNCJ1He+kuHTWyQAzNM5YSUg/GlTk9ZunAsg1qELVOhUSAK0LABIJHLKbqaEbHZLL1VA3VgqoiOKXYiS+HRyaEKgsfIqX64HYWbLRXy/qWoylIV9gudL1OWBNgBgTNmxA6b4txDT4gi3Ri7xFSLxtXpmmYnzAcWDZgY8d503LFogz5sbonDgkKcxGsWsE1OI+rcQtlgBBCSOKD1mtqYpIU8cTvBmAT0yZe+zUzeY92fYjTtGipXLhuR0ePoHk0ofNWBX+lo8Z7pAZDk8mEw5L7dVyZZoE/pTewbI6SNbiAL5xeygW4xPRuLCGbhcO4RIeTMFYHEJkYyEO9HmJfXMDEj/LaH781wHHZEtqSQ/69UnGpzH7LKIAZEDSPJnTesJTUa+rwTepI9dLJEawYV+ZkRn9g+QirD8vF8Mq0jFQ29js6kCS3E1+jZIhgPNanHdHFqFvPJLHqFwQqbIA4jhDxcNsOCCQLDomaL/dr5lyJaJU6FxPFjO3JOh3kVMcROo8u+C+jo05GjMF3P3/FuDLn5x2M04xXULPwaS6hBYki+MrMdZJSgPHlcB7nCR5bJ9Kr5ACUn9jk5kivdd8tk95SOGrtqu9lr2IhK65ZtEl7ZKrp7DrqwZfRUSN1el7+7NJxZbywOC8neNKTch5vsTEMNsoCCqHBCqIPRjIPkm0BjvFODGtto99rCl+d3wmHkW0FPdpZtC7MMcVtGFQjJLX5bdQ2+x9ypdc313uj8xlsrfuLgWXz1cRhZvJYX0iNVBRcVcmCXZs6aEf3RQF2WI/TcCbKmGU3IOoDJGDdDub0+hYckt6PlGu2BcxmhbTdj/klhccLGJMcqRjMJP1jW2ETqLSWJ/29MAoORluJ+6LPffBZbi5gqi5h6catQpmOT7/OFf5UorRpLzCqcMltBLhwd1are3kztrSzXO0LUbXRQcdLh/RdSZ+swRm819REDrtqzC4es6Gw4JCKlSnjYVpo0xeq33PrADbFLL3RuCmObVmPN+24kfa+AojDuM4umKe2QwCf6EN906HwjujaitDs5o0s1y+k3lgbT2W2i7FJdnwbLXhJUBq/9liTctSmFC/0OqUinb0QddTWamtjbHRFuWJJ6NpqZ8vO3fZJ37Db+2GkaPYLGHs7XTTdiFQJ68SkVJFVmY6McR5UycflNCsccHFaV9FNbR4NttLxw4pQ7wJd066Z0ohVbzihaxHVExd/ay04oxUKWt+AsdiQ9OUyZ2krzN19IZIwafSTFgIBnMV73ADj7V/K8u1MaY2sJp2HWm0f41tqwajEvdHWOJs510MaAqN4aoSiPCXtN2KSi46dUxHdaMquar82O1x5jqhDGvqmoE9LfxcY3zqA7/x3HA67r9ZG4O6Cuxu12/+TP+eLP+I+HErqDDCDVmBDO4larujNe7x8om2rMug0MX0rL1+IWwdwfR+p1TNTyNmVJ85ljWzbWuGv8/C7HD/izjkHNZNYlhZcUOKVzKFUxsxxN/kax+8zPWPSFKw80rJr9Tizyj3o1gEsdwgWGoxPezDdZ1TSENE1dLdNvuKL+I84nxKesZgxXVA1VA1OcL49dFlpFV5yJMhzyCmNQ+a4BqusPJ2bB+xo8V9u3x48VVIEPS/mc3DvAbXyoYr6VgDfh5do5hhHOCXMqBZUPhWYbWZECwVJljLgMUWOCB4MUuMaxGNUQDVI50TQ+S3kFgIcu2qKkNSHVoM0SHsgoZxP2d5HH8B9woOk4x5bPkKtAHucZsdykjxuIpbUrSILgrT8G7G5oCW+K0990o7E3T6AdW4TilH5kDjds+H64kS0mz24grtwlzDHBJqI8YJQExotPvoC4JBq0lEjjQkyBZ8oH2LnRsQ4Hu1QsgDTJbO8fQDnllitkxuVskoiKbRF9VwzMDvxHAdwB7mD9yCplhHFEyUWHx3WtwCbSMMTCUCcEmSGlg4gTXkHpZXWQ7kpznK3EmCHiXInqndkQjunG5kxTKEeGye7jWz9cyMR2mGiFQ15ENRBTbCp+Gh86vAyASdgmJq2MC6hoADQ3GosP0QHbnMHjyBQvQqfhy/BUbeHd5WY/G/9LK/8Ka8Jd7UFeNWEZvzPb458Dn8DGLOe3/wGL/4xP+HXlRt+M1PE2iLhR8t+lfgxsuh7AfO2AOf+owWhSZRYQbd622hbpKWKuU+XuvNzP0OseRDa+mObgDHJUSc/pKx31QdKffQ5OIJpt8GWjlgTwMc/w5MPCR/yl1XC2a2Yut54SvOtMev55Of45BOat9aWG27p2ZVORRvnEk1hqWMVUmqa7S2YtvlIpspuF1pt0syuZS2NV14mUidCSfzQzg+KqvIYCMljIx2YK2AO34fX4GWdu5xcIAb8MzTw+j/lyWM+Dw/gjs4GD6ehNgA48kX/AI7XXM/XAN4WHr+9ntywqoCakCqmKP0rmQrJJEErG2Upg1JObr01lKQy4jskWalKYfJ/EDLMpjNSHFEUAde2fltaDgmrNaWQ9+AAb8I5vKjz3L1n1LriB/BXkG/wwR9y/oRX4LlioHA4LzP2inzRx/DWmutRweFjeP3tNeSGlaE1Fde0OS11yOpmbIp2u/jF1n2RRZviJM0yBT3IZl2HWImKjQOxIyeU325b/qWyU9Moj1o07tS0G7qJDoGHg5m8yeCxMoEH8GU45tnrNM84D2l297DQ9t1YP7jki/7RmutRweEA77/HWXOh3HCxkRgldDQkAjNTMl2Iloc1qN5JfJeeTlyTRzxURTdn1Ixv2uKjs12AbdEWlBtmVdk2k7FFwj07PCZ9XAwW3dG+8xKzNFr4EnwBZpy9Qzhh3jDXebBpYcpuo4fQ44u+fD1dweEnHzI7v0xuuOALRUV8rXpFyfSTQYkhd7IHm07jpyhlkCmI0ALYqPTpUxXS+z4jgDj1Pflvmz5ecuItpIBxyTHpSTGWd9g1ApfD/bvwUhL4nT1EzqgX7cxfCcNmb3mPL/qi9SwTHJ49oj5ZLjccbTG3pRmlYi6JCG0mQrAt1+i2UXTZ2dv9IlQpN5naMYtviaXlTrFpoMsl3bOAFEa8sqPj2WCMrx3Yjx99qFwO59Aw/wgx+HlqNz8oZvA3exRDvuhL1jMQHPaOJ0+XyA3fp1OfM3qObEVdhxjvynxNMXQV4+GJyvOEFqeQBaIbbO7i63rpxCltdZShPFxkjM2FPVkn3TG+Rp9pO3l2RzFegGfxGDHIAh8SteR0C4HopXzRF61nheDw6TFN05Ebvq8M3VKKpGjjO6r7nhudTEGMtYM92HTDaR1FDMXJ1eThsbKfywyoWwrzRSXkc51flG3vIid62h29bIcFbTGhfV+faaB+ohj7dPN0C2e2lC96+XouFByen9AsunLDJZ9z7NExiUc0OuoYW6UZkIyx2YUR2z6/TiRjyKMx5GbbjLHvHuf7YmtKghf34LJfx63Yg8vrvN2zC7lY0x0tvKezo4HmGYDU+Gab6dFL+KI761lDcNifcjLrrr9LWZJctG1FfU1uwhoQE22ObjdfkSzY63CbU5hzs21WeTddH2BaL11Gi7lVdlxP1nkxqhnKhVY6knS3EPgVGg1JpN5cP/hivujOelhXcPj8HC/LyI6MkteVjlolBdMmF3a3DbsuAYhL44dxzthWSN065xxUd55Lmf0wRbOYOqH09/o9WbO2VtFdaMb4qBgtFJoT1SqoN8wPXMoXLb3p1PUEhxfnnLzGzBI0Ku7FxrKsNJj/8bn/H8fPIVOd3rfrklUB/DOeO+nkghgSPzrlPxluCMtOnDL4Yml6dK1r3vsgMxgtPOrMFUZbEUbTdIzii5beq72G4PD0DKnwjmBULUVFmy8t+k7fZ3pKc0Q4UC6jpVRqS9Umv8bxw35flZVOU1X7qkjnhZlsMbk24qQ6Hz7QcuL6sDC0iHHki96Uh2UdvmgZnjIvExy2TeJdMDZNSbdZyAHe/Yd1xsQhHiKzjh7GxQ4yqMPaywPkjMamvqrYpmO7Knad+ZQC5msCuAPWUoxrxVhrGv7a+KLXFhyONdTMrZ7ke23qiO40ZJUyzgYyX5XyL0mV7NiUzEs9mjtbMN0dERqwyAJpigad0B3/zRV7s4PIfXSu6YV/MK7+OrYe/JvfGMn/PHJe2fyUdtnFrKRNpXV0Y2559aWPt/G4BlvjTMtXlVIWCnNyA3YQBDmYIodFz41PvXPSa6rq9lWZawZ4dP115HXV/M/tnFkkrBOdzg6aP4pID+MZnTJ1SuuB6iZlyiox4HT2y3YBtkUKWooacBQUDTpjwaDt5poBHl1/HXltwP887lKKXxNUEyPqpGTyA699UqY/lt9yGdlUKra0fFWS+36iylVWrAyd7Uw0CZM0z7xKTOduznLIjG2Hx8cDPLb+OvK6Bv7n1DYci4CxUuRxrjBc0bb4vD3rN5Zz36ntLb83eVJIB8LiIzCmn6SMPjlX+yNlTjvIGjs+QzHPf60Aj62/jrzG8j9vYMFtm1VoRWCJdmw7z9N0t+c8cxZpPeK4aTRicS25QhrVtUp7U578chk4q04Wx4YoQSjFryUlpcQ1AbxZ/XVMknIU//OGl7Q6z9Zpxi0+3yFhSkjUDpnCIUhLWVX23KQ+L9vKvFKI0ZWFQgkDLvBoylrHNVmaw10zwCPrr5tlodfnf94EWnQ0lFRWy8pW9LbkLsyUVDc2NSTHGDtnD1uMtchjbCeb1mpxFP0YbcClhzdLu6lfO8Bj6q+bdT2sz/+8SZCV7VIxtt0DUn9L7r4cLYWDSXnseEpOGFuty0qbOVlS7NNzs5FOGJUqQpl2Q64/yBpZf90sxbE+//PGdZ02HSipCbmD6NItmQ4Lk5XUrGpDMkhbMm2ZVheNYV+VbUWTcv99+2NyX1VoafSuC+AN6q9bFIMv5X/eagNWXZxEa9JjlMwNWb00akGUkSoepp1/yRuuqHGbUn3UdBSTxBU6SEVklzWRUkPndVvw2PrrpjvxOvzPmwHc0hpmq82npi7GRro8dXp0KXnUQmhZbRL7NEVp1uuZmO45vuzKsHrktS3GLWXODVjw+vXXLYx4Hf7njRPd0i3aoAGX6W29GnaV5YdyDj9TFkakje7GHYzDoObfddHtOSpoi2SmzJHrB3hM/XUDDEbxP2/oosszcRlehWXUvzHv4TpBVktHqwenFo8uLVmy4DKLa5d3RtLrmrM3aMFr1183E4sewf+85VWeg1c5ag276NZrM9IJVNcmLEvDNaV62aq+14IAOGFsBt973Ra8Xv11YzXwNfmft7Jg2oS+XOyoC8/cwzi66Dhmgk38kUmP1CUiYWOX1bpD2zWXt2FCp7uq8703APAa9dfNdscR/M/bZLIyouVxqJfeWvG9Je+JVckHQ9+CI9NWxz+blX/KYYvO5n2tAP/vrlZ7+8/h9y+9qeB/Hnt967e5mevX10rALDWK//FaAT5MXdBXdP0C/BAes792c40H+AiAp1e1oH8HgH94g/Lttx1gp63op1eyoM/Bvw5/G/7xFbqJPcCXnmBiwDPb/YKO4FX4OjyCb289db2/Noqicw4i7N6TVtoz8tNwDH+8x/i6Ae7lmaQVENzJFb3Di/BFeAwz+Is9SjeQySpPqbLFlNmyz47z5a/AF+AYFvDmHqibSXTEzoT4Gc3OALaqAP4KPFUJ6n+1x+rGAM6Zd78bgJ0a8QN4GU614vxwD9e1Amy6CcskNrczLx1JIp6HE5UZD/DBHrFr2oNlgG4Odv226BodoryjGJ9q2T/AR3vQrsOCS0ctXZi3ruLlhpFDJYl4HmYtjQCP9rhdn4suySLKDt6wLcC52h8xPlcjju1fn+yhuw4LZsAGUuo2b4Fx2UwQu77uqRHXGtg92aN3tQCbFexc0uk93vhTXbct6y7MulLycoUljx8ngDMBg1tvJjAazpEmOtxlzclvj1vQf1Tx7QlPDpGpqgtdSKz/d9/hdy1vTfFHSmC9dGDZbLiezz7Ac801HirGZsWjydfZyPvHXL/Y8Mjzg8BxTZiuwKz4Eb8sBE9zznszmjvFwHKPIWUnwhqfVRcd4Ck0K6ate48m1oOfrX3/yOtvAsJ8zsPAM89sjnddmuLuDPjX9Bu/L7x7xpMzFk6nWtyQfPg278Gn4Aekz2ZgOmU9eJ37R14vwE/BL8G3aibCiWMWWDQ0ZtkPMnlcGeAu/Ag+8ZyecU5BPuy2ILD+sQqyZhAKmn7XZd+jIMTN9eBL7x95xVLSX4On8EcNlXDqmBlqS13jG4LpmGbkF/0CnOi3H8ETOIXzmnmtb0a16Tzxj1sUvQCBiXZGDtmB3KAefPH94xcUa/6vwRn80GOFyjEXFpba4A1e8KQfFF+259tx5XS4egYn8fQsLGrqGrHbztr+uByTahWuL1NUGbDpsnrwBfePPwHHIf9X4RnM4Z2ABWdxUBlqQ2PwhuDxoS0vvqB1JzS0P4h2nA/QgTrsJFn+Y3AOjs9JFC07CGWX1oNX3T/yHOzgDjwPn1PM3g9Jk9lZrMEpxnlPmBbjyo2+KFXRU52TJM/2ALcY57RUzjObbjqxVw++4P6RAOf58pcVsw9Daje3htriYrpDOonre3CudSe6bfkTEgHBHuDiyu5MCsc7BHhYDx7ePxLjqigXZsw+ijMHFhuwBmtoTPtOxOrTvYJDnC75dnUbhfwu/ZW9AgYd+peL68HD+0emKquiXHhWjJg/UrkJYzuiaL3E9aI/ytrCvAd4GcYZMCkSQxfUg3v3j8c4e90j5ZTPdvmJJGHnOCI2nHS8081X013pHuBlV1gB2MX1YNmWLHqqGN/TWmG0y6clJWthxNUl48q38Bi8vtMKyzzpFdSDhxZ5WBA5ZLt8Jv3895DduBlgbPYAj8C4B8hO68FDkoh5lydC4FiWvBOVqjYdqjiLv92t8yPDjrDaiHdUD15qkSURSGmXJwOMSxWAXYwr3zaAufJ66l+94vv3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/wHuD9tQd4f+0B3l97gPfXHuD9tQd4f+0B3l97gG8LwP8G/AL8O/A5OCq0Ys2KIdv/qOIXG/4mvFAMF16gZD+2Xvu/B8as5+8bfllWyg0zaNO5bfXj6vfhhwD86/Aq3NfRS9t9WPnhfnvCIw/CT8GLcFTMnpntdF/z9V+PWc/vWoIH+FL3Znv57PitcdGP4R/C34avw5fgRVUInCwbsn1yyA8C8zm/BH8NXoXnVE6wVPjdeCI38kX/3+Ct9dbz1pTmHFRu+Hm4O9Ch3clr99negxfwj+ER/DR8EV6B5+DuQOnTgUw5rnkY+FbNU3gNXh0o/JYTuWOvyBf9FvzX663HH/HejO8LwAl8Hl5YLTd8q7sqA3wbjuExfAFegQdwfyDoSkWY8swzEf6o4Qyewefg+cHNbqMQruSL/u/WWc+E5g7vnnEXgDmcDeSGb/F4cBcCgT+GGRzDU3hZYburAt9TEtHgbM6JoxJ+6NMzzTcf6c2bycv2+KK/f+l6LBzw5IwfqZJhA3M472pWT/ajKxnjv4AFnMEpnBTPND6s2J7qHbPAqcMK74T2mZ4VGB9uJA465It+/eL1WKhYOD7xHOkr1ajK7d0C4+ke4Hy9qXZwpgLr+Znm/uNFw8xQOSy8H9IzjUrd9+BIfenYaylf9FsXr8fBAadnPIEDna8IBcwlxnuA0/Wv6GAWPd7dDIKjMdSWueAsBj4M7TOd06qBbwDwKr7oleuxMOEcTuEZTHWvDYUO7aHqAe0Bbq+HEFRzOz7WVoTDQkVds7A4sIIxfCQdCefFRoIOF/NFL1mPab/nvOakSL/Q1aFtNpUb/nFOVX6gzyg/1nISyDfUhsokIzaBR9Kxm80s5mK+6P56il1jXic7nhQxsxSm3OwBHl4fFdLqi64nDQZvqE2at7cWAp/IVvrN6/BFL1mPhYrGMBfOi4PyjuSGf6wBBh7p/FZTghCNWGgMzlBbrNJoPJX2mW5mwZfyRffXo7OFi5pZcS4qZUrlViptrXtw+GQoyhDPS+ANjcGBNRiLCQDPZPMHuiZfdFpPSTcQwwKYdRNqpkjm7AFeeT0pJzALgo7g8YYGrMHS0iocy+YTm2vyRUvvpXCIpQ5pe666TJrcygnScUf/p0NDs/iAI/nqDHC8TmQT8x3NF91l76oDdQGwu61Z6E0ABv7uO1dbf/37Zlv+Zw/Pbh8f1s4Avur6657/+YYBvur6657/+YYBvur6657/+YYBvur6657/+aYBvuL6657/+VMA8FXWX/f8zzcN8BXXX/f8zzcNMFdbf93zP38KLPiK6697/uebtuArrr/u+Z9vGmCusP6653/+1FjwVdZf9/zPN7oHX339dc//fNMu+irrr3v+50+Bi+Zq6697/uebA/jz8Pudf9ht/fWv517J/XUzAP8C/BAeX9WCDrUpZ3/dEMBxgPcfbtTVvsYV5Yn32u03B3Ac4P3b8I+vxNBKeeL9dRMAlwO83959qGO78sT769oB7g3w/vGVYFzKE++v6wV4OMD7F7tckFkmT7y/rhHgpQO8b+4Y46XyxPvrugBeNcB7BRiX8sT767oAvmCA9woAHsoT76+rBJjLBnh3txOvkifeX1dswZcO8G6N7sXyxPvr6i340gHe3TnqVfLE++uKAb50gHcXLnrX8sR7gNdPRqwzwLu7Y/FO5Yn3AK9jXCMGeHdgxDuVJ75VAI8ljP7PAb3/RfjcZfePHBB+79dpfpH1CanN30d+mT1h9GqAxxJGM5LQeeQ1+Tb+EQJrElLb38VHQ94TRq900aMIo8cSOo+8Dp8QfsB8zpqE1NO3OI9Zrj1h9EV78PqE0WMJnUdeU6E+Jjyk/hbrEFIfeWbvId8H9oTRFwdZaxJGvziW0Hn0gqYB/wyZ0PwRlxJST+BOw9m77Amj14ii1yGM/txYQudN0qDzGe4EqfA/5GJCagsHcPaEPWH0esekSwmjRxM6b5JEcZ4ww50ilvAOFxBSx4yLW+A/YU8YvfY5+ALC6NGEzhtmyZoFZoarwBLeZxUhtY4rc3bKnjB6TKJjFUHzJoTOozF2YBpsjcyxDgzhQ1YRUse8+J4wenwmaylB82hC5w0zoRXUNXaRBmSMQUqiWSWkLsaVqc/ZE0aPTFUuJWgeTei8SfLZQeMxNaZSIzbII4aE1Nmr13P2hNHjc9E9guYNCZ032YlNwESMLcZiLQHkE4aE1BFg0yAR4z1h9AiAGRA0jyZ03tyIxWMajMPWBIsxYJCnlITU5ShiHYdZ94TR4wCmSxg9jtB5KyPGYzymAYexWEMwAPIsAdYdV6aObmNPGD0aYLoEzaMJnTc0Ygs+YDw0GAtqxBjkuP38bMRWCHn73xNGjz75P73WenCEJnhwyVe3AEe8TtKdJcYhBl97wuhNAObK66lvD/9J9NS75v17wuitAN5fe4D31x7g/bUHeH/tAd5fe4D3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/w/toDvAd4f/24ABzZ8o+KLsSLS+Pv/TqTb3P4hKlQrTGh+fbIBT0Axqznnb+L/V2mb3HkN5Mb/nEHeK7d4IcDld6lmDW/iH9E+AH1MdOw/Jlu2T1xNmY98sv4wHnD7D3uNHu54WUuOsBTbQuvBsPT/UfzNxGYzwkP8c+Yz3C+r/i6DcyRL/rZ+utRwWH5PmfvcvYEt9jLDS/bg0/B64DWKrQM8AL8FPwS9beQCe6EMKNZYJol37jBMy35otdaz0Bw2H/C2Smc7+WGB0HWDELBmOByA3r5QONo4V+DpzR/hFS4U8wMW1PXNB4TOqYz9urxRV++ntWCw/U59Ty9ebdWbrgfRS9AYKKN63ZokZVygr8GZ/gfIhZXIXPsAlNjPOLBby5c1eOLvmQ9lwkOy5x6QV1j5TYqpS05JtUgUHUp5toHGsVfn4NX4RnMCe+AxTpwmApTYxqMxwfCeJGjpXzRF61nbcHhUBPqWze9svwcHJ+S6NPscKrEjug78Dx8Lj3T8D4YxGIdxmJcwhi34fzZUr7olevZCw5vkOhoClq5zBPZAnygD/Tl9EzDh6kl3VhsHYcDEb+hCtJSvuiV69kLDm+WycrOTArHmB5/VYyP6jOVjwgGawk2zQOaTcc1L+aLXrKeveDwZqlKrw8U9Y1p66uK8dEzdYwBeUQAY7DbyYNezBfdWQ97weEtAKYQg2xJIkuveAT3dYeLGH+ShrWNwZgN0b2YL7qznr3g8JYAo5bQBziPjx7BPZ0d9RCQp4UZbnFdzBddor4XHN4KYMrB2qHFRIzzcLAHQZ5the5ovui94PCWAPefaYnxIdzRwdHCbuR4B+tbiy96Lzi8E4D7z7S0mEPd+eqO3cT53Z0Y8SV80XvB4Z0ADJi/f7X113f+7p7/+UYBvur6657/+YYBvur6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+VMA8FXWX/f8z58OgK+y/rrnf75RgLna+uue//lTA/CV1V/3/M837aKvvv6653++UQvmauuve/7nTwfAV1N/3fM/fzr24Cuuv+75nz8FFnxl9dc9//MOr/8/glixwRuUfM4AAAAASUVORK5CYII="}getSearchTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}dispose(){this.edgesRT.dispose(),this.weightsRT.dispose(),this.areaTexture.dispose(),this.searchTexture.dispose(),this.materialEdges.dispose(),this.materialWeights.dispose(),this.materialBlend.dispose(),this.fsQuad.dispose()}}const Oht={name:"GammaCorrectionShader",uniforms:{tDiffuse:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 tex = texture2D( tDiffuse, vUv );

			gl_FragColor = LinearTosRGB( tex );

		}`};function Lht(i){let e,t,n;function r(o){i[7](o)}let s={args:[i[16],i[3].domElement],"mouseButtons.left":Cf.ACTION.TRUCK,"mouseButtons.right":Cf.ACTION.NONE};return i[0]!==void 0&&(s.ref=i[0]),e=new Jp.CameraControls({props:s}),ja.push(()=>f2(e,"ref",r)),e.$on("update",zht),{c(){xt(e.$$.fragment)},l(o){wt(e.$$.fragment,o)},m(o,a){St(e,o,a),n=!0},p(o,a){const l={};a&65536&&(l.args=[o[16],o[3].domElement]),!t&&a&1&&(t=!0,l.ref=o[0],d2(()=>t=!1)),e.$set(l)},i(o){n||(Ue(e.$$.fragment,o),n=!0)},o(o){Ye(e.$$.fragment,o),n=!1},d(o){Mt(e,o)}}}function Dht(i){let e,t,n,r;return e=new Jp.PerspectiveCamera({props:{makeDefault:!0,position:i[5],near:.01,$$slots:{default:[Lht,({ref:s})=>({16:s}),({ref:s})=>s?65536:0]},$$scope:{ctx:i}}}),n=new Sht({props:{mathbox:i[4]}}),{c(){xt(e.$$.fragment),t=Nt(),xt(n.$$.fragment)},l(s){wt(e.$$.fragment,s),t=Ut(s),wt(n.$$.fragment,s)},m(s,o){St(e,s,o),Ze(s,t,o),St(n,s,o),r=!0},p(s,[o]){const a={};o&196609&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){r||(Ue(e.$$.fragment,s),Ue(n.$$.fragment,s),r=!0)},o(s){Ye(e.$$.fragment,s),Ye(n.$$.fragment,s),r=!1},d(s){s&&fe(t),Mt(e,s),Mt(n,s)}}}const zht=i=>{};function Iht(i,e,t){let n,r,s,o,a;Mn(i,UC,w=>t(10,n=w)),Mn(i,r1,w=>t(0,r=w)),Mn(i,Kx,w=>t(12,o=w)),Cf.install({THREE:bz}),Tne({CameraControls:Cf});const{size:l,scene:c,camera:u,renderer:h}=Pf();Mn(i,l,w=>t(11,s=w)),Mn(i,u,w=>t(6,a=w)),c.background=new qt("hsl(231, 15%, 4%)");const d=new _F(h,c,a).init(),f=d.api,g=[0,0,30];let v;const y=new kht;function _(w){v=new Tht(h),v.addPass(new Aht(c,w)),v.addPass(y);const C=new gH(Oht);v.addPass(C);const E=new Rht;v.addPass(E)}kne((w,C)=>{v.render(C)}),Cz(({},w)=>{o&&(Xs(r1,r.azimuthAngle+=10*w*h9.DEG2RAD,r),Xs(r1,r.azimuthAngle=r.azimuthAngle%(2*Math.PI),r)),r.update(w),d.frame()}),rd(()=>{d.resize({viewWidth:s.width,viewHeight:s.height}),Ei.timeline({scrollTrigger:{trigger:"#section-1",start:"top bottom",end:"+=500",scrub:1}}).to(r,{distance:15,onComplete(){r.saveState()}}).to("#article",{translateX:"-=65ch"},"<").to("#canvas-wrapper",{translateX:"-=32.5ch"},"<").to(y.uniforms.damp,{value:0,duration:.001}),Xs(UC,n=!0,n)});function S(w){r=w,r1.set(r)}return i.$$.update=()=>{i.$$.dirty&64&&_(a)},[r,l,u,h,f,g,a,S]}class Nht extends oi{constructor(e){super(),ai(this,e,Iht,Dht,Gn,{})}}function Uht(i){let e,t;return e=new Nht({}),{c(){xt(e.$$.fragment)},l(n){wt(e.$$.fragment,n)},m(n,r){St(e,n,r),t=!0},i(n){t||(Ue(e.$$.fragment,n),t=!0)},o(n){Ye(e.$$.fragment,n),t=!1},d(n){Mt(e,n)}}}function Fht(i){let e,t;return e=new Ene({props:{colorManagementEnabled:!0,rendererParameters:{webgl1:!0},$$slots:{default:[Uht]},$$scope:{ctx:i}}}),{c(){xt(e.$$.fragment)},l(n){wt(e.$$.fragment,n)},m(n,r){St(e,n,r),t=!0},p(n,[r]){const s={};r&1&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(Ue(e.$$.fragment,n),t=!0)},o(n){Ye(e.$$.fragment,n),t=!1},d(n){Mt(e,n)}}}function Bht(i){return Ni.DEFAULT_UP.set(0,0,1),[]}class Vht extends oi{constructor(e){super(),ai(this,e,Bht,Fht,Gn,{})}}function Hht(i){let e,t,n,r,s,o,a,l;return{c(){e=bt("input"),n=Nt(),r=bt("input"),this.h()},l(c){e=yt(c,"INPUT",{type:!0,style:!0,class:!0,contenteditable:!0,tabindex:!0}),n=Ut(c),r=yt(c,"INPUT",{style:!0,class:!0,type:!0,inputmode:!0}),this.h()},h(){$e(e,"type","text"),$e(e,"style",i[10]),$e(e,"class",t=py(i[24].class)+" svelte-6cnb9y"),e.readOnly=!0,$e(e,"contenteditable",!1),$e(e,"tabindex","0"),Hn(e,"default",!i[24].class),Hn(e,"drag",!0),Hn(e,"dragging",i[6]),Hn(e,"fast",i[7]>1?"fast":""),Hn(e,"slow",i[7]<1?"slow":""),Hn(e,"focus",i[4]),Hn(e,"inactive",i[8]),$e(r,"style",i[10]),$e(r,"class",s=py(i[24].class)+" svelte-6cnb9y"),$e(r,"type","text"),$e(r,"inputmode",o=jx(i[1])&&jx(i[0])&&i[0]>=0?"numeric":"text"),Hn(r,"default",!i[24].class),Hn(r,"edit",!0),Hn(r,"editing",i[8]),Hn(r,"focus",i[5]),Hn(r,"inactive",!i[8])},m(c,u){Ze(c,e,u),i[57](e),Em(e,i[9]),Ze(c,n,u),Ze(c,r,u),i[59](r),Em(r,i[9]),a||(l=[Ji(window,"mousemove",function(){my(i[6]?i[14]:"")&&(i[6]?i[14]:"").apply(this,arguments)}),Ji(window,"touchmove",function(){my(i[6]?i[13]:"")&&(i[6]?i[13]:"").apply(this,arguments)}),Ji(window,"mouseup",ip(function(){my(i[6]?i[16]:i[20])&&(i[6]?i[16]:i[20]).apply(this,arguments)})),Ji(window,"touchend",ip(function(){my(i[6]?i[15]:i[20])&&(i[6]?i[15]:i[20]).apply(this,arguments)})),Ji(window,"keydown",i[21]),Ji(window,"keyup",i[22]),Ji(e,"mousedown",ip(i[12])),Ji(e,"touchstart",ip(P$(i[11]))),Ji(e,"dblclick",ip(qht)),Ji(e,"focus",i[17]),Ji(e,"blur",i[18]),Ji(e,"keydown",i[54]),Ji(e,"keypress",i[55]),Ji(e,"keyup",i[56]),Ji(e,"input",i[58]),Ji(r,"mouseup",ip(Ght)),Ji(r,"touchend",ip(Wht)),Ji(r,"focus",i[19]),Ji(r,"blur",i[20]),Ji(r,"input",i[23]),Ji(r,"keydown",i[51]),Ji(r,"keypress",i[52]),Ji(r,"keyup",i[53]),Ji(r,"input",i[60])],a=!0)},p(c,u){i=c,u[0]&1024&&$e(e,"style",i[10]),u[0]&16777216&&t!==(t=py(i[24].class)+" svelte-6cnb9y")&&$e(e,"class",t),u[0]&512&&e.value!==i[9]&&Em(e,i[9]),u[0]&16777216&&Hn(e,"default",!i[24].class),u[0]&16777216&&Hn(e,"drag",!0),u[0]&16777280&&Hn(e,"dragging",i[6]),u[0]&16777344&&Hn(e,"fast",i[7]>1?"fast":""),u[0]&16777344&&Hn(e,"slow",i[7]<1?"slow":""),u[0]&16777232&&Hn(e,"focus",i[4]),u[0]&16777472&&Hn(e,"inactive",i[8]),u[0]&1024&&$e(r,"style",i[10]),u[0]&16777216&&s!==(s=py(i[24].class)+" svelte-6cnb9y")&&$e(r,"class",s),u[0]&3&&o!==(o=jx(i[1])&&jx(i[0])&&i[0]>=0?"numeric":"text")&&$e(r,"inputmode",o),u[0]&512&&r.value!==i[9]&&Em(r,i[9]),u[0]&16777216&&Hn(r,"default",!i[24].class),u[0]&16777216&&Hn(r,"edit",!0),u[0]&16777472&&Hn(r,"editing",i[8]),u[0]&16777248&&Hn(r,"focus",i[5]),u[0]&16777472&&Hn(r,"inactive",!i[8])},i:mr,o:mr,d(c){c&&(fe(e),fe(n),fe(r)),i[57](null),i[59](null),a=!1,p_(l)}}}function qht(i){}function jx(i){return i==Math.round(i)}const Ght=i=>{},Wht=i=>{};function jht(i,e,t){const n=k$();let{options:r={}}=e,{value:s=r.value??0}=e;s=parseFloat(s);let{min:o=r.min??-1e12}=e;o=parseFloat(o);let{max:a=r.max??1e12}=e;a=parseFloat(a);let{step:l=r.step??1}=e;l=parseFloat(l);let{precision:c=r.precision??l}=e;c=parseFloat(c);let{speed:u=r.speed??1}=e;u=parseFloat(u);let{keyStep:h=r.keyStep??l*10}=e;h=parseFloat(h);let{keyStepSlow:d=r.keyStepSlow??l}=e;d=parseFloat(d);let{keyStepFast:f=r.keyStepFast??l*100}=e;f=parseFloat(f);let{decimals:g=r.decimals??0}=e;g=parseFloat(g);let{format:v=r.format??void 0}=e,{parse:y=r.parse??void 0}=e,{horizontal:_=r.horizontal??!0}=e,{vertical:S=r.vertical??!1}=e,{circular:w=r.circular??!1}=e,{mainStyle:C=r.mainStyle??void 0}=e,{fastStyle:E=r.fastStyle??void 0}=e,{slowStyle:k=r.slowStyle??void 0}=e,{focusStyle:O=r.focusStyle??void 0}=e,{draggingStyle:R=r.draggingStyle??void 0}=e,{editingStyle:A=r.editingStyle??void 0}=e,{cursor:D=r.cursor??void 0}=e,I,q,j,Y=!1,F,re,ee=!1,J=!1,Ee=!1,le=!1,ie,be,Je,Xe,Be=1,vt=!1,at=!1,Le=!1,Ot,ft=null,rt=null,tt;rd(()=>(t(48,ft=document.querySelector("html")),t(49,rt=ft.style.cursor),()=>{t(48,ft.style.cursor=rt,ft)})),Se(s);function se(Te){n("consoleLog",Te.type),Y=!0,ke(Te)}function ke(Te){n("consoleLog",Te.type),ie=document.activeElement===F,t(6,le=!0),F.focus(),be=!1,Je=Y?Te.touches[0].clientX:Te.clientX,Xe=Y?Te.touches[0].clientY:Te.clientY,t(6,le=!0),Se(s)}function ae(Te){Y=!0,xe(Te)}function xe(Te){let pn=Y?Te.touches[0].clientX:Te.clientX,mi=Y?Te.touches[0].clientY:Te.clientY,as=_?pn-Je:0,Wn=S?-(mi-Xe):0,ls=Math.abs(as)>Math.abs(Wn)?as:Wn;ls!=0&&!be&&(be=!0,n("dragstart")),Zt(ls*Be),Je=pn,Xe=mi}function Ie(Te){n("consoleLog",Te.type),dt(Te)}function dt(Te){n("consoleLog",Te.type),le&&be&&n("dragend"),t(6,le=!1),ie&&!be&&ve()}function nt(Te){n("consoleLog",Te.type),t(4,ee=!0),st()}function me(Te){n("consoleLog",Te.type),t(4,ee=!1),st()}function ue(Te){n("consoleLog",Te.type),t(5,J=!0),st()}function Pe(Te){n("consoleLog",Te.type),t(5,J=!1),st(),ut()}function U(Te){Te.key=="Enter"&&(Te.target==F||Te.target==re)&&Te.preventDefault(),(Te.target==F||Te.target==re)&&(n("consoleLog",Te.type),Te.key.length==1&&(j=j?j+Te.key:Te.key)),Te.key=="Shift"&&t(47,at=!0),Te.key=="Alt"&&t(46,vt=!0)}function V(Te){if((Te.target==F||Te.target==re)&&n("consoleLog",Te.type),Te.key=="Shift"&&t(47,at=!1),Te.key=="Alt"&&t(46,vt=!1),ee&&!Le){let pn=h;Be<1&&(pn=d),Be>1&&(pn=f),(Te.key=="ArrowUp"||Te.key=="ArrowRight")&&we(pn),(Te.key=="ArrowDown"||Te.key=="ArrowLeft")&&we(-pn),Te.key=="Enter"&&ve(),Te.key.length==1&&ve()}else J&&Le&&(Te.key=="Enter"||Te.key=="Escape")&&ut()}function Ve(Te){let pn=parseFloat(re.value);isNaN(pn)||(I=pn,I=Tt(I),n("input",parseFloat(zt(I))))}async function st(){await IC(),document.activeElement==F||document.activeElement==re?Ee||(Ee=!0,n("focus")):Ee&&(Ee=!1,n("blur"))}async function ve(){t(8,Le=!0),await IC(),re.focus(),j?t(9,q=j):re.select(),n("editstart")}function ut(){if(Le){if(t(8,Le=!1),j=void 0,y)I=y(q),Se(I);else{let Te=parseFloat(re.value);isNaN(Te)||(I=parseFloat(q),Se(I))}document.activeElement===re&&setTimeout(()=>{F.focus()},0),n("editend")}}function Zt(Te){I=I??parseFloat(q),I+=Te*l*u,Se(I)}function we(Te){I=I??parseFloat(q),I+=Te,Se(I)}function Se(Te){I=parseFloat(Te),I=Tt(I),t(9,q=Math.round((I-o)/l)*l+o),v?t(9,q=v(q)):t(9,q=q.toFixed(g)),t(25,s=zt(I)),n("input",parseFloat(s)),n("change",parseFloat(s))}function Tt(Te){if(t(0,o=parseFloat(o)),t(26,a=parseFloat(a)),w){let pn=a-o;if(pn===0)return o;let mi=Te<o?Math.ceil((o-Te)/pn):0;Te=(Te-o+pn*mi)%pn+o}else Te=Math.min(Math.max(Te,o),a);return Te}function zt(Te){let pn;Te=Math.round((parseFloat(Te)-o)/c)*c+o;let mi=c<1?Math.ceil(-Math.log10(c)):0;return pn=l.toString().split(".")[1],pn&&(mi=Math.max(mi,pn.length)),pn=o.toString().split(".")[1],pn&&(mi=Math.max(mi,pn.length)),parseFloat(Te.toFixed(mi))}function Vt(Te){H0.call(this,i,Te)}function Gt(Te){H0.call(this,i,Te)}function Dt(Te){H0.call(this,i,Te)}function Yt(Te){H0.call(this,i,Te)}function Yn(Te){H0.call(this,i,Te)}function Me(Te){H0.call(this,i,Te)}function At(Te){ja[Te?"unshift":"push"](()=>{F=Te,t(2,F)})}function qe(){q=this.value,t(9,q)}function kt(Te){ja[Te?"unshift":"push"](()=>{re=Te,t(3,re)})}function Lt(){q=this.value,t(9,q)}return i.$$set=Te=>{t(24,e=Jn(Jn({},e),Oo(Te))),"options"in Te&&t(33,r=Te.options),"value"in Te&&t(25,s=Te.value),"min"in Te&&t(0,o=Te.min),"max"in Te&&t(26,a=Te.max),"step"in Te&&t(1,l=Te.step),"precision"in Te&&t(27,c=Te.precision),"speed"in Te&&t(28,u=Te.speed),"keyStep"in Te&&t(29,h=Te.keyStep),"keyStepSlow"in Te&&t(30,d=Te.keyStepSlow),"keyStepFast"in Te&&t(31,f=Te.keyStepFast),"decimals"in Te&&t(32,g=Te.decimals),"format"in Te&&t(34,v=Te.format),"parse"in Te&&t(35,y=Te.parse),"horizontal"in Te&&t(36,_=Te.horizontal),"vertical"in Te&&t(37,S=Te.vertical),"circular"in Te&&t(38,w=Te.circular),"mainStyle"in Te&&t(39,C=Te.mainStyle),"fastStyle"in Te&&t(40,E=Te.fastStyle),"slowStyle"in Te&&t(41,k=Te.slowStyle),"focusStyle"in Te&&t(42,O=Te.focusStyle),"draggingStyle"in Te&&t(43,R=Te.draggingStyle),"editingStyle"in Te&&t(44,A=Te.editingStyle),"cursor"in Te&&t(45,D=Te.cursor)},i.$$.update=()=>{i.$$.dirty[0]&12&&F&&re&&st(),i.$$.dirty[0]&33554752&&!Le&&!le&&Se(s),i.$$.dirty[0]&272|i.$$.dirty[1]&98304&&(t(7,Be=1),ee&&!Le&&(vt&&at?t(7,Be=10):vt&&t(7,Be=.1))),i.$$.dirty[0]&64|i.$$.dirty[1]&933984&&(t(50,tt=_?S?"move":"ew-resize":"ns-resize"),ft&&(le?t(48,ft.style.cursor=D??tt,ft):t(48,ft.style.cursor=rt,ft))),i.$$.dirty[0]&1520|i.$$.dirty[1]&556800&&(t(10,Ot=C??""),t(10,Ot+=(ee||J)&&O?";"+O:""),t(10,Ot+=!Le&&Be>1&&E?";"+E:""),t(10,Ot+=!Le&&Be<1&&k?";"+k:""),t(10,Ot+=le&&R?";"+R:""),t(10,Ot+=Le&&A?";"+A:""),t(10,Ot+=Le?"":";cursor:"+(D??tt)))},e=Oo(e),[o,l,F,re,ee,J,le,Be,Le,q,Ot,se,ke,ae,xe,Ie,dt,nt,me,ue,Pe,U,V,Ve,e,s,a,c,u,h,d,f,g,r,v,y,_,S,w,C,E,k,O,R,A,D,vt,at,ft,rt,tt,Vt,Gt,Dt,Yt,Yn,Me,At,qe,kt,Lt]}class vH extends oi{constructor(e){super(),ai(this,e,jht,Hht,Gn,{options:33,value:25,min:0,max:26,step:1,precision:27,speed:28,keyStep:29,keyStepSlow:30,keyStepFast:31,decimals:32,format:34,parse:35,horizontal:36,vertical:37,circular:38,mainStyle:39,fastStyle:40,slowStyle:41,focusStyle:42,draggingStyle:43,editingStyle:44,cursor:45},null,[-1,-1,-1])}}function lD(i,e,t){const n=i.slice();n[9]=e[t],n[13]=e,n[12]=t;const r=n[4][n[12]%2];return n[10]=r,n}function cD(i,e,t){const n=i.slice();n[9]=e[t],n[11]=e,n[12]=t;const r=n[4][n[12]%3];return n[10]=r,n}function $ht(i){let e,t,n=hc(i[3]),r=[];for(let o=0;o<n.length;o+=1)r[o]=uD(lD(i,n,o));const s=o=>Ye(r[o],1,1,()=>{r[o]=null});return{c(){e=bt("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=yt(o,"DIV",{class:!0});var a=Jt(e);for(let l=0;l<r.length;l+=1)r[l].l(a);a.forEach(fe),this.h()},h(){$e(e,"class","container font-serif grid grid-cols-2 grid-rows-2 px-3 bg-base-200 svelte-fgczd2")},m(o,a){Ze(o,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null);t=!0},p(o,a){if(a&58){n=hc(o[3]);let l;for(l=0;l<n.length;l+=1){const c=lD(o,n,l);r[l]?(r[l].p(c,a),Ue(r[l],1)):(r[l]=uD(c),r[l].c(),Ue(r[l],1),r[l].m(e,null))}for(rl(),l=n.length;l<r.length;l+=1)s(l);il()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)Ue(r[a]);t=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)Ye(r[a]);t=!1},d(o){o&&fe(e),Xm(r,o)}}}function Xht(i){let e,t,n=hc(i[2]),r=[];for(let o=0;o<n.length;o+=1)r[o]=hD(cD(i,n,o));const s=o=>Ye(r[o],1,1,()=>{r[o]=null});return{c(){e=bt("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=yt(o,"DIV",{class:!0});var a=Jt(e);for(let l=0;l<r.length;l+=1)r[l].l(a);a.forEach(fe),this.h()},h(){$e(e,"class","container font-serif grid grid-cols-3 grid-rows-3 px-3 bg-base-200 svelte-fgczd2")},m(o,a){Ze(o,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null);t=!0},p(o,a){if(a&54){n=hc(o[2]);let l;for(l=0;l<n.length;l+=1){const c=cD(o,n,l);r[l]?(r[l].p(c,a),Ue(r[l],1)):(r[l]=hD(c),r[l].c(),Ue(r[l],1),r[l].m(e,null))}for(rl(),l=n.length;l<r.length;l+=1)s(l);il()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)Ue(r[a]);t=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)Ye(r[a]);t=!1},d(o){o&&fe(e),Xm(r,o)}}}function uD(i){let e,t,n,r,s;function o(l){i[7](l,i[9])}let a={step:.1,decimals:1,speed:.1,class:i[5],mainStyle:`color: hsl(var(--${i[10]}));`};return i[1][i[9]]!==void 0&&(a.value=i[1][i[9]]),t=new vH({props:a}),ja.push(()=>f2(t,"value",o)),{c(){e=bt("div"),xt(t.$$.fragment),r=Nt(),this.h()},l(l){e=yt(l,"DIV",{class:!0});var c=Jt(e);wt(t.$$.fragment,c),r=Ut(c),c.forEach(fe),this.h()},h(){$e(e,"class","")},m(l,c){Ze(l,e,c),St(t,e,null),Ct(e,r),s=!0},p(l,c){i=l;const u={};!n&&c&10&&(n=!0,u.value=i[1][i[9]],d2(()=>n=!1)),t.$set(u)},i(l){s||(Ue(t.$$.fragment,l),s=!0)},o(l){Ye(t.$$.fragment,l),s=!1},d(l){l&&fe(e),Mt(t)}}}function hD(i){let e,t,n,r,s;function o(l){i[6](l,i[9])}let a={step:.1,decimals:1,speed:.1,class:i[5],mainStyle:`color: hsl(var(--${i[10]}));`};return i[1][i[9]]!==void 0&&(a.value=i[1][i[9]]),t=new vH({props:a}),ja.push(()=>f2(t,"value",o)),{c(){e=bt("div"),xt(t.$$.fragment),r=Nt(),this.h()},l(l){e=yt(l,"DIV",{class:!0});var c=Jt(e);wt(t.$$.fragment,c),r=Ut(c),c.forEach(fe),this.h()},h(){$e(e,"class","")},m(l,c){Ze(l,e,c),St(t,e,null),Ct(e,r),s=!0},p(l,c){i=l;const u={};!n&&c&6&&(n=!0,u.value=i[1][i[9]],d2(()=>n=!1)),t.$set(u)},i(l){s||(Ue(t.$$.fragment,l),s=!0)},o(l){Ye(t.$$.fragment,l),s=!1},d(l){l&&fe(e),Mt(t)}}}function Yht(i){let e,t,n,r;const s=[Xht,$ht],o=[];function a(l,c){return l[0]?0:1}return e=a(i),t=o[e]=s[e](i),{c(){t.c(),n=Zs()},l(l){t.l(l),n=Zs()},m(l,c){o[e].m(l,c),Ze(l,n,c),r=!0},p(l,[c]){let u=e;e=a(l),e===u?o[e].p(l,c):(rl(),Ye(o[u],1,1,()=>{o[u]=null}),il(),t=o[e],t?t.p(l,c):(t=o[e]=s[e](l),t.c()),Ue(t,1),t.m(n.parentNode,n))},i(l){r||(Ue(t),r=!0)},o(l){Ye(t),r=!1},d(l){l&&fe(n),o[e].d(l)}}}function Kht(i,e,t){let n,r;Mn(i,MD,h=>t(0,n=h)),Mn(i,Bm,h=>t(1,r=h));const s=[0,1,2,4,5,6,8,9,10],o=[0,1,4,5],a=["p","s","a"],l="text-2xl w-20 text-right py-2 px-2 bg-base-200";function c(h,d){i.$$.not_equal(r[d],h)&&(r[d]=h,Bm.set(r))}function u(h,d){i.$$.not_equal(r[d],h)&&(r[d]=h,Bm.set(r))}return i.$$.update=()=>{i.$$.dirty&1},[n,r,s,o,a,l,c,u]}class Zht extends oi{constructor(e){super(),ai(this,e,Kht,Yht,Gn,{})}}const dD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function fD(i,e,t){const n=i.slice();return n[10]=e[t][0],n[11]=e[t][1],n}function zC(i){let e,t=[i[11]],n={};for(let r=0;r<t.length;r+=1)n=Jn(n,t[r]);return{c(){e=Ym(i[10]),this.h()},l(r){e=Km(r,i[10],{}),Jt(e).forEach(fe),this.h()},h(){xw(e,n)},m(r,s){Ze(r,e,s)},p(r,s){xw(e,n=_s(t,[s&32&&r[11]]))},d(r){r&&fe(e)}}}function pD(i){let e=i[10],t,n=i[10]&&zC(i);return{c(){n&&n.c(),t=Zs()},l(r){n&&n.l(r),t=Zs()},m(r,s){n&&n.m(r,s),Ze(r,t,s)},p(r,s){r[10]?e?Gn(e,r[10])?(n.d(1),n=zC(r),e=r[10],n.c(),n.m(t.parentNode,t)):n.p(r,s):(n=zC(r),e=r[10],n.c(),n.m(t.parentNode,t)):e&&(n.d(1),n=null,e=r[10])},d(r){r&&fe(t),n&&n.d(r)}}}function Jht(i){let e,t,n,r,s,o=hc(i[5]),a=[];for(let d=0;d<o.length;d+=1)a[d]=pD(fD(i,o,d));const l=i[9].default,c=is(l,i,i[8],null);let u=[dD,i[6],{width:i[2]},{height:i[2]},{stroke:i[1]},{"stroke-width":n=i[4]?Number(i[3])*24/Number(i[2]):i[3]},{class:r=`lucide-icon lucide lucide-${i[0]} ${i[7].class??""}`}],h={};for(let d=0;d<u.length;d+=1)h=Jn(h,u[d]);return{c(){e=Ym("svg");for(let d=0;d<a.length;d+=1)a[d].c();t=Zs(),c&&c.c(),this.h()},l(d){e=Km(d,"svg",{width:!0,height:!0,stroke:!0,"stroke-width":!0,class:!0});var f=Jt(e);for(let g=0;g<a.length;g+=1)a[g].l(f);t=Zs(),c&&c.l(f),f.forEach(fe),this.h()},h(){xw(e,h)},m(d,f){Ze(d,e,f);for(let g=0;g<a.length;g+=1)a[g]&&a[g].m(e,null);Ct(e,t),c&&c.m(e,null),s=!0},p(d,[f]){if(f&32){o=hc(d[5]);let g;for(g=0;g<o.length;g+=1){const v=fD(d,o,g);a[g]?a[g].p(v,f):(a[g]=pD(v),a[g].c(),a[g].m(e,t))}for(;g<a.length;g+=1)a[g].d(1);a.length=o.length}c&&c.p&&(!s||f&256)&&rs(c,l,d,d[8],s?os(l,d[8],f,null):ss(d[8]),null),xw(e,h=_s(u,[dD,f&64&&d[6],(!s||f&4)&&{width:d[2]},(!s||f&4)&&{height:d[2]},(!s||f&2)&&{stroke:d[1]},(!s||f&28&&n!==(n=d[4]?Number(d[3])*24/Number(d[2]):d[3]))&&{"stroke-width":n},(!s||f&129&&r!==(r=`lucide-icon lucide lucide-${d[0]} ${d[7].class??""}`))&&{class:r}]))},i(d){s||(Ue(c,d),s=!0)},o(d){Ye(c,d),s=!1},d(d){d&&fe(e),Xm(a,d),c&&c.d(d)}}}function Qht(i,e,t){const n=["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"];let r=cf(e,n),{$$slots:s={},$$scope:o}=e,{name:a}=e,{color:l="currentColor"}=e,{size:c=24}=e,{strokeWidth:u=2}=e,{absoluteStrokeWidth:h=!1}=e,{iconNode:d}=e;return i.$$set=f=>{t(7,e=Jn(Jn({},e),Oo(f))),t(6,r=cf(e,n)),"name"in f&&t(0,a=f.name),"color"in f&&t(1,l=f.color),"size"in f&&t(2,c=f.size),"strokeWidth"in f&&t(3,u=f.strokeWidth),"absoluteStrokeWidth"in f&&t(4,h=f.absoluteStrokeWidth),"iconNode"in f&&t(5,d=f.iconNode),"$$scope"in f&&t(8,o=f.$$scope)},e=Oo(e),[a,l,c,u,h,d,r,e,o,s]}class edt extends oi{constructor(e){super(),ai(this,e,Qht,Jht,Gn,{name:0,color:1,size:2,strokeWidth:3,absoluteStrokeWidth:4,iconNode:5})}}const Lb=edt;function tdt(i){let e;const t=i[2].default,n=is(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&rs(n,t,r,r[3],e?os(t,r[3],s,null):ss(r[3]),null)},i(r){e||(Ue(n,r),e=!0)},o(r){Ye(n,r),e=!1},d(r){n&&n.d(r)}}}function ndt(i){let e,t;const n=[{name:"grid"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[tdt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Jn(r,n[s]);return e=new Lb({props:r}),{c(){xt(e.$$.fragment)},l(s){wt(e.$$.fragment,s)},m(s,o){St(e,s,o),t=!0},p(s,[o]){const a=o&3?_s(n,[n[0],o&2&&sd(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(Ue(e.$$.fragment,s),t=!0)},o(s){Ye(e.$$.fragment,s),t=!1},d(s){Mt(e,s)}}}function idt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15"}],["line",{x1:"9",x2:"9",y1:"3",y2:"21"}],["line",{x1:"15",x2:"15",y1:"3",y2:"21"}]];return i.$$set=o=>{t(1,e=Jn(Jn({},e),Oo(o))),"$$scope"in o&&t(3,r=o.$$scope)},e=Oo(e),[s,e,n,r]}class rdt extends oi{constructor(e){super(),ai(this,e,idt,ndt,Gn,{})}}const mD=rdt;function sdt(i){let e;const t=i[2].default,n=is(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&rs(n,t,r,r[3],e?os(t,r[3],s,null):ss(r[3]),null)},i(r){e||(Ue(n,r),e=!0)},o(r){Ye(n,r),e=!1},d(r){n&&n.d(r)}}}function odt(i){let e,t;const n=[{name:"layers"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[sdt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Jn(r,n[s]);return e=new Lb({props:r}),{c(){xt(e.$$.fragment)},l(s){wt(e.$$.fragment,s)},m(s,o){St(e,s,o),t=!0},p(s,[o]){const a=o&3?_s(n,[n[0],o&2&&sd(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(Ue(e.$$.fragment,s),t=!0)},o(s){Ye(e.$$.fragment,s),t=!1},d(s){Mt(e,s)}}}function adt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["polygon",{points:"12 2 2 7 12 12 22 7 12 2"}],["polyline",{points:"2 17 12 22 22 17"}],["polyline",{points:"2 12 12 17 22 12"}]];return i.$$set=o=>{t(1,e=Jn(Jn({},e),Oo(o))),"$$scope"in o&&t(3,r=o.$$scope)},e=Oo(e),[s,e,n,r]}class ldt extends oi{constructor(e){super(),ai(this,e,adt,odt,Gn,{})}}const _H=ldt;function cdt(i){let e;const t=i[2].default,n=is(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&rs(n,t,r,r[3],e?os(t,r[3],s,null):ss(r[3]),null)},i(r){e||(Ue(n,r),e=!0)},o(r){Ye(n,r),e=!1},d(r){n&&n.d(r)}}}function udt(i){let e,t;const n=[{name:"pause"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[cdt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Jn(r,n[s]);return e=new Lb({props:r}),{c(){xt(e.$$.fragment)},l(s){wt(e.$$.fragment,s)},m(s,o){St(e,s,o),t=!0},p(s,[o]){const a=o&3?_s(n,[n[0],o&2&&sd(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(Ue(e.$$.fragment,s),t=!0)},o(s){Ye(e.$$.fragment,s),t=!1},d(s){Mt(e,s)}}}function hdt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["rect",{width:"4",height:"16",x:"6",y:"4"}],["rect",{width:"4",height:"16",x:"14",y:"4"}]];return i.$$set=o=>{t(1,e=Jn(Jn({},e),Oo(o))),"$$scope"in o&&t(3,r=o.$$scope)},e=Oo(e),[s,e,n,r]}class ddt extends oi{constructor(e){super(),ai(this,e,hdt,udt,Gn,{})}}const fdt=ddt;function pdt(i){let e;const t=i[2].default,n=is(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&rs(n,t,r,r[3],e?os(t,r[3],s,null):ss(r[3]),null)},i(r){e||(Ue(n,r),e=!0)},o(r){Ye(n,r),e=!1},d(r){n&&n.d(r)}}}function mdt(i){let e,t;const n=[{name:"play"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[pdt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Jn(r,n[s]);return e=new Lb({props:r}),{c(){xt(e.$$.fragment)},l(s){wt(e.$$.fragment,s)},m(s,o){St(e,s,o),t=!0},p(s,[o]){const a=o&3?_s(n,[n[0],o&2&&sd(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(Ue(e.$$.fragment,s),t=!0)},o(s){Ye(e.$$.fragment,s),t=!1},d(s){Mt(e,s)}}}function gdt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["polygon",{points:"5 3 19 12 5 21 5 3"}]];return i.$$set=o=>{t(1,e=Jn(Jn({},e),Oo(o))),"$$scope"in o&&t(3,r=o.$$scope)},e=Oo(e),[s,e,n,r]}class vdt extends oi{constructor(e){super(),ai(this,e,gdt,mdt,Gn,{})}}const _dt=vdt;function bdt(i){let e;const t=i[2].default,n=is(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8)&&rs(n,t,r,r[3],e?os(t,r[3],s,null):ss(r[3]),null)},i(r){e||(Ue(n,r),e=!0)},o(r){Ye(n,r),e=!1},d(r){n&&n.d(r)}}}function ydt(i){let e,t;const n=[{name:"scatter-chart"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[bdt]},$$scope:{ctx:i}};for(let s=0;s<n.length;s+=1)r=Jn(r,n[s]);return e=new Lb({props:r}),{c(){xt(e.$$.fragment)},l(s){wt(e.$$.fragment,s)},m(s,o){St(e,s,o),t=!0},p(s,[o]){const a=o&3?_s(n,[n[0],o&2&&sd(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(Ue(e.$$.fragment,s),t=!0)},o(s){Ye(e.$$.fragment,s),t=!1},d(s){Mt(e,s)}}}function xdt(i,e,t){let{$$slots:n={},$$scope:r}=e;const s=[["circle",{cx:"7.5",cy:"7.5",r:".5"}],["circle",{cx:"18.5",cy:"5.5",r:".5"}],["circle",{cx:"11.5",cy:"11.5",r:".5"}],["circle",{cx:"7.5",cy:"16.5",r:".5"}],["circle",{cx:"17.5",cy:"14.5",r:".5"}],["path",{d:"M3 3v18h18"}]];return i.$$set=o=>{t(1,e=Jn(Jn({},e),Oo(o))),"$$scope"in o&&t(3,r=o.$$scope)},e=Oo(e),[s,e,n,r]}class wdt extends oi{constructor(e){super(),ai(this,e,xdt,ydt,Gn,{})}}const bH=wdt;function Sdt(i){let e,t,n,r,s,o,a,l,c,u,h,d;return r=new _dt({}),a=new fdt({}),{c(){e=bt("div"),t=bt("label"),n=bt("div"),xt(r.$$.fragment),s=Nt(),o=bt("div"),xt(a.$$.fragment),l=Nt(),c=bt("input"),this.h()},l(f){e=yt(f,"DIV",{class:!0});var g=Jt(e);t=yt(g,"LABEL",{class:!0});var v=Jt(t);n=yt(v,"DIV",{class:!0});var y=Jt(n);wt(r.$$.fragment,y),y.forEach(fe),s=Ut(v),o=yt(v,"DIV",{class:!0});var _=Jt(o);wt(a.$$.fragment,_),_.forEach(fe),v.forEach(fe),l=Ut(g),c=yt(g,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),g.forEach(fe),this.h()},h(){$e(n,"class","swap-on"),$e(o,"class","swap-off"),$e(t,"class","swap swap-rotate"),Hn(t,"swap-active",i[0]),$e(c,"type","range"),$e(c,"min",0),$e(c,"max",1),$e(c,"step",.001),$e(c,"class","range range-sm"),$e(e,"class","flex w-80 gap-3")},m(f,g){Ze(f,e,g),Ct(e,t),Ct(t,n),St(r,n,null),Ct(t,s),Ct(t,o),St(a,o,null),Ct(e,l),Ct(e,c),Em(c,i[2]),u=!0,h||(d=[Ji(t,"click",i[4]),Ji(c,"change",i[5]),Ji(c,"input",i[5]),Ji(c,"input",i[6]),Ji(c,"change",i[7])],h=!0)},p(f,[g]){(!u||g&1)&&Hn(t,"swap-active",f[0]),g&4&&Em(c,f[2])},i(f){u||(Ue(r.$$.fragment,f),Ue(a.$$.fragment,f),u=!0)},o(f){Ye(r.$$.fragment,f),Ye(a.$$.fragment,f),u=!1},d(f){f&&fe(e),Mt(r),Mt(a),h=!1,p_(d)}}}function Mdt(i,e,t){let n,r,s;Mn(i,Tm,h=>t(0,n=h)),Mn(i,BC,h=>t(1,r=h)),Mn(i,ww,h=>t(2,s=h)),Ei.fromTo(r,{progress:0},{progress:1,ease:"power2.inOut"});function o(h){h.paused(!h.paused()),h.progress()==1&&h.restart(),h.paused()?Xs(Tm,n=!0,n):Xs(Tm,n=!1,n)}const a=()=>{o(r)};function l(){s=R$(this.value),ww.set(s)}return[n,r,s,o,a,l,()=>{r.progress(s),r.pause()},()=>{Xs(Tm,n=!0,n)}]}class Cdt extends oi{constructor(e){super(),ai(this,e,Mdt,Sdt,Gn,{})}}const $x=i=>new Proxy(i,{get(e,t,n){return Reflect.get(e,t,n)},ownKeys(e){return Reflect.ownKeys(e).filter(t=>t!=="action")}});function gD(i){function e(t){return t(i),()=>{}}return{subscribe:e}}const vD=i=>typeof i=="function";function Ep(i,e){const{stores:t,action:n,returned:r}=e??{},s=(()=>{if(t&&r)return Gc(t,a=>{const l=r(a);if(vD(l)){const c=(...u)=>$x({...l(...u),[`data-melt-${i}`]:"",action:n??wm});return c.action=n??wm,c}return $x({...l,[`data-melt-${i}`]:"",action:n??wm})});{const a=r,l=a==null?void 0:a();if(vD(l)){const c=(...u)=>$x({...l(...u),[`data-melt-${i}`]:"",action:n??wm});return c.action=n??wm,gD(c)}return gD($x({...l,[`data-melt-${i}`]:"",action:n??wm}))}})(),o=n??(()=>{});return o.subscribe=s.subscribe,o}function yH(i){const e=s=>s?`${i}-${s}`:i,t=s=>`data-melt-${i}${s?`-${s}`:""}`,n=s=>`[data-melt-${i}${s?`-${s}`:""}]`;return{name:e,attribute:t,selector:n,getEl:s=>document.querySelector(n(s))}}const Edt=typeof document<"u";function kp(i){return i instanceof HTMLElement}function xH(...i){return(...e)=>{for(const t of i)typeof t=="function"&&t(...e)}}function wm(){}function wH(i,e,t,n){const r=Array.isArray(e)?e:[e];return r.forEach(s=>i.addEventListener(s,t,n)),()=>{r.forEach(s=>i.removeEventListener(s,t,n))}}function Um(i,e,t,n){const r=Array.isArray(e)?e:[e];if(typeof t=="function"){const s=Adt(o=>t(o));return r.forEach(o=>i.addEventListener(o,s,n)),()=>{r.forEach(o=>i.removeEventListener(o,s,n))}}return()=>void 0}function Tdt(i){const e=i.currentTarget;if(!kp(e))return;const t=new CustomEvent(`m-${i.type}`,{detail:{cancel:()=>{i.preventDefault()},originalEvent:i}});e.dispatchEvent(t)}function Adt(i){return e=>{if(Tdt(e),!e.defaultPrevented)return i(e)}}function Pdt(i,...e){const t={};for(const n of Object.keys(i))e.includes(n)||(t[n]=i[n]);return t}const SH=(i,e)=>{const t=(r,s)=>{i.update(o=>{const a=r(o);let l=a;return e&&(l=e({curr:o,next:a})),s==null||s(l),l})};return{...i,update:t,set:r=>{t(()=>r)}}};function kdt(i){return new Promise(e=>setTimeout(e,i))}const qc={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control"};function RT(i){const e={};return Object.keys(i).forEach(t=>{const n=t,r=i[n];e[n]=Os(r)}),e}function Sm(i){if(!Edt)return;const e=document.activeElement;kp(e)&&e!==i&&(e.tabIndex=-1,i.tabIndex=0,kdt(1).then(()=>i.focus()))}LT(void 0,i=>{function e(n){i(n),i(void 0)}return wH(document,"pointerdown",e,{passive:!1,capture:!0})});LT(void 0,i=>{function e(n){n&&n.key===qc.ESCAPE&&i(n),i(void 0)}return wH(document,"keydown",e,{passive:!1,capture:!0})});const Rdt={defaultPressed:!1,disabled:!1};function OT(i){const e={...Rdt,...i},t=RT(Pdt(e,"pressed")),{disabled:n}=t,r=e.pressed??Os(e.defaultPressed),s=SH(r,e==null?void 0:e.onPressedChange);function o(){bw(n)||s.update(c=>!c)}return{elements:{root:Ep("toggle",{stores:[s,n],returned:([l,c])=>({"data-disabled":c?!0:void 0,disabled:c,"data-state":l?"on":"off","aria-pressed":l,type:"button"}),action:l=>({destroy:xH(Um(l,"click",()=>{o()}),Um(l,"keydown",u=>{u.key!==qc.ENTER&&u.key!==qc.SPACE||(u.preventDefault(),o())}))})})},states:{pressed:s},options:t}}const Odt={loop:!0,orientation:"horizontal"},{name:Xx,selector:Yx}=yH("toolbar"),Ldt=i=>{const e={...Odt,...i},t=RT(e),{loop:n,orientation:r}=t,s=Ep(Xx(),{stores:r,returned:f=>({role:"toolbar","data-orientation":f})}),o=Ep(Xx("button"),{returned:()=>({role:"button",type:"button",tabIndex:-1}),action:f=>({destroy:Um(f,"keydown",d)})}),a=Ep(Xx("link"),{returned:()=>({role:"link","data-melt-toolbar-item":"",tabIndex:-1}),action:f=>({destroy:Um(f,"keydown",d)})}),l=Ep(Xx("separator"),{stores:r,returned:f=>({role:"separator","data-orientation":f==="horizontal"?"vertical":"horizontal","aria-orientation":f==="horizontal"?"vertical":"horizontal"})}),c={type:"single",disabled:!1},u=f=>{const g={...c,...f},v=RT(g),{type:y,disabled:_}=v,S=g.defaultValue?g.defaultValue:g.type==="single"?void 0:[],w=g.value??Os(S),C=SH(w,g==null?void 0:g.onValueChange),{name:E}=yH("toolbar-group"),k=Ep(E(),{stores:r,returned:A=>({role:"group","data-orientation":A})}),O=Ep(E("item"),{stores:[_,y,C,r],returned:([A,D,I,q])=>j=>{const Y=typeof j=="string"?j:j.value,F=typeof j=="string"?!1:!!j.disabled,re=A||F,ee=Array.isArray(I)?I.includes(Y):I===Y;return{disabled:re,pressed:ee,"data-orientation":q,"data-disabled":re?!0:void 0,"data-value":Y,"data-state":ee?"on":"off","aria-pressed":ee,type:"button",role:D==="single"?"radio":void 0,"data-melt-toolbar-item":""}},action:A=>{function D(){const F=A.dataset.value,re=A.dataset.disabled==="true";return{value:F,disabled:re}}function I(){const{value:F,disabled:re}=D();F===void 0||re||C.update(ee=>Array.isArray(ee)?ee.includes(F)?ee.filter(J=>J!==F):(ee.push(F),ee):ee===F?void 0:F)}const q=A.closest("[data-melt-toolbar]");return kp(q)?(h(q)[0]===A?A.tabIndex=0:A.tabIndex=-1,{destroy:xH(Um(A,"click",()=>{I()}),Um(A,"keydown",F=>{if(F.key===qc.ENTER||F.key===qc.SPACE){F.preventDefault(),I();return}d(F)}))}):{}}}),R=Gc(C,A=>D=>Array.isArray(A)?A.includes(D):A===D);return{elements:{group:k,item:O},states:{value:C},helpers:{isPressed:R},options:v}};function h(f){return Array.from(f.querySelectorAll(`${Yx("item")}, ${Yx("button")}`)).filter(g=>kp(g))}function d(f){const g=bw(r),v=bw(n),y={horizontal:qc.ARROW_RIGHT,vertical:qc.ARROW_DOWN}[g??"horizontal"],_={horizontal:qc.ARROW_LEFT,vertical:qc.ARROW_UP}[g??"horizontal"],S=f.currentTarget;if(!kp(S))return;const w=S.closest("[data-melt-toolbar]");if(!kp(w))return;const C=Array.from(w.querySelectorAll(`${Yx("item")}, ${Yx("button")}`)).filter(k=>kp(k)),E=C.indexOf(S);if(f.key===y){f.preventDefault();const k=E+1;k>=C.length&&v?Sm(C[0]):Sm(C[k])}else if(f.key===_){f.preventDefault();const k=E-1;k<0&&v?Sm(C[C.length-1]):Sm(C[k])}else f.key===qc.HOME?(f.preventDefault(),Sm(C[0])):f.key===qc.END&&(f.preventDefault(),Sm(C[C.length-1]))}return{elements:{root:s,button:o,separator:l,link:a},builders:{createToolbarGroup:u},options:t}};function Ddt(i){let e,t,n,r=o_.renderToString(i[0],{displayMode:i[1]})+"";return{c(){e=bt("span"),t=bt("span"),n=new c2(!1),this.h()},l(s){e=yt(s,"SPAN",{class:!0});var o=Jt(e);t=yt(o,"SPAN",{});var a=Jt(t);n=u2(a,!1),a.forEach(fe),o.forEach(fe),this.h()},h(){n.a=null,$e(e,"class",i[3])},m(s,o){Ze(s,e,o),Ct(e,t),n.m(r,t),i[7](t)},p(s,[o]){o&3&&r!==(r=o_.renderToString(s[0],{displayMode:s[1]})+"")&&n.p(r),o&8&&$e(e,"class",s[3])},i:mr,o:mr,d(s){s&&fe(e),i[7](null)}}}function zdt(i,e,t){let n,{expr:r}=e,{display:s=!1}=e,{color:o=!1}=e,a,l="group relative";l=s?`${l} py-1 block my-5`:l,rd(()=>{o&&Ei.utils.selector(a)});const{toggle:c,pressed:u}=OT({pressed:!0});Mn(i,u,d=>t(6,n=d));function h(d){ja[d?"unshift":"push"](()=>{a=d,t(2,a)})}return i.$$set=d=>{"expr"in d&&t(0,r=d.expr),"display"in d&&t(1,s=d.display),"color"in d&&t(5,o=d.color)},i.$$.update=()=>{i.$$.dirty&96},[r,s,a,l,u,o,n,h]}class nl extends oi{constructor(e){super(),ai(this,e,zdt,Ddt,Gn,{expr:0,display:1,color:5})}}Mf.cyan[400];Mf.green[400];Mf.cyan[900];Mf.green[900];function Ti(i,e){return`\\textcolor{${e}}{${i}}`}const MH=String.raw`
\begin{aligned}
{\left[\begin{array}{ll}
a & b \\
c & d
\end{array}\right]\left[\begin{array}{l}
x \\
y
\end{array}\right] } & =x\left[\begin{array}{l}
a \\
c
\end{array}\right]+y\left[\begin{array}{l}
b \\
d
\end{array}\right] \\
& =\left[\begin{array}{l}
a x+b y \\
c x+d y
\end{array}\right]
\end{aligned}
`,Idt=String.raw`\left[\begin{array}{r}
  ${cc[0]} & ${Au[0]} \\
  ${cc[1]} & ${Au[1]}
  \end{array}\right]\left[\begin{array}{r}
  ${Jr[0]} \\
  ${Jr[1]}
  \end{array}\right]=\left[\begin{array}{l}
  ${Zm[0]} \\
  ${Zm[1]}
  \end{array}\right]`,Ndt=Ti(Jr[0],y2),Udt=Ti(Jr[1],x2),CH=Ti(String.raw`\left[\begin{array}{r}
  ${Ndt} \\
  ${Udt}
  \end{array}\right]`,$p),Fdt=String.raw`${CH}=${Ti(Jr[0],y2)}\left[\begin{array}{l}
    ${Ti(1,Zc)} \\
    ${Ti(0,Zc)}
    \end{array}\right]
+${Ti(Jr[1],x2)}\left[\begin{array}{l}
      ${Ti(0,Jc)} \\
      ${Ti(1,Jc)}
      \end{array}\right]
`,Bdt=Ti(cc[0],Zc),Vdt=Ti(Au[0],Jc),Hdt=Ti(cc[1],Zc),qdt=Ti(Au[1],Jc),Gdt=String.raw`\left[\begin{array}{r}
${Bdt} & ${Vdt} \\
${Hdt} & ${qdt}
\end{array}\right]`,Wdt=String.raw`\left[\begin{array}{r}
  ${Ti(cc[0],Zc)} \\
  ${Ti(cc[1],Zc)}
  \end{array}\right]`,jdt=String.raw`\left[\begin{array}{r}
  ${Ti(Au[0],Jc)} \\
  ${Ti(Au[1],Jc)}
  \end{array}\right]`,$dt=String.raw`\left[\begin{array}{l}
  ${Ti(Zm[0],$p)} \\
  ${Ti(Zm[1],$p)}
  \end{array}\right]`,Xdt=String.raw`\begin{aligned}
{${Gdt}
${CH} } & =${Ti(Jr[0],y2)}${Wdt}+${Ti(Jr[1],x2)} ${jdt} \\
& = ${$dt}
\end{aligned}
`,EH=Ti(g2[0],Zc),TH=Ti(g2[1],Zc),AH=Ti(g2[2],Zc),PH=Ti(v2[0],Jc),kH=Ti(v2[1],Jc),RH=Ti(v2[2],Jc),OH=Ti(_2[0],p2),LH=Ti(_2[1],p2),DH=Ti(_2[2],p2),Ydt=String.raw`\left[\begin{array}{r}
  ${EH} & ${PH} & ${OH} \\
  ${TH} & ${kH} & ${LH} \\
  ${AH} & ${RH} & ${DH}
  \end{array}\right]`,zH=Ti(m2[0],y2),IH=Ti(m2[1],x2),NH=Ti(m2[2],z$),Kdt=String.raw`\left[\begin{array}{r}
  ${zH} \\
  ${IH} \\
  ${NH}
  \end{array}\right]`,Zdt=String.raw`\left[\begin{array}{r}
    ${EH} \\
    ${TH} \\
    ${AH}
    \end{array}\right]`,Jdt=Ti(b2[0],$p),Qdt=Ti(b2[1],$p),eft=Ti(b2[2],$p),tft=String.raw`\begin{aligned}
& {${Ydt}${Kdt}} \\
& ${zH}${Zdt}+${IH}\left[\begin{array}{r}
${PH} \\
${kH} \\
${RH}
\end{array}\right]${NH}\left[\begin{array}{r}
${OH} \\
${LH} \\
${DH}
\end{array}\right] \\
& =\left[\begin{array}{r}
${Jdt} \\
${Qdt} \\
${eft}
\end{array}\right]
\end{aligned}`;function nft(i){let e,t;const n=i[1].default,r=is(n,i,i[0],null);return{c(){e=bt("b"),r&&r.c(),this.h()},l(s){e=yt(s,"B",{class:!0});var o=Jt(e);r&&r.l(o),o.forEach(fe),this.h()},h(){$e(e,"class","text-base-content")},m(s,o){Ze(s,e,o),r&&r.m(e,null),t=!0},p(s,[o]){r&&r.p&&(!t||o&1)&&rs(r,n,s,s[0],t?os(n,s[0],o,null):ss(s[0]),null)},i(s){t||(Ue(r,s),t=!0)},o(s){Ye(r,s),t=!1},d(s){s&&fe(e),r&&r.d(s)}}}function ift(i,e,t){let{$$slots:n={},$$scope:r}=e;return i.$$set=s=>{"$$scope"in s&&t(0,r=s.$$scope)},[r,n]}class R6 extends oi{constructor(e){super(),ai(this,e,ift,nft,Gn,{})}}function rft(i){let e,t,n=`hsl(var(--${i[0]}))`,r;const s=i[2].default,o=is(s,i,i[1],null);return{c(){e=bt("span"),o&&o.c(),this.h()},l(a){e=yt(a,"SPAN",{class:!0});var l=Jt(e);o&&o.l(l),l.forEach(fe),this.h()},h(){$e(e,"class",t=`underline font-bold decoration-wavy decoration-2 underline-offset-4 decoration-${i[0]} text-base-content`),Zd(e,"text-decoration-color",n)},m(a,l){Ze(a,e,l),o&&o.m(e,null),r=!0},p(a,[l]){o&&o.p&&(!r||l&2)&&rs(o,s,a,a[1],r?os(s,a[1],l,null):ss(a[1]),null),(!r||l&1&&t!==(t=`underline font-bold decoration-wavy decoration-2 underline-offset-4 decoration-${a[0]} text-base-content`))&&$e(e,"class",t),l&1&&n!==(n=`hsl(var(--${a[0]}))`)&&Zd(e,"text-decoration-color",n)},i(a){r||(Ue(o,a),r=!0)},o(a){Ye(o,a),r=!1},d(a){a&&fe(e),o&&o.d(a)}}}function sft(i,e,t){let{$$slots:n={},$$scope:r}=e,{color:s}=e;return i.$$set=o=>{"color"in o&&t(0,s=o.color),"$$scope"in o&&t(1,r=o.$$scope)},[s,r,n]}class a2 extends oi{constructor(e){super(),ai(this,e,sft,rft,Gn,{color:0})}}function oft(i){let e,t,n,r,s,o;const a=i[1].default,l=is(a,i,i[0],null);return{c(){e=bt("div"),t=Ym("svg"),n=Ym("path"),r=Nt(),s=bt("span"),l&&l.c(),this.h()},l(c){e=yt(c,"DIV",{class:!0});var u=Jt(e);t=Km(u,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var h=Jt(t);n=Km(h,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),Jt(n).forEach(fe),h.forEach(fe),r=Ut(u),s=yt(u,"SPAN",{});var d=Jt(s);l&&l.l(d),d.forEach(fe),u.forEach(fe),this.h()},h(){$e(n,"stroke-linecap","round"),$e(n,"stroke-linejoin","round"),$e(n,"stroke-width","2"),$e(n,"d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),$e(t,"xmlns","http://www.w3.org/2000/svg"),$e(t,"fill","none"),$e(t,"viewBox","0 0 24 24"),$e(t,"class","stroke-info shrink-0 w-6 h-6"),$e(e,"class","alert")},m(c,u){Ze(c,e,u),Ct(e,t),Ct(t,n),Ct(e,r),Ct(e,s),l&&l.m(s,null),o=!0},p(c,[u]){l&&l.p&&(!o||u&1)&&rs(l,a,c,c[0],o?os(a,c[0],u,null):ss(c[0]),null)},i(c){o||(Ue(l,c),o=!0)},o(c){Ye(l,c),o=!1},d(c){c&&fe(e),l&&l.d(c)}}}function aft(i,e,t){let{$$slots:n={},$$scope:r}=e;return i.$$set=s=>{"$$scope"in s&&t(0,r=s.$$scope)},[r,n]}class lft extends oi{constructor(e){super(),ai(this,e,aft,oft,Gn,{})}}function cft(i){let e,t;const n=i[1].default,r=is(n,i,i[0],null);return{c(){e=bt("b"),r&&r.c(),this.h()},l(s){e=yt(s,"B",{class:!0});var o=Jt(e);r&&r.l(o),o.forEach(fe),this.h()},h(){$e(e,"class","font-extrabold text-base-content")},m(s,o){Ze(s,e,o),r&&r.m(e,null),t=!0},p(s,[o]){r&&r.p&&(!t||o&1)&&rs(r,n,s,s[0],t?os(n,s[0],o,null):ss(s[0]),null)},i(s){t||(Ue(r,s),t=!0)},o(s){Ye(r,s),t=!1},d(s){s&&fe(e),r&&r.d(s)}}}function uft(i,e,t){let{$$slots:n={},$$scope:r}=e;return i.$$set=s=>{"$$scope"in s&&t(0,r=s.$$scope)},[r,n]}class l2 extends oi{constructor(e){super(),ai(this,e,uft,cft,Gn,{})}}function hft(i){let e;return{c(){e=bt("div"),this.h()},l(t){e=yt(t,"DIV",{class:!0}),Jt(e).forEach(fe),this.h()},h(){$e(e,"class","h-16")},m(t,n){Ze(t,e,n)},p:mr,i:mr,o:mr,d(t){t&&fe(e)}}}class Cm extends oi{constructor(e){super(),ai(this,e,null,hft,Gn,{})}}function dft(i){let e;return{c(){e=In("matrices")},l(t){e=Nn(t,"matrices")},m(t,n){Ze(t,e,n)},d(t){t&&fe(e)}}}function fft(i){let e;return{c(){e=In("visual")},l(t){e=Nn(t,"visual")},m(t,n){Ze(t,e,n)},d(t){t&&fe(e)}}}function pft(i){let e,t,n,r,s,o,a,l=`Why do we need a way to represent an array of rows and columns of numbers,
		and to execute computations and operations between them?`,c,u,h,d,f=`In school, you may recall reluctantly performing drill after drills of
		matrix-vector multiplications mechanically. You may even have been taught to
		memorize several inane formulas.`,g,v,y,_,S,w,C,E,k,O;return r=new l2({props:{$$slots:{default:[dft]},$$scope:{ctx:i}}}),u=new nl({props:{expr:Idt,display:!0}}),v=new nl({props:{expr:MH,display:!0}}),_=new Cm({}),E=new l2({props:{$$slots:{default:[fft]},$$scope:{ctx:i}}}),{c(){e=bt("section"),t=bt("p"),n=In("What do "),xt(r.$$.fragment),s=In(" mean to you?"),o=Nt(),a=bt("p"),a.textContent=l,c=Nt(),xt(u.$$.fragment),h=Nt(),d=bt("p"),d.textContent=f,g=Nt(),xt(v.$$.fragment),y=Nt(),xt(_.$$.fragment),S=Nt(),w=bt("p"),C=In("Let's explore a deeper, and a more "),xt(E.$$.fragment),k=In(` intuition behind what matrices
		represent.`),this.h()},l(R){e=yt(R,"SECTION",{class:!0});var A=Jt(e);t=yt(A,"P",{});var D=Jt(t);n=Nn(D,"What do "),wt(r.$$.fragment,D),s=Nn(D," mean to you?"),D.forEach(fe),o=Ut(A),a=yt(A,"P",{"data-svelte-h":!0}),Ka(a)!=="svelte-1jmwjc1"&&(a.textContent=l),c=Ut(A),wt(u.$$.fragment,A),h=Ut(A),d=yt(A,"P",{"data-svelte-h":!0}),Ka(d)!=="svelte-bf7lvd"&&(d.textContent=f),g=Ut(A),wt(v.$$.fragment,A),y=Ut(A),wt(_.$$.fragment,A),S=Ut(A),w=yt(A,"P",{});var I=Jt(w);C=Nn(I,"Let's explore a deeper, and a more "),wt(E.$$.fragment,I),k=Nn(I,` intuition behind what matrices
		represent.`),I.forEach(fe),A.forEach(fe),this.h()},h(){$e(e,"class","prose prose-xl translate-x-[calc(-50vw-50%)] mt-[100vh] max-w-prose h-screen")},m(R,A){Ze(R,e,A),Ct(e,t),Ct(t,n),St(r,t,null),Ct(t,s),Ct(e,o),Ct(e,a),Ct(e,c),St(u,e,null),Ct(e,h),Ct(e,d),Ct(e,g),St(v,e,null),Ct(e,y),St(_,e,null),Ct(e,S),Ct(e,w),Ct(w,C),St(E,w,null),Ct(w,k),O=!0},p(R,[A]){const D={};A&1&&(D.$$scope={dirty:A,ctx:R}),r.$set(D);const I={};A&1&&(I.$$scope={dirty:A,ctx:R}),E.$set(I)},i(R){O||(Ue(r.$$.fragment,R),Ue(u.$$.fragment,R),Ue(v.$$.fragment,R),Ue(_.$$.fragment,R),Ue(E.$$.fragment,R),O=!0)},o(R){Ye(r.$$.fragment,R),Ye(u.$$.fragment,R),Ye(v.$$.fragment,R),Ye(_.$$.fragment,R),Ye(E.$$.fragment,R),O=!1},d(R){R&&fe(e),Mt(r),Mt(u),Mt(v),Mt(_),Mt(E)}}}class mft extends oi{constructor(e){super(),ai(this,e,null,pft,Gn,{})}}function gft(i){let e,t='<div class="flex flex-col gap-5 items-center"><h1 class="text-8xl">The Matrix Arcade</h1> <div class="text-3xl">A Visual Explorable of Matrix Transformations</div></div>';return{c(){e=bt("div"),e.innerHTML=t,this.h()},l(n){e=yt(n,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),Ka(e)!=="svelte-15jhhhk"&&(e.innerHTML=t),this.h()},h(){$e(e,"id","title"),$e(e,"class","fixed top-0 left-0 right-0 z-10 grid place-content-center pt-16")},m(n,r){Ze(n,e,r)},p:mr,i:mr,o:mr,d(n){n&&fe(e)}}}function vft(i,e,t){let n,r;return Mn(i,FC,s=>t(0,n=s)),Mn(i,Zx,s=>t(1,r=s)),rd(()=>{Ei.timeline({scrollTrigger:{trigger:"#title",start:"top top",scrub:1,onLeave:()=>{Xs(Zx,r=!1,r)},onEnterBack:()=>{Xs(Zx,r=!0,r)}}}).to("#title",{autoAlpha:0}),Xs(FC,n=!0,n)}),[]}class _ft extends oi{constructor(e){super(),ai(this,e,vft,gft,Gn,{})}}function bft(i){let e,t;const n=i[2].default,r=is(n,i,i[1],null);return{c(){e=bt("p"),r&&r.c(),this.h()},l(s){e=yt(s,"P",{id:!0,class:!0});var o=Jt(e);r&&r.l(o),o.forEach(fe),this.h()},h(){$e(e,"id",i[0]),$e(e,"class","transition-color duration-300")},m(s,o){Ze(s,e,o),r&&r.m(e,null),t=!0},p(s,[o]){r&&r.p&&(!t||o&2)&&rs(r,n,s,s[1],t?os(n,s[1],o,null):ss(s[1]),null),(!t||o&1)&&$e(e,"id",s[0])},i(s){t||(Ue(r,s),t=!0)},o(s){Ye(r,s),t=!1},d(s){s&&fe(e),r&&r.d(s)}}}function yft(i,e,t){let{$$slots:n={},$$scope:r}=e,{id:s}=e;return i.$$set=o=>{"id"in o&&t(0,s=o.id),"$$scope"in o&&t(1,r=o.$$scope)},[s,r,n]}class ac extends oi{constructor(e){super(),ai(this,e,yft,bft,Gn,{id:0})}}function xft(i){let e,t,n,r,s,o;const a=i[1].default,l=is(a,i,i[0],null);return{c(){e=bt("div"),t=Ym("svg"),n=Ym("path"),r=Nt(),s=bt("span"),l&&l.c(),this.h()},l(c){e=yt(c,"DIV",{class:!0});var u=Jt(e);t=Km(u,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var h=Jt(t);n=Km(h,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),Jt(n).forEach(fe),h.forEach(fe),r=Ut(u),s=yt(u,"SPAN",{});var d=Jt(s);l&&l.l(d),d.forEach(fe),u.forEach(fe),this.h()},h(){$e(n,"stroke-linecap","round"),$e(n,"stroke-linejoin","round"),$e(n,"stroke-width","2"),$e(n,"d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"),$e(t,"xmlns","http://www.w3.org/2000/svg"),$e(t,"class","stroke-current shrink-0 h-6 w-6"),$e(t,"fill","none"),$e(t,"viewBox","0 0 24 24"),$e(e,"class","alert alert-success")},m(c,u){Ze(c,e,u),Ct(e,t),Ct(t,n),Ct(e,r),Ct(e,s),l&&l.m(s,null),o=!0},p(c,[u]){l&&l.p&&(!o||u&1)&&rs(l,a,c,c[0],o?os(a,c[0],u,null):ss(c[0]),null)},i(c){o||(Ue(l,c),o=!0)},o(c){Ye(l,c),o=!1},d(c){c&&fe(e),l&&l.d(c)}}}function wft(i,e,t){let{$$slots:n={},$$scope:r}=e;return i.$$set=s=>{"$$scope"in s&&t(0,r=s.$$scope)},[r,n]}class Sft extends oi{constructor(e){super(),ai(this,e,wft,xft,Gn,{})}}function Mft(i){let e,t;const n=i[2].default,r=is(n,i,i[1],null);return{c(){e=bt("section"),r&&r.c(),this.h()},l(s){e=yt(s,"SECTION",{id:!0,class:!0});var o=Jt(e);r&&r.l(o),o.forEach(fe),this.h()},h(){$e(e,"id",i[0]),$e(e,"class","prose prose-xl [&>*]:px-10 mb-60 svelte-1b63hsf")},m(s,o){Ze(s,e,o),r&&r.m(e,null),t=!0},p(s,[o]){r&&r.p&&(!t||o&2)&&rs(r,n,s,s[1],t?os(n,s[1],o,null):ss(s[1]),null),(!t||o&1)&&$e(e,"id",s[0])},i(s){t||(Ue(r,s),t=!0)},o(s){Ye(r,s),t=!1},d(s){s&&fe(e),r&&r.d(s)}}}function Cft(i,e,t){let{$$slots:n={},$$scope:r}=e,{id:s=null}=e;return i.$$set=o=>{"id"in o&&t(0,s=o.id),"$$scope"in o&&t(1,r=o.$$scope)},[s,r,n]}class _D extends oi{constructor(e){super(),ai(this,e,Cft,Mft,Gn,{id:0})}}function Eft(i){let e;return{c(){e=In("transforms")},l(t){e=Nn(t,"transforms")},m(t,n){Ze(t,e,n)},d(t){t&&fe(e)}}}function Tft(i){let e;return{c(){e=In("vector")},l(t){e=Nn(t,"vector")},m(t,n){Ze(t,e,n)},d(t){t&&fe(e)}}}function Aft(i){let e,t,n,r;return t=new a2({props:{color:"in",$$slots:{default:[Tft]},$$scope:{ctx:i}}}),{c(){e=In("Let's first think about what the coordinates of a "),xt(t.$$.fragment),n=In(" represent.")},l(s){e=Nn(s,"Let's first think about what the coordinates of a "),wt(t.$$.fragment,s),n=Nn(s," represent.")},m(s,o){Ze(s,e,o),St(t,s,o),Ze(s,n,o),r=!0},p(s,o){const a={};o&1&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){r||(Ue(t.$$.fragment,s),r=!0)},o(s){Ye(t.$$.fragment,s),r=!1},d(s){s&&(fe(e),fe(n)),Mt(t,s)}}}function Pft(i){let e,t,n;return e=new nl({props:{expr:"x"}}),{c(){xt(e.$$.fragment),t=In("-direction")},l(r){wt(e.$$.fragment,r),t=Nn(r,"-direction")},m(r,s){St(e,r,s),Ze(r,t,s),n=!0},p:mr,i(r){n||(Ue(e.$$.fragment,r),n=!0)},o(r){Ye(e.$$.fragment,r),n=!1},d(r){r&&fe(t),Mt(e,r)}}}function kft(i){let e,t,n;return e=new nl({props:{expr:"y"}}),{c(){xt(e.$$.fragment),t=In("-direction")},l(r){wt(e.$$.fragment,r),t=Nn(r,"-direction")},m(r,s){St(e,r,s),Ze(r,t,s),n=!0},p:mr,i(r){n||(Ue(e.$$.fragment,r),n=!0)},o(r){Ye(e.$$.fragment,r),n=!1},d(r){r&&fe(t),Mt(e,r)}}}function Rft(i){let e,t,n,r,s,o,a,l,c;return t=new nl({props:{expr:"xy"}}),s=new a2({props:{color:"p",$$slots:{default:[Pft]},$$scope:{ctx:i}}}),a=new a2({props:{color:"s",$$slots:{default:[kft]},$$scope:{ctx:i}}}),{c(){e=In("In the "),xt(t.$$.fragment),n=In(`-coordinate plane, any vector can be thought of
			as the sum of two scaled vectors: the unit vector in the
			`),r=bt("nobr"),xt(s.$$.fragment),o=In(`,
			and the unit vector in the `),xt(a.$$.fragment),l=In(".")},l(u){e=Nn(u,"In the "),wt(t.$$.fragment,u),n=Nn(u,`-coordinate plane, any vector can be thought of
			as the sum of two scaled vectors: the unit vector in the
			`),r=yt(u,"NOBR",{});var h=Jt(r);wt(s.$$.fragment,h),h.forEach(fe),o=Nn(u,`,
			and the unit vector in the `),wt(a.$$.fragment,u),l=Nn(u,".")},m(u,h){Ze(u,e,h),St(t,u,h),Ze(u,n,h),Ze(u,r,h),St(s,r,null),Ze(u,o,h),St(a,u,h),Ze(u,l,h),c=!0},p(u,h){const d={};h&1&&(d.$$scope={dirty:h,ctx:u}),s.$set(d);const f={};h&1&&(f.$$scope={dirty:h,ctx:u}),a.$set(f)},i(u){c||(Ue(t.$$.fragment,u),Ue(s.$$.fragment,u),Ue(a.$$.fragment,u),c=!0)},o(u){Ye(t.$$.fragment,u),Ye(s.$$.fragment,u),Ye(a.$$.fragment,u),c=!1},d(u){u&&(fe(e),fe(n),fe(r),fe(o),fe(l)),Mt(t,u),Mt(s),Mt(a,u)}}}function Oft(i){let e;return{c(){e=In("standard basis vectors")},l(t){e=Nn(t,"standard basis vectors")},m(t,n){Ze(t,e,n)},d(t){t&&fe(e)}}}function Lft(i){let e,t,n,r,s;return e=new nl({props:{expr:Fdt,display:!0,color:!0}}),n=new R6({props:{$$slots:{default:[Oft]},$$scope:{ctx:i}}}),{c(){xt(e.$$.fragment),t=In(`
			These are also known as our `),xt(n.$$.fragment),r=In(`. The
			vector's coordinates encode the amount to scale each individual basis
			vector, before adding them up.`)},l(o){wt(e.$$.fragment,o),t=Nn(o,`
			These are also known as our `),wt(n.$$.fragment,o),r=Nn(o,`. The
			vector's coordinates encode the amount to scale each individual basis
			vector, before adding them up.`)},m(o,a){St(e,o,a),Ze(o,t,a),St(n,o,a),Ze(o,r,a),s=!0},p(o,a){const l={};a&1&&(l.$$scope={dirty:a,ctx:o}),n.$set(l)},i(o){s||(Ue(e.$$.fragment,o),Ue(n.$$.fragment,o),s=!0)},o(o){Ye(e.$$.fragment,o),Ye(n.$$.fragment,o),s=!1},d(o){o&&(fe(t),fe(r)),Mt(e,o),Mt(n,o)}}}function Dft(i){let e;return{c(){e=In("linear combination")},l(t){e=Nn(t,"linear combination")},m(t,n){Ze(t,e,n)},d(t){t&&fe(e)}}}function zft(i){let e;return{c(){e=In("transforming the original basis vectors")},l(t){e=Nn(t,"transforming the original basis vectors")},m(t,n){Ze(t,e,n)},d(t){t&&fe(e)}}}function Ift(i){let e,t,n,r;return t=new l2({props:{$$slots:{default:[zft]},$$scope:{ctx:i}}}),{c(){e=In(`In other words, a matrix can be viewed as a way of packaging information
			about our new basis vectors. This is the core insight: a matrix transforms
			a vector by `),xt(t.$$.fragment),n=In(`; creating an
			entirely new coordinate system.`)},l(s){e=Nn(s,`In other words, a matrix can be viewed as a way of packaging information
			about our new basis vectors. This is the core insight: a matrix transforms
			a vector by `),wt(t.$$.fragment,s),n=Nn(s,`; creating an
			entirely new coordinate system.`)},m(s,o){Ze(s,e,o),St(t,s,o),Ze(s,n,o),r=!0},p(s,o){const a={};o&1&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){r||(Ue(t.$$.fragment,s),r=!0)},o(s){Ye(t.$$.fragment,s),r=!1},d(s){s&&(fe(e),fe(n)),Mt(t,s)}}}function Nft(i){let e;return{c(){e=In(`Again, the transformed vector is a linear combination of the new basis
			vectors, which are scaled by the coordinates of the original vector.`)},l(t){e=Nn(t,`Again, the transformed vector is a linear combination of the new basis
			vectors, which are scaled by the coordinates of the original vector.`)},m(t,n){Ze(t,e,n)},d(t){t&&fe(e)}}}function Uft(i){let e;return{c(){e=In(`In order to make the space less visually cluttered, we can represent each
			vector as a point in space instead. We'll transform the grid lines along
			too, overlaying on top a copy of the original.`)},l(t){e=Nn(t,`In order to make the space less visually cluttered, we can represent each
			vector as a point in space instead. We'll transform the grid lines along
			too, overlaying on top a copy of the original.`)},m(t,n){Ze(t,e,n)},d(t){t&&fe(e)}}}function Fft(i){let e;return{c(){e=In(`The transformation appears to rotate and stretch the space, accordingly
			with where the new basis vectors land.`)},l(t){e=Nn(t,`The transformation appears to rotate and stretch the space, accordingly
			with where the new basis vectors land.`)},m(t,n){Ze(t,e,n)},d(t){t&&fe(e)}}}function Bft(i){let e;return{c(){e=In("linear transformation")},l(t){e=Nn(t,"linear transformation")},m(t,n){Ze(t,e,n)},d(t){t&&fe(e)}}}function Vft(i){let e,t,n,r;return t=new R6({props:{$$slots:{default:[Bft]},$$scope:{ctx:i}}}),{c(){e=In(`As we'll see when you have a chance to tinker around with different basis
			vectors, a matrix performs a particular kind of transformation, called a `),xt(t.$$.fragment),n=In(". Visually, you'll notice that:")},l(s){e=Nn(s,`As we'll see when you have a chance to tinker around with different basis
			vectors, a matrix performs a particular kind of transformation, called a `),wt(t.$$.fragment,s),n=Nn(s,". Visually, you'll notice that:")},m(s,o){Ze(s,e,o),St(t,s,o),Ze(s,n,o),r=!0},p(s,o){const a={};o&1&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){r||(Ue(t.$$.fragment,s),r=!0)},o(s){Ye(t.$$.fragment,s),r=!1},d(s){s&&(fe(e),fe(n)),Mt(t,s)}}}function Hft(i){let e,t="<li>Any vector can be expressed as the addition of scaled basis vectors; or a linear combination of basis vectors.</li> <li>A matrix can be viewed as a way to package information about a linear transformation. The columns of a matrix represent where the new basis vectors land after the transformation.</li> <li>Matrix-vector multiplication is a way to compute where a given vector lands after the transformation defined by a matrix.</li>";return{c(){e=bt("ul"),e.innerHTML=t},l(n){e=yt(n,"UL",{"data-svelte-h":!0}),Ka(e)!=="svelte-1hl9kn8"&&(e.innerHTML=t)},m(n,r){Ze(n,e,r)},p:mr,d(n){n&&fe(e)}}}function qft(i){let e;return{c(){e=In(`With our understanding so far, try to tinker about and figure out what
			kinds of transformations are possible with matrices! What basis vectors
			should you choose in order to scale space uniformly in all directions? How about a reflection, rotation or a shear?`)},l(t){e=Nn(t,`With our understanding so far, try to tinker about and figure out what
			kinds of transformations are possible with matrices! What basis vectors
			should you choose in order to scale space uniformly in all directions? How about a reflection, rotation or a shear?`)},m(t,n){Ze(t,e,n)},d(t){t&&fe(e)}}}function Gft(i){let e,t="<li>Toggle the numbers in the matrix...</li> <li>Drag the scrubber...</li> <li>Pan and zoom in / out the canvas</li>";return{c(){e=bt("ul"),e.innerHTML=t},l(n){e=yt(n,"UL",{"data-svelte-h":!0}),Ka(e)!=="svelte-a4s57n"&&(e.innerHTML=t)},m(n,r){Ze(n,e,r)},p:mr,d(n){n&&fe(e)}}}function Wft(i){let e,t,n,r,s,o,a,l,c,u,h,d,f,g,v,y,_,S,w,C,E,k,O,R=`Did you notice anything similar with the expression for matrix-vector
			multiplication? A vector multiplied with a matrix can also be expressed as
			a linear combination; this time with the standard basis vectors replaced
			by the columns of the matrix.`,A,D,I,q,j,Y,F,re,ee,J,Ee=`In that vein, a matrix transformation appears to warp and transform space
			itself. In order to get a more visceral feel of this, let's visualize what
			happens to not just a single vector, but a sample of vectors in space,
			each multiplied by the same matrix.`,le,ie,be,Je,Xe,Be,vt,at,Le="<li>All lines in the original space remain as lines, without getting curved, and</li> <li>Origin remains fixed in place.</li>",Ot,ft,rt="As an example, all grid lines stay parallel and evenly spaced after the transformation.",tt,se,ke,ae,xe,Ie,dt,nt,me,ue,Pe;return n=new l2({props:{$$slots:{default:[Eft]},$$scope:{ctx:i}}}),o=new Cm({}),l=new ac({props:{id:"st-1",$$slots:{default:[Aft]},$$scope:{ctx:i}}}),u=new ac({props:{id:"st-2",$$slots:{default:[Rft]},$$scope:{ctx:i}}}),d=new ac({props:{id:"st-3",$$slots:{default:[Lft]},$$scope:{ctx:i}}}),y=new R6({props:{$$slots:{default:[Dft]},$$scope:{ctx:i}}}),w=new Cm({}),E=new nl({props:{expr:MH,display:!0}}),D=new nl({props:{expr:Xdt,display:!0,color:!0}}),q=new ac({props:{id:"st-4",$$slots:{default:[Ift]},$$scope:{ctx:i}}}),Y=new ac({props:{id:"st-5",$$slots:{default:[Nft]},$$scope:{ctx:i}}}),re=new Cm({}),ie=new ac({props:{id:"st-6",$$slots:{default:[Uft]},$$scope:{ctx:i}}}),Je=new ac({props:{id:"st-7",$$slots:{default:[Fft]},$$scope:{ctx:i}}}),Be=new ac({props:{$$slots:{default:[Vft]},$$scope:{ctx:i}}}),se=new Cm({}),ae=new lft({props:{$$slots:{default:[Hft]},$$scope:{ctx:i}}}),Ie=new Cm({}),nt=new ac({props:{id:"st-8",$$slots:{default:[qft]},$$scope:{ctx:i}}}),ue=new Sft({props:{$$slots:{default:[Gft]},$$scope:{ctx:i}}}),{c(){e=bt("p"),t=In("A vector multiplied by a matrix returns a new vector  it "),xt(n.$$.fragment),r=In(" a vector into a new vector. Let's visualize this transformation with an example."),s=Nt(),xt(o.$$.fragment),a=Nt(),xt(l.$$.fragment),c=Nt(),xt(u.$$.fragment),h=Nt(),xt(d.$$.fragment),f=Nt(),g=bt("p"),v=In("This scaling and addition of vectors is called a "),xt(y.$$.fragment),_=In(`, and every vector can be expressed as a linear combination of basis
			vectors.`),S=Nt(),xt(w.$$.fragment),C=Nt(),xt(E.$$.fragment),k=Nt(),O=bt("p"),O.textContent=R,A=Nt(),xt(D.$$.fragment),I=Nt(),xt(q.$$.fragment),j=Nt(),xt(Y.$$.fragment),F=Nt(),xt(re.$$.fragment),ee=Nt(),J=bt("p"),J.textContent=Ee,le=Nt(),xt(ie.$$.fragment),be=Nt(),xt(Je.$$.fragment),Xe=Nt(),xt(Be.$$.fragment),vt=Nt(),at=bt("ul"),at.innerHTML=Le,Ot=Nt(),ft=bt("p"),ft.textContent=rt,tt=Nt(),xt(se.$$.fragment),ke=Nt(),xt(ae.$$.fragment),xe=Nt(),xt(Ie.$$.fragment),dt=Nt(),xt(nt.$$.fragment),me=Nt(),xt(ue.$$.fragment)},l(U){e=yt(U,"P",{});var V=Jt(e);t=Nn(V,"A vector multiplied by a matrix returns a new vector  it "),wt(n.$$.fragment,V),r=Nn(V," a vector into a new vector. Let's visualize this transformation with an example."),V.forEach(fe),s=Ut(U),wt(o.$$.fragment,U),a=Ut(U),wt(l.$$.fragment,U),c=Ut(U),wt(u.$$.fragment,U),h=Ut(U),wt(d.$$.fragment,U),f=Ut(U),g=yt(U,"P",{});var Ve=Jt(g);v=Nn(Ve,"This scaling and addition of vectors is called a "),wt(y.$$.fragment,Ve),_=Nn(Ve,`, and every vector can be expressed as a linear combination of basis
			vectors.`),Ve.forEach(fe),S=Ut(U),wt(w.$$.fragment,U),C=Ut(U),wt(E.$$.fragment,U),k=Ut(U),O=yt(U,"P",{"data-svelte-h":!0}),Ka(O)!=="svelte-w4uap8"&&(O.textContent=R),A=Ut(U),wt(D.$$.fragment,U),I=Ut(U),wt(q.$$.fragment,U),j=Ut(U),wt(Y.$$.fragment,U),F=Ut(U),wt(re.$$.fragment,U),ee=Ut(U),J=yt(U,"P",{"data-svelte-h":!0}),Ka(J)!=="svelte-1fecpql"&&(J.textContent=Ee),le=Ut(U),wt(ie.$$.fragment,U),be=Ut(U),wt(Je.$$.fragment,U),Xe=Ut(U),wt(Be.$$.fragment,U),vt=Ut(U),at=yt(U,"UL",{"data-svelte-h":!0}),Ka(at)!=="svelte-whywvw"&&(at.innerHTML=Le),Ot=Ut(U),ft=yt(U,"P",{"data-svelte-h":!0}),Ka(ft)!=="svelte-1qay1n4"&&(ft.textContent=rt),tt=Ut(U),wt(se.$$.fragment,U),ke=Ut(U),wt(ae.$$.fragment,U),xe=Ut(U),wt(Ie.$$.fragment,U),dt=Ut(U),wt(nt.$$.fragment,U),me=Ut(U),wt(ue.$$.fragment,U)},m(U,V){Ze(U,e,V),Ct(e,t),St(n,e,null),Ct(e,r),Ze(U,s,V),St(o,U,V),Ze(U,a,V),St(l,U,V),Ze(U,c,V),St(u,U,V),Ze(U,h,V),St(d,U,V),Ze(U,f,V),Ze(U,g,V),Ct(g,v),St(y,g,null),Ct(g,_),Ze(U,S,V),St(w,U,V),Ze(U,C,V),St(E,U,V),Ze(U,k,V),Ze(U,O,V),Ze(U,A,V),St(D,U,V),Ze(U,I,V),St(q,U,V),Ze(U,j,V),St(Y,U,V),Ze(U,F,V),St(re,U,V),Ze(U,ee,V),Ze(U,J,V),Ze(U,le,V),St(ie,U,V),Ze(U,be,V),St(Je,U,V),Ze(U,Xe,V),St(Be,U,V),Ze(U,vt,V),Ze(U,at,V),Ze(U,Ot,V),Ze(U,ft,V),Ze(U,tt,V),St(se,U,V),Ze(U,ke,V),St(ae,U,V),Ze(U,xe,V),St(Ie,U,V),Ze(U,dt,V),St(nt,U,V),Ze(U,me,V),St(ue,U,V),Pe=!0},p(U,V){const Ve={};V&1&&(Ve.$$scope={dirty:V,ctx:U}),n.$set(Ve);const st={};V&1&&(st.$$scope={dirty:V,ctx:U}),l.$set(st);const ve={};V&1&&(ve.$$scope={dirty:V,ctx:U}),u.$set(ve);const ut={};V&1&&(ut.$$scope={dirty:V,ctx:U}),d.$set(ut);const Zt={};V&1&&(Zt.$$scope={dirty:V,ctx:U}),y.$set(Zt);const we={};V&1&&(we.$$scope={dirty:V,ctx:U}),q.$set(we);const Se={};V&1&&(Se.$$scope={dirty:V,ctx:U}),Y.$set(Se);const Tt={};V&1&&(Tt.$$scope={dirty:V,ctx:U}),ie.$set(Tt);const zt={};V&1&&(zt.$$scope={dirty:V,ctx:U}),Je.$set(zt);const Vt={};V&1&&(Vt.$$scope={dirty:V,ctx:U}),Be.$set(Vt);const Gt={};V&1&&(Gt.$$scope={dirty:V,ctx:U}),ae.$set(Gt);const Dt={};V&1&&(Dt.$$scope={dirty:V,ctx:U}),nt.$set(Dt);const Yt={};V&1&&(Yt.$$scope={dirty:V,ctx:U}),ue.$set(Yt)},i(U){Pe||(Ue(n.$$.fragment,U),Ue(o.$$.fragment,U),Ue(l.$$.fragment,U),Ue(u.$$.fragment,U),Ue(d.$$.fragment,U),Ue(y.$$.fragment,U),Ue(w.$$.fragment,U),Ue(E.$$.fragment,U),Ue(D.$$.fragment,U),Ue(q.$$.fragment,U),Ue(Y.$$.fragment,U),Ue(re.$$.fragment,U),Ue(ie.$$.fragment,U),Ue(Je.$$.fragment,U),Ue(Be.$$.fragment,U),Ue(se.$$.fragment,U),Ue(ae.$$.fragment,U),Ue(Ie.$$.fragment,U),Ue(nt.$$.fragment,U),Ue(ue.$$.fragment,U),Pe=!0)},o(U){Ye(n.$$.fragment,U),Ye(o.$$.fragment,U),Ye(l.$$.fragment,U),Ye(u.$$.fragment,U),Ye(d.$$.fragment,U),Ye(y.$$.fragment,U),Ye(w.$$.fragment,U),Ye(E.$$.fragment,U),Ye(D.$$.fragment,U),Ye(q.$$.fragment,U),Ye(Y.$$.fragment,U),Ye(re.$$.fragment,U),Ye(ie.$$.fragment,U),Ye(Je.$$.fragment,U),Ye(Be.$$.fragment,U),Ye(se.$$.fragment,U),Ye(ae.$$.fragment,U),Ye(Ie.$$.fragment,U),Ye(nt.$$.fragment,U),Ye(ue.$$.fragment,U),Pe=!1},d(U){U&&(fe(e),fe(s),fe(a),fe(c),fe(h),fe(f),fe(g),fe(S),fe(C),fe(k),fe(O),fe(A),fe(I),fe(j),fe(F),fe(ee),fe(J),fe(le),fe(be),fe(Xe),fe(vt),fe(at),fe(Ot),fe(ft),fe(tt),fe(ke),fe(xe),fe(dt),fe(me)),Mt(n),Mt(o,U),Mt(l,U),Mt(u,U),Mt(d,U),Mt(y),Mt(w,U),Mt(E,U),Mt(D,U),Mt(q,U),Mt(Y,U),Mt(re,U),Mt(ie,U),Mt(Je,U),Mt(Be,U),Mt(se,U),Mt(ae,U),Mt(Ie,U),Mt(nt,U),Mt(ue,U)}}}function jft(i){let e,t,n;return e=new nl({props:{expr:"z"}}),{c(){xt(e.$$.fragment),t=In("-direction")},l(r){wt(e.$$.fragment,r),t=Nn(r,"-direction")},m(r,s){St(e,r,s),Ze(r,t,s),n=!0},p:mr,i(r){n||(Ue(e.$$.fragment,r),n=!0)},o(r){Ye(e.$$.fragment,r),n=!1},d(r){r&&fe(t),Mt(e,r)}}}function $ft(i){let e,t,n,r,s,o,a,l,c,u,h;return t=new a2({props:{color:"a",$$slots:{default:[jft]},$$scope:{ctx:i}}}),r=new nl({props:{expr:"3"}}),o=new nl({props:{expr:"xyz"}}),c=new nl({props:{expr:"3\\times3"}}),{c(){e=In(`To make up three dimensions, we have yet another standard basis vector 
			the unit vector in the `),xt(t.$$.fragment),n=In(". This also means we're now fiddling around with vectors of length "),xt(r.$$.fragment),s=In(", representing the coordinates "),xt(o.$$.fragment),a=In(`, and matrices of size
			`),l=bt("nobr"),xt(c.$$.fragment),u=In(".")},l(d){e=Nn(d,`To make up three dimensions, we have yet another standard basis vector 
			the unit vector in the `),wt(t.$$.fragment,d),n=Nn(d,". This also means we're now fiddling around with vectors of length "),wt(r.$$.fragment,d),s=Nn(d,", representing the coordinates "),wt(o.$$.fragment,d),a=Nn(d,`, and matrices of size
			`),l=yt(d,"NOBR",{});var f=Jt(l);wt(c.$$.fragment,f),f.forEach(fe),u=Nn(d,".")},m(d,f){Ze(d,e,f),St(t,d,f),Ze(d,n,f),St(r,d,f),Ze(d,s,f),St(o,d,f),Ze(d,a,f),Ze(d,l,f),St(c,l,null),Ze(d,u,f),h=!0},p(d,f){const g={};f&1&&(g.$$scope={dirty:f,ctx:d}),t.$set(g)},i(d){h||(Ue(t.$$.fragment,d),Ue(r.$$.fragment,d),Ue(o.$$.fragment,d),Ue(c.$$.fragment,d),h=!0)},o(d){Ye(t.$$.fragment,d),Ye(r.$$.fragment,d),Ye(o.$$.fragment,d),Ye(c.$$.fragment,d),h=!1},d(d){d&&(fe(e),fe(n),fe(s),fe(a),fe(l),fe(u)),Mt(t,d),Mt(r,d),Mt(o,d),Mt(c)}}}function Xft(i){let e;return{c(){e=In(`The concept of matrix transformations in 3D is exactly the same. The three
			basis vectors are transformed to their new locations, warping space along
			with them. These locations are completely determined by the columns of the
			matrix.`)},l(t){e=Nn(t,`The concept of matrix transformations in 3D is exactly the same. The three
			basis vectors are transformed to their new locations, warping space along
			with them. These locations are completely determined by the columns of the
			matrix.`)},m(t,n){Ze(t,e,n)},d(t){t&&fe(e)}}}function Yft(i){let e;return{c(){e=In(`Originally, any vector is composed of a linear combination of these three
			standard basis vectors. To figure out the where the vector lands after the
			transformation, it is a linear combination of the transformed basis
			vectors, each scaled by the respective coordinates in the starting vector.`)},l(t){e=Nn(t,`Originally, any vector is composed of a linear combination of these three
			standard basis vectors. To figure out the where the vector lands after the
			transformation, it is a linear combination of the transformed basis
			vectors, each scaled by the respective coordinates in the starting vector.`)},m(t,n){Ze(t,e,n)},d(t){t&&fe(e)}}}function Kft(i){let e,t="Transformations in Higher Dimensions",n,r,s,o,a,l,c,u,h,d,f,g,v,y,_,S=`Lorem, ipsum dolor sit amet consectetur adipisicing elit. Magni porro quia
			adipisci eaque commodi placeat totam, nihil officia, debitis quo
			necessitatibus quos, exercitationem iusto consectetur optio numquam
			possimus provident laborum!`,w,C,E=`Lorem, ipsum dolor sit amet consectetur adipisicing elit. Magni porro quia
			adipisci eaque commodi placeat totam, nihil officia, debitis quo
			necessitatibus quos, exercitationem iusto consectetur optio numquam
			possimus provident laborum!`,k,O,R=`Lorem, ipsum dolor sit amet consectetur adipisicing elit. Magni porro quia
			adipisci eaque commodi placeat totam, nihil officia, debitis quo
			necessitatibus quos, exercitationem iusto consectetur optio numquam
			possimus provident laborum!`,A;return o=new nl({props:{expr:"xy"}}),c=new ac({props:{id:"st-9",$$slots:{default:[$ft]},$$scope:{ctx:i}}}),h=new ac({props:{id:"st-10",$$slots:{default:[Xft]},$$scope:{ctx:i}}}),f=new nl({props:{expr:tft,display:!0,color:!0}}),v=new ac({props:{id:"st-11",$$slots:{default:[Yft]},$$scope:{ctx:i}}}),{c(){e=bt("h2"),e.textContent=t,n=Nt(),r=bt("p"),s=In(`So far we've only been talking about matrix transformations in
			two-dimensions on the `),xt(o.$$.fragment),a=In(`-plane. Do the same intuitions
			carry over to higher dimensions?`),l=Nt(),xt(c.$$.fragment),u=Nt(),xt(h.$$.fragment),d=Nt(),xt(f.$$.fragment),g=Nt(),xt(v.$$.fragment),y=Nt(),_=bt("p"),_.textContent=S,w=Nt(),C=bt("p"),C.textContent=E,k=Nt(),O=bt("p"),O.textContent=R,this.h()},l(D){e=yt(D,"H2",{id:!0,"data-svelte-h":!0}),Ka(e)!=="svelte-162zfr3"&&(e.textContent=t),n=Ut(D),r=yt(D,"P",{});var I=Jt(r);s=Nn(I,`So far we've only been talking about matrix transformations in
			two-dimensions on the `),wt(o.$$.fragment,I),a=Nn(I,`-plane. Do the same intuitions
			carry over to higher dimensions?`),I.forEach(fe),l=Ut(D),wt(c.$$.fragment,D),u=Ut(D),wt(h.$$.fragment,D),d=Ut(D),wt(f.$$.fragment,D),g=Ut(D),wt(v.$$.fragment,D),y=Ut(D),_=yt(D,"P",{"data-svelte-h":!0}),Ka(_)!=="svelte-osbnt3"&&(_.textContent=S),w=Ut(D),C=yt(D,"P",{"data-svelte-h":!0}),Ka(C)!=="svelte-osbnt3"&&(C.textContent=E),k=Ut(D),O=yt(D,"P",{"data-svelte-h":!0}),Ka(O)!=="svelte-osbnt3"&&(O.textContent=R),this.h()},h(){$e(e,"id","test")},m(D,I){Ze(D,e,I),Ze(D,n,I),Ze(D,r,I),Ct(r,s),St(o,r,null),Ct(r,a),Ze(D,l,I),St(c,D,I),Ze(D,u,I),St(h,D,I),Ze(D,d,I),St(f,D,I),Ze(D,g,I),St(v,D,I),Ze(D,y,I),Ze(D,_,I),Ze(D,w,I),Ze(D,C,I),Ze(D,k,I),Ze(D,O,I),A=!0},p(D,I){const q={};I&1&&(q.$$scope={dirty:I,ctx:D}),c.$set(q);const j={};I&1&&(j.$$scope={dirty:I,ctx:D}),h.$set(j);const Y={};I&1&&(Y.$$scope={dirty:I,ctx:D}),v.$set(Y)},i(D){A||(Ue(o.$$.fragment,D),Ue(c.$$.fragment,D),Ue(h.$$.fragment,D),Ue(f.$$.fragment,D),Ue(v.$$.fragment,D),A=!0)},o(D){Ye(o.$$.fragment,D),Ye(c.$$.fragment,D),Ye(h.$$.fragment,D),Ye(f.$$.fragment,D),Ye(v.$$.fragment,D),A=!1},d(D){D&&(fe(e),fe(n),fe(r),fe(l),fe(u),fe(d),fe(g),fe(y),fe(_),fe(w),fe(C),fe(k),fe(O)),Mt(o),Mt(c,D),Mt(h,D),Mt(f,D),Mt(v,D)}}}function Zft(i){let e,t,n,r,s,o,a;return t=new mft({}),r=new _D({props:{id:"section-1",$$slots:{default:[Wft]},$$scope:{ctx:i}}}),o=new _D({props:{id:"section-2",$$slots:{default:[Kft]},$$scope:{ctx:i}}}),{c(){e=bt("div"),xt(t.$$.fragment),n=Nt(),xt(r.$$.fragment),s=Nt(),xt(o.$$.fragment),this.h()},l(l){e=yt(l,"DIV",{id:!0,class:!0});var c=Jt(e);wt(t.$$.fragment,c),n=Ut(c),wt(r.$$.fragment,c),s=Ut(c),wt(o.$$.fragment,c),c.forEach(fe),this.h()},h(){$e(e,"id","article"),$e(e,"class","relative max-w-prose bg-gradient-to-l from-base-100 via-base-300 via-90% py-12")},m(l,c){Ze(l,e,c),St(t,e,null),Ct(e,n),St(r,e,null),Ct(e,s),St(o,e,null),a=!0},p(l,[c]){const u={};c&1&&(u.$$scope={dirty:c,ctx:l}),r.$set(u);const h={};c&1&&(h.$$scope={dirty:c,ctx:l}),o.$set(h)},i(l){a||(Ue(t.$$.fragment,l),Ue(r.$$.fragment,l),Ue(o.$$.fragment,l),a=!0)},o(l){Ye(t.$$.fragment,l),Ye(r.$$.fragment,l),Ye(o.$$.fragment,l),a=!1},d(l){l&&fe(e),Mt(t),Mt(r),Mt(o)}}}class Jft extends oi{constructor(e){super(),ai(this,e,null,Zft,Gn,{})}}function bD(i){let e,t,n,r,s;t=new bH({props:{size:Fm}});let o=[{class:"item"},i[2]],a={};for(let l=0;l<o.length;l+=1)a=Jn(a,o[l]);return{c(){e=bt("button"),xt(t.$$.fragment),this.h()},l(l){e=yt(l,"BUTTON",{class:!0});var c=Jt(e);wt(t.$$.fragment,c),c.forEach(fe),this.h()},h(){Eo(e,a),Hn(e,"svelte-qc6cfi",!0)},m(l,c){Ze(l,e,c),St(t,e,null),e.autofocus&&e.focus(),n=!0,r||(s=Pl(i[2].action(e)),r=!0)},p(l,c){Eo(e,a=_s(o,[{class:"item"},c&4&&l[2]])),Hn(e,"svelte-qc6cfi",!0)},i(l){n||(Ue(t.$$.fragment,l),n=!0)},o(l){Ye(t.$$.fragment,l),n=!1},d(l){l&&fe(e),Mt(t),r=!1,s()}}}function yD(i){let e,t,n,r,s;t=new _H({props:{size:Fm}});let o=[{class:"item"},i[0]],a={};for(let l=0;l<o.length;l+=1)a=Jn(a,o[l]);return{c(){e=bt("button"),xt(t.$$.fragment),this.h()},l(l){e=yt(l,"BUTTON",{class:!0});var c=Jt(e);wt(t.$$.fragment,c),c.forEach(fe),this.h()},h(){Eo(e,a),Hn(e,"svelte-qc6cfi",!0)},m(l,c){Ze(l,e,c),St(t,e,null),e.autofocus&&e.focus(),n=!0,r||(s=Pl(i[0].action(e)),r=!0)},p(l,c){Eo(e,a=_s(o,[{class:"item"},c&1&&l[0]])),Hn(e,"svelte-qc6cfi",!0)},i(l){n||(Ue(t.$$.fragment,l),n=!0)},o(l){Ye(t.$$.fragment,l),n=!1},d(l){l&&fe(e),Mt(t),r=!1,s()}}}function Qft(i){let e,t,n,r,s,o,a,l,c,u,h,d,f,g,v,y,_,S,w,C;n=new mD({props:{size:Fm}});let E=[{class:"item"},{"aria-label":"Toggle grid"},i[5]],k={};for(let ie=0;ie<E.length;ie+=1)k=Jn(k,E[ie]);o=new mD({props:{class:"-skew-x-12",size:Fm}});let O=[{class:"item"},{"aria-label":"Toggle transformed grid"},i[6]],R={};for(let ie=0;ie<O.length;ie+=1)R=Jn(R,O[ie]);let A=[{class:"separator"},i[7]],D={};for(let ie=0;ie<A.length;ie+=1)D=Jn(D,A[ie]);d=new bH({props:{size:Fm}});let I=[{class:"item"},i[3]],q={};for(let ie=0;ie<I.length;ie+=1)q=Jn(q,I[ie]);let j=i[9]&&bD(i);y=new _H({props:{size:Fm}});let Y=[{class:"item"},i[1]],F={};for(let ie=0;ie<Y.length;ie+=1)F=Jn(F,Y[ie]);let re=i[9]&&yD(i),ee=[{class:"flex items-cener gap-1"},i[8]],J={};for(let ie=0;ie<ee.length;ie+=1)J=Jn(J,ee[ie]);let Ee=[i[4],{class:"flex min-w-max items-center gap-4 rounded-md bg-base-200 px-3 py-3 shadow-sm"}],le={};for(let ie=0;ie<Ee.length;ie+=1)le=Jn(le,Ee[ie]);return{c(){e=bt("div"),t=bt("button"),xt(n.$$.fragment),r=Nt(),s=bt("button"),xt(o.$$.fragment),a=Nt(),l=bt("div"),c=Nt(),u=bt("div"),h=bt("button"),xt(d.$$.fragment),f=Nt(),j&&j.c(),g=Nt(),v=bt("button"),xt(y.$$.fragment),_=Nt(),re&&re.c(),this.h()},l(ie){e=yt(ie,"DIV",{class:!0});var be=Jt(e);t=yt(be,"BUTTON",{class:!0,"aria-label":!0});var Je=Jt(t);wt(n.$$.fragment,Je),Je.forEach(fe),r=Ut(be),s=yt(be,"BUTTON",{class:!0,"aria-label":!0});var Xe=Jt(s);wt(o.$$.fragment,Xe),Xe.forEach(fe),a=Ut(be),l=yt(be,"DIV",{class:!0}),Jt(l).forEach(fe),c=Ut(be),u=yt(be,"DIV",{class:!0});var Be=Jt(u);h=yt(Be,"BUTTON",{class:!0});var vt=Jt(h);wt(d.$$.fragment,vt),vt.forEach(fe),f=Ut(Be),j&&j.l(Be),g=Ut(Be),v=yt(Be,"BUTTON",{class:!0});var at=Jt(v);wt(y.$$.fragment,at),at.forEach(fe),_=Ut(Be),re&&re.l(Be),Be.forEach(fe),be.forEach(fe),this.h()},h(){Eo(t,k),Hn(t,"svelte-qc6cfi",!0),Eo(s,R),Hn(s,"svelte-qc6cfi",!0),Eo(l,D),Hn(l,"svelte-qc6cfi",!0),Eo(h,q),Hn(h,"svelte-qc6cfi",!0),Eo(v,F),Hn(v,"svelte-qc6cfi",!0),Eo(u,J),Hn(u,"svelte-qc6cfi",!0),Eo(e,le),Hn(e,"svelte-qc6cfi",!0)},m(ie,be){Ze(ie,e,be),Ct(e,t),St(n,t,null),t.autofocus&&t.focus(),Ct(e,r),Ct(e,s),St(o,s,null),s.autofocus&&s.focus(),Ct(e,a),Ct(e,l),Ct(e,c),Ct(e,u),Ct(u,h),St(d,h,null),h.autofocus&&h.focus(),Ct(u,f),j&&j.m(u,null),Ct(u,g),Ct(u,v),St(y,v,null),v.autofocus&&v.focus(),Ct(u,_),re&&re.m(u,null),S=!0,w||(C=[Pl(i[5].action(t)),Pl(i[6].action(s)),Pl(i[7].action(l)),Pl(i[3].action(h)),Pl(i[1].action(v)),Pl(i[8].action(u)),Pl(i[4].action(e))],w=!0)},p(ie,[be]){Eo(t,k=_s(E,[{class:"item"},{"aria-label":"Toggle grid"},be&32&&ie[5]])),Hn(t,"svelte-qc6cfi",!0),Eo(s,R=_s(O,[{class:"item"},{"aria-label":"Toggle transformed grid"},be&64&&ie[6]])),Hn(s,"svelte-qc6cfi",!0),Eo(l,D=_s(A,[{class:"separator"},be&128&&ie[7]])),Hn(l,"svelte-qc6cfi",!0),Eo(h,q=_s(I,[{class:"item"},be&8&&ie[3]])),Hn(h,"svelte-qc6cfi",!0),ie[9]?j?(j.p(ie,be),be&512&&Ue(j,1)):(j=bD(ie),j.c(),Ue(j,1),j.m(u,g)):j&&(rl(),Ye(j,1,1,()=>{j=null}),il()),Eo(v,F=_s(Y,[{class:"item"},be&2&&ie[1]])),Hn(v,"svelte-qc6cfi",!0),ie[9]?re?(re.p(ie,be),be&512&&Ue(re,1)):(re=yD(ie),re.c(),Ue(re,1),re.m(u,null)):re&&(rl(),Ye(re,1,1,()=>{re=null}),il()),Eo(u,J=_s(ee,[{class:"flex items-cener gap-1"},be&256&&ie[8]])),Hn(u,"svelte-qc6cfi",!0),Eo(e,le=_s(Ee,[be&16&&ie[4],{class:"flex min-w-max items-center gap-4 rounded-md bg-base-200 px-3 py-3 shadow-sm"}])),Hn(e,"svelte-qc6cfi",!0)},i(ie){S||(Ue(n.$$.fragment,ie),Ue(o.$$.fragment,ie),Ue(d.$$.fragment,ie),Ue(j),Ue(y.$$.fragment,ie),Ue(re),S=!0)},o(ie){Ye(n.$$.fragment,ie),Ye(o.$$.fragment,ie),Ye(d.$$.fragment,ie),Ye(j),Ye(y.$$.fragment,ie),Ye(re),S=!1},d(ie){ie&&fe(e),Mt(n),Mt(o),Mt(d),j&&j.d(),Mt(y),re&&re.d(),w=!1,p_(C)}}}const Fm=30;function ept(i,e,t){let n,r,s,o,a,l,c,u,h,d,f;Mn(i,MD,O=>t(9,f=O));const{elements:{root:g,button:v,link:y,separator:_},builders:{createToolbarGroup:S}}=Ldt();Mn(i,g,O=>t(4,l=O)),Mn(i,_,O=>t(7,h=O));const{elements:{group:w,item:C}}=S({value:s1});Mn(i,w,O=>t(8,d=O)),Mn(i,C,O=>t(16,a=O));const{elements:{root:E}}=OT({pressed:SD});Mn(i,E,O=>t(5,c=O));const{elements:{root:k}}=OT({pressed:wD});return Mn(i,k,O=>t(6,u=O)),i.$$.update=()=>{i.$$.dirty&65536&&t(3,n=a("points")),i.$$.dirty&65536&&t(2,r=a("3d points")),i.$$.dirty&65536&&t(1,s=a("planes")),i.$$.dirty&65536&&t(0,o=a("3d planes"))},[o,s,r,n,l,c,u,h,d,f,g,_,w,C,E,k,a]}class tpt extends oi{constructor(e){super(),ai(this,e,ept,Qft,Gn,{})}}function npt(i){let e,t,n,r,s,o,a,l,c,u,h,d,f,g,v,y,_,S,w,C;return e=new _ft({}),s=new Vht({}),a=new Jft({}),u=new tpt({}),d=new Cdt({}),v=new Zht({}),w=new G$({}),{c(){xt(e.$$.fragment),t=Nt(),n=bt("article"),r=bt("div"),xt(s.$$.fragment),o=Nt(),xt(a.$$.fragment),l=Nt(),c=bt("div"),xt(u.$$.fragment),h=Nt(),xt(d.$$.fragment),f=Nt(),g=bt("div"),xt(v.$$.fragment),y=Nt(),_=bt("div"),S=Nt(),xt(w.$$.fragment),this.h()},l(E){wt(e.$$.fragment,E),t=Ut(E),n=yt(E,"ARTICLE",{class:!0});var k=Jt(n);r=yt(k,"DIV",{id:!0,class:!0});var O=Jt(r);wt(s.$$.fragment,O),O.forEach(fe),o=Ut(k),wt(a.$$.fragment,k),k.forEach(fe),l=Ut(E),c=yt(E,"DIV",{id:!0,class:!0});var R=Jt(c);wt(u.$$.fragment,R),h=Ut(R),wt(d.$$.fragment,R),f=Ut(R),g=yt(R,"DIV",{});var A=Jt(g);wt(v.$$.fragment,A),A.forEach(fe),R.forEach(fe),y=Ut(E),_=yt(E,"DIV",{id:!0,class:!0}),Jt(_).forEach(fe),S=Ut(E),wt(w.$$.fragment,E),this.h()},h(){$e(r,"id","canvas-wrapper"),$e(r,"class","sticky top-0 flex-1 min-w-0 h-screen bg-base-300 pointer-events-none"),$e(n,"class","relative flex bg-base-300 w-[calc(100%+65ch)]"),$e(c,"id","inputs"),$e(c,"class","fixed left-0 top-0 flex flex-col items-center px-8 py-8 gap-7 invisible"),$e(_,"id","st-progress"),$e(_,"class","fixed left-0 top-0 bottom-0 w-2 bg-neutral scale-y-0 rounded-full")},m(E,k){St(e,E,k),Ze(E,t,k),Ze(E,n,k),Ct(n,r),St(s,r,null),Ct(n,o),St(a,n,null),Ze(E,l,k),Ze(E,c,k),St(u,c,null),Ct(c,h),St(d,c,null),Ct(c,f),Ct(c,g),St(v,g,null),Ze(E,y,k),Ze(E,_,k),Ze(E,S,k),St(w,E,k),C=!0},p:mr,i(E){C||(Ue(e.$$.fragment,E),Ue(s.$$.fragment,E),Ue(a.$$.fragment,E),Ue(u.$$.fragment,E),Ue(d.$$.fragment,E),Ue(v.$$.fragment,E),Ue(w.$$.fragment,E),C=!0)},o(E){Ye(e.$$.fragment,E),Ye(s.$$.fragment,E),Ye(a.$$.fragment,E),Ye(u.$$.fragment,E),Ye(d.$$.fragment,E),Ye(v.$$.fragment,E),Ye(w.$$.fragment,E),C=!1},d(E){E&&(fe(t),fe(n),fe(l),fe(c),fe(y),fe(_),fe(S)),Mt(e,E),Mt(s),Mt(a),Mt(u),Mt(d),Mt(v),Mt(w,E)}}}class ipt extends oi{constructor(e){super(),ai(this,e,null,npt,Gn,{})}}const rpt="Title TK",spt="Description tk.",xD={title:rpt,description:spt};function opt(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 5.11.2"),console.log("build: 2023-08-08-16:02"),console.log("--- --- --- --- --- ---")}function apt(i){let e,t,n,r;return e=new V$({props:{title:i[1],description:i[2],url:i[3],preloadFont:i[0],keywords:i[4]}}),n=new ipt({}),{c(){xt(e.$$.fragment),t=Nt(),xt(n.$$.fragment)},l(s){wt(e.$$.fragment,s),t=Ut(s),wt(n.$$.fragment,s)},m(s,o){St(e,s,o),Ze(s,t,o),St(n,s,o),r=!0},p:mr,i(s){r||(Ue(e.$$.fragment,s),Ue(n.$$.fragment,s),r=!0)},o(s){Ye(e.$$.fragment,s),Ye(n.$$.fragment,s),r=!1},d(s){s&&fe(t),Mt(e,s),Mt(n,s)}}}function lpt(i,e,t){let{data:n}=e;opt();const r=["https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Regular.woff2","https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Bold.woff2","https://pudding.cool/assets/fonts/national/National2Web-Regular.woff2","https://pudding.cool/assets/fonts/national/National2Web-Bold.woff2"],{title:s,description:o,url:a,keywords:l}=xD;return Yc("copy",xD),Yc("data",n.data),i.$$set=c=>{"data"in c&&t(5,n=c.data)},[r,s,o,a,l,n]}class e0t extends oi{constructor(e){super(),ai(this,e,lpt,apt,Gn,{data:5})}}export{e0t as component};
